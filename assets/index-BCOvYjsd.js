const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/IdentityManager-C8JQBlFw.js","assets/substitute-C5WF5770.js","assets/pe-wasm-Co3DzcyP.js","assets/_commonjsHelpers-DCkdB7M8.js","assets/ElevationLayer-DqS5GhVz.js","assets/MultiOriginJSONSupport-Oi1s1psc.js","assets/ArcGISCachedService-BJf1ovWx.js","assets/TileInfoTilemapCache-Csva3cga.js","assets/TilemapCache-B3Cjy89-.js","assets/ByteSizeUnit-BsxeN7wM.js","assets/LRUCache-DzNwX_CU.js","assets/MemCache-BbdoaGmm.js","assets/memoryEstimations-cFrur3i9.js","assets/ArcGISService-DES2rAJg.js","assets/OperationalLayer-BQR0UVg7.js","assets/layerContainerType-C5CzMsLd.js","assets/commonProperties-B-IiOJOf.js","assets/ElevationInfo-JgKjtv7t.js","assets/lengthUtils-CDEkLj2v.js","assets/PortalLayer-Bfn_oxB5.js","assets/portalItemUtils-GAU2GjqI.js","assets/WorkerHandle-D8rg_P4F.js","assets/layersCreator-Bp5PgERH.js","assets/loadUtils-r9mECtAM.js","assets/fetchService-CaJf49Fx.js","assets/associatedFeatureServiceUtils-yu2GJ4nc.js","assets/lazyLayerLoader-BeUOjWM4.js","assets/portalLayers-D2VE1CaZ.js","assets/styleUtils-WnwDoC9h.js","assets/arcgisLayers-D5mKus15.js","assets/statsWorker-C-hpGsuJ.js","assets/utils-CQUo9tei.js","assets/quantizationUtils-D3PpB7ao.js","assets/heatmapUtils-Dzf0MiEZ.js","assets/vec42-BnNr_Lzs.js","assets/vec4f64-o2zAXfmz.js","assets/utils-YJaNxc1B.js","assets/utils-Bf-D0VZU.js","assets/ClassBreaksDefinition-C-aB-0Jk.js","assets/geometryEngineWorker-CA-tZxOm.js","assets/geometryEngineJSON-Bvf5zUh7.js","assets/geometryEngineBase-B0ZyeKAX.js","assets/json-Wa8cmqdu.js","assets/CSVSourceWorker-DV9IrrUg.js","assets/date-Ctp1FiBW.js","assets/OptimizedFeature-Cmc4IS8F.js","assets/executeQueryForSnapping--wZUCxsl.js","assets/queryUtils-Ds9CE_G1.js","assets/QueryEngine-DdVfl9mi.js","assets/featureConversionUtils-BqGgJklF.js","assets/OptimizedFeatureSet-Blu9Ckm7.js","assets/WhereClauseCache-oCINyqyJ.js","assets/WhereClause-Cr3TLnV3.js","assets/TimeOnly-BJd_XE_O.js","assets/timeSupport-DcBLxLRB.js","assets/QueryEngineCapabilities-B_pTbIiR.js","assets/SnappingCandidate-DGkpYqI6.js","assets/FixedIntervalBinParameters-LwWUn2bp.js","assets/NormalizationBinParametersMixin-CjJMWKZs.js","assets/FieldsIndex--__JKMkT.js","assets/FeatureStore-rYAtxiVl.js","assets/BoundsStore-CRbZpJ_r.js","assets/PooledRBush-BzvfkHSq.js","assets/optimizedFeatureQueryEngineAdapter-d-tPnRZC.js","assets/number-CFLXI9Fb.js","assets/clientSideDefaults-BPnK7OWO.js","assets/defaultsJSON-GKolV7NZ.js","assets/EdgeProcessingWorker-uGAjHlnY.js","assets/workerHelper-B04-7Hyh.js","assets/InterleavedLayout-C00mqD_x.js","assets/BufferView-D0KxYgAz.js","assets/types-D0PSWh4d.js","assets/edgeProcessing-C9h9GLxj.js","assets/deduplicate-BeLHZ6C6.js","assets/Indices-CfCU2dWR.js","assets/VertexAttribute-Cq4MnHjR.js","assets/glUtil-CgIT5rpI.js","assets/VertexElementDescriptor-BLyltQyJ.js","assets/Normals-BeGU14Op.js","assets/ElevationSamplerWorker-DsBwkAZ-.js","assets/MeshLocalVertexSpace-DuiteUA8.js","assets/vertexSpaceConversion-BUkaXppT.js","assets/mat3f64-q3fE-ZOt.js","assets/mat4f64-Dk4dwAN8.js","assets/spatialReferenceEllipsoidUtils-BYsBZJyV.js","assets/computeTranslationToOriginAndRotation-BveyOUsd.js","assets/projectPointToVector-C7Ha1avU.js","assets/meshVertexSpaceUtils-Dau0Be-_.js","assets/vec3-CMpiTgOg.js","assets/vec4-_4-I52wh.js","assets/FeatureServiceSnappingSourceWorker-DeQo5pug.js","assets/symbologySnappingCandidates-wYQ4Z0MH.js","assets/pbfQueryUtils-HNAi_uNz.js","assets/pbf-TZphibxX.js","assets/query-DYVrGv8x.js","assets/queryZScale-CGIhgTZC.js","assets/GeoJSONSourceWorker-CLIxIcZp.js","assets/geojson-CDWeycJs.js","assets/sourceUtils-wkvHVSaA.js","assets/MemorySourceWorker-D5vzvn8S.js","assets/objectIdUtils-4dd1rf9p.js","assets/PBFDecoderWorker-Cd10l_--.js","assets/dehydratedFeatures-B_89XEuz.js","assets/FeaturePipelineWorker-XHr3AHrx.js","assets/defaultCIMValues-Z8gODNqJ.js","assets/enums-BQDXKJnw.js","assets/AttributeStore-CPNUlrX0.js","assets/Utils-DdauoA8s.js","assets/UpdateTracking2D-Bf8IBHcl.js","assets/BidiEngine-QXap_35O.js","assets/GeometryUtils-CF9zyGQA.js","assets/utils-BBgV4jpp.js","assets/rasterizingUtils-Cd-Fnb0q.js","assets/floatRGBA-BBbpw5x1.js","assets/Rect-CUzevAry.js","assets/defaults-BaoV-fz0.js","assets/labelUtils-TH8oGZfH.js","assets/streamLayerUtils-CKwt2uXH.js","assets/MeshWriterRegistry-DWN_NAp-.js","assets/TechniqueType-uMFRS8dR.js","assets/PieChartMeshWriter-DHMsYb0W.js","assets/TurboLine-CgM0radf.js","assets/utils-Be5J5zWO.js","assets/earcut-D9gy186-.js","assets/grouping-CRfRWmzg.js","assets/QueueProcessor-Dwp39X4g.js","assets/operatorGeodeticDensify-Cle9hIFD.js","assets/SimpleGeometryCursor-B92kdZ15.js","assets/geodeticCurveType-CirnHLSB.js","assets/normalizeUtilsSync-r8VcoQUH.js","assets/displayFilterUtils-BEQXfej1.js","assets/ogcFeatureUtils-QQesqY_8.js","assets/parquet-DVhnBTOt.js","assets/CircularArray-CujHzHWW.js","assets/createConnection-DeVPKT7p.js","assets/PointCloudWorker-Dw1oSP21.js","assets/quat-MYA8xVX1.js","assets/quatf64-aQ5IuZRd.js","assets/vec3f32-nZdmKIgz.js","assets/PointCloudUniqueValueRenderer-CJ-yVLSc.js","assets/RendererLegendOptions-CzPIuudE.js","assets/ColorStop-CjHsqQ4X.js","assets/I3SBinaryReader-C9vLcSsW.js","assets/orientedBoundingBox-_eqfxZUw.js","assets/plane-x80nX-sS.js","assets/RasterWorker-DFDHAwg3.js","assets/dataUtils-CUZiWDSV.js","assets/RasterSymbolizer-D4VIY3BB.js","assets/colorUtils-BADZFW2t.js","assets/rasterFunctionHelper-DDJTP1vD.js","assets/rasterProjectionHelper-D-sNGQnL.js","assets/colorRamps-B5wCt1L1.js","assets/PolynomialTransform-B0d9EJ4c.js","assets/SceneLayerSnappingSourceWorker-COQqvhkU.js","assets/lineSegment-2xl08-9r.js","assets/sphere-BQ5ZB9Re.js","assets/Octree-CW_xNZz-.js","assets/SceneLayerWorker-C9YP1UoN.js","assets/projectVectorToVector-DpGcT9dO.js","assets/I3SUtil-CO1v3CYh.js","assets/edgeUtils-DZQMtcNn.js","assets/NormalAttribute.glsl-gdjlGR8E.js","assets/glsl-BH37Aalp.js","assets/ShaderOutput-DnYY5J1_.js","assets/BindType-BBwFZqyN.js","assets/WFSSourceWorker-tSoxGFPi.js","assets/wfsUtils-CGIGeyIc.js","assets/xmlUtils-CtUoQO7q.js","assets/WorkerTileHandler-CdiiI-ZR.js","assets/enums-BRzLM11V.js","assets/config-BOD8--da.js","assets/StyleDefinition-DBsc2ck4.js","assets/SourceLayerData-6cYCGsRu.js","assets/StyleRepository-lhFEOmuk.js","assets/Feature3DPipelineWorker-52sgwZzh.js","assets/HUDMaterial.glsl-CBkJbcSt.js","assets/Geometry-D4aVS-cR.js","assets/renderState-MevOroNg.js","assets/basicInterfaces-CZwQPxTp.js","assets/boundedPlane-BXohhyj2.js","assets/requestImageUtils-Bk8YZVG4.js","assets/TextureFormat-1mYWTFa-.js","assets/triangle-4kW5jU3O.js","assets/HUDMaterial-CFtz7VO8.js","assets/VertexArrayObject-DHDfdKzA.js","assets/dehydratedFeatureUtils-njt-dTB6.js","assets/doublePrecisionUtils-B0owpBza.js","assets/hydratedFeatures-DboyJ8e-.js","assets/ShaderBuilder-DPUaOKaz.js","assets/IntersectorInterfaces-CmNINbyF.js","assets/DefaultMaterial-I7Nq4agw.js","assets/LodResources-Dqo8TtvE.js","assets/TextureCompressionWorker-DdKFs0CJ.js","assets/Popup-1Ai7KDI7.js","assets/unitFormatUtils-22Sm7ukp.js","assets/quantityUtils-mYsORi5g.js","assets/AttachmentInfo-mv_5OgWI.js","assets/labelingInfo-BKbU-5K2.js","assets/SimpleRenderer-QG4WFGL4.js","assets/commonProperties-Cjoc1SFO.js","assets/visualVariableUtils-D3neASu_.js","assets/jsonUtils-D0uTwTFl.js","assets/UniqueValueRenderer-BF3Ti4K9.js","assets/styleUtils-2G0NBrba.js","assets/featureUtils-LRJrvLht.js","assets/utils-OgKH4TI8.js","assets/parser-DAsQTtHB.js","assets/cimSymbolUtils-vAeUgsI8.js","assets/typeUtils-B5LfJ8En.js","assets/ClassBreaksRenderer-D2Tiv1Mu.js","assets/executeQueryJSON-uepionX2.js","assets/FeatureSet-Cu8erNuw.js","assets/shared-Ci9qs7l3.js","assets/FeatureLayer-CZayvNCM.js","assets/FeatureLayerBase-CtKRb1Cy.js","assets/LayerFloorInfo-BeHjwybR.js","assets/Relationship-DolWmHis.js","assets/serviceCapabilitiesUtils-CR0bqX1g.js","assets/infoFor3D-dHKPbXlj.js","assets/editsZScale-404HdNvb.js","assets/APIKeyMixin-D-h4ucHB.js","assets/BlendLayer-DIDCz6DR.js","assets/jsonUtils--jgndNN5.js","assets/CustomParametersMixin-7IxlY8Dn.js","assets/DisplayFilteredLayer-CDxdqi0n.js","assets/scaleUtils-82eOO8r3.js","assets/EditBusLayer-CB8voeXb.js","assets/FeatureEffectLayer-BEfG7oPS.js","assets/FeatureEffect-Bqiw1BNS.js","assets/FeatureFilter-B_Ic7umv.js","assets/FeatureReductionLayer-4cSDQs4U.js","assets/FeatureReductionSelection-D4VR3YSF.js","assets/jsonUtils-CmoRpW-q.js","assets/MD5-C9MwAd2G.js","assets/OrderedLayer-Bo7gyQUv.js","assets/OrderByInfo-DuLW7zDP.js","assets/RefreshableLayer-ooQFJNdP.js","assets/ScaleRangeLayer-Bk87vUHD.js","assets/TemporalLayer-DHMMu_Da.js","assets/TimeInfo-DbBPJg0D.js","assets/TrackableLayer-aM0UO5kE.js","assets/FeatureTemplate-G-ij7qqF.js","assets/FeatureType-DMI1gjxX.js","assets/fieldProperties-CZ0g_JYI.js","assets/TitleCreator-DOllxEuP.js","assets/versionUtils-Bku7od5p.js","assets/popupUtils-BcPEySeu.js","assets/interfaces-CL2NbQte.js","assets/NetworkElement-OaYCO5Jr.js","assets/ReactiveSet-Bri4kzl_.js","assets/layerViewUtils-CMuPTx9a.js","assets/arcadeUtils-C1og27Md.js","assets/arcade-DXC08JII.js","assets/unitConversion-BFwZM-fB.js","assets/ImmutableArray-BPVd6ESQ.js","assets/webStyleSymbolUtils-C6MLMrnx.js","assets/devEnvironmentUtils-CnNDiFMM.js","assets/webStyleAcceptedFormats-CG7ZQ6BV.js","assets/geometryServiceUtils-DNdabnsP.js","assets/project-C2sOnJkq.js","assets/webglDeps-DBdOE5NJ.js","assets/FramebufferObject-CHat1_4B.js","assets/ProgramTemplate-B6BR18rz.js","assets/NestedMap-GuqgquCN.js","assets/mapViewDeps-BL38ngkY.js","assets/FeatureCommandQueue-D1NCt0Vn.js","assets/GraphShaderModule-OVCL3yhU.js","assets/WGLContainer-CCZO0g_A.js","assets/Container-DHvNfQYc.js","assets/SDFHelper-iTY9Vw69.js","assets/OverrideHelper-D7HuFmBg.js","assets/GridShader-MYiVCmrX.js","assets/testSVGPremultipliedAlpha-BH3Vq0_r.js","assets/RenderingContext-unCx9OZm.js","assets/CIMResourceManager-D7UCaOjv.js","assets/utils-CdLuuZ_S.js","assets/VertexStream-_5pBsd72.js","assets/utils-ehcGqGxa.js","assets/GraphicsView2D-D0XiOYjZ.js","assets/GraphicContainer-CsueFAle.js","assets/AGraphicContainer-CDB9-Dyj.js","assets/TechniqueInstance-CNQ6fZml.js","assets/TileContainer-Cb1lUW9E.js","assets/gridUtils-uOpmPd7r.js","assets/geodesicUtils-l2kYOEqz.js","assets/TileLayerView2D-B5-adJpk.js","assets/imageUtils-s3PR6SQb.js","assets/BitmapTechnique-DEyi_kDq.js","assets/LayerView-Bh1bNDvF.js","assets/HighlightGraphicContainer-IcOAG9dR.js","assets/RefreshableLayerView-nU9-K61T.js","assets/MapServiceLayerViewHelper-D9ldpIz1.js","assets/floorFilterUtils-DZ5C6FQv.js","assets/drapedUtils-DW7jZrty.js","assets/sublayerUtils-V4EdyIqY.js","assets/popupUtils-oqbE8F_z.js","assets/FeatureLayerView2D-CB-Mj7aj.js","assets/timeSupport-CxGvIUMY.js","assets/AttributeBinsFeatureSet-YRnx344E.js","assets/AttributeBinsQuery-CtQellzI.js","assets/constants-B4mRqufT.js","assets/BaseDynamicLayerView2D-DV36HrXx.js","assets/BitmapContainer-DhEno5xg.js","assets/ExportStrategy-ByUZekpP.js","assets/CatalogLayerView2D-3qoYsA4I.js","assets/CatalogDynamicGroupLayerView2D-BnL_XOez.js","assets/CatalogFootprintLayerView2D-BHr04P2u.js","assets/GeoRSSLayerView2D-DgkKIB2A.js","assets/GraphicsLayerView2D-DOSsT8VL.js","assets/GroupLayerView2D-BX1NFs7s.js","assets/ImageryLayerView2D-BIHGtxCA.js","assets/RasterVFDisplayObject-eSlOPmpa.js","assets/ImageryTileLayerView2D-D6RSTCZP.js","assets/rasterFieldUtils-CHt7qaTX.js","assets/rasterUtils-BVRJoLkC.js","assets/RawBlockCache-BHbXnzux.js","assets/KMLLayerView2D-jGPtHcm5.js","assets/kmlUtils-DcY3YidJ.js","assets/KnowledgeGraphLayerView2D-CUBYFenN.js","assets/MapImageLayerView2D-C5VU__nm.js","assets/ExportImageParameters-BkVTilyg.js","assets/MapNotesLayerView2D-BeFHzEOm.js","assets/MediaLayerView2D-DuEftcZk.js","assets/mediaLayerUtils-UqDNA1zC.js","assets/OverlayContainer-Cgi_4SfA.js","assets/OGCFeatureLayerView2D-D1dCdbTS.js","assets/RouteLayerView2D-CbAujnmV.js","assets/Stop-CSSECxDa.js","assets/networkEnums-F2v8c2U3.js","assets/StreamLayerView2D-C2Ruuqu_.js","assets/SubtypeGroupLayerView2D-D64TYauQ.js","assets/VectorTileLayerView2D-CqZ2iZng.js","assets/VideoLayerView2D-CYEB1wpc.js","assets/GraphicsLayer-i2TSWouj.js","assets/TelemetryDisplay-D_CTIQoR.js","assets/WMSLayerView2D-Bi5JsvIS.js","assets/ExportWMSImageParameters-l0mLoxyP.js","assets/WMTSLayerView2D-CpXdOnxZ.js","assets/apng-C2oGlM3M.js","assets/index-CfWvcDym.js","assets/index-DDoFGu1Y.js","assets/guid-BDWAkmkV.js","assets/useT9n-4151hjTB.js","assets/index-Bm7SSVW8.js","assets/dom-rUppw8Km.js","assets/observers-ByoypgsJ.js","assets/ref-hHDUa5b7.js","assets/static-gJLQfnwh.js","assets/form-CfYYAU6U.js","assets/interactive-CQ3ns4XB.js","assets/label-DukHDA_D.js","assets/component-x4pLxDPh.js"])))=>i.map(i=>d[i]);
(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const n of s)if(n.type==="childList")for(const o of n.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function r(s){const n={};return s.integrity&&(n.integrity=s.integrity),s.referrerPolicy&&(n.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?n.credentials="include":s.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function i(s){if(s.ep)return;s.ep=!0;const n=r(s);fetch(s.href,n)}})();function c(e,t,r,i){var s,n=arguments.length,o=n<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,r):i;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(e,t,r,i);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(n<3?s(o):n>3?s(t,r,o):s(t,r))||o);return n>3&&o&&Object.defineProperty(t,r,o),o}function qY(e,t){return function(r,i){t(r,i,e)}}function WY(e,t,r,i){function s(n){return n instanceof r?n:new r(function(o){o(n)})}return new(r||(r=Promise))(function(n,o){function a(p){try{h(i.next(p))}catch(f){o(f)}}function l(p){try{h(i.throw(p))}catch(f){o(f)}}function h(p){p.done?n(p.value):s(p.value).then(a,l)}h((i=i.apply(e,[])).next())})}function ZY(e,t,r){if(t!=null){if(typeof t!="object"&&typeof t!="function")throw new TypeError("Object expected.");var i,s;if(i===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");i=t[Symbol.dispose]}if(typeof i!="function")throw new TypeError("Object not disposable.");s&&(i=function(){try{s.call(this)}catch(n){return Promise.reject(n)}}),e.stack.push({value:t,dispose:i,async:r})}return t}var gI=typeof SuppressedError=="function"?SuppressedError:function(e,t,r){var i=new Error(r);return i.name="SuppressedError",i.error=e,i.suppressed=t,i};function JY(e){function t(n){e.error=e.hasError?new gI(n,e.error,"An error was suppressed during disposal."):n,e.hasError=!0}var r,i=0;function s(){for(;r=e.stack.pop();)try{if(!r.async&&i===1)return i=0,e.stack.push(r),Promise.resolve().then(s);if(r.dispose){var n=r.dispose.call(r.value);if(r.async)return i|=2,Promise.resolve(n).then(s,function(o){return t(o),s()})}else i|=1}catch(o){t(o)}if(i===1)return e.hasError?Promise.reject(e.error):Promise.resolve();if(e.hasError)throw e.error}return s()}const _I="modulepreload",vI=function(e){return"/zoo-map/"+e},mw={},N=function(t,r,i){let s=Promise.resolve();if(r&&r.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),a=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));s=Promise.allSettled(r.map(l=>{if(l=vI(l),l in mw)return;mw[l]=!0;const h=l.endsWith(".css"),p=h?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${p}`))return;const f=document.createElement("link");if(f.rel=h?"stylesheet":_I,h||(f.as="script"),f.crossOrigin="",f.href=l,a&&f.setAttribute("nonce",a),document.head.appendChild(f),h)return new Promise((m,y)=>{f.addEventListener("load",m),f.addEventListener("error",()=>y(new Error(`Unable to preload CSS for ${l}`)))})}))}function n(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return s.then(o=>{for(const a of o||[])a.status==="rejected"&&n(a.reason);return t().catch(n)})};let nn;function A(e){return typeof nn[e]=="function"?nn[e]=nn[e](globalThis):nn[e]}var i$,s$,n$,o$;nn=(i$=globalThis.dojoConfig)!=null&&i$.has||(s$=globalThis.esriConfig)!=null&&s$.has?{...(n$=globalThis.dojoConfig)==null?void 0:n$.has,...(o$=globalThis.esriConfig)==null?void 0:o$.has}:{},A.add=(e,t,r,i)=>{(i||nn[e]===void 0)&&(nn[e]=t),r&&A(e)},A.cache=nn,A.add("big-integer-warning-enabled",!0),A.add("esri-deprecation-warnings",!0),A.add("esri-tests-disable-screenshots",!1),A.add("esri-tests-use-full-window",!1),A.add("esri-tests-post-to-influx",!0),A.add("esri-cim-animations-enable-status","enabled"),A.add("esri-cim-animations-spotlight",!1),A.add("esri-cim-animations-freeze-time",!1),A.add("enable-feature:multiple-highlights",!0),(()=>{var t;A.add("host-webworker",globalThis.WorkerGlobalScope!==void 0&&self instanceof globalThis.WorkerGlobalScope);const e=typeof window<"u"&&typeof location<"u"&&typeof document<"u"&&window.location===location&&window.document===document;if(A.add("host-browser",e),A.add("host-node",typeof globalThis.process=="object"&&((t=globalThis.process.versions)==null?void 0:t.node)&&globalThis.process.versions.v8),A.add("dom",e),A("host-browser")){const r=navigator,i=r.userAgent,s=r.appVersion,n=parseFloat(s);if(A.add("wp",parseFloat(i.split("Windows Phone")[1])||void 0),A.add("msapp",parseFloat(i.split("MSAppHost/")[1])||void 0),A.add("khtml",s.includes("Konqueror")?n:void 0),A.add("edge",parseFloat(i.split("Edge/")[1])||void 0),A.add("opr",parseFloat(i.split("OPR/")[1])||void 0),A.add("webkit",!A("wp")&&!A("edge")&&parseFloat(i.split("WebKit/")[1])||void 0),A.add("chrome",!A("edge")&&!A("opr")&&parseFloat(i.split("Chrome/")[1])||void 0),A.add("android",!A("wp")&&parseFloat(i.split("Android ")[1])||void 0),A.add("safari",!s.includes("Safari")||A("wp")||A("chrome")||A("android")||A("edge")||A("opr")?void 0:parseFloat(s.split("Version/")[1])),A.add("mac",s.includes("Macintosh")),!A("wp")&&/(iPhone|iPod|iPad)/.test(i)){const o=RegExp.$1.replace(/P/,"p"),a=/OS ([\d_]+)/.test(i)?RegExp.$1:"1",l=parseFloat(a.replace(/_/,".").replaceAll("_",""));A.add(o,l),A.add("ios",l)}A("webkit")||(!i.includes("Gecko")||A("wp")||A("khtml")||A("edge")||A.add("mozilla",n),A("mozilla")&&A.add("ff",parseFloat(i.split("Firefox/")[1]||i.split("Minefield/")[1])||void 0))}})(),(()=>{if(globalThis.navigator){const e=navigator.userAgent,t=/Android|webOS|iPhone|iPad|iPod|BlackBerry|Opera Mini|IEMobile/i.test(e),r=/iPhone/i.test(e);t&&A.add("esri-mobile",t),r&&A.add("esri-iPhone",r),A.add("esri-geolocation",!!navigator.geolocation)}A.add("esri-wasm","WebAssembly"in globalThis),A.add("esri-performance-mode-frames-between-render",20),A.add("esri-force-performance-mode",!1),A.add("esri-shared-array-buffer",()=>{const e="SharedArrayBuffer"in globalThis,t=globalThis.crossOriginIsolated===!1;return e&&!t}),A.add("wasm-simd",()=>{const e=[0,97,115,109,1,0,0,0,1,5,1,96,0,1,123,3,2,1,0,10,10,1,8,0,65,0,253,15,253,98,11];return WebAssembly.validate(new Uint8Array(e))}),A.add("esri-atomics","Atomics"in globalThis),A.add("esri-workers","Worker"in globalThis),A.add("web-feat:cache","caches"in globalThis),A.add("esri-workers-arraybuffer-transfer",!A("safari")||Number(A("safari"))>=12),A.add("workers-pool-size",8),A.add("featurelayer-simplify-thresholds",[.5,.5,.5,.5]),A.add("featurelayer-simplify-payload-size-factors",[1,1,4]),A.add("featurelayer-fast-triangulation-enabled",!0),A.add("featurelayer-animation-enabled",!0),A.add("featurelayer-snapshot-enabled",!0),A.add("featurelayer-snapshot-point-min-threshold",8e4),A.add("featurelayer-snapshot-point-max-threshold",4e5),A.add("featurelayer-snapshot-point-coverage",.1),A.add("featurelayer-query-max-depth",4),A.add("featurelayer-query-pausing-enabled",!1),A.add("featurelayer-advanced-symbols",!1),A.add("featurelayer-pbf",!0),A.add("featurelayer-pbf-statistics",!1),A.add("feature-layers-workers",!0),A.add("feature-polyline-generalization-factor",1),A.add("mapview-transitions-duration",200),A.add("mapview-essential-goto-duration",200),A.add("mapview-srswitch-adjust-rotation-scale-threshold",24e6),A.add("mapserver-pbf-version-support",10.81),A.add("mapservice-popup-identify-max-tolerance",20),A.add("request-queue-concurrency-hosted",16),A.add("request-queue-concurrency-non-hosted",4),A.add("curve-densification-coarse-segments",128),A.add("curve-densification-max-segments",2e3),A.add("curve-densification-min-segments",3),A.add("curve-densification-pixels-per-segment",16),A.add("view-readyState-waiting-delay",1e3),A.add("gradient-depth-bias",.01),A.add("gradient-depth-epsilon",1e-8),A("host-webworker")||A("host-browser")&&(A.add("esri-csp-restrictions",()=>{try{new Function}catch{return!0}return!1}),A.add("esri-image-decode",()=>{if("decode"in new Image){const e=new Image;return e.src='data:image/svg+xml;charset=UTF-8,<svg version="1.1" xmlns="http://www.w3.org/2000/svg"></svg>',void e.decode().then(()=>{A.add("esri-image-decode",!0,!0,!0)}).catch(()=>{A.add("esri-image-decode",!1,!0,!0)})}return!1}),A.add("esri-url-encodes-apostrophe",()=>{const e=window.document.createElement("a");return e.href="?'",e.href.includes("?%27")}))})();function YY(e){}function wI(e){return()=>e}function KY(e){return e}let ld=class Un{constructor(t=1){this._seed=t}set seed(t){this._seed=t??Math.random()*Un._m}getInt(){return this._seed=(Un._a*this._seed+Un._c)%Un._m,this._seed}getFloat(){return this.getInt()/(Un._m-1)}getIntRange(t,r){return Math.round(this.getFloatRange(t,r))}getFloatRange(t,r){const i=r-t;return t+this.getInt()/Un._m*i}};ld._m=2147483647,ld._a=48271,ld._c=0;const bI=1.5,XY=1/bI,QY=.5;function eK(e,t){return t?e.filter((r,i,s)=>s.findIndex(t.bind(null,r))===i):Array.from(new Set(e))}function gf(e,t,r){if(e==null&&t==null)return!0;if(e==null||t==null||e.length!==t.length)return!1;if(r){for(let i=0;i<e.length;i++)if(!r(e[i],t[i]))return!1}else for(let i=0;i<e.length;i++)if(e[i]!==t[i])return!1;return!0}function yw(e,t,r){let i,s;return r?(i=t.filter(n=>!e.some(o=>r(o,n))),s=e.filter(n=>!t.some(o=>r(o,n)))):(i=t.filter(n=>!e.includes(n)),s=e.filter(n=>!t.includes(n))),{added:i,removed:s}}function tK(e){return e&&typeof e.length=="number"}let p$=class{constructor(){this.last=0}};const f$=new p$;function Gy(e,t,r,i){i=i||f$;const s=Math.max(0,i.last-10);for(let o=s;o<r;++o)if(e[o]===t)return i.last=o,o;const n=Math.min(s,r);for(let o=0;o<n;++o)if(e[o]===t)return i.last=o,o;return-1}function SI(e,t,r,i){const s=e.length,n=Gy(e,t,s,i);if(n!==-1)return e[n]=e[s-1],e.pop(),t}const kr=new Set;function TI(e,t,r=e.length,i=t.length,s,n){if(i===0||r===0)return r;kr.clear();for(let a=0;a<i;++a)kr.add(t[a]);s=s||f$;const o=Math.max(0,s.last-10);for(let a=o;a<r;++a)if(kr.has(e[a])&&(n==null||n.push(e[a]),kr.delete(e[a]),e[a]=e[r-1],--r,--a,kr.size===0||r===0))return kr.clear(),r;for(let a=0;a<o;++a)if(kr.has(e[a])&&(n==null||n.push(e[a]),kr.delete(e[a]),e[a]=e[r-1],--r,--a,kr.size===0||r===0))return kr.clear(),r;return kr.clear(),r}function iK(e,t,r){const i=e.length;if(t>=i)return e.slice();const s=m$(r),n=new Set,o=[];for(;o.length<t;){const a=Math.floor(s()*i);n.has(a)||(n.add(a),o.push(e[a]))}return o}function m$(e){return e?(gw.seed=e,()=>gw.getFloat()):Math.random}const gw=new ld;function sK(e,t){const r=m$(t);for(let i=e.length-1;i>0;i--){const s=Math.floor(r()*(i+1)),n=e[i];e[i]=e[s],e[s]=n}return e}function $I(e,t){const r=e.indexOf(t);return r!==-1?(e.splice(r,1),t):null}function tl(e,t){return e!=null}const nK=[];function oK(e){return e instanceof ArrayBuffer}function X1(e){var t;return((t=e==null?void 0:e.constructor)==null?void 0:t.name)==="Int8Array"}function y$(e){var t;return((t=e==null?void 0:e.constructor)==null?void 0:t.name)==="Uint8Array"}function g$(e){var t;return((t=e==null?void 0:e.constructor)==null?void 0:t.name)==="Uint8ClampedArray"}function Q1(e){var t;return((t=e==null?void 0:e.constructor)==null?void 0:t.name)==="Int16Array"}function _$(e){var t;return((t=e==null?void 0:e.constructor)==null?void 0:t.name)==="Uint16Array"}function e_(e){var t;return((t=e==null?void 0:e.constructor)==null?void 0:t.name)==="Int32Array"}function v$(e){var t;return((t=e==null?void 0:e.constructor)==null?void 0:t.name)==="Uint32Array"}function _f(e){var t;return((t=e==null?void 0:e.constructor)==null?void 0:t.name)==="Float32Array"}function vf(e){var t;return((t=e==null?void 0:e.constructor)==null?void 0:t.name)==="Float64Array"}function EI(e){return"buffer"in e}const w$=1024;function aK(e){return vf(e)||_f(e)||e_(e)||Q1(e)||X1(e)}function lK(e){return vf(e)||_f(e)}function uK(e){return vf(e)?179769e303:_f(e)?3402823e32:v$(e)?4294967295:_$(e)?65535:y$(e)||g$(e)?255:e_(e)?2147483647:Q1(e)?32767:X1(e)?127:256}function MI(e,t){let r;for(r in e)e.hasOwnProperty(r)&&e[r]===void 0&&delete e[r];return e}function C(e){if(!e||typeof e!="object"||typeof e=="function")return e;const t=T$(e);if(t!=null)return t;if(cp(e))return e.clone();if(b$(e))return e.map(C);if(S$(e))throw new Error("Trying to clone an unclonable Accessor instance");const r={};for(const i of Object.getOwnPropertyNames(e))r[i]=C(e[i]);return r}function zy(e){if(!e||typeof e!="object"||typeof e=="function"||"HTMLElement"in globalThis&&e instanceof HTMLElement)return e;const t=T$(e);if(t!=null)return t;if(b$(e)){let i=!0;const s=e.map(n=>{const o=zy(n);return n!=null&&o==null&&(i=!1),o});return i?s:null}if(cp(e))return e.clone();if(e instanceof File||e instanceof Blob)return e;if(S$(e))return null;const r=new(Object.getPrototypeOf(e)).constructor;for(const i of Object.getOwnPropertyNames(e)){const s=e[i],n=zy(s);if(s!=null&&n==null)return null;r[i]=n}return r}function cp(e){return typeof e.clone=="function"}function b$(e){return typeof e.map=="function"&&typeof e.forEach=="function"}function S$(e){return typeof e.notifyChange=="function"&&typeof e.watch=="function"}function _w(e){if(Object.prototype.toString.call(e)!=="[object Object]")return!1;const t=Object.getPrototypeOf(e);return t===null||t===Object.prototype}function T$(e){if(X1(e)||y$(e)||g$(e)||Q1(e)||_$(e)||e_(e)||v$(e)||_f(e)||vf(e))return e.slice();if(e instanceof Date)return new Date(e.getTime());if(e instanceof ArrayBuffer)return e.slice(0,e.byteLength);if(e instanceof Map){const t=new Map;for(const[r,i]of e)t.set(r,C(i));return t}if(e instanceof Set){const t=new Set;for(const r of e)t.add(C(r));return t}return null}function t_(e,t){return e===t||typeof e=="number"&&isNaN(e)&&typeof t=="number"&&isNaN(t)||typeof(e==null?void 0:e.getTime)=="function"&&typeof(t==null?void 0:t.getTime)=="function"&&e.getTime()===t.getTime()||!1}function $$(e,t){return e===t||(e==null||typeof e=="string"?e===t:typeof e=="number"?e===t||typeof t=="number"&&isNaN(e)&&isNaN(t):e instanceof Date?t instanceof Date&&e.getTime()===t.getTime():Array.isArray(e)?Array.isArray(t)&&gf(e,t):e instanceof Set?t instanceof Set&&AI(e,t):e instanceof Map?t instanceof Map&&PI(e,t):!!_w(e)&&_w(t)&&xI(e,t))}function xI(e,t){if(e===null||t===null)return!1;const r=Object.keys(e);if(t===null||Object.keys(t).length!==r.length)return!1;for(const i of r)if(e[i]!==t[i]||!Object.prototype.hasOwnProperty.call(t,i))return!1;return!0}function AI(e,t){if(e.size!==t.size)return!1;for(const r of e)if(!t.has(r))return!1;return!0}function PI(e,t){if(e.size!==t.size)return!1;for(const[r,i]of e){const s=t.get(r);if(s!==i||s===void 0&&!t.has(r))return!1}return!0}function OI(e,t,r=!1){return M$(e,t,r)}function wf(e,t){if(t!=null)return t[e]||E$(e.split("."),!1,t)}function wl(e,t,r){const i=e.split("."),s=i.pop(),n=E$(i,!0,r);n&&s&&(n[s]=t)}function vw(e,t){if(e==null&&t==null)return!1;if(e==null||t==null)return!0;if(typeof e=="object"){if(Array.isArray(e)){const r=t;if(e.length!==r.length)return!0;for(let i=0;i<e.length;i++)if(vw(e[i],r[i]))return!0;return!1}if(Object.keys(e).length!==Object.keys(t).length)return!0;for(const r in e)if(vw(e[r],t[r]))return!0;return!1}return e!==t}function E$(e,t,r){let i=r;for(const s of e){if(i==null)return;if(!(s in i)){if(!t)return;i[s]={}}i=i[s]}return i}function M$(e,t,r){return t?Object.keys(t).reduce((i,s)=>{let n=i[s],o=t[s];return n===o?i:n===void 0?(i[s]=C(o),i):(Array.isArray(o)||Array.isArray(i)?(n=n?Array.isArray(n)?i[s]=n.slice():i[s]=[n]:i[s]=[],o&&(Array.isArray(o)||(o=[o]),r?o.forEach(a=>{n.includes(a)||n.push(a)}):i[s]=o.slice())):o&&typeof o=="object"?i[s]=M$(n,o,r):i.hasOwnProperty(s)&&!t.hasOwnProperty(s)||(i[s]=o),i)},e||{}):e}var a$;const ye={apiKey:void 0,applicationName:"",applicationUrl:(a$=globalThis.location)==null?void 0:a$.href,assetsPath:"",fontsUrl:"https://static.arcgis.com/fonts",geometryServiceUrl:"https://utility.arcgisonline.com/arcgis/rest/services/Geometry/GeometryServer",geoRSSServiceUrl:"https://utility.arcgis.com/sharing/rss",kmlServiceUrl:"https://utility.arcgis.com/sharing/kml",userPrivilegesApplied:!0,portalUrl:"https://www.arcgis.com",respectPrefersReducedMotion:!0,routeServiceUrl:"https://route-api.arcgis.com/arcgis/rest/services/World/Route/NAServer/Route_World",workers:{loaderConfig:{has:{},paths:{},map:{},packages:[]}},request:{crossOriginNoCorsDomains:null,httpsDomains:["arcgis.com","arcgisonline.com","esrikr.com","premiumservices.blackbridge.com","esripremium.accuweather.com","gbm.digitalglobe.com","firstlook.digitalglobe.com","msi.digitalglobe.com"],interceptors:[],internalInterceptors:[],maxUrlLength:2e3,priority:"high",proxyRules:[],proxyUrl:null,timeout:62e3,trustedServers:[],useIdentity:!0},log:{interceptors:[],level:null}};if(globalThis.esriConfig&&(OI(ye,globalThis.esriConfig,!0),delete ye.has),!ye.assetsPath){{const e="4.32";ye.assetsPath=`https://js.arcgis.com/${e}/@arcgis/core/assets`}ye.defaultAssetsPath=ye.assetsPath}const CI=/\{([^}]+)\}/g;function ww(e){return e??""}function r_(e,t){return t?e.replaceAll(CI,typeof t=="object"?(r,i)=>ww(wf(i,t)):(r,i)=>ww(t(i))):e}function cK(e,t){return e.replaceAll(/([.$?*|{}()[\]\\/+\-^])/g,r=>t!=null&&t.includes(r)?r:`\\${r}`)}function x$(e){let t=0;for(let r=0;r<e.length;r++)t=(t<<5)-t+e.charCodeAt(r),t|=0;return t}let bw;function hK(e){return bw??(bw=new DOMParser),bw.parseFromString(e||"","text/html").body.innerText||""}function dK(e,t){return new RegExp(`{${t}}`,"ig").test(e)}function pK(e,...t){let r=e[0];for(let i=0;i<t.length;++i)r+=t[i]+e[i+1];return r}const Sw={info:0,warn:1,error:2,none:3};let U=class Yt{constructor(t){this.level=null,this._module="",this._parent=null,this.writer=null,this._loggedMessages={error:new Map,warn:new Map,info:new Map},t.level!=null&&(this.level=t.level),t.writer!=null&&(this.writer=t.writer),this._module=t.module,Yt._loggers.set(this.module,this);const r=this.module.lastIndexOf(".");r!==-1&&(this._parent=Yt.getLogger(this.module.slice(0,r)))}get module(){return this._module}get parent(){return this._parent}error(...t){this._log("error","always",...t)}warn(...t){this._log("warn","always",...t)}info(...t){this._log("info","always",...t)}errorOnce(...t){this._log("error","once",...t)}warnOnce(...t){this._log("warn","once",...t)}infoOnce(...t){this._log("info","once",...t)}errorOncePerTick(...t){this._log("error","oncePerTick",...t)}warnOncePerTick(...t){this._log("warn","oncePerTick",...t)}infoOncePerTick(...t){this._log("info","oncePerTick",...t)}get test(){}static get test(){}static getLogger(t){return t=typeof t!="string"?t.declaredClass:t,Yt._loggers.get(t)||new Yt({module:t})}_log(t,r,...i){if(this._matchLevel(t)){if(r!=="always"&&!Yt._throttlingDisabled){const s=RI(i),n=this._loggedMessages[t].get(s);if(r==="once"&&n!=null||r==="oncePerTick"&&n&&n>=Yt._tickCounter)return;this._loggedMessages[t].set(s,Yt._tickCounter),Yt._scheduleTickCounterIncrement()}for(const s of ye.log.interceptors)if(s(t,this.module,...i))return;this._inheritedWriter()(t,this.module,...i)}}_parentWithMember(t,r){let i=this;for(;i!=null;){const s=i[t];if(s!=null)return s;i=i.parent}return r}_inheritedWriter(){return this._parentWithMember("writer",II)}_matchLevel(t){const r=ye.log.level||"warn";return Sw[this._parentWithMember("level",r)]<=Sw[t]}static _scheduleTickCounterIncrement(){Yt._tickCounterScheduled||(Yt._tickCounterScheduled=!0,Promise.resolve().then(()=>{Yt._tickCounter++,Yt._tickCounterScheduled=!1}))}};function II(e,t,...r){console[e](`[${t}]`,...r)}function RI(...e){return x$(JSON.stringify(e,(r,i)=>typeof i!="object"||Array.isArray(i)?i:"[Object]"))}U._loggers=new Map,U._tickCounter=0,U._tickCounterScheduled=!1,U._throttlingDisabled=!1;function kI(e,t){return e.replaceAll(/\$\{([^\s:}]*)(?::([^\s:}]+))?\}/g,(r,i)=>i===""?"$":(wf(i,t)??"").toString())}let A$=class{constructor(t,r,i=void 0){this.name=t,this.details=i,this.message=(r&&kI(r,i))??""}toString(){return"["+this.name+"]: "+this.message}},I=class P$ extends A${constructor(t,r,i){super(t,r,i)}toJSON(){if(this.details!=null)try{return{name:this.name,message:this.message,details:JSON.parse(JSON.stringify(this.details,(t,r)=>{if(r&&typeof r=="object"&&typeof r.toJSON=="function")return r;try{return C(r)}catch{return"[object]"}}))}}catch(t){throw U.getLogger("esri.core.Error").error(t),t}return{name:this.name,message:this.message,details:this.details}}static fromJSON(t){return new P$(t.name,t.message,t.details)}};I.prototype.type="error";const Tw=new WeakMap;function NI(e,t,r=!1){const i=`🛑 DEPRECATED - ${t}`;if(!r)return void e.warn(i);let s=Tw.get(e);s||(s=new Set,Tw.set(e,s)),s.has(t)||(s.add(t),e.warn(i))}function LI(e,t,r={}){if(A("esri-deprecation-warnings")){const{moduleName:i}=r;vc(e,`Function: ${(i?i+"::":"")+t+"()"}`,r)}}function DI(e,t,r={}){if(A("esri-deprecation-warnings")){const{moduleName:i}=r;vc(e,`Property: ${(i?i+"::":"")+t}`,r)}}function FI(e,t,r={}){A("esri-deprecation-warnings")&&vc(e,`Multiple argument constructor: ${t}`,{warnOnce:!0,replacement:`new ${t}({ <your properties here> })`,...r})}function vc(e,t,r={}){if(A("esri-deprecation-warnings")){const{replacement:i,version:s,see:n,warnOnce:o}=r;let a=t;if(i&&(a+=`
	🛠️ Replacement: ${i}`),s&&(a+=`
	⚙️ Version: ${s}`),n)if(Array.isArray(n)){a+=`
	🔗 See for more details:`;for(const l of n)a+=`
		${l}`}else a+=`
	🔗 See ${n} for more details.`;NI(e,a,o)}}function mK(e){const t=[];return function*(){yield*t;for(const r of e)t.push(r),yield r}}function UI(e,t){for(const r of e)if(r!=null&&t(r))return r}function hp(e){return e!=null&&typeof e[Symbol.iterator]=="function"}let bl=class{constructor(){this._groups=new Map}destroy(){this.removeAll()}get size(){let t=0;return this._groups.forEach(r=>{t+=r.length}),t}add(t,r){if(hp(t)){const i=this._getOrCreateGroup(r);for(const s of t)Ew(s)&&i.push(s)}else Ew(t)&&this._getOrCreateGroup(r).push(t);return this}forEach(t,r){if(typeof t=="function")this._groups.forEach(i=>i.forEach(t));else{const i=this._getGroup(t);i&&r&&i.forEach(r)}}has(t){return this._groups.has(vh(t))}remove(t){if(typeof t!="string"&&hp(t)){for(const r of t)this.remove(r);return this}return this.has(t)?($w(this._getGroup(t)),this._groups.delete(vh(t)),this):this}removeAll(){return this._groups.forEach($w),this._groups.clear(),this}removeReference(t){return this._groups.delete(t),this}_getOrCreateGroup(t){if(this.has(t))return this._getGroup(t);const r=[];return this._groups.set(vh(t),r),r}_getGroup(t){return this._groups.get(vh(t))}};function vh(e){return e||"_default_"}function $w(e){for(const t of e)t instanceof bl?t.removeAll():t.remove()}function Ew(e){return e!=null&&(!!e.remove||e instanceof bl)}function O$(e,t){if(e==null)throw new Error(t??"value is None")}function Ne(e){return e==null||e.destroy(),null}function gK(e){return e==null||e.dispose(),null}function Ie(e){return e==null||e.remove(),null}function rl(e){return e==null||e.abort(),null}function _K(e){return e==null||e.release(),null}function vK(e,t,r){return e!=null&&t!=null?r!=null?r(e,t):e.equals(t):e===t}function jI(e,t){let r;return e.some((i,s)=>(r=t(i,s),r!=null)),r??void 0}const C$=Symbol("Accessor-beforeDestroy"),GI={remove:()=>{}};function ce(e){return e?{remove(){e&&(e(),e=void 0)}}:GI}function I$(e){e.forEach(t=>t==null?void 0:t.remove())}function wK(e){I$(e),e.length=0}function Wc(e){return ce(()=>I$(e))}function bK(e){return ce(()=>{var t;return(t=e())==null?void 0:t.remove()})}function SK(e){return ce(()=>e==null?void 0:e.abort())}function zI(e){return ce(e!=null?()=>e.destroy():void 0)}function fn(e){return e.__accessor__??null}function VI(e,t){var r;return((r=e==null?void 0:e.metadata)==null?void 0:r[t])!=null}function ud(e,t,r){return r?dp(e,t,{policy:r,path:""}):dp(e,t,null)}function dp(e,t,r){return t?Object.keys(t).reduce((i,s)=>{const n=s;let o=null,a="merge";if(r&&(o=r.path?`${r.path}.${s}`:s,a=r.policy(o)),a==="replace"||a==="replace-arrays"&&Array.isArray(i[n]))return i[n]=t[n],i;if(i[n]===void 0)return i[n]=C(t[n]),i;let l=i[n],h=t[n];if(l===h)return i;if(Array.isArray(h)||Array.isArray(i))l=l?Array.isArray(l)?i[n]=l.slice():i[n]=[l]:i[n]=[],h&&(Array.isArray(h)||(h=[h]),h.forEach(p=>{l.includes(p)||l.push(p)}));else if(h&&typeof h=="object")if(r){const p=r.path;r.path=o,i[n]=dp(l,h,r),r.path=p}else i[n]=dp(l,h,null);else i.hasOwnProperty(s)&&!t.hasOwnProperty(s)||(i[n]=h);return i},e||{}):e}function R$(e){return Array.isArray(e)?e:e.split(".")}function Mw(e){return e.includes(",")?e.split(",").map(t=>t.trim()):[e.trim()]}function BI(e){if(Array.isArray(e)){const t=[];for(const r of e)t.push(...Mw(r));return t}return Mw(e)}function k$(e,t,r,i){const s=BI(t);if(s.length!==1){const n=s.map(o=>i(e,o,r));return Wc(n)}return i(e,s[0],r)}function N$(e,t){const r=e[e.length-1]==="?"?e.slice(0,-1):e;if(t.getItemAt!=null||Array.isArray(t)){const s=parseInt(r,10);if(!isNaN(s))return Array.isArray(t)?t[s]:t.at(s)}const i=fn(t);return VI(i,r)?i.get(r):t[r]}function L$(e,t,r){if(e==null)return e;const i=N$(t[r],e);return!i&&r<t.length-1?void 0:r===t.length-1?i:L$(i,t,r+1)}function Zc(e,t,r=0){return typeof t!="string"||t.includes(".")?L$(e,R$(t),r):N$(t,e)}function cs(e,t){return Zc(e,t)}function xw(e,t){return Zc(t,e)!==void 0}var zt;(function(e){e[e.INITIALIZING=0]="INITIALIZING",e[e.CONSTRUCTING=1]="CONSTRUCTING",e[e.CONSTRUCTED=2]="CONSTRUCTED",e[e.DESTROYED=3]="DESTROYED"})(zt||(zt={}));function Jc(e){let t=e.constructor.__accessorMetadata__;const r=Object.prototype.hasOwnProperty.call(e.constructor,"__accessorMetadata__");if(t){if(!r){t=Object.create(t);for(const i in t)t[i]=C(t[i]);Object.defineProperty(e.constructor,"__accessorMetadata__",{value:t,enumerable:!1,configurable:!0,writable:!0})}}else t={},Object.defineProperty(e.constructor,"__accessorMetadata__",{value:t,enumerable:!1,configurable:!0,writable:!0});return e.constructor.__accessorMetadata__}function bf(e,t){const r=Jc(e);let i=r[t];return i||(i=r[t]={}),i}function HI(e,t){return ud(e,t,WI)}const qI=/^(?:[^.]+\.)?(?:value|type|(?:json\.type|json\.origins\.[^.]\.type))$/;function WI(e){return qI.test(e)?"replace":"merge"}function ZI(e){return(e==null?void 0:e.release)&&typeof e.release=="function"}function JI(e){return(e==null?void 0:e.acquire)&&typeof e.acquire=="function"}let Uo=class Vy{constructor(t,r,i,s=1,n=0){this._ctor=t,this._acquireFunction=r,this._releaseFunction=i,this.allocationSize=s,this._pool=new Array(n),this._initialSize=n;for(let o=0;o<n;o++)this._pool[o]=new this._ctor;this.allocationSize=Math.max(s,1)}destroy(){this.prune(0)}acquire(...t){let r;if(Vy.test.disabled)r=new this._ctor;else{if(this._pool.length===0){const i=this.allocationSize;for(let s=0;s<i;s++)this._pool[s]=new this._ctor}r=this._pool.pop()}return this._acquireFunction?this._acquireFunction(r,...t):JI(r)&&r.acquire(...t),r}release(t){t&&!Vy.test.disabled&&(this._releaseFunction?this._releaseFunction(t):ZI(t)&&t.release(),this._pool.push(t))}prune(t=this._initialSize){if(!(t>=this._pool.length)){for(let r=t;r<this._pool.length;++r){const i=this._pool[r];this._dispose(i)}this._pool.length=t}}_dispose(t){t.dispose&&typeof t.dispose=="function"&&t.dispose()}};Uo.test={disabled:!1};let YI=class{constructor(t,r){this._observers=t,this._observer=r}remove(){$I(this._observers,this._observer)}},D$=class{constructor(){this._observers=null,this.destroyed=!1}observe(t){if(this.destroyed||t.destroyed)return KI;this._observers==null&&(this._observers=[]);const r=this._observers;let i=!1,s=!1;const n=r.length;for(let o=0;o<n;++o){const a=r[o];if(a.destroyed)s=!0;else if(a===t){i=!0;break}}return i||(r.push(t),s&&this._removeDestroyedObservers()),new YI(r,t)}_removeDestroyedObservers(){const t=this._observers;if(!t||t.length===0)return;const r=t.length;let i=0;for(let s=0;s<r;++s){for(;s+i<r&&t[s+i].destroyed;)++i;if(i>0){if(!(s+i<r))break;t[s]=t[s+i]}}t.length=r-i}destroy(){if(this.destroyed)return;this.destroyed=!0;const t=this._observers;if(t!=null){for(const r of t)r.onCommitted();this._observers=null}}};const KI=ce();var ue;(function(e){e[e.DEFAULTS=0]="DEFAULTS",e[e.COMPUTED=1]="COMPUTED",e[e.SERVICE=2]="SERVICE",e[e.PORTAL_ITEM=3]="PORTAL_ITEM",e[e.WEB_SCENE=4]="WEB_SCENE",e[e.WEB_MAP=5]="WEB_MAP",e[e.LINK_CHART=6]="LINK_CHART",e[e.USER=7]="USER"})(ue||(ue={}));const EK=ue.USER+1;function F$(e){switch(e){case"defaults":return ue.DEFAULTS;case"service":return ue.SERVICE;case"portal-item":return ue.PORTAL_ITEM;case"web-scene":return ue.WEB_SCENE;case"web-map":return ue.WEB_MAP;case"link-chart":return ue.LINK_CHART;case"user":return ue.USER;default:return null}}function By(e){switch(e){case ue.DEFAULTS:return"defaults";case ue.SERVICE:return"service";case ue.PORTAL_ITEM:return"portal-item";case ue.WEB_SCENE:return"web-scene";case ue.WEB_MAP:return"web-map";case ue.LINK_CHART:return"link-chart";case ue.USER:return"user"}}function XI(e){return By(e)}var me;(function(e){e[e.Dirty=1]="Dirty",e[e.Overridden=2]="Overridden",e[e.Computing=4]="Computing",e[e.NonNullable=8]="NonNullable",e[e.HasDefaultValue=16]="HasDefaultValue",e[e.DepTrackingInitialized=32]="DepTrackingInitialized",e[e.AutoTracked=64]="AutoTracked",e[e.ExplicitlyTracking=128]="ExplicitlyTracking"})(me||(me={}));let Sf=class{constructor(t){this.accessed=void 0,this._handles=void 0,this._observer=t}destroy(){var t;(t=this.accessed)==null||t.clear(),this.clear()}onAccessed(t){this._observer!=null&&t!==this._observer&&(this.accessed==null&&(this.accessed=new Set),this.accessed.add(t))}onTrackingEnd(){this._observer!=null&&(this.clear(),this.accessed!=null&&(this._handles==null&&(this._handles=[]),this.accessed.forEach(t=>{this._handles.push(t.observe(this._observer))}),this.accessed.clear()))}clear(){if(this._handles!=null){for(let t=0;t<this._handles.length;++t)this._handles[t].remove();this._handles.length=0}}};const pp=new Sf,tu=[];let Yu=pp;function J(e){Yu.onAccessed(e)}let cd=!1,hd=!1;function fs(e,t,r){if(cd)return i_(e,t,r);let i=null;return U$(e),i=t.call(r),j$(),i}function QI(e,t){return fs(pp,e,t)}function i_(e,t,r){const i=cd;cd=!0,U$(e);let s=null;try{s=t.call(r)}catch(n){hd&&U.getLogger("esri.core.accessorSupport.tracking").error(n)}return j$(),cd=i,s}function U$(e){Yu=e,tu.push(e)}function j$(){const e=tu.length;if(e>1){const t=tu.pop();Yu=tu[e-2],t.onTrackingEnd()}else if(e===1){const t=tu.pop();Yu=pp,t.onTrackingEnd()}else Yu=pp}function G$(e,t){if(t.flags&me.DepTrackingInitialized)return;t.flags|=me.DepTrackingInitialized;const r=hd;hd=!1,t.flags&me.AutoTracked?i_(t.trackingTarget,t.metadata.get,e):z$(e,t),hd=r}const eR=[];function z$(e,t){t.flags&me.ExplicitlyTracking||(t.flags|=me.ExplicitlyTracking,i_(t.trackingTarget,()=>{const r=t.metadata.dependsOn||eR;for(const i of r)if(typeof i!="string"||i.includes(".")){const s=R$(i);for(let n=0,o=e;n<s.length&&o!=null&&typeof o=="object";++n)o=Aw(o,s[n],n!==s.length-1)}else Aw(e,i,!1)}),t.flags&=~me.ExplicitlyTracking)}function Aw(e,t,r){const i=t[t.length-1]==="?"?t.slice(0,-1):t;if(e.getItemAt!=null||Array.isArray(e)){const n=parseInt(i,10);if(!isNaN(n))return Array.isArray(e)?e[n]:e.at(n)}const s=fn(e);if(s){const n=s.propertiesByName.get(i);n&&(J(n),G$(e,n))}return r?e[i]:void 0}let Pw=class extends D${constructor(t,r){super(),this.propertyName=t,this.metadata=r,this.trackingTarget=new Sf(this),this.flags=0,this.flags=me.Dirty|(r.nonNullable?me.NonNullable:0)|(r.hasOwnProperty("value")?me.HasDefaultValue:0)|(r.get===void 0?me.DepTrackingInitialized:0)|(r.dependsOn===void 0?me.AutoTracked:0)}destroy(){this.flags&me.Dirty&&this.onCommitted(),super.destroy(),this.trackingTarget.destroy()}getComputed(t){t.mutable&&J(this);const r=t.store,i=this.propertyName,s=this.flags,n=r.get(i);if(s&me.Computing||~s&me.Dirty&&r.has(i))return n;this.flags|=me.Computing;const o=t.host;let a;s&me.AutoTracked?a=fs(this.trackingTarget,this.metadata.get,o):(z$(o,this),a=this.metadata.get.call(o)),this.flags|=me.DepTrackingInitialized,r.set(i,a,ue.COMPUTED);const l=r.get(i);return l===n?this.flags&=~me.Dirty:QI(this.commit,this),this.flags&=~me.Computing,l}notifyChange(){this.onInvalidated(),this.onCommitted()}invalidate(){this.onInvalidated()}commit(){this.flags&=~me.Dirty,this.onCommitted()}onInvalidated(){~this.flags&me.Overridden&&(this.flags|=me.Dirty);const t=this._observers;if(t&&t.length>0)for(const r of t)r.onInvalidated()}onCommitted(){const t=this._observers;if(t&&t.length>0){const r=t.slice();for(const i of r)i.onCommitted()}}},tR=class V${constructor(){this._values=new Map,this.multipleOriginsSupported=!1}clone(t){const r=new V$;return this._values.forEach((i,s)=>{t&&t.has(s)||r.set(s,C(i))}),r}get(t){return this._values.get(t)}originOf(){return ue.USER}keys(){return[...this._values.keys()]}set(t,r){this._values.set(t,r)}delete(t){this._values.delete(t)}has(t){return this._values.has(t)}forEach(t){this._values.forEach(t)}};function wh(e,t,r){return e!==void 0}function Ow(e,t,r,i){return e!==void 0&&(!(r==null&&e.flags&me.NonNullable)||(i.lifecycle,zt.INITIALIZING,!1))}let rR=class{constructor(t){this.host=t,this.propertiesByName=new Map,this.ctorArgs=null,this.lifecycle=zt.INITIALIZING,this.store=new tR,this.mutable=!0,this._origin=ue.USER;const r=this.host.constructor.__accessorMetadata__;for(const i in r){const s=new Pw(i,r[i]);this.propertiesByName.set(i,s)}this.metadata=r}initialize(){this.lifecycle=zt.CONSTRUCTING}constructed(){this.lifecycle=zt.CONSTRUCTED}destroy(){this.lifecycle=zt.DESTROYED,this.propertiesByName.forEach(t=>t.destroy())}get initialized(){return this.lifecycle!==zt.INITIALIZING}get(t){const r=this.propertiesByName.get(t);if(r.metadata.get)return r.getComputed(this);this.mutable&&J(r);const i=this.store;return i.has(t)?i.get(t):r.metadata.value}originOf(t){const r=this.store.originOf(t);if(r===void 0){const i=this.propertiesByName.get(t);if(i!==void 0&&i.flags&me.HasDefaultValue)return"defaults"}return By(r)}has(t){return this.propertiesByName.has(t)&&this.store.has(t)}keys(){return[...this.propertiesByName.keys()]}internalGet(t){const r=this.propertiesByName.get(t);if(wh(r))return this.store.has(t)?this.store.get(t):r.metadata.value}internalSet(t,r){const i=this.propertiesByName.get(t);wh(i)&&this._internalSet(i,r)}getDependsInfo(t,r,i){const s=this.propertiesByName.get(r);if(!wh(s))return"";const n=new Sf,o=fs(n,()=>{var h;return(h=s.metadata.get)==null?void 0:h.call(t)});let a=`${i}${t.declaredClass.split(".").pop()}.${r}: ${o}
`;const l=n.accessed??new Set;if(l.size===0)return a;i+="  ";for(const h of l)h instanceof Pw&&(a+=`${i}${h.propertyName}: undefined
`);return a}setAtOrigin(t,r,i){const s=this.propertiesByName.get(t);if(wh(s))return this._setAtOrigin(s,r,i)}isOverridden(t){const r=this.propertiesByName.get(t);return r!==void 0&&!!(r.flags&me.Overridden)}clearOverride(t){const r=this.propertiesByName.get(t);r&&r.flags&me.Overridden&&(r.flags&=~me.Overridden,r.notifyChange())}override(t,r){const i=this.propertiesByName.get(t);if(!Ow(i,t,r,this))return;const s=i.metadata.cast;if(s){const n=this._cast(s,r),{valid:o,value:a}=n;if($m.release(n),!o)return;r=a}i.flags|=me.Overridden,this._internalSet(i,r)}set(t,r){const i=this.propertiesByName.get(t);if(!Ow(i,t,r,this))return;const s=i.metadata.cast;if(s){const o=this._cast(s,r),{valid:a,value:l}=o;if($m.release(o),!a)return;r=l}const n=i.metadata.set;n?n.call(this.host,r):this._internalSet(i,r)}setDefaultOrigin(t){this._origin=F$(t)}getDefaultOrigin(){return By(this._origin)}notifyChange(t){const r=this.propertiesByName.get(t);r!==void 0&&r.notifyChange()}invalidate(t){const r=this.propertiesByName.get(t);r!==void 0&&r.invalidate()}commit(t){const r=this.propertiesByName.get(t);r!==void 0&&r.commit()}_internalSet(t,r){const i=this.lifecycle!==zt.INITIALIZING?this._origin:ue.DEFAULTS;this._setAtOrigin(t,r,i)}_setAtOrigin(t,r,i){const s=this.store,n=t.propertyName;s.has(n,i)&&t_(r,s.get(n))&&~t.flags&me.Overridden&&i===s.originOf(n)||(t.invalidate(),s.set(n,r,i),t.commit(),G$(this.host,t))}_cast(t,r){const i=$m.acquire();return i.valid=!0,i.value=r,t&&(i.value=t.call(this.host,r,i)),i}},iR=class{constructor(){this.value=null,this.valid=!0}acquire(){this.valid=!0}release(){this.value=null}};const $m=new Uo(iR);function fp(e,t,r){if(e&&t)if(typeof t=="object")for(const i of Object.getOwnPropertyNames(t))fp(e,i,t[i]);else{if(t.includes(".")){const s=t.split("."),n=s.splice(-1,1)[0];return void fp(cs(e,s),n,r)}const i=e.__accessor__;i!=null&&sR(t,i),e[t]=r}}function sR(e,t){if(A("esri-unknown-property-errors")&&!nR(e,t))throw new I("set:unknown-property",oR(e,t))}function nR(e,t){return t.metadata[e]!=null}function oR(e,t){return"setting unknown property '"+e+"' on instance of "+t.host.declaredClass}let aR;function lR(){return aR}var Cw;(function(e){e[e.Ignore=0]="Ignore",e[e.Destroy=1]="Destroy",e[e.ThrowError=2]="ThrowError"})(Cw||(Cw={}));function uR(e){e.length=0}let Ct=class{constructor(t=50,r=50){this._pool=new Uo(Array,void 0,uR,r,t)}acquire(){return this._pool.acquire()}release(t){this._pool.release(t)}prune(){this._pool.prune(0)}static acquire(){return Em.acquire()}static release(t){return Em.release(t)}static prune(){Em.prune()}};const Em=new Ct(100);let B$=class extends Uo{constructor(){super(...arguments),this._set=new Set}destroy(){super.destroy(),this._set=null}acquire(...t){const r=super.acquire(...t);return this._set.delete(r),r}release(t){t&&!this._set.has(t)&&(super.release(t),this._set.add(t))}_dispose(t){this._set.delete(t),super._dispose(t)}};const bh=[];function mp(e){bh.push(e),bh.length===1&&queueMicrotask(()=>{const t=bh.slice();bh.length=0;for(const r of t)r()})}let Ku=class{constructor(t,r=30){this.name=t,this._counter=0,this._samples=new Array(r)}push(t){t!=null&&(this._samples[++this._counter%this._samples.length]=t)}set(t){t!=null&&(this._samples[this._counter%this._samples.length]=t)}get median(){return this._samples.slice().sort((t,r)=>t-r)[Math.floor(this._samples.length/2)]}get average(){return this._samples.reduce((t,r)=>t+r,0)/this._samples.length}get last(){return this._samples[this._counter%this._samples.length]}};var Hy;(function(e){const t=(n,o,a,l)=>{let h=o,p=o;const f=a>>>1,m=n[h-1];for(;p<=f;){p=h<<1,p<a&&l(n[p-1],n[p])<0&&++p;const y=n[p-1];if(l(y,m)<=0)break;n[h-1]=y,h=p}n[h-1]=m},r=(n,o)=>n<o?-1:n>o?1:0;function i(n,o,a,l){o===void 0&&(o=0),a===void 0&&(a=n.length),l===void 0&&(l=r);for(let p=a>>>1;p>o;p--)t(n,p,a,l);const h=o+1;for(let p=a-1;p>o;p--){const f=n[o];n[o]=n[p],n[p]=f,t(n,h,p,l)}}function*s(n,o,a,l){o===void 0&&(o=0),a===void 0&&(a=n.length),l===void 0&&(l=r);for(let p=a>>>1;p>o;p--)t(n,p,a,l),yield;const h=o+1;for(let p=a-1;p>o;p--){const f=n[o];n[o]=n[p],n[p]=f,t(n,h,p,l),yield}}e.sort=i,e.iterableSort=s})(Hy||(Hy={}));const Iw=Hy,cR=1.5,hR=1.1;let Xu=class{constructor(t){this.data=[],this._length=0,this._allocator=void 0,this._deallocator=()=>null,this._shrink=()=>{},this._hint=new p$,t&&(t.initialSize&&(this.data=new Array(t.initialSize)),t.allocator&&(this._allocator=t.allocator),t.deallocator!==void 0&&(this._deallocator=t.deallocator),t.shrink&&(this._shrink=()=>Rw(this)))}toArray(){return this.data.slice(0,this.length)}filter(t){const r=new Array;for(let i=0;i<this._length;i++){const s=this.data[i];t(s)&&r.push(s)}return r}at(t){if((t=Math.trunc(t)||0)<0&&(t+=this._length),!(t<0||t>=this._length))return this.data[t]}includes(t,r){const i=this.data.indexOf(t,r);return i!==-1&&i<this.length}get length(){return this._length}set length(t){if(t>this._length){if(this._allocator){for(;this._length<t;)this.data[this._length++]=this._allocator(this.data[this._length]);return}this._length=t}else{if(this._deallocator)for(let r=t;r<this._length;++r)this.data[r]=this._deallocator(this.data[r]);this._length=t,this._shrink()}}clear(){this.length=0}prune(){this.clear(),this.data=[]}push(t){this.data[this._length++]=t}pushArray(t,r=t.length){for(let i=0;i<r;i++)this.data[this._length++]=t[i]}fill(t,r){for(let i=0;i<r;i++)this.data[this._length++]=t}pushNew(){this._allocator&&(this.data[this.length]=this._allocator(this.data[this.length]));const t=this.data[this._length];return++this._length,t}unshift(t){this.data.unshift(t),this._length++,Rw(this)}pop(){if(this.length===0)return;const t=this.data[this.length-1];return this.length=this.length-1,this._shrink(),t}remove(t){const r=Gy(this.data,t,this.length,this._hint);if(r!==-1)return this.data.splice(r,1),this.length=this.length-1,t}removeUnordered(t){return this.removeUnorderedIndex(Gy(this.data,t,this.length,this._hint))}removeUnorderedIndex(t){if(!(t>=this.length||t<0))return this.swapElements(t,this.length-1),this.pop()}removeUnorderedMany(t,r=t.length,i){this.length=TI(this.data,t,this.length,r,this._hint,i),this._shrink()}front(){if(this.length!==0)return this.data[0]}back(){if(this.length!==0)return this.data[this.length-1]}swapElements(t,r){if(t>=this.length||r>=this.length||t===r)return;const i=this.data[t];this.data[t]=this.data[r],this.data[r]=i}sort(t){Iw.sort(this.data,0,this.length,t)}iterableSort(t){return Iw.iterableSort(this.data,0,this.length,t)}some(t,r){for(let i=0;i<this.length;++i)if(t.call(r,this.data[i],i,this.data))return!0;return!1}find(t,r){const{data:i,length:s}=this;for(let n=0;n<s;++n)if(t.call(r,i[n]))return i[n]}filterInPlace(t,r){let i=0;for(let s=0;s<this._length;++s){const n=this.data[s];t.call(r,n,s,this.data)&&(this.data[s]=this.data[i],this.data[i]=n,i++)}if(this._deallocator)for(let s=i;s<this._length;s++)this.data[s]=this._deallocator(this.data[s]);return this._length=i,this._shrink(),this}forAll(t,r){const{data:i,length:s}=this;for(let n=0;n<s;++n)t.call(r,i[n],n,i)}forEach(t,r){this.data.slice(0,this.length).forEach(t,r)}map(t,r){const i=new Array(this.length);for(let s=0;s<this.length;++s)i[s]=t.call(r,this.data[s],s,this.data);return i}reduce(t,r){let i=r;for(let s=0;s<this.length;++s)i=t(i,this.data[s],s,this.data);return i}has(t){const r=this.length,i=this.data;for(let s=0;s<r;++s)if(i[s]===t)return!0;return!1}*[Symbol.iterator](){for(let t=0;t<this.length;t++)yield this.data[t]}};function Rw(e){e.data.length>cR*e.length&&(e.data.length=Math.floor(e.length*hR))}function dR(e){return{setTimeout:(t,r)=>{const i=e.setTimeout(t,r);return ce(()=>e.clearTimeout(i))}}}const Sl=dR(globalThis);function Tf(e){return pR(e)||H$(e)}function pR(e){return e!=null&&typeof e=="object"&&"on"in e&&typeof e.on=="function"}function H$(e){return e!=null&&typeof e=="object"&&"addEventListener"in e&&typeof e.addEventListener=="function"}function Yc(e,t,r){if(!Tf(e))throw new TypeError("target is not a Evented or EventTarget object");return H$(e)?fR(e,t,r):e.on(t,r)}function fR(e,t,r,i){if(Array.isArray(t)){const s=t.slice();for(const n of s)e.addEventListener(n,r,i);return ce(()=>{for(const n of s)e.removeEventListener(n,r,i)})}return e.addEventListener(t,r,i),ce(()=>e.removeEventListener(t,r,i))}function q$(e,t,r){if(!Tf(e))throw new TypeError("target is not a Evented or EventTarget object");if("once"in e)return e.once(t,r);const i=Yc(e,t,s=>{i.remove(),r.call(e,s)});return i}function Ee(e="Aborted"){return new I("AbortError",e)}function Be(e,t="Aborted"){if(ur(e))throw Ee(t)}function Kc(e){return e instanceof AbortSignal?e:(e==null?void 0:e.signal)??void 0}function ur(e){const t=Kc(e);return t!=null&&t.aborted}function W$(e){if(qt(e))throw e}function kw(e){if(!qt(e))throw e}function Ar(e,t){const r=Kc(e);if(r!=null){if(!r.aborted)return q$(r,"abort",()=>t());t()}}function s_(e,t){const r=Kc(e);if(r!=null)return Be(r),q$(r,"abort",()=>t(Ee()))}function mR(e,t){return Kc(t)==null?e:new Promise((r,i)=>{let s=Ar(t,()=>i(Ee()));const n=()=>{s=Ie(s)};e.then(n,n),e.then(r,i)})}function qt(e){return(e==null?void 0:e.name)==="AbortError"}async function yp(e){try{return await e}catch(t){if(!qt(t))throw t;return}}async function n_(e){if(!e)return;if(typeof e.forEach!="function"){const r=Object.keys(e),i=r.map(o=>e[o]),s=await n_(i),n={};return r.map((o,a)=>n[o]=s[a]),n}const t=e;return Promise.allSettled(t).then(r=>Array.from(t,(i,s)=>{const n=r[s];return n.status==="fulfilled"?{promise:i,value:n.value}:{promise:i,error:n.reason}}))}async function yR(e){return(await Promise.allSettled(e)).filter(t=>t.status==="fulfilled").map(t=>t.value)}async function kK(e){return(await Promise.allSettled(e)).filter(t=>t.status==="rejected").map(t=>t.reason)}function Z$(e,t=void 0,r){const i=new AbortController;return Ar(r,()=>i.abort()),new Promise((s,n)=>{let o=setTimeout(()=>{o=0,s(t)},e);Ar(i,()=>{o&&(clearTimeout(o),n(Ee()))})})}function NK(e,t,r,i){const s=r&&"abort"in r?r:null;i!=null||s||(i=r);let n=setTimeout(()=>{n=0,s==null||s.abort()},t);const o=()=>i||new I("promiseUtils:timeout","The wrapped promise did not resolve within "+t+" ms");return e.then(a=>{if(n===0)throw o();return clearTimeout(n),a},a=>{throw clearTimeout(n),n===0?o():a})}function gR(e,t){const r=new AbortController,i=setTimeout(()=>r.abort(),t);return Ar(e,()=>{r.abort(),clearTimeout(i)}),{...e,signal:r.signal}}function ki(e){return e&&typeof e.then=="function"}function qy(e){return ki(e)?e:Promise.resolve(e)}function _R(e,t=-1){let r,i,s,n,o=null;const a=(...l)=>{if(r){i=l,n&&n.reject(Ee()),n=Or();const m=n.promise;if(o){const y=o;o=null,y.abort()}return m}if(s=n||Or(),n=null,t>0){const m=new AbortController;r=qy(e(...l,m.signal));const y=r;Z$(t).then(()=>{r===y&&(n?m.abort():o=m)})}else r=1,r=qy(e(...l));const h=()=>{const m=i;i=s=r=o=null,m!=null&&a(...m)},p=r,f=s;return p.then(h,h),p.then(f.resolve,f.reject),f.promise};return a}function Or(){let e,t;const r=new Promise((s,n)=>{e=s,t=n}),i=s=>{e(s)};return i.resolve=s=>e(s),i.reject=s=>t(s),i.timeout=(s,n)=>Sl.setTimeout(()=>i.reject(n),s),i.promise=r,i}async function Nw(e){await Promise.resolve(),Be(e)}function LK(e){return e}function vR(e){return 1e3*e}function DK(e){return e}function FK(e){return .001*e}let wR=class{constructor(t){this.phases=t,this.paused=!1,this.ticks=-1,this.removed=!1}},bR=class{constructor(t){this.callback=t,this.isActive=!0}remove(){this.isActive=!1}},Wy=0;const Il={time:0,deltaTime:0,elapsedFrameTime:0,frameDuration:0},Zy=["prepare","preRender","render","postRender","update","finish"],Jy=[],Ao=new Xu;let SR=class{constructor(t){this._task=t}remove(){this._task.removed=!0}pause(){this._task.paused=!0}resume(){this._task.paused=!1,J$()}};function TR(){So!=null&&(cancelAnimationFrame(So),So=requestAnimationFrame(o_))}function J$(){So==null&&(Wy=performance.now(),So=requestAnimationFrame(o_))}const gp={frameTasks:Ao,willDispatch:!1,clearFrameTasks:$R,dispatch:K$,executeFrameTasks:ER,reschedule:TR};function Xc(e){const t=new bR(e);return Jy.push(t),gp.willDispatch||(gp.willDispatch=!0,mp(K$)),t}function il(e){const t=new wR(e);return Ao.push(t),J$(),new SR(t)}let So=null;function $R(e=!1){Ao.forAll(t=>{t.removed=!0}),e&&Y$()}function o_(){const e=performance.now();So=null,So=Ao.some(r=>!r.paused&&!r.removed)?requestAnimationFrame(o_):null,gp.executeFrameTasks(e)}function ER(e){const t=e-Wy;Wy=e;const r=1e3/60,i=Math.max(0,t-r);Il.time=e,Il.frameDuration=r-i;for(let s=0;s<Zy.length;s++){const n=performance.now(),o=Zy[s];Ao.forAll(a=>{var l;a.paused||a.removed||(s===0&&a.ticks++,a.phases[o]&&(Il.elapsedFrameTime=performance.now()-e,Il.deltaTime=a.ticks===0?0:t,(l=a.phases[o])==null||l.call(a,Il)))}),PR[s].push(performance.now()-n)}Y$(),OR.push(performance.now()-e)}const Sh=new Xu;function Y$(){Ao.forAll(e=>{e.removed&&Sh.push(e)}),Ao.removeUnorderedMany(Sh.data,Sh.length),Sh.clear()}function K$(){for(;Jy.length;){const e=Jy.shift();e.isActive&&e.callback()}gp.willDispatch=!1}function MR(e=1,t){const r=Or(),i=()=>{ur(t)?r.reject(Ee()):e===0?r():(--e,mp(()=>i()))};return i(),r.promise}function xR(e){return MR(1,e)}async function AR(e){await xR(e),await new Promise(t=>requestAnimationFrame(()=>{e!=null&&e.aborted||t()}))}const PR=Zy.map(e=>new Ku(e)),OR=new Ku("total");function X$(e,t){for(const r of e.values())if(t(r))return!0;return!1}function Lw(e,t){if(!t)return e;for(const r of t)r!=null&&e.add(r);return e}function zK(e,t){return t!=null&&e.add(t),e}function a_(e,t){const r=new Set;return Lw(r,e),Lw(r,t),r}function CR(e,t){const r=new Set;for(const i of t)e.has(i)&&r.add(i);return r}function VK(e,t){if(!e||!t)return!1;if(e===t)return!0;for(const r of e)if(!t.has(r))return!1;return!0}function BK(e,t){if(e==null&&t==null)return!0;if(e==null||t==null||e.size!==t.size)return!1;for(const r of e)if(!t.has(r))return!1;return!0}function IR(e,t){const r=new Set(e);for(const i of t)r.delete(i);return r}function RR(e,t){return IR(a_(e,t),CR(e,t))}let kR=0;function dd(){return++kR}let $f=class extends Sf{constructor(t){super(new NR(t)),this._observer&&Dw.register(this,new WeakRef(this._observer),this)}destroy(){var t,r;this._observer&&Dw.unregister(this._observer),(t=this.accessed)==null||t.clear(),this.clear(),(r=this._observer)==null||r.destroy()}},NR=class{constructor(t){this._notify=t,this._invalidCount=0,this.destroyed=!1}onInvalidated(){this._invalidCount++}onCommitted(){if(this.destroyed)return;const t=this._invalidCount;if(t===1)return this._invalidCount=0,void this._notify();this._invalidCount=t>0?t-1:0}destroy(){this.destroyed=!0,this._notify=LR}};const Dw=new FinalizationRegistry(e=>{var t;(t=e.deref())==null||t.destroy()});function LR(){}let Ua=!1;const _p=[];function Q$(e,t){let r=new $f(n),i=null,s=!1;function n(){if(!r||s)return;if(Ua)return void tE(n);const a=i;r.clear(),Ua=!0,s=!0,i=fs(r,e),s=!1,Ua=!1,t(i,a),rE()}function o(){r&&(r.destroy(),r=null,i=null)}return s=!0,i=fs(r,e),s=!1,ce(o)}function eE(e,t){let r=new $f(s),i=null;function s(){t(i,o)}function n(){r&&(r.destroy(),r=null),i=null}function o(){return r?(r.clear(),i=fs(r,e),i):null}return o(),ce(n)}function DR(e,t){let r=!1,i=!1;const s=!!(t!=null&&t.sync);let n=new $f(()=>{r||i||(i=!0,s?o():queueMicrotask(o))});function o(){i=!1,n&&!r&&(Ua?tE(o):(n.clear(),Ua=!0,r=!0,fs(n,e),r=!1,Ua=!1,rE()))}function a(){n&&(n.destroy(),n=null)}return r=!0,fs(n,e),r=!1,ce(a)}function tE(e){_p.includes(e)||_p.unshift(e)}function rE(){for(;_p.length;)_p.pop()()}var Qu;(function(e){e[e.Untracked=0]="Untracked",e[e.Tracked=1]="Tracked"})(Qu||(Qu={}));let wc=class{constructor(){this.uid=dd(),this.removed=!1,this.type=null,this.oldValue=null,this.callback=null,this.getValue=null,this.target=null,this.path=null,this.equals=null}static acquireUntracked(t,r,i,s,n){return this.pool.acquire(Qu.Untracked,t,r,i,s,n,t_)}static acquireTracked(t,r,i,s){return this.pool.acquire(Qu.Tracked,t,r,i,null,null,s)}notify(t,r){this.type===Qu.Untracked?this.callback.call(this.target,t,r,this.path,this.target):this.callback.call(null,t,r,void 0,void 0)}acquire(t,r,i,s,n,o,a){this.uid=dd(),this.removed=!1,this.type=t,this.oldValue=r,this.callback=i,this.getValue=s,this.target=n,this.path=o,this.equals=a}release(){this.target=this.path=this.oldValue=this.callback=this.getValue=null,this.uid=dd(),this.removed=!0}};wc.pool=new B$(wc);const pd=new Ct,hs=new Set;let vp;function wp(e){hs.delete(e),hs.add(e),vp||(vp=Xc(jR))}function FR(e){if(e.removed)return;const t=e.oldValue,r=e.getValue();e.equals(t,r)||(e.oldValue=r,e.notify(r,t))}function UR(e){for(const t of hs.values())t.target===e&&(t.removed=!0)}function jR(){let e=10;for(;vp&&e--;){vp=null;const t=GR(),r=pd.acquire();for(const i of t){const s=i.uid;FR(i),s===i.uid&&i.removed&&r.push(i)}for(const i of hs)i.removed&&(r.push(i),hs.delete(i));for(const i of r)wc.pool.release(i);pd.release(r),pd.release(t),Yy.forEach(i=>i())}}function GR(){const e=pd.acquire();e.length=hs.size;let t=0;for(const r of hs)e[t]=r,++t;return hs.clear(),e}const Yy=new Set;function zR(e){return Yy.add(e),ce(()=>Yy.delete(e))}function VR(e,t,r){let i=k$(e,t,r,(s,n,o)=>{let a,l,h=eE(()=>Zc(s,n),(p,f)=>{var m;((m=s.__accessor__)==null?void 0:m.lifecycle)===zt.DESTROYED||a&&a.uid!==l?i.remove():(a||(a=wc.acquireUntracked(p,o,f,s,n),l=a.uid),wp(a))});return ce(()=>{h.remove(),a&&(a.uid!==l||a.removed||(a.removed=!0,wp(a)),a=null),i=h=null})});return i}function BR(e,t,r){const i=k$(e,t,r,(s,n,o)=>{let a=!1;return Q$(()=>Zc(s,n),(l,h)=>{s.__accessor__.lifecycle!==zt.DESTROYED?a||(a=!0,t_(h,l)||o.call(s,l,h,n,s),a=!1):i.remove()})});return i}function HR(e,t,r,i=!1){return e.__accessor__&&e.__accessor__.lifecycle!==zt.DESTROYED?i?BR(e,t,r):VR(e,t,r):ce()}function qR(e,t,r){let i,s,n=eE(e,(o,a)=>{i&&i.uid!==s?n.remove():(i||(i=wc.acquireTracked(o,t,a,r),s=i.uid),wp(i))});return ce(()=>{n.remove(),i&&(i.uid!==s||i.removed||(i.removed=!0,wp(i)),i=null),n=null})}function WR(e,t,r){let i=!1;return Q$(e,(s,n)=>{i||(i=!0,r(n,s)||t(s,n),i=!1)})}function ZR(e,t,r=!1,i=$$){return r?WR(e,t,i):qR(e,t,i)}function Fw(e){return X$(hs,t=>t.oldValue===e)}function JR(e,t){for(const r of e.values())if(t(r))return!0;return!1}function ZK(e,t){for(const r of e.values())if(t(r))return r;return null}function Ef(e,t,r){const i=e.get(t);if(i!==void 0)return i;const s=r();return e.set(t,s),s}function JK(e){const t=new Map;return r=>(t.has(r)||t.set(r,e(r)),t.get(r))}const ja=()=>U.getLogger("esri.core.accessorSupport.ensureTypes");function YR(e){return e==null?e:new Date(e)}function KR(e){return e==null?e:!!e}function XR(e){return e==null?e:e.toString()}function ir(e,t=0){return e==null?e:(e=parseFloat(e),isNaN(e)?t:e)}function l_(e){return e==null?e:Math.round(parseFloat(e))}function QR(e){return null}function ek(e,t){return r=>{let i=e(r);return t.step!=null&&(i=Math.round(i/t.step)*t.step),t.min!=null&&(i=Math.max(t.min,i)),t.max!=null&&(i=Math.min(t.max,i)),i}}function iE(e){return(e==null?void 0:e.constructor)&&e.constructor.__accessorMetadata__!==void 0}function bp(e,t){return t!=null&&e&&!(t instanceof e)}function sE(e){return e&&"isCollection"in e}function Uw(e){return e!=null&&e.Type?typeof e.Type=="function"?e.Type:e.Type.base:null}function tk(e,t){if(!(t!=null&&t.constructor)||!sE(t.constructor))return Ky(e,t)?t:new e(t);const r=Uw(e.prototype.itemType),i=Uw(t.constructor.prototype.itemType);return r?i?r===i?t:r.prototype.isPrototypeOf(i.prototype)?new e(t):(Ky(e,t),t):new e(t):t}function Ky(e,t){return!!iE(t)&&(ja().error("Accessor#set","Assigning an instance of '"+(t.declaredClass||"unknown")+"' which is not a subclass of '"+xf(e)+"'"),!0)}function Mf(e,t){return t==null?t:sE(e)?tk(e,t):bp(e,t)?Ky(e,t)?t:new e(t):t}function xf(e){var t;return((t=e==null?void 0:e.prototype)==null?void 0:t.declaredClass)||"unknown"}const rk=new WeakMap;function ik(e){switch(e){case Number:return t=>ir(t);case $e:return l_;case Boolean:return KR;case String:return XR;case Date:return YR;case u_:return QR;default:return Ef(rk,e,()=>Mf.bind(null,e))}}function kt(e,t){const r=ik(e);return arguments.length===1?r:r(t)}function bc(e,t,r){return arguments.length===1?bc.bind(null,e):t&&(Array.isArray(t)?t.map(i=>e(i,r)):[e(t,r)])}function sk(e,t){return arguments.length===1?bc(r=>kt(e,r)):bc(r=>kt(e,r),t)}function nE(e,t,r){return t!==0&&Array.isArray(r)?r.map(i=>nE(e,t-1,i)):e(r)}function Sp(e,t,r){if(arguments.length===2)return n=>Sp(e,t,n);if(!r)return r;r=nE(e,t,r);let i=t,s=r;for(;i>0&&Array.isArray(s);)i--,s=s[0];if(s!==void 0)for(let n=0;n<i;n++)r=[r];return r}function nk(e,t,r){return arguments.length===2?Sp(i=>kt(e,i),t):Sp(i=>kt(e,i),t,r)}function oE(e){return!!Array.isArray(e)&&!e.some(t=>{const r=typeof t;return!(r==="string"||r==="number"||r==="function"&&e.length>1)})}function Xy(e,t){if(arguments.length===2)return Xy(e).call(null,t);const r=new Set,i=e.filter(a=>typeof a!="function"),s=e.filter(a=>typeof a=="function");for(const a of e)typeof a!="string"&&typeof a!="number"||r.add(a);let n=null,o=null;return(a,l)=>{if(a==null)return a;const h=typeof a,p=h==="string"||h==="number";return p&&(r.has(a)||s.some(f=>h==="string"&&f===String||h==="number"&&f===Number))||h==="object"&&s.some(f=>!bp(a,f))?a:(p&&i.length?(n||(n=i.map(f=>typeof f=="string"?`'${f}'`:`${f}`).join(", ")),ja().error("Accessor#set",`'${a}' is not a valid value for this property, only the following values are valid: ${n}`)):typeof a=="object"&&s.length?(o||(o=s.map(f=>xf(f)).join(", ")),ja().error("Accessor#set",`'${a}' is not a valid value for this property, value must be one of ${o}`)):ja().error("Accessor#set",`'${a}' is not a valid value for this property`),l&&(l.valid=!1),null)}}function mn(e,t){if(arguments.length===2)return mn(e).call(null,t);const r={},i=[],s=[];for(const l in e.typeMap){const h=e.typeMap[l];r[l]=kt(h),i.push(xf(h)),s.push(l)}const n=()=>`'${i.join("', '")}'`,o=()=>`'${s.join("', '")}'`,a=typeof e.key=="string"?l=>l[e.key]:e.key;return l=>{if(e.base&&!bp(e.base,l)||l==null)return l;const h=a(l)||e.defaultKeyValue,p=r[h];if(!p)return ja().error("Accessor#set",`Invalid property value, value needs to be one of ${n()}, or a plain object that can autocast (having .type = ${o()})`),null;if(!bp(e.typeMap[h],l))return l;if(typeof e.key=="string"&&!iE(l)){const f={};for(const m in l)m!==e.key&&(f[m]=l[m]);return p(f)}return p(l)}}let $e=class{},u_=class{};const XK={native:e=>({type:"native",value:e}),array:e=>({type:"array",value:e}),oneOf:e=>({type:"one-of",values:e})};function ok(e){if(!e||!("type"in e))return!1;switch(e.type){case"native":case"array":case"one-of":return!0}return!1}function aE(e){switch(e.type){case"native":return kt(e.value);case"array":return bc(aE(e.value));case"one-of":return ak(e);default:return null}}function ak(e){let t=null;return(r,i)=>eg(r,e)?r:(t==null&&(t=Qy(e)),ja().error("Accessor#set",`Invalid property value, value needs to be of type ${t}`),i&&(i.valid=!1),null)}function Qy(e){switch(e.type){case"native":switch(e.value){case Number:return"number";case String:return"string";case Boolean:return"boolean";case $e:return"integer";case Date:return"date";case u_:return"null";default:return xf(e.value)}case"array":return`array of ${Qy(e.value)}`;case"one-of":{const t=e.values.map(r=>Qy(r));return`one of ${t.slice(0,-1)} or ${t[t.length-1]}`}}return"unknown"}function eg(e,t){if(e==null)return!0;switch(t.type){case"native":switch(t.value){case Number:case $e:return typeof e=="number";case Boolean:return typeof e=="boolean";case String:return typeof e=="string";case u_:return e===null}return e instanceof t.value;case"array":return!!Array.isArray(e)&&!e.some(r=>!eg(r,t.value));case"one-of":return t.values.some(r=>eg(e,r))}}function d(e={}){return(t,r)=>{if(t===Function.prototype)throw new Error(`Inappropriate use of @property() on a static field: ${t.name}.${r}. Accessor does not support static properties.`);const i=Object.getOwnPropertyDescriptor(t,r),s=bf(t,r);i&&(i.get||i.set?(s.get=i.get||s.get,s.set=i.set||s.set):"value"in i&&("value"in e&&U.getLogger("esri.core.accessorSupport.decorators.property").warn(`@property() will redefine the value of "${r}" on "${t.constructor.name}" already defined in the metadata`,e),s.value=e.value=i.value)),e.readOnly!=null&&(s.readOnly=e.readOnly);const n=e.aliasOf;if(n){const l=typeof n=="string"?n:n.source,h=typeof n=="string"?null:n.overridable===!0;let p;s.dependsOn=[l],s.get=function(){let f=cs(this,l);if(typeof f=="function"){p||(p=l.split(".").slice(0,-1).join("."));const m=cs(this,p);m&&(f=f.bind(m))}return f},s.readOnly||(s.set=h?function(f){this._override(r,f)}:function(f){fp(this,l,f)})}const o=e.type,a=e.types;if(!s.cast){let l;o?l=lk(o):a&&(l=Array.isArray(a)?bc(mn(a[0])):mn(a)),e.cast=uk(e.cast,l)}HI(s,e),e.range&&(s.cast=ek(s.cast,e.range))}}function lE(e,t,r){const i=bf(e,r);i.json||(i.json={});let s=i.json;return t!==void 0&&(s.origins||(s.origins={}),s.origins[t]||(s.origins[t]={}),s=s.origins[t]),s}function lk(e){let t=0,r=e;if(ok(e))return aE(e);for(;Array.isArray(r)&&r.length===1&&typeof r[0]!="string"&&typeof r[0]!="number";)r=r[0],t++;const i=r;if(oE(i))return t===0?Xy(i):Sp(Xy(i),t);if(t===1)return sk(i);if(t>1)return nk(i,t);const s=e;return s.from?s.from:kt(s)}function uk(e,t){if(e||t)return e?t?(r,i)=>t(e(r,i),i):e:t}function ck(e){if(e.json&&e.json.origins){const t=e.json.origins,r={"web-document":["web-scene","web-map"]};for(const i in r)if(t[i]){const s=t[i];r[i].forEach(n=>{t[n]=s}),delete t[i]}}}let ms=class extends A${constructor(t,r,i){super(t,r,i)}};ms.prototype.type="warning";function uE(e){var t;return!!e&&((t=e.prototype)==null?void 0:t.declaredClass)&&e.prototype.declaredClass.indexOf("esri.core.Collection")===0}const tg=()=>U.getLogger("esri.core.accessorSupport.extensions.serializableProperty.reader");function jw(e,t,r){var i,s;e&&(!r&&!t.read||(i=t.read)!=null&&i.reader||((s=t.read)==null?void 0:s.enabled)===!1||pk(e)&&wl("read.reader",c_(e),t))}function c_(e){var r,i;const t=e.ndimArray??0;if(t>1)return dk(e);if(t===1)return Gw(e);if("type"in e&&hE(e.type)){const s=(i=(r=e.type.prototype)==null?void 0:r.itemType)==null?void 0:i.Type,n=Gw(typeof s=="function"?{type:s}:{types:s});return(o,a,l)=>{const h=n(o,a,l);return h&&new e.type(h)}}return h_(e)}function h_(e){return"type"in e?hk(e.type):fk(e.types)}function hk(e){return e.prototype.read?(t,r,i)=>{if(t==null)return t;const s=typeof t;if(s!=="object")return void tg().error(`Expected JSON value of type 'object' to deserialize type '${e.prototype.declaredClass}', but got '${s}'`);const n=new e;return n.read(t,i),n}:e.fromJSON}function cE(e,t,r,i){return i!==0&&Array.isArray(t)?t.map(s=>cE(e,s,r,i-1)):e(t,void 0,r)}function dk(e){const t=h_(e),r=cE.bind(null,t),i=e.ndimArray??0;return(s,n,o)=>{if(s==null)return s;s=r(s,o,i);let a=i,l=s;for(;a>0&&Array.isArray(l);)a--,l=l[0];if(l!==void 0)for(let h=0;h<a;h++)s=[s];return s}}function Gw(e){const t=h_(e);return(r,i,s)=>{if(r==null)return r;if(Array.isArray(r)){const o=[];for(const a of r){const l=t(a,void 0,s);l!==void 0&&o.push(l)}return o}const n=t(r,void 0,s);return n!==void 0?[n]:void 0}}function hE(e){if(!uE(e))return!1;const t=e.prototype.itemType;return!(!t||!t.Type)&&(typeof t.Type=="function"?d_(t.Type):dE(t.Type))}function pk(e){return"types"in e?dE(e.types):d_(e.type)}function d_(e){return!Array.isArray(e)&&!!e&&e.prototype&&("read"in e.prototype||"fromJSON"in e||hE(e))}function dE(e){for(const t in e.typeMap)if(!d_(e.typeMap[t]))return!1;return!0}function fk(e){let t=null;const r=e.errorContext??"type",i=e.validate;return(s,n,o)=>{if(s==null)return s;const a=typeof s;if(a!=="object")return void tg().error(`Expected JSON value of type 'object' to deserialize, but got '${a}'`);t||(t=mk(e));const l=e.key;if(typeof l!="string")return;const h=s[l],p=h?t[h]:e.defaultKeyValue?e.typeMap[e.defaultKeyValue]:void 0;if(!p){const m=`Type '${h||"unknown"}' is not supported`;return o!=null&&o.messages&&s&&o.messages.push(new ms(`${r}:unsupported`,m,{definition:s,context:o})),void tg().error(m)}const f=new p;return f.read(s,o),i?i(f):f}}function mk(e){var r,i;const t={};for(const s in e.typeMap){const n=e.typeMap[s],o=Jc(n.prototype);if(typeof e.key=="function")continue;const a=o[e.key];if(!a)continue;if((r=a.json)!=null&&r.type&&Array.isArray(a.json.type)&&a.json.type.length===1&&typeof a.json.type[0]=="string"){t[a.json.type[0]]=n;continue}const l=(i=a.json)==null?void 0:i.write;if(!(l!=null&&l.writer)){t[s]=n;continue}const h=l.target,p=typeof h=="string"?h:e.key,f={};l.writer(s,f,p),f[p]&&(t[f[p]]=n)}return t}function yk(e){if(e.json||(e.json={}),Vw(e.json),Bw(e.json),zw(e.json),e.json.origins)for(const t in e.json.origins)Vw(e.json.origins[t]),Bw(e.json.origins[t]),zw(e.json.origins[t]);return!0}function zw(e){e.name&&(e.read&&typeof e.read=="object"?e.read.source===void 0&&(e.read.source=e.name):e.read={source:e.name},e.write&&typeof e.write=="object"?e.write.target===void 0&&(e.write.target=e.name):e.write={target:e.name})}function Vw(e){typeof e.read=="boolean"?e.read={enabled:e.read}:typeof e.read=="function"?e.read={enabled:!0,reader:e.read}:e.read&&typeof e.read=="object"&&e.read.enabled===void 0&&(e.read.enabled=!0)}function Bw(e){typeof e.write=="boolean"?e.write={enabled:e.write}:typeof e.write=="function"?e.write={enabled:!0,writer:e.write}:e.write&&typeof e.write=="object"&&e.write.enabled===void 0&&(e.write.enabled=!0)}function Hw(e,t){if(!t.write||t.write.writer||t.write.enabled===!1&&!t.write.overridePolicy)return;const r=(e==null?void 0:e.ndimArray)??0;e&&(r===1||"type"in e&&uE(e.type))?t.write.writer=vk:r>1?t.write.writer=wk(r):t.types?Array.isArray(t.types)?t.write.writer=_k(t.types[0]):t.write.writer=gk(t.types):t.write.writer=Sc}function gk(e){return(t,r,i,s)=>t?pE(t,e,s)?Sc(t,r,i,s):void 0:Sc(t,r,i,s)}function pE(e,t,r){for(const i in t.typeMap)if(e instanceof t.typeMap[i])return!0;if(r!=null&&r.messages){const i=t.errorContext??"type",s=`Values of type '${(typeof t.key!="function"?e[t.key]:e.declaredClass)??"Unknown"}' cannot be written`;r&&r.messages&&e&&r.messages.push(new I(`${i}:unsupported`,s,{definition:e,context:r})),U.getLogger("esri.core.accessorSupport.extensions.serializableProperty.writer").error(s)}return!1}function _k(e){return(t,r,i,s)=>!t||!Array.isArray(t)?Sc(t,r,i,s):Sc(t.filter(n=>pE(n,e,s)),r,i,s)}function Sc(e,t,r,i){wl(r,Tp(e,i),t)}function Tp(e,t){return e&&typeof e.write=="function"?e.write({},t):e&&typeof e.toJSON=="function"?e.toJSON():typeof e=="number"?$p(e):e}function $p(e){return e===-1/0?-Number.MAX_VALUE:e===1/0?Number.MAX_VALUE:isNaN(e)?null:e}function vk(e,t,r,i){let s;e===null?s=null:e&&typeof e.map=="function"?(s=e.map(n=>Tp(n,i)),typeof s.toArray=="function"&&(s=s.toArray())):s=[Tp(e,i)],wl(r,s,t)}function fE(e,t,r){return r!==0&&Array.isArray(e)?e.map(i=>fE(i,t,r-1)):Tp(e,t)}function wk(e){return(t,r,i,s)=>{let n;if(t===null)n=null;else{n=fE(t,s,e);let o=e,a=n;for(;o>0&&Array.isArray(a);)o--,a=a[0];if(a!==void 0)for(let l=0;l<o;l++)n=[n]}wl(i,n,r)}}function bk(e,t){return p_(e,"any",t==null?void 0:t.origin)}function rg(e,t){return p_(e,"read",t==null?void 0:t.origin)}function mE(e,t){return p_(e,"write",t==null?void 0:t.origin)}function p_(e,t,r){let i=e==null?void 0:e.json;if(i!=null&&i.origins&&r){let s;s=r==="link-chart"?i.origins[r]&&(t==="any"||t in i.origins[r])?i.origins[r]:i.origins["web-map"]:i.origins[r],s&&(t==="any"||t in s)&&(i=s)}return i}function Sk(e){var r;const t=Tk(e);if(e.json.origins)for(const i in e.json.origins){const s=e.json.origins[i],n=s.types?$k(s):t;jw(n,s,!1),s.types&&!s.write&&((r=e.json.write)!=null&&r.enabled)&&(s.write={...e.json.write}),Hw(n,s)}jw(t,e.json,!0),Hw(t,e.json)}function Tk(e){return e.json.types?ig(e.json):e.type?yE(e):ig(e)}function $k(e){return e.type?yE(e):ig(e)}function yE(e){if(!e.type)return;let t=0,r=e.type;for(;Array.isArray(r)&&!oE(r);)r=r[0],t++;return{type:r,ndimArray:t}}function ig(e){if(!e.types)return;let t=0,r=e.types;for(;Array.isArray(r);)r=r[0],t++;return{types:r,ndimArray:t}}function Ek(e){yk(e)&&(ck(e),Sk(e))}const Mm=new Set,xm=new Set;function S(e){return t=>{e??(e="esri.core.Accessor"),t.prototype.declaredClass=e,xk(t);const r=[],i=[];let s=t.prototype;for(;s;)s.hasOwnProperty("initialize")&&!Mm.has(s.initialize)&&(Mm.add(s.initialize),r.push(s.initialize)),s.hasOwnProperty("destroy")&&!xm.has(s.destroy)&&(xm.add(s.destroy),i.push(s.destroy)),s=Object.getPrototypeOf(s);Mm.clear(),xm.clear();const n=class extends t{constructor(...a){if(super(...a),this.constructor===n&&typeof this.postscript=="function"){if(r.length&&Object.defineProperty(this,"initialize",{enumerable:!1,configurable:!0,value(){for(let l=r.length-1;l>=0;l--)r[l].call(this)}}),i.length){let l=!1;const h=this[C$];Object.defineProperty(this,"destroy",{enumerable:!1,configurable:!0,value(){if(!l){l=!0,h.call(this);for(let p=0;p<i.length;p++)i[p].call(this)}}})}Object.defineProperty(this,Symbol.dispose,{enumerable:!1,configurable:!0,value(){this.destroy()}}),this.postscript()}}};n.__accessorMetadata__=Jc(t.prototype),n.prototype.declaredClass=e;const o=(e||"AccessorSubclass").split(".").slice(-1)[0];return Object.defineProperty(n,"name",{value:o,configurable:!0}),n}}function Mk(e,t){return t.get==null?function(){const r=this.__accessor__,i=r.propertiesByName.get(e);if(i===void 0)return;r.mutable&&J(i);const s=r.store;return s.has(e)?s.get(e):i.metadata.value}:function(){const r=this.__accessor__,i=r.propertiesByName.get(e);if(i!==void 0)return i.getComputed(r)}}function xk(e){const t=e.prototype,r=Jc(t),i={};for(const s of Object.getOwnPropertyNames(r)){const n=r[s];Ek(n),i[s]={enumerable:!0,configurable:!0,get:Mk(s,n),set(o){const a=this.__accessor__;if(a!==void 0){if(a.mutable)return a.initialized&&n.readOnly?qw("read-only",s):a.lifecycle===zt.CONSTRUCTED&&n.constructOnly?qw("construct-only",s):void a.set(s,o)}else Object.defineProperty(this,s,{enumerable:!0,configurable:!0,writable:!0,value:o})}}}Object.defineProperties(e.prototype,i)}const qw=(e,t)=>{U.getLogger("esri.core.Accessor").error(`cannot assign to ${e} property '${t}'`)};var gE,_E;function Ak(e){var t;if(e==null)return{value:e};if(Array.isArray(e))return{type:[e[0]],value:null};switch(typeof e){case"object":return(t=e.constructor)!=null&&t.__accessorMetadata__||e instanceof Date?{type:e.constructor,value:e}:e;case"boolean":return{type:Boolean,value:e};case"string":return{type:String,value:e};case"number":return{type:Number,value:e};case"function":return{type:e,value:null};default:return}}const oi=Symbol("Accessor-Handles"),sg=Symbol("Accessor-Initialized");let W=class fd{static createSubclass(t={}){if(Array.isArray(t))throw new Error("Multi-inheritance unsupported since 4.16");const{properties:r,declaredClass:i,constructor:s}=t;delete t.declaredClass,delete t.properties,delete t.constructor;const n=this;class o extends n{constructor(...l){super(...l),this.inherited=null,s&&s.apply(this,l)}}Jc(o.prototype);for(const a in t){const l=t[a];o.prototype[a]=typeof l=="function"?function(...h){const p=this.inherited;let f;this.inherited=function(...m){if(n.prototype[a])return n.prototype[a].apply(this,m)};try{f=l.apply(this,h)}catch(m){throw this.inherited=p,m}return this.inherited=p,f}:t[a]}for(const a in r){const l=Ak(r[a]);d(l)(o.prototype,a)}return S(i)(o)}static freeze(t){return t instanceof fd?t.__accessor__.mutable=!1:Object.freeze(t),t}static isFrozen(t){return t instanceof fd?!t.__accessor__.mutable:Object.isFrozen(t)}constructor(...t){var i;if(this[gE]=null,this[_E]=!1,this.constructor===fd)throw new Error("[accessor] cannot instantiate Accessor. This can be fixed by creating a subclass of Accessor");const r=new rR(this);Object.defineProperty(this,"__accessor__",{enumerable:!1,value:r}),t.length>0&&(r.ctorArgs=((i=this.normalizeCtorArgs)==null?void 0:i.apply(this,t))??t[0])}postscript(){const t=this.__accessor__,r=t.ctorArgs;t.initialize(),r&&(this.set(r),t.ctorArgs=null),t.constructed(),this.initialize(),this[sg]=!0}initialize(){}[C$](){this[oi]=Ne(this[oi])}destroy(){var t;this.destroyed||(UR(this),this.__accessor__.destroy(),(t=lR())==null||t.onInstanceDestroy(this))}[Symbol.dispose](){this.destroy()}get constructed(){return this.__accessor__&&this.__accessor__.initialized||!1}get initialized(){return this[sg]}get destroyed(){var t;return((t=this.__accessor__)==null?void 0:t.lifecycle)===zt.DESTROYED||!1}commitProperty(t){cs(this,t)}hasOwnProperty(t){return this.__accessor__?this.__accessor__.has(t):Object.prototype.hasOwnProperty.call(this,t)}keys(){return this.__accessor__?this.__accessor__.keys():[]}set(t,r){return fp(this,t,r),this}watch(t,r,i){return LI(U.getLogger(this),"`watch` is deprecated in favor of reactiveUtils.watch",{replacement:"reactiveUtils.watch",version:"4.32",see:"https://developers.arcgis.com/javascript/latest/api-reference/esri-core-reactiveUtils.html#watch",warnOnce:!0}),HR(this,t,r,i)}addHandles(t,r){if(this.destroyed){const i=Array.isArray(t)?t:[t];for(const s of i)s.remove();return}(this[oi]??(this[oi]=new bl)).add(t,r)}removeHandles(t){var r;(r=this[oi])==null||r.remove(t)}removeAllHandles(){var t;(t=this[oi])==null||t.removeAll()}removeHandlesReference(t){var r;(r=this[oi])==null||r.removeReference(t)}hasHandles(t){var r;return((r=this[oi])==null?void 0:r.has(t))===!0}_override(t,r){r===void 0?this.__accessor__.clearOverride(t):this.__accessor__.override(t,r)}_clearOverride(t){return this.__accessor__.clearOverride(t)}_overrideIfSome(t,r){r==null?this.__accessor__.clearOverride(t):this.__accessor__.override(t,r)}_isOverridden(t){return this.__accessor__.isOverridden(t)}notifyChange(t){this.__accessor__.notifyChange(t)}_get(t){return this.__accessor__.internalGet(t)}_set(t,r){return this.__accessor__.internalSet(t,r),this}};gE=oi,_E=sg;let Pk=class vE{constructor(){this._values=new Map,this.multipleOriginsSupported=!1}clone(t){const r=new vE;return this._values.forEach((i,s)=>{t&&t.has(s)||r.set(s,C(i.value),i.origin)}),r}get(t,r){r=this._normalizeOrigin(r);const i=this._values.get(t);return r==null||(i==null?void 0:i.origin)===r?i==null?void 0:i.value:void 0}originOf(t){var r;return((r=this._values.get(t))==null?void 0:r.origin)??ue.USER}keys(t){t=this._normalizeOrigin(t);const r=[...this._values.keys()];return t==null?r:r.filter(i=>{var s;return((s=this._values.get(i))==null?void 0:s.origin)===t})}set(t,r,i){if((i=this._normalizeOrigin(i))===ue.DEFAULTS){const s=this._values.get(t);if((s==null?void 0:s.origin)!=null&&s.origin>i)return}this._values.set(t,new Ok(r,i))}delete(t,r){var i;(r=this._normalizeOrigin(r))!=null&&((i=this._values.get(t))==null?void 0:i.origin)!==r||this._values.delete(t)}has(t,r){var i;return(r=this._normalizeOrigin(r))!=null?((i=this._values.get(t))==null?void 0:i.origin)===r:this._values.has(t)}forEach(t){this._values.forEach(({value:r},i)=>t(r,i))}_normalizeOrigin(t){if(t!=null)return t===ue.DEFAULTS?t:ue.USER}},Ok=class{constructor(t,r){this.value=t,this.origin=r}};function Ck(e,t,r){t.keys().forEach(s=>{r.set(s,t.get(s),ue.DEFAULTS)});const i=e.metadata;Object.keys(i).forEach(s=>{e.internalGet(s)&&r.set(s,e.internalGet(s),ue.DEFAULTS)})}function Ik(e,t,r){if(!(e!=null&&e.read)||e.read.enabled===!1||!e.read.source)return!1;const i=e.read.source;if(typeof i=="string"){if(i===t||i.includes(".")&&i.indexOf(t)===0&&xw(i,r))return!0}else for(const s of i)if(s===t||s.includes(".")&&s.indexOf(t)===0&&xw(s,r))return!0;return!1}function Rk(e){return e&&(!e.read||e.read.enabled!==!1&&!e.read.source)}function kk(e,t,r,i,s){let n=rg(t[r],s);Rk(n)&&(e[r]=!0);for(const o of Object.getOwnPropertyNames(t))n=rg(t[o],s),Ik(n,r,i)&&(e[o]=!0)}function Nk(e,t,r,i){const s=r.metadata,n=bk(s[t],i),o=n==null?void 0:n.default;if(o===void 0)return;const a=typeof o=="function"?o.call(e,t,i):o;a!==void 0&&r.set(t,a)}const wE={origin:"service"};function Lk(e,t,r=wE){if(!t||typeof t!="object")return;const i=fn(e),s=i.metadata,n={};for(const o of Object.getOwnPropertyNames(t))kk(n,s,o,t,r);i.setDefaultOrigin(r.origin);for(const o of Object.getOwnPropertyNames(n)){const a=rg(s[o],r).read,l=a==null?void 0:a.source;let h;h=l&&typeof l=="string"?Zc(t,l):t[o],a!=null&&a.reader&&(h=a.reader.call(e,h,t,r)),h!==void 0&&i.set(o,h)}if(!r||!r.ignoreDefaults){i.setDefaultOrigin("defaults");for(const o of Object.getOwnPropertyNames(s))n[o]||Nk(e,o,i,r)}i.setDefaultOrigin("user")}function tX(e,t,r,i=wE){var n;const s={...i,messages:[]};r(s),(n=s.messages)==null||n.forEach(o=>{o.type!=="warning"||e.loaded?i!=null&&i.messages&&i.messages.push(o):e.loadWarnings.push(o)})}function Dk(e,t,r,i,s){var o,a;const n={};return(a=(o=t.write)==null?void 0:o.writer)==null||a.call(e,i,n,r,s),n}function bE(e,t,r,i,s,n){if(!(i!=null&&i.write))return!1;const o=cs(e,r);if(!s&&i.write.overridePolicy){const a=i.write.overridePolicy.call(e,o,r,n??void 0);a!==void 0&&(s=a)}if(s||(s=i.write),!s||s.enabled===!1||s.layerContainerTypes&&(n!=null&&n.layerContainerType)&&!s.layerContainerTypes.includes(n.layerContainerType))return!1;if((o===null&&!s.allowNull&&!s.writerEnsuresNonNull||o===void 0)&&s.isRequired){const a=new I("web-document-write:property-required",`Missing value for required property '${r}' on '${e.declaredClass}'`,{propertyName:r,target:e});return a&&(n!=null&&n.messages)?n.messages.push(a):a&&!n&&U.getLogger("esri.core.accessorSupport.write").error(a.name,a.message),!1}return!(o===void 0||o===null&&!s.allowNull&&!s.writerEnsuresNonNull||!s.alwaysWriteDefaults&&(!t.store.multipleOriginsSupported||t.store.originOf(r)===ue.DEFAULTS)&&Fk(e,r,n,i,o)||!s.ignoreOrigin&&(n!=null&&n.origin)&&t.store.multipleOriginsSupported&&t.store.originOf(r)<F$(n.origin))}function Fk(e,t,r,i,s){const n=i.default;if(n===void 0)return!1;if(i.defaultEquals!=null)return i.defaultEquals(s);if(typeof n=="function"){if(Array.isArray(s)){const o=n.call(e,t,r??void 0);return gf(o,s)}return!1}return n===s}function rX(e,t,r,i){const s=fn(e),n=s.metadata,o=mE(n[t],i);return!!o&&bE(e,s,t,o,r,i)}function Uk(e,t,r){var n,o;if(e&&typeof e.toJSON=="function"&&(!e.toJSON.isDefaultToJSON||!e.write))return ud(t,e.toJSON(r));const i=fn(e),s=i.metadata;for(const a in s){const l=mE(s[a],r);if(!bE(e,i,a,l,void 0,r))continue;const h=cs(e,a),p=Dk(e,l,l.write&&typeof l.write.target=="string"?l.write.target:a,h,r);Object.keys(p).length>0&&(t=ud(t,p),(o=(n=r==null?void 0:r.resources)==null?void 0:n.pendingOperations)!=null&&o.length&&r.resources.pendingOperations.push(Promise.all(r.resources.pendingOperations).then(()=>ud(t,p,()=>"replace-arrays"))),r!=null&&r.writtenProperties&&r.writtenProperties.push({target:e,propName:a,oldOrigin:XI(i.store.originOf(a)),newOrigin:r.origin}))}return t}const SE=e=>{let t=class extends e{constructor(...r){super(...r);const i=fn(this),s=i.store,n=new Pk;i.store=n,Ck(i,s,n)}read(r,i){Lk(this,r,i)}write(r,i){return Uk(this,r??{},i)}toJSON(r){return this.write({},r)}static fromJSON(r,i){return jk.call(this,r,i)}};return t=c([S("esri.core.JSONSupport")],t),t.prototype.toJSON.isDefaultToJSON=!0,t};function jk(e,t){if(!e)return null;if(e.declaredClass)throw new Error("JSON object is already hydrated");const r=new this;return r.read(e,t),r}let ru=class extends SE(W){};ru=c([S("esri.core.JSONSupport")],ru),function(e){function t(r){return r&&typeof r=="object"&&"toJSON"in r&&typeof r.toJSON=="function"}e.JSONSupportMixin=SE,e.isSerializable=t}(ru||(ru={}));const G=ru,Gk=/^https:\/\/([a-z\d-]+)(\.maps([^.]*))?\.arcgis\.com/i,zk={devext:{customBaseUrl:"mapsdevext.arcgis.com",portalHostname:"devext.arcgis.com"},qaext:{customBaseUrl:"mapsqa.arcgis.com",portalHostname:"qaext.arcgis.com"},www:{customBaseUrl:"maps.arcgis.com",portalHostname:"www.arcgis.com"}};function Ww(e){const t=e==null?void 0:e.match(Gk);if(!t)return null;const[,r,i,s]=t;if(!r)return null;let n=null,o=null,a=null;const{devext:l,qaext:h,www:p}=zk;if(i)if(n=r,s)switch(s.toLowerCase()){case"devext":({customBaseUrl:o,portalHostname:a}=l);break;case"qa":({customBaseUrl:o,portalHostname:a}=h);break;default:return null}else({customBaseUrl:o,portalHostname:a}=p);else switch(r.toLowerCase()){case"devext":({customBaseUrl:o,portalHostname:a}=l);break;case"qaext":({customBaseUrl:o,portalHostname:a}=h);break;case"www":({customBaseUrl:o,portalHostname:a}=p);break;default:return null}return{customBaseUrl:o,isPortal:!1,portalHostname:a,urlKey:n}}function Vk(e){return/\/(sharing|usrsvcs)\/(appservices|servers)\//i.test(e)}function TE(e){const t=/^https?:\/\/(?:cdn|[a-z\d-]+\.maps)\.arcgis\.com/i,r=/^https?:\/\/(?:cdndev|[a-z\d-]+\.mapsdevext)\.arcgis\.com/i,i=/^https?:\/\/(?:cdnqa|[a-z\d-]+\.mapsqa)\.arcgis\.com/i;return t.test(e)?e=e.replace(t,"https://www.arcgis.com"):r.test(e)?e=e.replace(r,"https://devext.arcgis.com"):i.test(e)&&(e=e.replace(i,"https://qaext.arcgis.com")),e}function $E(e){const t=atob(e),r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r.buffer}function Bk(e){const t=new Uint8Array(e);let r="";for(let i=0;i<t.length;i++)r+=String.fromCharCode(t[i]);return btoa(r)}const Hk=()=>U.getLogger("esri.core.urlUtils"),Tl=ye.request,Zw="esri/config: esriConfig.request.proxyUrl is not set.",EE=/^\s*[a-z][a-z0-9-+.]*:(?![0-9])/i,ME=/^\s*http:/i,qk=/^\s*https:/i,Wk=/^\s*file:/i,Zk=/:\d+$/,Jk=/^https?:\/\/[^/]+\.arcgis.com\/sharing(\/|$)/i,Yk=new RegExp("^(([^:/?#]+):)?(//([^/?#]*))?([^?#]*)(\\?([^#]*))?(#(.*))?$"),Kk=new RegExp("^((([^[:]+):)?([^@]+)@)?(\\[([^\\]]+)\\]|([^[:]*))(:([0-9]+))?$");let Ga=class{constructor(t=""){this.uri=t,this.scheme=null,this.authority=null,this.path=null,this.query=null,this.fragment=null,this.user=null,this.password=null,this.host=null,this.port=null;let r=this.uri.match(Yk);this.scheme=r[2]||(r[1]?"":null),this.authority=r[4]||(r[3]?"":null),this.path=r[5],this.query=r[7]||(r[6]?"":null),this.fragment=r[9]||(r[8]?"":null),this.authority!=null&&(r=this.authority.match(Kk),this.user=r[3]||null,this.password=r[4]||null,this.host=r[6]||r[7],this.port=r[9]||null)}toString(){return this.uri}};const Th={},Xk=new Ga(ye.applicationUrl);let wt=Xk;const Qk=eN();let f_=Qk;const m_=()=>wt,nX=()=>f_;function eN(){const e=wt.path,t=e.slice(0,e.lastIndexOf("/")+1);return`${`${wt.scheme}://${wt.host}${wt.port!=null?`:${wt.port}`:""}`}${t}`}function Nt(e){if(!e)return null;const t={path:null,query:null},r=new Ga(e),i=e.indexOf("?");return r.query===null?t.path=e:(t.path=e.slice(0,i),t.query=y_(r.query)),r.fragment&&(t.hash=r.fragment,r.query===null&&(t.path=t.path.slice(0,t.path.length-(r.fragment.length+1)))),t}function y_(e){const t=e.split("&"),r={};for(const i of t){if(!i)continue;const s=i.indexOf("=");let n,o;s<0?(n=decodeURIComponent(i),o=""):(n=decodeURIComponent(i.slice(0,s)),o=decodeURIComponent(i.slice(s+1)));let a=r[n];typeof a=="string"&&(a=r[n]=[a]),Array.isArray(a)?a.push(o):r[n]=o}return r}function Tc(e,t){return e?Object.keys(e).map(r=>{const i=e[r];if(i==null)return"";const s=encodeURIComponent(r)+"=",n=t==null?void 0:t[r];return n?s+encodeURIComponent(n(i)):Array.isArray(i)?i.map(o=>G.isSerializable(o)?s+encodeURIComponent(JSON.stringify(o)):s+encodeURIComponent(o)).join("&"):G.isSerializable(i)?s+encodeURIComponent(JSON.stringify(i)):s+encodeURIComponent(i)}).filter(r=>r).join("&"):""}function xE(e=!1){let t,r=Tl.proxyUrl;if(typeof e=="string"){t=oN(e);const i=Af(e);i&&(r=i.proxyUrl)}else t=!!e;if(!r)throw Hk().warn(Zw),new I("urlUtils:proxy-not-set",Zw);return t&&og()&&(r=S_(r)),Nt(r)}function oX(e,t=!1){const r=Af(e);let i,s;if(r){const n=g_(r.proxyUrl);i=n.path,s=n.query?y_(n.query):null}else if(t){const n=xE(e);i=n.path,s=n.query}if(i){const n=Nt(e);e=i+"?"+n.path;const o=Tc({...s,...n.query});o&&(e=`${e}?${o}`)}return e}const Rl={path:"",query:""};function g_(e){const t=e.indexOf("?");return t!==-1?(Rl.path=e.slice(0,t),Rl.query=e.slice(t+1)):(Rl.path=e,Rl.query=null),Rl}function AE(e){return e=(e=Mp(e=hN(e=g_(e).path),!0)).toLowerCase()}function tN(e){const t={proxyUrl:e.proxyUrl,urlPrefix:AE(e.urlPrefix)},r=Tl.proxyRules,i=t.urlPrefix;let s=r.length;for(let n=0;n<r.length;n++){const o=r[n].urlPrefix;if(i.indexOf(o)===0){if(i.length===o.length)return-1;s=n;break}o.indexOf(i)===0&&(s=n+1)}return r.splice(s,0,t),s}function Af(e){const t=Tl.proxyRules,r=AE(e);for(let i=0;i<t.length;i++)if(r.indexOf(t[i].urlPrefix)===0)return t[i]}function aX(e,t){if(!e||!t)return!1;e=Ep(e),t=Ep(t);const r=Ww(e),i=Ww(t);return r!=null&&i!=null?r.portalHostname===i.portalHostname:r==null&&i==null&&sl(e,t,!0)}function rN(e,t){return e=Ep(e),t=Ep(t),Mp(e)===Mp(t)}function Ep(e){const t=(e=un(e)).indexOf("/sharing");return t>0?e.slice(0,t):e.replace(/\/+$/,"")}function ng(e,t=Tl.interceptors){const r=i=>i==null||i instanceof RegExp&&i.test(e)||typeof i=="string"&&e.startsWith(i);if(t){for(const i of t)if(Array.isArray(i.urls)){if(i.urls.some(r))return i}else if(r(i.urls))return i}return null}function sl(e,t,r=!1){if(!e||!t)return!1;const i=lg(e),s=lg(t);return!(!r&&i.scheme!==s.scheme)&&i.host!=null&&s.host!=null&&i.host.toLowerCase()===s.host.toLowerCase()&&i.port===s.port}function __(e){if(typeof e=="string"){if(!ar(e))return!0;e=lg(e)}if(sl(e,wt))return!0;const t=Tl.trustedServers||[];for(let r=0;r<t.length;r++){const i=iN(t[r]);for(let s=0;s<i.length;s++)if(sl(e,i[s]))return!0}return!1}function iN(e){return Th[e]||(b_(e)||xi(e)?Th[e]=[new Ga($r(e))]:Th[e]=[new Ga(`http://${e}`),new Ga(`https://${e}`)]),Th[e]}function $r(e,t=f_,r){return xi(e)?r!=null&&r.preserveProtocolRelative?e:wt.scheme==="http"&&wt.authority===or(e).slice(2)?`http:${e}`:`https:${e}`:b_(e)?e:Pf(e[0]==="/"?cN(t):t,e)}function v_(e,t=f_,r){if(e==null||!ar(e))return e;const i=un(e),s=i.toLowerCase(),n=un(t).toLowerCase().replace(/\/+$/,""),o=r?un(r).toLowerCase().replace(/\/+$/,""):null;if(o&&n.indexOf(o)!==0)return e;const a=(f,m,y)=>(y=f.indexOf(m,y))===-1?f.length:y;let l=a(s,"/",s.indexOf("//")+2),h=-1;for(;s.slice(0,l+1)===n.slice(0,l)+"/"&&(h=l+1,l!==s.length);)l=a(s,"/",l+1);if(h===-1||o&&h<o.length)return e;e=i.slice(h);const p=n.slice(h-1).replaceAll(/[^/]+/g,"").length;if(p>0)for(let f=0;f<p;f++)e=`../${e}`;else e=`./${e}`;return e}function un(e){return e=fN(e=pN(e=dN(e=$r(e=e.trim()))))}function Pf(...e){const t=e.filter(tl);if(!(t!=null&&t.length))return;const r=[];if(ar(t[0])){const s=t[0],n=s.indexOf("//");n!==-1&&(r.push(s.slice(0,n+1)),lN(t[0])&&(r[0]+="/"),t[0]=s.slice(n+2))}else t[0][0]==="/"&&r.push("");const i=t.reduce((s,n)=>n?s.concat(n.split("/")):s,[]);for(let s=0;s<i.length;s++){const n=i[s];n===".."&&r.length>0&&r[r.length-1]!==".."?r.pop():(!n&&s===i.length-1||n&&(n!=="."||r.length===0))&&r.push(n)}return r.join("/")}function or(e,t=!1){if(e==null||w_(e)||jo(e))return null;let r=e.indexOf("://");if(r===-1&&xi(e))r=2;else{if(r===-1)return null;r+=3}const i=e.indexOf("/",r);return i!==-1&&(e=e.slice(0,i)),t&&(e=Mp(e,!0)),e}function ar(e){return xi(e)||b_(e)}function w_(e){return e!=null&&e.slice(0,5)==="blob:"}function jo(e){return e!=null&&e.slice(0,5)==="data:"}function sN(e){const t=nl(e);return t!=null&&t.isBase64?$E(t.data):null}function lX(e){return Bk(e).replaceAll("+","-").replaceAll("/","_").replace(/=+$/,"")}const nN=/^data:(.*?)(;base64)?,(.*)$/;function nl(e){const t=e.match(nN);if(!t)return null;const[,r,i,s]=t;return{mediaType:r,isBase64:!!i,data:s}}function PE(e){return e.isBase64?`data:${e.mediaType};base64,${e.data}`:`data:${e.mediaType},${e.data}`}async function uX(e){return(await fetch(e)).blob()}function cX(e){const t=sN(e);if(!t)return null;const r=nl(e);return new Blob([t],{type:r.mediaType})}function xi(e){return e!=null&&e[0]==="/"&&e[1]==="/"}function b_(e){return e!=null&&EE.test(e)}function oN(e){return e!=null&&qk.test(e)||wt.scheme==="https"&&xi(e)}function aN(e){return e!=null&&ME.test(e)||wt.scheme==="http"&&xi(e)}function lN(e){return e!=null&&Wk.test(e)}function S_(e){return xi(e)?`https:${e}`:e.replace(ME,"https:")}function uN(){return wt.scheme==="http"}function og(){return wt.scheme==="https"}function Mp(e,t=!1){return xi(e)?e.slice(2):(e=e.replace(EE,""),t&&e.length>1&&e[0]==="/"&&e[1]==="/"&&(e=e.slice(2)),e)}function cN(e){const t=e.indexOf("//"),r=e.indexOf("/",t+2);return r===-1?e:e.slice(0,r)}function hX(e){let t=0;if(ar(e)){const i=e.indexOf("//");i!==-1&&(t=i+2)}const r=e.lastIndexOf("/");return r<t?e:e.slice(0,r+1)}function dX(e,t){if(!e)return"";const r=Nt(e).path.replace(/\/+$/,""),i=r.slice(r.lastIndexOf("/")+1);if(!(t!=null&&t.length))return i;const s=new RegExp(`\\.(${t.join("|")})$`,"i");return i.replace(s,"")}function hN(e){return e.endsWith("/")?e:`${e}/`}function OE(e){return e.replace(/\/+$/,"")}function dN(e){if(/^https?:\/\//i.test(e)){const t=g_(e);e=(e=t.path.replaceAll(/\/{2,}/g,"/")).replace("/","//"),t.query&&(e+=`?${t.query}`)}return e}function pN(e){return e.replace(/^(https?:\/\/)(arcgis\.com)/i,"$1www.$2")}function fN(e){const t=Tl.httpsDomains;if(!aN(e))return e;const r=e.indexOf("/",7);let i;if(i=r===-1?e:e.slice(0,r),i=i.toLowerCase().slice(7),Zk.test(i)){if(!i.endsWith(":80"))return e;i=i.slice(0,-3),e=e.replace(":80","")}return uN()&&i===wt.authority&&!Jk.test(e)||(og()&&i===wt.authority||t&&t.some(s=>i===s||i.endsWith(`.${s}`))||og()&&!Af(e))&&(e=S_(e)),e}function ag(e,t,r){if(!(t&&r&&e&&ar(e)))return e;const i=e.indexOf("//"),s=e.indexOf("/",i+2),n=e.indexOf(":",i+2),o=Math.min(s<0?e.length:s,n<0?e.length:n);return e.slice(i+2,o).toLowerCase()!==t.toLowerCase()?e:`${e.slice(0,i+2)}${r}${e.slice(o)}`}function lg(e){return typeof e=="string"?new Ga($r(e)):(e.scheme||(e.scheme=wt.scheme),e)}function pX(e){return yN.test(e)}function CE(e,t){const r=Nt(e),i=Object.keys(r.query||{});return i.length>0&&t&&t.warn("removeQueryParameters()",`Url query parameters are not supported, the following parameters have been removed: ${i.join(", ")}.`),r.path}function mN(e,t,r){const i=Nt(e),s=i.query||{};return s[t]=String(r),`${i.path}?${Tc(s)}`}function Am(e,t){if(!t)return e;const r=Nt(e),i=r.query||{};for(const[n,o]of Object.entries(t))o!=null&&(i[n]=o);const s=Tc(i);return s?`${r.path}?${s}`:r.path}function fX(e){if(e==null)return null;const t=e.match(IE);return t?t[2]:null}function Jw(e){if(e==null)return null;const t=e.match(IE);return t?{path:t[1],extension:t[2]}:{path:e,extension:null}}async function mX(e){return typeof e=="string"?nl(e)??{data:e}:new Promise((t,r)=>{const i=new FileReader;i.readAsDataURL(e),i.onload=()=>t(nl(i.result)),i.onerror=s=>r(s)})}const IE=/([^.]*)\.([^/]*)$/,yN=/(^data:image\/svg|\.svg$)/i,RE="20250318",kE="878eb8750809e56d2a9ea9f1475c9e4e58226dad";Symbol.dispose??(Symbol.dispose=Symbol("Symbol.dispose")),Symbol.asyncDispose??(Symbol.asyncDispose=Symbol("Symbol.asyncDispose"));const gN="4.32";let ve,T_=gN;T_="4.32.9";function yX(e){ve=e}function gX(e){const t=ve==null?void 0:ve.findCredential(e);return t!=null&&t.token?mN(e,"token",t.token):e}A("host-webworker")||globalThis.$arcgis||Object.defineProperty(globalThis,"$arcgis",{configurable:!1,enumerable:!0,writable:!1,value:{}}),A("host-webworker");function Qc(e,t){var i;const r=(i=t==null?void 0:t.url)==null?void 0:i.path;if(e&&r&&(e=$r(e,r,{preserveProtocolRelative:!0}),t.portalItem&&t.readResourcePaths)){const s=v_(e,t.portalItem.itemUrl);s!=null&&_N.test(s)&&t.readResourcePaths.push(t.portalItem.resourceFromPath(s).path)}return(e=ug(e,t==null?void 0:t.portal))&&Cf.test(e)?E_(e):e}function Of(e,t,r=$c.YES){var s,n;if((e=e&&Cf.test(e)?LE(e):e)==null)return e;!ar(e)&&(t!=null&&t.blockedRelativeUrls)&&t.blockedRelativeUrls.push(e);let i=$r(e);if(t){const o=((s=t.verifyItemRelativeUrls)==null?void 0:s.rootPath)||((n=t.url)==null?void 0:n.path);if(o){const a=ug(o,t.portal),l=ug(i,t.portal);i=v_(l,a,a),i!=null&&i!==l&&i!==e&&t.verifyItemRelativeUrls&&t.verifyItemRelativeUrls.writtenUrls.push(i)}}return i=NE(i,t==null?void 0:t.portal),ar(i)&&(i=un(i)),t!=null&&t.resources&&(t!=null&&t.portalItem)&&!ar(i)&&!jo(i)&&r===$c.YES&&t.resources.toKeep.push({resource:t.portalItem.resourceFromPath(i),compress:!1}),i}function $_(e,t,r){return Qc(e,r)}function ol(e,t,r,i){const s=Of(e,i);s!==void 0&&(t[r]=s)}const Cf=/\/items\/([^/]+)\/resources\/(.*)/,_N=/^\.\/resources\//;function vN(e){const t=(e==null?void 0:e.match(Cf))??null;return(t==null?void 0:t[1])??null}function wN(e){const t=(e==null?void 0:e.match(Cf))??null;if(t==null)return null;const r=t[2],i=r.lastIndexOf("/");if(i===-1){const{path:o,extension:a}=Jw(r);return{prefix:null,filename:o,extension:a}}const{path:s,extension:n}=Jw(r.slice(i+1));return{prefix:r.slice(0,i),filename:s,extension:n}}function NE(e,t){return t&&!t.isPortal&&t.urlKey&&t.customBaseUrl?ag(e,`${t.urlKey}.${t.customBaseUrl}`,t.portalHostname):e}function ug(e,t){if(!t||t.isPortal||!t.urlKey||!t.customBaseUrl)return e;const r=`${t.urlKey}.${t.customBaseUrl}`,i=m_();return sl(i,`${i.scheme}://${r}`)?ag(e,t.portalHostname,r):ag(e,r,t.portalHostname)}function E_(e){if(!e)return e||null;let t=e;return t&&ve&&!ve.findCredential(t)&&(t=TE(t),t=t.replace(/^https?:\/\/www\.arcgis\.com/,"https://cdn.arcgis.com"),t=t.replace(/^https?:\/\/devext\.arcgis\.com/,"https://cdndev.arcgis.com"),t=t.replace(/^https?:\/\/qaext\.arcgis\.com/,"https://cdnqa.arcgis.com")),t}function LE(e){if(!e)return e||null;let t=e;return t=t.replace(/^https?:\/\/cdn\.arcgis\.com/,"https://www.arcgis.com"),t=t.replace(/^https?:\/\/cdndev\.arcgis\.com/,"https://devext.arcgis.com"),t=t.replace(/^https?:\/\/cdnqa\.arcgis\.com/,"https://qaext.arcgis.com"),t&&ve&&!ve.findCredential(t)&&(t=TE(t)),t}var $c;(function(e){e[e.YES=0]="YES",e[e.NO=1]="NO"})($c||($c={}));const _X=Object.freeze(Object.defineProperty({__proto__:null,get MarkKeep(){return $c},ensureMainOnlineDomain:NE,fromCDNUrl:LE,fromJSON:Qc,itemIdFromResourceUrl:vN,prefixAndFilenameFromResourceUrl:wN,read:$_,toCDNUrl:E_,toJSON:Of,write:ol},Symbol.toStringTag,{value:"Module"})),DE={mapserver:"MapServer",imageserver:"ImageServer",featureserver:"FeatureServer",knowledgegraphserver:"KnowledgeGraphServer",sceneserver:"SceneServer",streamserver:"StreamServer",vectortileserver:"VectorTileServer","3dtilesserver":"3DTilesServer",videoserver:"VideoServer"},FE=Object.values(DE),UE=new RegExp(`^((?:https?:)?\\/\\/\\S+?\\/rest\\/services\\/(.+?)\\/(${FE.join("|")}))(?:\\/(?:layers\\/)?(\\d+))?`,"i"),bN=new RegExp(`^((?:https?:)?\\/\\/\\S+?\\/([^/\\n]+)\\/(${FE.join("|")}))(?:\\/(?:layers\\/)?(\\d+))?`,"i"),SN=/(.*?)\/(?:layers\/)?(\d+)\/?$/i;function vX(e){return UE.test(e)}function M_(e){if(e==null)return null;const t=Nt(e),r=(t==null?void 0:t.path.match(UE))||(t==null?void 0:t.path.match(bN));if(!r)return null;const[,i,s,n,o]=r,a=s.indexOf("/");return{title:jE(a!==-1?s.slice(a+1):s),serverType:DE[n.toLowerCase()],sublayer:o!=null&&o!==""?parseInt(o,10):null,url:{path:i}}}function TN(e){const t=Nt(e).path.match(SN);return t?{serviceUrl:t[1],sublayerId:Number(t[2])}:null}function jE(e){return(e=e.replaceAll(/\s*[/_]+\s*/g," "))[0].toUpperCase()+e.slice(1)}function wX(e,t){const r=[];if(e){const i=M_(e);i!=null&&i.title&&r.push(i.title)}if(t){const i=jE(t);r.push(i)}if(r.length===2){if(r[0].toLowerCase().includes(r[1].toLowerCase()))return r[0];if(r[1].toLowerCase().includes(r[0].toLowerCase()))return r[1]}return r.join(" - ")}function Yw(e){let t=or(e,!0);return!!t&&(t=t.toLowerCase(),t.endsWith(".arcgis.com")&&(t.startsWith("services")||t.startsWith("tiles")||t.startsWith("features")))}function bX(e,t){return e&&OE(CE(e,t))}function SX(e){let{url:t}=e;if(!t)return{url:t};t=CE(t,e.logger);const r=Nt(t),i=M_(r.path);let s;if(i!=null)i.sublayer!=null&&e.layer.layerId==null&&(s=i.sublayer),t=i.url.path;else if(e.nonStandardUrlAllowed){const n=TN(r.path);n!=null&&(t=n.serviceUrl,s=n.sublayerId)}return{url:OE(t),layerId:s}}function TX(e,t,r,i,s){ol(t,i,"url",s),i.url&&e.layerId!=null&&(i.url=Pf(i.url,r,e.layerId.toString()))}function $X(e){if(!e)return!1;const t=e.toLowerCase(),r=t.includes("/services/"),i=t.includes("/mapserver/wmsserver"),s=t.includes("/imageserver/wmsserver"),n=t.includes("/wmsserver");return r&&(i||s||n)}const $N=new Set(["elevation3d.arcgis.com","js.arcgis.com","jsdev.arcgis.com","jsqa.arcgis.com","static.arcgis.com"]);function EN(e){const t=or(e,!0);return!!t&&t.endsWith(".arcgis.com")&&!$N.has(t)&&!e.endsWith("/sharing/rest/generateToken")}function GE(e,t){return!(!ye.apiKey||!EN(e))}function MN(e,t,r=!1,i){return new Promise((s,n)=>{if(ur(i))return void n(Kw());let o=()=>{h(),n(new Error(`Unable to load ${t}`))},a=()=>{const p=e;h(),s(p)},l=()=>{if(!e)return;const p=e;h(),p.src="",n(Kw())};const h=()=>{A("esri-image-decode")||(e.removeEventListener("error",o),e.removeEventListener("load",a)),o=null,a=null,e=null,i!=null&&i.removeEventListener("abort",l),l=null,r&&URL.revokeObjectURL(t)};i!=null&&i.addEventListener("abort",l),A("esri-image-decode")?e.decode().then(a,o):(e.addEventListener("error",o),e.addEventListener("load",a))})}function Kw(){try{return new DOMException("Aborted","AbortError")}catch{const e=new Error;return e.name="AbortError",e}}const zE="Timeout exceeded";function xN(){return new Error(zE)}function EX(e){return typeof e=="object"&&!!e&&"message"in e&&e.message===zE}function AN(e){ye.request.crossOriginNoCorsDomains||(ye.request.crossOriginNoCorsDomains={});const t=ye.request.crossOriginNoCorsDomains;for(let r of e)r=r.toLowerCase(),/^https?:\/\//.test(r)?t[or(r)??""]=0:(t[or("http://"+r)??""]=0,t[or("https://"+r)??""]=0)}function PN(e){const t=ye.request.crossOriginNoCorsDomains;if(t){let r=or(e);if(r)return r=r.toLowerCase(),!sl(r,m_())&&t[r]<Date.now()-36e5}return!1}async function ON(e){var s;const t=Nt(e);e=t.path,((s=t.query)==null?void 0:s.f)==="json"&&(e+="?f=json");try{await fetch(e,{mode:"no-cors",credentials:"include"})}catch{}const r=ye.request.crossOriginNoCorsDomains,i=or(e);r&&i&&(r[i.toLowerCase()]=Date.now())}async function We(e,t){var y;e instanceof URL&&(e=e.toString()),(t==null?void 0:t.query)instanceof URLSearchParams&&(t.query=y_(t.query.toString().replaceAll("+"," ")));const r=jo(e),i=w_(e);i||r||(e=un(e));const s={url:e,requestOptions:{...t}},n=_=>({data:_,getAllHeaders:al,getHeader:al,httpStatus:200,requestOptions:s.requestOptions,url:s.url}),o=ng(e,Tr.internalInterceptors);if(o){const _=await Qw(o,s);if(_!=null)return n(_)}let a=ng(e);if(a){const _=await Qw(a,s);if(_!=null)return n(_);a.after||a.error||(a=null)}if(e=s.url,(t=s.requestOptions).responseType==="image"&&(A("host-webworker")||A("host-node")))throw ei("request:invalid-parameters",new Error("responseType 'image' is not supported in Web Workers or Node environment"),s);if(t.method==="head"){if(t.body)throw ei("request:invalid-parameters",new Error("body parameter cannot be set when method is 'head'"),s);if(r||i)throw ei("request:invalid-parameters",new Error("data and blob URLs are not supported for method 'head'"),s)}if(await NN(),xp)return xp.execute(e,t);const l=new AbortController,h=Ar(t,()=>l.abort()),p={controller:l,credential:void 0,credentialToken:void 0,fetchOptions:void 0,hasToken:!1,interceptor:a,params:s,redoRequest:!1,useIdentity:Tr.useIdentity,useProxy:!1,useSSL:!1,withCredentials:!1},f=t.useRequestQueue?jN(p):hg(p),m=await f.finally(()=>h==null?void 0:h.remove());return(y=a==null?void 0:a.after)==null||y.call(a,m),m}let xp;const Tr=ye.request,VE="FormData"in globalThis,CN=new Set([499,498,403,401]),IN=new Set(["COM_0056","COM_0057","SB_0008"]),RN=[/\/arcgis\/tokens/i,/\/sharing(\/rest)?\/generatetoken/i,/\/rest\/info/i],al=()=>null,Ap=Symbol();function kN(e){const t=or(e);t&&!We._corsServers.includes(t)&&We._corsServers.push(t)}function Xw(e){const t=or(e);return!t||t.endsWith(".arcgis.com")||We._corsServers.includes(t)||__(t)}function ei(e,t,r,i){let s="Error";const n={url:r.url,requestOptions:r.requestOptions,getAllHeaders:al,getHeader:al,ssl:!1};if(t instanceof I)return t.details?(t.details=C(t.details),t.details.url=r.url,t.details.requestOptions=r.requestOptions):t.details=n,t;if(t){const o=i&&(()=>Array.from(i.headers)),a=i&&(p=>i.headers.get(p)),l=i==null?void 0:i.status,h=t.message;h&&(s=h),o&&a&&(n.getAllHeaders=o,n.getHeader=a),n.httpStatus=(t.httpCode!=null?t.httpCode:t.code)||l||0,n.subCode=t.subcode,n.messageCode=t.messageCode,typeof t.details=="string"?n.messages=[t.details]:n.messages=t.details,n.raw=Ap in t?t[Ap]:t}return qt(t)?Ee():new I(e,s,n)}async function NN(){A("host-webworker")&&!xp&&(xp=await N(()=>import("./request-byMSBuoq.js"),[]))}async function cg(){ve||await N(()=>import("./IdentityManager-C8JQBlFw.js"),__vite__mapDeps([0,1]))}async function LN(e){var a;const t=e.params.url,r=e.params.requestOptions,i=e.controller.signal,s=r.body;let n=null,o=null;if(VE&&"HTMLFormElement"in globalThis&&(s instanceof FormData?n=s:s instanceof HTMLFormElement&&(n=new FormData(s))),typeof s=="string"&&(o=s),e.fetchOptions={cache:r.cacheBust?"no-cache":"default",credentials:"same-origin",headers:r.headers||{},method:r.method==="head"?"HEAD":"GET",mode:"cors",priority:Tr.priority,redirect:"follow",signal:i},(n||o)&&(e.fetchOptions.body=n||o),r.authMode==="anonymous"&&(e.useIdentity=!1),e.hasToken=!!(/token=/i.test(t)||(a=r.query)!=null&&a.token||n!=null&&n.get("token")),!e.hasToken&&GE(t)&&(r.query||(r.query={}),r.query.token=ye.apiKey,e.hasToken=!0),e.useIdentity&&!e.hasToken&&!e.credentialToken&&!BE(t)&&!ur(i)){let l;r.authMode==="immediate"?(await cg(),l=await ve.getCredential(t,{signal:i}),e.credential=l):r.authMode==="no-prompt"?(await cg(),l=await ve.getCredential(t,{prompt:!1,signal:i}).catch(()=>{}),e.credential=l):ve&&(l=ve.findCredential(t)),l&&(e.credentialToken=l.token,e.useSSL=!!l.ssl)}}function BE(e){return RN.some(t=>t.test(e))}async function DN(e){let t=e.params.url;const r=e.params.requestOptions,i=e.fetchOptions??{},s=w_(t)||jo(t),n=r.responseType||"json",o=s?0:r.timeout!=null?r.timeout:Tr.timeout;let a=!1;if(!s){e.useSSL&&(t=S_(t));let m={...r.query};e.credentialToken&&(m.token=e.credentialToken);let y=Tc(m);A("esri-url-encodes-apostrophe")&&(y=y.replaceAll("'","%27"));const _=t.length+1+y.length;let v;a=r.method==="delete"||r.method==="post"||r.method==="put"||!!r.body||_>Tr.maxUrlLength;const w=r.useProxy||!!Af(t);if(w){const b=xE(t);v=b.path,!a&&v.length+1+_>Tr.maxUrlLength&&(a=!0),b.query&&(m={...b.query,...m})}if(i.method==="HEAD"&&(a||w)){if(a)throw _>Tr.maxUrlLength?ei("request:invalid-parameters",new Error("URL exceeds maximum length"),e.params):ei("request:invalid-parameters",new Error("cannot use POST request when method is 'head'"),e.params);if(w)throw ei("request:invalid-parameters",new Error("cannot use proxy when method is 'head'"),e.params)}if(a?(i.method=r.method==="delete"?"DELETE":r.method==="put"?"PUT":"POST",r.body?t=Am(t,m):(i.body=Tc(m),i.headers||(i.headers={}),i.headers["Content-Type"]="application/x-www-form-urlencoded")):t=Am(t,m),w&&(e.useProxy=!0,t=`${v}?${t}`),m.token&&VE&&i.body instanceof FormData&&!Vk(t)&&i.body.set("token",m.token),r.hasOwnProperty("withCredentials"))e.withCredentials=r.withCredentials;else if(!sl(t,m_())){if(__(t))e.withCredentials=!0;else if(ve){const b=ve.findServerInfo(t);b!=null&&b.webTierAuth&&(e.withCredentials=!0)}}e.withCredentials&&(i.credentials="include",PN(t)&&await ON(a?Am(t,m):t))}let l,h,p=0,f=!1;o>0&&(p=setTimeout(()=>{f=!0,e.controller.abort()},o));try{if(r.responseType==="native-request-init")h=i,h.url=t,r.signal?h.signal=r.signal:delete h.signal;else if(r.responseType!=="image"||i.cache!=="default"||i.method!=="GET"||a||FN(r.headers)||!s&&!e.useProxy&&Tr.proxyUrl&&!Xw(t)){if(We._beforeFetch&&await We._beforeFetch(t,i),l=await fetch(t,i),We._afterFetch&&await We._afterFetch(l),e.useProxy||kN(t),r.responseType==="native")h=l;else if(i.method!=="HEAD")if(l.ok){switch(n){case"array-buffer":h=await l.arrayBuffer();break;case"blob":case"image":h=await l.blob();break;default:h=await l.text()}if(p&&(clearTimeout(p),p=0),n==="json"||n==="xml"||n==="document")if(h)switch(n){case"json":h=JSON.parse(h);break;case"xml":h=eb(h,"application/xml");break;case"document":h=eb(h,"text/html")}else h=null;if(h){if(n==="array-buffer"||n==="blob"){const m=l.headers.get("Content-Type");if(m&&/application\/json|text\/plain/i.test(m)&&h[n==="blob"?"size":"byteLength"]<=750)try{const y=await new Response(h).json();y.error&&(h=y)}catch{}}n==="image"&&h instanceof Blob&&(h=await tb(URL.createObjectURL(h),e,!0))}}else{h=await l.text();try{h=JSON.parse(h)}catch{}}}else h=await tb(t,e)}catch(m){if(m.name==="AbortError")throw f?xN():Ee("Request canceled");if(!(!l&&m instanceof TypeError&&Tr.proxyUrl)||r.body||r.method==="delete"||r.method==="head"||r.method==="post"||r.method==="put"||e.useProxy||Xw(t))throw m;e.redoRequest=!0,tN({proxyUrl:Tr.proxyUrl,urlPrefix:or(t)??""})}finally{p&&clearTimeout(p)}return[l,h]}async function Qw(e,t){if(e.responseData!=null)return e.responseData;if(e.headers&&(t.requestOptions.headers={...t.requestOptions.headers,...e.headers}),e.query&&(t.requestOptions.query={...t.requestOptions.query,...e.query}),e.before){let r,i;try{i=await e.before(t)}catch(s){r=ei("request:interceptor",s,t)}if((i instanceof Error||i instanceof I)&&(r=ei("request:interceptor",i,t)),r)throw e.error&&e.error(r),r;return i}}function FN(e){if(e){for(const t of Object.getOwnPropertyNames(e))if(e[t])return!0}return!1}function eb(e,t){let r;try{r=new DOMParser().parseFromString(e,t)}catch{}if(!r||r.getElementsByTagName("parsererror").length)throw new SyntaxError("XML Parse error");return r}We._corsServers=["https://server.arcgisonline.com","https://services.arcgisonline.com"],We._beforeFetch=void 0,We._afterFetch=void 0;const UN=new Map;async function jN(e){const t=zN(e.params.url);if(!t)return hg(e);const{QueueProcessor:r}=await N(()=>import("./QueueProcessor-Dwp39X4g.js"),[]);return Ef(UN,t.origin,()=>{const s=t.isHosted?A("request-queue-concurrency-hosted"):A("request-queue-concurrency-non-hosted");return new r({concurrency:s,process:n=>{if(ur(n.params.requestOptions))throw ei("",Ee("Request canceled"),n.params);return hg(n)}})}).push(e)}async function hg(e){var n,o;let t,r;await LN(e);try{do[t,r]=await DN(e);while(!await GN(e,t,r))}catch(a){const l=ei("request:server",a,e.params,t);throw l.details.ssl=e.useSSL,(n=e.interceptor)!=null&&n.error&&e.interceptor.error(l),l}const i=e.params.url;if(r&&/\/sharing\/rest\/(accounts|portals)\/self/i.test(i)){if(!e.hasToken&&!e.credentialToken&&((o=r.user)!=null&&o.username)&&!__(i)){const a=or(i,!0);a&&Tr.trustedServers.push(a)}Array.isArray(r.authorizedCrossOriginNoCorsDomains)&&AN(r.authorizedCrossOriginNoCorsDomains)}const s=e.credential;if(s&&ve){const a=ve.findServerInfo(s.server);let l=a==null?void 0:a.owningSystemUrl;if(l){l=l.replace(/\/?$/,"/sharing");const h=ve.findCredential(l,s.userId);h&&ve._getIdenticalSvcIdx(l,h)===-1&&h.resources.unshift(l)}}return{data:r,getAllHeaders:t?()=>Array.from(t.headers):al,getHeader:t?a=>t.headers.get(a):al,httpStatus:(t==null?void 0:t.status)??200,requestOptions:e.params.requestOptions,ssl:e.useSSL,url:e.params.url}}async function GN(e,t,r){var h;if(e.redoRequest)return e.redoRequest=!1,!1;const i=e.params.requestOptions;if(!t||i.responseType==="native"||i.responseType==="native-request-init")return!0;let s,n;if(r&&(r.error&&typeof r.error=="object"?s=r.error:r.status==="error"&&Array.isArray(r.messages)&&(s={...r},s[Ap]=r,s.details=r.messages)),!s&&!t.ok)throw s=new Error(`Unable to load ${t.url} status: ${t.status}`),s[Ap]=r,s;let o,a=null;s&&(n=Number(s.code),a=s.hasOwnProperty("subcode")?Number(s.subcode):null,o=s.messageCode,o=o==null?void 0:o.toUpperCase());const l=i.authMode;if(n===403&&(a===4||(h=s.message)!=null&&h.toLowerCase().includes("ssl")&&!s.message.toLowerCase().includes("permission"))){if(!e.useSSL)return e.useSSL=!0,!1}else if(!e.hasToken&&e.useIdentity&&(l!=="no-prompt"||n===498)&&n!==void 0&&CN.has(n)&&!BE(e.params.url)&&(n!==403||(!o||!IN.has(o))&&(a==null||a===2&&e.credentialToken))){await cg();try{const p=await ve.getCredential(e.params.url,{error:ei("request:server",s,e.params),prompt:l!=="no-prompt",signal:e.controller.signal,token:e.credentialToken});return e.credential=p,e.credentialToken=p.token,e.useSSL=e.useSSL||p.ssl,!1}catch(p){if(l==="no-prompt")return e.credential=void 0,e.credentialToken=void 0,!1;s=p}}if(s)throw s;return!0}function tb(e,t,r=!1){const i=t.controller.signal,s=new Image;return t.withCredentials?s.crossOrigin="use-credentials":s.crossOrigin="anonymous",s.alt="",s.fetchPriority=Tr.priority,s.src=e,MN(s,e,r,i)}function zN(e){let t,r;return typeof e=="string"?(t=or(e,!0),r=Yw(e)):(t=e.origin,r=Yw(e.toString())),t==null?null:{origin:t,isHosted:r}}let Ai=class HE{constructor(){this._emitter=new HE.EventEmitter(this)}emit(t,r){return this._emitter.emit(t,r)}on(t,r){return this._emitter.on(t,r)}once(t,r){return this._emitter.once(t,r)}hasEventListener(t){return this._emitter.hasEventListener(t)}};(function(e){class t{constructor(s=null){this._target=s,this._listenersMap=null}clear(){var s;(s=this._listenersMap)==null||s.clear(),this._listenersMap=null}destroy(){this.clear()}emit(s,n){var h;let o=(h=this._listenersMap)==null?void 0:h.get(s);if(!o)return!1;const a=this._target||this;let l=!1;for(const p of o.slice()){const f="deref"in p?p.deref():p;f?f==null||f.call(a,n):l=!0}return l&&(o=o.filter(p=>!("deref"in p)||p.deref()!=null),this._listenersMap.set(s,o)),o.length>0}on(s,n){if(Array.isArray(s)){const a=s.map(l=>this.on(l,n));return Wc(a)}if(s.includes(","))throw new TypeError("Evented.on() with a comma delimited string of event types is not supported");this._listenersMap??(this._listenersMap=new Map);const o=this._listenersMap.get(s)||[];return o.push(n),this._listenersMap.set(s,o),ce(()=>{var h;const a=(h=this._listenersMap)==null?void 0:h.get(s),l=(a==null?void 0:a.indexOf(n))??-1;l>=0&&a.splice(l,1)})}once(s,n){const o=this.on(s,a=>{o.remove();const l="deref"in n?n.deref():n;l==null||l.call(null,a)});return o}hasEventListener(s){var o;const n=(o=this._listenersMap)==null?void 0:o.get(s);return n!=null&&n.length>0}}e.EventEmitter=t,e.EventedMixin=i=>{let s=class extends i{constructor(){super(...arguments),this._emitter=new t}destroy(){this._emitter.clear()}emit(n,o){return this._emitter.emit(n,o)}on(n,o){return this._emitter.on(n,o)}once(n,o){return this._emitter.once(n,o)}hasEventListener(n){return this._emitter.hasEventListener(n)}};return s=c([S("esri.core.Evented")],s),s};let r=class extends W{constructor(){super(...arguments),this._emitter=new Ai.EventEmitter(this)}destroy(){this._emitter.clear()}emit(i,s){return this._emitter.emit(i,s)}on(i,s){return this._emitter.on(i,s)}once(i,s){return this._emitter.once(i,s)}hasEventListener(i){return this._emitter.hasEventListener(i)}};r=c([S("esri.core.Evented.EventedAccessor")],r),e.EventedAccessor=r})(Ai);var de;(function(e){e[e.ADD=1]="ADD",e[e.REMOVE=2]="REMOVE",e[e.MOVE=4]="MOVE"})(de||(de={}));function qE(e){return(t,r)=>{t[r]=e}}let eh=class extends D${notify(){const t=this._observers;if(t&&t.length>0){const r=t.slice();for(const i of r)i.onInvalidated(),i.onCommitted()}}};var as;let VN=class{constructor(){this.target=null,this.cancellable=!1,this.defaultPrevented=!1,this.item=void 0,this.type=void 0}preventDefault(){this.cancellable&&(this.defaultPrevented=!0)}reset(t){this.defaultPrevented=!1,this.item=t}},BN=class{constructor(t,r,i,s,n){this.target=t,this.added=r,this.removed=i,this.start=s,this.deleteCount=n}};const dr=new Uo(VN,void 0,e=>{e.item=null,e.target=null,e.defaultPrevented=!1,e.cancellable=!1});function rb(e){e&&typeof e=="object"&&"destroy"in e&&typeof e.destroy=="function"&&e.destroy()}function Pm(e){return e?e instanceof ss?e.toArray():e.length?Array.prototype.slice.apply(e):[]:[]}function Om(e){if(e!=null&&e.length)return e[0]}function HN(e,t,r,i){const s=Math.min(e.length-r,t.length-i);let n=0;for(;n<s&&e[r+n]===t[i+n];)n++;return n}function WE(e,t,r,i){t&&t.forEach((s,n,o)=>{e.push(s),WE(e,r.call(i,s,n,o),r,i)})}const ws=new Set,bs=new Set,Ss=new Set,Cm=new Map;let qN=0,ss=as=class extends Ai.EventedAccessor{static isCollection(e){return e!=null&&e instanceof as}constructor(e){super(e),this._chgListeners=[],this._notifications=null,this._updating=!1,this._timer=null,this._observable=new eh,this.length=0,this._items=[],Object.defineProperty(this,"uid",{value:qN++})}normalizeCtorArgs(e){return e?Array.isArray(e)||e instanceof as?{items:e}:e:{}}destroy(){this._removeAllRaw(),this._timer&&this._timer.remove(),this._emitter.destroy(),this._notifications=null}*[Symbol.iterator](){yield*this.items}get items(){return J(this._observable),this._items}set items(e){this._emitBeforeChanges(de.ADD)||(this._splice(0,this.length,Pm(e)),this._emitAfterChanges(de.ADD))}hasEventListener(e){return!this.destroyed&&(e==="change"?this._chgListeners.length>0:this._emitter.hasEventListener(e))}on(e,t){if(this.destroyed)return ce();if(e==="change"){const r=this._chgListeners,i={removed:!1,callback:t};return r.push(i),this._notifications&&this._notifications.push({listeners:r.slice(),items:this._items.slice(),changes:[]}),ce(()=>{i.removed=!0,r.splice(r.indexOf(i),1)})}return this._emitter.on(e,t)}once(e,t){const r="deref"in t?()=>t.deref():()=>t,i=this.on(e,s=>{var n;(n=r())==null||n.call(null,s),i.remove()});return i}add(e,t){if(J(this._observable),this._emitBeforeChanges(de.ADD))return this;const r=this.getNextIndex(t??null);return this._splice(r,0,[e]),this._emitAfterChanges(de.ADD),this}addMany(e,t=this._items.length){if(J(this._observable),!(e!=null&&e.length))return this;if(this._emitBeforeChanges(de.ADD))return this;const r=this.getNextIndex(t);return this._splice(r,0,Pm(e)),this._emitAfterChanges(de.ADD),this}at(e){if(J(this._observable),(e=Math.trunc(e)||0)<0&&(e+=this.length),!(e<0||e>=this.length))return this._items[e]}removeAll(){if(J(this._observable),!this.length||this._emitBeforeChanges(de.REMOVE))return[];const e=this._removeAllRaw();return this._emitAfterChanges(de.REMOVE),e}_removeAllRaw(){return this.length===0?[]:this._splice(0,this.length)||[]}clone(){return J(this._observable),this._createNewInstance({items:this._items.map(C)})}concat(...e){J(this._observable);const t=e.map(Pm);return this._createNewInstance({items:this._items.concat(...t)})}drain(e,t){if(J(this._observable),!this.length||this._emitBeforeChanges(de.REMOVE))return;const r=this._splice(0,this.length),i=r.length;for(let s=0;s<i;s++)e.call(t,r[s],s,r);this._emitAfterChanges(de.REMOVE)}destroyAll(){this.drain(rb)}destroyMany(e){const t=this.removeMany(e);return t.forEach(rb),t}every(e,t){return J(this._observable),this._items.every(e,t)}filter(e,t){J(this._observable);const r=arguments.length===2?this._items.filter(e,t):this._items.filter(e);return this._createNewInstance({items:r})}find(e,t){return J(this._observable),this._items.find(e,t)}findIndex(e,t){return J(this._observable),this._items.findIndex(e,t)}flatten(e,t){J(this._observable);const r=[];return WE(r,this,e,t),new as(r)}forEach(e,t){return J(this._observable),this._items.forEach(e,t)}getItemAt(e){return J(this._observable),this._items[e]}getNextIndex(e){J(this._observable);const t=this.length;return(e=e??t)<0?e=0:e>t&&(e=t),e}includes(e,t=0){return J(this._observable),this._items.includes(e,t)}indexOf(e,t=0){return J(this._observable),this._items.indexOf(e,t)}join(e=","){return J(this._observable),this._items.join(e)}lastIndexOf(e,t=this.length-1){return J(this._observable),this._items.lastIndexOf(e,t)}map(e,t){J(this._observable);const r=this._items.map(e,t);return new as({items:r})}reorder(e,t=this.length-1){J(this._observable);const r=this.indexOf(e);if(r!==-1){if(t<0?t=0:t>=this.length&&(t=this.length-1),r!==t){if(this._emitBeforeChanges(de.MOVE))return e;this._splice(r,1),this._splice(t,0,[e]),this._emitAfterChanges(de.MOVE)}return e}}pop(){if(J(this._observable),!this.length||this._emitBeforeChanges(de.REMOVE))return;const e=Om(this._splice(this.length-1,1));return this._emitAfterChanges(de.REMOVE),e}push(...e){return J(this._observable),this._emitBeforeChanges(de.ADD)||(this._splice(this.length,0,e),this._emitAfterChanges(de.ADD)),this.length}reduce(e,t){J(this._observable);const r=this._items;return arguments.length===2?r.reduce(e,t):r.reduce(e)}reduceRight(e,t){J(this._observable);const r=this._items;return arguments.length===2?r.reduceRight(e,t):r.reduceRight(e)}remove(e){return J(this._observable),this.removeAt(this.indexOf(e))}removeAt(e){if(J(this._observable),e<0||e>=this.length||this._emitBeforeChanges(de.REMOVE))return;const t=Om(this._splice(e,1));return this._emitAfterChanges(de.REMOVE),t}removeMany(e){if(J(this._observable),!(e!=null&&e.length)||this._emitBeforeChanges(de.REMOVE))return[];const t=e instanceof as?e.toArray():e,r=this._items,i=[],s=t.length;for(let n=0;n<s;n++){const o=t[n],a=r.indexOf(o);if(a>-1){const l=1+HN(t,r,n+1,a+1),h=this._splice(a,l);h&&h.length>0&&i.push.apply(i,h),n+=l-1}}return this._emitAfterChanges(de.REMOVE),i}reverse(){if(J(this._observable),this._emitBeforeChanges(de.MOVE))return this;const e=this._splice(0,this.length);return e&&(e.reverse(),this._splice(0,0,e)),this._emitAfterChanges(de.MOVE),this}shift(){if(J(this._observable),!this.length||this._emitBeforeChanges(de.REMOVE))return;const e=Om(this._splice(0,1));return this._emitAfterChanges(de.REMOVE),e}slice(e=0,t=this.length){return J(this._observable),this._createNewInstance({items:this._items.slice(e,t)})}some(e,t){return J(this._observable),this._items.some(e,t)}sort(e){if(J(this._observable),!this.length||this._emitBeforeChanges(de.MOVE)||!this._requiresSort(e))return this;const t=this._splice(0,this.length);return arguments.length?t.sort(e):t.sort(),this._splice(0,0,t),this._emitAfterChanges(de.MOVE),this}_requiresSort(e=(t,r)=>t===r?0:t<r?-1:1){const t=this.length-1;for(let r=0;r<t;r++)if(e(this.items[r],this.items[r+1])>0)return!0;return!1}splice(e,t,...r){J(this._observable);const i=(t?de.REMOVE:0)|(r.length?de.ADD:0);if(this._emitBeforeChanges(i))return[];const s=this._splice(e,t,r)||[];return this._emitAfterChanges(i),s}toArray(){return J(this._observable),this._items.slice()}toJSON(){return J(this._observable),this.toArray()}toLocaleString(){return J(this._observable),this._items.toLocaleString()}toString(){return J(this._observable),this._items.toString()}unshift(...e){return J(this._observable),!e.length||this._emitBeforeChanges(de.ADD)||(this._splice(0,0,e),this._emitAfterChanges(de.ADD)),this.length}_createNewInstance(e){return new this.constructor(e)}_splice(e,t,r){const i=this._items,s=this.itemType;let n,o;if(!this._notifications&&this.hasEventListener("change")&&(this._notifications=[{listeners:this._chgListeners.slice(),items:this._items.slice(),changes:[]}],this._timer&&this._timer.remove(),this._updating=!0,this._timer=Xc(()=>this._dispatchChange())),e<0&&(e+=this.length),t){if(o=i.splice(e,t),this.hasEventListener("before-remove")){const a=dr.acquire();a.target=this,a.cancellable=!0;for(let l=0,h=o.length;l<h;l++)n=o[l],a.reset(n),this.emit("before-remove",a),a.defaultPrevented&&(o.splice(l,1),i.splice(e,0,n),e+=1,l-=1,h-=1);dr.release(a)}if(this.length=this._items.length,this.hasEventListener("after-remove")){const a=dr.acquire();a.target=this,a.cancellable=!1;const l=o.length;for(let h=0;h<l;h++)a.reset(o[h]),this.emit("after-remove",a);dr.release(a)}}if(r!=null&&r.length){if(s){const p=[];for(const f of r){const m=s.ensureType(f);m==null&&f!=null||p.push(m)}r=p}const a=this.hasEventListener("before-add"),l=this.hasEventListener("after-add"),h=e===this.length;if(a||l){const p=dr.acquire();p.target=this,p.cancellable=!0;const f=dr.acquire();f.target=this,f.cancellable=!1;for(const m of r)a?(p.reset(m),this.emit("before-add",p),p.defaultPrevented||(h?i.push(m):i.splice(e++,0,m),this._set("length",i.length),l&&(f.reset(m),this.emit("after-add",f)))):(h?i.push(m):i.splice(e++,0,m),this._set("length",i.length),f.reset(m),this.emit("after-add",f));dr.release(f),dr.release(p)}else{if(h)for(const p of r)i.push(p);else i.splice(e,0,...r);this._set("length",i.length)}}if((r!=null&&r.length||o!=null&&o.length)&&this._notifyChangeEvent(r,o),this.hasEventListener("after-splice")){const a=new BN(this,r,o,e,t);this.emit("after-splice",a)}return o}_emitBeforeChanges(e){let t=!1;if(this.hasEventListener("before-changes")){const r=dr.acquire();r.target=this,r.cancellable=!0,r.type=e,this.emit("before-changes",r),t=r.defaultPrevented,dr.release(r)}return t}_emitAfterChanges(e){if(this.hasEventListener("after-changes")){const t=dr.acquire();t.target=this,t.cancellable=!1,t.type=e,this.emit("after-changes",t),dr.release(t)}this._observable.notify()}_notifyChangeEvent(e,t){this.hasEventListener("change")&&this._notifications&&this._notifications[this._notifications.length-1].changes.push({added:e,removed:t})}get updating(){return this._updating}_dispatchChange(){if(this._timer&&(this._timer.remove(),this._timer=null),this._updating=!1,!this._notifications)return;const e=this._notifications;this._notifications=null;for(const t of e){const r=t.changes;ws.clear(),bs.clear(),Ss.clear();for(const{added:l,removed:h}of r){if(l)if(Ss.size===0&&bs.size===0)for(const p of l)ws.add(p);else for(const p of l)bs.has(p)?(Ss.add(p),bs.delete(p)):Ss.has(p)||ws.add(p);if(h)if(Ss.size===0&&ws.size===0)for(const p of h)bs.add(p);else for(const p of h)ws.has(p)?ws.delete(p):(Ss.delete(p),bs.add(p))}const i=Ct.acquire();ws.forEach(l=>{i.push(l)});const s=Ct.acquire();bs.forEach(l=>{s.push(l)});const n=this._items,o=t.items,a=Ct.acquire();if(Ss.forEach(l=>{o.indexOf(l)!==n.indexOf(l)&&a.push(l)}),t.listeners&&(i.length||s.length||a.length)){const l={target:this,added:i,removed:s,moved:a},h=t.listeners.length;for(let p=0;p<h;p++){const f=t.listeners[p];f.removed||f.callback.call(this,l)}}Ct.release(i),Ct.release(s),Ct.release(a)}ws.clear(),bs.clear(),Ss.clear()}};ss.ofType=e=>{if(!e)return as;if(Cm.has(e))return Cm.get(e);let t=null;if(typeof e=="function")t=e.prototype.declaredClass;else if(e.base)t=e.base.prototype.declaredClass;else for(const i in e.typeMap){const s=e.typeMap[i].prototype.declaredClass;t?t+=` | ${s}`:t=s}let r=class extends as{};return c([qE({Type:e,ensureType:typeof e=="function"?kt(e):mn(e)})],r.prototype,"itemType",void 0),r=c([S(`esri.core.Collection<${t}>`)],r),Cm.set(e,r),r},c([d()],ss.prototype,"_updating",void 0),c([d()],ss.prototype,"length",void 0),c([d()],ss.prototype,"items",null),c([d({readOnly:!0})],ss.prototype,"updating",null),ss=as=c([S("esri.core.Collection")],ss);const H=ss;function ys(e,t,r=H){return t||(t=new r),t===e||(t.removeAll(),WN(e)?t.addMany(e):e&&t.add(e)),t}function ZE(e){return e}function WN(e){return e&&(Array.isArray(e)||"items"in e&&Array.isArray(e.items))}var Js;(function(e){e[e.PENDING=0]="PENDING",e[e.RESOLVED=1]="RESOLVED",e[e.REJECTED=2]="REJECTED"})(Js||(Js={}));let ZN=class{constructor(){this._resolver=Or(),this._status=Js.PENDING,this._resolvingPromises=[],this._resolver.promise.then(()=>{this._status=Js.RESOLVED,this._cleanUp()},()=>{this._status=Js.REJECTED,this._cleanUp()}),this.promise=this._resolver.promise}destroy(){this._cleanUp()}addResolvingPromise(t){this._resolvingPromises.push(t),this._tryResolve()}isResolved(){return this._status===Js.RESOLVED}isRejected(){return this._status===Js.REJECTED}isFulfilled(){return this._status!==Js.PENDING}abort(){this._resolver.reject(Ee())}_cleanUp(){this._allPromise=null,this._resolvingPromises=null}_tryResolve(){if(this.isFulfilled())return;const t=Or(),r=[...this._resolvingPromises,t.promise],i=this._allPromise=Promise.all(r);i.then(()=>{this.isFulfilled()||this._allPromise!==i||this._resolver.resolve()},s=>{this.isFulfilled()||this._allPromise!==i||qt(s)||this._resolver.reject(s)}),t.resolve()}};const JE=e=>{let t=class extends e{constructor(...r){super(...r),this._promiseProps=new ZN,this.addResolvingPromise(Promise.resolve())}destroy(){this._promiseProps.destroy()}isResolved(){return this._promiseProps.isResolved()}isRejected(){return this._promiseProps.isRejected()}isFulfilled(){return this._promiseProps.isFulfilled()}when(r,i){return this._promiseProps.promise.then(()=>this).then(r,i)}catch(r){return this.when(null,r)}addResolvingPromise(r){r&&!this._promiseProps.isFulfilled()&&this._promiseProps.addResolvingPromise("_promiseProps"in r?r.when():r)}};return t=c([S("esri.core.Promise")],t),t};let iu=class extends JE(W){};iu=c([S("esri.core.Promise")],iu),function(e){e.EsriPromiseMixin=JE}(iu||(iu={}));const If=iu,JN="not-loaded",YN="loading",KN="failed",ib="loaded",YE=e=>{let t=class extends e{constructor(...r){super(...r),this._loadController=null,this.loadError=null,this.loadStatus="not-loaded",this._set("loadWarnings",[]),this.addResolvingPromise(new Promise(i=>{const s=this.load.bind(this);this.load=n=>{const o=new Promise((a,l)=>{const h=s_(n,l);this.destroyed&&l(new I("load:instance-destroyed",`Instance of '${this.declaredClass||this.constructor.name}' is already destroyed`,{instance:this})),this.when(a,l).finally(()=>{h&&h.remove()})});if(this.loadStatus===JN){this._set("loadStatus",YN);const a=this._loadController=new AbortController;s({signal:a.signal})}return i(),o}})),this.when(()=>{this._set("loadStatus",ib),this._loadController=null},i=>{this._set("loadStatus",KN),this._set("loadError",i),this._loadController=null})}destroy(){this._loadController&&(this._loadController=rl(this._loadController),this._promiseProps.abort()),this._set("loadError",null),this._set("loadWarnings",[])}get loaded(){return this.loadStatus===ib}get loadWarnings(){return this._get("loadWarnings")}load(){return null}cancelLoad(){var r;return this.isFulfilled()||(this._set("loadError",new I("load:cancelled","Cancelled")),(r=this._loadController)==null||r.abort(),this._promiseProps.abort()),this}};return c([d({readOnly:!0})],t.prototype,"loaded",null),c([d({readOnly:!0})],t.prototype,"loadError",void 0),c([d({clonable:!1})],t.prototype,"loadStatus",void 0),c([d({type:[ms],readOnly:!0})],t.prototype,"loadWarnings",null),t=c([S("esri.core.Loadable")],t),t};let su=class extends YE(If){};su=c([S("esri.core.Loadable")],su),function(e){function t(r){return!(!r||!r.load)}e.LoadableMixin=YE,e.isLoadable=t}(su||(su={}));const yn=su;function IX(e,t,r){return n_(e.map((i,s)=>t.apply(r,[i,s])))}async function XN(e,t,r){return(await n_(e.map((i,s)=>t.apply(r,[i,s])))).map(i=>i.value)}function x_(e){return{ok:!0,value:e}}function A_(e){return{ok:!1,error:e}}function QN(e){return e!=null&&e.ok===!0?e.value:null}function eL(e){return e!=null&&e.ok===!1?e.error:null}async function KE(e){if(e==null)return{ok:!1,error:new Error("no promise provided")};try{return x_(await e)}catch(t){return A_(t)}}async function RX(e){try{return x_(await e)}catch(t){return W$(t),A_(t)}}function Rf(e,t){return new Os(e,t)}let Os=class extends W{get value(){return QN(this._result)}get error(){return eL(this._result)}get finished(){return this._result!=null}constructor(t,r){super({}),this._result=null,this._abortHandle=null,this.abort=()=>{this._abortController=rl(this._abortController)},this.remove=this.abort,this._abortController=new AbortController;const{signal:i}=this._abortController;this.promise=t(i),this.promise.then(s=>{this._result=x_(s),this._cleanup()},s=>{this._result=A_(s),this._cleanup()}),this._abortHandle=Ar(r,this.abort)}normalizeCtorArgs(){return{}}destroy(){this.abort()}_cleanup(){this._abortHandle=Ie(this._abortHandle),this._abortController=null}};c([d()],Os.prototype,"value",null),c([d()],Os.prototype,"error",null),c([d()],Os.prototype,"finished",null),c([d()],Os.prototype,"promise",void 0),c([d()],Os.prototype,"_result",void 0),Os=c([S("esri.core.asyncUtils.ReactiveTask")],Os);async function XE(e,t){return await e.load(),tL(e,t)}async function tL(e,t){const r=[],i=(...n)=>{for(const o of n)o!=null&&(Array.isArray(o)?i(...o):H.isCollection(o)?o.forEach(a=>i(a)):yn.isLoadable(o)&&r.push(o))};t(i);let s=null;if(await XN(r,async n=>{const o=await KE(rL(n)?n.loadAll():n.load());o.ok!==!1||s||(s=o)}),s)throw s.error;return e}function rL(e){return"loadAll"in e&&typeof e.loadAll=="function"}function ae(e,t,r){let i,s;return t===void 0?(s=e,i=[void 0]):typeof t!="string"?(s=e,i=[void 0],r=t):(s=t,i=Array.isArray(e)?e:[e]),(n,o)=>{const a=n.constructor.prototype;for(const l of i){const h=lE(n,l,s);h.write&&typeof h.write=="object"||(h.write={}),r&&(h.write.target=r),h.write.writer=a[o]}}}let it=class{constructor(t,r={ignoreUnknown:!1,useNumericKeys:!1}){this._jsonToAPI=t,this._options=r,this.apiValues=[],this.jsonValues=[],this._apiToJSON=iL(t),this.apiValues=sb(this._apiToJSON),this.jsonValues=sb(this._jsonToAPI),this.read=i=>this.fromJSON(i),this.write=(i,s,n)=>{const o=this.toJSON(i);o!==void 0&&wl(n,o,s)},this.write.isJSONMapWriter=!0}toJSON(t){if(t==null)return null;if(this._apiToJSON.hasOwnProperty(t)){const r=this._apiToJSON[t];return this._options.useNumericKeys?+r:r}return this._options.ignoreUnknown?null:t}fromJSON(t){return t!=null&&this._jsonToAPI.hasOwnProperty(t)?this._jsonToAPI[t]:this._options.ignoreUnknown?void 0:t}};function iL(e){const t={};for(const r in e)t[e[r]]=r;return t}function sb(e){const t=[];for(const r in e)t.push(r);return t.sort(),t}function Wt(){return function(e,t){return new it(e,{ignoreUnknown:!0,...t})}}let P_=class{constructor(t,r,i,s,n,o){this.semiMajorAxis=t,this.flattening=r,this.outerAtmosphereRimWidth=i,this.atmosphereHeight=s,this.scaleHeight=n;const a=1-this.flattening;this.semiMinorAxis=this.semiMajorAxis*a,this.halfSemiMajorAxis=this.semiMajorAxis/2,this.halfCircumference=Math.PI*this.semiMajorAxis,this.metersPerDegree=this.halfCircumference/180,this.inverseFlattening=1/(1-this.flattening)-1,this.eccentricitySquared=o||2*this.flattening-this.flattening*this.flattening,this.meanRadiusSemiAxes=(2*this.semiMajorAxis+this.semiMinorAxis)/3}get radius(){return this.semiMajorAxis}};const He=new P_(6378137,1/298.257223563,3e5,1e5,.085,.006694379990137799),Ei=new P_(3396190,1/169.8944472236118,23e4,6e4,.111),gn=new P_(1737400,0,0,0,0);function Ge(e){if(!ye.assetsPath)throw U.getLogger("esri.assets").errorOnce("The API assets location needs to be set using config.assetsPath. More information: https://arcg.is/1OzLe50"),new I("assets:path-not-set","config.assetsPath is not set");return Pf(ye.assetsPath,e)}let Im,T=null;function O_(){return!!T}function sL(){return!!A("esri-wasm")}function QE(){return Im||(Im=N(()=>import("./pe-wasm-Co3DzcyP.js"),__vite__mapDeps([2,3])).then(e=>e.p).then(({default:e})=>e({locateFile:t=>Ge(`esri/geometry/support/${t}`)})).then(e=>{r3(e)}),Im)}var dg,Ce;(function(e){function t(n,o,a){T.ensureCache.prepare();const l=fo(a),h=a===l,p=T.ensureFloat64(l),f=T._pe_geog_to_proj(T.getPointer(n),o,p);return f&&tn(a,o,p,h),f}function r(n,o,a,l){switch(l){case Ce.PE_TRANSFORM_P_TO_G:return i(n,o,a);case Ce.PE_TRANSFORM_G_TO_P:return t(n,o,a)}return 0}function i(n,o,a){return s(n,o,a,0)}function s(n,o,a,l){T.ensureCache.prepare();const h=fo(a),p=a===h,f=T.ensureFloat64(h),m=T._pe_proj_to_geog_center(T.getPointer(n),o,f,l);return m&&tn(a,o,f,p),m}e.geogToProj=t,e.projGeog=r,e.projToGeog=i,e.projToGeogCenter=s})(dg||(dg={})),function(e){function t(){e.PE_BUFFER_MAX=T.PeDefs.prototype.PE_BUFFER_MAX,e.PE_NAME_MAX=T.PeDefs.prototype.PE_NAME_MAX,e.PE_MGRS_MAX=T.PeDefs.prototype.PE_MGRS_MAX,e.PE_USNG_MAX=T.PeDefs.prototype.PE_USNG_MAX,e.PE_DD_MAX=T.PeDefs.prototype.PE_DD_MAX,e.PE_DDM_MAX=T.PeDefs.prototype.PE_DDM_MAX,e.PE_DMS_MAX=T.PeDefs.prototype.PE_DMS_MAX,e.PE_UTM_MAX=T.PeDefs.prototype.PE_UTM_MAX,e.PE_PARM_MAX=T.PeDefs.prototype.PE_PARM_MAX,e.PE_TYPE_NONE=T.PeDefs.prototype.PE_TYPE_NONE,e.PE_TYPE_GEOGCS=T.PeDefs.prototype.PE_TYPE_GEOGCS,e.PE_TYPE_PROJCS=T.PeDefs.prototype.PE_TYPE_PROJCS,e.PE_TYPE_GEOGTRAN=T.PeDefs.prototype.PE_TYPE_GEOGTRAN,e.PE_TYPE_COORDSYS=T.PeDefs.prototype.PE_TYPE_COORDSYS,e.PE_TYPE_UNIT=T.PeDefs.prototype.PE_TYPE_UNIT,e.PE_TYPE_LINUNIT=T.PeDefs.prototype.PE_TYPE_LINUNIT,e.PE_STR_OPTS_NONE=T.PeDefs.prototype.PE_STR_OPTS_NONE,e.PE_STR_AUTH_NONE=T.PeDefs.prototype.PE_STR_AUTH_NONE,e.PE_STR_AUTH_TOP=T.PeDefs.prototype.PE_STR_AUTH_TOP,e.PE_STR_NAME_CANON=T.PeDefs.prototype.PE_STR_NAME_CANON,e.PE_STR_FMT_WKT=T.PeDefs.prototype.PE_STR_FMT_WKT,e.PE_STR_FMT_WKT2=T.PeDefs.prototype.PE_STR_FMT_WKT2,e.PE_PARM_X0=T.PeDefs.prototype.PE_PARM_X0,e.PE_PARM_ND=T.PeDefs.prototype.PE_PARM_ND,e.PE_TRANSFORM_1_TO_2=T.PeDefs.prototype.PE_TRANSFORM_1_TO_2,e.PE_TRANSFORM_2_TO_1=T.PeDefs.prototype.PE_TRANSFORM_2_TO_1,e.PE_TRANSFORM_P_TO_G=T.PeDefs.prototype.PE_TRANSFORM_P_TO_G,e.PE_TRANSFORM_G_TO_P=T.PeDefs.prototype.PE_TRANSFORM_G_TO_P,e.PE_HORIZON_RECT=T.PeDefs.prototype.PE_HORIZON_RECT,e.PE_HORIZON_POLY=T.PeDefs.prototype.PE_HORIZON_POLY,e.PE_HORIZON_LINE=T.PeDefs.prototype.PE_HORIZON_LINE,e.PE_HORIZON_DELTA=T.PeDefs.prototype.PE_HORIZON_DELTA}e.init=t}(Ce||(Ce={}));let e3=null;var pg;(function(e){const t={},r={},i=y=>{const _=y.getType();switch(_){case Ce.PE_TYPE_GEOGCS:y=T.castObject(y,T.PeGeogcs);break;case Ce.PE_TYPE_PROJCS:y=T.castObject(y,T.PeProjcs);break;case Ce.PE_TYPE_GEOGTRAN:y=T.castObject(y,T.PeGeogtran);break;default:_&Ce.PE_TYPE_UNIT&&(y=T.castObject(y,T.PeUnit))}return y};function s(){T.PeFactory.prototype.initialize(null)}function n(y){return o(Ce.PE_TYPE_COORDSYS,y)}function o(y,_){let v=null,w=t[y];if(w||(w={},t[y]=w),w.hasOwnProperty(String(_))&&(v=w[_],T.compare(v,T.NULL)&&(v=null)),!v){const b=T.PeFactory.prototype.factoryByType(y,_);T.compare(b,T.NULL)||(v=i(b),w[_]=v)}return v}function a(y,_){let v=null,w=r[y];if(w||(w={},r[y]=w),w.hasOwnProperty(_)&&(v=w[_],T.compare(v,T.NULL)&&(v=null)),!v){const b=T.PeFactory.prototype.fromString(y,_);T.compare(b,T.NULL)||(v=i(b),w[_]=v)}return v}function l(y){return o(Ce.PE_TYPE_GEOGCS,y)}function h(y){return o(Ce.PE_TYPE_GEOGTRAN,y)}function p(y){return T.PeFactory.prototype.getCode(y)}function f(y){return o(Ce.PE_TYPE_PROJCS,y)}function m(y){return o(Ce.PE_TYPE_UNIT,y)}e.initialize=s,e.coordsys=n,e.factoryByType=o,e.fromString=a,e.geogcs=l,e.geogtran=h,e.getCode=p,e.projcs=f,e.unit=m})(pg||(pg={}));let t3=null;var Pp,fg,mg,yg,gg,_g,Op,vg,Cp,Ip,wg;function r3(e){function t(n,o,a){n[o]=a(n[o])}T=e,Ce.init(),Pp.init(),Op.init(),Cp.init(),Ip.init(),e3=class extends T.PeDouble{constructor(n=NaN){super(n)}destroy(){T.destroy(this)}[Symbol.dispose](){this.destroy()}},t3=class extends T.PeGCSExtent{destroy(){T.destroy(this)}[Symbol.dispose](){this.destroy()}};const r=[T.PeAngunit,T.PeDatum,T.PeGeogcs,T.PeGeogtran,T.PeObject,T.PeParameter,T.PePrimem,T.PeProjcs,T.PeSpheroid,T.PeUnit];for(const n of r)t(n.prototype,"getName",o=>function(){return o.call(this,new Array(Ce.PE_NAME_MAX))});for(const n of[T.PeGeogtran,T.PeProjcs])t(n.prototype,"getParameters",o=>function(){const a=new Array(Ce.PE_PARM_MAX);let l=o.call(this);for(let h=0;h<a.length;h++){const p=T.getValue(l,"*");a[h]=p?T.wrapPointer(p,T.PeParameter):null,l+=Int32Array.BYTES_PER_ELEMENT}return a});t(T.PeHorizon.prototype,"getCoord",n=>function(o=!1){const a=this.getSize();if(!a)return null;const l=[];return tn(l,a,n.call(this),o),l}),t(T.PeGTlistExtendedEntry.prototype,"getEntries",n=>{const o=T._pe_getPeGTlistExtendedGTsSize();return function(){let a=null;const l=n.call(this);if(!T.compare(l,T.NULL)){a=[l];const h=this.getSteps();if(h>1){const p=T.getPointer(l);for(let f=1;f<h;f++)a.push(T.wrapPointer(p+o*f,T.PeGTlistExtendedGTs))}}return a}});const i=T._pe_getPeHorizonSize(),s=n=>function(){let o=this._cache;if(o||(o=new Map,this._cache=o),o.has(n))return o.get(n);let a=null;const l=n.call(this);if(!T.compare(l,T.NULL)){a=[l];const h=l.getNump();if(h>1){const p=T.getPointer(l);for(let f=1;f<h;f++)a.push(T.wrapPointer(p+i*f,T.PeHorizon))}}return o.set(n,a),a};t(T.PeProjcs.prototype,"horizonGcsGenerate",s),t(T.PeProjcs.prototype,"horizonPcsGenerate",s),T.PeObject.prototype.toString=function(n=Ce.PE_STR_OPTS_NONE){T.ensureCache.prepare();const o=T.getPointer(this),a=T.ensureInt8(new Array(Ce.PE_BUFFER_MAX));return T.UTF8ToString(T._pe_object_to_string_ext(o,n,a))},T.PeGeogcs.prototype.destroy=function(){this.Delete(),Yr(this),this.ptr=0},T.PeGeogcs.prototype[Symbol.dispose]=function(){this.destroy()},T.PeProjcs.prototype.destroy=function(){this.Delete(),Yr(this),this.ptr=0},T.PeProjcs.prototype[Symbol.dispose]=function(){this.destroy()}}function Yr(e){if(!e)return;const t=T.getClass(e);if(!t)return;const r=T.getCache(t);if(!r)return;const i=T.getPointer(e);i&&delete r[i]}function $h(e,t){const r=[],i=new Array(t);for(let s=0;s<e;s++)r.push(T.ensureInt8(i));return r}function fo(e){return ArrayBuffer.isView(e)?e:Array.isArray(e[0])?e.flat():e}function tn(e,t,r,i=!1){if(i)for(let s=0;s<2*t;s++)e[s]=T.getValue(r+s*Float64Array.BYTES_PER_ELEMENT,"double");else{const s=e.length===0;for(let n=0;n<t;n++)s&&(e[n]=new Array(2)),e[n][0]=T.getValue(r,"double"),e[n][1]=T.getValue(r+Float64Array.BYTES_PER_ELEMENT,"double"),r+=2*Float64Array.BYTES_PER_ELEMENT}}(function(e){let t;function r(){e.PE_GTLIST_OPTS_COMMON=T.PeGTlistExtended.prototype.PE_GTLIST_OPTS_COMMON,t=T._pe_getPeGTlistExtendedEntrySize()}function i(s,n,o,a,l,h){let p=null;const f=new T.PeInteger(h);try{const m=T.PeGTlistExtended.prototype.getGTlist(s,n,o,a,l,f);if((h=f.val)&&(p=[m],h>1)){const y=T.getPointer(m);for(let _=1;_<h;_++)p.push(T.wrapPointer(y+t*_,T.PeGTlistExtendedEntry))}}finally{T.destroy(f)}return p}e.init=r,e.getGTlist=i})(Pp||(Pp={})),function(e){function t(r){if(r!=null&&r.length){for(const i of r)Yr(i),i.getEntries().forEach(s=>{Yr(s);const n=s.getGeogtran();Yr(n),n.getParameters().forEach(Yr),[n.getGeogcs1(),n.getGeogcs2()].forEach(o=>{Yr(o);const a=o.getDatum();Yr(a),Yr(a.getSpheroid()),Yr(o.getPrimem()),Yr(o.getUnit())})});T.PeGTlistExtendedEntry.prototype.Delete(r[0])}}e.destroy=t}(fg||(fg={})),function(e){function t(r,i,s,n,o){T.ensureCache.prepare();const a=fo(s),l=s===a,h=T.ensureFloat64(a);let p=0;n&&(p=T.ensureFloat64(n));const f=T._pe_geog_to_geog(T.getPointer(r),i,h,p,o);return f&&tn(s,i,h,l),f}e.geogToGeog=t}(mg||(mg={})),function(e){function t(n,o,a,l,h,p,f,m){T.PeLineType.prototype.geodesic_coordinate(n,o,a,l,h,p,f,m)}function r(n,o,a,l,h,p,f,m,y){T.PeLineType.prototype.geodetic_coordinate(n,o,a,l,h,p,f,m,y)}function i(n,o,a,l,h,p,f,m,y,_){T.PeLineType.prototype.geodetic_distance(n,o,a,l,h,p,f,m,y,_)}function s(n,o,a,l,h,p,f,m,y){T.PeLineType.prototype.great_elliptic_distance(n,o,a,l,h,p,f,m,y)}e.geodesicCoordinate=t,e.geodeticCoordinate=r,e.geodeticDistance=i,e.greatEllipticDistance=s}(yg||(yg={})),function(e){function t(o,a){return T.PeMath.prototype.phi_to_eta(o,a)}function r(o,a){return T.PeMath.prototype.eta_to_phi(o,a)}function i(o,a){return T.PeMath.prototype.phi_to_phig(o,a)}function s(o,a,l){return T.PeMath.prototype.q(o,a,l)}function n(o,a){return T.PeMath.prototype.q90(o,a)}e.phiToEta=t,e.etaToPhi=r,e.phiToPhig=i,e.q=s,e.q90=n}(gg||(gg={})),function(e){const t=(h,p,f,m,y,_)=>{let v,w;switch(T.ensureCache.prepare(),h){case"dd":v=T._pe_geog_to_dd,w=Ce.PE_DD_MAX;break;case"ddm":v=T._pe_geog_to_ddm,w=Ce.PE_DDM_MAX;break;case"dms":v=T._pe_geog_to_dms,w=Ce.PE_DMS_MAX}let b=0;p&&(b=T.getPointer(p));const M=fo(m),$=T.ensureFloat64(M),E=$h(f,w),P=v(b,f,$,y,T.ensureInt32(E));if(P)for(let O=0;O<f;O++)_[O]=T.UTF8ToString(E[O]);return P},r=(h,p,f,m,y)=>{let _;switch(T.ensureCache.prepare(),h){case"dd":_=T._pe_dd_to_geog;break;case"ddm":_=T._pe_ddm_to_geog;break;case"dms":_=T._pe_dms_to_geog}let v=0;p&&(v=T.getPointer(p));const w=m.map(E=>T.ensureString(E)),b=T.ensureInt32(w),M=T.ensureFloat64(new Array(2*f)),$=_(v,f,b,M);return $&&tn(y,f,M),$};function i(h,p,f,m,y){return t("dms",h,p,f,m,y)}function s(h,p,f,m){return r("dms",h,p,f,m)}function n(h,p,f,m,y){return t("ddm",h,p,f,m,y)}function o(h,p,f,m){return r("ddm",h,p,f,m)}function a(h,p,f,m,y){return t("dd",h,p,f,m,y)}function l(h,p,f,m){return r("dd",h,p,f,m)}e.geogToDms=i,e.dmsToGeog=s,e.geogToDdm=n,e.ddmToGeog=o,e.geogToDd=a,e.ddToGeog=l}(_g||(_g={})),function(e){function t(){e.PE_MGRS_STYLE_NEW=T.PeNotationMgrs.prototype.PE_MGRS_STYLE_NEW,e.PE_MGRS_STYLE_OLD=T.PeNotationMgrs.prototype.PE_MGRS_STYLE_OLD,e.PE_MGRS_STYLE_AUTO=T.PeNotationMgrs.prototype.PE_MGRS_STYLE_AUTO,e.PE_MGRS_180_ZONE_1_PLUS=T.PeNotationMgrs.prototype.PE_MGRS_180_ZONE_1_PLUS,e.PE_MGRS_ADD_SPACES=T.PeNotationMgrs.prototype.PE_MGRS_ADD_SPACES}function r(s,n,o,a,l,h,p){T.ensureCache.prepare();let f=0;s&&(f=T.getPointer(s));const m=fo(o),y=T.ensureFloat64(m),_=$h(n,Ce.PE_MGRS_MAX),v=T.ensureInt32(_),w=T._pe_geog_to_mgrs_extended(f,n,y,a,l,h,v);if(w)for(let b=0;b<n;b++)p[b]=T.UTF8ToString(_[b]);return w}function i(s,n,o,a,l){T.ensureCache.prepare();let h=0;s&&(h=T.getPointer(s));const p=o.map(_=>T.ensureString(_)),f=T.ensureInt32(p),m=T.ensureFloat64(new Array(2*n)),y=T._pe_mgrs_to_geog_extended(h,n,f,a,m);return y&&tn(l,n,m),y}e.init=t,e.geogToMgrsExtended=r,e.mgrsToGeogExtended=i}(Op||(Op={})),function(e){function t(i,s,n,o,a,l,h){T.ensureCache.prepare();let p=0;i&&(p=T.getPointer(i));const f=fo(n),m=T.ensureFloat64(f),y=$h(s,Ce.PE_MGRS_MAX),_=T.ensureInt32(y),v=T._pe_geog_to_usng(p,s,m,o,a,l,_);if(v)for(let w=0;w<s;w++)h[w]=T.UTF8ToString(y[w]);return v}function r(i,s,n,o){T.ensureCache.prepare();let a=0;i&&(a=T.getPointer(i));const l=n.map(m=>T.ensureString(m)),h=T.ensureInt32(l),p=T.ensureFloat64(new Array(2*s)),f=T._pe_usng_to_geog(a,s,h,p);return f&&tn(o,s,p),f}e.geogToUsng=t,e.usngToGeog=r}(vg||(vg={})),function(e){function t(){e.PE_UTM_OPTS_NONE=T.PeNotationUtm.prototype.PE_UTM_OPTS_NONE,e.PE_UTM_OPTS_ADD_SPACES=T.PeNotationUtm.prototype.PE_UTM_OPTS_ADD_SPACES,e.PE_UTM_OPTS_NS=T.PeNotationUtm.prototype.PE_UTM_OPTS_NS}function r(s,n,o,a,l){T.ensureCache.prepare();let h=0;s&&(h=T.getPointer(s));const p=fo(o),f=T.ensureFloat64(p),m=$h(n,Ce.PE_UTM_MAX),y=T.ensureInt32(m),_=T._pe_geog_to_utm(h,n,f,a,y);if(_)for(let v=0;v<n;v++)l[v]=T.UTF8ToString(m[v]);return _}function i(s,n,o,a,l){T.ensureCache.prepare();let h=0;s&&(h=T.getPointer(s));const p=o.map(_=>T.ensureString(_)),f=T.ensureInt32(p),m=T.ensureFloat64(new Array(2*n)),y=T._pe_utm_to_geog(h,n,f,a,m);return y&&tn(l,n,m),y}e.init=t,e.geogToUtm=r,e.utmToGeog=i}(Cp||(Cp={})),function(e){const t=new Map;function r(){e.PE_PCSINFO_OPTION_NONE=T.PePCSInfo.prototype.PE_PCSINFO_OPTION_NONE,e.PE_PCSINFO_OPTION_DOMAIN=T.PePCSInfo.prototype.PE_PCSINFO_OPTION_DOMAIN,e.PE_POLE_OUTSIDE_BOUNDARY=T.PePCSInfo.prototype.PE_POLE_OUTSIDE_BOUNDARY,e.PE_POLE_POINT=T.PePCSInfo.prototype.PE_POLE_POINT}function i(s,n=e.PE_PCSINFO_OPTION_DOMAIN){let o=null,a=null;return t.has(s)&&(a=t.get(s),a[n]&&(o=a[n])),o||(o=T.PePCSInfo.prototype.generate(s,n),a||(a=[],t.set(s,a)),a[n]=o),o}e.init=r,e.generate=i}(Ip||(Ip={})),function(e){function t(){return T.PeVersion.prototype.version_string()}e.versionString=t}(wg||(wg={}));const nL=Object.freeze(Object.defineProperty({__proto__:null,get PeCSTransformations(){return dg},get PeDefs(){return Ce},get PeDouble(){return e3},get PeFactory(){return pg},get PeGCSExtent(){return t3},get PeGTTransformations(){return mg},get PeGTlistExtended(){return Pp},get PeGTlistExtendedEntry(){return fg},get PeLineType(){return yg},get PeMath(){return gg},get PeNotationDms(){return _g},get PeNotationMgrs(){return Op},get PeNotationUsng(){return vg},get PeNotationUtm(){return Cp},get PePCSInfo(){return Ip},get PeVersion(){return wg},_init:r3,get _pe(){return T},isLoaded:O_,isSupported:sL,load:QE},Symbol.toStringTag,{value:"Module"}));var Po;(function(e){e[e.CGCS2000=4490]="CGCS2000",e[e.GCSMARS2000=104971]="GCSMARS2000",e[e.GCSMARS2000_SPHERE=104905]="GCSMARS2000_SPHERE",e[e.GCSMOON2000=104903]="GCSMOON2000"})(Po||(Po={}));let u;const g={values:[1,.3048,.3048006096012192,.3047972654,.9143917962,.201166195164,.9143984146160287,.3047994715386762,20.11676512155263,20.11678249437587,.9143985307444408,.91439523,.3047997101815088,20.1168,20.116756,5e4,15e4],units:["Meter","Foot","Foot_US","Foot_Clarke","Yard_Clarke","Link_Clarke","Yard_Sears","Foot_Sears","Chain_Sears","Chain_Benoit_1895_B","Yard_Indian","Yard_Indian_1937","Foot_Gold_Coast","Chain","Chain_Sears_1922_Truncated","50_Kilometers","150_Kilometers"],2066:5,2136:12,2155:2,2157:0,2158:0,2159:12,2160:12,2204:2,2219:0,2220:0,2254:2,2255:2,2256:1,2265:1,2266:1,2267:2,2268:2,2269:1,2270:1,2271:2,2272:2,2273:1,2294:0,2295:0,2314:3,2899:2,2900:2,2901:1,2909:1,2910:1,2911:2,2912:2,2913:1,2914:1,2992:1,2993:0,2994:1,3080:1,3089:2,3090:0,3091:2,3102:2,3141:0,3142:0,3167:14,3359:2,3360:0,3361:1,3362:0,3363:2,3364:0,3365:2,3366:3,3404:2,3405:0,3406:0,3407:3,3439:0,3440:0,3479:1,3480:0,3481:1,3482:0,3483:1,3484:0,3485:2,3486:0,3487:2,3488:0,3489:0,3490:2,3491:0,3492:2,3493:0,3494:2,3495:0,3496:2,3497:0,3498:2,3499:0,3500:2,3501:0,3502:2,3503:0,3504:2,3505:0,3506:2,3507:0,3508:2,3509:0,3510:2,3511:0,3512:2,3513:0,3514:0,3515:2,3516:0,3517:2,3518:0,3519:2,3520:0,3521:2,3522:0,3523:2,3524:0,3525:2,3526:0,3527:2,3528:0,3529:2,3530:0,3531:2,3532:0,3533:2,3534:0,3535:2,3536:0,3537:2,3538:0,3539:2,3540:0,3541:2,3542:0,3543:2,3544:0,3545:2,3546:0,3547:2,3548:0,3549:2,3550:0,3551:2,3552:0,3553:2,3582:2,3583:0,3584:2,3585:0,3586:2,3587:0,3588:1,3589:0,3590:1,3591:0,3592:0,3593:1,3598:2,3599:0,3600:2,3605:1,3606:0,3607:0,3608:2,3609:0,3610:2,3611:0,3612:2,3613:0,3614:2,3615:0,3616:2,3617:0,3618:2,3619:0,3620:2,3621:0,3622:2,3623:0,3624:2,3625:0,3626:2,3627:0,3628:2,3629:0,3630:2,3631:0,3632:2,3633:0,3634:1,3635:0,3636:1,3640:2,3641:0,3642:2,3643:0,3644:1,3645:0,3646:1,3647:0,3648:1,3649:0,3650:2,3651:0,3652:2,3653:0,3654:2,3655:0,3656:1,3657:0,3658:2,3659:0,3660:2,3661:0,3662:2,3663:0,3664:2,3668:2,3669:0,3670:2,3671:0,3672:2,3673:0,3674:2,3675:0,3676:1,3677:2,3678:0,3679:1,3680:2,3681:0,3682:1,3683:2,3684:0,3685:0,3686:2,3687:0,3688:2,3689:0,3690:2,3691:0,3692:2,3696:2,3697:0,3698:2,3699:0,3700:2,3793:0,3794:0,3812:0,3854:0,3857:0,3920:0,3978:0,3979:0,3991:2,3992:2,4026:0,4037:0,4038:0,4071:0,4082:0,4083:0,4087:0,4088:0,4217:2,4414:0,4415:0,4417:0,4434:0,4437:0,4438:2,4439:2,4462:0,4467:0,4471:0,4474:0,4559:0,4647:0,4822:0,4826:0,4839:0,5018:0,5041:0,5042:0,5048:0,5221:0,5223:0,5234:0,5235:0,5243:0,5247:0,5266:0,5316:0,5320:0,5321:0,5325:0,5337:0,5361:0,5362:0,5367:0,5382:0,5383:0,5396:0,5456:0,5457:0,5469:0,5472:4,5490:0,5513:0,5514:0,5523:0,5559:0,5588:1,5589:3,5596:0,5627:0,5629:0,5641:0,5643:0,5644:0,5646:2,5654:2,5655:2,5659:0,5700:0,5825:0,5836:0,5837:0,5839:0,5842:0,5844:0,5858:0,5879:0,5880:0,5887:0,5890:0,6128:1,6129:1,6141:1,6204:0,6210:0,6211:0,6307:0,6312:0,6316:0,6362:0,6391:1,6405:1,6406:0,6407:1,6408:0,6409:1,6410:0,6411:2,6412:0,6413:2,6414:0,6415:0,6416:2,6417:0,6418:2,6419:0,6420:2,6421:0,6422:2,6423:0,6424:2,6425:0,6426:2,6427:0,6428:2,6429:0,6430:2,6431:0,6432:2,6433:0,6434:2,6435:0,6436:2,6437:0,6438:2,6439:0,6440:0,6441:2,6442:0,6443:2,6444:0,6445:2,6446:0,6447:2,6448:0,6449:2,6450:0,6451:2,6452:0,6453:2,6454:0,6455:2,6456:0,6457:2,6458:0,6459:2,6460:0,6461:2,6462:0,6463:2,6464:0,6465:2,6466:0,6467:2,6468:0,6469:2,6470:0,6471:2,6472:0,6473:2,6474:0,6475:2,6476:0,6477:2,6478:0,6479:2,6484:2,6485:0,6486:2,6487:0,6488:2,6489:0,6490:2,6491:0,6492:2,6493:0,6494:1,6495:0,6496:1,6497:0,6498:0,6499:1,6500:0,6501:2,6502:0,6503:2,6504:0,6505:2,6506:0,6507:2,6508:0,6509:0,6510:2,6515:1,6516:0,6518:0,6519:2,6520:0,6521:2,6522:0,6523:2,6524:0,6525:2,6526:0,6527:2,6528:0,6529:2,6530:0,6531:2,6532:0,6533:2,6534:0,6535:2,6536:0,6537:2,6538:0,6539:2,6540:0,6541:2,6542:0,6543:2,6544:0,6545:1,6546:0,6547:1,6548:0,6549:2,6550:0,6551:2,6552:0,6553:2,6554:0,6555:2,6556:0,6557:1,6558:0,6559:1,6560:0,6561:1,6562:0,6563:2,6564:0,6565:2,6566:0,6567:0,6568:2,6569:0,6570:1,6571:0,6572:2,6573:0,6574:2,6575:0,6576:2,6577:0,6578:2,6582:2,6583:0,6584:2,6585:0,6586:2,6587:0,6588:2,6589:0,6590:2,6591:0,6592:0,6593:2,6594:0,6595:2,6596:0,6597:2,6598:0,6599:2,6600:0,6601:2,6602:0,6603:2,6605:2,6606:0,6607:2,6608:0,6609:2,6610:0,6611:0,6612:2,6613:0,6614:2,6615:0,6616:2,6617:0,6618:2,6633:2,6646:0,6703:0,6784:0,6785:1,6786:0,6787:1,6788:0,6789:1,6790:0,6791:1,6792:0,6793:1,6794:0,6795:1,6796:0,6797:1,6798:0,6799:1,6800:0,6801:1,6802:0,6803:1,6804:0,6805:1,6806:0,6807:1,6808:0,6809:1,6810:0,6811:1,6812:0,6813:1,6814:0,6815:1,6816:0,6817:1,6818:0,6819:1,6820:0,6821:1,6822:0,6823:1,6824:0,6825:1,6826:0,6827:1,6828:0,6829:1,6830:0,6831:1,6832:0,6833:1,6834:0,6835:1,6836:0,6837:1,6838:0,6839:1,6840:0,6841:1,6842:0,6843:1,6844:0,6845:1,6846:0,6847:1,6848:0,6849:1,6850:0,6851:1,6852:0,6853:1,6854:0,6855:1,6856:0,6857:1,6858:0,6859:1,6860:0,6861:1,6862:0,6863:1,6867:0,6868:1,6870:0,6875:0,6876:0,6879:0,6880:2,6884:0,6885:1,6886:0,6887:1,6915:0,6922:0,6923:2,6924:0,6925:2,6962:0,6984:0,6991:0,7128:2,7131:0,7132:2,7142:0,7257:0,7258:2,7259:0,7260:2,7261:0,7262:2,7263:0,7264:2,7265:0,7266:2,7267:0,7268:2,7269:0,7270:2,7271:0,7272:2,7273:0,7274:2,7275:0,7276:2,7277:0,7278:2,7279:0,7280:2,7281:0,7282:2,7283:0,7284:2,7285:0,7286:2,7287:0,7288:2,7289:0,7290:2,7291:0,7292:2,7293:0,7294:2,7295:0,7296:2,7297:0,7298:2,7299:0,7300:2,7301:0,7302:2,7303:0,7304:2,7305:0,7306:2,7307:0,7308:2,7309:0,7310:2,7311:0,7312:2,7313:0,7314:2,7315:0,7316:2,7317:0,7318:2,7319:0,7320:2,7321:0,7322:2,7323:0,7324:2,7325:0,7326:2,7327:0,7328:2,7329:0,7330:2,7331:0,7332:2,7333:0,7334:2,7335:0,7336:2,7337:0,7338:2,7339:0,7340:2,7341:0,7342:2,7343:0,7344:2,7345:0,7346:2,7347:0,7348:2,7349:0,7350:2,7351:0,7352:2,7353:0,7354:2,7355:0,7356:2,7357:0,7358:2,7359:0,7360:2,7361:0,7362:2,7363:0,7364:2,7365:0,7366:2,7367:0,7368:2,7369:0,7370:2,7877:0,7878:0,7882:0,7883:0,7887:0,7899:0,7991:0,7992:0,8035:2,8036:2,8058:0,8059:0,8082:0,8083:0,8088:0,8090:0,8091:2,8092:0,8093:2,8095:0,8096:2,8097:0,8098:2,8099:0,8100:2,8101:0,8102:2,8103:0,8104:2,8105:0,8106:2,8107:0,8108:2,8109:0,8110:2,8111:0,8112:2,8113:0,8114:2,8115:0,8116:2,8117:0,8118:2,8119:0,8120:2,8121:0,8122:2,8123:0,8124:2,8125:0,8126:2,8127:0,8128:2,8129:0,8130:2,8131:0,8132:2,8133:0,8134:2,8135:0,8136:2,8137:0,8138:2,8139:0,8140:2,8141:0,8142:2,8143:0,8144:2,8145:0,8146:2,8147:0,8148:2,8149:0,8150:2,8151:0,8152:2,8153:0,8154:2,8155:0,8156:2,8157:0,8158:2,8159:0,8160:2,8161:0,8162:2,8163:0,8164:2,8165:0,8166:2,8167:0,8168:2,8169:0,8170:2,8171:0,8172:2,8173:0,8177:2,8179:0,8180:2,8181:0,8182:2,8184:0,8185:2,8187:0,8189:2,8191:0,8193:2,8196:0,8197:2,8198:0,8200:2,8201:0,8202:2,8203:0,8204:2,8205:0,8206:2,8207:0,8208:2,8209:0,8210:2,8212:0,8213:2,8214:0,8216:2,8218:0,8220:2,8222:0,8224:2,8225:0,8226:2,8311:0,8312:1,8313:0,8314:1,8315:0,8316:1,8317:0,8318:1,8319:0,8320:1,8321:0,8322:1,8323:0,8324:1,8325:0,8326:1,8327:0,8328:1,8329:0,8330:1,8331:0,8332:1,8333:0,8334:1,8335:0,8336:1,8337:0,8338:1,8339:0,8340:1,8341:0,8342:1,8343:0,8344:1,8345:0,8346:1,8347:0,8348:1,8352:0,8353:0,8379:0,8380:2,8381:0,8382:2,8383:0,8384:2,8385:0,8387:2,8391:0,8395:0,8433:0,8441:0,8455:0,8456:0,8531:2,8682:0,8686:0,8687:0,8692:0,8693:0,8826:0,8903:0,8950:0,8951:0,9039:0,9040:0,9141:0,9149:0,9150:0,9191:0,9221:0,9222:0,9249:0,9250:0,9252:0,9254:0,9265:0,9284:0,9285:0,9300:0,9354:0,9367:0,9373:0,9377:0,9387:0,9391:0,9456:0,9473:0,9498:0,9674:0,9678:0,9680:0,9709:0,9712:0,9713:0,9716:0,9741:0,9748:2,9749:2,9761:0,9766:0,9793:0,9794:0,9869:0,9874:0,9875:0,9880:0,9895:0,9943:0,9945:0,9947:0,9967:0,9972:0,9977:0,10160:0,10183:0,10188:0,10194:0,10199:0,10207:0,10212:0,10217:0,10222:0,10227:0,10235:0,10240:0,10250:0,10254:0,10270:0,10275:0,10280:0,10306:0,10329:0,10471:0,10477:0,10481:2,10516:2,10592:0,10594:0,10596:0,10598:0,10601:0,10603:0,10626:0,10632:0,10665:0,20002:0,20042:0,20050:1,20499:0,20538:0,20539:0,20790:0,20791:0,21291:0,21292:0,21500:0,21817:0,21818:0,22032:0,22033:0,22091:0,22092:0,22239:0,22240:0,22332:0,22337:0,22338:0,22391:0,22392:0,22639:0,22700:0,22739:0,22770:0,22780:0,22832:0,23090:0,23095:0,23239:0,23240:0,23433:0,23700:0,24047:0,24048:0,24100:3,24200:0,24305:0,24306:0,24382:10,24383:0,24500:0,24547:0,24548:0,24571:9,24600:0,25e3:0,25231:0,25884:0,25932:0,26237:0,26331:0,26332:0,26432:0,26591:0,26592:0,26632:0,26692:0,27120:0,27200:0,27291:6,27292:6,27429:0,27492:0,27493:0,27500:0,28232:0,28600:0,28991:0,28992:0,29100:0,29101:0,29220:0,29221:0,29333:0,29635:0,29636:0,29701:0,29738:0,29739:0,29849:0,29850:0,29871:8,29872:7,29873:0,29874:0,30200:5,30339:0,30340:0,30591:0,30592:0,30791:0,30792:0,30800:0,31028:0,31121:0,31154:0,31170:0,31171:0,31370:0,31528:0,31529:0,31600:0,31700:0,31838:0,31839:0,31900:0,31901:0,32061:0,32062:0,32098:0,32099:2,32100:0,32104:0,32161:0,32766:0,53048:0,53049:0,54090:0,54091:0,65061:2,65062:2,65161:0,65163:0,102041:2,102064:11,102068:15,102069:16,102118:2,102119:1,102120:2,102121:2,102217:2,102218:0,102219:2,102220:2,102378:1,102379:1,102380:0,102381:1,102589:2,102599:2,102600:2,102604:2,102647:0,102704:2,102705:2,102706:0,102731:0,102732:0,102759:1,102760:1,102761:2,102762:0,102763:2,102764:0,102765:0,102766:2,102970:1,102974:2,102993:0,102994:0,102995:2,102996:2,103015:0,103016:2,103017:0,103018:2,103025:0,103026:0,103027:2,103028:2,103035:0,103036:0,103037:2,103038:2,103039:0,103040:0,103041:2,103042:2,103043:0,103044:0,103045:2,103046:2,103047:0,103048:0,103049:2,103050:2,103051:0,103052:2,103053:0,103054:2,103055:0,103056:2,103057:0,103058:0,103059:2,103060:2,103061:0,103062:0,103063:2,103064:2,103069:2,103070:0,103071:0,103072:2,103073:2,103086:0,103087:0,103088:2,103089:2,103094:1,103095:0,103096:2,103103:0,103104:2,103105:0,103106:2,103121:0,103122:2,103123:0,103124:0,103125:1,103126:1,103127:0,103128:0,103129:2,103130:2,103131:0,103132:0,103133:2,103134:2,103135:0,103136:0,103137:1,103138:1,103139:0,103140:2,103141:0,103142:2,103143:0,103144:2,103145:0,103146:1,103147:0,103148:0,103149:2,103150:2,103151:0,103152:2,103172:0,103173:2,103174:0,103175:0,103176:2,103177:2,103178:0,103179:0,103180:2,103181:2,103182:0,103183:0,103184:2,103185:2,103228:0,103229:0,103230:2,103231:2,103250:0,103251:2,103252:0,103253:2,103260:0,103261:0,103262:2,103263:2,103270:0,103271:0,103272:2,103273:2,103274:0,103275:0,103276:2,103277:2,103278:0,103279:0,103280:2,103281:2,103282:0,103283:0,103284:2,103285:2,103286:0,103287:2,103288:0,103289:2,103290:0,103291:2,103292:0,103293:0,103294:2,103295:2,103296:0,103297:0,103298:2,103299:2,103376:2,103377:0,103378:0,103379:2,103380:2,103393:0,103394:0,103395:2,103396:2,103472:0,103473:1,103474:0,103475:2,103482:0,103483:2,103484:0,103485:2,103500:0,103501:2,103502:0,103503:0,103504:1,103505:1,103506:0,103507:0,103508:2,103509:2,103510:0,103511:0,103512:2,103513:2,103514:0,103515:2,103516:0,103517:2,103518:0,103519:2,103520:0,103521:1,103522:0,103523:0,103524:2,103525:2,103526:0,103527:2,103561:2,103562:2,103563:0,103564:0,103565:2,103566:2,103567:0,103568:0,103569:2,103570:2,103584:0,103585:2,103586:0,103587:2,103588:1,103589:0,103590:2,103591:1,103592:0,103593:2,103594:1,103695:2,103897:1,103978:2,103979:0,103980:2,103981:0};for(u=2e3;u<=2045;u++)g[u]=0;for(u=2056;u<=2065;u++)g[u]=0;for(u=2067;u<=2135;u++)g[u]=0;for(u=2137;u<=2154;u++)g[u]=0;for(u=2161;u<=2170;u++)g[u]=0;for(u=2172;u<=2193;u++)g[u]=0;for(u=2195;u<=2198;u++)g[u]=0;for(u=2200;u<=2203;u++)g[u]=0;for(u=2205;u<=2217;u++)g[u]=0;for(u=2222;u<=2224;u++)g[u]=1;for(u=2225;u<=2250;u++)g[u]=2;for(u=2251;u<=2253;u++)g[u]=1;for(u=2257;u<=2264;u++)g[u]=2;for(u=2274;u<=2279;u++)g[u]=2;for(u=2280;u<=2282;u++)g[u]=1;for(u=2283;u<=2289;u++)g[u]=2;for(u=2290;u<=2292;u++)g[u]=0;for(u=2308;u<=2313;u++)g[u]=0;for(u=2315;u<=2491;u++)g[u]=0;for(u=2494;u<=2866;u++)g[u]=0;for(u=2867;u<=2869;u++)g[u]=1;for(u=2870;u<=2888;u++)g[u]=2;for(u=2891;u<=2895;u++)g[u]=2;for(u=2896;u<=2898;u++)g[u]=1;for(u=2902;u<=2908;u++)g[u]=2;for(u=2915;u<=2920;u++)g[u]=2;for(u=2921;u<=2923;u++)g[u]=1;for(u=2924;u<=2930;u++)g[u]=2;for(u=2931;u<=2962;u++)g[u]=0;for(u=2964;u<=2968;u++)g[u]=2;for(u=2969;u<=2973;u++)g[u]=0;for(u=2975;u<=2991;u++)g[u]=0;for(u=2995;u<=3051;u++)g[u]=0;for(u=3054;u<=3079;u++)g[u]=0;for(u=3081;u<=3088;u++)g[u]=0;for(u=3092;u<=3101;u++)g[u]=0;for(u=3106;u<=3138;u++)g[u]=0;for(u=3146;u<=3151;u++)g[u]=0;for(u=3153;u<=3166;u++)g[u]=0;for(u=3168;u<=3172;u++)g[u]=0;for(u=3174;u<=3203;u++)g[u]=0;for(u=3294;u<=3358;u++)g[u]=0;for(u=3367;u<=3403;u++)g[u]=0;for(u=3408;u<=3416;u++)g[u]=0;for(u=3417;u<=3438;u++)g[u]=2;for(u=3441;u<=3446;u++)g[u]=2;for(u=3447;u<=3450;u++)g[u]=0;for(u=3451;u<=3459;u++)g[u]=2;for(u=3460;u<=3478;u++)g[u]=0;for(u=3554;u<=3559;u++)g[u]=0;for(u=3560;u<=3570;u++)g[u]=2;for(u=3571;u<=3581;u++)g[u]=0;for(u=3594;u<=3597;u++)g[u]=0;for(u=3601;u<=3604;u++)g[u]=0;for(u=3637;u<=3639;u++)g[u]=0;for(u=3665;u<=3667;u++)g[u]=0;for(u=3693;u<=3695;u++)g[u]=0;for(u=3701;u<=3727;u++)g[u]=0;for(u=3728;u<=3739;u++)g[u]=2;for(u=3740;u<=3751;u++)g[u]=0;for(u=3753;u<=3760;u++)g[u]=2;for(u=3761;u<=3773;u++)g[u]=0;for(u=3775;u<=3777;u++)g[u]=0;for(u=3779;u<=3781;u++)g[u]=0;for(u=3783;u<=3785;u++)g[u]=0;for(u=3788;u<=3791;u++)g[u]=0;for(u=3797;u<=3802;u++)g[u]=0;for(u=3814;u<=3816;u++)g[u]=0;for(u=3825;u<=3829;u++)g[u]=0;for(u=3832;u<=3841;u++)g[u]=0;for(u=3844;u<=3852;u++)g[u]=0;for(u=3873;u<=3885;u++)g[u]=0;for(u=3890;u<=3893;u++)g[u]=0;for(u=3907;u<=3912;u++)g[u]=0;for(u=3942;u<=3950;u++)g[u]=0;for(u=3968;u<=3970;u++)g[u]=0;for(u=3973;u<=3976;u++)g[u]=0;for(u=3986;u<=3989;u++)g[u]=0;for(u=3994;u<=3997;u++)g[u]=0;for(u=4048;u<=4051;u++)g[u]=0;for(u=4056;u<=4063;u++)g[u]=0;for(u=4093;u<=4096;u++)g[u]=0;for(u=4390;u<=4398;u++)g[u]=0;for(u=4399;u<=4413;u++)g[u]=2;for(u=4418;u<=4433;u++)g[u]=2;for(u=4455;u<=4457;u++)g[u]=2;for(u=4484;u<=4489;u++)g[u]=0;for(u=4491;u<=4554;u++)g[u]=0;for(u=4568;u<=4589;u++)g[u]=0;for(u=4652;u<=4656;u++)g[u]=0;for(u=4766;u<=4800;u++)g[u]=0;for(u=5014;u<=5016;u++)g[u]=0;for(u=5069;u<=5072;u++)g[u]=0;for(u=5105;u<=5130;u++)g[u]=0;for(u=5167;u<=5188;u++)g[u]=0;for(u=5253;u<=5259;u++)g[u]=0;for(u=5269;u<=5275;u++)g[u]=0;for(u=5292;u<=5311;u++)g[u]=0;for(u=5329;u<=5331;u++)g[u]=0;for(u=5343;u<=5349;u++)g[u]=0;for(u=5355;u<=5357;u++)g[u]=0;for(u=5387;u<=5389;u++)g[u]=0;for(u=5459;u<=5463;u++)g[u]=0;for(u=5479;u<=5482;u++)g[u]=0;for(u=5518;u<=5520;u++)g[u]=0;for(u=5530;u<=5539;u++)g[u]=0;for(u=5550;u<=5552;u++)g[u]=0;for(u=5562;u<=5583;u++)g[u]=0;for(u=5623;u<=5625;u++)g[u]=2;for(u=5631;u<=5639;u++)g[u]=0;for(u=5649;u<=5653;u++)g[u]=0;for(u=5663;u<=5680;u++)g[u]=0;for(u=5682;u<=5685;u++)g[u]=0;for(u=5875;u<=5877;u++)g[u]=0;for(u=5896;u<=5899;u++)g[u]=0;for(u=5921;u<=5940;u++)g[u]=0;for(u=6050;u<=6125;u++)g[u]=0;for(u=6244;u<=6275;u++)g[u]=0;for(u=6328;u<=6348;u++)g[u]=0;for(u=6350;u<=6356;u++)g[u]=0;for(u=6366;u<=6372;u++)g[u]=0;for(u=6381;u<=6387;u++)g[u]=0;for(u=6393;u<=6404;u++)g[u]=0;for(u=6480;u<=6483;u++)g[u]=0;for(u=6511;u<=6514;u++)g[u]=0;for(u=6579;u<=6581;u++)g[u]=0;for(u=6619;u<=6624;u++)g[u]=0;for(u=6625;u<=6627;u++)g[u]=2;for(u=6628;u<=6632;u++)g[u]=0;for(u=6634;u<=6637;u++)g[u]=0;for(u=6669;u<=6692;u++)g[u]=0;for(u=6707;u<=6709;u++)g[u]=0;for(u=6720;u<=6723;u++)g[u]=0;for(u=6732;u<=6738;u++)g[u]=0;for(u=6931;u<=6933;u++)g[u]=0;for(u=6956;u<=6959;u++)g[u]=0;for(u=7005;u<=7007;u++)g[u]=0;for(u=7057;u<=7070;u++)g[u]=2;for(u=7074;u<=7082;u++)g[u]=0;for(u=7109;u<=7118;u++)g[u]=0;for(u=7119;u<=7127;u++)g[u]=1;for(u=7374;u<=7376;u++)g[u]=0;for(u=7528;u<=7586;u++)g[u]=0;for(u=7587;u<=7645;u++)g[u]=2;for(u=7692;u<=7696;u++)g[u]=0;for(u=7755;u<=7787;u++)g[u]=0;for(u=7791;u<=7795;u++)g[u]=0;for(u=7799;u<=7801;u++)g[u]=0;for(u=7803;u<=7805;u++)g[u]=0;for(u=7825;u<=7831;u++)g[u]=0;for(u=7845;u<=7859;u++)g[u]=0;for(u=8013;u<=8032;u++)g[u]=0;for(u=8065;u<=8068;u++)g[u]=1;for(u=8518;u<=8529;u++)g[u]=2;for(u=8533;u<=8536;u++)g[u]=2;for(u=8538;u<=8540;u++)g[u]=2;for(u=8677;u<=8679;u++)g[u]=0;for(u=8836;u<=8840;u++)g[u]=0;for(u=8857;u<=8859;u++)g[u]=0;for(u=8908;u<=8910;u++)g[u]=0;for(u=9154;u<=9159;u++)g[u]=0;for(u=9205;u<=9218;u++)g[u]=0;for(u=9271;u<=9273;u++)g[u]=0;for(u=9295;u<=9297;u++)g[u]=0;for(u=9356;u<=9360;u++)g[u]=0;for(u=9404;u<=9407;u++)g[u]=0;for(u=9476;u<=9482;u++)g[u]=0;for(u=9487;u<=9494;u++)g[u]=0;for(u=9697;u<=9699;u++)g[u]=0;for(u=9821;u<=9865;u++)g[u]=0;for(u=10285;u<=10291;u++)g[u]=0;for(u=10314;u<=10317;u++)g[u]=0;for(u=10448;u<=10465;u++)g[u]=0;for(u=10731;u<=10733;u++)g[u]=0;for(u=11114;u<=11118;u++)g[u]=0;for(u=20004;u<=20032;u++)g[u]=0;for(u=20047;u<=20049;u++)g[u]=0;for(u=20062;u<=20092;u++)g[u]=0;for(u=20135;u<=20138;u++)g[u]=0;for(u=20248;u<=20258;u++)g[u]=0;for(u=20348;u<=20358;u++)g[u]=0;for(u=20436;u<=20440;u++)g[u]=0;for(u=20822;u<=20824;u++)g[u]=0;for(u=20904;u<=20932;u++)g[u]=0;for(u=20934;u<=20936;u++)g[u]=0;for(u=21004;u<=21032;u++)g[u]=0;for(u=21035;u<=21037;u++)g[u]=0;for(u=21095;u<=21097;u++)g[u]=0;for(u=21148;u<=21150;u++)g[u]=0;for(u=21207;u<=21264;u++)g[u]=0;for(u=21307;u<=21364;u++)g[u]=0;for(u=21413;u<=21423;u++)g[u]=0;for(u=21453;u<=21463;u++)g[u]=0;for(u=21473;u<=21483;u++)g[u]=0;for(u=21780;u<=21782;u++)g[u]=0;for(u=21891;u<=21894;u++)g[u]=0;for(u=21896;u<=21899;u++)g[u]=0;for(u=22171;u<=22177;u++)g[u]=0;for(u=22181;u<=22187;u++)g[u]=0;for(u=22191;u<=22197;u++)g[u]=0;for(u=22207;u<=22222;u++)g[u]=0;for(u=22229;u<=22232;u++)g[u]=0;for(u=22234;u<=22236;u++)g[u]=0;for(u=22243;u<=22250;u++)g[u]=0;for(u=22262;u<=22265;u++)g[u]=0;for(u=22307;u<=22322;u++)g[u]=0;for(u=22348;u<=22357;u++)g[u]=0;for(u=22407;u<=22422;u++)g[u]=0;for(u=22462;u<=22465;u++)g[u]=0;for(u=22521;u<=22525;u++)g[u]=0;for(u=22607;u<=22622;u++)g[u]=0;for(u=22641;u<=22646;u++)g[u]=0;for(u=22648;u<=22657;u++)g[u]=0;for(u=22707;u<=22722;u++)g[u]=0;for(u=22762;u<=22765;u++)g[u]=0;for(u=22807;u<=22822;u++)g[u]=0;for(u=22991;u<=22994;u++)g[u]=0;for(u=23028;u<=23038;u++)g[u]=0;for(u=23301;u<=23333;u++)g[u]=2;for(u=23830;u<=23853;u++)g[u]=0;for(u=23866;u<=23872;u++)g[u]=0;for(u=23877;u<=23884;u++)g[u]=0;for(u=23886;u<=23894;u++)g[u]=0;for(u=23946;u<=23948;u++)g[u]=0;for(u=24311;u<=24313;u++)g[u]=0;for(u=24342;u<=24347;u++)g[u]=0;for(u=24370;u<=24374;u++)g[u]=10;for(u=24375;u<=24381;u++)g[u]=0;for(u=24718;u<=24721;u++)g[u]=0;for(u=24817;u<=24821;u++)g[u]=0;for(u=24877;u<=24882;u++)g[u]=0;for(u=24891;u<=24893;u++)g[u]=0;for(u=25391;u<=25395;u++)g[u]=0;for(u=25828;u<=25838;u++)g[u]=0;for(u=26191;u<=26195;u++)g[u]=0;for(u=26391;u<=26393;u++)g[u]=0;for(u=26701;u<=26722;u++)g[u]=0;for(u=26729;u<=26799;u++)g[u]=2;for(u=26801;u<=26803;u++)g[u]=2;for(u=26811;u<=26813;u++)g[u]=2;for(u=26847;u<=26870;u++)g[u]=2;for(u=26891;u<=26899;u++)g[u]=0;for(u=26901;u<=26923;u++)g[u]=0;for(u=26929;u<=26946;u++)g[u]=0;for(u=26948;u<=26998;u++)g[u]=0;for(u=27037;u<=27040;u++)g[u]=0;for(u=27205;u<=27232;u++)g[u]=0;for(u=27258;u<=27260;u++)g[u]=0;for(u=27391;u<=27398;u++)g[u]=0;for(u=27561;u<=27564;u++)g[u]=0;for(u=27571;u<=27574;u++)g[u]=0;for(u=27581;u<=27584;u++)g[u]=0;for(u=27591;u<=27594;u++)g[u]=0;for(u=27700;u<=27707;u++)g[u]=0;for(u=28191;u<=28193;u++)g[u]=0;for(u=28348;u<=28358;u++)g[u]=0;for(u=28402;u<=28432;u++)g[u]=0;for(u=28462;u<=28492;u++)g[u]=0;for(u=29118;u<=29122;u++)g[u]=0;for(u=29168;u<=29172;u++)g[u]=0;for(u=29177;u<=29185;u++)g[u]=0;for(u=29187;u<=29195;u++)g[u]=0;for(u=29900;u<=29903;u++)g[u]=0;for(u=30161;u<=30179;u++)g[u]=0;for(u=30491;u<=30494;u++)g[u]=0;for(u=30729;u<=30732;u++)g[u]=0;for(u=31251;u<=31259;u++)g[u]=0;for(u=31265;u<=31268;u++)g[u]=0;for(u=31275;u<=31279;u++)g[u]=0;for(u=31281;u<=31297;u++)g[u]=0;for(u=31461;u<=31469;u++)g[u]=0;for(u=31491;u<=31495;u++)g[u]=0;for(u=31917;u<=31922;u++)g[u]=0;for(u=31965;u<=32e3;u++)g[u]=0;for(u=32001;u<=32003;u++)g[u]=2;for(u=32005;u<=32031;u++)g[u]=2;for(u=32033;u<=32060;u++)g[u]=2;for(u=32064;u<=32067;u++)g[u]=2;for(u=32074;u<=32077;u++)g[u]=2;for(u=32081;u<=32086;u++)g[u]=0;for(u=32107;u<=32130;u++)g[u]=0;for(u=32133;u<=32159;u++)g[u]=0;for(u=32164;u<=32167;u++)g[u]=2;for(u=32180;u<=32199;u++)g[u]=0;for(u=32201;u<=32260;u++)g[u]=0;for(u=32301;u<=32360;u++)g[u]=0;for(u=32401;u<=32460;u++)g[u]=0;for(u=32501;u<=32560;u++)g[u]=0;for(u=32601;u<=32662;u++)g[u]=0;for(u=32664;u<=32667;u++)g[u]=2;for(u=32701;u<=32761;u++)g[u]=0;for(u=53001;u<=53004;u++)g[u]=0;for(u=53008;u<=53019;u++)g[u]=0;for(u=53021;u<=53032;u++)g[u]=0;for(u=53034;u<=53037;u++)g[u]=0;for(u=53042;u<=53046;u++)g[u]=0;for(u=53074;u<=53080;u++)g[u]=0;for(u=54001;u<=54004;u++)g[u]=0;for(u=54008;u<=54019;u++)g[u]=0;for(u=54021;u<=54032;u++)g[u]=0;for(u=54034;u<=54037;u++)g[u]=0;for(u=54042;u<=54046;u++)g[u]=0;for(u=54048;u<=54053;u++)g[u]=0;for(u=54074;u<=54080;u++)g[u]=0;for(u=54098;u<=54101;u++)g[u]=0;for(u=102001;u<=102040;u++)g[u]=0;for(u=102042;u<=102063;u++)g[u]=0;for(u=102065;u<=102067;u++)g[u]=0;for(u=102070;u<=102117;u++)g[u]=0;for(u=102122;u<=102216;u++)g[u]=0;for(u=102221;u<=102377;u++)g[u]=0;for(u=102382;u<=102388;u++)g[u]=0;for(u=102389;u<=102398;u++)g[u]=2;for(u=102399;u<=102444;u++)g[u]=0;for(u=102445;u<=102447;u++)g[u]=2;for(u=102448;u<=102458;u++)g[u]=0;for(u=102459;u<=102468;u++)g[u]=2;for(u=102469;u<=102499;u++)g[u]=0;for(u=102500;u<=102519;u++)g[u]=1;for(u=102520;u<=102524;u++)g[u]=0;for(u=102525;u<=102529;u++)g[u]=2;for(u=102530;u<=102588;u++)g[u]=0;for(u=102590;u<=102598;u++)g[u]=0;for(u=102601;u<=102603;u++)g[u]=0;for(u=102605;u<=102628;u++)g[u]=0;for(u=102629;u<=102646;u++)g[u]=2;for(u=102648;u<=102700;u++)g[u]=2;for(u=102701;u<=102703;u++)g[u]=0;for(u=102707;u<=102730;u++)g[u]=2;for(u=102733;u<=102758;u++)g[u]=2;for(u=102767;u<=102900;u++)g[u]=0;for(u=102901;u<=102933;u++)g[u]=2;for(u=102934;u<=102950;u++)g[u]=13;for(u=102951;u<=102963;u++)g[u]=0;for(u=102965;u<=102969;u++)g[u]=0;for(u=102971;u<=102973;u++)g[u]=0;for(u=102975;u<=102989;u++)g[u]=0;for(u=102990;u<=102992;u++)g[u]=1;for(u=102997;u<=103002;u++)g[u]=0;for(u=103003;u<=103008;u++)g[u]=2;for(u=103009;u<=103011;u++)g[u]=0;for(u=103012;u<=103014;u++)g[u]=2;for(u=103019;u<=103021;u++)g[u]=0;for(u=103022;u<=103024;u++)g[u]=2;for(u=103029;u<=103031;u++)g[u]=0;for(u=103032;u<=103034;u++)g[u]=2;for(u=103065;u<=103068;u++)g[u]=0;for(u=103074;u<=103076;u++)g[u]=0;for(u=103077;u<=103079;u++)g[u]=1;for(u=103080;u<=103082;u++)g[u]=0;for(u=103083;u<=103085;u++)g[u]=2;for(u=103090;u<=103093;u++)g[u]=0;for(u=103097;u<=103099;u++)g[u]=0;for(u=103100;u<=103102;u++)g[u]=2;for(u=103107;u<=103109;u++)g[u]=0;for(u=103110;u<=103112;u++)g[u]=2;for(u=103113;u<=103116;u++)g[u]=0;for(u=103117;u<=103120;u++)g[u]=2;for(u=103153;u<=103157;u++)g[u]=0;for(u=103158;u<=103162;u++)g[u]=2;for(u=103163;u<=103165;u++)g[u]=0;for(u=103166;u<=103168;u++)g[u]=1;for(u=103169;u<=103171;u++)g[u]=2;for(u=103186;u<=103188;u++)g[u]=0;for(u=103189;u<=103191;u++)g[u]=2;for(u=103192;u<=103195;u++)g[u]=0;for(u=103196;u<=103199;u++)g[u]=2;for(u=103200;u<=103224;u++)g[u]=0;for(u=103225;u<=103227;u++)g[u]=1;for(u=103232;u<=103237;u++)g[u]=0;for(u=103238;u<=103243;u++)g[u]=2;for(u=103244;u<=103246;u++)g[u]=0;for(u=103247;u<=103249;u++)g[u]=2;for(u=103254;u<=103256;u++)g[u]=0;for(u=103257;u<=103259;u++)g[u]=2;for(u=103264;u<=103266;u++)g[u]=0;for(u=103267;u<=103269;u++)g[u]=2;for(u=103300;u<=103375;u++)g[u]=0;for(u=103381;u<=103383;u++)g[u]=0;for(u=103384;u<=103386;u++)g[u]=1;for(u=103387;u<=103389;u++)g[u]=0;for(u=103390;u<=103392;u++)g[u]=2;for(u=103397;u<=103399;u++)g[u]=0;for(u=103400;u<=103471;u++)g[u]=2;for(u=103476;u<=103478;u++)g[u]=0;for(u=103479;u<=103481;u++)g[u]=2;for(u=103486;u<=103488;u++)g[u]=0;for(u=103489;u<=103491;u++)g[u]=2;for(u=103492;u<=103495;u++)g[u]=0;for(u=103496;u<=103499;u++)g[u]=2;for(u=103528;u<=103543;u++)g[u]=0;for(u=103544;u<=103548;u++)g[u]=2;for(u=103549;u<=103551;u++)g[u]=0;for(u=103552;u<=103554;u++)g[u]=1;for(u=103555;u<=103557;u++)g[u]=2;for(u=103558;u<=103560;u++)g[u]=0;for(u=103571;u<=103573;u++)g[u]=0;for(u=103574;u<=103576;u++)g[u]=2;for(u=103577;u<=103580;u++)g[u]=0;for(u=103581;u<=103583;u++)g[u]=2;for(u=103595;u<=103694;u++)g[u]=0;for(u=103696;u<=103699;u++)g[u]=0;for(u=103700;u<=103793;u++)g[u]=2;for(u=103794;u<=103890;u++)g[u]=0;for(u=103891;u<=103896;u++)g[u]=2;for(u=103900;u<=103971;u++)g[u]=2;for(u=103972;u<=103977;u++)g[u]=0;for(u=112e3;u<=112101;u++)g[u]=0;const i3=[102100,102113,3857,3785,900913],oL=[104905,104971],aL=[4326,...i3,...oL],Ec=[-20037508342788905e-9,20037508342788905e-9],bg=[-20037508342787e-6,20037508342787e-6],Rm={wkTemplate:'PROJCS["WGS_1984_Web_Mercator_Auxiliary_Sphere",GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator_Auxiliary_Sphere"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],PARAMETER["Auxiliary_Sphere_Type",0.0],UNIT["Meter",1.0]]',valid:Ec,origin:bg,dx:1e-5},s3={102113:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator",GEOGCS["GCS_WGS_1984_Major_Auxiliary_Sphere",DATUM["D_WGS_1984_Major_Auxiliary_Sphere",SPHEROID["WGS_1984_Major_Auxiliary_Sphere",6378137.0,0.0]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],UNIT["Meter",1.0]]',valid:Ec,origin:bg,dx:1e-5},102100:Rm,3785:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator",GEOGCS["GCS_WGS_1984_Major_Auxiliary_Sphere",DATUM["D_WGS_1984_Major_Auxiliary_Sphere",SPHEROID["WGS_1984_Major_Auxiliary_Sphere",6378137.0,0.0]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],UNIT["Meter",1.0]]',valid:Ec,origin:bg,dx:1e-5},3857:Rm,4326:{wkTemplate:'GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",{Central_Meridian}],UNIT["Degree",0.0174532925199433]]',altTemplate:'PROJCS["WGS_1984_Plate_Carree",GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Plate_Carree"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],UNIT["Degrees",111319.491]]',valid:[-180,180],origin:[-180,90],dx:1e-5},104971:{wkTemplate:'GEOGCS["Mars_2000_(Sphere)",DATUM["Mars_2000_(Sphere)",SPHEROID["Mars_2000_(Sphere)",3396190.0,0.0]],PRIMEM["Reference_Meridian",0.0],UNIT["Degree",0.0174532925199433]]',valid:[-180,180],origin:[-180,90],dx:1e-5},104905:{wkTemplate:'GEOGCS["GCS_Mars_2000",DATUM["D_Mars_2000",SPHEROID["Mars_2000_IAU_IAG",3396190.0,169.8944472236118]],PRIMEM["Reference_Meridian",0.0],UNIT["Degree",0.0174532925199433]]',valid:[-180,180],origin:[-180,90],dx:1e-5},900913:Rm};function ct(e,t){if(e===t)return!0;if(e==null||t==null)return!1;const r=e.wkid,i=t.wkid;if(r!=null||i!=null){if(r===i||Pi(e)&&Pi(t))return!0;const o=e.latestWkid;if(o!=null&&i===o)return!0;const a=t.latestWkid;return a!=null&&r===a}let s,n;return e.wkt2&&t.wkt2?(s=e.wkt2,n=t.wkt2):e.wkt&&t.wkt&&(s=e.wkt,n=t.wkt),!(!s||!n)&&s.toUpperCase()===n.toUpperCase()}function Rt(e){const t=e==null?void 0:e.wkid;return t!=null&&t>=2e3&&s3[t]||null}function n3(e){if(!e)return;const{wkid:t,vcsWkid:r}=e;if(t)return r?JSON.stringify({wkid:t,vcsWkid:r}):String(t);const i=e.wkt||e.wkt2;return JSON.stringify(i?r?{wkt:i,vcsWkid:r}:{wkt:i}:{})}function $l(e){if(!sr(e))return!1;const{wkid:t}=e;if(t)return g[t]==null;const r=e.wkt2||e.wkt;return!!r&&/^\s*(?:GEOGCS|GEOGCRS|GEOGRAPHICCRS)/i.test(r)}function lL(e){return!(o3(e)||a3(e))}function Oo(e){return(e==null?void 0:e.wkid)===4326}function DX(e){return/^\s*(?:GEOD|GEODETIC|GEOG|GEOGRAPHIC|PROJ|PROJECTED|VERT|VERTICAL|ENG|ENGINEERING|PARAMETRIC|TIME|DERIVEDPROJ|COMPOUND|BOUND)CRS/i.test(e)}function nb(e){return(e==null?void 0:e.wkid)===Po.CGCS2000}function Pi(e){const t=e==null?void 0:e.wkid;return t!=null&&t>=2e3&&i3.includes(t)}function uL(e){return(e==null?void 0:e.wkid)===32662}function kf(e){return e===Po.GCSMARS2000||e===Po.GCSMARS2000_SPHERE}function o3(e){return kf(e==null?void 0:e.wkid)}function Nf(e){return e===Po.GCSMOON2000}function a3(e){return Nf(e==null?void 0:e.wkid)}function cL(e){const t=e==null?void 0:e.wkid;return t!=null&&t>=2e3&&aL.includes(t)}function sr(e){if(e==null)return!1;const t=e.wkid;return t!=null&&t>=2e3||e.wkt2!=null||e.wkt!=null}const l3={wkid:4326,wkt:r_(s3[4326].wkTemplate,{Central_Meridian:"0.0"})},u3={wkid:102100,latestWkid:3857},hL={wkid:32662};function C_(e){return{wkt:`GEOCCS["Spherical geocentric",
    DATUM["Not specified",
      SPHEROID["Sphere",${e.radius},0]],
    PRIMEM["Greenwich",0.0,
      AUTHORITY["EPSG","8901"]],
    UNIT["m",1.0],
    AXIS["Geocentric X",OTHER],
    AXIS["Geocentric Y",EAST],
    AXIS["Geocentric Z",NORTH]
  ]`}}const dL=C_(He),I_=C_(Ei),R_=C_(gn),pL={wkt:`GEOCCS["WGS 84",
  DATUM["WGS_1984",
    SPHEROID["WGS 84",${He.radius},298.257223563,
      AUTHORITY["EPSG","7030"]],
    AUTHORITY["EPSG","6326"]],
  PRIMEM["Greenwich",0,
    AUTHORITY["EPSG","8901"]],
  UNIT["m",1.0,
    AUTHORITY["EPSG","9001"]],
  AXIS["Geocentric X",OTHER],
  AXIS["Geocentric Y",OTHER],
  AXIS["Geocentric Z",NORTH],
  AUTHORITY["EPSG","4978"]
]`},fL=I_.wkt.toUpperCase(),mL=R_.wkt.toUpperCase();function yL(e){if(e!=null&&sr(e)){const t=e.wkid,r=e.wkt2??e.wkt;if(kf(t))return Ei;const i=r==null?void 0:r.toUpperCase();if(r&&i===fL)return Ei;if(Nf(t)||i&&i===mL)return gn}return He}function FX(e){return kf(e)?Ei:Nf(e)?gn:He}function Rp(e){return ct(e,dL)}function _n(e){return Rp(e)||ct(e,I_)||ct(e,R_)}const UX=39.37,gL=He.radius*Math.PI/200,c3=/(?:LENGTH)?UNIT\[([^\]]+)]]$/i,ll=g,h3=/UNIT\[([^\]]+)]/i,_L=new Set([4305,4807,4810,4811,4812,4816,4819,4821,4901,4902,37225,104025,104026,104139,104140]),vL=Wt()({millimeter:"millimeters",centimeter:"centimeters",meter:"meters",meter_german:"german-meters",kilometer:"kilometers",decimeter:"decimeters",micrometer:"micrometers",nanometer:"nanometers","50_kilometers":"50-kilometers","150_kilometers":"150-kilometers",foot:"feet",foot_us:"us-feet",foot_clarke:"clarke-feet",fathom:"fathoms",nautical_mile:"nautical-miles",chain_us:"us-chains",link_us:"us-links",mile_us:"us-miles",yard_clarke:"clarke-yards",chain_clarke:"clarke-chains",link_clarke:"clarke-links",yard_sears:"sears-yards",foot_sears:"sears-feet",chain_sears:"sears-chains",link_sears:"sears-links",yard_benoit_1895_a:"benoit-1895-a-yards",foot_benoit_1895_a:"benoit-1895-a-feet",chain_benoit_1895_a:"benoit-1895-a-chains",link_benoit_1895_a:"benoit-1895-a-links",yard_benoit_1895_b:"benoit-1895-b-yards",foot_benoit_1895_b:"benoit-1895-b-feet",chain_benoit_1895_b:"benoit-1895-b-chains",link_benoit_1895_b:"benoit-1895-b-links",foot_1865:"1865-feet",foot_indian:"indian-feet",foot_indian_1937:"indian-1937-feet",foot_indian_1962:"indian-1962-feet",foot_indian_1975:"indian-1975-feet",yard_indian:"indian-yards",yard_indian_1937:"indian-1937-yards",yard_indian_1962:"indian-1962-yards",yard_indian_1975:"indian-1975-yards",statute_mile:"statute-miles",foot_gold_coast:"gold-coast-feet",foot_british_1936:"british-1936-feet",yard:"yards",chain:"chains",link:"links",yard_sears_1922_truncated:"sears-1922-truncated-yards",foot_sears_1922_truncated:"sears-1922-truncated-feet",chain_sears_1922_truncated:"sears-1922-truncated-chains",link_sears_1922_truncated:"sears-1922-truncated-links",yard_us:"us-yards",inch:"inches",inch_us:"us-inches",rod:"rods",rod_us:"us-rods",nautical_mile_us:"us-nautical-miles",nautical_mile_uk:"uk-nautical-miles",smoot:"smoots",vara_tx:"tx-vara",point:"points"}),Nr=e=>e*e,Ts=e=>e*e*e,Mc={length:{baseUnit:"meters",units:{millimeters:{inBaseUnits:.001},centimeters:{inBaseUnits:.01},meters:{inBaseUnits:1},feet:{inBaseUnits:.3048},"us-feet":{inBaseUnits:.3048006096012192},"clarke-feet":{inBaseUnits:.3047972654},fathoms:{inBaseUnits:1.8288},"nautical-miles":{inBaseUnits:1852},"german-meters":{inBaseUnits:1.0000135965},"us-chains":{inBaseUnits:20.11684023368047},"us-links":{inBaseUnits:.2011684023368047},"us-miles":{inBaseUnits:1609.347218694438},kilometers:{inBaseUnits:1e3},"clarke-yards":{inBaseUnits:.9143917962},"clarke-chains":{inBaseUnits:20.1166195164},"clarke-links":{inBaseUnits:.201166195164},"sears-yards":{inBaseUnits:.9143984146160287},"sears-feet":{inBaseUnits:.3047994715386762},"sears-chains":{inBaseUnits:20.11676512155263},"sears-links":{inBaseUnits:.2011676512155263},"benoit-1895-a-yards":{inBaseUnits:.9143992},"benoit-1895-a-feet":{inBaseUnits:.3047997333333333},"benoit-1895-a-chains":{inBaseUnits:20.1167824},"benoit-1895-a-links":{inBaseUnits:.201167824},"benoit-1895-b-yards":{inBaseUnits:.9143992042898124},"benoit-1895-b-feet":{inBaseUnits:.3047997347632708},"benoit-1895-b-chains":{inBaseUnits:20.11678249437587},"benoit-1895-b-links":{inBaseUnits:.2011678249437587},"1865-feet":{inBaseUnits:.3048008333333334},"indian-feet":{inBaseUnits:.3047995102481469},"indian-1937-feet":{inBaseUnits:.30479841},"indian-1962-feet":{inBaseUnits:.3047996},"indian-1975-feet":{inBaseUnits:.3047995},"indian-yards":{inBaseUnits:.9143985307444408},"indian-1937-yards":{inBaseUnits:.91439523},"indian-1962-yards":{inBaseUnits:.9143988},"indian-1975-yards":{inBaseUnits:.9143985},miles:{inBaseUnits:1609.344},"statute-miles":{inBaseUnits:1609.344},"gold-coast-feet":{inBaseUnits:.3047997101815088},"british-1936-feet":{inBaseUnits:.3048007491},yards:{inBaseUnits:.9144},chains:{inBaseUnits:20.1168},links:{inBaseUnits:.201168},"sears-1922-truncated-yards":{inBaseUnits:.914398},"sears-1922-truncated-feet":{inBaseUnits:.3047993333333334},"sears-1922-truncated-chains":{inBaseUnits:20.116756},"sears-1922-truncated-links":{inBaseUnits:.20116756},"us-yards":{inBaseUnits:.9144018288036576},decimeters:{inBaseUnits:.1},inches:{inBaseUnits:.0254},"us-inches":{inBaseUnits:.0254000508001016},rods:{inBaseUnits:5.0292},"us-rods":{inBaseUnits:5.029210058420118},"us-nautical-miles":{inBaseUnits:1853.248},"uk-nautical-miles":{inBaseUnits:1853.184},smoots:{inBaseUnits:1.7018},"tx-vara":{inBaseUnits:.8466683600033867},points:{inBaseUnits:.0003527777777777778},micrometers:{inBaseUnits:1e-6},nanometers:{inBaseUnits:1e-9},"50-kilometers":{inBaseUnits:5e4},"150-kilometers":{inBaseUnits:15e4}}},area:{baseUnit:"square-meters",units:{"square-millimeters":{inBaseUnits:Nr(.001)},"square-centimeters":{inBaseUnits:Nr(.01)},"square-decimeters":{inBaseUnits:Nr(.1)},"square-meters":{inBaseUnits:1},"square-kilometers":{inBaseUnits:Nr(1e3)},"square-inches":{inBaseUnits:Nr(.0254)},"square-feet":{inBaseUnits:Nr(.3048)},"square-yards":{inBaseUnits:Nr(.9144)},"square-miles":{inBaseUnits:Nr(1609.344)},"square-nautical-miles":{inBaseUnits:Nr(1852)},"square-us-feet":{inBaseUnits:Nr(1200/3937)},acres:{inBaseUnits:.0015625*Nr(1609.344)},ares:{inBaseUnits:100},hectares:{inBaseUnits:1e4}}},volume:{baseUnit:"liters",units:{liters:{inBaseUnits:1},"cubic-millimeters":{inBaseUnits:1e3*Ts(.001)},"cubic-centimeters":{inBaseUnits:1e3*Ts(.01)},"cubic-decimeters":{inBaseUnits:1e3*Ts(.1)},"cubic-meters":{inBaseUnits:1e3},"cubic-kilometers":{inBaseUnits:1e3*Ts(1e3)},"cubic-inches":{inBaseUnits:1e3*Ts(.0254)},"cubic-feet":{inBaseUnits:1e3*Ts(.3048)},"cubic-yards":{inBaseUnits:1e3*Ts(.9144)},"cubic-miles":{inBaseUnits:1e3*Ts(1609.344)}}},angle:{baseUnit:"radians",units:{radians:{inBaseUnits:1},degrees:{inBaseUnits:Math.PI/180}}}},wL=(()=>{const e={};for(const t in Mc)for(const r in Mc[t].units)e[r]=t;return e})();function bL(e,t,r){return e*Mc[r].units[t].inBaseUnits}function SL(e,t,r){return e/Mc[r].units[t].inBaseUnits}const d3=["metric","imperial","inches","feet","yards","miles","nautical-miles","us-feet","meters","kilometers"],TL=new Map([["meters","square-meters"],["feet","square-feet"],["us-feet","square-us-feet"]]);function Sg(e){const t=wL[e];if(!t)throw new Error("unknown type");return t}function ob(e,t=null){return t=t||Sg(e),Mc[t].baseUnit===e}function ri(e,t,r){if(t===r)return e;const i=Sg(t);if(i!==Sg(r))throw new Error("incompatible units");const s=ob(t,i)?e:bL(e,t,i);return ob(r,i)?s:SL(s,r,i)}function jX(e,t,r,i=!1){if(!i&&$l(t))throw new Error("Unable to convert from an angular unit to a linear unit.");const s=Go(t);return s!==r&&(e=s?ri(e,s,r):ri(e*=Ni(t),"meters",r)),e}function GX(e,t,r,i=!1){if(!i&&$l(r))throw new Error("Unable to convert from a linear unit to an angular unit.");const s=Go(r);return t!==s&&(e=s?ri(e,t,s):ri(e,t,"meters")/Ni(r)),e}function $L(e){switch(e){case"metric":return"meters";case"imperial":return"feet";default:return e}}function zX(e){return $L(e)}function VX(e){switch(e){case"metric":return"square-meters";case"imperial":return"square-feet";default:return e}}function BX(e,t){const r=ri(e,t,"meters");return Math.abs(r)<3e3?"meters":"kilometers"}function HX(e,t){const r=ri(e,t,"meters");return Math.abs(r)<1e5?"meters":"kilometers"}function qX(e,t){const r=ri(e,t,"feet");return Math.abs(r)<1e3?"feet":"miles"}function WX(e,t){const r=ri(e,t,"feet");return Math.abs(r)<1e5?"feet":"miles"}function ZX(e,t){const r=ri(e,t,"square-meters");return Math.abs(r)<3e6?"square-meters":"square-kilometers"}function JX(e,t){const r=ri(e,t,"square-feet");return Math.abs(r)<1e6?"square-feet":"square-miles"}function YX(e,t,r){return ri(e,t,"meters")/(r*Math.PI/180)}function k_(e){return vL.fromJSON(e.toLowerCase())||null}function ab(e){if(e!=null&&!lL(e))return 1;const t=Ni(e);return t>1e5?1:t}function p3(e){return Ni(e)>=yL(e).metersPerDegree?"meters":Go(e)}function Ni(e,t=He.metersPerDegree){return EL(e,!0)??t}function EL(e,t=!1){const r=(e==null?void 0:e.wkid)??null,i=(e==null?void 0:e.wkt2)??(e==null?void 0:e.wkt)??null;let s=null;if(r){if(kf(r))return Ei.metersPerDegree;if(Nf(r))return gn.metersPerDegree;s=ll.values[ll[r]],!s&&t&&_L.has(r)&&(s=gL)}else i&&(y3(i)?s=lb(c3.exec(i),s):m3(i)&&(s=lb(h3.exec(i),s)));return s}function KX(e){return $l(e)?1:Ni(e)}function lb(e,t){return e!=null&&e[1]?f3(e[1]):t}function f3(e){return parseFloat(e.split(",")[1])}function Go(e){const t=(e==null?void 0:e.wkid)??null,r=(e==null?void 0:e.wkt2)??(e==null?void 0:e.wkt)??null;let i=null;if(t)i=ll.units[ll[t]];else if(r){const s=y3(r)?c3:m3(r)?h3:null;if(s){const n=s.exec(r);n!=null&&n[1]&&(i=xL(n[1]))}}return i!=null?k_(i):null}function XX(e){const t=Go(e);return t!=null&&d3.includes(t)?t:null}function QX(e){const t=p3(e);return t!=null&&d3.includes(t)?t:null}function eQ(e){const t=Go(e);return t==null?null:TL.get(t)}function m3(e){return/^GEOCCS/i.test(e)}function y3(e){return/^\s*(?:PROJCS|PROJCRS|PROJECTEDCRS)/i.test(e)}const ML=1e-7;function xL(e){const t=/[\\"']{1}([^\\"']+)/.exec(e);let r=t==null?void 0:t[1];if(!r||!k_(r)){const i=f3(e);r=null;const s=ll.values;for(let n=0;n<s.length;++n)if(Math.abs(i-s[n])<ML){r=ll.units[n];break}}return r}function tQ(e){const t=Go(e);if(t==null)return null;switch(t){case"feet":case"us-feet":case"clarke-feet":case"fathoms":case"nautical-miles":case"us-chains":case"us-links":case"us-miles":case"clarke-yards":case"clarke-chains":case"clarke-links":case"sears-yards":case"sears-feet":case"sears-chains":case"sears-links":case"benoit-1895-a-yards":case"benoit-1895-a-feet":case"benoit-1895-a-chains":case"benoit-1895-a-links":case"benoit-1895-b-yards":case"benoit-1895-b-feet":case"benoit-1895-b-chains":case"benoit-1895-b-links":case"1865-feet":case"indian-feet":case"indian-1937-feet":case"indian-1962-feet":case"indian-1975-feet":case"indian-yards":case"indian-1937-yards":case"indian-1962-yards":case"indian-1975-yards":case"statute-miles":case"gold-coast-feet":case"british-1936-feet":case"yards":case"chains":case"links":case"sears-1922-truncated-yards":case"sears-1922-truncated-feet":case"sears-1922-truncated-chains":case"sears-1922-truncated-links":case"us-yards":case"inches":case"us-inches":case"rods":case"us-rods":case"us-nautical-miles":case"uk-nautical-miles":case"smoots":case"tx-vara":case"points":return"imperial";case"millimeters":case"centimeters":case"meters":case"german-meters":case"kilometers":case"decimeters":case"micrometers":case"nanometers":case"50-kilometers":case"150-kilometers":return"metric"}return null}const AL={esriAcres:"acres",esriAres:"ares",esriHectares:"hectares",esriSquareCentimeters:"square-centimeters",esriSquareDecimeters:"square-decimeters",esriSquareFeet:"square-feet",esriSquareInches:"square-inches",esriSquareKilometers:"square-kilometers",esriSquareMeters:"square-meters",esriSquareMiles:"square-miles",esriSquareMillimeters:"square-millimeters",esriSquareUsFeet:"square-us-feet",esriSquareYards:"square-yards"},PL={esriCentimeters:"centimeters",esriDecimeters:"decimeters",esriFeet:"feet",esriInches:"inches",esriKilometers:"kilometers",esriMeters:"meters",esriMiles:"miles",esriMillimeters:"millimeters",esriNauticalMiles:"nautical-miles",esriYards:"yards"},OL={esriDUDecimalDegrees:"degrees",esriDURadians:"radians"},rQ=Wt()(AL),iQ=Wt()(PL),sQ=Wt()(OL);var ai;let ge=ai=class extends G{static fromJSON(e){if(!e)return null;if((e==null?void 0:e.wkid)===102100)return ai.WebMercator;if((e==null?void 0:e.wkid)===4326)return ai.WGS84;const t=new ai;return t.read(e),t}constructor(e){super(e),this.latestWkid=null,this.wkid=null,this.wkt=null,this.wkt2=null,this.vcsWkid=null,this.latestVcsWkid=null,this.imageCoordinateSystem=null}normalizeCtorArgs(e){return e&&typeof e=="object"?e:{[typeof e=="string"?"wkt":"wkid"]:e}}get isWGS84(){return Oo(this)}get isWebMercator(){return Pi(this)}get isGeographic(){return $l(this)}get isWrappable(){return cL(this)}get metersPerUnit(){return Ni(this)}get unit(){return Go(this)||(this.isGeographic?"degrees":null)}writeWkt(e,t){this.wkid||(t.wkt=e)}clone(){if(this===ai.WGS84)return new ai(l3);if(this===ai.WebMercator)return new ai(u3);const e=new ai;return this.wkid!=null?(e.wkid=this.wkid,this.latestWkid!=null&&(e.latestWkid=this.latestWkid),this.vcsWkid!=null&&(e.vcsWkid=this.vcsWkid),this.latestVcsWkid!=null&&(e.latestVcsWkid=this.latestVcsWkid)):(this.wkt!=null&&(e.wkt=this.wkt),this.wkt2!=null&&(e.wkt2=this.wkt2)),this.imageCoordinateSystem&&(e.imageCoordinateSystem=C(this.imageCoordinateSystem)),e}equals(e){if(e==null)return!1;if(this.imageCoordinateSystem||e.imageCoordinateSystem){if(this.imageCoordinateSystem==null||e.imageCoordinateSystem==null)return!1;const{id:t,referenceServiceName:r}=e.imageCoordinateSystem,{geodataXform:i}=e.imageCoordinateSystem,s=this.imageCoordinateSystem;return t==null||i?JSON.stringify(s)===JSON.stringify(e.imageCoordinateSystem):r?s.id===t&&s.referenceServiceName===r:s.id===t}return ct(this,e)}toJSON(e){return this.write(void 0,e)}};ge.GCS_NAD_1927=null,ge.WGS84=null,ge.WebMercator=null,ge.PlateCarree=null,c([d({readOnly:!0})],ge.prototype,"isWGS84",null),c([d({readOnly:!0})],ge.prototype,"isWebMercator",null),c([d({readOnly:!0})],ge.prototype,"isGeographic",null),c([d({readOnly:!0})],ge.prototype,"isWrappable",null),c([d({type:$e,json:{write:!0}})],ge.prototype,"latestWkid",void 0),c([d({readOnly:!0})],ge.prototype,"metersPerUnit",null),c([d({readOnly:!0})],ge.prototype,"unit",null),c([d({type:$e,json:{write:!0,origins:{"web-scene":{write:{overridePolicy(){return{isRequired:this.wkt==null}}}}}}})],ge.prototype,"wkid",void 0),c([d({type:String,json:{origins:{"web-scene":{write:{overridePolicy(){return{isRequired:this.wkid==null}}}}}}})],ge.prototype,"wkt",void 0),c([ae("wkt"),ae("web-scene","wkt")],ge.prototype,"writeWkt",null),c([d({type:String,json:{write:!1}})],ge.prototype,"wkt2",void 0),c([d({type:$e,json:{write:!0}})],ge.prototype,"vcsWkid",void 0),c([d({type:$e,json:{write:!0}})],ge.prototype,"latestVcsWkid",void 0),c([d()],ge.prototype,"imageCoordinateSystem",void 0),ge=ai=c([S("esri.geometry.SpatialReference")],ge),ge.prototype.toJSON.isDefaultToJSON=!0,ge.GCS_NAD_1927=W.freeze(new ge({wkid:4267,wkt:'GEOGCS["GCS_North_American_1927",DATUM["D_North_American_1927",SPHEROID["Clarke_1866",6378206.4,294.9786982]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]]'})),ge.WGS84=W.freeze(new ge(l3)),ge.WebMercator=W.freeze(new ge(u3)),ge.PlateCarree=W.freeze(new ge(hL));const le=ge;function pe(e,t,r){let i,s;return t===void 0||Array.isArray(t)?(s=e,r=t,i=[void 0]):(s=t,i=Array.isArray(e)?e:[e]),(n,o)=>{const a=n.constructor.prototype;i.forEach(l=>{const h=lE(n,l,s);h.read&&typeof h.read=="object"||(h.read={}),h.read.reader=a[o],r&&(h.read.source=(h.read.source||[]).concat(r))})}}let li=class extends G{constructor(...t){super(...t),this.type=null,this.hasM=!1,this.hasZ=!1,this.spatialReference=le.WGS84}get cache(){return this.commitProperty("spatialReference"),{}}get extent(){return null}readSpatialReference(t,r){if(t instanceof le)return t;if(t!=null){const i=new le;return i.read(t,r),i}return t}clone(){return console.warn(".clone() is not implemented for "+this.declaredClass),null}clearCache(){this.notifyChange("cache")}getCacheValue(t){return this.cache[t]}setCacheValue(t,r){this.cache[t]=r}};c([d()],li.prototype,"type",void 0),c([d({readOnly:!0})],li.prototype,"cache",null),c([d({readOnly:!0})],li.prototype,"extent",null),c([d({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],li.prototype,"hasM",void 0),c([d({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],li.prototype,"hasZ",void 0),c([d({type:le,json:{write:!0},value:le.WGS84})],li.prototype,"spatialReference",void 0),c([pe("spatialReference")],li.prototype,"readSpatialReference",null),li=c([S("esri.geometry.Geometry")],li);const gs=li,CL=Object.prototype.toString;function IL(e){const t="__accessorMetadata__"in e?kt(e):e;return function(...r){if(r.push(t),typeof r[2]=="number")throw new Error("Using @cast has parameter decorator is not supported since 4.16");return RL.apply(this,r)}}function RL(e,t,r,i){bf(e,t).cast=i}function kL(e){return(t,r)=>{bf(t,e).cast=t[r]}}function rt(...e){if(e.length!==3||typeof e[1]!="string")return e.length===1&&CL.call(e[0])==="[object Function]"?IL(e[0]):e.length===1&&typeof e[0]=="string"?kL(e[0]):void 0}function ul(e){if(e&&typeof e=="object"&&"type"in e&&e.type==="mesh")throw new I("Mesh geometries are not supported for this operation")}function NL(e){e.forEach(ul)}const LL=57.29577951308232,DL=.017453292519943;function ub(e){return e*LL}function cb(e){return e*DL}function oQ(e){return Math.PI/2-2*Math.atan(Math.exp(-e/He.radius))}function Tg(e){return e.wkid!=null||e.wkt!=null}const km=[0,0];function kp(e,t,r,i,s){const n=e,o=s;if(o.spatialReference=r,"x"in n&&"x"in o)[o.x,o.y]=t(n.x,n.y,km,i);else if("xmin"in n&&"xmin"in o)[o.xmin,o.ymin]=t(n.xmin,n.ymin,km,i),[o.xmax,o.ymax]=t(n.xmax,n.ymax,km,i);else if("paths"in n&&"paths"in o||"rings"in n&&"rings"in o){const a="paths"in n?n.paths:n.rings,l=[];let h;for(let p=0;p<a.length;p++){const f=a[p];h=[],l.push(h);for(let m=0;m<f.length;m++)h.push(t(f[m][0],f[m][1],[0,0],i)),f[m].length>2&&h[m].push(f[m][2]),f[m].length>3&&h[m].push(f[m][3])}"paths"in o?o.paths=l:o.rings=l}else if("points"in n&&"points"in o){const a=n.points,l=[];for(let h=0;h<a.length;h++)l[h]=t(a[h][0],a[h][1],[0,0],i),a[h].length>2&&l[h].push(a[h][2]),a[h].length>3&&l[h].push(a[h][3]);o.points=l}return s}function md(e,t){const r=e&&(Tg(e)?e:e.spatialReference),i=t&&(Tg(t)?t:t.spatialReference);return!(e&&"type"in e&&e.type==="mesh"||t&&"type"in t&&t.type==="mesh"||!r||!i)&&(!!ct(i,r)||Pi(i)&&Oo(r)||Pi(r)&&Oo(i))}function Lf(e,t){if(e==null)return null;const r=e.spatialReference,i=t&&(Tg(t)?t:t.spatialReference);return md(r,i)?ct(r,i)?C(e):Pi(i)?kp(e,Ia,le.WebMercator,!1,C(e)):Oo(i)?kp(e,Df,le.WGS84,!1,C(e)):null:null}function Ia(e,t,r=[0,0]){t>89.99999?t=89.99999:t<-89.99999&&(t=-89.99999);const i=cb(t);return r[0]=cb(e)*He.radius,r[1]=He.halfSemiMajorAxis*Math.log((1+Math.sin(i))/(1-Math.sin(i))),r}function Df(e,t,r=[0,0],i=!1){if(e===Ec[0])r[0]=-180;else if(e===Ec[1])r[0]=180;else{const s=ub(e/He.radius);r[0]=i?s:s-360*Math.floor((s+180)/360)}return r[1]=ub(Math.PI/2-2*Math.atan(Math.exp(-t/He.radius))),r}function To(e,t=!1,r=C(e)){return ul(e),ul(r),kp(e,Ia,le.WebMercator,t,r)}function nu(e,t=!1,r=C(e)){return ul(e),ul(r),kp(e,Df,le.WGS84,t,r)}function g3(e,t){const r=e.x-t.x,i=e.y-t.y,s=e.z!=null&&t.z!=null?e.z-t.z:0;return Math.sqrt(r*r+i*i+s*s)}function FL(e){var t;return((t=_3(e,v3))==null?void 0:t[0])??null}function UL(e){var t;return((t=_3(e,v3))==null?void 0:t[1])??null}function _3({x:e,y:t,spatialReference:r},i=[0,0]){if(r){if(Pi(r))return Df(e,t,i);if($l(r))return i[0]=e,i[1]=t,i}return null}const v3=[0,0];var yd;const Nm=[0,0];function hb(e){return e&&(e.declaredClass==="esri.geometry.SpatialReference"||e.wkid!=null)}let Mt=yd=class extends gs{static copy(e,t){t._set("x",e._get("x")),t._set("y",e._get("y")),t._set("z",e._get("z")),t._set("m",e._get("m"));const r=e._get("spatialReference");t._set("spatialReference",W.isFrozen(r)?r:r.clone())}constructor(...e){super(...e),this.x=0,this.y=0,this.z=void 0,this.m=void 0,this.type="point"}normalizeCtorArgs(e,t,r,i,s){let n;if(Array.isArray(e))n=e,s=t,e=n[0],t=n[1],r=n[2],i=n[3];else if(e&&typeof e=="object"){if(n=e,e=n.x!=null?n.x:n.longitude,t=n.y!=null?n.y:n.latitude,r=n.z,i=n.m,(s=n.spatialReference)&&s.declaredClass!=="esri.geometry.SpatialReference"&&(s=new le(s)),n.longitude!=null||n.latitude!=null){if(n.longitude==null)U.getLogger(this).warn(".longitude=","Latitude was defined without longitude");else if(n.latitude==null)U.getLogger(this).warn(".latitude=","Longitude was defined without latitude");else if(!n.declaredClass&&(s!=null&&s.isWebMercator)){const a=Ia(n.longitude,n.latitude,Nm);e=a[0],t=a[1]}}}else hb(r)?(s=r,r=null):hb(i)&&(s=i,i=null);const o={x:e,y:t};return o.x==null&&o.y!=null?U.getLogger(this).warn(".y=","Y coordinate was defined without an X coordinate"):o.y==null&&o.x!=null&&U.getLogger(this).warn(".x=","X coordinate was defined without a Y coordinate"),s!=null&&(o.spatialReference=s),r!=null&&(o.z=r),i!=null&&(o.m=i),o}get cache(){return this.commitProperty("x"),this.commitProperty("y"),this.commitProperty("z"),this.commitProperty("m"),this.commitProperty("spatialReference"),{}}get hasM(){return this.m!==void 0}set hasM(e){e!==(this._get("m")!==void 0)&&(this._set("m",e?0:void 0),this._set("hasM",e))}get hasZ(){return this.z!==void 0}set hasZ(e){e!==(this._get("z")!==void 0)&&(this._set("z",e?0:void 0),this._set("hasZ",e))}get latitude(){return UL(this)}set latitude(e){const{spatialReference:t,x:r}=this;e!=null&&t&&(t.isWebMercator?this._set("y",Ia(r,e,Nm)[1]):t.isGeographic&&this._set("y",e),this._set("latitude",e))}get longitude(){return FL(this)}set longitude(e){const{y:t,spatialReference:r}=this;e!=null&&r&&(r.isWebMercator?this._set("x",Ia(e,t,Nm)[0]):r.isGeographic&&this._set("x",e),this._set("longitude",e))}writeX(e,t,r){t[r]=isNaN(e)?"NaN":e}readX(e){return typeof e=="string"?NaN:e}clone(){const e=new yd;return e.x=this.x,e.y=this.y,e.z=this.z,e.m=this.m,e.spatialReference=this.spatialReference,e}copy(e){return yd.copy(e,this),this}equals(e){if(e==null)return!1;const{x:t,y:r,z:i,m:s,spatialReference:n}=this,{z:o,m:a}=e;let{x:l,y:h,spatialReference:p}=e;if(!n.equals(p))if(n.isWebMercator&&p.isWGS84)[l,h]=Ia(l,h),p=n;else{if(!n.isWGS84||!p.isWebMercator)return!1;[l,h]=Df(l,h),p=n}return t===l&&r===h&&i===o&&s===a&&n.wkid===p.wkid}offset(e,t,r){return this.x+=e,this.y+=t,r!=null&&(this.z=(this.z??0)+r),this}normalize(){if(!this.spatialReference)return this;const e=Rt(this.spatialReference);if(!e)return this;let t=this.x;const[r,i]=e.valid,s=2*i;let n;return t>i?(n=Math.ceil(Math.abs(t-i)/s),t-=n*s):t<r&&(n=Math.ceil(Math.abs(t-r)/s),t+=n*s),this._set("x",t),this}distance(e){return g3(this,e)}toArray(){const e=this.hasZ,t=this.hasM;return e&&t?[this.x,this.y,this.z,this.m]:e?[this.x,this.y,this.z]:t?[this.x,this.y,this.m]:[this.x,this.y]}toJSON(e){return this.write({},e)}};c([d({readOnly:!0})],Mt.prototype,"cache",null),c([d({type:Boolean,json:{read:!1,write:{enabled:!1,overridePolicy:null}}})],Mt.prototype,"hasM",null),c([d({type:Boolean,json:{read:!1,write:{enabled:!1,overridePolicy:null}}})],Mt.prototype,"hasZ",null),c([d({type:Number})],Mt.prototype,"latitude",null),c([d({type:Number})],Mt.prototype,"longitude",null),c([d({type:Number,json:{type:[Number,String],write:{isRequired:!0,allowNull:!0}}}),rt(e=>isNaN(e)?e:ir(e))],Mt.prototype,"x",void 0),c([ae("x")],Mt.prototype,"writeX",null),c([pe("x")],Mt.prototype,"readX",null),c([d({type:Number,json:{write:!0}})],Mt.prototype,"y",void 0),c([d({type:Number,json:{write:{overridePolicy(){return{enabled:this.hasZ}}}}})],Mt.prototype,"z",void 0),c([d({type:Number,json:{write:{overridePolicy(){return{enabled:this.hasM}}}}})],Mt.prototype,"m",void 0),Mt=yd=c([S("esri.geometry.Point")],Mt),Mt.prototype.toJSON.isDefaultToJSON=!0;const re=Mt,Lm=[0,0];function th(e,t){return t!=null&&Ot(e,t.x,t.y,t.z)}function aQ(e,t){var r;if(!((r=t.points)!=null&&r.length))return!1;for(const i of t.points)if(!cl(e,i))return!1;return!0}function jL(e,t){const{xmin:r,ymin:i,zmin:s,xmax:n,ymax:o,zmax:a}=t;return e.hasZ&&t.hasZ?Ot(e,r,i,s)&&Ot(e,r,o,s)&&Ot(e,n,o,s)&&Ot(e,n,i,s)&&Ot(e,r,i,a)&&Ot(e,r,o,a)&&Ot(e,n,o,a)&&Ot(e,n,i,a):Ot(e,r,i)&&Ot(e,r,o)&&Ot(e,n,o)&&Ot(e,n,i)}function cl(e,t){return Ot(e,t[0],t[1])}function GL(e,t){return Ot(e,t[0],t[1],t[2])}function Ot(e,t,r,i){return t>=e.xmin&&t<=e.xmax&&r>=e.ymin&&r<=e.ymax&&(i==null||!e.hasZ||i>=e.zmin&&i<=e.zmax)}function N_(e,t){return Lm[1]=t.y,Lm[0]=t.x,zL(e,Lm)}function zL(e,t){return L_(e.rings,t)}function L_(e,t){if(!e)return!1;if(VL(e))return db(!1,e,t);let r=!1;for(let i=0,s=e.length;i<s;i++)r=db(r,e[i],t);return r}function VL(e){return!Array.isArray(e[0][0])}function db(e,t,r){const[i,s]=r;let n=e,o=0;for(let a=0,l=t.length;a<l;a++){o++,o===l&&(o=0);const[h,p]=t[a],[f,m]=t[o];(p<s&&m>=s||m<s&&p>=s)&&h+(s-p)/(m-p)*(f-h)<i&&(n=!n)}return n}function BL(e,t){return th(e,t)}function HL(e,t){const r=e.hasZ&&t.hasZ;let i,s,n;if(e.xmin<=t.xmin){if(i=t.xmin,e.xmax<i)return!1}else if(i=e.xmin,t.xmax<i)return!1;if(e.ymin<=t.ymin){if(s=t.ymin,e.ymax<s)return!1}else if(s=e.ymin,t.ymax<s)return!1;if(r&&t.hasZ){if(e.zmin<=t.zmin){if(n=t.zmin,e.zmax<n)return!1}else if(n=e.zmin,t.zmax<n)return!1}return!0}function qL(e,t){const{points:r,hasZ:i}=t,s=i?GL:cl;for(const n of r)if(s(e,n))return!0;return!1}const Co=[0,0],Io=[0,0],Ro=[0,0],ko=[0,0],WL=[Co,Io,Ro,ko],w3=[[Ro,Co],[Co,Io],[Io,ko],[ko,Ro]];function ZL(e,t){return JL(e,t.rings)}function JL(e,t){Co[0]=e.xmin,Co[1]=e.ymax,Io[0]=e.xmax,Io[1]=e.ymax,Ro[0]=e.xmin,Ro[1]=e.ymin,ko[0]=e.xmax,ko[1]=e.ymin;for(const r of WL)if(L_(t,r))return!0;for(const r of t){if(!r.length)continue;let i=r[0];if(cl(e,i))return!0;for(let s=1;s<r.length;s++){const n=r[s];if(cl(e,n)||b3(i,n,w3))return!0;i=n}}return!1}function YL(e,t){Co[0]=e.xmin,Co[1]=e.ymax,Io[0]=e.xmax,Io[1]=e.ymax,Ro[0]=e.xmin,Ro[1]=e.ymin,ko[0]=e.xmax,ko[1]=e.ymin;const r=t.paths;for(const i of r){if(!r.length)continue;let s=i[0];if(cl(e,s))return!0;for(let n=1;n<i.length;n++){const o=i[n];if(cl(e,o)||b3(s,o,w3))return!0;s=o}}return!1}const nt=[0,0];function KL(e){for(let t=0;t<e.length;t++){const r=e[t];for(let s=0;s<r.length-1;s++){const n=r[s],o=r[s+1];for(let a=t+1;a<e.length;a++)for(let l=0;l<e[a].length-1;l++){const h=e[a][l],p=e[a][l+1];if($g(n,o,h,p,nt)&&!(nt[0]===n[0]&&nt[1]===n[1]||nt[0]===h[0]&&nt[1]===h[1]||nt[0]===o[0]&&nt[1]===o[1]||nt[0]===p[0]&&nt[1]===p[1]))return!0}}const i=r.length;if(!(i<=4))for(let s=0;s<i-3;s++){let n=i-1;s===0&&(n=i-2);const o=r[s],a=r[s+1];for(let l=s+2;l<n;l++){const h=r[l],p=r[l+1];if($g(o,a,h,p,nt)&&!(nt[0]===o[0]&&nt[1]===o[1]||nt[0]===h[0]&&nt[1]===h[1]||nt[0]===a[0]&&nt[1]===a[1]||nt[0]===p[0]&&nt[1]===p[1]))return!0}}}return!1}function b3(e,t,r){for(let i=0;i<r.length;i++)if($g(e,t,r[i][0],r[i][1]))return!0;return!1}function $g(e,t,r,i,s){const[n,o]=e,[a,l]=t,[h,p]=r,[f,m]=i,y=f-h,_=n-h,v=a-n,w=m-p,b=o-p,M=l-o,$=w*v-y*M;if($===0)return!1;const E=(y*b-w*_)/$,P=(v*b-M*_)/$;return E>=0&&E<=1&&P>=0&&P<=1&&(s&&(s[0]=n+E*(a-n),s[1]=o+E*(l-o)),!0)}function XL(e){switch(e){case"esriGeometryEnvelope":case"extent":return HL;case"esriGeometryMultipoint":case"multipoint":return qL;case"esriGeometryPoint":case"point":return BL;case"esriGeometryMultiPatch":case"multipatch":case"esriGeometryPolygon":case"polygon":return ZL;case"esriGeometryPolyline":case"polyline":return YL}}var Gr;function QL(e){return e&&(e.declaredClass==="esri.geometry.SpatialReference"||e.wkid!=null)}function $s(e,t,r){return t==null?r:r==null?t:e(t,r)}let Xe=Gr=class extends gs{constructor(...e){super(...e),this.type="extent",this.xmin=0,this.ymin=0,this.mmin=void 0,this.zmin=void 0,this.xmax=0,this.ymax=0,this.mmax=void 0,this.zmax=void 0}normalizeCtorArgs(e,t,r,i,s){return QL(e)?{spatialReference:e,xmin:0,ymin:0,xmax:0,ymax:0}:typeof e=="object"?(e.spatialReference=e.spatialReference==null?le.WGS84:e.spatialReference,e):{xmin:e,ymin:t,xmax:r,ymax:i,spatialReference:s??le.WGS84}}static fromPoint(e){return new Gr({xmin:e.x,ymin:e.y,zmin:e.z,xmax:e.x,ymax:e.y,zmax:e.z,spatialReference:e.spatialReference})}get cache(){return this.commitProperty("xmin"),this.commitProperty("ymin"),this.commitProperty("zmin"),this.commitProperty("mmin"),this.commitProperty("xmax"),this.commitProperty("ymax"),this.commitProperty("zmax"),this.commitProperty("mmax"),this.commitProperty("spatialReference"),{}}get center(){const e=new re({x:.5*(this.xmin+this.xmax),y:.5*(this.ymin+this.ymax),spatialReference:this.spatialReference});return this.hasZ&&(e.z=.5*(this.zmin+this.zmax)),this.hasM&&(e.m=.5*(this.mmin+this.mmax)),e}get extent(){return this.clone()}get hasM(){return this.mmin!=null&&this.mmax!=null}get hasZ(){return this.zmin!=null&&this.zmax!=null}get height(){return Math.abs(this.ymax-this.ymin)}get width(){return Math.abs(this.xmax-this.xmin)}centerAt(e){const t=this.center;return e.z!=null&&this.hasZ?this.offset(e.x-t.x,e.y-t.y,e.z-t.z):this.offset(e.x-t.x,e.y-t.y)}clone(){const e=new Gr;return e.xmin=this.xmin,e.ymin=this.ymin,e.xmax=this.xmax,e.ymax=this.ymax,e.spatialReference=this.spatialReference,this.zmin!=null&&(e.zmin=this.zmin,e.zmax=this.zmax),this.mmin!=null&&(e.mmin=this.mmin,e.mmax=this.mmax),e}contains(e){if(!e)return!1;const t=this.spatialReference,r=e.spatialReference;return t&&r&&!t.equals(r)&&md(t,r)&&(e=t.isWebMercator?To(e):nu(e,!0)),e.type==="point"?th(this,e):e.type==="extent"&&jL(this,e)}equals(e){if(this===e)return!0;if(e==null)return!1;const t=this.spatialReference,r=e.spatialReference;return t&&r&&!t.equals(r)&&md(t,r)&&(e=t.isWebMercator?To(e):nu(e,!0)),this.xmin===e.xmin&&this.ymin===e.ymin&&this.zmin===e.zmin&&this.mmin===e.mmin&&this.xmax===e.xmax&&this.ymax===e.ymax&&this.zmax===e.zmax&&this.mmax===e.mmax}expand(e){const t=.5*(1-e),r=this.width*t,i=this.height*t;if(this.xmin+=r,this.ymin+=i,this.xmax-=r,this.ymax-=i,this.hasZ){const s=(this.zmax-this.zmin)*t;this.zmin+=s,this.zmax-=s}if(this.hasM){const s=(this.mmax-this.mmin)*t;this.mmin+=s,this.mmax-=s}return this}intersects(e){if(e==null)return!1;e.type==="mesh"&&(e=e.extent);const t=this.spatialReference,r=e.spatialReference;return t&&r&&!ct(t,r)&&md(t,r)&&(e=t.isWebMercator?To(e):nu(e,!0)),XL(e.type)(this,e)}normalize(){const e=this._normalize(!1,!0);return Array.isArray(e)?e:[e]}offset(e,t,r){return this.xmin+=e,this.ymin+=t,this.xmax+=e,this.ymax+=t,r!=null&&(this.zmin+=r,this.zmax+=r),this}shiftCentralMeridian(){return this._normalize(!0)}union(e){return this===e||(this.xmin=Math.min(this.xmin,e.xmin),this.ymin=Math.min(this.ymin,e.ymin),this.xmax=Math.max(this.xmax,e.xmax),this.ymax=Math.max(this.ymax,e.ymax),(this.hasZ||e.hasZ)&&(this.zmin=$s(Math.min,this.zmin,e.zmin),this.zmax=$s(Math.max,this.zmax,e.zmax)),(this.hasM||e.hasM)&&(this.mmin=$s(Math.min,this.mmin,e.mmin),this.mmax=$s(Math.max,this.mmax,e.mmax))),this}intersection(e){return this===e?this:e!=null&&this.intersects(e)?(this.xmin=Math.max(this.xmin,e.xmin),this.ymin=Math.max(this.ymin,e.ymin),this.xmax=Math.min(this.xmax,e.xmax),this.ymax=Math.min(this.ymax,e.ymax),(this.hasZ||e.hasZ)&&(this.zmin=$s(Math.max,this.zmin,e.zmin),this.zmax=$s(Math.min,this.zmax,e.zmax)),(this.hasM||e.hasM)&&(this.mmin=$s(Math.max,this.mmin,e.mmin),this.mmax=$s(Math.min,this.mmax,e.mmax)),this):null}toJSON(e){return this.write({},e)}_shiftCM(e=Rt(this.spatialReference)){if(!e||!this.spatialReference)return this;const t=this.spatialReference,r=this._getCM(e);if(r){const i=t.isWebMercator?nu(r):r;this.xmin-=r.x,this.xmax-=r.x,t.isWebMercator||(i.x=Dm(i.x,e).x),this.spatialReference=new le(r_((t.isWGS84?e.altTemplate:null)??e.wkTemplate,{Central_Meridian:i.x}))}return this}_getCM(e){let t=null;const[r,i]=e.valid,s=this.xmin,n=this.xmax;return s>=r&&s<=i&&n>=r&&n<=i||(t=this.center),t}_normalize(e,t,r){const i=this.spatialReference;if(!i)return this;const s=r??Rt(i);if(s==null)return this;const n=this._getParts(s).map(l=>l.extent);if(n.length<2)return n[0]||this;if(n.length>2)return e?this._shiftCM(s):this.set({xmin:s.valid[0],xmax:s.valid[1]});if(e)return this._shiftCM(s);if(t)return n;let o=!0,a=!0;return n.forEach(l=>{l.hasZ||(o=!1),l.hasM||(a=!1)}),{rings:n.map(l=>{const h=[[l.xmin,l.ymin],[l.xmin,l.ymax],[l.xmax,l.ymax],[l.xmax,l.ymin],[l.xmin,l.ymin]];if(o){const p=(l.zmax-l.zmin)/2;for(let f=0;f<h.length;f++)h[f].push(p)}if(a){const p=(l.mmax-l.mmin)/2;for(let f=0;f<h.length;f++)h[f].push(p)}return h}),hasZ:o,hasM:a,spatialReference:i}}_getParts(e){let t=this.cache._parts;if(!t){t=[];const{ymin:s,ymax:n,spatialReference:o}=this,a=this.width,l=this.xmin,h=this.xmax;let p;e=e||Rt(o);const[f,m]=e.valid;p=Dm(this.xmin,e);const y=p.x,_=p.frameId;p=Dm(this.xmax,e);const v=p.x,w=p.frameId,b=y===v&&a>0;if(a>2*m){const M=new Gr(l<h?y:v,s,m,n,o),$=new Gr(f,s,l<h?v:y,n,o),E=new Gr(0,s,m,n,o),P=new Gr(f,s,0,n,o),O=[],L=[];M.contains(E)&&O.push(_),M.contains(P)&&L.push(_),$.contains(E)&&O.push(w),$.contains(P)&&L.push(w);for(let k=_+1;k<w;k++)O.push(k),L.push(k);t.push({extent:M,frameIds:[_]},{extent:$,frameIds:[w]},{extent:E,frameIds:O},{extent:P,frameIds:L})}else y>v||b?t.push({extent:new Gr(y,s,m,n,o),frameIds:[_]},{extent:new Gr(f,s,v,n,o),frameIds:[w]}):t.push({extent:new Gr(y,s,v,n,o),frameIds:[_]});this.cache._parts=t}const r=this.hasZ,i=this.hasM;if(r||i){const s={};r&&(s.zmin=this.zmin,s.zmax=this.zmax),i&&(s.mmin=this.mmin,s.mmax=this.mmax);for(let n=0;n<t.length;n++)t[n].extent.set(s)}return t}};function Dm(e,t){const[r,i]=t.valid,s=2*i;let n,o=0;return e>i?(n=Math.ceil(Math.abs(e-i)/s),e-=n*s,o=n):e<r&&(n=Math.ceil(Math.abs(e-r)/s),e+=n*s,o=-n),{x:e,frameId:o}}c([d({readOnly:!0})],Xe.prototype,"cache",null),c([d({readOnly:!0})],Xe.prototype,"center",null),c([d({readOnly:!0})],Xe.prototype,"extent",null),c([d({readOnly:!0,json:{write:{enabled:!1,overridePolicy:null}}})],Xe.prototype,"hasM",null),c([d({readOnly:!0,json:{write:{enabled:!1,overridePolicy:null}}})],Xe.prototype,"hasZ",null),c([d({readOnly:!0})],Xe.prototype,"height",null),c([d({readOnly:!0})],Xe.prototype,"width",null),c([d({type:Number,json:{type:[Number,String],write:{enabled:!0,allowNull:!0}}})],Xe.prototype,"xmin",void 0),c([d({type:Number,json:{write:!0}})],Xe.prototype,"ymin",void 0),c([d({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy(){return{enabled:this.hasM}}}}})],Xe.prototype,"mmin",void 0),c([d({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy(){return{enabled:this.hasZ}}}}})],Xe.prototype,"zmin",void 0),c([d({type:Number,json:{write:!0}})],Xe.prototype,"xmax",void 0),c([d({type:Number,json:{write:!0}})],Xe.prototype,"ymax",void 0),c([d({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy(){return{enabled:this.hasM}}}}})],Xe.prototype,"mmax",void 0),c([d({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy(){return{enabled:this.hasZ}}}}})],Xe.prototype,"zmax",void 0),Xe=Gr=c([S("esri.geometry.Extent")],Xe),Xe.prototype.toJSON.isDefaultToJSON=!0;const De=Xe;let ec;var l$,u$;const e5=((l$=globalThis.esriConfig)==null?void 0:l$.locale)??((u$=globalThis.dojoConfig)==null?void 0:u$.locale);var c$;const tc=(c$=globalThis.document)==null?void 0:c$.documentElement;function S3(){var r;const e=tc==null?void 0:tc.getAttribute("lang"),t=(r=globalThis.navigator)==null?void 0:r.language;return e5??e??t??"en"}function Bt(){return ec===void 0&&(ec=S3()),ec}function lQ(e=Bt()){const t=/^([a-zA-Z]{2,3})(?:[_-][a-zA-Z0-9]+)*$/.exec(e);return t==null?void 0:t[1].toLowerCase()}const gd=[];function T3(e){return gd.push(e),ce(()=>gd.splice(gd.indexOf(e),1))}const _d=[];function D_(e){return _d.push(e),ce(()=>_d.splice(_d.indexOf(e),1))}function pb(){const e=S3();ec!==e&&([..._d].forEach(t=>t(e)),ec=e,[...gd].forEach(t=>t(e)))}var h$;(h$=globalThis.addEventListener)==null||h$.call(globalThis,"languagechange",pb),tc&&new MutationObserver(()=>{pb()}).observe(tc,{attributeFilter:["lang"]});let Eh;function t5(e){return Eh&&!Eh.destroyed||(Eh=e()),Eh}var Eg;const r5=new it({avgRating:"avg-rating",numRatings:"num-ratings",numComments:"num-comments",numViews:"num-views"});let fr=Eg=class extends W{constructor(e){super(e),this.categories=null,this.disableExtraQuery=!1,this.extent=null,this.filter=null,this.num=10,this.query=null,this.sortField=null,this.start=1}get sortOrder(){return this._get("sortOrder")||"asc"}set sortOrder(e){e!=="asc"&&e!=="desc"||this._set("sortOrder",e)}clone(){return new Eg({categories:this.categories?C(this.categories):null,disableExtraQuery:this.disableExtraQuery,extent:this.extent?this.extent.clone():null,filter:this.filter,num:this.num,query:this.query,sortField:this.sortField,sortOrder:this.sortOrder,start:this.start})}toRequestOptions(e,t){let r=[];this.categories&&(r=this.categories.map(o=>Array.isArray(o)?JSON.stringify(o):o));let i="";if(this.extent){const o=Lf(this.extent,le.WGS84);o!=null&&(i=`${o.xmin},${o.ymin},${o.xmax},${o.ymax}`)}let s=this.query;!this.disableExtraQuery&&e.extraQuery&&(s="("+s+")"+e.extraQuery);const n={categories:r,bbox:i,q:s,filter:this.filter,num:this.num,sortField:null,sortOrder:null,start:this.start};return this.sortField&&(n.sortField=this.sortField.split(",").map(o=>r5.toJSON(o.trim())).join(","),n.sortOrder=this.sortOrder),{query:{...t,...n}}}};c([d()],fr.prototype,"categories",void 0),c([d()],fr.prototype,"disableExtraQuery",void 0),c([d({type:De})],fr.prototype,"extent",void 0),c([d()],fr.prototype,"filter",void 0),c([d()],fr.prototype,"num",void 0),c([d()],fr.prototype,"query",void 0),c([d()],fr.prototype,"sortField",void 0),c([d()],fr.prototype,"sortOrder",null),c([d()],fr.prototype,"start",void 0),fr=Eg=c([S("esri.portal.PortalQueryParams")],fr);const $i=fr;var Mg;let Ze=Mg=class extends G{constructor(e){super(e),this.access=null,this.created=null,this.description=null,this.id=null,this.isInvitationOnly=!1,this.modified=null,this.owner=null,this.portal=null,this.snippet=null,this.sortField=null,this.sortOrder=null,this.sourceJSON=null,this.tags=null,this.title=null}get thumbnailUrl(){var r;const e=this.url,t=this.thumbnail;return e&&t&&this.portal?(r=this.portal)==null?void 0:r.normalizeUrl(`${e}/info/${t}?f=json`):null}get url(){var t;const e=(t=this.portal)==null?void 0:t.restUrl;return e?e+"/community/groups/"+this.id:null}fetchCategorySchema(e){return this.portal.request(this.url+"/categorySchema",e).then(t=>{const r=t.categorySchema||[];return r.some(i=>i.source==="contentCategorySetsGroupQuery.LivingAtlas")?this._fetchCategorySchemaSet("LivingAtlas",e):r})}fetchMembers(e){return this.portal.request(this.url+"/users",e)}getThumbnailUrl(e){let t=this.thumbnailUrl;return t&&e&&(t+=`&w=${e}`),t}toJSON(){throw new I("internal:not-yet-implemented","PortalGroup.toJSON is not yet implemented")}static fromJSON(e){if(!e)return null;if(e.declaredClass)throw new Error("JSON object is already hydrated");const t=new Mg({sourceJSON:e});return t.read(e),t}queryItems(e,t){let r=kt($i,e);const i=this.portal;return parseFloat(i.currentVersion)>5?(r=r||new $i,i.queryPortal(`/content/groups/${this.id}/search`,r,"PortalItem",t)):(r=r?r.clone():new $i,r.query="group:"+this.id+(r.query?" "+r.query:""),i.queryItems(r,t))}_fetchCategorySchemaSet(e,t){const r=this.portal;return r.fetchSelf(r.authMode,!0,t).then(i=>{const s=i.contentCategorySetsGroupQuery;if(s){const n=new $i({disableExtraQuery:!0,num:1,query:s});return r.queryGroups(n,t)}throw new I("portal-group:fetchCategorySchema","contentCategorySetsGroupQuery value not found")}).then(i=>{if(i.total){const s=i.results[0],n=new $i({num:1,query:`typekeywords:"${e}"`});return s.queryItems(n,t)}throw new I("portal-group:fetchCategorySchema","contentCategorySetsGroupQuery group not found")}).then(i=>i.total?i.results[0].fetchData("json",t).then(s=>{const n=s==null?void 0:s.categorySchema;return n!=null&&n.length?n:[]}):[])}};c([d()],Ze.prototype,"access",void 0),c([d({type:Date})],Ze.prototype,"created",void 0),c([d()],Ze.prototype,"description",void 0),c([d()],Ze.prototype,"id",void 0),c([d()],Ze.prototype,"isInvitationOnly",void 0),c([d({type:Date})],Ze.prototype,"modified",void 0),c([d()],Ze.prototype,"owner",void 0),c([d()],Ze.prototype,"portal",void 0),c([d()],Ze.prototype,"snippet",void 0),c([d()],Ze.prototype,"sortField",void 0),c([d()],Ze.prototype,"sortOrder",void 0),c([d()],Ze.prototype,"sourceJSON",void 0),c([d()],Ze.prototype,"tags",void 0),c([d()],Ze.prototype,"thumbnail",void 0),c([d({readOnly:!0})],Ze.prototype,"thumbnailUrl",null),c([d()],Ze.prototype,"title",void 0),c([d({readOnly:!0})],Ze.prototype,"url",null),Ze=Mg=c([S("esri.portal.PortalGroup")],Ze);const xg=Ze;let jn=class extends W{constructor(t){super(t),this.nextQueryParams=null,this.queryParams=null,this.results=null,this.total=null}};c([d()],jn.prototype,"nextQueryParams",void 0),c([d()],jn.prototype,"queryParams",void 0),c([d()],jn.prototype,"results",void 0),c([d()],jn.prototype,"total",void 0),jn=c([S("esri.portal.PortalQueryResult")],jn);const i5=jn;let Vi=class extends G{constructor(t){super(t),this.created=null,this.id=null,this.portal=null,this.title=null,this.username=null}get url(){var r;const t=(r=this.portal)==null?void 0:r.restUrl;return t?`${t}/content/users/${this.username}/${this.id}`:null}toJSON(){throw new I("internal:not-yet-implemented","PortalFolder.toJSON is not yet implemented")}};c([d({type:Date})],Vi.prototype,"created",void 0),c([d()],Vi.prototype,"id",void 0),c([d()],Vi.prototype,"portal",void 0),c([d()],Vi.prototype,"title",void 0),c([d({readOnly:!0})],Vi.prototype,"url",null),c([d()],Vi.prototype,"username",void 0),Vi=c([S("esri.portal.PortalFolder")],Vi);const s5=Vi;var Ag;let Te=Ag=class extends G{constructor(e){super(e),this.access=null,this.created=null,this.culture=null,this.description=null,this.email=null,this.fullName=null,this.modified=null,this.orgId=null,this.portal=null,this.preferredView=null,this.privileges=null,this.region=null,this.role=null,this.roleId=null,this.sourceJSON=null,this.units=null,this.username=null,this.userLicenseTypeId=null,this.userType=null}get thumbnailUrl(){const e=this.url,t=this.thumbnail;return e&&t?this.portal.normalizeUrl(`${e}/info/${t}?f=json`):null}get userContentUrl(){var t;const e=(t=this.portal)==null?void 0:t.restUrl;return e?`${e}/content/users/${this.username}`:null}get url(){var t;const e=(t=this.portal)==null?void 0:t.restUrl;return e?`${e}/community/users/${this.username}`:null}addItem(e){const t=e&&e.item,r=e==null?void 0:e.data,i=e==null?void 0:e.folder,s={method:"post"};t&&(s.query=t.createPostQuery(),r!=null&&(typeof r=="string"?s.query.text=r:typeof r=="object"&&(s.query.text=JSON.stringify(r))));let n=this.userContentUrl;return i&&(n+="/"+(typeof i=="string"?i:i.id)),this.portal.request(n+"/addItem",s).then(o=>(t.id=o.id,t.portal=this.portal,t.loaded?t.reload():t.load()))}async deleteItem(e,t=!1){let r=this.userContentUrl;e.ownerFolder&&(r+="/"+e.ownerFolder);const i=t?{permanentDelete:!0}:{};await this.portal.request(r+`/items/${e.id}/delete`,{method:"post",query:i}),e.id=null,e.portal=null}async deleteItems(e,t=!1){e=e.slice();const r=this.userContentUrl+"/deleteItems",i=[],s=e.map(n=>n.id);if(s.length){const n={method:"post",query:{items:s.join(","),permanentDelete:t}},o=await this.portal.request(r,n);for(const a of o.results){const l=e.find(f=>a.itemId===f.id),h=a.success;let p=null;h?(l.id=null,l.portal=null):a.error&&(p=new I("portal:delete-item-failed",a.error.message,a.error)),i.push({item:l,success:h,error:p})}}return i}fetchFolders(){const e={query:{num:1}};return this.portal.request(this.userContentUrl??"",e).then(t=>{let r;return r=t&&t.folders?t.folders.map(i=>{const s=s5.fromJSON(i);return s.portal=this.portal,s}):[],r})}fetchGroups(){return this.portal.request(this.url??"").then(e=>{let t;return t=e&&e.groups?e.groups.map(r=>{const i=xg.fromJSON(r);return i.portal=this.portal,i}):[],t})}async fetchItems(e){e??(e={});let t=this.userContentUrl??"";e.folder&&(t+="/"+e.folder.id);const{default:r}=await N(()=>Promise.resolve().then(()=>M3),void 0),i={folders:!1,inRecycleBin:!!e.inRecycleBin||null,foldersContent:!(e.folder||!e.includeSubfolderItems)||null,num:e.num||10,start:e.start||1,sortField:e.sortField||"created",sortOrder:e.sortOrder||"asc"},s=await this.portal.request(t,{query:i});let n;return s!=null&&s.items?(n=s.items.map(o=>{const a=r.fromJSON(o);return a.portal=this.portal,a}),await Promise.all(n.map(o=>o.load())),{items:n,nextStart:s.nextStart,total:s.total}):{items:[],nextStart:-1,total:0}}fetchTags(){return this.portal.request(this.url+"/tags").then(e=>e.tags)}getThumbnailUrl(e){let t=this.thumbnailUrl;return t&&e&&(t+=`&w=${e}`),t}queryFavorites(e){return this.favGroupId?(this._favGroup||(this._favGroup=new xg({id:this.favGroupId,portal:this.portal})),this._favGroup.queryItems(e)):Promise.reject(new I("internal:unknown","Unknown internal error",{internalError:"Unknown favGroupId"}))}async restoreItem(e,t){const r=this.userContentUrl,i=t?{folderID:typeof t=="string"?t:t.id}:null;await this.portal.request(r+`/items/${e.id}/restore`,{method:"post",query:i})}toJSON(){throw new I("internal:not-yet-implemented","PortalUser.toJSON is not yet implemented")}static fromJSON(e){if(!e)return null;if(e.declaredClass)throw new Error("JSON object is already hydrated");const t=new Ag({sourceJSON:e});return t.read(e),t}};c([d()],Te.prototype,"access",void 0),c([d({type:Date})],Te.prototype,"created",void 0),c([d()],Te.prototype,"culture",void 0),c([d()],Te.prototype,"description",void 0),c([d()],Te.prototype,"email",void 0),c([d()],Te.prototype,"favGroupId",void 0),c([d()],Te.prototype,"fullName",void 0),c([d({type:Date})],Te.prototype,"modified",void 0),c([d()],Te.prototype,"orgId",void 0),c([d()],Te.prototype,"portal",void 0),c([d()],Te.prototype,"preferredView",void 0),c([d()],Te.prototype,"privileges",void 0),c([d()],Te.prototype,"region",void 0),c([d()],Te.prototype,"role",void 0),c([d()],Te.prototype,"roleId",void 0),c([d()],Te.prototype,"sourceJSON",void 0),c([d()],Te.prototype,"thumbnail",void 0),c([d({readOnly:!0})],Te.prototype,"thumbnailUrl",null),c([d()],Te.prototype,"units",void 0),c([d({readOnly:!0})],Te.prototype,"userContentUrl",null),c([d({readOnly:!0})],Te.prototype,"url",null),c([d()],Te.prototype,"username",void 0),c([d()],Te.prototype,"userLicenseTypeId",void 0),c([d()],Te.prototype,"userType",void 0),Te=Ag=c([S("esri.portal.PortalUser")],Te);const $3=Te;var Kt;let kl;const fb={PortalGroup:()=>Promise.resolve({default:xg}),PortalItem:()=>N(()=>Promise.resolve().then(()=>M3),void 0),PortalUser:()=>Promise.resolve({default:$3})};let R=Kt=class extends G.JSONSupportMixin(yn){constructor(e){super(e),this._esriIdCredentialCreateHandle=null,this.access=null,this.allSSL=!1,this.authMode="auto",this.authorizedCrossOriginDomains=null,this.basemapGalleryGroupQuery=null,this.basemapGalleryGroupQuery3D=null,this.bingKey=null,this.canListApps=!1,this.canListData=!1,this.canListPreProvisionedItems=!1,this.canProvisionDirectPurchase=!1,this.canSearchPublic=!0,this.canShareBingPublic=!1,this.canSharePublic=!1,this.canSignInArcGIS=!1,this.canSignInIDP=!1,this.colorSetsGroupQuery=null,this.commentsEnabled=!1,this.created=null,this.culture=null,this.customBaseUrl=null,this.default3DBasemapQuery=null,this.defaultBasemap=null,this.defaultDevBasemap=null,this.defaultExtent=null,this.defaultVectorBasemap=null,this.description=null,this.devBasemapGalleryGroupQuery=null,this.eueiEnabled=null,this.featuredGroups=null,this.featuredItemsGroupQuery=null,this.galleryTemplatesGroupQuery=null,this.layoutGroupQuery=null,this.livingAtlasGroupQuery=null,this.hasCategorySchema=!1,this.hasClassificationSchema=!1,this.helperServices=null,this.homePageFeaturedContent=null,this.homePageFeaturedContentCount=null,this.httpPort=null,this.httpsPort=null,this.id=null,this.ipCntryCode=null,this.isPortal=!1,this.isReadOnly=!1,this.layerTemplatesGroupQuery=null,this.maxTokenExpirationMinutes=null,this.modified=null,this.name=null,this.portalHostname=null,this.portalMode=null,this.portalProperties=null,this.region=null,this.recycleBinEnabled=!1,this.rotatorPanels=null,this.showHomePageDescription=!1,this.sourceJSON=null,this.supportsHostedServices=!1,this.symbolSetsGroupQuery=null,this.templatesGroupQuery=null,this.units=null,this.url=ye.portalUrl,this.urlKey=null,this.user=null,this.use3dBasemaps=!0,this.useDefault3dBasemap=!1,this.useStandardizedQuery=!1,this.useVectorBasemaps=!1,this.vectorBasemapGalleryGroupQuery=null}normalizeCtorArgs(e){return typeof e=="string"?{url:e}:e}destroy(){mb.unregister(this),this.defaultBasemap=Ne(this.defaultBasemap),this.defaultDevBasemap=Ne(this.defaultDevBasemap),this.defaultVectorBasemap=Ne(this.defaultVectorBasemap),this._esriIdCredentialCreateHandle=Ie(this._esriIdCredentialCreateHandle)}readAuthorizedCrossOriginDomains(e){if(e)for(const t of e)ye.request.trustedServers.includes(t)||ye.request.trustedServers.push(t);return e}readDefaultBasemap(e){return this._readBasemap(e)}readDefaultDevBasemap(e){return this._readBasemap(e)}readDefaultVectorBasemap(e){return this._readBasemap(e)}get extraQuery(){var r;const e=(r=this.user)==null?void 0:r.orgId,t=!e||this.canSearchPublic;return this.id&&!t?` AND orgid:${this.id}`:null}get hasAPIKey(){return GE(this.url)}get isOrganization(){return!!this.access}get itemPageUrl(){return this.url?`${this.url}/home/item.html`:null}get restUrl(){let e=this.url;if(e){const t=e.indexOf("/sharing");e=t>0?e.slice(0,t):this.url.replace(/\/+$/,""),e+="/sharing/rest"}return e}get thumbnailUrl(){const e=this.restUrl,t=this.thumbnail;return e&&t?this._normalizeSSL(e+"/portals/self/resources/"+t):null}readUrlKey(e){return e&&e.toLowerCase()}readUser(e){let t=null;return e&&(t=$3.fromJSON(e),t.portal=this),t}load(e){const t=N(()=>Promise.resolve().then(()=>ZD),void 0).then(({default:r})=>{Be(e),kl=r}).then(()=>this.sourceJSON?this.sourceJSON:this.fetchSelf(this.authMode,!1,e)).then(r=>{var i;if(!this.hasAPIKey&&ve){const s=ve;this.credential=s.findCredential(this.restUrl),this.credential||this.authMode!==Kt.AUTH_MODE_AUTO&&this.authMode!==Kt.AUTH_MODE_NO_PROMPT||((i=this._esriIdCredentialCreateHandle)==null||i.remove(),this._esriIdCredentialCreateHandle=s.on("credential-create",n5(new WeakRef(this))),mb.register(this,this._esriIdCredentialCreateHandle,this))}this.sourceJSON=r,this.read(r)});return this.addResolvingPromise(t),Promise.resolve(this)}async createElevationLayers(){await this.load();const e=this._getHelperService("defaultElevationLayers"),t=(await N(async()=>{const{default:r}=await import("./ElevationLayer-DqS5GhVz.js");return{default:r}},__vite__mapDeps([4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21]))).default;return e?e.map(r=>new t({id:r.id,url:r.url})):[]}async fetchBasemaps(e,t){const r=await this._fetchBasemaps(e,t);if((t==null?void 0:t.include3d)===!0&&this.use3dBasemaps!==!1){const i=await this._fetchBasemaps3D(e,t);r.unshift(...i)}return r}async fetchDefault3DBasemap(e){if(!this.useDefault3dBasemap||!this.default3DBasemapQuery||this.default3DBasemapQuery==="none")return null;const t=new $i;t.query=this.default3DBasemapQuery,t.disableExtraQuery=!0;const r=(await this.queryItems(t,e)).results.find(i=>i.type==="Web Scene");return r?new kl({portalItem:r}):null}fetchCategorySchema(e){return this.hasCategorySchema?this.request(this.restUrl+"/portals/self/categorySchema",e).then(t=>t.categorySchema):ur(e)?Promise.reject(Ee()):Promise.resolve([])}async fetchClassificationSchema(e){return this.hasClassificationSchema?this.request(this.restUrl+"/portals/self/classification/classificationSchema",e).then(t=>t.classificationSchema):null}fetchFeaturedGroups(e){const t=this.featuredGroups,r=new $i({num:100,sortField:"title"});if(t!=null&&t.length){const i=[];for(const s of t)i.push(`(title:"${s.title}" AND owner:${s.owner})`);return r.query=i.join(" OR "),this.queryGroups(r,e).then(s=>s.results)}return ur(e)?Promise.reject(Ee()):Promise.resolve([])}fetchRegions(e){var r;const t=((r=this.user)==null?void 0:r.culture)||this.culture||Bt();return this.request(this.restUrl+"/portals/regions",{...e,query:{culture:t}})}fetchSettings(e){var r;const t=((r=this.user)==null?void 0:r.culture)||this.culture||Bt();return this.request(this.restUrl+"/portals/self/settings",{...e,query:{culture:t}})}static getDefault(){return t5(()=>new Kt)}queryGroups(e,t){return this.queryPortal("/community/groups",e,"PortalGroup",t)}queryItems(e,t){return this.queryPortal("/search",e,"PortalItem",t)}queryUsers(e,t){return e.sortField||(e.sortField="username"),this.queryPortal("/community/users",e,"PortalUser",t)}fetchSelf(e=this.authMode,t=!1,r){const i=this.restUrl+"/portals/self",s={authMode:e,query:{culture:Bt().toLowerCase()},withCredentials:!0,...r};return s.authMode==="auto"&&(s.authMode="no-prompt"),t&&(s.query.default=!0),this.request(i,s)}queryPortal(e,t,r,i){const s=kt($i,t),n=o=>this.request(this.restUrl+e,{...s.toRequestOptions(this),...i}).then(a=>{const l=s.clone();return l.start=a.nextStart,new i5({nextQueryParams:l,queryParams:s,total:a.total,results:Kt._resultsToTypedArray(o,{portal:this},a,i)})}).then(a=>Promise.all(a.results.map(l=>typeof l.when=="function"?l.when():a)).then(()=>a,l=>(W$(l),a)));return r&&fb[r]?fb[r]().then(({default:o})=>(Be(i),n(o))):n()}signIn(){if(this.hasAPIKey)return this.load().then(()=>{if(!this.user)throw new I("portal:not-authenticated","Unable to authenticate user. Portal.user is missing")});if(this.authMode===Kt.AUTH_MODE_ANONYMOUS||this.authMode===Kt.AUTH_MODE_NO_PROMPT&&!ve)return Promise.reject(new I("portal:invalid-auth-mode",`Current "authMode"' is "${this.authMode}"`));if(this.loadStatus==="failed")return Promise.reject(this.loadError);const e=t=>Promise.resolve().then(()=>this.loadStatus==="not-loaded"?(t||(this.authMode="immediate"),this.load().then(()=>null)):this.loadStatus==="loading"?this.load().then(()=>this.credential?null:(this.credential=t,this.fetchSelf("immediate"))):this.user&&this.credential===t?null:(this.credential=t,this.fetchSelf("immediate"))).then(r=>{r&&(this.sourceJSON=r,this.read(r))});return ve?ve.getCredential(this.restUrl,{prompt:this.authMode!==Kt.AUTH_MODE_NO_PROMPT}).then(t=>e(t)):e(this.credential)}normalizeUrl(e){var r;const t=(r=this.credential)==null?void 0:r.token;return this._normalizeSSL(t?e+(e.includes("?")?"&":"?")+"token="+t:e)}requestToTypedArray(e,t,r){return this.request(e,t).then(i=>{const s=Kt._resultsToTypedArray(r,{portal:this},i);return Promise.all(s.map(n=>typeof n.when=="function"?n.when():i)).then(()=>s,()=>s)})}request(e,t={}){const r={f:"json",...t.query},{authMode:i=this.authMode===Kt.AUTH_MODE_ANONYMOUS||this.authMode===Kt.AUTH_MODE_NO_PROMPT?this.authMode:"auto",body:s=null,cacheBust:n=!1,method:o="auto",responseType:a="json",signal:l}=t,h={authMode:i,body:s,cacheBust:n,method:o,query:r,responseType:a,timeout:0,signal:l};return t.withCredentials&&(h.withCredentials=!0),We(this._normalizeSSL(e),h).then(p=>p.data)}toJSON(){throw new I("internal:not-yet-implemented","Portal.toJSON is not yet implemented")}static fromJSON(e){if(!e)return null;if(e.declaredClass)throw new Error("JSON object is already hydrated");return new Kt({sourceJSON:e})}_getHelperService(e){const t=this.helperServices&&this.helperServices[e];if(!t)throw new I("portal:service-not-found",`The \`helperServices\` do not include an entry named "${e}"`);return t}async _fetchBasemaps(e,t){const r=new $i;r.query=e||(this.hasAPIKey?this.devBasemapGalleryGroupQuery:this.useVectorBasemaps?this.vectorBasemapGalleryGroupQuery:this.basemapGalleryGroupQuery),r.disableExtraQuery=!0;const i=await this.queryGroups(r,t);if(!i.total)return[];const s=i.results[0];r.num=100,r.query='type:"Web Map" -type:"Web Application"',r.sortField=s.sortField||"name",r.sortOrder=s.sortOrder||"desc";const n=await s.queryItems(r,t);return n.total?n.results.filter(o=>o.type==="Web Map").map(o=>new kl({portalItem:o})):[]}async _fetchBasemaps3D(e,t){const r=e||this.basemapGalleryGroupQuery3D;if(!r)return[];if(this.hasAPIKey)return[];const i=new $i({query:r,disableExtraQuery:!0}),s=await this.queryGroups(i,t);if(!s.total)return[];const n=s.results[0];i.num=100,i.query='type:"Web Scene"',i.sortField=n.sortField||"name",i.sortOrder=n.sortOrder||"desc";const o=await n.queryItems(i,t);return o.total?o.results.filter(a=>a.type==="Web Scene").map(a=>new kl({portalItem:a})):[]}_normalizeSSL(e){return e.replace(/^http:/i,"https:").replace(":7080",":7443")}_readBasemap(e){if(e){const t=kl.fromJSON(e);return t.portalItem={portal:this},t}return null}static _resultsToTypedArray(e,t,r,i){let s;if(r){const n=i!=null?i.signal:null;s=r.listings||r.notifications||r.userInvitations||r.tags||r.items||r.groups||r.comments||r.provisions||r.results||r.relatedItems||r,(e||t)&&(s=s.map(o=>{const a=Object.assign(e?e.fromJSON(o):o,t);return typeof a.load=="function"&&a.load(n),a}))}else s=[];return s}};R.AUTH_MODE_ANONYMOUS="anonymous",R.AUTH_MODE_AUTO="auto",R.AUTH_MODE_IMMEDIATE="immediate",R.AUTH_MODE_NO_PROMPT="no-prompt",c([d()],R.prototype,"access",void 0),c([d()],R.prototype,"allSSL",void 0),c([d()],R.prototype,"authMode",void 0),c([d()],R.prototype,"authorizedCrossOriginDomains",void 0),c([pe("authorizedCrossOriginDomains")],R.prototype,"readAuthorizedCrossOriginDomains",null),c([d()],R.prototype,"basemapGalleryGroupQuery",void 0),c([d({json:{name:"3DBasemapGalleryGroupQuery"}})],R.prototype,"basemapGalleryGroupQuery3D",void 0),c([d()],R.prototype,"bingKey",void 0),c([d()],R.prototype,"canListApps",void 0),c([d()],R.prototype,"canListData",void 0),c([d()],R.prototype,"canListPreProvisionedItems",void 0),c([d()],R.prototype,"canProvisionDirectPurchase",void 0),c([d()],R.prototype,"canSearchPublic",void 0),c([d()],R.prototype,"canShareBingPublic",void 0),c([d()],R.prototype,"canSharePublic",void 0),c([d()],R.prototype,"canSignInArcGIS",void 0),c([d()],R.prototype,"canSignInIDP",void 0),c([d()],R.prototype,"colorSetsGroupQuery",void 0),c([d()],R.prototype,"commentsEnabled",void 0),c([d({type:Date})],R.prototype,"created",void 0),c([d()],R.prototype,"credential",void 0),c([d()],R.prototype,"culture",void 0),c([d()],R.prototype,"currentVersion",void 0),c([d()],R.prototype,"customBaseUrl",void 0),c([d()],R.prototype,"default3DBasemapQuery",void 0),c([d()],R.prototype,"defaultBasemap",void 0),c([pe("defaultBasemap")],R.prototype,"readDefaultBasemap",null),c([d()],R.prototype,"defaultDevBasemap",void 0),c([pe("defaultDevBasemap")],R.prototype,"readDefaultDevBasemap",null),c([d({type:De})],R.prototype,"defaultExtent",void 0),c([d()],R.prototype,"defaultVectorBasemap",void 0),c([pe("defaultVectorBasemap")],R.prototype,"readDefaultVectorBasemap",null),c([d()],R.prototype,"description",void 0),c([d()],R.prototype,"devBasemapGalleryGroupQuery",void 0),c([d()],R.prototype,"eueiEnabled",void 0),c([d({readOnly:!0})],R.prototype,"extraQuery",null),c([d()],R.prototype,"featuredGroups",void 0),c([d()],R.prototype,"featuredItemsGroupQuery",void 0),c([d()],R.prototype,"galleryTemplatesGroupQuery",void 0),c([d()],R.prototype,"layoutGroupQuery",void 0),c([d()],R.prototype,"livingAtlasGroupQuery",void 0),c([d({readOnly:!0})],R.prototype,"hasAPIKey",null),c([d()],R.prototype,"hasCategorySchema",void 0),c([d()],R.prototype,"hasClassificationSchema",void 0),c([d()],R.prototype,"helpBase",void 0),c([d()],R.prototype,"helperServices",void 0),c([d()],R.prototype,"helpMap",void 0),c([d()],R.prototype,"homePageFeaturedContent",void 0),c([d()],R.prototype,"homePageFeaturedContentCount",void 0),c([d()],R.prototype,"httpPort",void 0),c([d()],R.prototype,"httpsPort",void 0),c([d()],R.prototype,"id",void 0),c([d()],R.prototype,"ipCntryCode",void 0),c([d({readOnly:!0})],R.prototype,"isOrganization",null),c([d()],R.prototype,"isPortal",void 0),c([d()],R.prototype,"isReadOnly",void 0),c([d({readOnly:!0})],R.prototype,"itemPageUrl",null),c([d()],R.prototype,"layerTemplatesGroupQuery",void 0),c([d()],R.prototype,"maxTokenExpirationMinutes",void 0),c([d({type:Date})],R.prototype,"modified",void 0),c([d()],R.prototype,"name",void 0),c([d()],R.prototype,"portalHostname",void 0),c([d()],R.prototype,"portalMode",void 0),c([d()],R.prototype,"portalProperties",void 0),c([d()],R.prototype,"region",void 0),c([d()],R.prototype,"recycleBinEnabled",void 0),c([d({readOnly:!0})],R.prototype,"restUrl",null),c([d()],R.prototype,"rotatorPanels",void 0),c([d()],R.prototype,"showHomePageDescription",void 0),c([d()],R.prototype,"sourceJSON",void 0),c([d()],R.prototype,"staticImagesUrl",void 0),c([d({json:{name:"2DStylesGroupQuery"}})],R.prototype,"stylesGroupQuery2d",void 0),c([d({json:{name:"stylesGroupQuery"}})],R.prototype,"stylesGroupQuery3d",void 0),c([d()],R.prototype,"supportsHostedServices",void 0),c([d()],R.prototype,"symbolSetsGroupQuery",void 0),c([d()],R.prototype,"templatesGroupQuery",void 0),c([d()],R.prototype,"thumbnail",void 0),c([d({readOnly:!0})],R.prototype,"thumbnailUrl",null),c([d()],R.prototype,"units",void 0),c([d()],R.prototype,"url",void 0),c([d()],R.prototype,"urlKey",void 0),c([pe("urlKey")],R.prototype,"readUrlKey",null),c([d()],R.prototype,"user",void 0),c([pe("user")],R.prototype,"readUser",null),c([d()],R.prototype,"use3dBasemaps",void 0),c([d()],R.prototype,"useDefault3dBasemap",void 0),c([d()],R.prototype,"useStandardizedQuery",void 0),c([d()],R.prototype,"useVectorBasemaps",void 0),c([d()],R.prototype,"vectorBasemapGalleryGroupQuery",void 0),R=Kt=c([S("esri.portal.Portal")],R);const vn=R,mb=new FinalizationRegistry(e=>{e.remove()});function n5(e){const t=ve;return()=>{const r=e.deref();r&&t.findCredential(r.restUrl)&&r.signIn().catch(()=>{})}}let Bi=class extends W{constructor(t){super(t),this.portalItem=null}normalizeCtorArgs(t){return t!=null&&t.portalItem&&t.path?{...t,path:yb(t.path,t.portalItem)}:t}set path(t){t!=null&&ar(t)?U.getLogger(this).error("portalitemresource:invalid-path","A portal item resource path must be relative"):this._set("path",t)}_castPath(t){return yb(t,this.portalItem)}get url(){return this.portalItem&&this.path?`${this.portalItem.itemUrl}/resources/${this.path}`:null}get cdnUrl(){return this.portalItem&&this.path?`${this.portalItem.itemCdnUrl}/resources/${this.path}`:null}get itemRelativeUrl(){return this.portalItem&&this.path?`./resources/${this.path}`:null}fetch(t="json",r){const i=this.cdnUrl;if(i==null)throw new I("portal-item-resource:fetch","Portal item resource does not refer to a valid item or path");return this.portalItem.portal.request(i,{responseType:t,query:{token:this.portalItem.apiKey,_ts:r!=null&&r.cacheBust?Date.now():null},signal:r==null?void 0:r.signal})}async update(t,r){const{addOrUpdateResources:i}=await N(()=>import("./resourceUtils-CQCgbrdE.js"),[]);return await i(this.portalItem,[{resource:this,content:t,compress:r==null?void 0:r.compress,access:r==null?void 0:r.access}],"update",r),this}hasPath(){return this.path!=null}};function yb(e,t){return e==null?e:(e=e.replace(/^\/+/,""),t!=null&&ar(e)&&(e=v_(e,t.itemUrl)),e==null?void 0:e.replace(/^\/+/,"").replace(/^(\.\/)?resources\//,""))}c([d()],Bi.prototype,"portalItem",void 0),c([d({type:String,value:null})],Bi.prototype,"path",null),c([rt("path")],Bi.prototype,"_castPath",null),c([d({type:String,readOnly:!0})],Bi.prototype,"url",null),c([d({type:String,readOnly:!0})],Bi.prototype,"cdnUrl",null),c([d({type:String,readOnly:!0})],Bi.prototype,"itemRelativeUrl",null),Bi=c([S("esri.portal.PortalItemResource")],Bi);const o5=Bi;let ou=class extends W{constructor(t){super(t),this.created=null,this.rating=null}};c([d({type:Date})],ou.prototype,"created",void 0),c([d()],ou.prototype,"rating",void 0),ou=c([S("esri.portal.PortalRating")],ou);const Fm=ou;var Gn;const a5=new Set(["3DTiles Service","CSV","Feature Collection","Feature Service","Feed","GeoJson","Group Layer","Image Service","KML","Map Service","Media Layer","Scene Service","Stream Service","Vector Tile Service","WFS","WMS","WMTS"]),l5=new Set(["KML","GeoJson","CSV"]);let ee=Gn=class extends G.JSONSupportMixin(yn){static from(e){return Mf(Gn,e)}constructor(e){super(e),this.access=null,this.accessInformation=null,this.apiKey=null,this.applicationProxies=null,this.avgRating=null,this.categories=null,this.classification=null,this.created=null,this.culture=null,this.description=null,this.extent=null,this.groupCategories=null,this.id=null,this.isOrgItem=!1,this.itemControl=null,this.licenseInfo=null,this.modified=null,this.name=null,this.numComments=null,this.numRatings=null,this.numViews=null,this.owner=null,this.ownerFolder=null,this.portal=null,this.screenshots=null,this.size=null,this.snippet=null,this.sourceJSON=null,this.sourceUrl=null,this.spatialReference=null,this.tags=null,this.title=null,this.type=null,this.typeKeywords=null,this.url=null}destroy(){this.portal=null}get displayName(){const e=this.type,t=this.typeKeywords||[];let r=e;return e==="Feature Service"||e==="Feature Collection"?r=t.includes("Table")?"Table":t.includes("Route Layer")?"Route Layer":t.includes("Markup")?"Markup":"Feature Layer":e==="Image Service"?r=t.includes("Elevation 3D Layer")?"Elevation Layer":t.includes("Tiled Imagery")?"Tiled Imagery Layer":"Imagery Layer":e==="Scene Service"?r="Scene Layer":e==="Video Service"?r="Video Layer":e==="Scene Package"?r="Scene Layer Package":e==="Stream Service"?r="Feature Layer":e==="Geoprocessing Service"?r=t.includes("Web Tool")?"Tool":"Geoprocessing Service":e==="Geoenrichment Service"?r="GeoEnrichment Service":e==="Geocoding Service"?r="Locator":e==="Microsoft Powerpoint"?r="Microsoft PowerPoint":e==="GeoJson"?r="GeoJSON":e==="Globe Service"?r="Globe Layer":e==="Vector Tile Service"?r="Tile Layer":e==="netCDF"?r="NetCDF":e==="Map Service"?r=t.includes("Spatiotemporal")||!t.includes("Hosted Service")&&!t.includes("Tiled")||t.includes("Relational")?"Map Image Layer":"Tile Layer":e!=null&&e.toLowerCase().includes("add in")?r=e.replaceAll(/(add in)/gi,"Add-In"):e==="datastore catalog service"?r="Big Data File Share":e==="Compact Tile Package"?r="Tile Package (tpkx)":e==="Raster function template"?r="Raster Function Template":e==="OGCFeatureServer"?r="OGC Feature Layer":e==="web mapping application"&&t.includes("configurableApp")?r="Instant App":e==="Insights Page"?r="Insights Report":e==="Excalibur Imagery Project"?r="Excalibur Project":e==="3DTiles Service"?r="3D tiles layer":e==="3DTiles Package"&&(r="3D tiles package"),r}readExtent(e){return e&&e.length?new De(e[0][0],e[0][1],e[1][0],e[1][1]):null}get iconUrl(){var y;const e=((y=this.type)==null?void 0:y.toLowerCase())||"",t=this.typeKeywords||[],r="esri/images/portal/",i="16";let s,n=!1,o=!1,a=!1,l=!1,h=!1,p=!1,f=!1,m=!1;return e.indexOf("service")>0||e==="feature collection"||e==="kml"||e==="wms"||e==="wmts"||e==="wfs"?(n=t.includes("Hosted Service"),e==="feature service"||e==="feature collection"||e==="kml"||e==="wfs"?(o=t.includes("Table"),a=t.includes("Route Layer"),l=t.includes("Markup"),h=t.includes("Spatiotemporal"),p=t.includes("UtilityNetwork"),s=h&&o?"spatiotemporaltable":o?"table":a?"routelayer":l?"markup":h?"spatiotemporal":p?"utilitynetwork":n?"featureshosted":"features"):e==="map service"||e==="wms"||e==="wmts"?(h=t.includes("Spatiotemporal"),f=t.includes("Relational"),s=h||f?"mapimages":n||t.includes("Tiled")||e==="wmts"?"maptiles":"mapimages"):s=e==="scene service"?t.includes("Line")?"sceneweblayerline":t.includes("3DObject")?"sceneweblayermultipatch":t.includes("Point")?"sceneweblayerpoint":t.includes("IntegratedMesh")?"sceneweblayermesh":t.includes("PointCloud")?"sceneweblayerpointcloud":t.includes("Polygon")?"sceneweblayerpolygon":t.includes("Building")?"sceneweblayerbuilding":t.includes("Voxel")?"sceneweblayervoxel":"sceneweblayer":e==="image service"?t.includes("Elevation 3D Layer")?"elevationlayer":t.includes("Tiled Imagery")?"tiledimagerylayer":"imagery":e==="stream service"?"streamlayer":e==="vector tile service"?"vectortile":e==="datastore catalog service"?"datastorecollection":e==="geocoding service"?"geocodeservice":e==="video service"?t.includes("Live Stream")?"livestreamvideolayer":"videolayer":e==="geoprocessing service"?t.includes("Web Tool")?"tool":"layers":e==="geodata service"?"geodataservice":e==="3dtiles service"?t.includes("3DObject")?"3dobjecttileslayer":t.includes("IntegratedMesh")?"integratedmeshtileslayer":"3dtileslayer":"layers"):e==="web map"||e==="cityengine web scene"?s="maps":e==="web scene"?s=t.includes("ViewingMode-Local")?"webscenelocal":"websceneglobal":e==="web mapping application"&&t.includes("configurableApp")?s="instantapps":e==="web mapping application"||e==="mobile application"||e==="application"||e==="operation view"||e==="desktop application"?s="apps":e==="map document"||e==="map package"||e==="published map"||e==="scene document"||e==="globe document"||e==="basemap package"||e==="mobile basemap package"||e==="mobile map package"||e==="project package"||e==="project template"||e==="pro map"||e==="layout"||e==="layer"&&t.includes("ArcGIS Pro")||e==="explorer map"&&t.indexOf("Explorer Document")?s="mapsgray":e==="service definition"||e==="shapefile"||e==="cad drawing"||e==="geojson"||e==="netcdf"||e==="administrative report"?s="datafiles":e==="360 vr experience"?s="360vr":e==="explorer add in"||e==="desktop add in"||e==="windows viewer add in"||e==="windows viewer configuration"?s="appsgray":e==="arcgis pro add in"||e==="arcgis pro configuration"?s="addindesktop":e==="pdf"?s="pdf":e==="microsoft word"?s="word":e==="microsoft excel"?s="excel":e==="microsoft powerpoint"?s="ppt":e==="rule package"||e==="file geodatabase"||e==="sqlite geodatabase"||e==="csv collection"||e==="kml collection"||e==="windows mobile package"||e==="map template"||e==="desktop application template"||e==="gml"||e==="arcpad package"||e==="code sample"||e==="document link"||e==="earth configuration"||e==="operations dashboard add in"||e==="rules package"||e==="workflow manager package"||e==="explorer map"&&t.includes("Explorer Mapping Application")||t.includes("Document")?s="datafilesgray":e==="network analysis service"||e==="geoprocessing service"||e==="geodata service"||e==="geometry service"||e==="geoprocessing package"||e==="locator package"||e==="geoprocessing sample"||e==="workflow manager service"?s="toolsgray":e==="layer"||e==="layer package"||e==="explorer layer"?s="layersgray":e==="analysis model"?s="analysismodel":e==="scene package"?s="scenepackage":e==="3dtiles package"?s="3dtileslayerpackage":e==="3dtiles service"?s="3dtileslayer":e==="mobile scene package"?s="mobilescenepackage":e==="tile package"||e==="compact tile package"?s="tilepackage":e==="task file"?s="taskfile":e==="report template"?s="report-template":e==="statistical data collection"?s="statisticaldatacollection":e==="insights workbook"?s="workbook":e==="insights model"?s="insightsmodel":e==="insights page"?s="insightspage":e==="insights theme"?s="insightstheme":e==="hub initiative"?s="hubinitiative":e==="hub page"?s="hubpage":e==="hub site application"?s="hubsite":e==="hub event"?s="hubevent":e==="hub project"?s="hubproject":e==="relational database connection"?s="relationaldatabaseconnection":e==="big data file share"?s="datastorecollection":e==="image collection"?s="imagecollection":e==="desktop style"?s="desktopstyle":e==="style"?s=t.includes("Dictionary")?"dictionarystyle":"style":e==="dashboard"?s="dashboard":e==="raster function template"?s="rasterprocessingtemplate":e==="vector tile package"?s="vectortilepackage":e==="ortho mapping project"?s="orthomappingproject":e==="ortho mapping template"?s="orthomappingtemplate":e==="solution"?s="solutions":e==="geopackage"?s="geopackage":e==="deep learning package"?s="deeplearningpackage":e==="real time analytic"?s="realtimeanalytics":e==="reality mapping project"?s="realitymappingproject":e==="big data analytic"?s="bigdataanalytics":e==="feed"?s="feed":e==="excalibur imagery project"?s="excaliburimageryproject":e==="notebook"?s="notebook":e==="storymap"?s="storymap":e==="survey123 add in"?s="survey123addin":e==="mission"?s="mission":e==="mission report"?s="missionreport":e==="mission template"?s="missiontemplate":e==="quickcapture project"?s="quickcaptureproject":e==="pro report"?s="proreport":e==="pro report template"?s="proreporttemplate":e==="urban model"?s="urbanmodel":e==="urban project"?s="urbanproject":e==="web experience"?s="experiencebuilder":e==="web experience template"?s="webexperiencetemplate":e==="experience builder widget"?s="experiencebuilderwidget":e==="experience builder widget package"?s="experiencebuilderwidgetpackage":e==="workflow"?s="workflow":e==="kernel gateway connection"?s="kernelgatewayconnection":e==="insights script"?s="insightsscript":e==="hub initiative template"?s="hubinitiativetemplate":e==="storymap theme"?s="storymaptheme":e==="knowledge graph"?s="knowledgegraph":e==="knowledge graph layer"?s="knowledgegraphlayer":e==="knowledge studio project"?s="knowledgestudio":e==="native application"?s="nativeapp":e==="native application installer"?s="nativeappinstaller":e==="web link chart"?s="linkchart":e==="knowledge graph web investigation"?s="investigation":e==="ogcfeatureserver"?s="features":e==="pro presentation"?s="propresentation":e==="pro project"?s="proproject":e==="insights workbook package"?s="insightsworkbookpackage":e==="apache parquet"?s="apacheparquet":e==="notebook code snippet library"?s="notebookcodesnippets":e==="suitability model"?s="suitabilitymodel":e==="esri classifier definition"?s="classifierdefinition":e==="esri classification schema"?s="classificationschema":e==="insights data engineering workbook"?s="dataengineeringworkbook":e==="insights data engineering model"?s="dataengineeringmodel":e==="deep learning studio project"?s="deeplearningproject":e==="discussion"?s="discussion":e==="allsource project"?s="allsourceproject":e==="api key"?s="apikey":e==="data pipeline"?s="datapipelines":e==="group layer"?(m=t.includes("Map"),s=m?"layergroup2d":"layergroup"):s=e==="media layer"?"onlinemedialayer":e==="form"?t.includes("Survey123")?"survey":"datafilesgray":e==="csv"?"csv":e==="image"?"image":"maps",s?Ge(r+s+i+".png"):null}get isLayer(){return this.type!=null&&a5.has(this.type)}get itemCdnUrl(){return E_(this.itemUrl)}get itemPageUrl(){var t;const e=(t=this.portal)==null?void 0:t.itemPageUrl;return e&&this.id?`${e}?id=${this.id}`:null}get itemUrl(){var t;const e=(t=this.portal)==null?void 0:t.restUrl;return e&&this.id?`${e}/content/items/${this.id}`:null}get thumbnailUrl(){var r;const e=this.itemUrl,t=this.thumbnail;return e&&t?((r=this.portal)==null?void 0:r.normalizeUrl(`${e}/info/${t}?f=json`))??null:null}get userItemUrl(){var r,i,s;const e=(r=this.portal)==null?void 0:r.restUrl;if(!e)return null;const t=this.owner||((s=(i=this.portal)==null?void 0:i.user)==null?void 0:s.username);return t?`${e}/content/users/${this.ownerFolder?`${t}/${this.ownerFolder}`:t}/items/${this.id}`:null}load(e){const t=this.portal??(this.portal=vn.getDefault()),r=t.load(e).then(()=>this.sourceJSON?this.sourceJSON:this.id&&this.itemUrl?t.request(this.itemUrl,{signal:e!=null?e.signal:null,query:{token:this.apiKey}}):{}).then(i=>{this.sourceJSON=i,this.read(i)});return this.addResolvingPromise(r),Promise.resolve(this)}async addRating(e){const t={method:"post",query:{}},r=e instanceof Fm?e.rating:e;return r==null||isNaN(r)||typeof e!="number"||(t.query.rating=r),this.portal?(await this.portal.request(this.itemUrl+"/addRating",t),new Fm({rating:r,created:new Date})):null}clone(){const e={access:this.access,accessInformation:this.accessInformation,applicationProxies:C(this.applicationProxies),avgRating:this.avgRating,categories:C(this.categories),classification:C(this.classification),created:C(this.created),culture:this.culture,description:this.description,extent:C(this.extent),groupCategories:C(this.groupCategories),id:this.id,itemControl:this.itemControl,licenseInfo:this.licenseInfo,modified:C(this.modified),name:this.name,numComments:this.numComments,numRatings:this.numRatings,numViews:this.numViews,owner:this.owner,ownerFolder:this.ownerFolder,portal:this.portal,screenshots:C(this.screenshots),size:this.size,snippet:this.snippet,sourceUrl:this.sourceUrl,spatialReference:this.spatialReference,tags:C(this.tags),thumbnail:this.thumbnail,title:this.title,type:this.type,typeKeywords:C(this.typeKeywords),url:this.url};this.loaded&&(e.loadStatus="loaded");const t=new Gn({sourceJSON:this.sourceJSON}).set(e);return t._set("isOrgItem",this.isOrgItem),t}createPostQuery(){var t;const e=this.toJSON();for(const r of["tags","typeKeywords","categories"])e[r]=(t=e[r])==null?void 0:t.join(", ");for(const r of["extent","classification"]){const i=e[r];i&&(e[r]=JSON.stringify(i))}return e}async deleteRating(){await this.portal.request(this.itemUrl+"/deleteRating",{method:"post"})}fetchData(e="json",t){return this.portal.request(this.itemUrl+"/data",{responseType:e,...t,query:{token:this.apiKey}})}async fetchRating(e){const t=await this.portal.request(this.itemUrl+"/rating",{query:{token:this.apiKey},...e});return t.rating!=null?(t.created=new Date(t.created),new Fm(t)):null}fetchRelatedItems(e,t){return this.portal.requestToTypedArray(this.itemUrl+"/relatedItems",{query:{...e,token:this.apiKey},...t},Gn)}getThumbnailUrl(e){let t=this.thumbnailUrl;return t&&e&&(t+=`&w=${e}`),t}reload(){return this.portal.request(this.itemUrl??"",{cacheBust:!0,query:{token:this.apiKey}}).then(e=>(this.applicationProxies&&!Object.hasOwn(e,"appProxies")&&(this.applicationProxies=null),this.sourceJSON=e,this.read(e),this))}update(e){return this.id?this.load().then(()=>this.portal.signIn()).then(()=>{const t=e==null?void 0:e.data,r={method:"post"};r.query=this.createPostQuery();for(const i in r.query)r.query[i]===null&&(r.query[i]="");return r.query.clearEmptyFields=!0,t!=null&&(typeof t=="string"?r.query.text=t:typeof t=="object"&&(r.query.text=JSON.stringify(t))),this.portal.request(`${this.userItemUrl}/update`,r).then(()=>this.reload())}):Promise.reject(new I("portal:item-does-not-exist","The item does not exist yet and cannot be updated"))}async copy(e){if(!this.id)throw new I("portal:item-does-not-exist","The item does not exist yet");await this.load();const{portal:t,itemUrl:r}=this;await t.signIn();const{copyResources:i,folder:s,tags:n,title:o}=e||{},a={method:"post",query:{copyPrivateResources:i==="all",folder:typeof s=="string"?s:s==null?void 0:s.id,includeResources:!!i,tags:n==null?void 0:n.join(","),title:o}},{itemId:l}=await t.request(`${r}/copy`,a);return new Gn({id:l,portal:t})}updateThumbnail(e){return this.id?this.load().then(()=>this.portal.signIn()).then(()=>{const t=e.thumbnail,r=e.filename,i={method:"post"};if(typeof t=="string")jo(t)?i.query={data:t}:i.query={url:$r(t)},r!=null&&(i.query.filename=r);else{const s=new FormData;r!=null?s.append("file",t,r):s.append("file",t),i.body=s}return this.portal.request(`${this.userItemUrl}/updateThumbnail`,i).then(()=>this.reload())}):Promise.reject(new I("portal:item-does-not-exist","The item does not exist yet and cannot be updated"))}async fetchResources(e={},t){const{fetchResources:r}=await N(()=>import("./resourceUtils-CQCgbrdE.js"),[]);return r(this,e,t)}async addResource(e,t,r){const{addOrUpdateResources:i}=await N(()=>import("./resourceUtils-CQCgbrdE.js"),[]);return e.portalItem=this,await i(this,[{resource:e,content:t,compress:r==null?void 0:r.compress,access:r==null?void 0:r.access}],"add",r),e}async removeResource(e,t){const{removeResource:r}=await N(()=>import("./resourceUtils-CQCgbrdE.js"),[]);if(e.portalItem&&e.portalItem.itemUrl!==this.itemUrl)throw new I("removeresource:portal-item-mismatch","The portal item associated with the provided resource does not match the item");return r(this,e,t)}async removeAllResources(e){const{removeAllResources:t}=await N(()=>import("./resourceUtils-CQCgbrdE.js"),[]);return t(this,e)}resourceFromPath(e){return new o5({portalItem:this,path:e})}toJSON(){var r,i;const e=this.extent,t={accessInformation:this.accessInformation,categories:C(this.categories),classification:C(this.classification),created:(r=this.created)==null?void 0:r.getTime(),description:this.description,extent:e&&[[e.xmin,e.ymin],[e.xmax,e.ymax]],id:this.id,isOrgItem:this.isOrgItem,licenseInfo:this.licenseInfo,modified:(i=this.modified)==null?void 0:i.getTime(),name:this.name,owner:this.owner,ownerFolder:this.ownerFolder,snippet:this.snippet,sourceUrl:this.sourceUrl,spatialReference:this.spatialReference,tags:C(this.tags),thumbnail:this.thumbnail,title:this.title,type:this.type,typeKeywords:C(this.typeKeywords),url:this.url};return MI(t)}static fromJSON(e){if(!e)return null;if(e.declaredClass)throw new Error("JSON object is already hydrated");return new Gn({sourceJSON:e})}_getPostQuery(){const e=this.toJSON();for(const t in e)t==="tags"&&e[t]!==null&&(e[t]=e[t].join(", ")),t==="typeKeywords"&&e[t]!==null&&(e[t]=e[t].join(", ")),t==="extent"&&e[t]&&(e[t]=JSON.stringify(e[t]));return e}};c([d({type:["private","shared","org","public"]})],ee.prototype,"access",void 0),c([d()],ee.prototype,"accessInformation",void 0),c([d({type:String})],ee.prototype,"apiKey",void 0),c([d({json:{read:{source:"appProxies"}}})],ee.prototype,"applicationProxies",void 0),c([d()],ee.prototype,"avgRating",void 0),c([d()],ee.prototype,"categories",void 0),c([d()],ee.prototype,"classification",void 0),c([d({type:Date})],ee.prototype,"created",void 0),c([d()],ee.prototype,"culture",void 0),c([d()],ee.prototype,"description",void 0),c([d({readOnly:!0})],ee.prototype,"displayName",null),c([d({type:De})],ee.prototype,"extent",void 0),c([pe("extent")],ee.prototype,"readExtent",null),c([d()],ee.prototype,"groupCategories",void 0),c([d({readOnly:!0})],ee.prototype,"iconUrl",null),c([d()],ee.prototype,"id",void 0),c([d({readOnly:!0})],ee.prototype,"isLayer",null),c([d({type:Boolean,readOnly:!0})],ee.prototype,"isOrgItem",void 0),c([d()],ee.prototype,"itemControl",void 0),c([d({readOnly:!0})],ee.prototype,"itemPageUrl",null),c([d({readOnly:!0})],ee.prototype,"itemUrl",null),c([d()],ee.prototype,"licenseInfo",void 0),c([d({type:Date})],ee.prototype,"modified",void 0),c([d()],ee.prototype,"name",void 0),c([d()],ee.prototype,"numComments",void 0),c([d()],ee.prototype,"numRatings",void 0),c([d()],ee.prototype,"numViews",void 0),c([d()],ee.prototype,"owner",void 0),c([d()],ee.prototype,"ownerFolder",void 0),c([d({type:vn})],ee.prototype,"portal",void 0),c([d()],ee.prototype,"screenshots",void 0),c([d()],ee.prototype,"size",void 0),c([d()],ee.prototype,"snippet",void 0),c([d()],ee.prototype,"sourceJSON",void 0),c([d({type:String})],ee.prototype,"sourceUrl",void 0),c([d({type:String})],ee.prototype,"spatialReference",void 0),c([d()],ee.prototype,"tags",void 0),c([d()],ee.prototype,"thumbnail",void 0),c([d({readOnly:!0})],ee.prototype,"thumbnailUrl",null),c([d()],ee.prototype,"title",void 0),c([d()],ee.prototype,"type",void 0),c([d()],ee.prototype,"typeKeywords",void 0),c([d({type:String,json:{read(e,t){var r;if(l5.has(t.type)){const i=(r=this.portal)==null?void 0:r.restUrl;e||(e=i&&this.id?`${i}/content/items/${this.id}/data`:null)}return e}}})],ee.prototype,"url",void 0),c([d({readOnly:!0})],ee.prototype,"userItemUrl",null),ee=Gn=c([S("esri.portal.PortalItem")],ee);const E3=ee,M3=Object.freeze(Object.defineProperty({__proto__:null,default:E3},Symbol.toStringTag,{value:"Module"})),gb=/^([a-z]{2})(?:[-_]([A-Za-z]{2}))?$/,x3={ar:!0,bg:!0,bs:!0,ca:!0,cs:!0,da:!0,de:!0,el:!0,en:!0,es:!0,et:!0,fi:!0,fr:!0,he:!0,hr:!0,hu:!0,id:!0,it:!0,ja:!0,ko:!0,lt:!0,lv:!0,nb:"no",nl:!0,no:!0,pl:!0,pt:"pt-BR","pt-BR":!0,"pt-PT":!0,ro:!0,ru:!0,sk:!0,sl:!0,sr:!0,sv:!0,th:!0,tr:!0,uk:!0,vi:!0,zh:"zh-CN","zh-CN":!0,"zh-HK":!0,"zh-TW":!0};function u5(e){return e in x3}function _b(e){if(u5(e)){const t=x3[e];return t===!0?e:t}return null}const au=[],za=new Map;function vb(e){for(const t of za.keys())O3(e.pattern,t)&&za.delete(t)}function c5(e){return au.includes(e)||(vb(e),au.unshift(e)),ce(()=>{const t=au.indexOf(e);t>-1&&(au.splice(t,1),vb(e))})}async function A3(e){const t=Bt();za.has(e)||za.set(e,h5(e,t));const r=za.get(e);return r&&await d5.add(r),r}function P3(e){if(!gb.test(e))return null;const t=gb.exec(e);if(t===null)return null;const[,r,i]=t;return _b(r+(i?"-"+i.toUpperCase():""))??_b(r)}async function h5(e,t){const r=[];for(const i of au)if(O3(i.pattern,e))try{return await i.fetchMessageBundle(e,t)}catch(s){r.push(s)}throw r.length?new I("intl:message-bundle-error",`Errors occurred while loading "${e}"`,{errors:r}):new I("intl:no-message-bundle-loader",`No loader found for message bundle "${e}"`)}function O3(e,t){return typeof e=="string"?t.startsWith(e):e.test(t)}D_(()=>{za.clear()});const d5=new class{constructor(){this._numLoading=0,this._dfd=null}async waitForAll(){this._dfd&&await this._dfd.promise}add(e){return this._increase(),e.then(()=>this._decrease(),()=>this._decrease()),this.waitForAll()}_increase(){this._numLoading++,this._dfd||(this._dfd=Or())}_decrease(){this._numLoading=Math.max(this._numLoading-1,0),this._dfd&&this._numLoading===0&&(this._dfd.resolve(),this._dfd=null)}};async function p5(e){if(!e)return;const t=e.includes("-vector")?e.slice(0,e.indexOf("-vector")):e.includes("-3d")?e.slice(0,e.indexOf("-3d")):e,r=await A3("esri/t9n/basemaps");return r[e]||r[t]}const Pg={satellite:{id:"satellite",classic:!0,get thumbnailUrl(){return Ge("esri/images/basemap/satellite.jpg")},baseMapLayers:[{id:"satellite-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Imagery",showLegend:!1,visibility:!0,opacity:1}]},hybrid:{id:"hybrid",classic:!0,get thumbnailUrl(){return Ge("esri/images/basemap/hybrid.jpg")},baseMapLayers:[{id:"hybrid-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Imagery",showLegend:!1,visibility:!0,opacity:1},{id:"hybrid-reference-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/30d6b8271e1849cd9c3042060001f425/resources/styles/root.json",layerType:"VectorTileLayer",title:"Hybrid Reference Layer",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},terrain:{id:"terrain",classic:!0,get thumbnailUrl(){return Ge("esri/images/basemap/terrain.jpg")},baseMapLayers:[{id:"terrain-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Terrain_Base/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Terrain Base",showLegend:!1,visibility:!0,opacity:1},{id:"terrain-reference-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/Reference/World_Reference_Overlay/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Reference Overlay",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},oceans:{id:"oceans",classic:!0,get thumbnailUrl(){return Ge("esri/images/basemap/oceans.jpg")},baseMapLayers:[{id:"oceans-base-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Ocean/World_Ocean_Base/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Ocean Base",showLegend:!1,visibility:!0,opacity:1},{id:"oceans-reference-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Ocean/World_Ocean_Reference/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Ocean Reference",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},osm:{id:"osm",classic:!0,get thumbnailUrl(){return Ge("esri/images/basemap/osm.jpg")},baseMapLayers:[{id:"osm-base-layer",layerType:"OpenStreetMap",title:"Open Street Map",showLegend:!1,visibility:!0,opacity:1}]},"dark-gray-vector":{id:"dark-gray-vector",classic:!0,get thumbnailUrl(){return Ge("esri/images/basemap/dark-gray-vector.jpg")},baseMapLayers:[{id:"dark-gray-base-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/5e9b3685f4c24d8781073dd928ebda50/resources/styles/root.json",layerType:"VectorTileLayer",title:"Dark Gray Base",visibility:!0,opacity:1},{id:"dark-gray-reference-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/747cb7a5329c478cbe6981076cc879c5/resources/styles/root.json",layerType:"VectorTileLayer",title:"Dark Gray Reference",isReference:!0,visibility:!0,opacity:1}]},get"dark-gray"(){return{...this["dark-gray-vector"],id:"dark-gray"}},"gray-vector":{id:"gray-vector",classic:!0,get thumbnailUrl(){return Ge("esri/images/basemap/gray-vector.jpg")},baseMapLayers:[{id:"gray-base-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/291da5eab3a0412593b66d384379f89f/resources/styles/root.json",layerType:"VectorTileLayer",title:"Light Gray Base",visibility:!0,opacity:1},{id:"gray-reference-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/1768e8369a214dfab4e2167d5c5f2454/resources/styles/root.json",layerType:"VectorTileLayer",title:"Light Gray Reference",isReference:!0,visibility:!0,opacity:1}]},get gray(){return{...this["gray-vector"],id:"gray"}},"streets-vector":{id:"streets-vector",classic:!0,get thumbnailUrl(){return Ge("esri/images/basemap/streets-vector.jpg")},baseMapLayers:[{id:"streets-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/de26a3cf4cc9451298ea173c4b324736/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Streets",visibility:!0,opacity:1}]},get streets(){return{...this["streets-vector"],id:"streets"}},"topo-vector":{id:"topo-vector",classic:!0,get thumbnailUrl(){return Ge("esri/images/basemap/topo-vector.jpg")},baseMapLayers:[{id:"world-hillshade-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Hillshade",showLegend:!1,visibility:!0,opacity:1},{id:"topo-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/7dc6cea0b1764a1f9af2e679f642f0f5/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Topo",visibility:!0,opacity:1}]},get topo(){return{...this["topo-vector"],id:"topo"}},"streets-night-vector":{id:"streets-night-vector",classic:!0,get thumbnailUrl(){return Ge("esri/images/basemap/streets-night.jpg")},baseMapLayers:[{id:"streets-night-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/86f556a2d1fd468181855a35e344567f/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Streets Night",visibility:!0,opacity:1}]},"streets-relief-vector":{id:"streets-relief-vector",classic:!0,get thumbnailUrl(){return Ge("esri/images/basemap/streets-relief.jpg")},baseMapLayers:[{id:"world-hillshade-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Hillshade",showLegend:!1,visibility:!0,opacity:1},{id:"streets-relief-vector-base-layer",styleUrl:"//www.arcgis.com/sharing/rest/content/items/b266e6d17fc345b498345613930fbd76/resources/styles/root.json",title:"World Streets Relief",layerType:"VectorTileLayer",visibility:!0,opacity:1}]},"streets-navigation-vector":{id:"streets-navigation-vector",classic:!0,get thumbnailUrl(){return Ge("esri/images/basemap/streets-navigation.jpg")},baseMapLayers:[{id:"streets-navigation-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/63c47b7177f946b49902c24129b87252/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Streets Navigation",visibility:!0,opacity:1}]},"topo-3d":{id:"topo-3d",is3d:!0,get thumbnailUrl(){return Ge("esri/images/basemap/topo-3d.png")},baseMapLayers:[{id:"topo-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/1e7d1784d1ef4b79ba6764d0bd6c3150/resources/styles/root.json",layerType:"VectorTileLayer",title:"Topographic",visibility:!0,opacity:1},{id:"topo-3d-trees",title:"Trees",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Trees_Thematic_v1/SceneServer",itemId:"f75fef56b2d944fe92ef9f7737b4f953",layerType:"ArcGISSceneServiceLayer"},{id:"topo-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_DarkLabels_v1/SceneServer",itemId:"a84404ad39c64c328d0596e361ec459b",layerType:"ArcGISSceneServiceLayer"},{id:"topo-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Buildings_v1/SceneServer",itemId:"ca0470dbbddb4db28bad74ed39949e25",layerType:"ArcGISSceneServiceLayer"}]},"navigation-3d":{id:"navigation-3d",is3d:!0,get thumbnailUrl(){return Ge("esri/images/basemap/navigation-3d.jpg")},baseMapLayers:[{id:"navigation-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/ccc904ff872b4144b94934e55e32784b/resources/styles/root.json",layerType:"VectorTileLayer",title:"Navigation",visibility:!0,opacity:1},{id:"navigation-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_DarkLabels_v1/SceneServer",itemId:"a84404ad39c64c328d0596e361ec459b",layerType:"ArcGISSceneServiceLayer"},{id:"navigation-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Buildings_v1/SceneServer",itemId:"ca0470dbbddb4db28bad74ed39949e25",layerType:"ArcGISSceneServiceLayer"}]},"streets-3d":{id:"streets-3d",is3d:!0,get thumbnailUrl(){return Ge("esri/images/basemap/streets-3d.png")},baseMapLayers:[{id:"streets-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/198298c4c64c4cb19de5b46aa00c198d/resources/styles/root.json",layerType:"VectorTileLayer",title:"Streets",visibility:!0,opacity:1},{id:"streets-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_DarkLabels_v1/SceneServer",itemId:"a84404ad39c64c328d0596e361ec459b",layerType:"ArcGISSceneServiceLayer"},{id:"streets-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Buildings_v1/SceneServer",itemId:"ca0470dbbddb4db28bad74ed39949e25",layerType:"ArcGISSceneServiceLayer"}]},"osm-3d":{id:"osm-3d",is3d:!0,get thumbnailUrl(){return Ge("esri/images/basemap/osm-3d.png")},baseMapLayers:[{id:"osm-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/8628d259c9d14bdc848771c23c513940/resources/styles/root.json",layerType:"VectorTileLayer",title:"OpenStreetMap",visibility:!0,opacity:1},{id:"osm-3d-trees",title:"Trees",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Trees_Thematic_v1/SceneServer",itemId:"f75fef56b2d944fe92ef9f7737b4f953",layerType:"ArcGISSceneServiceLayer"},{id:"osm-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_DarkLabels_v1/SceneServer",itemId:"a84404ad39c64c328d0596e361ec459b",layerType:"ArcGISSceneServiceLayer"},{id:"osm-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Buildings_v1/SceneServer",itemId:"ca0470dbbddb4db28bad74ed39949e25",layerType:"ArcGISSceneServiceLayer"}]},"gray-3d":{id:"gray-3d",is3d:!0,get thumbnailUrl(){return Ge("esri/images/basemap/gray-3d.png")},baseMapLayers:[{id:"gray-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/01a14b466345455ba4176d2e6390db92/resources/styles/root.json",layerType:"VectorTileLayer",title:"Streets",visibility:!0,opacity:1},{id:"gray-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_DarkLabels_v1/SceneServer",itemId:"a84404ad39c64c328d0596e361ec459b",layerType:"ArcGISSceneServiceLayer"},{id:"gray-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Buildings_v1/SceneServer",itemId:"ca0470dbbddb4db28bad74ed39949e25",layerType:"ArcGISSceneServiceLayer"}]},"navigation-dark-3d":{id:"navigation-dark-3d",itemId:"5a1365328b4943f09a54cf5fd1205707",is3d:!0,baseMapLayers:[{id:"navigation-dark-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/451a1777ab3f4bf095fae24a117439d9/resources/styles/root.json",layerType:"VectorTileLayer",title:"Navigation Dark"},{id:"navigation-dark-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_LightLabels_v1/SceneServer/layers/0",itemId:"f364b70b012a4da5a4b5921e193eac4a",layerType:"ArcGISSceneServiceLayer"},{id:"navigation-dark-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Buildings_v1/SceneServer",itemId:"ca0470dbbddb4db28bad74ed39949e25",layerType:"ArcGISSceneServiceLayer"}]},"streets-dark-3d":{id:"streets-dark-3d",itemId:"8a4efa2c20484ec9b4557895e65736ff",is3d:!0,baseMapLayers:[{id:"streets-dark-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/bc599b6d741a4ac084b7eea7bf8c5938/resources/styles/root.json",layerType:"VectorTileLayer",title:"OpenStreetMap Streets Night (for 3D)"},{id:"streets-dark-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_LightLabels_v1/SceneServer",itemId:"f364b70b012a4da5a4b5921e193eac4a",layerType:"ArcGISSceneServiceLayer"},{id:"streets-dark-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Buildings_v1/SceneServer",itemId:"ca0470dbbddb4db28bad74ed39949e25",layerType:"ArcGISSceneServiceLayer"}]},"dark-gray-3d":{id:"dark-gray-3d",itemId:"a8b7322a5fe94002bb0f5e0eeb0c5c18",is3d:!0,baseMapLayers:[{id:"dark-gray-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/4178f71acb934fb89f169e7d667c20c6/resources/styles/root.json",layerType:"VectorTileLayer",title:"OpenStreetMap Dark Gray Canvas (for 3D)"},{id:"dark-gray-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_LightLabels_v1/SceneServer/layers/0",itemId:"f364b70b012a4da5a4b5921e193eac4a",layerType:"ArcGISSceneServiceLayer"},{id:"dark-gray-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Buildings_v1/SceneServer",itemId:"ca0470dbbddb4db28bad74ed39949e25",layerType:"ArcGISSceneServiceLayer"}]}},Oi="system",F_="unknown",xc="UTC",f5=Intl.DateTimeFormat().resolvedOptions().timeZone,wb=new Map([["AUS Central Standard Time","Australia/Darwin"],["AUS Eastern Standard Time","Australia/Sydney"],["Afghanistan Standard Time","Asia/Kabul"],["Alaskan Standard Time","America/Anchorage"],["Aleutian Standard Time","America/Adak"],["Altai Standard Time","Asia/Barnaul"],["Arab Standard Time","Asia/Riyadh"],["Arabian Standard Time","Asia/Dubai"],["Arabic Standard Time","Asia/Baghdad"],["Argentina Standard Time","America/Buenos_Aires"],["Astrakhan Standard Time","Europe/Astrakhan"],["Atlantic Standard Time","America/Halifax"],["Aus Central W. Standard Time","Australia/Eucla"],["Azerbaijan Standard Time","Asia/Baku"],["Azores Standard Time","Atlantic/Azores"],["Bahia Standard Time","America/Bahia"],["Bangladesh Standard Time","Asia/Dhaka"],["Belarus Standard Time","Europe/Minsk"],["Bougainville Standard Time","Pacific/Bougainville"],["Canada Central Standard Time","America/Regina"],["Cape Verde Standard Time","Atlantic/Cape_Verde"],["Caucasus Standard Time","Asia/Yerevan"],["Cen. Australia Standard Time","Australia/Adelaide"],["Central America Standard Time","America/Guatemala"],["Central Asia Standard Time","Asia/Bishkek"],["Central Brazilian Standard Time","America/Cuiaba"],["Central Europe Standard Time","Europe/Budapest"],["Central European Standard Time","Europe/Warsaw"],["Central Pacific Standard Time","Pacific/Guadalcanal"],["Central Standard Time","America/Chicago"],["Central Standard Time (Mexico)","America/Mexico_City"],["Chatham Islands Standard Time","Pacific/Chatham"],["China Standard Time","Asia/Shanghai"],["Cuba Standard Time","America/Havana"],["Dateline Standard Time","Etc/GMT+12"],["E. Africa Standard Time","Africa/Nairobi"],["E. Australia Standard Time","Australia/Brisbane"],["E. Europe Standard Time","Europe/Chisinau"],["E. South America Standard Time","America/Sao_Paulo"],["Easter Island Standard Time","Pacific/Easter"],["Eastern Standard Time","America/New_York"],["Eastern Standard Time (Mexico)","America/Cancun"],["Egypt Standard Time","Africa/Cairo"],["Ekaterinburg Standard Time","Asia/Yekaterinburg"],["FLE Standard Time","Europe/Kiev"],["Fiji Standard Time","Pacific/Fiji"],["GMT Standard Time","Europe/London"],["GTB Standard Time","Europe/Bucharest"],["Georgian Standard Time","Asia/Tbilisi"],["Greenland Standard Time","America/Godthab"],["Greenwich Standard Time","Atlantic/Reykjavik"],["Haiti Standard Time","America/Port-au-Prince"],["Hawaiian Standard Time","Pacific/Honolulu"],["India Standard Time","Asia/Calcutta"],["Iran Standard Time","Asia/Tehran"],["Israel Standard Time","Asia/Jerusalem"],["Jordan Standard Time","Asia/Amman"],["Kaliningrad Standard Time","Europe/Kaliningrad"],["Korea Standard Time","Asia/Seoul"],["Libya Standard Time","Africa/Tripoli"],["Line Islands Standard Time","Pacific/Kiritimati"],["Lord Howe Standard Time","Australia/Lord_Howe"],["Magadan Standard Time","Asia/Magadan"],["Magallanes Standard Time","America/Punta_Arenas"],["Marquesas Standard Time","Pacific/Marquesas"],["Mauritius Standard Time","Indian/Mauritius"],["Middle East Standard Time","Asia/Beirut"],["Montevideo Standard Time","America/Montevideo"],["Morocco Standard Time","Africa/Casablanca"],["Mountain Standard Time","America/Denver"],["Mountain Standard Time (Mexico)","America/Mazatlan"],["Myanmar Standard Time","Asia/Rangoon"],["N. Central Asia Standard Time","Asia/Novosibirsk"],["Namibia Standard Time","Africa/Windhoek"],["Nepal Standard Time","Asia/Katmandu"],["New Zealand Standard Time","Pacific/Auckland"],["Newfoundland Standard Time","America/St_Johns"],["Norfolk Standard Time","Pacific/Norfolk"],["North Asia East Standard Time","Asia/Irkutsk"],["North Asia Standard Time","Asia/Krasnoyarsk"],["North Korea Standard Time","Asia/Pyongyang"],["Omsk Standard Time","Asia/Omsk"],["Pacific SA Standard Time","America/Santiago"],["Pacific Standard Time","America/Los_Angeles"],["Pacific Standard Time (Mexico)","America/Tijuana"],["Pakistan Standard Time","Asia/Karachi"],["Paraguay Standard Time","America/Asuncion"],["Qyzylorda Standard Time","Asia/Qyzylorda"],["Romance Standard Time","Europe/Paris"],["Russia Time Zone 10","Asia/Srednekolymsk"],["Russia Time Zone 11","Asia/Kamchatka"],["Russia Time Zone 3","Europe/Samara"],["Russian Standard Time","Europe/Moscow"],["SA Eastern Standard Time","America/Cayenne"],["SA Pacific Standard Time","America/Bogota"],["SA Western Standard Time","America/La_Paz"],["SE Asia Standard Time","Asia/Bangkok"],["Saint Pierre Standard Time","America/Miquelon"],["Sakhalin Standard Time","Asia/Sakhalin"],["Samoa Standard Time","Pacific/Apia"],["Sao Tome Standard Time","Africa/Sao_Tome"],["Saratov Standard Time","Europe/Saratov"],["Singapore Standard Time","Asia/Singapore"],["South Africa Standard Time","Africa/Johannesburg"],["South Sudan Standard Time","Africa/Juba"],["Sri Lanka Standard Time","Asia/Colombo"],["Sudan Standard Time","Africa/Khartoum"],["Syria Standard Time","Asia/Damascus"],["Taipei Standard Time","Asia/Taipei"],["Tasmania Standard Time","Australia/Hobart"],["Tocantins Standard Time","America/Araguaina"],["Tokyo Standard Time","Asia/Tokyo"],["Tomsk Standard Time","Asia/Tomsk"],["Tonga Standard Time","Pacific/Tongatapu"],["Transbaikal Standard Time","Asia/Chita"],["Turkey Standard Time","Europe/Istanbul"],["Turks And Caicos Standard Time","America/Grand_Turk"],["US Eastern Standard Time","America/Indianapolis"],["US Mountain Standard Time","America/Phoenix"],["UTC","Etc/GMT"],["UTC+01","Etc/GMT-1"],["UTC+02","Etc/GMT-2"],["UTC+03","Etc/GMT-3"],["UTC+04","Etc/GMT-4"],["UTC+05","Etc/GMT-5"],["UTC+06","Etc/GMT-6"],["UTC+07","Etc/GMT-7"],["UTC+08","Etc/GMT-8"],["UTC+09","Etc/GMT-9"],["UTC+10","Etc/GMT-10"],["UTC+11","Etc/GMT-11"],["UTC+12","Etc/GMT-12"],["UTC+13","Etc/GMT-13"],["UTC+14","Etc/GMT-14"],["UTC-01","Etc/GMT+1"],["UTC-02","Etc/GMT+2"],["UTC-03","Etc/GMT+3"],["UTC-04","Etc/GMT+4"],["UTC-05","Etc/GMT+5"],["UTC-06","Etc/GMT+6"],["UTC-07","Etc/GMT+7"],["UTC-08","Etc/GMT+8"],["UTC-09","Etc/GMT+9"],["UTC-10","Etc/GMT+10"],["UTC-11","Etc/GMT+11"],["UTC-12","Etc/GMT+12"],["Ulaanbaatar Standard Time","Asia/Ulaanbaatar"],["Venezuela Standard Time","America/Caracas"],["Vladivostok Standard Time","Asia/Vladivostok"],["Volgograd Standard Time","Europe/Volgograd"],["W. Australia Standard Time","Australia/Perth"],["W. Central Africa Standard Time","Africa/Lagos"],["W. Europe Standard Time","Europe/Berlin"],["W. Mongolia Standard Time","Asia/Hovd"],["West Asia Standard Time","Asia/Tashkent"],["West Bank Standard Time","Asia/Hebron"],["West Pacific Standard Time","Pacific/Port_Moresby"],["Yakutsk Standard Time","Asia/Yakutsk"],["Yukon Standard Time","America/Whitehorse"]]);class zo extends Error{}class m5 extends zo{constructor(t){super(`Invalid DateTime: ${t.toMessage()}`)}}class y5 extends zo{constructor(t){super(`Invalid Interval: ${t.toMessage()}`)}}class g5 extends zo{constructor(t){super(`Invalid Duration: ${t.toMessage()}`)}}class Ra extends zo{}class C3 extends zo{constructor(t){super(`Invalid unit ${t}`)}}class _t extends zo{}class Es extends zo{constructor(){super("Zone is an abstract class")}}const F="numeric",ii="short",lr="long",Np={year:F,month:F,day:F},I3={year:F,month:ii,day:F},_5={year:F,month:ii,day:F,weekday:ii},R3={year:F,month:lr,day:F},k3={year:F,month:lr,day:F,weekday:lr},N3={hour:F,minute:F},L3={hour:F,minute:F,second:F},D3={hour:F,minute:F,second:F,timeZoneName:ii},F3={hour:F,minute:F,second:F,timeZoneName:lr},U3={hour:F,minute:F,hourCycle:"h23"},j3={hour:F,minute:F,second:F,hourCycle:"h23"},G3={hour:F,minute:F,second:F,hourCycle:"h23",timeZoneName:ii},z3={hour:F,minute:F,second:F,hourCycle:"h23",timeZoneName:lr},V3={year:F,month:F,day:F,hour:F,minute:F},B3={year:F,month:F,day:F,hour:F,minute:F,second:F},H3={year:F,month:ii,day:F,hour:F,minute:F},q3={year:F,month:ii,day:F,hour:F,minute:F,second:F},v5={year:F,month:ii,day:F,weekday:ii,hour:F,minute:F},W3={year:F,month:lr,day:F,hour:F,minute:F,timeZoneName:ii},Z3={year:F,month:lr,day:F,hour:F,minute:F,second:F,timeZoneName:ii},J3={year:F,month:lr,day:F,weekday:lr,hour:F,minute:F,timeZoneName:lr},Y3={year:F,month:lr,day:F,weekday:lr,hour:F,minute:F,second:F,timeZoneName:lr};class Vo{get type(){throw new Es}get name(){throw new Es}get ianaName(){return this.name}get isUniversal(){throw new Es}offsetName(t,r){throw new Es}formatOffset(t,r){throw new Es}offset(t){throw new Es}equals(t){throw new Es}get isValid(){throw new Es}}let Um=null;class Ff extends Vo{static get instance(){return Um===null&&(Um=new Ff),Um}get type(){return"system"}get name(){return new Intl.DateTimeFormat().resolvedOptions().timeZone}get isUniversal(){return!1}offsetName(t,{format:r,locale:i}){return nM(t,r,i)}formatOffset(t,r){return rc(this.offset(t),r)}offset(t){return-new Date(t).getTimezoneOffset()}equals(t){return t.type==="system"}get isValid(){return!0}}let vd={};function w5(e){return vd[e]||(vd[e]=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:e,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",era:"short"})),vd[e]}const b5={year:0,month:1,day:2,era:3,hour:4,minute:5,second:6};function S5(e,t){const r=e.format(t).replace(/\u200E/g,""),i=/(\d+)\/(\d+)\/(\d+) (AD|BC),? (\d+):(\d+):(\d+)/.exec(r),[,s,n,o,a,l,h,p]=i;return[o,s,n,a,l,h,p]}function T5(e,t){const r=e.formatToParts(t),i=[];for(let s=0;s<r.length;s++){const{type:n,value:o}=r[s],a=b5[n];n==="era"?i[a]=o:te(a)||(i[a]=parseInt(o,10))}return i}let Mh={};class cr extends Vo{static create(t){return Mh[t]||(Mh[t]=new cr(t)),Mh[t]}static resetCache(){Mh={},vd={}}static isValidSpecifier(t){return this.isValidZone(t)}static isValidZone(t){if(!t)return!1;try{return new Intl.DateTimeFormat("en-US",{timeZone:t}).format(),!0}catch{return!1}}constructor(t){super(),this.zoneName=t,this.valid=cr.isValidZone(t)}get type(){return"iana"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(t,{format:r,locale:i}){return nM(t,r,i,this.name)}formatOffset(t,r){return rc(this.offset(t),r)}offset(t){const r=new Date(t);if(isNaN(r))return NaN;const i=w5(this.name);let[s,n,o,a,l,h,p]=i.formatToParts?T5(i,r):S5(i,r);a==="BC"&&(s=-Math.abs(s)+1);const m=jf({year:s,month:n,day:o,hour:l===24?0:l,minute:h,second:p,millisecond:0});let y=+r;const _=y%1e3;return y-=_>=0?_:1e3+_,(m-y)/(60*1e3)}equals(t){return t.type==="iana"&&t.name===this.name}get isValid(){return this.valid}}let bb={};function $5(e,t={}){const r=JSON.stringify([e,t]);let i=bb[r];return i||(i=new Intl.ListFormat(e,t),bb[r]=i),i}let Og={};function Cg(e,t={}){const r=JSON.stringify([e,t]);let i=Og[r];return i||(i=new Intl.DateTimeFormat(e,t),Og[r]=i),i}let Ig={};function E5(e,t={}){const r=JSON.stringify([e,t]);let i=Ig[r];return i||(i=new Intl.NumberFormat(e,t),Ig[r]=i),i}let Rg={};function M5(e,t={}){const{base:r,...i}=t,s=JSON.stringify([e,i]);let n=Rg[s];return n||(n=new Intl.RelativeTimeFormat(e,t),Rg[s]=n),n}let lu=null;function x5(){return lu||(lu=new Intl.DateTimeFormat().resolvedOptions().locale,lu)}let Sb={};function A5(e){let t=Sb[e];if(!t){const r=new Intl.Locale(e);t="getWeekInfo"in r?r.getWeekInfo():r.weekInfo,Sb[e]=t}return t}function P5(e){const t=e.indexOf("-x-");t!==-1&&(e=e.substring(0,t));const r=e.indexOf("-u-");if(r===-1)return[e];{let i,s;try{i=Cg(e).resolvedOptions(),s=e}catch{const l=e.substring(0,r);i=Cg(l).resolvedOptions(),s=l}const{numberingSystem:n,calendar:o}=i;return[s,n,o]}}function O5(e,t,r){return(r||t)&&(e.includes("-u-")||(e+="-u"),r&&(e+=`-ca-${r}`),t&&(e+=`-nu-${t}`)),e}function C5(e){const t=[];for(let r=1;r<=12;r++){const i=q.utc(2009,r,1);t.push(e(i))}return t}function I5(e){const t=[];for(let r=1;r<=7;r++){const i=q.utc(2016,11,13+r);t.push(e(i))}return t}function xh(e,t,r,i){const s=e.listingMode();return s==="error"?null:s==="en"?r(t):i(t)}function R5(e){return e.numberingSystem&&e.numberingSystem!=="latn"?!1:e.numberingSystem==="latn"||!e.locale||e.locale.startsWith("en")||new Intl.DateTimeFormat(e.intl).resolvedOptions().numberingSystem==="latn"}class k5{constructor(t,r,i){this.padTo=i.padTo||0,this.floor=i.floor||!1;const{padTo:s,floor:n,...o}=i;if(!r||Object.keys(o).length>0){const a={useGrouping:!1,...i};i.padTo>0&&(a.minimumIntegerDigits=i.padTo),this.inf=E5(t,a)}}format(t){if(this.inf){const r=this.floor?Math.floor(t):t;return this.inf.format(r)}else{const r=this.floor?Math.floor(t):V_(t,3);return Ke(r,this.padTo)}}}class N5{constructor(t,r,i){this.opts=i,this.originalZone=void 0;let s;if(this.opts.timeZone)this.dt=t;else if(t.zone.type==="fixed"){const o=-1*(t.offset/60),a=o>=0?`Etc/GMT+${o}`:`Etc/GMT${o}`;t.offset!==0&&cr.create(a).valid?(s=a,this.dt=t):(s="UTC",this.dt=t.offset===0?t:t.setZone("UTC").plus({minutes:t.offset}),this.originalZone=t.zone)}else t.zone.type==="system"?this.dt=t:t.zone.type==="iana"?(this.dt=t,s=t.zone.name):(s="UTC",this.dt=t.setZone("UTC").plus({minutes:t.offset}),this.originalZone=t.zone);const n={...this.opts};n.timeZone=n.timeZone||s,this.dtf=Cg(r,n)}format(){return this.originalZone?this.formatToParts().map(({value:t})=>t).join(""):this.dtf.format(this.dt.toJSDate())}formatToParts(){const t=this.dtf.formatToParts(this.dt.toJSDate());return this.originalZone?t.map(r=>{if(r.type==="timeZoneName"){const i=this.originalZone.offsetName(this.dt.ts,{locale:this.dt.locale,format:this.opts.timeZoneName});return{...r,value:i}}else return r}):t}resolvedOptions(){return this.dtf.resolvedOptions()}}class L5{constructor(t,r,i){this.opts={style:"long",...i},!r&&iM()&&(this.rtf=M5(t,i))}format(t,r){return this.rtf?this.rtf.format(t,r):n4(r,t,this.opts.numeric,this.opts.style!=="long")}formatToParts(t,r){return this.rtf?this.rtf.formatToParts(t,r):[]}}const D5={firstDay:1,minimalDays:4,weekend:[6,7]};class _e{static fromOpts(t){return _e.create(t.locale,t.numberingSystem,t.outputCalendar,t.weekSettings,t.defaultToEN)}static create(t,r,i,s,n=!1){const o=t||Ve.defaultLocale,a=o||(n?"en-US":x5()),l=r||Ve.defaultNumberingSystem,h=i||Ve.defaultOutputCalendar,p=kg(s)||Ve.defaultWeekSettings;return new _e(a,l,h,p,o)}static resetCache(){lu=null,Og={},Ig={},Rg={}}static fromObject({locale:t,numberingSystem:r,outputCalendar:i,weekSettings:s}={}){return _e.create(t,r,i,s)}constructor(t,r,i,s,n){const[o,a,l]=P5(t);this.locale=o,this.numberingSystem=r||a||null,this.outputCalendar=i||l||null,this.weekSettings=s,this.intl=O5(this.locale,this.numberingSystem,this.outputCalendar),this.weekdaysCache={format:{},standalone:{}},this.monthsCache={format:{},standalone:{}},this.meridiemCache=null,this.eraCache={},this.specifiedLocale=n,this.fastNumbersCached=null}get fastNumbers(){return this.fastNumbersCached==null&&(this.fastNumbersCached=R5(this)),this.fastNumbersCached}listingMode(){const t=this.isEnglish(),r=(this.numberingSystem===null||this.numberingSystem==="latn")&&(this.outputCalendar===null||this.outputCalendar==="gregory");return t&&r?"en":"intl"}clone(t){return!t||Object.getOwnPropertyNames(t).length===0?this:_e.create(t.locale||this.specifiedLocale,t.numberingSystem||this.numberingSystem,t.outputCalendar||this.outputCalendar,kg(t.weekSettings)||this.weekSettings,t.defaultToEN||!1)}redefaultToEN(t={}){return this.clone({...t,defaultToEN:!0})}redefaultToSystem(t={}){return this.clone({...t,defaultToEN:!1})}months(t,r=!1){return xh(this,t,lM,()=>{const i=r?{month:t,day:"numeric"}:{month:t},s=r?"format":"standalone";return this.monthsCache[s][t]||(this.monthsCache[s][t]=C5(n=>this.extract(n,i,"month"))),this.monthsCache[s][t]})}weekdays(t,r=!1){return xh(this,t,hM,()=>{const i=r?{weekday:t,year:"numeric",month:"long",day:"numeric"}:{weekday:t},s=r?"format":"standalone";return this.weekdaysCache[s][t]||(this.weekdaysCache[s][t]=I5(n=>this.extract(n,i,"weekday"))),this.weekdaysCache[s][t]})}meridiems(){return xh(this,void 0,()=>dM,()=>{if(!this.meridiemCache){const t={hour:"numeric",hourCycle:"h12"};this.meridiemCache=[q.utc(2016,11,13,9),q.utc(2016,11,13,19)].map(r=>this.extract(r,t,"dayperiod"))}return this.meridiemCache})}eras(t){return xh(this,t,pM,()=>{const r={era:t};return this.eraCache[t]||(this.eraCache[t]=[q.utc(-40,1,1),q.utc(2017,1,1)].map(i=>this.extract(i,r,"era"))),this.eraCache[t]})}extract(t,r,i){const s=this.dtFormatter(t,r),n=s.formatToParts(),o=n.find(a=>a.type.toLowerCase()===i);return o?o.value:null}numberFormatter(t={}){return new k5(this.intl,t.forceSimple||this.fastNumbers,t)}dtFormatter(t,r={}){return new N5(t,this.intl,r)}relFormatter(t={}){return new L5(this.intl,this.isEnglish(),t)}listFormatter(t={}){return $5(this.intl,t)}isEnglish(){return this.locale==="en"||this.locale.toLowerCase()==="en-us"||new Intl.DateTimeFormat(this.intl).resolvedOptions().locale.startsWith("en-us")}getWeekSettings(){return this.weekSettings?this.weekSettings:sM()?A5(this.locale):D5}getStartOfWeek(){return this.getWeekSettings().firstDay}getMinDaysInFirstWeek(){return this.getWeekSettings().minimalDays}getWeekendDays(){return this.getWeekSettings().weekend}equals(t){return this.locale===t.locale&&this.numberingSystem===t.numberingSystem&&this.outputCalendar===t.outputCalendar}toString(){return`Locale(${this.locale}, ${this.numberingSystem}, ${this.outputCalendar})`}}let jm=null;class ft extends Vo{static get utcInstance(){return jm===null&&(jm=new ft(0)),jm}static instance(t){return t===0?ft.utcInstance:new ft(t)}static parseSpecifier(t){if(t){const r=t.match(/^utc(?:([+-]\d{1,2})(?::(\d{2}))?)?$/i);if(r)return new ft(Gf(r[1],r[2]))}return null}constructor(t){super(),this.fixed=t}get type(){return"fixed"}get name(){return this.fixed===0?"UTC":`UTC${rc(this.fixed,"narrow")}`}get ianaName(){return this.fixed===0?"Etc/UTC":`Etc/GMT${rc(-this.fixed,"narrow")}`}offsetName(){return this.name}formatOffset(t,r){return rc(this.fixed,r)}get isUniversal(){return!0}offset(){return this.fixed}equals(t){return t.type==="fixed"&&t.fixed===this.fixed}get isValid(){return!0}}class F5 extends Vo{constructor(t){super(),this.zoneName=t}get type(){return"invalid"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(){return null}formatOffset(){return""}offset(){return NaN}equals(){return!1}get isValid(){return!1}}function rn(e,t){if(te(e)||e===null)return t;if(e instanceof Vo)return e;if(B5(e)){const r=e.toLowerCase();return r==="default"?t:r==="local"||r==="system"?Ff.instance:r==="utc"||r==="gmt"?ft.utcInstance:ft.parseSpecifier(r)||cr.create(e)}else return cn(e)?ft.instance(e):typeof e=="object"&&"offset"in e&&typeof e.offset=="function"?e:new F5(e)}const U_={arab:"[٠-٩]",arabext:"[۰-۹]",bali:"[᭐-᭙]",beng:"[০-৯]",deva:"[०-९]",fullwide:"[０-９]",gujr:"[૦-૯]",hanidec:"[〇|一|二|三|四|五|六|七|八|九]",khmr:"[០-៩]",knda:"[೦-೯]",laoo:"[໐-໙]",limb:"[᥆-᥏]",mlym:"[൦-൯]",mong:"[᠐-᠙]",mymr:"[၀-၉]",orya:"[୦-୯]",tamldec:"[௦-௯]",telu:"[౦-౯]",thai:"[๐-๙]",tibt:"[༠-༩]",latn:"\\d"},Tb={arab:[1632,1641],arabext:[1776,1785],bali:[6992,7001],beng:[2534,2543],deva:[2406,2415],fullwide:[65296,65303],gujr:[2790,2799],khmr:[6112,6121],knda:[3302,3311],laoo:[3792,3801],limb:[6470,6479],mlym:[3430,3439],mong:[6160,6169],mymr:[4160,4169],orya:[2918,2927],tamldec:[3046,3055],telu:[3174,3183],thai:[3664,3673],tibt:[3872,3881]},U5=U_.hanidec.replace(/[\[|\]]/g,"").split("");function j5(e){let t=parseInt(e,10);if(isNaN(t)){t="";for(let r=0;r<e.length;r++){const i=e.charCodeAt(r);if(e[r].search(U_.hanidec)!==-1)t+=U5.indexOf(e[r]);else for(const s in Tb){const[n,o]=Tb[s];i>=n&&i<=o&&(t+=i-n)}}return parseInt(t,10)}else return t}let ua={};function G5(){ua={}}function Lr({numberingSystem:e},t=""){const r=e||"latn";return ua[r]||(ua[r]={}),ua[r][t]||(ua[r][t]=new RegExp(`${U_[r]}${t}`)),ua[r][t]}let $b=()=>Date.now(),Eb="system",Mb=null,xb=null,Ab=null,Pb=60,Ob,Cb=null;class Ve{static get now(){return $b}static set now(t){$b=t}static set defaultZone(t){Eb=t}static get defaultZone(){return rn(Eb,Ff.instance)}static get defaultLocale(){return Mb}static set defaultLocale(t){Mb=t}static get defaultNumberingSystem(){return xb}static set defaultNumberingSystem(t){xb=t}static get defaultOutputCalendar(){return Ab}static set defaultOutputCalendar(t){Ab=t}static get defaultWeekSettings(){return Cb}static set defaultWeekSettings(t){Cb=kg(t)}static get twoDigitCutoffYear(){return Pb}static set twoDigitCutoffYear(t){Pb=t%100}static get throwOnInvalid(){return Ob}static set throwOnInvalid(t){Ob=t}static resetCaches(){_e.resetCache(),cr.resetCache(),q.resetCache(),G5()}}class Xr{constructor(t,r){this.reason=t,this.explanation=r}toMessage(){return this.explanation?`${this.reason}: ${this.explanation}`:this.reason}}const K3=[0,31,59,90,120,151,181,212,243,273,304,334],X3=[0,31,60,91,121,152,182,213,244,274,305,335];function Mr(e,t){return new Xr("unit out of range",`you specified ${t} (of type ${typeof t}) as a ${e}, which is invalid`)}function j_(e,t,r){const i=new Date(Date.UTC(e,t-1,r));e<100&&e>=0&&i.setUTCFullYear(i.getUTCFullYear()-1900);const s=i.getUTCDay();return s===0?7:s}function Q3(e,t,r){return r+(rh(e)?X3:K3)[t-1]}function eM(e,t){const r=rh(e)?X3:K3,i=r.findIndex(n=>n<t),s=t-r[i];return{month:i+1,day:s}}function G_(e,t){return(e-t+7)%7+1}function Lp(e,t=4,r=1){const{year:i,month:s,day:n}=e,o=Q3(i,s,n),a=G_(j_(i,s,n),r);let l=Math.floor((o-a+14-t)/7),h;return l<1?(h=i-1,l=Ac(h,t,r)):l>Ac(i,t,r)?(h=i+1,l=1):h=i,{weekYear:h,weekNumber:l,weekday:a,...zf(e)}}function Ib(e,t=4,r=1){const{weekYear:i,weekNumber:s,weekday:n}=e,o=G_(j_(i,1,t),r),a=Va(i);let l=s*7+n-o-7+t,h;l<1?(h=i-1,l+=Va(h)):l>a?(h=i+1,l-=Va(i)):h=i;const{month:p,day:f}=eM(h,l);return{year:h,month:p,day:f,...zf(e)}}function Gm(e){const{year:t,month:r,day:i}=e,s=Q3(t,r,i);return{year:t,ordinal:s,...zf(e)}}function Rb(e){const{year:t,ordinal:r}=e,{month:i,day:s}=eM(t,r);return{year:t,month:i,day:s,...zf(e)}}function kb(e,t){if(!te(e.localWeekday)||!te(e.localWeekNumber)||!te(e.localWeekYear)){if(!te(e.weekday)||!te(e.weekNumber)||!te(e.weekYear))throw new Ra("Cannot mix locale-based week fields with ISO-based week fields");return te(e.localWeekday)||(e.weekday=e.localWeekday),te(e.localWeekNumber)||(e.weekNumber=e.localWeekNumber),te(e.localWeekYear)||(e.weekYear=e.localWeekYear),delete e.localWeekday,delete e.localWeekNumber,delete e.localWeekYear,{minDaysInFirstWeek:t.getMinDaysInFirstWeek(),startOfWeek:t.getStartOfWeek()}}else return{minDaysInFirstWeek:4,startOfWeek:1}}function z5(e,t=4,r=1){const i=Uf(e.weekYear),s=xr(e.weekNumber,1,Ac(e.weekYear,t,r)),n=xr(e.weekday,1,7);return i?s?n?!1:Mr("weekday",e.weekday):Mr("week",e.weekNumber):Mr("weekYear",e.weekYear)}function V5(e){const t=Uf(e.year),r=xr(e.ordinal,1,Va(e.year));return t?r?!1:Mr("ordinal",e.ordinal):Mr("year",e.year)}function tM(e){const t=Uf(e.year),r=xr(e.month,1,12),i=xr(e.day,1,Dp(e.year,e.month));return t?r?i?!1:Mr("day",e.day):Mr("month",e.month):Mr("year",e.year)}function rM(e){const{hour:t,minute:r,second:i,millisecond:s}=e,n=xr(t,0,23)||t===24&&r===0&&i===0&&s===0,o=xr(r,0,59),a=xr(i,0,59),l=xr(s,0,999);return n?o?a?l?!1:Mr("millisecond",s):Mr("second",i):Mr("minute",r):Mr("hour",t)}function te(e){return typeof e>"u"}function cn(e){return typeof e=="number"}function Uf(e){return typeof e=="number"&&e%1===0}function B5(e){return typeof e=="string"}function H5(e){return Object.prototype.toString.call(e)==="[object Date]"}function iM(){try{return typeof Intl<"u"&&!!Intl.RelativeTimeFormat}catch{return!1}}function sM(){try{return typeof Intl<"u"&&!!Intl.Locale&&("weekInfo"in Intl.Locale.prototype||"getWeekInfo"in Intl.Locale.prototype)}catch{return!1}}function q5(e){return Array.isArray(e)?e:[e]}function Nb(e,t,r){if(e.length!==0)return e.reduce((i,s)=>{const n=[t(s),s];return i&&r(i[0],n[0])===i[0]?i:n},null)[1]}function W5(e,t){return t.reduce((r,i)=>(r[i]=e[i],r),{})}function hl(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function kg(e){if(e==null)return null;if(typeof e!="object")throw new _t("Week settings must be an object");if(!xr(e.firstDay,1,7)||!xr(e.minimalDays,1,7)||!Array.isArray(e.weekend)||e.weekend.some(t=>!xr(t,1,7)))throw new _t("Invalid week settings");return{firstDay:e.firstDay,minimalDays:e.minimalDays,weekend:Array.from(e.weekend)}}function xr(e,t,r){return Uf(e)&&e>=t&&e<=r}function Z5(e,t){return e-t*Math.floor(e/t)}function Ke(e,t=2){const r=e<0;let i;return r?i="-"+(""+-e).padStart(t,"0"):i=(""+e).padStart(t,"0"),i}function Ys(e){if(!(te(e)||e===null||e===""))return parseInt(e,10)}function On(e){if(!(te(e)||e===null||e===""))return parseFloat(e)}function z_(e){if(!(te(e)||e===null||e==="")){const t=parseFloat("0."+e)*1e3;return Math.floor(t)}}function V_(e,t,r=!1){const i=10**t;return(r?Math.trunc:Math.round)(e*i)/i}function rh(e){return e%4===0&&(e%100!==0||e%400===0)}function Va(e){return rh(e)?366:365}function Dp(e,t){const r=Z5(t-1,12)+1,i=e+(t-r)/12;return r===2?rh(i)?29:28:[31,null,31,30,31,30,31,31,30,31,30,31][r-1]}function jf(e){let t=Date.UTC(e.year,e.month-1,e.day,e.hour,e.minute,e.second,e.millisecond);return e.year<100&&e.year>=0&&(t=new Date(t),t.setUTCFullYear(e.year,e.month-1,e.day)),+t}function Lb(e,t,r){return-G_(j_(e,1,t),r)+t-1}function Ac(e,t=4,r=1){const i=Lb(e,t,r),s=Lb(e+1,t,r);return(Va(e)-i+s)/7}function Ng(e){return e>99?e:e>Ve.twoDigitCutoffYear?1900+e:2e3+e}function nM(e,t,r,i=null){const s=new Date(e),n={hourCycle:"h23",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"};i&&(n.timeZone=i);const o={timeZoneName:t,...n},a=new Intl.DateTimeFormat(r,o).formatToParts(s).find(l=>l.type.toLowerCase()==="timezonename");return a?a.value:null}function Gf(e,t){let r=parseInt(e,10);Number.isNaN(r)&&(r=0);const i=parseInt(t,10)||0,s=r<0||Object.is(r,-0)?-i:i;return r*60+s}function oM(e){const t=Number(e);if(typeof e=="boolean"||e===""||Number.isNaN(t))throw new _t(`Invalid unit value ${e}`);return t}function Fp(e,t){const r={};for(const i in e)if(hl(e,i)){const s=e[i];if(s==null)continue;r[t(i)]=oM(s)}return r}function rc(e,t){const r=Math.trunc(Math.abs(e/60)),i=Math.trunc(Math.abs(e%60)),s=e>=0?"+":"-";switch(t){case"short":return`${s}${Ke(r,2)}:${Ke(i,2)}`;case"narrow":return`${s}${r}${i>0?`:${i}`:""}`;case"techie":return`${s}${Ke(r,2)}${Ke(i,2)}`;default:throw new RangeError(`Value format ${t} is out of range for property format`)}}function zf(e){return W5(e,["hour","minute","second","millisecond"])}const J5=["January","February","March","April","May","June","July","August","September","October","November","December"],aM=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],Y5=["J","F","M","A","M","J","J","A","S","O","N","D"];function lM(e){switch(e){case"narrow":return[...Y5];case"short":return[...aM];case"long":return[...J5];case"numeric":return["1","2","3","4","5","6","7","8","9","10","11","12"];case"2-digit":return["01","02","03","04","05","06","07","08","09","10","11","12"];default:return null}}const uM=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],cM=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],K5=["M","T","W","T","F","S","S"];function hM(e){switch(e){case"narrow":return[...K5];case"short":return[...cM];case"long":return[...uM];case"numeric":return["1","2","3","4","5","6","7"];default:return null}}const dM=["AM","PM"],X5=["Before Christ","Anno Domini"],Q5=["BC","AD"],e4=["B","A"];function pM(e){switch(e){case"narrow":return[...e4];case"short":return[...Q5];case"long":return[...X5];default:return null}}function t4(e){return dM[e.hour<12?0:1]}function r4(e,t){return hM(t)[e.weekday-1]}function i4(e,t){return lM(t)[e.month-1]}function s4(e,t){return pM(t)[e.year<0?0:1]}function n4(e,t,r="always",i=!1){const s={years:["year","yr."],quarters:["quarter","qtr."],months:["month","mo."],weeks:["week","wk."],days:["day","day","days"],hours:["hour","hr."],minutes:["minute","min."],seconds:["second","sec."]},n=["hours","minutes","seconds"].indexOf(e)===-1;if(r==="auto"&&n){const f=e==="days";switch(t){case 1:return f?"tomorrow":`next ${s[e][0]}`;case-1:return f?"yesterday":`last ${s[e][0]}`;case 0:return f?"today":`this ${s[e][0]}`}}const o=Object.is(t,-0)||t<0,a=Math.abs(t),l=a===1,h=s[e],p=i?l?h[1]:h[2]||h[1]:l?s[e][0]:e;return o?`${a} ${p} ago`:`in ${a} ${p}`}function Db(e,t){let r="";for(const i of e)i.literal?r+=i.val:r+=t(i.val);return r}const o4={D:Np,DD:I3,DDD:R3,DDDD:k3,t:N3,tt:L3,ttt:D3,tttt:F3,T:U3,TT:j3,TTT:G3,TTTT:z3,f:V3,ff:H3,fff:W3,ffff:J3,F:B3,FF:q3,FFF:Z3,FFFF:Y3};class bt{static create(t,r={}){return new bt(t,r)}static parseFormat(t){let r=null,i="",s=!1;const n=[];for(let o=0;o<t.length;o++){const a=t.charAt(o);a==="'"?(i.length>0&&n.push({literal:s||/^\s+$/.test(i),val:i}),r=null,i="",s=!s):s||a===r?i+=a:(i.length>0&&n.push({literal:/^\s+$/.test(i),val:i}),i=a,r=a)}return i.length>0&&n.push({literal:s||/^\s+$/.test(i),val:i}),n}static macroTokenToFormatOpts(t){return o4[t]}constructor(t,r){this.opts=r,this.loc=t,this.systemLoc=null}formatWithSystemDefault(t,r){return this.systemLoc===null&&(this.systemLoc=this.loc.redefaultToSystem()),this.systemLoc.dtFormatter(t,{...this.opts,...r}).format()}dtFormatter(t,r={}){return this.loc.dtFormatter(t,{...this.opts,...r})}formatDateTime(t,r){return this.dtFormatter(t,r).format()}formatDateTimeParts(t,r){return this.dtFormatter(t,r).formatToParts()}formatInterval(t,r){return this.dtFormatter(t.start,r).dtf.formatRange(t.start.toJSDate(),t.end.toJSDate())}resolvedOptions(t,r){return this.dtFormatter(t,r).resolvedOptions()}num(t,r=0){if(this.opts.forceSimple)return Ke(t,r);const i={...this.opts};return r>0&&(i.padTo=r),this.loc.numberFormatter(i).format(t)}formatDateTimeFromString(t,r){const i=this.loc.listingMode()==="en",s=this.loc.outputCalendar&&this.loc.outputCalendar!=="gregory",n=(y,_)=>this.loc.extract(t,y,_),o=y=>t.isOffsetFixed&&t.offset===0&&y.allowZ?"Z":t.isValid?t.zone.formatOffset(t.ts,y.format):"",a=()=>i?t4(t):n({hour:"numeric",hourCycle:"h12"},"dayperiod"),l=(y,_)=>i?i4(t,y):n(_?{month:y}:{month:y,day:"numeric"},"month"),h=(y,_)=>i?r4(t,y):n(_?{weekday:y}:{weekday:y,month:"long",day:"numeric"},"weekday"),p=y=>{const _=bt.macroTokenToFormatOpts(y);return _?this.formatWithSystemDefault(t,_):y},f=y=>i?s4(t,y):n({era:y},"era"),m=y=>{switch(y){case"S":return this.num(t.millisecond);case"u":case"SSS":return this.num(t.millisecond,3);case"s":return this.num(t.second);case"ss":return this.num(t.second,2);case"uu":return this.num(Math.floor(t.millisecond/10),2);case"uuu":return this.num(Math.floor(t.millisecond/100));case"m":return this.num(t.minute);case"mm":return this.num(t.minute,2);case"h":return this.num(t.hour%12===0?12:t.hour%12);case"hh":return this.num(t.hour%12===0?12:t.hour%12,2);case"H":return this.num(t.hour);case"HH":return this.num(t.hour,2);case"Z":return o({format:"narrow",allowZ:this.opts.allowZ});case"ZZ":return o({format:"short",allowZ:this.opts.allowZ});case"ZZZ":return o({format:"techie",allowZ:this.opts.allowZ});case"ZZZZ":return t.zone.offsetName(t.ts,{format:"short",locale:this.loc.locale});case"ZZZZZ":return t.zone.offsetName(t.ts,{format:"long",locale:this.loc.locale});case"z":return t.zoneName;case"a":return a();case"d":return s?n({day:"numeric"},"day"):this.num(t.day);case"dd":return s?n({day:"2-digit"},"day"):this.num(t.day,2);case"c":return this.num(t.weekday);case"ccc":return h("short",!0);case"cccc":return h("long",!0);case"ccccc":return h("narrow",!0);case"E":return this.num(t.weekday);case"EEE":return h("short",!1);case"EEEE":return h("long",!1);case"EEEEE":return h("narrow",!1);case"L":return s?n({month:"numeric",day:"numeric"},"month"):this.num(t.month);case"LL":return s?n({month:"2-digit",day:"numeric"},"month"):this.num(t.month,2);case"LLL":return l("short",!0);case"LLLL":return l("long",!0);case"LLLLL":return l("narrow",!0);case"M":return s?n({month:"numeric"},"month"):this.num(t.month);case"MM":return s?n({month:"2-digit"},"month"):this.num(t.month,2);case"MMM":return l("short",!1);case"MMMM":return l("long",!1);case"MMMMM":return l("narrow",!1);case"y":return s?n({year:"numeric"},"year"):this.num(t.year);case"yy":return s?n({year:"2-digit"},"year"):this.num(t.year.toString().slice(-2),2);case"yyyy":return s?n({year:"numeric"},"year"):this.num(t.year,4);case"yyyyyy":return s?n({year:"numeric"},"year"):this.num(t.year,6);case"G":return f("short");case"GG":return f("long");case"GGGGG":return f("narrow");case"kk":return this.num(t.weekYear.toString().slice(-2),2);case"kkkk":return this.num(t.weekYear,4);case"W":return this.num(t.weekNumber);case"WW":return this.num(t.weekNumber,2);case"n":return this.num(t.localWeekNumber);case"nn":return this.num(t.localWeekNumber,2);case"ii":return this.num(t.localWeekYear.toString().slice(-2),2);case"iiii":return this.num(t.localWeekYear,4);case"o":return this.num(t.ordinal);case"ooo":return this.num(t.ordinal,3);case"q":return this.num(t.quarter);case"qq":return this.num(t.quarter,2);case"X":return this.num(Math.floor(t.ts/1e3));case"x":return this.num(t.ts);default:return p(y)}};return Db(bt.parseFormat(r),m)}formatDurationFromString(t,r){const i=l=>{switch(l[0]){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":return"hour";case"d":return"day";case"w":return"week";case"M":return"month";case"y":return"year";default:return null}},s=l=>h=>{const p=i(h);return p?this.num(l.get(p),h.length):h},n=bt.parseFormat(r),o=n.reduce((l,{literal:h,val:p})=>h?l:l.concat(p),[]),a=t.shiftTo(...o.map(i).filter(l=>l));return Db(n,s(a))}}const fM=/[A-Za-z_+-]{1,256}(?::?\/[A-Za-z0-9_+-]{1,256}(?:\/[A-Za-z0-9_+-]{1,256})?)?/;function El(...e){const t=e.reduce((r,i)=>r+i.source,"");return RegExp(`^${t}$`)}function Ml(...e){return t=>e.reduce(([r,i,s],n)=>{const[o,a,l]=n(t,s);return[{...r,...o},a||i,l]},[{},null,1]).slice(0,2)}function xl(e,...t){if(e==null)return[null,null];for(const[r,i]of t){const s=r.exec(e);if(s)return i(s)}return[null,null]}function mM(...e){return(t,r)=>{const i={};let s;for(s=0;s<e.length;s++)i[e[s]]=Ys(t[r+s]);return[i,null,r+s]}}const yM=/(?:(Z)|([+-]\d\d)(?::?(\d\d))?)/,a4=`(?:${yM.source}?(?:\\[(${fM.source})\\])?)?`,B_=/(\d\d)(?::?(\d\d)(?::?(\d\d)(?:[.,](\d{1,30}))?)?)?/,gM=RegExp(`${B_.source}${a4}`),H_=RegExp(`(?:T${gM.source})?`),l4=/([+-]\d{6}|\d{4})(?:-?(\d\d)(?:-?(\d\d))?)?/,u4=/(\d{4})-?W(\d\d)(?:-?(\d))?/,c4=/(\d{4})-?(\d{3})/,h4=mM("weekYear","weekNumber","weekDay"),d4=mM("year","ordinal"),p4=/(\d{4})-(\d\d)-(\d\d)/,_M=RegExp(`${B_.source} ?(?:${yM.source}|(${fM.source}))?`),f4=RegExp(`(?: ${_M.source})?`);function Ba(e,t,r){const i=e[t];return te(i)?r:Ys(i)}function m4(e,t){return[{year:Ba(e,t),month:Ba(e,t+1,1),day:Ba(e,t+2,1)},null,t+3]}function Al(e,t){return[{hours:Ba(e,t,0),minutes:Ba(e,t+1,0),seconds:Ba(e,t+2,0),milliseconds:z_(e[t+3])},null,t+4]}function ih(e,t){const r=!e[t]&&!e[t+1],i=Gf(e[t+1],e[t+2]),s=r?null:ft.instance(i);return[{},s,t+3]}function sh(e,t){const r=e[t]?cr.create(e[t]):null;return[{},r,t+1]}const y4=RegExp(`^T?${B_.source}$`),g4=/^-?P(?:(?:(-?\d{1,20}(?:\.\d{1,20})?)Y)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20}(?:\.\d{1,20})?)W)?(?:(-?\d{1,20}(?:\.\d{1,20})?)D)?(?:T(?:(-?\d{1,20}(?:\.\d{1,20})?)H)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20})(?:[.,](-?\d{1,20}))?S)?)?)$/;function _4(e){const[t,r,i,s,n,o,a,l,h]=e,p=t[0]==="-",f=l&&l[0]==="-",m=(y,_=!1)=>y!==void 0&&(_||y&&p)?-y:y;return[{years:m(On(r)),months:m(On(i)),weeks:m(On(s)),days:m(On(n)),hours:m(On(o)),minutes:m(On(a)),seconds:m(On(l),l==="-0"),milliseconds:m(z_(h),f)}]}const v4={GMT:0,EDT:-4*60,EST:-5*60,CDT:-5*60,CST:-6*60,MDT:-6*60,MST:-7*60,PDT:-7*60,PST:-8*60};function q_(e,t,r,i,s,n,o){const a={year:t.length===2?Ng(Ys(t)):Ys(t),month:aM.indexOf(r)+1,day:Ys(i),hour:Ys(s),minute:Ys(n)};return o&&(a.second=Ys(o)),e&&(a.weekday=e.length>3?uM.indexOf(e)+1:cM.indexOf(e)+1),a}const w4=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|(?:([+-]\d\d)(\d\d)))$/;function b4(e){const[,t,r,i,s,n,o,a,l,h,p,f]=e,m=q_(t,s,i,r,n,o,a);let y;return l?y=v4[l]:h?y=0:y=Gf(p,f),[m,new ft(y)]}function S4(e){return e.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").trim()}const T4=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun), (\d\d) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) (\d{4}) (\d\d):(\d\d):(\d\d) GMT$/,$4=/^(Monday|Tuesday|Wednesday|Thursday|Friday|Saturday|Sunday), (\d\d)-(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)-(\d\d) (\d\d):(\d\d):(\d\d) GMT$/,E4=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) ( \d|\d\d) (\d\d):(\d\d):(\d\d) (\d{4})$/;function Fb(e){const[,t,r,i,s,n,o,a]=e;return[q_(t,s,i,r,n,o,a),ft.utcInstance]}function M4(e){const[,t,r,i,s,n,o,a]=e;return[q_(t,a,r,i,s,n,o),ft.utcInstance]}const x4=El(l4,H_),A4=El(u4,H_),P4=El(c4,H_),O4=El(gM),vM=Ml(m4,Al,ih,sh),C4=Ml(h4,Al,ih,sh),I4=Ml(d4,Al,ih,sh),R4=Ml(Al,ih,sh);function k4(e){return xl(e,[x4,vM],[A4,C4],[P4,I4],[O4,R4])}function N4(e){return xl(S4(e),[w4,b4])}function L4(e){return xl(e,[T4,Fb],[$4,Fb],[E4,M4])}function D4(e){return xl(e,[g4,_4])}const F4=Ml(Al);function U4(e){return xl(e,[y4,F4])}const j4=El(p4,f4),G4=El(_M),z4=Ml(Al,ih,sh);function V4(e){return xl(e,[j4,vM],[G4,z4])}const Ub="Invalid Duration",wM={weeks:{days:7,hours:7*24,minutes:7*24*60,seconds:7*24*60*60,milliseconds:7*24*60*60*1e3},days:{hours:24,minutes:24*60,seconds:24*60*60,milliseconds:24*60*60*1e3},hours:{minutes:60,seconds:60*60,milliseconds:60*60*1e3},minutes:{seconds:60,milliseconds:60*1e3},seconds:{milliseconds:1e3}},B4={years:{quarters:4,months:12,weeks:52,days:365,hours:365*24,minutes:365*24*60,seconds:365*24*60*60,milliseconds:365*24*60*60*1e3},quarters:{months:3,weeks:13,days:91,hours:91*24,minutes:91*24*60,seconds:91*24*60*60,milliseconds:91*24*60*60*1e3},months:{weeks:4,days:30,hours:30*24,minutes:30*24*60,seconds:30*24*60*60,milliseconds:30*24*60*60*1e3},...wM},pr=146097/400,Zo=146097/4800,H4={years:{quarters:4,months:12,weeks:pr/7,days:pr,hours:pr*24,minutes:pr*24*60,seconds:pr*24*60*60,milliseconds:pr*24*60*60*1e3},quarters:{months:3,weeks:pr/28,days:pr/4,hours:pr*24/4,minutes:pr*24*60/4,seconds:pr*24*60*60/4,milliseconds:pr*24*60*60*1e3/4},months:{weeks:Zo/7,days:Zo,hours:Zo*24,minutes:Zo*24*60,seconds:Zo*24*60*60,milliseconds:Zo*24*60*60*1e3},...wM},go=["years","quarters","months","weeks","days","hours","minutes","seconds","milliseconds"],q4=go.slice(0).reverse();function Ms(e,t,r=!1){const i={values:r?t.values:{...e.values,...t.values||{}},loc:e.loc.clone(t.loc),conversionAccuracy:t.conversionAccuracy||e.conversionAccuracy,matrix:t.matrix||e.matrix};return new he(i)}function bM(e,t){let r=t.milliseconds??0;for(const i of q4.slice(1))t[i]&&(r+=t[i]*e[i].milliseconds);return r}function jb(e,t){const r=bM(e,t)<0?-1:1;go.reduceRight((i,s)=>{if(te(t[s]))return i;if(i){const n=t[i]*r,o=e[s][i],a=Math.floor(n/o);t[s]+=a*r,t[i]-=a*o*r}return s},null),go.reduce((i,s)=>{if(te(t[s]))return i;if(i){const n=t[i]%1;t[i]-=n,t[s]+=n*e[i][s]}return s},null)}function W4(e){const t={};for(const[r,i]of Object.entries(e))i!==0&&(t[r]=i);return t}class he{constructor(t){const r=t.conversionAccuracy==="longterm"||!1;let i=r?H4:B4;t.matrix&&(i=t.matrix),this.values=t.values,this.loc=t.loc||_e.create(),this.conversionAccuracy=r?"longterm":"casual",this.invalid=t.invalid||null,this.matrix=i,this.isLuxonDuration=!0}static fromMillis(t,r){return he.fromObject({milliseconds:t},r)}static fromObject(t,r={}){if(t==null||typeof t!="object")throw new _t(`Duration.fromObject: argument expected to be an object, got ${t===null?"null":typeof t}`);return new he({values:Fp(t,he.normalizeUnit),loc:_e.fromObject(r),conversionAccuracy:r.conversionAccuracy,matrix:r.matrix})}static fromDurationLike(t){if(cn(t))return he.fromMillis(t);if(he.isDuration(t))return t;if(typeof t=="object")return he.fromObject(t);throw new _t(`Unknown duration argument ${t} of type ${typeof t}`)}static fromISO(t,r){const[i]=D4(t);return i?he.fromObject(i,r):he.invalid("unparsable",`the input "${t}" can't be parsed as ISO 8601`)}static fromISOTime(t,r){const[i]=U4(t);return i?he.fromObject(i,r):he.invalid("unparsable",`the input "${t}" can't be parsed as ISO 8601`)}static invalid(t,r=null){if(!t)throw new _t("need to specify a reason the Duration is invalid");const i=t instanceof Xr?t:new Xr(t,r);if(Ve.throwOnInvalid)throw new g5(i);return new he({invalid:i})}static normalizeUnit(t){const r={year:"years",years:"years",quarter:"quarters",quarters:"quarters",month:"months",months:"months",week:"weeks",weeks:"weeks",day:"days",days:"days",hour:"hours",hours:"hours",minute:"minutes",minutes:"minutes",second:"seconds",seconds:"seconds",millisecond:"milliseconds",milliseconds:"milliseconds"}[t&&t.toLowerCase()];if(!r)throw new C3(t);return r}static isDuration(t){return t&&t.isLuxonDuration||!1}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}toFormat(t,r={}){const i={...r,floor:r.round!==!1&&r.floor!==!1};return this.isValid?bt.create(this.loc,i).formatDurationFromString(this,t):Ub}toHuman(t={}){if(!this.isValid)return Ub;const r=go.map(i=>{const s=this.values[i];return te(s)?null:this.loc.numberFormatter({style:"unit",unitDisplay:"long",...t,unit:i.slice(0,-1)}).format(s)}).filter(i=>i);return this.loc.listFormatter({type:"conjunction",style:t.listStyle||"narrow",...t}).format(r)}toObject(){return this.isValid?{...this.values}:{}}toISO(){if(!this.isValid)return null;let t="P";return this.years!==0&&(t+=this.years+"Y"),(this.months!==0||this.quarters!==0)&&(t+=this.months+this.quarters*3+"M"),this.weeks!==0&&(t+=this.weeks+"W"),this.days!==0&&(t+=this.days+"D"),(this.hours!==0||this.minutes!==0||this.seconds!==0||this.milliseconds!==0)&&(t+="T"),this.hours!==0&&(t+=this.hours+"H"),this.minutes!==0&&(t+=this.minutes+"M"),(this.seconds!==0||this.milliseconds!==0)&&(t+=V_(this.seconds+this.milliseconds/1e3,3)+"S"),t==="P"&&(t+="T0S"),t}toISOTime(t={}){if(!this.isValid)return null;const r=this.toMillis();return r<0||r>=864e5?null:(t={suppressMilliseconds:!1,suppressSeconds:!1,includePrefix:!1,format:"extended",...t,includeOffset:!1},q.fromMillis(r,{zone:"UTC"}).toISOTime(t))}toJSON(){return this.toISO()}toString(){return this.toISO()}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`Duration { values: ${JSON.stringify(this.values)} }`:`Duration { Invalid, reason: ${this.invalidReason} }`}toMillis(){return this.isValid?bM(this.matrix,this.values):NaN}valueOf(){return this.toMillis()}plus(t){if(!this.isValid)return this;const r=he.fromDurationLike(t),i={};for(const s of go)(hl(r.values,s)||hl(this.values,s))&&(i[s]=r.get(s)+this.get(s));return Ms(this,{values:i},!0)}minus(t){if(!this.isValid)return this;const r=he.fromDurationLike(t);return this.plus(r.negate())}mapUnits(t){if(!this.isValid)return this;const r={};for(const i of Object.keys(this.values))r[i]=oM(t(this.values[i],i));return Ms(this,{values:r},!0)}get(t){return this[he.normalizeUnit(t)]}set(t){if(!this.isValid)return this;const r={...this.values,...Fp(t,he.normalizeUnit)};return Ms(this,{values:r})}reconfigure({locale:t,numberingSystem:r,conversionAccuracy:i,matrix:s}={}){const o={loc:this.loc.clone({locale:t,numberingSystem:r}),matrix:s,conversionAccuracy:i};return Ms(this,o)}as(t){return this.isValid?this.shiftTo(t).get(t):NaN}normalize(){if(!this.isValid)return this;const t=this.toObject();return jb(this.matrix,t),Ms(this,{values:t},!0)}rescale(){if(!this.isValid)return this;const t=W4(this.normalize().shiftToAll().toObject());return Ms(this,{values:t},!0)}shiftTo(...t){if(!this.isValid)return this;if(t.length===0)return this;t=t.map(o=>he.normalizeUnit(o));const r={},i={},s=this.toObject();let n;for(const o of go)if(t.indexOf(o)>=0){n=o;let a=0;for(const h in i)a+=this.matrix[h][o]*i[h],i[h]=0;cn(s[o])&&(a+=s[o]);const l=Math.trunc(a);r[o]=l,i[o]=(a*1e3-l*1e3)/1e3}else cn(s[o])&&(i[o]=s[o]);for(const o in i)i[o]!==0&&(r[n]+=o===n?i[o]:i[o]/this.matrix[n][o]);return jb(this.matrix,r),Ms(this,{values:r},!0)}shiftToAll(){return this.isValid?this.shiftTo("years","months","weeks","days","hours","minutes","seconds","milliseconds"):this}negate(){if(!this.isValid)return this;const t={};for(const r of Object.keys(this.values))t[r]=this.values[r]===0?0:-this.values[r];return Ms(this,{values:t},!0)}get years(){return this.isValid?this.values.years||0:NaN}get quarters(){return this.isValid?this.values.quarters||0:NaN}get months(){return this.isValid?this.values.months||0:NaN}get weeks(){return this.isValid?this.values.weeks||0:NaN}get days(){return this.isValid?this.values.days||0:NaN}get hours(){return this.isValid?this.values.hours||0:NaN}get minutes(){return this.isValid?this.values.minutes||0:NaN}get seconds(){return this.isValid?this.values.seconds||0:NaN}get milliseconds(){return this.isValid?this.values.milliseconds||0:NaN}get isValid(){return this.invalid===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}equals(t){if(!this.isValid||!t.isValid||!this.loc.equals(t.loc))return!1;function r(i,s){return i===void 0||i===0?s===void 0||s===0:i===s}for(const i of go)if(!r(this.values[i],t.values[i]))return!1;return!0}}const Jo="Invalid Interval";function Z4(e,t){return!e||!e.isValid?ze.invalid("missing or invalid start"):!t||!t.isValid?ze.invalid("missing or invalid end"):t<e?ze.invalid("end before start",`The end of an interval must be after its start, but you had start=${e.toISO()} and end=${t.toISO()}`):null}class ze{constructor(t){this.s=t.start,this.e=t.end,this.invalid=t.invalid||null,this.isLuxonInterval=!0}static invalid(t,r=null){if(!t)throw new _t("need to specify a reason the Interval is invalid");const i=t instanceof Xr?t:new Xr(t,r);if(Ve.throwOnInvalid)throw new y5(i);return new ze({invalid:i})}static fromDateTimes(t,r){const i=Nl(t),s=Nl(r),n=Z4(i,s);return n??new ze({start:i,end:s})}static after(t,r){const i=he.fromDurationLike(r),s=Nl(t);return ze.fromDateTimes(s,s.plus(i))}static before(t,r){const i=he.fromDurationLike(r),s=Nl(t);return ze.fromDateTimes(s.minus(i),s)}static fromISO(t,r){const[i,s]=(t||"").split("/",2);if(i&&s){let n,o;try{n=q.fromISO(i,r),o=n.isValid}catch{o=!1}let a,l;try{a=q.fromISO(s,r),l=a.isValid}catch{l=!1}if(o&&l)return ze.fromDateTimes(n,a);if(o){const h=he.fromISO(s,r);if(h.isValid)return ze.after(n,h)}else if(l){const h=he.fromISO(i,r);if(h.isValid)return ze.before(a,h)}}return ze.invalid("unparsable",`the input "${t}" can't be parsed as ISO 8601`)}static isInterval(t){return t&&t.isLuxonInterval||!1}get start(){return this.isValid?this.s:null}get end(){return this.isValid?this.e:null}get isValid(){return this.invalidReason===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}length(t="milliseconds"){return this.isValid?this.toDuration(t).get(t):NaN}count(t="milliseconds",r){if(!this.isValid)return NaN;const i=this.start.startOf(t,r);let s;return r!=null&&r.useLocaleWeeks?s=this.end.reconfigure({locale:i.locale}):s=this.end,s=s.startOf(t,r),Math.floor(s.diff(i,t).get(t))+(s.valueOf()!==this.end.valueOf())}hasSame(t){return this.isValid?this.isEmpty()||this.e.minus(1).hasSame(this.s,t):!1}isEmpty(){return this.s.valueOf()===this.e.valueOf()}isAfter(t){return this.isValid?this.s>t:!1}isBefore(t){return this.isValid?this.e<=t:!1}contains(t){return this.isValid?this.s<=t&&this.e>t:!1}set({start:t,end:r}={}){return this.isValid?ze.fromDateTimes(t||this.s,r||this.e):this}splitAt(...t){if(!this.isValid)return[];const r=t.map(Nl).filter(o=>this.contains(o)).sort((o,a)=>o.toMillis()-a.toMillis()),i=[];let{s}=this,n=0;for(;s<this.e;){const o=r[n]||this.e,a=+o>+this.e?this.e:o;i.push(ze.fromDateTimes(s,a)),s=a,n+=1}return i}splitBy(t){const r=he.fromDurationLike(t);if(!this.isValid||!r.isValid||r.as("milliseconds")===0)return[];let{s:i}=this,s=1,n;const o=[];for(;i<this.e;){const a=this.start.plus(r.mapUnits(l=>l*s));n=+a>+this.e?this.e:a,o.push(ze.fromDateTimes(i,n)),i=n,s+=1}return o}divideEqually(t){return this.isValid?this.splitBy(this.length()/t).slice(0,t):[]}overlaps(t){return this.e>t.s&&this.s<t.e}abutsStart(t){return this.isValid?+this.e==+t.s:!1}abutsEnd(t){return this.isValid?+t.e==+this.s:!1}engulfs(t){return this.isValid?this.s<=t.s&&this.e>=t.e:!1}equals(t){return!this.isValid||!t.isValid?!1:this.s.equals(t.s)&&this.e.equals(t.e)}intersection(t){if(!this.isValid)return this;const r=this.s>t.s?this.s:t.s,i=this.e<t.e?this.e:t.e;return r>=i?null:ze.fromDateTimes(r,i)}union(t){if(!this.isValid)return this;const r=this.s<t.s?this.s:t.s,i=this.e>t.e?this.e:t.e;return ze.fromDateTimes(r,i)}static merge(t){const[r,i]=t.sort((s,n)=>s.s-n.s).reduce(([s,n],o)=>n?n.overlaps(o)||n.abutsStart(o)?[s,n.union(o)]:[s.concat([n]),o]:[s,o],[[],null]);return i&&r.push(i),r}static xor(t){let r=null,i=0;const s=[],n=t.map(l=>[{time:l.s,type:"s"},{time:l.e,type:"e"}]),o=Array.prototype.concat(...n),a=o.sort((l,h)=>l.time-h.time);for(const l of a)i+=l.type==="s"?1:-1,i===1?r=l.time:(r&&+r!=+l.time&&s.push(ze.fromDateTimes(r,l.time)),r=null);return ze.merge(s)}difference(...t){return ze.xor([this].concat(t)).map(r=>this.intersection(r)).filter(r=>r&&!r.isEmpty())}toString(){return this.isValid?`[${this.s.toISO()} – ${this.e.toISO()})`:Jo}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`Interval { start: ${this.s.toISO()}, end: ${this.e.toISO()} }`:`Interval { Invalid, reason: ${this.invalidReason} }`}toLocaleString(t=Np,r={}){return this.isValid?bt.create(this.s.loc.clone(r),t).formatInterval(this):Jo}toISO(t){return this.isValid?`${this.s.toISO(t)}/${this.e.toISO(t)}`:Jo}toISODate(){return this.isValid?`${this.s.toISODate()}/${this.e.toISODate()}`:Jo}toISOTime(t){return this.isValid?`${this.s.toISOTime(t)}/${this.e.toISOTime(t)}`:Jo}toFormat(t,{separator:r=" – "}={}){return this.isValid?`${this.s.toFormat(t)}${r}${this.e.toFormat(t)}`:Jo}toDuration(t,r){return this.isValid?this.e.diff(this.s,t,r):he.invalid(this.invalidReason)}mapEndpoints(t){return ze.fromDateTimes(t(this.s),t(this.e))}}class Ah{static hasDST(t=Ve.defaultZone){const r=q.now().setZone(t).set({month:12});return!t.isUniversal&&r.offset!==r.set({month:6}).offset}static isValidIANAZone(t){return cr.isValidZone(t)}static normalizeZone(t){return rn(t,Ve.defaultZone)}static getStartOfWeek({locale:t=null,locObj:r=null}={}){return(r||_e.create(t)).getStartOfWeek()}static getMinimumDaysInFirstWeek({locale:t=null,locObj:r=null}={}){return(r||_e.create(t)).getMinDaysInFirstWeek()}static getWeekendWeekdays({locale:t=null,locObj:r=null}={}){return(r||_e.create(t)).getWeekendDays().slice()}static months(t="long",{locale:r=null,numberingSystem:i=null,locObj:s=null,outputCalendar:n="gregory"}={}){return(s||_e.create(r,i,n)).months(t)}static monthsFormat(t="long",{locale:r=null,numberingSystem:i=null,locObj:s=null,outputCalendar:n="gregory"}={}){return(s||_e.create(r,i,n)).months(t,!0)}static weekdays(t="long",{locale:r=null,numberingSystem:i=null,locObj:s=null}={}){return(s||_e.create(r,i,null)).weekdays(t)}static weekdaysFormat(t="long",{locale:r=null,numberingSystem:i=null,locObj:s=null}={}){return(s||_e.create(r,i,null)).weekdays(t,!0)}static meridiems({locale:t=null}={}){return _e.create(t).meridiems()}static eras(t="short",{locale:r=null}={}){return _e.create(r,null,"gregory").eras(t)}static features(){return{relative:iM(),localeWeek:sM()}}}function Gb(e,t){const r=s=>s.toUTC(0,{keepLocalTime:!0}).startOf("day").valueOf(),i=r(t)-r(e);return Math.floor(he.fromMillis(i).as("days"))}function J4(e,t,r){const i=[["years",(l,h)=>h.year-l.year],["quarters",(l,h)=>h.quarter-l.quarter+(h.year-l.year)*4],["months",(l,h)=>h.month-l.month+(h.year-l.year)*12],["weeks",(l,h)=>{const p=Gb(l,h);return(p-p%7)/7}],["days",Gb]],s={},n=e;let o,a;for(const[l,h]of i)r.indexOf(l)>=0&&(o=l,s[l]=h(e,t),a=n.plus(s),a>t?(s[l]--,e=n.plus(s),e>t&&(a=e,s[l]--,e=n.plus(s))):e=a);return[e,s,a,o]}function Y4(e,t,r,i){let[s,n,o,a]=J4(e,t,r);const l=t-s,h=r.filter(f=>["hours","minutes","seconds","milliseconds"].indexOf(f)>=0);h.length===0&&(o<t&&(o=s.plus({[a]:1})),o!==s&&(n[a]=(n[a]||0)+l/(o-s)));const p=he.fromObject(n,i);return h.length>0?he.fromMillis(l,i).shiftTo(...h).plus(p):p}const K4="missing Intl.DateTimeFormat.formatToParts support";function fe(e,t=r=>r){return{regex:e,deser:([r])=>t(j5(r))}}const X4=" ",SM=`[ ${X4}]`,TM=new RegExp(SM,"g");function Q4(e){return e.replace(/\./g,"\\.?").replace(TM,SM)}function zb(e){return e.replace(/\./g,"").replace(TM," ").toLowerCase()}function Dr(e,t){return e===null?null:{regex:RegExp(e.map(Q4).join("|")),deser:([r])=>e.findIndex(i=>zb(r)===zb(i))+t}}function Vb(e,t){return{regex:e,deser:([,r,i])=>Gf(r,i),groups:t}}function Ph(e){return{regex:e,deser:([t])=>t}}function eD(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function tD(e,t){const r=Lr(t),i=Lr(t,"{2}"),s=Lr(t,"{3}"),n=Lr(t,"{4}"),o=Lr(t,"{6}"),a=Lr(t,"{1,2}"),l=Lr(t,"{1,3}"),h=Lr(t,"{1,6}"),p=Lr(t,"{1,9}"),f=Lr(t,"{2,4}"),m=Lr(t,"{4,6}"),y=w=>({regex:RegExp(eD(w.val)),deser:([b])=>b,literal:!0}),v=(w=>{if(e.literal)return y(w);switch(w.val){case"G":return Dr(t.eras("short"),0);case"GG":return Dr(t.eras("long"),0);case"y":return fe(h);case"yy":return fe(f,Ng);case"yyyy":return fe(n);case"yyyyy":return fe(m);case"yyyyyy":return fe(o);case"M":return fe(a);case"MM":return fe(i);case"MMM":return Dr(t.months("short",!0),1);case"MMMM":return Dr(t.months("long",!0),1);case"L":return fe(a);case"LL":return fe(i);case"LLL":return Dr(t.months("short",!1),1);case"LLLL":return Dr(t.months("long",!1),1);case"d":return fe(a);case"dd":return fe(i);case"o":return fe(l);case"ooo":return fe(s);case"HH":return fe(i);case"H":return fe(a);case"hh":return fe(i);case"h":return fe(a);case"mm":return fe(i);case"m":return fe(a);case"q":return fe(a);case"qq":return fe(i);case"s":return fe(a);case"ss":return fe(i);case"S":return fe(l);case"SSS":return fe(s);case"u":return Ph(p);case"uu":return Ph(a);case"uuu":return fe(r);case"a":return Dr(t.meridiems(),0);case"kkkk":return fe(n);case"kk":return fe(f,Ng);case"W":return fe(a);case"WW":return fe(i);case"E":case"c":return fe(r);case"EEE":return Dr(t.weekdays("short",!1),1);case"EEEE":return Dr(t.weekdays("long",!1),1);case"ccc":return Dr(t.weekdays("short",!0),1);case"cccc":return Dr(t.weekdays("long",!0),1);case"Z":case"ZZ":return Vb(new RegExp(`([+-]${a.source})(?::(${i.source}))?`),2);case"ZZZ":return Vb(new RegExp(`([+-]${a.source})(${i.source})?`),2);case"z":return Ph(/[a-z_+-/]{1,256}?/i);case" ":return Ph(/[^\S\n\r]/);default:return y(w)}})(e)||{invalidReason:K4};return v.token=e,v}const rD={year:{"2-digit":"yy",numeric:"yyyyy"},month:{numeric:"M","2-digit":"MM",short:"MMM",long:"MMMM"},day:{numeric:"d","2-digit":"dd"},weekday:{short:"EEE",long:"EEEE"},dayperiod:"a",dayPeriod:"a",hour12:{numeric:"h","2-digit":"hh"},hour24:{numeric:"H","2-digit":"HH"},minute:{numeric:"m","2-digit":"mm"},second:{numeric:"s","2-digit":"ss"},timeZoneName:{long:"ZZZZZ",short:"ZZZ"}};function iD(e,t,r){const{type:i,value:s}=e;if(i==="literal"){const l=/^\s+$/.test(s);return{literal:!l,val:l?" ":s}}const n=t[i];let o=i;i==="hour"&&(t.hour12!=null?o=t.hour12?"hour12":"hour24":t.hourCycle!=null?t.hourCycle==="h11"||t.hourCycle==="h12"?o="hour12":o="hour24":o=r.hour12?"hour12":"hour24");let a=rD[o];if(typeof a=="object"&&(a=a[n]),a)return{literal:!1,val:a}}function sD(e){return[`^${e.map(r=>r.regex).reduce((r,i)=>`${r}(${i.source})`,"")}$`,e]}function nD(e,t,r){const i=e.match(t);if(i){const s={};let n=1;for(const o in r)if(hl(r,o)){const a=r[o],l=a.groups?a.groups+1:1;!a.literal&&a.token&&(s[a.token.val[0]]=a.deser(i.slice(n,n+l))),n+=l}return[i,s]}else return[i,{}]}function oD(e){const t=n=>{switch(n){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":case"H":return"hour";case"d":return"day";case"o":return"ordinal";case"L":case"M":return"month";case"y":return"year";case"E":case"c":return"weekday";case"W":return"weekNumber";case"k":return"weekYear";case"q":return"quarter";default:return null}};let r=null,i;return te(e.z)||(r=cr.create(e.z)),te(e.Z)||(r||(r=new ft(e.Z)),i=e.Z),te(e.q)||(e.M=(e.q-1)*3+1),te(e.h)||(e.h<12&&e.a===1?e.h+=12:e.h===12&&e.a===0&&(e.h=0)),e.G===0&&e.y&&(e.y=-e.y),te(e.u)||(e.S=z_(e.u)),[Object.keys(e).reduce((n,o)=>{const a=t(o);return a&&(n[a]=e[o]),n},{}),r,i]}let zm=null;function aD(){return zm||(zm=q.fromMillis(1555555555555)),zm}function lD(e,t){if(e.literal)return e;const r=bt.macroTokenToFormatOpts(e.val),i=xM(r,t);return i==null||i.includes(void 0)?e:i}function $M(e,t){return Array.prototype.concat(...e.map(r=>lD(r,t)))}class EM{constructor(t,r){if(this.locale=t,this.format=r,this.tokens=$M(bt.parseFormat(r),t),this.units=this.tokens.map(i=>tD(i,t)),this.disqualifyingUnit=this.units.find(i=>i.invalidReason),!this.disqualifyingUnit){const[i,s]=sD(this.units);this.regex=RegExp(i,"i"),this.handlers=s}}explainFromTokens(t){if(this.isValid){const[r,i]=nD(t,this.regex,this.handlers),[s,n,o]=i?oD(i):[null,null,void 0];if(hl(i,"a")&&hl(i,"H"))throw new Ra("Can't include meridiem when specifying 24-hour format");return{input:t,tokens:this.tokens,regex:this.regex,rawMatches:r,matches:i,result:s,zone:n,specificOffset:o}}else return{input:t,tokens:this.tokens,invalidReason:this.invalidReason}}get isValid(){return!this.disqualifyingUnit}get invalidReason(){return this.disqualifyingUnit?this.disqualifyingUnit.invalidReason:null}}function MM(e,t,r){return new EM(e,r).explainFromTokens(t)}function uD(e,t,r){const{result:i,zone:s,specificOffset:n,invalidReason:o}=MM(e,t,r);return[i,s,n,o]}function xM(e,t){if(!e)return null;const i=bt.create(t,e).dtFormatter(aD()),s=i.formatToParts(),n=i.resolvedOptions();return s.map(o=>iD(o,e,n))}const Vm="Invalid DateTime",cD=864e13;function uu(e){return new Xr("unsupported zone",`the zone "${e.name}" is not supported`)}function Bm(e){return e.weekData===null&&(e.weekData=Lp(e.c)),e.weekData}function Hm(e){return e.localWeekData===null&&(e.localWeekData=Lp(e.c,e.loc.getMinDaysInFirstWeek(),e.loc.getStartOfWeek())),e.localWeekData}function Cn(e,t){const r={ts:e.ts,zone:e.zone,c:e.c,o:e.o,loc:e.loc,invalid:e.invalid};return new q({...r,...t,old:r})}function AM(e,t,r){let i=e-t*60*1e3;const s=r.offset(i);if(t===s)return[i,t];i-=(s-t)*60*1e3;const n=r.offset(i);return s===n?[i,s]:[e-Math.min(s,n)*60*1e3,Math.max(s,n)]}function Oh(e,t){e+=t*60*1e3;const r=new Date(e);return{year:r.getUTCFullYear(),month:r.getUTCMonth()+1,day:r.getUTCDate(),hour:r.getUTCHours(),minute:r.getUTCMinutes(),second:r.getUTCSeconds(),millisecond:r.getUTCMilliseconds()}}function wd(e,t,r){return AM(jf(e),t,r)}function Bb(e,t){const r=e.o,i=e.c.year+Math.trunc(t.years),s=e.c.month+Math.trunc(t.months)+Math.trunc(t.quarters)*3,n={...e.c,year:i,month:s,day:Math.min(e.c.day,Dp(i,s))+Math.trunc(t.days)+Math.trunc(t.weeks)*7},o=he.fromObject({years:t.years-Math.trunc(t.years),quarters:t.quarters-Math.trunc(t.quarters),months:t.months-Math.trunc(t.months),weeks:t.weeks-Math.trunc(t.weeks),days:t.days-Math.trunc(t.days),hours:t.hours,minutes:t.minutes,seconds:t.seconds,milliseconds:t.milliseconds}).as("milliseconds"),a=jf(n);let[l,h]=AM(a,r,e.zone);return o!==0&&(l+=o,h=e.zone.offset(l)),{ts:l,o:h}}function Yo(e,t,r,i,s,n){const{setZone:o,zone:a}=r;if(e&&Object.keys(e).length!==0||t){const l=t||a,h=q.fromObject(e,{...r,zone:l,specificOffset:n});return o?h:h.setZone(a)}else return q.invalid(new Xr("unparsable",`the input "${s}" can't be parsed as ${i}`))}function Ch(e,t,r=!0){return e.isValid?bt.create(_e.create("en-US"),{allowZ:r,forceSimple:!0}).formatDateTimeFromString(e,t):null}function qm(e,t){const r=e.c.year>9999||e.c.year<0;let i="";return r&&e.c.year>=0&&(i+="+"),i+=Ke(e.c.year,r?6:4),t?(i+="-",i+=Ke(e.c.month),i+="-",i+=Ke(e.c.day)):(i+=Ke(e.c.month),i+=Ke(e.c.day)),i}function Hb(e,t,r,i,s,n){let o=Ke(e.c.hour);return t?(o+=":",o+=Ke(e.c.minute),(e.c.millisecond!==0||e.c.second!==0||!r)&&(o+=":")):o+=Ke(e.c.minute),(e.c.millisecond!==0||e.c.second!==0||!r)&&(o+=Ke(e.c.second),(e.c.millisecond!==0||!i)&&(o+=".",o+=Ke(e.c.millisecond,3))),s&&(e.isOffsetFixed&&e.offset===0&&!n?o+="Z":e.o<0?(o+="-",o+=Ke(Math.trunc(-e.o/60)),o+=":",o+=Ke(Math.trunc(-e.o%60))):(o+="+",o+=Ke(Math.trunc(e.o/60)),o+=":",o+=Ke(Math.trunc(e.o%60)))),n&&(o+="["+e.zone.ianaName+"]"),o}const PM={month:1,day:1,hour:0,minute:0,second:0,millisecond:0},hD={weekNumber:1,weekday:1,hour:0,minute:0,second:0,millisecond:0},dD={ordinal:1,hour:0,minute:0,second:0,millisecond:0},OM=["year","month","day","hour","minute","second","millisecond"],pD=["weekYear","weekNumber","weekday","hour","minute","second","millisecond"],fD=["year","ordinal","hour","minute","second","millisecond"];function mD(e){const t={year:"year",years:"year",month:"month",months:"month",day:"day",days:"day",hour:"hour",hours:"hour",minute:"minute",minutes:"minute",quarter:"quarter",quarters:"quarter",second:"second",seconds:"second",millisecond:"millisecond",milliseconds:"millisecond",weekday:"weekday",weekdays:"weekday",weeknumber:"weekNumber",weeksnumber:"weekNumber",weeknumbers:"weekNumber",weekyear:"weekYear",weekyears:"weekYear",ordinal:"ordinal"}[e.toLowerCase()];if(!t)throw new C3(e);return t}function qb(e){switch(e.toLowerCase()){case"localweekday":case"localweekdays":return"localWeekday";case"localweeknumber":case"localweeknumbers":return"localWeekNumber";case"localweekyear":case"localweekyears":return"localWeekYear";default:return mD(e)}}function yD(e){return Sd[e]||(bd===void 0&&(bd=Ve.now()),Sd[e]=e.offset(bd)),Sd[e]}function Wb(e,t){const r=rn(t.zone,Ve.defaultZone);if(!r.isValid)return q.invalid(uu(r));const i=_e.fromObject(t);let s,n;if(te(e.year))s=Ve.now();else{for(const l of OM)te(e[l])&&(e[l]=PM[l]);const o=tM(e)||rM(e);if(o)return q.invalid(o);const a=yD(r);[s,n]=wd(e,a,r)}return new q({ts:s,zone:r,loc:i,o:n})}function Zb(e,t,r){const i=te(r.round)?!0:r.round,s=(o,a)=>(o=V_(o,i||r.calendary?0:2,!0),t.loc.clone(r).relFormatter(r).format(o,a)),n=o=>r.calendary?t.hasSame(e,o)?0:t.startOf(o).diff(e.startOf(o),o).get(o):t.diff(e,o).get(o);if(r.unit)return s(n(r.unit),r.unit);for(const o of r.units){const a=n(o);if(Math.abs(a)>=1)return s(a,o)}return s(e>t?-0:0,r.units[r.units.length-1])}function Jb(e){let t={},r;return e.length>0&&typeof e[e.length-1]=="object"?(t=e[e.length-1],r=Array.from(e).slice(0,e.length-1)):r=Array.from(e),[t,r]}let bd,Sd={};class q{constructor(t){const r=t.zone||Ve.defaultZone;let i=t.invalid||(Number.isNaN(t.ts)?new Xr("invalid input"):null)||(r.isValid?null:uu(r));this.ts=te(t.ts)?Ve.now():t.ts;let s=null,n=null;if(!i)if(t.old&&t.old.ts===this.ts&&t.old.zone.equals(r))[s,n]=[t.old.c,t.old.o];else{const a=cn(t.o)&&!t.old?t.o:r.offset(this.ts);s=Oh(this.ts,a),i=Number.isNaN(s.year)?new Xr("invalid input"):null,s=i?null:s,n=i?null:a}this._zone=r,this.loc=t.loc||_e.create(),this.invalid=i,this.weekData=null,this.localWeekData=null,this.c=s,this.o=n,this.isLuxonDateTime=!0}static now(){return new q({})}static local(){const[t,r]=Jb(arguments),[i,s,n,o,a,l,h]=r;return Wb({year:i,month:s,day:n,hour:o,minute:a,second:l,millisecond:h},t)}static utc(){const[t,r]=Jb(arguments),[i,s,n,o,a,l,h]=r;return t.zone=ft.utcInstance,Wb({year:i,month:s,day:n,hour:o,minute:a,second:l,millisecond:h},t)}static fromJSDate(t,r={}){const i=H5(t)?t.valueOf():NaN;if(Number.isNaN(i))return q.invalid("invalid input");const s=rn(r.zone,Ve.defaultZone);return s.isValid?new q({ts:i,zone:s,loc:_e.fromObject(r)}):q.invalid(uu(s))}static fromMillis(t,r={}){if(cn(t))return t<-864e13||t>cD?q.invalid("Timestamp out of range"):new q({ts:t,zone:rn(r.zone,Ve.defaultZone),loc:_e.fromObject(r)});throw new _t(`fromMillis requires a numerical input, but received a ${typeof t} with value ${t}`)}static fromSeconds(t,r={}){if(cn(t))return new q({ts:t*1e3,zone:rn(r.zone,Ve.defaultZone),loc:_e.fromObject(r)});throw new _t("fromSeconds requires a numerical input")}static fromObject(t,r={}){t=t||{};const i=rn(r.zone,Ve.defaultZone);if(!i.isValid)return q.invalid(uu(i));const s=_e.fromObject(r),n=Fp(t,qb),{minDaysInFirstWeek:o,startOfWeek:a}=kb(n,s),l=Ve.now(),h=te(r.specificOffset)?i.offset(l):r.specificOffset,p=!te(n.ordinal),f=!te(n.year),m=!te(n.month)||!te(n.day),y=f||m,_=n.weekYear||n.weekNumber;if((y||p)&&_)throw new Ra("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(m&&p)throw new Ra("Can't mix ordinal dates with month/day");const v=_||n.weekday&&!y;let w,b,M=Oh(l,h);v?(w=pD,b=hD,M=Lp(M,o,a)):p?(w=fD,b=dD,M=Gm(M)):(w=OM,b=PM);let $=!1;for(const B of w){const K=n[B];te(K)?$?n[B]=b[B]:n[B]=M[B]:$=!0}const E=v?z5(n,o,a):p?V5(n):tM(n),P=E||rM(n);if(P)return q.invalid(P);const O=v?Ib(n,o,a):p?Rb(n):n,[L,k]=wd(O,h,i),z=new q({ts:L,zone:i,o:k,loc:s});return n.weekday&&y&&t.weekday!==z.weekday?q.invalid("mismatched weekday",`you can't specify both a weekday of ${n.weekday} and a date of ${z.toISO()}`):z.isValid?z:q.invalid(z.invalid)}static fromISO(t,r={}){const[i,s]=k4(t);return Yo(i,s,r,"ISO 8601",t)}static fromRFC2822(t,r={}){const[i,s]=N4(t);return Yo(i,s,r,"RFC 2822",t)}static fromHTTP(t,r={}){const[i,s]=L4(t);return Yo(i,s,r,"HTTP",r)}static fromFormat(t,r,i={}){if(te(t)||te(r))throw new _t("fromFormat requires an input string and a format");const{locale:s=null,numberingSystem:n=null}=i,o=_e.fromOpts({locale:s,numberingSystem:n,defaultToEN:!0}),[a,l,h,p]=uD(o,t,r);return p?q.invalid(p):Yo(a,l,i,`format ${r}`,t,h)}static fromString(t,r,i={}){return q.fromFormat(t,r,i)}static fromSQL(t,r={}){const[i,s]=V4(t);return Yo(i,s,r,"SQL",t)}static invalid(t,r=null){if(!t)throw new _t("need to specify a reason the DateTime is invalid");const i=t instanceof Xr?t:new Xr(t,r);if(Ve.throwOnInvalid)throw new m5(i);return new q({invalid:i})}static isDateTime(t){return t&&t.isLuxonDateTime||!1}static parseFormatForOpts(t,r={}){const i=xM(t,_e.fromObject(r));return i?i.map(s=>s?s.val:null).join(""):null}static expandFormat(t,r={}){return $M(bt.parseFormat(t),_e.fromObject(r)).map(s=>s.val).join("")}static resetCache(){bd=void 0,Sd={}}get(t){return this[t]}get isValid(){return this.invalid===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}get outputCalendar(){return this.isValid?this.loc.outputCalendar:null}get zone(){return this._zone}get zoneName(){return this.isValid?this.zone.name:null}get year(){return this.isValid?this.c.year:NaN}get quarter(){return this.isValid?Math.ceil(this.c.month/3):NaN}get month(){return this.isValid?this.c.month:NaN}get day(){return this.isValid?this.c.day:NaN}get hour(){return this.isValid?this.c.hour:NaN}get minute(){return this.isValid?this.c.minute:NaN}get second(){return this.isValid?this.c.second:NaN}get millisecond(){return this.isValid?this.c.millisecond:NaN}get weekYear(){return this.isValid?Bm(this).weekYear:NaN}get weekNumber(){return this.isValid?Bm(this).weekNumber:NaN}get weekday(){return this.isValid?Bm(this).weekday:NaN}get isWeekend(){return this.isValid&&this.loc.getWeekendDays().includes(this.weekday)}get localWeekday(){return this.isValid?Hm(this).weekday:NaN}get localWeekNumber(){return this.isValid?Hm(this).weekNumber:NaN}get localWeekYear(){return this.isValid?Hm(this).weekYear:NaN}get ordinal(){return this.isValid?Gm(this.c).ordinal:NaN}get monthShort(){return this.isValid?Ah.months("short",{locObj:this.loc})[this.month-1]:null}get monthLong(){return this.isValid?Ah.months("long",{locObj:this.loc})[this.month-1]:null}get weekdayShort(){return this.isValid?Ah.weekdays("short",{locObj:this.loc})[this.weekday-1]:null}get weekdayLong(){return this.isValid?Ah.weekdays("long",{locObj:this.loc})[this.weekday-1]:null}get offset(){return this.isValid?+this.o:NaN}get offsetNameShort(){return this.isValid?this.zone.offsetName(this.ts,{format:"short",locale:this.locale}):null}get offsetNameLong(){return this.isValid?this.zone.offsetName(this.ts,{format:"long",locale:this.locale}):null}get isOffsetFixed(){return this.isValid?this.zone.isUniversal:null}get isInDST(){return this.isOffsetFixed?!1:this.offset>this.set({month:1,day:1}).offset||this.offset>this.set({month:5}).offset}getPossibleOffsets(){if(!this.isValid||this.isOffsetFixed)return[this];const t=864e5,r=6e4,i=jf(this.c),s=this.zone.offset(i-t),n=this.zone.offset(i+t),o=this.zone.offset(i-s*r),a=this.zone.offset(i-n*r);if(o===a)return[this];const l=i-o*r,h=i-a*r,p=Oh(l,o),f=Oh(h,a);return p.hour===f.hour&&p.minute===f.minute&&p.second===f.second&&p.millisecond===f.millisecond?[Cn(this,{ts:l}),Cn(this,{ts:h})]:[this]}get isInLeapYear(){return rh(this.year)}get daysInMonth(){return Dp(this.year,this.month)}get daysInYear(){return this.isValid?Va(this.year):NaN}get weeksInWeekYear(){return this.isValid?Ac(this.weekYear):NaN}get weeksInLocalWeekYear(){return this.isValid?Ac(this.localWeekYear,this.loc.getMinDaysInFirstWeek(),this.loc.getStartOfWeek()):NaN}resolvedLocaleOptions(t={}){const{locale:r,numberingSystem:i,calendar:s}=bt.create(this.loc.clone(t),t).resolvedOptions(this);return{locale:r,numberingSystem:i,outputCalendar:s}}toUTC(t=0,r={}){return this.setZone(ft.instance(t),r)}toLocal(){return this.setZone(Ve.defaultZone)}setZone(t,{keepLocalTime:r=!1,keepCalendarTime:i=!1}={}){if(t=rn(t,Ve.defaultZone),t.equals(this.zone))return this;if(t.isValid){let s=this.ts;if(r||i){const n=t.offset(this.ts),o=this.toObject();[s]=wd(o,n,t)}return Cn(this,{ts:s,zone:t})}else return q.invalid(uu(t))}reconfigure({locale:t,numberingSystem:r,outputCalendar:i}={}){const s=this.loc.clone({locale:t,numberingSystem:r,outputCalendar:i});return Cn(this,{loc:s})}setLocale(t){return this.reconfigure({locale:t})}set(t){if(!this.isValid)return this;const r=Fp(t,qb),{minDaysInFirstWeek:i,startOfWeek:s}=kb(r,this.loc),n=!te(r.weekYear)||!te(r.weekNumber)||!te(r.weekday),o=!te(r.ordinal),a=!te(r.year),l=!te(r.month)||!te(r.day),h=a||l,p=r.weekYear||r.weekNumber;if((h||o)&&p)throw new Ra("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(l&&o)throw new Ra("Can't mix ordinal dates with month/day");let f;n?f=Ib({...Lp(this.c,i,s),...r},i,s):te(r.ordinal)?(f={...this.toObject(),...r},te(r.day)&&(f.day=Math.min(Dp(f.year,f.month),f.day))):f=Rb({...Gm(this.c),...r});const[m,y]=wd(f,this.o,this.zone);return Cn(this,{ts:m,o:y})}plus(t){if(!this.isValid)return this;const r=he.fromDurationLike(t);return Cn(this,Bb(this,r))}minus(t){if(!this.isValid)return this;const r=he.fromDurationLike(t).negate();return Cn(this,Bb(this,r))}startOf(t,{useLocaleWeeks:r=!1}={}){if(!this.isValid)return this;const i={},s=he.normalizeUnit(t);switch(s){case"years":i.month=1;case"quarters":case"months":i.day=1;case"weeks":case"days":i.hour=0;case"hours":i.minute=0;case"minutes":i.second=0;case"seconds":i.millisecond=0;break}if(s==="weeks")if(r){const n=this.loc.getStartOfWeek(),{weekday:o}=this;o<n&&(i.weekNumber=this.weekNumber-1),i.weekday=n}else i.weekday=1;if(s==="quarters"){const n=Math.ceil(this.month/3);i.month=(n-1)*3+1}return this.set(i)}endOf(t,r){return this.isValid?this.plus({[t]:1}).startOf(t,r).minus(1):this}toFormat(t,r={}){return this.isValid?bt.create(this.loc.redefaultToEN(r)).formatDateTimeFromString(this,t):Vm}toLocaleString(t=Np,r={}){return this.isValid?bt.create(this.loc.clone(r),t).formatDateTime(this):Vm}toLocaleParts(t={}){return this.isValid?bt.create(this.loc.clone(t),t).formatDateTimeParts(this):[]}toISO({format:t="extended",suppressSeconds:r=!1,suppressMilliseconds:i=!1,includeOffset:s=!0,extendedZone:n=!1}={}){if(!this.isValid)return null;const o=t==="extended";let a=qm(this,o);return a+="T",a+=Hb(this,o,r,i,s,n),a}toISODate({format:t="extended"}={}){return this.isValid?qm(this,t==="extended"):null}toISOWeekDate(){return Ch(this,"kkkk-'W'WW-c")}toISOTime({suppressMilliseconds:t=!1,suppressSeconds:r=!1,includeOffset:i=!0,includePrefix:s=!1,extendedZone:n=!1,format:o="extended"}={}){return this.isValid?(s?"T":"")+Hb(this,o==="extended",r,t,i,n):null}toRFC2822(){return Ch(this,"EEE, dd LLL yyyy HH:mm:ss ZZZ",!1)}toHTTP(){return Ch(this.toUTC(),"EEE, dd LLL yyyy HH:mm:ss 'GMT'")}toSQLDate(){return this.isValid?qm(this,!0):null}toSQLTime({includeOffset:t=!0,includeZone:r=!1,includeOffsetSpace:i=!0}={}){let s="HH:mm:ss.SSS";return(r||t)&&(i&&(s+=" "),r?s+="z":t&&(s+="ZZ")),Ch(this,s,!0)}toSQL(t={}){return this.isValid?`${this.toSQLDate()} ${this.toSQLTime(t)}`:null}toString(){return this.isValid?this.toISO():Vm}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`DateTime { ts: ${this.toISO()}, zone: ${this.zone.name}, locale: ${this.locale} }`:`DateTime { Invalid, reason: ${this.invalidReason} }`}valueOf(){return this.toMillis()}toMillis(){return this.isValid?this.ts:NaN}toSeconds(){return this.isValid?this.ts/1e3:NaN}toUnixInteger(){return this.isValid?Math.floor(this.ts/1e3):NaN}toJSON(){return this.toISO()}toBSON(){return this.toJSDate()}toObject(t={}){if(!this.isValid)return{};const r={...this.c};return t.includeConfig&&(r.outputCalendar=this.outputCalendar,r.numberingSystem=this.loc.numberingSystem,r.locale=this.loc.locale),r}toJSDate(){return new Date(this.isValid?this.ts:NaN)}diff(t,r="milliseconds",i={}){if(!this.isValid||!t.isValid)return he.invalid("created by diffing an invalid DateTime");const s={locale:this.locale,numberingSystem:this.numberingSystem,...i},n=q5(r).map(he.normalizeUnit),o=t.valueOf()>this.valueOf(),a=o?this:t,l=o?t:this,h=Y4(a,l,n,s);return o?h.negate():h}diffNow(t="milliseconds",r={}){return this.diff(q.now(),t,r)}until(t){return this.isValid?ze.fromDateTimes(this,t):this}hasSame(t,r,i){if(!this.isValid)return!1;const s=t.valueOf(),n=this.setZone(t.zone,{keepLocalTime:!0});return n.startOf(r,i)<=s&&s<=n.endOf(r,i)}equals(t){return this.isValid&&t.isValid&&this.valueOf()===t.valueOf()&&this.zone.equals(t.zone)&&this.loc.equals(t.loc)}toRelative(t={}){if(!this.isValid)return null;const r=t.base||q.fromObject({},{zone:this.zone}),i=t.padding?this<r?-t.padding:t.padding:0;let s=["years","months","days","hours","minutes","seconds"],n=t.unit;return Array.isArray(t.unit)&&(s=t.unit,n=void 0),Zb(r,this.plus(i),{...t,numeric:"always",units:s,unit:n})}toRelativeCalendar(t={}){return this.isValid?Zb(t.base||q.fromObject({},{zone:this.zone}),this,{...t,numeric:"auto",units:["years","months","days"],calendary:!0}):null}static min(...t){if(!t.every(q.isDateTime))throw new _t("min requires all arguments be DateTimes");return Nb(t,r=>r.valueOf(),Math.min)}static max(...t){if(!t.every(q.isDateTime))throw new _t("max requires all arguments be DateTimes");return Nb(t,r=>r.valueOf(),Math.max)}static fromFormatExplain(t,r,i={}){const{locale:s=null,numberingSystem:n=null}=i,o=_e.fromOpts({locale:s,numberingSystem:n,defaultToEN:!0});return MM(o,t,r)}static fromStringExplain(t,r,i={}){return q.fromFormatExplain(t,r,i)}static buildFormatParser(t,r={}){const{locale:i=null,numberingSystem:s=null}=r,n=_e.fromOpts({locale:i,numberingSystem:s,defaultToEN:!0});return new EM(n,t)}static fromFormatParser(t,r,i={}){if(te(t)||te(r))throw new _t("fromFormatParser requires an input string and a format parser");const{locale:s=null,numberingSystem:n=null}=i,o=_e.fromOpts({locale:s,numberingSystem:n,defaultToEN:!0});if(!o.equals(r.locale))throw new _t(`fromFormatParser called with a locale of ${o}, but the format parser was created for ${r.locale}`);const{result:a,zone:l,specificOffset:h,invalidReason:p}=r.explainFromTokens(t);return p?q.invalid(p):Yo(a,l,i,`format ${r.format}`,t,h)}static get DATE_SHORT(){return Np}static get DATE_MED(){return I3}static get DATE_MED_WITH_WEEKDAY(){return _5}static get DATE_FULL(){return R3}static get DATE_HUGE(){return k3}static get TIME_SIMPLE(){return N3}static get TIME_WITH_SECONDS(){return L3}static get TIME_WITH_SHORT_OFFSET(){return D3}static get TIME_WITH_LONG_OFFSET(){return F3}static get TIME_24_SIMPLE(){return U3}static get TIME_24_WITH_SECONDS(){return j3}static get TIME_24_WITH_SHORT_OFFSET(){return G3}static get TIME_24_WITH_LONG_OFFSET(){return z3}static get DATETIME_SHORT(){return V3}static get DATETIME_SHORT_WITH_SECONDS(){return B3}static get DATETIME_MED(){return H3}static get DATETIME_MED_WITH_SECONDS(){return q3}static get DATETIME_MED_WITH_WEEKDAY(){return v5}static get DATETIME_FULL(){return W3}static get DATETIME_FULL_WITH_SECONDS(){return Z3}static get DATETIME_HUGE(){return J3}static get DATETIME_HUGE_WITH_SECONDS(){return Y3}}function Nl(e){if(q.isDateTime(e))return e;if(e&&e.valueOf&&cn(e.valueOf()))return q.fromJSDate(e);if(e&&typeof e=="object")return q.fromObject(e);throw new _t(`Unknown datetime argument: ${e}, of type ${typeof e}`)}const gD="shortOffset";function _D(e){return"timeZoneIANA"in e}function vD(e){return e.startsWith("UTC")}function pQ(e,t=!1){return{json:{read:{source:e,reader:(r,i)=>i[e]?wD(i[e]):null},write:!!t&&{allowNull:!0,writer(r,i){i[e]=r?bD(r):null}}}}}function wD(e,t=Oi){return e?_D(e)?e.timeZoneIANA:SD(e,t):t}function bD(e){return{timeZoneIANA:e}}function SD(e,t=Oi){if(!e||!wb.has(e.timeZone))return t;const r=wb.get(e.timeZone);return vD(e.timeZone)||e.respectsDaylightSaving?r:TD(r)}function TD(e){const t=q.local().setZone(e),r=Math.min(t.set({month:1,day:1}).offset,t.set({month:5}).offset);return r===0?"Etc/UTC":`Etc/GMT${ft.instance(-r).formatOffset(0,"narrow")}`}function fQ(e,t,r,i,s){if(t&&s==="date")return{timeZone:xc,timeZoneName:void 0};const n=i.timeStyle||i.hour,o=r===F_;return{timeZone:o?s==="timestamp-offset"?void 0:e??xc:r,timeZoneName:o&&n?gD:void 0}}function $D(e){const t=new Set(["etc/utc","etc/gmt","gmt"]),r=new Set(Intl.supportedValuesOf("timeZone").map(i=>i.toLowerCase()));return e===Oi||e===F_||t.has(e.toLowerCase())||r.has(e.toLowerCase())}const ED={year:void 0,month:void 0,day:void 0,weekday:void 0},MD={hour:void 0,minute:void 0,second:void 0},CM={timeZone:xc},ni={year:"numeric",month:"numeric",day:"numeric"},Ll={year:"numeric",month:"long",day:"numeric"},Dl={year:"numeric",month:"short",day:"numeric"},Fl={year:"numeric",month:"long",weekday:"long",day:"numeric"},Ks={hour:"numeric",minute:"numeric"},zn={...Ks,second:"numeric"},IM={hourCycle:"h23"},Ul={...Ks,...IM},jl={...zn,...IM},RM={"short-date":ni,"short-date-short-time":{...ni,...Ks},"short-date-short-time-24":{...ni,...Ul},"short-date-long-time":{...ni,...zn},"short-date-long-time-24":{...ni,...jl},"short-date-le":ni,"short-date-le-short-time":{...ni,...Ks},"short-date-le-short-time-24":{...ni,...Ul},"short-date-le-long-time":{...ni,...zn},"short-date-le-long-time-24":{...ni,...jl},"long-month-day-year":Ll,"long-month-day-year-short-time":{...Ll,...Ks},"long-month-day-year-short-time-24":{...Ll,...Ul},"long-month-day-year-long-time":{...Ll,...zn},"long-month-day-year-long-time-24":{...Ll,...jl},"day-short-month-year":Dl,"day-short-month-year-short-time":{...Dl,...Ks},"day-short-month-year-short-time-24":{...Dl,...Ul},"day-short-month-year-long-time":{...Dl,...zn},"day-short-month-year-long-time-24":{...Dl,...jl},"long-date":Fl,"long-date-short-time":{...Fl,...Ks},"long-date-short-time-24":{...Fl,...Ul},"long-date-long-time":{...Fl,...zn},"long-date-long-time-24":{...Fl,...jl},"long-month-year":{month:"long",year:"numeric"},"short-month-year":{month:"short",year:"numeric"},year:{year:"numeric"},"short-time":Ks,"long-time":zn},xD=Wt()({shortDate:"short-date",shortDateShortTime:"short-date-short-time",shortDateShortTime24:"short-date-short-time-24",shortDateLongTime:"short-date-long-time",shortDateLongTime24:"short-date-long-time-24",shortDateLE:"short-date-le",shortDateLEShortTime:"short-date-le-short-time",shortDateLEShortTime24:"short-date-le-short-time-24",shortDateLELongTime:"short-date-le-long-time",shortDateLELongTime24:"short-date-le-long-time-24",longMonthDayYear:"long-month-day-year",longMonthDayYearShortTime:"long-month-day-year-short-time",longMonthDayYearShortTime24:"long-month-day-year-short-time-24",longMonthDayYearLongTime:"long-month-day-year-long-time",longMonthDayYearLongTime24:"long-month-day-year-long-time-24",dayShortMonthYear:"day-short-month-year",dayShortMonthYearShortTime:"day-short-month-year-short-time",dayShortMonthYearShortTime24:"day-short-month-year-short-time-24",dayShortMonthYearLongTime:"day-short-month-year-long-time",dayShortMonthYearLongTime24:"day-short-month-year-long-time-24",longDate:"long-date",longDateShortTime:"long-date-short-time",longDateShortTime24:"long-date-short-time-24",longDateLongTime:"long-date-long-time",longDateLongTime24:"long-date-long-time-24",longMonthYear:"long-month-year",shortMonthYear:"short-month-year",year:"year"}),kM={ar:"ar-u-nu-latn-ca-gregory"};let Lg=new WeakMap;const Vf=RM["short-date-short-time"];function AD(e){let t=Lg.get(e);if(!t){const r=Bt(),i=kM[r]||r,s=Z_(e.timeZone??Oi),n={...e,timeZone:s};t=new Intl.DateTimeFormat(i,n),Lg.set(e,t)}return t}function mQ(e){return RM[e]}function W_(e,t=Vf){return AD(t).format(e)}function yQ(e,t=Vf){return W_(new Date(e),{...t,...CM,...MD})}function gQ(e,t=Vf){return W_(new Date(`1970-01-01T${e}Z`),{...t,...CM,...ED})}function _Q(e,t=Vf){if(t.timeZone)return W_(new Date(e),t);const r=q.fromISO(e,{setZone:!0}),i=Bt(),s=kM[i]??i,n=r.offset===0?xc:t.timeZone,o={...t,timeZone:n};return r.toLocaleString(o,{locale:s})}function Z_(e){switch(e){case Oi:return f5;case F_:return xc;default:return e}}D_(()=>{Lg=new WeakMap});const PD={ar:"ar-u-nu-latn"};let Td=new WeakMap,NM={};function Dg(e){const t=e||NM;if(!Td.has(t)){const r=Bt(),i=PD[Bt()]||r;Td.set(t,new Intl.NumberFormat(i,e))}return Td.get(t)}function vQ(e={}){const t={};return e.digitSeparator!=null&&(t.useGrouping=e.digitSeparator),e.places!=null&&(t.minimumFractionDigits=t.maximumFractionDigits=e.places),t}function wQ(e,t){return Object.is(e,-0)&&(e=0),Dg(t).format(e)}function bQ(e,t=Bt()){var i,s;if(!e)return null;let r=Yb.get(t);if(!r){const n=Dg().formatToParts(12345.6),o=[...Dg({useGrouping:!1}).format(9876543210)].reverse(),a=new Map(o.map((y,_)=>[y,_])),l=new RegExp(`[${(i=n.find(y=>y.type==="group"))==null?void 0:i.value}]`,"g"),h=new RegExp(`[${(s=n.find(y=>y.type==="decimal"))==null?void 0:s.value}]`),p=new RegExp(`[${o.join("")}]`,"g"),f=/[\u200E\u200F\u202A\u202B\u202C\u202D\u202E\u2066\u2067\u2068\u2069\u061C]/g,m=/[-\u2212\u2013\u2014\u2015]/g;r=y=>{if((y=y.trim().replaceAll(l,"").replace(h,".").replace(p,v=>String(a.get(v))).replaceAll(f,"").replaceAll(m,"-"))==="")return null;const _=Number(y);return isNaN(_)?null:_},Yb.set(t,r)}return r(e)}D_(()=>{Td=new WeakMap,NM={}});const Yb=new Map;async function OD(e,t,r,i){const s=t.exec(r);if(!s)throw new I("esri-intl:invalid-bundle",`Bundle id "${r}" is not compatible with the pattern "${t}"`);const n=s[1]?`${s[1]}/`:"",o=s[2],a=P3(i),l=`${n}${o}.json`,h=a?`${n}${o}_${a}.json`:l;let p;try{p=await Kb(e(h))}catch(f){if(h===l)throw new I("intl:unknown-bundle",`Bundle "${r}" cannot be loaded`,{error:f});try{p=await Kb(e(l))}catch(m){throw new I("intl:unknown-bundle",`Bundle "${r}" cannot be loaded`,{error:m})}}return p}async function Kb(e){if(Xb.fetchBundleAsset!=null)return Xb.fetchBundleAsset(e);const t=await We(e,{responseType:"text"});return JSON.parse(t.data)}let CD=class{constructor({base:t="",pattern:r,location:i=new URL(window.location.href)}){let s;s=typeof i=="string"?n=>new URL(n,new URL(i,window.location.href)).href:i instanceof URL?n=>new URL(n,i).href:i,this.pattern=typeof r=="string"?new RegExp(`^${r}`):r,this.getAssetUrl=s,t=t?t.endsWith("/")?t:t+"/":"",this.matcher=new RegExp(`^${t}(?:(.*)\\/)?(.*)$`)}fetchMessageBundle(t,r){return OD(this.getAssetUrl,this.matcher,t,r)}};function ID(e){return new CD(e)}const Xb={};c5(ID({pattern:"esri/",location:Ge}));let Hi=class extends W{constructor(t){super(t),this.apiKey=null,this.id=null,this.language=null,this.places=null,this.serviceUrl="https://basemapstyles-api.arcgis.com/arcgis/rest/services/styles/v2",this.worldview=null}get languageParameter(){const t=this.language;let r=t==="local"||t==="global"?t:P3(t??Bt())??"global";return r=r==="no"?"nb":r,r}};c([d()],Hi.prototype,"apiKey",void 0),c([d()],Hi.prototype,"id",void 0),c([d()],Hi.prototype,"language",void 0),c([d()],Hi.prototype,"places",void 0),c([d()],Hi.prototype,"serviceUrl",void 0),c([d()],Hi.prototype,"worldview",void 0),Hi=c([S("esri.support.BasemapStyle")],Hi);const RD=Hi;function $Q(e){return e!=null&&typeof e=="object"&&"type"in e&&e.type==="feature"}function kD(e){return e!=null&&typeof e=="object"&&"type"in e&&e.type==="subtype-group"&&"sublayers"in e}function Vn(e){return(e==null?void 0:e.type)==="subtype-sublayer"}const EQ={Point:"SceneLayer","3DObject":"SceneLayer",IntegratedMesh:"IntegratedMeshLayer",PointCloud:"PointCloudLayer",Building:"BuildingSceneLayer"};function MQ(e){const t=e==null?void 0:e.type;return t==="building-scene"||t==="integrated-mesh"||t==="point-cloud"||t==="scene"}function xQ(e){return e==="integrated-mesh"||e==="integrated-mesh-3dtiles"}function Bf(e){var t;return(e==null?void 0:e.type)==="feature"&&!e.url&&((t=e.source)==null?void 0:t.type)==="memory"}function AQ(e){var r;const t=e==null?void 0:e.type;return(t==="feature"||t==="subtype-group"||t==="oriented-imagery")&&((r=e==null?void 0:e.source)==null?void 0:r.type)==="feature-layer"}async function PQ(e,t){const r=ve==null?void 0:ve.findServerInfo(e);if((r==null?void 0:r.currentVersion)!=null)return r.owningSystemUrl||null;const i=e.toLowerCase().indexOf("/rest/services");if(i===-1)return null;const s=`${e.slice(0,i)}/rest/info`,n=t!=null?t.signal:null,{data:o}=await We(s,{query:{f:"json"},responseType:"json",signal:n});return(o==null?void 0:o.owningSystemUrl)||null}function ND(e){if(!("capabilities"in e))return!1;switch(e.type){case"catalog":case"catalog-footprint":case"csv":case"feature":case"geojson":case"imagery":case"knowledge-graph-sublayer":case"ogc-feature":case"oriented-imagery":case"scene":case"sublayer":case"subtype-group":case"subtype-sublayer":case"wfs":return!0;default:return!1}}function LD(e){return ND(e)?"effectiveCapabilities"in e?e.effectiveCapabilities:e.capabilities:null}function DD(e){if(!("editingEnabled"in e))return!1;switch(e.type){case"csv":case"feature":case"geojson":case"oriented-imagery":case"scene":case"subtype-group":case"subtype-sublayer":return!0;default:return!1}}function FD(e){return!!DD(e)&&("effectiveEditingEnabled"in e?e.effectiveEditingEnabled:e.editingEnabled)}const UD=new Set(["bing-maps","imagery","imagery-tile","map-image","open-street-map","tile","unknown","unsupported","vector-tile","web-tile","wcs","wms","wmts"]),LM=new Set(["catalog","csv","feature","geo-rss","geojson","group","imagery","imagery-tile","kml","knowledge-graph","map-image","map-notes","media","ogc-feature","oriented-imagery","route","stream","subtype-group","tile","unknown","unsupported","vector-tile","web-tile","wcs","wfs","wms","wmts"]),jD=new Set([...LM,"link-chart"]);function GD(e){switch(e.layerContainerType){case"basemap":return UD;case"operational-layers":return e.origin==="link-chart"?jD:LM;default:return null}}function zD(e,t){if(t.restrictedWebMapWriting){const r=GD(t);return r==null||r.has(e.type)&&!Bf(e)}return!0}function VD(e,t){var r;if(t)if(Bf(e)){const i=wf("featureCollection.layers",t),s=(r=i==null?void 0:i[0])==null?void 0:r.layerDefinition;s&&Qb(e,s)}else e.type!=="group"&&Qb(e,t)}function Qb(e,t){"maxScale"in e&&(t.maxScale=$p(e.maxScale)??void 0),"minScale"in e&&(t.minScale=$p(e.minScale)??void 0)}function BD(e,t){if(VD(e,t),t&&(t.id=e.id,"blendMode"in e&&(t.blendMode=e.blendMode,t.blendMode==="normal"&&delete t.blendMode),t.opacity=$p(e.opacity)??void 0,t.title=e.title||"Layer",t.visibility=e.visible,"legendEnabled"in e&&e.type!=="wmts"))if(Bf(e)){const r=t.featureCollection;r&&(r.showLegend=e.legendEnabled)}else t.showLegend=e.legendEnabled}function e2(e,t,r){if(!e.persistenceEnabled)return null;if(!("write"in e)||!e.write)return r!=null&&r.messages&&r.messages.push(new I("layer:unsupported",`Layers (${e.title}, ${e.id}) of type '${e.declaredClass}' cannot be persisted`,{layer:e})),null;if(Bf(e)&&!e.isTable)t=e.resourceInfo;else if(zD(e,r)){const i={};return e.write(i,r)?i:null}return t!=null&&BD(e,t=C(t)),t}var cu;let HD=0,Xt=cu=class extends G.JSONSupportMixin(yn){constructor(e){super(e),this.id=null,this.portalItem=null,this.spatialReference=null,this.style=null,this.thumbnailUrl=null,this.title="Basemap",this.id=Date.now().toString(16)+"-basemap-"+HD++,this.baseLayers=new H,this.referenceLayers=new H;const t=i=>{i.parent&&i.parent!==this&&"remove"in i.parent&&i.parent.remove(i),i.parent=this,i.type==="elevation"&&U.getLogger(this).error(`Layer '${i.title}, id:${i.id}' of type '${i.type}' is not supported as a basemap layer and will therefore be ignored.`)},r=i=>{i.parent=null};this.addHandles([this.baseLayers.on("after-add",i=>t(i.item)),this.referenceLayers.on("after-add",i=>t(i.item)),this.baseLayers.on("after-remove",i=>r(i.item)),this.referenceLayers.on("after-remove",i=>r(i.item))])}initialize(){this.when().catch(e=>{U.getLogger(this).error("#load()",`Failed to load basemap (title: '${this.title}', id: '${this.id}')`,e)}),this.resourceInfo&&this.read(this.resourceInfo.data,this.resourceInfo.context)}destroy(){const e=this.baseLayers.toArray();for(const r of e)r.destroy();const t=this.referenceLayers.toArray();for(const r of t)r.destroy();this.baseLayers.destroy(),this.referenceLayers.destroy(),this.portalItem=Ne(this.portalItem)}normalizeCtorArgs(e){return e&&"resourceInfo"in e&&(this._set("resourceInfo",e.resourceInfo),delete(e={...e}).resourceInfo),e}set baseLayers(e){this._set("baseLayers",ys(e,this._get("baseLayers")))}_writeBaseLayers(e,t,r){const i=[];e&&(r={...r,layerContainerType:"basemap"},this.baseLayers.forEach(s=>{const n=e2(s,r.webmap?r.webmap.getLayerJSONFromResourceInfo(s):null,r);n!=null&&i.push(n)}),this.referenceLayers.forEach(s=>{const n=e2(s,r.webmap?r.webmap.getLayerJSONFromResourceInfo(s):null,r);n!=null&&(s.type!=="scene"&&(n.isReference=!0),i.push(n))})),t.baseMapLayers=i}set referenceLayers(e){this._set("referenceLayers",ys(e,this._get("referenceLayers")))}writeTitle(e,t){t.title=e||"Basemap"}load(e){return this.addResolvingPromise(this._loadFromSource(e)),Promise.resolve(this)}loadAll(){return XE(this,e=>{e(this.baseLayers,this.referenceLayers)})}clone(){const e={id:this.id,title:this.title,portalItem:this.portalItem,baseLayers:this.baseLayers.map(t=>cp(t)?t.clone():t),referenceLayers:this.referenceLayers.map(t=>cp(t)?t.clone():t)};return this.loaded&&(e.loadStatus="loaded"),new cu({resourceInfo:this.resourceInfo}).set(e)}read(e,t){this.resourceInfo||this._set("resourceInfo",{data:e,context:t}),super.read(e,t)}write(e,t){var r;return e=e||{},t!=null&&t.origin||(t={origin:"web-map",...t}),super.write(e,t),!this.loaded&&((r=this.resourceInfo)!=null&&r.data.baseMapLayers)&&(e.baseMapLayers=this.resourceInfo.data.baseMapLayers.map(i=>{const s=C(i);return s.url&&xi(s.url)&&(s.url=`https:${s.url}`),s.templateUrl&&xi(s.templateUrl)&&(s.templateUrl=`https:${s.templateUrl}`),s})),e}async _loadFromSource(e){const{resourceInfo:t,portalItem:r,style:i}=this;Be(e);const s=[];if(t){const n=t.context?t.context.url:null;if(s.push(this._loadLayersFromJSON(t.data,n,e)),t.data.id&&!t.data.title){const o=t.data.id;s.push(p5(o).then(a=>{a&&this.read({title:a},t.context)}))}}else r?s.push(this._loadFromItem(r,e)):i&&s.push(this._loadFromStylesService(i,e));await Promise.all(s)}async _loadLayersFromJSON(e,t,r){var l,h;const i=(l=this.resourceInfo)==null?void 0:l.context,s=((h=this.portalItem)==null?void 0:h.portal)||(i==null?void 0:i.portal)||null,n=WD[(i==null?void 0:i.origin)||""]??"web-map",{populateOperationalLayers:o}=await N(async()=>{const{populateOperationalLayers:p}=await import("./layersCreator-Bp5PgERH.js");return{populateOperationalLayers:p}},__vite__mapDeps([22,23,24,25,26,27,20,28])),a=[];if(Be(r),e.baseMapLayers&&Array.isArray(e.baseMapLayers)){const p={context:{...i,origin:n,url:t,portal:s,layerContainerType:"basemap"},defaultLayerType:"DefaultTileLayer"},f=_=>n==="web-scene"&&_.layerType==="ArcGISSceneServiceLayer"||_.isReference,m=o(this.baseLayers,e.baseMapLayers.filter(_=>!f(_)),p);a.push(m);const y=o(this.referenceLayers,e.baseMapLayers.filter(f),p);a.push(y)}await Promise.allSettled(a)}async _loadFromItem(e,t){const r=await e.load(t),i=await r.fetchData("json",t),s=Nt(e.itemUrl??"");return this._set("resourceInfo",{data:i.baseMap??{},context:{origin:qD[e.type||""]??"web-map",portal:e.portal||vn.getDefault(),url:s}}),this.read(this.resourceInfo.data,this.resourceInfo.context),this.read({spatialReference:i.spatialReference},this.resourceInfo.context),this.read({title:e.title,thumbnailUrl:e.thumbnailUrl},{origin:"portal-item",portal:e.portal||vn.getDefault(),url:s}),this._loadLayersFromJSON(this.resourceInfo.data,s,t)}async _loadFromStylesService(e,t){const r=e.serviceUrl.endsWith("/webmaps")?e.serviceUrl.slice(0,-8):e.serviceUrl,i=`${r}/styles/${e.id}/self`,s=`${r}/webmaps/${e.id}`,[n,o]=await Promise.all([(await We(i,{query:{token:e.apiKey},signal:t==null?void 0:t.signal})).data,(await We(s,{query:{language:e.languageParameter,places:e.places,worldview:e.worldview,token:e.apiKey},signal:t==null?void 0:t.signal})).data]);this.thumbnailUrl??(this.thumbnailUrl=n.thumbnailUrl);const a=Nt(s);if(this._set("resourceInfo",{data:o.baseMap??{},context:{origin:"web-map",url:a}}),this.read(this.resourceInfo.data,this.resourceInfo.context),this.read({spatialReference:o.spatialReference},this.resourceInfo.context),await this._loadLayersFromJSON(this.resourceInfo.data,a,t),e.apiKey)for(const l of[...this.baseLayers,...this.referenceLayers])"apiKey"in l&&(l.apiKey=e.apiKey)}static fromId(e){const t=Pg[e];return t?t.itemId?new cu({portalItem:{id:t.itemId,portal:{url:"https://www.arcgis.com"}}}):cu.fromJSON(t,{origin:t.is3d?"web-scene":"web-map"}):null}};c([d({json:{write:{ignoreOrigin:!0,target:"baseMapLayers",writer(e,t,r,i){this._writeBaseLayers(e,t,i)}},origins:{"web-scene":{write:{ignoreOrigin:!0,target:{baseMapLayers:{type:H}},writer(e,t,r,i){this._writeBaseLayers(e,t,i)}}}}}})],Xt.prototype,"baseLayers",null),c([d({type:String,json:{origins:{"web-scene":{write:!0}}}})],Xt.prototype,"id",void 0),c([d({type:E3})],Xt.prototype,"portalItem",void 0),c([d()],Xt.prototype,"referenceLayers",null),c([d({readOnly:!0})],Xt.prototype,"resourceInfo",void 0),c([d({type:le})],Xt.prototype,"spatialReference",void 0),c([d({type:RD})],Xt.prototype,"style",void 0),c([d()],Xt.prototype,"thumbnailUrl",void 0),c([d({type:String,json:{origins:{"web-scene":{write:{isRequired:!0}}}}})],Xt.prototype,"title",void 0),c([ae("title")],Xt.prototype,"writeTitle",null),Xt=cu=c([S("esri.Basemap")],Xt);const qD={"Web Scene":"web-scene","Web Map":"web-map","Link Chart":"link-chart"},WD={"web-scene":"web-scene","web-map":"web-map","link-chart":"link-chart"},ic=Xt,ZD=Object.freeze(Object.defineProperty({__proto__:null,default:ic},Symbol.toStringTag,{value:"Module"})),Up={transparent:[0,0,0,0],black:[0,0,0,1],silver:[192,192,192,1],gray:[128,128,128,1],white:[255,255,255,1],maroon:[128,0,0,1],red:[255,0,0,1],purple:[128,0,128,1],fuchsia:[255,0,255,1],green:[0,128,0,1],lime:[0,255,0,1],olive:[128,128,0,1],yellow:[255,255,0,1],navy:[0,0,128,1],blue:[0,0,255,1],teal:[0,128,128,1],aqua:[0,255,255,1],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],blanchedalmond:[255,235,205,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],oldlace:[253,245,230,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],rebeccapurple:[102,51,153,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],whitesmoke:[245,245,245,1],yellowgreen:[154,205,50,1]};function JD(e){return!!Up[e]||!!Up[e.toLowerCase()]}function DM(e){return Up[e]??Up[e.toLowerCase()]}function OQ(e){return[...DM(e)]}function Wm(e,t,r){r<0&&++r,r>1&&--r;const i=6*r;return i<1?e+(t-e)*i:2*r<1?t:3*r<2?e+(t-e)*(2/3-r)*6:e}function YD(e,t,r,i=1){const s=(e%360+360)%360/360,n=r<=.5?r*(t+1):r+t-r*t,o=2*r-n;return[Math.round(255*Wm(o,n,s+1/3)),Math.round(255*Wm(o,n,s)),Math.round(255*Wm(o,n,s-1/3)),i]}function CQ(e){const t=e.length>5,r=t?8:4,i=(1<<r)-1,s=t?1:17,n=t?e.length===9:e.length===5;let o=+("0x"+e.slice(1));if(isNaN(o))return null;const a=[0,0,0,1];let l;return n&&(l=o&i,o>>=r,a[3]=s*l/255),l=o&i,o>>=r,a[2]=s*l,l=o&i,o>>=r,a[1]=s*l,l=o&i,o>>=r,a[0]=s*l,a}const IQ=2.2,t2=new Float32Array(1);function RQ(e){--e;for(let t=1;t<32;t<<=1)e|=e>>t;return e+1}function si(e,t,r){return Math.min(Math.max(e,t),r)}function kQ(e){return e--,e|=e>>1,e|=e>>2,e|=e>>4,e|=e>>8,e|=e>>16,++e}function hu(e,t,r){return e+(t-e)*r}function NQ(e,t,r,i,s){return hu(i,s,(e-t)/(r-t))}function Hf(e){return e*Math.PI/180}function FM(e){return 180*e/Math.PI}function LQ(e,t=1e-6){return(e<0?-1:1)/Math.max(Math.abs(e),t)}function DQ(e){return Math.acos(si(e,-1,1))}function KD(e){return Math.asin(si(e,-1,1))}function Ha(e,t,r=1e-6){return e===t?!0:!Number.isFinite(e)||!Number.isFinite(t)?!1:(e>t?e-t:t-e)<=r}function FQ(e,t,r=1e-6){return!Ha(e,t,r)&&e>t}function UQ(e,t,r=1e-6){return!Ha(e,t,r)&&e<t}function jQ(e,t,r=1e-6){return Ha(e,t,r)||e>t}const jp=new DataView(new ArrayBuffer(Float64Array.BYTES_PER_ELEMENT));function Fg(e){return jp.setFloat64(0,e),jp.getBigInt64(0)}function XD(e){return jp.setBigInt64(0,e),jp.getFloat64(0)}const $d=BigInt("1000000"),QD=UM(1);function UM(e){const t=Fg(e=Math.abs(e)),r=XD(t<=$d?$d:t-$d);return Math.abs(e-r)}function GQ(e,t,r=QD){if(e===t)return!0;if(!Number.isFinite(e)||!Number.isFinite(t))return!1;if(r!=null&&UM(Math.min(Math.abs(e),Math.abs(t)))<r)return Math.abs(e-t)<=r;const i=Fg(e),s=Fg(t);return i<0!=s<0?!1:!((i<s?s-i:i-s)>$d)}function zQ(e){return jM(Math.max(-r2,Math.min(e,r2)))}function jM(e){return t2[0]=e,t2[0]}function VQ(e){const t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],r=e[3]*e[3]+e[4]*e[4]+e[5]*e[5],i=e[6]*e[6]+e[7]*e[7]+e[8]*e[8];return!(Ha(t,1)&&Ha(r,1)&&Ha(i,1))}const r2=jM(34028234663852886e22);function BQ(e,t,r){if(r===void 0||+r==0)return Math[e](t);if(t=+t,r=+r,isNaN(t)||typeof r!="number"||r%1!=0)return NaN;let i=t.toString().split("e");return i=(t=Math[e](+(i[0]+"e"+(i[1]?+i[1]-r:-r)))).toString().split("e"),+(i[0]+"e"+(i[1]?+i[1]+r:r))}function Ih(e){return si(l_(e),0,255)}function Rh(e,t,r){return e=Number(e),isNaN(e)?r:e<t?t:e>r?r:e}function kh(e,t){const r=e.toString(16).padStart(2,"0");return t?r.slice(0,1):r}let oe=class Qe{static blendColors(t,r,i,s=new Qe){return s.r=Math.round(t.r+(r.r-t.r)*i),s.g=Math.round(t.g+(r.g-t.g)*i),s.b=Math.round(t.b+(r.b-t.b)*i),s.a=t.a+(r.a-t.a)*i,s._sanitize()}static fromRgb(t,r){const i=t.toLowerCase().match(/^(rgba?|hsla?)\(([\s.\-,%0-9]+)\)/);if(i){const s=i[2].split(/\s*,\s*/),n=i[1];if(n==="rgb"&&s.length===3||n==="rgba"&&s.length===4){const o=s[0];if(o.charAt(o.length-1)==="%"){const a=s.map(l=>2.56*parseFloat(l));return s.length===4&&(a[3]=parseFloat(s[3])),Qe.fromArray(a,r)}return Qe.fromArray(s.map(a=>parseFloat(a)),r)}if(n==="hsl"&&s.length===3||n==="hsla"&&s.length===4)return Qe.fromArray(YD(parseFloat(s[0]),parseFloat(s[1])/100,parseFloat(s[2])/100,parseFloat(s[3])),r)}return null}static fromHex(t,r=new Qe){if(t[0]!=="#"||isNaN(+`0x${t.slice(1)}`))return null;switch(t.length){case 4:case 5:{const i=parseInt(t.slice(1,2),16),s=parseInt(t.slice(2,3),16),n=parseInt(t.slice(3,4),16),o=t.length===5?15:parseInt(t.slice(4),16);return Qe.fromArray([i+16*i,s+16*s,n+16*n,(o+16*o)/255],r)}case 7:case 9:{const i=parseInt(t.slice(1,3),16),s=parseInt(t.slice(3,5),16),n=parseInt(t.slice(5,7),16),o=t.length===7?255:parseInt(t.slice(7),16);return Qe.fromArray([i,s,n,o/255],r)}default:return null}}static fromArray(t,r=new Qe){return r._set(Number(t[0]),Number(t[1]),Number(t[2]),Number(t[3])),isNaN(r.a)&&(r.a=1),r._sanitize()}static fromString(t,r){const i=JD(t)?DM(t):null;return i&&Qe.fromArray(i,r)||Qe.fromRgb(t,r)||Qe.fromHex(t,r)}static fromJSON(t){return t!=null?new Qe([t[0],t[1],t[2],(t[3]??255)/255]):void 0}static toUnitRGB(t){return t!=null?[t.r/255,t.g/255,t.b/255]:null}static toUnitRGBA(t){return t!=null?[t.r/255,t.g/255,t.b/255,t.a!=null?t.a:1]:null}constructor(t){this.r=255,this.g=255,this.b=255,this.a=1,t&&this.setColor(t)}get isBright(){return .299*this.r+.587*this.g+.114*this.b>=127}setColor(t){return typeof t=="string"?Qe.fromString(t,this):Array.isArray(t)?Qe.fromArray(t,this):(this._set(t.r??0,t.g??0,t.b??0,t.a??1),t instanceof Qe||this._sanitize()),this}toRgb(){return[this.r,this.g,this.b]}toRgba(){return[this.r,this.g,this.b,this.a]}toHex(t){const r=(t==null?void 0:t.capitalize)??!1,i=(t==null?void 0:t.digits)??6,s=i===3||i===4,n=i===4||i===8,o=`#${kh(this.r,s)}${kh(this.g,s)}${kh(this.b,s)}${n?kh(Math.round(255*this.a),s):""}`;return r?o.toUpperCase():o}toCss(t=!1){const r=this.r+", "+this.g+", "+this.b;return t?`rgba(${r}, ${this.a})`:`rgb(${r})`}toString(){return this.toCss(!0)}toJSON(){return this.toArray()}toArray(t=Qe.AlphaMode.ALWAYS){const r=Ih(this.r),i=Ih(this.g),s=Ih(this.b);return t===Qe.AlphaMode.ALWAYS||this.a!==1?[r,i,s,Ih(255*this.a)]:[r,i,s]}clone(){return new Qe(this.toRgba())}hash(){return this.r<<24|this.g<<16|this.b<<8|255*this.a}equals(t){return t!=null&&t.r===this.r&&t.g===this.g&&t.b===this.b&&t.a===this.a}_sanitize(){return this.r=Math.round(Rh(this.r,0,255)),this.g=Math.round(Rh(this.g,0,255)),this.b=Math.round(Rh(this.b,0,255)),this.a=Rh(this.a,0,1),this}_set(t,r,i,s){this.r=t,this.g=r,this.b=i,this.a=s}};oe.prototype.declaredClass="esri.Color",function(e){var t;(t=e.AlphaMode||(e.AlphaMode={}))[t.ALWAYS=0]="ALWAYS",t[t.UNLESS_OPAQUE=1]="UNLESS_OPAQUE"}(oe);function Y(e,t={}){const r=e instanceof it?e:new it(e,t),{alwaysWriteDefaults:i,default:s,ignoreUnknown:n=!0,name:o,nonNullable:a,readOnly:l=!1}=t;return d({type:n?r.apiValues:String,json:{type:r.jsonValues,default:s,name:o,read:!l&&{reader:r.read},write:{writer:r.write,alwaysWriteDefaults:i}},nonNullable:a,readOnly:l})}var Ug;let Ed=Ug=class extends G{constructor(e){super(e),this.type="none"}clone(){return new Ug({type:this.type})}};c([Y({none:"none",stayAbove:"stay-above"}),d({json:{write:{isRequired:!0}}})],Ed.prototype,"type",void 0),Ed=Ug=c([S("esri.ground.NavigationConstraint")],Ed);const e6=Symbol("GroundInstance");function GM(e){const t=l_(100*(1-e));return Math.max(0,Math.min(t,100))}function zM(e){const t=1-e/100;return Math.max(0,Math.min(t,1))}var VM,jg;let qi=jg=class extends G.JSONSupportMixin(yn){constructor(e){super(e),this[VM]=!0,this.opacity=1,this.surfaceColor=null,this.navigationConstraint=null,this.layers=new H;const t=i=>{i.parent&&i.parent!==this&&"remove"in i.parent&&i.parent.remove(i),i.parent=this,i.type!=="elevation"&&i.type!=="base-elevation"&&U.getLogger(this).error(`Layer '${i.title}, id:${i.id}' of type '${i.type}' is not supported as a ground layer and will therefore be ignored. Only layers of type 'elevation' are supported.`)},r=i=>{i.parent=null};this.addHandles([this.layers.on("after-add",i=>t(i.item)),this.layers.on("after-remove",i=>r(i.item))])}initialize(){this.when().catch(e=>{qt(e)||U.getLogger(this).error("#load()","Failed to load ground",e)}),this.resourceInfo&&this.read(this.resourceInfo.data,this.resourceInfo.context)}destroy(){const e=this.layers.removeAll();for(const t of e)Ne(t);this.layers.destroy()}normalizeCtorArgs(e){return e&&"resourceInfo"in e&&(this._set("resourceInfo",e.resourceInfo),delete(e={...e}).resourceInfo),e}get layers(){return this._get("layers")}set layers(e){this._set("layers",ys(e,this._get("layers")))}writeLayers(e,t,r,i){const s=[];e&&(i={...i,layerContainerType:"ground"},e.forEach(n=>{if("write"in n){const o={};wI(n)().write(o,i)&&s.push(o)}else i!=null&&i.messages&&i.messages.push(new I("layer:unsupported",`Layers (${n.title}, ${n.id}) of type '${n.declaredClass}' cannot be persisted in the ground`,{layer:n}))})),t.layers=s}load(e){return this.addResolvingPromise(this._loadFromSource(e)),Promise.resolve(this)}loadAll(){return XE(this,e=>{e(this.layers)})}async queryElevation(e,t){await this.load({signal:t==null?void 0:t.signal});const{ElevationQuery:r}=await N(()=>import("./ElevationQuery-fnWjVMY5.js"),[]);Be(t);const i=new r,s=this.layers.filter(i2).toArray();return i.queryAll(s,e,t)}async createElevationSampler(e,t){await this.load({signal:t==null?void 0:t.signal});const{ElevationQuery:r}=await N(()=>import("./ElevationQuery-fnWjVMY5.js"),[]);Be(t);const i=new r,s=this.layers.filter(i2).toArray();return i.createSamplerAll(s,e,t)}clone(){const e={opacity:this.opacity,surfaceColor:C(this.surfaceColor),navigationConstraint:C(this.navigationConstraint),layers:this.layers.slice()};return this.loaded&&(e.loadStatus="loaded"),new jg({resourceInfo:this.resourceInfo}).set(e)}read(e,t){this.resourceInfo||this._set("resourceInfo",{data:e,context:t}),super.read(e,t)}_loadFromSource(e){const t=this.resourceInfo;return t?this._loadLayersFromJSON(t.data,t.context,e):Promise.resolve()}async _loadLayersFromJSON(e,t,r){const i=(t==null?void 0:t.origin)||"web-scene",s=(t==null?void 0:t.portal)||null,n=(t==null?void 0:t.url)||null,{populateOperationalLayers:o}=await N(async()=>{const{populateOperationalLayers:l}=await import("./layersCreator-Bp5PgERH.js");return{populateOperationalLayers:l}},__vite__mapDeps([22,23,24,25,26,27,20,28]));Be(r);const a=[];if(e.layers&&Array.isArray(e.layers)){const l={context:{origin:i,url:n,portal:s,layerContainerType:"ground"},defaultLayerType:"ArcGISTiledElevationServiceLayer"};a.push(o(this.layers,e.layers,l))}await Promise.allSettled(a)}};function t6(e){return e&&"createElevationSampler"in e}function i2(e){return e.type==="elevation"||t6(e)}VM=e6,c([d({json:{read:!1,write:{isRequired:!0}}})],qi.prototype,"layers",null),c([ae("layers")],qi.prototype,"writeLayers",null),c([d({readOnly:!0})],qi.prototype,"resourceInfo",void 0),c([d({type:Number,nonNullable:!0,range:{min:0,max:1},json:{type:$e,read:{reader:zM,source:"transparency"},write:{writer:(e,t)=>{t.transparency=GM(e)},target:"transparency"}}})],qi.prototype,"opacity",void 0),c([d({type:oe,json:{type:[$e],write:(e,t)=>{t.surfaceColor=e.toJSON().slice(0,3)}}})],qi.prototype,"surfaceColor",void 0),c([d({type:Ed,json:{write:!0}})],qi.prototype,"navigationConstraint",void 0),qi=jg=c([S("esri.Ground")],qi);const Gp=qi;function Q(e,t,r={}){return J_(e,t,r,BM)}function Cr(e,t,r={}){return J_(e,t,r,HM)}function J_(e,t,r={},i){let s=null;const n=r.once?(o,a)=>{i(o)&&(Ie(s),t(o,a))}:(o,a)=>{i(o)&&t(o,a)};if(s=ZR(e,n,r.sync,r.equals),r.initial){const o=e();n(o,o)}return s}function wn(e,t,r,i={}){let s=null,n=null,o=null;function a(){var p;s&&n&&(n.remove(),(p=i.onListenerRemove)==null||p.call(i,s),s=null,n=null)}function l(p){i.once&&i.once&&Ie(o),r(p)}const h=Q(e,(p,f)=>{var m;a(),Tf(p)&&(s=p,n=Yc(p,t,l),(m=i.onListenerAdd)==null||m.call(i,p))},{sync:i.sync,initial:!0});return o=ce(()=>{h.remove(),a()}),o}function Y_(e,t){return r6(e,HM,t)}function r6(e,t,r){if(ur(r))return Promise.reject(Ee());const i=e();if(t!=null&&t(i))return Promise.resolve(i);let s=null;function n(){s=Ie(s)}return new Promise((o,a)=>{s=Wc([Ar(r,()=>{n(),a(Ee())}),J_(e,l=>{n(),o(l)},{sync:!1,once:!0},t??BM)])})}function BM(e){return!0}function HM(e){return!!e}function HQ(e,t,r={}){let i=!1;const s=Q(e,(n,o)=>{i||t(n,o)},r);return{remove(){s.remove()},pause(){i=!0},resume(){i=!1}}}function i6(e,t){const r=new H,i=wn(e,"after-splice",({added:s,start:n,deleteCount:o})=>{const a=r.splice(n,o);for(const l of a)l.remove();if(s!=null&&s.length){const l=s.map(t);r.addMany(l,n)}},{sync:!0,onListenerRemove:()=>r.drain(s=>s.remove()),onListenerAdd:s=>r.addMany(s.items.map(t))});return r.addHandles(i),r}function qQ(e,t){const r=new H,i=i6(e,a=>Rf(async l=>{const h=await t(a,l);if(ur(l))throw h.remove(),Ee();return h})),s=()=>null,n=async a=>{const l=await a.promise,h=i.indexOf(a);h<0||r.splice(h,1,l)};r.addMany(i.items.map(s));for(const a of i)yp(n(a));const o=i.on("after-splice",({added:a,start:l,deleteCount:h})=>{const p=r.splice(l,h);for(const f of p)f==null||f.remove();if(a!=null&&a.length){r.addMany(a.map(s),l);for(const f of a)yp(n(f))}});return r.addHandles([zI(i),o]),r}const bn={sync:!0},Tt={initial:!0},Gt={sync:!0,initial:!0};let ca=class extends H{constructor(t){super(t),this.getCollections=null}initialize(){this.addHandles(DR(()=>this._refresh(),bn))}destroy(){this.getCollections=null}_refresh(){const t=this.getCollections!=null?this.getCollections():null;if(t==null)return void this.removeAll();let r=0;for(const i of t)i!=null&&(r=this._processCollection(r,i));this.splice(r,this.length)}_createNewInstance(t){return new H(t)}_processCollection(t,r){if(!r)return t;const i=this.itemFilterFunction??(s=>!!s);for(const s of r)if(s){if(i(s)){const n=this.indexOf(s,t);n>=0?n!==t&&this.reorder(s,t):this.add(s,t),++t}if(this.getChildrenFunction){const n=this.getChildrenFunction(s);if(Array.isArray(n))for(const o of n)t=this._processCollection(t,o);else t=this._processCollection(t,n)}}return t}};c([d()],ca.prototype,"getCollections",void 0),c([d()],ca.prototype,"getChildrenFunction",void 0),c([d()],ca.prototype,"itemFilterFunction",void 0),ca=c([S("esri.core.CollectionFlattener")],ca);const Pc=ca,Nh=new WeakMap;function qM(e){return!e.destroyed&&(Nh.has(e)||e.addHandles([Q(()=>{const t=e.parent;return!(!t||!("type"in t))&&(t.type==="catalog-dynamic-group"||qM(t))},t=>Nh.set(e,t),Gt),ce(()=>Nh.delete(e))]),Nh.get(e))}function s6(e){return typeof e=="object"&&e!=null&&"loaded"in e&&e.loaded===!0&&"type"in e}function n6(e){var t,r;return!(!s6(e)||!((r=(t=LD(e))==null?void 0:t.operations)!=null&&r.supportsEditing)||"editingEnabled"in e&&!FD(e)||qM(e))}const o6=/^-?(\d+(\.\d+)?)\s*((px)|(pt))?$/i,a6="screenUtils.toPt: input not recognized!",WM=96;function ZQ(e){return e?e/72*WM:0}function No(e){return e?72*e/WM:0}function ke(e){if(typeof e=="string"){const t=e.match(o6);if(t){const r=Number(t[1]),i=t[3]&&t[3].toLowerCase(),s=e.charAt(0)==="-",n=i==="px"?No(r):r;return s?-n:n}return console.warn(a6),null}return e}function ut(e=0,t=0){return{x:e,y:t}}function JQ(e){return e?ut(e.x,e.y):null}function YQ(e=0,t=0){return[e,t]}function KQ(e=0,t=0,r=0){return[e,t,r]}function XQ(e){return e}function QQ(e){return e}function eee(e){return e}function tee(e,t){return t?(t[0]=e.x,t[1]=e.y,t.length>2&&(t[2]=0),t):[e.x,e.y]}function ZM(){const e=new Float32Array(16);return e[0]=1,e[5]=1,e[10]=1,e[15]=1,e}function l6(e){const t=new Float32Array(16);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function u6(e,t,r,i,s,n,o,a,l,h,p,f,m,y,_,v){const w=new Float32Array(16);return w[0]=e,w[1]=t,w[2]=r,w[3]=i,w[4]=s,w[5]=n,w[6]=o,w[7]=a,w[8]=l,w[9]=h,w[10]=p,w[11]=f,w[12]=m,w[13]=y,w[14]=_,w[15]=v,w}function c6(e,t){return new Float32Array(e,t,16)}const h6=ZM();Object.freeze(Object.defineProperty({__proto__:null,IDENTITY:h6,clone:l6,create:ZM,createView:c6,fromValues:u6},Symbol.toStringTag,{value:"Module"}));function xn(){return[0,0,0]}function K_(e){return[e[0],e[1],e[2]]}function Pl(e,t,r){return[e,t,r]}function d6(e,t,r){return[e,t,r]}function p6(e,t=xn()){const r=Math.min(3,e.length);for(let i=0;i<r;++i)t[i]=e[i];return t}function f6(e,t){return new Float64Array(e,t,3)}function JM(){return xn()}function YM(){return Pl(1,1,1)}function KM(){return Pl(1,0,0)}function XM(){return Pl(0,1,0)}function QM(){return Pl(0,0,1)}const m6=JM(),y6=YM(),g6=KM(),_6=XM(),v6=QM();Object.freeze(Object.defineProperty({__proto__:null,ONES:y6,UNIT_X:g6,UNIT_Y:_6,UNIT_Z:v6,ZEROS:m6,clone:K_,create:xn,createView:f6,freeze:d6,fromArray:p6,fromValues:Pl,ones:YM,unitX:KM,unitY:XM,unitZ:QM,zeros:JM},Symbol.toStringTag,{value:"Module"}));let X_=1e-6;function Ht(){return X_}function w6(e){X_=e}const Q_=Math.random,b6=Math.PI/180,S6=180/Math.PI;function ev(e){return e*b6}function T6(e){return e*S6}function $6(e,t){return Math.abs(e-t)<=X_*Math.max(1,Math.abs(e),Math.abs(t))}Object.freeze(Object.defineProperty({__proto__:null,RANDOM:Q_,equals:$6,getEpsilon:Ht,setEpsilon:w6,toDegree:T6,toRadian:ev},Symbol.toStringTag,{value:"Module"}));function ex(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function E6(e,t,r,i,s,n,o,a,l,h,p,f,m,y,_,v,w){return e[0]=t,e[1]=r,e[2]=i,e[3]=s,e[4]=n,e[5]=o,e[6]=a,e[7]=l,e[8]=h,e[9]=p,e[10]=f,e[11]=m,e[12]=y,e[13]=_,e[14]=v,e[15]=w,e}function qf(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function M6(e,t){if(e===t){const r=t[1],i=t[2],s=t[3],n=t[6],o=t[7],a=t[11];e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=r,e[6]=t[9],e[7]=t[13],e[8]=i,e[9]=n,e[11]=t[14],e[12]=s,e[13]=o,e[14]=a}else e[0]=t[0],e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=t[1],e[5]=t[5],e[6]=t[9],e[7]=t[13],e[8]=t[2],e[9]=t[6],e[10]=t[10],e[11]=t[14],e[12]=t[3],e[13]=t[7],e[14]=t[11],e[15]=t[15];return e}function x6(e,t){return tx(e,t)||qf(e),e}function tx(e,t){const r=t[0],i=t[1],s=t[2],n=t[3],o=t[4],a=t[5],l=t[6],h=t[7],p=t[8],f=t[9],m=t[10],y=t[11],_=t[12],v=t[13],w=t[14],b=t[15],M=r*a-i*o,$=r*l-s*o,E=r*h-n*o,P=i*l-s*a,O=i*h-n*a,L=s*h-n*l,k=p*v-f*_,z=p*w-m*_,B=p*b-y*_,K=f*w-m*v,ie=f*b-y*v,we=m*b-y*w;let X=M*we-$*ie+E*K+P*B-O*z+L*k;return X?(X=1/X,e[0]=(a*we-l*ie+h*K)*X,e[1]=(s*ie-i*we-n*K)*X,e[2]=(v*L-w*O+b*P)*X,e[3]=(m*O-f*L-y*P)*X,e[4]=(l*B-o*we-h*z)*X,e[5]=(r*we-s*B+n*z)*X,e[6]=(w*E-_*L-b*$)*X,e[7]=(p*L-m*E+y*$)*X,e[8]=(o*ie-a*B+h*k)*X,e[9]=(i*B-r*ie-n*k)*X,e[10]=(_*O-v*E+b*M)*X,e[11]=(f*E-p*O-y*M)*X,e[12]=(a*z-o*K-l*k)*X,e[13]=(r*K-i*z+s*k)*X,e[14]=(v*$-_*P-w*M)*X,e[15]=(p*P-f*$+m*M)*X,e):null}function A6(e,t){const r=t[0],i=t[1],s=t[2],n=t[3],o=t[4],a=t[5],l=t[6],h=t[7],p=t[8],f=t[9],m=t[10],y=t[11],_=t[12],v=t[13],w=t[14],b=t[15];return e[0]=a*(m*b-y*w)-f*(l*b-h*w)+v*(l*y-h*m),e[1]=-(i*(m*b-y*w)-f*(s*b-n*w)+v*(s*y-n*m)),e[2]=i*(l*b-h*w)-a*(s*b-n*w)+v*(s*h-n*l),e[3]=-(i*(l*y-h*m)-a*(s*y-n*m)+f*(s*h-n*l)),e[4]=-(o*(m*b-y*w)-p*(l*b-h*w)+_*(l*y-h*m)),e[5]=r*(m*b-y*w)-p*(s*b-n*w)+_*(s*y-n*m),e[6]=-(r*(l*b-h*w)-o*(s*b-n*w)+_*(s*h-n*l)),e[7]=r*(l*y-h*m)-o*(s*y-n*m)+p*(s*h-n*l),e[8]=o*(f*b-y*v)-p*(a*b-h*v)+_*(a*y-h*f),e[9]=-(r*(f*b-y*v)-p*(i*b-n*v)+_*(i*y-n*f)),e[10]=r*(a*b-h*v)-o*(i*b-n*v)+_*(i*h-n*a),e[11]=-(r*(a*y-h*f)-o*(i*y-n*f)+p*(i*h-n*a)),e[12]=-(o*(f*w-m*v)-p*(a*w-l*v)+_*(a*m-l*f)),e[13]=r*(f*w-m*v)-p*(i*w-s*v)+_*(i*m-s*f),e[14]=-(r*(a*w-l*v)-o*(i*w-s*v)+_*(i*l-s*a)),e[15]=r*(a*m-l*f)-o*(i*m-s*f)+p*(i*l-s*a),e}function P6(e){const t=e[0],r=e[1],i=e[2],s=e[3],n=e[4],o=e[5],a=e[6],l=e[7],h=e[8],p=e[9],f=e[10],m=e[11],y=e[12],_=e[13],v=e[14],w=e[15];return(t*o-r*n)*(f*w-m*v)-(t*a-i*n)*(p*w-m*_)+(t*l-s*n)*(p*v-f*_)+(r*a-i*o)*(h*w-m*y)-(r*l-s*o)*(h*v-f*y)+(i*l-s*a)*(h*_-p*y)}function rx(e,t,r){const i=t[0],s=t[1],n=t[2],o=t[3],a=t[4],l=t[5],h=t[6],p=t[7],f=t[8],m=t[9],y=t[10],_=t[11],v=t[12],w=t[13],b=t[14],M=t[15];let $=r[0],E=r[1],P=r[2],O=r[3];return e[0]=$*i+E*a+P*f+O*v,e[1]=$*s+E*l+P*m+O*w,e[2]=$*n+E*h+P*y+O*b,e[3]=$*o+E*p+P*_+O*M,$=r[4],E=r[5],P=r[6],O=r[7],e[4]=$*i+E*a+P*f+O*v,e[5]=$*s+E*l+P*m+O*w,e[6]=$*n+E*h+P*y+O*b,e[7]=$*o+E*p+P*_+O*M,$=r[8],E=r[9],P=r[10],O=r[11],e[8]=$*i+E*a+P*f+O*v,e[9]=$*s+E*l+P*m+O*w,e[10]=$*n+E*h+P*y+O*b,e[11]=$*o+E*p+P*_+O*M,$=r[12],E=r[13],P=r[14],O=r[15],e[12]=$*i+E*a+P*f+O*v,e[13]=$*s+E*l+P*m+O*w,e[14]=$*n+E*h+P*y+O*b,e[15]=$*o+E*p+P*_+O*M,e}function O6(e,t,r){const i=r[0],s=r[1],n=r[2];if(t===e)e[12]=t[0]*i+t[4]*s+t[8]*n+t[12],e[13]=t[1]*i+t[5]*s+t[9]*n+t[13],e[14]=t[2]*i+t[6]*s+t[10]*n+t[14],e[15]=t[3]*i+t[7]*s+t[11]*n+t[15];else{const o=t[0],a=t[1],l=t[2],h=t[3],p=t[4],f=t[5],m=t[6],y=t[7],_=t[8],v=t[9],w=t[10],b=t[11];e[0]=o,e[1]=a,e[2]=l,e[3]=h,e[4]=p,e[5]=f,e[6]=m,e[7]=y,e[8]=_,e[9]=v,e[10]=w,e[11]=b,e[12]=o*i+p*s+_*n+t[12],e[13]=a*i+f*s+v*n+t[13],e[14]=l*i+m*s+w*n+t[14],e[15]=h*i+y*s+b*n+t[15]}return e}function C6(e,t,r){const i=r[0],s=r[1],n=r[2];return e[0]=t[0]*i,e[1]=t[1]*i,e[2]=t[2]*i,e[3]=t[3]*i,e[4]=t[4]*s,e[5]=t[5]*s,e[6]=t[6]*s,e[7]=t[7]*s,e[8]=t[8]*n,e[9]=t[9]*n,e[10]=t[10]*n,e[11]=t[11]*n,e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function I6(e,t,r,i){let s=i[0],n=i[1],o=i[2],a=Math.sqrt(s*s+n*n+o*o);if(a<=Ht())return void ex(e,t);a=1/a,s*=a,n*=a,o*=a;const l=Math.sin(r),h=Math.cos(r),p=1-h,f=t[0],m=t[1],y=t[2],_=t[3],v=t[4],w=t[5],b=t[6],M=t[7],$=t[8],E=t[9],P=t[10],O=t[11],L=s*s*p+h,k=n*s*p+o*l,z=o*s*p-n*l,B=s*n*p-o*l,K=n*n*p+h,ie=o*n*p+s*l,we=s*o*p+n*l,X=n*o*p-s*l,Et=o*o*p+h;e[0]=f*L+v*k+$*z,e[1]=m*L+w*k+E*z,e[2]=y*L+b*k+P*z,e[3]=_*L+M*k+O*z,e[4]=f*B+v*K+$*ie,e[5]=m*B+w*K+E*ie,e[6]=y*B+b*K+P*ie,e[7]=_*B+M*K+O*ie,e[8]=f*we+v*X+$*Et,e[9]=m*we+w*X+E*Et,e[10]=y*we+b*X+P*Et,e[11]=_*we+M*X+O*Et,t!==e&&(e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15])}function R6(e,t,r){const i=Math.sin(r),s=Math.cos(r),n=t[4],o=t[5],a=t[6],l=t[7],h=t[8],p=t[9],f=t[10],m=t[11];return t!==e&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[4]=n*s+h*i,e[5]=o*s+p*i,e[6]=a*s+f*i,e[7]=l*s+m*i,e[8]=h*s-n*i,e[9]=p*s-o*i,e[10]=f*s-a*i,e[11]=m*s-l*i,e}function k6(e,t,r){const i=Math.sin(r),s=Math.cos(r),n=t[0],o=t[1],a=t[2],l=t[3],h=t[8],p=t[9],f=t[10],m=t[11];return t!==e&&(e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=n*s-h*i,e[1]=o*s-p*i,e[2]=a*s-f*i,e[3]=l*s-m*i,e[8]=n*i+h*s,e[9]=o*i+p*s,e[10]=a*i+f*s,e[11]=l*i+m*s,e}function N6(e,t,r){const i=Math.sin(r),s=Math.cos(r),n=t[0],o=t[1],a=t[2],l=t[3],h=t[4],p=t[5],f=t[6],m=t[7];return t!==e&&(e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=n*s+h*i,e[1]=o*s+p*i,e[2]=a*s+f*i,e[3]=l*s+m*i,e[4]=h*s-n*i,e[5]=p*s-o*i,e[6]=f*s-a*i,e[7]=m*s-l*i,e}function L6(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=t[0],e[13]=t[1],e[14]=t[2],e[15]=1,e}function D6(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=t[1],e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=t[2],e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function F6(e,t,r){if(t===0)return qf(e);let i=r[0],s=r[1],n=r[2],o=Math.sqrt(i*i+s*s+n*n);if(o<=Ht())return null;o=1/o,i*=o,s*=o,n*=o;const a=Math.sin(t),l=Math.cos(t),h=1-l;return e[0]=i*i*h+l,e[1]=s*i*h+n*a,e[2]=n*i*h-s*a,e[3]=0,e[4]=i*s*h-n*a,e[5]=s*s*h+l,e[6]=n*s*h+i*a,e[7]=0,e[8]=i*n*h+s*a,e[9]=s*n*h-i*a,e[10]=n*n*h+l,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function U6(e,t){const r=Math.sin(t),i=Math.cos(t);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=i,e[6]=r,e[7]=0,e[8]=0,e[9]=-r,e[10]=i,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function j6(e,t){const r=Math.sin(t),i=Math.cos(t);return e[0]=i,e[1]=0,e[2]=-r,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=r,e[9]=0,e[10]=i,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function G6(e,t){const r=Math.sin(t),i=Math.cos(t);return e[0]=i,e[1]=r,e[2]=0,e[3]=0,e[4]=-r,e[5]=i,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function ix(e,t,r){const i=t[0],s=t[1],n=t[2],o=t[3],a=i+i,l=s+s,h=n+n,p=i*a,f=i*l,m=i*h,y=s*l,_=s*h,v=n*h,w=o*a,b=o*l,M=o*h;return e[0]=1-(y+v),e[1]=f+M,e[2]=m-b,e[3]=0,e[4]=f-M,e[5]=1-(p+v),e[6]=_+w,e[7]=0,e[8]=m+b,e[9]=_-w,e[10]=1-(p+y),e[11]=0,e[12]=r[0],e[13]=r[1],e[14]=r[2],e[15]=1,e}function z6(e,t){const r=V6,i=-t[0],s=-t[1],n=-t[2],o=t[3],a=t[4],l=t[5],h=t[6],p=t[7],f=i*i+s*s+n*n+o*o;return f>0?(r[0]=2*(a*o+p*i+l*n-h*s)/f,r[1]=2*(l*o+p*s+h*i-a*n)/f,r[2]=2*(h*o+p*n+a*s-l*i)/f):(r[0]=2*(a*o+p*i+l*n-h*s),r[1]=2*(l*o+p*s+h*i-a*n),r[2]=2*(h*o+p*n+a*s-l*i)),ix(e,t,r),e}const V6=xn();function B6(e,t){return e[0]=t[12],e[1]=t[13],e[2]=t[14],e}function H6(e,t){const r=t[0],i=t[1],s=t[2],n=t[4],o=t[5],a=t[6],l=t[8],h=t[9],p=t[10];return e[0]=Math.sqrt(r*r+i*i+s*s),e[1]=Math.sqrt(n*n+o*o+a*a),e[2]=Math.sqrt(l*l+h*h+p*p),e}function q6(e,t){const r=t[0]+t[5]+t[10];let i=0;return r>0?(i=2*Math.sqrt(r+1),e[3]=.25*i,e[0]=(t[6]-t[9])/i,e[1]=(t[8]-t[2])/i,e[2]=(t[1]-t[4])/i):t[0]>t[5]&&t[0]>t[10]?(i=2*Math.sqrt(1+t[0]-t[5]-t[10]),e[3]=(t[6]-t[9])/i,e[0]=.25*i,e[1]=(t[1]+t[4])/i,e[2]=(t[8]+t[2])/i):t[5]>t[10]?(i=2*Math.sqrt(1+t[5]-t[0]-t[10]),e[3]=(t[8]-t[2])/i,e[0]=(t[1]+t[4])/i,e[1]=.25*i,e[2]=(t[6]+t[9])/i):(i=2*Math.sqrt(1+t[10]-t[0]-t[5]),e[3]=(t[1]-t[4])/i,e[0]=(t[8]+t[2])/i,e[1]=(t[6]+t[9])/i,e[2]=.25*i),e}function W6(e,t,r,i){const s=t[0],n=t[1],o=t[2],a=t[3],l=s+s,h=n+n,p=o+o,f=s*l,m=s*h,y=s*p,_=n*h,v=n*p,w=o*p,b=a*l,M=a*h,$=a*p,E=i[0],P=i[1],O=i[2];return e[0]=(1-(_+w))*E,e[1]=(m+$)*E,e[2]=(y-M)*E,e[3]=0,e[4]=(m-$)*P,e[5]=(1-(f+w))*P,e[6]=(v+b)*P,e[7]=0,e[8]=(y+M)*O,e[9]=(v-b)*O,e[10]=(1-(f+_))*O,e[11]=0,e[12]=r[0],e[13]=r[1],e[14]=r[2],e[15]=1,e}function Z6(e,t,r,i,s){const n=t[0],o=t[1],a=t[2],l=t[3],h=n+n,p=o+o,f=a+a,m=n*h,y=n*p,_=n*f,v=o*p,w=o*f,b=a*f,M=l*h,$=l*p,E=l*f,P=i[0],O=i[1],L=i[2],k=s[0],z=s[1],B=s[2],K=(1-(v+b))*P,ie=(y+E)*P,we=(_-$)*P,X=(y-E)*O,Et=(1-(m+b))*O,vs=(w+M)*O,hr=(_+$)*L,be=(w-M)*L,Di=(1-(m+v))*L;return e[0]=K,e[1]=ie,e[2]=we,e[3]=0,e[4]=X,e[5]=Et,e[6]=vs,e[7]=0,e[8]=hr,e[9]=be,e[10]=Di,e[11]=0,e[12]=r[0]+k-(K*k+X*z+hr*B),e[13]=r[1]+z-(ie*k+Et*z+be*B),e[14]=r[2]+B-(we*k+vs*z+Di*B),e[15]=1,e}function J6(e,t){const r=t[0],i=t[1],s=t[2],n=t[3],o=r+r,a=i+i,l=s+s,h=r*o,p=i*o,f=i*a,m=s*o,y=s*a,_=s*l,v=n*o,w=n*a,b=n*l;return e[0]=1-f-_,e[1]=p+b,e[2]=m-w,e[3]=0,e[4]=p-b,e[5]=1-h-_,e[6]=y+v,e[7]=0,e[8]=m+w,e[9]=y-v,e[10]=1-h-f,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function Y6(e,t,r,i,s,n,o){const a=1/(r-t),l=1/(s-i),h=1/(n-o);return e[0]=2*n*a,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=2*n*l,e[6]=0,e[7]=0,e[8]=(r+t)*a,e[9]=(s+i)*l,e[10]=(o+n)*h,e[11]=-1,e[12]=0,e[13]=0,e[14]=o*n*2*h,e[15]=0,e}function K6(e,t,r,i,s){const n=1/Math.tan(t/2);let o;return e[0]=n/r,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=n,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=-1,e[12]=0,e[13]=0,e[15]=0,s!=null&&s!==1/0?(o=1/(i-s),e[10]=(s+i)*o,e[14]=2*s*i*o):(e[10]=-1,e[14]=-2*i),e}function X6(e,t,r,i){const s=Math.tan(t.upDegrees*Math.PI/180),n=Math.tan(t.downDegrees*Math.PI/180),o=Math.tan(t.leftDegrees*Math.PI/180),a=Math.tan(t.rightDegrees*Math.PI/180),l=2/(o+a),h=2/(s+n);return e[0]=l,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=h,e[6]=0,e[7]=0,e[8]=-(o-a)*l*.5,e[9]=(s-n)*h*.5,e[10]=i/(r-i),e[11]=-1,e[12]=0,e[13]=0,e[14]=i*r/(r-i),e[15]=0,e}function Q6(e,t,r,i,s,n,o){const a=1/(t-r),l=1/(i-s),h=1/(n-o);return e[0]=-2*a,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*l,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*h,e[11]=0,e[12]=(t+r)*a,e[13]=(s+i)*l,e[14]=(o+n)*h,e[15]=1,e}function e8(e,t,r,i){const s=t[0],n=t[1],o=t[2];let a=s-r[0],l=n-r[1],h=o-r[2];const p=Ht();if(Math.abs(a)<p&&Math.abs(l)<p&&Math.abs(h)<p)return void qf(e);let f=1/Math.sqrt(a*a+l*l+h*h);a*=f,l*=f,h*=f;const m=i[0],y=i[1],_=i[2];let v=y*h-_*l,w=_*a-m*h,b=m*l-y*a;f=Math.sqrt(v*v+w*w+b*b),f?(f=1/f,v*=f,w*=f,b*=f):(v=0,w=0,b=0);let M=l*b-h*w,$=h*v-a*b,E=a*w-l*v;f=Math.sqrt(M*M+$*$+E*E),f?(f=1/f,M*=f,$*=f,E*=f):(M=0,$=0,E=0),e[0]=v,e[1]=M,e[2]=a,e[3]=0,e[4]=w,e[5]=$,e[6]=l,e[7]=0,e[8]=b,e[9]=E,e[10]=h,e[11]=0,e[12]=-(v*s+w*n+b*o),e[13]=-(M*s+$*n+E*o),e[14]=-(a*s+l*n+h*o),e[15]=1}function t8(e,t,r,i){const s=t[0],n=t[1],o=t[2],a=i[0],l=i[1],h=i[2];let p=s-r[0],f=n-r[1],m=o-r[2],y=p*p+f*f+m*m;y>0&&(y=1/Math.sqrt(y),p*=y,f*=y,m*=y);let _=l*m-h*f,v=h*p-a*m,w=a*f-l*p;return y=_*_+v*v+w*w,y>0&&(y=1/Math.sqrt(y),_*=y,v*=y,w*=y),e[0]=_,e[1]=v,e[2]=w,e[3]=0,e[4]=f*w-m*v,e[5]=m*_-p*w,e[6]=p*v-f*_,e[7]=0,e[8]=p,e[9]=f,e[10]=m,e[11]=0,e[12]=s,e[13]=n,e[14]=o,e[15]=1,e}function r8(e){return"mat4("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+", "+e[8]+", "+e[9]+", "+e[10]+", "+e[11]+", "+e[12]+", "+e[13]+", "+e[14]+", "+e[15]+")"}function i8(e){return Math.sqrt(e[0]**2+e[1]**2+e[2]**2+e[3]**2+e[4]**2+e[5]**2+e[6]**2+e[7]**2+e[8]**2+e[9]**2+e[10]**2+e[11]**2+e[12]**2+e[13]**2+e[14]**2+e[15]**2)}function s8(e,t,r){return e[0]=t[0]+r[0],e[1]=t[1]+r[1],e[2]=t[2]+r[2],e[3]=t[3]+r[3],e[4]=t[4]+r[4],e[5]=t[5]+r[5],e[6]=t[6]+r[6],e[7]=t[7]+r[7],e[8]=t[8]+r[8],e[9]=t[9]+r[9],e[10]=t[10]+r[10],e[11]=t[11]+r[11],e[12]=t[12]+r[12],e[13]=t[13]+r[13],e[14]=t[14]+r[14],e[15]=t[15]+r[15],e}function sx(e,t,r){return e[0]=t[0]-r[0],e[1]=t[1]-r[1],e[2]=t[2]-r[2],e[3]=t[3]-r[3],e[4]=t[4]-r[4],e[5]=t[5]-r[5],e[6]=t[6]-r[6],e[7]=t[7]-r[7],e[8]=t[8]-r[8],e[9]=t[9]-r[9],e[10]=t[10]-r[10],e[11]=t[11]-r[11],e[12]=t[12]-r[12],e[13]=t[13]-r[13],e[14]=t[14]-r[14],e[15]=t[15]-r[15],e}function n8(e,t,r){return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r,e[4]=t[4]*r,e[5]=t[5]*r,e[6]=t[6]*r,e[7]=t[7]*r,e[8]=t[8]*r,e[9]=t[9]*r,e[10]=t[10]*r,e[11]=t[11]*r,e[12]=t[12]*r,e[13]=t[13]*r,e[14]=t[14]*r,e[15]=t[15]*r,e}function o8(e,t,r,i){return e[0]=t[0]+r[0]*i,e[1]=t[1]+r[1]*i,e[2]=t[2]+r[2]*i,e[3]=t[3]+r[3]*i,e[4]=t[4]+r[4]*i,e[5]=t[5]+r[5]*i,e[6]=t[6]+r[6]*i,e[7]=t[7]+r[7]*i,e[8]=t[8]+r[8]*i,e[9]=t[9]+r[9]*i,e[10]=t[10]+r[10]*i,e[11]=t[11]+r[11]*i,e[12]=t[12]+r[12]*i,e[13]=t[13]+r[13]*i,e[14]=t[14]+r[14]*i,e[15]=t[15]+r[15]*i,e}function a8(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]&&e[6]===t[6]&&e[7]===t[7]&&e[8]===t[8]&&e[9]===t[9]&&e[10]===t[10]&&e[11]===t[11]&&e[12]===t[12]&&e[13]===t[13]&&e[14]===t[14]&&e[15]===t[15]}function l8(e,t){if(e===t)return!0;const r=e[0],i=e[1],s=e[2],n=e[3],o=e[4],a=e[5],l=e[6],h=e[7],p=e[8],f=e[9],m=e[10],y=e[11],_=e[12],v=e[13],w=e[14],b=e[15],M=t[0],$=t[1],E=t[2],P=t[3],O=t[4],L=t[5],k=t[6],z=t[7],B=t[8],K=t[9],ie=t[10],we=t[11],X=t[12],Et=t[13],vs=t[14],hr=t[15],be=Ht();return Math.abs(r-M)<=be*Math.max(1,Math.abs(r),Math.abs(M))&&Math.abs(i-$)<=be*Math.max(1,Math.abs(i),Math.abs($))&&Math.abs(s-E)<=be*Math.max(1,Math.abs(s),Math.abs(E))&&Math.abs(n-P)<=be*Math.max(1,Math.abs(n),Math.abs(P))&&Math.abs(o-O)<=be*Math.max(1,Math.abs(o),Math.abs(O))&&Math.abs(a-L)<=be*Math.max(1,Math.abs(a),Math.abs(L))&&Math.abs(l-k)<=be*Math.max(1,Math.abs(l),Math.abs(k))&&Math.abs(h-z)<=be*Math.max(1,Math.abs(h),Math.abs(z))&&Math.abs(p-B)<=be*Math.max(1,Math.abs(p),Math.abs(B))&&Math.abs(f-K)<=be*Math.max(1,Math.abs(f),Math.abs(K))&&Math.abs(m-ie)<=be*Math.max(1,Math.abs(m),Math.abs(ie))&&Math.abs(y-we)<=be*Math.max(1,Math.abs(y),Math.abs(we))&&Math.abs(_-X)<=be*Math.max(1,Math.abs(_),Math.abs(X))&&Math.abs(v-Et)<=be*Math.max(1,Math.abs(v),Math.abs(Et))&&Math.abs(w-vs)<=be*Math.max(1,Math.abs(w),Math.abs(vs))&&Math.abs(b-hr)<=be*Math.max(1,Math.abs(b),Math.abs(hr))}function u8(e){const t=Ht(),r=e[0],i=e[1],s=e[2],n=e[4],o=e[5],a=e[6],l=e[8],h=e[9],p=e[10];return Math.abs(1-(r*r+n*n+l*l))<=t&&Math.abs(1-(i*i+o*o+h*h))<=t&&Math.abs(1-(s*s+a*a+p*p))<=t}function c8(e){return e[0]===1&&e[1]===0&&e[2]===0&&e[4]===0&&e[5]===1&&e[6]===0&&e[8]===0&&e[9]===0&&e[10]===1}const h8=rx,d8=sx;Object.freeze(Object.defineProperty({__proto__:null,add:s8,adjoint:A6,copy:ex,determinant:P6,equals:l8,exactEquals:a8,frob:i8,fromQuat:J6,fromQuat2:z6,fromRotation:F6,fromRotationTranslation:ix,fromRotationTranslationScale:W6,fromRotationTranslationScaleOrigin:Z6,fromScaling:D6,fromTranslation:L6,fromXRotation:U6,fromYRotation:j6,fromZRotation:G6,frustum:Y6,getRotation:q6,getScaling:H6,getTranslation:B6,hasIdentityRotation:c8,identity:qf,invert:tx,invertOrIdentity:x6,isOrthoNormal:u8,lookAt:e8,mul:h8,multiply:rx,multiplyScalar:n8,multiplyScalarAndAdd:o8,ortho:Q6,perspective:K6,perspectiveFromFieldOfView:X6,rotate:I6,rotateX:R6,rotateY:k6,rotateZ:N6,scale:C6,set:E6,str:r8,sub:d8,subtract:sx,targetTo:t8,translate:O6,transpose:M6},Symbol.toStringTag,{value:"Module"}));const Zm=()=>U.getLogger("esri.support.basemapUtils");function p8(){return{}}function f8(e){for(const t in e){const r=e[t];Ne(r),delete e[t]}}function m8(e,t){let r;if(typeof e=="string"){const i=e in Pg,s=!i&&e.includes("/");if(!i&&!s){if(ye.apiKey)Zm().warn(`Unable to find basemap definition for: ${e}. See available styles at https://developers.arcgis.com/rest/basemap-styles/`);else{const n=Object.entries(Pg).filter(([o,a])=>a.classic||a.is3d).map(([o])=>`"${o}"`).sort().join(", ");Zm().warn(`Unable to find basemap definition for: ${e}. Try one of these: ${n}`)}return null}t&&(r=t[e]),r||(r=i?ic.fromId(e):new ic({style:{id:e}}),t&&(t[e]=r))}else r=kt(ic,e);return r!=null&&r.destroyed&&(Zm().warn("The provided basemap is already destroyed",{basemap:r}),r=null),r}function y8(e){return new Pc({getCollections:()=>[e.tables,e.layers],getChildrenFunction:t=>{const r=[];return"tables"in t&&r.push(t.tables),"layers"in t&&r.push(t.layers),r},itemFilterFunction:t=>{const r=t.parent;return!!r&&"tables"in r&&r.tables.includes(t)}})}function Jm(e){for(const t of e.values())t==null||t.destroy();e.clear()}const s2={"world-elevation":{id:"worldElevation",url:"//elevation3d.arcgis.com/arcgis/rest/services/WorldElevation3D/Terrain3D/ImageServer",layerType:"ArcGISTiledElevationServiceLayer"},"world-topobathymetry":{id:"worldTopoBathymetry",url:"//elevation3d.arcgis.com/arcgis/rest/services/WorldElevation3D/TopoBathy3D/ImageServer",layerType:"ArcGISTiledElevationServiceLayer"}};function g8(e){let t=null;if(typeof e=="string")if(e in s2){const r=s2[e];t=new Gp({resourceInfo:{data:{layers:[r]}}})}else U.getLogger("esri.support.groundUtils").warn(`Unable to find ground definition for: ${e}. Try "world-elevation"`);else t=kt(Gp,e);return t}let nx=0;const ox=e=>{let t=class extends e{constructor(...r){super(...r),Object.defineProperty(this,"uid",{writable:!1,configurable:!1,value:Date.now().toString(16)+"-object-"+nx++})}};return t=c([S("esri.core.Identifiable")],t),t},_8=e=>{let t=class extends e{constructor(...r){super(...r),Object.defineProperty(this,"uid",{writable:!1,configurable:!1,value:nx++})}};return t=c([S("esri.core.Identifiable.NumericIdentifiable")],t),t};let du=class extends ox(class{}){};du=c([S("esri.core.Identifiable")],du),function(e){e.IdentifiableMixin=ox,e.NumericIdentifiableMixin=_8}(du||(du={}));const nh=du;async function v8(e){var i;const t="portalItem"in e?e:{portalItem:e},{fromItem:r}=await N(async()=>{const{fromItem:s}=await import("./portalLayers-D2VE1CaZ.js");return{fromItem:s}},__vite__mapDeps([27,25,24,23,26,20]));try{return await r(t)}catch(s){const n=t==null?void 0:t.portalItem,o=(n==null?void 0:n.id)||"unset",a=((i=n==null?void 0:n.portal)==null?void 0:i.url)||ye.portalUrl;throw U.getLogger("esri.layers.support.fromPortalItem").error("#fromPortalItem()","Failed to create layer from portal item (portal: '"+a+"', id: '"+o+"')",s),s}}const n2={milliseconds:1,seconds:1e3,minutes:6e4,hours:36e5,days:864e5,weeks:6048e5,months:26784e5,years:31536e6,decades:31536e7,centuries:31536e8};function Ym(e,t,r,i=Oi){const s=new cr(Z_(i)),n=q.fromJSDate(e,{zone:s}),o=r==="decades"||r==="centuries"?"year":ax(r);return r==="decades"&&(t*=10),r==="centuries"&&(t*=100),n.plus({[o]:t}).toJSDate()}function iee(e,t,r="milliseconds"){const i=e.getTime(),s=w8(t,r,"milliseconds");return new Date(i+s)}function o2(e,t,r=Oi){const i=new cr(Z_(r)),s=q.fromJSDate(e,{zone:i});if(t==="decades"||t==="centuries"){const o=s.startOf("year"),{year:a}=o,l=a-a%(t==="decades"?10:100);return o.set({year:l}).toJSDate()}const n=ax(t);return s.startOf(n).toJSDate()}function w8(e,t,r){return e===0?0:e*n2[t]/n2[r]}function see(e,t){return e&&t?e.intersection(t):e||t}function ax(e){switch(e){case"milliseconds":return"millisecond";case"seconds":return"second";case"minutes":return"minute";case"hours":return"hour";case"days":return"day";case"weeks":return"week";case"months":return"month";case"years":return"year"}}var mr;let rr=mr=class extends G{static get allTime(){return a2}static get empty(){return b8}static fromArray(e){return new mr({start:e[0]!=null?new Date(e[0]):e[0],end:e[1]!=null?new Date(e[1]):e[1]})}constructor(e){super(e),this.end=null,this.start=null}readEnd(e,t){return t.end!=null?new Date(t.end):null}writeEnd(e,t){t.end=(e==null?void 0:e.getTime())??null}get isAllTime(){return this.equals(mr.allTime)}get isEmpty(){return this.equals(mr.empty)}readStart(e,t){return t.start!=null?new Date(t.start):null}writeStart(e,t){t.start=(e==null?void 0:e.getTime())??null}clone(){return new mr({end:this.end,start:this.start})}equals(e){var n,o,a,l;if(!e)return!1;const t=((n=this.start)==null?void 0:n.getTime())??this.start,r=((o=this.end)==null?void 0:o.getTime())??this.end,i=((a=e.start)==null?void 0:a.getTime())??e.start,s=((l=e.end)==null?void 0:l.getTime())??e.end;return t===i&&r===s}expandTo(e,t=Oi){if(this.isEmpty||this.isAllTime)return this.clone();let r=this.start;r&&(r=o2(r,e,t));let i=this.end;if(i){const s=o2(i,e,t);i=i.getTime()===s.getTime()?s:Ym(s,1,e,t)}return new mr({start:r,end:i})}intersection(e){var a,l,h,p;if(!e)return this.clone();if(this.isEmpty||e.isEmpty)return mr.empty;if(this.isAllTime)return e.clone();if(e.isAllTime)return this.clone();const t=((a=this.start)==null?void 0:a.getTime())??-1/0,r=((l=this.end)==null?void 0:l.getTime())??1/0,i=((h=e.start)==null?void 0:h.getTime())??-1/0,s=((p=e.end)==null?void 0:p.getTime())??1/0;let n,o;return i>=t&&i<=r?n=i:t>=i&&t<=s&&(n=t),r>=i&&r<=s?o=r:s>=t&&s<=r&&(o=s),n==null||o==null||isNaN(n)||isNaN(o)?mr.empty:new mr({start:n===-1/0?null:new Date(n),end:o===1/0?null:new Date(o)})}offset(e,t,r=Oi){if(this.isEmpty||this.isAllTime)return this.clone();const i=new mr,{start:s,end:n}=this;return s!=null&&(i.start=Ym(s,e,t,r)),n!=null&&(i.end=Ym(n,e,t,r)),i}toArray(){var e,t;return this.isEmpty?[void 0,void 0]:[((e=this.start)==null?void 0:e.getTime())??null,((t=this.end)==null?void 0:t.getTime())??null]}union(e){if(!e||e.isEmpty)return this.clone();if(this.isEmpty)return e.clone();if(this.isAllTime||e.isAllTime)return a2.clone();const t=this.start!=null&&e.start!=null?new Date(Math.min(this.start.getTime(),e.start.getTime())):null,r=this.end!=null&&e.end!=null?new Date(Math.max(this.end.getTime(),e.end.getTime())):null;return new mr({start:t,end:r})}};c([d({type:Date,json:{write:{allowNull:!0}}})],rr.prototype,"end",void 0),c([pe("end")],rr.prototype,"readEnd",null),c([ae("end")],rr.prototype,"writeEnd",null),c([d({readOnly:!0,json:{read:!1}})],rr.prototype,"isAllTime",null),c([d({readOnly:!0,json:{read:!1}})],rr.prototype,"isEmpty",null),c([d({type:Date,json:{write:{allowNull:!0}}})],rr.prototype,"start",void 0),c([pe("start")],rr.prototype,"readStart",null),c([ae("start")],rr.prototype,"writeStart",null),rr=mr=c([S("esri.time.TimeExtent")],rr);const tv=rr,a2=new rr,b8=new rr({start:void 0,end:void 0});let S8=0,Ue=class extends Ai.EventedMixin(nh.IdentifiableMixin(yn)){constructor(){super(...arguments),this.attributionDataUrl=null,this.fullExtent=new De(-180,-90,180,90,le.WGS84),this.id=Date.now().toString(16)+"-layer-"+S8++,this.legendEnabled=!0,this.listMode="show",this.opacity=1,this.parent=null,this.persistenceEnabled=!1,this.popupEnabled=!0,this.attributionVisible=!0,this.spatialReference=le.WGS84,this.title=null,this.type=null,this.url=null,this.visibilityTimeExtent=null,this.visible=!0}static async fromArcGISServerUrl(t){const r=typeof t=="string"?{url:t}:t;return(await N(async()=>{const{fromUrl:i}=await import("./arcgisLayers-D5mKus15.js");return{fromUrl:i}},__vite__mapDeps([29,25,24,26]))).fromUrl(r)}static fromPortalItem(t){return v8(t)}initialize(){this.when().catch(t=>{qt(t)||U.getLogger(this).error("#load()",`Failed to load layer (title: '${this.title??"no title"}', id: '${this.id??"no id"}')`,{error:t})})}destroy(){const t=this.parent;if(t){const r=this;"layers"in t&&t.layers.includes(r)?t.layers.remove(r):"tables"in t&&t.tables.includes(r)?t.tables.remove(r):"baseLayers"in t&&t.baseLayers.includes(r)?t.baseLayers.remove(r):"referenceLayers"in t&&t.referenceLayers.includes(r)&&t.referenceLayers.remove(r),this._set("parent",null)}}get effectiveVisible(){let t=this.visible;const r=this.parent;return t&&r&&"effectiveVisible"in r&&t&&(t=r.effectiveVisible),t}get hasAttributionData(){return this.attributionDataUrl!=null}get parsedUrl(){return Nt(this.url)}createLayerView(t,r){return Promise.reject(new I("layer:create-layer-view","Layer does not support creating a layer view"))}async fetchAttributionData(){const t=this.attributionDataUrl;if(this.hasAttributionData&&t)return(await We(t,{query:{f:"json"},responseType:"json"})).data;throw new I("layer:no-attribution-data","Layer does not have attribution data")}};c([d({type:String})],Ue.prototype,"attributionDataUrl",void 0),c([d({readOnly:!0})],Ue.prototype,"effectiveVisible",null),c([d({type:De})],Ue.prototype,"fullExtent",void 0),c([d({readOnly:!0})],Ue.prototype,"hasAttributionData",null),c([d({type:String,clonable:!1})],Ue.prototype,"id",void 0),c([d({type:Boolean,nonNullable:!0})],Ue.prototype,"legendEnabled",void 0),c([d({type:["show","hide","hide-children"]})],Ue.prototype,"listMode",void 0),c([d({type:Number,range:{min:0,max:1},nonNullable:!0})],Ue.prototype,"opacity",void 0),c([d({clonable:!1})],Ue.prototype,"parent",void 0),c([d({readOnly:!0})],Ue.prototype,"parsedUrl",null),c([d({type:Boolean,readOnly:!0})],Ue.prototype,"persistenceEnabled",void 0),c([d({type:Boolean})],Ue.prototype,"popupEnabled",void 0),c([d({type:Boolean})],Ue.prototype,"attributionVisible",void 0),c([d({type:le})],Ue.prototype,"spatialReference",void 0),c([d({type:String})],Ue.prototype,"title",void 0),c([d({readOnly:!0,json:{read:!1}})],Ue.prototype,"type",void 0),c([d()],Ue.prototype,"url",void 0),c([d({type:tv})],Ue.prototype,"visibilityTimeExtent",void 0),c([d({type:Boolean,nonNullable:!0})],Ue.prototype,"visible",void 0),Ue=c([S("esri.layers.Layer")],Ue);const lx=Ue;function Gg(e,t,r){let i,s;if(e)for(let n=0,o=e.length;n<o;n++){if(i=e.at(n),(i==null?void 0:i[t])===r)return i;if((i==null?void 0:i.type)==="group"&&(s=Gg(i.layers,t,r),s))return s}}const T8=e=>{let t=class extends e{constructor(...r){super(...r),this.layers=new H;const i=o=>{o.parent&&"remove"in o.parent&&o.parent.remove(o)},s=o=>{o.parent=this,this.layerAdded(o),o.type!=="elevation"&&o.type!=="base-elevation"||U.getLogger(this).error(`Layer 'title:${o.title}, id:${o.id}' of type '${o.type}' is not supported as an operational layer and will therefore be ignored.`)},n=o=>{o.parent=null,this.layerRemoved(o)};this.addHandles([this.layers.on("before-add",o=>{if(o.item===this)return o.preventDefault(),void U.getLogger(this).error("#add()","Cannot add layer to itself.");i(o.item)}),this.layers.on("after-add",o=>s(o.item)),this.layers.on("after-remove",o=>n(o.item))])}destroy(){const r=this.layers.toArray();for(const i of r)i.destroy();this.layers.destroy()}set layers(r){this._set("layers",ys(r,this._get("layers")))}add(r,i){const s=this.layers;if(i=s.getNextIndex(i),r instanceof lx){const n=r;n.parent===this?this.reorder(n,i):s.add(n,i)}else ki(r)?r.then(n=>{this.destroyed||this.add(n,i)}):U.getLogger(this).error("#add()","The item being added is not a Layer or a Promise that resolves to a Layer.")}addMany(r,i){const s=this.layers;let n=s.getNextIndex(i);r.slice().forEach(o=>{o.parent!==this?(s.add(o,n),n+=1):this.reorder(o,n)})}findLayerById(r){return Gg(this.layers,"id",r)}findLayerByUid(r){return Gg(this.layers,"uid",r)}remove(r){return this.layers.remove(r)}removeMany(r){return this.layers.removeMany(r)}removeAll(){return this.layers.removeAll()}reorder(r,i){return this.layers.reorder(r,i)}layerAdded(r){}layerRemoved(r){}};return c([d()],t.prototype,"layers",null),t=c([S("esri.support.LayersMixin")],t),t},$8=new Set(["feature","subtype-group"]);function zg(e,t,r){if(e)for(let i=0,s=e.length;i<s;i++){const n=e.at(i);if(n[t]===r)return n;if((n==null?void 0:n.type)==="group"){const o=zg(n.tables,t,r);if(o)return o}}}const E8=e=>{let t=class extends e{constructor(...r){super(...r),this.tables=new H,this.addHandles([this.tables.on("after-add",i=>{const s=i.item;s.parent&&s.parent!==this&&"tables"in s.parent&&s.parent.tables.remove(s),s.parent=this,$8.has(s.type)||U.getLogger(this).error(`Layer 'title:${s.title}, id:${s.id}' of type '${s.type}' is not supported as a table and will therefore be ignored.`)}),this.tables.on("after-remove",i=>{i.item.parent=null})])}destroy(){const r=this.tables.toArray();for(const i of r)i.destroy();this.tables.destroy()}set tables(r){this._set("tables",ys(r,this._get("tables")))}findTableById(r){return zg(this.tables,"id",r)}findTableByUid(r){return zg(this.tables,"uid",r)}};return c([d()],t.prototype,"tables",null),t=c([S("esri.support.TablesMixin")],t),t};let zr=class extends E8(T8(Ai.EventedMixin(W))){constructor(t){super(t),this.allLayers=new Pc({getCollections:()=>{var r,i,s;return[(r=this.basemap)==null?void 0:r.baseLayers,(i=this.ground)==null?void 0:i.layers,this.layers,(s=this.basemap)==null?void 0:s.referenceLayers]},getChildrenFunction:r=>"layers"in r?r.layers:null}),this.allTables=y8(this),this.basemap=null,this.editableLayers=new Pc({getCollections:()=>[this.allLayers],itemFilterFunction:n6}),this.ground=new Gp,this._basemapCache=p8()}destroy(){f8(this._basemapCache),this._basemapCache=null,this.allLayers.destroy(),this.allTables.destroy(),this.editableLayers.destroy(),this.basemap=Ne(this.basemap),Ne(this.ground),this._set("ground",null)}castBasemap(t){return m8(t,this._basemapCache)}castGround(t){return g8(t)??this._get("ground")}findLayerById(t){return this.allLayers.find(r=>r.id===t)}findTableById(t){return this.allTables.find(r=>r.id===t)}};c([d({readOnly:!0,dependsOn:[]})],zr.prototype,"allLayers",void 0),c([d({readOnly:!0})],zr.prototype,"allTables",void 0),c([d({type:ic,json:{read:{source:"baseMap"},write:{target:"baseMap"}}})],zr.prototype,"basemap",void 0),c([rt("basemap")],zr.prototype,"castBasemap",null),c([d({readOnly:!0})],zr.prototype,"editableLayers",void 0),c([d({type:Gp,nonNullable:!0})],zr.prototype,"ground",void 0),c([rt("ground")],zr.prototype,"castGround",null),c([d()],zr.prototype,"undoRedo",void 0),zr=c([S("esri.Map")],zr);const ux=zr,cx=e=>{let t=class extends e{clone(){var l;const r=fn(this);O$(r,"unable to clone instance of non-accessor class");const i=r.metadata,s=r.store,n={},o=new Map;for(const h in i){const p=i[h],f=s==null?void 0:s.originOf(h),m=p.clonable;if(p.readOnly||m===!1||f!==ue.USER&&f!==ue.DEFAULTS&&f!==ue.WEB_MAP&&f!==ue.WEB_SCENE)continue;const y=this[h];let _=null;_=typeof m=="function"?m(y):m==="reference"?y:zy(y),y!=null&&_==null||(f===ue.DEFAULTS?o.set(h,_):n[h]=_)}const a=new(Object.getPrototypeOf(this)).constructor(n);if(o.size){const h=(l=fn(a))==null?void 0:l.store;if(h)for(const[p,f]of o)h.set(p,f,ue.DEFAULTS)}return a}};return t=c([S("esri.core.Clonable")],t),t};let pu=class extends cx(W){};pu=c([S("esri.core.Clonable")],pu),function(e){e.ClonableMixin=cx}(pu||(pu={}));const Zt=pu;let Bn=class extends Zt{constructor(t){super(t),this.row=0,this.column=0,this.rows=1,this.columns=1}equals(t){return t!=null&&this.row===t.row&&this.rows===t.rows&&this.column===t.column&&this.columns===t.columns}};c([d({type:Number,nonNullable:!0,json:{read:!1,write:!1}})],Bn.prototype,"row",void 0),c([d({type:Number,nonNullable:!0,json:{read:!1,write:!1}})],Bn.prototype,"column",void 0),c([d({type:Number,nonNullable:!0,json:{read:!1,write:!1}})],Bn.prototype,"rows",void 0),c([d({type:Number,nonNullable:!0,json:{read:!1,write:!1}})],Bn.prototype,"columns",void 0),Bn=c([S("esri.CameraLayout")],Bn);const hx=Bn;let rv=class{constructor(t,r){this.min=t,this.max=r,this.range=r-t}normalize(t,r=0,i=!1){return l2(this.range,this.min,this.max,t,r,i)}clamp(t,r=0){return si(t-r,this.min,this.max)+r}monotonic(t,r,i){return t<r?r:r+Vg(this.range,t-r,i)}minimalMonotonic(t,r,i){return l2(this.range,t,t+this.range,r,i)}center(t,r,i){return r=this.monotonic(t,r,i),this.normalize((t+r)/2,i)}diff(t,r,i){return this.monotonic(t,r,i)-t}shortestSignedDiff(t,r){t=this.normalize(t);const i=(r=this.normalize(r))-t,s=r<t?this.minimalMonotonic(t,r)-t:r-this.minimalMonotonic(r,t);return Math.abs(i)<Math.abs(s)?i:s}contains(t,r,i){return r=this.minimalMonotonic(t,r),(i=this.minimalMonotonic(t,i))>t&&i<r}};function l2(e,t,r,i,s=0,n=!1){return(i-=s)<t?i+=Vg(e,t-i):i>r&&(i-=Vg(e,i-r)),n&&i===r&&(i=t),i+s}function Vg(e,t,r=0){return Math.ceil((t-r)/e)*e+r}const cee=new rv(0,2*Math.PI),hee=new rv(-Math.PI,Math.PI),M8=new rv(0,360);let ui=class extends Zt.ClonableMixin(G){constructor(...t){super(...t),this.position=new re([0,0,0]),this.heading=0,this.tilt=0,this.fov=55,this.layout=new hx}normalizeCtorArgs(t,r,i,s){if(t&&typeof t=="object"&&("x"in t||Array.isArray(t))){const n={position:t};return r!=null&&(n.heading=r),i!=null&&(n.tilt=i),s!=null&&(n.fov=s),n}return t}writePosition(t,r,i,s){const n=t.clone();n.x=ir(t.x||0),n.y=ir(t.y||0),n.z=t.hasZ?ir(t.z||0):t.z,r[i]=n.write({},s)}readPosition(t,r){const i=new re;return i.read(t,r),i.x=ir(i.x||0),i.y=ir(i.y||0),i.z=i.hasZ?ir(i.z||0):i.z,i}equals(t){return t!=null&&this.tilt===t.tilt&&this.heading===t.heading&&this.fov===t.fov&&this.position.equals(t.position)&&this.layout.equals(t.layout)}};c([d({type:re,json:{write:{isRequired:!0}}})],ui.prototype,"position",void 0),c([ae("position")],ui.prototype,"writePosition",null),c([pe("position")],ui.prototype,"readPosition",null),c([d({type:Number,nonNullable:!0,json:{write:{isRequired:!0}}}),rt(e=>M8.normalize(ir(e)))],ui.prototype,"heading",void 0),c([d({type:Number,nonNullable:!0,json:{write:{isRequired:!0}}}),rt(e=>si(ir(e),-180,180))],ui.prototype,"tilt",void 0),c([d({type:Number,nonNullable:!0,json:{default:55,write:!0}}),rt(e=>si(ir(e,55),1,170))],ui.prototype,"fov",void 0),c([d({type:hx,nonNullable:!0,json:{read:!1,write:!1}})],ui.prototype,"layout",void 0),ui=c([S("esri.Camera")],ui);const x8=ui;function dl(e,t,r=!1){let{hasM:i,hasZ:s}=e;Array.isArray(t)?t.length!==4||i||s?t.length===3&&r&&!i?(s=!0,i=!1):t.length===3&&i&&s&&(i=!1,s=!1):(i=!0,s=!0):(s=!s&&t.hasZ&&(!i||t.hasM),i=!i&&t.hasM&&(!s||t.hasZ)),e.hasZ=s,e.hasM=i}var Bg;function u2(e){return(t,r)=>t==null?r:r==null?t:e(t,r)}function A8(e){return e&&(e.declaredClass==="esri.geometry.SpatialReference"||e.wkid!=null)}let Cs=Bg=class extends gs{constructor(...e){super(...e),this.points=[],this.type="multipoint"}normalizeCtorArgs(e,t){var s;if(!e&&!t)return{};const r={};Array.isArray(e)?(r.points=e,r.spatialReference=t):A8(e)?r.spatialReference=e:(e.points&&(r.points=e.points),e.spatialReference&&(r.spatialReference=e.spatialReference),e.hasZ&&(r.hasZ=e.hasZ),e.hasM&&(r.hasM=e.hasM));const i=(s=r.points)==null?void 0:s[0];return i&&(r.hasZ===void 0&&r.hasM===void 0?(r.hasZ=i.length>2,r.hasM=!1):r.hasZ===void 0?r.hasZ=i.length>3:r.hasM===void 0&&(r.hasM=i.length>3)),r}get cache(){return this.commitProperty("points"),this.commitProperty("hasZ"),this.commitProperty("hasM"),this.commitProperty("spatialReference"),{}}get extent(){const e=this.points;if(!e.length)return null;const t=new De,r=this.hasZ,i=this.hasM,s=r?3:2,n=e[0],o=u2(Math.min),a=u2(Math.max);let l,h,p,f,[m,y]=n,[_,v]=n;for(let w=0,b=e.length;w<b;w++){const M=e[w],[$,E]=M;if(m=o(m,$),y=o(y,E),_=a(_,$),v=a(v,E),r&&M.length>2){const P=M[2];l=o(l,P),p=a(p,P)}if(i&&M.length>s){const P=M[s];h=o(h,P),f=a(f,P)}}return t.xmin=m,t.ymin=y,t.xmax=_,t.ymax=v,t.spatialReference=this.spatialReference,r?(t.zmin=l,t.zmax=p):(t.zmin=void 0,t.zmax=void 0),i?(t.mmin=h,t.mmax=f):(t.mmin=void 0,t.mmax=void 0),t}writePoints(e,t){t.points=C(this.points)}addPoint(e){return dl(this,e),Array.isArray(e)?this.points.push(e):this.points.push(e.toArray()),this.notifyChange("points"),this}clone(){const e={points:C(this.points),spatialReference:this.spatialReference};return this.hasZ&&(e.hasZ=!0),this.hasM&&(e.hasM=!0),new Bg(e)}getPoint(e){if(!this._validateInputs(e))return null;const t=this.points[e],r={x:t[0],y:t[1],spatialReference:this.spatialReference};let i=2;return this.hasZ&&(r.z=t[2],i=3),this.hasM&&(r.m=t[i]),new re(r)}removePoint(e){if(!this._validateInputs(e))return null;const t=new re(this.points.splice(e,1)[0],this.spatialReference);return this.notifyChange("points"),t}setPoint(e,t){return this._validateInputs(e)?(dl(this,t),Array.isArray(t)||(t=t.toArray()),this.points[e]=t,this.notifyChange("points"),this):this}toJSON(e){return this.write({},e)}_validateInputs(e){return e!=null&&e>=0&&e<this.points.length}};c([d({readOnly:!0})],Cs.prototype,"cache",null),c([d()],Cs.prototype,"extent",null),c([d({type:[[Number]],json:{write:{isRequired:!0}}})],Cs.prototype,"points",void 0),c([ae("points")],Cs.prototype,"writePoints",null),Cs=Bg=c([S("esri.geometry.Multipoint")],Cs),Cs.prototype.toJSON.isDefaultToJSON=!0;const Wf=Cs;function pee(e){const t=[];for(e.reset();e.nextPath();){const r=[];for(;e.nextPoint();)r.push([e.x,e.y]);t.push(r)}return e.reset(),t}function P8(e){const t=[];for(;e.nextPoint();)t.push([e.x,e.y]);return e.seekPathStart(),t}var zp;(function(e){e[e.X=0]="X",e[e.Y=1]="Y",e[e.Z=2]="Z"})(zp||(zp={}));function fee(e){if(!e)return null;if(Array.isArray(e))return e;const t=e.hasZ,r=e.hasM;if(e.type==="point")return r&&t?[e.x,e.y,e.z,e.m]:t?[e.x,e.y,e.z]:r?[e.x,e.y,e.m]:[e.x,e.y];if(e.type==="polygon")return e.rings.slice();if(e.type==="polyline")return e.paths.slice();if(e.type==="multipoint")return e.points.slice();if(e.type==="extent"){const i=e.clone().normalize();if(!i)return null;let s=!1,n=!1;return i.forEach(o=>{o.hasZ&&(s=!0),o.hasM&&(n=!0)}),i.map(o=>{const a=[[o.xmin,o.ymin],[o.xmin,o.ymax],[o.xmax,o.ymax],[o.xmax,o.ymin],[o.xmin,o.ymin]];if(s&&o.hasZ){const l=.5*(o.zmax-o.zmin);for(let h=0;h<a.length;h++)a[h].push(l)}if(n&&o.hasM){const l=.5*(o.mmax-o.mmin);for(let h=0;h<a.length;h++)a[h].push(l)}return a})}return null}function Zf(e,t){const r=t[0]-e[0],i=t[1]-e[1];if(e.length>2&&t.length>2){const s=e[2]-t[2];return Math.sqrt(r*r+i*i+s*s)}return Math.sqrt(r*r+i*i)}function dx(e,t,r){const i=e[0]+r*(t[0]-e[0]),s=e[1]+r*(t[1]-e[1]);return e.length>2&&t.length>2?[i,s,e[2]+r*(t[2]-e[2])]:[i,s]}function O8(e,t,r,i){return C8(e,t,r[i],r[i+1])}function C8(e,t,r,i){const[s,n]=t,[o,a]=r,[l,h]=i,p=l-o,f=h-a,m=p*p+f*f,y=(s-o)*p+(n-a)*f,_=Math.min(1,Math.max(0,y/m));return e[0]=o+p*_,e[1]=a+f*_,e}function mee(e,t,r,i,s,n){let o=r,a=i,l=s-o,h=n-a;if(l!==0||h!==0){const p=((e-o)*l+(t-a)*h)/(l*l+h*h);p>1?(o=s,a=n):p>0&&(o+=l*p,a+=h*p)}return l=e-o,h=t-a,l*l+h*h}function px(e,t){return dx(e,t,.5)}function yee(e){const t=e.length;let r=0;for(let i=0;i<t-1;++i)r+=Zf(e[i],e[i+1]);return r}function gee(e,t){if(t<=0)return e[0];const r=e.length;let i=0;for(let s=0;s<r-1;++s){const n=Zf(e[s],e[s+1]);if(t-i<n){const o=(t-i)/n;return dx(e[s],e[s+1],o)}i+=n}return e[r-1]}function fx(e,t=zp.X,r=zp.Y){let i=0;const s=e.length;let n=e[0];for(let o=1;o<s;o++){const a=e[o];i+=(a[t]-n[t])*(a[r]+n[r]),n=a}if(!mx(e)){const o=e[0];i+=(o[t]-n[t])*(o[r]+n[r])}return i>=0}function mx(e){const t=e.length;return t<3||gf(e[0],e[t-1])}function _ee(e){"rings"in e&&(I8(e),R8(e))}function I8(e){if(!("rings"in e))return!1;let t=!1;for(const r of e.rings)mx(r)||(r.push(r[0].slice()),t=!0);return t}function R8(e){if(!("rings"in e)||e.rings.length===0||fx(e.rings[0]))return!1;for(const t of e.rings)t.reverse();return!0}function vee(e){return e.type!=="polygon"&&e.type!=="polyline"||k8(e.type==="polygon"?e.rings:e.paths,e.spatialReference),e}function k8(e,t){const r=Rt(t);if(!r)return;const i=r.valid[0],s=r.valid[1],n=s-i;for(const o of e){let a=1/0,l=-1/0;for(const p of o){const f=N8(p[0],i,s);a=Math.min(a,f),l=Math.max(l,f),p[0]=f}const h=l-a;n-h<h&&o.forEach(p=>{p[0]<0&&(p[0]+=n)})}}function N8(e,t,r){const i=r-t;return e<t?r-(t-e)%i:e>r?t+(e-t)%i:e}function wee(e,t){if(e===t)return!0;if(e.type!==t.type)return!1;if(e.type==="point"||e.type==="mesh"||e.type==="extent")return!0;if(e.type==="multipoint")return e.points.length===t.points.length;const[r,i]=e.type==="polyline"?[e.paths,t.paths]:[e.rings,t.rings];return r.length===i.length&&r.every((s,n)=>s.length===i[n].length)}function bee(e){return e?e.hasZ?[e.xmax-e.xmin/2,e.ymax-e.ymin/2,e.zmax-e.zmin/2]:[e.xmax-e.xmin/2,e.ymax-e.ymin/2]:null}function L8(e){return e?D8(e.rings,e.hasZ??!1):null}function D8(e,t){if(!(e!=null&&e.length))return null;const r=[],i=[],s=t?[1/0,-1/0,1/0,-1/0,1/0,-1/0]:[1/0,-1/0,1/0,-1/0];for(let n=0,o=e.length;n<o;n++){const a=yx(e[n],t,s);a&&i.push(a)}if(i.sort((n,o)=>{let a=n[2]-o[2];return a===0&&t&&(a=n[4]-o[4]),a}),i.length&&(r[0]=i[0][0],r[1]=i[0][1],t&&(r[2]=i[0][3]),(r[0]<s[0]||r[0]>s[1]||r[1]<s[2]||r[1]>s[3]||t&&(r[2]<s[4]||r[2]>s[5]))&&(r.length=0)),!r.length){const n=e[0]&&e[0].length?F8(e[0],t):null;if(!n)return null;r[0]=n[0],r[1]=n[1],t&&n.length>2&&(r[2]=n[2])}return r}function yx(e,t,r){let i=0,s=0,n=0,o=0,a=0;const l=e.length?e[0][0]:0,h=e.length?e[0][1]:0,p=e.length&&t?e[0][2]:0;for(let m=0;m<e.length;m++){const y=e[m],_=e[(m+1)%e.length],[v,w,b]=y,M=v-l,$=w-h,[E,P,O]=_,L=E-l,k=P-h,z=M*k-L*$;if(o+=z,i+=(M+L)*z,s+=($+k)*z,t&&y.length>2&&_.length>2){const B=b-p,K=O-p,ie=M*K-L*B;n+=(B+K)*ie,a+=ie}v<r[0]&&(r[0]=v),v>r[1]&&(r[1]=v),w<r[2]&&(r[2]=w),w>r[3]&&(r[3]=w),t&&(b<r[4]&&(r[4]=b),b>r[5]&&(r[5]=b))}if(o>0&&(o*=-1),a>0&&(a*=-1),!o)return null;o*=.5,a*=.5;const f=[i/(6*o)+l,s/(6*o)+h,o];return t&&(r[4]===r[5]||a===0?(f[3]=(r[4]+r[5])/2,f[4]=0):(f[3]=n/(6*a)+p,f[4]=a)),f}function See(e,t){let r=0,i=0,s=0;e.nextPoint();const n=e.pathSize?e.x:0,o=e.pathSize?e.y:0;for(let a=0;a<e.pathSize;a++){e.seekInPath(a);const l=[e.x,e.y];e.seekInPath((a+1)%e.pathSize);const h=[e.x,e.y],[p,f]=l,m=p-n,y=f-o,[_,v]=h,w=_-n,b=v-o,M=m*b-w*y;s+=M,r+=(m+w)*M,i+=(y+b)*M,p<t[0]&&(t[0]=p),p>t[1]&&(t[1]=p),f<t[2]&&(t[2]=f),f>t[3]&&(t[3]=f)}return s>0&&(s*=-1),s?(s*=.5,[r/(6*s)+n,i/(6*s)+o,s]):null}function F8(e,t){const r=t?[0,0,0]:[0,0],i=t?[0,0,0]:[0,0];let s=0,n=0,o=0,a=0;for(let l=0,h=e.length;l<h-1;l++){const p=e[l],f=e[l+1];if(p&&f){r[0]=p[0],r[1]=p[1],i[0]=f[0],i[1]=f[1],t&&p.length>2&&f.length>2&&(r[2]=p[2],i[2]=f[2]);const m=Zf(r,i);if(m){s+=m;const y=px(p,f);n+=m*y[0],o+=m*y[1],t&&y.length>2&&(a+=m*y[2])}}}return s>0?t?[n/s,o/s,a/s]:[n/s,o/s]:e.length?e[0]:null}function U8(e){const{hasZ:t,totalSize:r}=e;if(r===0)return null;const i=[],s=[],n=t?[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY]:[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY];for(e.reset();e.nextPath();){const o=yx(P8(e),e.hasZ,n);o&&s.push(o)}if(s.sort((o,a)=>{let l=o[2]-a[2];return l===0&&t&&(l=o[4]-a[4]),l}),s.length&&(i[0]=s[0][0],i[1]=s[0][1],t&&(i[2]=s[0][3]),(i[0]<n[0]||i[0]>n[1]||i[1]<n[2]||i[1]>n[3]||t&&(i[2]<n[4]||i[2]>n[5]))&&(i.length=0)),!i.length){e.reset(),e.nextPath();const o=e.pathSize?j8(e):null;if(!o)return null;i[0]=o[0],i[1]=o[1],t&&o.length>2&&(i[2]=o[2])}return i}function j8(e){const{hasZ:t}=e,r=t?[0,0,0]:[0,0],i=t?[0,0,0]:[0,0];let s=0,n=0,o=0,a=0;if(e.nextPoint()){let l=e.x,h=e.y,p=e.z;for(;e.nextPoint();){const f=e.x,m=e.y,y=e.z;r[0]=l,r[1]=h,i[0]=f,i[1]=m,t&&(r[2]=p,i[2]=y);const _=Zf(r,i);if(_){s+=_;const v=px(r,i);n+=_*v[0],o+=_*v[1],t&&v.length>2&&(a+=_*v[2])}l=f,h=m,p=y}}return s>0?t?[n/s,o/s,a/s]:[n/s,o/s]:e.pathSize?(e.seekPathStart(),e.nextPoint(),[e.x,e.y]):null}const G8=1e-6;function Tee(e){let t=0;for(e.reset();e.nextPath();)t+=e.getCurrentRingArea();if(t<G8){const s=U8(e);return s?[s[0],s[1]]:null}const r=[0,0];if(e.reset(),!e.nextPath()||!e.nextPoint())return null;const i=[e.x,e.y];for(e.reset();e.nextPath();)V8(r,i,e);return r[0]*=1/t,r[1]*=1/t,r[0]+=i[0],r[1]+=i[1],r}const z8=1/3;function V8(e,t,r){if(!r||r.pathSize<3)return null;r.nextPoint();const i=r.x,s=r.y;r.nextPoint();let n,o=r.x-i,a=r.y-s,l=0,h=0;for(;r.nextPoint();)l=r.x-i,h=r.y-s,n=.5*z8*(l*a-h*o),e[0]+=n*(o+l),e[1]+=n*(a+h),o=l,a=h;const p=r.getCurrentRingArea(),f=[i,s];return f[0]-=t[0],f[1]-=t[1],f[0]*=p,f[1]*=p,e[0]+=f[0],e[1]+=f[1],e}function It(e=W8){return[e[0],e[1],e[2],e[3]]}function gx(e,t){return e!==t&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3]),e}function $ee(e,t,r,i,s=It()){return s[0]=e,s[1]=t,s[2]=r,s[3]=i,s}function Eee(e,t=It()){return t[0]=e.xmin,t[1]=e.ymin,t[2]=e.xmax,t[3]=e.ymax,t}function B8(e,t,r=new De){return r.xmin=e[0],r.ymin=e[1],r.xmax=e[2],r.ymax=e[3],r.spatialReference=t,r}function Mee(e,t){t[0]<e[0]&&(e[0]=t[0]),t[0]>e[2]&&(e[2]=t[0]),t[1]<e[1]&&(e[1]=t[1]),t[1]>e[3]&&(e[3]=t[1])}function xee(e,t,r){if(t!=null)if("length"in t)Hg(t)?(r[0]=Math.min(e[0],t[0]),r[1]=Math.min(e[1],t[1]),r[2]=Math.max(e[2],t[2]),r[3]=Math.max(e[3],t[3])):t.length!==2&&t.length!==3||(r[0]=Math.min(e[0],t[0]),r[1]=Math.min(e[1],t[1]),r[2]=Math.max(e[2],t[0]),r[3]=Math.max(e[3],t[1]));else switch(t.type){case"extent":r[0]=Math.min(e[0],t.xmin),r[1]=Math.min(e[1],t.ymin),r[2]=Math.max(e[2],t.xmax),r[3]=Math.max(e[3],t.ymax);break;case"point":r[0]=Math.min(e[0],t.x),r[1]=Math.min(e[1],t.y),r[2]=Math.max(e[2],t.x),r[3]=Math.max(e[3],t.y)}else gx(r,e)}function Aee(e,t,r=e){const i=t.length;let s=e[0],n=e[1],o=e[2],a=e[3];for(let l=0;l<i;l++){const h=t[l];s=Math.min(s,h[0]),n=Math.min(n,h[1]),o=Math.max(o,h[0]),a=Math.max(a,h[1])}return r[0]=s,r[1]=n,r[2]=o,r[3]=a,r}function Pee(e){for(let t=0;t<4;t++)if(!isFinite(e[t]))return!1;return!0}function iv(e){return e==null||e[0]>=e[2]?0:e[2]-e[0]}function sv(e){return e==null||e[1]>=e[3]?0:e[3]-e[1]}function Oee(e){return iv(e)*sv(e)}function Cee(e,t=[0,0]){return t[0]=(e[0]+e[2])/2,t[1]=(e[1]+e[3])/2,t}function Iee(e){const t=iv(e),r=sv(e);return Math.sqrt(t*t+r*r)}function Ree(e,t){return H8(e,t.x,t.y)}function H8(e,t,r){return t>=e[0]&&r>=e[1]&&t<=e[2]&&r<=e[3]}function kee(e,t){return Math.max(t[0],e[0])<=Math.min(t[2],e[2])&&Math.max(t[1],e[1])<=Math.min(t[3],e[3])}function Nee(e,t,r){return Math.max(t[0],e[0])-r<=Math.min(t[2],e[2])&&Math.max(t[1],e[1])-r<=Math.min(t[3],e[3])}function q8(e,t){return t[0]>=e[0]&&t[2]<=e[2]&&t[1]>=e[1]&&t[3]<=e[3]}function Lee(e,t,r,i=e){return i[0]=e[0]+t,i[1]=e[1]+r,i[2]=e[2]+t,i[3]=e[3]+r,i}function Dee(e){return e?gx(e,c2):It(c2)}function Hg(e){return e!=null&&e.length===4}function Fee(e,t){return Hg(e)&&Hg(t)?e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]:e===t}const c2=[1/0,1/0,-1/0,-1/0],W8=[0,0,0,0];function _x(e){return e.xmin!==void 0&&e.ymin!==void 0&&e.xmax!==void 0&&e.ymax!==void 0}function vx(e){return e.points!==void 0}function wx(e){return e.x!==void 0&&e.y!==void 0}function bx(e){return e.paths!==void 0}function Sx(e){return e.rings!==void 0}function Tx(e){function t(r,i){return r==null?i:i==null?r:e(r,i)}return t}const on=Tx(Math.min),an=Tx(Math.max);function Uee(e,t){return bx(t)?pl(e,t.paths,!1,!1):Sx(t)?pl(e,t.rings,!1,!1):vx(t)?nv(e,t.points,!1,!1,!1,!1):_x(t)?$x(e,t):(wx(t)&&(e[0]=t.x,e[1]=t.y,e[2]=t.x,e[3]=t.y),e)}function jee(e){let t,r,i,s;for(e.reset(),t=i=1/0,r=s=-1/0;e.nextPath();){const n=Z8(e);t=Math.min(n[0],t),i=Math.min(n[1],i),r=Math.max(n[2],r),s=Math.max(n[3],s)}return It([t,i,r,s])}function Z8(e){let t,r,i,s;for(t=i=1/0,r=s=-1/0;e.nextPoint();)t=Math.min(e.x,t),i=Math.min(e.y,i),r=Math.max(e.x,r),s=Math.max(e.y,s);return It([t,i,r,s])}function Gee(e,t){return bx(t)?pl(e,t.paths,!0,!1):Sx(t)?pl(e,t.rings,!0,!1):vx(t)?nv(e,t.points,!0,!1,!0,!1):_x(t)?$x(e,t,!0,!1,!0,!1):(wx(t)&&(e[0]=t.x,e[1]=t.y,e[2]=t.z,e[3]=t.x,e[4]=t.y,e[5]=t.z),e)}function pl(e,t,r,i){const s=r?3:2;if(!t.length||!t[0].length)return null;let n,o,a,l,[h,p]=t[0][0],[f,m]=t[0][0];for(let y=0;y<t.length;y++){const _=t[y];for(let v=0;v<_.length;v++){const w=_[v],[b,M]=w;if(h=on(h,b),p=on(p,M),f=an(f,b),m=an(m,M),r&&w.length>2){const $=w[2];n=on(n,$),o=an(o,$)}if(i&&w.length>s){const $=w[s];a=on(n,$),l=an(o,$)}}}return r?i?(e[0]=h,e[1]=p,e[2]=n,e[3]=a,e[4]=f,e[5]=m,e[6]=o,e[7]=l,e.length=8,e):(e[0]=h,e[1]=p,e[2]=n,e[3]=f,e[4]=m,e[5]=o,e.length=6,e):i?(e[0]=h,e[1]=p,e[2]=a,e[3]=f,e[4]=m,e[5]=l,e.length=6,e):(e[0]=h,e[1]=p,e[2]=f,e[3]=m,e.length=4,e)}function $x(e,t,r,i,s,n){const o=t.xmin,a=t.xmax,l=t.ymin,h=t.ymax;let p=t.zmin,f=t.zmax,m=t.mmin,y=t.mmax;return s?(p=p||0,f=f||0,n?(m=m||0,y=y||0,e[0]=o,e[1]=l,e[2]=p,e[3]=m,e[4]=a,e[5]=h,e[6]=f,e[7]=y,e):(e[0]=o,e[1]=l,e[2]=p,e[3]=a,e[4]=h,e[5]=f,e)):n?(m=m||0,y=y||0,e[0]=o,e[1]=l,e[2]=m,e[3]=a,e[4]=h,e[5]=y,e):(e[0]=o,e[1]=l,e[2]=a,e[3]=h,e)}function nv(e,t,r,i,s,n){const o=r?3:2,a=i&&n,l=r&&s;if(!t.length||!t[0].length)return null;let h,p,f,m,[y,_]=t[0],[v,w]=t[0];for(let b=0;b<t.length;b++){const M=t[b],[$,E]=M;if(y=on(y,$),_=on(_,E),v=an(v,$),w=an(w,E),l&&M.length>2){const P=M[2];h=on(h,P),p=an(p,P)}if(a&&M.length>o){const P=M[o];f=on(h,P),m=an(p,P)}}return s?(h=h||0,p=p||0,n?(f=f||0,m=m||0,e[0]=y,e[1]=_,e[2]=h,e[3]=f,e[4]=v,e[5]=w,e[6]=p,e[7]=m,e):(e[0]=y,e[1]=_,e[2]=h,e[3]=v,e[4]=w,e[5]=p,e)):n?(f=f||0,m=m||0,e[0]=y,e[1]=_,e[2]=f,e[3]=v,e[4]=w,e[5]=m,e):(e[0]=y,e[1]=_,e[2]=v,e[3]=w,e)}function J8(e){return e.xmin!==void 0&&e.ymin!==void 0&&e.xmax!==void 0&&e.ymax!==void 0}function Y8(e){return e.points!==void 0}function K8(e){return e.x!==void 0&&e.y!==void 0}function X8(e){return e.paths!==void 0}function Q8(e){return e.rings!==void 0}const ov=[];function Ex(e,t,r,i){return{xmin:e,ymin:t,xmax:r,ymax:i}}function Mx(e,t,r,i,s,n){return{xmin:e,ymin:t,zmin:r,xmax:i,ymax:s,zmax:n}}function xx(e,t,r,i,s,n){return{xmin:e,ymin:t,mmin:r,xmax:i,ymax:s,mmax:n}}function Ax(e,t,r,i,s,n,o,a){return{xmin:e,ymin:t,zmin:r,mmin:i,xmax:s,ymax:n,zmax:o,mmax:a}}function av(e,t=!1,r=!1){return t?r?Ax(e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7]):Mx(e[0],e[1],e[2],e[3],e[4],e[5]):r?xx(e[0],e[1],e[2],e[3],e[4],e[5]):Ex(e[0],e[1],e[2],e[3])}function zee(e){return e?J8(e)?e:K8(e)?t9(e):Q8(e)?Px(e):X8(e)?Ox(e):Y8(e)?e9(e):null:null}function e9(e){const{hasZ:t,hasM:r,points:i}=e;return av(nv(ov,i,t??!1,r??!1),t,r)}function t9(e){const{x:t,y:r,z:i,m:s}=e,n=s!=null;return i!=null?n?Ax(t,r,i,s,t,r,i,s):Mx(t,r,i,t,r,i):n?xx(t,r,s,t,r,s):Ex(t,r,t,r)}function Px(e){const{hasZ:t,hasM:r,rings:i}=e,s=pl(ov,i,t??!1,r??!1);return s?av(s,t,r):null}function Ox(e){const{hasZ:t,hasM:r,paths:i}=e,s=pl(ov,i,t??!1,r??!1);return s?av(s,t,r):null}var Md;function h2(e){return!Array.isArray(e[0])}function r9(e){var t;return typeof((t=e[0])==null?void 0:t[0])=="number"}function i9(e){var n,o;if(!e)return;let{rings:t,hasM:r,hasZ:i,spatialReference:s}=e;switch(t??(t=[]),r9(t)&&(t=[t]),(o=(n=t[0])==null?void 0:n[0])==null?void 0:o.length){case 4:i??(i=!0),r??(r=!0);break;case 3:i??(i=r!==!0),r??(r=!i);break;default:i??(i=!1),r??(r=!1)}return s??(s=le.WGS84),{...e,hasM:r,hasZ:i,rings:t,spatialReference:s}}let wr=Md=class extends gs{static fromExtent(e){const t=e.clone().normalize(),{spatialReference:r}=e;let i=!1,s=!1;for(const o of t)o.hasZ&&(i=!0),o.hasM&&(s=!0);const n={rings:t.map(o=>{const a=[[o.xmin,o.ymin],[o.xmin,o.ymax],[o.xmax,o.ymax],[o.xmax,o.ymin],[o.xmin,o.ymin]];if(i&&o.hasZ){const l=o.zmin+.5*(o.zmax-o.zmin);for(let h=0;h<a.length;h++)a[h].push(l)}if(s&&o.hasM){const l=o.mmin+.5*(o.mmax-o.mmin);for(let h=0;h<a.length;h++)a[h].push(l)}return a}),spatialReference:r};return i&&(n.hasZ=!0),s&&(n.hasM=!0),new Md(n)}constructor(e){super(i9(e)),this.curveRings=void 0,this.rings=[],this.type="polygon"}get cache(){return this.commitProperty("curveRings"),this.commitProperty("hasM"),this.commitProperty("hasZ"),this.commitProperty("rings"),this.commitProperty("spatialReference"),{}}get centroid(){const e=L8(this);if(!e||isNaN(e[0])||isNaN(e[1])||this.hasZ&&isNaN(e[2]))return null;const t=new re;return t.x=e[0],t.y=e[1],t.spatialReference=this.spatialReference,this.hasZ&&(t.z=e[2]),t}writeCurveRings(e,t){t.curveRings=C(e)}get extent(){const e=Px(this),{spatialReference:t}=this;return e?new De({...e,spatialReference:t}):null}get isSelfIntersecting(){return KL(this.rings)}writeRings(e,t){t.rings=C(this.rings)}addRing(e){if(!e)return;const t=this.rings,r=t.length;if(h2(e)){const i=[];for(let s=0,n=e.length;s<n;s++)i[s]=e[s].toArray();t[r]=i}else t[r]=e.slice();return this.notifyChange("rings"),this}clone(){const e=new Md;return e.spatialReference=this.spatialReference,e.rings=C(this.rings),e.curveRings=C(this.curveRings),e.hasZ=this.hasZ,e.hasM=this.hasM,e}equals(e){if(this===e)return!0;if(e==null)return!1;const t=this.spatialReference,r=e.spatialReference;if(t!=null!=(r!=null)||t!=null&&r!=null&&!t.equals(r)||this.rings.length!==e.rings.length)return!1;const i=([s,n,o,a],[l,h,p,f])=>s===l&&n===h&&(o==null&&p==null||o===p)&&(a==null&&f==null||a===f);for(let s=0;s<this.rings.length;s++){const n=this.rings[s],o=e.rings[s];if(!gf(n,o,i))return!1}return!0}contains(e){if(!e)return!1;const t=Lf(e,this.spatialReference);return N_(this,t??e)}isClockwise(e){const t=h2(e)?e.map(r=>this.hasZ?this.hasM?[r.x,r.y,r.z,r.m]:[r.x,r.y,r.z]:[r.x,r.y]):e;return fx(t)}getPoint(e,t){if(!this._validateInputs(e,t))return null;const r=this.rings[e][t],i=this.hasZ,s=this.hasM;return i&&!s?new re(r[0],r[1],r[2],void 0,this.spatialReference):s&&!i?new re(r[0],r[1],void 0,r[2],this.spatialReference):i&&s?new re(r[0],r[1],r[2],r[3],this.spatialReference):new re(r[0],r[1],this.spatialReference)}insertPoint(e,t,r){return this._validateInputs(e,t,!0)?(dl(this,r),Array.isArray(r)||(r=r.toArray()),this.rings[e].splice(t,0,r),this.notifyChange("rings"),this):this}removePoint(e,t){if(!this._validateInputs(e,t))return null;const r=new re(this.rings[e].splice(t,1)[0],this.spatialReference);return this.notifyChange("rings"),r}removeRing(e){if(!this._validateInputs(e,null))return null;const t=this.rings.splice(e,1)[0],r=this.spatialReference,i=t.map(s=>new re(s,r));return this.notifyChange("rings"),i}setPoint(e,t,r){return this._validateInputs(e,t)?(dl(this,r),Array.isArray(r)||(r=r.toArray()),this.rings[e][t]=r,this.notifyChange("rings"),this):this}_validateInputs(e,t,r=!1){if(e==null||e<0||e>=this.rings.length)return!1;if(t!=null){const i=this.rings[e];if(r&&(t<0||t>i.length)||!r&&(t<0||t>=i.length))return!1}return!0}toJSON(e){return this.write({},e)}};c([d({readOnly:!0})],wr.prototype,"cache",null),c([d({readOnly:!0})],wr.prototype,"centroid",null),c([d({json:{write:!0,origins:{"portal-item":{write:!1},"web-map":{write:!1},"web-scene":{write:!1}}}})],wr.prototype,"curveRings",void 0),c([ae("curveRings")],wr.prototype,"writeCurveRings",null),c([d({readOnly:!0})],wr.prototype,"extent",null),c([d({readOnly:!0})],wr.prototype,"isSelfIntersecting",null),c([d({type:[[[Number]]],json:{write:{isRequired:!0}}})],wr.prototype,"rings",void 0),c([ae("rings")],wr.prototype,"writeRings",null),wr=Md=c([S("esri.geometry.Polygon")],wr);const Ci=wr;wr.prototype.toJSON.isDefaultToJSON=!0;var qg;function s9(e){return!Array.isArray(e[0])}function n9(e){var t;return typeof((t=e[0])==null?void 0:t[0])=="number"}function o9(e){var n,o;if(!e)return;let{paths:t,hasM:r,hasZ:i,spatialReference:s}=e;switch(t??(t=[]),n9(t)&&(t=[t]),(o=(n=t[0])==null?void 0:n[0])==null?void 0:o.length){case 4:i??(i=!0),r??(r=!0);break;case 3:i??(i=r!==!0),r??(r=!i);break;default:i??(i=!1),r??(r=!1)}return s??(s=le.WGS84),{...e,hasM:r,hasZ:i,paths:t,spatialReference:s}}let wi=qg=class extends gs{constructor(e){super(o9(e)),this.curvePaths=void 0,this.paths=[],this.type="polyline"}get cache(){return this.commitProperty("curvePaths"),this.commitProperty("hasM"),this.commitProperty("hasZ"),this.commitProperty("paths"),this.commitProperty("spatialReference"),{}}writeCurvePaths(e,t){t.curvePaths=C(e)}get extent(){const e=Ox(this),{spatialReference:t}=this;return e?new De({...e,spatialReference:t}):null}writePaths(e,t){t.paths=C(this.paths)}addPath(e){if(!e)return;const t=this.paths,r=t.length;if(s9(e)){const i=[];for(let s=0,n=e.length;s<n;s++)i[s]=e[s].toArray();t[r]=i}else t[r]=e.slice();return this.notifyChange("paths"),this}clone(){const e=new qg;return e.spatialReference=this.spatialReference,e.paths=C(this.paths),e.curvePaths=C(this.curvePaths),e.hasZ=this.hasZ,e.hasM=this.hasM,e}getPoint(e,t){if(!this._validateInputs(e,t))return null;const r=this.paths[e][t],i=this.hasZ,s=this.hasM;return i&&!s?new re(r[0],r[1],r[2],void 0,this.spatialReference):s&&!i?new re(r[0],r[1],void 0,r[2],this.spatialReference):i&&s?new re(r[0],r[1],r[2],r[3],this.spatialReference):new re(r[0],r[1],this.spatialReference)}insertPoint(e,t,r){return this._validateInputs(e,t,!0)?(dl(this,r),Array.isArray(r)||(r=r.toArray()),this.paths[e].splice(t,0,r),this.notifyChange("paths"),this):this}removePath(e){if(!this._validateInputs(e,null))return null;const t=this.paths.splice(e,1)[0],r=this.spatialReference,i=t.map(s=>new re(s,r));return this.notifyChange("paths"),i}removePoint(e,t){if(!this._validateInputs(e,t))return null;const r=new re(this.paths[e].splice(t,1)[0],this.spatialReference);return this.notifyChange("paths"),r}setPoint(e,t,r){return this._validateInputs(e,t)?(dl(this,r),Array.isArray(r)||(r=r.toArray()),this.paths[e][t]=r,this.notifyChange("paths"),this):this}_validateInputs(e,t,r=!1){if(e==null||e<0||e>=this.paths.length)return!1;if(t!=null){const i=this.paths[e];if(r&&(t<0||t>i.length)||!r&&(t<0||t>=i.length))return!1}return!0}toJSON(e){return this.write({},e)}};c([d({readOnly:!0})],wi.prototype,"cache",null),c([d({json:{write:!0,origins:{"portal-item":{write:!1},"web-map":{write:!1},"web-scene":{write:!1}}}})],wi.prototype,"curvePaths",void 0),c([ae("curvePaths")],wi.prototype,"writeCurvePaths",null),c([d({readOnly:!0})],wi.prototype,"extent",null),c([d({type:[[[Number]]],json:{write:{isRequired:!0}}})],wi.prototype,"paths",void 0),c([ae("paths")],wi.prototype,"writePaths",null),wi=qg=c([S("esri.geometry.Polyline")],wi);const Qr=wi;wi.prototype.toJSON.isDefaultToJSON=!0;function Cx(e){return e.xmin!==void 0&&e.ymin!==void 0&&e.xmax!==void 0&&e.ymax!==void 0}function Ix(e){return e.points!==void 0}function Rx(e){return e.x!==void 0&&e.y!==void 0}function kx(e){return e.paths!==void 0||e.curvePaths!==void 0}function lv(e){return e.rings!==void 0||e.curveRings!==void 0}function fl(e){return e==null?null:e instanceof gs?e:Rx(e)?re.fromJSON(e):kx(e)?Qr.fromJSON(e):lv(e)?Ci.fromJSON(e):Ix(e)?Wf.fromJSON(e):Cx(e)?De.fromJSON(e):null}function uv(e){return e?Rx(e)?"esriGeometryPoint":kx(e)?"esriGeometryPolyline":lv(e)?"esriGeometryPolygon":Cx(e)?"esriGeometryEnvelope":Ix(e)?"esriGeometryMultipoint":null:null}const a9={esriGeometryPoint:re,esriGeometryPolyline:Qr,esriGeometryPolygon:Ci,esriGeometryEnvelope:De,esriGeometryMultipoint:Wf,esriGeometryMultiPatch:Ci};function l9(e){return e&&a9[e]||null}const u9=Wt()({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon"}),Vee=Wt()({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryEnvelope:"extent",mesh:"mesh"}),cv={base:gs,key:"type",typeMap:{extent:De,multipoint:Wf,point:re,polyline:Qr,polygon:Ci}};var Wg;let Is=Wg=class extends G{constructor(e){super(e),this.rotation=0,this.scale=0,this.targetGeometry=null,this.camera=null}castRotation(e){return(e%=360)<0&&(e+=360),e}clone(){return new Wg({rotation:this.rotation,scale:this.scale,targetGeometry:this.targetGeometry!=null?this.targetGeometry.clone():null,camera:this.camera!=null?this.camera.clone():null})}};c([d({type:Number,json:{write:!0,origins:{"web-map":{default:0,write:!0},"web-scene":{write:{overridePolicy:Km}}}}})],Is.prototype,"rotation",void 0),c([rt("rotation")],Is.prototype,"castRotation",null),c([d({type:Number,json:{write:!0,origins:{"web-map":{default:0,write:!0},"web-scene":{write:{overridePolicy:Km}}}}})],Is.prototype,"scale",void 0),c([d({types:cv,json:{read:fl,write:!0,origins:{"web-scene":{read:fl,write:{overridePolicy:Km}}}}})],Is.prototype,"targetGeometry",void 0),c([d({type:x8,json:{write:!0,origins:{"web-scene":{write:{isRequired:!0}}}}})],Is.prototype,"camera",void 0),Is=Wg=c([S("esri.Viewpoint")],Is);const Pr=Is;function Km(){return{enabled:!this.camera}}let Vp=class{constructor(t=r=>r.values().next().value){this._peeker=t,this._observable=new eh,this._items=new Set}get length(){return J(this._observable),this._items.size}clear(){this.length!==0&&(this._items.clear(),this._observable.notify())}last(){if(this.length===0)return;let t;for(t of this._items);return t}peek(){if(this.length!==0)return this._peeker(this._items)}push(t){this.contains(t)||(this._items.add(t),this._observable.notify())}contains(t){return J(this._observable),this._items.has(t)}pop(){if(this.length===0)return;const t=this.peek();return this._items.delete(t),this._observable.notify(),t}popLast(){if(this.length===0)return;const t=this.last();return this._items.delete(t),this._observable.notify(),t}remove(t){this.contains(t)&&(this._items.delete(t),this._observable.notify())}filter(t){const r=this.length;return this._items.forEach(i=>{t(i)||this._items.delete(i)}),r!==this._items.size&&this._observable.notify(),this}*[Symbol.iterator](){J(this._observable),yield*this._items}};const Nx=new FinalizationRegistry(e=>{e.close()});function c9(e,t){Nx.register(e,t,t)}function h9(e){Nx.unregister(e)}function Lx(e,t){return new Proxy({},{get:(r,i,s)=>(...n)=>{let o,a;const l=n[n.length-1];return d9(l)&&(o=l.signal,a=l.transferList,n.pop()),e.apply(t?`${t}.${i.toString()}`:i.toString(),n,{transferList:a,signal:o})}})}function d9(e){return typeof e=="object"&&!Array.isArray(e)&&e!=null&&("signal"in e||"transferList"in e||Object.keys(e).length===0)}const p9={statsWorker:()=>N(()=>import("./statsWorker-C-hpGsuJ.js"),__vite__mapDeps([30,31,32,33,34,35,36,37,38])),geometryEngineWorker:()=>N(()=>import("./geometryEngineWorker-CA-tZxOm.js"),__vite__mapDeps([39,40,41,3,42])),arcadeGeometryOperatorsWorker:()=>N(()=>import("./operatorsWorker-Du7yT9Ks.js"),[]),CSVSourceWorker:()=>N(()=>import("./CSVSourceWorker-DV9IrrUg.js"),__vite__mapDeps([43,44,42,45,12,46,47,48,49,50,51,10,11,52,53,54,55,32,31,33,34,35,36,37,38,56,57,58,59,60,61,62,63,64,65,66])),EdgeProcessingWorker:()=>N(()=>import("./EdgeProcessingWorker-uGAjHlnY.js"),__vite__mapDeps([67,68,69,70,34,71,35,72,73,74,75,76,77,78])),ElevationSamplerWorker:()=>N(()=>import("./ElevationSamplerWorker-DsBwkAZ-.js"),__vite__mapDeps([79,62,80,81,82,83,84,85,86,87,88,70,34,89])),FeatureServiceSnappingSourceWorker:()=>N(()=>import("./FeatureServiceSnappingSourceWorker-DeQo5pug.js"),__vite__mapDeps([90,46,47,42,48,49,45,12,50,51,10,11,52,53,54,55,32,31,33,34,35,36,37,38,56,57,58,59,60,61,62,63,17,18,91,92,93,94,95,9])),GeoJSONSourceWorker:()=>N(()=>import("./GeoJSONSourceWorker-CLIxIcZp.js"),__vite__mapDeps([96,49,45,12,50,46,47,42,48,51,10,11,52,53,54,55,32,31,33,34,35,36,37,38,56,57,58,59,60,61,62,63,97,44,65,66,98])),LercWorker:()=>N(()=>import("./LercWorker-B4D7bHtq.js"),[]),MemorySourceWorker:()=>N(()=>import("./MemorySourceWorker-D5vzvn8S.js"),__vite__mapDeps([99,49,45,12,50,100,46,47,42,48,51,10,11,52,53,54,55,32,31,33,34,35,36,37,38,56,57,58,59,60,61,62,63,65,66,98,44])),PBFDecoderWorker:()=>N(()=>import("./PBFDecoderWorker-Cd10l_--.js"),__vite__mapDeps([101,102,12,49,45,50,92,93])),FeaturePipelineWorker:()=>N(()=>import("./FeaturePipelineWorker-XHr3AHrx.js"),__vite__mapDeps([103,104,105,106,107,77,108,109,45,12,110,111,112,113,114,115,66,116,59,47,42,54,49,50,53,32,117,118,119,120,121,122,123,124,125,63,48,51,10,11,52,55,31,33,34,35,36,37,38,56,57,58,126,127,128,129,94,92,93,95,130,131,97,44,65,98,132,133,134])),PointCloudWorker:()=>N(()=>import("./PointCloudWorker-Dw1oSP21.js"),__vite__mapDeps([135,136,82,137,34,138,139,140,141,142,75,143,83,35,84,85,144])),RasterWorker:()=>N(()=>import("./RasterWorker-DFDHAwg3.js"),__vite__mapDeps([145,146,147,3,148,34,35,149,150,151,152])),SceneLayerSnappingSourceWorker:()=>N(()=>import("./SceneLayerSnappingSourceWorker-COQqvhkU.js"),__vite__mapDeps([153,154,155,34,35,82,144,83,137,156,69,70,71,72,73,74,75,76,77,78])),SceneLayerWorker:()=>N(()=>import("./SceneLayerWorker-C9YP1UoN.js"),__vite__mapDeps([157,80,88,158,86,35,155,34,82,144,83,137,159,142,75,160,113,161,162,163,164,143,136,84,85])),WFSSourceWorker:()=>N(()=>import("./WFSSourceWorker-tSoxGFPi.js"),__vite__mapDeps([165,49,45,12,50,46,47,42,48,51,10,11,52,53,54,55,32,31,33,34,35,36,37,38,56,57,58,59,60,61,62,63,97,44,98,166,167])),WorkerTileHandler:()=>N(()=>import("./WorkerTileHandler-CdiiI-ZR.js"),__vite__mapDeps([168,169,110,114,170,171,105,93,12,121,172,173,77,148,34,35,123,109])),Lyr3DWorker:()=>N(()=>import("./Lyr3DWorker-47Obotue.js"),[]),Feature3DPipelineWorker:()=>N(()=>import("./Feature3DPipelineWorker-52sgwZzh.js"),__vite__mapDeps([174,48,49,45,12,50,51,10,11,52,53,54,47,42,55,32,31,33,34,35,36,37,38,56,57,58,59,62,94,92,93,95,74,175,176,177,178,163,83,164,162,82,75,18,179,155,144,137,154,143,136,84,85,180,181,69,70,71,182,76,77,183,156,184,113,185,186,87,80,158,86,187,138,188,189,190,161,191])),TextureCompressionWorker:()=>N(()=>import("./TextureCompressionWorker-DdKFs0CJ.js"),__vite__mapDeps([192,181]))},Dx="worker:port-closed";var lt;(function(e){e[e.HANDSHAKE=0]="HANDSHAKE",e[e.OPEN=1]="OPEN",e[e.OPENED=2]="OPENED",e[e.RESPONSE=3]="RESPONSE",e[e.INVOKE=4]="INVOKE",e[e.ABORT=5]="ABORT",e[e.CLOSE=6]="CLOSE",e[e.OPEN_PORT=7]="OPEN_PORT",e[e.ON=8]="ON"})(lt||(lt={}));let f9=0;function Fx(){return f9++}function m9(e){return e&&typeof e=="object"&&("result"in e||"transferList"in e)}function Oc(e){return e?typeof e=="string"?JSON.stringify({name:"message",message:e}):e.toJSON?JSON.stringify(e):JSON.stringify({name:e.name,message:e.message,details:e.details||{stack:e.stack}}):null}function hv(e,t,r,i){if(t.type===lt.OPEN_PORT)return void e.postMessage(t,[t.port]);if(t.type!==lt.INVOKE&&t.type!==lt.RESPONSE)return void e.postMessage(t);let s;if(m9(r)?(s=d2(r.transferList),t.data=r.result):(s=d2(i),t.data=r),s){if(A("ff")){for(const n of s)if("byteLength"in n&&n.byteLength>267386880){const o="Worker call with large ArrayBuffer would crash Firefox";switch(t.type){case lt.INVOKE:throw o;case lt.RESPONSE:return void hv(e,{type:lt.RESPONSE,jobId:t.jobId,error:Oc(o)})}}}e.postMessage(t,s)}else e.postMessage(t)}function Cc(e){if(!e)return null;const t=e.data;return t?typeof t=="string"?JSON.parse(t):t:null}function d2(e){if(!(e!=null&&e.length))return null;if(A("esri-workers-arraybuffer-transfer"))return e;const t=e.filter(r=>!y9(r));return t.length?t:null}function y9(e){var t;return e instanceof ArrayBuffer||((t=e==null?void 0:e.constructor)==null?void 0:t.name)==="ArrayBuffer"}async function Hee(e){try{return await e}catch(t){const r=(t==null?void 0:t.name)===Dx;if(!(qt(t)||r))throw t;return}}const{CLOSE:p2,ABORT:f2,INVOKE:m2,RESPONSE:Gl,OPEN_PORT:y2,ON:g9}=lt,_9=2;let v9=class{constructor(t){this._invoke=t,this._timer=null,this._cancelledJobIds=new Set,this._invokeMessages=[],this._timer=null,this._process=this._process.bind(this)}push(t){t.type===lt.ABORT?this._cancelledJobIds.add(t.jobId):(this._invokeMessages.push(t),this._timer===null&&(this._timer=setTimeout(this._process,0)))}clear(){this._invokeMessages.length=0,this._cancelledJobIds.clear(),this._timer=null}_process(){this._timer=null;for(const t of this._invokeMessages)this._cancelledJobIds.has(t.jobId)||this._invoke(t);this._cancelledJobIds.clear(),this._invokeMessages.length=0}},Sn=class ha{static connect(t,r){const i=new MessageChannel;let s;s=typeof t=="function"?new t:"default"in t&&typeof t.default=="function"?new t.default:t;const n=new ha(i.port1,{channel:i,client:s,schedule:r});return typeof s=="object"&&"remoteClient"in s&&(s.remoteClient=n),ha.clients.set(n,s),i.port2}static loadWorker(t){const r=p9[t];return r?r():Promise.resolve(null)}constructor(t,r,i){this._port=t,this._jobQueue=i,this._outJobs=new Map,this._inJobs=new Map,this._invokeQueue=new v9(s=>this._onInvokeMessage(s)),this._client=r.client,this._onMessage=this._onMessage.bind(this),this._channel=r.channel,this._schedule=r.schedule,this._port.addEventListener("message",this._onMessage),this._port.start()}close(){this._post({type:p2}),this._close()}isBusy(){return this._outJobs.size>0}invoke(t,r,i){return this.apply(t,[r],i)}apply(t,r,i){const s=i==null?void 0:i.signal,n=i==null?void 0:i.transferList;if(!this._port)return Promise.reject(new I(Dx,`Cannot call invoke('${t}'), port is closed`,{methodName:t,data:r}));const o=Fx();return new Promise((a,l)=>{if(ur(s))return this._processWork(),void l(Ee());const h=Ar(s,()=>{const f=this._outJobs.get(o);f&&(this._outJobs.delete(o),this._processWork(),Ie(f.abortHandle),this._post({type:f2,jobId:o}),l(Ee()))}),p={resolve:a,reject:l,abortHandle:h,debugInfo:t};this._outJobs.set(o,p),this._post({type:m2,jobId:o,methodName:t,abortable:s!=null},r,n)})}createInvokeProxy(t){return Lx(this,t)}on(t,r){const i=new MessageChannel;function s(n){r(n.data)}return this._port.postMessage({type:lt.ON,eventType:t,port:i.port2},[i.port2]),i.port1.addEventListener("message",s),i.port1.start(),ce(()=>{i.port1.postMessage({type:lt.CLOSE}),i.port1.close(),i.port1.removeEventListener("message",s)})}jobAdded(){this._processWork()}openPort(){const t=new MessageChannel;return this._post({type:y2,port:t.port2}),t.port1}_processWork(){var o;if(this._outJobs.size>=_9)return;const t=(o=this._jobQueue)==null?void 0:o.pop();if(!t)return;const{methodName:r,data:i,invokeOptions:s,resolver:n}=t;this.apply(r,i,s).then(a=>n.resolve(a)).catch(a=>n.reject(a))}_close(){this._channel&&(this._channel=void 0),this._port.removeEventListener("message",this._onMessage),this._port.close(),this._outJobs.forEach(t=>{Ie(t.abortHandle),t.reject(Ee(`Worker closing, aborting job calling '${t.debugInfo}'`))}),this._inJobs.clear(),this._outJobs.clear(),this._invokeQueue.clear(),this._port=null,this._client=null,this._schedule=null}_onMessage(t){this._schedule!=null?this._schedule(()=>this._processMessage(t,!0)):this._processMessage(t,!1)}_processMessage(t,r){const i=Cc(t);if(i)switch(i.type){case Gl:this._onResponseMessage(i);break;case m2:r?this._onInvokeMessage(i):this._invokeQueue.push(i);break;case f2:this._onAbortMessage(i);break;case p2:this._onCloseMessage();break;case y2:this._onOpenPortMessage(i);break;case g9:this._onOnMessage(i)}}_onAbortMessage(t){const r=this._inJobs,i=t.jobId,s=r.get(i);this._invokeQueue.push(t),s&&(s.controller&&s.controller.abort(),r.delete(i))}_onCloseMessage(){const t=this._client;this._close(),t&&"destroy"in t&&ha.clients.get(this)===t&&t.destroy(),ha.clients.delete(this),t!=null&&t.remoteClient&&(t.remoteClient=null)}_onInvokeMessage(t){const{methodName:r,jobId:i,data:s=[],abortable:n}=t,o=n?new AbortController:null,a=this._inJobs;let l,h=this._client,p=h[r];try{if(!p&&r&&r.includes(".")){const f=r.split(".");for(let m=0;m<f.length-1;m++)h=h[f[m]],p=h[f[m+1]]}if(typeof p!="function")throw new TypeError(`${r} is not a function`);s.push({client:this,signal:o?o.signal:null}),l=p.apply(h,s)}catch(f){return void this._post({type:Gl,jobId:i,error:Oc(f)})}ki(l)?(a.set(i,{controller:o,promise:l}),l.then(f=>{a.has(i)&&(a.delete(i),this._post({type:Gl,jobId:i},f))},f=>{a.has(i)&&(a.delete(i),qt(f)||this._post({type:Gl,jobId:i,error:Oc(f||{message:`Error encountered at method ${r}`})}))})):this._post({type:Gl,jobId:i},l)}_onOpenPortMessage(t){new ha(t.port,{client:this._client})}_onOnMessage(t){const{port:r}=t,i=this._client.on(t.eventType,n=>{r.postMessage(n)}),s=Yc(t.port,"message",n=>{const o=Cc(n);(o==null?void 0:o.type)===lt.CLOSE&&(s.remove(),i.remove(),r.close())})}_onResponseMessage(t){const{jobId:r,error:i,data:s}=t,n=this._outJobs;if(!n.has(r))return;const o=n.get(r);n.delete(r),this._processWork(),Ie(o.abortHandle),i?o.reject(I.fromJSON(JSON.parse(i))):o.resolve(s)}_post(t,r,i){return hv(this._port,t,r,i)}};Sn.kernelInfo={buildDate:RE,fullVersion:T_,revision:kE},Sn.clients=new Map;let w9=class{constructor(){this._inUseClients=new Array,this._clients=new Array,this._clientPromises=new Array,this._ongoingJobsQueue=new Vp}destroy(){this.close()}get closed(){var t;return!((t=this._clients)!=null&&t.length)}open(t,r){return new Promise((i,s)=>{let n=!0;const o=a=>{Be(r.signal),n&&(n=!1,a())};this._clients.length=t.length,this._clientPromises.length=t.length,this._inUseClients.length=t.length;for(let a=0;a<t.length;++a){const l=t[a];ki(l)?this._clientPromises[a]=l.then(h=>(this._clients[a]=new Sn(h,r,this._ongoingJobsQueue),o(i),this._clients[a]),()=>(o(s),null)):(this._clients[a]=new Sn(l,r,this._ongoingJobsQueue),this._clientPromises[a]=Promise.resolve(this._clients[a]),o(i))}})}broadcast(t,r,i){const s=new Array(this._clientPromises.length);for(let n=0;n<this._clientPromises.length;++n){const o=this._clientPromises[n];s[n]=o.then(a=>a==null?void 0:a.invoke(t,r,i))}return s}close(){let t;for(;t=this._ongoingJobsQueue.pop();)t.resolver.reject(Ee(`Worker closing, aborting job calling '${t.methodName}'`));for(const r of this._clientPromises)r.then(i=>i==null?void 0:i.close());this._clients.length=0,this._clientPromises.length=0,this._inUseClients.length=0,h9(this)}invoke(t,r,i){return this.apply(t,[r],i)}apply(t,r,i){const s=Or();this._ongoingJobsQueue.push({methodName:t,data:r,invokeOptions:i,resolver:s});for(let n=0;n<this._clientPromises.length;n++){const o=this._clients[n];o?o.jobAdded():this._clientPromises[n].then(a=>a==null?void 0:a.jobAdded())}return s.promise}createInvokeProxy(t){return Lx(this,t)}on(t,r){return Promise.all(this._clientPromises).then(()=>Wc(this._clients.map(i=>i.on(t,r))))}openPorts(){return new Promise(t=>{const r=new Array(this._clientPromises.length);let i=r.length;for(let s=0;s<this._clientPromises.length;++s)this._clientPromises[s].then(n=>{n&&(r[s]=n.openPort()),--i==0&&t(r)})})}get test(){}};const b9={async request(e,t){var o,a;const r=e.options,i=r.responseType;r.signal=t==null?void 0:t.signal,r.responseType=i==="native"||i==="native-request-init"?"native-request-init":i&&["blob","json","text"].includes(i)&&((o=ng(e.url))!=null&&o.after)?i:"array-buffer";const s=await We(e.url,r),n={data:s.data,httpStatus:s.httpStatus,ssl:s.ssl};switch((a=s.requestOptions)==null?void 0:a.responseType){case"native-request-init":return delete n.data.signal,n;case"blob":n.data=await n.data.arrayBuffer();break;case"json":n.data=new TextEncoder().encode(JSON.stringify(n.data)).buffer;break;case"text":n.data=new TextEncoder().encode(n.data).buffer}return{result:n,transferList:[n.data]}}},g2={};function S9(e){var r;const t={async:e.async,isDebug:e.isDebug,locale:e.locale,baseUrl:e.baseUrl,has:{...e.has},map:{...e.map},packages:((r=e.packages)==null?void 0:r.slice())||[],paths:{...g2.paths,...e.paths}};return e.hasOwnProperty("async")||(t.async=!0),e.hasOwnProperty("isDebug")||(t.isDebug=!1),e.baseUrl||(t.baseUrl=g2.baseUrl),t}let T9=class{constructor(){const t=document.createDocumentFragment();["addEventListener","dispatchEvent","removeEventListener"].forEach(r=>{this[r]=(...i)=>t[r](...i)})}},xd=class{constructor(){this._dispatcher=new T9,this._workerPostMessage({type:lt.HANDSHAKE})}terminate(){}get onmessage(){return this._onmessageHandler}set onmessage(t){this._onmessageHandler&&this.removeEventListener("message",this._onmessageHandler),this._onmessageHandler=t,t&&this.addEventListener("message",t)}get onmessageerror(){return this._onmessageerrorHandler}set onmessageerror(t){this._onmessageerrorHandler&&this.removeEventListener("messageerror",this._onmessageerrorHandler),this._onmessageerrorHandler=t,t&&this.addEventListener("messageerror",t)}get onerror(){return this._onerrorHandler}set onerror(t){this._onerrorHandler&&this.removeEventListener("error",this._onerrorHandler),this._onerrorHandler=t,t&&this.addEventListener("error",t)}postMessage(t){mp(()=>{this._workerMessageHandler(new MessageEvent("message",{data:t}))})}dispatchEvent(t){return this._dispatcher.dispatchEvent(t)}addEventListener(t,r,i){this._dispatcher.addEventListener(t,r,i)}removeEventListener(t,r,i){this._dispatcher.removeEventListener(t,r,i)}_workerPostMessage(t){mp(()=>{this.dispatchEvent(new MessageEvent("message",{data:t}))})}async _workerMessageHandler(t){const r=Cc(t);if(r&&r.type===lt.OPEN){const{modulePath:i,jobId:s}=r;let n=await Sn.loadWorker(i);n||(n=await import(i));const o=Sn.connect(n);this._workerPostMessage({type:lt.OPENED,jobId:s,data:o})}}};const Zg=()=>U.getLogger("esri.core.workers.workerFactory"),{HANDSHAKE:$9}=lt,E9='let globalId=0;const outgoing=new Map,configuration={CONFIGURATION};self.esriConfig=configuration.esriConfig;const workerPath=self.esriConfig.workers.workerPath,HANDSHAKE=0,OPEN=1,OPENED=2,RESPONSE=3,INVOKE=4,ABORT=5;function createAbortError(){const e=new Error("Aborted");return e.name="AbortError",e}function receiveMessage(e){return e&&e.data?"string"==typeof e.data?JSON.parse(e.data):e.data:null}function invokeStaticMessage(e,o,r){const t=r&&r.signal,n=globalId++;let s=null;return new Promise(((r,i)=>{if(t){if(t.aborted)return i(createAbortError());s=()=>{outgoing.get(n)&&(outgoing.delete(n),self.postMessage({type:5,jobId:n}),i(createAbortError()))},t.addEventListener("abort",s)}outgoing.set(n,{resolve:r,reject:i}),self.postMessage({type:4,jobId:n,methodName:e,abortable:null!=t,data:o})})).finally((()=>{t&&t.removeEventListener("abort",s)}))}let workerRevisionChecked=!1;function checkWorkerRevision(e){if(!workerRevisionChecked&&e.kernelInfo){workerRevisionChecked=!0;const{revision:o,fullVersion:r}=configuration.kernelInfo,{revision:t,fullVersion:n,version:s}=e.kernelInfo;esriConfig.assetsPath!==esriConfig.defaultAssetsPath&&o!==t&&console.warn(`Version mismatch detected between ArcGIS Maps SDK for JavaScript modules and assets. For more information visit https://bit.ly/3QnsuSo.\nModules version: ${r}\nAssets version: ${n??s}\nAssets path: ${esriConfig.assetsPath}`)}}function messageHandler(e){const o=receiveMessage(e);if(!o)return;const r=o.jobId;switch(o.type){case 1:let n;function t(e){const o=n.connect(e);self.postMessage({type:2,jobId:r,data:o},[o])}"function"==typeof define&&define.amd?require([workerPath],(e=>{n=e.default||e,checkWorkerRevision(n),n.loadWorker(o.modulePath).then((e=>e||new Promise((e=>{require([o.modulePath],e)})))).then(t)})):"System"in self&&"function"==typeof System.import?System.import(workerPath).then((e=>(n=e.default,checkWorkerRevision(n),n.loadWorker(o.modulePath)))).then((e=>e||System.import(o.modulePath))).then(t):esriConfig.workers.useDynamicImport?import(workerPath).then((e=>{n=e.default||e,checkWorkerRevision(n),n.loadWorker(o.modulePath).then((e=>e||import(o.modulePath))).then(t)})):(self.RemoteClient||importScripts(workerPath),n=self.RemoteClient.default||self.RemoteClient,checkWorkerRevision(n),n.loadWorker(o.modulePath).then(t));break;case 3:if(outgoing.has(r)){const s=outgoing.get(r);outgoing.delete(r),o.error?s.reject(JSON.parse(o.error)):s.resolve(o.data)}}}self.dojoConfig=configuration.loaderConfig,esriConfig.workers.loaderUrl&&(self.importScripts(esriConfig.workers.loaderUrl),"function"==typeof require&&"function"==typeof require.config&&require.config(configuration.loaderConfig)),self.addEventListener("message",messageHandler),self.postMessage({type:0});';let Lh,Dh;const _2="Failed to create Worker. Fallback to execute module in main thread";async function M9(){if(!A("esri-workers"))return v2(new xd);if(!Lh&&!Dh)try{const t=E9.split("{CONFIGURATION}").join(x9());Lh=URL.createObjectURL(new Blob([t],{type:"text/javascript"}))}catch(t){Dh=t||{}}let e;if(Lh)try{e=new Worker(Lh,{name:"esri-worker-"+A9++})}catch{Zg().warn(_2,Dh),e=new xd}else Zg().warn(_2,Dh),e=new xd;return v2(e)}async function v2(e){return new Promise(t=>{function r(s){const n=Cc(s);n&&n.type===$9&&(e.removeEventListener("message",r),e.removeEventListener("error",i),t(e))}function i(s){s.preventDefault(),e.removeEventListener("message",r),e.removeEventListener("error",i),Zg().warn("Failed to create Worker. Fallback to execute module in main thread",s),(e=new xd).addEventListener("message",r),e.addEventListener("error",i)}e.addEventListener("message",r),e.addEventListener("error",i)})}function x9(){let e;if(ye.default!=null){const s={...ye};delete s.default,e=JSON.parse(JSON.stringify(s))}else e=JSON.parse(JSON.stringify(ye));e.assetsPath=$r(e.assetsPath),e.defaultAssetsPath=e.defaultAssetsPath?$r(e.defaultAssetsPath):void 0,e.request.interceptors=[],e.log.interceptors=[],e.locale=Bt(),e.has={"esri-csp-restrictions":A("esri-csp-restrictions"),"esri-2d-debug":!1,"esri-2d-update-debug":A("esri-2d-update-debug"),"esri-2d-log-updating":A("esri-2d-log-updating"),"featurelayer-pbf":A("featurelayer-pbf"),"featurelayer-fast-triangulation-enabled":A("featurelayer-fast-triangulation-enabled"),"featurelayer-simplify-thresholds":A("featurelayer-simplify-thresholds"),"featurelayer-simplify-payload-size-factors":A("featurelayer-simplify-payload-size-factors"),"featurelayer-simplify-mobile-factor":A("featurelayer-simplify-mobile-factor"),"featurelayer-query-max-depth":A("featurelayer-query-max-depth"),"featurelayer-query-pausing-enabled":A("featurelayer-query-pausing-enabled"),"featurelayer-snapshot-enabled":A("featurelayer-snapshot-enabled"),"esri-atomics":A("esri-atomics"),"esri-shared-array-buffer":A("esri-shared-array-buffer"),"esri-tiles-debug":A("esri-tiles-debug"),"esri-workers-arraybuffer-transfer":A("esri-workers-arraybuffer-transfer"),"feature-polyline-generalization-factor":A("feature-polyline-generalization-factor"),"host-webworker":1},e.workers.loaderUrl&&(e.workers.loaderUrl=$r(e.workers.loaderUrl)),e.workers.workerPath?e.workers.workerPath=$r(e.workers.workerPath):e.workers.workerPath=$r(Ge("esri/core/workers/RemoteClient.js")),e.workers.useDynamicImport=!1;const t=ye.workers.loaderConfig,r=S9({baseUrl:t==null?void 0:t.baseUrl,locale:Bt(),has:{"csp-restrictions":1,"dojo-test-sniff":0,"host-webworker":1,...t==null?void 0:t.has},map:{...t==null?void 0:t.map},paths:{...t==null?void 0:t.paths},packages:(t==null?void 0:t.packages)||[]});return JSON.stringify({esriConfig:e,loaderConfig:r,kernelInfo:{buildDate:RE,fullVersion:T_,revision:kE}})}let A9=0;const{ABORT:w2,INVOKE:P9,OPEN:O9,OPENED:C9,RESPONSE:zl}=lt;let I9=class Ux{static async create(t){const r=await M9();return new Ux(r,t)}constructor(t,r){this._outJobs=new Map,this._inJobs=new Map,this.worker=t,this.id=r,t.addEventListener("message",this._onMessage.bind(this)),t.addEventListener("error",i=>{i.preventDefault(),U.getLogger("esri.core.workers.WorkerOwner").error(i)})}terminate(){this.worker.terminate()}async open(t,r={}){const{signal:i}=r,s=Fx();return new Promise((n,o)=>{const a={resolve:n,reject:o,abortHandle:s_(i,()=>{this._outJobs.delete(s),this._post({type:w2,jobId:s})})};this._outJobs.set(s,a),this._post({type:O9,jobId:s,modulePath:t})})}_onMessage(t){const r=Cc(t);if(r)switch(r.type){case C9:this._onOpenedMessage(r);break;case zl:this._onResponseMessage(r);break;case w2:this._onAbortMessage(r);break;case P9:this._onInvokeMessage(r)}}_onAbortMessage(t){const r=this._inJobs,i=t.jobId,s=r.get(i);s&&(s.controller&&s.controller.abort(),r.delete(i))}_onInvokeMessage(t){const{methodName:r,jobId:i,data:s,abortable:n}=t,o=n?new AbortController:null,a=this._inJobs,l=b9[r];let h;try{if(typeof l!="function")throw new TypeError(`${r} is not a function`);h=l.call(null,s,{signal:o?o.signal:null})}catch(p){return void this._post({type:zl,jobId:i,error:Oc(p)})}ki(h)?(a.set(i,{controller:o,promise:h}),h.then(p=>{a.has(i)&&(a.delete(i),this._post({type:zl,jobId:i},p))},p=>{a.has(i)&&(a.delete(i),p||(p={message:"Error encountered at method"+r}),qt(p)||this._post({type:zl,jobId:i,error:Oc(p||{message:`Error encountered at method ${r}`})}))})):this._post({type:zl,jobId:i},h)}_onOpenedMessage(t){const{jobId:r,data:i}=t,s=this._outJobs.get(r);s&&(this._outJobs.delete(r),Ie(s.abortHandle),s.resolve(i))}_onResponseMessage(t){const{jobId:r,error:i,data:s}=t,n=this._outJobs.get(r);n&&(this._outJobs.delete(r),Ie(n.abortHandle),i?n.reject(I.fromJSON(JSON.parse(i))):n.resolve(s))}_post(t,r,i){return hv(this.worker,t,r,i)}};const b2=A("host-browser")?Math.min(navigator.hardwareConcurrency-1,A("workers-pool-size")??8):0;let _o=A("esri-mobile")?Math.min(b2,3):b2;_o||(_o=A("safari")&&A("mac")?7:2);let S2=0;const Ad=[];function R9(){jx()}async function Fh(e,t){const r=new w9,{registryTarget:i,...s}=t;return await r.open(e,s),i&&c9(i,r),r}async function Yee(e,t={}){if(typeof e!="string")throw new I("workers:undefined-module","modulePath is missing");let r=t.strategy||"distributed";if(A("host-webworker")&&!A("esri-workers")&&(r="local"),r==="local"){let i=await Sn.loadWorker(e);i||(i=await import(e)),Be(t.signal);const s=t.client||i;return Fh([Sn.connect(i,t.schedule)],{...t,client:s})}if(await jx(),Be(t.signal),r==="dedicated"){const i=S2++%_o;return Fh([await Ad[i].open(e,t)],t)}if(t.maxNumWorkers&&t.maxNumWorkers>0){const i=Math.min(t.maxNumWorkers,_o);if(i<_o){const s=new Array(i);for(let n=0;n<i;++n){const o=S2++%_o;s[n]=Ad[o].open(e,t)}return Fh(s,t)}}return Fh(Ad.map(i=>i.open(e,t)),t)}let Uh=null;async function jx(){if(Uh)return Uh;new AbortController;const e=[];for(let t=0;t<_o;t++){const r=I9.create(t).then(i=>(Ad[t]=i,i));e.push(r)}return Uh=Promise.all(e),Uh}const Kee=Math.PI/180,Xee=/(?:SPHEROID|ELLIPSOID)\[([^\]]+)]/i,xs=He.radius,Fr=He.eccentricitySquared,k9={a1:xs*Fr,a2:xs*Fr*xs*Fr,a3:xs*Fr*Fr/2,a4:xs*Fr*xs*Fr*2.5,a5:xs*Fr+xs*Fr*Fr/2,a6:1-Fr},Qee={4267:{a:63782064e-1,f:1/294.9786982},4269:{a:6378137,f:1/298.257222101},4326:{a:He.radius,f:He.flattening},4490:{a:6378137,f:1/298.257222101},104900:{a:2439700,f:0},104901:{a:6051e3,f:0},104902:{a:6051800,f:0},104903:{a:gn.radius,f:gn.flattening},104904:{a:3393400,f:1/192.0430107526882},104905:{a:Ei.radius,f:Ei.flattening},104906:{a:6200,f:0},104907:{a:11100,f:0},104908:{a:71492e3,f:.06487439154031222},104909:{a:8200,f:0},104910:{a:83500,f:0},104911:{a:1e4,f:0},104912:{a:2409300,f:0},104913:{a:15e3,f:0},104914:{a:4e4,f:0},104915:{a:1562090,f:0},104916:{a:2632345,f:0},104917:{a:85e3,f:0},104918:{a:1821460,f:0},104919:{a:5e3,f:0},104920:{a:12e3,f:0},104921:{a:3e4,f:3},104922:{a:18e3,f:0},104923:{a:14e3,f:0},104924:{a:49300,f:0},104925:{a:60268e3,f:1/10.2079945799458},104926:{a:16e3,f:0},104927:{a:9500,f:0},104928:{a:56e4,f:0},104929:{a:249400,f:0},104930:{a:59500,f:0},104931:{a:16e3,f:0},104932:{a:133e3,f:0},104933:{a:718e3,f:0},104934:{a:888e3,f:0},104935:{a:1986300,f:0},104936:{a:1e4,f:0},104937:{a:41900,f:0},104938:{a:11e4,f:0},104939:{a:50100,f:0},104940:{a:764e3,f:0},104941:{a:11e3,f:0},104942:{a:529800,f:0},104943:{a:2575e3,f:0},104944:{a:25559e3,f:1/43.61604095563141},104945:{a:578900,f:0},104946:{a:33e3,f:0},104947:{a:21e3,f:0},104948:{a:13e3,f:0},104949:{a:31e3,f:0},104950:{a:27e3,f:0},104951:{a:42e3,f:0},104952:{a:235800,f:0},104953:{a:761400,f:0},104954:{a:15e3,f:0},104955:{a:54e3,f:0},104956:{a:77e3,f:0},104957:{a:27e3,f:0},104958:{a:788900,f:0},104959:{a:584700,f:0},104960:{a:24764e3,f:.01708124697141011},104961:{a:74e3,f:0},104962:{a:79e3,f:0},104963:{a:104e3,f:.14423076923076922},104964:{a:29e3,f:0},104965:{a:17e4,f:0},104966:{a:208e3,f:0},104967:{a:4e4,f:0},104968:{a:1352600,f:0},104969:{a:1195e3,f:0},104970:{a:593e3,f:0},104971:{a:Ei.radius,f:0},104972:{a:47e4,f:0},104973:{a:255e3,f:0},104974:{a:2439400,f:0}};var x;(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.SPHERICAL_ECEF=1]="SPHERICAL_ECEF",e[e.WGS84=2]="WGS84",e[e.WEB_MERCATOR=3]="WEB_MERCATOR",e[e.WGS84_ECEF=4]="WGS84_ECEF",e[e.CGCS2000=5]="CGCS2000",e[e.SPHERICAL_MARS_PCPF=6]="SPHERICAL_MARS_PCPF",e[e.GCSMARS2000=7]="GCSMARS2000",e[e.SPHERICAL_MOON_PCPF=8]="SPHERICAL_MOON_PCPF",e[e.GCSMOON2000=9]="GCSMOON2000",e[e.LON_LAT=10]="LON_LAT",e[e.PLATE_CARREE=11]="PLATE_CARREE"})(x||(x={}));const N9={[x.WGS84]:{[x.CGCS2000]:Oe,[x.GCSMARS2000]:null,[x.GCSMOON2000]:null,[x.LON_LAT]:Oe,[x.SPHERICAL_ECEF]:nc,[x.SPHERICAL_MARS_PCPF]:null,[x.SPHERICAL_MOON_PCPF]:null,[x.UNKNOWN]:null,[x.WEB_MERCATOR]:qa,[x.PLATE_CARREE]:Wa,[x.WGS84]:Oe,[x.WGS84_ECEF]:Ya},[x.CGCS2000]:{[x.CGCS2000]:Oe,[x.GCSMARS2000]:null,[x.GCSMOON2000]:null,[x.LON_LAT]:Oe,[x.SPHERICAL_ECEF]:nc,[x.SPHERICAL_MARS_PCPF]:null,[x.SPHERICAL_MOON_PCPF]:null,[x.UNKNOWN]:null,[x.WEB_MERCATOR]:qa,[x.PLATE_CARREE]:Wa,[x.WGS84]:Oe,[x.WGS84_ECEF]:Ya},[x.GCSMARS2000]:{[x.CGCS2000]:null,[x.GCSMARS2000]:Oe,[x.GCSMOON2000]:null,[x.LON_LAT]:Oe,[x.SPHERICAL_ECEF]:null,[x.SPHERICAL_MARS_PCPF]:E2,[x.SPHERICAL_MOON_PCPF]:null,[x.UNKNOWN]:null,[x.WEB_MERCATOR]:null,[x.PLATE_CARREE]:null,[x.WGS84]:null,[x.WGS84_ECEF]:null},[x.GCSMOON2000]:{[x.CGCS2000]:null,[x.GCSMARS2000]:null,[x.GCSMOON2000]:Oe,[x.LON_LAT]:Oe,[x.SPHERICAL_ECEF]:null,[x.SPHERICAL_MARS_PCPF]:null,[x.SPHERICAL_MOON_PCPF]:$2,[x.UNKNOWN]:null,[x.WEB_MERCATOR]:null,[x.PLATE_CARREE]:null,[x.WGS84]:null,[x.WGS84_ECEF]:null},[x.WEB_MERCATOR]:{[x.CGCS2000]:sc,[x.GCSMARS2000]:null,[x.GCSMOON2000]:null,[x.LON_LAT]:sc,[x.SPHERICAL_ECEF]:D9,[x.SPHERICAL_MARS_PCPF]:null,[x.SPHERICAL_MOON_PCPF]:null,[x.UNKNOWN]:null,[x.WEB_MERCATOR]:Oe,[x.PLATE_CARREE]:j9,[x.WGS84]:sc,[x.WGS84_ECEF]:F9},[x.WGS84_ECEF]:{[x.CGCS2000]:Ka,[x.GCSMARS2000]:null,[x.GCSMOON2000]:null,[x.LON_LAT]:Ka,[x.SPHERICAL_ECEF]:J9,[x.SPHERICAL_MARS_PCPF]:null,[x.SPHERICAL_MOON_PCPF]:null,[x.UNKNOWN]:null,[x.WEB_MERCATOR]:Y9,[x.PLATE_CARREE]:G9,[x.WGS84]:Ka,[x.WGS84_ECEF]:Oe},[x.SPHERICAL_ECEF]:{[x.CGCS2000]:Ja,[x.GCSMARS2000]:null,[x.GCSMOON2000]:null,[x.LON_LAT]:Ja,[x.SPHERICAL_ECEF]:Oe,[x.SPHERICAL_MARS_PCPF]:null,[x.SPHERICAL_MOON_PCPF]:null,[x.UNKNOWN]:null,[x.WEB_MERCATOR]:q9,[x.PLATE_CARREE]:z9,[x.WGS84]:Ja,[x.WGS84_ECEF]:W9},[x.SPHERICAL_MARS_PCPF]:{[x.CGCS2000]:null,[x.GCSMARS2000]:x2,[x.GCSMOON2000]:null,[x.LON_LAT]:x2,[x.SPHERICAL_ECEF]:null,[x.SPHERICAL_MARS_PCPF]:Oe,[x.SPHERICAL_MOON_PCPF]:null,[x.UNKNOWN]:null,[x.WEB_MERCATOR]:null,[x.PLATE_CARREE]:null,[x.WGS84]:null,[x.WGS84_ECEF]:null},[x.SPHERICAL_MOON_PCPF]:{[x.CGCS2000]:null,[x.GCSMARS2000]:null,[x.GCSMOON2000]:M2,[x.LON_LAT]:M2,[x.SPHERICAL_ECEF]:null,[x.SPHERICAL_MARS_PCPF]:null,[x.SPHERICAL_MOON_PCPF]:Oe,[x.UNKNOWN]:null,[x.WEB_MERCATOR]:null,[x.PLATE_CARREE]:null,[x.WGS84]:null,[x.WGS84_ECEF]:null},[x.UNKNOWN]:{[x.CGCS2000]:null,[x.GCSMARS2000]:null,[x.GCSMOON2000]:null,[x.LON_LAT]:null,[x.SPHERICAL_ECEF]:null,[x.SPHERICAL_MARS_PCPF]:null,[x.SPHERICAL_MOON_PCPF]:null,[x.UNKNOWN]:Oe,[x.WEB_MERCATOR]:null,[x.PLATE_CARREE]:null,[x.WGS84]:null,[x.WGS84_ECEF]:null},[x.LON_LAT]:{[x.CGCS2000]:Oe,[x.GCSMARS2000]:Oe,[x.GCSMOON2000]:Oe,[x.LON_LAT]:Oe,[x.SPHERICAL_ECEF]:nc,[x.SPHERICAL_MARS_PCPF]:E2,[x.SPHERICAL_MOON_PCPF]:$2,[x.UNKNOWN]:null,[x.WEB_MERCATOR]:qa,[x.PLATE_CARREE]:Wa,[x.WGS84]:Oe,[x.WGS84_ECEF]:Ya},[x.PLATE_CARREE]:{[x.CGCS2000]:Za,[x.GCSMARS2000]:null,[x.GCSMOON2000]:null,[x.LON_LAT]:Za,[x.SPHERICAL_ECEF]:V9,[x.SPHERICAL_MARS_PCPF]:null,[x.SPHERICAL_MOON_PCPF]:null,[x.UNKNOWN]:null,[x.WEB_MERCATOR]:B9,[x.PLATE_CARREE]:Oe,[x.WGS84]:Za,[x.WGS84_ECEF]:H9}};function Gx(e,t){var r;return(r=L9(e,t))==null?void 0:r.projector}function L9(e,t){if(e==null||t==null)return null;if(Fi.source.spatialReference===e&&Fi.dest.spatialReference===t)return Fi;const r=T2(e,Fi.source),i=T2(t,Fi.dest);return r===x.UNKNOWN&&i===x.UNKNOWN?ct(e,t)?Fi.projector=Oe:Fi.projector=null:Fi.projector=N9[r][i],Fi}function T2(e,t){return e?t.spatialReference===e?t.spatialReferenceId:(t.spatialReference=e,"metersPerUnit"in t&&(t.metersPerUnit=Ni(e,1)),Rp(e)?t.spatialReferenceId=x.SPHERICAL_ECEF:Oo(e)?t.spatialReferenceId=x.WGS84:Pi(e)?t.spatialReferenceId=x.WEB_MERCATOR:uL(e)?t.spatialReferenceId=x.PLATE_CARREE:e.wkt===pL.wkt?t.spatialReferenceId=x.WGS84_ECEF:e.wkid===Po.CGCS2000?t.spatialReferenceId=x.CGCS2000:e.wkt===I_.wkt?t.spatialReferenceId=x.SPHERICAL_MARS_PCPF:e.wkt===R_.wkt?t.spatialReferenceId=x.SPHERICAL_MOON_PCPF:o3(e)?t.spatialReferenceId=x.GCSMARS2000:a3(e)?t.spatialReferenceId=x.GCSMOON2000:t.spatialReferenceId=x.UNKNOWN):x.UNKNOWN}function Oe(e,t,r,i){e!==r&&(r[i++]=e[t++],r[i++]=e[t++],r[i]=e[t])}function sc(e,t,r,i){r[i]=yl*(e[t]/$o),r[i+1]=yl*(zx-2*Math.atan(Math.exp(-e[t+1]/$o))),r[i+2]=e[t+2]}function D9(e,t,r,i){const s=e[t]/$o,n=zx-2*Math.atan(Math.exp(-e[t+1]/$o)),o=$o+e[t+2],a=Math.cos(n)*o;r[i]=Math.cos(s)*a,r[i+1]=Math.sin(s)*a,r[i+2]=Math.sin(n)*o}function F9(e,t,r,i){sc(e,t,r,i),Ya(r,i,r,i)}function U9(e,t,r,i,s){const n=.4999999*Math.PI,o=si(ml*e[t+1],-n,n),a=Math.sin(o);r[i++]=ml*e[t]*s.radius,r[i++]=s.halfSemiMajorAxis*Math.log((1+a)/(1-a)),r[i]=e[t+2]}function qa(e,t,r,i){U9(e,t,r,i,He)}function Wa(e,t,r,i){r[i]=e[t]*A2,r[i+1]=e[t+1]*A2,r[i+2]=e[t+2]}function Za(e,t,r,i){r[i]=e[t]*P2,r[i+1]=e[t+1]*P2,r[i+2]=e[t+2]}function j9(e,t,r,i){sc(e,t,r,i),Wa(r,i,r,i)}function G9(e,t,r,i){Ka(e,t,r,i),Wa(r,i,r,i)}function z9(e,t,r,i){Ja(e,t,r,i),Wa(r,i,r,i)}function V9(e,t,r,i){Za(e,t,r,i),nc(r,i,r,i)}function B9(e,t,r,i){Za(e,t,r,i),qa(r,i,r,i)}function H9(e,t,r,i){Za(e,t,r,i),Ya(r,i,r,i)}function dv(e,t,r,i,s){const n=s+e[t+2],o=ml*e[t+1],a=ml*e[t],l=Math.cos(o)*n;r[i]=Math.cos(a)*l,r[i+1]=Math.sin(a)*l,r[i+2]=Math.sin(o)*n}function $2(e,t,r,i){dv(e,t,r,i,gn.radius)}function E2(e,t,r,i){dv(e,t,r,i,Ei.radius)}function nc(e,t,r,i){dv(e,t,r,i,He.radius)}function pv(e,t,r,i,s){const n=e[t],o=e[t+1],a=e[t+2],l=Math.sqrt(n*n+o*o+a*a),h=KD(a/(l===0?1:l)),p=Math.atan2(o,n);r[i++]=yl*p,r[i++]=yl*h,r[i]=l-s}function M2(e,t,r,i){pv(e,t,r,i,gn.radius)}function x2(e,t,r,i){pv(e,t,r,i,Ei.radius)}function Ja(e,t,r,i){pv(e,t,r,i,He.radius)}function q9(e,t,r,i){Ja(e,t,r,i),qa(r,i,r,i)}function W9(e,t,r,i){Ja(e,t,r,i),Ya(r,i,r,i)}function Z9(e,t,r,i,s){const n=ml*e[t],o=ml*e[t+1],a=e[t+2],l=Math.sin(o),h=Math.cos(o),p=s.radius/Math.sqrt(1-s.eccentricitySquared*l*l);r[i++]=(p+a)*h*Math.cos(n),r[i++]=(p+a)*h*Math.sin(n),r[i++]=(p*(1-s.eccentricitySquared)+a)*l}function Ya(e,t,r,i){Z9(e,t,r,i,He)}function Ka(e,t,r,i){const s=k9,n=e[t],o=e[t+1],a=e[t+2];let l,h,p,f,m,y,_,v,w,b,M,$,E,P,O,L,k,z,B,K,ie;l=Math.abs(a),h=n*n+o*o,p=Math.sqrt(h),f=h+a*a,m=Math.sqrt(f),K=Math.atan2(o,n),y=a*a/f,_=h/f,P=s.a2/m,O=s.a3-s.a4/m,_>.3?(v=l/m*(1+_*(s.a1+P+y*O)/m),B=Math.asin(v),b=v*v,w=Math.sqrt(1-b)):(w=p/m*(1-y*(s.a5-P-_*O)/m),B=Math.acos(w),b=1-w*w,v=Math.sqrt(b)),M=1-He.eccentricitySquared*b,$=He.radius/Math.sqrt(M),E=s.a6*$,P=p-$*w,O=l-E*v,k=w*P+v*O,L=w*O-v*P,z=L/(E/M+k),B+=z,ie=k+L*z/2,a<0&&(B=-B),r[i++]=yl*K,r[i++]=yl*B,r[i]=ie}function J9(e,t,r,i){Ka(e,t,r,i),nc(r,i,r,i)}function Y9(e,t,r,i){Ka(e,t,r,i),qa(r,i,r,i)}const Fi={source:{spatialReference:null,spatialReferenceId:x.UNKNOWN,metersPerUnit:1},dest:{spatialReference:null,spatialReferenceId:x.UNKNOWN,metersPerUnit:1},projector:Oe},ml=Hf(1),yl=FM(1),zx=.5*Math.PI,$o=He.radius,A2=$o*Math.PI/180,P2=180/($o*Math.PI);function oh(e,t,r,i,s,n,o=Math.floor(e.length/3)){const a=Gx(t,s);if(a==null)return!1;if(a===Oe){if(e===i&&r===n)return!0;const h=r+3*o;for(let p=r,f=n;p<h;p++,f++)i[f]=e[p];return!0}const l=r+3*o;for(let h=r,p=n;h<l;h+=3,p+=3)a(e,h,i,p);return!0}const ete=Object.freeze(Object.defineProperty({__proto__:null,projectBuffer:oh},Symbol.toStringTag,{value:"Module"}));function O2(e,t,r,i,s,n){return jh[0]=e,jh[1]=t,jh[2]=r,oh(jh,i,0,s,n,0)}const jh=xn();let Gh=0,Xm=class Jg{static fromGE(t){const r=new Jg;return r._wkt=t.wkt,r._wkid=t.wkid,r._isInverse=t.isInverse,r}constructor(t){this.uid=Gh++,t?(this._wkt=t.wkt!=null?t.wkt:null,this._wkid=t.wkid!=null?t.wkid:-1,this._isInverse=t.isInverse!=null&&t.isInverse===!0):(this._wkt=null,this._wkid=-1,this._isInverse=!1)}get wkt(){return this._wkt}set wkt(t){this._wkt=t,this.uid=Gh++}get wkid(){return this._wkid}set wkid(t){this._wkid=t,this.uid=Gh++}get isInverse(){return this._isInverse}set isInverse(t){this._isInverse=t,this.uid=Gh++}getInverse(){const t=new Jg;return t._wkt=this.wkt,t._wkid=this._wkid,t._isInverse=!this.isInverse,t}},Bp=class fu{static cacheKey(t,r){var i,s,n,o,a,l;return[((i=t.wkid)==null?void 0:i.toString())??"-1",((s=t.wkt)==null?void 0:s.toString())??"",((n=t.wkt2)==null?void 0:n.toString())??"",((o=r.wkid)==null?void 0:o.toString())??"-1",((a=r.wkt)==null?void 0:a.toString())??"",((l=r.wkt2)==null?void 0:l.toString())??""].join()}static fromGE(t){const r=new fu;let i="";for(const s of t.steps){const n=Xm.fromGE(s);r.steps.push(n),i+=n.uid.toString()+","}return r._cachedProjection={},r._gtlistentry=null,r._chain=i,r}constructor(t){if(this.steps=[],this._cachedProjection={},this._chain="",this._gtlistentry=null,t==null?void 0:t.steps)for(const r of t.steps)r instanceof Xm?this.steps.push(r):this.steps.push(new Xm({wkid:r.wkid,wkt:r.wkt,isInverse:r.isInverse}))}getInverse(){const t=new fu;t.steps=[];for(let r=this.steps.length-1;r>=0;r--){const i=this.steps[r];t.steps.push(i.getInverse())}return t}getGTListEntry(){let t="";for(const r of this.steps)t+=r.uid.toString()+",";return t!==this._chain&&(this._gtlistentry=null,this._cachedProjection={},this._chain=t),this._gtlistentry}assignCachedGe(t,r,i){this._cachedProjection[fu.cacheKey(t,r)]=i}getCachedGeTransformation(t,r){let i="";for(const n of this.steps)i+=n.uid.toString()+",";i!==this._chain&&(this._gtlistentry=null,this._cachedProjection={},this._chain=i);const s=this._cachedProjection[fu.cacheKey(t,r)];return s===void 0?null:s}};function K9(e,t,r){if(t==null||r==null||r.vcsWkid||ct(t,r)||_n(t)||_n(r))return null;const i=ab(t)/ab(r);if(i===1)return null;switch(e){case"point":case"esriGeometryPoint":return s=>X9(s,i);case"polyline":case"esriGeometryPolyline":return s=>eF(s,i);case"polygon":case"esriGeometryPolygon":return s=>Q9(s,i);case"multipoint":case"esriGeometryMultipoint":return s=>tF(s,i);case"extent":case"esriGeometryEnvelope":return s=>rF(s,i);default:return null}}function X9(e,t){(e==null?void 0:e.z)!=null&&(e.z*=t)}function Q9(e,t){if(e)for(const r of e.rings)for(const i of r)i.length>2&&(i[2]*=t)}function eF(e,t){if(e)for(const r of e.paths)for(const i of r)i.length>2&&(i[2]*=t)}function tF(e,t){if(e)for(const r of e.points)r.length>2&&(r[2]*=t)}function rF(e,t){e&&e.zmin!=null&&e.zmax!=null&&(e.zmin*=t,e.zmax*=t)}let ti=null,Tn=null,oc=null,Pd={};const fv=new eh;function An(){return!!ti&&O_()}function Vx(){return!!An()||(J(fv),$n(),!1)}function Bx(e,t){return!e||!t||Ii(e,t)||Vx()}function iF(e,t){return!Ii(e,t)&&!An()}function $n(e){return oc==null&&(oc=Promise.all([QE(),N(()=>import("./geometryEngineBase-B0ZyeKAX.js"),__vite__mapDeps([41,3])).then(t=>t.g),N(()=>import("./hydrated-DC0vTnHB.js"),[])])),oc.then(([,t,{hydratedAdapter:r}])=>{Be(e),Tn=r,ti=t.default,ti._enableProjection(nL),fv.notify()})}function Bo(e,t,r=null,i=null){return Array.isArray(e)?e.length===0?[]:(NL(e),Yg(Tn,e,e[0].spatialReference,t,r,i)):(ul(e),Yg(Tn,[e],e.spatialReference,t,r,i)[0])}function Yg(e,t,r,i,s=null,n=null){if(r==null||i==null)return t;if(Ii(r,i,s))return t.map(o=>Od(o,r,i));if(s==null&&Rp(r))return t.map(o=>Od(o,r,le.WGS84)).map(o=>Ic(o,i));if(s==null&&Rp(i))return t.map(o=>Ic(o,le.WGS84)).map(o=>Od(o,le.WGS84,i));if(s==null){const o=Bp.cacheKey(r,i);Pd[o]!==void 0?s=Pd[o]:((s=qx(r,i,void 0))==null&&(s=new Bp),Pd[o]=s)}if(ti==null||e==null)throw new Jf;return n!=null?ti._project(e,t,r,i,s,n):ti._project(e,t,r,i,s)}function sF(e,t){const r=Hx([e],t);return r.pending!=null?{pending:r.pending,geometry:null}:r.geometries!=null?{pending:null,geometry:r.geometries[0]}:{pending:null,geometry:null}}function Hx(e,t){if(!An()){for(const r of e)if(r!=null&&!ct(r.spatialReference,t)&&sr(r.spatialReference)&&sr(t)&&!Ii(r.spatialReference,t))return J(fv),{pending:$n(),geometries:null}}return{pending:null,geometries:e.map(r=>r==null?null:ct(r.spatialReference,t)?r:sr(r.spatialReference)&&sr(t)?Ic(r,t):null)}}function qx(e,t,r=null){if(e==null||t==null)return null;if(ti==null||Tn==null)throw new Jf;const i=ti._getTransformation(Tn,e,t,r,r==null?void 0:r.spatialReference);return i!==null?Bp.fromGE(i):null}function nF(e,t,r=null){if(ti==null||Tn==null)throw new Jf;const i=ti._getTransformationBySuitability(Tn,e,t,r,r==null?void 0:r.spatialReference);if(i!==null){const s=[];for(const n of i)s.push(Bp.fromGE(n));return s}return[]}let Jf=class extends I{constructor(){super("projection:not-loaded","projection engine not fully loaded yet, please call load()")}};function oF(){ti=null,Tn=null,oc=null,Pd={}}const aF={get loadPromise(){return oc}};function Ic(e,t){try{const r=Bo(e,t);if(r==null)return null;"xmin"in e&&"xmin"in r&&(r.zmin=e.zmin,r.zmax=e.zmax);const i=K9(r.type,e.spatialReference,t);return i!=null&&i(r),r}catch(r){if(!(r instanceof Jf))throw r;return null}}async function lF(e,t,r){const i=e.spatialReference;return i!=null&&t!=null&&await Wx(i,t,null,r),Ic(e,t)}function Ii(e,t,r){return!r&&(!!ct(e,t)||sr(e)&&sr(t)&&!!Gx(e,t))}function uF(e,t){if(ct(e,t))return!0;if(!sr(e)||!sr(t))return!1;const r=Oo(e)||Pi(e)||nb(e),i=Oo(t)||Pi(t)||nb(t);return r&&i}async function Wx(e,t,r,i){if(An())return Nw(i);if(Array.isArray(e)){for(const{source:s,dest:n,geographicTransformation:o}of e)if(s&&n&&!Ii(s,n,o))return $n(i)}else if(e&&t&&!Ii(e,t,r))return $n(i);return Nw(i)}function Od(e,t,r){return e?"x"in e?Zx(e,t,new re,r,0):"xmin"in e?Xx(e,t,new De,r,0):"rings"in e?Kx(e,t,new Ci,r,0):"paths"in e?Yx(e,t,new Qr,r,0):"points"in e?Jx(e,t,new Wf,r,0):null:null}function cF(e,t,r=t.spatialReference,i=0){return r!=null&&e.spatialReference!=null&&Zx(e,e.spatialReference,t,r,i)!=null}function Zx(e,t,r,i,s){vt[0]=e.x,vt[1]=e.y;const n=e.z;return vt[2]=n!==void 0?n:s,oh(vt,t,0,vt,i,0)?(r.x=vt[0],r.y=vt[1],r.spatialReference=i,n!==void 0||_n(i)?(r.z=vt[2],r.hasZ=!0):(r.z=void 0,r.hasZ=!1),e.m===void 0?(r.m=void 0,r.hasM=!1):(r.m=e.m,r.hasM=!0),r):null}function hF(e,t,r=t.spatialReference,i=0){return e.spatialReference!=null&&r!=null&&Jx(e,e.spatialReference,t,r,i)!=null}function Jx(e,t,r,i,s){const{points:n,hasZ:o,hasM:a}=e,l=[],h=n.length,p=[];for(const m of n)p.push(m[0],m[1],o?m[2]:s);if(!oh(p,t,0,p,i,0,h))return null;const f=o||_n(i);for(let m=0;m<h;++m){const y=3*m,_=p[y],v=p[y+1];f&&a?l.push([_,v,p[y+2],n[m][3]]):f?l.push([_,v,p[y+2]]):a?l.push([_,v,n[m][2]]):l.push([_,v])}return r.points=l,r.spatialReference=i,r.hasZ=o,r.hasM=a,r}function dF(e,t,r=t.spatialReference,i=0){return e.spatialReference!=null&&r!=null&&Yx(e,e.spatialReference,t,r,i)!=null}function Yx(e,t,r,i,s){const{paths:n,hasZ:o,hasM:a}=e,l=[];if(!Qx(n,o??!1,a??!1,t,l,i,s))return null;const h=o||_n(i);return r.paths=l,r.spatialReference=i,r.hasZ=h,r.hasM=a,r}function pF(e,t,r=t.spatialReference,i=0){return e.spatialReference!=null&&r!=null&&Kx(e,e.spatialReference,t,r,i)!=null}function Kx(e,t,r,i,s){const{rings:n,hasZ:o,hasM:a}=e,l=[];if(!Qx(n,o??!1,a??!1,t,l,i,s))return null;const h=o||_n(i);return r.rings=l,r.spatialReference=i,r.hasZ=h,r.hasM=a,r}function fF(e,t,r=t.spatialReference,i=0){return e.spatialReference!=null&&r!=null&&Xx(e,e.spatialReference,t,r,i)!=null}function Xx(e,t,r,i,s){const{xmin:n,ymin:o,xmax:a,ymax:l,hasZ:h,hasM:p}=e,f=h?e.zmin:s;if(!O2(n,o,f,t,vt,i))return null;const m=h||_n(i);r.xmin=vt[0],r.ymin=vt[1],m&&(r.zmin=vt[2]);const y=h?e.zmax:s;return O2(a,l,y,t,vt,i)?(r.xmax=vt[0],r.ymax=vt[1],m&&(r.zmax=vt[2]),p&&(r.mmin=e.mmin,r.mmax=e.mmax),r.spatialReference=i,r):null}function Qx(e,t,r,i,s,n,o=0){const a=new Array;for(const p of e)for(const f of p)a.push(f[0],f[1],t?f[2]:o);if(!oh(a,i,0,a,n,0))return!1;let l=0;s.length=0;const h=t||_n(n);for(const p of e){const f=new Array;for(const m of p)h&&r?f.push([a[l++],a[l++],a[l++],m[3]]):h?f.push([a[l++],a[l++],a[l++]]):r?(f.push([a[l++],a[l++],m[2]]),l++):(f.push([a[l++],a[l++]]),l++);s.push(f)}return!0}const vt=xn(),rte=Object.freeze(Object.defineProperty({__proto__:null,canProjectWithoutEngine:Ii,getTransformation:qx,getTransformations:nF,initializeProjection:Wx,isEqualBaseGCS:uF,isLoaded:An,isLoadedOrLoad:Vx,isLoadedOrLoadFor:Bx,load:$n,project:Bo,projectExtent:fF,projectMany:Yg,projectMultipoint:hF,projectOrLoad:sF,projectOrLoadMany:Hx,projectPoint:cF,projectPolygon:pF,projectPolyline:dF,projectWithZConversion:lF,projectWithoutEngine:Od,requiresLoad:iF,test:aF,tryProjectWithZConversion:Ic,unload:oF},Symbol.toStringTag,{value:"Module"}));var Kg;let ci=Kg=class extends G{constructor(e){super(e),this.cols=null,this.level=0,this.levelValue=null,this.origin=null,this.resolution=0,this.rows=null,this.scale=0}clone(){return new Kg({cols:this.cols,level:this.level,levelValue:this.levelValue,resolution:this.resolution,rows:this.rows,scale:this.scale})}};c([d({json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],ci.prototype,"cols",void 0),c([d({type:$e,json:{write:!0}})],ci.prototype,"level",void 0),c([d({type:String,json:{write:!0}})],ci.prototype,"levelValue",void 0),c([d({json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],ci.prototype,"origin",void 0),c([d({type:Number,json:{write:!0}})],ci.prototype,"resolution",void 0),c([d({json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],ci.prototype,"rows",void 0),c([d({type:Number,json:{write:!0}})],ci.prototype,"scale",void 0),ci=Kg=c([S("esri.layers.support.LOD")],ci);const Xs=ci;let mF=class{constructor(t,r,i,s,n=void 0){this.id=t,this.level=r,this.row=i,this.col=s,this.extent=n}};var Rs;const C2=new it({PNG:"png",PNG8:"png8",PNG24:"png24",PNG32:"png32",JPEG:"jpg",JPG:"jpg",DIB:"dib",TIFF:"tiff",EMF:"emf",PS:"ps",PDF:"pdf",GIF:"gif",SVG:"svg",SVGZ:"svgz",Mixed:"mixed",MIXED:"mixed",LERC:"lerc",LERC2D:"lerc2d",RAW:"raw",pbf:"pbf"});let ht=Rs=class extends G{static create(e={}){const{resolutionFactor:t=1,scales:r,size:i=256,spatialReference:s=le.WebMercator,numLODs:n=24}=e;if(!sr(s)){const f=[];if(r)for(let m=0;m<r.length;m++){const y=r[m];f.push(new Xs({level:m,scale:y,resolution:y}))}else{let m=5e-4;for(let y=n-1;y>=0;y--)f.unshift(new Xs({level:y,scale:m,resolution:m})),m*=2}return new Rs({dpi:96,lods:f,origin:new re(0,0,s),size:[i,i],spatialReference:s})}const o=Rt(s),a=e.origin?new re({x:e.origin.x,y:e.origin.y,spatialReference:s}):new re(o?{x:o.origin[0],y:o.origin[1],spatialReference:s}:{x:0,y:0,spatialReference:s}),l=96,h=1/(Ni(s)*39.37*l),p=[];if(r)for(let f=0;f<r.length;f++){const m=r[f],y=m*h;p.push(new Xs({level:f,scale:m,resolution:y}))}else{let f=$l(s)?512/i*5916575275917094e-7:256/i*591657527591555e-6;const m=Math.ceil(n/t);p.push(new Xs({level:0,scale:f,resolution:f*h}));for(let y=1;y<m;y++){const _=f/2**t,v=_*h;p.push(new Xs({level:y,scale:_,resolution:v})),f=_}}return new Rs({dpi:l,lods:p,origin:a,size:[i,i],spatialReference:s})}constructor(e){super(e),this.dpi=96,this.format=null,this.origin=null,this.size=null,this.spatialReference=null}get isWrappable(){const{spatialReference:e,origin:t}=this;if(e&&t){const r=Rt(e);return e.isWrappable&&!!r&&Math.abs(r.origin[0]-t.x)<=r.dx}return!1}readOrigin(e,t){return re.fromJSON({spatialReference:t.spatialReference,...e})}set lods(e){let t=0,r=0;const i=[],s=this._levelToLOD={};e&&(t=-1/0,r=1/0,e.forEach(n=>{i.push(n.scale),t=n.scale>t?n.scale:t,r=n.scale<r?n.scale:r,s[n.level]=n})),this._set("scales",i),this._set("lods",e),this._initializeUpsampleLevels()}readSize(e,t){return[t.cols,t.rows]}writeSize(e,t){t.cols=e[0],t.rows=e[1]}zoomToScale(e){const t=this.scales;if(e<=0)return t[0];if(e>=t.length-1)return t[t.length-1];const r=Math.floor(e),i=r+1;return t[r]/(t[r]/t[i])**(e-r)}scaleToZoom(e){const t=this.scales,r=t.length-1;let i=0;for(;i<r;i++){const s=t[i],n=t[i+1];if(s<=e)return i;if(n===e)return i+1;if(s>e&&n<e)return i+Math.log(s/e)/Math.log(s/n)}return i}tileAt(e,t,r,i){const s=this.lodAt(e);if(!s)return null;let n,o;if(typeof t=="number")n=t,o=r;else if(ct(t.spatialReference,this.spatialReference))n=t.x,o=t.y,i=r;else{const h=Lf(t,this.spatialReference);if(h==null)return null;n=h.x,o=h.y,i=r}const a=s.resolution*this.size[0],l=s.resolution*this.size[1];return i||(i=new mF(null,0,0,0,It())),i.level=e,i.row=Math.floor((this.origin.y-o)/l+.001),i.col=Math.floor((n-this.origin.x)/a+.001),this.updateTileInfo(i),i}updateTileInfo(e,t=Rs.ExtrapolateOptions.NONE){let r=this.lodAt(e.level);if(!r&&t===Rs.ExtrapolateOptions.POWER_OF_TWO){const o=this.lods[this.lods.length-1];o.level<e.level&&(r=o)}if(!r)return;const i=e.level-r.level,s=r.resolution*this.size[0]/2**i,n=r.resolution*this.size[1]/2**i;e.id=`${e.level}/${e.row}/${e.col}`,e.extent||(e.extent=It()),e.extent[0]=this.origin.x+e.col*s,e.extent[1]=this.origin.y-(e.row+1)*n,e.extent[2]=e.extent[0]+s,e.extent[3]=e.extent[1]+n}upsampleTile(e){const t=this._upsampleLevels[e.level];return!(!t||t.parentLevel===-1)&&(e.level=t.parentLevel,e.row=Math.floor(e.row/t.factor+.001),e.col=Math.floor(e.col/t.factor+.001),this.updateTileInfo(e),!0)}getTileBounds(e,t){const r=this.lodAt(t.level);if(r==null)return null;const{resolution:i}=r,s=i*this.size[0],n=i*this.size[1];return e[0]=this.origin.x+t.col*s,e[1]=this.origin.y-(t.row+1)*n,e[2]=e[0]+s,e[3]=e[1]+n,e}lodAt(e){var t;return((t=this._levelToLOD)==null?void 0:t[e])??null}clone(){return Rs.fromJSON(this.write({}))}getCompatibleForVTL(e){if(this.size[0]!==this.size[1]||this.size[0]===256&&e===512)return null;const t=(this.size[0]===512&&e===256?-1:0)+(this.spatialReference.isGeographic?1:0);if(this.size[0]===e&&t===0)return this;const r=[],i=this.lods.length-t;for(let s=0;s<i;s++){const n=s+t,{scale:o,resolution:a}=n>=0?this.lods[n]:{scale:2*this.lods[0].scale,resolution:2*this.lods[0].resolution};r.push(new Xs({level:s,scale:o,resolution:a}))}return new Rs({size:[e,e],dpi:this.dpi,format:this.format,compressionQuality:this.compressionQuality,origin:this.origin,spatialReference:this.spatialReference,lods:r})}_initializeUpsampleLevels(){const e=this.lods;this._upsampleLevels=[];let t=null;for(let r=0;r<e.length;r++){const i=e[r];this._upsampleLevels[i.level]={parentLevel:t?t.level:-1,factor:t?t.resolution/i.resolution:0},t=i}}};c([d({type:Number,json:{write:!0}})],ht.prototype,"compressionQuality",void 0),c([d({type:Number,json:{write:!0}})],ht.prototype,"dpi",void 0),c([d({type:String,json:{read:C2.read,write:C2.write,origins:{"web-scene":{read:!1,write:!1}}}})],ht.prototype,"format",void 0),c([d({readOnly:!0})],ht.prototype,"isWrappable",null),c([d({type:re,json:{write:!0}})],ht.prototype,"origin",void 0),c([pe("origin")],ht.prototype,"readOrigin",null),c([d({type:[Xs],value:null,json:{write:!0}})],ht.prototype,"lods",null),c([d({readOnly:!0})],ht.prototype,"scales",void 0),c([d({cast:e=>Array.isArray(e)?e:typeof e=="number"?[e,e]:[256,256]})],ht.prototype,"size",void 0),c([pe("size",["rows","cols"])],ht.prototype,"readSize",null),c([ae("size",{cols:{type:$e},rows:{type:$e}})],ht.prototype,"writeSize",null),c([d({type:le,json:{write:!0}})],ht.prototype,"spatialReference",void 0),ht=Rs=c([S("esri.layers.support.TileInfo")],ht),function(e){var t;(t=e.ExtrapolateOptions||(e.ExtrapolateOptions={}))[t.NONE=0]="NONE",t[t.POWER_OF_TWO=1]="POWER_OF_TWO"}(ht||(ht={}));const yF=ht,Cd={widthBreakpoint:{getValue(e){const t=e.viewSize[0],r=e.breakpoints,i=this.values;return t<=r.xsmall?i.xsmall:t<=r.small?i.small:t<=r.medium?i.medium:t<=r.large?i.large:i.xlarge},values:{xsmall:"xsmall",small:"small",medium:"medium",large:"large",xlarge:"xlarge"},valueToClassName:{xsmall:"esri-view-width-xsmall esri-view-width-less-than-small esri-view-width-less-than-medium esri-view-width-less-than-large esri-view-width-less-than-xlarge",small:"esri-view-width-small esri-view-width-greater-than-xsmall esri-view-width-less-than-medium esri-view-width-less-than-large esri-view-width-less-than-xlarge",medium:"esri-view-width-medium esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-less-than-large esri-view-width-less-than-xlarge",large:"esri-view-width-large esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-greater-than-medium esri-view-width-less-than-xlarge",xlarge:"esri-view-width-xlarge esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-greater-than-medium esri-view-width-greater-than-large"}},heightBreakpoint:{getValue(e){const t=e.viewSize[1],r=e.breakpoints,i=this.values;return t<=r.xsmall?i.xsmall:t<=r.small?i.small:t<=r.medium?i.medium:t<=r.large?i.large:i.xlarge},values:{xsmall:"xsmall",small:"small",medium:"medium",large:"large",xlarge:"xlarge"},valueToClassName:{xsmall:"esri-view-height-xsmall esri-view-height-less-than-small esri-view-height-less-than-medium esri-view-height-less-than-large esri-view-height-less-than-xlarge",small:"esri-view-height-small esri-view-height-greater-than-xsmall esri-view-height-less-than-medium esri-view-height-less-than-large esri-view-height-less-than-xlarge",medium:"esri-view-height-medium esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-less-than-large esri-view-height-less-than-xlarge",large:"esri-view-height-large esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-greater-than-medium esri-view-height-less-than-xlarge",xlarge:"esri-view-height-xlarge esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-greater-than-medium esri-view-height-greater-than-large"}},orientation:{getValue(e){const t=e.viewSize,r=t[0],i=t[1],s=this.values;return i>=r?s.portrait:s.landscape},values:{portrait:"portrait",landscape:"landscape"},valueToClassName:{portrait:"esri-view-orientation-portrait",landscape:"esri-view-orientation-landscape"}}},Qm={xsmall:544,small:768,medium:992,large:1200};function gF(e){const t=e;return t&&t.xsmall<t.small&&t.small<t.medium&&t.medium<t.large}function ey(e,t){return t?Cd[e].valueToClassName[t].split(" "):[]}const _F=e=>{let t=class extends e{constructor(...r){super(...r),this.orientation=null,this.widthBreakpoint=null,this.heightBreakpoint=null,this.breakpoints=Qm}initialize(){this.addHandles(Q(()=>[this.breakpoints,this.size],()=>this._updateClassNames(),Tt))}destroy(){this.destroyed||this._removeActiveClassNames()}set breakpoints(r){if(r!==this._get("breakpoints")){if(!gF(r)){const i=JSON.stringify(Qm,null,2);console.warn("provided breakpoints are not valid, using defaults:"+i),r=Qm}this._set("breakpoints",{...r})}}_updateClassNames(){if(!this.container)return;const r=Ct.acquire(),i=Ct.acquire();let s,n=!1;for(s in Cd){const o=this[s],a=Cd[s].getValue({viewSize:this.size,breakpoints:this.breakpoints});o!==a&&(n=!0,this[s]=a,ey(s,o).forEach(l=>i.push(l)),ey(s,a).forEach(l=>r.push(l)))}n&&(this._applyClassNameChanges(r,i),Ct.release(r),Ct.release(i))}_applyClassNameChanges(r,i){const s=this.container;s&&(i.forEach(n=>s.classList.remove(n)),r.forEach(n=>s.classList.add(n)))}_removeActiveClassNames(){const r=this.container;if(!r)return;let i;for(i in Cd)ey(i,this[i]).forEach(s=>r.classList.remove(s))}};return c([d()],t.prototype,"breakpoints",null),c([d()],t.prototype,"orientation",void 0),c([d()],t.prototype,"widthBreakpoint",void 0),c([d()],t.prototype,"heightBreakpoint",void 0),t=c([S("esri.views.BreakpointsOwner")],t),t};function mv(e){return typeof e=="string"?document.getElementById(e):e??null}function I2(e,t){for(;;){const r=e.firstChild;if(!r)break;t.appendChild(r)}}let Eo=class extends W{constructor(){super(...arguments),this.updating=!1,this._handleId=0,this._scheduleHandleId=0,this._pendingPromises=new Set}destroy(){this.removeAll()}add(t,r,i={}){return this._installWatch(t,r,i,Q)}addWhen(t,r,i={}){return this._installWatch(t,r,i,Cr)}addOnCollectionChange(t,r,{initial:i=!1,final:s=!1}={}){const n=++this._handleId;return this.addHandles([wn(t,"after-changes",this._createSyncUpdatingCallback(),bn),wn(t,"change",r,{onListenerAdd:i?o=>r({added:o.toArray(),removed:[]}):void 0,onListenerRemove:s?o=>r({added:[],removed:o.toArray()}):void 0})],n),ce(()=>this.removeHandles(n))}addPromise(t){if(t==null)return t;const r=++this._handleId;this.addHandles(ce(()=>{this._pendingPromises.delete(t)&&(this._pendingPromises.size!==0||this.hasHandles(zh)||this._set("updating",!1))}),r),this._pendingPromises.add(t),this._set("updating",!0);const i=()=>this.removeHandles(r);return t.then(i,i),t}removeAll(){this._pendingPromises.clear(),this.removeAllHandles(),this._set("updating",!1)}_installWatch(t,r,i={},s){const n=++this._handleId;i.sync||this._installSyncUpdatingWatch(t,n);const o=s(t,r,i);return this.addHandles(o,n),ce(()=>this.removeHandles(n))}_installSyncUpdatingWatch(t,r){const i=this._createSyncUpdatingCallback(),s=Q(t,i,{sync:!0,equals:()=>!1});return this.addHandles(s,r),s}_createSyncUpdatingCallback(){return()=>{this.removeHandles(zh),++this._scheduleHandleId;const t=this._scheduleHandleId;this._get("updating")||this._set("updating",!0),this.addHandles(Xc(()=>{t===this._scheduleHandleId&&(this._set("updating",this._pendingPromises.size>0),this.removeHandles(zh))}),zh)}}};c([d({readOnly:!0})],Eo.prototype,"updating",void 0),Eo=c([S("esri.core.support.UpdatingHandles")],Eo);const zh=-42;/*!
 * @esri/arcgis-html-sanitizer - v4.1.0 - Tue Dec 03 2024 09:13:28 GMT-0500 (Eastern Standard Time)
 * Copyright (c) 2024 - Environmental Systems Research Institute, Inc.
 * Apache-2.0
 * 
 * js-xss
 * Copyright (c) 2012-2018 Zongmin Lei(雷宗民) <leizongmin@gmail.com>
 * http://ucdok.com
 * MIT License, see https://github.com/leizongmin/js-xss/blob/master/LICENSE for details
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Hp=function(){return Hp=Object.assign||function(t){for(var r,i=1,s=arguments.length;i<s;i++){r=arguments[i];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Hp.apply(this,arguments)},Xg={exports:{}},Fe={},Qg={exports:{}},Ho={};function eA(){var e={};return e["align-content"]=!1,e["align-items"]=!1,e["align-self"]=!1,e["alignment-adjust"]=!1,e["alignment-baseline"]=!1,e.all=!1,e["anchor-point"]=!1,e.animation=!1,e["animation-delay"]=!1,e["animation-direction"]=!1,e["animation-duration"]=!1,e["animation-fill-mode"]=!1,e["animation-iteration-count"]=!1,e["animation-name"]=!1,e["animation-play-state"]=!1,e["animation-timing-function"]=!1,e.azimuth=!1,e["backface-visibility"]=!1,e.background=!0,e["background-attachment"]=!0,e["background-clip"]=!0,e["background-color"]=!0,e["background-image"]=!0,e["background-origin"]=!0,e["background-position"]=!0,e["background-repeat"]=!0,e["background-size"]=!0,e["baseline-shift"]=!1,e.binding=!1,e.bleed=!1,e["bookmark-label"]=!1,e["bookmark-level"]=!1,e["bookmark-state"]=!1,e.border=!0,e["border-bottom"]=!0,e["border-bottom-color"]=!0,e["border-bottom-left-radius"]=!0,e["border-bottom-right-radius"]=!0,e["border-bottom-style"]=!0,e["border-bottom-width"]=!0,e["border-collapse"]=!0,e["border-color"]=!0,e["border-image"]=!0,e["border-image-outset"]=!0,e["border-image-repeat"]=!0,e["border-image-slice"]=!0,e["border-image-source"]=!0,e["border-image-width"]=!0,e["border-left"]=!0,e["border-left-color"]=!0,e["border-left-style"]=!0,e["border-left-width"]=!0,e["border-radius"]=!0,e["border-right"]=!0,e["border-right-color"]=!0,e["border-right-style"]=!0,e["border-right-width"]=!0,e["border-spacing"]=!0,e["border-style"]=!0,e["border-top"]=!0,e["border-top-color"]=!0,e["border-top-left-radius"]=!0,e["border-top-right-radius"]=!0,e["border-top-style"]=!0,e["border-top-width"]=!0,e["border-width"]=!0,e.bottom=!1,e["box-decoration-break"]=!0,e["box-shadow"]=!0,e["box-sizing"]=!0,e["box-snap"]=!0,e["box-suppress"]=!0,e["break-after"]=!0,e["break-before"]=!0,e["break-inside"]=!0,e["caption-side"]=!1,e.chains=!1,e.clear=!0,e.clip=!1,e["clip-path"]=!1,e["clip-rule"]=!1,e.color=!0,e["color-interpolation-filters"]=!0,e["column-count"]=!1,e["column-fill"]=!1,e["column-gap"]=!1,e["column-rule"]=!1,e["column-rule-color"]=!1,e["column-rule-style"]=!1,e["column-rule-width"]=!1,e["column-span"]=!1,e["column-width"]=!1,e.columns=!1,e.contain=!1,e.content=!1,e["counter-increment"]=!1,e["counter-reset"]=!1,e["counter-set"]=!1,e.crop=!1,e.cue=!1,e["cue-after"]=!1,e["cue-before"]=!1,e.cursor=!1,e.direction=!1,e.display=!0,e["display-inside"]=!0,e["display-list"]=!0,e["display-outside"]=!0,e["dominant-baseline"]=!1,e.elevation=!1,e["empty-cells"]=!1,e.filter=!1,e.flex=!1,e["flex-basis"]=!1,e["flex-direction"]=!1,e["flex-flow"]=!1,e["flex-grow"]=!1,e["flex-shrink"]=!1,e["flex-wrap"]=!1,e.float=!1,e["float-offset"]=!1,e["flood-color"]=!1,e["flood-opacity"]=!1,e["flow-from"]=!1,e["flow-into"]=!1,e.font=!0,e["font-family"]=!0,e["font-feature-settings"]=!0,e["font-kerning"]=!0,e["font-language-override"]=!0,e["font-size"]=!0,e["font-size-adjust"]=!0,e["font-stretch"]=!0,e["font-style"]=!0,e["font-synthesis"]=!0,e["font-variant"]=!0,e["font-variant-alternates"]=!0,e["font-variant-caps"]=!0,e["font-variant-east-asian"]=!0,e["font-variant-ligatures"]=!0,e["font-variant-numeric"]=!0,e["font-variant-position"]=!0,e["font-weight"]=!0,e.grid=!1,e["grid-area"]=!1,e["grid-auto-columns"]=!1,e["grid-auto-flow"]=!1,e["grid-auto-rows"]=!1,e["grid-column"]=!1,e["grid-column-end"]=!1,e["grid-column-start"]=!1,e["grid-row"]=!1,e["grid-row-end"]=!1,e["grid-row-start"]=!1,e["grid-template"]=!1,e["grid-template-areas"]=!1,e["grid-template-columns"]=!1,e["grid-template-rows"]=!1,e["hanging-punctuation"]=!1,e.height=!0,e.hyphens=!1,e.icon=!1,e["image-orientation"]=!1,e["image-resolution"]=!1,e["ime-mode"]=!1,e["initial-letters"]=!1,e["inline-box-align"]=!1,e["justify-content"]=!1,e["justify-items"]=!1,e["justify-self"]=!1,e.left=!1,e["letter-spacing"]=!0,e["lighting-color"]=!0,e["line-box-contain"]=!1,e["line-break"]=!1,e["line-grid"]=!1,e["line-height"]=!1,e["line-snap"]=!1,e["line-stacking"]=!1,e["line-stacking-ruby"]=!1,e["line-stacking-shift"]=!1,e["line-stacking-strategy"]=!1,e["list-style"]=!0,e["list-style-image"]=!0,e["list-style-position"]=!0,e["list-style-type"]=!0,e.margin=!0,e["margin-bottom"]=!0,e["margin-left"]=!0,e["margin-right"]=!0,e["margin-top"]=!0,e["marker-offset"]=!1,e["marker-side"]=!1,e.marks=!1,e.mask=!1,e["mask-box"]=!1,e["mask-box-outset"]=!1,e["mask-box-repeat"]=!1,e["mask-box-slice"]=!1,e["mask-box-source"]=!1,e["mask-box-width"]=!1,e["mask-clip"]=!1,e["mask-image"]=!1,e["mask-origin"]=!1,e["mask-position"]=!1,e["mask-repeat"]=!1,e["mask-size"]=!1,e["mask-source-type"]=!1,e["mask-type"]=!1,e["max-height"]=!0,e["max-lines"]=!1,e["max-width"]=!0,e["min-height"]=!0,e["min-width"]=!0,e["move-to"]=!1,e["nav-down"]=!1,e["nav-index"]=!1,e["nav-left"]=!1,e["nav-right"]=!1,e["nav-up"]=!1,e["object-fit"]=!1,e["object-position"]=!1,e.opacity=!1,e.order=!1,e.orphans=!1,e.outline=!1,e["outline-color"]=!1,e["outline-offset"]=!1,e["outline-style"]=!1,e["outline-width"]=!1,e.overflow=!1,e["overflow-wrap"]=!1,e["overflow-x"]=!1,e["overflow-y"]=!1,e.padding=!0,e["padding-bottom"]=!0,e["padding-left"]=!0,e["padding-right"]=!0,e["padding-top"]=!0,e.page=!1,e["page-break-after"]=!1,e["page-break-before"]=!1,e["page-break-inside"]=!1,e["page-policy"]=!1,e.pause=!1,e["pause-after"]=!1,e["pause-before"]=!1,e.perspective=!1,e["perspective-origin"]=!1,e.pitch=!1,e["pitch-range"]=!1,e["play-during"]=!1,e.position=!1,e["presentation-level"]=!1,e.quotes=!1,e["region-fragment"]=!1,e.resize=!1,e.rest=!1,e["rest-after"]=!1,e["rest-before"]=!1,e.richness=!1,e.right=!1,e.rotation=!1,e["rotation-point"]=!1,e["ruby-align"]=!1,e["ruby-merge"]=!1,e["ruby-position"]=!1,e["shape-image-threshold"]=!1,e["shape-outside"]=!1,e["shape-margin"]=!1,e.size=!1,e.speak=!1,e["speak-as"]=!1,e["speak-header"]=!1,e["speak-numeral"]=!1,e["speak-punctuation"]=!1,e["speech-rate"]=!1,e.stress=!1,e["string-set"]=!1,e["tab-size"]=!1,e["table-layout"]=!1,e["text-align"]=!0,e["text-align-last"]=!0,e["text-combine-upright"]=!0,e["text-decoration"]=!0,e["text-decoration-color"]=!0,e["text-decoration-line"]=!0,e["text-decoration-skip"]=!0,e["text-decoration-style"]=!0,e["text-emphasis"]=!0,e["text-emphasis-color"]=!0,e["text-emphasis-position"]=!0,e["text-emphasis-style"]=!0,e["text-height"]=!0,e["text-indent"]=!0,e["text-justify"]=!0,e["text-orientation"]=!0,e["text-overflow"]=!0,e["text-shadow"]=!0,e["text-space-collapse"]=!0,e["text-transform"]=!0,e["text-underline-position"]=!0,e["text-wrap"]=!0,e.top=!1,e.transform=!1,e["transform-origin"]=!1,e["transform-style"]=!1,e.transition=!1,e["transition-delay"]=!1,e["transition-duration"]=!1,e["transition-property"]=!1,e["transition-timing-function"]=!1,e["unicode-bidi"]=!1,e["vertical-align"]=!1,e.visibility=!1,e["voice-balance"]=!1,e["voice-duration"]=!1,e["voice-family"]=!1,e["voice-pitch"]=!1,e["voice-range"]=!1,e["voice-rate"]=!1,e["voice-stress"]=!1,e["voice-volume"]=!1,e.volume=!1,e["white-space"]=!1,e.widows=!1,e.width=!0,e["will-change"]=!1,e["word-break"]=!0,e["word-spacing"]=!0,e["word-wrap"]=!0,e["wrap-flow"]=!1,e["wrap-through"]=!1,e["writing-mode"]=!1,e["z-index"]=!1,e}function vF(e,t,r){}function wF(e,t,r){}var bF=/javascript\s*\:/img;function SF(e,t){return bF.test(t)?"":t}Ho.whiteList=eA();Ho.getDefaultWhiteList=eA;Ho.onAttr=vF;Ho.onIgnoreAttr=wF;Ho.safeAttrValue=SF;var TF={indexOf:function(e,t){var r,i;if(Array.prototype.indexOf)return e.indexOf(t);for(r=0,i=e.length;r<i;r++)if(e[r]===t)return r;return-1},forEach:function(e,t,r){var i,s;if(Array.prototype.forEach)return e.forEach(t,r);for(i=0,s=e.length;i<s;i++)t.call(r,e[i],i,e)},trim:function(e){return String.prototype.trim?e.trim():e.replace(/(^\s*)|(\s*$)/g,"")},trimRight:function(e){return String.prototype.trimRight?e.trimRight():e.replace(/(\s*$)/g,"")}},Vl=TF;function $F(e,t){e=Vl.trimRight(e),e[e.length-1]!==";"&&(e+=";");var r=e.length,i=!1,s=0,n=0,o="";function a(){if(!i){var p=Vl.trim(e.slice(s,n)),f=p.indexOf(":");if(f!==-1){var m=Vl.trim(p.slice(0,f)),y=Vl.trim(p.slice(f+1));if(m){var _=t(s,o.length,m,y,p);_&&(o+=_+"; ")}}}s=n+1}for(;n<r;n++){var l=e[n];if(l==="/"&&e[n+1]==="*"){var h=e.indexOf("*/",n+2);if(h===-1)break;n=h+1,s=n+1,i=!1}else l==="("?i=!0:l===")"?i=!1:l===";"?i||a():l===`
`&&a()}return Vl.trim(o)}var EF=$F,Vh=Ho,MF=EF;function R2(e){return e==null}function xF(e){var t={};for(var r in e)t[r]=e[r];return t}function tA(e){e=xF(e||{}),e.whiteList=e.whiteList||Vh.whiteList,e.onAttr=e.onAttr||Vh.onAttr,e.onIgnoreAttr=e.onIgnoreAttr||Vh.onIgnoreAttr,e.safeAttrValue=e.safeAttrValue||Vh.safeAttrValue,this.options=e}tA.prototype.process=function(e){if(e=e||"",e=e.toString(),!e)return"";var t=this,r=t.options,i=r.whiteList,s=r.onAttr,n=r.onIgnoreAttr,o=r.safeAttrValue,a=MF(e,function(l,h,p,f,m){var y=i[p],_=!1;if(y===!0?_=y:typeof y=="function"?_=y(f):y instanceof RegExp&&(_=y.test(f)),_!==!0&&(_=!1),f=o(p,f),!!f){var v={position:h,sourcePosition:l,source:m,isWhite:_};if(_){var w=s(p,f,v);return R2(w)?p+":"+f:w}else{var w=n(p,f,v);if(!R2(w))return w}}});return a};var AF=tA;(function(e,t){var r=Ho,i=AF;function s(o,a){var l=new i(a);return l.process(o)}t=e.exports=s,t.FilterCSS=i;for(var n in r)t[n]=r[n]})(Qg,Qg.exports);var yv=Qg.exports,gv={indexOf:function(e,t){var r,i;if(Array.prototype.indexOf)return e.indexOf(t);for(r=0,i=e.length;r<i;r++)if(e[r]===t)return r;return-1},forEach:function(e,t,r){var i,s;if(Array.prototype.forEach)return e.forEach(t,r);for(i=0,s=e.length;i<s;i++)t.call(r,e[i],i,e)},trim:function(e){return String.prototype.trim?e.trim():e.replace(/(^\s*)|(\s*$)/g,"")},spaceIndex:function(e){var t=/\s|\n|\t/,r=t.exec(e);return r?r.index:-1}},PF=yv.FilterCSS,OF=yv.getDefaultWhiteList,qp=gv;function rA(){return{a:["target","href","title"],abbr:["title"],address:[],area:["shape","coords","href","alt"],article:[],aside:[],audio:["autoplay","controls","crossorigin","loop","muted","preload","src"],b:[],bdi:["dir"],bdo:["dir"],big:[],blockquote:["cite"],br:[],caption:[],center:[],cite:[],code:[],col:["align","valign","span","width"],colgroup:["align","valign","span","width"],dd:[],del:["datetime"],details:["open"],div:[],dl:[],dt:[],em:[],figcaption:[],figure:[],font:["color","size","face"],footer:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],header:[],hr:[],i:[],img:["src","alt","title","width","height"],ins:["datetime"],li:[],mark:[],nav:[],ol:[],p:[],pre:[],s:[],section:[],small:[],span:[],sub:[],summary:[],sup:[],strong:[],strike:[],table:["width","border","align","valign"],tbody:["align","valign"],td:["width","rowspan","colspan","align","valign"],tfoot:["align","valign"],th:["width","rowspan","colspan","align","valign"],thead:["align","valign"],tr:["rowspan","align","valign"],tt:[],u:[],ul:[],video:["autoplay","controls","crossorigin","loop","muted","playsinline","poster","preload","src","height","width"]}}var iA=new PF;function CF(e,t,r){}function IF(e,t,r){}function RF(e,t,r){}function kF(e,t,r){}function sA(e){return e.replace(LF,"&lt;").replace(DF,"&gt;")}function NF(e,t,r,i){if(r=cA(r),t==="href"||t==="src"){if(r=qp.trim(r),r==="#")return"#";if(!(r.substr(0,7)==="http://"||r.substr(0,8)==="https://"||r.substr(0,7)==="mailto:"||r.substr(0,4)==="tel:"||r.substr(0,11)==="data:image/"||r.substr(0,6)==="ftp://"||r.substr(0,2)==="./"||r.substr(0,3)==="../"||r[0]==="#"||r[0]==="/"))return""}else if(t==="background"){if(Bh.lastIndex=0,Bh.test(r))return""}else if(t==="style"){if(k2.lastIndex=0,k2.test(r)||(N2.lastIndex=0,N2.test(r)&&(Bh.lastIndex=0,Bh.test(r))))return"";i!==!1&&(i=i||iA,r=i.process(r))}return r=hA(r),r}var LF=/</g,DF=/>/g,FF=/"/g,UF=/&quot;/g,jF=/&#([a-zA-Z0-9]*);?/gim,GF=/&colon;?/gim,zF=/&newline;?/gim,Bh=/((j\s*a\s*v\s*a|v\s*b|l\s*i\s*v\s*e)\s*s\s*c\s*r\s*i\s*p\s*t\s*|m\s*o\s*c\s*h\s*a):/gi,k2=/e\s*x\s*p\s*r\s*e\s*s\s*s\s*i\s*o\s*n\s*\(.*/gi,N2=/u\s*r\s*l\s*\(.*/gi;function nA(e){return e.replace(FF,"&quot;")}function oA(e){return e.replace(UF,'"')}function aA(e){return e.replace(jF,function(r,i){return i[0]==="x"||i[0]==="X"?String.fromCharCode(parseInt(i.substr(1),16)):String.fromCharCode(parseInt(i,10))})}function lA(e){return e.replace(GF,":").replace(zF," ")}function uA(e){for(var t="",r=0,i=e.length;r<i;r++)t+=e.charCodeAt(r)<32?" ":e.charAt(r);return qp.trim(t)}function cA(e){return e=oA(e),e=aA(e),e=lA(e),e=uA(e),e}function hA(e){return e=nA(e),e=sA(e),e}function VF(){return""}function BF(e,t){typeof t!="function"&&(t=function(){});var r=!Array.isArray(e);function i(o){return r?!0:qp.indexOf(e,o)!==-1}var s=[],n=!1;return{onIgnoreTag:function(o,a,l){if(i(o))if(l.isClosing){var h="[/removed]",p=l.position+h.length;return s.push([n!==!1?n:l.position,p]),n=!1,h}else return n||(n=l.position),"[removed]";else return t(o,a,l)},remove:function(o){var a="",l=0;return qp.forEach(s,function(h){a+=o.slice(l,h[0]),l=h[1]}),a+=o.slice(l),a}}}function HF(e){for(var t="",r=0;r<e.length;){var i=e.indexOf("<!--",r);if(i===-1){t+=e.slice(r);break}t+=e.slice(r,i);var s=e.indexOf("-->",i);if(s===-1)break;r=s+3}return t}function qF(e){var t=e.split("");return t=t.filter(function(r){var i=r.charCodeAt(0);return i===127?!1:i<=31?i===10||i===13:!0}),t.join("")}Fe.whiteList=rA();Fe.getDefaultWhiteList=rA;Fe.onTag=CF;Fe.onIgnoreTag=IF;Fe.onTagAttr=RF;Fe.onIgnoreTagAttr=kF;Fe.safeAttrValue=NF;Fe.escapeHtml=sA;Fe.escapeQuote=nA;Fe.unescapeQuote=oA;Fe.escapeHtmlEntities=aA;Fe.escapeDangerHtml5Entities=lA;Fe.clearNonPrintableCharacter=uA;Fe.friendlyAttrValue=cA;Fe.escapeAttrValue=hA;Fe.onIgnoreTagStripAll=VF;Fe.StripTagBody=BF;Fe.stripCommentTag=HF;Fe.stripBlankChar=qF;Fe.cssFilter=iA;Fe.getDefaultCSSWhiteList=OF;var Yf={},Qs=gv;function WF(e){var t=Qs.spaceIndex(e),r;return t===-1?r=e.slice(1,-1):r=e.slice(1,t+1),r=Qs.trim(r).toLowerCase(),r.slice(0,1)==="/"&&(r=r.slice(1)),r.slice(-1)==="/"&&(r=r.slice(0,-1)),r}function ZF(e){return e.slice(0,2)==="</"}function JF(e,t,r){var i="",s=0,n=!1,o=!1,a=0,l=e.length,h="",p="";e:for(a=0;a<l;a++){var f=e.charAt(a);if(n===!1){if(f==="<"){n=a;continue}}else if(o===!1){if(f==="<"){i+=r(e.slice(s,a)),n=a,s=a;continue}if(f===">"){i+=r(e.slice(s,n)),p=e.slice(n,a+1),h=WF(p),i+=t(n,i.length,h,p,ZF(p)),s=a+1,n=!1;continue}if(f==='"'||f==="'")for(var m=1,y=e.charAt(a-m);y.trim()===""||y==="=";){if(y==="="){o=f;continue e}y=e.charAt(a-++m)}}else if(f===o){o=!1;continue}}return s<e.length&&(i+=r(e.substr(s))),i}var YF=/[^a-zA-Z0-9\\_:.-]/gim;function KF(e,t){var r=0,i=0,s=[],n=!1,o=e.length;function a(m,y){if(m=Qs.trim(m),m=m.replace(YF,"").toLowerCase(),!(m.length<1)){var _=t(m,y||"");_&&s.push(_)}}for(var l=0;l<o;l++){var h=e.charAt(l),p,f;if(n===!1&&h==="="){n=e.slice(r,l),r=l+1,i=e.charAt(r)==='"'||e.charAt(r)==="'"?r:QF(e,l+1);continue}if(n!==!1&&l===i){if(f=e.indexOf(h,l+1),f===-1)break;p=Qs.trim(e.slice(i+1,f)),a(n,p),n=!1,l=f,r=l+1;continue}if(/\s|\n|\t/.test(h))if(e=e.replace(/\s|\n|\t/g," "),n===!1)if(f=XF(e,l),f===-1){p=Qs.trim(e.slice(r,l)),a(p),n=!1,r=l+1;continue}else{l=f-1;continue}else if(f=eU(e,l-1),f===-1){p=Qs.trim(e.slice(r,l)),p=L2(p),a(n,p),n=!1,r=l+1;continue}else continue}return r<e.length&&(n===!1?a(e.slice(r)):a(n,L2(Qs.trim(e.slice(r))))),Qs.trim(s.join(" "))}function XF(e,t){for(;t<e.length;t++){var r=e[t];if(r!==" ")return r==="="?t:-1}}function QF(e,t){for(;t<e.length;t++){var r=e[t];if(r!==" ")return r==="'"||r==='"'?t:-1}}function eU(e,t){for(;t>0;t--){var r=e[t];if(r!==" ")return r==="="?t:-1}}function tU(e){return e[0]==='"'&&e[e.length-1]==='"'||e[0]==="'"&&e[e.length-1]==="'"}function L2(e){return tU(e)?e.substr(1,e.length-2):e}Yf.parseTag=JF;Yf.parseAttr=KF;var rU=yv.FilterCSS,Kr=Fe,dA=Yf,iU=dA.parseTag,sU=dA.parseAttr,Id=gv;function Hh(e){return e==null}function nU(e){var t=Id.spaceIndex(e);if(t===-1)return{html:"",closing:e[e.length-2]==="/"};e=Id.trim(e.slice(t+1,-1));var r=e[e.length-1]==="/";return r&&(e=Id.trim(e.slice(0,-1))),{html:e,closing:r}}function oU(e){var t={};for(var r in e)t[r]=e[r];return t}function aU(e){var t={};for(var r in e)Array.isArray(e[r])?t[r.toLowerCase()]=e[r].map(function(i){return i.toLowerCase()}):t[r.toLowerCase()]=e[r];return t}function pA(e){e=oU(e||{}),e.stripIgnoreTag&&(e.onIgnoreTag&&console.error('Notes: cannot use these two options "stripIgnoreTag" and "onIgnoreTag" at the same time'),e.onIgnoreTag=Kr.onIgnoreTagStripAll),e.whiteList||e.allowList?e.whiteList=aU(e.whiteList||e.allowList):e.whiteList=Kr.whiteList,e.onTag=e.onTag||Kr.onTag,e.onTagAttr=e.onTagAttr||Kr.onTagAttr,e.onIgnoreTag=e.onIgnoreTag||Kr.onIgnoreTag,e.onIgnoreTagAttr=e.onIgnoreTagAttr||Kr.onIgnoreTagAttr,e.safeAttrValue=e.safeAttrValue||Kr.safeAttrValue,e.escapeHtml=e.escapeHtml||Kr.escapeHtml,this.options=e,e.css===!1?this.cssFilter=!1:(e.css=e.css||{},this.cssFilter=new rU(e.css))}pA.prototype.process=function(e){if(e=e||"",e=e.toString(),!e)return"";var t=this,r=t.options,i=r.whiteList,s=r.onTag,n=r.onIgnoreTag,o=r.onTagAttr,a=r.onIgnoreTagAttr,l=r.safeAttrValue,h=r.escapeHtml,p=t.cssFilter;r.stripBlankChar&&(e=Kr.stripBlankChar(e)),r.allowCommentTag||(e=Kr.stripCommentTag(e));var f=!1;r.stripIgnoreTagBody&&(f=Kr.StripTagBody(r.stripIgnoreTagBody,n),n=f.onIgnoreTag);var m=iU(e,function(y,_,v,w,b){var M={sourcePosition:y,position:_,isClosing:b,isWhite:Object.prototype.hasOwnProperty.call(i,v)},$=s(v,w,M);if(!Hh($))return $;if(M.isWhite){if(M.isClosing)return"</"+v+">";var E=nU(w),P=i[v],O=sU(E.html,function(L,k){var z=Id.indexOf(P,L)!==-1,B=o(v,L,k,z);return Hh(B)?z?(k=l(v,L,k,p),k?L+'="'+k+'"':L):(B=a(v,L,k,z),Hh(B)?void 0:B):B});return w="<"+v,O&&(w+=" "+O),E.closing&&(w+=" /"),w+=">",w}else return $=n(v,w,M),Hh($)?h(w):$},h);return f&&(m=f.remove(m)),m};var lU=pA;(function(e,t){var r=Fe,i=Yf,s=lU;function n(a,l){var h=new s(l);return h.process(a)}t=e.exports=n,t.filterXSS=n,t.FilterXSS=s,function(){for(var a in r)t[a]=r[a];for(var l in i)t[l]=i[l]}();function o(){return typeof self<"u"&&typeof DedicatedWorkerGlobalScope<"u"&&self instanceof DedicatedWorkerGlobalScope}o()&&(self.filterXSS=e.exports)})(Xg,Xg.exports);var Ko=Xg.exports,uU=function(e){if(typeof e!="object"||e===null||Object.prototype.toString.call(e)!=="[object Object]")return!1;var t=Object.getPrototypeOf(e);if(t===null)return!0;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t},cU=function(){function e(t,r){var i=this;this.arcgisWhiteList={a:["href","style","target"],abbr:["title"],article:["style"],aside:["style"],audio:["autoplay","controls","loop","muted","preload"],b:[],blockquote:["style"],br:[],code:["style"],dd:["style"],del:["style"],details:["open","style"],div:["align","aria-hidden","aria-label","style"],dl:["style"],dt:["style"],em:[],figcaption:["style"],figure:["style"],font:["color","face","size","style"],footer:["style"],h1:["style"],h2:["style"],h3:["style"],h4:["style"],h5:["style"],h6:["style"],header:["style"],hr:[],i:[],img:["alt","border","height","src","style","width"],li:[],main:["style"],mark:["style"],nav:["style"],ol:[],p:["style"],pre:["style"],section:["style"],source:["media","src","type"],span:["aria-hidden","aria-label","style"],strong:[],sub:["style"],summary:["style"],sup:["style"],table:["border","cellpadding","cellspacing","height","style","width"],tbody:[],tr:["align","height","style","valign"],td:["align","colspan","height","nowrap","rowspan","style","valign","width"],th:["align","colspan","height","nowrap","rowspan","style","valign","width"],time:["style"],u:[],ul:[],video:["autoplay","controls","height","loop","muted","poster","preload","width"]},this.arcgisCSSWhiteList=Hp(Hp({},Ko.getDefaultCSSWhiteList()),{"align-items":!0,"align-self":!0,flex:!0,"flex-basis":!0,"flex-direction":!0,"flex-flow":!0,"flex-grow":!0,"flex-shrink":!0,"flex-wrap":!0,float:!0,gap:!0,grid:!0,"grid-area":!0,"grid-auto-columns":!0,"grid-auto-flow":!0,"grid-auto-rows":!0,"grid-column":!0,"grid-column-end":!0,"grid-column-start":!0,"grid-row":!0,"grid-row-end":!0,"grid-row-start":!0,"grid-template":!0,"grid-template-areas":!0,"grid-template-columns":!0,"grid-template-rows":!0,"justify-content":!0,"justify-items":!0,"justify-self":!0,"line-height":!0,overflow:!0}),this.allowedProtocols=["http","https","mailto","iform","tel","flow","lfmobile","arcgis-navigator","arcgis-appstudio-player","arcgis-survey123","arcgis-collector","arcgis-workforce","arcgis-explorer","arcgis-trek2there","arcgis-quickcapture","mspbi","comgooglemaps","pdfefile","pdfehttp","pdfehttps","boxapp","boxemm","awb","awbs","gropen","radarscope"],this.arcgisFilterOptions={allowCommentTag:!0,safeAttrValue:function(n,o,a,l){return n==="a"&&o==="href"||(n==="img"||n==="source")&&o==="src"?i.sanitizeUrl(a):Ko.safeAttrValue(n,o,a,l)}},this._entityMap={"&":"&#x38;","<":"&#x3C;",">":"&#x3E;",'"':"&#x22;","'":"&#x27;","/":"&#x2F;"};var s;t&&!r?s=t:t&&r?(s=Object.create(this.arcgisFilterOptions),s.css={whiteList:this.arcgisCSSWhiteList},Object.keys(t).forEach(function(n){if(n==="whiteList")s.whiteList=i._extendObjectOfArrays([i.arcgisWhiteList,t.whiteList||{}]);else if(n==="css"){var o=t.css.whiteList;o!=null&&t.css instanceof Object&&Object.keys(o).forEach(function(a){return s.css.whiteList[a]=o[a]})}else s[n]=t[n]})):(s=Object.create(this.arcgisFilterOptions),s.whiteList=this.arcgisWhiteList,s.css={whiteList:this.arcgisCSSWhiteList}),this.xssFilterOptions=s,this._xssFilter=new Ko.FilterXSS(s)}return e.prototype.sanitize=function(t,r){switch(r===void 0&&(r={}),typeof t){case"number":return isNaN(t)||!isFinite(t)?null:t;case"boolean":return t;case"string":return this._xssFilter.process(t);case"object":return this._iterateOverObject(t,r);default:return r.allowUndefined&&typeof t>"u"?void 0:null}},e.prototype.sanitizeUrl=function(t,r){var i=(r??{}).isProtocolRequired,s=i===void 0?!0:i,n=this._trim(t.substring(0,t.indexOf(":"))),o=t==="/",a=/^#/.test(t),l=n&&this.allowedProtocols.indexOf(n.toLowerCase())>-1;return o||a||l?Ko.escapeAttrValue(t):!n&&!s?Ko.escapeAttrValue("https://".concat(t)):""},e.prototype.sanitizeHTMLAttribute=function(t,r,i,s){return typeof this.xssFilterOptions.safeAttrValue=="function"?this.xssFilterOptions.safeAttrValue(t,r,i,s):Ko.safeAttrValue(t,r,i,s)},e.prototype.validate=function(t,r){r===void 0&&(r={});var i=this.sanitize(t,r);return{isValid:t===i,sanitized:i}},e.prototype.encodeHTML=function(t){var r=this;return String(t).replace(/[&<>"'\/]/g,function(i){return r._entityMap[i]})},e.prototype.encodeAttrValue=function(t){var r=/^[a-zA-Z0-9]$/;return String(t).replace(/[\x00-\xFF]/g,function(i,s){return r.test(i)?i:"&#x".concat(Number(t.charCodeAt(s)).toString(16),";")})},e.prototype._extendObjectOfArrays=function(t){var r={};return t.forEach(function(i){Object.keys(i).forEach(function(s){Array.isArray(i[s])&&Array.isArray(r[s])?r[s]=r[s].concat(i[s]):r[s]=i[s]})}),r},e.prototype._iterateOverObject=function(t,r){var i=this;r===void 0&&(r={});try{var s=!1,n=void 0;if(Array.isArray(t))n=t.reduce(function(a,l){var h=i.validate(l,r);return h.isValid?a.concat([l]):(s=!0,a.concat([h.sanitized]))},[]);else if(uU(t)){var o=Object.keys(t);n=o.reduce(function(a,l){var h=t[l],p=i.validate(h,r);return p.isValid?a[l]=h:(s=!0,a[l]=p.sanitized),a},{})}else return r.allowUndefined&&typeof t>"u"?void 0:null;return s?n:t}catch{return null}},e.prototype._trim=function(t){return String.prototype.trim?t.trim():t.replace(/(^\s*)|(\s*$)/g,"")},e}();const Kf=new Map;function fA(){Kf.clear()}function hU(e){return Kf.get(e)}function dU(e,t){Kf.set(e,t)}function ty(e){Kf.delete(e)}function pU(...e){const t=Ct.acquire();for(let i=0;i<e.length;i++){const s=e[i],n=typeof s;if(n==="string")t.push(s);else if(Array.isArray(s))t.push.apply(t,s);else if(n==="object")for(const o in s)s[o]&&t.push(o)}const r=t.join(" ");return Ct.release(t),r}(()=>{const e=new Map,t=new ResizeObserver(i=>{var s;fA();for(const n of i)(s=e.get(n.target))==null||s(n)}),r=(i,s,n)=>(e.set(i,s),t.observe(i,n),ce(()=>{t.unobserve(i),e.delete(i)}));return(i,s,n)=>{let o=null;return Wc([Q(()=>typeof i=="function"?i():i,a=>{o==null||o.remove(),a&&(o=r(a,s,n))},Gt),ce(()=>o==null?void 0:o.remove())])}})();function fU(e){const t=e==null?void 0:e.closest("[dir]");return t!==null&&t instanceof HTMLElement&&t.dir==="rtl"||document.dir==="rtl"}function nte(e){const t="data-node-ref";this[e.getAttribute(t)]=null}function ote(e){const t="data-node-ref";this[e.getAttribute(t)]=e}const mU=["dd","dl","dt","h1","h2","h3","h4","h5","h6","sub","sup","animate","animatetransform","circle","clippath","defs","ellipse","g","image","line","lineargradient","marker","mask","path","pattern","polygon","polyline","radialgradient","rect","stop","svg","switch","symbol","text","textpath","tspan","use"],yU=mU.reduce((e,t)=>(e[t]=[],e),{}),gU=["align","alink","alt","bgcolor","border","cellpadding","cellspacing","class","color","cols","colspan","coords","d","dir","face","height","hspace","ismap","lang","marginheight","marginwidth","multiple","nohref","noresize","noshade","nowrap","ref","rel","rev","rows","rowspan","scrolling","shape","span","summary","tabindex","title","usemap","valign","value","vlink","vspace","width"],mA=new cU({whiteList:yU,onTagAttr:(e,t,r)=>{const i=`${t}="${r}"`;if(gU.includes(t))return i},stripIgnoreTag:!0,stripIgnoreTagBody:["script","style"]},!0);function _U(e){return e==="Enter"||e===" "}async function vU(e,t){await AR(Kc(t));const r=typeof e=="function"?e():e;r&&("setFocus"in r&&typeof r.setFocus=="function"?await r.setFocus():r instanceof HTMLElement&&r.focus())}const yA="http://www.w3.org/",Xf=`${yA}2000/svg`,gA=`${yA}1999/xlink`;let D2=[],_v=(e,t)=>{let r={};return Object.keys(e).forEach(i=>{r[i]=e[i]}),t&&Object.keys(t).forEach(i=>{r[i]=t[i]}),r},vv=(e,t)=>e.vnodeSelector===t.vnodeSelector&&(e.properties&&t.properties?e.properties.key===t.properties.key&&e.properties.bind===t.properties.bind:!e.properties&&!t.properties),_A=e=>{if(typeof e!="string")throw new Error("Style values must be strings")},wU=(e,t,r)=>{if(t.vnodeSelector!==""){for(let i=r;i<e.length;i++)if(vv(e[i],t))return i}return-1},ry=(e,t,r,i)=>{let s=e[t];if(s.vnodeSelector==="")return;let n=s.properties;if(!(n&&(n.key===void 0?n.bind:n.key))){for(let o=0;o<e.length;o++)if(o!==t){let a=e[o];if(vv(a,s))throw new Error(`${r.vnodeSelector} had a ${s.vnodeSelector} child ${i==="added"?i:"removed"}, but there is now more than one. You must add unique key properties to make them distinguishable.`)}}},bU=e=>{if(e.properties){let t=e.properties.enterAnimation;t&&t(e.domNode,e.properties)}},e0=[],t0=!1,vA=e=>{(e.children||[]).forEach(vA),e.properties&&e.properties.afterRemoved&&e.properties.afterRemoved.apply(e.properties.bind||e.properties,[e.domNode])},F2=()=>{t0=!1,e0.forEach(vA),e0.length=0},U2=e=>{e0.push(e),t0||(t0=!0,typeof window<"u"&&"requestIdleCallback"in window?window.requestIdleCallback(F2,{timeout:16}):setTimeout(F2,16))},j2=e=>{let t=e.domNode;if(e.properties){let r=e.properties.exitAnimation;if(r)return t.style.pointerEvents="none",void r(t,()=>{t.parentNode&&(t.parentNode.removeChild(t),U2(e))},e.properties)}t.parentNode&&(t.parentNode.removeChild(t),U2(e))},SU=(e,t,r)=>{if(!t)return;let i=r.eventHandlerInterceptor,s=Object.keys(t),n=s.length;for(let o=0;o<n;o++){let a=s[o],l=t[a];if(a==="className")throw new Error('Property "className" is not supported, use "class".');if(a==="class")i0(e,l,!0);else if(a==="classes"){let h=Object.keys(l),p=h.length;for(let f=0;f<p;f++){let m=h[f];l[m]&&e.classList.add(m)}}else if(a==="styles"){let h=Object.keys(l),p=h.length;for(let f=0;f<p;f++){let m=h[f],y=l[m];y&&(_A(y),r.styleApplyer(e,m,y))}}else if(a!=="key"&&l!=null){let h=typeof l;h==="function"?(a.lastIndexOf("on",0)===0&&(i&&(l=i(a,l,e,t)),a==="oninput"&&function(){let p=l;l=function(f){p.apply(this,[f]),f.target["oninput-value"]=f.target.value}}()),e[a]=l):r.namespace===Xf?a==="href"?e.setAttributeNS(gA,a,l):e.setAttribute(a,l):h==="string"&&a!=="value"?a==="innerHTML"?e[a]=mA.sanitize(l):r0(e)&&a in e?e[a]=l:e.setAttribute(a,l):e[a]=l}}};function r0(e){if(!(e instanceof Element&&e.tagName.includes("-")))return!1;const t=window.customElements.get(e.tagName.toLowerCase());return!!t&&e instanceof t}let Wp,TU=(e,t,r)=>{if(t)for(let i of t)ac(i,e,void 0,r)},wA=(e,t,r)=>{TU(e,t.children,r),t.text&&(e.textContent=t.text),SU(e,t.properties,r),t.properties&&t.properties.afterCreate&&t.properties.afterCreate.apply(t.properties.bind||t.properties,[e,r,t.vnodeSelector,t.properties,t.children])},ac=(e,t,r,i)=>{let s,n=0,o=e.vnodeSelector,a=t.ownerDocument;if(o==="")s=e.domNode=a.createTextNode(e.text),r!==void 0?t.insertBefore(s,r):t.appendChild(s);else{for(let l=0;l<=o.length;++l){let h=o.charAt(l);if(l===o.length||h==="."||h==="#"){let p=o.charAt(n-1),f=o.slice(n,l);p==="."?s.classList.add(f):p==="#"?s.id=f:(f==="svg"&&(i=_v(i,{namespace:Xf})),i.namespace!==void 0?s=e.domNode=a.createElementNS(i.namespace,f):(s=e.domNode=e.domNode||a.createElement(f),f==="input"&&e.properties&&e.properties.type!==void 0&&s.setAttribute("type",e.properties.type)),r!==void 0?t.insertBefore(s,r):s.parentNode!==t&&t.appendChild(s)),n=l+1}}wA(s,e,i)}},i0=(e,t,r)=>{t&&t.split(" ").forEach(i=>{i&&e.classList.toggle(i,r)})},$U=(e,t,r,i)=>{if(!r)return;let s=!1,n=Object.keys(r),o=n.length;for(let a=0;a<o;a++){let l=n[a],h=r[l],p=t[l];if(l==="class")p!==h&&(i0(e,p,!1),i0(e,h,!0));else if(l==="classes"){let f=e.classList,m=Object.keys(h),y=m.length;for(let _=0;_<y;_++){let v=m[_],w=!!h[v];w!==!!p[v]&&(s=!0,w?f.add(v):f.remove(v))}}else if(l==="styles"){let f=Object.keys(h),m=f.length;for(let y=0;y<m;y++){let _=f[y],v=h[_];v!==p[_]&&(s=!0,v?(_A(v),i.styleApplyer(e,_,v)):i.styleApplyer(e,_,""))}}else if(h||typeof p!="string"||(h=""),l!=="value"||r0(e)){if(h!==p){let f=typeof h;f==="function"&&i.eventHandlerInterceptor||(i.namespace===Xf?l==="href"?e.setAttributeNS(gA,l,h):e.setAttribute(l,h):f==="string"?l==="innerHTML"?e[l]=mA.sanitize(h):l==="role"&&h===""?e.removeAttribute(l):r0(e)&&l in e?e[l]=h:e.setAttribute(l,h):e[l]!==h&&(e[l]=h),s=!0)}}else{let f=e[l];f!==h&&(e["oninput-value"]?f===e["oninput-value"]:h!==p)&&(e[l]=h,e["oninput-value"]=void 0),h!==p&&(s=!0)}}return s},EU=(e,t,r,i,s)=>{if(r===i)return!1;i=i||D2;let n,o=(r=r||D2).length,a=i.length,l=0,h=0,p=!1;for(;h<a;){let f=l<o?r[l]:void 0,m=i[h];if(f!==void 0&&vv(f,m))p=Wp(f,m,s)||p,l++;else{let y=wU(r,m,l+1);if(y>=0){for(n=l;n<y;n++)j2(r[n]),ry(r,n,e,"removed");p=Wp(r[y],m,s)||p,l=y+1}else ac(m,t,l<o?r[l].domNode:void 0,s),bU(m),ry(i,h,e,"added")}h++}if(o>l)for(n=l;n<o;n++)j2(r[n]),ry(r,n,e,"removed");return p};Wp=(e,t,r)=>{let i=e.domNode,s=!1;if(e===t)return!1;let n=!1;if(t.vnodeSelector===""){if(t.text!==e.text){let o=i.ownerDocument.createTextNode(t.text);return i.parentNode.replaceChild(o,i),t.domNode=o,s=!0,s}t.domNode=i}else t.vnodeSelector.lastIndexOf("svg",0)===0&&(r=_v(r,{namespace:Xf})),e.text!==t.text&&(n=!0,t.text===void 0?i.removeChild(i.firstChild):i.textContent=t.text),t.domNode=i,n=EU(t,i,e.children,t.children,r)||n,n=$U(i,e.properties,t.properties,r)||n,t.properties&&t.properties.afterUpdate&&t.properties.afterUpdate.apply(t.properties.bind||t.properties,[i,r,t.vnodeSelector,t.properties,t.children]);return n&&t.properties&&t.properties.updateAnimation&&t.properties.updateAnimation(i,t.properties,e.properties),s};let qh=(e,t)=>({getLastRender:()=>e,update:r=>{if(e.vnodeSelector!==r.vnodeSelector)throw new Error("The selector for the root VNode may not be changed. (consider using dom.merge and add one extra level to the virtual DOM)");let i=e;e=r,Wp(i,r,t)},domNode:e.domNode});const MU={namespace:void 0,performanceLogger:()=>{},eventHandlerInterceptor:void 0,styleApplyer:(e,t,r)=>{t.charAt(0)==="-"?e.style.setProperty(t,r):e.style[t]=r}};let mu=e=>_v(MU,e),ln={append:(e,t,r)=>(r=mu(r),ac(t,e,void 0,r),qh(t,r)),insertBefore:(e,t,r)=>(r=mu(r),ac(t,e.parentNode,e,r),qh(t,r)),merge:(e,t,r)=>(r=mu(r),t.domNode=e,wA(e,t,r),qh(t,r)),replace:(e,t,r)=>(r=mu(r),ac(t,e.parentNode,e,r),e.parentNode.removeChild(e),qh(t,r))},bA,xU=(e,t)=>{let r=[];for(;e&&e!==t;)r.push(e),e=e.parentNode;return r};bA=Array.prototype.find?(e,t)=>e.find(t):(e,t)=>e.filter(t)[0];let AU=(e,t)=>{let r=e;return t.forEach(i=>{r=r&&r.children?bA(r.children,s=>s.domNode===i):void 0}),r},PU=(e,t,r)=>{let i=function(s){r("domEvent",s);let n=t(),o=xU(s.currentTarget,n.domNode);o.reverse();let a,l=AU(n.getLastRender(),o);return e.scheduleRender(),l&&(a=l.properties[`on${s.type}`].apply(l.properties.bind||this,arguments)),r("domEventProcessed",s),a};return(s,n,o,a)=>i},G2=e=>{let t,r,i=mu(e),s=i.performanceLogger,n=!0,o=!1,a=[],l=[],h=(f,m,y)=>{let _,v=()=>_;i.eventHandlerInterceptor=PU(t,v,s),_=f(m,y(),i),a.push(_),l.push(y)},p=()=>{if(r=void 0,n){n=!1,s("renderStart",void 0);for(let f=0;f<a.length;f++){let m=l[f]();s("rendered",void 0),a[f].update(m),s("patched",void 0)}s("renderDone",void 0),n=!0}};return t={renderNow:p,scheduleRender:()=>{r||o||(r=requestAnimationFrame(p))},stop:()=>{r&&(cancelAnimationFrame(r),r=void 0),o=!0},resume:()=>{o=!1,n=!0,t.scheduleRender()},append:(f,m)=>{h(ln.append,f,m)},insertBefore:(f,m)=>{h(ln.insertBefore,f,m)},merge:(f,m)=>{h(ln.merge,f,m)},replace:(f,m)=>{h(ln.replace,f,m)},detach:f=>{for(let m=0;m<l.length;m++)if(l[m]===f)return l.splice(m,1),a.splice(m,1)[0];throw new Error("renderFunction was not found")}},t},ks=class extends W{constructor(){super(...arguments),this.items=new H,this._watchUpdatingTracking=new Eo,this._callbacks=new Map,this._projector=G2(),this._hiddenProjector=G2()}get needsRender(){return this.items.length>0}get updating(){var t;return((t=this._watchUpdatingTracking)==null?void 0:t.updating)??!1}initialize(){const t=document.createElement("div");t.className="esri-overlay-surface",this._set("surface",t),this._hiddenSurface=document.createElement("div"),this._hiddenSurface.setAttribute("style","visibility: hidden;"),t.appendChild(this._hiddenSurface),this._watchUpdatingTracking.addOnCollectionChange(()=>this.items,r=>{for(const i of r.added){const s=()=>i.render();this._callbacks.set(i,s),this._projector.append(this.surface,s)}for(const i of r.removed){const s=this._projector.detach(this._callbacks.get(i));this.surface.removeChild(s.domNode),this._callbacks.delete(i)}})}addItem(t){this.items.add(t)}removeItem(t){this.items.remove(t)}destroy(){this.items.removeAll(),this._callbacks.forEach(t=>this._projector.detach(t)),this._callbacks=null,this._projector=null,this._watchUpdatingTracking.destroy()}render(){this._projector.renderNow()}computeBoundingRect(t){const r=this._hiddenSurface,i=this._hiddenProjector;let s;const n=()=>(s=t.render(),s);i.append(r,n),i.renderNow();const o={left:0,top:0,right:0,bottom:0};if(s!=null&&s.domNode){const a=s.domNode.getBoundingClientRect();o.left=a.left,o.top=a.top,o.right=a.right,o.bottom=a.bottom}for(i.detach(n);r.firstChild;)r.removeChild(r.firstChild);return o}overlaps(t,r){const i=this.computeBoundingRect(t),s=this.computeBoundingRect(r);return Math.max(i.left,s.left)<=Math.min(i.right,s.right)&&Math.max(i.top,s.top)<=Math.min(i.bottom,s.bottom)}get hasVisibleItems(){return this.items.some(t=>t.visible)}async prepare(){await document.fonts.load(this._fontString()).catch(()=>{})}renderCanvas(t,r){const i=!!(r!=null&&r.disableDecorations);if(!this.items.some(n=>n.visible&&!(i&&n.isDecoration)))return;const s=t.getContext("2d");s.save(),s.font=this._fontString(),this.items.forEach(n=>{i&&n.isDecoration||(s.save(),n.renderCanvas(s),s.restore())}),s.restore()}_fontString(){return`10px ${getComputedStyle(this.surface).fontFamily}`}};c([d({readOnly:!0})],ks.prototype,"surface",void 0),c([d({readOnly:!0})],ks.prototype,"items",void 0),c([d({readOnly:!0})],ks.prototype,"needsRender",null),c([d({readOnly:!0})],ks.prototype,"_watchUpdatingTracking",void 0),c([d({readOnly:!0})],ks.prototype,"updating",null),ks=c([S("esri.views.overlay.ViewOverlay")],ks);const z2=ks,iy=[0,0];function OU(e){const t=(e.ownerDocument||window.document).defaultView,r=e.getBoundingClientRect();return iy[0]=r.left+((t==null?void 0:t.pageXOffset)??0),iy[1]=r.top+((t==null?void 0:t.pageYOffset)??0),iy}function V2(e){e&&(e.textContent="",e.parentNode&&e.parentNode.removeChild(e))}function CU(e){const t=document.createElement("div");return e.appendChild(t),t}const Xo=16,Bl=750,IU=512,RU=2,kU=e=>{let t=class extends e{constructor(...r){super(...r),this._freqInfo={freq:Xo,time:Bl},this._overlayRenderTaskHandle=null,this.height=0,this.messagesCommon=null,this.overlay=null,this.position=null,this.resizing=!1,this.root=null,this.surface=null,this.suspended=!0,this.ui=null,this.userContent=null,this.width=0,this.widthBreakpoint=null,this.addHandles([Q(()=>this.cursor,i=>{const{surface:s}=this;s&&s.setAttribute("data-cursor",i)}),Q(()=>this.navigating,i=>{const{surface:s}=this;s&&s.setAttribute("data-navigating",i.toString())})])}initialize(){this.addHandles([Q(()=>this.ui,(r,i)=>this._handleUIChange(r,i),Tt),this.on("focus",()=>this.notifyChange("focused")),this.on("blur",()=>this.notifyChange("focused"))])}destroy(){var r;this.destroyed||((r=this.ui)==null||r.destroy(),this.container=null)}get container(){return this._get("container")??null}set container(r){const i=this._get("container"),s=mv(r);if(s||typeof r!="string"||U.getLogger(this).error("#container",`element with id '${r}' not found`),i===s)return;if(this._stopMeasuring(),i&&(i.classList.remove("esri-view"),this._overlayRenderTaskHandle&&(this._overlayRenderTaskHandle.remove(),this._overlayRenderTaskHandle=null),this.overlay&&(this.overlay.destroy(),this._set("overlay",null)),this.root&&(V2(this.root),this._set("root",null)),this.userContent&&(I2(this.userContent,i),V2(this.userContent),this._set("userContent",null))),!s)return this._set("width",0),this._set("height",0),this._set("position",null),this._set("suspended",!0),this._set("surface",null),void this._set("container",null);s.classList.add("esri-view");const n=document.createElement("div");n.className="esri-view-user-storage",I2(s,n),s.appendChild(n),this._set("userContent",n);const o=document.createElement("div");o.className="esri-view-root",s.insertBefore(o,s.firstChild),this._set("root",o);const a=document.createElement("div");a.className="esri-view-surface",a.setAttribute("role","application"),a.tabIndex=0,o.appendChild(a),this._set("surface",a);const l=new z2;o.appendChild(l.surface),this._set("overlay",l),this.addHandles(Q(()=>l.needsRender,h=>{h&&!this._overlayRenderTaskHandle?this._overlayRenderTaskHandle=il({render:()=>{var p;return(p=this.overlay)==null?void 0:p.render()}}):this._overlayRenderTaskHandle=Ie(this._overlayRenderTaskHandle)})),this.forceDOMReadyCycle(),this._set("container",s),this._startMeasuring()}get focused(){const r=document.activeElement===this.surface;return document.hasFocus()&&r}get size(){return[this.width,this.height]}blur(){var r;(r=this.surface)==null||r.blur()}focus(){var r;(r=this.surface)==null||r.focus()}pageToContainer(r,i,s){const n=this.position;return r-=n?n[0]:0,i-=n?n[1]:0,s?(s[0]=r,s[1]=i):s=[r,i],s}containerToPage(r,i,s){const n=this.position;return r+=n?n[0]:0,i+=n?n[1]:0,s?(s[0]=r,s[1]=i):s=[r,i],s}_handleUIChange(r,i){this.removeHandles("ui"),i&&i!==r&&i.destroy(),r&&(r.view=this,this.addHandles(Q(()=>this.root,s=>{r.container=s?CU(s):null},Tt),"ui")),this._set("ui",r)}_stopMeasuring(){this.removeHandles("measuring"),this._get("resizing")&&this._set("resizing",!1)}_startMeasuring(){const r=this._freqInfo;r.freq=Xo,r.time=Bl;const i=il({prepare:o=>{const a=this._measure(),l=this._freqInfo;if(l.time+=o.deltaTime,a&&(l.freq=Xo,this._get("resizing")||this._set("resizing",!0)),l.time<l.freq)return;l.time=0;const h=this._position();l.freq=h||a?Xo:Math.min(Bl,l.freq*RU),!a&&l.freq>=IU&&(i.pause(),this._get("resizing")&&this._set("resizing",!1))}}),s=new ResizeObserver(o=>{r.freq=Xo,r.time=Bl,i.resume()});this.container!=null&&s.observe(this.container);const n=ce(()=>s.disconnect());this.addHandles([Yc(window,"resize",()=>{r.freq=Xo,r.time=Bl,i.resume()}),n,i],"measuring"),this._measure(),this._position()}_measure(){const r=this.container,i=r?r.clientWidth:0,s=r?r.clientHeight:0;if(i===0||s===0)return this.suspended||this._set("suspended",!0),!1;const n=this.width,o=this.height;return i===n&&s===o?(this.suspended&&this._set("suspended",!1),!1):(this._set("width",i),this._set("height",s),this.suspended&&this._set("suspended",!1),this.emit("resize",{oldWidth:n,oldHeight:o,width:i,height:s}),!0)}_position(){const r=this.container,i=this.position,s=r&&OU(r);return!!s&&(!i||s[0]!==i[0]||s[1]!==i[1])&&(this._set("position",[s[0],s[1]]),!0)}forceDOMReadyCycle(){}};return c([d()],t.prototype,"container",null),c([d({readOnly:!0})],t.prototype,"focused",null),c([d({readOnly:!0})],t.prototype,"height",void 0),c([d()],t.prototype,"messagesCommon",void 0),c([d({type:z2})],t.prototype,"overlay",void 0),c([d({readOnly:!0})],t.prototype,"position",void 0),c([d({readOnly:!0})],t.prototype,"resizing",void 0),c([d({readOnly:!0})],t.prototype,"root",void 0),c([d({value:null,readOnly:!0})],t.prototype,"size",null),c([d({readOnly:!0})],t.prototype,"surface",void 0),c([d({readOnly:!0})],t.prototype,"suspended",void 0),c([d({nonNullable:!0})],t.prototype,"ui",void 0),c([d({readOnly:!0})],t.prototype,"userContent",void 0),c([d({readOnly:!0})],t.prototype,"width",void 0),c([d()],t.prototype,"widthBreakpoint",void 0),t=c([S("esri.views.DOMContainer")],t),t},NU=A("mac")?"Meta":"Control",LU=new Set(["Alt","Control","Meta","Shift","Ctrl","Primary"]),DU=e=>LU.has(e);let FU=class{constructor(t,r=[]){this.eventType=t,this.keyModifiers=r}matches(t){if(t.type!==this.eventType)return!1;if(this.keyModifiers.length===0)return!0;const r=t.modifiers;for(const i of this.keyModifiers)if(!r.has(i))return!1;return!0}},st=class{constructor(t){this._manager=null,this._incoming={},this._outgoing={},this._incomingEventMatches=null,this._incomingEventTypes=null,this._outgoingEventTypes=null,this._hasSideEffects=t}get incomingEventMatches(){if(!this._incomingEventMatches){this._incomingEventMatches=[];for(const t in this._incoming){const r=this._incoming[t];for(const i of r)this._incomingEventMatches.push(i.match)}}return this._incomingEventMatches}get incomingEventTypes(){return this._incomingEventTypes||(this._incomingEventTypes=this.incomingEventMatches.map(t=>t.eventType)),this._incomingEventTypes}get outgoingEventTypes(){return this._outgoingEventTypes||(this._outgoingEventTypes=Object.keys(this._outgoing)),this._outgoingEventTypes}get hasSideEffects(){return this._hasSideEffects}get hasPendingInputs(){return!1}onInstall(t){this._manager||(t.setEventCallback(r=>this._handleEvent(r)),t.setUninstallCallback(()=>this._onUninstall()),this._manager=t)}onUninstall(){}registerIncoming(t,r,i){let s;typeof r=="function"?(i=r,s=[]):s=r||[];const n=typeof t=="string"?new FU(t,s):t,o=()=>{this._incomingEventTypes=null,this._incomingEventMatches=null},a=p=>{const f=this._incoming[p.match.eventType];if(f){const m=f.indexOf(p);f.splice(m,1),o(),this._manager&&this._manager.updateDependencies()}},l=new UU(n,i,{onPause:a,onRemove:a,onResume:p=>{const f=this._incoming[p.match.eventType];f&&!f.includes(p)&&(f.push(p),o(),this._manager&&this._manager.updateDependencies())}});let h=this._incoming[n.eventType];return h||(h=[],this._incoming[n.eventType]=h),h.push(l),o(),this._manager&&this._manager.updateDependencies(),l}registerOutgoing(t){if(this._outgoing[t])throw new Error("There is already a callback registered for this outgoing InputEvent: "+t);const r=new jU(t,{onEmit:(i,s,n,o)=>{var a;(a=this._manager)==null||a.emit(i.eventType,s,n,o)},onRemove:i=>{var s;delete this._outgoing[i.eventType],(s=this._manager)==null||s.updateDependencies()}});return this._outgoing[t]=r,this._outgoingEventTypes=null,this._manager&&this._manager.updateDependencies(),r}startCapturingPointer(t){var r;(r=this._manager)==null||r.setPointerCapture(t,!0)}stopCapturingPointer(t){var r;(r=this._manager)==null||r.setPointerCapture(t,!1)}refreshHasPendingInputs(){var t;(t=this._manager)==null||t.refreshHasPendingInputs()}_onUninstall(){this._manager&&(this.onUninstall(),this._manager=null)}_handleEvent(t){var i;const r=this._incoming[t.type];if(r){for(const s of r)if(s.match.matches(t)&&((i=s.callback)==null||i.call(s,t),t.shouldStopPropagation()))break}}},UU=class{constructor(t,r,i){this.match=t,this._callback=r,this._handler=i}pause(){this._handler.onPause(this)}resume(){this._handler.onResume(this)}remove(){this._handler.onRemove(this)}get callback(){return this._callback}},jU=class{constructor(t,r){this.eventType=t,this._removed=!1,this._handler=r}emit(t,r,i){this._removed||this._handler.onEmit(this,t,r,i)}remove(){this._removed=!0,this._handler.onRemove(this)}},GU=class extends st{constructor(t){super(!0),this._onChange=t,this._value="mouse",this._x=null,this._y=null,this.registerIncoming("pointer-move",r=>this._update(r.data))}_update(t){const r=t.native.pointerType==="touch"?"touch":"mouse",{x:i,y:s}=t;r===this._value&&this._x===i&&this._y===s||(this._value=r,this._x=i,this._y=s,this._onChange(r,i,s))}},zU=class{constructor(t,r){this._observable=new eh,this._value=t,this._equalityFunction=r}get value(){return J(this._observable),this._value}set value(t){this._equalityFunction(t,this._value)||(this._value=t,this._observable.notify())}mutate(t){t(this._value),this._observable.notify()}};function gl(e,t=$$){return new zU(e,t)}let VU=class extends st{get multiTouchActive(){return this._multiTouchActive.value}constructor(){super(!0),this._activeTouchPointerIds=new Set,this._multiTouchActive=gl(!1),this._onPointerAdd=({data:t})=>{t.pointerType==="touch"&&(this._activeTouchPointerIds.add(t.native.pointerId),this._update())},this._onPointerRemove=({data:t})=>{t.pointerType==="touch"&&(this._activeTouchPointerIds.delete(t.native.pointerId),this._update())},this.registerIncoming("pointer-down",this._onPointerAdd),this.registerIncoming("pointer-up",this._onPointerRemove),this.registerIncoming("pointer-capture-lost",this._onPointerRemove),this.registerIncoming("pointer-cancel",this._onPointerRemove)}_update(){this._multiTouchActive.value=this._activeTouchPointerIds.size>1}},BU=class{constructor(t,r){this._owner=r,this._properties={},this._afterDispatchHandle=null;for(const i in t){const s=t[i],n=new B$(s,void 0,void 0,2,2);this._properties[i]={pool:n,acquired:[]}}this._afterDispatchHandle=zR(()=>this._release())}destroy(){this._afterDispatchHandle&&(this._afterDispatchHandle.remove(),this._afterDispatchHandle=null);for(const t in this._properties){const r=this._properties[t];for(const i of r.acquired)Fw(i)||r.pool.release(i);r.pool.destroy(),r.pool=null,r.acquired=null}this._properties=null,this._owner=null}get(t){const r=this._owner._get(t),i=this._properties[t];let s=i.pool.acquire();for(i.acquired.push(s);s===r;)i.acquired.push(s),s=i.pool.acquire();return s}_release(){for(const t in this._properties){const r=this._properties[t];let i=0;for(const s of r.acquired)Fw(s)?r.acquired[i++]=s:r.pool.release(s);r.acquired.length=i}}},yr=class extends W{constructor(t){super(t),this._pointerCaptures=new Map,this._nameToGroup={},this._handlers=[],this._handlersPriority=[],this._currentPropagation=null,this._updateDependenciesAfterPropagation=!1,this._sourceEvents=new Set,this._keyModifiers=new Set,this._activeKeyModifiers=new Set,this._stoppedPropagationEventIds=new Set,this.primaryKey=NU,this._latestPointerType="mouse",this._propertiesPool=new BU({latestPointerLocation:WU},this),this.latestPointerLocation=null,this._paused=!1,this.test={timestamp:void 0,hasCurrentPropagation:()=>!!this._currentPropagation}}initialize(){this.eventSource.onEventReceived=this._onEventReceived.bind(this),this._installRecognizers()}destroy(){const t=Object.keys(this._nameToGroup);for(const r of t)this.uninstallHandlers(r);this.eventSource.destroy(),this._currentPropagation=null,this._propertiesPool.destroy()}get hasPendingInputs(){return this._handlers.some(t=>t.handler.hasPendingInputs)}get latestPointerType(){return this._latestPointerType}get multiTouchActive(){return this._multiTouchHandler.multiTouchActive}get updating(){return this.hasPendingInputs||this._paused}installHandlers(t,r,i=hn.INTERNAL){if(this._nameToGroup[t]||r.length===0)return;const s={name:t,handlers:r.map(n=>({handler:n,active:!0,removed:!1,priorityIndex:0,groupPriority:i,eventCallback:null,uninstallCallback:null}))};this._nameToGroup[t]=s;for(let n=s.handlers.length-1;n>=0;n--){const o=s.handlers[n];this._handlers.push(o),o.handler.onInstall({updateDependencies:()=>{this.updateDependencies()},emit:(a,l,h,p,f)=>{this._emitInputEvent(o.priorityIndex+1,a,l,h,f,p)},setPointerCapture:(a,l)=>{this._setPointerCapture(s,o,a,l)},setEventCallback:a=>{o.eventCallback=a},setUninstallCallback:a=>{o.uninstallCallback=a},refreshHasPendingInputs:()=>{this.notifyChange("hasPendingInputs")}})}this.updateDependencies()}uninstallHandlers(t){const r=this._nameToGroup[t];r?(r.handlers.forEach(i=>{var s;i.removed=!0,(s=i.uninstallCallback)==null||s.call(i)}),delete this._nameToGroup[t],this._currentPropagation?this._currentPropagation.needsHandlerGarbageCollect=!0:this._garbageCollectRemovedHandlers()):U.getLogger(this).error("There is no InputHandler group registered under the name `"+t+"`")}hasHandlers(t){return this._nameToGroup[t]!==void 0}isModifierKeyDown(t){return this._activeKeyModifiers.has(t)}updateDependencies(){if(this._currentPropagation)return void(this._updateDependenciesAfterPropagation=!0);this._updateDependenciesAfterPropagation=!1;const t=new Set,r=new Set;this._handlersPriority=[];for(let i=this._handlers.length-1;i>=0;i--){const s=this._handlers[i];s.priorityIndex=i,this._handlersPriority.push(s)}this._handlersPriority=this._sortHandlersPriority(this._handlersPriority);for(let i=this._handlersPriority.length-1;i>=0;i--){const s=this._handlersPriority[i];s.priorityIndex=i;let n=s.handler.hasSideEffects;if(!n){for(const o of s.handler.outgoingEventTypes)if(t.has(o)){n=!0;break}}if(n)for(const o of s.handler.incomingEventMatches){t.add(o.eventType);for(const a of o.keyModifiers)DU(a)||r.add(a)}s.active=n}this._sourceEvents=t,this._keyModifiers=r,this._pointerCaptures.size>0&&this._sourceEvents.add("pointer-capture-lost"),this._keyModifiers.size>0&&(this._sourceEvents.add("key-down"),this._sourceEvents.add("key-up")),this.eventSource&&(this.eventSource.activeEvents=this._sourceEvents)}_setLatestPointer(t,r,i){this._latestPointerType=t;const s=this._get("latestPointerLocation");if(s==null||s.x!==r||s.y!==i){const n=this._propertiesPool.get("latestPointerLocation");n.x=r,n.y=i,this._set("latestPointerLocation",n)}}_onEventReceived(t,r){if(t==="pointer-capture-lost"){const n=r;this._pointerCaptures.delete(n.native.pointerId)}this._updateKeyModifiers(t,r);const i=this.test.timestamp!=null?this.test.timestamp:r.native?r.native.timestamp:void 0,s=r.native?r.native.cancelable:void 0;this._emitInputEventFromSource(t,r,i,s)}_updateKeyModifiers(t,r){if(!r)return;let i=!1;const s=()=>{i||(this._activeKeyModifiers=new Set(this._activeKeyModifiers),i=!0)},n=(a,l)=>{l&&!this._activeKeyModifiers.has(a)?(s(),this._activeKeyModifiers.add(a)):!l&&this._activeKeyModifiers.has(a)&&(s(),this._activeKeyModifiers.delete(a))};if(t==="key-down"||t==="key-up"){const a=r.key;this._keyModifiers.has(a)&&n(a,t==="key-down")}const o=r.native;n("Alt",!!(o!=null&&o.altKey)),n("Control",!!(o!=null&&o.ctrlKey)),n("Ctrl",!!(o!=null&&o.ctrlKey)),n("Shift",!!(o!=null&&o.shiftKey)),n("Meta",!!(o!=null&&o.metaKey)),n("Primary",this._activeKeyModifiers.has(this.primaryKey))}_installRecognizers(){this._latestPointerHandler=new GU((t,r,i)=>this._setLatestPointer(t,r,i)),this._multiTouchHandler=new VU,this.installHandlers("input-manager-logic",[this._latestPointerHandler,this._multiTouchHandler],hn.ALWAYS),this.recognizers.length>0&&this.installHandlers("default",this.recognizers,hn.INTERNAL)}_setPointerCapture(t,r,i,s){const n=t.name+"-"+r.priorityIndex,o=this._pointerCaptures.get(i.pointerId)||new Set;this._pointerCaptures.set(i.pointerId,o),s?(o.add(n),o.size===1&&this.eventSource&&this.eventSource.setPointerCapture(i,!0)):o.has(n)&&(o.delete(n),o.size===0&&(this._pointerCaptures.delete(i.pointerId),this.eventSource&&this.eventSource.setPointerCapture(i,!1)))}_garbageCollectRemovedHandlers(){this._handlers=this._handlers.filter(t=>!t.removed),this.updateDependencies()}_emitInputEventFromSource(t,r,i,s){this._emitInputEvent(0,t,r,i,s)}_emitInputEvent(t,r,i,s,n,o){const a=s!==void 0?s:this._currentPropagation?this._currentPropagation.timestamp:performance.now(),l=n!==void 0&&n,h={event:new HU(r,i,a,o||this._activeKeyModifiers,l),priorityIndex:t};this._currentPropagation?this._currentPropagation.events.push(h):this._doNewPropagation(h)}_doNewPropagation(t){this._currentPropagation={events:new Vp,currentHandler:null,needsHandlerGarbageCollect:!1,timestamp:t.event.timestamp},this._currentPropagation.events.push(t),this._continuePropagation()}_continuePropagation(){var r,i,s;this._paused=!1;const t=this._currentPropagation;if(t){for(;t.events.length>0;){const{event:n,priorityIndex:o}=t.events.pop(),a=(r=n.data)==null?void 0:r.eventId;if(!(a!=null&&this._stoppedPropagationEventIds.has(a)))for(t.currentHandler=this._handlersPriority[o];t.currentHandler;){if(t.currentHandler.removed)t.needsHandlerGarbageCollect=!0;else{if(t.currentHandler.active&&!n.shouldStopPropagation()&&((s=(i=t.currentHandler).eventCallback)==null||s.call(i,n)),n.shouldStopPropagation()){a!=null&&this._stoppedPropagationEventIds.add(a);break}if(n.shouldPausePropagation(()=>this._continuePropagation()))return void this._pausePropagation({event:n,priorityIndex:t.currentHandler.priorityIndex+1})}t.currentHandler=this._handlersPriority[t.currentHandler.priorityIndex+1]}}t.needsHandlerGarbageCollect&&this._garbageCollectRemovedHandlers(),this.hasPendingInputs||this._stoppedPropagationEventIds.clear(),this._currentPropagation=null,this._updateDependenciesAfterPropagation&&this.updateDependencies()}}_pausePropagation(t){const r=new Vp;r.push(t);const i=this._currentPropagation;if(i){for(;i.events.length;)r.push(i.events.pop());i.events=r,i.currentHandler=null,this._paused=!0}}_compareHandlerPriority(t,r){if(t.handler.hasSideEffects!==r.handler.hasSideEffects)return t.handler.hasSideEffects?1:-1;if(t.groupPriority!==r.groupPriority)return t.groupPriority>r.groupPriority?-1:1;for(const i of t.handler.incomingEventMatches)for(const s of r.handler.incomingEventMatches){if(i.eventType!==s.eventType)continue;const n=i.keyModifiers.filter(o=>s.keyModifiers.includes(o));if(n.length===i.keyModifiers.length!=(n.length===s.keyModifiers.length))return i.keyModifiers.length>s.keyModifiers.length?-1:1}return t.priorityIndex>r.priorityIndex?-1:1}_sortHandlersPriority(t){const r=[];for(const i of t){let s=0;for(;s<r.length&&this._compareHandlerPriority(i,r[s])>=0;)s++;r.splice(s,0,i)}return r}get debug(){const t=r=>{const i=this._setPointerCapture;this._setPointerCapture=()=>{},r(),this._setPointerCapture=i};return{injectEvent:(r,i)=>{t(()=>this._onEventReceived(r,i))},disablePointerCapture:t}}};c([d({readOnly:!0})],yr.prototype,"hasPendingInputs",null),c([d({constructOnly:!0})],yr.prototype,"eventSource",void 0),c([d({constructOnly:!0})],yr.prototype,"recognizers",void 0),c([d()],yr.prototype,"_latestPointerType",void 0),c([d()],yr.prototype,"latestPointerType",null),c([d()],yr.prototype,"multiTouchActive",null),c([d({readOnly:!0})],yr.prototype,"latestPointerLocation",void 0),c([d()],yr.prototype,"_paused",void 0),c([d({readOnly:!0})],yr.prototype,"updating",null),yr=c([S("esri.views.input.InputManager")],yr);let HU=class{constructor(t,r,i,s,n){this.type=t,this.data=r,this.timestamp=i,this.modifiers=s,this.cancelable=n,this._propagationState=en.NONE,this._resumeCallback=null}stopPropagation(){this._propagationState|=en.STOPPED}shouldStopPropagation(){return!!(this._propagationState&en.STOPPED)}async(t){this._propagationState|=en.PAUSED;const r=(i,s)=>{this._propagationState&=~en.PAUSED;const n=this._resumeCallback;if(this._resumeCallback=null,n&&n(),s)throw i;return i};return(typeof t=="function"?t():t).then(i=>r(i,!1),i=>r(i,!0))}shouldPausePropagation(t){return!!(this._propagationState&en.PAUSED)&&(this._resumeCallback=t,!0)}preventDefault(){this.data.native.preventDefault()}};var en;(function(e){e[e.NONE=0]="NONE",e[e.STOPPED=1]="STOPPED",e[e.PAUSED=2]="PAUSED"})(en||(en={}));const hn={ALWAYS:1,DEFAULT:0,TOOL:-1,WIDGET:-2,INTERNAL:-3};let qU=class{};const WU=qU;function As(e){return e!=null&&"open"in e&&"declaredClass"in e}function B2(e){return e!=null&&"declaredClass"in e&&"dockOptions"in e}const ZU=e=>{let t=class extends e{constructor(){super(...arguments),this._popupSetupTask=null,this.popup={},this.popupEnabled=!0}initialize(){this.addHandles([Q(()=>[this.ui,this.popup],([r,i],s)=>{const n="popup",o="manual";if(s){const[a,l]=s;a&&As(l)&&(l.view=null,B2(l)&&a.remove(l,n))}r&&As(i)&&(i.view=this,B2(i)&&r.add(i,{key:n,position:o,internal:!0}))},Tt),this.on("click",r=>{this.popup&&this.popupEnabled&&(r.pointerType!=="mouse"||r.button===0)&&(As(this.popup)?this.popup.viewModel.handleViewClick(r):r.async(async()=>{await this.setupPopup(),As(this.popup)&&!this.destroyed&&this.ready&&this.popupEnabled&&this.popup.viewModel.handleViewClick(r)}))},hn.WIDGET)]),Y_(()=>this.ready&&this.popupEnabled&&!this.updating).then(()=>{N(()=>import("./Popup-1Ai7KDI7.js").then(r=>r.P),__vite__mapDeps([193,1,194,9,195,196,197,198,199,151,141,200,18,201,115,66,202,104,105,140,203,58,116,204,36,205,206,207,111,10,11,208,209,59,33,34,35,210,94,92,93,12,45,50,95,211,212,53,213,5,15,214,16,17,215,216,217,218,219,220,13,221,222,223,224,225,130,226,227,228,229,230,231,232,233,14,234,235,19,20,236,237,238,239,240,241,242,243,244,245,28,246,247,248,249,148,250]))})}destroy(){this.destroyed||this.closePopup()}async openPopup(r){if(As(this.popup))return this.popup.open(r);try{if(await this.setupPopup(),!this.popup)return void U.getLogger(this).error(new I("view:null-popup","Popup is null and can't be opened"));this.popup.open(r)}catch{}}closePopup(){var r;(r=this._popupSetupTask)==null||r.abort(),As(this.popup)&&this.popup.close()}async fetchPopupFeatures(r,i){return await this.when(),this._popupHitsToFeatures(await this._getPopupHits(r,i),i)}async setupPopup(){var r;if((r=this._popupSetupTask)==null||r.abort(),this.popup&&!As(this.popup))return this._popupSetupTask=Rf(async i=>{const{default:s}=await N(()=>import("./Popup-1Ai7KDI7.js").then(o=>o.P),__vite__mapDeps([193,1,194,9,195,196,197,198,199,151,141,200,18,201,115,66,202,104,105,140,203,58,116,204,36,205,206,207,111,10,11,208,209,59,33,34,35,210,94,92,93,12,45,50,95,211,212,53,213,5,15,214,16,17,215,216,217,218,219,220,13,221,222,223,224,225,130,226,227,228,229,230,231,232,233,14,234,235,19,20,236,237,238,239,240,241,242,243,244,245,28,246,247,248,249,148,250]));if(Be(i),!this.popup||As(this.popup))return;const n=this.popup;delete n.open,delete n.close,this.popup=new s(n)}),this._popupSetupTask.promise}async _popupHitsToFeatures({location:r,hits:i},s){const n=[],o=[];let a=!1;const l=gR(s,A("popup-view-fetch-timeout")??YU),h=m=>{const y=new JU(m);return o.push(y),n.push(y.promise),y},p=m=>{const y=o.at(-1);return y&&y.layerView===m&&!a?y:h(m)};for(const m of i)"graphic"in m?(p(m.layerView).graphics.push(m.graphic),a=!1):(n.push(m.layerView.fetchPopupFeaturesAtLocation(m.mapPoint,l)),a=!0);o.map(m=>m.resolve(l));const f=yR(n).then(m=>m.filter(y=>!!y).flat());return{pendingFeatures:n,allGraphicsPromise:f,location:r}}async _getPopupHits(r,i){const{hits:s,location:n}=await this.popupHitTest(r);Be(i);const o=[];for(const a of s)if("graphic"in a){if(this._isValidPopupGraphic(a.graphic,i)){const l=this._isValidPopupGraphicsLayerView(a.layerView)?a.layerView:void 0;o.push({graphic:a.graphic,layerView:l})}}else this._isValidPopupLocationLayerView(a.layerView)&&o.push({mapPoint:a.mapPoint,layerView:a.layerView});return{hits:o,location:n}}_isValidPopupGraphic(r,i){return r&&!!r.getEffectivePopupTemplate(i==null?void 0:i.defaultPopupTemplateEnabled)}_isValidPopupGraphicsLayerView(r){return!r||(!("layer"in r)||!r.suspended)&&"fetchPopupFeaturesFromGraphics"in r}_isValidPopupLocationLayerView(r){return(!("layer"in r)||!r.suspended)&&"fetchPopupFeaturesAtLocation"in r}};return c([d()],t.prototype,"popup",void 0),c([d()],t.prototype,"popupEnabled",void 0),t=c([S("esri.views.PopupView")],t),t};let JU=class{constructor(t){this.layerView=t,this._resolver=Or(),this.graphics=[]}get promise(){return this._resolver.promise}resolve(t){const{layerView:r,graphics:i,_resolver:s}=this;if(!r)return s.resolve(i),s.promise;let n;return r.fetchPopupFeaturesFromGraphics(i,t).catch(o=>(n=o,null)).then(o=>{o?s.resolve(o):s.reject(n)}),s.promise}};const YU=5e3;let lc=class extends H{constructor(t){super(t),this.addHandles([this.on("before-add",r=>{r.item==null&&r.preventDefault()}),this.on("after-add",r=>this._own(r.item)),this.on("after-remove",r=>this._release(r.item))])}get owner(){return this._get("owner")}set owner(t){t!==this._get("owner")&&(this._releaseAll(),this._set("owner",t),this._ownAll())}_ownAll(){for(const t of this.items)this._own(t)}_releaseAll(){for(const t of this.items)this._release(t)}_createNewInstance(t){return this.itemType?new(H.ofType(this.itemType.Type))(t):new H(t)}};function H2(e,t){return{type:e,cast:ZE,set(r){const i=ys(r,this._get(t),e);i.owner=this,this._set(t,i)}}}c([d()],lc.prototype,"owner",null),lc=c([S("esri.core.support.OwningCollection")],lc);var yu;const Zp=Wt()({orthometric:"gravity-related-height",gravity_related_height:"gravity-related-height",ellipsoidal:"ellipsoidal"}),SA=Zp.jsonValues.slice();SI(SA,"orthometric");const uc=Wt()({meter:"meters",foot:"feet","us-foot":"us-feet","clarke-foot":"clarke-feet","clarke-yard":"clarke-yards","clarke-link":"clarke-links","sears-yard":"sears-yards","sears-foot":"sears-feet","sears-chain":"sears-chains","benoit-1895-b-chain":"benoit-1895-b-chains","indian-yard":"indian-yards","indian-1937-yard":"indian-1937-yards","gold-coast-foot":"gold-coast-feet","sears-1922-truncated-chain":"sears-1922-truncated-chains","50-kilometers":"50-kilometers","150-kilometers":"150-kilometers"});let Vr=yu=class extends G{constructor(e){super(e),this.heightModel="gravity-related-height",this.heightUnit="meters",this.vertCRS=null}writeHeightModel(e,t,r){return Zp.write(e,t,r)}readHeightModel(e,t,r){return Zp.read(e)||(r!=null&&r.messages&&r.messages.push(KU(e,{context:r})),null)}readHeightUnit(e,t,r){return uc.read(e)||(r!=null&&r.messages&&r.messages.push(q2(e,{context:r})),null)}readHeightUnitService(e,t,r){return k_(e)||uc.read(e)||(r!=null&&r.messages&&r.messages.push(q2(e,{context:r})),null)}readVertCRS(e,t){return t.vertCRS||t.ellipsoid||t.geoid}clone(){return new yu({heightModel:this.heightModel,heightUnit:this.heightUnit,vertCRS:this.vertCRS})}equals(e){return!!e&&(this===e||this.heightModel===e.heightModel&&this.heightUnit===e.heightUnit&&this.vertCRS===e.vertCRS)}static deriveUnitFromSR(e,t){const r=p3(t);return new yu({heightModel:e.heightModel,heightUnit:r??void 0,vertCRS:e.vertCRS})}write(e,t){return t={origin:"web-scene",...t},super.write(e,t)}static fromJSON(e){if(!e)return null;const t=new yu;return t.read(e,{origin:"web-scene"}),t}};function q2(e,t){return new ms("height-unit:unsupported",`Height unit of value '${e}' is not supported`,t)}function KU(e,t){return new ms("height-model:unsupported",`Height model of value '${e}' is not supported`,t)}c([d({type:Zp.apiValues,constructOnly:!0,json:{origins:{"web-scene":{type:SA,default:"ellipsoidal",write:{isRequired:!0}}}}})],Vr.prototype,"heightModel",void 0),c([ae("web-scene","heightModel")],Vr.prototype,"writeHeightModel",null),c([pe(["web-scene","service"],"heightModel")],Vr.prototype,"readHeightModel",null),c([d({type:uc.apiValues,constructOnly:!0,json:{origins:{"web-scene":{type:uc.jsonValues,write:{writer:uc.write,isRequired:!0}}}}})],Vr.prototype,"heightUnit",void 0),c([pe("web-scene","heightUnit")],Vr.prototype,"readHeightUnit",null),c([pe("service","heightUnit")],Vr.prototype,"readHeightUnitService",null),c([d({type:String,constructOnly:!0,json:{origins:{"web-scene":{write:!0}}}})],Vr.prototype,"vertCRS",void 0),c([pe("service","vertCRS",["vertCRS","ellipsoid","geoid"])],Vr.prototype,"readVertCRS",null),Vr=yu=c([S("esri.geometry.HeightModelInfo")],Vr);const Qf=Vr;let Jp=class extends lc{constructor(t){super(t),this.addHandles(this.on("before-add",r=>{r.item!=null&&r.item.parent===this.owner&&(U.getLogger(this).warn("Analysis inside the collection must be unique. Not adding this element again."),r.preventDefault())}))}_own(t){t.parent=this.owner}_release(t){t.parent=null}};Jp=c([S("esri.support.AnalysesCollection")],Jp);let sy;async function XU(){return sy==null&&(sy=N(()=>import("./WhereClauseCache-oCINyqyJ.js"),__vite__mapDeps([51,10,11,52,53])).then(e=>new e.WhereClauseCache(500,500))),sy}async function QU(e,t){const r=await XU(),i=r.get(e,t);if(i==null)throw r.getError(e,t);return i}function Ste(e,t){return e||(e=null),t||(t=null),e==="1=1"?t??e:t==="1=1"?e??t:e&&t?`(${e}) AND (${t})`:e??t}function Tte(e,t){return e||(e=null),t||(t=null),e==="1=1"||t==="1=1"||e===t?e==="1=1"?e:t:e&&t?`(${e}) OR (${t})`:e??t}function $te(e,t){return t.length===0?null:`${e} IN (${e7(t)})`}function e7(e){return e.map(t=>typeof t=="string"?t7(t):t).join(",")}function t7(e){return`'${e.replaceAll("'","''")}'`}function Ete(e){return typeof e=="number"}function Mte(e){return typeof e=="number"&&isFinite(e)&&Math.floor(e)===e}function xte(e){return typeof e=="boolean"}function ah(e){return typeof e=="string"||e instanceof String}function r7(e){return e==null||ah(e)}function Ate(e){return Array.isArray(e)}function i7(e){return(e==null?void 0:e.declaredClass)==="esri.Graphic"}function Pte(e){return e instanceof Date}const s7="HH:mm",n7="HH:mm:ss",o7="HH:mm:ss.SSS",a7=[o7,n7,s7,"TT"],l7="yyyy-MM-dd";function W2(e){if(!e||!ah(e))return null;const t=q.fromFormat(e,l7);return t.isValid?t:null}function Z2(e){return e&&ah(e)?jI(a7,t=>{const r=q.fromFormat(e,t);return r.isValid?r:null})??null:null}function J2(e){if(!e||!ah(e))return null;const t=q.fromISO(e);return t.isValid?t:null}var Yp;(function(e){e.VALUE_OUT_OF_RANGE="domain-validation-error::value-out-of-range",e.INVALID_CODED_VALUE="domain-validation-error::invalid-coded-value"})(Yp||(Yp={}));const TA=new Set(["integer","small-integer","big-integer","esriFieldTypeInteger","esriFieldTypeSmallInteger","esriFieldTypeBigInteger"]);function u7(e){return e!=null&&TA.has(e.type)}function $A(e){return e!=null&&(e.type==="date-only"||e.type==="esriFieldTypeDateOnly")}function EA(e){return e!=null&&(e.type==="timestamp-offset"||e.type==="esriFieldTypeTimestampOffset")}function MA(e){return e!=null&&(e.type==="time-only"||e.type==="esriFieldTypeTimeOnly")}const c7=new Set(["single","double","esriFieldTypeSingle","esriFieldTypeDouble"]);a_(TA,c7);function Ote(e,t){const r=e==null?void 0:e.domain;if(!r||r.type!=="range")return;const i="range"in r?r.range[0]:r.minValue,s="range"in r?r.range[1]:r.maxValue,n=u7(e);return $A(e)||MA(e)||EA(e)?{...h7(e,s,i),isInteger:n}:{min:i!=null&&typeof i=="number"?i:null,max:s!=null&&typeof s=="number"?s:null,rawMin:i,rawMax:s,isInteger:n}}function h7(e,t,r){var i,s,n,o,a,l;return $A(e)?{min:(i=W2(r))==null?void 0:i.toMillis(),max:(s=W2(t))==null?void 0:s.toMillis(),rawMin:r,rawMax:t}:MA(e)?{min:(n=Z2(r))==null?void 0:n.toMillis(),max:(o=Z2(t))==null?void 0:o.toMillis(),rawMin:r,rawMax:t}:EA(e)?{min:(a=J2(r))==null?void 0:a.toMillis(),max:(l=J2(t))==null?void 0:l.toMillis(),rawMin:r,rawMax:t}:{max:null,min:null}}function d7(e){if(!e)return;const t=e.match(p7);return t!=null&&t.groups?t.groups.doubleQuoted??t.groups.singleQuoted??t.groups.dotNotation:void 0}const p7=/^(\$feature\[(?:"(?<doubleQuoted>[^"]+)"|'(?<singleQuoted>[^']+)')\]|\$feature\.(?<dotNotation>[a-zA-Z_][a-zA-Z0-9_]*))$/i;function Cte(e){var t,r;return((r=(t=e.match(f7))==null?void 0:t[1])==null?void 0:r.replace(/\\'/g,"'"))??null}const f7=/^hash\(\$feature\['((\\'|[^'])+)'\]\) \* 8\.381e-8$/;let Si=class{};function m7(e){return e instanceof Vo?e===Si.instance:(e==null?void 0:e.toString().toLowerCase())==="unknown"}function Rte(e){return m7(e)?Si.instance:e}Si.instance=new cr("Etc/UTC");var Kp;(function(e){e.TimeZoneNotRecognized="TimeZoneNotRecognized"})(Kp||(Kp={}));const y7={[Kp.TimeZoneNotRecognized]:"Timezone identifier has not been recognized."};let g7=class xA extends Error{constructor(t,r){super(r_(y7[t],r)),this.declaredRootClass="esri.arcade.arcadedate.dateerror",Error.captureStackTrace&&Error.captureStackTrace(this,xA)}};function Qo(e,t,r){return e<t?e-t:e>r?e-r:0}function ea(e,t,r){return e<t?t:e>r?r:e}let Wh=class qe{constructor(t){this._date=t,this.declaredRootClass="esri.arcade.arcadedate"}static fromParts(t=0,r=1,i=1,s=0,n=0,o=0,a=0,l){if(isNaN(t)||isNaN(r)||isNaN(i)||isNaN(s)||isNaN(n)||isNaN(o)||isNaN(a))return null;const h=q.local(t,r).daysInMonth;let p=q.fromObject({day:ea(i,1,h),year:t,month:ea(r,1,12),hour:ea(s,0,23),minute:ea(n,0,59),second:ea(o,0,59),millisecond:ea(a,0,999)},{zone:In(l)});return p=p.plus({months:Qo(r,1,12),days:Qo(i,1,h),hours:Qo(s,0,23),minutes:Qo(n,0,59),seconds:Qo(o,0,59),milliseconds:Qo(a,0,999)}),new qe(p)}static get systemTimeZoneCanonicalName(){return Intl.DateTimeFormat().resolvedOptions().timeZone??"system"}static arcadeDateAndZoneToArcadeDate(t,r){const i=In(r);return t.isUnknownTimeZone||i===Si.instance?qe.fromParts(t.year,t.monthJS+1,t.day,t.hour,t.minute,t.second,t.millisecond,i):new qe(t._date.setZone(i))}static dateJSToArcadeDate(t){return new qe(q.fromJSDate(t,{zone:"system"}))}static dateJSAndZoneToArcadeDate(t,r="system"){const i=In(r);return new qe(q.fromJSDate(t,{zone:i}))}static unknownEpochToArcadeDate(t){return new qe(q.fromMillis(t,{zone:Si.instance}))}static unknownDateJSToArcadeDate(t){return new qe(q.fromMillis(t.getTime(),{zone:Si.instance}))}static epochToArcadeDate(t,r="system"){const i=In(r);return new qe(q.fromMillis(t,{zone:i}))}static dateTimeToArcadeDate(t){return new qe(t)}clone(){return new qe(this._date)}changeTimeZone(t){const r=In(t);return qe.dateTimeToArcadeDate(this._date.setZone(r))}static dateTimeAndZoneToArcadeDate(t,r){const i=In(r);return t.zone===Si.instance||i===Si.instance?qe.fromParts(t.year,t.month,t.day,t.hour,t.minute,t.second,t.millisecond,i):new qe(t.setZone(i))}static nowToArcadeDate(t){const r=In(t);return new qe(q.fromJSDate(new Date,{zone:r}))}static nowUTCToArcadeDate(){return new qe(q.utc())}get isSystem(){return this.timeZone==="system"||this.timeZone===qe.systemTimeZoneCanonicalName}equals(t){return this.isSystem&&t.isSystem?this.toNumber()===t.toNumber():this.isUnknownTimeZone===t.isUnknownTimeZone&&this._date.equals(t._date)}get isUnknownTimeZone(){return this._date.zone===Si.instance}get isValid(){return this._date.isValid}get hour(){return this._date.hour}get second(){return this._date.second}get day(){return this._date.day}get dayOfWeekISO(){return this._date.weekday}get dayOfWeekJS(){let t=this._date.weekday;return t>6&&(t=0),t}get millisecond(){return this._date.millisecond}get monthISO(){return this._date.month}get weekISO(){return this._date.weekNumber}get yearISO(){return this._date.weekYear}get monthJS(){return this._date.month-1}get year(){return this._date.year}get minute(){return this._date.minute}get zone(){return this._date.zone}get timeZoneOffset(){return this.isUnknownTimeZone?0:this._date.offset}get timeZone(){if(this.isUnknownTimeZone)return"unknown";if(this._date.zone.type==="system")return"system";const t=this.zone;return t.type==="fixed"?t.fixed===0?"UTC":t.formatOffset(0,"short"):t.name}stringify(){return JSON.stringify(this.toJSDate())}plus(t){return new qe(this._date.plus(t))}diff(t,r="milliseconds"){return this._date.diff(t._date,r)[r]}toISODate(){return this._date.toISODate()}toISOString(t){return t?this._date.toISO({suppressMilliseconds:!0,includeOffset:!this.isUnknownTimeZone}):this._date.toISO({includeOffset:!this.isUnknownTimeZone})}toISOTime(t,r){return this._date.toISOTime({suppressMilliseconds:t,includeOffset:r&&!this.isUnknownTimeZone})}toFormat(t,r){return this.isUnknownTimeZone&&(t=t.replaceAll("Z","")),this._date.toFormat(t,r)}toJSDate(){return this._date.toJSDate()}toSQLValue(){return this._date.toFormat("yyyy-LL-dd HH:mm:ss")}toSQLWithKeyword(){return`timestamp '${this.toSQLValue()}'`}toDateTime(){return this._date}toNumber(){return this._date.toMillis()}getTime(){return this._date.toMillis()}toUTC(){return new qe(this._date.toUTC())}toLocal(){return new qe(this._date.toLocal())}toString(){return this.toISOString(!0)}static fromReaderAsTimeStampOffset(t){if(!t)return null;const r=q.fromISO(t,{setZone:!0});return new qe(r)}};function In(e,t=!0){if(e instanceof Vo)return e;if(e.toLowerCase()==="system")return"system";if(e.toLowerCase()==="utc")return"UTC";if(e.toLowerCase()==="unknown")return Si.instance;if(/^[+-]?[0-9]{1,2}([:][0-9]{2})?$/.test(e)){const i=ft.parseSpecifier("UTC"+(e.startsWith("+")||e.startsWith("-")?"":"+")+e);if(i)return i}const r=cr.create(e);if(!r.isValid){if(t)throw new g7(Kp.TimeZoneNotRecognized);return null}return r}const _7=()=>U.getLogger("esri.support.arcadeOnDemand"),v7=["geometry","scale","timeProperties"];function kte(e,t){if(t!=null)for(const r of v7)t.hasArcadeDependency(r)&&e.add(r);return e}let ny;function AA(){return ny||(ny=(async()=>{const e=await N(()=>import("./arcadeUtils-C1og27Md.js"),__vite__mapDeps([251,252,253,254,212,53,64,49,45,12,50,59,52]));return{arcade:e.arcade,arcadeUtils:e,Dictionary:e.Dictionary,Feature:e.arcadeFeature,Voxel:e.Voxel}})()),ny}const Nte=(e,t,r)=>PA.create(e,t,r,null,["$feature","$view"],[]),Lte=(e,t,r,i)=>PA.create(e,t,r,i,["$feature","$view"],[]);let PA=class OA{constructor(t,r,i,s,n,o,a){this._dependencies=new Map,this.services=null,this.script=t,this.evaluate=s;const l=Array.isArray(o)?o:o==null?void 0:o.fields;this.fields=l??[],this._syntaxTree=i,this._arcade=r,this._arcadeFeature=n,this._spatialReference=a,this._dependencies.set("geometry",r.scriptTouchesGeometry(this._syntaxTree)),this._dependencies.set("scale",this._arcade.referencesMember(this._syntaxTree,"scale")),this._dependencies.set("timeProperties",this._arcade.scriptUsesViewProperties(this._syntaxTree,["timeProperties"]))}static async create(t,r,i,s,n,o){const{arcade:a,Feature:l,Dictionary:h}=await AA(),p=r instanceof le?r:le.fromJSON(r);let f;try{f=a.parseScript(t,o)}catch(k){return _7().error(new I("arcade-bad-expression","Failed to parse arcade script",{script:t,error:k})),null}const m=n.reduce((k,z)=>({...k,[z]:null}),{});let y=null;s!=null&&(y=new h(s),y.immutable=!0,m.$config=null);const _=a.scriptUsesGeometryEngine(f),v=_&&a.enableGeometrySupport(),w=a.scriptUsesFeatureSet(f)&&a.enableFeatureSetSupport(),b=a.scriptIsAsync(f),M=b&&a.enableAsyncSupport(),$={vars:m,spatialReference:p,useAsync:!!M};await Promise.all([v,w,M]);const E=new Set;await a.loadDependentModules(E,f,null,b,_);const P=new h;P.immutable=!1,P.setField("scale",0);const O=a.compileScript(f,$),L=(k,z)=>{var K;const B=(K=k.$view)==null?void 0:K.timeZone;if("$view"in k&&k.$view){let ie;if(P.setField("scale",typeof k.$view=="object"&&"scale"in k.$view?k.$view.scale:void 0),typeof k.$view=="object"&&"timeProperties"in k.$view&&k.$view.timeProperties!=null){const{currentStart:we,currentEnd:X}=k.$view.timeProperties;ie=new h({currentStart:we!=null?B!=null?Wh.epochToArcadeDate(we,B):Wh.unknownEpochToArcadeDate(we):void 0,currentEnd:X!=null?B!=null?Wh.epochToArcadeDate(X,B):Wh.unknownEpochToArcadeDate(X):void 0,startIncluded:!0,endIncluded:!0})}P.setField("timeProperties",ie),k.$view=P}return y&&(k.$config=y),O({vars:k,spatialReference:p,services:z,timeZone:B})};return new OA(t,a,f,L,new l,i,p)}repurposeFeature(t){return t.geometry&&!t.geometry.spatialReference&&(t.geometry.spatialReference=this._spatialReference),this._arcadeFeature.repurposeFromGraphicLikeObject(t.geometry,t.attributes,{fields:this.fields}),this._arcadeFeature}references(t){return this._dependencies.get(t)??!1}};const w7=/^([0-9_])/,b7=/[^a-z0-9_\u0080-\uffff]+/gi;function Dte(e){return e==null?null:e.trim().replaceAll(b7,"_").replace(w7,"F$1")||null}const S7=["field","field2","field3","normalizationField","rotationInfo.field","proportionalSymbolInfo.field","proportionalSymbolInfo.normalizationField","colorInfo.field","colorInfo.normalizationField"],T7=["field","normalizationField"];function Fte(e,t){if(e!=null&&t!=null){for(const r of Array.isArray(e)?e:[e])if(Y2(S7,r,t),"visualVariables"in r&&r.visualVariables)for(const i of r.visualVariables)Y2(T7,i,t)}}function Y2(e,t,r){if(e)for(const i of e){const s=wf(i,t),n=s&&typeof s!="function"&&r.get(s);n&&wl(i,n.name,t)}}function Ute(e,t){var r;if(e!=null&&((r=t==null?void 0:t.fields)!=null&&r.length))if("startField"in e){const i=t.get(e.startField),s=t.get(e.endField);e.startField=(i==null?void 0:i.name)??null,e.endField=(s==null?void 0:s.name)??null}else{const i=t.get(e.startTimeField),s=t.get(e.endTimeField);e.startTimeField=(i==null?void 0:i.name)??null,e.endTimeField=(s==null?void 0:s.name)??null}}const oy=new Set;function wv(e,t){return e&&t?(oy.clear(),Rc(oy,e,t),Array.from(oy).sort()):[]}function Rc(e,t,r){var i;if(r)if((i=t==null?void 0:t.fields)!=null&&i.length)if(r.includes("*"))for(const{name:s}of t.fields)e.add(s);else for(const s of r)em(e,t,s);else{if(r.includes("*"))return e.clear(),void e.add("*");for(const s of r)s!=null&&e.add(s)}}function em(e,t,r){if(typeof r=="string")if(t){const i=t.get(r);i&&e.add(i.name)}else e.add(r)}function jte(e,t){return t==null||e==null?[]:t.includes("*")?(e.fields??[]).map(r=>r.name):t}function Gte(e,t,r=1){if(!t||!e)return[];if(t.includes("*"))return["*"];const i=wv(e,t);return i.length/e.fields.length>=r?["*"]:i}async function Lo(e,t,r){var n;if(!r)return;let i;const s=d7(r);if(s)i=[s];else{const{arcadeUtils:o}=await AA();i=o.extractFieldNames(r,(n=t==null?void 0:t.fields)==null?void 0:n.map(a=>a.name))}for(const o of i)em(e,t,o)}async function bv(e,t,r){if(r&&r!=="1=1"){const i=await QU(r,t);if(!i.isStandardized)throw new I("fieldUtils:collectFilterFields","Where clause is not standardized",{where:r});Rc(e,t,i.fieldNames)}}function zte({displayField:e,fields:t}){return e||(t!=null&&t.length?ay(t,"name-or-title")||ay(t,"unique-identifier")||ay(t,"type-or-category")||$7(t):null)}function $7(e){for(const t of e){if(!(t!=null&&t.name))continue;const r=t.name.toLowerCase();if(r.includes("name")||r.includes("title"))return t.name}return null}function ay(e,t){for(const r of e)if(r!=null&&r.valueType&&r.valueType===t)return r.name;return null}async function Vte(e,t){var i;if(!t)return;const r=(i=t.elevationInfo)==null?void 0:i.featureExpressionInfo;return r?r.collectRequiredFields(e,t.fieldsIndex):void 0}function E7(e,t,r){r.onStatisticExpression?Lo(e,t,r.onStatisticExpression.expression):e.add(r.onStatisticField)}async function Bte(e,t,r){if(!t||!r||!("fields"in r))return;const i=[],s=r.popupTemplate;i.push(CA(e,t,s)),r.fields&&i.push(...r.fields.map(async n=>E7(e,t.fieldsIndex,n))),await Promise.all(i)}async function Hte(e,t){var n,o,a;const{fieldsIndex:r,trackInfo:i}=t;if(!t||!i||!r)return;const s=[(n=i.latestObservations.renderer)==null?void 0:n.collectRequiredFields(e,r),(o=i.previousObservations.renderer)==null?void 0:o.collectRequiredFields(e,r),(a=i.trackLines.renderer)==null?void 0:a.collectRequiredFields(e,r)];i.popupTemplate&&s.push(CA(e,t,i.popupTemplate));for(const l of[i.latestObservations.labelingInfo,i.previousObservations.labelingInfo,i.trackLines.labelingInfo])if(l)for(const h of l)s.push(kA(e,r,h));await Promise.all(s)}async function CA(e,t,r){const i=[];r!=null&&r.expressionInfos&&i.push(...r.expressionInfos.map(n=>Lo(e,t.fieldsIndex,n.expression)));const s=r==null?void 0:r.content;if(Array.isArray(s))for(const n of s)n.type==="expression"&&n.expressionInfo&&i.push(Lo(e,t.fieldsIndex,n.expressionInfo.expression));await Promise.all(i)}async function qte(e,t,r){t&&(t.timeInfo&&(r!=null&&r.timeExtent)&&Rc(e,t.fieldsIndex,[t.timeInfo.startField,t.timeInfo.endField]),t.floorInfo&&Rc(e,t.fieldsIndex,[t.floorInfo.floorField]),(r==null?void 0:r.where)!=null&&await bv(e,t.fieldsIndex,r.where))}async function Wte(e,t,r){t&&r&&await Promise.all(r.map(i=>M7(e,t,i)))}async function M7(e,t,r){t&&r&&(r.valueExpression?await Lo(e,t.fieldsIndex,r.valueExpression):r.field&&em(e,t.fieldsIndex,r.field))}function Zte(e){return e?wv(e.fieldsIndex,IA(e)):[]}function x7(e){if(!e)return[];const t=e.geometryFieldsInfo;return t?wv(e.fieldsIndex,[t.shapeAreaField,t.shapeLengthField]):[]}async function Jte(e,t,r){if(!t||!r)return;const i=t.fieldsIndex;await Promise.all(r.filters.map(s=>bv(e,i,s.where)))}const A7=new Set(["oid","global-id","guid"]),P7=new Set(["oid","global-id"]),O7=[/^fnode_$/i,/^tnode_$/i,/^lpoly_$/i,/^rpoly_$/i,/^poly_$/i,/^shape$/i,/^shape_$/i,/^subclass$/i,/^subclass_$/i,/^rings_ok$/i,/^rings_nok$/i,/perimeter/i,/objectid/i,/_i$/i];function C7(e){const t=new Set;RA(e).forEach(i=>t.add(i)),x7(e).forEach(i=>t.add(i.toLowerCase()));const r=e&&"infoFor3D"in e?e.infoFor3D:void 0;return r&&(Object.values(r.assetMapFieldRoles).forEach(i=>t.add(i.toLowerCase())),Object.values(r.transformFieldRoles).forEach(i=>t.add(i.toLowerCase()))),Array.from(t)}function IA(e){if(!e)return[];const t="editFieldsInfo"in e&&e.editFieldsInfo;if(!t)return[];const{creationDateField:r,creatorField:i,editDateField:s,editorField:n}=t;return[r,i,s,n].filter(Boolean)}function RA(e){return IA(e).map(t=>t.toLowerCase())}function Yte(e,t){var r;return e.editable&&!A7.has(e.type)&&!RA(t).includes(((r=e.name)==null?void 0:r.toLowerCase())??"")}function Kte(e,t){var i;const r=((i=e.name)==null?void 0:i.toLowerCase())??"";return!((t==null?void 0:t.objectIdField)!=null&&r===t.objectIdField.toLowerCase()||(t==null?void 0:t.globalIdField)!=null&&r===t.globalIdField.toLowerCase()||C7(t).includes(r)||P7.has(e.type)||O7.some(s=>s.test(r)))}async function Xte(e,t){const{labelingInfo:r,fieldsIndex:i}=t;r!=null&&r.length&&await Promise.all(r.map(s=>kA(e,i,s)))}async function kA(e,t,r){if(!r)return;const i=r.getLabelExpression(),s=r.where;if(i.type==="arcade")await Lo(e,t,i.expression);else{const n=i.expression.match(/{[^}]*}/g);n&&n.forEach(o=>{em(e,t,o.slice(1,-1))})}await bv(e,t,s)}function Qte(e){const t=e.defaultValue;return t!==void 0&&LA(e,t)?t:e.nullable?null:void 0}function ere(e){const t=typeof e=="string"?{type:e}:e;return z7(t)?255:t.type==="esriFieldTypeDate"||t.type==="date"?8:void 0}function NA(e){return typeof e=="number"&&!isNaN(e)&&isFinite(e)}function I7(e){return e===null||NA(e)}function R7(e){return e===null||Number.isInteger(e)}function k7(){return!0}function LA(e,t){let r;switch(e.type){case"date":case"integer":case"long":case"small-integer":case"big-integer":case"esriFieldTypeDate":case"esriFieldTypeInteger":case"esriFieldTypeLong":case"esriFieldTypeSmallInteger":case"esriFieldTypeBigInteger":r=e.nullable?R7:Number.isInteger;break;case"double":case"single":case"esriFieldTypeSingle":case"esriFieldTypeDouble":r=e.nullable?I7:NA;break;case"string":case"esriFieldTypeString":r=e.nullable?r7:ah;break;default:r=k7}return arguments.length===1?r:r(t)}const N7=["integer","small-integer","big-integer"],L7=["single","double"],D7=["esriFieldTypeInteger","esriFieldTypeSmallInteger","esriFieldTypeBigInteger"],F7=["esriFieldTypeSingle","esriFieldTypeDouble"],DA=new Set([...N7,...D7]),U7=new Set([...L7,...F7]),j7=a_(DA,U7);function tre(e){return e!=null&&DA.has(e.type)}function G7(e){return e!=null&&j7.has(e.type)}function z7(e){return e!=null&&(e.type==="string"||e.type==="esriFieldTypeString")}function rre(e){return e!=null&&(e.type==="date"||e.type==="esriFieldTypeDate")}function ire(e){return e!=null&&(e.type==="date-only"||e.type==="esriFieldTypeDateOnly")}function sre(e){return e!=null&&(e.type==="timestamp-offset"||e.type==="esriFieldTypeTimestampOffset")}function nre(e){return e!=null&&(e.type==="time-only"||e.type==="esriFieldTypeTimeOnly")}function ore(e){return e!=null&&(e.type==="oid"||e.type==="esriFieldTypeOID")}function are(e){return e!=null&&(e.type==="global-id"||e.type==="esriFieldTypeGlobalID")}function lre(e,t){return V7(e,t)===null}var Xp,Qp;function ure(e){return e==null||typeof e=="number"&&isNaN(e)?null:e}function V7(e,t){return e==null||e.nullable&&t===null?null:LA(e,t)?G7(e)&&!B7(e.type,Number(t))?Xp.OUT_OF_RANGE:null:Qp.INVALID_TYPE}function B7(e,t){const r=typeof e=="string"?FA(e):e;if(!r)return!1;const i=r.min,s=r.max;return r.isInteger?Number.isInteger(t)&&t>=i&&t<=s:t>=i&&t<=s}function FA(e){switch(e){case"esriFieldTypeSmallInteger":case"small-integer":return H7;case"esriFieldTypeInteger":case"integer":return q7;case"esriFieldTypeBigInteger":case"big-integer":return W7;case"esriFieldTypeSingle":case"single":return Z7;case"esriFieldTypeDouble":case"double":return J7}}(function(e){e.OUT_OF_RANGE="numeric-range-validation-error::out-of-range"})(Xp||(Xp={})),function(e){e.INVALID_TYPE="type-validation-error::invalid-type"}(Qp||(Qp={}));const H7={min:-32768,max:32767,isInteger:!0,rawMin:-32768,rawMax:32767},q7={min:-2147483648,max:2147483647,isInteger:!0,rawMin:-2147483648,rawMax:2147483647},W7={min:-Number.MAX_SAFE_INTEGER,max:Number.MAX_SAFE_INTEGER,isInteger:!0,rawMin:-Number.MAX_SAFE_INTEGER,rawMax:Number.MAX_SAFE_INTEGER},Z7={min:-34e37,max:12e37,isInteger:!1,rawMin:-34e37,rawMax:12e37},J7={min:-Number.MAX_VALUE,max:Number.MAX_VALUE,isInteger:!1,rawMin:-Number.MAX_VALUE,rawMax:Number.MAX_VALUE};function cre(e,t,r){switch(e){case Yp.INVALID_CODED_VALUE:return`Value ${r} is not in the coded domain - field: ${t.name}, domain: ${JSON.stringify(t.domain)}`;case Yp.VALUE_OUT_OF_RANGE:return`Value ${r} is out of the range of valid values - field: ${t.name}, domain: ${JSON.stringify(t.domain)}`;case Qp.INVALID_TYPE:return`Value ${r} is not a valid value for the field type - field: ${t.name}, type: ${t.type}, nullable: ${t.nullable}`;case Xp.OUT_OF_RANGE:{const{min:i,max:s}=FA(t.type);return`Value ${r} is out of range for the number type - field: ${t.name}, type: ${t.type}, value range is ${i} to ${s}`}}}function hre(e,t){return!Y7(e,t,null)}function Y7(e,t,r){if(!(t!=null&&t.attributes)||!e)return!0;const i=new Set(Object.keys(t.attributes));let s=!1;for(const n of e)if(!i.has(n)&&(s=!0,r==null))break;return s}function dre(e){return!!e&&["raster.itempixelvalue","raster.servicepixelvalue"].some(t=>e.toLowerCase().startsWith(t))}function K7(e){const t=e==null?void 0:e.match(/{[^}]+}/g);return t?t.map(r=>r.slice(1,-1).split(":")[0].trim()):[]}let Rd=class extends G{constructor(t){super(t),this.type=null}};c([d({type:["attachments","custom","fields","media","text","expression","relationship","utility-network-associations"],readOnly:!0,json:{read:!1,write:!0}})],Rd.prototype,"type",void 0),Rd=c([S("esri.popup.content.Content")],Rd);const _s=Rd,Zh=new it({asc:"ascending",desc:"descending"});let gu=class extends Zt.ClonableMixin(G){constructor(t){super(t),this.field=null,this.order="ascending"}};c([d({type:String,json:{write:!0}})],gu.prototype,"field",void 0),c([d({type:Zh.apiValues,json:{type:Zh.jsonValues,read:Zh.read,write:Zh.write}})],gu.prototype,"order",void 0),gu=c([S("esri.popup.support.AttachmentsOrderByInfo")],gu);const X7=gu;let Ns=class extends Zt.ClonableMixin(_s){constructor(t){super(t),this.description=null,this.displayType="auto",this.orderByFields=null,this.title=null,this.type="attachments"}};c([d({type:String,json:{write:!0}})],Ns.prototype,"description",void 0),c([d({type:["auto","preview","list"],json:{write:!0}})],Ns.prototype,"displayType",void 0),c([d({type:[X7],json:{write:!0}})],Ns.prototype,"orderByFields",void 0),c([d({type:String,json:{write:!0}})],Ns.prototype,"title",void 0),c([d({type:["attachments"],readOnly:!0,json:{read:!1,write:{isRequired:!0}}})],Ns.prototype,"type",void 0),Ns=c([S("esri.popup.content.AttachmentsContent")],Ns);const kc=Ns;var s0;let Hn=s0=class extends _s{constructor(e){super(e),this.creator=null,this.destroyer=null,this.outFields=null,this.type="custom"}clone(){return new s0({creator:this.creator,destroyer:this.destroyer,outFields:Array.isArray(this.outFields)?C(this.outFields):null})}};c([d()],Hn.prototype,"creator",void 0),c([d()],Hn.prototype,"destroyer",void 0),c([d()],Hn.prototype,"outFields",void 0),c([d({type:["custom"],readOnly:!0})],Hn.prototype,"type",void 0),Hn=s0=c([S("esri.popup.content.CustomContent")],Hn);const Q7=Hn;var n0;let da=n0=class extends G{constructor(e){super(e),this.title=null,this.expression=null,this.returnType="dictionary"}clone(){return new n0({title:this.title,expression:this.expression})}};c([d({type:String,json:{write:!0}})],da.prototype,"title",void 0),c([d({type:String,json:{write:!0}})],da.prototype,"expression",void 0),c([d({type:["dictionary"],readOnly:!0,json:{read:!1,write:!0}})],da.prototype,"returnType",void 0),da=n0=c([S("esri.popup.ElementExpressionInfo")],da);const ej=da;var o0;let _u=o0=class extends _s{constructor(e){super(e),this.expressionInfo=null,this.type="expression"}clone(){var e;return new o0({expressionInfo:(e=this.expressionInfo)==null?void 0:e.clone()})}};c([d({type:ej,json:{write:!0}})],_u.prototype,"expressionInfo",void 0),c([d({type:["expression"],readOnly:!0,json:{read:!1,write:!0}})],_u.prototype,"type",void 0),_u=o0=c([S("esri.popup.content.ExpressionContent")],_u);const tm=_u;let pa=class extends Zt.ClonableMixin(G){constructor(t){super(t),this.dateFormat=null,this.digitSeparator=!1,this.places=null}};c([Y(xD)],pa.prototype,"dateFormat",void 0),c([d({type:Boolean,json:{write:!0}})],pa.prototype,"digitSeparator",void 0),c([d({type:$e,json:{write:!0}})],pa.prototype,"places",void 0),pa=c([S("esri.popup.support.FieldInfoFormat")],pa);const tj=pa;var a0;let Br=a0=class extends G{constructor(e){super(e),this.fieldName=null,this.format=void 0,this.isEditable=!0,this.label=null,this.stringFieldOption="text-box",this.statisticType=null,this.tooltip=null,this.visible=!0}clone(){var e;return new a0({fieldName:this.fieldName,format:(e=this.format)==null?void 0:e.clone(),isEditable:this.isEditable,label:this.label,stringFieldOption:this.stringFieldOption,statisticType:this.statisticType,tooltip:this.tooltip,visible:this.visible})}};c([d({type:String,json:{write:!0}})],Br.prototype,"fieldName",void 0),c([d({type:tj,json:{write:!0}})],Br.prototype,"format",void 0),c([d({type:Boolean,json:{write:{alwaysWriteDefaults:!0},default:!0}})],Br.prototype,"isEditable",void 0),c([d({type:String,json:{write:!0}})],Br.prototype,"label",void 0),c([Y(new it({richtext:"rich-text",textarea:"text-area",textbox:"text-box"}),{default:"text-box"})],Br.prototype,"stringFieldOption",void 0),c([d({type:["count","sum","min","max","avg","stddev","var"],json:{write:!0}})],Br.prototype,"statisticType",void 0),c([d({type:String,json:{write:!0}})],Br.prototype,"tooltip",void 0),c([d({type:Boolean,json:{write:!0}})],Br.prototype,"visible",void 0),Br=a0=c([S("esri.popup.FieldInfo")],Br);const UA=Br;var l0;let Wi=l0=class extends _s{constructor(e){super(e),this.attributes=null,this.description=null,this.fieldInfos=null,this.title=null,this.type="fields"}writeFieldInfos(e,t){t.fieldInfos=e&&e.map(r=>r.toJSON())}clone(){return new l0(C({attributes:this.attributes,description:this.description,fieldInfos:this.fieldInfos,title:this.title}))}};c([d({type:Object,json:{write:!0}})],Wi.prototype,"attributes",void 0),c([d({type:String,json:{write:!0}})],Wi.prototype,"description",void 0),c([d({type:[UA]})],Wi.prototype,"fieldInfos",void 0),c([ae("fieldInfos")],Wi.prototype,"writeFieldInfos",null),c([d({type:String,json:{write:!0}})],Wi.prototype,"title",void 0),c([d({type:["fields"],readOnly:!0,json:{read:!1,write:{isRequired:!0}}})],Wi.prototype,"type",void 0),Wi=l0=c([S("esri.popup.content.FieldsContent")],Wi);const Nc=Wi;let qn=class extends G{constructor(t){super(t),this.altText=null,this.caption="",this.title="",this.type=null}};c([d({type:String,json:{write:!0}})],qn.prototype,"altText",void 0),c([d({type:String,json:{write:!0}})],qn.prototype,"caption",void 0),c([d({type:String,json:{write:!0}})],qn.prototype,"title",void 0),c([d({type:["image","bar-chart","column-chart","line-chart","pie-chart"],readOnly:!0,json:{read:!1,write:!0}})],qn.prototype,"type",void 0),qn=c([S("esri.popup.content.mixins.MediaInfo")],qn);const Sv=qn;var u0;let Wn=u0=class extends W{constructor(e){super(e),this.color=null,this.fieldName=null,this.tooltip=null,this.value=null}clone(){var e;return new u0({color:(e=this.color)==null?void 0:e.clone(),fieldName:this.fieldName,tooltip:this.tooltip,value:this.value})}};c([d()],Wn.prototype,"color",void 0),c([d()],Wn.prototype,"fieldName",void 0),c([d()],Wn.prototype,"tooltip",void 0),c([d()],Wn.prototype,"value",void 0),Wn=u0=c([S("esri.popup.content.support.ChartMediaInfoValueSeries")],Wn);const rj=Wn;var c0;let Ls=c0=class extends G{constructor(e){super(e),this.colors=null,this.fields=[],this.normalizeField=null,this.series=[],this.tooltipField=null}clone(){return new c0({colors:C(this.colors),fields:C(this.fields),normalizeField:this.normalizeField,series:C(this.series),tooltipField:this.tooltipField})}};c([d({type:[oe],json:{type:[[$e]],write:!0}})],Ls.prototype,"colors",void 0),c([d({type:[String],json:{write:{isRequired:!0}}})],Ls.prototype,"fields",void 0),c([d({type:String,json:{write:!0}})],Ls.prototype,"normalizeField",void 0),c([d({type:[rj],json:{read:!1}})],Ls.prototype,"series",void 0),c([d({type:String,json:{write:!0}})],Ls.prototype,"tooltipField",void 0),Ls=c0=c([S("esri.popup.content.support.ChartMediaInfoValue")],Ls);const ij=Ls;let vu=class extends Sv{constructor(t){super(t),this.type=null,this.value=void 0}};c([d({type:["bar-chart","column-chart","line-chart","pie-chart"],readOnly:!0,json:{read:!1,write:!0}})],vu.prototype,"type",void 0),c([d({type:ij,json:{write:{isRequired:!0}}})],vu.prototype,"value",void 0),vu=c([S("esri.popup.content.mixins.ChartMediaInfo")],vu);const rm=vu,im=Wt()({barchart:"bar-chart",columnchart:"column-chart",linechart:"line-chart",piechart:"pie-chart"});var h0;let kd=h0=class extends rm{constructor(e){super(e),this.type="bar-chart"}clone(){var e;return new h0({altText:this.altText,title:this.title,caption:this.caption,value:(e=this.value)==null?void 0:e.clone()})}};c([d({type:["bar-chart"],readOnly:!0,json:{type:["barchart"],read:!1,write:{writer:im.write,isRequired:!0}}})],kd.prototype,"type",void 0),kd=h0=c([S("esri.popup.content.BarChartMediaInfo")],kd);const jA=kd;var d0;let Nd=d0=class extends rm{constructor(e){super(e),this.type="column-chart"}clone(){var e;return new d0({altText:this.altText,title:this.title,caption:this.caption,value:(e=this.value)==null?void 0:e.clone()})}};c([d({type:["column-chart"],readOnly:!0,json:{type:["columnchart"],read:!1,write:{writer:im.write,isRequired:!0}}})],Nd.prototype,"type",void 0),Nd=d0=c([S("esri.popup.content.ColumnChartMediaInfo")],Nd);const GA=Nd;var p0;let wu=p0=class extends G{constructor(e){super(e),this.linkURL=null,this.sourceURL=null}clone(){return new p0({linkURL:this.linkURL,sourceURL:this.sourceURL})}};c([d({type:String,json:{write:!0}})],wu.prototype,"linkURL",void 0),c([d({type:String,json:{write:{isRequired:!0}}})],wu.prototype,"sourceURL",void 0),wu=p0=c([S("esri.popup.content.support.ImageMediaInfoValue")],wu);const sj=wu;var f0;let fa=f0=class extends Sv{constructor(e){super(e),this.refreshInterval=0,this.type="image",this.value=void 0}clone(){var e;return new f0({altText:this.altText,title:this.title,caption:this.caption,refreshInterval:this.refreshInterval,value:(e=this.value)==null?void 0:e.clone()})}};c([d({type:Number,json:{write:!0}})],fa.prototype,"refreshInterval",void 0),c([d({type:["image"],readOnly:!0,json:{read:!1,write:{isRequired:!0}}})],fa.prototype,"type",void 0),c([d({type:sj,json:{write:{isRequired:!0}}})],fa.prototype,"value",void 0),fa=f0=c([S("esri.popup.content.ImageMediaInfo")],fa);const zA=fa;var m0;let Ld=m0=class extends rm{constructor(e){super(e),this.type="line-chart"}clone(){var e;return new m0({altText:this.altText,title:this.title,caption:this.caption,value:(e=this.value)==null?void 0:e.clone()})}};c([d({type:["line-chart"],readOnly:!0,json:{type:["linechart"],read:!1,write:{writer:im.write,isRequired:!0}}})],Ld.prototype,"type",void 0),Ld=m0=c([S("esri.popup.content.LineChartMediaInfo")],Ld);const VA=Ld;var y0;let Dd=y0=class extends rm{constructor(e){super(e),this.type="pie-chart"}clone(){var e;return new y0({altText:this.altText,title:this.title,caption:this.caption,value:(e=this.value)==null?void 0:e.clone()})}};c([d({type:["pie-chart"],readOnly:!0,json:{type:["piechart"],read:!1,write:{writer:im.write,isRequired:!0}}})],Dd.prototype,"type",void 0),Dd=y0=c([S("esri.popup.content.PieChartMediaInfo")],Dd);const BA=Dd,g0={base:Sv,key:"type",defaultKeyValue:"image",typeMap:{"bar-chart":jA,"column-chart":GA,"line-chart":VA,"pie-chart":BA,image:zA}};var _0;let Hr=_0=class extends _s{constructor(e){super(e),this.activeMediaInfoIndex=null,this.attributes=null,this.description=null,this.mediaInfos=null,this.title=null,this.type="media"}readMediaInfos(e){return e&&e.map(t=>t.type==="image"?zA.fromJSON(t):t.type==="barchart"?jA.fromJSON(t):t.type==="columnchart"?GA.fromJSON(t):t.type==="linechart"?VA.fromJSON(t):t.type==="piechart"?BA.fromJSON(t):void 0).filter(Boolean)}writeMediaInfos(e,t){t.mediaInfos=e&&e.map(r=>r.toJSON())}clone(){return new _0(C({activeMediaInfoIndex:this.activeMediaInfoIndex,attributes:this.attributes,description:this.description,mediaInfos:this.mediaInfos,title:this.title}))}};c([d()],Hr.prototype,"activeMediaInfoIndex",void 0),c([d({type:Object,json:{write:!0}})],Hr.prototype,"attributes",void 0),c([d({type:String,json:{write:!0}})],Hr.prototype,"description",void 0),c([d({types:[g0]})],Hr.prototype,"mediaInfos",void 0),c([pe("mediaInfos")],Hr.prototype,"readMediaInfos",null),c([ae("mediaInfos")],Hr.prototype,"writeMediaInfos",null),c([d({type:String,json:{write:!0}})],Hr.prototype,"title",void 0),c([d({type:["media"],readOnly:!0,json:{read:!1,write:{isRequired:!0}}})],Hr.prototype,"type",void 0),Hr=_0=c([S("esri.popup.content.MediaContent")],Hr);const Lc=Hr;var v0;let bu=v0=class extends G{constructor(e){super(e),this.field=null,this.order=null}clone(){return new v0({field:this.field,order:this.order})}};c([d({type:String,json:{write:!0}})],bu.prototype,"field",void 0),c([d({type:["asc","desc"],json:{write:!0}})],bu.prototype,"order",void 0),bu=v0=c([S("esri.popup.support.RelatedRecordsInfoFieldOrder")],bu);const HA=bu;let hi=class extends Zt.ClonableMixin(_s){constructor(t){super(t),this.description=null,this.displayCount=null,this.displayType="list",this.orderByFields=null,this.relationshipId=null,this.title=null,this.type="relationship"}};c([d({type:String,json:{write:!0}})],hi.prototype,"description",void 0),c([d({type:Number,json:{type:$e,write:!0}})],hi.prototype,"displayCount",void 0),c([d({type:["list"],json:{write:{isRequired:!0}}})],hi.prototype,"displayType",void 0),c([d({type:[HA],json:{write:!0}})],hi.prototype,"orderByFields",void 0),c([d({type:Number,json:{type:$e,write:{isRequired:!0}}})],hi.prototype,"relationshipId",void 0),c([d({type:String,json:{write:!0}})],hi.prototype,"title",void 0),c([d({type:["relationship"],readOnly:!0,json:{read:!1,write:{isRequired:!0}}})],hi.prototype,"type",void 0),hi=c([S("esri.popup.content.RelationshipContent")],hi);const Dc=hi;var w0;let Su=w0=class extends _s{constructor(e){super(e),this.text=null,this.type="text"}clone(){return new w0({text:this.text})}};c([d({type:String,json:{write:!0}})],Su.prototype,"text",void 0),c([d({type:["text"],readOnly:!0,json:{read:!1,write:{isRequired:!0}}})],Su.prototype,"type",void 0),Su=w0=c([S("esri.popup.content.TextContent")],Su);const Fc=Su;let Zi=class extends Zt.ClonableMixin(G){constructor(t){super(t),this.title=null,this.description=null,this.type=null,this.associatedNetworkSourceId=null,this.associatedAssetGroup=null,this.associatedAssetType=null}};c([d({type:String,json:{write:!0}})],Zi.prototype,"title",void 0),c([d({type:String,json:{write:!0}})],Zi.prototype,"description",void 0),c([d({type:["attachment","connectivity","container","content","structure"],json:{write:!0}})],Zi.prototype,"type",void 0),c([d({type:Number,json:{type:$e,write:!0}})],Zi.prototype,"associatedNetworkSourceId",void 0),c([d({type:Number,json:{type:$e,write:!0}})],Zi.prototype,"associatedAssetGroup",void 0),c([d({type:Number,json:{type:$e,write:!0}})],Zi.prototype,"associatedAssetType",void 0),Zi=c([S("esri.popup.support.UtilityNetworkAssociationType")],Zi);const nj=Zi;let Ds=class extends Zt.ClonableMixin(_s){constructor(t){super(t),this.description=null,this.displayCount=null,this.title=null,this.associationTypes=[],this.type="utility-network-associations"}};c([d({type:String,json:{write:!0}})],Ds.prototype,"description",void 0),c([d({type:Number,json:{type:$e,write:!0}})],Ds.prototype,"displayCount",void 0),c([d({type:String,json:{write:!0}})],Ds.prototype,"title",void 0),c([d({type:[nj],json:{write:!0}})],Ds.prototype,"associationTypes",void 0),c([Y({utilityNetworkAssociations:"utility-network-associations"})],Ds.prototype,"type",void 0),Ds=c([S("esri.popup.content.UtilityNetworkAssociationsContent")],Ds);const Tv=Ds,oj={base:null,key:"type",typeMap:{attachment:kc,media:Lc,text:Fc,expression:tm,field:Nc,relationship:Dc,utilityNetworkAssociations:Tv}},aj={base:null,key:"type",typeMap:{attachment:kc,media:Lc,text:Fc,expression:tm,field:Nc,relationship:Dc}};var b0;let Zn=b0=class extends G{constructor(e){super(e),this.name=null,this.title=null,this.expression=null,this.returnType=null}clone(){return new b0({name:this.name,title:this.title,expression:this.expression,returnType:this.returnType})}};c([d({type:String,json:{write:!0}})],Zn.prototype,"name",void 0),c([d({type:String,json:{write:!0}})],Zn.prototype,"title",void 0),c([d({type:String,json:{write:!0}})],Zn.prototype,"expression",void 0),c([d({type:["string","number"],json:{write:!0}})],Zn.prototype,"returnType",void 0),Zn=b0=c([S("esri.popup.ExpressionInfo")],Zn);const lj=Zn;var S0;let Tu=S0=class extends G{constructor(e){super(e),this.returnTopmostRaster=null,this.showNoDataRecords=null}clone(){return new S0({showNoDataRecords:this.showNoDataRecords,returnTopmostRaster:this.returnTopmostRaster})}};c([d({type:Boolean,json:{write:!0}})],Tu.prototype,"returnTopmostRaster",void 0),c([d({type:Boolean,json:{write:!0}})],Tu.prototype,"showNoDataRecords",void 0),Tu=S0=c([S("esri.popup.LayerOptions")],Tu);const uj=Tu;var T0;let $u=T0=class extends G{constructor(e){super(e),this.showRelatedRecords=null,this.orderByFields=null}clone(){return new T0({showRelatedRecords:this.showRelatedRecords,orderByFields:this.orderByFields?C(this.orderByFields):null})}};c([d({type:Boolean,json:{write:!0}})],$u.prototype,"showRelatedRecords",void 0),c([d({type:[HA],json:{write:!0}})],$u.prototype,"orderByFields",void 0),$u=T0=c([S("esri.popup.RelatedRecordsInfo")],$u);const K2=$u;var $0;let gr=$0=class extends nh.IdentifiableMixin(W){constructor(e){super(e),this.active=!1,this.className=null,this.disabled=!1,this.icon=null,this.id=null,this.indicator=!1,this.title=null,this.type=null,this.visible=!0}clone(){return new $0({active:this.active,className:this.className,disabled:this.disabled,icon:this.icon,id:this.id,indicator:this.indicator,title:this.title,visible:this.visible})}};c([d()],gr.prototype,"active",void 0),c([d()],gr.prototype,"className",void 0),c([d()],gr.prototype,"disabled",void 0),c([d()],gr.prototype,"icon",void 0),c([d()],gr.prototype,"id",void 0),c([d()],gr.prototype,"indicator",void 0),c([d()],gr.prototype,"title",void 0),c([d()],gr.prototype,"type",void 0),c([d()],gr.prototype,"visible",void 0),gr=$0=c([S("esri.support.actions.ActionBase")],gr);const $v=gr;var E0;let Fd=E0=class extends $v{constructor(e){super(e),this.image=null,this.type="button"}clone(){return new E0({active:this.active,className:this.className,disabled:this.disabled,icon:this.icon,id:this.id,indicator:this.indicator,title:this.title,visible:this.visible,image:this.image})}};c([d()],Fd.prototype,"image",void 0),Fd=E0=c([S("esri.support.actions.ActionButton")],Fd);const cj=Fd;var M0;let Eu=M0=class extends $v{constructor(e){super(e),this.image=null,this.type="toggle",this.value=!1}clone(){return new M0({active:this.active,className:this.className,disabled:this.disabled,icon:this.icon,id:this.id,indicator:this.indicator,title:this.title,visible:this.visible,image:this.image,value:this.value})}};c([d()],Eu.prototype,"image",void 0),c([d()],Eu.prototype,"value",void 0),Eu=M0=c([S("esri.support.actions.ActionToggle")],Eu);const hj=Eu,Hl="relationships/",X2="expression/",dj=H.ofType({key:"type",defaultKeyValue:"button",base:$v,typeMap:{button:cj,toggle:hj}}),pj={base:_s,key:"type",typeMap:{media:Lc,custom:Q7,text:Fc,attachments:kc,fields:Nc,expression:tm,relationship:Dc,utilityNetworkAssociations:Tv}},qA=new Set(["attachments","fields","media","text","expression","relationship"]),fj=new Set([...qA,"utility-network-associations"]);let Je=class extends Zt.ClonableMixin(G){constructor(){super(...arguments),this.actions=null,this.content="",this.expressionInfos=null,this.fieldInfos=null,this.layerOptions=null,this.lastEditInfoEnabled=!0,this.outFields=null,this.overwriteActions=!1,this.returnGeometry=!1,this.title=""}castContent(t){return Array.isArray(t)?t.map(r=>mn(pj,r)):typeof t=="string"||typeof t=="function"||t instanceof HTMLElement||ki(t)?t:(U.getLogger(this).error("content error","unsupported content value",{value:t}),null)}readContent(t,r){const{popupElements:i}=r;return Array.isArray(i)&&i.length>0?this._readPopupInfoElements(r.description,r.mediaInfos,i):this._readPopupInfo(r)}writeWebSceneContent(t,r,i,s){this._writePopupTemplateContent(t,r,s)}writeWebMapContent(t,r,i,s){this._writePopupTemplateContent(t,r,s)}writeFieldInfos(t,r,i,s){const{content:n}=this,o=Array.isArray(n)?n:null;if(t){const a=o?o.filter(h=>h.type==="fields"):[],l=a.length&&a.every(h=>{var p;return(p=h.fieldInfos)==null?void 0:p.length});r.fieldInfos=t.filter(Boolean).map(h=>{const p=h.toJSON(s);return l&&(p.visible=!1),p})}if(o)for(const a of o)a.type==="fields"&&this._writeFieldsContent(a,r)}writeLayerOptions(t,r,i,s){r[i]=!t||t.showNoDataRecords===null&&t.returnTopmostRaster===null?null:t.toJSON(s)}writeTitle(t,r){r.title=t||""}async collectRequiredFields(t,r){const i=this.expressionInfos||[];await this._collectExpressionInfoFields(t,r,[...i,...this._getContentExpressionInfos(this.content,i)]),Rc(t,r,[...this.outFields||[],...this._getActionsFields(this.actions),...this._getTitleFields(this.title),...this._getContentFields(this.content)])}async getRequiredFields(t){const r=new Set;return await this.collectRequiredFields(r,t),[...r].sort()}_writePopupTemplateContent(t,r,i){typeof t!="string"?Array.isArray(t)&&(r.popupElements=t.filter(s=>(i==null?void 0:i.origin)==="web-scene"?qA.has(s.type):fj.has(s.type)).map(s=>s==null?void 0:s.toJSON(i)),r.popupElements.forEach(s=>{s.type==="attachments"?this._writeAttachmentContent(r):s.type==="media"?this._writeMediaContent(s,r):s.type==="text"?this._writeTextContent(s,r):s.type==="relationship"&&this._writeRelationshipContent(s,r)})):r.description=t}_writeFieldsContent(t,r){if(!Array.isArray(t.fieldInfos)||!t.fieldInfos.length)return;const i=C(t.fieldInfos);Array.isArray(r.fieldInfos)?i.forEach(s=>{const n=r.fieldInfos.find(o=>{var a,l;return((a=o.fieldName)==null?void 0:a.toLowerCase())===((l=s.fieldName)==null?void 0:l.toLowerCase())});n?n.visible=!0:r.fieldInfos.push(s)}):r.fieldInfos=i}_writeAttachmentContent(t){t.showAttachments||(t.showAttachments=!0)}_writeRelationshipContent(t,r){var n,o;const i=((n=t.orderByFields)==null?void 0:n.map(a=>this._toFieldOrderJSON(a,t.relationshipId)))||[],s=[...((o=r.relatedRecordsInfo)==null?void 0:o.orderByFields)||[],...i];r.relatedRecordsInfo={showRelatedRecords:!0,...(s==null?void 0:s.length)&&{orderByFields:s}}}_writeTextContent(t,r){!r.description&&t.text&&(r.description=t.text)}_writeMediaContent(t,r){if(!Array.isArray(t.mediaInfos)||!t.mediaInfos.length)return;const i=C(t.mediaInfos);Array.isArray(r.mediaInfos)?r.mediaInfos=[...r.mediaInfos,...i]:r.mediaInfos=i}_readPopupInfoElements(t,r,i){const s={description:!1,mediaInfos:!1};return i.map(n=>n.type==="media"?(n.mediaInfos||!r||s.mediaInfos||(n.mediaInfos=r,s.mediaInfos=!0),Lc.fromJSON(n)):n.type==="text"?(n.text||!t||s.description||(n.text=t,s.description=!0),Fc.fromJSON(n)):n.type==="attachments"?kc.fromJSON(n):n.type==="fields"?Nc.fromJSON(n):n.type==="expression"?tm.fromJSON(n):n.type==="relationship"?Dc.fromJSON(n):n.type==="utilityNetworkAssociations"?Tv.fromJSON(n):void 0).filter(Boolean)}_toRelationshipContent(t){const{field:r,order:i}=t;if(!(r!=null&&r.startsWith(Hl)))return null;const s=r.replace(Hl,"").split("/");if(s.length!==2)return null;const n=parseInt(s[0],10),o=s[1];return!Number.isNaN(n)&&o?Dc.fromJSON({relationshipId:n,orderByFields:[{field:o,order:i}]}):null}_toFieldOrderJSON(t,r){const{order:i,field:s}=t;return{field:`${Hl}${r}/${s}`,order:i}}_readPopupInfo({description:t,mediaInfos:r,showAttachments:i,relatedRecordsInfo:s={showRelatedRecords:!1}}){const n=[];t?n.push(new Fc({text:t})):n.push(new Nc),Array.isArray(r)&&r.length&&n.push(Lc.fromJSON({mediaInfos:r})),i&&n.push(kc.fromJSON({displayType:"auto"}));const{showRelatedRecords:o,orderByFields:a}=s;return o&&(a!=null&&a.length)&&a.forEach(l=>{const h=this._toRelationshipContent(l);h&&n.push(h)}),n.length?n:t}_getContentElementFields(t){const r=t==null?void 0:t.type;if(r==="attachments")return[...this._extractFieldNames(t.title),...this._extractFieldNames(t.description)];if(r==="custom")return t.outFields||[];if(r==="fields")return[...this._extractFieldNames(t.title),...this._extractFieldNames(t.description),...this._getFieldInfoFields(t.fieldInfos??this.fieldInfos)];if(r==="media"){const i=t.mediaInfos||[];return[...this._extractFieldNames(t.title),...this._extractFieldNames(t.description),...i.reduce((s,n)=>[...s,...this._getMediaInfoFields(n)],[])]}return r==="text"?this._extractFieldNames(t.text):r==="relationship"||r==="utility-network-associations"?[...this._extractFieldNames(t.title),...this._extractFieldNames(t.description)]:[]}_getMediaInfoFields(t){const{caption:r,title:i,value:s}=t,n=s||{},{fields:o,normalizeField:a,tooltipField:l,sourceURL:h,linkURL:p}=n,f=[...this._extractFieldNames(i),...this._extractFieldNames(r),...this._extractFieldNames(h),...this._extractFieldNames(p),...o??[]];return a&&f.push(a),l&&f.push(l),f}_getContentExpressionInfos(t,r){return Array.isArray(t)?t.reduce((i,s)=>[...i,...s.type==="expression"&&s.expressionInfo?[s.expressionInfo]:[]],r):[]}_getContentFields(t){return typeof t=="string"?this._extractFieldNames(t):Array.isArray(t)?t.reduce((r,i)=>[...r,...this._getContentElementFields(i)],[]):[]}async _collectExpressionInfoFields(t,r,i){i&&await Promise.all(i.map(s=>Lo(t,r,s.expression)))}_getFieldInfoFields(t){return t?t.filter(({fieldName:r,visible:i})=>!(i!==void 0&&!i||!r||r.startsWith(Hl)||r.startsWith(X2))).map(r=>r.fieldName):[]}_getActionsFields(t){return t?t.toArray().reduce((r,i)=>[...r,...this._getActionFields(i)],[]):[]}_getActionFields(t){const{className:r,title:i,type:s}=t,n=s==="button"||s==="toggle"?t.image:"";return[...this._extractFieldNames(i),...this._extractFieldNames(r),...this._extractFieldNames(n)]}_getTitleFields(t){return typeof t=="string"?this._extractFieldNames(t):[]}_extractFieldNames(t){return K7(t).filter(r=>!(r.indexOf(Hl)===0||r.indexOf(X2)===0))}};c([d({type:dj})],Je.prototype,"actions",void 0),c([d()],Je.prototype,"content",void 0),c([rt("content")],Je.prototype,"castContent",null),c([pe("content",["description","fieldInfos","popupElements","mediaInfos","showAttachments","relatedRecordsInfo"])],Je.prototype,"readContent",null),c([ae("web-scene","content",{popupElements:{type:H.ofType(aj)},showAttachments:{type:Boolean},mediaInfos:{type:H.ofType(g0)},description:{type:String},relatedRecordsInfo:{type:K2}})],Je.prototype,"writeWebSceneContent",null),c([ae("content",{popupElements:{type:H.ofType(oj)},showAttachments:{type:Boolean},mediaInfos:{type:H.ofType(g0)},description:{type:String},relatedRecordsInfo:{type:K2}})],Je.prototype,"writeWebMapContent",null),c([d({type:[lj],json:{write:!0}})],Je.prototype,"expressionInfos",void 0),c([d({type:[UA]})],Je.prototype,"fieldInfos",void 0),c([ae("fieldInfos")],Je.prototype,"writeFieldInfos",null),c([d({type:uj})],Je.prototype,"layerOptions",void 0),c([ae("layerOptions")],Je.prototype,"writeLayerOptions",null),c([d({type:Boolean,json:{read:{source:"showLastEditInfo"},write:{target:"showLastEditInfo"},default:!0}})],Je.prototype,"lastEditInfoEnabled",void 0),c([d()],Je.prototype,"outFields",void 0),c([d()],Je.prototype,"overwriteActions",void 0),c([d()],Je.prototype,"returnGeometry",void 0),c([d({json:{type:String}})],Je.prototype,"title",void 0),c([ae("title")],Je.prototype,"writeTitle",null),Je=c([S("esri.PopupTemplate")],Je);const mj=Je,Q2=new it({esriSMS:"simple-marker",esriPMS:"picture-marker",esriSLS:"simple-line",esriSFS:"simple-fill",esriPFS:"picture-fill",esriTS:"text",esriSHD:"shield-label-symbol",PointSymbol3D:"point-3d",LineSymbol3D:"line-3d",PolygonSymbol3D:"polygon-3d",WebStyleSymbol:"web-style",MeshSymbol3D:"mesh-3d",LabelSymbol3D:"label-3d",CIMSymbolReference:"cim"});let yj=0,ma=class extends G{constructor(t){super(t),this.id="sym"+yj++,this.type=null,this.color=new oe([0,0,0,1])}readColor(t){return(t==null?void 0:t[0])!=null?[t[0],t[1],t[2],t[3]/255]:t}async collectRequiredFields(t,r){}hash(){return JSON.stringify(this.toJSON())}clone(){}};c([d({type:Q2.apiValues,readOnly:!0,json:{read:!1,write:{ignoreOrigin:!0,writer:Q2.write,isRequired:!0}}})],ma.prototype,"type",void 0),c([d({type:oe,json:{write:{allowNull:!0}}})],ma.prototype,"color",void 0),c([pe("color")],ma.prototype,"readColor",null),ma=c([S("esri.symbols.Symbol")],ma);const $t=ma;var x0;let Fs=x0=class extends $t{constructor(e){super(e),this.data=null,this.type="cim"}readData(e,t){return t}writeData(e,t){Object.assign(t,e)}async collectRequiredFields(e,t){var r;if(((r=this.data)==null?void 0:r.type)==="CIMSymbolReference"){const i=this.data.primitiveOverrides;if(i){const s=i.map(n=>{const o=n.valueExpressionInfo;return o?Lo(e,t,o.expression):null});await Promise.all(s)}}}clone(){return new x0({data:C(this.data)})}hash(){return x$(JSON.stringify(this.data)).toString()}};c([d({json:{write:!1}})],Fs.prototype,"color",void 0),c([d({json:{write:!0}})],Fs.prototype,"data",void 0),c([pe("data",["symbol"])],Fs.prototype,"readData",null),c([ae("data",{})],Fs.prototype,"writeData",null),c([Y({CIMSymbolReference:"cim"},{readOnly:!0})],Fs.prototype,"type",void 0),Fs=x0=c([S("esri.symbols.CIMSymbol")],Fs);const qo=Fs;let ya=class extends G{constructor(t){super(t),this.enabled=!0,this.type=null,this.ignoreDrivers=!1}writeEnabled(t,r,i){t||(r[i]=t)}};c([d({type:Boolean,json:{read:{source:"enable"},write:{target:"enable"}}})],ya.prototype,"enabled",void 0),c([ae("enabled")],ya.prototype,"writeEnabled",null),c([d({type:["icon","object","line","path","fill","water","extrude","text"],readOnly:!0,json:{write:{isRequired:!0}}})],ya.prototype,"type",void 0),ya=c([S("esri.symbols.Symbol3DLayer")],ya);const Li=ya;function gj(e,t){const r=t.transparency!=null?zM(t.transparency):1,i=t.color;return i&&Array.isArray(i)?new oe([i[0]||0,i[1]||0,i[2]||0,r]):null}function _j(e,t){t.color=e.toJSON().slice(0,3);const r=GM(e.a);r!==0&&(t.transparency=r)}function Pn(e){return{type:oe,nonNullable:e==null?void 0:e.nonNullable,json:{type:[$e],default:null,read:{source:["color","transparency"],reader:gj},write:{target:{color:{type:[$e],isRequired:e==null?void 0:e.colorRequiredOnWrite},transparency:{type:$e}},writer:_j}}}}const Ri={type:Number,cast:ke,json:{write:!0}};let Jn=class extends G{constructor(t){super(t),this.color=new oe([0,0,0,1]),this.extensionLength=0,this.size=No(1)}clone(){}cloneProperties(){return{color:C(this.color),size:this.size,extensionLength:this.extensionLength}}};c([d({type:["solid","sketch"],readOnly:!0,json:{read:!0,write:{ignoreOrigin:!0,isRequired:!0}}})],Jn.prototype,"type",void 0),c([d(Pn({colorRequiredOnWrite:!0}))],Jn.prototype,"color",void 0),c([d({...Ri,json:{write:{overridePolicy:e=>({enabled:!!e})}}})],Jn.prototype,"extensionLength",void 0),c([d(Ri)],Jn.prototype,"size",void 0),Jn=c([S("esri.symbols.edges.Edges3D")],Jn);const Ev=Jn;var A0;let Ud=A0=class extends Ev{constructor(e){super(e),this.type="sketch"}clone(){return new A0(this.cloneProperties())}};c([Y({sketch:"sketch"},{readOnly:!0})],Ud.prototype,"type",void 0),Ud=A0=c([S("esri.symbols.edges.SketchEdges3D")],Ud);const vj=Ud;var P0;let jd=P0=class extends Ev{constructor(e){super(e),this.type="solid"}clone(){return new P0(this.cloneProperties())}};c([Y({solid:"solid"},{readOnly:!0})],jd.prototype,"type",void 0),jd=P0=c([S("esri.symbols.edges.SolidEdges3D")],jd);const wj=jd,WA={types:{key:"type",base:Ev,typeMap:{solid:wj,sketch:vj}},json:{write:!0}};var O0;let nr=O0=class extends G{constructor(e){super(e),this.color=null,this.emissiveFactor=null}clone(){var t;const e={color:((t=this.color)==null?void 0:t.clone())??null,emissiveFactor:this.emissiveFactor?K_(this.emissiveFactor):null};return new O0(e)}};c([d(Pn())],nr.prototype,"color",void 0),c([d({type:[Number],json:{write:!1}})],nr.prototype,"emissiveFactor",void 0),nr=O0=c([S("esri.symbols.support.Symbol3DMaterial")],nr);var C0;let Us=C0=class extends Li{constructor(e){super(e),this.type="extrude",this.size=1,this.material=null,this.castShadows=!0,this.edges=null}clone(){var e,t;return new C0({edges:(e=this.edges)==null?void 0:e.clone(),enabled:this.enabled,material:(t=this.material)==null?void 0:t.clone(),castShadows:this.castShadows,size:this.size})}};c([Y({Extrude:"extrude"},{readOnly:!0})],Us.prototype,"type",void 0),c([d({type:Number,json:{write:{enabled:!0,isRequired:!0}},nonNullable:!0})],Us.prototype,"size",void 0),c([d({type:nr,json:{write:!0}})],Us.prototype,"material",void 0),c([d({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],Us.prototype,"castShadows",void 0),c([d(WA)],Us.prototype,"edges",void 0),Us=C0=c([S("esri.symbols.ExtrudeSymbol3DLayer")],Us);const ZA=Us;let Gd=class extends G{constructor(t){super(t)}clone(){throw new Error("Subclasses of LinePattern3D should implement their own clone method.")}};c([d({type:["style"],readOnly:!0,json:{read:!0,write:{ignoreOrigin:!0}}})],Gd.prototype,"type",void 0),Gd=c([S("esri.symbols.patterns.LinePattern3D")],Gd);const JA=Gd,bj=["dash","dash-dot","dot","long-dash","long-dash-dot","long-dash-dot-dot","none","short-dash","short-dash-dot","short-dash-dot-dot","short-dot","solid"];var I0;const Sj=Wt()({dash:"dash","dash-dot":"dash-dot","dash-dot-dot":"long-dash-dot-dot",dot:"dot","long-dash":"long-dash","long-dash-dot":"long-dash-dot",null:"none","short-dash":"short-dash","short-dash-dot":"short-dash-dot","short-dash-dot-dot":"short-dash-dot-dot","short-dot":"short-dot",solid:"solid"});let Mu=I0=class extends JA{constructor(e){super(e),this.type="style",this.style="solid"}clone(){const e={style:this.style};return new I0(e)}};c([d({type:["style"],json:{write:{isRequired:!0}}})],Mu.prototype,"type",void 0),c([Y(Sj),d({type:bj,json:{write:{isRequired:!0}}})],Mu.prototype,"style",void 0),Mu=I0=c([S("esri.symbols.patterns.LineStylePattern3D")],Mu);const Mv=Mu;let zd=class extends G{constructor(t){super(t),this.type="style"}clone(){throw new Error("Subclasses of Pattern3D should implement their own clone method.")}};c([d({type:["style"],readOnly:!0,json:{read:!0,write:{ignoreOrigin:!0}}})],zd.prototype,"type",void 0),zd=c([S("esri.symbols.patterns.Pattern3D")],zd);const YA=zd,Tj=["backward-diagonal","cross","diagonal-cross","forward-diagonal","horizontal","none","solid","vertical"];var R0;let xu=R0=class extends YA{constructor(e){super(e),this.type="style",this.style="solid"}clone(){return new R0({style:this.style})}};c([d({type:["style"],json:{write:{isRequired:!0}}})],xu.prototype,"type",void 0),c([d({type:Tj,json:{read:!0,write:{isRequired:!0}}})],xu.prototype,"style",void 0),xu=R0=c([S("esri.symbols.patterns.StylePattern3D")],xu);const KA=xu,$j={types:{key:"type",base:YA,typeMap:{style:KA}},json:{write:!0}},XA={types:{key:"type",base:JA,typeMap:{style:Mv}},json:{write:!0}},cc=new oe("white"),Ej=new oe([255,255,255,0]);function Mj(e){return e.r===0&&e.g===0&&e.b===0}var k0;let hc=k0=class extends nr{constructor(e){super(e),this.colorMixMode=null}clone(){var t;const e={color:((t=this.color)==null?void 0:t.clone())??null,emissiveFactor:this.emissiveFactor?K_(this.emissiveFactor):null,colorMixMode:this.colorMixMode};return new k0(e)}};c([Y({multiply:"multiply",replace:"replace",tint:"tint"})],hc.prototype,"colorMixMode",void 0),hc=k0=c([S("esri.symbols.support.Symbol3DFillMaterial")],hc);function xj(e,t=!1){return e<=w$?t?new Array(e).fill(0):new Array(e):new Float64Array(e)}function Are(e){return(EI(e)?e.byteLength/8:e.length)<=w$?Array.from(e):new Float64Array(e)}function Pre(e,t,r){return Array.isArray(e)?e.slice(t,t+r):e.subarray(t,t+r)}function lh(e=Cj){return[e[0],e[1],e[2],e[3],e[4],e[5]]}function xv(e,t,r,i,s,n,o=lh()){return o[0]=e,o[1]=t,o[2]=r,o[3]=i,o[4]=s,o[5]=n,o}function Ore(e,t=lh()){return Aj(e,0,e.length/3,t)}function Aj(e,t,r,i=lh()){return QA(i,N0),Pj(i,e,t,r),i}function Cre(e,t=xj(24)){const[r,i,s,n,o,a]=e;return t[0]=r,t[1]=i,t[2]=s,t[3]=r,t[4]=i,t[5]=a,t[6]=r,t[7]=o,t[8]=s,t[9]=r,t[10]=o,t[11]=a,t[12]=n,t[13]=i,t[14]=s,t[15]=n,t[16]=i,t[17]=a,t[18]=n,t[19]=o,t[20]=s,t[21]=n,t[22]=o,t[23]=a,t}function Ire(e,t){const r=isFinite(e[2])||isFinite(e[5]);return new De(r?{xmin:e[0],xmax:e[3],ymin:e[1],ymax:e[4],zmin:e[2],zmax:e[5],spatialReference:t}:{xmin:e[0],xmax:e[3],ymin:e[1],ymax:e[4],spatialReference:t})}function Rre(e,t){e[0]=Math.min(e[0],t[0]),e[1]=Math.min(e[1],t[1]),e[2]=Math.min(e[2],t[2]),e[3]=Math.max(e[3],t[3]),e[4]=Math.max(e[4],t[4]),e[5]=Math.max(e[5],t[5])}function kre(e,t){e[0]=Math.min(e[0],t[0]),e[1]=Math.min(e[1],t[1]),e[3]=Math.max(e[3],t[2]),e[4]=Math.max(e[4],t[3])}function Nre(e,t){e[0]=Math.min(e[0],t[0]),e[1]=Math.min(e[1],t[1]),e[2]=Math.min(e[2],t[2]),e[3]=Math.max(e[3],t[0]),e[4]=Math.max(e[4],t[1]),e[5]=Math.max(e[5],t[2])}function Pj(e,t,r=0,i=t.length/3){let s=e[0],n=e[1],o=e[2],a=e[3],l=e[4],h=e[5];for(let p=0;p<i;p++)s=Math.min(s,t[r+3*p]),n=Math.min(n,t[r+3*p+1]),o=Math.min(o,t[r+3*p+2]),a=Math.max(a,t[r+3*p]),l=Math.max(l,t[r+3*p+1]),h=Math.max(h,t[r+3*p+2]);e[0]=s,e[1]=n,e[2]=o,e[3]=a,e[4]=l,e[5]=h}function Lre(e,t,r){const i=t.length;let s=e[0],n=e[1],o=e[2],a=e[3],l=e[4],h=e[5];if(r)for(let p=0;p<i;p++){const f=t[p];s=Math.min(s,f[0]),n=Math.min(n,f[1]),o=Math.min(o,f[2]),a=Math.max(a,f[0]),l=Math.max(l,f[1]),h=Math.max(h,f[2])}else for(let p=0;p<i;p++){const f=t[p];s=Math.min(s,f[0]),n=Math.min(n,f[1]),a=Math.max(a,f[0]),l=Math.max(l,f[1])}e[0]=s,e[1]=n,e[2]=o,e[3]=a,e[4]=l,e[5]=h}function Dre(e){for(let t=0;t<6;t++)if(!isFinite(e[t]))return!1;return!0}function uh(e){return e[0]>=e[3]?0:e[3]-e[0]}function ch(e){return e[1]>=e[4]?0:e[4]-e[1]}function hh(e){return e[2]>=e[5]?0:e[5]-e[2]}function Fre(e){const t=uh(e),r=hh(e),i=ch(e);return Math.sqrt(t*t+r*r+i*i)}function Ure(e,t=[0,0,0]){return t[0]=e[0]+uh(e)/2,t[1]=e[1]+ch(e)/2,t[2]=e[2]+hh(e)/2,t}function jre(e,t=[0,0,0]){return t[0]=uh(e),t[1]=ch(e),t[2]=hh(e),t}function Gre(e,t){return t[0]>=e[0]&&t[1]>=e[1]&&t[2]>=e[2]&&t[0]<=e[3]&&t[1]<=e[4]&&t[2]<=e[5]}function Oj(e,t){return Math.max(t[0],e[0])<=Math.min(t[3],e[3])&&Math.max(t[1],e[1])<=Math.min(t[4],e[4])&&Math.max(t[2],e[2])<=Math.min(t[5],e[5])}function zre(e,t){return t==null||Oj(e,t)}function Vre(e,t,r,i,s=e){return s[0]=e[0]+t,s[1]=e[1]+r,s[2]=e[2]+i,s[3]=e[3]+t,s[4]=e[4]+r,s[5]=e[5]+i,s}function Bre(e,t,r=e){const i=e[0]+uh(e)/2,s=e[1]+ch(e)/2,n=e[2]+hh(e)/2;return r[0]=i+(e[0]-i)*t,r[1]=s+(e[1]-s)*t,r[2]=n+(e[2]-n)*t,r[3]=i+(e[3]-i)*t,r[4]=s+(e[4]-s)*t,r[5]=n+(e[5]-n)*t,r}function Hre(e,t){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t}function qre(e,t,r=e){return r[0]=t[0],r[1]=t[1],r[2]=t[2],r!==e&&(r[3]=e[3],r[4]=e[4],r[5]=e[5]),r}function Wre(e,t,r=e){return r[3]=t[0],r[4]=t[1],r[5]=t[2],r!==e&&(r[0]=e[0],r[1]=e[1],r[2]=e[2]),e}function QA(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e}function Zre(e){return e?QA(e,N0):lh(N0)}function Jre(e,t){return t||(t=It()),t[0]=e[0],t[1]=e[1],t[2]=e[3],t[3]=e[4],t}function Yre(e,t){return e[0]=t[0],e[1]=t[1],e[2]=Number.NEGATIVE_INFINITY,e[3]=t[2],e[4]=t[3],e[5]=Number.POSITIVE_INFINITY,e}function Kre(e,t,r,i,s){return e[0]=t,e[1]=r,e[2]=Number.NEGATIVE_INFINITY,e[3]=i,e[4]=s,e[5]=Number.POSITIVE_INFINITY,e}function eS(e){return e.length===6}function Xre(e){return uh(e)===0&&ch(e)===0&&hh(e)===0}function Qre(e,t,r){if(e==null||t==null)return e===t;if(!eS(e)||!eS(t))return!1;for(let i=0;i<e.length;i++)if(e[i]!==t[i])return!1;return!0}const N0=[1/0,1/0,1/0,-1/0,-1/0,-1/0],Cj=[0,0,0,0,0,0];lh();function eie(e,{isPrimitive:t,width:r,depth:i,height:s}){const n=t?10:1;if(r==null&&s==null&&i==null)return[n*e[0],n*e[1],n*e[2]];const o=Pl(r,i,s);let a;for(let l=0;l<3;l++){const h=o[l];if(h!=null){a=h/e[l];break}}for(let l=0;l<3;l++)o[l]==null&&(o[l]=e[l]*a);return o}const Ij=xv(-.5,-.5,-.5,.5,.5,.5),Rj=xv(-.5,-.5,0,.5,.5,1),kj=xv(-.5,-.5,0,.5,.5,.5);function tie(e){switch(e){case"sphere":case"cube":case"diamond":return Ij;case"cylinder":case"cone":case"inverted-cone":return Rj;case"tetrahedron":return kj;default:return}}const Av=["butt","square","round"],Nj=[...Av,"none"],eP=["miter","bevel","round"];var L0;let Yn=L0=class extends G{constructor(e){super(e),this.color=new oe([0,0,0,1]),this.size=No(1),this.pattern=null,this.patternCap="butt"}clone(){const e={color:this.color!=null?this.color.clone():null,size:this.size,pattern:this.pattern!=null?this.pattern.clone():null,patternCap:this.patternCap};return new L0(e)}};c([d(Pn({colorRequiredOnWrite:!0}))],Yn.prototype,"color",void 0),c([d({...Ri,json:{write:{isRequired:!0}}})],Yn.prototype,"size",void 0),c([d(XA)],Yn.prototype,"pattern",void 0),c([d({type:Av,json:{default:"butt",write:{overridePolicy(){return{enabled:this.pattern!=null}}}}})],Yn.prototype,"patternCap",void 0),Yn=L0=c([S("esri.symbols.support.Symbol3DOutline")],Yn);var Vd;let Ji=Vd=class extends Li{constructor(e){super(e),this.type="fill",this.material=null,this.pattern=null,this.castShadows=!0,this.outline=null,this.edges=null}clone(){const e={edges:this.edges!=null?this.edges.clone():null,enabled:this.enabled,material:this.material!=null?this.material.clone():null,pattern:this.pattern!=null?this.pattern.clone():null,castShadows:this.castShadows,outline:this.outline!=null?this.outline.clone():null};return new Vd(e)}static fromSimpleFillSymbol(e){var i,s,n;const t=e.outline&&e.outline.style&&e.outline.style!=="solid"?new Mv({style:e.outline.style}):null,r={size:((i=e.outline)==null?void 0:i.width)??0,color:(((s=e.outline)==null?void 0:s.color)??cc).clone(),pattern:t};return t&&((n=e.outline)!=null&&n.cap)&&(r.patternCap=e.outline.cap),new Vd({material:new hc({color:(e.color??Ej).clone()}),pattern:e.style&&e.style!=="solid"?new KA({style:e.style}):null,outline:r})}};c([Y({Fill:"fill"},{readOnly:!0})],Ji.prototype,"type",void 0),c([d({type:hc,json:{write:!0}})],Ji.prototype,"material",void 0),c([d($j)],Ji.prototype,"pattern",void 0),c([d({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],Ji.prototype,"castShadows",void 0),c([d({type:Yn,json:{write:!0}})],Ji.prototype,"outline",void 0),c([d(WA)],Ji.prototype,"edges",void 0),Ji=Vd=c([S("esri.symbols.FillSymbol3DLayer")],Ji);const dh=Ji;var D0;const Lj=Wt()({circle:"circle",square:"square",cross:"cross",x:"x",kite:"kite",triangle:"triangle"});let Kn=D0=class extends G{constructor(e){super(e)}readHref(e,t,r){return e?Qc(e,r):t.dataURI}writeHref(e,t,r,i){e&&(jo(e)?t.dataURI=e:(t.href=Of(e,i),ar(t.href)&&(t.href=un(t.href))))}clone(){return new D0({href:this.href,primitive:this.primitive})}};c([d({type:String,json:{write:!0,read:{source:["href","dataURI"]}}})],Kn.prototype,"href",void 0),c([pe("href")],Kn.prototype,"readHref",null),c([ae("href",{href:{type:String},dataURI:{type:String}})],Kn.prototype,"writeHref",null),c([Y(Lj)],Kn.prototype,"primitive",void 0),Kn=D0=c([S("esri.symbols.support.IconSymbol3DLayerResource")],Kn);const rie="circle";var F0;let ka=F0=class extends W{constructor(){super(...arguments),this.x=0,this.y=0}clone(){return new F0({x:this.x,y:this.y})}};c([d({type:Number})],ka.prototype,"x",void 0),c([d({type:Number})],ka.prototype,"y",void 0),ka=F0=c([S("esri.symbols.support.Symbol3DAnchorPosition2D")],ka);var U0;let Au=U0=class extends G{constructor(e){super(e),this.color=new oe([0,0,0,1]),this.size=No(1)}clone(){const e={color:this.color!=null?this.color.clone():null,size:this.size};return new U0(e)}};c([d(Pn({colorRequiredOnWrite:!0}))],Au.prototype,"color",void 0),c([d({...Ri,json:{write:{isRequired:!0}}})],Au.prototype,"size",void 0),Au=U0=c([S("esri.symbols.support.Symbol3DIconOutline")],Au);var ga;const tP="esri.symbols.IconSymbol3DLayer";let qr=ga=class extends Li{constructor(e){super(e),this.material=null,this.resource=null,this.type="icon",this.size=12,this.anchor="center",this.anchorPosition=null,this.outline=null,this.angle=0}clone(){return new ga({anchor:this.anchor,anchorPosition:C(this.anchorPosition),enabled:this.enabled,material:C(this.material),outline:C(this.outline),resource:C(this.resource),angle:this.angle,size:this.size})}static fromSimpleMarkerSymbol(e){const t=e.color||cc,r=tS(e),i=e.outline&&e.outline.width>0?{size:e.outline.width,color:(e.outline.color||cc).clone()}:null;return new ga({size:e.size,angle:e.angle,resource:{primitive:Fj(e.style)},material:{color:t},outline:i,anchor:r?"relative":void 0,anchorPosition:r})}static fromPictureMarkerSymbol(e){const t=!e.color||Mj(e.color)?cc:e.color,r=tS(e);return new ga({size:e.width<=e.height?e.height:e.width,angle:e.angle,resource:{href:e.url},material:{color:t.clone()},anchor:r?"relative":void 0,anchorPosition:r})}static fromCIMSymbol(e){return new ga({resource:{href:PE({mediaType:"application/json",data:JSON.stringify(e.data)})}})}};c([d({type:nr,json:{write:!0}})],qr.prototype,"material",void 0),c([d({type:Kn,json:{write:!0}})],qr.prototype,"resource",void 0),c([Y({Icon:"icon"},{readOnly:!0})],qr.prototype,"type",void 0),c([d({...Ri,json:{write:{isRequired:!0}}})],qr.prototype,"size",void 0),c([Y({center:"center",left:"left",right:"right",top:"top",bottom:"bottom",topLeft:"top-left",topRight:"top-right",bottomLeft:"bottom-left",bottomRight:"bottom-right",relative:"relative"},{default:"center"})],qr.prototype,"anchor",void 0),c([d({type:ka,json:{type:[Number],read:{reader:e=>new ka({x:e[0],y:e[1]})},write:{writer:(e,t)=>{t.anchorPosition=[e.x,e.y]},overridePolicy(){return{enabled:this.anchor==="relative"}}}}})],qr.prototype,"anchorPosition",void 0),c([d({type:Au,json:{write:!0}})],qr.prototype,"outline",void 0),c([d({type:Number,json:{write:!0,default:0}})],qr.prototype,"angle",void 0),qr=ga=c([S(tP)],qr);const vo=qr;function tS(e){const t="width"in e?e.width:e.size,r="height"in e?e.height:e.size,i=rS(e.xoffset),s=rS(e.yoffset);return(i||s)&&t&&r?{x:-i/t,y:s/r}:null}function rS(e){return isFinite(e)?e:0}const Dj={circle:"circle",cross:"cross",diamond:"kite",square:"square",x:"x",triangle:"triangle",path:null};function Fj(e){return Dj[e]||(U.getLogger(tP).warn(`${e} cannot be mapped to Icon symbol. Fallback to "circle"`),"circle")}const Uj=["begin","end","begin-end"],rP=["arrow","circle","square","diamond","cross","x"];let Xn=class extends Zt.ClonableMixin(G){constructor(t){super(t),this.type="style",this.placement="begin-end",this.style="arrow",this.color=null}equals(t){return t!=null&&t.placement===this.placement&&t.style===this.style&&(this.color==null&&t.color==null||this.color!=null&&t.color!=null&&this.color.toJSON()===t.color.toJSON())}};c([d({type:["style"],readOnly:!0,json:{read:!0,write:{ignoreOrigin:!0,isRequired:!0}}})],Xn.prototype,"type",void 0),c([d({type:Uj,json:{default:"begin-end",write:!0}})],Xn.prototype,"placement",void 0),c([d({type:rP,json:{default:"arrow",write:!0}})],Xn.prototype,"style",void 0),c([d({type:oe,json:{type:[$e],default:null,write:!0}})],Xn.prototype,"color",void 0),Xn=c([S("esri.symbols.LineStyleMarker3D")],Xn);const j0=Xn;var Bd;let di=Bd=class extends Li{constructor(e){super(e),this.material=null,this.type="line",this.join="miter",this.cap="butt",this.size=No(1),this.pattern=null,this.marker=null}clone(){const e={enabled:this.enabled,material:this.material!=null?this.material.clone():null,size:this.size,join:this.join,cap:this.cap,pattern:this.pattern!=null?this.pattern.clone():null,marker:this.marker!=null?this.marker.clone():null};return new Bd(e)}static fromSimpleLineSymbol(e){var r;const t={enabled:!0,size:e.width??No(1),cap:e.cap||"butt",join:e.join||"miter",pattern:e.style?new Mv({style:e.style}):null,material:new nr({color:(e.color||cc).clone()}),marker:e.marker?new j0({placement:e.marker.placement,style:e.marker.style,color:((r=e.marker.color)==null?void 0:r.clone())??null}):null};return new Bd(t)}};c([d({type:nr,json:{write:!0}})],di.prototype,"material",void 0),c([Y({Line:"line"},{readOnly:!0})],di.prototype,"type",void 0),c([d({type:eP,json:{write:!0,default:"miter"}})],di.prototype,"join",void 0),c([d({type:Av,json:{write:!0,default:"butt"}})],di.prototype,"cap",void 0),c([d({...Ri,json:{write:{isRequired:!0}}})],di.prototype,"size",void 0),c([d(XA)],di.prototype,"pattern",void 0),c([d({types:{key:"type",base:j0,typeMap:{style:j0}},json:{write:!0}})],di.prototype,"marker",void 0),di=Bd=c([S("esri.symbols.LineSymbol3DLayer")],di);const ph=di;var G0;const jj=Wt()({sphere:"sphere",cylinder:"cylinder",cube:"cube",cone:"cone",diamond:"diamond",tetrahedron:"tetrahedron",invertedCone:"inverted-cone"});let Pu=G0=class extends G{clone(){return new G0({href:this.href,primitive:this.primitive})}};c([d({type:String,json:{read:$_,write:ol}})],Pu.prototype,"href",void 0),c([Y(jj)],Pu.prototype,"primitive",void 0),Pu=G0=c([S("esri.symbols.support.ObjectSymbol3DLayerResource")],Pu);const sie="sphere";var z0;let mo=z0=class extends W{constructor(){super(...arguments),this.x=0,this.y=0,this.z=0}clone(){return new z0({x:this.x,y:this.y,z:this.z})}};c([d({type:Number})],mo.prototype,"x",void 0),c([d({type:Number})],mo.prototype,"y",void 0),c([d({type:Number})],mo.prototype,"z",void 0),mo=z0=c([S("esri.symbols.support.Symbol3DAnchorPosition3D")],mo);var V0;let mt=V0=class extends Li{constructor(e){super(e),this.material=null,this.castShadows=!0,this.resource=null,this.type="object",this.width=void 0,this.height=void 0,this.depth=void 0,this.anchor=void 0,this.anchorPosition=void 0,this.heading=void 0,this.tilt=void 0,this.roll=void 0}clone(){var e,t,r;return new V0({heading:this.heading,tilt:this.tilt,roll:this.roll,anchor:this.anchor,anchorPosition:(e=this.anchorPosition)==null?void 0:e.clone(),depth:this.depth,enabled:this.enabled,height:this.height,material:((t=this.material)==null?void 0:t.clone())??null,castShadows:this.castShadows,resource:(r=this.resource)==null?void 0:r.clone(),width:this.width})}get isPrimitive(){return!this.resource||typeof this.resource.href!="string"}};c([d({type:nr,json:{write:!0}})],mt.prototype,"material",void 0),c([d({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],mt.prototype,"castShadows",void 0),c([d({type:Pu,json:{write:!0}})],mt.prototype,"resource",void 0),c([Y({Object:"object"},{readOnly:!0})],mt.prototype,"type",void 0),c([d({type:Number,json:{write:!0}})],mt.prototype,"width",void 0),c([d({type:Number,json:{write:!0}})],mt.prototype,"height",void 0),c([d({type:Number,json:{write:!0}})],mt.prototype,"depth",void 0),c([Y({center:"center",top:"top",bottom:"bottom",origin:"origin",relative:"relative"},{default:"origin"})],mt.prototype,"anchor",void 0),c([d({type:mo,json:{type:[Number],read:{reader:e=>new mo({x:e[0],y:e[1],z:e[2]})},write:{writer:(e,t)=>{t.anchorPosition=[e.x,e.y,e.z]},overridePolicy(){return{enabled:this.anchor==="relative"}}}}})],mt.prototype,"anchorPosition",void 0),c([d({type:Number,json:{write:!0}})],mt.prototype,"heading",void 0),c([d({type:Number,json:{write:!0}})],mt.prototype,"tilt",void 0),c([d({type:Number,json:{write:!0}})],mt.prototype,"roll",void 0),c([d({readOnly:!0})],mt.prototype,"isPrimitive",null),mt=V0=c([S("esri.symbols.ObjectSymbol3DLayer")],mt);const Pv=mt;var B0;let xt=B0=class extends Li{constructor(e){super(e),this.material=null,this.castShadows=!0,this.type="path",this.profile="circle",this.join="miter",this.cap="butt",this.width=void 0,this.height=void 0,this.anchor="center",this.profileRotation="all"}readWidth(e,t){return e??(t.height==null&&t.size!=null?t.size:void 0)}readHeight(e,t){return e??(t.width==null&&t.size!=null?t.size:void 0)}clone(){return new B0({enabled:this.enabled,material:this.material!=null?this.material.clone():null,castShadows:this.castShadows,profile:this.profile,join:this.join,cap:this.cap,width:this.width,height:this.height,profileRotation:this.profileRotation,anchor:this.anchor})}};c([d({type:nr,json:{write:!0}})],xt.prototype,"material",void 0),c([d({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],xt.prototype,"castShadows",void 0),c([Y({Path:"path"},{readOnly:!0})],xt.prototype,"type",void 0),c([d({type:["circle","quad"],json:{write:!0,default:"circle"}})],xt.prototype,"profile",void 0),c([d({type:eP,json:{write:!0,default:"miter"}})],xt.prototype,"join",void 0),c([d({type:Nj,json:{write:!0,default:"butt"}})],xt.prototype,"cap",void 0),c([d({type:Number,json:{write:{enabled:!0,target:{width:{type:Number},size:{type:Number}}}}})],xt.prototype,"width",void 0),c([pe("width",["width","size","height"])],xt.prototype,"readWidth",null),c([d({type:Number,json:{write:!0}})],xt.prototype,"height",void 0),c([pe("height",["height","size","width"])],xt.prototype,"readHeight",null),c([d({type:["center","bottom","top"],json:{write:!0,default:"center"}})],xt.prototype,"anchor",void 0),c([d({type:["heading","all"],json:{write:!0,default:"all"}})],xt.prototype,"profileRotation",void 0),xt=B0=c([S("esri.symbols.PathSymbol3DLayer")],xt);const Ov=xt,Gj=["none","underline","line-through"],zj=["normal","italic","oblique"],Vj=["normal","lighter","bold","bolder"],iP={type:Number,cast:e=>{const t=ir(e);return t===0?1:si(t,.1,4)},nonNullable:!0},Bj=["left","right","center"],Hj=["baseline","top","middle","bottom"],sP={type:Bj,nonNullable:!0},nP={type:Hj,nonNullable:!0},nie=8;var H0;let Yi=H0=class extends G{constructor(e){super(e),this.decoration="none",this.family="sans-serif",this.size=9,this.style="normal",this.weight="normal"}castSize(e){return ke(e)}clone(){return new H0({decoration:this.decoration,family:this.family,size:this.size,style:this.style,weight:this.weight})}hash(){return`${this.decoration}.${this.family}.${this.size}.${this.style}.${this.weight}`}};c([d({type:Gj,json:{default:"none",write:!0}})],Yi.prototype,"decoration",void 0),c([d({type:String,json:{write:!0}})],Yi.prototype,"family",void 0),c([d({type:Number,json:{write:{overridePolicy:(e,t,r)=>({enabled:!r||!r.textSymbol3D})}}})],Yi.prototype,"size",void 0),c([rt("size")],Yi.prototype,"castSize",null),c([d({type:zj,json:{default:"normal",write:!0}})],Yi.prototype,"style",void 0),c([d({type:Vj,json:{default:"normal",write:!0}})],Yi.prototype,"weight",void 0),Yi=H0=c([S("esri.symbols.Font")],Yi);const sm=Yi;var q0;let Na=q0=class extends G{constructor(){super(...arguments),this.color=new oe([0,0,0,1]),this.size=0}clone(){const e={color:C(this.color),size:this.size};return new q0(e)}};c([d(Pn())],Na.prototype,"color",void 0),c([d(Ri)],Na.prototype,"size",void 0),Na=q0=c([S("esri.symbols.support.Symbol3DHalo")],Na);let dc=class extends Zt.ClonableMixin(G){constructor(t){super(t),this.color=null}};c([d(Pn())],dc.prototype,"color",void 0),dc=c([S("esri.symbols.support.Symbol3DTextBackground")],dc);var Hd;let Dt=Hd=class extends Li{constructor(e){super(e),this._userSize=void 0,this.halo=null,this.horizontalAlignment="center",this.lineHeight=1,this.material=null,this.background=null,this.text=null,this.type="text",this.verticalAlignment="baseline"}get font(){return this._get("font")||null}set font(e){e!=null&&this._userSize!=null&&(e.size=this._userSize),this._set("font",e)}writeFont(e,t,r,i){const s={...i,textSymbol3D:!0};t.font=e.write({},s),delete t.font.size}get size(){var e;return this._userSize!=null?this._userSize:((e=this.font)==null?void 0:e.size)!=null?this.font.size:9}set size(e){this._userSize=e,this.font!=null&&(this.font.size=this._userSize),this.notifyChange("size")}clone(){const e=new Hd({enabled:this.enabled,font:this.font&&C(this.font),halo:this.halo&&C(this.halo),horizontalAlignment:this.horizontalAlignment,lineHeight:this.lineHeight,material:this.material!=null?this.material.clone():null,text:this.text,verticalAlignment:this.verticalAlignment,background:C(this.background)});return e._userSize=this._userSize,e}static fromTextSymbol(e){return new Hd({font:e.font!=null?e.font.clone():new sm,halo:qj(e.haloColor,e.haloSize),horizontalAlignment:e.horizontalAlignment,lineHeight:e.lineHeight,material:e.color?new nr({color:e.color.clone()}):null,text:e.text,verticalAlignment:e.verticalAlignment,background:e.backgroundColor?new dc({color:e.backgroundColor.clone()}):null})}};function qj(e,t){return e&&t!=null&&t>0?new Na({color:C(e),size:t}):null}c([d({type:sm,json:{write:!0}})],Dt.prototype,"font",null),c([ae("font")],Dt.prototype,"writeFont",null),c([d({type:Na,json:{write:!0}})],Dt.prototype,"halo",void 0),c([d({...sP,json:{default:"center",write:!0}})],Dt.prototype,"horizontalAlignment",void 0),c([d({...iP,json:{default:1,write:!0}})],Dt.prototype,"lineHeight",void 0),c([d({type:nr,json:{write:!0}})],Dt.prototype,"material",void 0),c([d({type:dc,json:{write:!0}})],Dt.prototype,"background",void 0),c([d(Ri)],Dt.prototype,"size",null),c([d({type:String,json:{write:!0}})],Dt.prototype,"text",void 0),c([Y({Text:"text"},{readOnly:!0})],Dt.prototype,"type",void 0),c([d({...nP,json:{default:"baseline",write:!0}})],Dt.prototype,"verticalAlignment",void 0),Dt=Hd=c([S("esri.symbols.TextSymbol3DLayer")],Dt);const Ol=Dt;var W0;let js=W0=class extends Li{constructor(e){super(e),this.color=Z0.clone(),this.type="water",this.waterbodySize="medium",this.waveDirection=null,this.waveStrength="moderate"}clone(){return new W0({color:C(this.color),waterbodySize:this.waterbodySize,waveDirection:this.waveDirection,waveStrength:this.waveStrength})}};c([d({type:oe,nonNullable:!0,json:{type:[$e],write:(e,t,r)=>t[r]=e.toArray(oe.AlphaMode.UNLESS_OPAQUE),default:()=>Z0.clone(),defaultEquals:e=>e.toCss(!0)===Z0.toCss(!0)}})],js.prototype,"color",void 0),c([Y({Water:"water"},{readOnly:!0})],js.prototype,"type",void 0),c([d({type:["small","medium","large"],json:{write:!0,default:"medium"}})],js.prototype,"waterbodySize",void 0),c([d({type:Number,json:{write:!0,default:null}})],js.prototype,"waveDirection",void 0),c([d({type:["calm","rippled","slight","moderate"],json:{write:!0,default:"moderate"}})],js.prototype,"waveStrength",void 0),js=W0=c([S("esri.symbols.WaterSymbol3DLayer")],js);const oP=js,Z0=new oe([0,119,190]);var J0;let Qn=J0=class extends W{constructor(e){super(e),this.name=null,this.styleUrl=null,this.styleName=null,this.portal=null}clone(){return new J0({name:this.name,styleUrl:this.styleUrl,styleName:this.styleName,portal:this.portal})}};c([d({type:String})],Qn.prototype,"name",void 0),c([d({type:String})],Qn.prototype,"styleUrl",void 0),c([d({type:String})],Qn.prototype,"styleName",void 0),c([d({type:vn})],Qn.prototype,"portal",void 0),Qn=J0=c([S("esri.symbols.support.StyleOrigin")],Qn);const Y0=Qn;var K0;let pc=K0=class extends W{constructor(){super(...arguments),this.url=""}clone(){return new K0({url:this.url})}};c([d({type:String})],pc.prototype,"url",void 0),pc=K0=c([S("esri.symbols.support.Thumbnail")],pc);const aP={icon:vo,object:Pv,line:ph,path:Ov,fill:dh,extrude:ZA,text:Ol,water:oP},Wj=H.ofType({base:Li,key:"type",typeMap:aP,errorContext:"symbol-layer"});let pi=class extends $t{constructor(t){super(t),this.styleOrigin=null,this.thumbnail=null,this.type=null;const r=this.__accessor__&&this.__accessor__.metadata&&this.__accessor__.metadata.symbolLayers,i=r==null?void 0:r.type,s=i||H;this._set("symbolLayers",new s)}get color(){return null}set color(t){this.constructed&&U.getLogger(this).error("Symbol3D does not support colors on the symbol level. Colors may be set on individual symbol layer materials instead.")}set symbolLayers(t){ys(t,this._get("symbolLayers"))}readStyleOrigin(t,r,i){if(t.styleUrl&&t.name){const s=Qc(t.styleUrl,i);return new Y0({styleUrl:s,name:t.name})}if(t.styleName&&t.name)return new Y0({portal:(i==null?void 0:i.portal)||vn.getDefault(),styleName:t.styleName,name:t.name});i!=null&&i.messages&&i.messages.push(new ms("symbol3d:incomplete-style-origin","Style origin requires either a 'styleUrl' or 'styleName' and a 'name' property",{context:i,definition:t}))}writeStyleOrigin(t,r,i,s){if(t.styleUrl&&t.name){let n=Of(t.styleUrl,s);ar(n)&&(n=un(n)),r.styleOrigin={styleUrl:n,name:t.name}}else t.styleName&&t.name&&(t.portal&&(s!=null&&s.portal)&&!rN(t.portal.restUrl,s.portal.restUrl)?s!=null&&s.messages&&s.messages.push(new ms("symbol:cross-portal","The symbol style origin cannot be persisted because it refers to an item on a different portal than the one being saved to.",{symbol:this})):r.styleOrigin={styleName:t.styleName,name:t.name})}normalizeCtorArgs(t){return t instanceof Li||t&&aP[t.type]?{symbolLayers:[t]}:Array.isArray(t)?{symbolLayers:t}:t}};c([d({json:{read:!1,write:!1}})],pi.prototype,"color",null),c([d({type:Wj,nonNullable:!0,json:{write:!0}}),rt(ZE)],pi.prototype,"symbolLayers",null),c([d({type:Y0})],pi.prototype,"styleOrigin",void 0),c([pe("styleOrigin")],pi.prototype,"readStyleOrigin",null),c([ae("styleOrigin",{"styleOrigin.styleUrl":{type:String},"styleOrigin.styleName":{type:String},"styleOrigin.name":{type:String}})],pi.prototype,"writeStyleOrigin",null),c([d({type:pc,json:{read:!1}})],pi.prototype,"thumbnail",void 0),c([d({type:["point-3d","line-3d","polygon-3d","mesh-3d","label-3d"],readOnly:!0})],pi.prototype,"type",void 0),pi=c([S("esri.symbols.Symbol3D")],pi);const fh=pi;let Ou=class extends G{constructor(t){super(t),this.visible=!0}clone(){throw new Error("Subclasses of Callout3D should implement their own clone method.")}};c([d({type:["line"],constructOnly:!0,json:{read:!1,write:{ignoreOrigin:!0,isRequired:!0}}})],Ou.prototype,"type",void 0),c([d({readOnly:!0})],Ou.prototype,"visible",void 0),Ou=c([S("esri.symbols.callouts.Callout3D")],Ou);const lP=Ou;var X0;let qd=X0=class extends G{constructor(e){super(e),this.color=new oe("white")}clone(){return new X0({color:C(this.color)})}};c([d(Pn({colorRequiredOnWrite:!0}))],qd.prototype,"color",void 0),qd=X0=c([S("esri.symbols.callouts.LineCallout3DBorder")],qd);const Zj=qd;var Q0;let Gs=Q0=class extends lP{constructor(e){super(e),this.type="line",this.color=new oe([0,0,0,1]),this.size=No(1),this.border=null}get visible(){return this.size>0&&this.color!=null&&this.color.a>0}clone(){return new Q0({color:C(this.color),size:this.size,border:C(this.border)})}};c([Y({line:"line"})],Gs.prototype,"type",void 0),c([d(Pn({colorRequiredOnWrite:!0}))],Gs.prototype,"color",void 0),c([d({...Ri,json:{write:{isRequired:!0}}})],Gs.prototype,"size",void 0),c([d({type:Zj,json:{write:!0}})],Gs.prototype,"border",void 0),c([d({readOnly:!0})],Gs.prototype,"visible",null),Gs=Q0=c([S("esri.symbols.callouts.LineCallout3D")],Gs);const uP=Gs;function Cv(e){if(!e)return!1;const t=e.verticalOffset;return!(!t||t.screenLength<=0||t.maxWorldLength!=null&&t.maxWorldLength<=0)}function cP(e){if(!e||!e.supportsCallout||!e.supportsCallout())return!1;const t=e.callout;return!!(t!=null&&t.visible)&&!!Cv(e)}function uie(e){return e.type==="point-3d"||e.type==="label-3d"}function cie(e){return e.horizontalAlignment==="center"}const hP={types:{key:"type",base:lP,typeMap:{line:uP}},json:{write:!0}};var e1;let _a=e1=class extends G{constructor(e){super(e),this.screenLength=0,this.minWorldLength=0,this.maxWorldLength=null}clone(){return new e1({screenLength:this.screenLength,minWorldLength:this.minWorldLength,maxWorldLength:this.maxWorldLength})}};c([d({...Ri,json:{write:{isRequired:!0}}})],_a.prototype,"screenLength",void 0),c([d({type:Number,nonNullable:!0,json:{write:!0,default:0}})],_a.prototype,"minWorldLength",void 0),c([d({type:Number,json:{write:!0}})],_a.prototype,"maxWorldLength",void 0),_a=e1=c([S("esri.symbols.support.Symbol3DVerticalOffset")],_a);const Iv=_a;var Wd;const dP=H.ofType({base:null,key:"type",typeMap:{text:Ol}});let zs=Wd=class extends fh{constructor(e){super(e),this.verticalOffset=null,this.callout=null,this.styleOrigin=null,this.symbolLayers=new dP,this.type="label-3d"}supportsCallout(){return!0}hasVisibleCallout(){return cP(this)}hasVisibleVerticalOffset(){return Cv(this)}clone(){return new Wd({styleOrigin:C(this.styleOrigin),symbolLayers:C(this.symbolLayers),thumbnail:C(this.thumbnail),callout:C(this.callout),verticalOffset:C(this.verticalOffset)})}static fromTextSymbol(e){return new Wd({symbolLayers:new H([Ol.fromTextSymbol(e)])})}};c([d({type:Iv,json:{write:!0}})],zs.prototype,"verticalOffset",void 0),c([d(hP)],zs.prototype,"callout",void 0),c([d({json:{read:!1,write:!1}})],zs.prototype,"styleOrigin",void 0),c([d({type:dP})],zs.prototype,"symbolLayers",void 0),c([Y({LabelSymbol3D:"label-3d"},{readOnly:!0})],zs.prototype,"type",void 0),zs=Wd=c([S("esri.symbols.LabelSymbol3D")],zs);const Rv=zs;var Zd;const pP=H.ofType({base:null,key:"type",typeMap:{line:ph,path:Ov}}),Jj=H.ofType({base:null,key:"type",typeMap:{line:ph,path:Ov}});let Cu=Zd=class extends fh{constructor(e){super(e),this.symbolLayers=new pP,this.type="line-3d"}clone(){return new Zd({styleOrigin:C(this.styleOrigin),symbolLayers:C(this.symbolLayers),thumbnail:C(this.thumbnail)})}static fromSimpleLineSymbol(e){return new Zd({symbolLayers:new H([ph.fromSimpleLineSymbol(e)])})}};c([d({type:pP,json:{type:Jj}})],Cu.prototype,"symbolLayers",void 0),c([Y({LineSymbol3D:"line-3d"},{readOnly:!0})],Cu.prototype,"type",void 0),Cu=Zd=c([S("esri.symbols.LineSymbol3D")],Cu);const nm=Cu;var Jd;const fP=H.ofType({base:null,key:"type",typeMap:{fill:dh}});let Iu=Jd=class extends fh{constructor(e){super(e),this.symbolLayers=new fP,this.type="mesh-3d"}clone(){return new Jd({styleOrigin:C(this.styleOrigin),symbolLayers:C(this.symbolLayers),thumbnail:C(this.thumbnail)})}static fromSimpleFillSymbol(e){return new Jd({symbolLayers:new H([dh.fromSimpleFillSymbol(e)])})}};c([d({type:fP})],Iu.prototype,"symbolLayers",void 0),c([Y({MeshSymbol3D:"mesh-3d"},{readOnly:!0})],Iu.prototype,"type",void 0),Iu=Jd=c([S("esri.symbols.MeshSymbol3D")],Iu);const kv=Iu;let Ru=class extends $t{constructor(t){super(t),this.type="simple-line",this.width=.75}hash(){return`${this.type}.${this.width}`}};c([Y({esriSLS:"simple-line"},{readOnly:!0})],Ru.prototype,"type",void 0),c([d({type:Number,cast:ke,json:{write:!0}})],Ru.prototype,"width",void 0),Ru=c([S("esri.symbols.LineSymbol")],Ru);const Yj=Ru;var t1;let fi=t1=class extends G{constructor(e){super(e),this.placement="begin-end",this.type="line-marker",this.style="arrow"}writeStyle(e,t,r,i){t[r]=(i==null?void 0:i.origin)==="web-map"?"arrow":e}set color(e){this._set("color",e)}readColor(e){return(e==null?void 0:e[0])!=null?[e[0],e[1],e[2],e[3]/255]:e}writeColor(e,t,r,i){(i==null?void 0:i.origin)==="web-map"||(t[r]=e)}clone(){return new t1({color:C(this.color),placement:this.placement,style:this.style})}hash(){var e;return`${this.placement}.${(e=this.color)==null?void 0:e.hash()}.${this.style}`}};c([d({type:["begin","end","begin-end"],json:{write:!0}})],fi.prototype,"placement",void 0),c([Y({"line-marker":"line-marker"},{readOnly:!0}),d({json:{origins:{"web-map":{write:!1}}}})],fi.prototype,"type",void 0),c([d({type:rP})],fi.prototype,"style",void 0),c([ae("style")],fi.prototype,"writeStyle",null),c([d({type:oe,value:null,json:{write:{allowNull:!0}}})],fi.prototype,"color",null),c([pe("color")],fi.prototype,"readColor",null),c([ae("color")],fi.prototype,"writeColor",null),fi=t1=c([S("esri.symbols.LineSymbolMarker")],fi);const Kj=fi;var r1;const ly=new it({esriSLSSolid:"solid",esriSLSDash:"dash",esriSLSDot:"dot",esriSLSDashDot:"dash-dot",esriSLSDashDotDot:"long-dash-dot-dot",esriSLSNull:"none",esriSLSShortDash:"short-dash",esriSLSShortDot:"short-dot",esriSLSShortDashDot:"short-dash-dot",esriSLSShortDashDotDot:"short-dash-dot-dot",esriSLSLongDash:"long-dash",esriSLSLongDashDot:"long-dash-dot"});let Ki=r1=class extends Yj{constructor(...e){super(...e),this.type="simple-line",this.style="solid",this.cap="round",this.join="round",this.marker=null,this.miterLimit=2}normalizeCtorArgs(e,t,r,i,s,n){if(e&&typeof e!="string")return e;const o={};return e!=null&&(o.style=e),t!=null&&(o.color=t),r!=null&&(o.width=ke(r)),i!=null&&(o.cap=i),s!=null&&(o.join=s),n!=null&&(o.miterLimit=ke(n)),o}clone(){var e;return new r1({color:C(this.color),style:this.style,width:this.width,cap:this.cap,join:this.join,miterLimit:this.miterLimit,marker:(e=this.marker)==null?void 0:e.clone()})}hash(){var e,t;return`${super.hash()}.${(e=this.color)==null?void 0:e.hash()}.${this.style}.${this.cap}.${this.join}.${this.miterLimit}.${(t=this.marker)==null?void 0:t.hash()}`}};c([Y({esriSLS:"simple-line"},{readOnly:!0})],Ki.prototype,"type",void 0),c([d({type:ly.apiValues,json:{read:ly.read,write:ly.write}})],Ki.prototype,"style",void 0),c([d({type:["butt","round","square"],json:{write:{overridePolicy:(e,t,r)=>({enabled:e!=="round"&&(r==null?void 0:r.origin)==null})}}})],Ki.prototype,"cap",void 0),c([d({type:["miter","round","bevel"],json:{write:{overridePolicy:(e,t,r)=>({enabled:e!=="round"&&(r==null?void 0:r.origin)==null})}}})],Ki.prototype,"join",void 0),c([d({types:{key:"type",base:null,defaultKeyValue:"line-marker",typeMap:{"line-marker":Kj}},json:{write:!0,origins:{"web-scene":{write:!1}}}})],Ki.prototype,"marker",void 0),c([d({type:Number,json:{read:!1,write:!1}})],Ki.prototype,"miterLimit",void 0),Ki=r1=c([S("esri.symbols.SimpleLineSymbol")],Ki);const Wo=Ki;let ku=class extends $t{constructor(t){super(t),this.outline=null,this.type=null}hash(){var t;return`${this.type}.${(t=this.outline)==null?void 0:t.hash()}`}};c([d({types:{key:"type",base:null,defaultKeyValue:"simple-line",typeMap:{"simple-line":Wo}},json:{default:null,write:!0}})],ku.prototype,"outline",void 0),c([d({type:["simple-fill","picture-fill"],readOnly:!0})],ku.prototype,"type",void 0),ku=c([S("esri.symbols.FillSymbol")],ku);const mP=ku;function Xj(e,t,r){return t.imageData?PE({mediaType:t.contentType||"image/png",isBase64:!0,data:t.imageData}):yP(t.url,r)}function yP(e,t){if(!ar(e)){const r=eG(t);if(r)return Pf(r,"images",e)}return Qc(e,t)}function Qj(e,t,r,i){if(jo(e)){const s=nl(e);if(!s)return;t.contentType=s.mediaType,t.imageData=s.data,r&&r.imageData===t.imageData&&r.url&&ol(r.url,t,"url",i)}else ol(e,t,"url",i)}const gP={json:{read:{source:["imageData","url"],reader:Xj},write:{writer(e,t,r,i){Qj(e,t,this.source,i)}}}},_P={readOnly:!0,json:{read:{source:["imageData","url"],reader(e,t,r){const i={};return t.imageData&&(i.imageData=t.imageData),t.contentType&&(i.contentType=t.contentType),t.url&&(i.url=yP(t.url,r)),i}}}};function eG(e){var s,n;if(!e)return null;const{origin:t,layer:r}=e;if(t!=="service"&&t!=="portal-item")return null;const i=r==null?void 0:r.type;return i==="feature"||i==="stream"?(s=r.parsedUrl)==null?void 0:s.path:i==="map-image"||i==="tile"?(n=e.url)==null?void 0:n.path:null}var i1;let _r=i1=class extends mP{constructor(...e){super(...e),this.type="picture-fill",this.url=null,this.xscale=1,this.yscale=1,this.width=12,this.height=12,this.xoffset=0,this.yoffset=0,this.source=null}normalizeCtorArgs(e,t,r,i){if(e&&typeof e!="string"&&e.imageData==null)return e;const s={};return e&&(s.url=e),t&&(s.outline=t),r!=null&&(s.width=ke(r)),i!=null&&(s.height=ke(i)),s}clone(){const e=new i1({color:C(this.color),height:this.height,outline:C(this.outline),url:this.url,width:this.width,xoffset:this.xoffset,xscale:this.xscale,yoffset:this.yoffset,yscale:this.yscale});return e._set("source",C(this.source)),e}hash(){var e;return`${super.hash()}.${(e=this.color)==null?void 0:e.hash()}.${this.height}.${this.url}.${this.width}.${this.xoffset}.${this.xscale}.${this.yoffset}.${this.yscale}`}};c([Y({esriPFS:"picture-fill"},{readOnly:!0})],_r.prototype,"type",void 0),c([d(gP)],_r.prototype,"url",void 0),c([d({type:Number,json:{write:!0}})],_r.prototype,"xscale",void 0),c([d({type:Number,json:{write:!0}})],_r.prototype,"yscale",void 0),c([d({type:Number,cast:ke,json:{write:!0}})],_r.prototype,"width",void 0),c([d({type:Number,cast:ke,json:{write:!0}})],_r.prototype,"height",void 0),c([d({type:Number,cast:ke,json:{write:!0}})],_r.prototype,"xoffset",void 0),c([d({type:Number,cast:ke,json:{write:!0}})],_r.prototype,"yoffset",void 0),c([d(_P)],_r.prototype,"source",void 0),_r=i1=c([S("esri.symbols.PictureFillSymbol")],_r);const Nv=_r;let Vs=class extends $t{constructor(t){super(t),this.angle=0,this.type=null,this.xoffset=0,this.yoffset=0,this.size=9}hash(){return`${this.type}.${this.angle}.${this.size}.${this.xoffset}.${this.yoffset}`}};c([d({type:Number,json:{read:e=>e&&-1*e,write:(e,t)=>t.angle=e&&-1*e}})],Vs.prototype,"angle",void 0),c([d({type:["simple-marker","picture-marker"],readOnly:!0})],Vs.prototype,"type",void 0),c([d({type:Number,cast:ke,json:{write:!0}})],Vs.prototype,"xoffset",void 0),c([d({type:Number,cast:ke,json:{write:!0}})],Vs.prototype,"yoffset",void 0),c([d({cast:e=>e==="auto"?e:ir(ke(e)),json:{write:!0}})],Vs.prototype,"size",void 0),Vs=c([S("esri.symbols.MarkerSymbol")],Vs);const vP=Vs;var s1;let Wr=s1=class extends vP{constructor(...e){super(...e),this.color=null,this.type="picture-marker",this.url=null,this.source=null,this.height=12,this.width=12,this.size=null}normalizeCtorArgs(e,t,r){if(e&&typeof e!="string"&&e.imageData==null)return e;const i={};return e&&(i.url=e),t!=null&&(i.width=ke(t)),r!=null&&(i.height=ke(r)),i}readHeight(e,t){return t.size||e}readWidth(e,t){return t.size||e}clone(){const e=new s1({angle:this.angle,height:this.height,url:this.url,width:this.width,xoffset:this.xoffset,yoffset:this.yoffset});return e._set("source",C(this.source)),e}hash(){return`${super.hash()}.${this.height}.${this.url}.${this.width}`}};c([d({json:{write:!1}})],Wr.prototype,"color",void 0),c([Y({esriPMS:"picture-marker"},{readOnly:!0})],Wr.prototype,"type",void 0),c([d(gP)],Wr.prototype,"url",void 0),c([d(_P)],Wr.prototype,"source",void 0),c([d({type:Number,cast:ke,json:{write:!0}})],Wr.prototype,"height",void 0),c([pe("height",["height","size"])],Wr.prototype,"readHeight",null),c([d({type:Number,cast:ke,json:{write:!0}})],Wr.prototype,"width",void 0),c([d({json:{write:!1}})],Wr.prototype,"size",void 0),Wr=s1=c([S("esri.symbols.PictureMarkerSymbol")],Wr);const om=Wr;var eo;const wP=H.ofType({base:null,key:"type",typeMap:{icon:vo,object:Pv,text:Ol}});let to=eo=class extends fh{constructor(e){super(e),this.verticalOffset=null,this.callout=null,this.symbolLayers=new wP,this.type="point-3d"}supportsCallout(){if((this.symbolLayers?this.symbolLayers.length:0)<1)return!1;for(const e of this.symbolLayers.items)switch(e.type){case"icon":case"text":case"object":continue;default:return!1}return!0}hasVisibleCallout(){return cP(this)}hasVisibleVerticalOffset(){return Cv(this)}clone(){return new eo({verticalOffset:C(this.verticalOffset),callout:C(this.callout),styleOrigin:C(this.styleOrigin),symbolLayers:C(this.symbolLayers),thumbnail:C(this.thumbnail)})}static fromSimpleMarkerSymbol(e){return new eo({symbolLayers:new H([vo.fromSimpleMarkerSymbol(e)])})}static fromPictureMarkerSymbol(e){return new eo({symbolLayers:new H([vo.fromPictureMarkerSymbol(e)])})}static fromCIMSymbol(e){var i,s;if(((s=(i=e.data)==null?void 0:i.symbol)==null?void 0:s.type)!=="CIMPointSymbol")return null;const r=e.data.symbol;return new eo(r!=null&&r.callout?{symbolLayers:new H([vo.fromCIMSymbol(e)]),callout:new uP({size:.5,color:new oe([0,0,0])}),verticalOffset:new Iv({screenLength:40})}:{symbolLayers:new H([vo.fromCIMSymbol(e)])})}static fromTextSymbol(e){return new eo({symbolLayers:new H([Ol.fromTextSymbol(e)])})}};c([d({type:Iv,json:{write:!0}})],to.prototype,"verticalOffset",void 0),c([d(hP)],to.prototype,"callout",void 0),c([d({type:wP,json:{origins:{"web-scene":{write:!0}}}})],to.prototype,"symbolLayers",void 0),c([Y({PointSymbol3D:"point-3d"},{readOnly:!0})],to.prototype,"type",void 0),to=eo=c([S("esri.symbols.PointSymbol3D")],to);const am=to;var Nu;const bP=H.ofType({base:null,key:"type",typeMap:{extrude:ZA,fill:dh,icon:vo,line:ph,object:Pv,text:Ol,water:oP}});let Lu=Nu=class extends fh{constructor(e){super(e),this.symbolLayers=new bP,this.type="polygon-3d"}initialize(){const e=t=>{t.type==="line"&&vc(U.getLogger(this),"LineSymbol3DLayer can not be used as a SymbolLayer with a PolygonSymbol3D symbol anymore.",{replacement:"Use FillSymbol3DLayer.outline instead.",version:"4.28"}),t.type==="text"&&vc(U.getLogger(this),"TextSymbol3DLayer can not be used as a SymbolLayer with a PolygonSymbol3D symbol anymore.",{replacement:"Use Labels instead.",version:"4.28"})};for(const t of this.symbolLayers)e(t);this.addHandles(wn(()=>this.symbolLayers,"after-add",({item:t})=>e(t),bn))}clone(){return new Nu({styleOrigin:C(this.styleOrigin),symbolLayers:C(this.symbolLayers),thumbnail:C(this.thumbnail)})}static fromJSON(e){var r;const t=new Nu;if(t.read(e),t.symbolLayers.length===2&&t.symbolLayers.at(0).type==="fill"&&t.symbolLayers.at(1).type==="line"){const i=t.symbolLayers.at(0),s=t.symbolLayers.at(1);!s.enabled||(r=e.symbolLayers)!=null&&r[1]&&e.symbolLayers[1].enable===!1||(i.outline={size:s.size,color:s.material!=null?s.material.color:null}),t.symbolLayers.removeAt(1)}return t}static fromSimpleFillSymbol(e){return new Nu({symbolLayers:new H([dh.fromSimpleFillSymbol(e)])})}};c([d({type:bP,json:{write:!0}})],Lu.prototype,"symbolLayers",void 0),c([Y({PolygonSymbol3D:"polygon-3d"},{readOnly:!0})],Lu.prototype,"type",void 0),Lu=Nu=c([S("esri.symbols.PolygonSymbol3D")],Lu);const lm=Lu;var n1;const uy=new it({esriSFSSolid:"solid",esriSFSNull:"none",esriSFSHorizontal:"horizontal",esriSFSVertical:"vertical",esriSFSForwardDiagonal:"forward-diagonal",esriSFSBackwardDiagonal:"backward-diagonal",esriSFSCross:"cross",esriSFSDiagonalCross:"diagonal-cross"});let ro=n1=class extends mP{constructor(...e){super(...e),this.color=new oe([0,0,0,.25]),this.outline=new Wo,this.type="simple-fill",this.style="solid"}normalizeCtorArgs(e,t,r){if(e&&typeof e!="string")return e;const i={};return e&&(i.style=e),t&&(i.outline=t),r&&(i.color=r),i}clone(){return new n1({color:C(this.color),outline:this.outline&&this.outline.clone(),style:this.style})}hash(){return`${super.hash()}${this.style}.${this.color&&this.color.hash()}`}};c([d()],ro.prototype,"color",void 0),c([d()],ro.prototype,"outline",void 0),c([Y({esriSFS:"simple-fill"},{readOnly:!0})],ro.prototype,"type",void 0),c([d({type:uy.apiValues,json:{read:uy.read,write:uy.write}})],ro.prototype,"style",void 0),ro=n1=c([S("esri.symbols.SimpleFillSymbol")],ro);const Lv=ro;var o1;const cy=new it({esriSMSCircle:"circle",esriSMSSquare:"square",esriSMSCross:"cross",esriSMSX:"x",esriSMSDiamond:"diamond",esriSMSTriangle:"triangle",esriSMSPath:"path"});let mi=o1=class extends vP{constructor(...e){super(...e),this.color=new oe([255,255,255,.25]),this.type="simple-marker",this.size=12,this.style="circle",this.outline=new Wo}normalizeCtorArgs(e,t,r,i){if(e&&typeof e!="string")return e;const s={};return e&&(s.style=e),t!=null&&(s.size=ke(t)),r&&(s.outline=r),i&&(s.color=i),s}writeColor(e,t){e&&this.style!=="x"&&this.style!=="cross"&&(t.color=e.toJSON()),e===null&&(t.color=null)}set path(e){this.style="path",this._set("path",e)}clone(){return new o1({angle:this.angle,color:C(this.color),outline:this.outline&&this.outline.clone(),path:this.path,size:this.size,style:this.style,xoffset:this.xoffset,yoffset:this.yoffset})}hash(){var e;return`${super.hash()}.${this.color&&this.color.hash()}.${this.path}.${this.style}.${(e=this.outline)==null?void 0:e.hash()}`}};c([d()],mi.prototype,"color",void 0),c([ae("color")],mi.prototype,"writeColor",null),c([Y({esriSMS:"simple-marker"},{readOnly:!0})],mi.prototype,"type",void 0),c([d()],mi.prototype,"size",void 0),c([d({type:cy.apiValues,json:{read:cy.read,write:cy.write}})],mi.prototype,"style",void 0),c([d({type:String,json:{write:!0}})],mi.prototype,"path",null),c([d({types:{key:"type",base:null,defaultKeyValue:"simple-line",typeMap:{"simple-line":Wo}},json:{default:null,write:!0}})],mi.prototype,"outline",void 0),mi=o1=c([S("esri.symbols.SimpleMarkerSymbol")],mi);const um=mi;var a1;let Pe=a1=class extends $t{constructor(...e){super(...e),this.backgroundColor=null,this.borderLineColor=null,this.borderLineSize=null,this.font=new sm,this.horizontalAlignment="center",this.kerning=!0,this.haloColor=null,this.haloSize=null,this.rightToLeft=null,this.rotated=!1,this.text="",this.type="text",this.verticalAlignment="baseline",this.xoffset=0,this.yoffset=0,this.angle=0,this.width=null,this.lineWidth=192,this.lineHeight=1}normalizeCtorArgs(e,t,r){if(e&&typeof e!="string")return e;const i={};return e&&(i.text=e),t&&(i.font=t),r&&(i.color=r),i}writeLineWidth(e,t,r,i){i&&typeof i!="string"?i.origin:t[r]=e}castLineWidth(e){return ke(e)}writeLineHeight(e,t,r,i){i&&typeof i!="string"?i.origin:t[r]=e}clone(){return new a1({angle:this.angle,backgroundColor:C(this.backgroundColor),borderLineColor:C(this.borderLineColor),borderLineSize:this.borderLineSize,color:C(this.color),font:this.font&&this.font.clone(),haloColor:C(this.haloColor),haloSize:this.haloSize,horizontalAlignment:this.horizontalAlignment,kerning:this.kerning,lineHeight:this.lineHeight,lineWidth:this.lineWidth,rightToLeft:this.rightToLeft,rotated:this.rotated,text:this.text,verticalAlignment:this.verticalAlignment,width:this.width,xoffset:this.xoffset,yoffset:this.yoffset})}hash(){var e,t,r;return`${(e=this.backgroundColor)==null?void 0:e.hash()}.${this.borderLineColor}.${this.borderLineSize}.${(t=this.color)==null?void 0:t.hash()}.${this.font&&this.font.hash()}.${(r=this.haloColor)==null?void 0:r.hash()}.${this.haloSize}.${this.horizontalAlignment}.${this.kerning}.${this.rightToLeft}.${this.rotated}.${this.text}.${this.verticalAlignment}.${this.width}.${this.xoffset}.${this.yoffset}.${this.lineHeight}.${this.lineWidth}.${this.angle}`}};c([d({type:oe,json:{write:!0}})],Pe.prototype,"backgroundColor",void 0),c([d({type:oe,json:{write:!0}})],Pe.prototype,"borderLineColor",void 0),c([d({type:Number,json:{write:!0},cast:ke})],Pe.prototype,"borderLineSize",void 0),c([d({type:sm,json:{write:!0}})],Pe.prototype,"font",void 0),c([d({...sP,json:{write:!0}})],Pe.prototype,"horizontalAlignment",void 0),c([d({type:Boolean,json:{write:!0}})],Pe.prototype,"kerning",void 0),c([d({type:oe,json:{write:!0}})],Pe.prototype,"haloColor",void 0),c([d({type:Number,cast:ke,json:{write:!0}})],Pe.prototype,"haloSize",void 0),c([d({type:Boolean,json:{write:!0}})],Pe.prototype,"rightToLeft",void 0),c([d({type:Boolean,json:{write:!0}})],Pe.prototype,"rotated",void 0),c([d({type:String,json:{write:!0}})],Pe.prototype,"text",void 0),c([Y({esriTS:"text"},{readOnly:!0})],Pe.prototype,"type",void 0),c([d({...nP,json:{write:!0}})],Pe.prototype,"verticalAlignment",void 0),c([d({type:Number,cast:ke,json:{write:!0}})],Pe.prototype,"xoffset",void 0),c([d({type:Number,cast:ke,json:{write:!0}})],Pe.prototype,"yoffset",void 0),c([d({type:Number,json:{read:e=>e&&-1*e,write:(e,t)=>t.angle=e&&-1*e}})],Pe.prototype,"angle",void 0),c([d({type:Number,json:{write:!0}})],Pe.prototype,"width",void 0),c([d({type:Number})],Pe.prototype,"lineWidth",void 0),c([ae("lineWidth")],Pe.prototype,"writeLineWidth",null),c([rt("lineWidth")],Pe.prototype,"castLineWidth",null),c([d(iP)],Pe.prototype,"lineHeight",void 0),c([ae("lineHeight")],Pe.prototype,"writeLineHeight",null),Pe=a1=c([S("esri.symbols.TextSymbol")],Pe);const cm=Pe;var l1;let Zr=l1=class extends $t{constructor(e){super(e),this.color=null,this.styleName=null,this.portal=null,this.styleUrl=null,this.thumbnail=null,this.name=null,this.type="web-style"}get _fetchCacheKey(){const e=this.portal!=null?this.portal:vn.getDefault(),t=e.user?e.user.username:null;return`${this.styleName}:${this.styleUrl}:${this.name}:${t}:${e.url}`}read(e,t){this.portal=t==null?void 0:t.portal,super.read(e,t)}clone(){return new l1({name:this.name,styleUrl:this.styleUrl,styleName:this.styleName,portal:this.portal})}fetchSymbol(e){const t=e&&"acceptedFormats"in e?e.acceptedFormats:["web"];return this._fetchSymbol({...e,acceptedFormats:t})}async fetchCIMSymbol(e){const t=await this.fetchSymbol({...e,acceptedFormats:["cim"]});if((t==null?void 0:t.type)!=="cim")throw new I("webstylesymbol:fetchCIMSymbol","Resolved web style symbol is not of type 'cim'");return t}async _fetchSymbol(e){const t=e!=null?e.cache:null,r=t?this._fetchCacheKey:null;if(t!=null){const o=r&&t.get(r);if(o)return o.clone()}const{resolveWebStyleSymbol:i}=await N(()=>import("./webStyleSymbolUtils-C6MLMrnx.js"),__vite__mapDeps([255,256,201,115,66,203,257]));Be(e);const s=i(this,{portal:this.portal},e);s.catch(o=>{U.getLogger(this).error("#fetchSymbol()","Failed to create symbol from style",o)});const n=await s;return t!=null&&t.set(r,n.clone()),n}};c([d({json:{write:!1}})],Zr.prototype,"color",void 0),c([d({type:String,json:{write:!0}})],Zr.prototype,"styleName",void 0),c([d({type:vn,json:{write:!1}})],Zr.prototype,"portal",void 0),c([d({type:String,json:{read:$_,write:ol}})],Zr.prototype,"styleUrl",void 0),c([d({type:pc,json:{read:!1}})],Zr.prototype,"thumbnail",void 0),c([d({type:String,json:{write:!0}})],Zr.prototype,"name",void 0),c([Y({styleSymbolReference:"web-style"},{readOnly:!0})],Zr.prototype,"type",void 0),c([d()],Zr.prototype,"_fetchCacheKey",null),Zr=l1=c([S("esri.symbols.WebStyleSymbol")],Zr);const hm=Zr;function fie(e){if(!e)return!1;switch(e.type){case"picture-fill":case"picture-marker":case"simple-fill":case"simple-line":case"simple-marker":case"text":case"cim":return!0;default:return!1}}function mie(e){switch(e==null?void 0:e.type){case"label-3d":case"line-3d":case"mesh-3d":case"point-3d":case"polygon-3d":return!0;default:return!1}}const Dv={base:$t,key:"type",typeMap:{"simple-fill":Lv,"picture-fill":Nv,"picture-marker":om,"simple-line":Wo,"simple-marker":um,text:cm,"label-3d":Rv,"line-3d":nm,"mesh-3d":kv,"point-3d":am,"polygon-3d":lm,"web-style":hm,cim:qo},errorContext:"symbol"},yie={base:$t,key:"type",typeMap:{"picture-marker":om,"simple-marker":um,"point-3d":am,cim:qo},errorContext:"symbol"},gie={base:$t,key:"type",typeMap:{"simple-line":Wo,"line-3d":nm,cim:qo},errorContext:"symbol"},_ie={base:$t,key:"type",typeMap:{"simple-fill":Lv,"picture-fill":Nv,"polygon-3d":lm,cim:qo},errorContext:"symbol"},vie={base:$t,key:"type",typeMap:{"picture-marker":om,"simple-marker":um,text:cm,"web-style":hm,cim:qo},errorContext:"symbol"},wie=c_({types:Dv}),bie={base:$t,key:"type",typeMap:{"simple-fill":Lv,"picture-fill":Nv,"picture-marker":om,"simple-line":Wo,"simple-marker":um,text:cm,"line-3d":nm,"mesh-3d":kv,"point-3d":am,"polygon-3d":lm,"web-style":hm,cim:qo},errorContext:"symbol"},Sie={base:$t,key:"type",typeMap:{text:cm,"label-3d":Rv},errorContext:"symbol"},Tie={base:$t,key:"type",typeMap:{"line-3d":nm,"mesh-3d":kv,"point-3d":am,"polygon-3d":lm,"web-style":hm,cim:qo},errorContext:"symbol"},$ie={base:$t,key:"type",typeMap:{"label-3d":Rv},errorContext:"symbol"},Eie=mn(Dv);var u1;function tG(e){if(!e)return null;const t={};for(const r in e){const i=fl(e[r]);i&&(t[r]=i)}return Object.keys(t).length!==0?t:null}function rG(e){if(e==null)return null;const t={};for(const r in e){const i=e[r];i&&(t[r]=i.toJSON())}return Object.keys(t).length!==0?t:null}let Ft=u1=class extends Zt.ClonableMixin(G){constructor(e){super(e),this.isAggregate=!1,this.layer=null,this.origin=null,this.popupTemplate=null,this.sourceLayer=null,this._version=0,Object.defineProperty(this,"uid",{value:dd(),configurable:!0}),Object.defineProperty(this,"_lastMeshTransform",{value:{},configurable:!0,writable:!0,enumerable:!1}),arguments.length>1&&FI(U.getLogger(this),"Graphic",{version:"4.30"})}initialize(){this._watchMeshGeometryChanges()}set aggregateGeometries(e){const t=this._get("aggregateGeometries");JSON.stringify(t)!==JSON.stringify(e)&&this._set("aggregateGeometries",e)}set attributes(e){const t=this._get("attributes");t!==e&&(this._set("attributes",e),this._notifyLayer("attributes",t,e))}set geometry(e){const t=this._get("geometry");t!==e&&(this._set("geometry",e),(e==null?void 0:e.type)!=="mesh"&&this._notifyLayer("geometry",t,e))}set symbol(e){const t=this._get("symbol");t!==e&&(this._set("symbol",e),this._notifyLayer("symbol",t,e))}get version(){return this._version}set visible(e){const t=this._get("visible");t!==e&&(this._set("visible",e),this._notifyLayer("visible",t,e))}cloneShallow(){return new u1({aggregateGeometries:this.aggregateGeometries,attributes:this.attributes,geometry:this.geometry,isAggregate:this.isAggregate,layer:this.layer,popupTemplate:this.popupTemplate,sourceLayer:this.sourceLayer,symbol:this.symbol,visible:this.visible,origin:this.origin})}getEffectivePopupTemplate(e=!1){if(this.popupTemplate)return this.popupTemplate;const t=this.origin&&"layer"in this.origin?this.origin.layer:null;for(const r of[t,this.sourceLayer,this.layer])if(r){if("popupTemplate"in r&&r.popupTemplate)return r.popupTemplate;if(e&&"defaultPopupTemplate"in r&&r.defaultPopupTemplate!=null)return r.defaultPopupTemplate}return null}getAttribute(e){var t;return(t=this.attributes)==null?void 0:t[e]}setAttribute(e,t){if(this.attributes){const r=this.getAttribute(e);this.attributes[e]=t,this._notifyLayer("attributes",r,t,e)}else this.attributes={[e]:t},this._notifyLayer("attributes",void 0,t,e)}getObjectId(){return this.sourceLayer&&"objectIdField"in this.sourceLayer&&this.sourceLayer.objectIdField?this.getAttribute(this.sourceLayer.objectIdField):null}toJSON(){var e;return{aggregateGeometries:rG(this.aggregateGeometries),geometry:this.geometry!=null?this.geometry.toJSON():null,symbol:this.symbol!=null?this.symbol.toJSON():null,attributes:G.isSerializable(this.attributes)?this.attributes.toJSON():{...this.attributes},popupTemplate:((e=this.popupTemplate)==null?void 0:e.toJSON())??null}}notifyMeshTransformChanged(e={}){const{geometry:t}=this;if((t==null?void 0:t.type)==="mesh"){const r={origin:t.origin,transform:t.transform};this._notifyLayer("origin-transform",r,r,e.action)}}_notifyLayer(e,t,r,i){if(this._version++,!this.layer||!("graphicChanged"in this.layer))return;const s={graphic:this,property:e,oldValue:t,newValue:r};e==="origin-transform"&&(s.action=i),e==="attributes"&&(s.attributeName=i),this.layer.graphicChanged(s)}_watchMeshGeometryChanges(){this.addHandles([Cr(()=>{var e,t;return((e=this.geometry)==null?void 0:e.type)==="mesh"&&this.geometry.vertexSpace.origin?{localMatrix:(t=this.geometry.transform)==null?void 0:t.localMatrix,origin:this.geometry.vertexSpace.origin}:void 0},({localMatrix:e,origin:t})=>{this._lastMeshTransform.localMatrix===e&&this._lastMeshTransform.origin===t||(this._lastMeshTransform.localMatrix=e,this._lastMeshTransform.origin=t,this.notifyMeshTransformChanged())}),Cr(()=>{var e;return((e=this.geometry)==null?void 0:e.type)==="mesh"?{vertexAttributes:this.geometry.vertexAttributes}:void 0},()=>{var t;const e=this.geometry;(e==null?void 0:e.type)==="mesh"&&e.vertexSpace.origin?(this._lastMeshTransform.localMatrix=(t=e.transform)==null?void 0:t.localMatrix,this._lastMeshTransform.origin=e.vertexSpace.origin):(this._lastMeshTransform.localMatrix=void 0,this._lastMeshTransform.origin=void 0),this._notifyLayer("geometry",this.geometry,this.geometry)},{equals:(e,t)=>e===t,sync:!0})])}};c([d({value:null,json:{read:tG}})],Ft.prototype,"aggregateGeometries",null),c([d({value:null})],Ft.prototype,"attributes",null),c([d({value:null,types:cv,json:{read:fl}})],Ft.prototype,"geometry",null),c([d({type:Boolean})],Ft.prototype,"isAggregate",void 0),c([d({clonable:"reference"})],Ft.prototype,"layer",void 0),c([d({clonable:"reference"})],Ft.prototype,"origin",void 0),c([d({type:mj})],Ft.prototype,"popupTemplate",void 0),c([d({clonable:"reference"})],Ft.prototype,"sourceLayer",void 0),c([d({value:null,types:Dv})],Ft.prototype,"symbol",null),c([d({clonable:!1,json:{read:!1,write:!1}})],Ft.prototype,"_version",void 0),c([d({type:Boolean,value:!0})],Ft.prototype,"visible",null),Ft=u1=c([S("esri.Graphic")],Ft);const c1=Ft;let fc=class extends lc{_own(t){t.layer&&"remove"in t.layer&&t.layer!==this.owner&&t.layer.remove(t),t.layer=this.owner}_release(t){t.layer===this.owner&&(t.layer=null)}};c([qE({Type:c1,ensureType:kt(c1)})],fc.prototype,"itemType",void 0),fc=c([S("esri.support.GraphicsCollection")],fc);let Bs=class extends W{constructor(t){super(t),this.view=null,this.baseLayerViews=new H,this.referenceLayerViews=new H,this._loadingHandle=Q(()=>{var r,i;return(i=(r=this.view)==null?void 0:r.map)==null?void 0:i.basemap},r=>{r&&r.load().catch(()=>{})},Tt)}destroy(){this._set("view",null),this._loadingHandle&&(this._loadingHandle.remove(),this._loadingHandle=null);for(const t of this.baseLayerViews)t.destroy();this.baseLayerViews.length=0;for(const t of this.referenceLayerViews)t.destroy();this.referenceLayerViews.length=0}get suspended(){var t;return((t=this.view)==null?void 0:t.suspended)??!0}get updating(){var r,i,s;if((r=this.view)!=null&&r.suspended)return!1;const t=(s=(i=this.view)==null?void 0:i.map)==null?void 0:s.basemap;return!!(t!=null&&t.loaded)&&(this.baseLayerViews.some(n=>n.updating)||this.referenceLayerViews.some(n=>n.updating))}};c([d({constructOnly:!0})],Bs.prototype,"view",void 0),c([d({readOnly:!0})],Bs.prototype,"baseLayerViews",void 0),c([d({readOnly:!0})],Bs.prototype,"referenceLayerViews",void 0),c([d({readOnly:!0})],Bs.prototype,"suspended",null),c([d({type:Boolean,readOnly:!0})],Bs.prototype,"updating",null),Bs=c([S("esri.views.BasemapView")],Bs);const iG=Bs;function sG(e){return"tryRecycleWith"in e}function nG(e){return e!=null&&typeof e=="object"&&"layerViews"in e}let oG=class{constructor(t,r,i){this.layer=t,this.view=r,this.layerViewImporter=i,this._controller=new AbortController,this._deferred=Or(),this._started=!1,this.done=!1,this.promise=this._deferred.promise,Ar(this._controller.signal,()=>{const s=new I("cancelled:layerview-create","layerview creation cancelled",{layer:t});this._deferred.reject(s)})}tryRecycle(t){if(!this.done||!this.layerView||!sG(this.layerView))return null;const r=this.layer.type,i=this._controller.signal;for(let s=0;s<t.length;s++){const n=t[s];if(n.type!==r)continue;const o=this.layerView.tryRecycleWith(n,{signal:i});if(o){t.splice(s,1),this.layer=n;const a=this.layerView,l=a.view;return this.promise=Promise.race([o.then(()=>(Be(this._controller.signal),n.emit("layerview-destroy",{view:l,layerView:a}),l.emit("layerview-destroy",{view:l,layerView:a}),n.emit("layerview-create",{view:l,layerView:a}),l.emit("layerview-create",{view:l,layerView:a}),a)),new Promise((h,p)=>Ar(this._controller.signal,()=>p(Ee())))]),this.promise}}return null}destroy(){this._controller.abort();const{layerView:t}=this;if(t){const{layer:r,view:i}=this;r.emit("layerview-destroy",{view:i,layerView:t}),i.emit("layerview-destroy",{layer:r,layerView:t})}this.done=!0,this.layer=null,this.layerView=null,this.view=null,this.layerViewImporter=null,this._map=null}async start(){var s,n;if(this._started)return;this._started=!0;const{_controller:{signal:t},layer:r,view:i}=this;this._map=i.map;try{let o,a;if(await r.load({signal:t}),r.prefetchResources&&await r.prefetchResources({signal:t}),lG(r))o=await r.createLayerView(i,{signal:t});else{if(!this.layerViewImporter.hasLayerViewModule(r))throw new I("layer:view-not-supported","No layerview implementation was found");const p=await this.layerViewImporter.importLayerView(r);Be(t),o="default"in p?new p.default({layer:r,view:i}):new p({layer:r,view:i})}const l=()=>{a=Ie(a),o.destroyed||o.destroy(),o.layer=null,o.parent=null,o.view=null,this.done=!0};a=Ar(t,l),Be(t);try{await o.when()}catch(p){throw l(),p}if(!((n=(s=this._map)==null?void 0:s.allLayers)==null?void 0:n.includes(r)))return l(),void this._deferred.reject(new I("view:no-layerview-for-layer","The layer has been removed from the map",{layer:r}));this.layerView=o,r.emit("layerview-create",{view:i,layerView:o}),i.emit("layerview-create",{layer:r,layerView:o}),this.done=!0,this._deferred.resolve(o)}catch(o){r.emit("layerview-create-error",{view:i,error:o}),i.emit("layerview-create-error",{layer:r,error:o}),this.done=!0,this._deferred.reject(new I("layerview:create-error","layerview creation failed",{layer:r,error:o}))}}},vr=class extends W{constructor(t){super(t),this._layerLayerViewInfoMap=new Map,this._recyclingInfoMap=new Map,this._watchUpdatingTracking=new Eo,this.supportsGround=!0,this._preloadLayerViewModules=()=>{var i;const r=(i=this.view.map)==null?void 0:i.allLayers;if(r)for(const s of r)this.layerViewImporter.hasLayerViewModule(s)&&this.layerViewImporter.importLayerView(s)},this._reschedule=()=>this.destroyed?Promise.reject():(this._workPromise==null&&(this._workPromise=Or(),this._workPromise.promise.catch(()=>{})),this.removeHandles("reschedule"),this.addHandles(Xc(this._doWork),"reschedule"),this._workPromise.promise),this._doWork=()=>{var l,h,p;if(this.destroyed)return;const r=this.view.map;if(this._map!==r&&(this.clear(),this._map=r),this._workPromise==null)return void this.notifyChange("updating");this.removeHandles("reschedule"),this.removeHandles("collection-change");const i=new Set,s=[],n=this.view.ready,o=f=>{if(f!=null){for(const m of f)if(m){i.add(m);const y=this._layerLayerViewInfoMap.get(m);y&&n?y.start():y||this._recyclingInfoMap.has(m)||s.push(m),"layers"in m&&m.layers&&o(m.layers)}}};for(const f of this._rootCollectionNames)o(cs(this,f));for(const[f,m]of this._layerLayerViewInfoMap)if(!i.has(f)){this._layerLayerViewInfoMap.delete(m.layer);const y=m.tryRecycle(s);y?(this.notifyChange("updating"),this._recyclingInfoMap.set(m.layer,m),y.then(()=>{this.notifyChange("updating"),this._recyclingInfoMap.delete(m.layer),this._layerLayerViewInfoMap.set(m.layer,m),this._reschedule()}).catch(()=>{this.notifyChange("updating"),this._recyclingInfoMap.delete(m.layer),m.destroy(),this._reschedule()})):m.destroy()}for(const[f,m]of this._recyclingInfoMap)i.has(f)||(this.notifyChange("updating"),this._recyclingInfoMap.delete(m.layer),m.destroy());for(const f of s)this._createLayerView(f);this._refreshCollections();const a=[(l=r==null?void 0:r.ground)==null?void 0:l.layers,(h=r==null?void 0:r.basemap)==null?void 0:h.baseLayers,(p=r==null?void 0:r.basemap)==null?void 0:p.referenceLayers,r==null?void 0:r.layers].filter(f=>!!f);i.forEach(f=>"layers"in f&&a.push(f.layers)),this.addHandles(a.map(f=>this._watchUpdatingTracking.addOnCollectionChange(()=>f,this._reschedule)),"collection-change"),this._workPromise.resolve(),this._workPromise=null}}initialize(){this.addHandles([wn(()=>{var t,r;return(r=(t=this.view)==null?void 0:t.map)==null?void 0:r.allLayers},"change",this._preloadLayerViewModules,{onListenerAdd:this._preloadLayerViewModules}),Q(()=>{const t=this.view,r=t==null?void 0:t.map;return[r==null?void 0:r.basemap,r==null?void 0:r.ground,r==null?void 0:r.layers,t==null?void 0:t.ready]},()=>this._reschedule(),Gt)]),this._preloadLayerViewModules(),this._reschedule()}destroy(){this.clear(),Jm(this._recyclingInfoMap),Jm(this._layerLayerViewInfoMap),this._watchUpdatingTracking.destroy(),this._map=null,this._workPromise!=null&&(this._workPromise.reject(Ee()),this._workPromise=null)}get _layersToLayerViews(){const t=[["view.map.basemap.baseLayers","view.basemapView.baseLayerViews"],["view.map.layers","view.layerViews"],["view.map.basemap.referenceLayers","view.basemapView.referenceLayerViews"]];return this.supportsGround&&t.push(["view.map.ground.layers","view.groundView.layerViews"]),new Map(t)}get _rootCollectionNames(){return Array.from(this._layersToLayerViews.keys())}get updating(){return this._workPromise!=null||this._watchUpdatingTracking.updating||JR(this._layerLayerViewInfoMap,t=>!t.done)||this._recyclingInfoMap.size>0}get updatingRemaining(){let t=0;for(const r of this._layerLayerViewInfoMap.values())r.done||++t;return t}clear(){this.destroyed||(Jm(this._layerLayerViewInfoMap),this._refreshCollections())}async whenLayerView(t){if(await this._reschedule(),!this._layerLayerViewInfoMap.has(t)){if(this._recyclingInfoMap.has(t))return this._recyclingInfoMap.get(t).promise;throw new I("view:no-layerview-for-layer","No layerview has been found for the layer",{layer:t})}return this._layerLayerViewInfoMap.get(t).promise}isCreatingLayerViewsForLayer(t,r){var n;this.commitProperty("updatingRemaining");const i=this._layerLayerViewInfoMap.get(t);if(!(i!=null&&i.done))return!0;const s=i.layerView;return!(!s||!r||s.parent===r)||!!(i.done&&s&&"layers"in t&&((n=t.layers)!=null&&n.length))&&t.layers.some(o=>this.isCreatingLayerViewsForLayer(o,s))}_refreshCollections(){for(const[t,r]of this._layersToLayerViews)this._populateLayerViewsOwners(cs(this,t),cs(this,r),this.view);this.notifyChange("updating"),this.notifyChange("updatingRemaining")}_populateLayerViewsOwners(t,r,i){if(!t||!r)return void(r&&r.removeAll());let s=0;for(const n of t){const o=this._layerLayerViewInfoMap.get(n);if(!(o!=null&&o.layerView))continue;const a=o.layerView;a.layer=n,a.parent=i,r.at(s)!==a&&r.splice(s,0,a),"layers"in n&&nG(a)&&this._populateLayerViewsOwners(n.layers,a.layerViews,a),s+=1}s<r.length&&r.splice(s,r.length)}_createLayerView(t){t.load().catch(()=>{}),this.layerViewImporter.hasLayerViewModule(t)&&this.layerViewImporter.importLayerView(t);const r=new oG(t,this.view,this.layerViewImporter);r.promise.then(()=>this._refreshCollections(),i=>{i&&(qt(i)||i.name==="cancelled:layerview-create")||U.getLogger(this).error(`Failed to create layerview for layer title:'${t.title??"no title"}', id:'${t.id??"no id"}' of type '${t.type}'.`,{layer:t,error:i}),this._refreshCollections()}),this._layerLayerViewInfoMap.set(t,r),this.view.ready&&r.start(),this.notifyChange("updating"),this.notifyChange("updatingRemaining")}};c([d()],vr.prototype,"_workPromise",void 0),c([d({readOnly:!0})],vr.prototype,"_watchUpdatingTracking",void 0),c([d({readOnly:!0})],vr.prototype,"_layersToLayerViews",null),c([d({readOnly:!0})],vr.prototype,"_rootCollectionNames",null),c([d()],vr.prototype,"layerViewImporter",void 0),c([d()],vr.prototype,"supportsGround",void 0),c([d({readOnly:!0})],vr.prototype,"updating",null),c([d({readOnly:!0})],vr.prototype,"updatingRemaining",null),c([d({constructOnly:!0})],vr.prototype,"view",void 0),vr=c([S("esri.views.LayerViewManager")],vr);const aG=vr;function lG(e){return e.createLayerView!==lx.prototype.createLayerView}let Qt=class extends W{constructor(t){super(t),this.factor=1.5,this.offset=ut(0,0),this.position=null,this.size=120,this.maskUrl=null,this.maskEnabled=!0,this.overlayUrl=null,this.overlayEnabled=!0,this.visible=!0}get version(){return this.commitProperty("factor"),this.commitProperty("offset"),this.commitProperty("position"),this.commitProperty("visible"),this.commitProperty("size"),this.commitProperty("maskUrl"),this.commitProperty("maskEnabled"),this.commitProperty("overlayUrl"),this.commitProperty("overlayEnabled"),(this._get("version")||0)+1}};c([d({type:Number})],Qt.prototype,"factor",void 0),c([d({nonNullable:!0})],Qt.prototype,"offset",void 0),c([d()],Qt.prototype,"position",void 0),c([d({type:Number,range:{min:0}})],Qt.prototype,"size",void 0),c([d()],Qt.prototype,"maskUrl",void 0),c([d()],Qt.prototype,"maskEnabled",void 0),c([d()],Qt.prototype,"overlayUrl",void 0),c([d()],Qt.prototype,"overlayEnabled",void 0),c([d({readOnly:!0})],Qt.prototype,"version",null),c([d({type:Boolean})],Qt.prototype,"visible",void 0),Qt=c([S("esri.views.Magnifier")],Qt);const SP=Qt;let Yd=class{constructor(t){this._observable=new eh,this._map=new Map(t)}get size(){return J(this._observable),this._map.size}clear(){this._map.size>0&&(this._map.clear(),this._observable.notify())}delete(t){const r=this._map.delete(t);return r&&this._observable.notify(),r}entries(){return J(this._observable),this._map.entries()}forEach(t,r){J(this._observable),this._map.forEach((i,s)=>t.call(r,i,s,this),r)}get(t){return J(this._observable),this._map.get(t)}has(t){return J(this._observable),this._map.has(t)}keys(){return J(this._observable),this._map.keys()}set(t,r){return this._map.set(t,r),this._observable.notify(),this}values(){return J(this._observable),this._map.values()}[Symbol.iterator](){return J(this._observable),this._map[Symbol.iterator]()}[Symbol.dispose](){this._observable.destroy()}get[Symbol.toStringTag](){return this._map[Symbol.toStringTag]}};var h1;let Du=h1=class extends G{constructor(e){super(e),this.name=null,this.code=null}clone(){return new h1({name:this.name,code:this.code})}};c([d({type:String,json:{write:{isRequired:!0}}})],Du.prototype,"name",void 0),c([d({type:[String,Number],json:{write:{isRequired:!0}}})],Du.prototype,"code",void 0),Du=h1=c([S("esri.layers.support.CodedValue")],Du);const uG=new it({inherited:"inherited",codedValue:"coded-value",range:"range"});let Fu=class extends G{constructor(t){super(t),this.name=null,this.type=null}};c([d({type:String,json:{write:!0}})],Fu.prototype,"name",void 0),c([Y(uG),d({json:{write:{isRequired:!0}}})],Fu.prototype,"type",void 0),Fu=c([S("esri.layers.support.Domain")],Fu);const dm=Fu;var d1;let Uu=d1=class extends dm{constructor(e){super(e),this.codedValues=null,this.type="coded-value"}getName(e){let t=null;if(this.codedValues){const r=String(e);this.codedValues.some(i=>(String(i.code)===r&&(t=i.name),!!t))}return t}clone(){return new d1({codedValues:C(this.codedValues),name:this.name})}};c([d({type:[Du],json:{write:{isRequired:!0}}})],Uu.prototype,"codedValues",void 0),c([Y({codedValue:"coded-value"})],Uu.prototype,"type",void 0),Uu=d1=c([S("esri.layers.support.CodedValueDomain")],Uu);const TP=Uu;var p1;let Kd=p1=class extends dm{constructor(e){super(e),this.type="inherited"}clone(){return new p1}};c([Y({inherited:"inherited"})],Kd.prototype,"type",void 0),Kd=p1=c([S("esri.layers.support.InheritedDomain")],Kd);const $P=Kd;var f1;let va=f1=class extends dm{constructor(e){super(e),this.maxValue=null,this.minValue=null,this.type="range"}clone(){return new f1({maxValue:this.maxValue,minValue:this.minValue,name:this.name})}};c([d({json:{type:[Number],read:{source:"range",reader:(e,t)=>{var r;return(r=t.range)==null?void 0:r[1]}},write:{enabled:!1,overridePolicy(){return{enabled:this.maxValue!=null&&this.minValue==null}},target:"range",writer(e,t,r){t[r]=[this.minValue||0,e]},isRequired:!0}}})],va.prototype,"maxValue",void 0),c([d({json:{type:[Number],read:{source:"range",reader:(e,t)=>{var r;return(r=t.range)==null?void 0:r[0]}},write:{target:"range",writer(e,t,r){t[r]=[e,this.maxValue||0]},isRequired:!0}}})],va.prototype,"minValue",void 0),c([Y({range:"range"})],va.prototype,"type",void 0),va=f1=c([S("esri.layers.support.RangeDomain")],va);const EP=va,cG={key:"type",base:dm,typeMap:{range:EP,"coded-value":TP,inherited:$P}};function hG(e){if(!(e!=null&&e.type))return null;switch(e.type){case"range":return EP.fromJSON(e);case"codedValue":return TP.fromJSON(e);case"inherited":return $P.fromJSON(e)}return null}const dG=new it({esriFieldTypeSmallInteger:"small-integer",esriFieldTypeInteger:"integer",esriFieldTypeSingle:"single",esriFieldTypeDouble:"double",esriFieldTypeLong:"long",esriFieldTypeString:"string",esriFieldTypeDate:"date",esriFieldTypeOID:"oid",esriFieldTypeGeometry:"geometry",esriFieldTypeBlob:"blob",esriFieldTypeRaster:"raster",esriFieldTypeGUID:"guid",esriFieldTypeGlobalID:"global-id",esriFieldTypeXML:"xml",esriFieldTypeBigInteger:"big-integer",esriFieldTypeDateOnly:"date-only",esriFieldTypeTimeOnly:"time-only",esriFieldTypeTimestampOffset:"timestamp-offset"});var m1;const pG=new it({binary:"binary",coordinate:"coordinate",countOrAmount:"count-or-amount",dateAndTime:"date-and-time",description:"description",locationOrPlaceName:"location-or-place-name",measurement:"measurement",nameOrTitle:"name-or-title",none:"none",orderedOrRanked:"ordered-or-ranked",percentageOrRatio:"percentage-or-ratio",typeOrCategory:"type-or-category",uniqueIdentifier:"unique-identifier"});let yt=m1=class extends G{constructor(e){super(e),this.alias=null,this.defaultValue=void 0,this.description=null,this.domain=null,this.editable=!0,this.length=void 0,this.name=null,this.nullable=!0,this.type=null,this.valueType=null,this.visible=!0}readDescription(e,{description:t}){let r=null;try{r=t?JSON.parse(t):null}catch{}return(r==null?void 0:r.value)??null}readValueType(e,{description:t}){let r=null;try{r=t?JSON.parse(t):null}catch{}return r?pG.fromJSON(r.fieldValueType):null}clone(){var e;return new m1({alias:this.alias,defaultValue:this.defaultValue,description:this.description,domain:((e=this.domain)==null?void 0:e.clone())??null,editable:this.editable,length:this.length,name:this.name,nullable:this.nullable,type:this.type,valueType:this.valueType,visible:this.visible})}};c([d({type:String,json:{write:!0}})],yt.prototype,"alias",void 0),c([d({type:[String,Number],json:{write:{allowNull:!0}}})],yt.prototype,"defaultValue",void 0),c([d()],yt.prototype,"description",void 0),c([pe("description")],yt.prototype,"readDescription",null),c([d({types:cG,json:{read:{reader:hG},write:!0}})],yt.prototype,"domain",void 0),c([d({type:Boolean,json:{write:!0}})],yt.prototype,"editable",void 0),c([d({type:$e,json:{write:{overridePolicy:e=>({enabled:Number.isFinite(e)})}}})],yt.prototype,"length",void 0),c([d({type:String,json:{write:!0}})],yt.prototype,"name",void 0),c([d({type:Boolean,json:{write:!0}})],yt.prototype,"nullable",void 0),c([Y(dG)],yt.prototype,"type",void 0),c([d()],yt.prototype,"valueType",void 0),c([pe("valueType",["description"])],yt.prototype,"readValueType",null),c([d({type:Boolean,json:{read:!1}})],yt.prototype,"visible",void 0),yt=m1=c([S("esri.layers.support.Field")],yt);const fG=yt;var y1;let wa=y1=class extends G{constructor(e){super(e),this.type="map-layer"}clone(){const{mapLayerId:e,gdbVersion:t}=this;return new y1({mapLayerId:e,gdbVersion:t})}};c([Y({mapLayer:"map-layer"}),d({json:{write:{isRequired:!0}}})],wa.prototype,"type",void 0),c([d({type:$e,json:{write:{isRequired:!0}}})],wa.prototype,"mapLayerId",void 0),c([d({type:String,json:{write:!0}})],wa.prototype,"gdbVersion",void 0),wa=y1=c([S("esri.layers.support.source.MapLayerSource")],wa);var g1;let Xi=g1=class extends G{constructor(e){super(e),this.type="query-table"}clone(){const{workspaceId:e,query:t,oidFields:r,spatialReference:i,geometryType:s}=this,n={workspaceId:e,query:t,oidFields:r,spatialReference:(i==null?void 0:i.clone())??void 0,geometryType:s};return new g1(n)}};c([Y({queryTable:"query-table"}),d({json:{write:{isRequired:!0}}})],Xi.prototype,"type",void 0),c([d({type:String,json:{write:!0}})],Xi.prototype,"workspaceId",void 0),c([d({type:String,json:{write:!0}})],Xi.prototype,"query",void 0),c([d({type:String,json:{write:!0}})],Xi.prototype,"oidFields",void 0),c([d({type:le,json:{write:!0}})],Xi.prototype,"spatialReference",void 0),c([Y(u9)],Xi.prototype,"geometryType",void 0),Xi=g1=c([S("esri.layers.support.source.QueryTableDataSource")],Xi);var _1;let ba=_1=class extends G{constructor(e){super(e),this.type="raster"}clone(){const{workspaceId:e,dataSourceName:t}=this;return new _1({workspaceId:e,dataSourceName:t})}};c([Y({raster:"raster"}),d({json:{write:{isRequired:!0}}})],ba.prototype,"type",void 0),c([d({type:String,json:{write:!0}})],ba.prototype,"dataSourceName",void 0),c([d({type:String,json:{write:!0}})],ba.prototype,"workspaceId",void 0),ba=_1=c([S("esri.layers.support.source.RasterDataSource")],ba);var v1;let io=v1=class extends G{constructor(e){super(e),this.type="table"}clone(){const{workspaceId:e,gdbVersion:t,dataSourceName:r}=this;return new v1({workspaceId:e,gdbVersion:t,dataSourceName:r})}};c([Y({table:"table"}),d({json:{write:{isRequired:!0}}})],io.prototype,"type",void 0),c([d({type:String,json:{write:!0}})],io.prototype,"workspaceId",void 0),c([d({type:String,json:{write:!0}})],io.prototype,"gdbVersion",void 0),c([d({type:String,json:{write:!0}})],io.prototype,"dataSourceName",void 0),io=v1=c([S("esri.layers.support.source.TableDataSource")],io);var w1,b1;const mG=Wt()({esriLeftInnerJoin:"left-inner-join",esriLeftOuterJoin:"left-outer-join"});let er=w1=class extends G{constructor(e){super(e),this.type="join-table"}readLeftTableSource(e,t,r){return iS()(e,t,r)}castLeftTableSource(e){return mn(S1(),e)}readRightTableSource(e,t,r){return iS()(e,t,r)}castRightTableSource(e){return mn(S1(),e)}clone(){const{leftTableKey:e,rightTableKey:t,leftTableSource:r,rightTableSource:i,joinType:s}=this,n={leftTableKey:e,rightTableKey:t,leftTableSource:(r==null?void 0:r.clone())??void 0,rightTableSource:(i==null?void 0:i.clone())??void 0,joinType:s};return new w1(n)}};c([Y({joinTable:"join-table"}),d({json:{write:{isRequired:!0}}})],er.prototype,"type",void 0),c([d({type:String,json:{write:!0}})],er.prototype,"leftTableKey",void 0),c([d({type:String,json:{write:!0}})],er.prototype,"rightTableKey",void 0),c([d({json:{write:!0}})],er.prototype,"leftTableSource",void 0),c([pe("leftTableSource")],er.prototype,"readLeftTableSource",null),c([rt("leftTableSource")],er.prototype,"castLeftTableSource",null),c([d({json:{write:!0}})],er.prototype,"rightTableSource",void 0),c([pe("rightTableSource")],er.prototype,"readRightTableSource",null),c([rt("rightTableSource")],er.prototype,"castRightTableSource",null),c([Y(mG)],er.prototype,"joinType",void 0),er=w1=c([S("esri.layers.support.source.JoinTableDataSource")],er);let hy=null;function iS(){return hy||(hy=c_({types:S1()})),hy}let dy=null;function S1(){return dy||(dy={key:"type",base:null,typeMap:{"data-layer":ns,"map-layer":wa}}),dy}const yG={key:"type",base:null,typeMap:{"join-table":er,"query-table":Xi,raster:ba,table:io}};let ns=b1=class extends G{constructor(e){super(e),this.type="data-layer"}clone(){const{fields:e,dataSource:t}=this;return new b1({fields:e,dataSource:t})}};c([Y({dataLayer:"data-layer"}),d({json:{write:{isRequired:!0}}})],ns.prototype,"type",void 0),c([d({type:[fG],json:{write:!0}})],ns.prototype,"fields",void 0),c([d({types:yG,json:{write:!0}})],ns.prototype,"dataSource",void 0),ns=b1=c([S("esri.layers.support.source.DataLayerSource")],ns),ns.from=kt(ns);let so=class extends Zt.ClonableMixin(G){constructor(t){super(t),this.onFields=null,this.operator=null,this.searchTerm=null,this.searchType=null}};c([d({type:[String],json:{write:{enabled:!0,overridePolicy(){return{enabled:this.onFields!=null&&this.onFields.length>0}}}}})],so.prototype,"onFields",void 0),c([d({type:String,json:{write:!0}})],so.prototype,"operator",void 0),c([d({type:String,json:{write:!0}})],so.prototype,"searchTerm",void 0),c([d({type:String,json:{write:!0}})],so.prototype,"searchType",void 0),so=c([S("esri.rest.support.FullTextSearch")],so);const gG=so;var T1;const sS=new it({upperLeft:"upper-left",lowerLeft:"lower-left"});let no=T1=class extends G{constructor(e){super(e),this.extent=null,this.mode="view",this.originPosition="upper-left",this.tolerance=1}clone(){return new T1(C({extent:this.extent,mode:this.mode,originPosition:this.originPosition,tolerance:this.tolerance}))}};c([d({type:De,json:{write:{overridePolicy(){return{enabled:this.mode==="view"}}}}})],no.prototype,"extent",void 0),c([d({type:["view","edit"],json:{write:!0}})],no.prototype,"mode",void 0),c([d({type:String,json:{read:sS.read,write:sS.write}})],no.prototype,"originPosition",void 0),c([d({type:Number,json:{write:{overridePolicy(){return{enabled:this.mode==="view"}}}}})],no.prototype,"tolerance",void 0),no=T1=c([S("esri.rest.support.QuantizationParameters")],no);const MP=no,_G=new it({esriSpatialRelIntersects:"intersects",esriSpatialRelContains:"contains",esriSpatialRelCrosses:"crosses",esriSpatialRelDisjoint:"disjoint",esriSpatialRelEnvelopeIntersects:"envelope-intersects",esriSpatialRelIndexIntersects:"index-intersects",esriSpatialRelOverlaps:"overlaps",esriSpatialRelTouches:"touches",esriSpatialRelWithin:"within",esriSpatialRelRelation:"relation"});var $1;const nS=new it({count:"count",sum:"sum",min:"min",max:"max",avg:"avg",stddev:"stddev",var:"var",exceedslimit:"exceedslimit",percentile_cont:"percentile-continuous",percentile_disc:"percentile-discrete",EnvelopeAggregate:"envelope-aggregate",CentroidAggregate:"centroid-aggregate",ConvexHullAggregate:"convex-hull-aggregate"});let Jr=$1=class extends G{constructor(e){super(e),this.maxPointCount=void 0,this.maxRecordCount=void 0,this.maxVertexCount=void 0,this.onStatisticField=null,this.outStatisticFieldName=null,this.statisticType=null,this.statisticParameters=null}writeStatisticParameters(e,t){this.statisticType!=="percentile-continuous"&&this.statisticType!=="percentile-discrete"||(t.statisticParameters=C(e))}clone(){return new $1({maxPointCount:this.maxPointCount,maxRecordCount:this.maxRecordCount,maxVertexCount:this.maxVertexCount,onStatisticField:this.onStatisticField,outStatisticFieldName:this.outStatisticFieldName,statisticType:this.statisticType,statisticParameters:C(this.statisticParameters)})}};c([d({type:Number,json:{write:!0}})],Jr.prototype,"maxPointCount",void 0),c([d({type:Number,json:{write:!0}})],Jr.prototype,"maxRecordCount",void 0),c([d({type:Number,json:{write:!0}})],Jr.prototype,"maxVertexCount",void 0),c([d({type:String,json:{write:!0}})],Jr.prototype,"onStatisticField",void 0),c([d({type:String,json:{write:!0}})],Jr.prototype,"outStatisticFieldName",void 0),c([d({type:String,json:{read:{source:"statisticType",reader:nS.read},write:{target:"statisticType",writer:nS.write}}})],Jr.prototype,"statisticType",void 0),c([d({type:Object})],Jr.prototype,"statisticParameters",void 0),c([ae("statisticParameters")],Jr.prototype,"writeStatisticParameters",null),Jr=$1=c([S("esri.rest.support.StatisticDefinition")],Jr);const vG=Jr;var Xd;const wG=new it({esriSRUnit_Meter:"meters",esriSRUnit_Kilometer:"kilometers",esriSRUnit_Foot:"feet",esriSRUnit_StatuteMile:"miles",esriSRUnit_NauticalMile:"nautical-miles",esriSRUnit_USNauticalMile:"us-nautical-miles"});let Z=Xd=class extends G{static from(e){return Mf(Xd,e)}constructor(e){super(e),this.aggregateIds=null,this.cacheHint=void 0,this.compactGeometryEnabled=!1,this.datumTransformation=null,this.defaultSpatialReferenceEnabled=!1,this.distance=void 0,this.dynamicDataSource=void 0,this.formatOf3DObjects=null,this.fullText=null,this.gdbVersion=null,this.geometry=null,this.geometryPrecision=void 0,this.groupByFieldsForStatistics=null,this.having=null,this.historicMoment=null,this.maxAllowableOffset=void 0,this.maxRecordCountFactor=1,this.multipatchOption=null,this.num=void 0,this.objectIds=null,this.orderByFields=null,this.outFields=null,this.outSpatialReference=null,this.outStatistics=null,this.parameterValues=null,this.pixelSize=null,this.quantizationParameters=null,this.rangeValues=null,this.relationParameter=null,this.resultType=null,this.returnCentroid=!1,this.returnDistinctValues=!1,this.returnExceededLimitFeatures=!0,this.returnGeometry=!1,this.returnQueryGeometry=!1,this.returnM=void 0,this.returnZ=void 0,this.returnTrueCurves=void 0,this.sourceSpatialReference=null,this.spatialRelationship="intersects",this.start=void 0,this.sqlFormat=null,this.text=null,this.timeExtent=null,this.timeReferenceUnknownClient=!1,this.units=null,this.where=null}castDatumTransformation(e){return typeof e=="number"||typeof e=="object"?e:null}writeHistoricMoment(e,t){t.historicMoment=e&&e.getTime()}writeParameterValues(e,t){if(e){const r={};for(const i in e){const s=e[i];Array.isArray(s)?r[i]=s.map(n=>n instanceof Date?n.getTime():n):s instanceof Date?r[i]=s.getTime():r[i]=s}t.parameterValues=r}}writeStart(e,t){t.resultOffset=this.start,t.resultRecordCount=this.num||10,t.where="1=1"}writeWhere(e,t){t.where=e||"1=1"}clone(){return new Xd(C({aggregateIds:this.aggregateIds,cacheHint:this.cacheHint,compactGeometryEnabled:this.compactGeometryEnabled,datumTransformation:this.datumTransformation,defaultSpatialReferenceEnabled:this.defaultSpatialReferenceEnabled,distance:this.distance,fullText:this.fullText,formatOf3DObjects:this.formatOf3DObjects,gdbVersion:this.gdbVersion,geometry:this.geometry,geometryPrecision:this.geometryPrecision,groupByFieldsForStatistics:this.groupByFieldsForStatistics,having:this.having,historicMoment:this.historicMoment!=null?new Date(this.historicMoment.getTime()):null,maxAllowableOffset:this.maxAllowableOffset,maxRecordCountFactor:this.maxRecordCountFactor,multipatchOption:this.multipatchOption,num:this.num,objectIds:this.objectIds,orderByFields:this.orderByFields,outFields:this.outFields,outSpatialReference:this.outSpatialReference,outStatistics:this.outStatistics,parameterValues:this.parameterValues,pixelSize:this.pixelSize,quantizationParameters:this.quantizationParameters,rangeValues:this.rangeValues,relationParameter:this.relationParameter,resultType:this.resultType,returnDistinctValues:this.returnDistinctValues,returnGeometry:this.returnGeometry,returnCentroid:this.returnCentroid,returnExceededLimitFeatures:this.returnExceededLimitFeatures,returnQueryGeometry:this.returnQueryGeometry,returnM:this.returnM,returnZ:this.returnZ,returnTrueCurves:this.returnTrueCurves,dynamicDataSource:this.dynamicDataSource,sourceSpatialReference:this.sourceSpatialReference,spatialRelationship:this.spatialRelationship,start:this.start,sqlFormat:this.sqlFormat,text:this.text,timeExtent:this.timeExtent,timeReferenceUnknownClient:this.timeReferenceUnknownClient,units:this.units,where:this.where}))}};Z.MAX_MAX_RECORD_COUNT_FACTOR=5,c([d({json:{write:!0}})],Z.prototype,"aggregateIds",void 0),c([d({type:Boolean,json:{write:!0}})],Z.prototype,"cacheHint",void 0),c([d({type:Boolean,json:{default:!1,write:!0}})],Z.prototype,"compactGeometryEnabled",void 0),c([d({json:{write:!0}})],Z.prototype,"datumTransformation",void 0),c([rt("datumTransformation")],Z.prototype,"castDatumTransformation",null),c([d({type:Boolean,json:{default:!1,write:!0}})],Z.prototype,"defaultSpatialReferenceEnabled",void 0),c([d({type:Number,json:{write:!0}})],Z.prototype,"distance",void 0),c([d({type:ns,json:{write:!0}})],Z.prototype,"dynamicDataSource",void 0),c([d({type:String,json:{write:!0}})],Z.prototype,"formatOf3DObjects",void 0),c([d({type:[gG],json:{write:{enabled:!0,overridePolicy(){return{enabled:this.fullText!=null&&this.fullText.length>0}}}}})],Z.prototype,"fullText",void 0),c([d({type:String,json:{write:!0}})],Z.prototype,"gdbVersion",void 0),c([d({types:cv,json:{read:fl,write:!0}})],Z.prototype,"geometry",void 0),c([d({type:Number,json:{write:!0}})],Z.prototype,"geometryPrecision",void 0),c([d({type:[String],json:{write:!0}})],Z.prototype,"groupByFieldsForStatistics",void 0),c([d({type:String,json:{write:!0}})],Z.prototype,"having",void 0),c([d({type:Date})],Z.prototype,"historicMoment",void 0),c([ae("historicMoment")],Z.prototype,"writeHistoricMoment",null),c([d({type:Number,json:{write:!0}})],Z.prototype,"maxAllowableOffset",void 0),c([d({type:Number,cast:e=>e<1?1:e>Z.MAX_MAX_RECORD_COUNT_FACTOR?Z.MAX_MAX_RECORD_COUNT_FACTOR:e,json:{write:{overridePolicy:e=>({enabled:e>1})}}})],Z.prototype,"maxRecordCountFactor",void 0),c([d({type:["xyFootprint"],json:{write:!0}})],Z.prototype,"multipatchOption",void 0),c([d({type:Number,json:{read:{source:"resultRecordCount"}}})],Z.prototype,"num",void 0),c([d({json:{write:!0}})],Z.prototype,"objectIds",void 0),c([d({type:[String],json:{write:!0}})],Z.prototype,"orderByFields",void 0),c([d({type:[String],json:{write:!0}})],Z.prototype,"outFields",void 0),c([d({type:le,json:{name:"outSR",write:!0}})],Z.prototype,"outSpatialReference",void 0),c([d({type:[vG],json:{write:{enabled:!0,overridePolicy(){return{enabled:this.outStatistics!=null&&this.outStatistics.length>0}}}}})],Z.prototype,"outStatistics",void 0),c([d({json:{write:!0}})],Z.prototype,"parameterValues",void 0),c([ae("parameterValues")],Z.prototype,"writeParameterValues",null),c([d({type:re,json:{write:!0}})],Z.prototype,"pixelSize",void 0),c([d({type:MP,json:{write:!0}})],Z.prototype,"quantizationParameters",void 0),c([d({type:[Object],json:{write:!0}})],Z.prototype,"rangeValues",void 0),c([d({type:String,json:{read:{source:"relationParam"},write:{target:"relationParam",overridePolicy(){return{enabled:this.spatialRelationship==="relation"}}}}})],Z.prototype,"relationParameter",void 0),c([d({type:String,json:{write:!0}})],Z.prototype,"resultType",void 0),c([d({type:Boolean,json:{default:!1,write:!0}})],Z.prototype,"returnCentroid",void 0),c([d({type:Boolean,json:{default:!1,write:!0}})],Z.prototype,"returnDistinctValues",void 0),c([d({type:Boolean,json:{default:!0,write:!0}})],Z.prototype,"returnExceededLimitFeatures",void 0),c([d({type:Boolean,json:{write:!0}})],Z.prototype,"returnGeometry",void 0),c([d({type:Boolean,json:{default:!1,write:!0}})],Z.prototype,"returnQueryGeometry",void 0),c([d({type:Boolean,json:{default:!1,write:!0}})],Z.prototype,"returnM",void 0),c([d({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],Z.prototype,"returnZ",void 0),c([d({type:Boolean,json:{write:!0}})],Z.prototype,"returnTrueCurves",void 0),c([d({type:le,json:{write:!0}})],Z.prototype,"sourceSpatialReference",void 0),c([Y(_G,{ignoreUnknown:!1,name:"spatialRel"})],Z.prototype,"spatialRelationship",void 0),c([d({type:Number,json:{read:{source:"resultOffset"}}})],Z.prototype,"start",void 0),c([ae("start"),ae("num")],Z.prototype,"writeStart",null),c([d({type:String,json:{write:!0}})],Z.prototype,"sqlFormat",void 0),c([d({type:String,json:{write:!0}})],Z.prototype,"text",void 0),c([d({type:tv,json:{write:!0}})],Z.prototype,"timeExtent",void 0),c([d({type:Boolean,json:{default:!1,write:!0}})],Z.prototype,"timeReferenceUnknownClient",void 0),c([Y(wG,{ignoreUnknown:!1}),d({json:{write:{overridePolicy(e){return{enabled:!!e&&this.distance!=null}}}}})],Z.prototype,"units",void 0),c([d({type:String,json:{write:{overridePolicy(e){return{enabled:e!=null||this.start!=null&&this.start>0}}}}})],Z.prototype,"where",void 0),c([ae("where")],Z.prototype,"writeWhere",null),Z=Xd=c([S("esri.rest.support.Query")],Z);const oS=Z;function Jh(e){return!!(e!=null&&typeof e=="object"&&"createQuery"in e&&e.createQuery&&"on"in e&&e.on)}let yi=class extends Ai.EventedAccessor{constructor(t){super(t),this._selectionMap=new Yd,this._sources=new H,this._trashCan=[],this._layerEditHandles=new H,this._vizTaskId=0,this.showHighlight=!0,this.highlightName="default"}initialize(){this.addHandles([Q(()=>[this.view,this.showHighlight],()=>this._refreshVisualization()),wn(()=>this.sources,"change",r=>{const i=this._selectionMap;for(const s of r.removed)i.delete(s);this._refreshListeners(),this._refreshVisualization()},{onListenerAdd:()=>this._refreshListeners()})]);const t=new H;this.view.when().then(()=>{this.view.map&&(this.view.map.allLayers.flatten(r=>"sublayers"in r&&r.sublayers?r.sublayers:null).forEach(r=>{(Jh(r)&&!kD(r)||Vn(r))&&t.add(r)}),this.sources=t)})}destroy(){this._layerEditHandles.drain(Ie)}get selections(){return Array.from(this._selectionMap.entries()).map(t=>{const[r,i]=t;return{layer:r,selection:[...i.selection]}})}get count(){let t=0;for(const r of this._selectionMap.values())t+=r.selection.length;return t}get hasSelection(){return this.count>0}get sources(){return this._sources}set sources(t){ys(t,this._sources)}async getSelectedFeatures(t,r={},i="layerView"){const{view:s,selections:n}=this,o=(t!==void 0?n.filter(a=>t.includes(a.layer)):n).filter(a=>a.selection.length>0).map(async a=>{const{layer:l,selection:h}=a,p=Vn(l)?l.parent:l;if(p==null||!lS(p))return null;if(i==="layer")return uS(p,h,r);if(aS(p))return null;const f=await s.whenLayerView(p).catch(()=>null);return f?uS(f,h,r):null});return(await Promise.all(o)).filter(a=>a!=null)}updateSelection(t){const r=new Map;for(const[n,o]of this._selectionMap)r.set(n,[...o.selection]);let i=!1;const s=t.current.concat(t.added);for(const n of s){const o=n.sourceLayer,a=n.getObjectId();if(this.sources.includes(o)&&(Jh(o)||Vn(o))&&a!==null){const l=Ef(r,o,()=>[]);l.includes(a)||(l.push(a),i=!0)}}for(const n of t.removed){const o=n.sourceLayer,a=n.getObjectId();if(this.sources.includes(o)&&(Jh(o)||Vn(o))&&a!==null){const l=r.get(o),h=l==null?void 0:l.indexOf(a);h!==void 0&&h>=0&&(l==null||l.splice(h,1),i=!0)}}if(i){const{_selectionMap:n,_trashCan:o}=this,a=[];for(const[l,h]of r){const p=n.get(l);p!==void 0&&o.push(p),n.set(l,{selection:h}),a.push({layer:l,selection:h,...yw(p!==void 0?p.selection:[],h)})}this._onSelectionChange(a)}}setSelection(t,r){this._setSelection(t,r)}getSelection(t){const r=this._selectionMap.get(t);return r==null?void 0:r.selection}appendToSelection(t,r){const i=this._selectionMap.get(t),s=i!==void 0?[...i.selection]:[];for(const n of r)s.includes(n)||s.push(n);this._setSelection(t,s)}removeFromSelection(t,r){const i=this._selectionMap.get(t);if(!i)return;const s=[];for(const n of i.selection)r.includes(n)||s.push(n);this._setSelection(t,s)}toggleInSelection(t,r){const i=this._selectionMap.get(t);if(!i||i.selection.length===0)return void this._setSelection(t,r);const s=new Set(i.selection),n=new Set(r),o=RR(s,n);this._setSelection(t,Array.from(o))}clear(){const t=this._selectionMap.values();this._trashCan.push(...t);const r=[];for(const[i,s]of this._selectionMap.entries())r.push({layer:i,added:[],removed:[...s.selection],selection:[]});this._selectionMap.clear(),this._onSelectionChange(r)}_onSelectionChange(t){this._refreshVisualization(),this.emit("selection-change",{view:this.view,changes:t})}_refreshVisualization(){var o;if(this.view==null||this.sources==null)return;for(this._vizTaskId++;this._trashCan.length>0;){const a=this._trashCan.pop();(o=a==null?void 0:a.highlightHandle)==null||o.remove()}const{sources:t,view:r,_selectionMap:i,showHighlight:s}=this,n=this._vizTaskId;for(const a of t){const l=i.get(a),h=Vn(a)?a.parent:a;if(h!=null&&lS(h)){if(aS(h))continue;r.whenLayerView(h).then(p=>{var f;(f=l==null?void 0:l.highlightHandle)==null||f.remove(),l!=null&&s&&n===this._vizTaskId&&"highlight"in p&&typeof p.highlight=="function"&&l.selection.length>0&&(l.highlightHandle=p.highlight(l.selection,this.highlightName))}).catch(()=>{var p;(p=l==null?void 0:l.highlightHandle)==null||p.remove()})}}}_refreshListeners(){this._layerEditHandles.drain(Ie);for(const t of this.sources){const r=Vn(t)?t.parent:t;if(r!=null&&Jh(r)){const i=r.on("edits",s=>{this._handleEditChanges(s,t)});this._layerEditHandles.push(i)}}}_handleEditChanges(t,r){if(t.deletedFeatures!==void 0&&t.deletedFeatures.length>0&&this._selectionMap.has(r)){const i=t.deletedFeatures.filter(s=>s.error==null).map(s=>s.objectId).filter(tl);this.removeFromSelection(r,i)}}_setSelection(t,r){if(!this.sources.includes(t))throw new Error(`Cannot set selection on layer ${t.title} because it is not in 'sources'`);const i=this._selectionMap.get(t);if(i===void 0||!SG(i,{selection:r})){i!==void 0&&this._trashCan.push(i),this._selectionMap.set(t,{selection:[...r]});const s={layer:t,selection:[...r],...yw(i!==void 0?i.selection:[],r)};this._onSelectionChange([s])}}};c([d({readOnly:!0,nonNullable:!0})],yi.prototype,"selections",null),c([d({readOnly:!0,nonNullable:!0})],yi.prototype,"count",null),c([d({constructOnly:!0,nonNullable:!0})],yi.prototype,"view",void 0),c([d({readOnly:!0,nonNullable:!0})],yi.prototype,"hasSelection",null),c([d()],yi.prototype,"showHighlight",void 0),c([d()],yi.prototype,"sources",null),c([d()],yi.prototype,"highlightName",void 0),yi=c([S("esri.views.SelectionManager")],yi);const aS=e=>{var t;return Vn(e)?((t=e.parent)==null?void 0:t.isTable)===!0:e.isTable},bG=e=>e.layer!==void 0,lS=e=>(e==null?void 0:e.when)!==void 0,SG=(e,t)=>{if(e==null&&t==null)return!0;if(e!=null&&t==null||e==null&&t!=null)return!1;if(e!=null&&t!=null&&e.selection!=null&&t.selection!=null){const r=[...e.selection],i=[...t.selection];if(r.length!==i.length)return!1;r.sort(),i.sort();for(let s=0;s<r.length;s++)if(r[s]!==i[s])return!1}return!0},uS=async(e,t,r={})=>{let i;if(bG(e)){const s=e;i=s===void 0?null:await s.queryFeatures(new oS({...r,objectIds:t})).then(n=>({data:n,layer:e.layer}))}else{const s=e;i=s===void 0?null:await s.queryFeatures(new oS({...r,objectIds:t})).then(n=>({data:n,layer:s}))}return i},TG=yi;let ju=class extends Zt.ClonableMixin(W){constructor(t){super(t),this.accentColor=new oe([255,127,0]),this.textColor=new oe([255,255,255])}};c([d({type:oe,nonNullable:!0})],ju.prototype,"accentColor",void 0),c([d({type:oe,nonNullable:!0})],ju.prototype,"textColor",void 0),ju=c([S("esri.views.Theme")],ju);const E1=ju;var cS;(function(e){e[e.Left=0]="Left",e[e.Middle=1]="Middle",e[e.Right=2]="Right"})(cS||(cS={}));const xP=["click","double-click","immediate-click","immediate-double-click","hold","drag","key-down","key-up","pointer-down","pointer-move","pointer-up","pointer-drag","mouse-wheel","pointer-enter","pointer-leave","gamepad","focus","blur"],AP={};function PP(e){return!!AP[e]}function $G(e){for(const t of e)if(!PP(t))return!1;return!0}xP.forEach(e=>{AP[e]=!0});let OP=class{constructor(t){this._handlers=new Map,this._counter=0,this._handlerCounts=new Map,this.view=t,this.inputManager=null}connect(t){t&&this.disconnect(),this.inputManager=t,this._handlers.forEach(({handler:r,priority:i},s)=>{var n;return(n=this.inputManager)==null?void 0:n.installHandlers(s,[r],i)})}disconnect(){this.inputManager&&this._handlers.forEach((t,r)=>{var i;return(i=this.inputManager)==null?void 0:i.uninstallHandlers(r)}),this.inputManager=null}destroy(){this.disconnect(),this._handlers.clear(),this.view=null}on(t,r,i,s){const n=Array.isArray(t)?t:t.split(",");if(!$G(n))return n.some(PP)&&console.error("Error: registering input events and other events on the view at the same time is not supported."),null;let o,a;Array.isArray(r)?a=r:(o=r,a=[]),typeof i=="function"?o=i:s=i,s=s??hn.DEFAULT;const l=this._createUniqueGroupName(),h=new EG(this.view,n,a,o);this._handlers.set(l,{handler:h,priority:s});for(const p of n){const f=this._handlerCounts.get(p)||0;this._handlerCounts.set(p,f+1)}return this.inputManager&&this.inputManager.installHandlers(l,[h],s),ce(()=>this._removeHandler(l,n))}hasHandler(t){return!!this._handlerCounts.get(t)}_removeHandler(t,r){if(this._handlers.has(t)){this._handlers.delete(t);for(const i of r){const s=this._handlerCounts.get(i);s===void 0||(s===1?this._handlerCounts.delete(i):this._handlerCounts.set(i,s-1))}}this.inputManager&&this.inputManager.uninstallHandlers(t)}_createUniqueGroupName(){return this._counter+=1,`viewEvents_${this._counter}`}},EG=class extends st{constructor(t,r,i,s){super(!0),this._latestDragStart=void 0,this.view=t;for(const n of r)switch(n){case"click":this.registerIncoming("click",i,o=>s(AG(t,o)));break;case"double-click":this.registerIncoming("double-click",i,o=>s(PG(t,o)));break;case"immediate-click":this.registerIncoming("immediate-click",i,o=>s(OG(t,o)));break;case"immediate-double-click":this.registerIncoming("immediate-double-click",i,o=>s(CG(t,o)));break;case"hold":this.registerIncoming("hold",i,o=>s(IG(t,o)));break;case"drag":this.registerIncoming("drag",i,o=>{const a=this._wrapDrag(o);a&&s(a)});break;case"key-down":this.registerIncoming("key-down",i,o=>s(RG(o)));break;case"key-up":this.registerIncoming("key-up",i,o=>s(kG(o)));break;case"pointer-down":this.registerIncoming("pointer-down",i,o=>s(ql(o,"pointer-down")));break;case"pointer-move":this.registerIncoming("pointer-move",i,o=>s(ql(o,"pointer-move")));break;case"pointer-up":this.registerIncoming("pointer-up",i,o=>s(ql(o,"pointer-up")));break;case"pointer-drag":this.registerIncoming("pointer-drag",i,o=>s(NG(o)));break;case"mouse-wheel":this.registerIncoming("mouse-wheel",i,o=>s(LG(o)));break;case"pointer-enter":this.registerIncoming("pointer-enter",i,o=>s(ql(o,"pointer-enter")));break;case"pointer-leave":this.registerIncoming("pointer-leave",i,o=>s(ql(o,"pointer-leave")));break;case"gamepad":this.registerIncoming("gamepad",i,o=>{s(DG(o))});break;case"focus":this.registerIncoming("focus",i,o=>{s(MG(o))});break;case"blur":this.registerIncoming("blur",i,o=>{s(xG(o))})}}_wrapDrag(t){const r=t.data,{x:i,y:s}=r.center,{action:n,pointerType:o,button:a}=r;if(n==="start"&&(this._latestDragStart=r),!this._latestDragStart)return;const l=r.pointer.native,h=r.buttons,{cancelable:p,timestamp:f}=t,m={x:this._latestDragStart.center.x,y:this._latestDragStart.center.y};return n==="end"&&(this._latestDragStart=void 0),{type:"drag",action:n,x:i,y:s,origin:m,pointerType:o,button:a,buttons:h,radius:r.radius,angle:FM(r.angle),native:l,timestamp:f,cancelable:p,stopPropagation:()=>t.stopPropagation(),async:y=>t.async(y),preventDefault:()=>t.preventDefault()}}};function MG(e){return{type:"focus",timestamp:e.timestamp,native:e.data.native,cancelable:e.cancelable,stopPropagation:()=>e.stopPropagation(),async:t=>e.async(t),preventDefault:()=>e.preventDefault()}}function xG(e){return{type:"blur",timestamp:e.timestamp,native:e.data.native,cancelable:e.cancelable,stopPropagation:()=>e.stopPropagation(),async:t=>e.async(t),preventDefault:()=>e.preventDefault()}}function AG(e,t){const{pointerType:r,button:i,buttons:s,x:n,y:o,native:a,eventId:l}=t.data,{cancelable:h,timestamp:p}=t;return{type:"click",pointerType:r,button:i,buttons:s,x:n,y:o,native:a,timestamp:p,screenPoint:ut(n,o),mapPoint:mh(e,n,o),eventId:l,cancelable:h,stopPropagation:()=>t.stopPropagation(),async:f=>t.async(f),preventDefault:()=>t.preventDefault()}}function PG(e,t){const{pointerType:r,button:i,buttons:s,x:n,y:o,native:a,eventId:l}=t.data,{cancelable:h,timestamp:p}=t;return{type:"double-click",pointerType:r,button:i,buttons:s,x:n,y:o,native:a,timestamp:p,mapPoint:mh(e,n,o),eventId:l,cancelable:h,stopPropagation:()=>t.stopPropagation(),async:f=>t.async(f),preventDefault:()=>t.preventDefault()}}function OG(e,t){const{pointerType:r,button:i,buttons:s,x:n,y:o,native:a,eventId:l}=t.data,h=a.pointerId,{cancelable:p,timestamp:f}=t;return{type:"immediate-click",pointerId:h,pointerType:r,button:i,buttons:s,x:n,y:o,native:a,timestamp:f,mapPoint:mh(e,n,o),eventId:l,cancelable:p,stopPropagation:()=>t.stopPropagation(),async:m=>t.async(m),preventDefault:()=>t.preventDefault()}}function CG(e,t){const{pointerType:r,button:i,buttons:s,x:n,y:o,native:a,eventId:l}=t.data,h=a.pointerId,{cancelable:p,timestamp:f}=t;return{type:"immediate-double-click",pointerId:h,pointerType:r,button:i,buttons:s,x:n,y:o,native:a,timestamp:f,mapPoint:mh(e,n,o),eventId:l,cancelable:p,stopPropagation:()=>t.stopPropagation(),async:m=>t.async(m),preventDefault:()=>t.preventDefault()}}function IG(e,t){const{pointerType:r,button:i,buttons:s,x:n,y:o,native:a}=t.data,{cancelable:l,timestamp:h}=t;return{type:"hold",pointerType:r,button:i,buttons:s,x:n,y:o,native:a,timestamp:h,mapPoint:mh(e,n,o),cancelable:l,stopPropagation:()=>t.stopPropagation(),async:p=>t.async(p),preventDefault:()=>t.preventDefault()}}function mh(e,t,r){return e.toMap(ut(t,r),{exclude:[]})}function RG(e){const{key:t,repeat:r,native:i}=e.data,{cancelable:s,timestamp:n}=e;return{type:"key-down",key:t,repeat:r,native:i,timestamp:n,cancelable:s,stopPropagation:()=>e.stopPropagation(),async:o=>e.async(o),preventDefault:()=>e.preventDefault()}}function kG(e){const{key:t,native:r}=e.data,{cancelable:i,timestamp:s}=e;return{type:"key-up",key:t,native:r,timestamp:s,cancelable:i,stopPropagation:()=>e.stopPropagation(),async:n=>e.async(n),preventDefault:()=>e.preventDefault()}}function ql(e,t){const{x:r,y:i,button:s,buttons:n,native:o,eventId:a}=e.data,l=o.pointerId,h=o.pointerType,{cancelable:p,timestamp:f}=e;return{type:t,x:r,y:i,pointerId:l,pointerType:h,button:s,buttons:n,native:o,timestamp:f,eventId:a,cancelable:p,stopPropagation:()=>e.stopPropagation(),async:m=>e.async(m),preventDefault:()=>e.preventDefault()}}function NG(e){const{x:t,y:r,buttons:i,native:s,eventId:n}=e.data.currentEvent,{button:o}=e.data.startEvent,a=e.data.startEvent.native.pointerId,l=e.data.startEvent.native.pointerType,h=e.data.action,p={x:e.data.startEvent.x,y:e.data.startEvent.y},{cancelable:f,timestamp:m}=e;return{type:"pointer-drag",x:t,y:r,pointerId:a,pointerType:l,button:o,buttons:i,action:h,origin:p,native:s,timestamp:m,eventId:n,cancelable:f,stopPropagation:()=>e.stopPropagation(),async:y=>e.async(y),preventDefault:()=>e.preventDefault()}}function LG(e){const{cancelable:t,data:r,timestamp:i}=e,{x:s,y:n,deltaY:o,native:a}=r;return{type:"mouse-wheel",x:s,y:n,deltaY:o,native:a,timestamp:i,cancelable:t,stopPropagation:()=>e.stopPropagation(),async:l=>e.async(l),preventDefault:()=>e.preventDefault()}}function DG(e){const{action:t,state:r,device:i}=e.data,{cancelable:s,timestamp:n}=e,{buttons:o,axes:a}=r;return{type:"gamepad",device:i,timestamp:n,action:t,buttons:o,axes:a,cancelable:s,stopPropagation:()=>e.stopPropagation(),async:l=>e.async(l),preventDefault:()=>e.preventDefault()}}var Uc,hS,dS;(function(e){e[e.USER=0]="USER",e[e.MANAGER=1]="MANAGER"})(Uc||(Uc={})),function(e){e[e.None=0]="None",e[e.Unfocused=1]="Unfocused",e[e.Focused=2]="Focused",e[e.Unselected=4]="Unselected",e[e.Selected=8]="Selected",e[e.All=15]="All"}(hS||(hS={})),function(e){e[e.None=0]="None",e[e.Custom1=16]="Custom1",e[e.Custom2=32]="Custom2",e[e.Custom3=64]="Custom3",e[e.Custom4=128]="Custom4",e[e.Custom5=256]="Custom5",e[e.Custom6=512]="Custom6",e[e.Custom7=1024]="Custom7",e[e.Custom8=2048]="Custom8",e[e.Custom9=4096]="Custom9",e[e.Custom10=8192]="Custom10",e[e.Custom11=16384]="Custom11",e[e.Custom12=32768]="Custom12",e[e.All=65520]="All"}(dS||(dS={}));function FG(e){return[e.on("before-add",t=>{const r=t.item;if(r==null||e.includes(r))return U.getLogger("esri.views.interactive.interactiveToolUtils").warn("Tool is either already in the list of tools or tool is `null`. Not adding tool."),void t.preventDefault();r.onAdd()}),e.on("after-remove",t=>{const r=t.item;r.active&&(r.view.activeTool=null),r.destroy()})]}function M1(e){return e.visible&&e.getEditableFlag!=null&&e.getEditableFlag(Uc.USER)&&e.getEditableFlag(Uc.MANAGER)}function gi(e){return ut(e.x,e.y)}function CP(e,t){var i;const r=(i=e instanceof HTMLElement?e:e.surface)==null?void 0:i.getBoundingClientRect();return r?ut(t.clientX-r.left,t.clientY-r.top):ut(0,0)}function IP(e,t){return t instanceof Event?CP(e,t):gi(t)}function RP(e){if(e instanceof Event)return!0;if(typeof e=="object"&&"type"in e)switch(e.type){case"click":case"double-click":case"pointer-down":case"pointer-drag":case"pointer-enter":case"pointer-leave":case"pointer-up":case"pointer-move":case"immediate-click":case"immediate-double-click":case"hold":case"drag":case"mouse-wheel":return!0;default:return!1}return!1}let UG=class{constructor(){this._pointerLocations=new Map,this._hoveredManipulators=new Map,this._grabbedManipulators=new Map,this._draggedManipulators=new Map,this._stopDrag=!1,this._externallyDragging=!1,this._revertToNullActiveTool=!1,this._cursor=null}get cursor(){return this._cursor}hasFocusedManipulators(){return this._grabbedManipulators.size>0||this._draggedManipulators.size>0}handleInputEvent(t,r){const i=()=>t.stopPropagation();switch(t.type){case"pointer-move":fS(t.pointerType)&&this._pointerLocations.set(t.pointerId,{x:t.x,y:t.y,pointerType:t.pointerType});break;case"drag":this._grabbedManipulators.size>0?this._stopDrag=!0:t.action==="start"?this._externallyDragging=!0:t.action==="end"&&(this._externallyDragging=!1),this._stopDrag&&(i(),t.action==="end"&&(this._stopDrag=!1));break;case"pointer-down":{if(!mS(t))break;const s=gi(t),n=ta(s,t.pointerType,r.forEachTool);if(n==null)break;const o=n.manipulator,a=n.tool;o==null||a==null||!o.interactive||o.grabbable&&o.grabbableForEvent(t)||!o.grabbing||o.dragging||this._releaseManipulatorBeforeDragging(o,t,r),o!=null&&a!=null&&o.interactive&&o.grabbable&&o.grabbableForEvent(t)&&!o.grabbing&&(this._grabbedManipulators.set(t.pointerId,{manipulator:o,tool:a,start:s,pointerType:t.pointerType}),this._grabbedManipulators.size===1&&r.activeTool==null&&(this._revertToNullActiveTool=!0,r.setActiveTool(n.tool)),o.grabbing=!0,o.events.emit("grab-changed",{action:"start",pointerType:t.pointerType,screenPoint:s}),i());break}case"pointer-up":this._draggedManipulators.has(t.pointerId)||this._handlePointerEnd(t,r);break;case"pointer-drag":{if(!mS(t))break;const s=this._grabbedManipulators.get(t.pointerId),n=s==null?void 0:s.manipulator,o=s==null?void 0:s.tool;if(n==null||o==null)break;const a=gi(t);a.x=si(a.x,0,r.view.width),a.y=si(a.y,0,r.view.height);const l=s.start,h=this._draggedManipulators.get(t.pointerId);switch(t.action){case"start":case"update":t.action!=="update"&&this._grabbedManipulators.size!==1||(n.dragging=!0,h?n.events.emit("drag",{action:"update",start:l,screenPoint:a}):n.events.emit("drag",{action:"start",start:l,screenPoint:a,pointerType:t.pointerType}),this._draggedManipulators.set(t.pointerId,{tool:o,manipulator:n,start:l}));break;case"end":n.dragging=!1,h&&n.events.emit("drag",{action:"end",start:l,screenPoint:a}),this._draggedManipulators.delete(t.pointerId),this._handlePointerEnd(t,r)}i();break}case"immediate-click":{const s=gi(t),n=ta(s,t.pointerType,r.forEachTool);if(jG(t)||r.forEachTool(h=>{if((n==null||n.tool!==h||h.automaticManipulatorSelection)&&h.manipulators){let p=!1;h.manipulators.forEach(({manipulator:f})=>{f.selected&&(f.selected=!1,p=!0)}),p&&h.onManipulatorSelectionChanged&&h.onManipulatorSelectionChanged()}}),n==null)break;const{manipulator:o,tool:a}=n;if(!o.interactive)break;o.selectable&&a.automaticManipulatorSelection&&(o.selected=!o.selected,a.onManipulatorSelectionChanged&&a.onManipulatorSelectionChanged());const l=t.native.shiftKey;o.events.emit("immediate-click",{screenPoint:s,button:t.button,pointerType:t.pointerType,shiftKey:l,stopPropagation:i}),py(o,i);break}case"click":{const s=gi(t),n=ta(s,t.pointerType,r.forEachTool),o=n==null?void 0:n.manipulator;if(o==null||!o.interactive)break;const a=t.native.shiftKey;o.events.emit(t.type,{screenPoint:s,button:t.button,pointerType:t.pointerType,shiftKey:a}),i();break}case"double-click":{const s=gi(t),n=ta(s,t.pointerType,r.forEachTool),o=n!=null?n.manipulator:null;if(o==null||!o.interactive)break;const a=t.native.shiftKey;o.events.emit("double-click",{screenPoint:s,button:t.button,pointerType:t.pointerType,shiftKey:a,stopPropagation:i}),py(o,i);break}case"immediate-double-click":{const s=gi(t),n=ta(s,t.pointerType,r.forEachTool),o=n!=null?n.manipulator:null;if(o==null||!o.interactive)break;const a=t.native.shiftKey;o.events.emit("immediate-double-click",{screenPoint:s,button:t.button,pointerType:t.pointerType,shiftKey:a,stopPropagation:i}),t.pointerType==="mouse"&&py(o,i);break}}this._onFocusChange(r.forEachTool)}_releaseManipulatorBeforeDragging(t,r,i){t.grabbing=!1,t.events.emit("grab-changed",{action:"end",pointerType:r.pointerType,screenPoint:gi(r)}),this._grabbedManipulators.forEach(({manipulator:s},n)=>{s===t&&this._grabbedManipulators.delete(n)}),this._afterManipulatorRelease(i.setActiveTool)}_handlePointerEnd(t,r){var s;const i=(s=this._grabbedManipulators.get(t.pointerId))==null?void 0:s.manipulator;i!=null&&i.grabbing&&(i.grabbing=!1,i.events.emit("grab-changed",{action:"end",pointerType:t.pointerType,screenPoint:gi(t)}),this._grabbedManipulators.delete(t.pointerId),this._afterManipulatorRelease(r.setActiveTool))}_onFocusChange(t){this._updateCursor(),this._updateFocusedManipulatorTools(t)}_updateCursor(){this._grabbedManipulators.size>0?this._cursor=pS(this._grabbedManipulators)||"grabbing":this._hoveredManipulators.size>0?this._cursor=pS(this._hoveredManipulators)||"pointer":this._cursor=null}_updateFocusedManipulatorTools(t){const r=new Set,i=new Set;this._grabbedManipulators.forEach(({tool:s})=>{r.add(s)}),this._hoveredManipulators.forEach(({tool:s})=>{i.add(s)}),t(s=>{s.hasGrabbedManipulators=r.has(s),s.hasHoveredManipulators=i.has(s);const n=this._grabbedManipulators.values(),o=UI(n,({tool:a})=>a===s);s.firstGrabbedManipulator=o!=null?o.manipulator:null})}clearPointers(t,{forEachTool:r,setActiveTool:i},s=!0,n){const o=(a,l)=>a===t&&(n==null||n===l);this._grabbedManipulators.forEach(({tool:a,manipulator:l,pointerType:h},p)=>{o(a,l)&&(this._grabbedManipulators.delete(p),l.grabbing=!1,l.events.emit("grab-changed",{action:"end",screenPoint:null,pointerType:h}))}),this._draggedManipulators.forEach(({tool:a,manipulator:l},h)=>{o(a,l)&&(this._draggedManipulators.delete(h),l.dragging=!1,l.events.emit("drag",{action:"cancel"}))}),s&&this._hoveredManipulators.forEach(({tool:a,manipulator:l},h)=>{o(a,l)&&(this._hoveredManipulators.delete(h),l.hovering=!1)}),this._afterManipulatorRelease(i),this._onFocusChange(r)}updateHoveredStateFromKnownPointers(t){this._pointerLocations.forEach((r,i)=>{this._updateHoveredStateForPointerAtScreenPosition(ut(r.x,r.y),i,r.pointerType,t)})}handleHoverEvent(t,r){const i=t.type;i!=="pointer-up"&&i!=="immediate-click"&&i!=="pointer-move"||!fS(t.pointerType)||(i!=="pointer-up"&&this._externallyDragging?this._clearHoveredManipulatorStates(t.pointerId):this._updateHoveredStateForPointerAtScreenPosition(gi(t),t.pointerId,t.pointerType,r))}_updateHoveredStateForPointerAtScreenPosition(t,r,i,s){var a;let n=ta(t,i,s);const o=(a=this._hoveredManipulators.get(r))==null?void 0:a.manipulator;n==null||n.manipulator.interactive||(n=null),n!=null&&o===n.manipulator||(o!=null&&(o.hovering=!1),n!=null?(n.manipulator.hovering=!0,this._hoveredManipulators.set(r,n)):this._hoveredManipulators.delete(r),this._onFocusChange(s))}_afterManipulatorRelease(t){this._grabbedManipulators.size===0&&this._revertToNullActiveTool&&(t(null),this._revertToNullActiveTool=!1)}_clearHoveredManipulatorStates(t){this._hoveredManipulators.forEach(({manipulator:r},i)=>{t===i&&(this._hoveredManipulators.delete(t),r.hovering=!1)})}};function pS(e){for(const{manipulator:t}of e.values())if(t!=null&&t.interactive){if(t.grabbing&&t.grabCursor)return t.grabCursor;if(t.cursor)return t.cursor}return null}function ta(e,t,r){let i=null;return r(s=>{if(s.manipulators==null||!M1(s))return!1;const n=s.manipulators.intersect(e,t);return n!=null&&(i={tool:s,manipulator:n},!0)}),i}function fS(e){return e==="mouse"}function mS(e){return e.pointerType!=="mouse"||e.button===0}function jG(e){return!!e.native.shiftKey}function py(e,t){e!=null&&e.consumesClicks&&t()}const yS="attached",fy="tools",GG=1e3;let _i=class extends W{constructor(t){super(t),this._updatingHandles=new Eo,this._clock=Sl,this._manipulatorState=new UG,this.tools=new H,this.cursor=null,this._interacting=!1,this._interactingTimeout=GG,this._interactingTimeoutHandle=null,this._forEachTool=r=>{for(const i of this.tools.items)if(r(i))return}}initialize(){this.addHandles([this.view.on(xP,t=>{this._handleInputEvent(t)},hn.TOOL),...FG(this.tools),this.tools.on("before-add",({item:t})=>{this._updateToolEditableFlag(t)}),this.tools.on("before-remove",({item:t})=>{this._manipulatorState.clearPointers(t,this._manipulatorStateEventArgs),this._updateCursor()}),this.tools.on("change",()=>{this._refreshToolWatchers()})])}destroy(){this.activeTool=null,this.tools.drain(t=>t.destroy()),this._clearInteractingTimeout(),this._interacting=!1,this._updatingHandles.destroy()}get _manipulatorStateEventArgs(){return{forEachTool:this._forEachTool,activeTool:this.activeTool,setActiveTool:t=>{this.activeTool=t},view:this.view}}set activeTool(t){if(t!=null&&!this.view.ready)return void U.getLogger(this).error("Cannot set active tool while view is not ready.");if(t===this.activeTool)return;const r=this.activeTool;this._set("activeTool",t),r!=null&&r.deactivate(),t!=null&&t.activate(),this._removeIncompleteTools(t);for(const i of this.tools){this._updateToolEditableFlag(i);const s=M1(i);this.activeTool!=null&&s||this._manipulatorState.clearPointers(i,this._manipulatorStateEventArgs,!s)}this._updateCursor()}get updating(){return this._updatingHandles.updating||this.tools.some(t=>t.updating)}get interacting(){return this._interacting}_clearInteractingTimeout(){this._interactingTimeoutHandle=Ie(this._interactingTimeoutHandle)}_startInteractingTimeout(){this._clearInteractingTimeout(),this._interactingTimeoutHandle=this._clock.setTimeout(()=>this._interacting=!1,this._interactingTimeout)}attach(){var t;this.view.type==="3d"?this.addHandles([Q(()=>{const{state:r}=this.view;return"camera"in r&&r.camera},()=>this._forEachManipulator(r=>r.onViewChange())),(t=this.view.elevationProvider)==null?void 0:t.on("elevation-change",r=>this._forEachManipulator(i=>i.onElevationChange(r)))],yS):this.addHandles(Q(()=>this.view.extent,()=>this._forEachManipulator(r=>r.onViewChange())))}detach(){this.activeTool=null,this.tools.removeAll(),this.removeHandles(yS),this._clearInteractingTimeout(),this._interacting=!1}_forEachManipulator(t){this._forEachTool(r=>{r.manipulators&&r.manipulators.forEach(({manipulator:i})=>t(i,r))})}_handleInputEvent(t){let r=!1;const i={...t,stopPropagation:()=>{r=!0,t.stopPropagation()}};this.activeTool!=null?this.activeTool.handleInputEvent&&this.activeTool.handleInputEvent(i):this._forEachTool(s=>{!r&&s.visible&&s.handleInputEvent(i)}),!r&&t.type==="key-down"&&t.key==="Escape"&&this.activeTool&&(t.stopPropagation(),this.activeTool=null),this._manipulatorState.handleInputEvent(i,this._manipulatorStateEventArgs),r||this.activeTool==null||this.activeTool.handleInputEventAfter(i),this._manipulatorState.handleHoverEvent(i,this._forEachTool),this._updateCursor(),t.type==="pointer-move"&&(this._manipulatorState.hasFocusedManipulators()||this.activeTool)&&(this._interacting=!0,this._startInteractingTimeout())}_refreshToolWatchers(){this.removeHandles(fy),this._forEachTool(t=>{if(t instanceof W){const r=Q(()=>[t.cursor,t.visible,t.editable],()=>{M1(t)||this._manipulatorState.clearPointers(t,this._manipulatorStateEventArgs),this._updateCursor()});this.addHandles(r,fy)}t.manipulators&&this.addHandles([t.manipulators.on("after-remove",r=>{this._manipulatorState.clearPointers(t,this._manipulatorStateEventArgs,!0,r.item.manipulator)}),t.manipulators.on("change",()=>{this._manipulatorState.updateHoveredStateFromKnownPointers(this._forEachTool),this._updateCursor()})],fy)}),this._manipulatorState.updateHoveredStateFromKnownPointers(this._forEachTool),this._updateCursor()}_updateToolEditableFlag(t){var r;(r=t.setEditableFlag)==null||r.call(t,Uc.MANAGER,this.activeTool==null||t===this.activeTool)}_updateCursor(){let t=this._manipulatorState.cursor;t==null&&this._forEachTool(r=>!(r.cursor==null||!r.visible)&&(t=r.cursor,!0)),this._get("cursor")!==t&&this._set("cursor",t)}_removeIncompleteTools(t){this.tools.filter(r=>(t==null||r!==t)&&!r.created&&r.removeIncompleteOnCancel).forEach(r=>{this.tools.remove(r)})}get test(){}};c([d({constructOnly:!0,nonNullable:!0})],_i.prototype,"view",void 0),c([d({value:null})],_i.prototype,"activeTool",null),c([d({readOnly:!0,type:H})],_i.prototype,"tools",void 0),c([d({readOnly:!0})],_i.prototype,"cursor",void 0),c([d({readOnly:!0})],_i.prototype,"updating",null),c([d()],_i.prototype,"_interacting",void 0),c([d({readOnly:!0})],_i.prototype,"interacting",null),_i=c([S("esri.views.ToolViewManager")],_i);const zG=new oe("cyan"),VG=1,BG=.25,HG=new oe("black"),qG=.4,WG=.2,jie=.25,kP="default",ZG="temporary",JG=new oe("yellow");var x1;let tr=x1=class extends W{constructor(e){super(e),this.name=kP,this.color=zG.clone(),this.haloColor=null,this.haloOpacity=VG,this.fillOpacity=BG,this.shadowColor=HG.clone(),this.shadowOpacity=qG,this.shadowDifference=WG,this.haloWidth=2.1,this.haloBlur=.8/this.haloWidth}equals(e){return this.color.equals(e.color)&&(this.haloColor||this.color).equals(e.haloColor||e.color)&&this.haloOpacity===e.haloOpacity&&this.fillOpacity===e.fillOpacity&&this.haloWidth===e.haloWidth&&this.haloBlur===e.haloBlur&&this.shadowColor.equals(e.shadowColor)&&this.shadowOpacity===e.shadowOpacity&&this.shadowDifference===e.shadowDifference}clone(){var e,t;return new x1({...this,color:this.color.clone(),haloColor:(e=this.haloColor)==null?void 0:e.clone(),shadowColor:(t=this.shadowColor)==null?void 0:t.clone()})}assignFrom(e){var t;this.color=e.color.clone(),this.haloColor=(t=e.haloColor)==null?void 0:t.clone(),this.haloOpacity=e.haloOpacity,this.fillOpacity=e.fillOpacity,this.shadowColor=e.shadowColor.clone(),this.shadowDifference=e.shadowDifference,this.shadowOpacity=e.shadowOpacity,this.haloBlur=e.haloBlur,this.haloWidth=e.haloWidth}};c([d({type:String,constructOnly:!0,nonNullable:!0})],tr.prototype,"name",void 0),c([d({type:oe,nonNullable:!0})],tr.prototype,"color",void 0),c([d({type:oe})],tr.prototype,"haloColor",void 0),c([d({nonNullable:!0})],tr.prototype,"haloOpacity",void 0),c([d({nonNullable:!0})],tr.prototype,"fillOpacity",void 0),c([d({type:oe,nonNullable:!0})],tr.prototype,"shadowColor",void 0),c([d({nonNullable:!0})],tr.prototype,"shadowOpacity",void 0),c([d({nonNullable:!0})],tr.prototype,"shadowDifference",void 0),c([d({nonNullable:!0})],tr.prototype,"haloWidth",void 0),c([d({nonNullable:!0})],tr.prototype,"haloBlur",void 0),tr=x1=c([S("esri.views.support.HighlightOptions")],tr);const dn=tr;function YG(){return new(H.ofType(dn))([new dn({name:kP}),new dn({name:ZG,color:JG})])}let Sa=class extends W{constructor(t){super(),this.nativeIndex=null,this._detectedDeviceType="unknown",t.mapping==="standard"?this._detectedDeviceType="standard":KG.test(t.id)?this._detectedDeviceType="spacemouse":this._detectedDeviceType="unknown",this.nativeIndex=t.index}get native(){const t=navigator.getGamepads?navigator.getGamepads():[];return this.nativeIndex!=null&&this.nativeIndex<t.length?t[this.nativeIndex]:null}get deviceType(){return this._detectedDeviceType}get axisThreshold(){return XG[this.deviceType]}};c([d({nonNullable:!0,readOnly:!0})],Sa.prototype,"nativeIndex",void 0),c([d({type:String,readOnly:!0})],Sa.prototype,"deviceType",null),c([d({type:Number,readOnly:!0})],Sa.prototype,"axisThreshold",null),Sa=c([S("esri.views.input.gamepad.GamepadInputDevice")],Sa);const Fv=Sa,KG=new RegExp("^(3dconnexion|space(mouse|navigator|pilot|explorer))","i"),XG={standard:.15,spacemouse:.025,unknown:0};let Gu=class extends W{constructor(...t){super(...t),this.devices=new H,this.enabledFocusMode="document"}};c([d({type:H.ofType(Fv),readOnly:!0})],Gu.prototype,"devices",void 0),c([d({type:["document","view","none"]})],Gu.prototype,"enabledFocusMode",void 0),Gu=c([S("esri.views.input.gamepad.GamepadSettings")],Gu);const QG=Gu;let Qd=class extends W{constructor(){super(...arguments),this.gamepad=new QG}};c([d({readOnly:!0})],Qd.prototype,"gamepad",void 0),Qd=c([S("esri.views.input.Input")],Qd);const ez=Qd,NP=()=>ye.respectPrefersReducedMotion&&window.matchMedia("(prefers-reduced-motion: reduce)").matches,my=()=>d({type:["pan","rotate","zoom","none"],nonNullable:!0});let oo=class extends W{constructor(t){super(t),this.dragPrimary="pan",this.dragSecondary="rotate",this.dragTertiary="zoom",this.mouseWheel="zoom"}};c([my()],oo.prototype,"dragPrimary",void 0),c([my()],oo.prototype,"dragSecondary",void 0),c([my()],oo.prototype,"dragTertiary",void 0),c([d({type:["zoom","none"],nonNullable:!0})],oo.prototype,"mouseWheel",void 0),oo=c([S("esri.views.navigation.NavigationActionMap")],oo);const Uv=oo;let Hs=class extends W{constructor(t){super(t),this.enabled=!0,this.device=null,this.mode="pan",this.tiltDirection="forward-down",this.velocityFactor=1}};c([d({type:Boolean,nonNullable:!0})],Hs.prototype,"enabled",void 0),c([d({type:Fv})],Hs.prototype,"device",void 0),c([d({type:["pan","zoom"],nonNullable:!0})],Hs.prototype,"mode",void 0),c([d({type:["forward-down","forward-up"],nonNullable:!0})],Hs.prototype,"tiltDirection",void 0),c([d({type:Number,nonNullable:!0})],Hs.prototype,"velocityFactor",void 0),Hs=c([S("esri.views.navigation.gamepad.GamepadSettings")],Hs);const LP=Hs;let qs=class extends W{constructor(t){super(t),this.actionMap=new Uv,this.browserTouchPanEnabled=!0,this.gamepad=new LP,this.momentumEnabled=!0}get effectiveMomentumEnabled(){return this.momentumEnabled&&!NP()}get mouseWheelZoomEnabled(){return this.actionMap.mouseWheel==="zoom"}set mouseWheelZoomEnabled(t){DI(U.getLogger(this),"mouseWheelZoomEnabled",{replacement:"actionMap.mouseWheel",version:"4.32",warnOnce:!0}),this.actionMap.mouseWheel=t?"zoom":"none"}};c([d({type:Uv,nonNullable:!0})],qs.prototype,"actionMap",void 0),c([d({type:Boolean})],qs.prototype,"browserTouchPanEnabled",void 0),c([d({type:LP,nonNullable:!0})],qs.prototype,"gamepad",void 0),c([d({type:Boolean})],qs.prototype,"momentumEnabled",void 0),c([d({type:Boolean})],qs.prototype,"mouseWheelZoomEnabled",null),qs=c([S("esri.views.navigation.Navigation")],qs);const pm=qs;function Wie(e,t,r){const i=DP(e),s=t,n=tz(i,s,r);if(i){const o=Qf.deriveUnitFromSR(i,e.spatialReference).heightUnit;if(!r&&o!==i.heightUnit){const a=new I("layerview:unmatched-height-unit",`The vertical units of the layer must match the horizontal units (${o})`,{horizontalUnit:o});return new I("layerview:unsupported-height-model-info","The vertical coordinate system of the layer is not supported",{heightModelInfo:i,error:a})}}if(!rz(e)||n===jt.Unsupported)return new I("layerview:unsupported-height-model-info","The vertical coordinate system of the layer is not supported",{heightModelInfo:i});switch(n){case jt.Units:{const o=(i==null?void 0:i.heightUnit)||"unknown",a=(s==null?void 0:s.heightUnit)||"unknown",l=new I("layerview:incompatible-height-unit",`The vertical units of the layer (${o}) must match the vertical units of the scene (${a})`,{layerUnit:o,sceneUnit:a});return new I("layerview:incompatible-height-model-info","The vertical coordinate system of the layer is incompatible with the scene",{layerHeightModelInfo:i,sceneHeightModelInfo:s,error:l})}case jt.HeightModel:{const o=(i==null?void 0:i.heightModel)||"unknown",a=(s==null?void 0:s.heightModel)||"unknown",l=new I("layerview:incompatible-height-model",`The height model of the layer (${o}) must match the height model of the scene (${a})`,{layerHeightModel:o,sceneHeightModel:a});return new I("layerview:incompatible-height-model-info","The vertical coordinate system of the layer is incompatible with the scene",{layerHeightModelInfo:i,sceneHeightModelInfo:s,error:l})}case jt.CRS:{const o=(i==null?void 0:i.vertCRS)||"unknown",a=(s==null?void 0:s.vertCRS)||"unknown",l=new I("layerview:incompatible-vertical-datum",`The vertical datum of the layer (${o}) must match the vertical datum of the scene (${a})`,{layerDatum:o,sceneDatum:a});return new I("layerview:incompatible-height-model-info","The vertical coordinate system of the layer is incompatible with the scene",{layerHeightModelInfo:i,sceneHeightModelInfo:s,error:l})}}return null}function tz(e,t,r){if(!gS(e)||!gS(t))return jt.Unsupported;if(e==null||t==null)return jt.Ok;if(!r&&e.heightUnit!==t.heightUnit)return jt.Units;if(e.heightModel!==t.heightModel)return jt.HeightModel;switch(e.heightModel){case"gravity-related-height":return jt.Ok;case"ellipsoidal":return e.vertCRS===t.vertCRS?jt.Ok:jt.CRS;default:return jt.Unsupported}}var jt;function gS(e){return e==null||e.heightModel!=null&&e.heightUnit!=null}function rz(e){return"heightModelInfo"in e&&e.heightModelInfo!=null||e.spatialReference!=null||!jP(e)}function DP(e){var i;if(e.type==="integrated-mesh-3dtiles")return null;const t=e.url?M_(e.url):void 0;return!(((i=e.spatialReference)==null?void 0:i.vcsWkid)==null&&t!=null&&t.serverType==="ImageServer")&&FP(e)&&e.heightModelInfo?e.heightModelInfo:jP(e)?Qf.deriveUnitFromSR(sz,e.spatialReference):null}function FP(e){return"heightModelInfo"in e}function UP(e){if(e.type==="unknown"||!("capabilities"in e))return!1;switch(e.type){case"catalog":case"catalog-footprint":case"csv":case"feature":case"geojson":case"subtype-group":case"ogc-feature":case"oriented-imagery":case"wfs":case"knowledge-graph-sublayer":return!0;default:return!1}}function jP(e){return UP(e)?!!(e.capabilities&&e.capabilities.data&&e.capabilities.data.supportsZ):GP(e)}function iz(e){return e.layers!=null||GP(e)||UP(e)||FP(e)}function GP(e){switch(e.type){case"building-scene":case"elevation":case"integrated-mesh":case"integrated-mesh-3dtiles":case"point-cloud":case"scene":case"voxel":return!0;case"base-dynamic":case"base-elevation":case"base-tile":case"bing-maps":case"catalog":case"catalog-footprint":case"catalog-dynamic-group":case"csv":case"dimension":case"geojson":case"feature":case"subtype-group":case"geo-rss":case"graphics":case"group":case"imagery":case"imagery-tile":case"kml":case"knowledge-graph":case"link-chart":case"knowledge-graph-sublayer":case"line-of-sight":case"map-image":case"map-notes":case"media":case"ogc-feature":case"open-street-map":case"oriented-imagery":case"parquet":case"route":case"stream":case"tile":case"unknown":case"unsupported":case"vector-tile":case"video":case"viewshed":case"wcs":case"web-tile":case"wfs":case"wms":case"wmts":case null:return!1}return!1}(function(e){e[e.Ok=0]="Ok",e[e.Units=1]="Units",e[e.HeightModel=2]="HeightModel",e[e.CRS=3]="CRS",e[e.Unsupported=4]="Unsupported"})(jt||(jt={}));const sz=new Qf({heightModel:"gravity-related-height"});var ef;(function(e){e[e.Global=1]="Global",e[e.Local=2]="Local"})(ef||(ef={}));let A1,yy=null;async function nz(e){yy||(yy=N(()=>import("./geometryServiceUtils-DNdabnsP.js"),__vite__mapDeps([258,259])).then(t=>A1=t)),await yy,Be(e)}async function zP(e,t,r,i){if(!e)return null;const s=e.spatialReference;return An()||Ii(s,t)?Bo(e,t):A1?A1.projectGeometry(e,t,r,i):(await Promise.race([nz(i),$n(i)]),zP(e,t,r,i))}let Se=class extends W{constructor(t){super(t),this.required={extent:!1,heightModelInfo:!1,tileInfo:!1},this.defaultSpatialReference=null,this.userSpatialReference=null,this.sourcePreloadCount=10,this.priorityCollection=null,this.requiresExtentInSpatialReference=!0,this.suspended=!1,this._projectExtentTask={task:null,input:null,output:null,spatialReference:null}}destroy(){this._projectExtentTask.task&&(this._projectExtentTask.task=rl(this._projectExtentTask.task)),this._set("map",null)}get ready(){return!this._spatialReferenceTask.updating&&!this._tileInfoTask.updating&&!this._extentTask.updating}get heightModelInfoReady(){return!this._heightModelInfoTask.updating}get spatialReference(){return this.userSpatialReference??this._spatialReferenceTask.spatialReference}get extent(){return this._extentTask.extent}get heightModelInfo(){return this._heightModelInfoTask.heightModelInfo}get vcsWkid(){return this._heightModelInfoTask.vcsWkid}get latestVcsWkid(){return this._heightModelInfoTask.latestVcsWkid}get viewingMode(){return this.userSpatialReference==null||this.userSpatialReference.equals(this._spatialReferenceTask.spatialReference)?this._spatialReferenceTask.viewingMode:null}get tileInfo(){return this._tileInfoTask.tileInfo}get mapCollections(){var i,s,n,o;const t=(i=this.map)==null?void 0:i.call(this),r=[];return this.priorityCollection!=null&&r.push(this.priorityCollection),r.push({parent:t==null?void 0:t.basemap,layers:(s=t==null?void 0:t.basemap)==null?void 0:s.baseLayers},{layers:t==null?void 0:t.layers},{parent:t==null?void 0:t.ground,layers:(n=t==null?void 0:t.ground)==null?void 0:n.layers},{parent:t==null?void 0:t.basemap,layers:(o=t==null?void 0:t.basemap)==null?void 0:o.referenceLayers}),r}get _spatialReferenceTask(){if(this.suspended)return this._get("_spatialReferenceTask")??{updating:!1};let t;if(this._collectLayers(this.mapCollections,i=>{const s=this._getSupportedSpatialReferences(i);if(s.length>0){const n=this._narrowDownSpatialReferenceCandidates(t,s);n!=null&&(t=n)}return(t==null?void 0:t.length)===1})&&(t==null?void 0:t.length)!==1)return{updating:!0};const r=this._pickSpatialReferenceCandidate(t);return{spatialReference:(r==null?void 0:r.spatialReference)??null,viewingMode:(r==null?void 0:r.viewingMode)??null,updating:!1}}get _tileInfoTask(){var n,o;if(!this.required.tileInfo)return this._get("_tileInfoTask")??{updating:!1};const t=(n=this.map)==null?void 0:n.call(this),r=this.spatialReference;if(!r)return{updating:this._spatialReferenceTask.updating};let i;const s=this._collectLayers([{parent:t==null?void 0:t.basemap,layers:(o=t==null?void 0:t.basemap)==null?void 0:o.baseLayers},{layers:t==null?void 0:t.layers}],a=>{var l;return!(!("tileInfo"in a)||!((l=a.tileInfo)!=null&&l.spatialReference.equals(r)))&&(i=a,!0)},a=>"tileInfo"in a);return i?{tileInfo:i.tileInfo,updating:!1}:{updating:s}}get _heightModelInfoTask(){var i;if(!this.required.heightModelInfo||this.suspended&&((i=this._get("_heightModelInfoTask"))!=null&&i.heightModelInfo))return this._get("_heightModelInfoTask")??{updating:!1};let t={};const r=this._collectLayers(this.mapCollections,s=>{var o,a;const n=DP(s);return!!n&&(t={heightModelInfo:n,vcsWkid:(o=s.spatialReference)==null?void 0:o.vcsWkid,latestVcsWkid:(a=s.spatialReference)==null?void 0:a.latestVcsWkid},!0)},s=>iz(s));return{...t,updating:r}}get _extentCandidatesTask(){if(this.suspended||!this.required.extent)return this._get("_extentCandidatesTask")??{updating:!1};if(!this.spatialReference)return{updating:this._spatialReferenceTask.updating};const t=[],r=this._collectLayers(this.mapCollections,i=>{const s="fullExtents"in i&&i.fullExtents||(i.fullExtent!=null?[i.fullExtent]:[]),n=this.requiresExtentInSpatialReference?null:s[0],o=s.find(a=>a.spatialReference.equals(this.spatialReference))??n;if(o)return t.push({extent:o,layer:i}),!0;if(this._getSupportedSpatialReferences(i).length>0)for(const a of s)t.push({extent:a,layer:i});return!1});return{candidates:t,updating:r}}get _extentTask(){const{candidates:t,updating:r}=this._extentCandidatesTask;if(r)return{updating:r};if(t==null||t.length===0)return{updating:!1};if(!this.spatialReference)return{updating:this._spatialReferenceTask.updating};const i=this._pickExtentCandidate(t),s=this.spatialReference;return i.extent.equals(this._projectExtentTask.input)&&s.equals(this._projectExtentTask.spatialReference)?{extent:this._projectExtentTask.output,updating:this._projectExtentTask.task!=null&&!this._projectExtentTask.task.finished}:(this._projectExtentTask.task!=null&&(this._projectExtentTask.task=rl(this._projectExtentTask.task)),this._projectExtentTask={input:i.extent.clone(),output:null,spatialReference:s.clone(),task:Rf(async n=>{try{const o=await zP(i.extent,s,"portalItem"in i.layer?i.layer.portalItem:void 0,n);this._projectExtentTask={...this._projectExtentTask,task:null,output:o}}catch{if(ur(n))return;this._projectExtentTask={...this._projectExtentTask,task:null}}})},{updating:!0})}_narrowDownSpatialReferenceCandidates(t,r){if(t==null)return r;const i=new Array;for(const s of t)for(const n of r){if(!s.spatialReference.equals(n.spatialReference))continue;const o=az(s.viewingMode,n.viewingMode);if(o!==!1){i.push({spatialReference:s.spatialReference,viewingMode:o});break}}return i.length>0?i:null}_pickSpatialReferenceCandidate(t){const r=this.defaultSpatialReference;return t==null||t.length<1?r?{spatialReference:r,viewingMode:null}:null:(r!=null&&t.length>1&&t.some(({spatialReference:i})=>i.equals(r))&&(t=t.filter(({spatialReference:i})=>i.equals(r))),t.length>1&&t.some(({viewingMode:i})=>i!==ef.Local)&&(t=t.filter(({viewingMode:i})=>i!==ef.Local)),t[0])}_getSupportedSpatialReferences(t){const r="supportedSpatialReferences"in t&&t.supportedSpatialReferences||(t.spatialReference?[t.spatialReference]:[]);if(r.length===0)return[];const i=[];for(const s of r){const n=this.getSpatialReferenceSupport(s,t);if(n!=null){const o=n.constraints??[{spatialReference:s,viewingMode:null}];for(const{spatialReference:a,viewingMode:l}of o)this.requiresExtentInSpatialReference&&this.userSpatialReference!=null&&!a.equals(this.userSpatialReference)||i.push({spatialReference:a,viewingMode:l})}}return i}_pickExtentCandidate(t){const r=this.spatialReference;return t.find(({extent:i})=>r.equals(i.spatialReference))||t[0]}_collectLayers(t,r,i=()=>!0){var n;switch(this._loadMaybe((n=this.map)==null?void 0:n.call(this))){case"loading":return!0;case"failed":return!1}const s=new oz(i,r);for(const o of t)if(this._collectCollection(o,s),s.done||s.preloading===this.sourcePreloadCount)break;return s.updating}_collectCollection(t,r){if(t.layers){switch(this._loadMaybe(t.parent)){case"loading":return r.updating=!0,void++r.preloading;case"failed":return}for(const i of t.layers)if(r.layerFilter(i)){switch(this._loadMaybe(i)){case"failed":continue;case"loading":r.updating=!0,++r.preloading;break;case"loaded":if(r.updating||(r.done=r.pushLayer(i)),r.done||r.preloading===this.sourcePreloadCount)break;"layers"in i&&this._collectCollection({layers:i.layers},r)}if(r.done||r.preloading===this.sourcePreloadCount)break}}}_loadMaybe(t){return t&&"loadStatus"in t&&t.loadStatus!=null?t.loadStatus==="not-loaded"?(t.load().catch(r=>{qt(r)}),"loading"):t.loadStatus:"loaded"}};c([d()],Se.prototype,"required",void 0),c([d({constructOnly:!0})],Se.prototype,"map",void 0),c([d({constructOnly:!0})],Se.prototype,"getSpatialReferenceSupport",void 0),c([d()],Se.prototype,"defaultSpatialReference",void 0),c([d()],Se.prototype,"userSpatialReference",void 0),c([d()],Se.prototype,"sourcePreloadCount",void 0),c([d()],Se.prototype,"priorityCollection",void 0),c([d()],Se.prototype,"requiresExtentInSpatialReference",void 0),c([d()],Se.prototype,"suspended",void 0),c([d({readOnly:!0})],Se.prototype,"ready",null),c([d({readOnly:!0})],Se.prototype,"heightModelInfoReady",null),c([d({readOnly:!0})],Se.prototype,"spatialReference",null),c([d({readOnly:!0})],Se.prototype,"extent",null),c([d({readOnly:!0})],Se.prototype,"heightModelInfo",null),c([d({readOnly:!0})],Se.prototype,"vcsWkid",null),c([d({readOnly:!0})],Se.prototype,"latestVcsWkid",null),c([d({readOnly:!0})],Se.prototype,"viewingMode",null),c([d({readOnly:!0})],Se.prototype,"tileInfo",null),c([d({readOnly:!0})],Se.prototype,"mapCollections",null),c([d({readOnly:!0})],Se.prototype,"_spatialReferenceTask",null),c([d({readOnly:!0})],Se.prototype,"_tileInfoTask",null),c([d({readOnly:!0})],Se.prototype,"_heightModelInfoTask",null),c([d({readOnly:!0})],Se.prototype,"_extentCandidatesTask",null),c([d()],Se.prototype,"_extentTask",null),c([d()],Se.prototype,"_projectExtentTask",void 0),Se=c([S("esri.views.support.DefaultsFromMap")],Se);let oz=class{constructor(t,r){this.layerFilter=t,this.pushLayer=r,this.preloading=-1,this.updating=!1,this.done=!1}};function az(e,t){return e!=null?t!=null?e===t&&e:e:t}let Ta=class extends W{constructor(t){super(t),this.featureTitleFields=!1,this.utilityNetworkFields=!1,this.globalIdField=!1}};c([d()],Ta.prototype,"featureTitleFields",void 0),c([d()],Ta.prototype,"utilityNetworkFields",void 0),c([d()],Ta.prototype,"globalIdField",void 0),Ta=c([S("esri.views.support.RequiredFieldsOptions")],Ta);const lz=Ta;var zu;let j=zu=class extends Ai.EventedMixin(If.EsriPromiseMixin(W)){constructor(e){super(e),this._userSpatialReference=null,this._cursor=null,this.handles=new bl,this.updatingHandles=new Eo,this.allLayerViews=new Pc({getCollections:()=>{var t,r,i;return[(t=this.basemapView)==null?void 0:t.baseLayerViews,(r=this.groundView)==null?void 0:r.layerViews,this.layerViews,(i=this.basemapView)==null?void 0:i.referenceLayerViews]},getChildrenFunction:cz}),this.groundView=null,this.basemapView=null,this.displayFilterEnabled=!0,this.fatalError=null,this.graphics=new fc,this.analyses=new Jp,this.typeSpecificPreconditionsReady=!0,this.layerViews=new H,this.magnifier=new SP,this.padding={left:0,top:0,right:0,bottom:0},this.ready=!1,this._readyStateWaitingTask=null,this.supportsGround=!0,this.type=null,this.scale=null,this.updating=!1,this.initialExtentRequired=!0,this.input=new ez,this.navigation=new pm,this.layerViewManager=null,this.analysisViewManager=null,this.isHeightModelInfoRequired=!1,this.width=null,this.height=null,this.resizing=!1,this.suspended=!1,this.viewEvents=new OP(this),this.persistableViewModels=new H,this.requiredFieldsOptions=new lz,this._isValid=!1,this._readyCycleForced=!1,this._lockedSpatialReference=null,this._userTimeZone=null,this._lockedTimeZone=null,this._userTimeExtent=null,this._lockedTimeExtent=null,this.theme=null,this.handles.add(Q(()=>this.preconditionsReady,t=>{var i,s;const r=this.ready;if(t?(this._lockedSpatialReference=this.spatialReference,this._lockedTimeZone=this.timeZone,this._lockedTimeExtent=this.timeExtent,zu.views.add(this)):(this._lockedSpatialReference=null,zu.views.remove(this)),this.notifyChange("spatialReference"),!t&&r)(i=this.toolViewManager)==null||i.detach(),this.analysisViewManager!=null&&this.analysisViewManager.detach(),(s=this.layerViewManager)==null||s.clear(),this._teardown();else if(t&&!r){try{this._startup()}catch(n){return void queueMicrotask(()=>{this.fatalError=new I("startup-error",null,n)})}this.analysisViewManager!=null&&this.analysisViewManager.attach(),this.toolViewManager.attach()}},bn))}initialize(){this.addResolvingPromise(Promise.all([this.loadAsyncDependencies(),this.validate()]).then(()=>(this._isValid=!0,Y_(()=>this.ready)))),this.basemapView=new iG({view:this}),this.layerViewManager=new aG({view:this,layerViewImporter:{importLayerView:e=>this.importLayerView(e),hasLayerViewModule:e=>this.hasLayerViewModule(e)},supportsGround:this.supportsGround}),this.toolViewManager=new _i({view:this}),this.selectionManager=new TG({view:this}),this.addHandles([Cr(()=>this.readyState==="map-content-error"&&!this.spatialReference,()=>{U.getLogger(this).warn("#spatialReference","no spatial reference could be derived from the currently added map layers")}),Q(()=>this.initialExtentRequired,e=>this.defaultsFromMap.required={...this.defaultsFromMap.required,extent:e},Gt),Q(()=>this.ready,e=>{this.defaultsFromMap&&(this.defaultsFromMap.suspended=e,this.defaultsFromMap.userSpatialReference=e?this.spatialReference:this._userSpatialReference)},bn),Q(()=>this._userSpatialReference,e=>{this.defaultsFromMap&&(this.defaultsFromMap.userSpatialReference=e)},Gt)])}destroy(){var e,t;this.destroyed||(zu.views.remove(this),this.viewEvents.destroy(),this.allLayerViews.destroy(),this.navigation&&(this.navigation.destroy(),this._set("navigation",null)),this.graphics=Ne(this.graphics),this.analyses=Ne(this.analyses),this.defaultsFromMap.destroy(),this._set("defaultsFromMap",null),Ne(this.analysisViewManager),this.toolViewManager=Ne(this.toolViewManager),this.layerViewManager=Ne(this.layerViewManager),this.selectionManager=Ne(this.selectionManager),this.basemapView=Ne(this.basemapView),(e=this.groundView)==null||e.destroy(),(t=this.layerViews)==null||t.forEach(r=>r.destroy()),this.layerViews.length=0,this.invalidate(),this._emitter.clear(),this.handles.destroy(),this.map=Ne(this.map),this.updatingHandles.destroy())}_startup(){this._set("ready",!0)}_teardown(){this._set("ready",!1)}whenReady(){return Promise.resolve(this)}toMap(){return U.getLogger(this).error("#toMap()","Not implemented on this instance of View"),null}get activeTool(){var e;return(e=this.toolViewManager)==null?void 0:e.activeTool}set activeTool(e){this.toolViewManager&&(this.toolViewManager.activeTool=e)}get animation(){return this._get("animation")}set animation(e){this._set("animation",e)}get center(){return null}get defaultsFromMapSettings(){return{}}get defaultsFromMap(){return new Se({required:{tileInfo:!1,heightModelInfo:!1,extent:!1},map:()=>this.map,getSpatialReferenceSupport:(e,t)=>this.getSpatialReferenceSupport(e,t),...this.defaultsFromMapSettings})}get extent(){return this._get("extent")}set extent(e){this._set("extent",e)}get heightModelInfo(){return this.getDefaultHeightModelInfo()}get highlights(){return this._get("highlights")??YG()}set highlights(e){this._set("highlights",ys(e,this._get("highlights"),H.ofType(dn)))}get interacting(){return this.navigating}get navigating(){return!1}get preconditionsReady(){var e;return!(this.fatalError||!this._isValid||this._readyCycleForced||!this.map||yn.isLoadable(this.map)&&!this.map.loaded||this.width===0||this.height===0||!this.spatialReference||!this._validateSpatialReference(this.spatialReference)||!this._lockedSpatialReference&&!((e=this.defaultsFromMap)!=null&&e.ready)||!this.typeSpecificPreconditionsReady)}get resolution(){return 0}set map(e){e!==this._get("map")&&(e!=null&&e.destroyed&&(U.getLogger(this).warn("#map","The provided map is already destroyed",{map:e}),e=null),yn.isLoadable(e)&&e.load().catch(()=>{}),this.constructed&&!this.destroyed&&(this.forceReadyCycle(),this._lockedSpatialReference=null),this._set("map",e))}get readyState(){var e,t,r,i;if(this.destroyed)return this._get("readyState");if(!this.map)return"missing-map";if("container"in this&&!this.container)return"missing-container";if(this.fatalError)return"rendering-error";if((((e=this.defaultsFromMap)==null?void 0:e.ready)??!1)&&!this.spatialReference){const s=!("loaded"in this.map)||this.map.loaded,n=this.map.ground.loaded,o=((t=this.map.basemap)==null?void 0:t.loaded)??!0;return s&&o&&n&&!((r=this.map)!=null&&r.allLayers.length)?"empty-map":(this._readyStateWaitingTask||(this._readyStateWaitingTask=Rf(a=>Z$(A("view-readyState-waiting-delay"),null,a)),this.addHandles(this._readyStateWaitingTask),this.addHandles(this._readyStateWaitingTask,"ready-state-task")),(i=this._readyStateWaitingTask)!=null&&i.finished?"map-content-error":"loading")}return this._readyStateWaitingTask=rl(this._readyStateWaitingTask),this.removeHandles("ready-state-task"),this.ready?"ready":"loading"}get spatialReference(){var t,r;const e=this._userSpatialReference||this._lockedSpatialReference||this.getDefaultSpatialReference()||null;if(e&&((r=(t=this.defaultsFromMap)==null?void 0:t.required)!=null&&r.heightModelInfo)){const i=e.clone();return i.vcsWkid=this.defaultsFromMap.vcsWkid,i.latestVcsWkid=this.defaultsFromMap.latestVcsWkid,i}return e}set spatialReference(e){const t=!ct(e,this._get("spatialReference"));this._set("_userSpatialReference",e),t&&(this._set("spatialReference",e),this._spatialReferenceChanged(e))}_spatialReferenceChanged(e){}get stationary(){return!this.animation&&!this.navigating&&!this.resizing}get timeExtent(){return this._userTimeExtent??this._lockedTimeExtent??this.getDefaultTimeExtent()??null}set timeExtent(e){this._userTimeExtent=e}get timeZone(){return this._userTimeZone??this._lockedTimeZone??this.getDefaultTimeZone()??Oi}set timeZone(e){this._userTimeZone=e,$D(e)||U.getLogger(this).warn("#timeZone",`the parsed value '${e}' may not be a valid IANA time zone`)}get tools(){var e;return(e=this.toolViewManager)==null?void 0:e.tools}get initialExtent(){var e;return(e=this.defaultsFromMap)==null?void 0:e.extent}get cursor(){var e;return((e=this.toolViewManager)==null?void 0:e.cursor)??this._cursor??"default"}set cursor(e){this._cursor=e,this.notifyChange("cursor")}get size(){return[this.width,this.height]}get effectiveTheme(){return this.theme??new E1}whenLayerView(e){var t;return((t=this.layerViewManager)==null?void 0:t.whenLayerView(e))??Promise.reject()}getDefaultSpatialReference(){var e;return(e=this.defaultsFromMap)==null?void 0:e.spatialReference}getDefaultHeightModelInfo(){var e;return(this.map&&"heightModelInfo"in this.map?this.map.heightModelInfo:void 0)??((e=this.defaultsFromMap)==null?void 0:e.heightModelInfo)??null}getDefaultTimeZone(){return null}getDefaultTimeExtent(){return null}importLayerView(e){throw new I("importLayerView() not implemented")}hasLayerViewModule(e){return!1}async validate(){}async loadAsyncDependencies(){}invalidate(){this._isValid=!1}getSpatialReferenceSupport(){return{constraints:null}}_validateSpatialReference(e){return this.getSpatialReferenceSupport(e)!=null}when(e,t){return this.isResolved()&&!this.ready&&U.getLogger(this).warn("#when()","Calling view.when() while the view is no longer ready but was already resolved once will resolve immediately. Use reactiveUtils.whenOnce(() => view.ready).then(...) instead."),super.when(e,t)}forceReadyCycle(){this.ready&&(Cr(()=>this.destroyed||this.preconditionsReady===!1,()=>this._readyCycleForced=!1,{once:!0}),this._readyCycleForced=!0)}addAndActivateTool(e){this.toolViewManager.tools.add(e),this.activeTool=e}tryFatalErrorRecovery(){this.fatalError=null}};j.views=new H,c([d()],j.prototype,"_userSpatialReference",void 0),c([d()],j.prototype,"activeTool",null),c([d({readOnly:!0})],j.prototype,"allLayerViews",void 0),c([d()],j.prototype,"groundView",void 0),c([d()],j.prototype,"animation",null),c([d()],j.prototype,"basemapView",void 0),c([d()],j.prototype,"center",null),c([d()],j.prototype,"defaultsFromMapSettings",null),c([d()],j.prototype,"defaultsFromMap",null),c([d()],j.prototype,"displayFilterEnabled",void 0),c([d()],j.prototype,"fatalError",void 0),c([d({type:De})],j.prototype,"extent",null),c([d(H2(fc,"graphics"))],j.prototype,"graphics",void 0),c([d(H2(Jp,"analyses"))],j.prototype,"analyses",void 0),c([d({readOnly:!0,type:Qf})],j.prototype,"heightModelInfo",null),c([d({type:H.ofType(dn)})],j.prototype,"highlights",null),c([d({readOnly:!0})],j.prototype,"interacting",null),c([d({readOnly:!0})],j.prototype,"navigating",null),c([d({readOnly:!0,dependsOn:["fatalError","_isValid","_readyCycleForced","map","map.loaded?","width","height","spatialReference","_lockedSpatialReference","defaultsFromMap.ready","typeSpecificPreconditionsReady"]})],j.prototype,"preconditionsReady",null),c([d({readOnly:!0})],j.prototype,"typeSpecificPreconditionsReady",void 0),c([d({type:H,readOnly:!0})],j.prototype,"layerViews",void 0),c([d()],j.prototype,"resolution",null),c([d({type:SP})],j.prototype,"magnifier",void 0),c([d({value:null,type:ux})],j.prototype,"map",null),c([d()],j.prototype,"padding",void 0),c([d({readOnly:!0})],j.prototype,"ready",void 0),c([d()],j.prototype,"_readyStateWaitingTask",void 0),c([d({readOnly:!0})],j.prototype,"readyState",null),c([d({type:le})],j.prototype,"spatialReference",null),c([d()],j.prototype,"stationary",null),c([d({readOnly:!0})],j.prototype,"supportsGround",void 0),c([d({type:tv})],j.prototype,"timeExtent",null),c([d({type:String,nonNullable:!0})],j.prototype,"timeZone",null),c([d()],j.prototype,"tools",null),c([d()],j.prototype,"toolViewManager",void 0),c([d({readOnly:!0})],j.prototype,"type",void 0),c([d({type:Number})],j.prototype,"scale",void 0),c([d({readOnly:!0})],j.prototype,"updating",void 0),c([d({readOnly:!0})],j.prototype,"initialExtentRequired",void 0),c([d({readOnly:!0})],j.prototype,"initialExtent",null),c([d()],j.prototype,"cursor",null),c([d({readOnly:!0})],j.prototype,"input",void 0),c([d({type:pm,nonNullable:!0})],j.prototype,"navigation",void 0),c([d()],j.prototype,"layerViewManager",void 0),c([d()],j.prototype,"analysisViewManager",void 0),c([d()],j.prototype,"selectionManager",void 0),c([d()],j.prototype,"width",void 0),c([d()],j.prototype,"height",void 0),c([d({readOnly:!0})],j.prototype,"resizing",void 0),c([d({value:null,readOnly:!0})],j.prototype,"size",null),c([d({readOnly:!0})],j.prototype,"suspended",void 0),c([d({readOnly:!0})],j.prototype,"viewEvents",void 0),c([d({readOnly:!0})],j.prototype,"persistableViewModels",void 0),c([d()],j.prototype,"_isValid",void 0),c([d()],j.prototype,"_readyCycleForced",void 0),c([d()],j.prototype,"_lockedSpatialReference",void 0),c([d()],j.prototype,"_userTimeZone",void 0),c([d()],j.prototype,"_lockedTimeZone",void 0),c([d()],j.prototype,"_userTimeExtent",void 0),c([d()],j.prototype,"_lockedTimeExtent",void 0),c([d({type:E1})],j.prototype,"theme",void 0),c([d({readOnly:!0,type:E1})],j.prototype,"effectiveTheme",null),j=zu=c([S("esri.views.View")],j);const gy=globalThis.$arcgis;gy&&!gy.views&&Object.defineProperty(gy,"views",{configurable:!1,enumerable:!0,writable:!1,value:j.views});const uz=j;function cz(e){return e.layerViews}function Xa(e,t){return e[0]=t[0],e[1]=t[1],e}function at(e,t,r){return e[0]=t,e[1]=r,e}function VP(e,t,r){return e[0]=t[0]+r[0],e[1]=t[1]+r[1],e}function jc(e,t,r){return e[0]=t[0]-r[0],e[1]=t[1]-r[1],e}function BP(e,t,r){return e[0]=t[0]*r[0],e[1]=t[1]*r[1],e}function HP(e,t,r){return e[0]=t[0]/r[0],e[1]=t[1]/r[1],e}function hz(e,t){return e[0]=Math.ceil(t[0]),e[1]=Math.ceil(t[1]),e}function dz(e,t){return e[0]=Math.floor(t[0]),e[1]=Math.floor(t[1]),e}function pz(e,t,r){return e[0]=Math.min(t[0],r[0]),e[1]=Math.min(t[1],r[1]),e}function fz(e,t,r){return e[0]=Math.max(t[0],r[0]),e[1]=Math.max(t[1],r[1]),e}function mz(e,t){return e[0]=Math.round(t[0]),e[1]=Math.round(t[1]),e}function yh(e,t,r){return e[0]=t[0]*r,e[1]=t[1]*r,e}function yz(e,t,r,i){return e[0]=t[0]+r[0]*i,e[1]=t[1]+r[1]*i,e}function fm(e,t){const r=t[0]-e[0],i=t[1]-e[1];return Math.sqrt(r*r+i*i)}function tf(e,t){const r=t[0]-e[0],i=t[1]-e[1];return r*r+i*i}function rf(e){const t=e[0],r=e[1];return Math.sqrt(t*t+r*r)}function qP(e){const t=e[0],r=e[1];return t*t+r*r}function WP(e,t){return e[0]=-t[0],e[1]=-t[1],e}function gz(e,t){return e[0]=1/t[0],e[1]=1/t[1],e}function P1(e,t){const r=t[0],i=t[1];let s=r*r+i*i;return s>0&&(s=1/Math.sqrt(s),e[0]=t[0]*s,e[1]=t[1]*s),e}function ZP(e,t){return e[0]*t[0]+e[1]*t[1]}function JP(e,t,r){const i=t[0]*r[1]-t[1]*r[0];return e[0]=e[1]=0,e[2]=i,e}function _z(e,t,r,i){const s=t[0],n=t[1];return e[0]=s+i*(r[0]-s),e[1]=n+i*(r[1]-n),e}function vz(e,t=1){const r=2*Q_()*Math.PI;return e[0]=Math.cos(r)*t,e[1]=Math.sin(r)*t,e}function wz(e,t,r){const i=t[0],s=t[1];return e[0]=r[0]*i+r[2]*s,e[1]=r[1]*i+r[3]*s,e}function Ti(e,t,r){const i=t[0],s=t[1];return e[0]=r[0]*i+r[2]*s+r[4],e[1]=r[1]*i+r[3]*s+r[5],e}function bz(e,t,r){const i=t[0],s=t[1];return e[0]=r[0]*i+r[3]*s+r[6],e[1]=r[1]*i+r[4]*s+r[7],e}function Sz(e,t,r){const i=t[0],s=t[1];return e[0]=r[0]*i+r[4]*s+r[12],e[1]=r[1]*i+r[5]*s+r[13],e}function Tz(e,t,r,i){const s=t[0]-r[0],n=t[1]-r[1],o=Math.sin(i),a=Math.cos(i);return e[0]=s*a-n*o+r[0],e[1]=s*o+n*a+r[1],e}function $z(e,t){const r=e[0],i=e[1],s=t[0],n=t[1];let o=r*r+i*i;o>0&&(o=1/Math.sqrt(o));let a=s*s+n*n;a>0&&(a=1/Math.sqrt(a));const l=(r*s+i*n)*o*a;return l>1?0:l<-1?Math.PI:Math.acos(l)}function Ez(e){return"vec2("+e[0]+", "+e[1]+")"}function Mz(e,t){return e[0]===t[0]&&e[1]===t[1]}function xz(e,t){const r=e[0],i=e[1],s=t[0],n=t[1],o=Ht();return Math.abs(r-s)<=o*Math.max(1,Math.abs(r),Math.abs(s))&&Math.abs(i-n)<=o*Math.max(1,Math.abs(i),Math.abs(n))}function Az(e,t,r,i,s){let n=t[0]-r[0],o=t[1]-r[1];const a=(i[0]*n+i[1]*o)*(s-1);return n=i[0]*a,o=i[1]*a,e[0]=t[0]+n,e[1]=t[1]+o,e}const Pz=rf,jv=jc,Oz=BP,Cz=HP,Iz=fm,Rz=tf,kz=qP;Object.freeze(Object.defineProperty({__proto__:null,add:VP,angle:$z,ceil:hz,copy:Xa,cross:JP,dist:Iz,distance:fm,div:Cz,divide:HP,dot:ZP,equals:xz,exactEquals:Mz,floor:dz,inverse:gz,len:Pz,length:rf,lerp:_z,max:fz,min:pz,mul:Oz,multiply:BP,negate:WP,normalize:P1,projectAndScale:Az,random:vz,rotate:Tz,round:mz,scale:yh,scaleAndAdd:yz,set:at,sqrDist:Rz,sqrLen:kz,squaredDistance:tf,squaredLength:qP,str:Ez,sub:jv,subtract:jc,transformMat2:wz,transformMat2d:Ti,transformMat3:bz,transformMat4:Sz},Symbol.toStringTag,{value:"Module"}));function Le(){return[0,0]}function Nz(e){return[e[0],e[1]]}function gh(e,t){return[e,t]}function Lz(e,t){return[e,t]}function Dz(e,t=Le()){const r=Math.min(2,e.length);for(let i=0;i<r;++i)t[i]=e[i];return t}function Fz(e,t){return new Float64Array(e,t,2)}function YP(){return Le()}function KP(){return gh(1,1)}function XP(){return gh(1,0)}function QP(){return gh(0,1)}const Uz=YP(),jz=KP(),Gz=XP(),zz=QP();Object.freeze(Object.defineProperty({__proto__:null,ONES:jz,UNIT_X:Gz,UNIT_Y:zz,ZEROS:Uz,clone:Nz,create:Le,createView:Fz,freeze:Lz,fromArray:Dz,fromValues:gh,ones:KP,unitX:XP,unitY:QP,zeros:YP},Symbol.toStringTag,{value:"Module"}));function Vz(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e}function Bz(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e[4]=0,e[5]=0,e}function Hz(e,t,r,i,s,n,o){return e[0]=t,e[1]=r,e[2]=i,e[3]=s,e[4]=n,e[5]=o,e}function Gv(e,t){const r=t[0],i=t[1],s=t[2],n=t[3],o=t[4],a=t[5];let l=r*n-i*s;return l?(l=1/l,e[0]=n*l,e[1]=-i*l,e[2]=-s*l,e[3]=r*l,e[4]=(s*a-n*o)*l,e[5]=(i*o-r*a)*l,e):null}function qz(e){return e[0]*e[3]-e[1]*e[2]}function eO(e,t,r){const i=t[0],s=t[1],n=t[2],o=t[3],a=t[4],l=t[5],h=r[0],p=r[1],f=r[2],m=r[3],y=r[4],_=r[5];return e[0]=i*h+n*p,e[1]=s*h+o*p,e[2]=i*f+n*m,e[3]=s*f+o*m,e[4]=i*y+n*_+a,e[5]=s*y+o*_+l,e}function mm(e,t,r){const i=t[0],s=t[1],n=t[2],o=t[3],a=t[4],l=t[5],h=Math.sin(r),p=Math.cos(r);return e[0]=i*p+n*h,e[1]=s*p+o*h,e[2]=i*-h+n*p,e[3]=s*-h+o*p,e[4]=a,e[5]=l,e}function zv(e,t,r){const i=t[0],s=t[1],n=t[2],o=t[3],a=t[4],l=t[5],h=r[0],p=r[1];return e[0]=i*h,e[1]=s*h,e[2]=n*p,e[3]=o*p,e[4]=a,e[5]=l,e}function Gc(e,t,r){const i=t[0],s=t[1],n=t[2],o=t[3],a=t[4],l=t[5],h=r[0],p=r[1];return e[0]=i,e[1]=s,e[2]=n,e[3]=o,e[4]=i*h+n*p+a,e[5]=s*h+o*p+l,e}function tO(e,t){const r=Math.sin(t),i=Math.cos(t);return e[0]=i,e[1]=r,e[2]=-r,e[3]=i,e[4]=0,e[5]=0,e}function rO(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=t[1],e[4]=0,e[5]=0,e}function Vv(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e[4]=t[0],e[5]=t[1],e}function Wz(e){return"mat2d("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+")"}function Zz(e){return Math.sqrt(e[0]**2+e[1]**2+e[2]**2+e[3]**2+e[4]**2+e[5]**2+1)}function Jz(e,t,r){return e[0]=t[0]+r[0],e[1]=t[1]+r[1],e[2]=t[2]+r[2],e[3]=t[3]+r[3],e[4]=t[4]+r[4],e[5]=t[5]+r[5],e}function iO(e,t,r){return e[0]=t[0]-r[0],e[1]=t[1]-r[1],e[2]=t[2]-r[2],e[3]=t[3]-r[3],e[4]=t[4]-r[4],e[5]=t[5]-r[5],e}function Yz(e,t,r){return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r,e[4]=t[4]*r,e[5]=t[5]*r,e}function Kz(e,t,r,i){return e[0]=t[0]+r[0]*i,e[1]=t[1]+r[1]*i,e[2]=t[2]+r[2]*i,e[3]=t[3]+r[3]*i,e[4]=t[4]+r[4]*i,e[5]=t[5]+r[5]*i,e}function Xz(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]}function Qz(e,t){const r=e[0],i=e[1],s=e[2],n=e[3],o=e[4],a=e[5],l=t[0],h=t[1],p=t[2],f=t[3],m=t[4],y=t[5],_=Ht();return Math.abs(r-l)<=_*Math.max(1,Math.abs(r),Math.abs(l))&&Math.abs(i-h)<=_*Math.max(1,Math.abs(i),Math.abs(h))&&Math.abs(s-p)<=_*Math.max(1,Math.abs(s),Math.abs(p))&&Math.abs(n-f)<=_*Math.max(1,Math.abs(n),Math.abs(f))&&Math.abs(o-m)<=_*Math.max(1,Math.abs(o),Math.abs(m))&&Math.abs(a-y)<=_*Math.max(1,Math.abs(a),Math.abs(y))}const eV=eO,tV=iO;Object.freeze(Object.defineProperty({__proto__:null,add:Jz,copy:Vz,determinant:qz,equals:Qz,exactEquals:Xz,frob:Zz,fromRotation:tO,fromScaling:rO,fromTranslation:Vv,identity:Bz,invert:Gv,mul:eV,multiply:eO,multiplyScalar:Yz,multiplyScalarAndAdd:Kz,rotate:mm,scale:zv,set:Hz,str:Wz,sub:tV,subtract:iO,translate:Gc},Symbol.toStringTag,{value:"Module"}));function ds(){return[1,0,0,1,0,0]}function rV(e){return[e[0],e[1],e[2],e[3],e[4],e[5]]}function iV(e,t,r,i,s,n){return[e,t,r,i,s,n]}function sV(e,t){return new Float64Array(e,t,6)}const nV=ds();Object.freeze(Object.defineProperty({__proto__:null,IDENTITY:nV,clone:rV,create:ds,createView:sV,fromValues:iV},Symbol.toStringTag,{value:"Module"}));const Yh={102100:{maxX:20037508342788905e-9,minX:-20037508342788905e-9,plus180Line:new Qr({paths:[[[20037508342788905e-9,-20037508342788905e-9],[20037508342788905e-9,20037508342788905e-9]]],spatialReference:le.WebMercator}),minus180Line:new Qr({paths:[[[-20037508342788905e-9,-20037508342788905e-9],[-20037508342788905e-9,20037508342788905e-9]]],spatialReference:le.WebMercator})},4326:{maxX:180,minX:-180,plus180Line:new Qr({paths:[[[180,-180],[180,180]]],spatialReference:le.WGS84}),minus180Line:new Qr({paths:[[[-180,-180],[-180,180]]],spatialReference:le.WGS84})}};function wo(e,t){return Math.ceil((e-t)/(2*t))}function sO(e,t){const r=mc(e);for(const i of r)for(const s of i)s[0]+=t;return e}function mc(e){return lv(e)?e.rings:e.paths}function Kie(e,t){return t?{...t,query:{...e??{},...t.query}}:{query:e}}function oV(e){return typeof e=="string"?Nt(e):C(e)}function aV(e,t,r){const i={};for(const s in e){if(s==="declaredClass")continue;const n=e[s];if(n!=null&&typeof n!="function")if(Array.isArray(n))i[s]=n.map(o=>aV(o));else if(typeof n=="object")if(n.toJSON){const o=n.toJSON(r==null?void 0:r[s]);i[s]=t?o:JSON.stringify(o)}else i[s]=t?n:JSON.stringify(n);else i[s]=n}return i}async function lV(e,t,r,i){const s=oV(e),n=t[0].spatialReference,o={...i,responseType:"json",query:{...s.query,f:"json",sr:n3(n),target:JSON.stringify({geometryType:uv(t[0]),geometries:t}),cutter:JSON.stringify(r)}},a=await We(s.path+"/cut",o),{cutIndexes:l,geometries:h=[]}=a.data;return{cutIndexes:l,geometries:h.map(p=>{const f=fl(p);return f.spatialReference=n,f})}}function uV(e){return{geometryType:uv(e[0]),geometries:e.map(t=>t.toJSON())}}function cV(e,t,r){const i=l9(t);return e.map(s=>{const n=i.fromJSON(s);return n.spatialReference=r,n})}async function hV(e,t,r){const i=typeof e=="string"?Nt(e):e,s=t[0].spatialReference,n=uv(t[0]),o={...r,query:{...i.query,f:"json",sr:n3(s),geometries:JSON.stringify(uV(t))}},{data:a}=await We(i.path+"/simplify",o);return cV(a.geometries,n,s)}const nO=()=>U.getLogger("esri.geometry.support.normalizeUtils");function dV(e){return e.type==="polygon"}function pV(e){return e[0].type==="polygon"}function fV(e){return e[0].type==="polyline"}function _S(e){const t=[];let r=0,i=0;for(let s=0;s<e.length;s++){const n=e[s];let o=null;for(let a=0;a<n.length;a++)o=n[a],t.push(o),a===0?(r=o[0],i=r):(r=Math.min(r,o[0]),i=Math.max(i,o[0]));o&&t.push([(r+i)/2,0])}return t}function mV(e,t){if(!(e instanceof Qr||e instanceof Ci)){const s="straightLineDensify: the input geometry is neither polyline nor polygon";throw nO().error(s),new I(s)}const r=mc(e),i=[];for(const s of r){const n=[];i.push(n),n.push([s[0][0],s[0][1]]);for(let o=0;o<s.length-1;o++){const a=s[o][0],l=s[o][1],h=s[o+1][0],p=s[o+1][1],f=Math.sqrt((h-a)*(h-a)+(p-l)*(p-l)),m=(p-l)/f,y=(h-a)/f,_=f/t;if(_>1){for(let M=1;M<=_-1;M++){const $=M*t,E=y*$+a,P=m*$+l;n.push([E,P])}const v=(f+Math.floor(_-1)*t)/2,w=y*v+a,b=m*v+l;n.push([w,b])}n.push([h,p])}}return dV(e)?new Ci({rings:i,spatialReference:e.spatialReference}):new Qr({paths:i,spatialReference:e.spatialReference})}function vS(e,t,r){if(t){const i=mV(e,1e6);e=nu(i,!0)}return r&&(e=sO(e,r)),e}function wS(e,t,r){if(Array.isArray(e)){const i=e[0];if(i>t){const s=wo(i,t);e[0]=i+s*(-2*t)}else if(i<r){const s=wo(i,r);e[0]=i+s*(-2*r)}}else{const i=e.x;if(i>t){const s=wo(i,t);e=e.clone().offset(s*(-2*t),0)}else if(i<r){const s=wo(i,r);e=e.clone().offset(s*(-2*r),0)}}return e}function yV(e,t){let r=-1;for(let i=0;i<t.cutIndexes.length;i++){const s=t.cutIndexes[i],n=t.geometries[i],o=mc(n);for(let a=0;a<o.length;a++){const l=o[a];l.some(h=>{if(h[0]<180)return!0;{let p=0;for(let m=0;m<l.length;m++){const y=l[m][0];p=y>p?y:p}p=Number(p.toFixed(9));const f=-360*wo(p,180);for(let m=0;m<l.length;m++){const y=n.getPoint(a,m);n.setPoint(a,m,y.clone().offset(f,0))}return!0}})}if(s===r){if(pV(e))for(const a of mc(n))e[s]=e[s].addRing(a);else if(fV(e))for(const a of mc(n))e[s]=e[s].addPath(a)}else r=s,e[s]=n}return e}async function gV(e,t,r){if(!Array.isArray(e))return gV([e],t);t&&typeof t!="string"&&nO().warn("normalizeCentralMeridian()","The url object is deprecated, use the url string instead");const i=typeof t=="string"?t:(t==null?void 0:t.url)??ye.geometryServiceUrl;let s,n,o,a,l,h,p,f,m=0;const y=[],_=[];for(const E of e)if(E!=null)if(s||(s=E.spatialReference,n=Rt(s),o=s.isWebMercator,h=o?102100:4326,a=Yh[h].maxX,l=Yh[h].minX,p=Yh[h].plus180Line,f=Yh[h].minus180Line),n)if(E.type==="mesh")_.push(E);else if(E.type==="point")_.push(wS(E.clone(),a,l));else if(E.type==="multipoint"){const P=E.clone();P.points=P.points.map(O=>wS(O,a,l)),_.push(P)}else if(E.type==="extent"){const P=E.clone()._normalize(!1,!1,n);_.push(P.rings?new Ci(P):P)}else if(E.extent){const P=E.extent,O=wo(P.xmin,l)*(2*a);let L=O===0?E.clone():sO(E.clone(),O);P.offset(O,0);let{xmin:k,xmax:z}=P;k=Number(k.toFixed(9)),z=Number(z.toFixed(9)),P.intersects(p)&&z!==a?(m=z>m?z:m,L=vS(L,o),y.push(L),_.push("cut")):P.intersects(f)&&k!==l?(m=z*(2*a)>m?z*(2*a):m,L=vS(L,o,360),y.push(L),_.push("cut")):_.push(L)}else _.push(E.clone());else _.push(E);else _.push(E);let v=wo(m,a),w=-90;const b=v,M=new Qr;for(;v>0;){const E=360*v-180;M.addPath([[E,w],[E,-1*w]]),w*=-1,v--}if(y.length>0&&b>0){const E=yV(y,await lV(i,y,M,r)),P=[],O=[];for(let z=0;z<_.length;z++){const B=_[z];if(B!=="cut")O.push(B);else{const K=E.shift(),ie=e[z];ie!=null&&ie.type==="polygon"&&ie.rings&&ie.rings.length>1&&K.rings.length>=ie.rings.length?(P.push(K),O.push("simplify")):O.push(o?To(K):K)}}if(!P.length)return O;const L=await hV(i,P,r),k=[];for(let z=0;z<O.length;z++){const B=O[z];B!=="simplify"?k.push(B):k.push(o?To(L.shift()):L.shift())}return k}const $=[];for(let E=0;E<_.length;E++){const P=_[E];if(P!=="cut")$.push(P);else{const O=y.shift();$.push(o===!0?To(O):O)}}return $}function _V(e){if(!e)return null;const t=e.extent;if(!t)return null;const r=e.spatialReference&&Rt(e.spatialReference);if(!r)return t;const[i,s]=r.valid,n=2*s,{width:o}=t;let a,{xmin:l,xmax:h}=t;if([l,h]=[h,l],e.type==="extent"||o===0||o<=s||o>n||l<i||h>s)return t;switch(e.type){case"polygon":if(!(e.rings.length>1))return t;a=_S(e.rings);break;case"polyline":if(!(e.paths.length>1))return t;a=_S(e.paths);break;case"multipoint":a=e.points}const p=t.clone();for(let f=0;f<a.length;f++){let m=a[f][0];m<0?(m+=s,h=Math.max(m,h)):(m-=s,l=Math.min(m,l))}return p.xmin=l,p.xmax=h,p.width<o?(p.xmin-=s,p.xmax-=s,p):t}function Bv(e,t,r){const i=Rt(r);if(i==null)return e;const[s,n]=i.valid,o=2*n;let a=0,l=0;t>n?a=Math.ceil(Math.abs(t-n)/o):t<s&&(a=-Math.ceil(Math.abs(t-s)/o)),e>n?l=Math.ceil(Math.abs(e-n)/o):e<s&&(l=-Math.ceil(Math.abs(e-s)/o));let h=e+(a-l)*o;const p=h-t;return p>n?h-=o:p<s&&(h+=o),h}function Xie(e,t){const r=Rt(t);if(r){const[i,s]=r.valid,n=s-i;if(e<i)for(;e<i;)e+=n;if(e>s)for(;e>s;)e-=n}return e}const oO=96,aO=39.37,vV=180/Math.PI;function lO(e){return e.wkid?e:e.spatialReference||le.WGS84}function Hv(e,t){return t.type?at(e,t.x,t.y):Xa(e,t)}function uO(e){return Ni(e)}function ym(e,t,r=0){let i=e.width,s=e.height;if(r!==0){const a=Hf(r),l=Math.abs(Math.cos(a)),h=Math.abs(Math.sin(a));i=e.width*l+e.height*h,s=e.width*h+e.height*l}const n=Math.max(1,t[0]),o=Math.max(1,t[1]);return Math.max(i/n,s/o)*xV(e.spatialReference)}async function Vu(e,t,r,i){var a,l,h;let s,n;if(!e||Array.isArray(e)&&!e.length)return null;if(H.isCollection(e)&&(e=e.toArray()),Array.isArray(e)&&e.length&&typeof e[0]=="object"){const p=e.every(y=>"attributes"in y),f=e.some(y=>!y.geometry);let m=e;if(p&&f&&t&&t.allLayerViews){const y=new Map;for(const b of e){const M=b.layer,$=y.get(M)||[],E=b.attributes[M.objectIdField];E!=null&&$.push(E),y.set(M,$)}const _=[];y.forEach((b,M)=>{var E;const $=(E=t.allLayerViews)==null?void 0:E.find(P=>P.layer.id===M.id);if($&&"queryFeatures"in $){const P=M.createQuery();P.objectIds=b,P.returnGeometry=!0,_.push($.queryFeatures(P))}});const v=await Promise.all(_),w=[];for(const b of v)if(b&&b.features&&b.features.length)for(const M of b.features)M.geometry!=null&&w.push(M.geometry);m=w}for(const y of m)i=await Vu(y,t,r,i);return i}if(Array.isArray(e)&&e.length===2&&typeof e[0]=="number"&&typeof e[1]=="number")s=new re(e);else if(e instanceof gs)s=e;else if("geometry"in e){if(e.geometry)s=e.geometry;else if(e.layer){const p=e.layer,f=(a=t.allLayerViews)==null?void 0:a.find(m=>m.layer.id===p.id);if(f&&"queryFeatures"in f){const m=p.createQuery();m.objectIds=[e.attributes[p.objectIdField]],m.returnGeometry=!0;const y=await f.queryFeatures(m);s=(h=(l=y==null?void 0:y.features)==null?void 0:l[0])==null?void 0:h.geometry}}}if(s==null)return null;switch(s.type){case"point":n=new De({xmin:s.x,ymin:s.y,xmax:s.x,ymax:s.y,spatialReference:s.spatialReference});break;case"extent":case"multipoint":case"polygon":case"polyline":n=_V(s);break;default:n=s.extent}if(!n)return null;An()||Ii(n.spatialReference,r)||await $n();const o=Bo(n,r);if(!o)return null;if(i){const p=o.center,f=p.clone();f.x=Bv(p.x,i.center.x,r),f.x!==p.x&&o.centerAt(f),i=i.union(o)}else i=o;return i}function wV(e){var t;if(e&&(!Array.isArray(e)||typeof e[0]!="number")&&(typeof e=="object"||Array.isArray(e)&&typeof e[0]=="object")){if("layer"in e&&((t=e.layer)==null?void 0:t.minScale)!=null&&e.layer.maxScale!=null){const r=e.layer;return{min:r.minScale,max:r.maxScale}}if(Array.isArray(e)&&e.length&&e.every(r=>"layer"in r)){let r=0,i=0;for(const s of e){const n=s.layer;n!=null&&n.minScale&&n.maxScale&&(r=n.minScale<r?n.minScale:r,i=n.maxScale>i?n.maxScale:i)}return r&&i?{min:r,max:i}:null}}}function bS(e,t){const r=lO(e);return ct(r,t)||r.imageCoordinateSystem||t.imageCoordinateSystem?e:Bo(e,t)}async function bV(e,t){var w;if(!e||!t)return new Pr({targetGeometry:new re,scale:0,rotation:0});let r=t.spatialReference;const{constraints:i,padding:s,viewpoint:n,size:o}=t,a=[s?o[0]-s.left-s.right:o[0],s?o[1]-s.top-s.bottom:o[1]];let l=null;e instanceof Pr?l=e:e.viewpoint?l=e.viewpoint:e.target&&e.target.declaredClass==="esri.Viewpoint"&&(l=e.target);let h=null;l!=null&&l.targetGeometry?h=l.targetGeometry:e instanceof De?h=e:e instanceof gs?h=await Vu(e,t,r):e&&(h=await Vu(e.center,t,r)||await Vu(e.target,t,r)||await Vu(e,t,r)),!h&&(n!=null&&n.targetGeometry)?h=n.targetGeometry:!h&&t.extent&&(h=t.extent),r||(r=lO(t.spatialReference||t.extent||h)),An()||ct(h.spatialReference,r)||Ii(h.spatialReference,r)||await $n();const p=bS(h,r),f="center"in p?p.center:p;t.pickClosestTarget!==!1&&f.type==="point"&&((w=n.targetGeometry)==null?void 0:w.type)==="point"&&(f.x=Bv(f.x,n.targetGeometry.x,f.spatialReference));let m=0;l?m=l.rotation:e.hasOwnProperty("rotation")?m=e.rotation:n&&(m=n.rotation);let y=0;y=(l==null?void 0:l.targetGeometry)!=null&&l.targetGeometry.type==="point"?l.scale:"scale"in e&&e.scale?e.scale:"zoom"in e&&e.zoom!==-1&&i&&i.effectiveLODs?i.zoomToScale(e.zoom):Array.isArray(h)||h.type==="point"||h.type==="extent"&&h.width===0&&h.height===0?n.scale:ym(bS(h.extent,r),a,m);const _=wV(e.target??e);_&&(_.min&&_.min<y?y=_.min:_.max&&_.max>y&&(y=_.max));let v=new Pr({targetGeometry:f,scale:y,rotation:m});return i&&(v=i.fit(v),i.constrainByGeometry(v),i.rotationEnabled||(v.rotation=n.rotation)),v}function St(e,t){const r=e.targetGeometry,i=t.targetGeometry;return r.x=i.x,r.y=i.y,r.spatialReference=i.spatialReference,e.scale=t.scale,e.rotation=t.rotation,e}function SV(e,t,r){return r?at(e,.5*(t[0]-r.right+r.left),.5*(t[1]-r.bottom+r.top)):yh(e,t,.5)}const TV=function(){const e=Le();return function(t,r,i){const s=r.targetGeometry;Hv(e,s);const n=.5*Cl(r);return t.xmin=e[0]-n*i[0],t.ymin=e[1]-n*i[1],t.xmax=e[0]+n*i[0],t.ymax=e[1]+n*i[1],t.spatialReference=s.spatialReference,t}}();function $V(e,t,r,i,s){var n;return O1(e,t,r.center),e.scale=ym(r,i),(n=s==null?void 0:s.constraints)==null||n.constrain(e),e}function EV(e,t,r,i){return Zv(e,t,r,i),Gv(e,e)}const cO=function(){const e=Le();return function(t,r,i){return jv(t,AV(t,r),SV(e,r,i))}}(),MV=function(){const e=ds(),t=Le();return function(r,i,s,n){const o=Cl(i),a=qv(i);return at(t,o,o),rO(e,t),mm(e,e,a),Gc(e,e,cO(t,s,n)),Gc(e,e,[0,n.top-n.bottom]),at(r,e[4],e[5])}}();function Cl(e){var t;return e.scale*hO((t=e.targetGeometry)==null?void 0:t.spatialReference)}function hO(e){return sr(e)?1/(uO(e)*aO*oO):1}function qv(e){return ev(e.rotation)||0}function xV(e){return sr(e)?uO(e)*aO*oO:1}function AV(e,t){return yh(e,t,.5)}const Wv=function(){const e=Le(),t=Le(),r=Le();return function(i,s,n,o,a,l){return WP(e,s),yh(t,n,.5*l),at(r,1/o*l,-1/o*l),Vv(i,t),a&&mm(i,i,a),zv(i,i,r),Gc(i,i,e),i}}(),Zv=function(){const e=Le();return function(t,r,i,s){const n=Cl(r),o=qv(r);return Hv(e,r.targetGeometry),Wv(t,e,i,n,o,s)}}(),PV=function(){const e=Le();return function(t,r,i,s){const n=Cl(r);return Hv(e,r.targetGeometry),Wv(t,e,i,n,0,s)}}();function dO(e){const t=Rt(e);return t?t.valid[1]-t.valid[0]:0}function OV(e,t){return Math.round(dO(e)/t)}const CV=function(){const e=Le(),t=Le(),r=[0,0,0];return function(i,s,n){jc(e,i,s),P1(e,e),jc(t,i,n),P1(t,t),JP(r,e,t);let o=Math.acos(ZP(e,t)/(rf(e)*rf(t)))*vV;return r[2]<0&&(o=-o),isNaN(o)&&(o=0),o}}(),IV=function(){const e=Le();return function(t,r,i,s){const n=t.targetGeometry;return St(t,r),MV(e,r,i,s),n.x+=e[0],n.y+=e[1],t}}(),O1=function(e,t,r){St(e,t);const i=e.targetGeometry;return i.x=r.x,i.y=r.y,i.spatialReference=r.spatialReference,e},RV=function(){const e=Le();return function(t,r,i,s,n){n||(n="center"),jv(e,i,s),yh(e,e,.5);const o=e[0],a=e[1];switch(n){case"center":at(e,0,0);break;case"left":at(e,-o,0);break;case"top":at(e,0,a);break;case"right":at(e,o,0);break;case"bottom":at(e,0,-a);break;case"top-left":at(e,-o,a);break;case"bottom-left":at(e,-o,-a);break;case"top-right":at(e,o,a);break;case"bottom-right":at(e,o,-a)}return gm(t,r,e),t}}();function Qie(e,t,r){return St(e,t),e.rotation+=r,e}function kV(e,t,r){return St(e,t),e.rotation=r,e}const NV=function(){const e=Le();return function(t,r,i,s,n){return St(t,r),isNaN(i)||i===0||(fO(e,s,r,n),t.scale=r.scale*i,mO(e,e,t,n),gm(t,t,at(e,e[0]-s[0],s[1]-e[1]))),t}}();function SS(e,t,r){return St(e,t),e.scale=r,e}const pO=function(){const e=Le();return function(t,r,i,s,n,o){return St(t,r),isNaN(i)||i===0||(fO(e,n,r,o),t.scale=r.scale*i,t.rotation+=s,mO(e,e,t,o),gm(t,t,at(e,e[0]-n[0],n[1]-e[1]))),t}}(),ese=function(){const e=Le(),t=Le();return function(r,i,s,n,o,a,l){return cO(t,a,l),VP(e,o,t),n?pO(r,i,s,n,e,a):NV(r,i,s,e,a)}}(),fO=function(){const e=ds();return function(t,r,i,s){return Ti(t,r,EV(e,i,s,1))}}(),mO=function(){const e=ds();return function(t,r,i,s){return Ti(t,r,Zv(e,i,s,1))}}(),gm=function(){const e=Le(),t=ds();return function(r,i,s){St(r,i);const n=Cl(i),o=r.targetGeometry;return tO(t,qv(i)),zv(t,t,gh(n,n)),Ti(e,s,t),o.x+=e[0],o.y+=e[1],r}}();function yO(){const e=new Float32Array(6);return e[0]=1,e[3]=1,e}function LV(e){const t=new Float32Array(6);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t}function DV(e,t,r,i,s,n){const o=new Float32Array(6);return o[0]=e,o[1]=t,o[2]=r,o[3]=i,o[4]=s,o[5]=n,o}function FV(e,t){return new Float32Array(e,t,6)}function gO(e,t,r,i){const s=t[i],n=t[i+1];e[i]=r[0]*s+r[2]*n+r[4],e[i+1]=r[1]*s+r[3]*n+r[5]}function UV(e,t,r,i=0,s=0,n=2){const o=s||t.length/n;for(let a=i;a<o;a++)gO(e,t,r,a*n)}Object.freeze(Object.defineProperty({__proto__:null,clone:LV,create:yO,createView:FV,fromValues:DV,transform:gO,transformMany:UV},Symbol.toStringTag,{value:"Module"}));function jV(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[4],e[4]=t[5],e[5]=t[6],e[6]=t[8],e[7]=t[9],e[8]=t[10],e}function GV(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e}function _O(e,t,r,i,s,n,o,a,l,h){return e[0]=t,e[1]=r,e[2]=i,e[3]=s,e[4]=n,e[5]=o,e[6]=a,e[7]=l,e[8]=h,e}function vO(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e}function zV(e,t){if(e===t){const r=t[1],i=t[2],s=t[5];e[1]=t[3],e[2]=t[6],e[3]=r,e[5]=t[7],e[6]=i,e[7]=s}else e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8];return e}function VV(e,t){const r=t[0],i=t[1],s=t[2],n=t[3],o=t[4],a=t[5],l=t[6],h=t[7],p=t[8],f=p*o-a*h,m=-p*n+a*l,y=h*n-o*l;let _=r*f+i*m+s*y;return _?(_=1/_,e[0]=f*_,e[1]=(-p*i+s*h)*_,e[2]=(a*i-s*o)*_,e[3]=m*_,e[4]=(p*r-s*l)*_,e[5]=(-a*r+s*n)*_,e[6]=y*_,e[7]=(-h*r+i*l)*_,e[8]=(o*r-i*n)*_,e):null}function BV(e,t){const r=t[0],i=t[1],s=t[2],n=t[3],o=t[4],a=t[5],l=t[6],h=t[7],p=t[8];return e[0]=o*p-a*h,e[1]=s*h-i*p,e[2]=i*a-s*o,e[3]=a*l-n*p,e[4]=r*p-s*l,e[5]=s*n-r*a,e[6]=n*h-o*l,e[7]=i*l-r*h,e[8]=r*o-i*n,e}function HV(e){const t=e[0],r=e[1],i=e[2],s=e[3],n=e[4],o=e[5],a=e[6],l=e[7],h=e[8];return t*(h*n-o*l)+r*(-h*s+o*a)+i*(l*s-n*a)}function Jv(e,t,r){const i=t[0],s=t[1],n=t[2],o=t[3],a=t[4],l=t[5],h=t[6],p=t[7],f=t[8],m=r[0],y=r[1],_=r[2],v=r[3],w=r[4],b=r[5],M=r[6],$=r[7],E=r[8];return e[0]=m*i+y*o+_*h,e[1]=m*s+y*a+_*p,e[2]=m*n+y*l+_*f,e[3]=v*i+w*o+b*h,e[4]=v*s+w*a+b*p,e[5]=v*n+w*l+b*f,e[6]=M*i+$*o+E*h,e[7]=M*s+$*a+E*p,e[8]=M*n+$*l+E*f,e}function C1(e,t,r){const i=t[0],s=t[1],n=t[2],o=t[3],a=t[4],l=t[5],h=t[6],p=t[7],f=t[8],m=r[0],y=r[1];return e[0]=i,e[1]=s,e[2]=n,e[3]=o,e[4]=a,e[5]=l,e[6]=m*i+y*o+h,e[7]=m*s+y*a+p,e[8]=m*n+y*l+f,e}function wO(e,t,r){const i=t[0],s=t[1],n=t[2],o=t[3],a=t[4],l=t[5],h=t[6],p=t[7],f=t[8],m=Math.sin(r),y=Math.cos(r);return e[0]=y*i+m*o,e[1]=y*s+m*a,e[2]=y*n+m*l,e[3]=y*o-m*i,e[4]=y*a-m*s,e[5]=y*l-m*n,e[6]=h,e[7]=p,e[8]=f,e}function qV(e,t,r){const i=r[0],s=r[1],n=r[2];return e[0]=i*t[0],e[1]=i*t[1],e[2]=i*t[2],e[3]=s*t[3],e[4]=s*t[4],e[5]=s*t[5],e[6]=n*t[6],e[7]=n*t[7],e[8]=n*t[8],e}function WV(e,t,r){const i=r[0],s=r[1];return e[0]=i*t[0],e[1]=i*t[1],e[2]=i*t[2],e[3]=s*t[3],e[4]=s*t[4],e[5]=s*t[5],e}function ZV(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=t[0],e[7]=t[1],e[8]=1,e}function JV(e,t){const r=Math.sin(t),i=Math.cos(t);return e[0]=i,e[1]=r,e[2]=0,e[3]=-r,e[4]=i,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e}function YV(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=0,e[4]=t[1],e[5]=0,e[6]=0,e[7]=0,e[8]=1,e}function KV(e,t){return e[0]=t[0],e[1]=t[1],e[2]=0,e[3]=t[2],e[4]=t[3],e[5]=0,e[6]=t[4],e[7]=t[5],e[8]=1,e}function XV(e,t){const r=t[0],i=t[1],s=t[2],n=t[3],o=r+r,a=i+i,l=s+s,h=r*o,p=i*o,f=i*a,m=s*o,y=s*a,_=s*l,v=n*o,w=n*a,b=n*l;return e[0]=1-f-_,e[3]=p-b,e[6]=m+w,e[1]=p+b,e[4]=1-h-_,e[7]=y-v,e[2]=m-w,e[5]=y+v,e[8]=1-h-f,e}function QV(e,t){const r=t[0],i=t[1],s=t[2],n=t[4],o=t[5],a=t[6],l=t[8],h=t[9],p=t[10],f=p*o-a*h,m=-p*n+a*l,y=h*n-o*l,_=r*f+i*m+s*y;if(!_)return null;const v=1/_;return e[0]=f*v,e[1]=(-p*i+s*h)*v,e[2]=(a*i-s*o)*v,e[3]=m*v,e[4]=(p*r-s*l)*v,e[5]=(-a*r+s*n)*v,e[6]=y*v,e[7]=(-h*r+i*l)*v,e[8]=(o*r-i*n)*v,e}function eB(e,t){const r=t[0],i=t[1],s=t[2],n=t[3],o=t[4],a=t[5],l=t[6],h=t[7],p=t[8],f=t[9],m=t[10],y=t[11],_=t[12],v=t[13],w=t[14],b=t[15],M=r*a-i*o,$=r*l-s*o,E=r*h-n*o,P=i*l-s*a,O=i*h-n*a,L=s*h-n*l,k=p*v-f*_,z=p*w-m*_,B=p*b-y*_,K=f*w-m*v,ie=f*b-y*v,we=m*b-y*w;let X=M*we-$*ie+E*K+P*B-O*z+L*k;return X?(X=1/X,e[0]=(a*we-l*ie+h*K)*X,e[1]=(l*B-o*we-h*z)*X,e[2]=(o*ie-a*B+h*k)*X,e[3]=(s*ie-i*we-n*K)*X,e[4]=(r*we-s*B+n*z)*X,e[5]=(i*B-r*ie-n*k)*X,e[6]=(v*L-w*O+b*P)*X,e[7]=(w*E-_*L-b*$)*X,e[8]=(_*O-v*E+b*M)*X,e):null}function tB(e,t,r){return e[0]=2/t,e[1]=0,e[2]=0,e[3]=0,e[4]=-2/r,e[5]=0,e[6]=-1,e[7]=1,e[8]=1,e}function rB(e){return"mat3("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+", "+e[8]+")"}function iB(e){return Math.sqrt(e[0]**2+e[1]**2+e[2]**2+e[3]**2+e[4]**2+e[5]**2+e[6]**2+e[7]**2+e[8]**2)}function sB(e,t,r){return e[0]=t[0]+r[0],e[1]=t[1]+r[1],e[2]=t[2]+r[2],e[3]=t[3]+r[3],e[4]=t[4]+r[4],e[5]=t[5]+r[5],e[6]=t[6]+r[6],e[7]=t[7]+r[7],e[8]=t[8]+r[8],e}function bO(e,t,r){return e[0]=t[0]-r[0],e[1]=t[1]-r[1],e[2]=t[2]-r[2],e[3]=t[3]-r[3],e[4]=t[4]-r[4],e[5]=t[5]-r[5],e[6]=t[6]-r[6],e[7]=t[7]-r[7],e[8]=t[8]-r[8],e}function nB(e,t,r){return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r,e[4]=t[4]*r,e[5]=t[5]*r,e[6]=t[6]*r,e[7]=t[7]*r,e[8]=t[8]*r,e}function oB(e,t,r,i){return e[0]=t[0]+r[0]*i,e[1]=t[1]+r[1]*i,e[2]=t[2]+r[2]*i,e[3]=t[3]+r[3]*i,e[4]=t[4]+r[4]*i,e[5]=t[5]+r[5]*i,e[6]=t[6]+r[6]*i,e[7]=t[7]+r[7]*i,e[8]=t[8]+r[8]*i,e}function aB(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]&&e[6]===t[6]&&e[7]===t[7]&&e[8]===t[8]}function lB(e,t){const r=e[0],i=e[1],s=e[2],n=e[3],o=e[4],a=e[5],l=e[6],h=e[7],p=e[8],f=t[0],m=t[1],y=t[2],_=t[3],v=t[4],w=t[5],b=t[6],M=t[7],$=t[8],E=Ht();return Math.abs(r-f)<=E*Math.max(1,Math.abs(r),Math.abs(f))&&Math.abs(i-m)<=E*Math.max(1,Math.abs(i),Math.abs(m))&&Math.abs(s-y)<=E*Math.max(1,Math.abs(s),Math.abs(y))&&Math.abs(n-_)<=E*Math.max(1,Math.abs(n),Math.abs(_))&&Math.abs(o-v)<=E*Math.max(1,Math.abs(o),Math.abs(v))&&Math.abs(a-w)<=E*Math.max(1,Math.abs(a),Math.abs(w))&&Math.abs(l-b)<=E*Math.max(1,Math.abs(l),Math.abs(b))&&Math.abs(h-M)<=E*Math.max(1,Math.abs(h),Math.abs(M))&&Math.abs(p-$)<=E*Math.max(1,Math.abs(p),Math.abs($))}function uB(e){const t=Ht(),r=e[0],i=e[1],s=e[2],n=e[3],o=e[4],a=e[5],l=e[6],h=e[7],p=e[8];return Math.abs(1-(r*r+n*n+l*l))<=t&&Math.abs(1-(i*i+o*o+h*h))<=t&&Math.abs(1-(s*s+a*a+p*p))<=t}const cB=Jv,hB=bO;Object.freeze(Object.defineProperty({__proto__:null,add:sB,adjoint:BV,copy:GV,determinant:HV,equals:lB,exactEquals:aB,frob:iB,fromMat2d:KV,fromMat4:jV,fromQuat:XV,fromRotation:JV,fromScaling:YV,fromTranslation:ZV,identity:vO,invert:VV,isOrthoNormal:uB,mul:cB,multiply:Jv,multiplyScalar:nB,multiplyScalarAndAdd:oB,normalFromMat4:eB,normalFromMat4Legacy:QV,projection:tB,rotate:wO,scale:qV,scaleByVec2:WV,set:_O,str:rB,sub:hB,subtract:bO,translate:C1,transpose:zV},Symbol.toStringTag,{value:"Module"}));function ep(){const e=new Float32Array(9);return e[0]=1,e[4]=1,e[8]=1,e}function dB(e){const t=new Float32Array(9);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t}function pB(e,t,r,i,s,n,o,a,l){const h=new Float32Array(9);return h[0]=e,h[1]=t,h[2]=r,h[3]=i,h[4]=s,h[5]=n,h[6]=o,h[7]=a,h[8]=l,h}function fB(e,t){return new Float32Array(e,t,9)}Object.freeze(Object.defineProperty({__proto__:null,clone:dB,create:ep,createView:fB,fromValues:pB},Symbol.toStringTag,{value:"Module"}));function SO(){return new Float32Array(2)}function mB(e){const t=new Float32Array(2);return t[0]=e[0],t[1]=e[1],t}function _l(e,t){const r=new Float32Array(2);return r[0]=e,r[1]=t,r}function yB(e,t){return new Float32Array(e,t,2)}function TO(){return SO()}function $O(){return _l(1,1)}function EO(){return _l(1,0)}function MO(){return _l(0,1)}const gB=TO(),_B=$O(),vB=EO(),wB=MO();Object.freeze(Object.defineProperty({__proto__:null,ONES:_B,UNIT_X:vB,UNIT_Y:wB,ZEROS:gB,clone:mB,create:SO,createView:yB,fromValues:_l,ones:$O,unitX:EO,unitY:MO,zeros:TO},Symbol.toStringTag,{value:"Module"}));function bB(e){return e instanceof Float32Array&&e.length>=2}function SB(e){return Array.isArray(e)&&e.length>=2}function _y(e){return bB(e)||SB(e)}var I1;const Ui=[0,0];let Qi=I1=class extends G{constructor(e){super(e),this._viewpoint2D={center:Le(),rotation:0,scale:0,spatialReference:void 0},this.center=[0,0],this.extent=new De,this.id=0,this.inverseTransform=ds(),this.resolution=0,this.rotation=0,this.scale=0,this.transform=ds(),this.transformNoRotation=ds(),this.displayMat3=ep(),this.displayViewMat3=ep(),this.viewMat3=ep(),this.viewMat2d=yO(),this.worldScreenWidth=0,this.size=[0,0]}set pixelRatio(e){this._set("pixelRatio",e),this._update()}set size(e){this._set("size",e),this._update()}set viewpoint(e){if(e){const t=this._viewpoint2D,r=e.targetGeometry;t.center[0]=r.x,t.center[1]=r.y,t.rotation=e.rotation,t.scale=e.scale,t.spatialReference=r.spatialReference}this._update()}get visibleArea(){const[e,t]=this.size;return[this.toMap([0,0],0,0),this.toMap([0,0],0,t),this.toMap([0,0],e,t),this.toMap([0,0],e,0)]}copy(e){const t=this.size,r=this.viewpoint;return r&&t?(this.viewpoint=St(r,e.viewpoint),this._set("size",Xa(t,e.size))):(this.viewpoint=e.viewpoint.clone(),this._set("size",[e.size[0],e.size[1]])),this._set("pixelRatio",e.pixelRatio),this}clone(){return new I1({size:this.size,viewpoint:this.viewpoint.clone(),pixelRatio:this.pixelRatio})}toMap(e,t,r){return _y(t)?Ti(e,t,this.inverseTransform):(Ui[0]=t,Ui[1]=r,Ti(e,Ui,this.inverseTransform))}toScreen(e,t,r){return _y(t)?Ti(e,t,this.transform):(Ui[0]=t,Ui[1]=r,Ti(e,Ui,this.transform))}toScreenNoRotation(e,t,r){return _y(t)?Ti(e,t,this.transformNoRotation):(Ui[0]=t,Ui[1]=r,Ti(e,Ui,this.transformNoRotation))}wrapMapCoordinate(e,t){Xa(e,t);const[r]=t,[i]=this.center,{extent:s,spatialReference:n}=this;let{xmin:o,xmax:a}=s;if(n.isWrappable){const l=dO(n)/2;o=Math.max(o,i-l),a=Math.min(a,i+l)}return(r<o||r>a)&&(e[0]=Bv(r,i,n)),e}getScreenTransform(e,t){const{center:r}=this._viewpoint2D,i=this._get("pixelRatio")||1,s=this._get("size");return Wv(e,r,s,t,0,i),e}_update(){const{center:e,spatialReference:t,scale:r,rotation:i}=this._viewpoint2D,s=this._get("pixelRatio")||1,n=this._get("size"),o=new Pr({targetGeometry:new re(e[0],e[1],t),scale:r,rotation:i});if(this._set("viewpoint",o),!n||!t||!r)return;this.resolution=Cl(o),this.rotation=i,this.scale=r,this.spatialReference=t,Xa(this.center,e);const a=n[0]!==0?2/n[0]:0,l=n[1]!==0?-2/n[1]:0;_O(this.displayMat3,a,0,0,0,l,0,-1,1,1);const h=vO(this.viewMat3),p=_l(n[0]/2,n[1]/2),f=_l(-n[0]/2,-n[1]/2),m=ev(i);C1(h,h,p),wO(h,h,m),C1(h,h,f),Jv(this.displayViewMat3,this.displayMat3,h);const y=Vv(this.viewMat2d,p);return mm(y,y,m),Gc(y,y,f),TV(this.extent,o,n),Zv(this.transform,o,n,s),Gv(this.inverseTransform,this.transform),PV(this.transformNoRotation,o,n,s),this.worldScreenWidth=OV(this.spatialReference,this.resolution),this._set("id",this.id+1),this.notifyChange("visibleArea"),this}};c([d({readOnly:!0})],Qi.prototype,"id",void 0),c([d({value:1,json:{write:!0}})],Qi.prototype,"pixelRatio",null),c([d({json:{write:!0}})],Qi.prototype,"size",null),c([d()],Qi.prototype,"spatialReference",void 0),c([d({type:Pr,json:{write:!0}})],Qi.prototype,"viewpoint",null),c([d({readOnly:!0})],Qi.prototype,"visibleArea",null),Qi=I1=c([S("esri.views.2d.ViewState")],Qi);const TS=Qi;var R1,k1;let ls=R1=class extends W{constructor(){super(...arguments),this.left=0,this.top=0,this.right=0,this.bottom=0}clone(){return new R1({left:this.left,top:this.top,right:this.right,bottom:this.bottom})}};c([d()],ls.prototype,"left",void 0),c([d()],ls.prototype,"top",void 0),c([d()],ls.prototype,"right",void 0),c([d()],ls.prototype,"bottom",void 0),ls=R1=c([S("esri.views.2d.PaddedViewState.Padding")],ls);let $a=k1=class extends TS{constructor(...e){super(...e),this.paddedViewState=new TS,this._updateContent=(()=>{const t=Le();return()=>{const r=this._get("size"),i=this._get("padding");if(!r||!i)return;const s=this.paddedViewState;at(t,i.left+i.right,i.top+i.bottom),jc(t,r,t),Xa(s.size,t);const n=s.viewpoint;n&&(this.viewpoint=n)}})(),this.addHandles(Q(()=>[this.size,this.padding],()=>this._updateContent(),bn)),this.padding=new ls,this.size=[0,0]}set padding(e){this._set("padding",e||new ls)}set viewpoint(e){if(e){this.paddedViewState.viewpoint=e;let t=e;const r=this._get("padding");r&&(t=IV(e.clone(),e,this._get("size"),r));const{targetGeometry:i,rotation:s,scale:n}=t,{x:o,y:a,spatialReference:l}=i,h=this._viewpoint2D;h.center[0]=o,h.center[1]=a,h.rotation=s,h.scale=n,h.spatialReference=l,this._update()}}clone(){return new k1({padding:this.padding.clone(),size:this.size.slice(),viewpoint:this.paddedViewState.viewpoint.clone(),pixelRatio:this.pixelRatio})}};c([d()],$a.prototype,"paddedViewState",void 0),c([d({type:ls})],$a.prototype,"padding",null),c([d()],$a.prototype,"viewpoint",null),$a=k1=c([S("esri.views.2d.PaddedViewState")],$a);const Yv=$a;var dt;(function(e){e[e.ANIMATING=0]="ANIMATING",e[e.INTERACTING=1]="INTERACTING",e[e.IDLE=2]="IDLE"})(dt||(dt={}));const xO=Symbol("Yield");let TB=class{constructor(){this._tasks=new Array,this._runningTasks=gl(0)}get length(){return this._tasks.length}get running(){return this._runningTasks.value>0}destroy(){this.cancelAll()}runTask(t){if(this.length===0)return xO;for(;!t.done&&this._process(t);)t.madeProgress()}push(t,r,i){return++this._runningTasks.value,new Promise((s,n)=>this._tasks.push(new $S(s,n,t,r,i))).finally(()=>--this._runningTasks.value)}unshift(t,r,i){return++this._runningTasks.value,new Promise((s,n)=>this._tasks.unshift(new $S(s,n,t,r,i))).finally(()=>--this._runningTasks.value)}_process(t){var i;if(this._tasks.length===0)return!1;const r=this._tasks.shift();try{const s=ur(r.signal);if(s&&!r.abortCallback)r.reject(Ee());else{const n=s?(i=r.abortCallback)==null?void 0:i.call(r,Ee()):r.callback(t);ki(n)?n.then(r.resolve,r.reject):r.resolve(n)}}catch(s){r.reject(s)}return!0}cancelAll(){const t=Ee();for(const r of this._tasks)if(r.abortCallback){const i=r.abortCallback(t);r.resolve(i)}else r.reject(t);this._tasks.length=0}},$S=class{constructor(t,r,i,s=void 0,n=void 0){this.resolve=t,this.reject=r,this.callback=i,this.signal=s,this.abortCallback=n}},Bu=class extends W{constructor(){super(...arguments),this.SCHEDULER_LOG_SLOW_TASKS=!1,this.FEATURE_SERVICE_SNAPPING_SOURCE_TILE_TREE_SHOW_TILES=!1}};c([d()],Bu.prototype,"SCHEDULER_LOG_SLOW_TASKS",void 0),c([d()],Bu.prototype,"FEATURE_SERVICE_SNAPPING_SOURCE_TILE_TREE_SHOW_TILES",void 0),Bu=c([S("esri.views.support.debugFlags")],Bu);const $B=new Bu;function EB(){return new sf.Scheduler}var se;(function(e){e.RESOURCE_CONTROLLER_IMMEDIATE="immediate",e.RESOURCE_CONTROLLER="schedule",e.SLIDE="slide",e.STREAM_DATA_LOADER="stream loader",e.ELEVATION_QUERY="elevation query",e.TERRAIN_SURFACE="terrain",e.SURFACE_GEOMETRY_UPDATES="surface geometry updates",e.LOD_RENDERER="LoD renderer",e.GRAPHICS_CORE="Graphics3D",e.I3S_CONTROLLER="I3S",e.POINT_CLOUD_LAYER="point cloud",e.FEATURE_TILE_FETCHER="feature fetcher",e.OVERLAY="overlay",e.STAGE="stage",e.GRAPHICS_DECONFLICTOR="graphics deconflictor",e.FILTER_VISIBILITY="Graphics3D filter visibility",e.SCALE_VISIBILITY="Graphics3D scale visibility",e.FRUSTUM_VISIBILITY="Graphics3D frustum visibility",e.POINT_OF_INTEREST_FREQUENT="POI frequent",e.POINT_OF_INTEREST_INFREQUENT="POI infrequent",e.LABELER="labeler",e.FEATURE_QUERY_ENGINE="feature query",e.FEATURE_TILE_TREE="feature tile tree",e.FEATURE_TILE_TREE_ACTIVE="fast feature tile tree",e.ELEVATION_ALIGNMENT="elevation alignment",e.ELEVATION_ALIGNMENT_SCENE="elevation alignment scene",e.TEXT_TEXTURE_ATLAS="text texture atlas",e.TEXTURE_UNLOAD="texture unload",e.LINE_OF_SIGHT_TOOL="line of sight tool",e.LINE_OF_SIGHT_TOOL_INTERACTIVE="interactive line of sight tool",e.ELEVATION_PROFILE="elevation profile",e.SNAPPING="snapping",e.SHADOW_ACCUMULATOR="shadow accumulator",e.CLOUDS_GENERATOR="clouds generator",e.MAPVIEW_FETCH_QUEUE="mapview fetch queue",e.MAPVIEW_LAYERVIEW_UPDATE="mapview layerview update",e.MAPVIEW_VECTOR_TILE_PARSING_QUEUE="mapview vector tile parsing queue",e[e.NONE=0]="NONE",e[e.TEST_PRIO=1]="TEST_PRIO"})(se||(se={}));const br=0,ES=new Map([[se.RESOURCE_CONTROLLER_IMMEDIATE,br],[se.RESOURCE_CONTROLLER,4],[se.SLIDE,br],[se.STREAM_DATA_LOADER,br],[se.ELEVATION_QUERY,br],[se.TERRAIN_SURFACE,1],[se.SURFACE_GEOMETRY_UPDATES,1],[se.LOD_RENDERER,2],[se.GRAPHICS_CORE,2],[se.I3S_CONTROLLER,2],[se.POINT_CLOUD_LAYER,2],[se.FEATURE_TILE_FETCHER,2],[se.CLOUDS_GENERATOR,2],[se.OVERLAY,4],[se.STAGE,4],[se.GRAPHICS_DECONFLICTOR,4],[se.FILTER_VISIBILITY,4],[se.SCALE_VISIBILITY,4],[se.FRUSTUM_VISIBILITY,4],[se.POINT_OF_INTEREST_FREQUENT,6],[se.POINT_OF_INTEREST_INFREQUENT,30],[se.LABELER,8],[se.FEATURE_QUERY_ENGINE,8],[se.FEATURE_TILE_TREE,16],[se.FEATURE_TILE_TREE_ACTIVE,br],[se.ELEVATION_ALIGNMENT,12],[se.ELEVATION_ALIGNMENT_SCENE,14],[se.TEXT_TEXTURE_ATLAS,12],[se.TEXTURE_UNLOAD,12],[se.LINE_OF_SIGHT_TOOL,16],[se.LINE_OF_SIGHT_TOOL_INTERACTIVE,br],[se.SNAPPING,br],[se.SHADOW_ACCUMULATOR,30],[se.MAPVIEW_FETCH_QUEUE,br],[se.MAPVIEW_LAYERVIEW_UPDATE,2],[se.MAPVIEW_VECTOR_TILE_PARSING_QUEUE,br]]);function MS(e){return ES.has(e)?ES.get(e):typeof e=="number"?e:1}const MB=6.5,xS=1,xB=30,AB=1e3/30,PB=100,AS=.9;var sf,Rn;(function(e){class t{get updating(){return this._updating.value}_updatingChanged(){this._updating.value=this._tasks.some(n=>n.needsUpdate)}constructor(){this._updating=gl(!0),this._microTaskQueued=!1,this._frameNumber=0,this.performanceInfo={total:new Ku("total"),tasks:new Map},this._frameTaskTimes=new Map,this._budget=new i,this._state=dt.INTERACTING,this._tasks=new Xu,this._runQueue=new Xu,this._load=0,this._idleStateCallbacks=new Xu,this._idleUpdatesStartFired=!1,this._forceTask=!1,this._debug=!1,this._debugHandle=Q(()=>$B.SCHEDULER_LOG_SLOW_TASKS,n=>this._debug=n,Tt);for(const n of Object.keys(se))this.performanceInfo.tasks.set(se[n],new Ku(se[n]))}destroy(){this._tasks.toArray().forEach(n=>n.remove()),this._tasks.clear(),Ie(this._debugHandle),this._microTaskQueued=!1,this._updatingChanged()}taskRunningChanged(n){this._updatingChanged(),n&&this._budget.remaining>0&&!this._microTaskQueued&&(this._microTaskQueued=!0,queueMicrotask(()=>{this._microTaskQueued&&(this._microTaskQueued=!1,this._budget.remaining>0&&this._schedule()&&this._runFrame())}))}registerTask(n,o){const a=new r(this,n,o);return this._tasks.push(a),this._updatingChanged(),this.performanceInfo.tasks.has(n)||this.performanceInfo.tasks.set(n,new Ku(n)),a}registerIdleStateCallbacks(n,o){const a={idleBegin:n,idleEnd:o};this._idleStateCallbacks.push(a),this.state===dt.IDLE&&this._idleUpdatesStartFired&&a.idleBegin();const l=this;return{remove:()=>this._removeIdleStateCallbacks(a),set idleBegin(h){l._idleUpdatesStartFired&&(a.idleEnd(),l._state===dt.IDLE&&h()),a.idleBegin=h},set idleEnd(h){a.idleEnd=h}}}get load(){return this._load}set state(n){this._state!==n&&(this._state=n,this.state!==dt.IDLE&&this._idleUpdatesStartFired&&(this._idleUpdatesStartFired=!1,this._idleStateCallbacks.forAll(o=>o.idleEnd())))}get state(){return this._state}frame(n){this._startFrameTaskTimes();const o=this._updateBudget(n);if(o){const a=this._budget.now();this._runFrame(),this._recordFrameTaskTimes(this._budget.now()-a)}else this._recordFrameTaskTimes(0);return o}_updateBudget(n){this._test&&(this._test.usedBudget=0),++this._frameNumber;let o=MB,a=n.frameDuration,l=xS;switch(this.state){case dt.IDLE:o=0,a=Math.max(PB,n.frameDuration),l=xB;break;case dt.INTERACTING:a=Math.max(AB,n.frameDuration);case dt.ANIMATING:}return a=a-n.elapsedFrameTime-o,this.state!==dt.IDLE&&a<xS&&!this._forceTask?(this._forceTask=!0,!1):(a=Math.max(a,l),this._budget.reset(a,this.state),this._updateLoad(),this._schedule())}_runFrame(){switch(this._forceTask=!1,this._microTaskQueued=!1,this.state){case dt.IDLE:this._idleUpdatesStartFired||(this._idleUpdatesStartFired=!0,this._idleStateCallbacks.forAll(n=>n.idleBegin())),this._runIdle();break;case dt.INTERACTING:this._runInteracting();break;default:this._runAnimating()}this._test&&(this._test.usedBudget=this._budget.elapsed)}stopFrame(){this._budget.reset(0,this._state),this._budget.madeProgress()}_removeIdleStateCallbacks(n){this._idleUpdatesStartFired&&n.idleEnd(),this._idleStateCallbacks.removeUnordered(n)}removeTask(n){this._tasks.removeUnordered(n),this._runQueue.removeUnordered(n),this._updatingChanged()}_updateTask(n){this._tasks.forAll(o=>{o.name===n&&o.setPriority(n)})}_getState(n){if(this._runQueue.some(a=>a.name===n))return Rn.SCHEDULED;let o=Rn.IDLE;return this._tasks.forAll(a=>{a.name===n&&a.needsUpdate&&(a.schedulePriority<=1?o=Rn.READY:o!==Rn.READY&&(o=Rn.WAITING))}),o}_getRuntime(n){let o=0;return this._tasks.forAll(a=>{a.name===n&&(o+=a.runtime)}),o}_resetRuntimes(){this._tasks.forAll(n=>n.runtime=0)}_getRunning(){const n=new Map;if(this._tasks.forAll(a=>{a.needsUpdate&&n.set(a.name,(n.get(a.name)||0)+1)}),n.size===0)return null;let o="";return n.forEach((a,l)=>{o+=a>1?` ${a}x ${l}`:` ${l}`}),o}_runIdle(){this._run()}_runInteracting(){this._run()}_runAnimating(){this._run()}_updateLoad(){const n=this._tasks.reduce((o,a)=>a.needsUpdate?++o:o,0);this._load=this._load*AS+n*(1-AS)}_schedule(){for(this._runQueue.filterInPlace(n=>!!n.needsUpdate||(n.schedulePriority=n.basePriority,!1)),this._tasks.forAll(n=>{n.basePriority===br&&n.needsUpdate&&!this._runQueue.includes(n)&&n.blockFrame!==this._frameNumber&&this._runQueue.unshift(n)});this._runQueue.length===0;){let n=!1,o=0;if(this._tasks.forAll(a=>{a.needsUpdate&&a.schedulePriority!==0&&a.basePriority!==br&&a.blockFrame!==this._frameNumber&&(n=!0,o=Math.max(o,a.basePriority),a.schedulePriority===1?(a.schedulePriority=0,this._runQueue.push(a)):--a.schedulePriority)}),!n)return this._updatingChanged(),!1}return this._updatingChanged(),!0}_run(){do for(;this._runQueue.length>0;){const n=this._budget.now(),o=this._runQueue.pop();this._budget.resetProgress();try{o.task.runTask(this._budget)===xO&&(o.blockFrame=this._frameNumber)}catch(l){U.getLogger("esri.views.support.Scheduler").error(`Exception in task "${o.name}"`,l),o.blockFrame=this._frameNumber}!this._budget.hasProgressed&&o.blockFrame!==this._frameNumber&&o.needsUpdate&&(o.name,se.I3S_CONTROLLER,o.blockFrame=this._frameNumber),o.schedulePriority=o.basePriority;const a=this._budget.now()-n;if(o.runtime+=a,this._frameTaskTimes.set(o.priority,this._frameTaskTimes.get(o.priority)+a),this._budget.remaining<=0)return void this._updatingChanged()}while(this._schedule());this._updatingChanged()}_startFrameTaskTimes(){for(const n of Object.keys(se))this._frameTaskTimes.set(se[n],0)}_recordFrameTaskTimes(n){this._frameTaskTimes.forEach((o,a)=>this.performanceInfo.tasks.get(a).push(o)),this.performanceInfo.total.push(n)}get test(){return this._test}}e.Scheduler=t;class r{get task(){return this._task.value}get updating(){return this._queue.running}constructor(n,o,a){this._scheduler=n,this.name=o,this.blockFrame=0,this.runtime=0,this._queue=new TB,this._handles=new bl,this._basePriority=MS(o),this.schedulePriority=this._basePriority,this._task=gl(a??this._queue),this._handles.add(Cr(()=>this.task.running,l=>n.taskRunningChanged(l)))}remove(){this.processQueue(AO),this._scheduler.removeTask(this),this.schedule=PS.schedule,this.reschedule=PS.reschedule,this._handles.destroy()}get basePriority(){return this._basePriority}setPriority(n){if(this.name===n)return;this.name=n;const o=MS(n);this._basePriority!==br&&this.schedulePriority===0||(this.schedulePriority=o),this._basePriority=o}get priority(){return this.name}set priority(n){this.setPriority(n)}get needsUpdate(){return this.updating||this.task.running}schedule(n,o,a){return this._queue.push(n,o,a)}reschedule(n,o,a){return this._queue.unshift(n,o,a)}processQueue(n){return this._queue.runTask(n)}}class i{constructor(){this._begin=typeof performance<"u"?performance.now():0,this._budget=0,this._state=dt.IDLE,this._done=!1,this._progressed=!1,this._enabled=!0}run(n){return!this.done&&(n()===!0&&this.madeProgress(),!0)}get done(){return this._done}get budget(){return this._budget}madeProgress(){return this._progressed=!0,this._done=this.elapsed>=this._budget&&this._enabled,this._done}get state(){return this._state}get enabled(){return this._enabled}set enabled(n){this._enabled=n}reset(n,o){this._begin=this.now(),this._budget=n,this._state=o,this.resetProgress()}get remaining(){return Math.max(this._budget-this.elapsed,0)}now(){return performance.now()}get elapsed(){return this.now()-this._begin}resetProgress(){this._progressed=!1,this._done=!1}get hasProgressed(){return this._progressed}}e.Budget=i})(sf||(sf={})),function(e){e.SCHEDULED="s",e.READY="r",e.WAITING="w",e.IDLE="i"}(Rn||(Rn={}));const AO=(()=>{const e=new sf.Budget;return e.enabled=!1,e})();let OB=class{remove(){}processQueue(){}schedule(t,r,i){try{if(ur(r)){const s=Ee();return i?Promise.resolve(i(s)):Promise.reject(s)}return qy(t(AO))}catch(s){return Promise.reject(s)}}reschedule(t,r,i){return this.schedule(t,r,i)}};const PS=new OB;let CB=class{constructor(t){this.view=t,this._stationaryHandle=null,this._frameTaskHandle=null,this._updateParameters=null,this._updateRequested=!1,this._scheduler=EB(),this._schedulerHandle=Cr(()=>this._scheduler.updating,()=>this.requestFrame()),this.stationary=!0,this.prepare=()=>{var r;this._updateParameters&&(this._updateParameters.state=this.view.state,this._updateParameters.stationary=this.view.stationary,this._updateParameters.pixelRatio=window.devicePixelRatio,this._updateParameters.renderingOptions=this.view.renderingOptions,this._updateParameters.targetState.copy(this.view.state),((r=this.view.animation)==null?void 0:r.target)==null||ki(this.view.animation.target)||(this._updateParameters.targetState.viewpoint=this.view.animation.target))},this.update=r=>{var a,l,h;if(this._updateRequested=!1,(a=this.view)==null?void 0:a.destroyed)return;const{allLayerViews:i,graphicsView:s,labelManager:n,state:{id:o}}=this.view;i==null||i.forEach(this._updateLayerView,this),n!=null&&(n.lastUpdateId!==o&&(n.viewChange(),n.lastUpdateId=o),n.updateRequested&&n.processUpdate(this._updateParameters)),s!=null&&(s.lastUpdateId!==o&&(s.viewChange(),s.lastUpdateId=o),s.updateRequested&&s.processUpdate(this._updateParameters)),(l=this.view.graphicsTileStore)==null||l.setViewState(this._updateParameters.state),this.view.animation?this._scheduler.state=dt.ANIMATING:this.view.interacting?this._scheduler.state=dt.INTERACTING:this._scheduler.state=dt.IDLE,this._scheduler.frame(r)||this._updateRequested||this._scheduler.state!==dt.IDLE||((h=this._frameTaskHandle)==null||h.pause())}}destroy(){this.stop(),this._schedulerHandle.remove(),this._scheduler.destroy()}get scheduler(){return this._scheduler}start(){if(this._frameTaskHandle)return;const t=this.view;this.stationary=t.stationary,this._updateParameters={state:t.state,targetState:new Yv,pixelRatio:window.devicePixelRatio,stationary:this.stationary,renderingOptions:t.renderingOptions},this._stationaryHandle=Q(()=>t.stationary,r=>{this.stationary=r,this.requestFrame()}),this._frameTaskHandle=il(this),this.requestUpdate()}stop(){var t;this._frameTaskHandle&&(this._updateRequested=!1,(t=this._stationaryHandle)==null||t.remove(),this._frameTaskHandle.remove(),this._updateParameters=this._stationaryHandle=this._frameTaskHandle=null,this.stationary=!0)}requestUpdate(){this._updateRequested||(this._updateRequested=!0,this.requestFrame())}requestFrame(){this._frameTaskHandle&&this._frameTaskHandle.resume()}_updateLayerView(t){var s;if(!t.attached)return void this.requestUpdate();const r=this.view.state,i=t.lastUpdateId;i!=null&&(this.stationary||t.moving)||(t.moving=!0),i!==r.id&&t.viewChange(),this.stationary&&t.moving&&(t.moving=!1,t.moveEnd()),t.lastUpdateId=r.id,t.updateRequested&&t.processUpdate(this._updateParameters),"layerViews"in t&&((s=t.layerViews)==null||s.forEach(this._updateLayerView,this))}},Ws=class extends If{constructor(t){super(t),this.state="running",this.target=null,this._resolver=null}initialize(){this._resolver=Or(),this.addResolvingPromise(this._resolver.promise)}get done(){return this.state==="finished"||this.state==="stopped"}stop(){var t;this.state!=="stopped"&&this.state!=="finished"&&(this._set("state","stopped"),(t=this._resolver)==null||t.reject(new I("ViewAnimation stopped")))}finish(){var t;this.state!=="stopped"&&this.state!=="finished"&&(this._set("state","finished"),(t=this._resolver)==null||t.resolve())}update(t,r){r||(r=ki(t)?"waiting-for-target":"running"),this._set("target",t),this._set("state",r)}};c([d({readOnly:!0})],Ws.prototype,"done",null),c([d({readOnly:!0,type:String})],Ws.prototype,"state",void 0),c([d()],Ws.prototype,"target",void 0),Ws=c([S("esri.views.ViewAnimation")],Ws),function(e){e.State={RUNNING:"running",STOPPED:"stopped",FINISHED:"finished",WAITING_FOR_TARGET:"waiting-for-target"}}(Ws||(Ws={}));const N1=Ws;let tp=class extends W{constructor(t){super(t),this._gotoTask=null}destroy(){this._gotoTask=null}async goTo(t,r){if(!t)return void U.getLogger(this).error("#goTo()","target cannot be null or undefined");const i=new N1;this.view.animation=i,await Y_(()=>this.view.ready,r);const s={...r,animate:(r==null?void 0:r.animate)??!NP(),animationMode:(r==null?void 0:r.animationMode)??"auto"},{extent:n,spatialReference:o,size:a,viewpoint:l,constraints:h,padding:p,allLayerViews:f}=this.view,m=bV(t,{extent:n,spatialReference:o,size:a,viewpoint:l,constraints:h,padding:p,allLayerViews:f,pickClosestTarget:(r==null?void 0:r.pickClosestTarget)??!0});return i==null||i.update(m),this._gotoTask={},s.animate?this._gotoAnimated(m,s):this._gotoImmediate(m,s)}_gotoImmediate(t,r){const i=this._gotoTask,s=this.view.animation,n=t.then(o=>{if(Be(r),i!==this._gotoTask)throw new I("view:goto-interrupted","Goto was interrupted");this.view.viewpoint=s.target=o,s.finish()});return this._cancellableGoTo(i,s,n,r)}_gotoAnimated(t,r){const i=this._gotoTask,s=this.view.animation;if(!s)return Promise.resolve();const n=t.then(o=>{if(Be(r),i!==this._gotoTask)throw new I("view:goto-interrupted","Goto was interrupted");return s.update(o),this.view.animationManager.animate(s,this.view.viewpoint,r),s.when().then(()=>{},()=>{})});return this._cancellableGoTo(i,s,n,r)}_cancellableGoTo(t,r,i,s){const n=()=>t===this._gotoTask;return mR(i,s).finally(()=>{n()&&(r.done||r.stop())})}};c([d({constructOnly:!0})],tp.prototype,"view",void 0),tp=c([S("esri.views.2d.GoToManager")],tp);function IB(e,t){const{spatialReference:r}=t,i=[t.x,t.y];let s,n,o,a;const l=[0,0],h=RB(e);for(let m=0;m<h.length;m++){const y=h[m];for(let _=0;_<y.length-1;_++){O8(l,i,y,_);const v=fm(i,l);(s==null||v<s)&&(s=v,n=[...l],o=m,a=_)}}if(s==null||!n||o==null||a==null)throw new I("nearest-coordinate:failed","Failed to find the nearest coordinate");const[p,f]=n;return{coordinate:new re({x:p,y:f,spatialReference:r}),distance:s}}function RB(e){switch(e.type){case"extent":return[[[e.xmin,e.ymin],[e.xmin,e.ymax],[e.xmax,e.ymax],[e.xmax,e.ymin],[e.xmin,e.ymin]]];case"polygon":return e.rings;case"polyline":return e.paths}}var L1;let yo=L1=class extends nh.NumericIdentifiableMixin(W){constructor(e){super(e),this.geometry=null,this.spatialReference=null}get normalizedGeometry(){if(this.geometry==null||!this.spatialReference)return null;if(!this.spatialReference.equals(this.geometry.spatialReference))try{return Bo(this.geometry,this.spatialReference)}catch(e){return U.getLogger(this).error("#constraints.geometry","could not project the geometry to the view's spatial reference",{geometry:this.geometry,spatialReference:this.spatialReference,error:e}),null}return this.geometry}constrain(e,t){if(this.normalizedGeometry==null)return e;const r=e.targetGeometry;if(this.normalizedGeometry.type==="extent"?th(this.normalizedGeometry,r):N_(this.normalizedGeometry,r))return e;const{coordinate:i}=IB(this.normalizedGeometry,r);return i&&(e.targetGeometry=i),e}clone(){var e,t;return new L1({geometry:(e=this.geometry)==null?void 0:e.clone(),spatialReference:(t=this.spatialReference)==null?void 0:t.clone()})}};c([d({constructOnly:!0})],yo.prototype,"geometry",void 0),c([d({readOnly:!0})],yo.prototype,"normalizedGeometry",null),c([d({constructOnly:!0})],yo.prototype,"spatialReference",void 0),yo=L1=c([S("esri.views.2d.constraints.GeometryConstraint")],yo);var D1;let Hu=D1=class extends nh.NumericIdentifiableMixin(W){constructor(){super(...arguments),this.enabled=!0,this.rotationEnabled=!0}constrain(e,t){return this.enabled&&t&&(this.rotationEnabled||(e.rotation=t.rotation)),e}clone(){return new D1({enabled:this.enabled,rotationEnabled:this.rotationEnabled})}};c([d()],Hu.prototype,"enabled",void 0),c([d()],Hu.prototype,"rotationEnabled",void 0),Hu=D1=c([S("esri.views.2d.constraints.RotationConstraint")],Hu);const PO=Hu;var F1;let Ut=F1=class extends nh.NumericIdentifiableMixin(W){constructor(e){super(e),this._lodByScale={},this._scales=[],this.effectiveLODs=null,this.effectiveMinZoom=-1,this.effectiveMaxZoom=-1,this.effectiveMinScale=0,this.effectiveMaxScale=0,this.lods=null,this.minZoom=-1,this.maxZoom=-1,this.minScale=0,this.maxScale=0,this.snapToZoom=!0}initialize(){let e,{lods:t,minScale:r,maxScale:i,minZoom:s,maxZoom:n}=this,o=-1,a=-1,l=!1,h=!1;if(r!==0&&i!==0&&r<i&&([r,i]=[i,r]),!(t!=null&&t.length))return this._set("effectiveMinScale",r),void this._set("effectiveMaxScale",i);t=t.map(p=>p.clone()),t.sort((p,f)=>f.scale-p.scale),t.forEach((p,f)=>p.level=f);for(const p of t)!l&&r>0&&r>=p.scale&&(o=p.level,l=!0),!h&&i>0&&i>=p.scale&&(a=e?e.level:-1,h=!0),e=p;s===-1&&(s=r===0?0:o),n===-1&&(n=i===0?t.length-1:a),s=Math.max(s,0),s=Math.min(s,t.length-1),n=Math.max(n,0),n=Math.min(n,t.length-1),s>n&&([s,n]=[n,s]),r=t[s].scale,i=t[n].scale,t.splice(0,s),t.splice(n-s+1,t.length),t.forEach((p,f)=>{this._lodByScale[p.scale]=p,this._scales[f]=p.scale}),this._set("effectiveLODs",t),this._set("effectiveMinZoom",s),this._set("effectiveMaxZoom",n),this._set("effectiveMinScale",r),this._set("effectiveMaxScale",i)}constrain(e,t){if(t&&e.scale===t.scale)return e;const r=this.effectiveMinScale,i=this.effectiveMaxScale,s=e.targetGeometry,n=t&&t.targetGeometry,o=i!==0&&e.scale<i,a=r!==0&&e.scale>r;if(o||a){const l=a?r:i;if(t&&n){const h=(l-t.scale)/(e.scale-t.scale);s.x=n.x+(s.x-n.x)*h,s.y=n.y+(s.y-n.y)*h}e.scale=l}return this.snapToZoom&&this.effectiveLODs&&(e.scale=this._getClosestScale(e.scale)),e}fit(e){if(!this.effectiveLODs||!this.snapToZoom)return this.constrain(e,null);const t=this.scaleToZoom(e.scale),r=Math.abs(t-Math.floor(t));return e.scale=this.zoomToScale(r>.99?Math.round(t):Math.floor(t)),e}zoomToScale(e){if(!this.effectiveLODs)return 0;e-=this.effectiveMinZoom,e=Math.max(0,e);const t=this._scales;if(e<=0)return t[0];if(e>=t.length)return t[t.length-1];const r=Math.floor(e),i=Math.ceil(e);return t[r]+(e-r)*(t[i]-t[r])}scaleToZoom(e){if(!this.effectiveLODs)return-1;const t=this._scales;let r,i;if(e>=t[0])return this.effectiveMinZoom;if(e<=t[t.length-1])return this.effectiveMaxZoom;for(let s=0;s<t.length-1;s++){if(r=t[s],i=t[s+1],i===e)return s+this.effectiveMinZoom+1;if(r>e&&i<e)return s+this.effectiveMinZoom+1-(e-i)/(r-i)}return-1}snapToClosestScale(e){if(!this.effectiveLODs)return e;const t=this.scaleToZoom(e);return this.zoomToScale(Math.round(t))}snapToNextScale(e,t=.5){if(!this.effectiveLODs)return e*t;const r=Math.round(this.scaleToZoom(e));return this.zoomToScale(r+1)}snapToPreviousScale(e,t=2){if(!this.effectiveLODs)return e*t;const r=Math.round(this.scaleToZoom(e));return this.zoomToScale(r-1)}clone(){return new F1({lods:this.lods,minZoom:this.minZoom,maxZoom:this.maxZoom,minScale:this.minScale,maxScale:this.maxScale})}_getClosestScale(e){return this._lodByScale[e]||(e=this._scales.reduce((t,r)=>Math.abs(r-e)<=Math.abs(t-e)?r:t,this._scales[0])),this._lodByScale[e].scale}};c([d({readOnly:!0})],Ut.prototype,"effectiveLODs",void 0),c([d({readOnly:!0})],Ut.prototype,"effectiveMinZoom",void 0),c([d({readOnly:!0})],Ut.prototype,"effectiveMaxZoom",void 0),c([d({readOnly:!0})],Ut.prototype,"effectiveMinScale",void 0),c([d({readOnly:!0})],Ut.prototype,"effectiveMaxScale",void 0),c([d()],Ut.prototype,"lods",void 0),c([d()],Ut.prototype,"minZoom",void 0),c([d()],Ut.prototype,"maxZoom",void 0),c([d()],Ut.prototype,"minScale",void 0),c([d()],Ut.prototype,"maxScale",void 0),c([d()],Ut.prototype,"snapToZoom",void 0),Ut=F1=c([S("esri.views.2d.constraints.ZoomConstraint")],Ut);const OO=Ut,kB={base:null,key:"type",typeMap:{extent:De,polygon:Ci}};let je=class extends W{constructor(t){super(t),this.lods=null,this.minScale=0,this.maxScale=0,this.minZoom=-1,this.maxZoom=-1,this.rotationEnabled=!0,this.snapToZoom=!0,this.customConstraints=new H}destroy(){this.view=null}get effectiveLODs(){return this._zoom.effectiveLODs}get effectiveMinScale(){return this._zoom.effectiveMinScale}get effectiveMaxScale(){return this._zoom.effectiveMaxScale}get effectiveMinZoom(){return this._zoom.effectiveMinZoom}get effectiveMaxZoom(){return this._zoom.effectiveMaxZoom}set geometry(t){t?this._set("geometry",t):this._set("geometry",null)}get version(){var t,r,i;return`${(t=this._zoom)==null?void 0:t.uid}/${(r=this._rotation)==null?void 0:r.uid}/${(i=this._geometry)==null?void 0:i.uid}`}get _geometry(){var r,i;const t=this._get("_geometry");return t&&this.geometry===t.geometry&&((r=this.view)==null?void 0:r.constraintsInfo.spatialReference)===t.spatialReference?t:new yo({geometry:this.geometry,spatialReference:(i=this.view)==null?void 0:i.constraintsInfo.spatialReference})}get _rotation(){return new PO({rotationEnabled:this.rotationEnabled})}get _zoom(){var l;const t=this._get("_zoom"),r=this.lods||((l=this.view)==null?void 0:l.constraintsInfo.lods),i=this.minZoom,s=this.maxZoom,n=this.minScale,o=this.maxScale,a=this.snapToZoom;return t&&t.lods===r&&t.minZoom===i&&t.maxZoom===s&&t.minScale===n&&t.maxScale===o&&t.snapToZoom===a?t:new OO({lods:r,minZoom:i,maxZoom:s,minScale:n,maxScale:o,snapToZoom:a})}canZoomInTo(t){const r=this.effectiveMaxScale;return r===0||t>=r}canZoomOutTo(t){const r=this.effectiveMinScale;return r===0||t<=r}constrain(t,r){return this._zoom.constrain(t,r),this._rotation.constrain(t,r),this._geometry.constrain(t,r),this.customConstraints.forEach(i=>i.constrain(t,r)),t}constrainByGeometry(t){return this._geometry.constrain(t),this.customConstraints.forEach(r=>{var i;return(i=r.applyPanConstraint)==null?void 0:i.call(r,t)}),t}fit(t){return this._zoom.fit(t)}zoomToScale(t){return this._zoom.zoomToScale(t)}scaleToZoom(t){return this._zoom.scaleToZoom(t)}snapScale(t){return this._zoom.snapToClosestScale(t)}snapToNextScale(t){return this._zoom.snapToNextScale(t)}snapToPreviousScale(t){return this._zoom.snapToPreviousScale(t)}};c([d({readOnly:!0})],je.prototype,"effectiveLODs",null),c([d({readOnly:!0})],je.prototype,"effectiveMinScale",null),c([d({readOnly:!0})],je.prototype,"effectiveMaxScale",null),c([d({readOnly:!0})],je.prototype,"effectiveMinZoom",null),c([d({readOnly:!0})],je.prototype,"effectiveMaxZoom",null),c([d({types:kB,value:null})],je.prototype,"geometry",null),c([d({type:[Xs]})],je.prototype,"lods",void 0),c([d()],je.prototype,"minScale",void 0),c([d()],je.prototype,"maxScale",void 0),c([d()],je.prototype,"minZoom",void 0),c([d()],je.prototype,"maxZoom",void 0),c([d()],je.prototype,"rotationEnabled",void 0),c([d()],je.prototype,"snapToZoom",void 0),c([d({type:H})],je.prototype,"customConstraints",void 0),c([d()],je.prototype,"view",void 0),c([d({readOnly:!0})],je.prototype,"version",null),c([d({type:yo,readOnly:!0})],je.prototype,"_geometry",null),c([d({type:PO})],je.prototype,"_rotation",null),c([d({readOnly:!0,type:OO})],je.prototype,"_zoom",null),je=c([S("esri.views.2d.MapViewConstraints")],je);const OS=je;let gt=class extends W{constructor(t){super(t),this.constraints=null,this.ready=!1,this.resizeAlign="center",this.addHandles([Q(()=>{var r;return(r=this.constraints)==null?void 0:r.version},r=>{this.constraints&&r&&this.ready&&(this.state.viewpoint=this.constraints.fit(this.state.paddedViewState.viewpoint))},bn)])}get center(){if(!this.ready)return this._get("center");const{center:t,spatialReference:r}=this.state.paddedViewState;return this.state.commitProperty("id"),new re({x:t[0],y:t[1],spatialReference:r})}set center(t){if(t==null)return;if(!this.ready)return void this._set("center",t);let r;try{r=this._project(t,this.state.spatialReference)}catch(s){return void U.getLogger(this).error(new I("mapview:invalid-center","could not project the value in the view's spatial reference",{input:t,error:s}))}const i=this.viewpoint;O1(i,i,r),this.viewpoint=i}get extent(){return this.ready?(this.state.commitProperty("id"),this.state.paddedViewState.extent.clone()):this._get("extent")}set extent(t){if(t==null)return;if(!t.width||!t.height)return void U.getLogger(this).error(new I("mapview:invalid-extent","invalid extent size"));if(!this.ready)return this._set("extent",t),this._set("center",void 0),this._set("viewpoint",void 0),this._set("scale",void 0),void this._set("zoom",void 0);let r;try{r=this._project(t,this.state.spatialReference)}catch(s){return void U.getLogger(this).error(new I("mapview:invalid-extent","could not project the value in the view's spatial reference",{error:s}))}const i=this.viewpoint;$V(i,i,r,this.state.size,{constraints:this.constraints}),this.viewpoint=i}get padding(){return this.ready?this.state.padding:this._get("padding")}set padding(t){this.ready?(this.state.padding=t,this._set("padding",this.state.padding)):this._set("padding",t)}get resolution(){return this.ready?(this.state.commitProperty("id"),this.state.resolution):0}get rotation(){return this.ready?(this.state.commitProperty("id"),this.state.rotation):this._get("rotation")}set rotation(t){if(isNaN(t))return;if(!this.ready)return void this._set("rotation",t);const r=this.viewpoint;kV(r,r,t),this.viewpoint=r}get scale(){return this.ready?(this.state.commitProperty("id"),this.state.scale):this._get("scale")}set scale(t){if(!t||isNaN(t))return;if(!this.ready){this._set("scale",t),this._set("zoom",void 0);const i=this._get("extent");return void(i&&(this._set("extent",void 0),this._set("center",i.center)))}const r=this.viewpoint;SS(r,r,t),this.viewpoint=r}get viewpoint(){return this.ready?this.state.paddedViewState.viewpoint.clone():this._get("viewpoint")}set viewpoint(t){var n;if(t==null)return;if(!this.ready)return this._set("viewpoint",t),this._set("extent",void 0),this._set("center",void 0),this._set("zoom",void 0),void this._set("scale",void 0);let r,i;try{r=this._project(t,this.state.spatialReference),!t.scale||isNaN(t.scale)?i=new I("mapview:invalid-viewpoint",`invalid scale value of ${t.scale}`):t.targetGeometry==null&&(i=new I("mapview:invalid-viewpoint","geometry not defined"))}catch(o){i=new I("mapview:invalid-viewpoint","could not project the value in the view's spatial reference",{error:o})}if(i)return void U.getLogger(this).error(i);this._scaleBeforeChangingSpatialReference=null;const s=new Pr({targetGeometry:new re,scale:0,rotation:0});St(s,r),(n=this.constraints)==null||n.constrain(s,this.state.paddedViewState.viewpoint),this.state.viewpoint=s,this._set("viewpoint",s)}get visibleArea(){return this.ready?this.state.visibleArea:null}get zoom(){var t;return this.ready?((t=this.constraints)==null?void 0:t.scaleToZoom(this.scale))??-1:this._get("zoom")}set zoom(t){var s,n;if(!(t>=0))return;if(!this.ready){this._set("zoom",t),this._set("scale",void 0);const o=this._get("extent");return void(o&&(this._set("extent",void 0),this._set("center",o.center)))}const r=((s=this.constraints)==null?void 0:s.zoomToScale(t))??0;if(!r)return void this._set("zoom",-1);const i=this.viewpoint;SS(i,i,r),this.viewpoint=i,this._set("zoom",((n=this.constraints)==null?void 0:n.scaleToZoom(this.scale))??-1)}getUserStartupOptions(t){if(!t[0]&&!t[1])return{center:void 0,rotation:void 0,scale:void 0};const{padding:r,constraints:i}=this,s=this._get("center"),n=this._get("extent"),o=this._get("scale"),a=this._get("rotation"),l=this._get("viewpoint"),h=this._get("zoom"),p=h!=null&&i!=null&&i.zoomToScale(h)||void 0;let f,m,y;const _=l==null?void 0:l.rotation,v=l==null?void 0:l.targetGeometry;(v==null?void 0:v.type)==="extent"?f=v:(v==null?void 0:v.type)==="point"&&(m=v,y=l==null?void 0:l.scale);const w=n??f;return{center:s??m??(w==null?void 0:w.center),rotation:a??_,scale:(o??p??y??(w&&ym(w,[t[0]-r.left-r.right,t[1]-r.top-r.bottom])))||void 0}}startup(t,r,i,s){var o;const n=t.targetGeometry;try{this._project(t,i)}catch(a){U.getLogger(this).warn(new ms("mapview:startup-projection-error","projection of initial viewpoint to the view's spatial reference, defaulting to the initial viewpoint.",{center:n.toJSON(),spatialReference:i,error:a})),t.targetGeometry=s||new re({x:0,y:0,spatialReference:i})}(o=this.constraints)==null||o.fit(t),this._set("state",new Yv({padding:this.padding,size:r,viewpoint:t})),this._set("ready",!0)}teardown(){this._set("ready",!1);const{center:[t,r],spatialReference:i,rotation:s,scale:n}=this.state.paddedViewState,o=new re({x:t,y:r,spatialReference:i});this._set("viewpoint",null),this._set("extent",null),this._set("center",o),this._set("zoom",-1),this._set("rotation",s),this._set("scale",n),this._set("state",null)}changeSpatialReference(t){var l;const r=this.state.paddedViewState.clone();if(this._scaleBeforeChangingSpatialReference==null)this._scaleBeforeChangingSpatialReference=r.scale;else{const h=r.viewpoint.clone();h.scale=this._scaleBeforeChangingSpatialReference,r.viewpoint=h}const i=r.clone(),[s,n]=r.center;let o=null;try{o=this._project(new re({x:s,y:n,spatialReference:r.spatialReference}),t)}catch(h){O_()||U.getLogger(this).warn(new ms("mapview:spatial-reference-change","could not project the view's center to the new spatial reference",{center:o==null?void 0:o.toJSON(),spatialReference:t,error:h}))}o||(o=new re({x:0,y:0,spatialReference:t}));const a=O1(new Pr({targetGeometry:new re,scale:0,rotation:0}),r.viewpoint,o);i.viewpoint=a;try{const p=[r.size[0]/2,r.size[1]/2],f=[p[0]+20,p[1]],m=r.toMap([0,0],f),{x:y,y:_}=this._project(new re({x:m[0],y:m[1],spatialReference:r.spatialReference}),t);m[0]=y,m[1]=_,i.toScreen(m,m);const v=CV(p,m,f),w=Math.hypot(m[0]-p[0],m[1]-p[1])/20;!Number.isFinite(w)||Math.abs(w)>4?(a.rotation=0,a.targetGeometry=new re({x:0,y:0,spatialReference:t})):(a.scale*=w,a.scale>A("mapview-srswitch-adjust-rotation-scale-threshold")?a.rotation=0:a.rotation+=Number.isFinite(v)?v:0)}catch{}(l=this._get("constraints"))==null||l.constrain(a,void 0),this._get("state").viewpoint=a}resize(t,r){var o;if(!this.ready)return;const i=this.state;let s=this.state.paddedViewState.viewpoint;const n=this.state.paddedViewState.size.slice();i.size=[t,r],RV(s,s,n,this.state.paddedViewState.size,this.resizeAlign),s=((o=this.constraints)==null?void 0:o.constrain(s,void 0))??s,this.state.viewpoint=s}toMap(t){if(!this.ready)return null;const r=[0,0],[i,s]=this.state.toMap(r,[t.x,t.y]),n=this.state.spatialReference;return new re({x:i,y:s,spatialReference:n})}toScreen(t,r){if(!this.ready)return null;const i=this._project(t,this.state.spatialReference),s=[i.x,i.y];return(r==null?void 0:r.pickClosestTarget)===!1||this.state.paddedViewState.wrapMapCoordinate(s,s),this.state.toScreen(s,s),ut(s[0],s[1])}_project(t,r){var n;const i=(t==null?void 0:t.targetGeometry)||t;if(!r)return t;if(!i)return null;if(r.imageCoordinateSystem||(n=i.spatialReference)!=null&&n.imageCoordinateSystem||ct(r,i.spatialReference))return t;const s=Bo(i,r);if(!s)throw new I("mapview:projection-not-possible","projecting input geometry to target spatial reference returned a null value",{geometry:i,spatialReference:r});return NB(t)?(t.targetGeometry=s,t):s}};function NB(e){return(e==null?void 0:e.declaredClass)==="esri.Viewpoint"}c([d({type:re})],gt.prototype,"center",null),c([d()],gt.prototype,"constraints",void 0),c([d({type:De})],gt.prototype,"extent",null),c([d({value:{top:0,right:0,bottom:0,left:0},cast:e=>({top:0,right:0,bottom:0,left:0,...e})})],gt.prototype,"padding",null),c([d()],gt.prototype,"ready",void 0),c([d()],gt.prototype,"resizeAlign",void 0),c([d({readOnly:!0})],gt.prototype,"resolution",null),c([d({type:Number})],gt.prototype,"rotation",null),c([d({type:Number})],gt.prototype,"scale",null),c([d({readOnly:!0})],gt.prototype,"state",void 0),c([d({type:Pr})],gt.prototype,"viewpoint",null),c([d({readOnly:!0})],gt.prototype,"visibleArea",null),c([d()],gt.prototype,"zoom",null),gt=c([S("esri.views.2d.ViewStateManager")],gt);function CO(e,t){switch(t){case"primary":return e.pointerType==="touch"||e.button===0;case"secondary":return e.pointerType!=="touch"&&e.button===2;case"tertiary":return e.pointerType!=="touch"&&e.button===1}}function IO(e,t){return t.some(r=>CO(e,r))}function CS(e,{dragPrimary:t,dragSecondary:r,dragTertiary:i}){return[{key:"primary",value:t},{key:"secondary",value:r},{key:"tertiary",value:i}].filter(s=>s.value===e).map(s=>s.key)}let IS=class extends st{constructor(t,r){super(!0),this._view=t,this.registerIncoming("double-click",r,i=>this._handleDoubleClick(i,r))}_handleDoubleClick(t,r){CO(t.data,"primary")&&(t.stopPropagation(),r?this._view.mapViewNavigation.zoomOut([t.data.x,t.data.y]):this._view.mapViewNavigation.zoomIn([t.data.x,t.data.y]))}},LB=class extends st{constructor(t,r,i){super(!0),this.view=t,this.pointerType=r,this.registerIncoming("double-tap-drag",i,s=>this._handleDoubleTapDrag(s))}_handleDoubleTapDrag(t){const{data:r}=t,{pointerType:i}=r;if(i!==this.pointerType)return;t.stopPropagation();const{action:s,delta:n}=r,{view:o}=this,{mapViewNavigation:a}=o;switch(s){case"begin":{const{scale:l}=o;this._startScale=l,this._currentScale=l,this._previousDelta=n,a.begin();break}case"update":{if(this._previousDelta.y===n.y)return;this._previousDelta=n;const l=1.015**n.y,h=this._startScale*l,p=h/this._currentScale;a.setViewpointImmediate(p),this._currentScale=h;break}case"end":{const{constraints:l}=o,{effectiveLODs:h,snapToZoom:p}=l;if(!p||!h)return void a.end();const f=l.snapScale(this._currentScale),m=(n.y>0?Math.max(f,l.snapToPreviousScale(this._startScale)):Math.min(f,l.snapToNextScale(this._startScale)))/this._currentScale;a.zoom(m).then(()=>{a.end()});break}}}},_m=class{constructor(t){this._callbacks=t,this._currentCount=0,this._callbacks.condition||(this._callbacks.condition=()=>!0)}handle(t){const r=t.data,i=r.pointers.size;switch(r.action){case"start":this._currentCount=i,this._emitStart(t);break;case"added":this._emitEnd(this._previousEvent),this._currentCount=i,this._emitStart(t);break;case"update":this._emitUpdate(t);break;case"removed":this._startEvent&&this._emitEnd(this._previousEvent),this._currentCount=i,this._emitStart(t);break;case"end":this._emitEnd(t),this._currentCount=0}this._previousEvent=t}_emitStart(t){var r,i;this._startEvent=t,(i=(r=this._callbacks).condition)!=null&&i.call(r,this._currentCount,t)&&this._callbacks.start(this._currentCount,t,this._startEvent)}_emitUpdate(t){var r,i;(i=(r=this._callbacks).condition)!=null&&i.call(r,this._currentCount,t)&&this._callbacks.update(this._currentCount,t,this._startEvent)}_emitEnd(t){var r,i;(i=(r=this._callbacks).condition)!=null&&i.call(r,this._currentCount,t)&&this._callbacks.end(this._currentCount,t,this._startEvent),this._startEvent=null}},DB=class extends st{constructor(t,r,i){super(!0),this.view=t,this.pointerActions=r,this.registerIncoming("drag",i,s=>this._handleDrag(s)),this.registerIncoming("pointer-down",()=>this.stopMomentumNavigation())}onInstall(t){super.onInstall(t),this._dragEventSeparator=new _m({start:(r,i)=>{this.view.mapViewNavigation.pan.begin(this.view,i.data),i.stopPropagation()},update:(r,i)=>{this.view.mapViewNavigation.pan.update(this.view,i.data),i.stopPropagation()},end:(r,i)=>{this.view.mapViewNavigation.pan.end(this.view,i.data),i.stopPropagation()},condition:(r,i)=>r===1&&IO(i.data,this.pointerActions)})}_handleDrag(t){const r=this.view.mapViewNavigation;r.pinch.zoomMomentum||r.pinch.rotateMomentum?this.stopMomentumNavigation():this._dragEventSeparator.handle(t)}stopMomentumNavigation(){this.view.mapViewNavigation.pan.stopMomentumNavigation()}},FB=class extends st{constructor(t,r,i){super(!0),this._view=t,this.pointerActions=r;const s=this._view.mapViewNavigation;this._dragEventSeparator=new _m({start:(n,o)=>{s.rotate.begin(this._view,o.data),o.stopPropagation()},update:(n,o)=>{s.rotate.update(this._view,o.data),o.stopPropagation()},end:(n,o)=>{s.rotate.end(),o.stopPropagation()},condition:(n,o)=>n===1&&IO(o.data,this.pointerActions)}),this.registerIncoming("drag",i,n=>this._dragEventSeparator.handle(n))}};function RO(e){const t=e[0],r=e[1],i=e[2];return Math.sqrt(t*t+r*r+i*i)}function UB(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}function jB(e,t,r,i){return e[0]=t,e[1]=r,e[2]=i,e}function GB(e,t,r){return e[0]=t[0]+r[0],e[1]=t[1]+r[1],e[2]=t[2]+r[2],e}function kO(e,t,r){return e[0]=t[0]-r[0],e[1]=t[1]-r[1],e[2]=t[2]-r[2],e}function NO(e,t,r){return e[0]=t[0]*r[0],e[1]=t[1]*r[1],e[2]=t[2]*r[2],e}function LO(e,t,r){return e[0]=t[0]/r[0],e[1]=t[1]/r[1],e[2]=t[2]/r[2],e}function zB(e,t){return e[0]=Math.ceil(t[0]),e[1]=Math.ceil(t[1]),e[2]=Math.ceil(t[2]),e}function VB(e,t){return e[0]=Math.floor(t[0]),e[1]=Math.floor(t[1]),e[2]=Math.floor(t[2]),e}function BB(e,t){return e[0]=Math.abs(t[0]),e[1]=Math.abs(t[1]),e[2]=Math.abs(t[2]),e}function HB(e,t){return e[0]=Math.sign(t[0]),e[1]=Math.sign(t[1]),e[2]=Math.sign(t[2]),e}function qB(e,t,r){return e[0]=Math.min(t[0],r[0]),e[1]=Math.min(t[1],r[1]),e[2]=Math.min(t[2],r[2]),e}function WB(e,t,r){return e[0]=Math.max(t[0],r[0]),e[1]=Math.max(t[1],r[1]),e[2]=Math.max(t[2],r[2]),e}function ZB(e,t=0,r=1){return e[0]=Math.min(Math.max(e[0],t),r),e[1]=Math.min(Math.max(e[1],t),r),e[2]=Math.min(Math.max(e[2],t),r),e}function JB(e,t){return e[0]=Math.round(t[0]),e[1]=Math.round(t[1]),e[2]=Math.round(t[2]),e}function DO(e,t,r){return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e}function YB(e,t,r,i){return e[0]=t[0]+r[0]*i,e[1]=t[1]+r[1]*i,e[2]=t[2]+r[2]*i,e}function FO(e,t){const r=t[0]-e[0],i=t[1]-e[1],s=t[2]-e[2];return Math.sqrt(r*r+i*i+s*s)}function UO(e,t){const r=t[0]-e[0],i=t[1]-e[1],s=t[2]-e[2];return r*r+i*i+s*s}function jO(e){const t=e[0],r=e[1],i=e[2];return t*t+r*r+i*i}function KB(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e}function XB(e,t){return e[0]=1/t[0],e[1]=1/t[1],e[2]=1/t[2],e}function U1(e,t){const r=t[0],i=t[1],s=t[2];let n=r*r+i*i+s*s;return n>0&&(n=1/Math.sqrt(n),e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n),e}function GO(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function QB(e,t,r){const i=t[0],s=t[1],n=t[2],o=r[0],a=r[1],l=r[2];return e[0]=s*l-n*a,e[1]=n*o-i*l,e[2]=i*a-s*o,e}function eH(e,t,r){const i=t[0],s=t[1],n=t[2],o=r[0],a=r[1],l=r[2],h=s*l-n*a,p=n*o-i*l,f=i*a-s*o,m=Math.sqrt(h*h+p*p+f*f);return e[0]=h/m,e[1]=p/m,e[2]=f/m,e}function tH(e,t,r,i){const s=t[0],n=t[1],o=t[2];return e[0]=s+i*(r[0]-s),e[1]=n+i*(r[1]-n),e[2]=o+i*(r[2]-o),e}function rH(e,t,r,i,s,n){const o=n*n,a=o*(2*n-3)+1,l=o*(n-2)+n,h=o*(n-1),p=o*(3-2*n);return e[0]=t[0]*a+r[0]*l+i[0]*h+s[0]*p,e[1]=t[1]*a+r[1]*l+i[1]*h+s[1]*p,e[2]=t[2]*a+r[2]*l+i[2]*h+s[2]*p,e}function iH(e,t,r,i,s,n){const o=1-n,a=o*o,l=n*n,h=a*o,p=3*n*a,f=3*l*o,m=l*n;return e[0]=t[0]*h+r[0]*p+i[0]*f+s[0]*m,e[1]=t[1]*h+r[1]*p+i[1]*f+s[1]*m,e[2]=t[2]*h+r[2]*p+i[2]*f+s[2]*m,e}function sH(e,t=1){const r=Q_,i=2*r()*Math.PI,s=2*r()-1,n=Math.sqrt(1-s*s)*t;return e[0]=Math.cos(i)*n,e[1]=Math.sin(i)*n,e[2]=s*t,e}function nH(e,t,r){const i=t[0],s=t[1],n=t[2];return e[0]=r[0]*i+r[4]*s+r[8]*n+r[12],e[1]=r[1]*i+r[5]*s+r[9]*n+r[13],e[2]=r[2]*i+r[6]*s+r[10]*n+r[14],e}function oH(e,t,r){const i=t[0],s=t[1],n=t[2];return e[0]=i*r[0]+s*r[3]+n*r[6],e[1]=i*r[1]+s*r[4]+n*r[7],e[2]=i*r[2]+s*r[5]+n*r[8],e}function aH(e,t,r){const i=r[0],s=r[1],n=r[2],o=r[3],a=t[0],l=t[1],h=t[2],p=s*h-n*l,f=n*a-i*h,m=i*l-s*a,y=s*m-n*f,_=n*p-i*m,v=i*f-s*p,w=2*o;return e[0]=a+p*w+2*y,e[1]=l+f*w+2*_,e[2]=h+m*w+2*v,e}function lH(e,t,r,i){const s=[],n=[];return s[0]=t[0]-r[0],s[1]=t[1]-r[1],s[2]=t[2]-r[2],n[0]=s[0],n[1]=s[1]*Math.cos(i)-s[2]*Math.sin(i),n[2]=s[1]*Math.sin(i)+s[2]*Math.cos(i),e[0]=n[0]+r[0],e[1]=n[1]+r[1],e[2]=n[2]+r[2],e}function uH(e,t,r,i){const s=[],n=[];return s[0]=t[0]-r[0],s[1]=t[1]-r[1],s[2]=t[2]-r[2],n[0]=s[2]*Math.sin(i)+s[0]*Math.cos(i),n[1]=s[1],n[2]=s[2]*Math.cos(i)-s[0]*Math.sin(i),e[0]=n[0]+r[0],e[1]=n[1]+r[1],e[2]=n[2]+r[2],e}function cH(e,t,r,i){const s=[],n=[];return s[0]=t[0]-r[0],s[1]=t[1]-r[1],s[2]=t[2]-r[2],n[0]=s[0]*Math.cos(i)-s[1]*Math.sin(i),n[1]=s[0]*Math.sin(i)+s[1]*Math.cos(i),n[2]=s[2],e[0]=n[0]+r[0],e[1]=n[1]+r[1],e[2]=n[2]+r[2],e}function hH(e,t){U1(RS,e),U1(kS,t);const r=GO(RS,kS);return r>1?0:r<-1?Math.PI:Math.acos(r)}const RS=xn(),kS=xn();function dH(e){return"vec3("+e[0]+", "+e[1]+", "+e[2]+")"}function pH(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]}function fH(e,t){if(e===t)return!0;const r=e[0],i=e[1],s=e[2],n=t[0],o=t[1],a=t[2],l=Ht();return Math.abs(r-n)<=l*Math.max(1,Math.abs(r),Math.abs(n))&&Math.abs(i-o)<=l*Math.max(1,Math.abs(i),Math.abs(o))&&Math.abs(s-a)<=l*Math.max(1,Math.abs(s),Math.abs(a))}function mH(e,t,r){const i=r[0]-t[0],s=r[1]-t[1],n=r[2]-t[2];let o=i*i+s*s+n*n;return o>0?(o=1/Math.sqrt(o),e[0]=i*o,e[1]=s*o,e[2]=n*o,e):(e[0]=0,e[1]=0,e[2]=0,e)}const yH=kO,gH=NO,_H=LO,vH=FO,wH=UO,bH=RO,SH=jO;Object.freeze(Object.defineProperty({__proto__:null,abs:BB,add:GB,angle:hH,bezier:iH,ceil:zB,clamp:ZB,copy:UB,cross:QB,crossAndNormalize:eH,direction:mH,dist:vH,distance:FO,div:_H,divide:LO,dot:GO,equals:fH,exactEquals:pH,floor:VB,hermite:rH,inverse:XB,len:bH,length:RO,lerp:tH,max:WB,min:qB,mul:gH,multiply:NO,negate:KB,normalize:U1,random:sH,rotateX:lH,rotateY:uH,rotateZ:cH,round:JB,scale:DO,scaleAndAdd:YB,set:jB,sign:HB,sqrDist:wH,sqrLen:SH,squaredDistance:UO,squaredLength:jO,str:dH,sub:yH,subtract:kO,transformMat3:oH,transformMat4:nH,transformQuat:aH},Symbol.toStringTag,{value:"Module"}));function Ur(e){let t=e*e;return e<0&&(t*=-1),t}function TH(e){return e.translation[0]=0,e.translation[1]=0,e.translation[2]=0,e.heading=0,e.tilt=0,e}function $H(e,t,r){const i=r,s=e.state,n=e.device,o=t.tiltDirection==="forward-down"?1:-1,a=1;return n.deviceType==="standard"?(i.translation[0]=Ur(s.axes[0]),i.translation[1]=Ur(s.axes[1]),i.translation[2]=Ur(s.buttons[7])-Ur(s.buttons[6]),i.heading=Ur(s.axes[2]),i.tilt=Ur(s.axes[3])):n.deviceType==="spacemouse"&&(i.translation[0]=1.2*Ur(s.axes[0]),i.translation[1]=1.2*Ur(s.axes[1]),i.translation[2]=2*-Ur(s.axes[2]),i.heading=1.2*Ur(s.axes[5]),i.tilt=1.2*Ur(s.axes[3])),i.tilt*=o,DO(i.translation,i.translation,a),i}function EH(e){return e.translation[0]===0&&e.translation[1]===0&&e.translation[2]===0&&e.heading===0&&e.tilt===0&&e.zoom===0}let MH=class extends st{constructor(t){super(!0),this._view=t,this._frameTask=null,this._watchHandles=new bl,this._currentDevice=null,this._transformation={translation:[0,0,0],heading:0,tilt:0,zoom:0},this._handle=this.registerIncoming("gamepad",r=>this._handleGamePadEvent(r)),this._handle.pause()}onInstall(t){super.onInstall(t),this._watchHandles.add([Q(()=>{var r;return(r=this._view.navigation.gamepad)==null?void 0:r.enabled},r=>{r?(this._handle.resume(),this._frameTask||(this._frameTask=il({update:i=>this._frameUpdate(i.deltaTime)}))):(this._handle.pause(),this._frameTask&&(this._frameTask.remove(),this._frameTask=null))},Tt)])}onUninstall(){this._watchHandles.removeAll(),this._frameTask&&(this._frameTask.remove(),this._frameTask=null),super.onUninstall()}_handleGamePadEvent(t){var i;const r=this._view.navigation.gamepad.device;r&&t.data.device!==r||this._currentDevice&&this._currentDevice!==t.data.device||(t.data.action==="end"?(this._currentDevice=null,TH(this._transformation)):(this._currentDevice=t.data.device,$H(t.data,this._view.navigation.gamepad,this._transformation)),(i=this._frameTask)==null||i.resume())}_frameUpdate(t){var f;const r=this._transformation;if(EH(r))return void((f=this._frameTask)==null?void 0:f.pause());const i=this._view.viewpoint.clone(),s=this._view.navigation.gamepad.velocityFactor,n=AH*s*t;gm(i,i,[r.translation[0]*n,-r.translation[1]*n]);const o=1+r.translation[2]*PH*t,a=this._view.constraints.rotationEnabled?-r.heading*xH*t:0,l=this._view.size,h=[l[0]/2,l[1]];pO(i,i,o,a,h,l);const p=this._view.constraints.constrain(i,this._view.viewpoint);this._view.viewpoint=p}};const xH=.06,AH=.7,PH=6e-4;function zO(e){const t=()=>e(document.visibilityState==="visible");return document.addEventListener("visibilitychange",t),ce(()=>document.removeEventListener("visibilitychange",t))}let OH=class extends st{constructor(t,r,i){super(!0),this.view=t,this.keys=r,this._isSticky=!1,this._pressedKeys=new Set,this._timeout=void 0,this._currentDirection=void 0,this._stickyKeyDuration=200,this._handleKey=s=>{const n=this._keyMap[s.data.key];if(s.modifiers.has("Meta")||s.modifiers.has("Control"))return void this._stopMovement();if(n==null)return;s.stopPropagation(),s.preventDefault();const o=s.type==="key-down";if(this._pressedKeys[o?"add":"delete"](n),o){if(this._direction===n)return;this._direction=n,this._isSticky=!1,this._setTimeout(()=>{this._isSticky&&this._handlePopKey()})}else{const a=this._timeout===void 0,l=this._pressedKeys.size>0;a||l?this._handlePopKey():this._isSticky=!0}},this._handlePopKey=()=>{this._direction=Array.from(this._pressedKeys).pop(),this._direction==null&&this._stopMovement()},this._stopMovement=()=>{this._isSticky=!1,this._direction=void 0,this._pressedKeys.clear(),this._setTimeout(void 0)},this._keyMap={[r.left]:"left",[r.right]:"right",[r.up]:"up",[r.down]:"down"},this.registerIncoming("key-down",i,this._handleKey),this.registerIncoming("key-up",i,this._handleKey),this.registerIncoming("blur",i,this._stopMovement),this._visibilityHandle=zO(s=>s?null:this._stopMovement())}onUninstall(){var t;this._stopMovement(),(t=this._visibilityHandle)==null||t.remove()}get _direction(){return this._currentDirection}set _direction(t){const r=this._currentDirection!=null;if(t!=null){if(r||this.view.mapViewNavigation.begin(),this._currentDirection!==t)switch(t){case"left":this.view.mapViewNavigation.continuousPanLeft();break;case"right":this.view.mapViewNavigation.continuousPanRight();break;case"up":this.view.mapViewNavigation.continuousPanUp();break;case"down":this.view.mapViewNavigation.continuousPanDown()}}else r&&this.view.mapViewNavigation.stop();this._currentDirection=t}_setTimeout(t){clearTimeout(this._timeout),this._timeout=t===void 0?void 0:setTimeout(()=>{this._timeout=void 0,t()},this._stickyKeyDuration)}},CH=class extends st{constructor(t,r,i){super(!0),this.view=t,this.keys=r,this._keyToDirection=new Map,this._pressed=!1,this._addKeysMapping(r),this.registerIncoming("key-down",i,s=>this._handleKeyDown(s)),this.registerIncoming("key-up",i,s=>this._handleKeyUp(s)),this.registerIncoming("blur",i,()=>this._handleStop()),this._visibilityHandle=zO(s=>s?null:this._handleStop())}onUninstall(){var t;(t=this._visibilityHandle)==null||t.remove(),this._handleStop()}_addKeysMapping(t){this._addKeyMapping(t.clockwise,"clockwise"),this._addKeyMapping(t.counterClockwise,"counterClockwise"),this._addKeyMapping(t.reset,"reset")}_addKeyMapping(t,r){for(const i of t)this._keyToDirection.set(i,r)}_handleKeyDown(t){t.data.repeat||this._handleKey(t,!0)}_handleKeyUp(t){this._handleKey(t,!1)}_handleStop(){this._pressed&&(this._pressed=!1,this.view.mapViewNavigation.stop())}_handleKey(t,r){const i=t.modifiers;if(i.size>0&&!i.has("Shift")||!this.view.constraints.rotationEnabled)return;const s=this._keyToDirection.get(t.data.key);if(this._pressed=s!=null,this._pressed){if(t.preventDefault(),r)switch(this.view.mapViewNavigation.begin(),s){case"clockwise":this.view.mapViewNavigation.continuousRotateClockwise();break;case"counterClockwise":this.view.mapViewNavigation.continuousRotateCounterclockwise();break;case"reset":this.view.mapViewNavigation.resetRotation()}else this._pressed=!1,this.view.mapViewNavigation.stop();t.stopPropagation()}}};var La;(function(e){e[e.IN=0]="IN",e[e.OUT=1]="OUT"})(La||(La={}));let IH=class extends st{constructor(t,r,i){super(!0),this.view=t,this.keys=r,this._keysToZoomAction={},this.registerIncoming("key-down",i,s=>this._handleKeyDown(s)),r.zoomIn.forEach(s=>this._keysToZoomAction[s]=La.IN),r.zoomOut.forEach(s=>this._keysToZoomAction[s]=La.OUT)}_handleKeyDown(t){this._handleKey(t)}_handleKey(t){const r=t.modifiers;if(r.size>0&&!r.has("Shift"))return;const{key:i}=t.data;if(!(i in this._keysToZoomAction))return;const s=this._keysToZoomAction[i],{mapViewNavigation:n}=this.view;let o=null;switch(s){case La.IN:o=n.zoomIn();break;case La.OUT:o=n.zoomOut();break;default:return}n.begin(),o.then(()=>n.end()),t.stopPropagation()}};const RH=.6;let kH=class extends st{constructor(t,r){super(!0),this._view=t,this._canZoom=!0,this.registerIncoming("mouse-wheel",r,i=>this._handleMouseWheel(i))}_handleMouseWheel(t){if(this._view.navigation.actionMap.mouseWheel!=="zoom"||(t.preventDefault(),t.stopPropagation(),!this._canZoom))return;const r=this._view.mapViewNavigation,{x:i,y:s,deltaY:n}=t.data,o=1/RH**(1/60*n),a=r.zoom(o,[i,s]);a&&(this._canZoom=!1,a.catch(()=>{}).then(()=>{this._canZoom=!0,r.end()}))}},NH=class extends st{constructor(t){super(!0),this.view=t,this.registerIncoming("drag",i=>this._handleDrag(i)),this.registerIncoming("pointer-down",()=>this._stopMomentumNavigation());const r=this.view.mapViewNavigation;this._dragEventSeparator=new _m({start:(i,s)=>{r.pinch.begin(this.view,s.data),s.stopPropagation()},update:(i,s)=>{r.pinch.update(this.view,s.data),s.stopPropagation()},end:(i,s)=>{r.pinch.end(this.view),s.stopPropagation()},condition:i=>i>=2})}_handleDrag(t){this._dragEventSeparator.handle(t)}_stopMomentumNavigation(){this.view.mapViewNavigation.pinch.stopMomentumNavigation()}};function NS(e){const t=e.native;return t?{buttons:t.buttons.map(r=>r.pressed?r.value||1:0),axes:t.axes.map(r=>FH(r,e.axisThreshold))}:{buttons:[],axes:[]}}function LH(e,t){if(e.axes.length!==t.axes.length||e.buttons.length!==t.buttons.length)return!1;for(let r=0;r<e.axes.length;r++)if(e.axes[r]!==t.axes[r])return!1;for(let r=0;r<e.buttons.length;r++)if(e.buttons[r]!==t.buttons[r])return!1;return!0}function DH(e){for(let t=0;t<e.axes.length;t++)if(e.axes[t]!==0)return!1;for(let t=0;t<e.buttons.length;t++)if(e.buttons[t]!==0)return!1;return!0}function FH(e,t){const r=Math.abs(e);return r<t?0:Math.sign(e)*(r-t)/(1-t)}let UH=class{constructor(t,r){this._element=t,this._input=r,this._hasEventListeners=!1,this._onConnectGamepad=n=>{this._connectGamepad(n.gamepad)},this._onDisconnectGamepad=n=>{const o=n.gamepad,a=o.index,l=this._inputDevices[a];l&&(this._emitGamepadEvent(o,NS(l),!1),this._inputDevices.splice(a,1),this._latestUpdate.splice(a,1),this._input.gamepad.devices.remove(l),this.ensurePollingState())},this._frameTask=null,this._latestUpdate=new Array,this._inputDevices=new Array,this._callback=null;const i="getGamepads"in window.navigator,s=window.isSecureContext;this.supported=i&&s,this.supported&&(LS(n=>this._connectGamepad(n)),window.addEventListener("gamepadconnected",this._onConnectGamepad),window.addEventListener("gamepaddisconnected",this._onDisconnectGamepad),this.ensurePollingState())}destroy(){this.hasEventListeners=!1,this.supported&&(window.removeEventListener("gamepadconnected",this._onConnectGamepad),window.removeEventListener("gamepaddisconnected",this._onDisconnectGamepad))}set hasEventListeners(t){this._hasEventListeners!==t&&(this._hasEventListeners=t,this.ensurePollingState())}get _eventsEnabled(){return this.supported&&this._inputDevices.length>0&&this._hasEventListeners}set onEvent(t){this._callback=t}_connectGamepad(t){const r=new Fv(t);r.deviceType!=="unknown"&&(this._inputDevices[t.index]=r,this._input.gamepad.devices.add(r)),this.ensurePollingState()}ensurePollingState(){this._eventsEnabled?this._startPolling():this._stopPolling()}_startPolling(){this._frameTask==null&&(this._frameTask=il({update:()=>this._readGamepadState()}))}_stopPolling(){this._frameTask!=null&&(this._frameTask.remove(),this._frameTask=null,this._latestUpdate=new Array)}_readGamepadState(){const t=document.hasFocus(),r=this._element.contains(document.activeElement),i=this._input.gamepad.enabledFocusMode==="document"&&!t||this._input.gamepad.enabledFocusMode==="view"&&!r;LS(s=>{const n=this._inputDevices[s.index];if(!n)return;const o=this._latestUpdate[s.index],a=NS(n),l=i||DH(a);o&&(o.timestamp===s.timestamp||!o.active&&l||LH(o.state,a))||this._emitGamepadEvent(s,a,!l)})}_emitGamepadEvent(t,r,i){const s=this._latestUpdate[t.index],n=s&&s.active;if(!n&&!i)return;const o=!n&&i?"start":n&&i?"update":"end";this._latestUpdate[t.index]={timestamp:t.timestamp,state:r,active:i},this._callback&&this._callback({device:this._inputDevices[t.index],state:r,action:o})}};function jH(e){if(!e||!e.connected)return!1;for(let t=0;t<e.axes.length;t++)if(isNaN(e.axes[t]))return!1;return!0}function LS(e){for(const t of navigator.getGamepads())jH(t)&&e(t)}const DS=A("edge"),GH=A("chrome"),zH=A("ff"),VH=A("safari"),FS="esri-view-surface",ra={touchNone:`${FS}--touch-none`,touchPan:`${FS}--touch-pan`};let VO=class BO{constructor(t,r){this._active={},this._callback=()=>{},this._activePointerCaptures=new Set,this._keyDownState=new Set,this._eventId=1,this._browserTouchPanningEnabled=!1,this._element=t,t.getAttribute("tabindex")||t.setAttribute("tabindex","0"),this._eventHandlers={"key-down":this._handleKey,"key-up":this._handleKey,"pointer-down":this._handlePointer,"pointer-move":this._handlePointerPreventDefault,"pointer-up":this._handlePointerPreventDefault,"pointer-enter":this._handlePointer,"pointer-leave":this._handlePointer,"pointer-cancel":this._handlePointer,"mouse-wheel":this._handleMouseWheel,"pointer-capture-lost":this._handlePointerCaptureLost},this._updateTouchAction(),this._element.addEventListener("keydown",this._preventAltKeyDefault),this._gamepadSource=new UH(t,r),this._gamepadSource.onEvent=i=>this._callback("gamepad",i)}destroy(){this._callback=()=>{},this.activeEvents=null,this._activePointerCaptures.forEach(t=>this._releasePointerCaptureSafe(t)),this._activePointerCaptures.clear(),this._gamepadSource=Ne(this._gamepadSource),this._removeTouchAction(),this._element.removeEventListener("keydown",this._preventAltKeyDefault)}get browserTouchPanningEnabled(){return this._browserTouchPanningEnabled}set browserTouchPanningEnabled(t){this._browserTouchPanningEnabled=t,this._updateTouchAction(),this._updateTouchEventHandling()}set onEventReceived(t){this._callback=t}set activeEvents(t){for(const r in this._active)if(!t||!t.has(r)){const i=this._active[r];this._element.removeEventListener(vy[r],i),delete this._active[r]}t&&t.forEach(r=>{if(!this._active[r]&&vy[r]){const i=(this._eventHandlers[r]||this._handleDefault).bind(this,r);this._element.addEventListener(vy[r],i),this._active[r]=i}}),this._gamepadSource&&(this._gamepadSource.hasEventListeners=(t==null?void 0:t.has("gamepad"))??!1)}setPointerCapture(t,r){r?this._setPointerCaptureSafe(t.pointerId):(this._releasePointerCaptureSafe(t.pointerId),this._activePointerCaptures.delete(t.pointerId))}_updateTouchAction(){this._element.classList.remove(this._browserTouchPanningEnabled?ra.touchNone:ra.touchPan),this._element.classList.add(this._browserTouchPanningEnabled?ra.touchPan:ra.touchNone)}_updateTouchEventHandling(){this._browserTouchPanningEnabled?this._element.addEventListener("touchmove",this._preventMultiTouchPanning):this._element.removeEventListener("touchmove",this._preventMultiTouchPanning)}_removeTouchAction(){this._element.classList.remove(ra.touchNone),this._element.classList.remove(ra.touchPan),this._element.removeEventListener("touchmove",this._preventMultiTouchPanning)}_setPointerCaptureSafe(t){try{this._element.setPointerCapture(t),this._activePointerCaptures.add(t)}catch{}}_releasePointerCaptureSafe(t){try{if(this._element.hasPointerCapture&&!this._element.hasPointerCapture(t))return;this._element.releasePointerCapture(t)}catch{}}_updateNormalizedPointerLikeEvent(t,r){const i=CP(this._element,t);return BO.test.disableSubpixelCoordinates&&(i.x=Math.round(i.x),i.y=Math.round(i.y)),r.x=i.x,r.y=i.y,r}_handleKey(t,r){const{key:i}=r;i&&t==="key-up"&&this._keyDownState.delete(i);const s={native:r,key:i,repeat:!!i&&this._keyDownState.has(i)};i&&t==="key-down"&&this._keyDownState.add(s.key),this._callback(t,s)}_handlePointer(t,r){const i=this._updateNormalizedPointerLikeEvent(r,{native:r,x:0,y:0,pointerType:r.pointerType,button:r.button,buttons:r.buttons,eventId:this._eventId++});this._callback(t,i)}_handlePointerPreventDefault(t,r){const i=this._updateNormalizedPointerLikeEvent(r,{native:r,x:0,y:0,pointerType:r.pointerType,button:r.button,buttons:r.buttons,eventId:this._eventId++});r.preventDefault(),this._callback(t,i)}_getDeltaFromTrackpadOrMouseWheel(t){return t.shiftKey&&A("mac")&&t.deltaY===0?t.deltaX:t.deltaY}_handleMouseWheel(t,r){let i=this._getDeltaFromTrackpadOrMouseWheel(r);switch(r.deltaMode){case 0:DS&&(i=i/document.documentElement.clientHeight*600);break;case 1:i*=30;break;case 2:i*=900}DS?i*=.7:GH||VH?i*=.6:zH&&(i*=1.375);const s=100,n=Math.abs(i);n>s&&(i=i/n*200/(1+Math.exp(-.02*(n-s))));const o=this._updateNormalizedPointerLikeEvent(r,{native:r,x:0,y:0,deltaY:i});this._callback(t,o)}_handlePointerCaptureLost(t,r){this._activePointerCaptures.delete(r.pointerId),this._handleDefault(t,r)}_handleDefault(t,r){const i={native:r};r.preventDefault(),this._callback(t,i)}_preventAltKeyDefault(t){t.key==="Alt"&&t.preventDefault()}_preventMultiTouchPanning(t){t.touches.length>1&&t.preventDefault()}};VO.test={disableSubpixelCoordinates:!1};const vy={"key-down":"keydown","key-up":"keyup","pointer-down":"pointerdown","pointer-up":"pointerup","pointer-move":"pointermove","mouse-wheel":"wheel","pointer-capture-got":"gotpointercapture","pointer-capture-lost":"lostpointercapture","context-menu":"contextmenu","pointer-enter":"pointerenter","pointer-leave":"pointerleave","pointer-cancel":"pointercancel",focus:"focus",blur:"blur"};let BH=class extends st{constructor(){super(!0),this.registerIncoming("context-menu",t=>t.data.native.preventDefault())}};const pt={maximumClickDelay:300,movementUntilMouseDrag:1.5,movementUntilPenDrag:6,movementUntilTouchDrag:6,holdDelay:500,maximumDoubleClickDelay:250,maximumDoubleClickDistance:10,maximumDoubleTouchDelay:350,maximumDoubleTouchDistance:35};function nf(e,t){return Math.abs(t.x-e.x)+Math.abs(t.y-e.y)}function HH(e,t){const r=t.x-e.x,i=t.y-e.y;return Math.sqrt(r*r+i*i)}function qH(e,t){if(t?(t.radius=0,t.center.x=0,t.center.y=0):t={radius:0,center:ut()},e.length===0)return t;if(e.length===1)return t.center.x=e[0].x,t.center.y=e[0].y,t;if(e.length===2){const[$,E]=e,[P,O]=[E.x-$.x,E.y-$.y];return t.radius=Math.sqrt(P*P+O*O)/2,t.center.x=($.x+E.x)/2,t.center.y=($.y+E.y)/2,t}let r=0,i=0;for(let $=0;$<e.length;$++)r+=e[$].x,i+=e[$].y;r/=e.length,i/=e.length;const s=e.map($=>$.x-r),n=e.map($=>$.y-i);let o=0,a=0,l=0,h=0,p=0,f=0,m=0;for(let $=0;$<s.length;$++){const E=s[$],P=n[$],O=E*E,L=P*P;o+=O,a+=L,l+=E*P,h+=O*E,p+=L*P,f+=E*L,m+=P*O}const y=.5*(h+f),_=.5*(p+m),v=o*a-l*l,w=(y*a-_*l)/v,b=(o*_-l*y)/v,M=ut(w+r,b+i);return{radius:Math.sqrt(w*w+b*b+(o+a)/e.length),center:M}}function Mo(e){const{native:t}=e,{pointerId:r,button:i,pointerType:s}=t;return s==="mouse"?`${r}:${i}`:`${s}`}let WH=class extends st{constructor(t=pt.maximumDoubleClickDelay,r=pt.maximumDoubleClickDistance,i=pt.maximumDoubleTouchDelay,s=pt.maximumDoubleTouchDistance,n=Sl){super(!1),this._maximumDoubleClickDelay=t,this._maximumDoubleClickDistance=r,this._maximumDoubleTouchDelay=i,this._maximumDoubleTouchDistance=s,this._clock=n,this._doubleTapDragReady=!1,this._doubleTapDragActive=!1,this._dragStartCenter=ut(0,0),this._pointerState=new Map,this._doubleTapDrag=this.registerOutgoing("double-tap-drag"),this._dragEventSeparator=new _m({start:(o,a)=>this._dragStart(o,a),update:(o,a)=>this._dragUpdate(a),end:(o,a)=>this._dragEnd(a)}),this.registerIncoming("drag",o=>this._dragEventSeparator.handle(o)),this.registerIncoming("pointer-down",o=>this._handlePointerDown(o)),this.registerIncoming("pointer-up",()=>this._handlePointerUp())}onUninstall(){this._pointerState.forEach(t=>{t.doubleTapTimeout=Ie(t.doubleTapTimeout)})}get hasPendingInputs(){for(const t of this._pointerState.values())if(t.doubleTapTimeout!=null)return!0;return!1}_clearPointerDown(t){const r=this._pointerState.get(t);r&&(r.doubleTapTimeout=Ie(r.doubleTapTimeout),this._pointerState.delete(t),this.refreshHasPendingInputs())}_dragStart(t,r){if(!this._doubleTapDragReady||t!==1)return;this._doubleTapDragReady=!1,this._doubleTapDragActive=!0;const{data:i,modifiers:s}=r,{center:n}=i;this._dragStartCenter=n;const o=wy("begin",ut(0,0),i);this._doubleTapDrag.emit(o,void 0,s),r.stopPropagation()}_dragUpdate(t){if(!this._doubleTapDragActive)return;const{data:r,modifiers:i}=t,{center:s}=r,n=wy("update",ut(s.x-this._dragStartCenter.x,s.y-this._dragStartCenter.y),r);this._doubleTapDrag.emit(n,void 0,i),t.stopPropagation()}_dragEnd(t){if(!this._doubleTapDragActive)return;const{data:r,modifiers:i}=t,{center:s}=r,n=wy("end",ut(s.x-this._dragStartCenter.x,s.y-this._dragStartCenter.y),r);this._doubleTapDrag.emit(n,void 0,i),this._doubleTapDragActive=!1,t.stopPropagation()}_handlePointerDown(t){const{data:r}=t,i=Mo(r),s=this._pointerState.get(i),{pointerType:n}=r.native;if(s){const o=n==="touch"?this._maximumDoubleTouchDistance:this._maximumDoubleClickDistance;this._clearPointerDown(i),nf(s.event.data,r)>o?this._storePointerDown(t):this._doubleTapDragReady=!0}else this._storePointerDown(t)}_handlePointerUp(){this._doubleTapDragReady=!1}_storePointerDown(t){const{data:r}=t,{pointerType:i}=r.native,s=Mo(r),n=i==="touch"?this._maximumDoubleTouchDelay:this._maximumDoubleClickDelay,o=this._clock.setTimeout(()=>this._clearPointerDown(s),n);this._pointerState.set(s,{event:t,doubleTapTimeout:o}),this.refreshHasPendingInputs()}};function wy(e,t,r){const{button:i,buttons:s,pointer:n,pointers:o,pointerType:a,timestamp:l}=r;return{action:e,delta:t,button:i,buttons:s,pointer:n,pointers:o,pointerType:a,timestamp:l}}let ZH=class extends st{constructor(t){super(!1),this._navigationTouch=t,this._startStateModifiers=new Set,this._activePointerMap=new Map,this._isDragging=!1,this._isCurrentDragSuppressed=!1,this._drag=this.registerOutgoing("drag"),this.registerIncoming("pointer-drag",this._handlePointerDrag.bind(this)),this.registerIncoming("pointer-up",this._handlePointerUpAndPointerLost.bind(this)),this.registerIncoming("pointer-capture-lost",this._handlePointerUpAndPointerLost.bind(this)),this.registerIncoming("pointer-cancel",this._handlePointerUpAndPointerLost.bind(this))}_createPayload(t,r,i,s){return{action:t,pointerType:this._pointerType,button:this._mouseButton,buttons:r.buttons,timestamp:s,pointers:JH(this._activePointerMap),pointer:r,angle:i.angle,radius:i.radius,center:i.center}}_addPointer(t){const r=t.native.pointerId,i=Kh(this._activePointerMap).angle,s={event:t,initialAngle:0,lastAngle:0};this._activePointerMap.set(r,s);const n=rp(s,HO(this._activePointerMap));s.initialAngle=n,s.lastAngle=n,this._updatePointerAngles(i)}_updatePointer(t){if(t&&t.x==null&&t.y==null)return;const r=t.native.pointerId,i=this._activePointerMap.get(r);i?i.event=t:this._addPointer(t)}_removePointer(t){const r=Kh(this._activePointerMap).angle;this._activePointerMap.delete(t),this._updatePointerAngles(r)}_updatePointerAngles(t){const r=Kh(this._activePointerMap);this._activePointerMap.forEach(i=>{i.initialAngle=rp(i,r)-t,i.lastAngle=rp(i,r)-t})}_emitEvent(t,r,i){const s=Kh(this._activePointerMap);this._drag.emit(this._createPayload(t,r,s,i),void 0,this._startStateModifiers)}_handlePointerUpAndPointerLost(t){const r=t.data.native.pointerId,i=t.timestamp;this._activePointerMap.get(r)&&(this._activePointerMap.size===1?(this._updatePointer(t.data),!this._isCurrentDragSuppressed&&this._emitEvent("end",t.data,i),this._isDragging=!1,this._isCurrentDragSuppressed=!1,this._removePointer(r)):(this._removePointer(r),this._emitEvent("removed",t.data,t.timestamp)))}_handlePointerDrag(t){const r=t.data,i=r.currentEvent,s=t.timestamp;switch(r.action){case"start":case"update":this._isDragging?this._activePointerMap.has(i.native.pointerId)?(this._updatePointer(i),!this._isCurrentDragSuppressed&&this._emitEvent("update",i,s)):(this._addPointer(i),this._emitEvent("added",i,s),this._isCurrentDragSuppressed=this._isSuppressed):(this._updatePointer(i),this._pointerType=t.data.startEvent.pointerType,this._mouseButton=t.data.startEvent.button,this._startStateModifiers=t.modifiers,this._isDragging=!0,this._isCurrentDragSuppressed=this._isSuppressed,!this._isCurrentDragSuppressed&&this._emitEvent("start",i,s))}}get _isSuppressed(){return!!this._navigationTouch&&!this._navigationTouch.browserTouchPanEnabled&&this._pointerType==="touch"&&this._activePointerMap.size===1}};function HO(e){const t=[];return e.forEach(r=>{t.push(ut(r.event.x,r.event.y))}),qH(t)}function Kh(e){const t=HO(e);let r=0;return e.forEach(i=>{let s=rp(i,t),n=s-i.lastAngle;for(;n>Math.PI;)n-=2*Math.PI;for(;n<-Math.PI;)n+=2*Math.PI;s=i.lastAngle+n,i.lastAngle=s;const o=s-i.initialAngle;r+=o}),r/=e.size||1,{angle:r,radius:t.radius,center:t.center}}function JH(e){const t=new Map;return e.forEach((r,i)=>t.set(i,r.event)),t}function rp(e,t){const r=e.event,i=r.x-t.center.x,s=r.y-t.center.y;return Math.atan2(s,i)}var US;(function(e){e[e.Left=0]="Left",e[e.Middle=1]="Middle",e[e.Right=2]="Right",e[e.Back=3]="Back",e[e.Forward=4]="Forward",e[e.Undefined=-1]="Undefined"})(US||(US={}));let YH=class extends st{constructor(t=pt.maximumDoubleClickDelay,r=pt.maximumDoubleClickDistance,i=pt.maximumDoubleTouchDelay,s=pt.maximumDoubleTouchDistance,n=Sl){super(!1),this._maximumDoubleClickDelay=t,this._maximumDoubleClickDistance=r,this._maximumDoubleTouchDelay=i,this._maximumDoubleTouchDistance=s,this._clock=n,this._pointerState=new Map,this._immediateDoubleClick=this.registerOutgoing("immediate-double-click"),this.registerIncoming("pointer-down",this._handlePointerDown.bind(this)),this.registerIncoming("pointer-up",this._handlePointerUp.bind(this))}onUninstall(){this._pointerState.forEach(t=>{t.immediateDoubleClick&&t.immediateDoubleClick.timeoutHandle.remove()}),super.onUninstall()}_handlePointerDown(t){const r=t.data,i=Mo(r);if(!this._pointerState.has(i)){const s={downButton:r.native.button,x:r.x,y:r.y,immediateDoubleClick:null};this._pointerState.set(i,s),this.startCapturingPointer(r.native)}}_handlePointerUp(t){const r=t.data,i=Mo(r),s=this._pointerState.get(i);if(s&&s.downButton===r.native.button){const n=s.immediateDoubleClick,o=t.data.native.pointerType==="touch"?this._maximumDoubleTouchDistance:this._maximumDoubleClickDistance;n?(n.timeoutHandle.remove(),nf(n,t.data)>o?this._startImmediateDoubleClick(t,s):(this._immediateDoubleClick.emit(t.data,void 0,n.modifiers),this._removeState(r))):nf(s,t.data)>o?this._removeState(r):this._startImmediateDoubleClick(t,s)}}_startImmediateDoubleClick(t,r){const i=t.data.native.pointerType==="touch"?this._maximumDoubleTouchDelay:this._maximumDoubleClickDelay;r.immediateDoubleClick={x:t.data.x,y:t.data.y,modifiers:t.modifiers,timeoutHandle:this._clock.setTimeout(()=>this._removeState(t.data),i)}}_removeState(t){const r=Mo(t);this._pointerState.delete(r),this.stopCapturingPointer(t.native),this.refreshHasPendingInputs()}},KH=class extends st{constructor(t=pt.maximumClickDelay,r=pt.movementUntilMouseDrag,i=pt.movementUntilPenDrag,s=pt.movementUntilTouchDrag,n=pt.holdDelay,o=Sl){super(!1),this._maximumClickDelay=t,this._movementUntilMouseDrag=r,this._movementUntilPenDrag=i,this._movementUntilTouchDrag=s,this._holdDelay=n,this._clock=o,this._pointerState=new Map,this._pointerDrag=this.registerOutgoing("pointer-drag"),this._immediateClick=this.registerOutgoing("immediate-click"),this._pointerHold=this.registerOutgoing("hold"),this.registerIncoming("pointer-down",a=>this._handlePointerDown(a)),this.registerIncoming("pointer-up",a=>this._handlePointerLoss(a,"pointer-up")),this.registerIncoming("pointer-capture-lost",a=>this._handlePointerLoss(a,"pointer-capture-lost")),this.registerIncoming("pointer-cancel",a=>this._handlePointerLoss(a,"pointer-cancel")),this._moveHandle=this.registerIncoming("pointer-move",a=>this._handlePointerMove(a)),this._moveHandle.pause()}onUninstall(){this._pointerState.forEach(t=>{t.holdTimeout=Ie(t.holdTimeout)}),super.onUninstall()}_handlePointerDown(t){const r=t.data,i=r.native.pointerId;let s=null;this._pointerState.size===0&&(s=this._clock.setTimeout(()=>{const o=this._pointerState.get(i);if(o){if(!o.isDragging){const a=o.previousEvent;this._pointerHold.emit(a,void 0,t.modifiers),o.holdEmitted=!0}o.holdTimeout=null}},this._holdDelay));const n={startEvent:r,previousEvent:r,startTimestamp:t.timestamp,isDragging:!1,downButton:r.native.button,holdTimeout:s,modifiers:new Set};this._pointerState.set(i,n),this.startCapturingPointer(r.native),this._moveHandle.resume(),this._pointerState.size>1&&this._startDragging(t)}_handlePointerMove(t){const r=t.data,i=r.native.pointerId,s=this._pointerState.get(i);s&&(s.isDragging?this._pointerDrag.emit(Xh("update",s,r),void 0,s.modifiers):HH(r,s.startEvent)>this._getDragThreshold(r.native.pointerType)&&this._startDragging(t),s.previousEvent=r)}_getDragThreshold(t){switch(t){case"touch":return this._movementUntilTouchDrag;case"pen":return this._movementUntilPenDrag;default:return this._movementUntilMouseDrag}}_startDragging(t){const r=t.data,i=r.native.pointerId;this._pointerState.forEach(s=>{s.holdTimeout!=null&&(s.holdTimeout.remove(),s.holdTimeout=null),s.isDragging||(s.modifiers=t.modifiers,s.isDragging=!0,i===s.startEvent.native.pointerId?this._pointerDrag.emit(Xh("start",s,r)):this._pointerDrag.emit(Xh("start",s,s.previousEvent),t.timestamp))})}_handlePointerLoss(t,r){const i=t.data,s=i.native.pointerId,n=this._pointerState.get(s);n&&(n.holdTimeout!=null&&(n.holdTimeout.remove(),n.holdTimeout=null),n.isDragging?this._pointerDrag.emit(Xh("end",n,r==="pointer-up"?i:n.previousEvent),void 0,n.modifiers):r==="pointer-up"&&n.downButton===i.native.button&&t.timestamp-n.startTimestamp<=this._maximumClickDelay&&!n.holdEmitted&&this._immediateClick.emit(i),this._pointerState.delete(s),this.stopCapturingPointer(i.native),this._pointerState.size===0&&this._moveHandle.pause())}};function Xh(e,t,r){return{action:e,startEvent:t.startEvent,previousEvent:t.previousEvent,currentEvent:r}}let XH=class extends st{constructor(t=pt.maximumDoubleClickDelay,r=pt.maximumDoubleClickDistance,i=pt.maximumDoubleTouchDelay,s=pt.maximumDoubleTouchDistance,n=Sl){super(!1),this._maximumDoubleClickDelay=t,this._maximumDoubleClickDistance=r,this._maximumDoubleTouchDelay=i,this._maximumDoubleTouchDistance=s,this._clock=n,this._pointerState=new Map,this._click=this.registerOutgoing("click"),this._doubleClick=this.registerOutgoing("double-click"),this.registerIncoming("immediate-click",o=>this._handleImmediateClick(o)),this.registerIncoming("pointer-down",o=>this._handlePointerDown(o))}onUninstall(){this._pointerState.forEach(t=>t.doubleClickTimer=Ie(t.doubleClickTimer))}get hasPendingInputs(){for(const t of this._pointerState.values())if(t.doubleClickTimer!=null)return!0;return!1}_clearDoubleClickTimer(t,r){const i=this._pointerState.get(t);i&&(i.doubleClickTimer=Ie(i.doubleClickTimer),r&&this._click.emit(i.event.data,void 0,i.event.modifiers),this._pointerState.delete(t),this.refreshHasPendingInputs())}_doubleClickTimeoutExceeded(t){const r=this._pointerState.get(t);r.pointerDownCount===1&&this._click.emit(r.event.data,void 0,r.event.modifiers),r.doubleClickTimer=null,this._pointerState.delete(t),this.refreshHasPendingInputs()}_handleImmediateClick(t){const r=t.data,{pointerType:i}=r.native,s=QH(r);if(!this._pointerState.has(s))return void this._startClick(t);const n=this._pointerState.get(s),{data:o,modifiers:a}=n.event,l=i==="touch"?this._maximumDoubleTouchDistance:this._maximumDoubleClickDistance;nf(o,r)>l?(this._clearDoubleClickTimer(s,!0),this._startClick(t)):(this._clearDoubleClickTimer(s,!1),n.pointerDownCount===2&&this._doubleClick.emit(o,void 0,a))}_handlePointerDown(t){const r=Mo(t.data),i=this._pointerState.get(r);i&&(i.pointerDownCount+=1)}_startClick(t){const{data:r}=t,{native:{pointerType:i}}=r,s=Mo(r),n=i==="touch"?this._maximumDoubleTouchDelay:this._maximumDoubleClickDelay,o=this._clock.setTimeout(()=>this._doubleClickTimeoutExceeded(s),n);this._pointerState.set(s,{event:t,doubleClickTimer:o,pointerDownCount:1}),this.refreshHasPendingInputs()}};function QH(e){const{pointerId:t,pointerType:r,button:i}=e.native;return r==="mouse"?`${t}:${i}`:`${r}`}const Qh={counter:"Control",pan:{left:"ArrowLeft",right:"ArrowRight",up:"ArrowUp",down:"ArrowDown"},zoom:{zoomIn:["=","+"],zoomOut:["-","_"]},rotate:{clockwise:["a","A"],counterClockwise:["d","D"],reset:["n","N"]}},jS=Symbol("handles");let ao=class extends W{initialize(){const t=()=>{var r;return(r=this.view)==null?void 0:r.ready};this.addHandles([Cr(()=>!t(),()=>this._disconnect()),Cr(t,()=>this._connect())])}destroy(){this._disconnect()}get latestPointerType(){var t;return(t=this._inputManager)==null?void 0:t.latestPointerType}get latestPointerLocation(){var t;return(t=this._inputManager)==null?void 0:t.latestPointerLocation}get multiTouchActive(){var t;return((t=this._inputManager)==null?void 0:t.multiTouchActive)??!1}isModifierKeyDown(t){var r;return((r=this._inputManager)==null?void 0:r.isModifierKeyDown(t))??!1}_disconnect(){this.view.viewEvents.disconnect(),this.removeHandles(jS),this._inputManager=Ne(this._inputManager)}_connect(){const t=this.view.surface,r=new VO(t,this.view.input),i=[new YH,new KH,new XH,new ZH(this.view.navigation),new WH],s=new yr({eventSource:r,recognizers:i}),n=new DB(this.view,["primary"]),o=new FB(this.view,["secondary"]);s.installHandlers("prevent-context-menu",[new BH],hn.INTERNAL),s.installHandlers("navigation",[new NH(this.view),new MH(this.view),new kH(this.view),new IS(this.view),new IS(this.view,[Qh.counter]),n,new OH(this.view,Qh.pan),new IH(this.view,Qh.zoom),new CH(this.view,Qh.rotate),o,new LB(this.view,"touch")],hn.INTERNAL),this.view.viewEvents.connect(s),this._source=r,this._inputManager=s,this.addHandles([Q(()=>{var a,l;return(l=(a=this.view)==null?void 0:a.navigation)==null?void 0:l.browserTouchPanEnabled},a=>{this._source&&(this._source.browserTouchPanningEnabled=!a)},Tt),Q(()=>{const{actionMap:a}=this.view.navigation;return{panActions:CS("pan",a),rotateActions:CS("rotate",a)}},({panActions:a,rotateActions:l})=>{n.pointerActions=a,o.pointerActions=l},Gt)],jS)}get test(){}};c([d()],ao.prototype,"view",void 0),c([d()],ao.prototype,"latestPointerType",null),c([d()],ao.prototype,"latestPointerLocation",null),c([d()],ao.prototype,"multiTouchActive",null),ao=c([S("esri.views.2d.input.MapViewInputManager")],ao);const eq=ao,GS=160;let qu=class extends W{constructor(){super(...arguments),this._timer=void 0}get stationary(){return!this._timer}flip(){this._timestamp=performance.now(),this._timer==null&&(this._timer=setInterval(()=>{performance.now()-this._timestamp>=GS&&this.clear()},GS))}clear(){this._timer&&(clearInterval(this._timer),this._timer=void 0)}};c([d()],qu.prototype,"_timer",void 0),c([d()],qu.prototype,"stationary",null),qu=c([S("esri.views.2d.support.StationaryManager")],qu);const tq=e=>{let t=class extends e{constructor(...r){super(...r),this.fullOpacity=1,this.stateManager=new gt({constraints:new OS({view:this})}),this.goToManager=new tp({view:this}),this.stationaryManager=new qu,this.mapViewNavigation=null,this.renderingOptions={samplingMode:"dynamic",edgeLabelsVisible:!1,labelsAnimationTime:0,labelCollisionsEnabled:!1},this.frameTask=new CB(this),this.inputManager=new eq({view:this}),this.viewEvents=new OP(this),this.padding={top:0,right:0,bottom:0,left:0},this.addHandles([Q(()=>this.viewpoint,()=>this.stationaryManager.flip(),bn),this.on("resize",i=>this.stateManager.resize(i.width,i.height))])}get constraintsInfo(){return{lods:null,spatialReference:null}}get extent(){var r;return((r=this.stateManager)==null?void 0:r.extent)??null}set extent(r){this.stateManager.extent=r}get state(){return this.stateManager.state}get interacting(){return this.navigating}get stationary(){return!this.animation&&!this.navigating&&!this.resizing&&this.stationaryManager.stationary}set animation(r){const i=this._get("animation");if(r===i)return;if(i&&i.stop(),r!==this.animationManager.animation&&this.animationManager.stop(),!r||r.isFulfilled())return void this._set("animation",null);this._set("animation",r);const s=()=>{var n;this.destroyed||r===this._get("animation")&&(this._set("animation",null),(n=this.frameTask)==null||n.requestFrame())};r.when(s,s)}get constraints(){var r;return(r=this.stateManager)==null?void 0:r.constraints}set constraints(r){r.view=this;const i=this.stateManager.constraints;this.stateManager.constraints=r,i==null||i.destroy()}get padding(){var r;return(r=this.stateManager)==null?void 0:r.padding}set padding(r){this.stateManager&&(this.stateManager.padding=r)}get resizeAlign(){return this.stateManager.resizeAlign}set resizeAlign(r){this.stateManager.resizeAlign=r}get rotation(){return this.stateManager.rotation??0}set rotation(r){const{rotationEnabled:i}=this.constraints;this.constraints.rotationEnabled=!0,this.stateManager.rotation=r,this.constraints.rotationEnabled=i}get viewpoint(){return this.stateManager.viewpoint??null}set viewpoint(r){this.stateManager.viewpoint=r,this.frameTask.requestFrame()}on(r,i,s,n){return this.inputManager&&this.viewEvents.on(r,i,s,n)||super.on(r,i)}hasEventListener(r){return super.hasEventListener(r)||this.viewEvents.hasHandler(r)}goTo(r,i){return this.goToManager.goTo(r,i)}};return c([d({readOnly:!0})],t.prototype,"animationManager",void 0),c([d({readOnly:!0})],t.prototype,"fullOpacity",void 0),c([d()],t.prototype,"stateManager",void 0),c([d()],t.prototype,"constraintsInfo",null),c([d()],t.prototype,"extent",null),c([d()],t.prototype,"goToManager",void 0),c([d({readOnly:!0})],t.prototype,"state",null),c([d({readOnly:!0})],t.prototype,"mapViewNavigation",void 0),c([d()],t.prototype,"renderingOptions",void 0),c([d({readOnly:!0})],t.prototype,"interacting",null),c([d()],t.prototype,"stationary",null),c([d()],t.prototype,"animation",null),c([d({type:OS})],t.prototype,"constraints",null),c([d({readOnly:!0})],t.prototype,"inputManager",void 0),c([d()],t.prototype,"padding",null),c([d()],t.prototype,"resizeAlign",null),c([d()],t.prototype,"rotation",null),c([d({readOnly:!0})],t.prototype,"viewEvents",void 0),c([d({type:Pr})],t.prototype,"viewpoint",null),t=c([S("esri.views.Viewport2DMixin")],t),t};let zS=class{constructor(t){this._view=t,this.viewpoint=new Pr({targetGeometry:new re,scale:0,rotation:0})}get view(){return this._view}get size(){const[t,r]=this._view.size;return Math.sqrt(t*t+r*r)}get scale(){return this.viewpoint.scale}get rotation(){return this.viewpoint.rotation}get center(){return this.viewpoint.targetGeometry}get scaleToResolutionFactor(){return hO(this.center.spatialReference)}pixelsPerPanAtZoom(t){return 1/(t*this.scaleToResolutionFactor)}zoomAtPixelsPerPan(t){return 1/(t*this.scaleToResolutionFactor)}pixelsPerRotate(){return this.size/2}compareTo(t,r){r.pan=g3(this.center,t.center);let i=Math.abs(t.rotation-this.rotation);i=i>=180?360-i:i,r.rotate=Hf(i),r.sourceZoom=this.scale,r.targetZoom=t.scale}interpolate(t,r,i){const{pan:s,rotate:n,zoom:o,zoomOffset:a}=i,{center:l}=this;l.spatialReference=t.center.spatialReference,l.x=hu(t.center.x,r.center.x,s),l.y=hu(t.center.y,r.center.y,s),this.viewpoint.scale=hu(t.scale,r.scale+a,o);let h=t.rotation;const p=r.rotation;Math.abs(p-h)>=180&&(h+=360*(h<p?1:-1)),this.viewpoint.rotation=hu(h,p,n)}copyFrom(t){St(this.viewpoint,t.viewpoint),this._view=t.view}};function Wl(e,t,r,i){const s=3*e,n=3*(r-e)-s,o=1-s-n,a=3*t,l=3*(i-t)-a,h=1-a-l;function p(_){return((o*_+n)*_+s)*_}function f(_){return((h*_+l)*_+a)*_}function m(_){return(3*o*_+2*n)*_+s}function y(_,v){let w,b,M,$,E,P;for(M=_,P=0;P<8;P++){if($=p(M)-_,Math.abs($)<v)return M;if(E=m(M),Math.abs(E)<1e-6)break;M-=$/E}if(w=0,b=1,M=_,M<w)return w;if(M>b)return b;for(;w<b;){if($=p(M),Math.abs($-_)<v)return M;_>$?w=M:b=M,M=.5*(b-w)+w}return M}return function(_,v=1e-6){return f(y(_,v))}}const Sr={};Sr.ease=Wl(.25,.1,.25,1),Sr.linear=Wl(0,0,1,1),Sr.easeIn=Sr["ease-in"]=Wl(.42,0,1,1),Sr.easeOut=Sr["ease-out"]=Wl(0,0,.58,1),Sr.easeInOut=Sr["ease-in-out"]=Wl(.42,0,.58,1);const rq=e=>e,vm=e=>e*e,Kv=e=>1-vm(1-e),iq=e=>e<.5?vm(2*e)/2:(Kv(2*(e-.5))+1)/2,Xv=e=>e*e*e,qO=e=>1-Xv(1-e),sq=e=>e<.5?Xv(2*e)/2:(qO(2*(e-.5))+1)/2,Qv=e=>e*e*e*e,WO=e=>1-Qv(1-e),nq=e=>e<.5?Qv(2*e)/2:(WO(2*(e-.5))+1)/2,ew=e=>e*e*e*e*e,ZO=e=>1-ew(1-e),oq=e=>e<.5?ew(2*e)/2:(ZO(2*(e-.5))+1)/2,tw=e=>1-Math.cos(e*Math.PI/2),JO=e=>1-tw(1-e),aq=e=>e<.5?tw(2*e)/2:(JO(2*(e-.5))+1)/2,rw=e=>2**(10*(e-1)),iw=e=>1-rw(1-e),lq=e=>e<.5?rw(2*e)/2:(iw(2*(e-.5))+1)/2,sw=e=>-(Math.sqrt(1-e*e)-1),YO=e=>1-sw(1-e),uq=e=>e<.5?sw(2*e)/2:(YO(2*(e-.5))+1)/2;function Ir(e){const t=2*(e-Math.sqrt((e-1)*e)),r=t/2/e;return i=>i<r?e*i*i:t*i-t+1}function Rr(e,t){return(r,i)=>r<t?t*e(r/t,i):1-e((1-r)/(1-t),i)*(1-t)}const cq=Rr(Ir(1),1),hq=Rr(Ir(1),0),j1=Rr(Ir(1),.5),dq=Rr(Ir(2),1),pq=Rr(Ir(2),0),fq=Rr(Ir(2),.5),mq=Rr(Ir(3),1),yq=Rr(Ir(3),0),gq=Rr(Ir(3),.5),_q=Rr(Ir(4),1),vq=Rr(Ir(4),0),wq=Rr(Ir(4),.5),VS={linear:rq,"in-quad":vm,"out-quad":Kv,"in-out-quad":iq,"in-coast-quad":cq,"out-coast-quad":hq,"in-out-coast-quad":j1,"in-cubic":Xv,"out-cubic":qO,"in-out-cubic":sq,"in-coast-cubic":dq,"out-coast-cubic":pq,"in-out-coast-cubic":fq,"in-quart":Qv,"out-quart":WO,"in-out-quart":nq,"in-coast-quart":mq,"out-coast-quart":yq,"in-out-coast-quart":gq,"in-quint":ew,"out-quint":ZO,"in-out-quint":oq,"in-coast-quint":_q,"out-coast-quint":vq,"in-out-coast-quint":wq,"in-sine":tw,"out-sine":JO,"in-out-sine":aq,"in-expo":rw,"out-expo":iw,"in-out-expo":lq,"in-circ":sw,"out-circ":YO,"in-out-circ":uq,ease:e=>Sr.ease(e),"ease-in":e=>Sr.easeIn(e),"ease-out":e=>Sr.easeOut(e),"ease-in-out":e=>Sr.easeInOut(e)};let bq=class{constructor(){this.pan=0,this.rotate=0,this.fov=0,this.sourceZoom=0,this.targetZoom=0}};const of={desiredScreenFlow:2,minDuration:500,maxDuration:8e3},KO={maxDuration:4e3};let Sq=class XO{constructor(t){this._createCamera=t,this.compared=new bq,this.segmentStart=0,this.segmentEnd=1,this.settings={desiredScreenFlow:of.desiredScreenFlow},this.source=t(),this.target=t()}clone(){const t=new XO(this._createCamera);return t.copyFrom(this),t}copyFrom(t){this.update(t.source,t.target,t.settings)}update(t,r,i){this.source!==t&&this.source.copyFrom(t),this.target!==r&&this.target.copyFrom(r),this.source.compareTo(this.target,this.compared),this.settings.desiredScreenFlow=i.desiredScreenFlow??of.desiredScreenFlow,this.desiredPixelFlow=this.settings.desiredScreenFlow*this.target.size,this.halfWindowSize=this.target.size/2}halfWindowPanAtZoom(t){const r=this.target.pixelsPerPanAtZoom(t);return this.halfWindowSize/r}get hasZoom(){return Math.abs(this.compared.sourceZoom-this.compared.targetZoom)>1e-5}get hasPan(){return this.compared.pan>Ht()}get hasFov(){return Math.abs(this.compared.fov)>Ht()}get hasRotate(){return this.compared.rotate>Ht()}},Tq=class{constructor(){this.pan=0,this.rotate=0,this.zoom=0,this.fov=0,this.zoomOffset=0}},$q=class{constructor(){this.segments=new Array}get time(){return this.segments.reduce((t,r)=>t+r.time,0)}interpolateComponentsAt(t,r){t=Math.min(Math.max(t,0),1),t*=this.time;let i=0,s=0;const n=this.definition,o=this.segments.reduce((a,l)=>a||l.definition.hasZoom,!1);for(let a=0;a<this.segments.length;a++){const l=this.segments[a],h=l.definition;if(t<=l.time||a===this.segments.length-1){if(this.segmentInterpolateComponentsAt(l,l.time===0?0:t/l.time,r),n.hasPan&&!isNaN(r.pan)&&isFinite(n.compared.pan)?r.pan=(i+h.compared.pan*r.pan)/n.compared.pan:r.pan=1,n.hasRotate&&!isNaN(r.rotate)&&isFinite(n.compared.rotate)?r.rotate=(s+h.compared.rotate*r.rotate)/n.compared.rotate:r.rotate=1,o&&!isNaN(r.zoom)&&isFinite(h.compared.targetZoom)){const{sourceZoom:p,targetZoom:f}=h.compared,m=r.zoom*(f-p)+p,y=this.segments[0].definition.compared.sourceZoom,_=this.segments[this.segments.length-1].definition.compared.targetZoom,v=Math.abs(f-y)>Math.abs(p-y)?f:p;r.zoomOffset=v-_,r.zoom=(m-y)/(v-y)}else r.zoom=1;return r}t-=l.time,i+=h.compared.pan,s+=h.compared.rotate}}segmentInterpolateComponentsAt(t,r,i){t.interpolateComponentsAt(r,i)}},by=class{get time(){return this._time}constructor(t){t&&this.update(t)}update(t){t&&(this.definition?this.definition.copyFrom(t):this.definition=t.clone()),this._updatePrecomputedVariables(),this._updatePixelFlow()}_updatePrecomputedVariables(){const t=this.definition,r=t.compared,i=r.sourceZoom,s=r.targetZoom;this._zoomSign=i>s?1:-1,this._panPixelsAtSource=r.pan*t.source.pixelsPerPanAtZoom(i);const n=(t.source.pixelsPerRotate()+t.target.pixelsPerRotate())/2;this._rotatePixels=r.rotate*n}_updatePixelFlow(){const t=this.definition.compared.sourceZoom,r=this.definition.compared.targetZoom,{hasZoom:i,hasPan:s,hasRotate:n}=this.definition;let o=0,a=0;i&&(s&&(o=(r/t-1)/(-1/(this._zoomSign*this.definition.halfWindowSize)*Math.LN2*this._panPixelsAtSource)),n&&(a=this._zoomSign*(Math.log(t/r)/Math.LN2)*this.definition.halfWindowSize/this._rotatePixels)),this._zoomPixelFlow=0,this._panPixelFlow=0,this._rotatePixelFlow=0;const l=this.definition.desiredPixelFlow;if(i&&s&&n){const h=o+a+o*a;this._zoomPixelFlow=o*a/h*l,this._panPixelFlow=a/h*l,this._rotatePixelFlow=o/h*l}else if(i&&s){const h=1+o;this._zoomPixelFlow=o/h*l,this._panPixelFlow=1/h*l}else if(i&&n){const h=1+a;this._zoomPixelFlow=a/h*l,this._rotatePixelFlow=1/h*l}else if(s&&n){const h=this._panPixelsAtSource/this._rotatePixels,p=1+h;this._panPixelFlow=h/p*l,this._rotatePixelFlow=1/p*l}else s?this._panPixelFlow=l:i?this._zoomPixelFlow=l:n&&(this._rotatePixelFlow=l);if(this._time=Math.max(this.rotateTime,this.zoomTime,this.panTime),this.fovTime>this._time){const h=this.fovTime/this._time;this._time=this.fovTime,this._zoomPixelFlow/=h,this._panPixelFlow/=h,this._rotatePixelFlow/=h}}get rotateTime(){return this.definition.hasRotate?this._rotatePixels/this._rotatePixelFlow:0}get zoomTime(){return this.definition.hasZoom?this._zoomSign*(Math.log(this.definition.compared.sourceZoom/this.definition.compared.targetZoom)/Math.LN2)*this.definition.halfWindowSize/this._zoomPixelFlow:0}get fovTime(){return this.definition.hasFov?Math.abs(this.definition.compared.fov)/Eq:0}get panTime(){if(!this.definition.hasPan)return 0;if(this.definition.hasZoom){const t=-1/(this._zoomSign*this.definition.halfWindowSize)*Math.LN2,r=t*this._panPixelsAtSource;return Math.log(r*(this._zoomPixelFlow/this._panPixelFlow)+1)/(t*this._zoomPixelFlow)}return this._panPixelsAtSource/this._panPixelFlow}_interpolateComponentsZoom(t){if(t===0||t===1)return t;if(this.definition.hasZoom){const r=this.definition.compared.sourceZoom,i=this.definition.compared.targetZoom;return(r*(r/i)**-t-r)/(i-r)}return t}_interpolateComponentsFov(t){if(t===0)return this.definition.segmentStart;if(t===1)return this.definition.segmentEnd;if(this.definition.hasFov){const{segmentStart:r,segmentEnd:i}=this.definition;return r+t*(i-r)}return this.definition.segmentStart}_interpolateComponentsPan(t){if(t===0||t===1)return t;if(this.definition.hasPan&&this.definition.hasZoom){const r=-1/(this._zoomSign*this.definition.halfWindowSize)*this._zoomPixelFlow;return 1/this._panPixelsAtSource*(this._panPixelFlow*(2**(r*t*this._time)-1))/(r*Math.LN2)}return t}_interpolateComponentsRotate(t){return t}interpolateComponentsAt(t,r){t=Math.min(Math.max(t,0),1),r.zoom=this._interpolateComponentsZoom(t),r.pan=this._interpolateComponentsPan(t),r.rotate=this._interpolateComponentsRotate(t),r.zoomOffset=0,r.fov=this._interpolateComponentsFov(t)}};const Eq=Hf(45);function Mq(e,t,r){const i=t-e.compared.sourceZoom,s=e.halfWindowPanAtZoom(i);return-e.halfWindowSize*(r.ascensionFactor*Math.LN2*e.compared.pan+s)*Math.log(e.compared.sourceZoom/t)/(e.desiredPixelFlow*Math.LN2*s)}function xq(e,t,r){const i=1/t,s=Math.log(e.compared.sourceZoom*i),n=1/e.desiredPixelFlow,o=1/Math.LN2,a=t-e.compared.sourceZoom,l=1/a,h=(r.ascensionFactor*Math.LN2*e.compared.pan+e.halfWindowPanAtZoom(a))/e.halfWindowPanAtZoom(1);return e.halfWindowSize*i*n*o*l*h-e.halfWindowSize*s*n*o*l+e.halfWindowSize*s*n*o*h/(a*a)}function Aq(e,t,r){const i=t-e.compared.sourceZoom,s=1/i,n=1/t,o=Math.log(e.compared.sourceZoom*n),a=(r.ascensionFactor*Math.LN2*e.compared.pan+e.halfWindowPanAtZoom(i))/e.halfWindowPanAtZoom(1);return e.halfWindowSize*s*(-2*s*n*a+2*s*o+2*n-2*o*a/(i*i)-a/(t*t))/(e.desiredPixelFlow*Math.LN2)}function Pq(e,t){return-e.halfWindowSize*Math.log(e.compared.sourceZoom/t)/(e.desiredPixelFlow*Math.LN2)}function Oq(e,t){return e.halfWindowSize/(t*e.desiredPixelFlow*Math.LN2)}function Cq(e,t){return-e.halfWindowSize/(t*t*e.desiredPixelFlow*Math.LN2)}function Iq(e,t,r){return-e.compared.pan*e.halfWindowSize*(r.ascensionFactor+r.descensionFactor-1)/(e.desiredPixelFlow*e.halfWindowPanAtZoom(t))}function Rq(e,t,r){return e.compared.pan*e.halfWindowSize*(r.ascensionFactor+r.descensionFactor-1)/(e.desiredPixelFlow*e.halfWindowPanAtZoom(t*t))}function kq(e,t,r){return-2*e.compared.pan*e.halfWindowSize*(r.ascensionFactor+r.descensionFactor-1)/(e.desiredPixelFlow*e.halfWindowPanAtZoom(t*t*t))}function Nq(e,t,r){return e.halfWindowSize*(-e.halfWindowPanAtZoom(t)-r.descensionFactor*Math.LN2*e.compared.pan+e.halfWindowPanAtZoom(e.compared.targetZoom))*Math.log(t/e.compared.targetZoom)/(e.desiredPixelFlow*Math.LN2*e.halfWindowPanAtZoom(-t+e.compared.targetZoom))}function Lq(e,t,r){const i=Math.log(t/e.compared.targetZoom),s=1/e.desiredPixelFlow,n=1/Math.LN2,o=-t+e.compared.targetZoom,a=1/o,l=(-e.halfWindowPanAtZoom(t)-r.descensionFactor*Math.LN2*e.compared.pan+e.halfWindowPanAtZoom(e.compared.targetZoom))/e.halfWindowPanAtZoom(1);return-e.halfWindowSize*i*s*n*a+e.halfWindowSize*i*s*n*l/(o*o)+e.halfWindowSize*s*n*a*l/t}function Dq(e,t,r){const i=t-e.compared.targetZoom,s=1/i,n=1/t,o=Math.log(t/e.compared.targetZoom),a=(e.halfWindowPanAtZoom(t)+r.descensionFactor*Math.LN2*e.compared.pan-e.halfWindowPanAtZoom(e.compared.targetZoom))/e.halfWindowPanAtZoom(1);return e.halfWindowSize*s*(-2*s*n*a-2*s*o+2*n+2*o*a/(i*i)-a/(t*t))/(e.desiredPixelFlow*Math.LN2)}function Fq(e,t){return e.halfWindowSize*Math.log(t/e.compared.targetZoom)/(e.desiredPixelFlow*Math.LN2)}function Uq(e,t){return e.halfWindowSize/(t*e.desiredPixelFlow*Math.LN2)}function jq(e,t){return-e.halfWindowSize/(t*t*e.desiredPixelFlow*Math.LN2)}function Gq(e){const t=e.compared.sourceZoom-e.compared.targetZoom;if(t===0)return e.compared.pan*e.halfWindowSize/(e.desiredPixelFlow*e.halfWindowPanAtZoom(e.compared.sourceZoom));const r=Math.LN2*e.compared.pan,i=t,s=e.halfWindowPanAtZoom(i),n=e.halfWindowSize*Math.log(e.compared.sourceZoom/e.compared.targetZoom)/(e.desiredPixelFlow*Math.LN2*s);return e.compared.sourceZoom<=e.compared.targetZoom?n*(r-s):n*(r+s)}function zq(e,t){let r=Vq(e,t);const i={ascensionFactor:t.ascensionFactor!=null?t.ascensionFactor:.5,descensionFactor:t.descensionFactor!=null?t.descensionFactor:.5},s=i.ascensionFactor===0,n=i.descensionFactor===0,o=s?Pq:Mq,a=s?Oq:xq,l=s?Cq:Aq,h=n?Fq:Nq,p=n?Uq:Lq,f=n?jq:Dq,m=E=>o(e,E,i)+Iq(e,E,i)+h(e,E,i),y=E=>a(e,E,i)+Rq(e,E,i)+p(e,E,i),_=E=>l(e,E,i)+kq(e,E,i)+f(e,E,i);let v=m(r);const w=Gq(e);let b;const M=t.maximumIterations||20,$=t.maximumDistance!=null?t.maximumDistance:1/0;for(b=0;b<M;b++){const E=t.desiredSlope??1e-6;let P=y(r);Math.abs(P)>E&&(P+=E);const O=P/_(r);if(isNaN(O)||r>=$&&O<0){if(!isFinite($))return null;r=$,v=m(r);break}if(r-=O,r<e.compared.sourceZoom||r<e.compared.targetZoom)return null;const L=m(r);if(Math.abs(L-v)/v<=.005)break;v=L}return v>w*(1-.3)||r<e.compared.sourceZoom||r<e.compared.targetZoom?null:r}function Vq(e,t){const r=Math.max(e.compared.sourceZoom,e.compared.targetZoom),i=e.source.zoomAtPixelsPerPan(e.desiredPixelFlow/e.compared.pan)/2;return i<r?t.maximumDistance!=null?r+(t.maximumDistance-r)/2:1.5*r:t.maximumDistance?Math.min(t.maximumDistance,i):i}let Bq=class extends $q{constructor(t,r){super(),this._preallocSegments=[new by,new by,new by],this._ascensionSegment=null,this._descensionSegment=null,this.update(t,r)}update(t,r){if(!t)return;this.definition?this.definition.copyFrom(t):this.definition=t.clone();const i=r!=null&&r.apex?zq(t,r.apex):null;this.segments.length=0,this._ascensionSegment=null,this._descensionSegment=null,i?this._updateWithApex(i,r==null?void 0:r.apex):this._updateWithoutApex()}segmentInterpolateComponentsAt(t,r,i){t.interpolateComponentsAt(r,i),t===this._ascensionSegment?i.zoom=Kv(i.zoom):t===this._descensionSegment&&(i.zoom=vm(i.zoom))}_updateWithApex(t,r){const[i,s,n]=this._preallocSegments,o=(r==null?void 0:r.ascensionFactor)??.5,a=Math.min(1-o,(r==null?void 0:r.ascensionFactor)!=null&&r.descensionFactor!=null?r.descensionFactor:.5),l=1-o-a;i.definition?i.definition.copyFrom(this.definition):i.definition=this.definition.clone(),i.definition.compared.targetZoom=t,i.definition.compared.pan=this.definition.compared.pan*o,i.definition.compared.rotate=this.definition.compared.rotate*o,i.definition.segmentEnd=o,i.update(),this._ascensionSegment=i,this.segments.push(i),l>0&&(s.definition?s.definition.copyFrom(this.definition):s.definition=this.definition.clone(),s.definition.copyFrom(this.definition),s.definition.compared.sourceZoom=t,s.definition.compared.targetZoom=t,s.definition.compared.pan=this.definition.compared.pan*l,s.definition.compared.rotate=this.definition.compared.rotate*l,s.definition.segmentStart=i.definition.segmentEnd,s.definition.segmentEnd=i.definition.segmentEnd+l,s.update(),this.segments.push(s)),n.definition?n.definition.copyFrom(this.definition):n.definition=this.definition.clone(),n.definition.compared.sourceZoom=t,n.definition.compared.pan=this.definition.compared.pan*a,n.definition.compared.rotate=this.definition.compared.rotate*a,n.definition.segmentStart=o+l,n.update(),this._descensionSegment=n,this.segments.push(n)}_updateWithoutApex(){const[t]=this._preallocSegments;t.update(this.definition),this.segments.push(t)}};const Hq=new Tq;let qq=class{get time(){return this._time}get isLinear(){return this.path.segments.length===1}constructor(t){this._time=0,this._easing=j1,this.definition=new Sq(t),this.path=new Bq}update(t,r,i){this.definition.update(t,r,i),this.path.update(this.definition,i),this._time=this._applyTimeSettings(vR(isFinite(this.path.time)?this.path.time:0),i),this._easing=i.easing??(this._time>=1e3?j1:iw)}cameraAt(t,r){t=Math.min(Math.max(0,t),1),t=this._normalizedEasing(t);const i=this.path.interpolateComponentsAt(t,Hq);r.interpolate(this.definition.source,this.definition.target,i)}_normalizedEasing(t){const r=this._easing(0,this._time),i=this._easing(1,this._time);return(this._easing(t,this._time)-r)/(i-r)}_applyTimeSettings(t,r){const i=r.speedFactor!=null?r.speedFactor:1,s=r.minDuration??of.minDuration/i,n=r.maxDuration??of.maxDuration/i;return t=r.duration!=null?r.duration:Math.min(Math.max(t/i,s),n)}};const Wq=2e3,Zq=64;let Jq=class{constructor(t){this._view=t,this._animation=new qq(()=>new zS(this._view)),this._current=new zS(this._view)}get _source(){return this._animation.definition.source}get _target(){return this._animation.definition.target}get duration(){return this._animation.time}get animation(){return this._animation}update(t,r,i={}){St(this._current.viewpoint,t),St(this._source.viewpoint,t),St(this._target.viewpoint,r),this._animation.update(this._source,this._target,i)}applyRatio(t,r){this._animation.cameraAt(r,this._current),St(t,this._current.viewpoint)}},Ea=class extends W{constructor(t){super(t),this._animation=null,this._destinationViewState=new Yv,this.updateFunction=null,this.easing=VS.ease,this.viewpoint=new Pr({targetGeometry:new re,scale:0,rotation:0}),this._updateTask=il({postRender:this._postRender.bind(this)}),this._updateTask.pause(),this._transition=new Jq(t.view)}destroy(){this._updateTask=Ie(this._updateTask)}get animation(){return this._animation}set animation(t){this._animation=t,this.view.animation=t}animate(t,r,i){this.stop();const s=this.viewpoint;St(s,r);const n=t.target;this._transition.update(this.viewpoint,n,{apex:{maximumDistance:Math.min(Math.min(r.scale,n.scale)*Zq,this.view.constraints.effectiveMinScale),desiredSlope:5e-8},duration:i==null?void 0:i.duration,maxDuration:(i==null?void 0:i.animationMode)==="auto"?1/0:(i==null?void 0:i.maxDuration)??KO.maxDuration,speedFactor:i==null?void 0:i.speedFactor,easing:(typeof(i==null?void 0:i.easing)=="string"?VS[i.easing]:i==null?void 0:i.easing)||this.easing}),(i==null?void 0:i.animationMode)==="auto"&&(this._destinationViewState.copy(this.view.state),this._destinationViewState.viewpoint=n,Yq(this._transition.animation,i,this.view.state,this._destinationViewState)||this._transition.update(this.viewpoint,n,{duration:0}));const o=()=>{this.animation===t&&this._updateTask&&(t.state==="finished"&&(this._transition.applyRatio(this.viewpoint,1),this.view.state&&(this.view.state.viewpoint=this.viewpoint.clone())),this.animation=null,this.updateFunction=null)};return t.when(o,o),this._startTime=performance.now(),this._updateTask.resume(),this.animation=t,t}animateContinuous(t,r){this.stop(),this.updateFunction=r,this.viewpoint=t;const i=new N1({target:t.clone()}),s=()=>{this.animation===i&&this._updateTask&&(this.animation=null,this.updateFunction=null)};return i.when(s,s),this._startTime=performance.now(),this._updateTask.resume(),this.animation=i,i}stop(){this.animation&&(this.animation.stop(),this.animation=null,this.updateFunction=null)}_postRender(t){var i,s;const r=this.animation;if(r&&r.state!==N1.State.STOPPED){if(this.updateFunction)this.updateFunction(this.viewpoint,t.deltaTime),(i=this.animation)==null||i.update(this.viewpoint);else{const n=performance.now()-this._startTime,o=this._transition.duration,a=o>0?n/o:1,l=a>=1;this._transition.applyRatio(this.viewpoint,a),l&&((s=this.animation)==null||s.finish())}this.view.state&&(this.view.state.viewpoint=this.viewpoint.clone())}else this._updateTask.pause()}};function Yq(e,t,r,i){if((t==null?void 0:t.duration)!=null)return!0;const{time:s,isLinear:n}=e,o=(t==null?void 0:t.speedFactor)||1;if(s>((t==null?void 0:t.maxDuration)??KO.maxDuration/o))return!1;if(n){const l=Le(),h=ut(...i.toScreen(l,...r.center)),p=ut(...r.toScreen(l,...i.center)),f=p!=null&&p.x>-1*r.size[0]&&p.x<(1.5+.5)*r.size[0]&&p.y>-1*r.size[1]&&p.y<(1.5+.5)*r.size[1],m=h!=null&&h.x>-1*i.size[0]&&h.x<(1.5+.5)*i.size[0]&&h.y>-1*i.size[1]&&h.y<(1.5+.5)*i.size[1];if(s>Wq/o&&!f&&!m)return!1}return!0}c([d()],Ea.prototype,"easing",void 0),c([d()],Ea.prototype,"view",void 0),c([d()],Ea.prototype,"viewpoint",void 0),Ea=c([S("esri.views.2d.AnimationManager")],Ea);const Kq=Ea;function Me(){return Promise.all([N(()=>import("./webglDeps-DBdOE5NJ.js"),__vite__mapDeps([260,184,12,261,262,263])),N(()=>import("./mapViewDeps-BL38ngkY.js"),__vite__mapDeps([264,148,34,35,108,109,45,12,110,105,111,104,112,113,114,107,77,115,66,265,119,266,261,184,262,188,164,267,138,268,206,171,170,123,49,50,18,117,125,269,120,121,122,270,32,169,260,263,271,133,272,106,116,59,47,42,54,53,273,177,178,162,186,274,93,275,124,276,277,118,278,82,129,102,279,280,281,282,180,225,283,284]))])}const Zl=()=>Me().then(()=>N(()=>import("./TileLayerView2D-B5-adJpk.js"),__vite__mapDeps([285,148,34,35,104,105,113,108,109,45,12,110,111,112,114,107,77,115,66,270,32,268,206,267,262,184,138,171,170,123,49,50,169,271,266,261,188,164,265,119,18,117,125,133,272,106,116,59,47,42,54,53,93,120,121,122,177,178,162,278,82,129,102,286,287,282,288,250,289,280,281,290,291,225,292,293,294,295]))),kn=()=>Me().then(()=>N(()=>import("./FeatureLayerView2D-CB-Mj7aj.js").then(e=>e.F),__vite__mapDeps([296,268,206,49,45,12,50,229,197,198,199,151,141,200,18,201,115,66,202,104,105,140,203,58,116,297,211,298,299,47,42,57,288,250,281,108,109,110,111,112,113,114,107,77,261,184,282,267,262,138,171,170,123,265,119,266,188,164,117,125,133,235,33,34,35,269,300,132,130,228,222,292,295,290]))),BS={"base-dynamic":()=>Me().then(()=>N(()=>import("./BaseDynamicLayerView2D-DV36HrXx.js"),__vite__mapDeps([301,302,267,107,77,262,184,12,138,268,206,171,105,170,123,49,45,50,287,266,261,188,164,119,288,250,303,290]))),"base-tile":Zl,"bing-maps":Zl,catalog:()=>Me().then(()=>N(()=>import("./CatalogLayerView2D-3qoYsA4I.js"),__vite__mapDeps([304,288,268,206,250]))),"catalog-dynamic-group":()=>Me().then(()=>N(()=>import("./CatalogDynamicGroupLayerView2D-BnL_XOez.js"),__vite__mapDeps([305,288,268,206,250]))),"catalog-footprint":()=>Me().then(()=>N(()=>import("./CatalogFootprintLayerView2D-BHr04P2u.js"),__vite__mapDeps([306,296,268,206,49,45,12,50,229,197,198,199,151,141,200,18,201,115,66,202,104,105,140,203,58,116,297,211,298,299,47,42,57,288,250,281,108,109,110,111,112,113,114,107,77,261,184,282,267,262,138,171,170,123,265,119,266,188,164,117,125,133,235,33,34,35,269,300,132,130,228,222,292,295,290]))),csv:kn,"geo-rss":()=>Me().then(()=>N(()=>import("./GeoRSSLayerView2D-DgkKIB2A.js"),__vite__mapDeps([307,198,199,151,141,200,18,201,115,66,232,208,209,140,10,11,59,111,104,105,33,34,35,202,203,211,288,268,206,250,279,280,281,108,109,45,12,110,112,113,114,107,77,261,184,282,267,262,138,171,170,123,49,50,265,119,266,188,164,117,125,278,270,148,32,106,116,47,42,54,53,82,129,102]))),feature:kn,geojson:kn,parquet:kn,graphics:()=>Me().then(()=>N(()=>import("./GraphicsLayerView2D-DOSsT8VL.js"),__vite__mapDeps([308,288,268,206,250,279,280,281,108,109,45,12,110,105,111,104,112,113,114,107,77,115,66,261,184,282,267,262,138,171,170,123,49,50,265,119,266,188,164,18,117,125,278,59,270,148,34,35,32,106,116,47,42,54,53,82,129,102]))),group:()=>Me().then(()=>N(()=>import("./GroupLayerView2D-BX1NFs7s.js"),__vite__mapDeps([309,288,268,206,250]))),imagery:()=>Me().then(()=>N(()=>import("./ImageryLayerView2D-BIHGtxCA.js"),__vite__mapDeps([310,311,184,12,77,146,267,107,262,138,268,206,171,105,170,123,49,45,50,288,250,278,59,108,109,110,111,104,112,113,114,115,66,270,148,34,35,32,106,116,47,42,54,53,265,119,266,261,188,164,18,117,125,82,129,102,289,280,281,282,302,287,303,150,297,295,290]))),"imagery-tile":()=>Me().then(()=>N(()=>import("./ImageryTileLayerView2D-D6RSTCZP.js"),__vite__mapDeps([312,313,311,184,12,77,146,267,107,262,138,268,206,171,105,170,123,49,45,50,288,250,314,276,122,261,282,315,150,297,295,290]))),kml:()=>Me().then(()=>N(()=>import("./KMLLayerView2D-jGPtHcm5.js"),__vite__mapDeps([316,317,232,208,209,199,151,141,200,18,201,115,66,140,10,11,59,111,104,105,33,34,35,198,202,203,211,287,268,206,266,261,184,12,262,188,164,119,302,267,107,77,138,171,170,123,49,45,50,288,250,279,280,281,108,109,110,112,113,114,282,265,117,125,278,270,148,32,106,116,47,42,54,53,82,129,102,150,276,122,273,260,263,177,178,162,272,186,314]))),"knowledge-graph":()=>Me().then(()=>N(()=>import("./KnowledgeGraphLayerView2D-CUBYFenN.js"),__vite__mapDeps([318,288,268,206,250]))),"link-chart":()=>Me().then(()=>N(()=>import("./KnowledgeGraphLayerView2D-CUBYFenN.js"),__vite__mapDeps([318,288,268,206,250]))),"knowledge-graph-sublayer":kn,"map-image":()=>Me().then(()=>N(()=>import("./MapImageLayerView2D-C5VU__nm.js"),__vite__mapDeps([319,302,267,107,77,262,184,12,138,268,206,171,105,170,123,49,45,50,287,266,261,188,164,119,288,250,278,59,108,109,110,111,104,112,113,114,115,66,270,148,34,35,32,106,116,47,42,54,53,265,18,117,125,82,129,102,289,280,281,282,303,320,225,292,294,297,290,291,293,295]))),"map-notes":()=>Me().then(()=>N(()=>import("./MapNotesLayerView2D-BeFHzEOm.js"),__vite__mapDeps([321,288,268,206,250,279,280,281,108,109,45,12,110,105,111,104,112,113,114,107,77,115,66,261,184,282,267,262,138,171,170,123,49,50,265,119,266,188,164,18,117,125,278,59,270,148,34,35,32,106,116,47,42,54,53,82,129,102]))),media:()=>Me().then(()=>N(()=>import("./MediaLayerView2D-DuEftcZk.js"),__vite__mapDeps([322,323,129,82,198,199,151,141,200,18,201,115,66,148,34,35,104,105,113,108,109,45,12,110,111,112,114,107,77,270,32,268,206,267,262,184,138,171,170,123,49,50,169,271,266,261,188,164,265,119,117,125,133,272,106,116,59,47,42,54,53,93,120,121,122,177,178,162,278,102,275,124,324,277,288,250]))),"ogc-feature":()=>Me().then(()=>N(()=>import("./OGCFeatureLayerView2D-D1dCdbTS.js"),__vite__mapDeps([325,296,268,206,49,45,12,50,229,197,198,199,151,141,200,18,201,115,66,202,104,105,140,203,58,116,297,211,298,299,47,42,57,288,250,281,108,109,110,111,112,113,114,107,77,261,184,282,267,262,138,171,170,123,265,119,266,188,164,117,125,133,235,33,34,35,269,300,132,130,228,222,292,295,290]))),"open-street-map":Zl,"oriented-imagery":kn,route:()=>Me().then(()=>N(()=>import("./RouteLayerView2D-CbAujnmV.js"),__vite__mapDeps([326,327,328,288,268,206,250,279,280,281,108,109,45,12,110,105,111,104,112,113,114,107,77,115,66,261,184,282,267,262,138,171,170,123,49,50,265,119,266,188,164,18,117,125,278,59,270,148,34,35,32,106,116,47,42,54,53,82,129,102]))),stream:()=>Me().then(()=>N(()=>import("./StreamLayerView2D-C2Ruuqu_.js"),__vite__mapDeps([329,211,296,268,206,49,45,12,50,229,197,198,199,151,141,200,18,201,115,66,202,104,105,140,203,58,116,297,298,299,47,42,57,288,250,281,108,109,110,111,112,113,114,107,77,261,184,282,267,262,138,171,170,123,265,119,266,188,164,117,125,133,235,33,34,35,269,300,132,130,228,222,292,295,290]))),"subtype-group":()=>Me().then(()=>N(()=>import("./SubtypeGroupLayerView2D-D64TYauQ.js"),__vite__mapDeps([330,296,268,206,49,45,12,50,229,197,198,199,151,141,200,18,201,115,66,202,104,105,140,203,58,116,297,211,298,299,47,42,57,288,250,281,108,109,110,111,112,113,114,107,77,261,184,282,267,262,138,171,170,123,265,119,266,188,164,117,125,133,235,33,34,35,269,300,132,130,228,222,292,295,290]))),tile:Zl,"vector-tile":()=>Me().then(()=>N(()=>import("./VectorTileLayerView2D-CqZ2iZng.js"),__vite__mapDeps([331,104,105,169,114,93,12,112,113,10,11,110,184,170,267,107,77,262,138,268,206,171,123,49,45,50,282,62,172,173,148,34,35,288,250,290]))),video:()=>Me().then(()=>N(()=>import("./VideoLayerView2D-CYEB1wpc.js"),__vite__mapDeps([332,333,221,15,222,206,237,17,18,334,324,138,267,107,77,262,184,12,268,171,105,170,123,49,45,50,265,108,109,110,111,104,112,113,114,115,66,119,266,261,188,164,117,125,277,288,250,279,280,281,282,278,59,270,148,34,35,32,106,116,47,42,54,53,82,129,102]))),wcs:()=>Me().then(()=>N(()=>import("./ImageryTileLayerView2D-D6RSTCZP.js"),__vite__mapDeps([312,313,311,184,12,77,146,267,107,262,138,268,206,171,105,170,123,49,45,50,288,250,314,276,122,261,282,315,150,297,295,290]))),"web-tile":Zl,wfs:kn,wms:()=>Me().then(()=>N(()=>import("./WMSLayerView2D-Bi5JsvIS.js"),__vite__mapDeps([335,302,267,107,77,262,184,12,138,268,206,171,105,170,123,49,45,50,287,266,261,188,164,119,288,250,303,290,336,297]))),wmts:()=>Me().then(()=>N(()=>import("./WMTSLayerView2D-CpXdOnxZ.js"),__vite__mapDeps([337,286,287,268,206,266,261,184,12,262,188,164,119,267,107,77,138,171,105,170,123,49,45,50,282,288,250,290]))),"line-of-sight":null,"base-elevation":null,"building-scene":null,dimension:null,elevation:null,"integrated-mesh":null,"integrated-mesh-3dtiles":null,"point-cloud":null,viewshed:null,voxel:null,scene:null,unknown:null,unsupported:null};function Xq(e){const t=e.declaredClass?e.declaredClass.slice(e.declaredClass.lastIndexOf(".")+1):"Unknown",r=t.replaceAll(/([a-z])([A-Z])/g,"$1-$2").toLowerCase();return new I(`${r}:view-not-supported`,`${t} is not supported in 2D`)}const HS={hasLayerViewModule:e=>BS[e.type]!=null,importLayerView:e=>{const t=BS[e.type];if(t==null)throw Xq(e);return t(e)}};let En=class lo{static getId(t,r,i,s){return typeof t=="object"?`${t.level}/${t.row}/${t.col}/${t.world}`:`${t}/${r}/${i}/${s}`}constructor(t,r,i,s){this.set(t,r,i,s)}get key(){return this}get id(){return this.toString()}get normalizedId(){return`${this.level}/${this.row}/${this.col}`}set id(t){this.set(t)}get hash(){const t=4095&this.row,r=4095&this.col,i=63&this.level;return(3&this.world)<<30|r<<22|t<<8|i}acquire(t,r,i,s){this.set(t,r,i,s)}contains(t){const r=t.level-this.level;return r>=0&&this.row===t.row>>r&&this.col===t.col>>r&&this.world===t.world}containsChild(t){const r=t.level-this.level;return r>0&&this.row===t.row>>r&&this.col===t.col>>r&&this.world===t.world}equals(t){return this.level===t.level&&this.row===t.row&&this.col===t.col&&this.world===t.world}clone(){return new lo(this)}release(){this.level=0,this.row=0,this.col=0,this.world=0}set(t,r,i,s){if(t==null)this.level=0,this.row=0,this.col=0,this.world=0;else if(typeof t=="object")this.level=t.level||0,this.row=t.row||0,this.col=t.col||0,this.world=t.world||0;else if(typeof t=="string"){const[n,o,a,l]=t.split("/");this.level=parseFloat(n),this.row=parseFloat(o),this.col=parseFloat(a),this.world=parseFloat(l)}else this.level=+t,this.row=+r,this.col=+i,this.world=+s||0;return this}toString(){return`${this.level}/${this.row}/${this.col}/${this.world}`}getParentKey(){return this.level<=0?null:new lo(this.level-1,this.row>>1,this.col>>1,this.world)}getNormalizedNeighbor(t,r,i){const s=this.clone();return s.col+=t,s.row+=r,i.normalizeKey(s),s}getChildKeys(){const t=this.level+1,r=this.row<<1,i=this.col<<1,s=this.world;return[new lo(t,r,i,s),new lo(t,r,i+1,s),new lo(t,r+1,i,s),new lo(t,r+1,i+1,s)]}compareRowMajor(t){return this.row<t.row?-1:this.row>t.row?1:this.col<t.col?-1:this.col>t.col?1:0}};En.pool=new Uo(En,null,null,25,50);function ia(e,t){return[e,t]}function Nn(e,t,r){return e[0]=t,e[1]=r,e}function Qq(e,t,r,i,s){return e[0]=t,e[1]=r,e[2]=i,e[3]=s,e}const jr=new En("0/0/0/0");let eW=class QO{static create(t,r,i=null){const s=Rt(t.spatialReference),n=r.origin||ia(t.origin.x,t.origin.y),o=ia(t.size[0]*r.resolution,t.size[1]*r.resolution),a=ia(-1/0,-1/0),l=ia(1/0,1/0),h=ia(1/0,1/0);i!=null&&(Nn(a,Math.max(0,Math.floor((i.xmin-n[0])/o[0])),Math.max(0,Math.floor((n[1]-i.ymax)/o[1]))),Nn(l,Math.max(0,Math.floor((i.xmax-n[0])/o[0])),Math.max(0,Math.floor((n[1]-i.ymin)/o[1]))),Nn(h,l[0]-a[0]+1,l[1]-a[1]+1));const{cols:p,rows:f}=r;let m,y,_,v;return!i&&p&&f&&(Nn(a,p[0],f[0]),Nn(l,p[1],f[1]),Nn(h,p[1]-p[0]+1,f[1]-f[0]+1)),t.isWrappable?(m=ia(Math.ceil(Math.round((s.valid[1]-s.valid[0])/r.resolution)/t.size[0]),h[1]),y=!0,_=s.origin,v=s.valid):(m=h,y=!1),new QO(r.level,r.resolution,r.scale,n,a,l,h,o,m,y,_,v)}constructor(t,r,i,s,n,o,a,l,h,p,f,m){this.level=t,this.resolution=r,this.scale=i,this.origin=s,this.first=n,this.last=o,this.size=a,this.norm=l,this.worldSize=h,this.wrap=p,this._spatialReferenceOrigin=f,this._spatialReferenceValid=m}normalizeCol(t){if(!this.wrap)return t;const r=this.worldSize[0];return t<0?r-1-Math.abs((t+1)%r):t%r}normalizeKey(t){if(!this.wrap)return;const r=this.worldSize[0],i=t.col;i<0?(t.col=i+r,t.world-=1):i>=r&&(t.col=i-r,t.world+=1)}denormalizeCol(t,r){return this.wrap?this.worldSize[0]*r+t:t}getWorldForColumn(t){return this.wrap?Math.floor(t/this.worldSize[0]):0}getFirstColumnForWorld(t){return t*this.worldSize[0]+this.first[0]}getLastColumnForWorld(t){return t*this.worldSize[0]+this.first[0]+this.size[0]-1}getColumnForX(t){return(t-this.origin[0])/this.norm[0]}getXForColumn(t){const r=this.origin[0]+t*this.norm[0],i=this._spatialReferenceOrigin,s=this._spatialReferenceValid;return this.wrap&&i&&s?r===i[0]?s[0]:this.origin[0]===i[0]&&t===this.worldSize[0]?s[1]:r:r}getRowForY(t){return(this.origin[1]-t)/this.norm[1]}getYForRow(t){return this.origin[1]-t*this.norm[1]}getTileBounds(t,r,i=!1){jr.set(r);const s=i?jr.col:this.denormalizeCol(jr.col,jr.world),n=jr.row;return Qq(t,this.getXForColumn(s),this.getYForRow(n+1),this.getXForColumn(s+1),this.getYForRow(n)),t}getTileCoords(t,r,i=!1){jr.set(r);const s=i?jr.col:this.denormalizeCol(jr.col,jr.world);return Array.isArray(t)?Nn(t,this.getXForColumn(s),this.getYForRow(jr.row)):(t.x=this.getXForColumn(s),t.y=this.getYForRow(jr.row)),t}},zc=class{constructor(){this.spans=[]}acquire(t){this.lodInfo=t}release(){this.lodInfo=null,this.spans.length=0}*keys(){const t=this.lodInfo;for(const{row:r,colFrom:i,colTo:s}of this.spans)for(let n=i;n<=s;n++){const o=t.getWorldForColumn(n);yield new En(t.level,r,t.normalizeCol(n),o)}}forEach(t,r){const{spans:i,lodInfo:s}=this,{level:n}=s;if(i.length!==0)for(const{row:o,colFrom:a,colTo:l}of i)for(let h=a;h<=l;h++)t.call(r,n,o,s.normalizeCol(h),s.getWorldForColumn(h))}};zc.pool=new Uo(zc);let Sy=class{constructor(t,r,i){this.row=t,this.colFrom=r,this.colTo=i}};const Ae=new En("0/0/0/0");let tW=class eC{static create(t,r){t[1]>r[1]&&([t,r]=[r,t]);const[i,s]=t,[n,o]=r,a=n-i,l=o-s,h=l!==0?a/l:0,p=(Math.ceil(s)-s)*h,f=(Math.floor(s)-s)*h;return new eC(i,Math.floor(s),Math.ceil(o),h,a<0?p:f,a<0?f:p,a<0?n:i,a<0?i:n)}constructor(t,r,i,s,n,o,a,l){this.x=t,this.ymin=r,this.ymax=i,this.invM=s,this.leftAdjust=n,this.rightAdjust=o,this.leftBound=a,this.rightBound=l}incrRow(){this.x+=this.invM}getLeftCol(){return Math.max(this.x+this.leftAdjust,this.leftBound)}getRightCol(){return Math.min(this.x+this.rightAdjust,this.rightBound)}};const Jt=[[0,0],[0,0],[0,0],[0,0]],rW=1e-6;let iW=class{constructor(t,r=null,i=t.lods[0].level,s=t.lods[t.lods.length-1].level){this.tileInfo=t,this.fullExtent=r,this.scales=[],this._infoByScale={},this._infoByLevel={};const n=t.lods.filter(a=>a.level>=i&&a.level<=s);this.minScale=n[0].scale,this.maxScale=n[n.length-1].scale;const o=this._lodInfos=n.map(a=>eW.create(t,a,r));n.forEach((a,l)=>{this._infoByLevel[a.level]=o[l],this._infoByScale[a.scale]=o[l],this.scales[l]=a.scale},this),this._wrap=t.isWrappable}get spatialReference(){return this.tileInfo.spatialReference}getLODInfoAt(t){return this._infoByLevel[typeof t=="number"?t:t.level]}getTileBounds(t,r,i=!1){Ae.set(r);const s=this._infoByLevel[Ae.level];return s?s.getTileBounds(t,Ae,i):t}getTileCoords(t,r,i=!1){Ae.set(r);const s=this._infoByLevel[Ae.level];return s?s.getTileCoords(t,Ae,i):t}getTileCoverage(t,r=192,i=!0,s="closest"){if(!i&&(t.scale>this.minScale||t.scale<this.maxScale))return null;const n=s==="closest"?this.getClosestInfoForScale(t.scale):this.getSmallestInfoForScale(t.scale),o=zc.pool.acquire(n),a=this._wrap;let l,h,p,f=1/0,m=-1/0;const y=o.spans;Jt[0][0]=Jt[0][1]=Jt[1][1]=Jt[3][0]=-r,Jt[1][0]=Jt[2][0]=t.size[0]+r,Jt[2][1]=Jt[3][1]=t.size[1]+r;for(const b of Jt)t.toMap(b,b),b[0]=n.getColumnForX(b[0]),b[1]=n.getRowForY(b[1]);const _=[];let v=3;for(let b=0;b<4;b++){if(Jt[b][1]===Jt[v][1]){v=b;continue}const M=tW.create(Jt[b],Jt[v]);f=Math.min(M.ymin,f),m=Math.max(M.ymax,m),_[M.ymin]===void 0&&(_[M.ymin]=[]),_[M.ymin].push(M),v=b}if(f==null||m==null||m-f>100)return null;let w=[];for(l=f;l<m;){_[l]!=null&&(w=w.concat(_[l])),h=1/0,p=-1/0;for(let b=w.length-1;b>=0;b--){const M=w[b];h=Math.min(h,M.getLeftCol()),p=Math.max(p,M.getRightCol())}if(h=Math.floor(h),p=Math.floor(p),l>=n.first[1]&&l<=n.last[1])if(a)if(n.size[0]<n.worldSize[0]){const b=Math.floor(p/n.worldSize[0]);for(let M=Math.floor(h/n.worldSize[0]);M<=b;M++)y.push(new Sy(l,Math.max(n.getFirstColumnForWorld(M),h),Math.min(n.getLastColumnForWorld(M),p)))}else y.push(new Sy(l,h,p));else h>n.last[0]||p<n.first[0]||(h=Math.max(h,n.first[0]),p=Math.min(p,n.last[0]),y.push(new Sy(l,h,p)));l+=1;for(let b=w.length-1;b>=0;b--){const M=w[b];M.ymax>=l?M.incrRow():w.splice(b,1)}}return o}getTileParentId(t){Ae.set(t);const r=this._infoByLevel[Ae.level],i=this._lodInfos.indexOf(r)-1;return i<0?null:(this._getTileIdAtLOD(Ae,this._lodInfos[i],Ae),Ae.id)}getTileResolution(t){const r=this._infoByLevel[typeof t=="object"?t.level:t];return r?r.resolution:-1}getTileScale(t){const r=this._infoByLevel[t.level];return r?r.scale:-1}intersects(t,r){Ae.set(r);const i=this._infoByLevel[Ae.level],s=t.lodInfo;if(s.resolution>i.resolution){this._getTileIdAtLOD(Ae,s,Ae);const o=s.denormalizeCol(Ae.col,Ae.world);for(const a of t.spans)if(a.row===Ae.row&&a.colFrom<=o&&a.colTo>=o)return!0}if(s.resolution<i.resolution){const[o,a,l,h]=t.spans.reduce((v,w)=>(v[0]=Math.min(v[0],w.row),v[1]=Math.max(v[1],w.row),v[2]=Math.min(v[2],w.colFrom),v[3]=Math.max(v[3],w.colTo),v),[1/0,-1/0,1/0,-1/0]),p=i.denormalizeCol(Ae.col,Ae.world),f=s.getColumnForX(i.getXForColumn(p)),m=s.getRowForY(i.getYForRow(Ae.row)),y=s.getColumnForX(i.getXForColumn(p+1))-1,_=s.getRowForY(i.getYForRow(Ae.row+1))-1;return!(f>h||y<l||m>a||_<o)}const n=s.denormalizeCol(Ae.col,Ae.world);return t.spans.some(o=>o.row===Ae.row&&o.colFrom<=n&&o.colTo>=n)}normalizeBounds(t,r,i){if(t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],this._wrap){const s=Rt(this.tileInfo.spatialReference),n=-i*(s.valid[1]-s.valid[0]);t[0]+=n,t[2]+=n}return t}getSmallestInfoForScale(t){const r=this.scales;if(this._infoByScale[t])return this._infoByScale[t];if(t>r[0])return this._infoByScale[r[0]];for(let i=1;i<r.length-1;i++)if(t>r[i]+rW)return this._infoByScale[r[i-1]];return this._infoByScale[r[r.length-1]]}getClosestInfoForScale(t){const r=this.scales;return this._infoByScale[t]||(t=r.reduce((i,s)=>Math.abs(s-t)<Math.abs(i-t)?s:i,r[0])),this._infoByScale[t]}scaleToLevel(t){const r=this.scales;if(this._infoByScale[t])return this._infoByScale[t].level;for(let i=r.length-1;i>=0;i--)if(t<r[i])return i===r.length-1?this._infoByScale[r[r.length-1]].level:this._infoByScale[r[i]].level+(r[i]-t)/(r[i]-r[i+1]);return this._infoByScale[r[0]].level}scaleToZoom(t){return this.tileInfo.scaleToZoom(t)}zoomToScale(t){return this.tileInfo.zoomToScale(t)}_getTileIdAtLOD(t,r,i){const s=this._infoByLevel[i.level];return t.set(i),r.resolution<s.resolution?null:(r.resolution===s.resolution||(t.level=r.level,t.col=Math.floor(i.col*s.resolution/r.resolution+.01),t.row=Math.floor(i.row*s.resolution/r.resolution+.01)),t)}},sW=class{constructor(t,r){this.item=t,this.controller=r,this.promise=null}},nW=class{constructor(t){this._schedule=null,this._task=null,this._deferreds=new Yd,this._controllers=new Yd,this._processingItems=new Yd,this._pausedSignal=gl(!1),this.concurrency=1,t.concurrency&&(this.concurrency=t.concurrency),this._queue=new Vp(t.peeker),this.process=t.process;const r=t.scheduler;t.priority&&r&&(this._task=r.registerTask(t.priority,this))}destroy(){this.clear(),this._schedule=Ie(this._schedule),this._task=Ie(this._task)}get updating(){var t;return!!((t=this._task)!=null&&t.updating)||this.running}get length(){return this._processingItems.size+this._queue.length}abort(t){const r=this._controllers.get(t);r&&r.abort()}clear(){this._queue.clear();const t=[];this._controllers.forEach(r=>t.push(r)),this._controllers.clear(),t.forEach(r=>r.abort()),this._processingItems.clear(),this._cancelNext()}forEach(t){this._deferreds.forEach((r,i)=>t(i))}get(t){const r=this._deferreds.get(t);return r?r.promise:void 0}isOngoing(t){return this._processingItems.has(t)}has(t){return this._deferreds.has(t)}pause(){this._pausedSignal.value||(this._pausedSignal.value=!0,this._cancelNext())}push(t,r){const i=this.get(t);if(i)return i;const s=new AbortController;let n=null;r&&(n=Ar(r,()=>s.abort()));const o=()=>{const p=this._processingItems.get(t);p&&p.controller.abort(),a(),h.reject(Ee())},a=()=>{l.remove(),n!=null&&n.remove(),this._removeItem(t),this._queue.remove(t),this._scheduleNext()},l=s_(s.signal,o),h=Or();return this._deferreds.set(t,h),this._controllers.set(t,s),h.promise.then(a,a),this._queue.push(t),this._scheduleNext(),h.promise}last(){return this._queue.last()}lastPromise(){const t=this.last();return t?this.get(t):null}peek(){return this._queue.peek()}popLast(){var r;const t=this._queue.popLast();return t&&((r=this._deferreds.get(t))==null||r.reject(Ee()),this._removeItem(t)),t}reset(){const t=Array.from(this._processingItems.values());this._processingItems.clear();for(const r of t)this._queue.push(r.item),r.controller.abort();this._scheduleNext()}resume(){this._pausedSignal.value&&(this._pausedSignal.value=!1,this._scheduleNext())}takeAll(){const t=[];for(;this._queue.length;)t.push(this._queue.pop());return this.clear(),t}get running(){return!this._pausedSignal.value&&this._queue.length>0&&this._processingItems.size<this.concurrency}runTask(t){for(;!t.done&&this._queue.length>0&&this._processingItems.size<this.concurrency;)this._process(this._queue.pop()),t.madeProgress()}_removeItem(t){this._deferreds.delete(t),this._controllers.delete(t),this._processingItems.delete(t)}_scheduleNext(){this._task||this._pausedSignal.value||this._schedule||(this._schedule=Xc(()=>{this._schedule=null,this._next()}))}_next(){for(;this._queue.length>0&&this._processingItems.size<this.concurrency;)this._process(this._queue.pop())}_cancelNext(){this._schedule&&(this._schedule.remove(),this._schedule=null)}_processResult(t,r){this._canProcessFulfillment(t)&&(this._scheduleNext(),this._deferreds.get(t.item).resolve(r))}_processError(t,r){this._canProcessFulfillment(t)&&(this._scheduleNext(),this._deferreds.get(t.item).reject(r))}_canProcessFulfillment(t){return!!this._deferreds.get(t.item)&&this._processingItems.get(t.item)===t}_process(t){if(t==null)return;let r;const i=new AbortController,s=new sW(t,i);this._processingItems.set(t,s);try{r=this.process(t,i.signal)}catch(n){this._processError(s,n)}ki(r)?(s.promise=r,r.then(n=>this._processResult(s,n),n=>this._processError(s,n))):this._processResult(s,r)}get test(){}};const qS=[0,0];let es=class extends W{constructor(t){super(t),this._keyToItem=new Map,this._tilesByScale=new Map,this.concurrency=6}initialize(){const{concurrency:t,process:r,scheduler:i,priority:s}=this;this._queue=new nW({concurrency:t,scheduler:i,priority:s,process:(n,o)=>{const a=this._keyToItem.get(n);return r(a,{signal:o})},peeker:n=>this._peek(n)})}destroy(){this.clear(),this._queue=Ne(this._queue)}get length(){return this._queue?this._queue.length:0}abort(t){const r=typeof t=="string"?t:t.id;this._queue.abort(r)}clear(){this._queue.clear(),this._keyToItem.clear(),this._tilesByScale.clear()}has(t){return typeof t=="string"?this._keyToItem.has(t):this._keyToItem.has(t.id)}pause(){this._queue.pause()}push(t){const r=t.key.id;if(this._queue.has(r))return this._queue.get(r);const i=this._queue.push(r),s=this.tileInfoView.getTileScale(t.key),n=Ef(this._tilesByScale,s,()=>new Set),o=()=>{n.delete(t.key),n.size===0&&this._tilesByScale.delete(s),this._keyToItem.delete(r)};return n.add(t.key),this._keyToItem.set(r,t),i.then(o,o),i}reset(){this._queue.reset()}resume(){this._queue.resume()}_peek(t){if(!this.state)return t.values().next().value;const r=new Set;for(const o of t)r.add(this._keyToItem.get(o).key);const i=this.state.scale;let s,n=Number.POSITIVE_INFINITY;for(const[o,a]of this._tilesByScale)if(X$(a,l=>r.has(l))){const l=Math.abs(o-i);l<n&&(s=a,n=l)}return this._getClosestTileKey(s,t).id}_getClosestTileKey(t,r){const i=this.tileInfoView,s=this.state.center;let n,o=Number.POSITIVE_INFINITY;for(const a of t)if(r.has(a.id)){i.getTileCoords(qS,a);const l=fm(qS,s);l<o&&(o=l,n=a)}return n}};c([d({constructOnly:!0})],es.prototype,"concurrency",void 0),c([d({constructOnly:!0})],es.prototype,"priority",void 0),c([d({constructOnly:!0})],es.prototype,"process",void 0),c([d({constructOnly:!0})],es.prototype,"scheduler",void 0),c([d()],es.prototype,"state",void 0),c([d({constructOnly:!0})],es.prototype,"tileInfoView",void 0),es=c([S("esri.views.2d.tiling.TileQueue")],es);const Hse=es;let oW=class{constructor(t,r,i){this.maxSize=t,this._tileInfoView=r,this._removedFunc=i,this._tilePerId=new Map,this._tileKeysPerLevel=[]}clear(){this._tilePerId.clear(),this._tileKeysPerLevel=[]}has(t){return this._tilePerId.has(t)}get(t){return this._tilePerId.get(t)}pop(t){const r=this._tilePerId.get(t);if(!r)return;const i=r.key.level,s=this._tileKeysPerLevel[i];WS(this._tilePerId,t);for(let n=0;n<s.length;n++)if(s[n].id===t){s.splice(n,1);break}return r.visible=!0,r}add(t){t.visible=!1;const r=t.key,i=r.id;if(this._tilePerId.has(i))return;this._tilePerId.set(i,t);const s=r.level;this._tileKeysPerLevel[s]||(this._tileKeysPerLevel[s]=[]),this._tileKeysPerLevel[s].push(r)}prune(t,r,i){let s=this._tilePerId.size;if(s<=this.maxSize)return;let n=this._tileKeysPerLevel.length-1;for(;s>this.maxSize&&n>=0;)n!==t&&(s=this._pruneAroundCenterTile(s,r,i,n)),n--;s>this.maxSize&&(s=this._pruneAroundCenterTile(s,r,i,t))}_pruneAroundCenterTile(t,r,i,s){const n=this._tileKeysPerLevel[s];if(!n||n.length===0)return t;const{size:o,origin:a}=this._tileInfoView.tileInfo,l=i*o[0],h=i*o[1],p=[0,0],f=[0,0];for(n.sort((m,y)=>(p[0]=a.x+l*(m.col+.5),p[1]=a.y-h*(m.row+.5),f[0]=a.x+l*(y.col+.5),f[1]=a.y-h*(y.row+.5),tf(p,r)-tf(f,r)));n.length>0;){const m=n.pop();if(this._removeTile(m.id),--t===this.maxSize)break}return t}_removeTile(t){const r=this._tilePerId.get(t);this._removedFunc&&r&&this._removedFunc(r),WS(this._tilePerId,t)}};function WS(e,t){e.delete(t)}const Ln=new En(0,0,0,0),ji=new Map,Jl=[],Ty=[];let Wse=class{constructor(t){this._previousScale=Number.POSITIVE_INFINITY,this.cachePolicy="keep",this.coveragePolicy="closest",this.resampling=!0,this.tileIndex=new Map,this.tiles=[],this.buffer=192,this.acquireTile=t.acquireTile,this.releaseTile=t.releaseTile,this.tileInfoView=t.tileInfoView,t.resampling!=null&&(this.resampling=t.resampling),t.cachePolicy&&(this.cachePolicy=t.cachePolicy),t.coveragePolicy&&(this.coveragePolicy=t.coveragePolicy),t.buffer!=null&&(this.buffer=t.buffer),t.cacheSize&&(this._tileCache=new oW(t.cacheSize,this.tileInfoView,r=>{this.releaseTile(r)}))}destroy(){this.tileIndex.clear()}update(t){var b,M;const{resampling:r,tileIndex:i}=this,{scale:s,center:n,resolution:o}=t.state,{minScale:a,maxScale:l}=this.tileInfoView,h=!t.stationary&&s>this._previousScale;if(this._previousScale=s,!r&&(s>a||s<l))return this.tiles.length=0,void this.clear();const p=this.tileInfoView.getTileCoverage(t.state,this.buffer,this.resampling,this.coveragePolicy);if(!p)return this.tiles.length=0,void this.clear();const{spans:f,lodInfo:m}=p,{level:y}=m;this.tiles.length=0,i.forEach($=>$.visible=!0);let _=0,v=0;if(f.length>0)for(const{row:$,colFrom:E,colTo:P}of f)for(let O=E;O<=P;O++){_++;const L=Ln.set(y,$,m.normalizeCol(O),m.getWorldForColumn(O)).id;let k=i.get(L);if(k)k.isReady?(ji.set(L,k),v++):h||this._addParentTile(L,ji);else{if((b=this._tileCache)!=null&&b.has(L)){if(k=this._tileCache.pop(L),this.tileIndex.set(L,k),k.isReady){ji.set(L,k),v++;continue}}else k=this.acquireTile(Ln),this.tileIndex.set(L,k);h||this._addParentTile(L,ji)}}const w=v===_;for(const[$,E]of i){if(ji.has($))continue;Ln.set($);const P=this.tileInfoView.intersects(p,Ln),O=this.cachePolicy==="purge"?Ln.level!==y:Ln.level>y;!P||!h&&w?!O&&P||Jl.push(E):E.isReady?O&&this.cachePolicy==="purge"&&this._hasReadyAncestor(Ln,y)?Jl.push(E):Ty.push(E):O&&Jl.push(E)}for(const $ of Ty)$.isReady&&ji.set($.key.id,$);for(const $ of Jl)this._tileCache?this._tileCache.add($):this.releaseTile($),i.delete($.key.id);for(const $ of ji.values())this.tiles.push($);for(const $ of i.values())ji.has($.key.id)||($.visible=!1);(M=this._tileCache)==null||M.prune(y,n,o),zc.pool.release(p),Ty.length=0,Jl.length=0,ji.clear()}clear(){const{tileIndex:t}=this;for(const r of t.values())this.releaseTile(r);t.clear()}refresh(t){var r;for(const i of this.tileIndex.values())t(i);(r=this._tileCache)==null||r.clear()}updateCacheSize(t){this._tileCache&&(this._tileCache.maxSize=t)}_addParentTile(t,r){var n;let i=t,s=null;for(;i=this.tileInfoView.getTileParentId(i),i;)if(this.tileIndex.has(i)){if(s=this.tileIndex.get(i),s==null?void 0:s.isReady){r.has(s.key.id)||r.set(s.key.id,s);break}}else if((n=this._tileCache)!=null&&n.has(i)&&(s=this._tileCache.pop(i),this.tileIndex.set(i,s),s==null?void 0:s.isReady)){r.has(s.key.id)||r.set(s.key.id,s);break}}_hasReadyAncestor(t,r){const i=It();this.tileInfoView.getTileBounds(i,t,!0);for(const s of this.tileIndex.values())if(s.isReady&&s.key.level>=r&&s.key.level<t.level){const n=It();if(this.tileInfoView.getTileBounds(n,s.key,!0),q8(n,i))return!0}return!1}};function aW(e,t,r,i,s){tC(e,t,r||0,i||e.length-1,s||lW)}function tC(e,t,r,i,s){for(;i>r;){if(i-r>600){var n=i-r+1,o=t-r+1,a=Math.log(n),l=.5*Math.exp(2*a/3),h=.5*Math.sqrt(a*l*(n-l)/n)*(o-n/2<0?-1:1);tC(e,t,Math.max(r,Math.floor(t-o*l/n+h)),Math.min(i,Math.floor(t+(n-o)*l/n+h)),s)}var p=e[t],f=r,m=i;for(Yl(e,r,t),s(e[i],p)>0&&Yl(e,r,i);f<m;){for(Yl(e,f,m),f++,m--;s(e[f],p)<0;)f++;for(;s(e[m],p)>0;)m--}s(e[r],p)===0?Yl(e,r,m):Yl(e,++m,i),m<=t&&(r=m+1),t<=m&&(i=m-1)}}function Yl(e,t,r){var i=e[t];e[t]=e[r],e[r]=i}function lW(e,t){return e<t?-1:e>t?1:0}function af(e,t){if(!(this instanceof af))return new af(e,t);this._maxEntries=Math.max(4,e||9),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),t&&(typeof t=="function"?this.toBBox=t:this._initFormat(t)),this.clear()}function uW(e,t,r){if(!r)return t.indexOf(e);for(var i=0;i<t.length;i++)if(r(e,t[i]))return i;return-1}function sa(e,t){Wu(e,0,e.children.length,t,e)}function Wu(e,t,r,i,s){s||(s=Ma(null)),s.minX=1/0,s.minY=1/0,s.maxX=-1/0,s.maxY=-1/0;for(var n,o=t;o<r;o++)n=e.children[o],Zu(s,e.leaf?i(n):n);return s}function Zu(e,t){return e.minX=Math.min(e.minX,t.minX),e.minY=Math.min(e.minY,t.minY),e.maxX=Math.max(e.maxX,t.maxX),e.maxY=Math.max(e.maxY,t.maxY),e}function ZS(e,t){return e.minX-t.minX}function JS(e,t){return e.minY-t.minY}function $y(e){return(e.maxX-e.minX)*(e.maxY-e.minY)}function ed(e){return e.maxX-e.minX+(e.maxY-e.minY)}function cW(e,t){return(Math.max(t.maxX,e.maxX)-Math.min(t.minX,e.minX))*(Math.max(t.maxY,e.maxY)-Math.min(t.minY,e.minY))}function hW(e,t){var r=Math.max(e.minX,t.minX),i=Math.max(e.minY,t.minY),s=Math.min(e.maxX,t.maxX),n=Math.min(e.maxY,t.maxY);return Math.max(0,s-r)*Math.max(0,n-i)}function Ey(e,t){return e.minX<=t.minX&&e.minY<=t.minY&&t.maxX<=e.maxX&&t.maxY<=e.maxY}function td(e,t){return t.minX<=e.maxX&&t.minY<=e.maxY&&t.maxX>=e.minX&&t.maxY>=e.minY}function Ma(e){return{children:e,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function YS(e,t,r,i,s){for(var n,o=[t,r];o.length;)(r=o.pop())-(t=o.pop())<=i||(n=t+Math.ceil((r-t)/i/2)*i,aW(e,n,t,r,s),o.push(t,n,n,r))}af.prototype={all:function(){return this._all(this.data,[])},search:function(e){var t=this.data,r=[],i=this.toBBox;if(!td(e,t))return r;for(var s,n,o,a,l=[];t;){for(s=0,n=t.children.length;s<n;s++)o=t.children[s],td(e,a=t.leaf?i(o):o)&&(t.leaf?r.push(o):Ey(e,a)?this._all(o,r):l.push(o));t=l.pop()}return r},collides:function(e){var t=this.data,r=this.toBBox;if(!td(e,t))return!1;for(var i,s,n,o,a=[];t;){for(i=0,s=t.children.length;i<s;i++)if(n=t.children[i],td(e,o=t.leaf?r(n):n)){if(t.leaf||Ey(e,o))return!0;a.push(n)}t=a.pop()}return!1},load:function(e){if(!e||!e.length)return this;if(e.length<this._minEntries){for(var t=0,r=e.length;t<r;t++)this.insert(e[t]);return this}var i=this._build(e.slice(),0,e.length-1,0);if(this.data.children.length)if(this.data.height===i.height)this._splitRoot(this.data,i);else{if(this.data.height<i.height){var s=this.data;this.data=i,i=s}this._insert(i,this.data.height-i.height-1,!0)}else this.data=i;return this},insert:function(e){return e!=null&&this._insert(e,this.data.height-1),this},clear:function(){return this.data=Ma([]),this},remove:function(e,t){if(e==null)return this;for(var r,i,s,n,o=this.data,a=this.toBBox(e),l=[],h=[];o||l.length;){if(o||(o=l.pop(),i=l[l.length-1],r=h.pop(),n=!0),o.leaf&&(s=uW(e,o.children,t))!==-1)return o.children.splice(s,1),l.push(o),this._condense(l),this;n||o.leaf||!Ey(o,a)?i?(r++,o=i.children[r],n=!1):o=null:(l.push(o),h.push(r),r=0,i=o,o=o.children[0])}return this},toBBox:function(e){return e},compareMinX:ZS,compareMinY:JS,toJSON:function(){return this.data},fromJSON:function(e){return this.data=e,this},_all:function(e,t){for(var r=[];e;)e.leaf?t.push.apply(t,e.children):r.push.apply(r,e.children),e=r.pop();return t},_build:function(e,t,r,i){var s,n=r-t+1,o=this._maxEntries;if(n<=o)return sa(s=Ma(e.slice(t,r+1)),this.toBBox),s;i||(i=Math.ceil(Math.log(n)/Math.log(o)),o=Math.ceil(n/Math.pow(o,i-1))),(s=Ma([])).leaf=!1,s.height=i;var a,l,h,p,f=Math.ceil(n/o),m=f*Math.ceil(Math.sqrt(o));for(YS(e,t,r,m,this.compareMinX),a=t;a<=r;a+=m)for(YS(e,a,h=Math.min(a+m-1,r),f,this.compareMinY),l=a;l<=h;l+=f)p=Math.min(l+f-1,h),s.children.push(this._build(e,l,p,i-1));return sa(s,this.toBBox),s},_chooseSubtree:function(e,t,r,i){for(var s,n,o,a,l,h,p,f;i.push(t),!t.leaf&&i.length-1!==r;){for(p=f=1/0,s=0,n=t.children.length;s<n;s++)l=$y(o=t.children[s]),(h=cW(e,o)-l)<f?(f=h,p=l<p?l:p,a=o):h===f&&l<p&&(p=l,a=o);t=a||t.children[0]}return t},_insert:function(e,t,r){var i=this.toBBox,s=r?e:i(e),n=[],o=this._chooseSubtree(s,this.data,t,n);for(o.children.push(e),Zu(o,s);t>=0&&n[t].children.length>this._maxEntries;)this._split(n,t),t--;this._adjustParentBBoxes(s,n,t)},_split:function(e,t){var r=e[t],i=r.children.length,s=this._minEntries;this._chooseSplitAxis(r,s,i);var n=this._chooseSplitIndex(r,s,i),o=Ma(r.children.splice(n,r.children.length-n));o.height=r.height,o.leaf=r.leaf,sa(r,this.toBBox),sa(o,this.toBBox),t?e[t-1].children.push(o):this._splitRoot(r,o)},_splitRoot:function(e,t){this.data=Ma([e,t]),this.data.height=e.height+1,this.data.leaf=!1,sa(this.data,this.toBBox)},_chooseSplitIndex:function(e,t,r){var i,s,n,o,a,l,h,p;for(l=h=1/0,i=t;i<=r-t;i++)o=hW(s=Wu(e,0,i,this.toBBox),n=Wu(e,i,r,this.toBBox)),a=$y(s)+$y(n),o<l?(l=o,p=i,h=a<h?a:h):o===l&&a<h&&(h=a,p=i);return p},_chooseSplitAxis:function(e,t,r){var i=e.leaf?this.compareMinX:ZS,s=e.leaf?this.compareMinY:JS;this._allDistMargin(e,t,r,i)<this._allDistMargin(e,t,r,s)&&e.children.sort(i)},_allDistMargin:function(e,t,r,i){e.children.sort(i);var s,n,o=this.toBBox,a=Wu(e,0,t,o),l=Wu(e,r-t,r,o),h=ed(a)+ed(l);for(s=t;s<r-t;s++)n=e.children[s],Zu(a,e.leaf?o(n):n),h+=ed(a);for(s=r-t-1;s>=t;s--)n=e.children[s],Zu(l,e.leaf?o(n):n),h+=ed(l);return h},_adjustParentBBoxes:function(e,t,r){for(var i=r;i>=0;i--)Zu(t[i],e)},_condense:function(e){for(var t,r=e.length-1;r>=0;r--)e[r].children.length===0?r>0?(t=e[r-1].children).splice(t.indexOf(e[r]),1):this.clear():sa(e[r],this.toBBox)},_initFormat:function(e){var t=["return a"," - b",";"];this.compareMinX=new Function("a","b",t.join(e[0])),this.compareMinY=new Function("a","b",t.join(e[1])),this.toBBox=new Function("a","return {minX: a"+e[0]+", minY: a"+e[1]+", maxX: a"+e[2]+", maxY: a"+e[3]+"};")}};function dW(e,{timeZone:t,timeExtent:r}){return{$view:{scale:e,timeZone:t,timeProperties:{currentStart:r==null?void 0:r.start,currentEnd:r==null?void 0:r.end}}}}let KS=class rC{constructor(t,r){this.key=new En(0,0,0,0),this.bounds=It(),this.objectIds=new Set,this.key.set(r);const i=t.getLODInfoAt(this.key);this.tileInfoView=t,this.tileInfoView.getTileBounds(this.bounds,this.key,!0),this.resolution=i.resolution,this.level=i.level,this.scale=i.scale,this.minScale=t.zoomToScale(i.level-1),this.maxScale=t.zoomToScale(i.level+1)}get lod(){return this.tileInfoView.getLODInfoAt(this.key)}get id(){return this.key.id}get extent(){return B8(this.bounds,this.tileInfoView.tileInfo.spatialReference)}get transform(){return{originPosition:"upperLeft",scale:[this.resolution,this.resolution],translate:[this.bounds[0],this.bounds[3]]}}createArcadeEvaluationOptions(t){return dW(this.scale,t)}createChildTiles(){const t=this.key.getChildKeys(),r=Ct.acquire();for(let i=0;i<t.length;i++)r[i]=new rC(this.tileInfoView,t[i]);return r}getQuantizationParameters(){return MP.fromJSON({mode:"view",originPosition:"upperLeft",tolerance:this.resolution,extent:{xmin:this.bounds[0],ymin:this.bounds[1],xmax:this.bounds[2],ymax:this.bounds[3],spatialReference:this.tileInfoView.tileInfo.spatialReference}})}};const Dn={added:[],removed:[]},My=new Set,pW=new En(0,0,0,0);function fW(e,t){const r=Rt(t);if(!r)return null;const[i,s]=r.valid;return e[2]>s?[It([e[0],e[1],s,e[3]]),It([i,e[1],i+e[2]-s,e[3]])]:e[0]<i?[It([i,e[1],e[2],e[3]]),It([s-(i-e[0]),e[1],s,e[3]])]:null}let mW=class extends Ai{constructor(t){super(),this._tiles=new Map,this._index=af(9,A("esri-csp-restrictions")?r=>({minX:r.bounds[0],minY:r.bounds[1],maxX:r.bounds[2],maxY:r.bounds[3]}):[".bounds[0]",".bounds[1]",".bounds[2]",".bounds[3]"]),this.tiles=[],this.tileScheme=t}destroy(){this.clear()}clear(){this.tiles.length=0,this._tiles.clear(),this._index.clear()}has(t){return this._tiles.has(t)}get(t){return this._tiles.get(t)}getIntersectingTiles(t){if(!t||iv(t)===0||sv(t)===0)return[];const r=fW(t,this.tileScheme.spatialReference);return r!=null?[...new Set([...this.boundsIntersections(r[0]),...this.boundsIntersections(r[1])])]:this.boundsIntersections(t)}boundsIntersections(t){return this._index.search({minX:t[0],minY:t[1],maxX:t[2],maxY:t[3]})}updateTiles(t){const r={added:[],removed:[]};for(const i of t.added)if(!this.has(i)){const s=new KS(this.tileScheme,i);this._tiles.set(i,s),this._index.insert(s),r.added.push(s)}for(const i of t.removed)if(this.has(i)){const s=this.get(i);this._tiles.delete(i),this._index.remove(s),r.removed.push(s)}this.tiles.length=0,this._tiles.forEach(i=>this.tiles.push(i)),(r.added.length||r.removed.length)&&this.emit("update",r)}setViewState(t){const r=this.tileScheme.getTileCoverage(t,0);if(!r)return;const{spans:i,lodInfo:s}=r,{level:n}=s;if(i.length>0)for(const{row:o,colFrom:a,colTo:l}of i)for(let h=a;h<=l;h++){const p=pW.set(n,o,s.normalizeCol(h),s.getWorldForColumn(h)).id;if(My.add(p),!this.has(p)){const f=new KS(this.tileScheme,p);this._tiles.set(p,f),this._index.insert(f),this.tiles.push(f),Dn.added.push(f)}}for(let o=this.tiles.length-1;o>=0;o--){const a=this.tiles[o];My.has(a.id)||(this._tiles.delete(a.id),this.tiles.splice(o,1),this._index.remove(a),Dn.removed.push(a))}(Dn.added.length||Dn.removed.length)&&this.emit("update",Dn),zc.pool.release(r),My.clear(),Dn.added.length=0,Dn.removed.length=0}};const Yse=1e-30,XS=512,rd=16777216,Kse=8,Xse=29,Qse=24,ene=4,tne=0,rne=0,ine=0,sne=1,nne=2,one=3,ane=4,lne=5,une=6,cne=12,hne=13,dne=5,yW=6,pne=5,fne=6;var QS;(function(e){e[e.FilterFlags=0]="FilterFlags",e[e.Animation=1]="Animation",e[e.GPGPU=2]="GPGPU",e[e.VV=3]="VV",e[e.DD0=4]="DD0",e[e.DD1=5]="DD1",e[e.DD2=6]="DD2",e[e.LocalTimeOrigin=7]="LocalTimeOrigin"})(QS||(QS={}));const iC=6,gW=1<<iC,mne=gW<<1,yne=1.05,gne=3,_ne=1,vne=3,wne=3,bne=5,Sne=6,Tne=1.15,_W=4,$ne=128,vW=256,Ene=vW-2*_W,Mne=2,xne=128,Ane=1,Pne=10,One=1024,Cne=128,Ine=4,Rne=1,kne=1<<20,Nne=.75,Lne=10,Dne=.75,Fne=256,Une=32,jne=512,Gne=0,zne=1,wW=1,Vne=[0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1],Bne=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],Kl=256;var eT,tT,rT,iT,G1,sT,nT,bi,z1,yc,et,lf,Er,xe,V,Vc,os,oT,aT,lT;(function(e){e[e.DEPTH=256]="DEPTH",e[e.STENCIL=1024]="STENCIL",e[e.COLOR=16384]="COLOR"})(eT||(eT={})),function(e){e[e.POINTS=0]="POINTS",e[e.LINES=1]="LINES",e[e.LINE_LOOP=2]="LINE_LOOP",e[e.LINE_STRIP=3]="LINE_STRIP",e[e.TRIANGLES=4]="TRIANGLES",e[e.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",e[e.TRIANGLE_FAN=6]="TRIANGLE_FAN"}(tT||(tT={})),function(e){e[e.ZERO=0]="ZERO",e[e.ONE=1]="ONE",e[e.SRC_COLOR=768]="SRC_COLOR",e[e.ONE_MINUS_SRC_COLOR=769]="ONE_MINUS_SRC_COLOR",e[e.SRC_ALPHA=770]="SRC_ALPHA",e[e.ONE_MINUS_SRC_ALPHA=771]="ONE_MINUS_SRC_ALPHA",e[e.DST_ALPHA=772]="DST_ALPHA",e[e.ONE_MINUS_DST_ALPHA=773]="ONE_MINUS_DST_ALPHA",e[e.DST_COLOR=774]="DST_COLOR",e[e.ONE_MINUS_DST_COLOR=775]="ONE_MINUS_DST_COLOR",e[e.SRC_ALPHA_SATURATE=776]="SRC_ALPHA_SATURATE",e[e.CONSTANT_COLOR=32769]="CONSTANT_COLOR",e[e.ONE_MINUS_CONSTANT_COLOR=32770]="ONE_MINUS_CONSTANT_COLOR",e[e.CONSTANT_ALPHA=32771]="CONSTANT_ALPHA",e[e.ONE_MINUS_CONSTANT_ALPHA=32772]="ONE_MINUS_CONSTANT_ALPHA"}(rT||(rT={})),function(e){e[e.ADD=32774]="ADD",e[e.MIN=32775]="MIN",e[e.MAX=32776]="MAX",e[e.SUBTRACT=32778]="SUBTRACT",e[e.REVERSE_SUBTRACT=32779]="REVERSE_SUBTRACT"}(iT||(iT={})),function(e){e[e.ARRAY_BUFFER=34962]="ARRAY_BUFFER",e[e.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",e[e.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER",e[e.PIXEL_PACK_BUFFER=35051]="PIXEL_PACK_BUFFER",e[e.PIXEL_UNPACK_BUFFER=35052]="PIXEL_UNPACK_BUFFER",e[e.COPY_READ_BUFFER=36662]="COPY_READ_BUFFER",e[e.COPY_WRITE_BUFFER=36663]="COPY_WRITE_BUFFER",e[e.TRANSFORM_FEEDBACK_BUFFER=35982]="TRANSFORM_FEEDBACK_BUFFER"}(G1||(G1={})),function(e){e[e.FRONT=1028]="FRONT",e[e.BACK=1029]="BACK",e[e.FRONT_AND_BACK=1032]="FRONT_AND_BACK"}(sT||(sT={})),function(e){e[e.CW=2304]="CW",e[e.CCW=2305]="CCW"}(nT||(nT={})),function(e){e[e.BYTE=5120]="BYTE",e[e.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",e[e.SHORT=5122]="SHORT",e[e.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",e[e.INT=5124]="INT",e[e.UNSIGNED_INT=5125]="UNSIGNED_INT",e[e.FLOAT=5126]="FLOAT",e[e.HALF_FLOAT=5131]="HALF_FLOAT"}(bi||(bi={})),function(e){e[e.NEVER=512]="NEVER",e[e.LESS=513]="LESS",e[e.EQUAL=514]="EQUAL",e[e.LEQUAL=515]="LEQUAL",e[e.GREATER=516]="GREATER",e[e.NOTEQUAL=517]="NOTEQUAL",e[e.GEQUAL=518]="GEQUAL",e[e.ALWAYS=519]="ALWAYS"}(z1||(z1={})),function(e){e[e.ZERO=0]="ZERO",e[e.KEEP=7680]="KEEP",e[e.REPLACE=7681]="REPLACE",e[e.INCR=7682]="INCR",e[e.DECR=7683]="DECR",e[e.INVERT=5386]="INVERT",e[e.INCR_WRAP=34055]="INCR_WRAP",e[e.DECR_WRAP=34056]="DECR_WRAP"}(yc||(yc={})),function(e){e[e.NEAREST=9728]="NEAREST",e[e.LINEAR=9729]="LINEAR",e[e.NEAREST_MIPMAP_NEAREST=9984]="NEAREST_MIPMAP_NEAREST",e[e.LINEAR_MIPMAP_NEAREST=9985]="LINEAR_MIPMAP_NEAREST",e[e.NEAREST_MIPMAP_LINEAR=9986]="NEAREST_MIPMAP_LINEAR",e[e.LINEAR_MIPMAP_LINEAR=9987]="LINEAR_MIPMAP_LINEAR"}(et||(et={})),function(e){e[e.CLAMP_TO_EDGE=33071]="CLAMP_TO_EDGE",e[e.REPEAT=10497]="REPEAT",e[e.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT"}(lf||(lf={})),function(e){e[e.TEXTURE_2D=3553]="TEXTURE_2D",e[e.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",e[e.TEXTURE_3D=32879]="TEXTURE_3D",e[e.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",e[e.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",e[e.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",e[e.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",e[e.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",e[e.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z",e[e.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY"}(Er||(Er={})),function(e){e[e.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",e[e.DEPTH_STENCIL=34041]="DEPTH_STENCIL",e[e.DEPTH24_STENCIL8=35056]="DEPTH24_STENCIL8",e[e.ALPHA=6406]="ALPHA",e[e.RGB=6407]="RGB",e[e.RGBA=6408]="RGBA",e[e.LUMINANCE=6409]="LUMINANCE",e[e.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",e[e.RED=6403]="RED",e[e.RG=33319]="RG",e[e.RED_INTEGER=36244]="RED_INTEGER",e[e.RG_INTEGER=33320]="RG_INTEGER",e[e.RGB_INTEGER=36248]="RGB_INTEGER",e[e.RGBA_INTEGER=36249]="RGBA_INTEGER"}(xe||(xe={})),function(e){e[e.RGBA4=32854]="RGBA4",e[e.R16F=33325]="R16F",e[e.RG16F=33327]="RG16F",e[e.RGB32F=34837]="RGB32F",e[e.RGBA16F=34842]="RGBA16F",e[e.R32F=33326]="R32F",e[e.RG32F=33328]="RG32F",e[e.RGBA32F=34836]="RGBA32F",e[e.R11F_G11F_B10F=35898]="R11F_G11F_B10F",e[e.RGB8=32849]="RGB8",e[e.RGBA8=32856]="RGBA8",e[e.RGB5_A1=32855]="RGB5_A1",e[e.R8=33321]="R8",e[e.RG8=33323]="RG8",e[e.R8I=33329]="R8I",e[e.R8UI=33330]="R8UI",e[e.R16I=33331]="R16I",e[e.R16UI=33332]="R16UI",e[e.R32I=33333]="R32I",e[e.R32UI=33334]="R32UI",e[e.RG8I=33335]="RG8I",e[e.RG8UI=33336]="RG8UI",e[e.RG16I=33337]="RG16I",e[e.RG16UI=33338]="RG16UI",e[e.RG32I=33339]="RG32I",e[e.RG32UI=33340]="RG32UI",e[e.RGB16F=34843]="RGB16F",e[e.RGB9_E5=35901]="RGB9_E5",e[e.SRGB8=35905]="SRGB8",e[e.SRGB8_ALPHA8=35907]="SRGB8_ALPHA8",e[e.RGB565=36194]="RGB565",e[e.RGBA32UI=36208]="RGBA32UI",e[e.RGB32UI=36209]="RGB32UI",e[e.RGBA16UI=36214]="RGBA16UI",e[e.RGB16UI=36215]="RGB16UI",e[e.RGBA8UI=36220]="RGBA8UI",e[e.RGB8UI=36221]="RGB8UI",e[e.RGBA32I=36226]="RGBA32I",e[e.RGB32I=36227]="RGB32I",e[e.RGBA16I=36232]="RGBA16I",e[e.RGB16I=36233]="RGB16I",e[e.RGBA8I=36238]="RGBA8I",e[e.RGB8I=36239]="RGB8I",e[e.R8_SNORM=36756]="R8_SNORM",e[e.RG8_SNORM=36757]="RG8_SNORM",e[e.RGB8_SNORM=36758]="RGB8_SNORM",e[e.RGBA8_SNORM=36759]="RGBA8_SNORM",e[e.RGB10_A2=32857]="RGB10_A2",e[e.RGB10_A2UI=36975]="RGB10_A2UI"}(V||(V={})),function(e){e[e.FLOAT=5126]="FLOAT",e[e.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",e[e.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",e[e.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",e[e.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",e[e.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",e[e.BYTE=5120]="BYTE",e[e.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",e[e.SHORT=5122]="SHORT",e[e.UNSIGNED_INT=5125]="UNSIGNED_INT",e[e.INT=5124]="INT",e[e.HALF_FLOAT=5131]="HALF_FLOAT",e[e.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",e[e.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",e[e.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",e[e.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV"}(Vc||(Vc={})),function(e){e[e.DEPTH_COMPONENT16=33189]="DEPTH_COMPONENT16",e[e.STENCIL_INDEX8=36168]="STENCIL_INDEX8",e[e.DEPTH_STENCIL=34041]="DEPTH_STENCIL",e[e.DEPTH_COMPONENT24=33190]="DEPTH_COMPONENT24",e[e.DEPTH_COMPONENT32F=36012]="DEPTH_COMPONENT32F",e[e.DEPTH24_STENCIL8=35056]="DEPTH24_STENCIL8",e[e.DEPTH32F_STENCIL8=36013]="DEPTH32F_STENCIL8"}(os||(os={})),function(e){e[e.STATIC_DRAW=35044]="STATIC_DRAW",e[e.DYNAMIC_DRAW=35048]="DYNAMIC_DRAW",e[e.STREAM_DRAW=35040]="STREAM_DRAW",e[e.STATIC_READ=35045]="STATIC_READ",e[e.DYNAMIC_READ=35049]="DYNAMIC_READ",e[e.STREAM_READ=35041]="STREAM_READ",e[e.STATIC_COPY=35046]="STATIC_COPY",e[e.DYNAMIC_COPY=35050]="DYNAMIC_COPY",e[e.STREAM_COPY=35042]="STREAM_COPY"}(oT||(oT={})),function(e){e[e.FRAGMENT_SHADER=35632]="FRAGMENT_SHADER",e[e.VERTEX_SHADER=35633]="VERTEX_SHADER"}(aT||(aT={})),function(e){e[e.FRAMEBUFFER=36160]="FRAMEBUFFER",e[e.READ_FRAMEBUFFER=36008]="READ_FRAMEBUFFER",e[e.DRAW_FRAMEBUFFER=36009]="DRAW_FRAMEBUFFER"}(lT||(lT={}));const Hne=33984;var uf,uT,cT;(function(e){e[e.Texture=0]="Texture",e[e.BufferObject=1]="BufferObject",e[e.VertexArrayObject=2]="VertexArrayObject",e[e.Shader=3]="Shader",e[e.Program=4]="Program",e[e.FramebufferObject=5]="FramebufferObject",e[e.Renderbuffer=6]="Renderbuffer",e[e.TransformFeedback=7]="TransformFeedback",e[e.Sync=8]="Sync",e[e.UNCOUNTED=9]="UNCOUNTED",e[e.LinesOfCode=9]="LinesOfCode",e[e.Uniform=10]="Uniform",e[e.COUNT=11]="COUNT"})(uf||(uf={})),function(e){e[e.COLOR_ATTACHMENT0=36064]="COLOR_ATTACHMENT0",e[e.COLOR_ATTACHMENT1=36065]="COLOR_ATTACHMENT1",e[e.COLOR_ATTACHMENT2=36066]="COLOR_ATTACHMENT2",e[e.COLOR_ATTACHMENT3=36067]="COLOR_ATTACHMENT3",e[e.COLOR_ATTACHMENT4=36068]="COLOR_ATTACHMENT4",e[e.COLOR_ATTACHMENT5=36069]="COLOR_ATTACHMENT5",e[e.COLOR_ATTACHMENT6=36070]="COLOR_ATTACHMENT6",e[e.COLOR_ATTACHMENT7=36071]="COLOR_ATTACHMENT7",e[e.COLOR_ATTACHMENT8=36072]="COLOR_ATTACHMENT8",e[e.COLOR_ATTACHMENT9=36073]="COLOR_ATTACHMENT9",e[e.COLOR_ATTACHMENT10=36074]="COLOR_ATTACHMENT10",e[e.COLOR_ATTACHMENT11=36075]="COLOR_ATTACHMENT11",e[e.COLOR_ATTACHMENT12=36076]="COLOR_ATTACHMENT12",e[e.COLOR_ATTACHMENT13=36077]="COLOR_ATTACHMENT13",e[e.COLOR_ATTACHMENT14=36078]="COLOR_ATTACHMENT14",e[e.COLOR_ATTACHMENT15=36079]="COLOR_ATTACHMENT15"}(uT||(uT={})),function(e){e[e.NONE=0]="NONE",e[e.BACK=1029]="BACK"}(cT||(cT={}));const qne=33306;var ot,hT,dT,pT,fT,mT,yT;(function(e){e[e.COMPRESSED_RGB_S3TC_DXT1_EXT=33776]="COMPRESSED_RGB_S3TC_DXT1_EXT",e[e.COMPRESSED_RGBA_S3TC_DXT1_EXT=33777]="COMPRESSED_RGBA_S3TC_DXT1_EXT",e[e.COMPRESSED_RGBA_S3TC_DXT3_EXT=33778]="COMPRESSED_RGBA_S3TC_DXT3_EXT",e[e.COMPRESSED_RGBA_S3TC_DXT5_EXT=33779]="COMPRESSED_RGBA_S3TC_DXT5_EXT",e[e.COMPRESSED_R11_EAC=37488]="COMPRESSED_R11_EAC",e[e.COMPRESSED_SIGNED_R11_EAC=37489]="COMPRESSED_SIGNED_R11_EAC",e[e.COMPRESSED_RG11_EAC=37490]="COMPRESSED_RG11_EAC",e[e.COMPRESSED_SIGNED_RG11_EAC=37491]="COMPRESSED_SIGNED_RG11_EAC",e[e.COMPRESSED_RGB8_ETC2=37492]="COMPRESSED_RGB8_ETC2",e[e.COMPRESSED_SRGB8_ETC2=37493]="COMPRESSED_SRGB8_ETC2",e[e.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2=37494]="COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2",e[e.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2=37495]="COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2",e[e.COMPRESSED_RGBA8_ETC2_EAC=37496]="COMPRESSED_RGBA8_ETC2_EAC",e[e.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC=37497]="COMPRESSED_SRGB8_ALPHA8_ETC2_EAC"})(ot||(ot={})),function(e){e[e.FLOAT=5126]="FLOAT",e[e.FLOAT_VEC2=35664]="FLOAT_VEC2",e[e.FLOAT_VEC3=35665]="FLOAT_VEC3",e[e.FLOAT_VEC4=35666]="FLOAT_VEC4",e[e.INT=5124]="INT",e[e.INT_VEC2=35667]="INT_VEC2",e[e.INT_VEC3=35668]="INT_VEC3",e[e.INT_VEC4=35669]="INT_VEC4",e[e.BOOL=35670]="BOOL",e[e.BOOL_VEC2=35671]="BOOL_VEC2",e[e.BOOL_VEC3=35672]="BOOL_VEC3",e[e.BOOL_VEC4=35673]="BOOL_VEC4",e[e.FLOAT_MAT2=35674]="FLOAT_MAT2",e[e.FLOAT_MAT3=35675]="FLOAT_MAT3",e[e.FLOAT_MAT4=35676]="FLOAT_MAT4",e[e.SAMPLER_2D=35678]="SAMPLER_2D",e[e.SAMPLER_CUBE=35680]="SAMPLER_CUBE",e[e.UNSIGNED_INT=5125]="UNSIGNED_INT",e[e.UNSIGNED_INT_VEC2=36294]="UNSIGNED_INT_VEC2",e[e.UNSIGNED_INT_VEC3=36295]="UNSIGNED_INT_VEC3",e[e.UNSIGNED_INT_VEC4=36296]="UNSIGNED_INT_VEC4",e[e.FLOAT_MAT2x3=35685]="FLOAT_MAT2x3",e[e.FLOAT_MAT2x4=35686]="FLOAT_MAT2x4",e[e.FLOAT_MAT3x2=35687]="FLOAT_MAT3x2",e[e.FLOAT_MAT3x4=35688]="FLOAT_MAT3x4",e[e.FLOAT_MAT4x2=35689]="FLOAT_MAT4x2",e[e.FLOAT_MAT4x3=35690]="FLOAT_MAT4x3",e[e.SAMPLER_3D=35679]="SAMPLER_3D",e[e.SAMPLER_2D_SHADOW=35682]="SAMPLER_2D_SHADOW",e[e.SAMPLER_2D_ARRAY=36289]="SAMPLER_2D_ARRAY",e[e.SAMPLER_2D_ARRAY_SHADOW=36292]="SAMPLER_2D_ARRAY_SHADOW",e[e.SAMPLER_CUBE_SHADOW=36293]="SAMPLER_CUBE_SHADOW",e[e.INT_SAMPLER_2D=36298]="INT_SAMPLER_2D",e[e.INT_SAMPLER_3D=36299]="INT_SAMPLER_3D",e[e.INT_SAMPLER_CUBE=36300]="INT_SAMPLER_CUBE",e[e.INT_SAMPLER_2D_ARRAY=36303]="INT_SAMPLER_2D_ARRAY",e[e.UNSIGNED_INT_SAMPLER_2D=36306]="UNSIGNED_INT_SAMPLER_2D",e[e.UNSIGNED_INT_SAMPLER_3D=36307]="UNSIGNED_INT_SAMPLER_3D",e[e.UNSIGNED_INT_SAMPLER_CUBE=36308]="UNSIGNED_INT_SAMPLER_CUBE",e[e.UNSIGNED_INT_SAMPLER_2D_ARRAY=36311]="UNSIGNED_INT_SAMPLER_2D_ARRAY"}(hT||(hT={})),function(e){e[e.OBJECT_TYPE=37138]="OBJECT_TYPE",e[e.SYNC_CONDITION=37139]="SYNC_CONDITION",e[e.SYNC_STATUS=37140]="SYNC_STATUS",e[e.SYNC_FLAGS=37141]="SYNC_FLAGS"}(dT||(dT={})),function(e){e[e.UNSIGNALED=37144]="UNSIGNALED",e[e.SIGNALED=37145]="SIGNALED"}(pT||(pT={})),function(e){e[e.ALREADY_SIGNALED=37146]="ALREADY_SIGNALED",e[e.TIMEOUT_EXPIRED=37147]="TIMEOUT_EXPIRED",e[e.CONDITION_SATISFIED=37148]="CONDITION_SATISFIED",e[e.WAIT_FAILED=37149]="WAIT_FAILED"}(fT||(fT={})),function(e){e[e.SYNC_GPU_COMMANDS_COMPLETE=37143]="SYNC_GPU_COMMANDS_COMPLETE"}(mT||(mT={})),function(e){e[e.SYNC_FLUSH_COMMANDS_BIT=1]="SYNC_FLUSH_COMMANDS_BIT"}(yT||(yT={}));const bW=()=>U.getLogger("esri.views.webgl.checkWebGLError");function SW(e,t){switch(t){case e.INVALID_ENUM:return"Invalid Enum. An unacceptable value has been specified for an enumerated argument.";case e.INVALID_VALUE:return"Invalid Value. A numeric argument is out of range.";case e.INVALID_OPERATION:return"Invalid Operation. The specified command is not allowed for the current state.";case e.INVALID_FRAMEBUFFER_OPERATION:return"Invalid Framebuffer operation. The currently bound framebuffer is not framebuffer complete when trying to render to or to read from it.";case e.OUT_OF_MEMORY:return"Out of memory. Not enough memory is left to execute the command.";case e.CONTEXT_LOST_WEBGL:return"WebGL context has been lost";default:return"Unknown error"}}const sC=!!A("enable-feature:webgl-debug");function nC(){return sC}function Wne(){return sC}function na(e){if(nC()){const t=e.getError();if(t){const r=SW(e,t),i=new Error().stack;bW().error(new I("webgl-error","WebGL error occurred",{message:r,stack:i}))}}}var V1;(function(e){e[e.Texture=0]="Texture",e[e.RenderBuffer=1]="RenderBuffer"})(V1||(V1={}));function TW(e){switch(e){case bi.BYTE:case bi.UNSIGNED_BYTE:return 1;case bi.SHORT:case bi.UNSIGNED_SHORT:case bi.HALF_FLOAT:return 2;case bi.FLOAT:case bi.INT:case bi.UNSIGNED_INT:return 4}}function $W(e){const t=e.gl;switch(t.getError()){case t.NO_ERROR:return null;case t.INVALID_ENUM:return"An unacceptable value has been specified for an enumerated argument";case t.INVALID_VALUE:return"An unacceptable value has been specified for an argument";case t.INVALID_OPERATION:return"The specified command is not allowed for the current state";case t.INVALID_FRAMEBUFFER_OPERATION:return"The currently bound framebuffer is not framebuffer complete";case t.OUT_OF_MEMORY:return"Not enough memory is left to execute the command";case t.CONTEXT_LOST_WEBGL:return"WebGL context is lost"}return"Unknown error"}function Zne(e,t,r,i,s=0){var o;const n=e.gl;e.bindBuffer(r);for(const a of i){const l=t.get(a.name);if(l==null){console.warn(`There is no location for vertex attribute '${a.name}' defined.`);continue}const h=s*a.stride;if(a.count<=4)n.vertexAttribPointer(l,a.count,a.type,a.normalized,a.stride,a.offset+h),n.enableVertexAttribArray(l),a.divisor>0&&e.gl.vertexAttribDivisor(l,a.divisor);else if(a.count===9)for(let p=0;p<3;p++)n.vertexAttribPointer(l+p,3,a.type,a.normalized,a.stride,a.offset+12*p+h),n.enableVertexAttribArray(l+p),a.divisor>0&&e.gl.vertexAttribDivisor(l+p,a.divisor);else if(a.count===16)for(let p=0;p<4;p++)n.vertexAttribPointer(l+p,4,a.type,a.normalized,a.stride,a.offset+16*p+h),n.enableVertexAttribArray(l+p),a.divisor>0&&((o=e.gl)==null||o.vertexAttribDivisor(l+p,a.divisor));else console.error("Unsupported vertex attribute element count: "+a.count);if(nC()){const p=$W(e),f=TW(a.type),m=a.offset,y=Math.round(f/m)!==f/m?`. Offset not a multiple of stride. DataType requires ${f} bytes, but descriptor has an offset of ${m}`:"";p&&console.error(`Unable to bind vertex attribute "${a.name}" with baseInstanceOffset ${h}${y}:`,p,a)}}}function Jne(e,t,r,i){var n,o,a;const s=e.gl;e.bindBuffer(r);for(const l of i){const h=t.get(l.name);if(l.count<=4)s.disableVertexAttribArray(h),l.divisor&&l.divisor>0&&((n=e.gl)==null||n.vertexAttribDivisor(h,0));else if(l.count===9)for(let p=0;p<3;p++)s.disableVertexAttribArray(h+p),l.divisor&&l.divisor>0&&((o=e.gl)==null||o.vertexAttribDivisor(h+p,0));else if(l.count===16)for(let p=0;p<4;p++)s.disableVertexAttribArray(h+p),l.divisor&&l.divisor>0&&((a=e.gl)==null||a.vertexAttribDivisor(h+p,0));else console.error("Unsupported vertex attribute element count: "+l.count)}e.unbindBuffer(G1.ARRAY_BUFFER)}function EW(e){switch(e){case xe.ALPHA:case xe.LUMINANCE:case xe.RED:case xe.RED_INTEGER:case V.R8:case V.R8I:case V.R8UI:case V.R8_SNORM:case os.STENCIL_INDEX8:return 1;case xe.LUMINANCE_ALPHA:case xe.RG:case xe.RG_INTEGER:case V.RGBA4:case V.R16F:case V.R16I:case V.R16UI:case V.RG8:case V.RG8I:case V.RG8UI:case V.RG8_SNORM:case V.RGB565:case V.RGB5_A1:case os.DEPTH_COMPONENT16:return 2;case xe.DEPTH_COMPONENT:case xe.RGB:case xe.RGB_INTEGER:case V.RGB8:case V.RGB8I:case V.RGB8UI:case V.RGB8_SNORM:case V.SRGB8:case os.DEPTH_COMPONENT24:return 3;case xe.DEPTH_STENCIL:case xe.DEPTH24_STENCIL8:case xe.RGBA:case xe.RGBA_INTEGER:case V.RGBA8:case V.R32F:case V.R11F_G11F_B10F:case V.RG16F:case V.R32I:case V.R32UI:case V.RG16I:case V.RG16UI:case V.RGBA8I:case V.RGBA8UI:case V.RGBA8_SNORM:case V.SRGB8_ALPHA8:case V.RGB9_E5:case V.RGB10_A2UI:case V.RGB10_A2:case os.DEPTH_STENCIL:case os.DEPTH_COMPONENT32F:case os.DEPTH24_STENCIL8:return 4;case os.DEPTH32F_STENCIL8:return 5;case V.RGB16F:case V.RGB16I:case V.RGB16UI:return 6;case V.RG32F:case V.RG32I:case V.RG32UI:case V.RGBA16F:case V.RGBA16I:case V.RGBA16UI:return 8;case V.RGB32F:case V.RGB32I:case V.RGB32UI:return 12;case V.RGBA32F:case V.RGBA32I:case V.RGBA32UI:return 16;case ot.COMPRESSED_RGB_S3TC_DXT1_EXT:case ot.COMPRESSED_RGBA_S3TC_DXT1_EXT:return .5;case ot.COMPRESSED_RGBA_S3TC_DXT3_EXT:case ot.COMPRESSED_RGBA_S3TC_DXT5_EXT:return 1;case ot.COMPRESSED_R11_EAC:case ot.COMPRESSED_SIGNED_R11_EAC:case ot.COMPRESSED_RGB8_ETC2:case ot.COMPRESSED_SRGB8_ETC2:case ot.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2:case ot.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2:return .5;case ot.COMPRESSED_RG11_EAC:case ot.COMPRESSED_SIGNED_RG11_EAC:case ot.COMPRESSED_RGBA8_ETC2_EAC:case ot.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:return 1}return 0}let oC=class{constructor(t=0,r=t){this.width=t,this.height=r,this.target=Er.TEXTURE_2D,this.pixelFormat=xe.RGBA,this.dataType=Vc.UNSIGNED_BYTE,this.samplingMode=et.LINEAR,this.wrapMode=lf.REPEAT,this.maxAnisotropy=1,this.flipped=!1,this.hasMipmap=!1,this.isOpaque=!1,this.unpackAlignment=4,this.preMultiplyAlpha=!1,this.shouldCompress=!1,this.depth=1,this.isImmutable=!1}};function MW(e){return e.width<=0||e.height<=0?0:Math.round(e.width*e.height*e.depth*(e.hasMipmap?4/3:1)*(e.internalFormat==null?4:EW(e.internalFormat))*(e.target===Er.TEXTURE_CUBE_MAP?6:1))}const xW=()=>U.getLogger("esri/views/webgl/textureUtils");function id(e){(e.width!=null&&e.width<0||e.height!=null&&e.height<0||e.depth!=null&&e.depth<0)&&xW().error("Negative dimension parameters are not allowed!")}function AW(e){return e in V}function PW(e){return e in ot}function xa(e){return e!=null&&"type"in e&&e.type==="compressed"}function OW(e){return e!=null&&"byteLength"in e}function gT(e){return e!=null&&!xa(e)&&!OW(e)}function oa(e){return e===Er.TEXTURE_3D||e===Er.TEXTURE_2D_ARRAY}function _T(e,t,r,i=1){let s=Math.max(t,r);return e===Er.TEXTURE_3D&&(s=Math.max(s,i)),Math.floor(Math.log2(s))+1}function sd(e){if(e.internalFormat!=null)return e.internalFormat===xe.DEPTH_STENCIL?xe.DEPTH24_STENCIL8:e.internalFormat;switch(e.dataType){case Vc.FLOAT:switch(e.pixelFormat){case xe.RGBA:return V.RGBA32F;case xe.RGB:return V.RGB32F;default:throw new I("Unable to derive format")}case Vc.UNSIGNED_BYTE:switch(e.pixelFormat){case xe.RGBA:return V.RGBA8;case xe.RGB:return V.RGB8}}return e.internalFormat=e.pixelFormat===xe.DEPTH_STENCIL?xe.DEPTH24_STENCIL8:e.pixelFormat}function CW(e){let t="width"in e?e.width:e.codedWidth,r="height"in e?e.height:e.codedHeight;return e instanceof HTMLVideoElement&&(t=e.videoWidth,r=e.videoHeight),{width:t,height:r,depth:1}}let IW=class aC extends oC{constructor(t,r){switch(super(),this.context=t,Object.assign(this,r),this.internalFormat){case V.R16F:case V.R16I:case V.R16UI:case V.R32F:case V.R32I:case V.R32UI:case V.R8_SNORM:case V.R8:case V.R8I:case V.R8UI:this.pixelFormat=xe.RED}}static validate(t,r){return new aC(t,r)}};const Ps=()=>U.getLogger("esri/views/webgl/Texture");let B1=class At{constructor(t,r=null,i=null){if(this.type=V1.Texture,this._glName=null,this._samplingModeDirty=!1,this._wrapModeDirty=!1,this._wasImmutablyAllocated=!1,this._compressionAbortController=gl(null),"context"in t)this._descriptor=t,i=r;else{const s=IW.validate(t,r);if(!s)throw new I("Texture descriptor invalid");this._descriptor=s}this._descriptor.target===Er.TEXTURE_CUBE_MAP?this._setDataCubeMap(i):this.setData(i)}get glName(){return this._glName}get descriptor(){return this._descriptor}get usedMemory(){return MW(this._descriptor)}get cachedMemory(){return this.usedMemory}get isDirty(){return this._samplingModeDirty||this._wrapModeDirty}get isCompressing(){return this._compressionAbortController.value!==null}dispose(){this.abortCompression(),this._glName&&this._descriptor.context.instanceCounter.decrement(uf.Texture,this),this._descriptor.context.gl&&this._glName&&(this._descriptor.context.unbindTexture(this),this._descriptor.context.gl.deleteTexture(this._glName),this._glName=null)}release(){this.dispose()}resize(t,r){const i=this._descriptor;if(i.width!==t||i.height!==r){if(this._wasImmutablyAllocated)throw new I("Immutable textures can't be resized!");i.width=t,i.height=r,this._descriptor.target===Er.TEXTURE_CUBE_MAP?this._setDataCubeMap(null):this.setData(null)}}enableCompression(t){this._descriptor.shouldCompress=t}setData(t){this.abortCompression(),!xa(t)&&this._descriptor.internalFormat&&this._descriptor.internalFormat in ot&&(this._descriptor.internalFormat=void 0),this._setData(t),!xa(t)&&this._descriptor.shouldCompress&&this._compressOnWorker(t)}updateData(t,r,i,s,n,o,a=0){o||Ps().error("An attempt to use uninitialized data!"),this._glName||Ps().error("An attempt to update uninitialized texture!");const l=this._descriptor;l.internalFormat=sd(l);const{context:h,pixelFormat:p,dataType:f,target:m,isImmutable:y}=l;if(y&&!this._wasImmutablyAllocated)throw new I("Cannot update immutable texture before allocation!");const _=h.bindTexture(this,At.TEXTURE_UNIT_FOR_UPDATES,!0);(r<0||i<0||r+s>l.width||i+n>l.height)&&Ps().error("An attempt to update out of bounds of the texture!"),this._configurePixelStorage();const{gl:v}=h;a&&(s&&n||Ps().warn("Must pass width and height if `UNPACK_SKIP_ROWS` is used"),v.pixelStorei(v.UNPACK_SKIP_ROWS,a)),gT(o)?v.texSubImage2D(m,t,r,i,s,n,p,f,o):xa(o)?v.compressedTexSubImage2D(m,t,r,i,s,n,l.internalFormat,o.levels[t]):v.texSubImage2D(m,t,r,i,s,n,p,f,o),a&&v.pixelStorei(v.UNPACK_SKIP_ROWS,0),h.bindTexture(_,At.TEXTURE_UNIT_FOR_UPDATES)}updateData3D(t,r,i,s,n,o,a,l){l||Ps().error("An attempt to use uninitialized data!"),this._glName||Ps().error("An attempt to update an uninitialized texture!");const h=this._descriptor;h.internalFormat=sd(h);const{context:p,pixelFormat:f,dataType:m,isImmutable:y,target:_}=h;if(y&&!this._wasImmutablyAllocated)throw new I("Cannot update immutable texture before allocation!");oa(_)||Ps().warn("Attempting to set 3D texture data on a non-3D texture");const v=p.bindTexture(this,At.TEXTURE_UNIT_FOR_UPDATES);p.setActiveTexture(At.TEXTURE_UNIT_FOR_UPDATES),(r<0||i<0||s<0||r+n>h.width||i+o>h.height||s+a>h.depth)&&Ps().error("An attempt to update out of bounds of the texture!"),this._configurePixelStorage();const{gl:w}=p;if(xa(l))l=l.levels[t],w.compressedTexSubImage3D(_,t,r,i,s,n,o,a,h.internalFormat,l);else{const b=l;w.texSubImage3D(_,t,r,i,s,n,o,a,f,m,b)}p.bindTexture(v,At.TEXTURE_UNIT_FOR_UPDATES)}generateMipmap(){const t=this._descriptor;if(t.width===0||t.height===0)return;if(!t.hasMipmap){if(this._wasImmutablyAllocated)throw new I("Cannot add mipmaps to immutable texture after allocation");t.hasMipmap=!0,this._samplingModeDirty=!0,id(t)}t.samplingMode===et.LINEAR?(this._samplingModeDirty=!0,t.samplingMode=et.LINEAR_MIPMAP_NEAREST):t.samplingMode===et.NEAREST&&(this._samplingModeDirty=!0,t.samplingMode=et.NEAREST_MIPMAP_NEAREST);const r=this._descriptor.context.bindTexture(this,At.TEXTURE_UNIT_FOR_UPDATES);this._descriptor.context.setActiveTexture(At.TEXTURE_UNIT_FOR_UPDATES),this._descriptor.context.gl.generateMipmap(t.target),this._descriptor.context.bindTexture(r,At.TEXTURE_UNIT_FOR_UPDATES)}clearMipmap(){const t=this._descriptor;if(t.hasMipmap){if(this._wasImmutablyAllocated)throw new I("Cannot delete mipmaps to immutable texture after allocation");t.hasMipmap=!1,this._samplingModeDirty=!0,id(t)}t.samplingMode===et.LINEAR_MIPMAP_NEAREST?(this._samplingModeDirty=!0,t.samplingMode=et.LINEAR):t.samplingMode===et.NEAREST_MIPMAP_NEAREST&&(this._samplingModeDirty=!0,t.samplingMode=et.NEAREST)}setSamplingMode(t){t!==this._descriptor.samplingMode&&(this._descriptor.samplingMode=t,this._samplingModeDirty=!0)}setWrapMode(t){t!==this._descriptor.wrapMode&&(this._descriptor.wrapMode=t,id(this._descriptor),this._wrapModeDirty=!0)}applyChanges(){this._samplingModeDirty&&(this._applySamplingMode(),this._samplingModeDirty=!1),this._wrapModeDirty&&(this._applyWrapMode(),this._wrapModeDirty=!1)}abortCompression(){this.isCompressing&&(this._compressionAbortController.value=rl(this._compressionAbortController.value))}_setData(t,r){var l;const i=this._descriptor,s=(l=i.context)==null?void 0:l.gl;if(!s)return;na(s),this._glName||(this._glName=s.createTexture(),this._glName&&i.context.instanceCounter.increment(uf.Texture,this)),id(i);const n=i.context.bindTexture(this,At.TEXTURE_UNIT_FOR_UPDATES);i.context.setActiveTexture(At.TEXTURE_UNIT_FOR_UPDATES),this._configurePixelStorage(),na(s);const o=r??i.target,a=oa(o);if(gT(t))this._setDataFromTexImageSource(t,o);else{const{width:h,height:p,depth:f}=i;if(h==null||p==null)throw new I("Width and height must be specified!");if(a&&f==null)throw new I("Depth must be specified!");if(i.internalFormat=sd(i),i.isImmutable&&!this._wasImmutablyAllocated&&this._texStorage(o,i.internalFormat,i.hasMipmap,h,p,f),xa(t)){if(!PW(i.internalFormat))throw new I("Attempting to use compressed data with an uncompressed format!");this._setDataFromCompressedSource(t,i.internalFormat,o)}else this._texImage(o,0,i.internalFormat,h,p,f,t),na(s),i.hasMipmap&&this.generateMipmap()}this._applySamplingMode(),this._applyWrapMode(),this._applyAnisotropicFilteringParameters(),na(s),i.context.bindTexture(n,At.TEXTURE_UNIT_FOR_UPDATES)}_setDataCubeMap(t=null){for(let r=Er.TEXTURE_CUBE_MAP_POSITIVE_X;r<=Er.TEXTURE_CUBE_MAP_NEGATIVE_Z;r++)this._setData(t,r)}_configurePixelStorage(){const t=this._descriptor.context.gl,{unpackAlignment:r,flipped:i,preMultiplyAlpha:s}=this._descriptor;t.pixelStorei(t.UNPACK_ALIGNMENT,r),t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,i?1:0),t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,s?1:0)}_setDataFromTexImageSource(t,r){const{gl:i}=this._descriptor.context,s=this._descriptor;s.internalFormat=sd(s);const n=oa(r),{width:o,height:a,depth:l}=CW(t);s.width&&s.height,s.width||(s.width=o),s.height||(s.height=a),n&&s.depth,n&&(s.depth=l),s.isImmutable&&!this._wasImmutablyAllocated&&this._texStorage(r,s.internalFormat,s.hasMipmap,o,a,l),this._texImage(r,0,s.internalFormat,o,a,l,t),na(i),s.hasMipmap&&(this.generateMipmap(),na(i))}_setDataFromCompressedSource(t,r,i){const s=this._descriptor,{width:n,height:o,depth:a}=s,l=t.levels,h=_T(i,n,o,a),p=Math.min(h,l.length)-1;this._descriptor.context.gl.texParameteri(s.target,s.context.gl.TEXTURE_MAX_LEVEL,p),this._forEachMipmapLevel((f,m,y,_)=>{const v=l[Math.min(f,l.length-1)];this._compressedTexImage(i,f,r,m,y,_,v)},p)}_texStorage(t,r,i,s,n,o){const{gl:a}=this._descriptor.context;if(!AW(r))throw new I("Immutable textures must have a sized internal format");if(!this._descriptor.isImmutable)return;const l=i?_T(t,s,n,o):1;if(oa(t)){if(o==null)throw new I("Missing depth dimension for 3D texture upload");a.texStorage3D(t,l,r,s,n,o)}else a.texStorage2D(t,l,r,s,n);this._wasImmutablyAllocated=!0}_texImage(t,r,i,s,n,o,a){const l=this._descriptor.context.gl,h=oa(t),{isImmutable:p,pixelFormat:f,dataType:m}=this._descriptor;if(p){if(a!=null){const y=a;if(h){if(o==null)throw new I("Missing depth dimension for 3D texture upload");l.texSubImage3D(t,r,0,0,0,s,n,o,f,m,y)}else l.texSubImage2D(t,r,0,0,s,n,f,m,y)}}else{const y=a;if(h){if(o==null)throw new I("Missing depth dimension for 3D texture upload");l.texImage3D(t,r,i,s,n,o,0,f,m,y)}else l.texImage2D(t,r,i,s,n,0,f,m,y)}}_compressedTexImage(t,r,i,s,n,o,a){const l=this._descriptor.context.gl,h=oa(t);if(this._descriptor.isImmutable){if(a!=null)if(h){if(o==null)throw new I("Missing depth dimension for 3D texture upload");l.compressedTexSubImage3D(t,r,0,0,0,s,n,o,i,a)}else l.compressedTexSubImage2D(t,r,0,0,s,n,i,a)}else if(h){if(o==null)throw new I("Missing depth dimension for 3D texture upload");l.compressedTexImage3D(t,r,i,s,n,o,0,a)}else l.compressedTexImage2D(t,r,i,s,n,0,a)}async _compressOnWorker(t){var s,n;if(!At.compressionWorkerHandle||!At.compressionWorkerHandle.isCompressible(t))return;const r=(s=this._descriptor.context)==null?void 0:s.gl.getExtension("WEBGL_compressed_texture_etc"),i=(n=this._descriptor.context)==null?void 0:n.gl.getExtension("WEBGL_compressed_texture_s3tc");if(r||i){const o=new AbortController;this._compressionAbortController.value=o;const a={data:await createImageBitmap(t),flipped:this.descriptor.flipped,width:t.width,height:t.height,hasMipmap:this._descriptor.hasMipmap,hasETC:!!r,hasS3TC:!!i};At.compressionWorkerHandle.invoke(a,this._compressionAbortController.value.signal).then(l=>{l&&this.isCompressing&&this.glName&&(this._descriptor.internalFormat=l.internalFormat,this._setData(l.compressedTexture)),o===this._compressionAbortController.value&&(this._compressionAbortController.value=null)}).catch(l=>{qt(l)||o!==this._compressionAbortController.value||(this._compressionAbortController.value=null)})}}_forEachMipmapLevel(t,r=1/0){let{width:i,height:s,depth:n,hasMipmap:o,target:a}=this._descriptor;const l=a===Er.TEXTURE_3D;if(i==null||s==null||l&&n==null)throw new I("Missing texture dimensions for mipmap calculation");for(let h=0;t(h,i,s,n),o&&(i!==1||s!==1||l&&n!==1)&&!(h>=r);++h)i=Math.max(1,i>>1),s=Math.max(1,s>>1),l&&(n=Math.max(1,n>>1))}_applySamplingMode(){var n;const t=this._descriptor,r=(n=t.context)==null?void 0:n.gl;let i=t.samplingMode,s=t.samplingMode;i===et.LINEAR_MIPMAP_NEAREST||i===et.LINEAR_MIPMAP_LINEAR?(i=et.LINEAR,t.hasMipmap||(s=et.LINEAR)):i!==et.NEAREST_MIPMAP_NEAREST&&i!==et.NEAREST_MIPMAP_LINEAR||(i=et.NEAREST,t.hasMipmap||(s=et.NEAREST)),r.texParameteri(t.target,r.TEXTURE_MAG_FILTER,i),r.texParameteri(t.target,r.TEXTURE_MIN_FILTER,s)}_applyWrapMode(){var i;const t=this._descriptor,r=(i=t.context)==null?void 0:i.gl;typeof t.wrapMode=="number"?(r.texParameteri(t.target,r.TEXTURE_WRAP_S,t.wrapMode),r.texParameteri(t.target,r.TEXTURE_WRAP_T,t.wrapMode)):(r.texParameteri(t.target,r.TEXTURE_WRAP_S,t.wrapMode.s),r.texParameteri(t.target,r.TEXTURE_WRAP_T,t.wrapMode.t))}_applyAnisotropicFilteringParameters(){const t=this._descriptor,r=t.context.capabilities.textureFilterAnisotropic;r&&t.context.gl.texParameterf(t.target,r.TEXTURE_MAX_ANISOTROPY,t.maxAnisotropy??1)}};B1.TEXTURE_UNIT_FOR_UPDATES=0,B1.compressionWorkerHandle=null;const xy=()=>U.getLogger("esri.views.2d.engine.webgl.painter.highlight.HighlightGradient");function RW(e,t){t.fillColor[0]=e.color.r/255,t.fillColor[1]=e.color.g/255,t.fillColor[2]=e.color.b/255,t.fillColor[3]=e.color.a,e.haloColor?(t.outlineColor[0]=e.haloColor.r/255,t.outlineColor[1]=e.haloColor.g/255,t.outlineColor[2]=e.haloColor.b/255,t.outlineColor[3]=e.haloColor.a):(t.outlineColor[0]=t.fillColor[0],t.outlineColor[1]=t.fillColor[1],t.outlineColor[2]=t.fillColor[2],t.outlineColor[3]=t.fillColor[3]),t.fillColor[3]*=e.fillOpacity,t.outlineColor[3]*=e.haloOpacity,t.fillColor[0]*=t.fillColor[3],t.fillColor[1]*=t.fillColor[3],t.fillColor[2]*=t.fillColor[3],t.outlineColor[0]*=t.outlineColor[3],t.outlineColor[1]*=t.outlineColor[3],t.outlineColor[2]*=t.outlineColor[3],t.outlineWidth=(1-e.haloBlur)*e.haloWidth,t.outerHaloWidth=e.haloBlur*e.haloWidth/2,t.innerHaloWidth=e.haloBlur*e.haloWidth/2,t.outlinePosition=0}const kW=[0,0,0,0];let lC=class{constructor(){this.type="single",this._highlightOptions=new dn,this._convertedHighlightOptions={fillColor:[0,0,0,0],outlineColor:[0,0,0,0],outlinePosition:0,outlineWidth:0,innerHaloWidth:0,outerHaloWidth:0},this._optionsShadeTexKey="",this._texelData=new Uint8Array(4*Kl),this._minMaxDistance=[0,0]}setHighlightOptions(t){this._highlightOptions=t}applyHighlightOptions(t,r){this._updateGradientTexture(t),t.bindTexture(this._shadeTex,yW),r.setUniform2fv("u_minMaxDistance",this._minMaxDistance)}destroy(){var t;(t=this._shadeTex)==null||t.dispose(),this._shadeTex=null}getReasonsWithGradients(){return[{activeReasons:(1<<iC)-1,activeGradient:this}]}_updateGradientTexture(t){const r=NW(this._highlightOptions);if(r===this._optionsShadeTexKey)return;this._optionsShadeTexKey=r,RW(this._highlightOptions,this._convertedHighlightOptions);const i=this._convertedHighlightOptions,s=i.outlinePosition-i.outlineWidth/2-i.outerHaloWidth,n=i.outlinePosition-i.outlineWidth/2,o=i.outlinePosition+i.outlineWidth/2,a=i.outlinePosition+i.outlineWidth/2+i.innerHaloWidth,l=Math.sqrt(Math.PI/2)*wW,h=Math.abs(s)>l?Math.round(10*(Math.abs(s)-l))/10:0,p=Math.abs(a)>l?Math.round(10*(Math.abs(a)-l))/10:0;let f;h&&!p?xy().error("The outer rim of the highlight is "+h+"px away from the edge of the feature; consider reducing some width values or shifting the outline position towards positive values (inwards)."):!h&&p?xy().error("The inner rim of the highlight is "+p+"px away from the edge of the feature; consider reducing some width values or shifting the outline position towards negative values (outwards)."):h&&p&&xy().error("The highlight is "+Math.max(h,p)+"px away from the edge of the feature; consider reducing some width values.");const m=[void 0,void 0,void 0,void 0];function y(v,w,b){m[0]=(1-b)*v[0]+b*w[0],m[1]=(1-b)*v[1]+b*w[1],m[2]=(1-b)*v[2]+b*w[2],m[3]=(1-b)*v[3]+b*w[3]}const{_texelData:_}=this;for(let v=0;v<Kl;++v)f=s+v/(Kl-1)*(a-s),f<s?(m[0]=0,m[1]=0,m[2]=0,m[3]=0):f<n?y(kW,i.outlineColor,(f-s)/(n-s)):f<o?[m[0],m[1],m[2],m[3]]=i.outlineColor:f<a?y(i.outlineColor,i.fillColor,(f-o)/(a-o)):[m[0],m[1],m[2],m[3]]=i.fillColor,_[4*v]=255*m[0],_[4*v+1]=255*m[1],_[4*v+2]=255*m[2],_[4*v+3]=255*m[3];if(this._minMaxDistance[0]=s,this._minMaxDistance[1]=a,!this._shadeTex){const v=new oC;v.wrapMode=lf.CLAMP_TO_EDGE,v.width=Kl,v.height=1,this._shadeTex=new B1(t,v)}this._shadeTex.updateData(0,0,0,Kl,1,this._texelData)}};function NW(e){return`${e.color};${e.haloColor};${e.haloOpacity};${e.fillOpacity};${e.haloWidth};${e.haloBlur}`}let LW=class{constructor(){this.type="multi",this.gradients=[]}setHighlightOptions(t){for(let r=0;r<t.length;r++)this.gradients[r]||(this.gradients[r]=new lC),this.gradients[r].setHighlightOptions(t[r]);for(let r=t.length+1;r<this.gradients.length;r++)this.gradients[r].destroy();this.gradients.length=t.length}destroy(){for(const t of this.gradients)t.destroy()}getReasonsWithGradients(){let t=1;const r=[];for(let i=0;i<this.gradients.length;i++){const s=this.gradients[i];r.push({activeReasons:t,activeGradient:s}),t<<=1}return r}};var vT,wT,bT,ST,TT,$T,cf,ET,MT;(function(e){e[e.FILL=0]="FILL",e[e.LINE=1]="LINE",e[e.MARKER=2]="MARKER",e[e.TEXT=3]="TEXT",e[e.LABEL=4]="LABEL"})(vT||(vT={})),function(e){e[e.NONE=0]="NONE",e[e.MAP=1]="MAP",e[e.LABEL=2]="LABEL",e[e.LABEL_ALPHA=4]="LABEL_ALPHA",e[e.HITTEST=8]="HITTEST",e[e.HIGHLIGHT=16]="HIGHLIGHT",e[e.CLIP=32]="CLIP",e[e.DEBUG=64]="DEBUG",e[e.NUM_DRAW_PHASES=9]="NUM_DRAW_PHASES"}(wT||(wT={})),function(e){e[e.SIZE=0]="SIZE",e[e.COLOR=1]="COLOR",e[e.OPACITY=2]="OPACITY",e[e.ROTATION=3]="ROTATION"}(bT||(bT={})),function(e){e[e.MINMAX_TARGETS_OUTLINE=128]="MINMAX_TARGETS_OUTLINE",e[e.SCALE_TARGETS_OUTLINE=256]="SCALE_TARGETS_OUTLINE",e[e.FIELD_TARGETS_OUTLINE=512]="FIELD_TARGETS_OUTLINE",e[e.UNIT_TARGETS_OUTLINE=1024]="UNIT_TARGETS_OUTLINE"}(ST||(ST={})),function(e){e[e.SPRITE=0]="SPRITE",e[e.GLYPH=1]="GLYPH"}(TT||(TT={})),function(e){e[e.DEFAULT=0]="DEFAULT",e[e.SIMPLE=1]="SIMPLE",e[e.DOT_DENSITY=2]="DOT_DENSITY",e[e.OUTLINE_FILL=3]="OUTLINE_FILL",e[e.OUTLINE_FILL_SIMPLE=4]="OUTLINE_FILL_SIMPLE",e[e.HEATMAP=5]="HEATMAP",e[e.PIE_CHART=6]="PIE_CHART"}($T||($T={})),function(e){e[e.All=0]="All",e[e.Highlight=1]="Highlight",e[e.InsideEffect=2]="InsideEffect",e[e.OutsideEffect=3]="OutsideEffect"}(cf||(cf={})),function(e){e[e.BATCHING=0]="BATCHING",e[e.STRICT_ORDER=1]="STRICT_ORDER",e[e.STRICT_MARKERS_AND_TEXT=2]="STRICT_MARKERS_AND_TEXT"}(ET||(ET={})),function(e){e[e.FILL=0]="FILL",e[e.LINE=1]="LINE",e[e.MARKER=2]="MARKER",e[e.TEXT=3]="TEXT"}(MT||(MT={}));const uC={color:{write:[!0,!0,!0,!0],blendMode:"composite"},depth:!1,stencil:{write:!1,test:{ref:e=>e.stencilRef,compare:z1.EQUAL,mask:255,op:{fail:yc.KEEP,zFail:yc.KEEP,zPass:yc.REPLACE}}}},DW={color:{write:[!0,!0,!0,!0],blendMode:"additive"},depth:!1,stencil:!1},FW={...uC,color:{write:[!0,!0,!0,!0],blendMode:"delete"}};function UW({pixelRatio:e,state:t,displayLevel:r,requiredLevel:i},s){const n=1/2**(r-s.key.level),o=1/2**(i-s.key.level);return{displayMat3:t.displayMat3,displayViewMat3:t.displayViewMat3,displayViewScreenMat3:s.transforms.displayViewScreenMat3,viewMat3:t.viewMat3,tileMat3:s.transforms.tileMat3,displayZoomFactor:n,requiredZoomFactor:o,tileOffset:[s.x,s.y],currentScale:t.scale,currentZoom:r,metersPerSRUnit:Ni(t.spatialReference),rotation:t.rotation,pixelRatio:e}}function cC(e){var t;return((t=e.passOptions)==null?void 0:t.type)==="highlight"}function hC(e){var t;return((t=e.passOptions)==null?void 0:t.type)==="hittest"}function jW(e){if(!hC(e))return null;const{position:t,distance:r,smallSymbolDistance:i,smallSymbolSizeThreshold:s}=e.passOptions;return{position:t,distance:r,smallSymbolDistance:i,smallSymbolSizeThreshold:s}}function GW(e){if(!cC(e))return null;const{activeReasons:t,highlightAll:r}=e.passOptions;return{activeReasons:t,highlightAll:r?1:0}}function Qne(e,t,r){const i={};for(const s in r)r[s]instanceof Function?i[s]=r[s](e,t):i[s]=r[s];return i}function eoe(e,t){const{attributeView:r,context:i}=e;return{storage:r.getUniforms(i),view:UW(e,t),hittestRequest:jW(e),highlight:GW(e)}}function toe(e){return{inside:e.selection===cf.InsideEffect,outside:e.selection===cf.OutsideEffect}}function zW(e){return hC(e)?DW:cC(e)&&e.passOptions.stepType==="clear"?FW:uC}function roe(e){const{row:t,col:r}=e.key,i=r*XS,s=t*XS;return{tileOffsetFromLocalOrigin:[i%rd,s%rd],maxIntsToLocalOrigin:[Math.floor(i/rd),Math.floor(s/rd)]}}const VW=new it({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryMultiPatch:"multipatch",mesh:"mesh"});function ioe(e){return VW.toJSON(e)}function soe(e){const{bandCount:t,attributeTable:r,colormap:i,pixelType:s}=e.raster.rasterInfo;return t===1&&(r!=null||i!=null||s==="u8"||s==="s8")}function BW(e,t){return t==null?(e==null||e.destroy(),null):((e==null?void 0:e.type)==="single"&&Array.isArray(t)&&(e.destroy(),e=null),(e==null?void 0:e.type)!=="multi"||Array.isArray(t)||(e.destroy(),e=null),e||(e=Array.isArray(t)?new LW:new lC),Array.isArray(t)?e.type==="multi"&&e.setHighlightOptions(t):e.type==="single"&&e.setHighlightOptions(t),e)}function noe(e,t,r,i){const{painter:s,highlightGradient:n}=e,{highlight:o}=s.effects;if(!n)return;const a=e.passOptions,l=n.getReasonsWithGradients();for(let h=0;h<l.length;h++){const p={...e,passOptions:{type:"highlight",activeGradient:l[h].activeGradient,activeReasons:l[h].activeReasons,stepType:"burn",highlightAll:t}};if(o.bind(p),r(p),h<l.length-1){let m=0;for(let y=h+1;y<l.length;y++)m|=l[y].activeReasons;r({...e,passOptions:{type:"highlight",activeGradient:l[h].activeGradient,activeReasons:m,stepType:"clear",highlightAll:t}})}const f={...e,passOptions:{type:"highlight",activeGradient:l[h].activeGradient,activeReasons:l[h].activeReasons,stepType:"draw",highlightAll:t}};s.setPipelineState(zW(e)),s.updatePipelineState(e.context),o.draw(f),o.unbind()}e.passOptions=a}function ooe(e){if(!e)return[];let t=i7(e)?[e]:H.isCollection(e)?e.toArray():Array.isArray(e)?e:[];return t=t==null?void 0:t.filter(tl),((t==null?void 0:t.length)??0)===0?[]:t}const nd=e=>parseFloat(e)/100;function HW(e,t,r){const i=typeof e.left=="string"?nd(e.left)*t:e.left,s=typeof e.right=="string"?nd(e.right)*t:e.right,n=typeof e.top=="string"?nd(e.top)*r:e.top,o=typeof e.bottom=="string"?nd(e.bottom)*r:e.bottom,a=n;return{xmin:i,xmax:Math.max(t-s,i),ymin:a,ymax:Math.max(r-o,n)}}function dC(e,t,r,i){switch(t.type){case"rect":{const{width:s,height:n}=e,{xmin:o,xmax:a,ymin:l,ymax:h}=HW(t,s,n),{x:p,y:f}=r;return p>o&&p<a&&f>l&&f<h}case"path":return t.path.length===0||!Array.isArray(t.path[0][0])||L_(t.path,[r.x,r.y]);case"geometry":return t.geometry==null||(t.geometry.type==="polygon"?N_(t.geometry,i):th(t.geometry,i))}}function qW(e){if(!e.highlights)return null;const t=e.highlights.findIndex(r=>r.name==="default");return t===-1?null:e.highlights.items[t]}function WW(e,t){if(!e.highlights){if(!t)return;e.highlights=new H([new dn])}const r=e.highlights.findIndex(i=>i.name==="default");t?e.highlights.items[r].assignFrom(t):(e.highlights.removeAt(r),e.highlights.length===0&&(e.highlights=null))}async function ZW(e,t,r){const i=RP(t)?IP(e,t):t;if(!e.ready||isNaN(i.x)||isNaN(i.y))return{screenPoint:i,results:[]};let s=new Set;const n=new Set;let o=!1,a=null,l=null;r!=null&&r.include?AT(r.include,xT(e,m=>{s.add(m),Ay(m,y=>n.add(y))},(m,y)=>{n.add(m),s.add(y)},m=>{a||(a=new Set),a.add(m)},m=>s.add(m),()=>o=!0)):(o=!0,s=new Set(e.allLayerViews),s.forEach(m=>{Ay(m,y=>n.add(y))})),r!=null&&r.exclude&&AT(r.exclude,xT(e,m=>{s.delete(m),Ay(m,y=>n.delete(y))},m=>n.delete(m),m=>{l||(l=new Set),l.add(m)}));const h=e.toMap(i),p=e.allLayerViews.filter(m=>!m.suspended&&s.has(m)&&m.clips.every(y=>dC(e,y,i,h))).reverse();let f=[...o?e.graphicsView.hitTest(h).map(m=>({type:"graphic",graphic:m,layer:null,mapPoint:h})):[],...await Promise.all(p.map(m=>m.hitTest(h,i)).toArray())].filter(tl).flat().filter(tl);return f=f.filter(m=>{var y;return m.type!=="graphic"||((y=m.layer)==null?void 0:y.type)!=="subtype-group"||n.has(m.graphic.layer)}),a&&(f=f.filter(m=>!("graphic"in m)||!m.graphic||(a==null?void 0:a.has(H1(m.graphic))))),l&&(f=f.filter(m=>!("graphic"in m)||!m.graphic||!(l!=null&&l.has(H1(m.graphic))))),{screenPoint:i,results:f}}function xT(e,t,r,i,s,n){return o=>{if(o instanceof c1){if(o.layer===e)n==null||n();else{const a=e.allLayerViews.find(l=>l.layer===o.layer);a&&(s==null||s(a))}i(H1(o))}else if(!("layer"in o&&"element"in o))if(o.type==="subtype-sublayer"){const a=e.allLayerViews.find(l=>l.layer===o.parent);a&&r(o,a)}else{const a=e.allLayerViews.find(l=>l.layer===o);a&&t(a)}}}function AT(e,t){if(e)if(hp(e))for(const r of e)if(hp(r))for(const i of r)t(i);else t(r);else t(e)}function H1(e){var r,i;const t=e.getObjectId();return t?`${((r=e.layer)==null?void 0:r.uid)??((i=e.sourceLayer)==null?void 0:i.uid)??"MapView"}/${t}`:`"MapView/${e.uid}`}function Ay({layer:e},t){(e==null?void 0:e.type)==="subtype-group"&&e.sublayers.forEach(r=>{t(r)})}let Xl=null,hf=!0;function JW(e,t,r){if(!e||!t)throw new Error("Cannot construct image data without dimensions");if(hf)try{return new ImageData(e,t)}catch{hf=!1}return pC(e,t,r)}function aoe(e,t,r,i){if(!t||!r)throw new Error("Cannot construct image data without dimensions");if(hf)try{return new ImageData(e,t,r)}catch{hf=!1}const s=pC(t,r,i);return s.data.set(e,0),s}function YW(){return Xl||(Xl=document.createElement("canvas"),Xl.width=1,Xl.height=1),Xl}function pC(e,t,r){return r||(r=YW()),r.getContext("2d").createImageData(e,t)}async function KW(e,t){const r=window.URL.createObjectURL(e);try{const{data:i}=await We(r,{...t,responseType:"image"});return i}catch(i){throw qt(i)?i:new I("invalid-image",`Could not fetch requested image at ${r}`)}finally{window.URL.revokeObjectURL(r)}}async function loe(e,t){const{arrayBuffer:r,mediaType:i}=await XW(e,t),s=i==="image/png";if(i==="image/gif"){const{isAnimatedGIF:n,parseGif:o}=await N(()=>import("./gif-Ct6pk3C6.js"),[]);if(n(r))return o(r,t)}if(s){const{isAnimatedPNG:n,parseApng:o}=await N(()=>import("./apng-C2oGlM3M.js"),__vite__mapDeps([338,3]));if(n(r))return o(r,t)}return KW(new Blob([r],{type:i}),t)}async function XW(e,t){var s;const r=nl(e);if(r!=null&&r.isBase64)return{arrayBuffer:$E(r.data),mediaType:r.mediaType};const i=await We(e,{responseType:"array-buffer",...t});return{arrayBuffer:i.data,mediaType:((s=i.getHeader)==null?void 0:s.call(i,"Content-Type"))??""}}function fC(e,t,r){const{ctx:i,canvas:s}=yC(e,r),n=i.getImageData(0,0,e.width,e.height),o=_C(s,t);return gC(s),{dataUrl:o,data:n}}function mC(e,t){const{ctx:r,canvas:i}=yC(e,t),s=r.getImageData(0,0,e.width,e.height);return gC(i),s}function yC(e,t){const r=QW();t.premultipliedAlpha&&iZ(e),r.width=e.width,r.height=e.height;const i=r.getContext("2d",{willReadFrequently:!0});return i.putImageData(e,0,0),t.flipY&&rZ(i),{ctx:i,canvas:r}}function gC(e){e.width=0,e.height=0}function QW(){return Py==null&&(Py=document.createElement("canvas")),Py}let Py=null;function _C(e,t){const r=sZ[t.format],i=t.quality/100;return e.toDataURL(r,i)}function vC(e,t){const r=tZ(e),i=oZ[r];return{format:r,quality:si(t??i,0,100)}}function wC(e,t){return t/Math.max(e[0],e[1])}function eZ(e,t,r,i=0,s=0,n=e.width-i,o=e.height-s,a=!1){const{data:l}=e,{width:h,height:p,data:f}=t,m=n/h,y=o/p,_=Math.ceil(m/2),v=Math.ceil(y/2),w=e.width;for(let b=0;b<p;b++)for(let M=0;M<h;M++){const $=4*(M+(a?p-b-1:b)*h);let E=0,P=0,O=0,L=0,k=0,z=0;const B=(b+.5)*y;for(let K=Math.floor(b*y);K<(b+1)*y;K++){const ie=Math.abs(B-(K+.5))/v,we=(M+.5)*m,X=ie*ie;for(let Et=Math.floor(M*m);Et<(M+1)*m;Et++){const vs=Math.abs(we-(Et+.5))/_,hr=Math.sqrt(X+vs*vs);if(hr>=1)continue;let be=2*hr*hr*hr-3*hr*hr+1;const Di=4*(i+Et+(s+K)*w);z+=be*l[Di+3],P+=be,!r&&l[Di+3]<255&&(be=be*l[Di+3]/255),O+=be*l[Di],L+=be*l[Di+1],k+=be*l[Di+2],E+=be}}f[$]=O/E,f[$+1]=L/E,f[$+2]=k/E,f[$+3]=z/P}return t}function tZ(e){switch(e){case"png":case"jpg":case"jpeg":return e;default:return nZ}}function rZ(e){e.save(),e.globalCompositeOperation="copy",e.scale(1,-1),e.translate(0,-e.canvas.height),e.drawImage(e.canvas,0,0),e.restore()}function iZ(e){const t=e.data,r=t.length;for(let i=0;i<r;i+=4){const s=t[i+3];if(s!==255&&s>0){const n=255/s;t[i]=t[i]*n,t[i+1]=t[i+1]*n,t[i+2]=t[i+2]*n}}}const sZ={png:"image/png",jpg:"image/jpeg",jpeg:"image/jpeg"},PT=98,nZ="png",oZ={png:100,jpg:PT,jpeg:PT},uoe=Object.freeze(Object.defineProperty({__proto__:null,createEmptyImageData:JW,encode:fC,encodeData:mC,getFormatAndQuality:vC,getMaximumResolutionScale:wC,resampleHermite:eZ,toDataUrl:_C},Symbol.toStringTag,{value:"Module"})),bC={flipY:!0,premultipliedAlpha:!0};async function aZ(e,t){const r=await SC(e,t),{format:i,quality:s}=vC(t==null?void 0:t.format,t==null?void 0:t.quality);return fC(r,{format:i,quality:s},bC)}async function lZ(e,t){const r=await SC(e,t);return mC(r,bC)}function SC(e,t){const r=hZ(t||{},cZ(e.stage,e.size),e.size,e.padding),i=uZ(t,e.allLayerViews);return e.stage.takeScreenshot(r,i,e.backgroundColor,t==null?void 0:t.rotation)}function uZ(e={},t){if(!e.layers)return;const r=[];return e.layers.forEach(i=>{const s=t.find(n=>n.layer.id===i.id);s!=null&&s.container&&r.push(s.container)}),r}function cZ(e,t){return Math.min(4,wC(t,Math.min(4096,e.context.parameters.maxTextureSize)))}function hZ(e,t,r,i){e.ignorePadding&&(i={left:0,right:0,top:0,bottom:0});let s=null;e.width!=null&&e.height!=null?s=[e.width,e.height]:e.width==null&&e.height!=null?s=[e.height,e.height]:e.width!=null&&e.height==null?s=[e.width,e.width]:e.width==null&&e.height==null&&(s=null);const n=r[0]-(i.left+i.right),o=r[1]-(i.top+i.bottom);let a,l,h=e.area||{x:0,y:0,width:n,height:o};if(s){const p=n/o,f=s[0]/s[1];if(f>p){const m=h.width/f;h={x:h.x,y:Math.round(h.y+(h.height-m)/2),width:h.width,height:Math.round(m)}}else{const m=h.height*f;h={x:Math.round(h.x+(h.width-m)/2),y:h.y,width:Math.round(m),height:h.height}}}else s=[h.width,h.height];return s[0]>h.width?(a=Math.min(s[0]/h.width,t),l=s[0]/h.width/a):(a=1,l=s[0]/h.width),{cropArea:{x:Math.round((h.x+i.left)*a),y:Math.round((h.y+i.top)*a),width:Math.round(h.width*a),height:Math.round(h.height*a)},outputScale:l,resolutionScale:a}}const dZ=e=>e.includes("Brush");let TC=class{constructor(){this._names=new Map}begin(t){this._names.has(t)||(this._names.set(t,!1),dZ(t)&&this.record("Esri.FirstDraw"),performance.mark(`Esri.${t}.Start`))}end(t){this._names.has(t)&&!this._names.get(t)&&(this._names.set(t,!0),performance.mark(`Esri.${t}.End`))}record(t){this._names.has(t)||(this._names.set(t,!0),performance.mark(`Esri.${t}`))}};function pZ(e,t){const r=t.debugRendererInfo&&e.getExtension("WEBGL_debug_renderer_info");return r?{getUnmaskedRendererWebGL:()=>e.getParameter(r.UNMASKED_RENDERER_WEBGL)}:null}let OT;function fZ(){return OT??(OT=gZ()),OT}let mZ=class{constructor(){this.available=!1,this.majorPerformanceCaveat=!1,this.maxTextureSize=0,this.supportsVertexShaderSamplers=!1,this.supportsHighPrecisionFragment=!1,this.supportsColorBufferFloat=!1,this.supportsColorBufferFloatBlend=!1,this.supportsColorBufferHalfFloat=!1,this.unmaskedRenderer="unloaded"}};function yZ(e){if(typeof WebGL2RenderingContext>"u")return null;const t=document.createElement("canvas");if(!t)return null;let r=t.getContext("webgl2",{failIfMajorPerformanceCaveat:!0});if(r==null&&(r=t.getContext("webgl2"),r!=null&&(e.majorPerformanceCaveat=!0)),r==null)return r;e.available=!0,e.maxTextureSize=r.getParameter(r.MAX_TEXTURE_SIZE),e.supportsVertexShaderSamplers=r.getParameter(r.MAX_VERTEX_TEXTURE_IMAGE_UNITS)>0;const i=r.getShaderPrecisionFormat(r.FRAGMENT_SHADER,r.HIGH_FLOAT);return i&&(e.supportsHighPrecisionFragment=i.precision>0),r}function gZ(){var r;const e=new mZ,t=yZ(e);return t==null||(e.supportsColorBufferFloat=t.getExtension("EXT_color_buffer_float")!==null,e.supportsColorBufferFloatBlend=t.getExtension("EXT_float_blend")!==null,e.supportsColorBufferHalfFloat=e.supportsColorBufferFloat||t.getExtension("EXT_color_buffer_half_float")!==null,e.unmaskedRenderer=((r=pZ(t,{debugRendererInfo:!0}))==null?void 0:r.getUnmaskedRendererWebGL())??"unknown"),e}function _Z(e){const t=fZ();return t.available?e==="3d"&&t.majorPerformanceCaveat?new I("webgl:major-performance-caveat-detected",`Your WebGL implementation (${t.unmaskedRenderer}) doesn't seem to support hardware accelerated rendering. Check your browser settings or if your GPU is in a blocklist.`):t.supportsHighPrecisionFragment?t.supportsVertexShaderSamplers?null:new I("webgl:vertex-shader-samplers-required","WebGL support for vertex shader samplers is required but not supported."):new I("webgl:high-precision-fragment-required","WebGL support for high precision fragment shaders is required but not supported."):new I("webgl:required","WebGL2 is required but not supported.",new Error().stack)}function vZ(e){return e&&"nodeType"in e}function wZ(e){return e&&typeof e.render=="function"}const CT={component:"esri-component"};let uo=class extends W{constructor(){super(...arguments),this.widget=null}destroy(){var t;this.node=null,(t=this.widget)==null||t.destroy()}get id(){var t,r;return this._get("id")??((t=this.widget)==null?void 0:t.id)??((r=this.node)==null?void 0:r.id)}set id(t){this._set("id",t)}set node(t){const r=this._get("node");t!==r&&(t&&t.classList.add(CT.component),r&&r.classList.remove(CT.component),this._set("node",t))}castNode(t){var r;return(r=this.widget)==null||r.destroy(),t?typeof t=="string"||vZ(t)?(this._set("widget",null),mv(t)):(wZ(t)&&!t.domNode&&(t.domNode=document.createElement("div")),this._set("widget",t),t.domNode):(this._set("widget",null),null)}};c([d()],uo.prototype,"id",null),c([d()],uo.prototype,"node",null),c([rt("node")],uo.prototype,"castNode",null),c([d({readOnly:!0})],uo.prototype,"widget",void 0),uo=c([S("esri.views.ui.Component")],uo);const ip=uo,$C="calcite-mode-";function bZ(){return getComputedStyle(document.body).getPropertyValue("--esri-calcite-mode-name").replaceAll(/\s|'|"/g,"")}function SZ(){return bZ().startsWith("dark")}function TZ(){return`${$C}${SZ()?"dark":"light"}`}function $Z(e){EZ(e),e.classList.add(TZ())}function EZ(e){Array.from(e.classList).forEach(t=>{t.startsWith($C)&&e.classList.remove(t)})}const MZ={left:0,top:0,bottom:0,right:0},EC={bottom:30,top:15,right:15,left:15},Gi="esri-ui",Lt={ui:Gi,corner:`${Gi}-corner`,innerContainer:`${Gi}-inner-container`,manualContainer:`${Gi}-manual-container`,cornerContainer:`${Gi}-corner-container`,topLeft:`${Gi}-top-left`,topRight:`${Gi}-top-right`,bottomLeft:`${Gi}-bottom-left`,bottomRight:`${Gi}-bottom-right`};function xZ(e){return e&&!e._started&&typeof e.postMixInProperties=="function"&&typeof e.buildRendering=="function"&&typeof e.postCreate=="function"&&typeof e.startup=="function"}function od(e){return e===0?"0":`${e}px`}function Oy(e){const t=typeof e=="object"&&e!==null&&Object.getPrototypeOf(e);return(t===null||t===Object.prototype)&&("component"in e||"index"in e||"position"in e)?e:null}function Cy(e,{top:t,bottom:r,left:i,right:s}){e.style.top=t,e.style.bottom=r,e.style.left=i,e.style.right=s}let vi=class extends Ai.EventedAccessor{constructor(t){super(t),this._cornerNameToContainerLookup={},this._positionNameToContainerLookup={},this._components=new Array,this._componentMap=new Map,this._removeWidgetHandleKey=Symbol("componentOnRemoveSymbol"),this._locale=Bt(),this.view=null,this._applyViewPadding=()=>{const r=this.container;r&&Cy(r,this._toPixelPosition(this._getViewPadding()))},this._applyUIPadding=()=>{const r=this._innerContainer;r&&Cy(r,this._toPixelPosition(this.padding))},this._initContainers()}initialize(){this.addHandles([Q(()=>{var t;return[(t=this.view)==null?void 0:t.padding,this.container]},this._applyViewPadding,Tt),Q(()=>this.padding,this._applyUIPadding,Tt),Q(()=>[this.container,this._locale],([t,r])=>{t&&t.setAttribute("lang",r)},Tt),T3(t=>{this._locale=t})])}destroy(){this.container=null;for(const t of this._components)t.destroy();this._components.length=0,this._componentMap.clear()}set container(t){const r=this._get("container");t!==r&&(t&&(t.classList.add(Lt.ui),$Z(t),this._attachContainers(t)),r&&(r.classList.remove(Lt.ui),Cy(r,{top:"",bottom:"",left:"",right:""}),r.textContent=""),this._set("container",t))}get height(){var n;const t=((n=this.view)==null?void 0:n.height)??0;if(t===0)return t;const r=this._getViewPadding(),{top:i,bottom:s}=r;return Math.max(t-i-s,0)}get padding(){return this._get("padding")}set padding(t){this._overrideIfSome("padding",t)}castPadding(t){return typeof t=="number"?{bottom:t,top:t,right:t,left:t}:{...EC,...t}}get width(){var n;const t=((n=this.view)==null?void 0:n.width)??0;if(t===0)return t;const r=this._getViewPadding(),{left:i,right:s}=r;return Math.max(t-i-s,0)}add(t,r){let i,s,n;if(Array.isArray(t))return void t.forEach(a=>this.add(a,r));const o=Oy(t);o&&({index:i,position:r,component:t,key:s}=o),r&&typeof r=="object"&&({index:i,key:s,position:r,internal:n}=r),!t||r&&!this._isValidPosition(r)||this._add(t,r,i,s,n)}remove(t,r){var s,n;if(!t)return;if(Array.isArray(t))return t.map(o=>this.remove(o,r));const i=this._find(t);if(i){if(this._componentMap.has(i)&&((s=this._componentMap.get(i))==null?void 0:s.key)!==r)return;const o=this._components.indexOf(i),a=i.node.parentNode;return a==null||a.removeChild(i.node),this._componentMap.delete(i),(n=i.widget)==null||n.removeHandlesReference(this._removeWidgetHandleKey),this._components.splice(o,1)[0]}}empty(t,r={removeInternal:!1}){if(Array.isArray(t)){for(const n of t)this.empty(n,r);return}const i=this._positionNameToContainerLookup[t??"manual"],s=Array.prototype.slice.call(i.children).map(n=>this._findByNode(n)).filter(n=>{var o;return n==null?!1:!(((o=this._componentMap.get(n))==null?void 0:o.internal)??!1)||r.removeInternal});for(const n of s)this.remove(n)}move(t,r){if(Array.isArray(t)&&t.forEach(o=>this.move(o,r)),!t)return;let i;const s=Oy(t)||Oy(r);if(s&&(i=s.index,r=s.position,t=s.component||t),r&&!this._isValidPosition(r))return;const n=this.remove(t);n&&this.add(n,{position:r,index:i})}find(t){if(!t)return null;const r=this._findById(t);return r&&(r.widget||r.node)}getComponents(t,r={includeInternal:!1}){return t?Array.isArray(t)?t.flatMap(i=>this._getComponentsAtPosition(i,r)):this._getComponentsAtPosition(t,r):this._components.filter(i=>{var s;return r.includeInternal||!((s=this._componentMap.get(i))!=null&&s.internal)}).map(({widget:i,node:s})=>i??s)}getPosition(t){for(const r in this._positionNameToContainerLookup)if(this._positionNameToContainerLookup[r].contains(t))return r;return null}_add(t,r,i,s,n){t instanceof ip||(t=new ip({node:t}));const{widget:o}=t;o!=null&&o instanceof W&&o.addHandles(ce(()=>{queueMicrotask(()=>this.remove(t))}),this._removeWidgetHandleKey),this._place({component:t,position:r,index:i}),this._components.push(t),this._componentMap.set(t,{key:s,internal:n})}_find(t){return t?t instanceof ip?this._findByComponent(t):typeof t=="string"?this._findById(t):this._findByNode(t.domNode||t):null}_getViewPadding(){var t;return((t=this.view)==null?void 0:t.padding)??MZ}_attachContainers(t){t.appendChild(this._innerContainer),t.appendChild(this._manualContainer)}_initContainers(){const t=document.createElement("div");t.classList.add(Lt.innerContainer,Lt.cornerContainer);const r=document.createElement("div");r.classList.add(Lt.innerContainer,Lt.manualContainer);const i=document.createElement("div");i.classList.add(Lt.topLeft,Lt.corner),t.appendChild(i);const s=document.createElement("div");s.classList.add(Lt.topRight,Lt.corner),t.appendChild(s);const n=document.createElement("div");n.classList.add(Lt.bottomLeft,Lt.corner),t.appendChild(n);const o=document.createElement("div");o.classList.add(Lt.bottomRight,Lt.corner),t.appendChild(o),this._innerContainer=t,this._manualContainer=r;const a=fU();this._cornerNameToContainerLookup={"top-left":i,"top-right":s,"bottom-left":n,"bottom-right":o,"top-leading":a?s:i,"top-trailing":a?i:s,"bottom-leading":a?o:n,"bottom-trailing":a?n:o},this._positionNameToContainerLookup={manual:r,...this._cornerNameToContainerLookup}}_isValidPosition(t){return!!this._positionNameToContainerLookup[t]}_place(t){var h,p;const r=t.position??"manual",{component:i,index:s}=t,n=this._positionNameToContainerLookup[r],o=s!=null&&s>-1;if(xZ(i.widget)&&i.widget.startup(),!o)return void n.appendChild(i.node);const a=Array.from(n.children);if(s===0){const{firstChild:f}=n;return void(f?(h=f.parentNode)==null?void 0:h.insertBefore(i.node,f):n.appendChild(i.node))}if(s>=a.length)return void n.appendChild(i.node);const l=a[s];(p=l.parentNode)==null||p.insertBefore(i.node,l)}_toPixelPosition(t){return{top:od(t.top),left:od(t.left),right:od(t.right),bottom:od(t.bottom)}}_findByComponent(t){return this._components.find(r=>r===t)??null}_findById(t){return this._components.find(({id:r})=>r===t)??null}_findByNode(t){return this._components.find(({node:r})=>r===t)??null}_getComponentsAtPosition(t,r){const i=this._positionNameToContainerLookup[t];return Array.prototype.slice.call(i.children).map(s=>this._findByNode(s)).filter(tl).filter(s=>{var n;return r.includeInternal||!((n=this._componentMap.get(s))!=null&&n.internal)}).map(({widget:s,node:n})=>s??n)}};c([d()],vi.prototype,"_locale",void 0),c([d()],vi.prototype,"container",null),c([d()],vi.prototype,"height",null),c([d({value:EC})],vi.prototype,"padding",null),c([rt("padding")],vi.prototype,"castPadding",null),c([d()],vi.prototype,"view",void 0),c([d()],vi.prototype,"width",null),vi=c([S("esri.views.ui.UI")],vi);const AZ=vi,PZ="randomUUID"in crypto;function nw(){if(PZ)return crypto.randomUUID();const e=crypto.getRandomValues(new Uint16Array(8));e[3]=4095&e[3]|16384,e[4]=16383&e[4]|32768;const t=r=>e[r].toString(16).padStart(4,"0");return t(0)+t(1)+"-"+t(2)+"-"+t(3)+"-"+t(4)+"-"+t(5)+t(6)+t(7)}function foe(){return`{${nw().toUpperCase()}}`}function moe(){return`{${nw()}}`}function yoe(e){const t=e.toUpperCase();return e[0]!=="{"?`{${t}}`:t}const OZ={handleInterceptedEvent:(e,t,r,i)=>(e.scheduleRender(),t.properties[`on${i.type}`].apply(t.properties.bind||r,[i]))},CZ={namespace:void 0,performanceLogger:()=>{},eventHandlerInterceptor:void 0,styleApplyer:(e,t,r)=>{t.charAt(0)==="-"?e.style.setProperty(t,r):e.style[t]=r}},IZ=e=>({...CZ,...e}),RZ=(e,t)=>{const r=[];for(;e&&e!==t;)r.push(e),e=e.parentNode;return r},kZ=(e,t)=>e.find(t),IT=(e,t,r=!1)=>{let i=e;return t.forEach((s,n)=>{const o=i!=null&&i.children?kZ(i.children,a=>a.domNode===s):void 0;r&&!o&&n!==t.length-1||(i=o)}),i},NZ=e=>{let t;const r={...OZ,...e},i=IZ(r),s=i.performanceLogger;let n,o=!0,a=!1;const l=[],h=[],p=(m,y,_)=>{var b;let v;i.eventHandlerInterceptor=(M,$,E,P)=>function(O){let L;s("domEvent",O);const k=RZ(O.currentTarget,v.domNode),z=k.some(K=>{var ie;return customElements.get((ie=K==null?void 0:K.tagName)==null?void 0:ie.toLowerCase())});if(O.eventPhase===Event.CAPTURING_PHASE||!z)k.reverse(),L=IT(v.getLastRender(),k);else{const K=O.composedPath(),ie=K.slice(K.indexOf(O.currentTarget),K.indexOf(v.domNode)).reverse();L=IT(v.getLastRender(),ie,!0)}let B;return L&&(B=r.handleInterceptedEvent(t,L,this,O)),s("domEventProcessed",O),B},(b=r.postProcessProjectionOptions)==null||b.call(r,i);const w=_();v=m(y,w,i),i.eventHandlerInterceptor=void 0,l.push(v),h.push(_),r.afterFirstVNodeRendered&&r.afterFirstVNodeRendered(v,w)};let f=()=>{if(n=void 0,o){o=!1,s("renderStart",void 0);for(let m=0;m<l.length;m++){const y=h[m]();s("rendered",void 0);try{l[m].update(y)}catch(_){console.error(_)}s("patched",void 0)}s("renderDone",void 0),o=!0}};return r.modifyDoRenderImplementation&&(f=r.modifyDoRenderImplementation(f,l,h)),t={renderNow:f,scheduleRender:()=>{n||a||(n=requestAnimationFrame(f))},stop:()=>{n&&(cancelAnimationFrame(n),n=void 0),a=!0},resume:()=>{a=!1,o=!0,t.scheduleRender()},append:(m,y)=>{p(ln.append,m,y)},insertBefore:(m,y)=>{p(ln.insertBefore,m,y)},merge:(m,y)=>{p(ln.merge,m,y)},replace:(m,y)=>{p(ln.replace,m,y)},detach:m=>{for(let y=0;y<h.length;y++)if(h[y]===m)return h.splice(y,1),l.splice(y,1)[0];throw new Error("renderFunction was not found")}},t};var LZ=":",Do=class{resolve(e){}reject(e){}constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}};function DZ(e,t){let r=e;for(;r;){if(r===t)return!0;if(!r.parentNode)return!1;r.parentNode instanceof ShadowRoot?r=r.parentNode.host:r=r.parentNode}return!1}function FZ(e,t,r){const{subscribe:i}=UZ(t);return i(s=>{s.some(o=>DZ(e,o.target))&&r()})}var Iy={};function UZ(e){const t=e.join(","),r=Iy[t];if(r!==void 0)return r;const i=new Set,s=new MutationObserver(o=>i.forEach(a=>a(o)));globalThis.document&&s.observe(document.documentElement,{attributes:!0,attributeFilter:e,subtree:!0});const n={subscribe(o){return i.add(o),()=>{i.delete(o),i.size===0&&(s.disconnect(),Iy[t]=void 0)}}};return Iy[t]=n,n}function jZ(e,t){var i,s;let r=e;for(;r;){const n=(i=r.closest)==null?void 0:i.call(r,t);if(n)return n;const o=(s=r.getRootNode)==null?void 0:s.call(r);if(o===globalThis.document)return null;r=o.host}return null}function GZ(e,t,r){const i=jZ(e,`[${t}]`);return(i==null?void 0:i.getAttribute(t))??r}function Re(e,t,...r){try{return e==null?void 0:e.call(t,...r)}catch(i){console.error(i,e)}}async function q1(e,t,...r){try{const i=e==null?void 0:e.call(t,...r);return i instanceof Promise?await i:i}catch(i){console.error(i,e)}}var zZ=["ar","bg","bs","ca","cs","da","de","el","en","es","et","fi","fr","he","hr","hu","id","it","ja","ko","lt","lv","nl","nb","no","pl","pt-BR","pt-PT","ro","ru","sk","sl","sr","sv","th","tr","uk","vi","zh-CN","zh-HK","zh-TW"],VZ=new Set(zZ),df="en",BZ={pt:"pt-PT",nb:"no",zh:"zh-CN"};async function HZ(e,t,r=""){const i=`${t}/${r}`,s=`${i}${e}.json`;return Ry[s]??(Ry[s]=MC(e,i)),await Ry[s]}var Ry={};async function MC(e,t){const r=`${t}${e}.json`;try{const i=await fetch(r);if(i.ok)return await i.json()}catch(i){return console.error(i),{}}return e===df?{}:await MC(df,t)}function xC(e){var r;const t=GZ(e,"lang",((r=globalThis.navigator)==null?void 0:r.language)||df);return{lang:t,t9nLocale:AC(t)}}function AC(e){const[t,r]=e.split("-"),i=t.toLowerCase();let s=i;return r&&(s=`${i}-${r.toUpperCase()}`),s=BZ[s]??s,VZ.has(s)?s:r?AC(i):df}function qZ(e,t,r,i){let s;const n=()=>void WZ(e,t(),i).then(o=>{((s==null?void 0:s.lang)!==o.lang||s.t9nLocale!==o.t9nLocale||s.t9nStrings!==o.t9nStrings)&&r(o),s=o}).catch(console.error);return queueMicrotask(n),FZ(e,["lang"],n)}async function WZ(e,t,r=e.tagName.toLowerCase().split("-").slice(1).join("-")){const{lang:i,t9nLocale:s}=xC(e),n=`${t}/${r}/t9n`,a=r===null?{}:await HZ(s,n,"messages.");return{lang:i,t9nLocale:s,t9nStrings:a}}var PC=e=>e.replace(ZZ,(t,r)=>`${r===0?"":"-"}${t.toLowerCase()}`),ZZ=/[A-Z]+(?![a-z])|[A-Z]/gu;function JZ(e,t){const r=t/YZ;let i=0;const s=setInterval(()=>{i+=r,i>=t&&(clearInterval(s),e())},r);return s}var YZ=4;function KZ(e){return e!==void 0}function OC(e){var r,i;let t=e;for(;t=t.parentNode??t.host;)if((r=t==null?void 0:t.constructor)!=null&&r.lumina){const s=t;return(i=s.manager)!=null&&i.loadedCalled||s._offspring.push(e),s._postLoad.promise}return!1}var sp=Object.defineProperty;function XZ(e){const t=e.split(LZ);return t.length===1?[t[0],PC(t[0])]:t}var QZ=globalThis.HTMLElement??XZ,el;el=class extends QZ{constructor(){super(),this._store={},this._pendingAttributes=[],this._postLoad=new Do,this._postLoaded=new Do,this._offspring=[],this._saveInstanceProperties();const t=this.constructor;t._LitConstructor?this._initializeComponent({a:t._LitConstructor}):t._loadPromise.then(this._initializeComponent.bind(this)).catch(r=>{this._postLoaded.reject(r),setTimeout(()=>{throw r})})}static _initializePrototype(){var t,r,i;(t=this._properties)==null||t.forEach(this._bindProp,this),(r=this._asyncMethods)==null||r.forEach(this._bindAsync,this),(i=this._syncMethods)==null||i.forEach(this._bindSync,this)}static _bindProp(t){sp(this.prototype,t,{configurable:!0,enumerable:!0,get(){return this._store[t]},set(r){this._store[t]=r}})}static _bindAsync(t){sp(this.prototype,t,{async value(...r){return this._litElement||await this._postLoaded.promise,await this._litElement[t](...r)},configurable:!0})}static _bindSync(t){sp(this.prototype,t,{value(...r){return this._litElement[t](...r)},configurable:!0})}get manager(){var t;return(t=this._litElement)==null?void 0:t.manager}_saveInstanceProperties(){var i;const t=this.constructor,r=this;(i=t._properties)==null||i.forEach(s=>{Object.hasOwn(this,s)&&(this._store[s]=r[s],delete r[s])})}attributeChangedCallback(t,r,i){var s;(s=this._litElement)==null||s.attributeChangedCallback(t,r,i),this._litElement||this._pendingAttributes.push(t)}connectedCallback(){var t,r;this._litElement?(r=(t=this._litElement).connectedCallback)==null||r.call(t):queueMicrotask(()=>{this._ancestorLoad=OC(this)})}disconnectedCallback(){var t,r;(r=(t=this._litElement)==null?void 0:t.disconnectedCallback)==null||r.call(t)}async componentOnReady(){return await this._postLoaded.promise,this}_initializeComponent(t){var f;const r=this.constructor,i=r._name,s=this._store,n=Object.values(t).find(m=>m.tagName===i),o=`${i}--lazy`;let a=n;for(;a&&!Object.hasOwn(a,"lumina");)a=Object.getPrototypeOf(a);tJ(a),!r._LitConstructor&&(r._LitConstructor=n,customElements.define(o,n)),n.lazy=this;const h=document.createElement(o);n.lazy=void 0,this._litElement=h,this._store=h,this._pendingAttributes.forEach(m=>{const y=this.getAttribute(m);h.attributeChangedCallback(m,null,y)}),Object.entries(s).forEach(eJ,h);const p=this.isConnected;(p||this._ancestorLoad)&&((f=h.connectedCallback)==null||f.call(h),p||h.disconnectedCallback())}addController(){}requestUpdate(){var t;(t=this._litElement)==null||t.requestUpdate()}},el.lumina=!0;function eJ([e,t]){this[e]=t}function tJ(e){const t=e.prototype,r=Element.prototype;Object.hasOwn(t,"isConnected")||(t.setAttribute=function(s,n){r.setAttribute.call(this.el,s,n)},t.removeAttribute=function(s){r.removeAttribute.call(this.el,s)},sp(t,"isConnected",{get(){return Reflect.get(r,"isConnected",this.el)}}))}var RT={};function rJ(e,t){var r;if(t){const i=e.constructor.elementProperties;e.manager.internals.members=Object.fromEntries(Array.from(i,([s,n])=>n.noAccessor?void 0:[s,[(n.readOnly?2048:0)|(n.state?32:16)]]).filter(KZ))}else{const i=e.constructor,s=((r=i.__registerControllers)==null?void 0:r.call(i,e))??void 0;if(i.__registerControllers=void 0,typeof s!="object")throw new Error("Failed to retrieve component meta");e.manager.internals.members=Object.fromEntries(Object.entries(s).filter(([n,[o]])=>(o&63)!==0))}}function iJ(e,t=8){return e==null||typeof e=="object"||typeof e=="function"?e:(t&4)!==0?e==="false"?!1:e===""||!!e:(t&2)!==0?Number.parseFloat(e):(t&1)!==0?String(e):e}var sJ=(e,t)=>{var r,i;return(i=(r=e.manager.internals.members)==null?void 0:r[t])==null?void 0:i[0]},ow=Symbol.for("controller"),nJ=e=>typeof e=="object"&&e!==null&&(ow in e||"hostConnected"in e||"hostDisconnected"in e||"hostUpdate"in e||"hostUpdated"in e),Ju;function Da(e){Ju!==e&&(Ju=e,queueMicrotask(()=>{Ju===e&&(Ju=void 0)}))}function wm(e){return Ju}var co=[];function CC(e){if(e===void 0){co=[];return}const t=co.indexOf(e);co=t===-1?[...co,e]:co.slice(0,t+1),queueMicrotask(()=>{co=[]})}function IC(){return co}var Fa;function oJ(e){Fa!==e&&(Fa=e,queueMicrotask(()=>{Fa===e&&(Fa=void 0)}))}function aJ(){const e=Fa;return Fa=void 0,e}var lJ=async(e,t)=>{const r=aw(e);if(r===void 0)return e;if(await r.ready,typeof t=="function"){const i=r.watchExports(s=>t(s,i))}return r.exports},uJ=async e=>{const t=aw(e);return await t.ready,t},aw=e=>{const r=wm().manager.internals.resolveExports(e);if(r!==void 0)return r;if(nJ(e))return e;const i=aJ();if(i!==void 0)return i},W1={readOnly:!1},pf=new WeakMap,RC;RC=ow;var lw=class{constructor(e){this._callbacks={hostConnected:[],hostDisconnected:[],hostLoad:[],hostLoaded:[],hostUpdate:[],hostUpdated:[],hostDestroy:[],hostLifecycle:[]},this._ready=new Do,this._lifecycleCleanups=[],this.connectedCalled=!1,this._loadCalled=!1,this.loadedCalled=!1,this[RC]=!0,this.ready=this._ready.promise,this._exports=NT(this),this._exportWatchers=new Set;const t=e??wm();this.component=t,this.component.addController(this),this.component.manager===void 0||(CC(this),queueMicrotask(()=>this.catchUpLifecycle()))}catchUpLifecycle(){const{manager:e}=this.component;e.connectedCalled&&!this.connectedCalled&&this.triggerConnected(),e._loadCalled&&this.triggerLoad().then(()=>{e.loadedCalled&&this.triggerLoaded()}).catch(console.error)}get exports(){return this._exports}set exports(e){const t=this._exports;t!==e&&(this._exports=e,this._exportWatchers.forEach(Re),this.connectedCalled&&this.assignedProperty!==!1&&this.component.requestUpdate(this.assignedProperty,t)),this._ready.resolve(e)}setProvisionalExports(e,t=!0){this._exports=t?NT(e):e,this._exportWatchers.forEach(Re)}watchExports(e){const t=()=>e(this._exports);return this._exportWatchers.add(t),()=>void this._exportWatchers.delete(t)}get use(){return Da(this.component),lJ}get useRef(){return Da(this.component),uJ}get useRefSync(){return Da(this.component),aw}controllerRemoved(){this.component.el.isConnected&&this.triggerDisconnected(),this.triggerDestroy()}onConnected(e){this._callbacks.hostConnected.push(e)}onDisconnected(e){this._callbacks.hostDisconnected.push(e)}onLoad(e){this._callbacks.hostLoad.push(e)}onLoaded(e){this._callbacks.hostLoaded.push(e)}onUpdate(e){this._callbacks.hostUpdate.push(e)}onUpdated(e){this._callbacks.hostUpdated.push(e)}onDestroy(e){this._callbacks.hostDestroy.push(e)}onLifecycle(e){this._callbacks.hostLifecycle.push(e),this.connectedCalled&&this.component.el.isConnected&&this._callLifecycle(e)}triggerConnected(){const e=this;e.hostConnected&&Re(e.hostConnected,e),this._callbacks.hostConnected.forEach(Re),this.triggerLifecycle(),this.connectedCalled=!0}triggerDisconnected(){const e=this;e.hostDisconnected&&Re(e.hostDisconnected,e),this._callbacks.hostDisconnected.forEach(Re),this._lifecycleCleanups.forEach(Re),this._lifecycleCleanups=[]}async triggerLoad(){if(this._loadCalled)return;this._loadCalled=!0;const e=this;e.hostLoad&&await q1(e.hostLoad,e),this._callbacks.hostLoad.length>0&&await Promise.allSettled(this._callbacks.hostLoad.map(q1)),this._ready.resolve(this._exports)}triggerLoaded(){if(this.loadedCalled)return;const e=this;e.hostLoaded&&Re(e.hostLoaded,e),this._callbacks.hostLoaded.forEach(Re),this.loadedCalled=!0}triggerUpdate(e){const t=this;t.hostUpdate&&Re(t.hostUpdate,t,e),this._callbacks.hostUpdate.forEach(kT,e)}triggerUpdated(e){const t=this;t.hostUpdated&&Re(t.hostUpdated,t,e),this._callbacks.hostUpdated.forEach(kT,e)}triggerDestroy(){const e=this;e.hostDestroy&&Re(e.hostDestroy,e),this._callbacks.hostDestroy.forEach(Re)}triggerLifecycle(){const e=this;e.hostLifecycle&&this._callLifecycle(()=>e.hostLifecycle()),this._callbacks.hostLifecycle.forEach(this._callLifecycle,this)}_callLifecycle(e){Da(this.component);const t=Re(e);(Array.isArray(t)?t:[t]).forEach(i=>{typeof i=="function"?this._lifecycleCleanups.push(i):typeof i=="object"&&typeof i.remove=="function"&&this._lifecycleCleanups.push(i.remove)})}};function kT(e){Re(e,void 0,this)}var cJ=lw;function NT(e){if(typeof e!="object"&&typeof e!="function"||e===null)return e;const t=new Proxy(e,{get(r,i,s){if(!(hJ.has(i)&&i in r&&r[i]===t)&&(i in r||i in Promise.prototype||typeof i=="symbol"))return typeof r=="function"?r[i]:Reflect.get(r,i,s)},set:(r,i,s,n)=>Reflect.set(r,i,s,n)});return t}var hJ=new Set(["exports","_exports"]);function dJ(e,t,r){const i=Object.keys(e),s=i.length;us===void 0&&queueMicrotask(uw),us??(us=new Map);let n=us.get(e);return n===void 0&&(n={callbacks:[],keyCount:s},us.set(e,n)),n.keyCount!==s&&(n.callbacks.forEach(o=>o(i)),n.callbacks=[],n.keyCount=s),n.callbacks.push(o=>{const a=h=>Re(t,null,h),l=o[s];l===void 0?a(void 0):e[l]===r?a(l):a(void 0)}),r}var us=void 0;function uw(){Array.from((us==null?void 0:us.entries())??[]).forEach(([e,{callbacks:t}])=>{const r=Object.keys(e);t.forEach(i=>i(r))}),us=void 0}function cw(e,t,r){var i;const s=t,n=e.manager.internals;(i=n.allWatchers)[s]??(i[s]=[]);const o=n.allWatchers[s],a=r,l=(h,p,f)=>Re(a,null,h,p,f);return o.push(l),()=>{const h=o.indexOf(l);h!==-1&&o.splice(h,1)}}var pJ=class{constructor(e){this.enabledWatchers={},this.allWatchers={},this.enableReadonly=()=>{if(this.enableReadonly=void 0,!this.component.manager.isLit)return;const t=this.component.manager.internals;Object.entries(t.members).forEach(([r,[i]])=>{var s;i&2048&&((s=t.setters)[r]??(s[r]=[]),t.setters[r].push(t.readonlySetter))})},this.trackedValue=Z1,this.keyTrackers=[],this.getters={},this.setters={},this.accessorGetter={},this.accessorSetter={},this._exports=new WeakMap,this.readonlySetter=(t,r,i)=>{if(W1.readOnly)return t;throw new Error(`Cannot assign to read-only property "${i}" of ${this.component.el.tagName.toLowerCase()}. Trying to assign "${String(t)}"`)},this.component=e}firePropTrackers(e,t){const r=this.keyTrackers;this.trackedValue=Z1,this.keyTrackers=[],r.forEach(i=>i(e,t))}getSetProxy(e){const t=this.component,r=t.constructor.prototype;if(this._getSetProxy(r,e,"class"),t.manager.isLit)return;const i=t.el.constructor.prototype;r!==i&&this._getSetProxy(i,e,"html")}_getSetProxy(e,t,r){const i=this.component,s=sJ(i,t);let n;do n=Object.getOwnPropertyDescriptor(e,t);while(!n&&(e=Object.getPrototypeOf(e)));if(!n)return;const o=n.get,a=n.set,l=ad in o,h=ad in a;if(l&&h)return;const p=!l,f=!h,m=p?function(){let v=o.call(this);const w=pf.get(this);if(w===void 0)return v;const b=w.manager.internals;v=b.accessorGetter[t](v,t);const M=b.getters[t]??LT;for(let $=0;$<M.length;$++)v=M[$](v,t);return v}:o,y=f?function(v){var E;const w=o.call(this),b=pf.get(this);if(b===void 0){a.call(this,v);return}let M=b.manager.isLit?v??void 0:iJ(v,s);const $=b.manager.internals;if(M===w)a.call(this,M);else{const P=$.setters[t]??LT;for(let O=0;O<P.length&&(M=P[O](M,w,t),M!==w);O++);M=$.accessorSetter[t](M,w,t),a.call(this,M),M!==w&&((E=$.enabledWatchers[t])==null||E.forEach(O=>O(M,w,t)))}$.keyTrackers.length>0&&($==null||$.firePropTrackers(t,v))}:a;p&&(m[ad]=!0),f&&(y[ad]=!0),Object.defineProperty(e,t,{...n,get:m,set:y})}markExports(e,t){(typeof t=="object"&&t!==null||typeof t=="function")&&this._exports.set(t,e)}resolveExports(e){if(typeof e=="object"&&e!==null||typeof e=="function")return this._exports.get(e)}},LT=[],ad=Symbol(),Z1=Symbol();function fJ(e,t,r){const i=e.manager.internals;return i.trackedValue!==Z1&&i.trackedValue!==r&&i.firePropTrackers(void 0,void 0),i.keyTrackers.length===0&&queueMicrotask(()=>i.firePropTrackers(void 0,void 0)),i.trackedValue=r,i.keyTrackers.push((s,n)=>Re(t,void 0,r===n?s:void 0)),r}function kC(e=[wm(),...IC()],t,r){const i=Array.isArray(e)?e:[e];let s=i.length+1;const n=a=>{s-=1,a!==void 0&&(s=Math.min(s,0)),s===0&&t(a)};i.forEach(a=>dJ(a,l=>n(l===void 0?void 0:{key:l,host:a,isReactive:!1}),r));const o=i.find(a=>"manager"in a&&typeof a.manager=="object"&&a.manager.component===a);return o&&fJ(o,a=>n(a===void 0?void 0:{key:a,host:o,isReactive:!0}),r),r}function mJ(e){W1.readOnly=!0;try{return e()}finally{W1.readOnly=!1}}var yJ=e=>(...t)=>{const r=IC(),i=new e(...t),s=i.exports;CC(r.at(-1));const n=i.component.manager.internals;n.markExports(i,s),i.watchExports(a=>n.markExports(i,a)),oJ(i);const o=[i.component,...r].reverse();return kC(o,a=>a===void 0?void 0:gJ(i,a,s),s)};function gJ(e,{host:t,key:r,isReactive:i},s){const n=t,o=n[r]!==e.exports,a=n[r]!==s,l=s!==e.exports;if(o&&!a&&l&&(n[r]=e.exports),t===e.component){if(i){const p=e.component.manager.internals;a&&p.markExports(e,n[r]),cw(e.component,r,f=>{f!==e.exports&&p.markExports(e,f)})}e.assignedProperty=i?void 0:r}e.watchExports(()=>{var m;if(n[r]===e.exports)return;const p=e.component.manager;((m=p.internals.setters[r])==null?void 0:m.includes(p.internals.readonlySetter))?mJ(()=>{n[r]=e.exports}):n[r]=e.exports})}var _J=(e,t)=>new vJ(e,t),vJ=class extends cJ{constructor(e,t){const r="addController"in e,i=new Set;function s(l){var h;i.add(l),!(ow in l)&&e.renderRoot&&e.el.isConnected&&((h=l.hostConnected)==null||h.call(l))}function n(l){var h;i.delete(l),(h=l.controllerRemoved)==null||h.call(l)}const o=e;if(o.addController=s,o.removeController=n,!r){const l=t??e.constructor.__forceUpdate;o.requestUpdate=()=>l(e)}super(e),this.internals=new pJ(this.component),this.destroyed=!1,this._updatePromise=new Do,this._originalLifecycles={},this.isLit=r,this.component.manager=this,rJ(e,r),this._controllers=i,this.exports=void 0,this.hasDestroy=ky in this.component&&typeof this.component.destroy=="function",this._bindLifecycleMethods();const a=this.internals;Object.keys(a.members).forEach(l=>{a.accessorGetter[l]=DT,a.accessorSetter[l]=DT,a.getSetProxy(l)}),r?this.internals.enabledWatchers=this.internals.allWatchers:Object.defineProperty(e,"updateComplete",{get:async()=>await this._updatePromise.promise}),queueMicrotask(a.enableReadonly),Da(e),pf.set(e.el,e),pf.set(e,e)}_bindLifecycleMethods(){const e=this.component,t=this.isLit,r=e.el===e;this._originalLifecycles={_connectedCallback:t||r?void 0:e.connectedCallback,_disconnectedCallback:t||r?void 0:e.disconnectedCallback,_load:t?e.load:e.componentWillLoad,_loaded:t?e.loaded:e.componentDidLoad,_willUpdate:t?void 0:e.componentWillUpdate,_updated:t?void 0:e.componentDidUpdate,_destroy:e.destroy};const i=this._connectedCallback.bind(this),s=this._disconnectedCallback.bind(this),n=this._update.bind(this),o=this._updated.bind(this);t?e.constructor.prototype.addController.call(e,{hostConnected:i,hostDisconnected:s,hostUpdate:n,hostUpdated:o}):(e.connectedCallback=i,e.disconnectedCallback=s,e.componentWillLoad=this._load.bind(this),e.componentDidLoad=this._loaded.bind(this),e.componentWillUpdate=n,e.componentDidUpdate=o),this.hasDestroy&&(e.destroy=this.destroy.bind(this))}_connectedCallback(){var t,r;if(this.destroyed){const i=this.component.el.tagName.toLowerCase();throw this.component.el.remove(),new Error(`The ${i} component has already been destroyed. It cannot be used again. If you meant to disconnect and reconnect a component without automatic destroy, set the ${ky} prop.`)}this._autoDestroyTimeout!==void 0&&clearTimeout(this._autoDestroyTimeout);const e=this.internals;e.enabledWatchers=e.allWatchers,uw(),(t=e.enableReadonly)==null||t.call(e),this._controllers.forEach(bJ),(r=this._originalLifecycles._connectedCallback)==null||r.call(this.component)}_disconnectedCallback(){var e;this.destroyed||(this._controllers.forEach(SJ),(e=this._originalLifecycles._disconnectedCallback)==null||e.call(this.component),this.hasDestroy&&this._setAutoDestroyTimeout())}async _load(){var e;await Promise.allSettled(Array.from(this._controllers,TJ)),await((e=this._originalLifecycles._load)==null?void 0:e.call(this.component)),this.hasDestroy&&cw(this.component,ky,()=>this._setAutoDestroyTimeout())}_loaded(){var e;this._controllers.forEach($J),(e=this._originalLifecycles._loaded)==null||e.call(this.component)}_update(){var t;const e=this.component;return this._controllers.forEach(EJ,e.$changes),(t=this._originalLifecycles._willUpdate)==null?void 0:t.call(this.component)}_updated(){var t;const e=this.component;if(this._controllers.forEach(MJ,e.$changes),(t=this._originalLifecycles._updated)==null||t.call(this.component),this.isLit)e.$changes=new Map;else{const r=this._updatePromise;this._updatePromise=new Do,r.resolve(!0)}}async destroy(){var e;if(!this.destroyed){if(this.component.el.isConnected){this.hasDestroy=!1;try{this.component.el.remove()}finally{this.hasDestroy=!0}}this._autoDestroyTimeout=void 0,this.destroyed=!0,this._controllers.forEach(xJ),this._controllers.clear(),await((e=this._originalLifecycles._destroy)==null?void 0:e.call(this.component))}}_setAutoDestroyTimeout(){if(this._autoDestroyTimeout!==void 0&&clearTimeout(this._autoDestroyTimeout),!this.component.el.isConnected&&!this.component.autoDestroyDisabled){const e=()=>void this.destroy().catch(console.error);this._autoDestroyTimeout=JZ(e,wJ)}}},ky="autoDestroyDisabled",wJ=1e3,DT=e=>e;function bJ(e){"triggerConnected"in e?e.triggerConnected():Re(e.hostConnected,e)}function SJ(e){"triggerDisconnected"in e?e.triggerDisconnected():Re(e.hostDisconnected,e)}async function TJ(e){"triggerLoad"in e?await e.triggerLoad():await q1(e.hostLoad,e)}function $J(e){"triggerLoaded"in e?e.triggerLoaded():Re(e.hostLoaded,e)}function EJ(e){"triggerUpdate"in e?e.triggerUpdate(this):Re(e.hostUpdate,e,this)}function MJ(e){"triggerUpdated"in e?e.triggerUpdated(this):Re(e.hostUpdated,e,this)}function xJ(e){"triggerDestroy"in e?e.triggerDestroy():Re(e.hostDestroy,e)}var AJ=e=>NC(void 0,e),goe=e=>t=>NC(t,e),PJ=class extends lw{constructor(e,t){super(e);const r=this.exports;try{Da(this.component);const i=t(this.component,this),s=this.exports!==r;if(i instanceof Promise){s||this.setProvisionalExports(i);const n=i.then(o=>{this.exports=o,super.catchUpLifecycle()}).catch(o=>{this._ready.reject(o),console.error(o)});this.onLoad(async()=>await n)}else(!s||i!==void 0)&&(this.exports=i),queueMicrotask(()=>super.catchUpLifecycle())}catch(i){this._ready.reject(i),console.error(i)}}catchUpLifecycle(){}},NC=yJ(PJ),_oe=(e,t)=>new OJ(e,t),OJ=class extends lw{constructor(e,t){super(),this._attributes=e,this._callback=t,this._observer=new MutationObserver(r=>{r.forEach(i=>{e.includes(i.attributeName)&&t.call(this.component,this.component.el.getAttribute(i.attributeName),i.oldValue,i.attributeName)})})}hostConnected(){this._attributes.forEach(e=>{this.component.el.hasAttribute(e)&&this._callback.call(this.component,null,this.component.el.getAttribute(e),e)}),this._observer.observe(this.component.el,{attributes:!0,attributeOldValue:!0,attributeFilter:this._attributes})}hostDisconnected(){this._observer.disconnect()}},voe=e=>(t={})=>AJ((r,i)=>{const s=xC(r.el),n={_lang:s.lang,_t9nLocale:s.t9nLocale,_loading:!0},o=r;i.onLifecycle(()=>qZ(r.el,()=>e("./assets"),({t9nLocale:l,t9nStrings:h,lang:p})=>{const f={...h,_lang:p,_t9nLocale:l,_loading:!1};i.exports=f;const m=h.componentLabel;typeof m=="string"&&"label"in r&&r.label==null&&(r.label??(r.label=m)),a(o.messageOverrides)},t.name));function a(l){const h=i.exports,p=h._original??h,f=LC(p,l);l&&(f._original=p),i.exports=f}return"messageOverrides"in o&&i.onLifecycle(()=>cw(o,"messageOverrides",a)),t.blocking?(i.setProvisionalExports(n,!1),i.ready):n});function LC(e,t){if(!t)return e;const r={...e};return Object.entries(t).forEach(([i,s])=>{typeof s=="object"?r[i]=LC(e[i],s):r[i]=s??e[i]}),r}/**
 * @license
 * Copyright 2019 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const np=globalThis,hw=np.ShadowRoot&&(np.ShadyCSS===void 0||np.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,dw=Symbol(),FT=new WeakMap;let DC=class{constructor(t,r,i){if(this._$cssResult$=!0,i!==dw)throw Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=t,this.t=r}get styleSheet(){let t=this.o;const r=this.t;if(hw&&t===void 0){const i=r!==void 0&&r.length===1;i&&(t=FT.get(r)),t===void 0&&((this.o=t=new CSSStyleSheet).replaceSync(this.cssText),i&&FT.set(r,t))}return t}toString(){return this.cssText}};const CJ=e=>new DC(typeof e=="string"?e:e+"",void 0,dw),boe=(e,...t)=>{const r=e.length===1?e[0]:t.reduce((i,s,n)=>i+(o=>{if(o._$cssResult$===!0)return o.cssText;if(typeof o=="number")return o;throw Error("Value passed to 'css' function must be a 'css' function result: "+o+". Use 'unsafeCSS' to pass non-literal values, but take care to ensure page security.")})(s)+e[n+1],e[0]);return new DC(r,e,dw)},IJ=(e,t)=>{if(hw)e.adoptedStyleSheets=t.map(r=>r instanceof CSSStyleSheet?r:r.styleSheet);else for(const r of t){const i=document.createElement("style"),s=np.litNonce;s!==void 0&&i.setAttribute("nonce",s),i.textContent=r.cssText,e.appendChild(i)}},UT=hw?e=>e:e=>e instanceof CSSStyleSheet?(t=>{let r="";for(const i of t.cssRules)r+=i.cssText;return CJ(r)})(e):e;/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const{is:RJ,defineProperty:kJ,getOwnPropertyDescriptor:NJ,getOwnPropertyNames:LJ,getOwnPropertySymbols:DJ,getPrototypeOf:FJ}=Object,pn=globalThis,jT=pn.trustedTypes,UJ=jT?jT.emptyScript:"",Ny=pn.reactiveElementPolyfillSupport,gc=(e,t)=>e,J1={toAttribute(e,t){switch(t){case Boolean:e=e?UJ:null;break;case Object:case Array:e=e==null?e:JSON.stringify(e)}return e},fromAttribute(e,t){let r=e;switch(t){case Boolean:r=e!==null;break;case Number:r=e===null?null:Number(e);break;case Object:case Array:try{r=JSON.parse(e)}catch{r=null}}return r}},FC=(e,t)=>!RJ(e,t),GT={attribute:!0,type:String,converter:J1,reflect:!1,hasChanged:FC};Symbol.metadata??(Symbol.metadata=Symbol("metadata")),pn.litPropertyMetadata??(pn.litPropertyMetadata=new WeakMap);let Aa=class extends HTMLElement{static addInitializer(t){this._$Ei(),(this.l??(this.l=[])).push(t)}static get observedAttributes(){return this.finalize(),this._$Eh&&[...this._$Eh.keys()]}static createProperty(t,r=GT){if(r.state&&(r.attribute=!1),this._$Ei(),this.elementProperties.set(t,r),!r.noAccessor){const i=Symbol(),s=this.getPropertyDescriptor(t,i,r);s!==void 0&&kJ(this.prototype,t,s)}}static getPropertyDescriptor(t,r,i){const{get:s,set:n}=NJ(this.prototype,t)??{get(){return this[r]},set(o){this[r]=o}};return{get(){return s==null?void 0:s.call(this)},set(o){const a=s==null?void 0:s.call(this);n.call(this,o),this.requestUpdate(t,a,i)},configurable:!0,enumerable:!0}}static getPropertyOptions(t){return this.elementProperties.get(t)??GT}static _$Ei(){if(this.hasOwnProperty(gc("elementProperties")))return;const t=FJ(this);t.finalize(),t.l!==void 0&&(this.l=[...t.l]),this.elementProperties=new Map(t.elementProperties)}static finalize(){if(this.hasOwnProperty(gc("finalized")))return;if(this.finalized=!0,this._$Ei(),this.hasOwnProperty(gc("properties"))){const r=this.properties,i=[...LJ(r),...DJ(r)];for(const s of i)this.createProperty(s,r[s])}const t=this[Symbol.metadata];if(t!==null){const r=litPropertyMetadata.get(t);if(r!==void 0)for(const[i,s]of r)this.elementProperties.set(i,s)}this._$Eh=new Map;for(const[r,i]of this.elementProperties){const s=this._$Eu(r,i);s!==void 0&&this._$Eh.set(s,r)}this.elementStyles=this.finalizeStyles(this.styles)}static finalizeStyles(t){const r=[];if(Array.isArray(t)){const i=new Set(t.flat(1/0).reverse());for(const s of i)r.unshift(UT(s))}else t!==void 0&&r.push(UT(t));return r}static _$Eu(t,r){const i=r.attribute;return i===!1?void 0:typeof i=="string"?i:typeof t=="string"?t.toLowerCase():void 0}constructor(){super(),this._$Ep=void 0,this.isUpdatePending=!1,this.hasUpdated=!1,this._$Em=null,this._$Ev()}_$Ev(){var t;this._$ES=new Promise(r=>this.enableUpdating=r),this._$AL=new Map,this._$E_(),this.requestUpdate(),(t=this.constructor.l)==null||t.forEach(r=>r(this))}addController(t){var r;(this._$EO??(this._$EO=new Set)).add(t),this.renderRoot!==void 0&&this.isConnected&&((r=t.hostConnected)==null||r.call(t))}removeController(t){var r;(r=this._$EO)==null||r.delete(t)}_$E_(){const t=new Map,r=this.constructor.elementProperties;for(const i of r.keys())this.hasOwnProperty(i)&&(t.set(i,this[i]),delete this[i]);t.size>0&&(this._$Ep=t)}createRenderRoot(){const t=this.shadowRoot??this.attachShadow(this.constructor.shadowRootOptions);return IJ(t,this.constructor.elementStyles),t}connectedCallback(){var t;this.renderRoot??(this.renderRoot=this.createRenderRoot()),this.enableUpdating(!0),(t=this._$EO)==null||t.forEach(r=>{var i;return(i=r.hostConnected)==null?void 0:i.call(r)})}enableUpdating(t){}disconnectedCallback(){var t;(t=this._$EO)==null||t.forEach(r=>{var i;return(i=r.hostDisconnected)==null?void 0:i.call(r)})}attributeChangedCallback(t,r,i){this._$AK(t,i)}_$EC(t,r){var n;const i=this.constructor.elementProperties.get(t),s=this.constructor._$Eu(t,i);if(s!==void 0&&i.reflect===!0){const o=(((n=i.converter)==null?void 0:n.toAttribute)!==void 0?i.converter:J1).toAttribute(r,i.type);this._$Em=t,o==null?this.removeAttribute(s):this.setAttribute(s,o),this._$Em=null}}_$AK(t,r){var n;const i=this.constructor,s=i._$Eh.get(t);if(s!==void 0&&this._$Em!==s){const o=i.getPropertyOptions(s),a=typeof o.converter=="function"?{fromAttribute:o.converter}:((n=o.converter)==null?void 0:n.fromAttribute)!==void 0?o.converter:J1;this._$Em=s,this[s]=a.fromAttribute(r,o.type),this._$Em=null}}requestUpdate(t,r,i){if(t!==void 0){if(i??(i=this.constructor.getPropertyOptions(t)),!(i.hasChanged??FC)(this[t],r))return;this.P(t,r,i)}this.isUpdatePending===!1&&(this._$ES=this._$ET())}P(t,r,i){this._$AL.has(t)||this._$AL.set(t,r),i.reflect===!0&&this._$Em!==t&&(this._$Ej??(this._$Ej=new Set)).add(t)}async _$ET(){this.isUpdatePending=!0;try{await this._$ES}catch(r){Promise.reject(r)}const t=this.scheduleUpdate();return t!=null&&await t,!this.isUpdatePending}scheduleUpdate(){return this.performUpdate()}performUpdate(){var i;if(!this.isUpdatePending)return;if(!this.hasUpdated){if(this.renderRoot??(this.renderRoot=this.createRenderRoot()),this._$Ep){for(const[n,o]of this._$Ep)this[n]=o;this._$Ep=void 0}const s=this.constructor.elementProperties;if(s.size>0)for(const[n,o]of s)o.wrapped!==!0||this._$AL.has(n)||this[n]===void 0||this.P(n,this[n],o)}let t=!1;const r=this._$AL;try{t=this.shouldUpdate(r),t?(this.willUpdate(r),(i=this._$EO)==null||i.forEach(s=>{var n;return(n=s.hostUpdate)==null?void 0:n.call(s)}),this.update(r)):this._$EU()}catch(s){throw t=!1,this._$EU(),s}t&&this._$AE(r)}willUpdate(t){}_$AE(t){var r;(r=this._$EO)==null||r.forEach(i=>{var s;return(s=i.hostUpdated)==null?void 0:s.call(i)}),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated(t)),this.updated(t)}_$EU(){this._$AL=new Map,this.isUpdatePending=!1}get updateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this._$ES}shouldUpdate(t){return!0}update(t){this._$Ej&&(this._$Ej=this._$Ej.forEach(r=>this._$EC(r,this[r]))),this._$EU()}updated(t){}firstUpdated(t){}};Aa.elementStyles=[],Aa.shadowRootOptions={mode:"open"},Aa[gc("elementProperties")]=new Map,Aa[gc("finalized")]=new Map,Ny==null||Ny({ReactiveElement:Aa}),(pn.reactiveElementVersions??(pn.reactiveElementVersions=[])).push("2.0.4");/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const _c=globalThis,ff=_c.trustedTypes,zT=ff?ff.createPolicy("lit-html",{createHTML:e=>e}):void 0,UC="$lit$",sn=`lit$${Math.random().toFixed(9).slice(2)}$`,jC="?"+sn,jJ=`<${jC}>`,Fo=document,Bc=()=>Fo.createComment(""),Hc=e=>e===null||typeof e!="object"&&typeof e!="function",pw=Array.isArray,GJ=e=>pw(e)||typeof(e==null?void 0:e[Symbol.iterator])=="function",Ly=`[ 	
\f\r]`,Ql=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,VT=/-->/g,BT=/>/g,Fn=RegExp(`>|${Ly}(?:([^\\s"'>=/]+)(${Ly}*=${Ly}*(?:[^ 	
\f\r"'\`<>=]|("|')|))|$)`,"g"),HT=/'/g,qT=/"/g,GC=/^(?:script|style|textarea|title)$/i,zC=e=>(t,...r)=>({_$litType$:e,strings:t,values:r}),Toe=zC(1),$oe=zC(2),Mn=Symbol.for("lit-noChange"),tt=Symbol.for("lit-nothing"),WT=new WeakMap,bo=Fo.createTreeWalker(Fo,129);function VC(e,t){if(!pw(e)||!e.hasOwnProperty("raw"))throw Error("invalid template strings array");return zT!==void 0?zT.createHTML(t):t}const zJ=(e,t)=>{const r=e.length-1,i=[];let s,n=t===2?"<svg>":t===3?"<math>":"",o=Ql;for(let a=0;a<r;a++){const l=e[a];let h,p,f=-1,m=0;for(;m<l.length&&(o.lastIndex=m,p=o.exec(l),p!==null);)m=o.lastIndex,o===Ql?p[1]==="!--"?o=VT:p[1]!==void 0?o=BT:p[2]!==void 0?(GC.test(p[2])&&(s=RegExp("</"+p[2],"g")),o=Fn):p[3]!==void 0&&(o=Fn):o===Fn?p[0]===">"?(o=s??Ql,f=-1):p[1]===void 0?f=-2:(f=o.lastIndex-p[2].length,h=p[1],o=p[3]===void 0?Fn:p[3]==='"'?qT:HT):o===qT||o===HT?o=Fn:o===VT||o===BT?o=Ql:(o=Fn,s=void 0);const y=o===Fn&&e[a+1].startsWith("/>")?" ":"";n+=o===Ql?l+jJ:f>=0?(i.push(h),l.slice(0,f)+UC+l.slice(f)+sn+y):l+sn+(f===-2?a:y)}return[VC(e,n+(e[r]||"<?>")+(t===2?"</svg>":t===3?"</math>":"")),i]};class qc{constructor({strings:t,_$litType$:r},i){let s;this.parts=[];let n=0,o=0;const a=t.length-1,l=this.parts,[h,p]=zJ(t,r);if(this.el=qc.createElement(h,i),bo.currentNode=this.el.content,r===2||r===3){const f=this.el.content.firstChild;f.replaceWith(...f.childNodes)}for(;(s=bo.nextNode())!==null&&l.length<a;){if(s.nodeType===1){if(s.hasAttributes())for(const f of s.getAttributeNames())if(f.endsWith(UC)){const m=p[o++],y=s.getAttribute(f).split(sn),_=/([.?@])?(.*)/.exec(m);l.push({type:1,index:n,name:_[2],strings:y,ctor:_[1]==="."?BJ:_[1]==="?"?HJ:_[1]==="@"?qJ:bm}),s.removeAttribute(f)}else f.startsWith(sn)&&(l.push({type:6,index:n}),s.removeAttribute(f));if(GC.test(s.tagName)){const f=s.textContent.split(sn),m=f.length-1;if(m>0){s.textContent=ff?ff.emptyScript:"";for(let y=0;y<m;y++)s.append(f[y],Bc()),bo.nextNode(),l.push({type:2,index:++n});s.append(f[m],Bc())}}}else if(s.nodeType===8)if(s.data===jC)l.push({type:2,index:n});else{let f=-1;for(;(f=s.data.indexOf(sn,f+1))!==-1;)l.push({type:7,index:n}),f+=sn.length-1}n++}}static createElement(t,r){const i=Fo.createElement("template");return i.innerHTML=t,i}}function vl(e,t,r=e,i){var o,a;if(t===Mn)return t;let s=i!==void 0?(o=r._$Co)==null?void 0:o[i]:r._$Cl;const n=Hc(t)?void 0:t._$litDirective$;return(s==null?void 0:s.constructor)!==n&&((a=s==null?void 0:s._$AO)==null||a.call(s,!1),n===void 0?s=void 0:(s=new n(e),s._$AT(e,r,i)),i!==void 0?(r._$Co??(r._$Co=[]))[i]=s:r._$Cl=s),s!==void 0&&(t=vl(e,s._$AS(e,t.values),s,i)),t}let VJ=class{constructor(t,r){this._$AV=[],this._$AN=void 0,this._$AD=t,this._$AM=r}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}u(t){const{el:{content:r},parts:i}=this._$AD,s=((t==null?void 0:t.creationScope)??Fo).importNode(r,!0);bo.currentNode=s;let n=bo.nextNode(),o=0,a=0,l=i[0];for(;l!==void 0;){if(o===l.index){let h;l.type===2?h=new _h(n,n.nextSibling,this,t):l.type===1?h=new l.ctor(n,l.name,l.strings,this,t):l.type===6&&(h=new WJ(n,this,t)),this._$AV.push(h),l=i[++a]}o!==(l==null?void 0:l.index)&&(n=bo.nextNode(),o++)}return bo.currentNode=Fo,s}p(t){let r=0;for(const i of this._$AV)i!==void 0&&(i.strings!==void 0?(i._$AI(t,i,r),r+=i.strings.length-2):i._$AI(t[r])),r++}};class _h{get _$AU(){var t;return((t=this._$AM)==null?void 0:t._$AU)??this._$Cv}constructor(t,r,i,s){this.type=2,this._$AH=tt,this._$AN=void 0,this._$AA=t,this._$AB=r,this._$AM=i,this.options=s,this._$Cv=(s==null?void 0:s.isConnected)??!0}get parentNode(){let t=this._$AA.parentNode;const r=this._$AM;return r!==void 0&&(t==null?void 0:t.nodeType)===11&&(t=r.parentNode),t}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(t,r=this){t=vl(this,t,r),Hc(t)?t===tt||t==null||t===""?(this._$AH!==tt&&this._$AR(),this._$AH=tt):t!==this._$AH&&t!==Mn&&this._(t):t._$litType$!==void 0?this.$(t):t.nodeType!==void 0?this.T(t):GJ(t)?this.k(t):this._(t)}O(t){return this._$AA.parentNode.insertBefore(t,this._$AB)}T(t){this._$AH!==t&&(this._$AR(),this._$AH=this.O(t))}_(t){this._$AH!==tt&&Hc(this._$AH)?this._$AA.nextSibling.data=t:this.T(Fo.createTextNode(t)),this._$AH=t}$(t){var n;const{values:r,_$litType$:i}=t,s=typeof i=="number"?this._$AC(t):(i.el===void 0&&(i.el=qc.createElement(VC(i.h,i.h[0]),this.options)),i);if(((n=this._$AH)==null?void 0:n._$AD)===s)this._$AH.p(r);else{const o=new VJ(s,this),a=o.u(this.options);o.p(r),this.T(a),this._$AH=o}}_$AC(t){let r=WT.get(t.strings);return r===void 0&&WT.set(t.strings,r=new qc(t)),r}k(t){pw(this._$AH)||(this._$AH=[],this._$AR());const r=this._$AH;let i,s=0;for(const n of t)s===r.length?r.push(i=new _h(this.O(Bc()),this.O(Bc()),this,this.options)):i=r[s],i._$AI(n),s++;s<r.length&&(this._$AR(i&&i._$AB.nextSibling,s),r.length=s)}_$AR(t=this._$AA.nextSibling,r){var i;for((i=this._$AP)==null?void 0:i.call(this,!1,!0,r);t&&t!==this._$AB;){const s=t.nextSibling;t.remove(),t=s}}setConnected(t){var r;this._$AM===void 0&&(this._$Cv=t,(r=this._$AP)==null||r.call(this,t))}}class bm{get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}constructor(t,r,i,s,n){this.type=1,this._$AH=tt,this._$AN=void 0,this.element=t,this.name=r,this._$AM=s,this.options=n,i.length>2||i[0]!==""||i[1]!==""?(this._$AH=Array(i.length-1).fill(new String),this.strings=i):this._$AH=tt}_$AI(t,r=this,i,s){const n=this.strings;let o=!1;if(n===void 0)t=vl(this,t,r,0),o=!Hc(t)||t!==this._$AH&&t!==Mn,o&&(this._$AH=t);else{const a=t;let l,h;for(t=n[0],l=0;l<n.length-1;l++)h=vl(this,a[i+l],r,l),h===Mn&&(h=this._$AH[l]),o||(o=!Hc(h)||h!==this._$AH[l]),h===tt?t=tt:t!==tt&&(t+=(h??"")+n[l+1]),this._$AH[l]=h}o&&!s&&this.j(t)}j(t){t===tt?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,t??"")}}let BJ=class extends bm{constructor(){super(...arguments),this.type=3}j(t){this.element[this.name]=t===tt?void 0:t}},HJ=class extends bm{constructor(){super(...arguments),this.type=4}j(t){this.element.toggleAttribute(this.name,!!t&&t!==tt)}};class qJ extends bm{constructor(t,r,i,s,n){super(t,r,i,s,n),this.type=5}_$AI(t,r=this){if((t=vl(this,t,r,0)??tt)===Mn)return;const i=this._$AH,s=t===tt&&i!==tt||t.capture!==i.capture||t.once!==i.once||t.passive!==i.passive,n=t!==tt&&(i===tt||s);s&&this.element.removeEventListener(this.name,this,i),n&&this.element.addEventListener(this.name,this,t),this._$AH=t}handleEvent(t){var r;typeof this._$AH=="function"?this._$AH.call(((r=this.options)==null?void 0:r.host)??this.element,t):this._$AH.handleEvent(t)}}let WJ=class{constructor(t,r,i){this.element=t,this.type=6,this._$AN=void 0,this._$AM=r,this.options=i}get _$AU(){return this._$AM._$AU}_$AI(t){vl(this,t)}};const Dy=_c.litHtmlPolyfillSupport;Dy==null||Dy(qc,_h),(_c.litHtmlVersions??(_c.litHtmlVersions=[])).push("3.2.1");const ZJ=(e,t,r)=>{const i=(r==null?void 0:r.renderBefore)??t;let s=i._$litPart$;if(s===void 0){const n=(r==null?void 0:r.renderBefore)??null;i._$litPart$=s=new _h(t.insertBefore(Bc(),n),n,void 0,r??{})}return s._$AI(e),s};/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */let Qa=class extends Aa{constructor(){super(...arguments),this.renderOptions={host:this},this._$Do=void 0}createRenderRoot(){var r;const t=super.createRenderRoot();return(r=this.renderOptions).renderBefore??(r.renderBefore=t.firstChild),t}update(t){const r=this.render();this.hasUpdated||(this.renderOptions.isConnected=this.isConnected),super.update(t),this._$Do=ZJ(r,this.renderRoot,this.renderOptions)}connectedCallback(){var t;super.connectedCallback(),(t=this._$Do)==null||t.setConnected(!0)}disconnectedCallback(){var t;super.disconnectedCallback(),(t=this._$Do)==null||t.setConnected(!1)}render(){return Mn}};var d$;Qa._$litElement$=!0,Qa.finalized=!0,(d$=globalThis.litElementHydrateSupport)==null||d$.call(globalThis,{LitElement:Qa});const Fy=globalThis.litElementPolyfillSupport;Fy==null||Fy({LitElement:Qa});(globalThis.litElementVersions??(globalThis.litElementVersions=[])).push("4.1.1");/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const BC={ATTRIBUTE:1,CHILD:2,PROPERTY:3,BOOLEAN_ATTRIBUTE:4},HC=e=>(...t)=>({_$litDirective$:e,values:t});let qC=class{constructor(t){}get _$AU(){return this._$AM._$AU}_$AT(t,r,i){this._$Ct=t,this._$AM=r,this._$Ci=i}_$AS(t,r){return this.update(t,r)}update(t,r){return this.render(...r)}};/**
 * @license
 * Copyright 2018 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const JJ=HC(class extends qC{constructor(e){var t;if(super(e),e.type!==BC.ATTRIBUTE||e.name!=="class"||((t=e.strings)==null?void 0:t.length)>2)throw Error("`classMap()` can only be used in the `class` attribute and must be the only part in the attribute.")}render(e){return" "+Object.keys(e).filter(t=>e[t]).join(" ")+" "}update(e,[t]){var i,s;if(this.st===void 0){this.st=new Set,e.strings!==void 0&&(this.nt=new Set(e.strings.join(" ").split(/\s/).filter(n=>n!=="")));for(const n in t)t[n]&&!((i=this.nt)!=null&&i.has(n))&&this.st.add(n);return this.render(t)}const r=e.element.classList;for(const n of this.st)n in t||(r.remove(n),this.st.delete(n));for(const n in t){const o=!!t[n];o===this.st.has(n)||(s=this.nt)!=null&&s.has(n)||(o?(r.add(n),this.st.add(n)):(r.remove(n),this.st.delete(n)))}return Mn}});/**
 * @license
 * Copyright 2018 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const WC="important",YJ=" !"+WC,KJ=HC(class extends qC{constructor(e){var t;if(super(e),e.type!==BC.ATTRIBUTE||e.name!=="style"||((t=e.strings)==null?void 0:t.length)>2)throw Error("The `styleMap` directive must be used in the `style` attribute and must be the only part in the attribute.")}render(e){return Object.keys(e).reduce((t,r)=>{const i=e[r];return i==null?t:t+`${r=r.includes("-")?r:r.replace(/(?:^(webkit|moz|ms|o)|)(?=[A-Z])/g,"-$&").toLowerCase()}:${i};`},"")}update(e,[t]){const{style:r}=e.element;if(this.ft===void 0)return this.ft=new Set(Object.keys(t)),this.render(t);for(const i of this.ft)t[i]==null&&(this.ft.delete(i),i.includes("-")?r.removeProperty(i):r[i]=null);for(const i in t){const s=t[i];if(s!=null){this.ft.add(i);const n=typeof s=="string"&&s.endsWith(YJ);i.includes("-")||n?r.setProperty(i,n?s.slice(0,-11):s,n?WC:""):r[i]=s}}return Mn}});var ZC=(e="",t={},r=wm())=>{const i={emit:s=>{e===""&&uw();const n=new CustomEvent(e,{detail:s,cancelable:!0,bubbles:!0,composed:!0,...t});return r.el.dispatchEvent(n),n}};return e===""&&kC(void 0,s=>{e=s.key},i),i},Coe=ZC.bind(null,""),XJ=()=>{},xo,QJ=(xo=class extends Qa{constructor(){var r,i,s;super(),this.el=this.constructor.lazy??this,this.manager=_J(this),this._postLoad=((r=this.constructor.lazy)==null?void 0:r._postLoad)??new Do,this._offspring=((i=this.constructor.lazy)==null?void 0:i._offspring)??[],this._postLoaded=((s=this.constructor.lazy)==null?void 0:s._postLoaded)??new Do,this._enableUpdating=this.enableUpdating,this.enableUpdating=XJ;const t=xo.prototype.shouldUpdate;this.shouldUpdate!==t&&(this._originalShouldUpdate=this.shouldUpdate,this.shouldUpdate=t)}static finalizeStyles(t){var s;const r=super.finalizeStyles(t),i=this.shadowRootOptions===RT;return((s=this.runtime)==null?void 0:s.commonStyles)===void 0||i?r:[this.runtime.commonStyles,...r]}static createProperty(t,r){const i=typeof r=="number"?r:Array.isArray(r)?r[0]:0,s=Array.isArray(r)?r[1]:void 0;super.createProperty(t,{attribute:i&1&&typeof t=="string"?PC(t):!1,reflect:!!(i&2),type:i&4?Boolean:i&8?Number:void 0,state:!!(i&16),readOnly:!!(i&32),noAccessor:!!(i&64),...s})}connectedCallback(){if(this.el.hasAttribute("defer-hydration"))return;const t=!this.manager.connectedCalled;super.connectedCallback(),t&&queueMicrotask(()=>this._load().catch(r=>{this._postLoaded.reject(r),setTimeout(()=>{throw r})}))}createRenderRoot(){const t=this.el.shadowRoot,r=this.constructor,i=r.shadowRootOptions,n=t??(i===RT?this.el:this.el.attachShadow(i));if(Object.defineProperty(this,"shadowRoot",{value:n}),t)return Qa.prototype.createRenderRoot.call(this),t;if(this.isConnected){const o=n.getRootNode();o.adoptedStyleSheets=[...o.adoptedStyleSheets,...r.elementStyles.map(a=>"styleSheet"in a?a.styleSheet:a)]}return n}async _load(){const t=this.el._ancestorLoad??OC(this.el);t&&await t,await this.manager._load(),this._enableUpdating(!0),this.performUpdate(),this._postLoad.resolve(),await Promise.resolve();const r=this._offspring.filter(i=>{var s;return!((s=i.manager)!=null&&s.loadedCalled)});r.length&&await Promise.allSettled(r.map(async i=>await i.componentOnReady())),this._offspring.length=0,this.el.setAttribute(this.constructor.runtime.hydratedAttribute,""),this.manager._loaded(),this._postLoaded.resolve()}shouldUpdate(t){var r;return this.$changes=t,((r=this._originalShouldUpdate)==null?void 0:r.call(this,t))??!0}listen(t,r,i){const s=(r==null?void 0:r.bind(this))??r;this.manager.onLifecycle(()=>(this.el.addEventListener(t,s,i),()=>this.el.removeEventListener(t,s,i)))}listenOn(t,r,i,s){const n=(i==null?void 0:i.bind(this))??i;this.manager.onLifecycle(()=>(t.addEventListener(r,n,s),()=>t.removeEventListener(r,n,s)))}async componentOnReady(){return await this._postLoaded.promise,this}},xo.lumina=!0,xo);QJ.$createEvent=ZC;function eY(e){let t;const r=s=>{var n;t=new URL(s,((n=globalThis.location)==null?void 0:n.href)||void 0).href},i={...e,getAssetPath(s){var o;const n=new URL(s,t);return n.origin!==((o=globalThis.location)==null?void 0:o.origin)?n.href:n.pathname},setAssetPath:r,customElement(s,n){n.runtime=i,n.tagName=s,customElements.get(s)||customElements.define(s,n)}};return r(e.defaultAssetPath),i}var Ioe=e=>typeof e=="object"&&e!=null?JJ(e):e,Roe=e=>typeof e=="object"&&e!=null?KJ(e):e,koe=tt;function Noe(e,t,r){r==null?e.removeAttribute(t):e.setAttribute(t,r)}var Loe={toAttribute:e=>e===!0?"":e===!1?null:e};/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.1.0 */const tY="calcite-mode-auto",rY="calcite-mode-dark",Doe={rtl:"calcite--rtl"},Foe={filter:250,nextTick:0,resize:150,reposition:100};function ZT(){const{classList:e}=document.body,t=window.matchMedia("(prefers-color-scheme: dark)").matches,r=()=>e.contains(rY)||e.contains(tY)&&t?"dark":"light",i=o=>document.body.dispatchEvent(new CustomEvent("calciteModeChange",{bubbles:!0,detail:{mode:o}})),s=o=>{n!==o&&i(o),n=o};let n=r();i(n),window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",o=>s(o.matches?"dark":"light")),new MutationObserver(()=>s(r())).observe(document.body,{attributes:!0,attributeFilter:["class"]})}const ps=globalThis.calciteConfig,Uoe=(ps==null?void 0:ps.focusTrapStack)||[],joe=(ps==null?void 0:ps.logLevel)||"info",JT="3.1.0",iY="2025-03-26",sY="d5f75fd64";function nY(){if(ps&&ps.version)return;console.info(`Using Calcite Components ${JT} [Date: ${iY}, Revision: ${sY}]`);const e=ps||globalThis.calciteConfig||{};Object.defineProperty(e,"version",{value:JT,writable:!1}),globalThis.calciteConfig=e}const oY=()=>typeof navigator<"u"&&typeof window<"u"&&typeof location<"u"&&typeof document<"u"&&window.location===location&&window.document===document;function aY(){oY()&&(document.readyState==="interactive"?ZT():document.addEventListener("DOMContentLoaded",()=>ZT(),{once:!0})),nY()}aY();const lY=eY({defaultAssetPath:"https://js.arcgis.com/calcite-components/3.1.0/",hydratedAttribute:"calcite-hydrated"}),{customElement:Goe,getAssetPath:zoe,setAssetPath:uY}=lY;/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.1.0 */let JC=!1;const cY=e=>{JC=!0,uY(e)};let YC;function hY(){JC||cY($r(Ge(YC)))}function fw(e){var r;const t=[];for(const i of Object.keys(e))customElements.get(`calcite-${i}`)||t.push((r=e[i])==null?void 0:r.call(e));return t.length>0?Promise.all(t):null}YC="components/assets";const KC=Symbol("widget"),XC=Symbol("widget-test-data"),dY=[],pY={},mf=new WeakMap;function QC(e,t){let r=t.children;if(r!=null&&r.length)for(let s=0;s<r.length;++s)r[s]=QC(e,r[s]);else r=dY;const i=t.vnodeSelector;if(yf(i)){const s=t.properties||pY,n=s.key||i,o={key:n,afterCreate:fY,afterUpdate:mY,afterRemoved:eI,parentWidget:e,widgetConstructor:i,widgetProperties:{...s,key:n,children:r}};return{vnodeSelector:i.vnodeSelector,properties:o,children:void 0,text:void 0,domNode:null}}return t}function fY(e,t,r,{parentWidget:i,widgetConstructor:s,widgetProperties:n}){var a;const o=new s(n);o.container=e,mf.set(e,o),(a=o.afterCreate)==null||a.call(o,o,e),i.addHandles(ce(()=>eI(e))),queueMicrotask(()=>{o[XC].projector.renderNow()})}function mY(e,t,r,{widgetProperties:i}){var n;const s=mf.get(e);s&&(s.set(i),(n=s.afterUpdate)==null||n.call(s,s,e))}function eI(e){var r;const t=mf.get(e);t&&((r=t.afterRemoved)==null||r.call(t,t,e),t.destroy(),mf.delete(e))}function yf(e){return typeof e=="function"&&e[KC]}const YT=new Set;function yY(e){YT.add(e),e.finally(()=>YT.delete(e))}var tI;const gY="esri.widgets.Widget";let _Y=0;function rI(e,t){const r=Object.prototype.hasOwnProperty;for(const i in t)r.call(t,i)&&r.call(e,i)&&(e[i]!=null&&t[i]!=null&&typeof e[i]=="object"&&typeof t[i]=="object"?rI(e[i],t[i]):e[i]=t[i]);return e}const vY=NZ({postProcessProjectionOptions(e){const t=e.eventHandlerInterceptor,r=/capture$/i;e.eventHandlerInterceptor=(i,s,n,o)=>{const a=t==null?void 0:t(i,s,n,o),l=r.test(i);if(!((i=i.replace(r,"")).toLowerCase()in n)||l){const h=i[2].toLowerCase()+i.slice(3),p=y=>a==null?void 0:a.call(n,y);n.addEventListener(h,p,l);const f=()=>n.removeEventListener(h,p,l),m=o.afterRemoved;o.afterRemoved=y=>{m==null||m(y),f()}}return a}},handleInterceptedEvent(e,t,r,i){const{eventPhase:s,type:n}=i,o=s===Event.CAPTURING_PHASE;let a=`on${n}${o?"capture":""}`;const l=t.properties;(l&&a in l||(a=`on${n[0].toUpperCase()}${n.slice(1)}${o?"Capture":""}`,l&&a in l))&&(fA(),e.scheduleRender(),l[a].call(l.bind||r,i))}});let Uy=!1,Ye=class extends If.EsriPromiseMixin(Ai.EventedAccessor){constructor(e,t){super(e,t),this._attached=!1,this._projector=vY,this._readyForTrueRender=!1,this.key=this,this.autoRenderingEnabled=!0,this._loadLocale=_R(async()=>{var a;if((a=this._messageBundleProps)!=null&&a.length){const l=await Promise.allSettled(this._messageBundleProps.map(async({bundlePath:h,propertyName:p})=>{if(this.destroyed)return;let f=await A3(h);this.uiStrings&&Object.keys(this.uiStrings)&&(f=rI(C(f),this.uiStrings)),this[p]=f}));if(this.destroyed)return;for(const h of l)h.status==="rejected"&&U.getLogger(this).error("widget-intl:locale-error",this.declaredClass,h.reason)}await this.loadLocale()}),hY();const r="esri-widget-uid-"+nw(),i=this.render.bind(this);this._trackingTarget=new $f(()=>{this.autoRenderingEnabled&&this.scheduleRender()});const s=()=>({vnodeSelector:"div",properties:{key:`${r}-hidden`,class:"",styles:{display:"none"}},domNode:null,children:void 0,text:void 0}),n=()=>{var p,f;if(!this._readyForTrueRender||this.destroyed)return null;const a=i()??s(),l=a.properties??(a.properties={});if(l.key??(l.key=r),yf(a.vnodeSelector)){if(!this.visible)return s()}else this.visible?l.styles||(l.styles={}):(l.class="",l.styles={display:"none"}),(p=l.styles).display??(p.display="");let h=0;return(f=a.children)==null||f.forEach(m=>{var y;yf(m.vnodeSelector)||(m.properties??(m.properties={}),(y=m.properties).key??(y.key=`${this.id}--${h++}`))}),QC(this,a)};this.render=()=>{if(Uy)return n();let a=hU(this)??null;if(a)return a;this._trackingTarget.clear(),Uy=!0;try{a=fs(this._trackingTarget,n)}catch(l){throw U.getLogger(this).error(l),l}finally{Uy=!1}return a&&dU(this,a),a};const o=this.beforeFirstRender();o?this._resourcesFetch=o.then(()=>{this._readyForTrueRender=!0,this._postInitialize()}):(this._resourcesFetch=Promise.resolve().then(()=>{this._postInitialize()}),this._readyForTrueRender=!0),this.addResolvingPromise(this._resourcesFetch),yY(this._resourcesFetch)}normalizeCtorArgs(e,t){const r={...e};return t&&(r.container=t),r}postInitialize(){}beforeFirstRender(){var t;const e=this.loadDependencies();return(t=this._messageBundleProps)!=null&&t.length||e?Promise.all([e,this._loadLocale()]).then(()=>{}).catch(kw):null}loadDependencies(){return null}loadLocale(){return null}destroy(){this.destroyed||(Ne(this._trackingTarget),Ne(this.viewModel),this._detach(this.container),this._set("container",null),this._emitter.clear(),this.render=()=>null,this._projector=null,ty(this))}set container(e){this._get("container")||this._set("container",e)}castContainer(e){return mv(e)}get domNode(){return this.container}set domNode(e){this.container=e}get icon(){return null}set icon(e){this._overrideIfSome("icon",e)}get id(){var e;return this._get("id")||((e=this.container)==null?void 0:e.id)||Date.now().toString(16)+"-widget-"+_Y++}set id(e){e&&this._set("id",e)}get label(){return this.declaredClass.split(".").pop()}set label(e){this._overrideIfSome("label",e)}get renderable(){return this._resourcesFetch}get visible(){return this._get("visible")}set visible(e){this._set("visible",e)}get[(tI=KC,XC)](){return{projector:this._projector}}render(){throw new Error("not implemented")}scheduleRender(){this.destroyed||(ty(this),this._projector.scheduleRender())}classes(...e){return pU.apply(this,e)}renderNow(){ty(this),this._projector.renderNow()}_postInitialize(){var t;if(this.destroyed)return;this.scheduleRender(),(t=this._delegatedEventNames)!=null&&t.length&&this.addHandles(Q(()=>this.viewModel,(r,i)=>{i&&this.removeHandles("delegated-events"),r&&Tf(r)&&this.addHandles(this._delegatedEventNames.map(s=>Yc(r,s,n=>{this.emit(s,n)})),"delegated-events")},Gt)),this.postInitialize();const e=async()=>{await this._loadLocale().catch(kw),this.scheduleRender()};this.addHandles([T3(e),Q(()=>this.uiStrings,e),Cr(()=>this.container,r=>{this.destroyed||this._attach(r)},{initial:!0,once:!0})])}_attach(e){e&&(this._projector.merge(e,this.render),this._attached=!0)}_detach(e){var t;this._attached&&(this._projector.detach(this.render),this._attached=!1),(t=e==null?void 0:e.parentNode)==null||t.removeChild(e)}};Ye[tI]=!0,Ye.vnodeSelector="div",c([d()],Ye.prototype,"_readyForTrueRender",void 0),c([d({value:null})],Ye.prototype,"container",null),c([rt("container")],Ye.prototype,"castContainer",null),c([d()],Ye.prototype,"icon",null),c([d()],Ye.prototype,"id",null),c([d()],Ye.prototype,"label",null),c([d()],Ye.prototype,"renderable",null),c([d()],Ye.prototype,"uiStrings",void 0),c([d()],Ye.prototype,"viewModel",void 0),c([d({value:!0})],Ye.prototype,"visible",null),c([d()],Ye.prototype,"key",void 0),c([d()],Ye.prototype,"children",void 0),c([d()],Ye.prototype,"afterCreate",void 0),c([d()],Ye.prototype,"afterUpdate",void 0),c([d()],Ye.prototype,"afterRemoved",void 0),Ye=c([S(gY)],Ye);const Sm=Ye,wY=new Map;function bY(e){return wY.get(e)}function KT(e,t){return e&&"copyright"in e&&(!t||typeof e.originOf=="function"&&e.originOf("copyright")==="user")}function SY(e,t){return e.length!==t.length||e.some((r,i)=>r.text!==t[i].text)}function eu(e,t,r){!r||!t||e.find(i=>i.layerView===t&&i.text===r)||e.push({text:r,layerView:t})}function TY(e){return e.type==="bing-maps"}const zi=[];let Pa=class extends W{constructor(e){super(e),this._clear=()=>{this._fetchedAttributionData.clear(),this._pendingAttributions.clear(),this.removeHandles("suspension"),this.notifyChange("state")},this._pendingAttributions=new Set,this._fetchedAttributionData=new Map,this.items=new H,this.view=null,this._allLayerViewsChange=t=>{var i;this.removeHandles("suspension"),this.removeHandles("visible-geometry-changed");const r=(i=this.view)==null?void 0:i.allLayerViews;r&&(this.addHandles(r.map(s=>Q(()=>{var n;return[s.suspended,(n=s.layer)==null?void 0:n.attributionVisible]},()=>this._updateAttributionItems())).toArray(),"suspension"),r.forEach(s=>{s.declaredClass==="esri.views.3d.layers.Tiles3DLayerView3D"&&this.addHandles(s.on("visible-geometry-changed",()=>this._updateAttributionItems()),"visible-geometry-changed")})),t!=null&&t.removed&&t.removed.forEach(s=>{this._pendingAttributions.delete(s),this._fetchedAttributionData.delete(s)}),this._updateAttributionItems()},this.addHandles([wn(()=>{var t;return(t=this.view)==null?void 0:t.allLayerViews},"change",t=>this._allLayerViewsChange(t),{onListenerAdd:()=>this._allLayerViewsChange(),onListenerRemove:this._clear}),Cr(()=>{var t;return((t=this.view)==null?void 0:t.stationary)===!0},()=>this._updateAttributionItems())])}destroy(){this.view=null,this._fetchedAttributionData.clear(),this._pendingAttributions.clear(),this.items.removeAll()}get state(){var e;return(e=this.view)!=null&&e.ready?this._pendingAttributions.size>0?"loading":"ready":"disabled"}_updateAttributionItems(){const e=this.view,t=e==null?void 0:e.allLayerViews;if(zi.length=0,!e||!t)return void this._clear();t.forEach(i=>{var o,a;if(i.suspended||!((o=i.layer)!=null&&o.attributionVisible))return;const s=i.layer;if(KT(s,"user"))return void eu(zi,i,s.copyright);if(s.hasAttributionData){if(this._fetchedAttributionData.has(i)){const l=this._fetchedAttributionData.get(i);return void(l?eu(zi,i,this._getDynamicAttribution(l,e,s)):KT(s)&&eu(zi,i,s.copyright))}return void this._fetchAttributionData(i)}const n="portalItem"in s?(a=s.portalItem)==null?void 0:a.accessInformation:void 0;eu(zi,i,n||s.copyright)});const r=t.find(i=>{var s;return((s=i.layer)==null?void 0:s.type)==="integrated-mesh-3dtiles"});if(this.view&&r){const i=bY(this.view);if(i){const s=i.getAttributionText();for(let n=0;n<s.length;++n)eu(zi,r,s[n])}}SY(this.items,zi)&&(this.items.removeAll(),this.items.addMany(zi)),zi.length=0,this.notifyChange("state")}async _fetchAttributionData(e){if(this._pendingAttributions.has(e))return;this._pendingAttributions.add(e);const t=await KE(e.layer.fetchAttributionData());if(this._pendingAttributions.has(e)){const r=t.ok?this._createContributionIndex(t.value,TY(e.layer)):null;this._pendingAttributions.delete(e),this._fetchedAttributionData.set(e,r)}this._updateAttributionItems()}_createContributionIndex(e,t){const r=e.contributors,i={};if(!r)return i;for(let s=0;s<r.length;s++){const n=r[s],o=n.coverageAreas;if(!o)return;for(const a of o){const l=a.bbox,h=a.zoomMin-(t&&a.zoomMin?1:0),p=a.zoomMax-(t&&a.zoomMax?1:0),f=new De({xmin:l[1],ymin:l[0],xmax:l[3],ymax:l[2],spatialReference:le.WGS84}),m={extent:To(f),attribution:n.attribution||"",score:a.score!=null?a.score:100,id:s};for(let y=h;y<=p;y++)i[y]??(i[y]=[]),i[y].push(m)}}return i.maxKey=Math.max.apply(null,Object.keys(i)),i}_getDynamicAttribution(e,t,r){var h;const{extent:i,scale:s}=t;let n=((h=r.tileInfo)==null?void 0:h.scaleToZoom(s))??0;if(n=Math.min(e.maxKey??0,Math.round(n)),!i||n==null||n<=-1)return"";const o=e[n],a=Lf(i.center.clone().normalize(),le.WebMercator),l=new Set;return o?o.filter(p=>{const f=p.id,m=!l.has(f)&&a&&p.extent&&th(p.extent,a);return m&&l.add(f),m}).sort((p,f)=>f.score-p.score||p.objectId-f.objectId).map(p=>p.attribution).join(", "):""}};c([d({readOnly:!0,type:H})],Pa.prototype,"items",void 0),c([d({readOnly:!0})],Pa.prototype,"state",null),c([d()],Pa.prototype,"view",void 0),Pa=c([S("esri.widgets.Attribution.AttributionViewModel")],Pa);const iI=Pa,Mi={button:"esri-button",buttonDisabled:"esri-button--disabled",buttonHalf:"esri-button--half",buttonSecondary:"esri-button--secondary",buttonSmall:"esri-button--small",buttonTertiary:"esri-button--tertiary",buttonThird:"esri-button--third",empty:"esri-widget__content--empty",heading:"esri-widget__heading",interactive:"esri-interactive",panel:"esri-widget--panel",table:"esri-widget__table",widget:"esri-widget",widgetButton:"esri-widget--button"};function $Y(){return function(e,t){if(!e[t])throw new TypeError(`Cannot auto bind undefined function '${String(t)}'`);return{value:MY(e[t])}}}function EY(e){const t=e==null?void 0:e.type;return e instanceof KeyboardEvent||t==="keyup"||t==="keydown"||t==="keypress"}function MY(e){return function(t,...r){EY(t)?_U(t.key)&&(t.preventDefault(),t.stopPropagation(),t.target.click()):e.call(this,t,...r)}}function Tm(e){return(t,r)=>{t.hasOwnProperty("_messageBundleProps")||(t._messageBundleProps=t._messageBundleProps?t._messageBundleProps.slice():[]),t._messageBundleProps.push({bundlePath:e,propertyName:r})}}var xY=function(e){return{vnodeSelector:"",properties:void 0,children:void 0,text:e.toString(),domNode:null}},sI=function(e,t){for(var r=0,i=e.length;r<i;r++){var s=e[r];Array.isArray(s)?sI(s,t):s!=null&&s!==!1&&(s.hasOwnProperty("vnodeSelector")||(s=xY(s)),t.push(s))}},AY=function(e,t){for(var r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(r.length===1&&typeof r[0]=="string")return{vnodeSelector:e,properties:t||void 0,children:void 0,text:r[0],domNode:null};var s=[];return sI(r,s),{vnodeSelector:e,properties:t||void 0,children:s,text:void 0,domNode:null}};function Vt(e,t,...r){return typeof e!="function"||yf(e)?AY(e,t??null,...r):e(t,...r)}function Voe(...e){return e}const aa="esri-attribution",la={base:aa,poweredBy:`${aa}__powered-by`,sources:`${aa}__sources`,open:`${aa}--open`,sourcesOpen:`${aa}__sources--open`,link:`${aa}__link`};let Pt=class extends Sm{constructor(t,r){super(t,r),this._isOpen=!1,this._attributionTextOverflowed=!1,this._prevSourceNodeHeight=0,this._resizeObserver=new ResizeObserver(i=>i.forEach(({target:s})=>this._checkSourceTextOverflow(s))),this.itemDelimiter=" | ",this.messages=null,this.viewModel=new iI}initialize(){this.addHandles(wn(()=>{var t;return(t=this.viewModel)==null?void 0:t.items},"change",()=>this.scheduleRender()))}destroy(){var t;(t=this._resizeObserver)==null||t.disconnect()}get _isInteractive(){return this._isOpen||this._attributionTextOverflowed}get attributionText(){return this.viewModel.items.reduce((t,r)=>(t.includes(r.text)||t.push(r.text),t),[]).join(this.itemDelimiter)}get icon(){return"description"}set icon(t){this._overrideIfSome("icon",t)}get label(){var t;return((t=this.messages)==null?void 0:t.widgetLabel)??""}set label(t){this._overrideIfSome("label",t)}get view(){return this.viewModel.view}set view(t){this.viewModel.view=t}render(){const t={[la.open]:this._isOpen};return Vt("div",{bind:this,class:this.classes(la.base,Mi.widget,t),dir:"ltr",onclick:this._toggleState,onkeydown:this._toggleState},this._renderSourcesNode(),this._renderPoweredBy())}_renderPoweredBy(){return Vt("div",{class:la.poweredBy},"Powered by"," ",Vt("a",{class:la.link,href:"https://www.esri.com/",rel:"noreferrer",target:"_blank"},"Esri"))}_renderSourcesNode(){const t=this._isOpen,r=this._isInteractive,i=r?0:void 0,{attributionText:s}=this,n={[la.sourcesOpen]:t,[Mi.interactive]:r};return Vt("div",{afterCreate:this._afterSourcesNodeCreate,bind:this,class:this.classes(la.sources,n),innerHTML:s,tabIndex:i})}_afterSourcesNodeCreate(t){this._prevSourceNodeHeight=t.clientWidth,this._resizeObserver.observe(t)}_checkSourceTextOverflow(t){let r=!1;const{clientHeight:i,clientWidth:s,scrollWidth:n}=t,o=n>s,a=this._attributionTextOverflowed!==o;if(this._attributionTextOverflowed=o,a&&(r=!0),this._isOpen){const l=i<this._prevSourceNodeHeight;this._prevSourceNodeHeight=i,l&&(this._isOpen=!1,r=!0)}r&&this.scheduleRender()}_toggleState(){this._isInteractive&&(this._isOpen=!this._isOpen)}};c([d()],Pt.prototype,"_isOpen",void 0),c([d()],Pt.prototype,"_isInteractive",null),c([d()],Pt.prototype,"_attributionTextOverflowed",void 0),c([d()],Pt.prototype,"_prevSourceNodeHeight",void 0),c([d({readOnly:!0,dependsOn:["viewModel.items.length","itemDelimiter"]})],Pt.prototype,"attributionText",null),c([d()],Pt.prototype,"icon",null),c([d()],Pt.prototype,"itemDelimiter",void 0),c([d()],Pt.prototype,"label",null),c([d(),Tm("esri/widgets/Attribution/t9n/Attribution")],Pt.prototype,"messages",void 0),c([d()],Pt.prototype,"view",null),c([d({type:iI})],Pt.prototype,"viewModel",void 0),c([$Y()],Pt.prototype,"_toggleState",null),Pt=c([S("esri.widgets.Attribution")],Pt);const PY=Pt;function OY(){const e=A("mapview-essential-goto-duration");return e==null?e:e}function CY(e){var t,r;return((t=e==null?void 0:e.spatialReference)==null?void 0:t.isWebMercator)||((r=e==null?void 0:e.spatialReference)==null?void 0:r.isGeographic)||!1}const IY=e=>{let t=class extends e{constructor(...r){super(...r),this.goToOverride=null,this.view=null}callGoTo(r){const{view:i}=this;return O$(i),this.goToOverride?this.goToOverride(i,r):i.goTo(r.target,r.options)}};return c([d()],t.prototype,"goToOverride",void 0),c([d()],t.prototype,"view",void 0),t=c([S("esri.widgets.support.GoTo")],t),t};let ho=class extends IY(W){constructor(t){super(t),this.orientation={x:0,y:0,z:0},this.view=null,this._updateForCamera=this._updateForCamera.bind(this),this._updateForRotation=this._updateForRotation.bind(this),this._updateRotationWatcher=this._updateRotationWatcher.bind(this)}initialize(){this._watchForView(Tt)}destroy(){this.view=null}get canShowNorth(){return CY(this.view)}get state(){var t;return!((t=this.view)!=null&&t.ready)||this.view.type==="2d"&&!this.view.constraints.rotationEnabled?"disabled":this.canShowNorth?"compass":"rotation"}reset(){var t,r;(t=this.view)!=null&&t.ready&&(((r=this.view)==null?void 0:r.type)==="2d"?this.callGoTo({target:{rotation:0},options:{animationMode:"always",duration:OY()}}):this.callGoTo({target:{heading:0}}))}_updateForRotation(t){t!=null&&this._set("orientation",{z:t})}_updateForCamera(t){if(!t)return;const r=-t.heading;this._set("orientation",{x:0,y:0,z:r})}_updateRotationWatcher(t){this.removeAllHandles(),this._watchForView(),t&&this.addHandles(t.type==="2d"?Q(()=>t==null?void 0:t.rotation,this._updateForRotation,Tt):Q(()=>t==null?void 0:t.camera,this._updateForCamera,Tt))}_watchForView(t){this.addHandles(Q(()=>this.view,this._updateRotationWatcher,t))}};c([d({readOnly:!0})],ho.prototype,"canShowNorth",null),c([d({readOnly:!0})],ho.prototype,"orientation",void 0),c([d({readOnly:!0})],ho.prototype,"state",null),c([d()],ho.prototype,"view",void 0),ho=c([S("esri.widgets.Compass.CompassViewModel")],ho);const nI=ho,XT="esri-compass",QT={base:XT,iconContainer:`${XT}__icon-container`};let ts=class extends Sm{constructor(t,r){super(t,r),this.messages=null,this.viewModel=new nI,this._reset=()=>{this.viewModel.reset()},this._toRotationTransform=i=>({transform:`rotateZ(${i.z}deg)`})}loadDependencies(){return fw({button:()=>N(()=>import("./index-CfWvcDym.js"),__vite__mapDeps([339,340,341,342,343,344,345,346,347,348,349,350,351])),icon:()=>N(()=>import("./index-Bm7SSVW8.js").then(t=>t.i),__vite__mapDeps([343,344,345]))})}get goToOverride(){return this.viewModel.goToOverride}set goToOverride(t){this.viewModel.goToOverride=t}get icon(){return this.viewModel.state==="rotation"?"arrow-up":"compass-needle"}set icon(t){this._overrideIfSome("icon",t)}get label(){var t;return((t=this.messages)==null?void 0:t.widgetLabel)??""}set label(t){this._overrideIfSome("label",t)}get view(){return this.viewModel.view}set view(t){this.viewModel.view=t}reset(){return this.viewModel.reset()}render(){const{orientation:t,state:r}=this.viewModel,{messages:i}=this;return Vt("div",{class:this.classes(QT.base,Mi.widget)},Vt("calcite-button",{class:Mi.widgetButton,disabled:r==="disabled",kind:"neutral",label:i.reset,onclick:this._reset,round:!0,scale:"s",title:i.reset},Vt("div",{"aria-hidden":"true",class:QT.iconContainer,title:i.reset},Vt("calcite-icon",{icon:this.icon,styles:this._toRotationTransform(t)}))))}};c([d()],ts.prototype,"goToOverride",null),c([d()],ts.prototype,"icon",null),c([d()],ts.prototype,"label",null),c([d(),Tm("esri/widgets/Compass/t9n/Compass")],ts.prototype,"messages",void 0),c([d()],ts.prototype,"view",null),c([d({type:nI})],ts.prototype,"viewModel",void 0),ts=c([S("esri.widgets.Compass")],ts);const RY=ts,e$="esri-navigation-toggle",t$={base:e$,isLayoutHorizontal:`${e$}--horizontal`};let Oa=class extends W{constructor(t){super(t),this._navigationMode="pan",this.view=null}initialize(){this.addHandles(Cr(()=>{var t,r;return(r=(t=this.view)==null?void 0:t.navigation)==null?void 0:r.actionMap},()=>this._updateNavigationActionMap()))}destroy(){this.view=null}get state(){var t,r;return(t=this.view)!=null&&t.ready&&((r=this.view)==null?void 0:r.type)==="3d"?"ready":"disabled"}get navigationMode(){return this._navigationMode}set navigationMode(t){this._navigationMode=t,this._updateNavigationActionMap()}toggle(){this.state!=="disabled"&&(this.navigationMode=this.navigationMode!=="pan"?"pan":"rotate")}_updateNavigationActionMap(){var i,s;const t=(s=(i=this.view)==null?void 0:i.navigation)==null?void 0:s.actionMap;if(!t)return;const r=this._navigationMode==="pan";t.dragPrimary=r?"pan":"rotate",t.dragSecondary=r?"rotate":"pan"}};c([d({readOnly:!0})],Oa.prototype,"state",null),c([d()],Oa.prototype,"_navigationMode",void 0),c([d()],Oa.prototype,"view",void 0),Oa=c([S("esri.widgets.NavigationToggle.NavigationToggleViewModel")],Oa);const oI=Oa;let rs=class extends Sm{constructor(t,r){super(t,r),this.messages=null,this.viewModel=new oI,this.toggle=()=>this.viewModel.toggle(),this._panButton=null,this._rotateButton=null,this._toggle=()=>{var s;const i=((s=this.viewModel)==null?void 0:s.navigationMode)==="pan"?this._rotateButton:this._panButton;vU(i),this.toggle()}}loadDependencies(){return fw({button:()=>N(()=>import("./index-CfWvcDym.js"),__vite__mapDeps([339,340,341,342,343,344,345,346,347,348,349,350,351]))})}get icon(){return"move"}set icon(t){this._overrideIfSome("icon",t)}get label(){var t;return((t=this.messages)==null?void 0:t.widgetLabel)??""}set label(t){this._overrideIfSome("label",t)}set layout(t){t!=="horizontal"&&(t="vertical"),this._set("layout",t)}get view(){return this.viewModel.view}set view(t){this.viewModel.view=t}render(){var s,n;const t=((s=this.viewModel)==null?void 0:s.state)==="disabled",r=((n=this.viewModel)==null?void 0:n.navigationMode)==="pan",i=this.messages.toggle;return Vt("div",{class:this.classes(t$.base,Mi.widget,{[t$.isLayoutHorizontal]:this.layout==="horizontal"})},Vt("calcite-button",{afterCreate:o=>{this._panButton=o},appearance:r?"outline-fill":"solid",class:Mi.widgetButton,disabled:t,iconStart:"move",kind:"neutral",label:i,onclick:this._toggle,tabIndex:r?void 0:-1,title:i}),Vt("calcite-button",{afterCreate:o=>{this._rotateButton=o},appearance:r?"solid":"outline-fill",class:Mi.widgetButton,disabled:t,iconStart:"rotate",kind:"neutral",label:i,onclick:this._toggle,tabIndex:r?-1:void 0,title:i}))}};c([d()],rs.prototype,"icon",null),c([d()],rs.prototype,"label",null),c([d({value:"vertical"})],rs.prototype,"layout",null),c([d(),Tm("esri/widgets/NavigationToggle/t9n/NavigationToggle")],rs.prototype,"messages",void 0),c([d()],rs.prototype,"view",null),c([d({type:oI})],rs.prototype,"viewModel",void 0),rs=c([S("esri.widgets.NavigationToggle")],rs);const kY=rs;let po=class extends W{get canZoomIn(){var i,s,n;if(!((i=this.view)==null?void 0:i.ready))return!1;const r=(n=(s=this.view)==null?void 0:s.constraints)==null?void 0:n.effectiveMaxScale;return r===0||this._scale>r}get canZoomOut(){var s;const{view:t}=this;if(!(t==null?void 0:t.ready))return!1;const i=(s=t.constraints)==null?void 0:s.effectiveMinScale;return i===0||this._scale<i}get _scale(){var r,i,s;const t=(i=(r=this.view)==null?void 0:r.animation)==null?void 0:i.target;return(t&&"then"in t||t==null?void 0:t.scale)??((s=this.view)==null?void 0:s.scale)??0}};c([d({readOnly:!0})],po.prototype,"canZoomIn",null),c([d({readOnly:!0})],po.prototype,"canZoomOut",null),c([d()],po.prototype,"view",void 0),c([d()],po.prototype,"_scale",null),po=c([S("esri.widgets.Zoom.ZoomConditions2D")],po);const NY=po;let Ca=class extends W{get canZoomIn(){return!!this.view.ready}get canZoomOut(){return!!this.view.ready}};c([d({readOnly:!0})],Ca.prototype,"canZoomIn",null),c([d({readOnly:!0})],Ca.prototype,"canZoomOut",null),c([d()],Ca.prototype,"view",void 0),Ca=c([S("esri.widgets.Zoom.ZoomConditions3D")],Ca);const LY=Ca;let Zs=class extends W{constructor(t){super(t)}destroy(){this.view=null}get canZoomIn(){return this._zoomConditions!=null&&this._zoomConditions.canZoomIn}get canZoomOut(){var t;return this._zoomConditions!=null&&((t=this._zoomConditions)==null?void 0:t.canZoomOut)}get state(){var t;return(t=this.view)!=null&&t.ready?"ready":"disabled"}set view(t){t?t.type==="2d"?this._zoomConditions=new NY({view:t}):t.type==="3d"&&(this._zoomConditions=new LY({view:t})):this._zoomConditions=null,this._set("view",t)}zoomIn(){const t=this.view;this.canZoomIn&&t&&(t.type==="2d"?t.mapViewNavigation.zoomIn():yp(t.goTo({zoomFactor:2})))}zoomOut(){const t=this.view;this.canZoomOut&&t&&(t.type==="2d"?t.mapViewNavigation.zoomOut():yp(t.goTo({zoomFactor:.5})))}};c([d()],Zs.prototype,"_zoomConditions",void 0),c([d()],Zs.prototype,"canZoomIn",null),c([d()],Zs.prototype,"canZoomOut",null),c([d({readOnly:!0})],Zs.prototype,"state",null),c([d()],Zs.prototype,"view",null),Zs=c([S("esri.widgets.Zoom.ZoomViewModel")],Zs);const aI=Zs,r$={base:"esri-zoom",horizontalLayout:"esri-zoom--horizontal"};let is=class extends Sm{constructor(t,r){super(t,r),this.messages=null,this.viewModel=new aI,this.zoomIn=()=>this.viewModel.zoomIn(),this.zoomOut=()=>this.viewModel.zoomOut()}loadDependencies(){return fw({button:()=>N(()=>import("./index-CfWvcDym.js"),__vite__mapDeps([339,340,341,342,343,344,345,346,347,348,349,350,351]))})}get icon(){return"magnifying-glass-plus"}set icon(t){this._overrideIfSome("icon",t)}get label(){var t;return((t=this.messages)==null?void 0:t.widgetLabel)??""}set label(t){this._overrideIfSome("label",t)}set layout(t){t!=="horizontal"&&(t="vertical"),this._set("layout",t)}set view(t){this.viewModel.view=t}get view(){return this.viewModel.view}render(){const t={[r$.horizontalLayout]:this.layout==="horizontal"},{canZoomIn:r,canZoomOut:i}=this.viewModel,{zoomIn:s,zoomOut:n}=this.messages;return Vt("div",{class:this.classes(r$.base,Mi.widget,t)},Vt("calcite-button",{class:Mi.widgetButton,disabled:!r,iconStart:"plus",kind:"neutral",label:s,onclick:this.zoomIn,title:s}),Vt("calcite-button",{class:Mi.widgetButton,disabled:!i,iconStart:"minus",kind:"neutral",label:n,onclick:this.zoomOut,title:n}))}};c([d()],is.prototype,"icon",null),c([d()],is.prototype,"label",null),c([d({value:"vertical"})],is.prototype,"layout",null),c([d(),Tm("esri/widgets/Zoom/t9n/Zoom")],is.prototype,"messages",void 0),c([d()],is.prototype,"view",null),c([d({type:aI})],is.prototype,"viewModel",void 0),is=c([S("esri.widgets.Zoom")],is);const DY=is;function FY(e){return(e==null?void 0:e.view)!==void 0}let op=class extends AZ{constructor(e){super(e),this._defaultPositionLookup={attribution:"manual",compass:"top-left","navigation-toggle":"top-left",zoom:"top-left"},this.components=[],this._updateViewAwareWidgets=t=>{this.components.forEach(r=>{const i=this._find(r),s=i==null?void 0:i.widget;FY(s)&&(s.view=t)})},this._componentsWatcher=(t,r)=>{this._removeComponents(r),this._addComponents(t),this._adjustPadding(t)}}initialize(){this.addHandles([Q(()=>this.components,this._componentsWatcher,Tt),Q(()=>this.view,this._updateViewAwareWidgets,Tt)])}_add(e,t,r,i,s){let n=e;if(typeof e=="string"&&this._defaultPositionLookup[e]){if(this._find(e))return;n=this._createComponent(e)}super._add(n,t,r,i,s)}_removeComponents(e){e.forEach(t=>{const r=this._find(t);r&&(this.remove(r),r.destroy())})}_adjustPadding(e){if(!e.includes("attribution")&&!this._isOverridden("padding")){const{top:t}=this.padding;this.padding=t}}_addComponents(e){this.constructed&&e.forEach(t=>this.add(this._createComponent(t),this._defaultPositionLookup[t]))}_createComponent(e){const t=this._createWidget(e);return new ip({id:e,node:t})}_createWidget(e){const t=this.view;switch(e){case"attribution":return new PY({view:t});case"compass":return new RY({view:t});case"navigation-toggle":return new kY({view:t});case"zoom":return new DY({view:t})}}};c([d()],op.prototype,"components",void 0),op=c([S("esri.views.ui.DefaultUI")],op);const lI=op;let ap=class extends lI{constructor(e){super(e),this.components=["attribution","zoom"]}};c([d()],ap.prototype,"components",void 0),ap=c([S("esri.views.ui.2d.DefaultUI2D")],ap);const uI=ap;let UY=class Y1{constructor(t,r,i=""){this.major=t,this.minor=r,this._context=i}lessThan(t,r){return this.major<t||t===this.major&&this.minor<r}greaterEqual(t,r){return!this.lessThan(t,r)}validate(t){if(this.major!==t.major){const r=this._context&&this._context+":",i=this._context&&this._context+" ";throw new I(r+"unsupported-version",`Required major ${i}version is '${this.major}', but got '\${version.major}.\${version.minor}'`,{version:t})}}clone(){return new Y1(this.major,this.minor,this._context)}static parse(t,r=""){const[i,s]=t.split("."),n=/^\s*\d+\s*$/;if(!(i!=null&&i.match)||!n.test(i))throw new I((r&&r+":")+"invalid-version","Expected major version to be a number, but got '${version}'",{version:t});if(!(s!=null&&s.match)||!n.test(s))throw new I((r&&r+":")+"invalid-version","Expected minor version to be a number, but got '${version}'",{version:t});const o=parseInt(i,10),a=parseInt(s,10);return new Y1(o,a,r)}};class jY extends UY{constructor(t,r){super(t,r,"webmap")}}function jy(e){return e!=null&&typeof e=="object"&&"declaredClass"in e&&e.declaredClass==="esri.WebMap"}new jY(2,33);var K1;let lp=K1=class extends G{constructor(e){super(e),this.color=new oe([0,0,0,1])}clone(){return new K1(C({color:this.color}))}};c([d({type:oe,json:{write:!0}})],lp.prototype,"color",void 0),lp=K1=c([S("esri.webmap.background.ColorBackground")],lp);const GY=lp;let cI,hI,dI,pI,fI,mI,yI;async function zY(){const[,{GraphicsView2D:e,GraphicContainer:t,LabelManager:r,MapViewNavigation:i,MagnifierView2D:s,GridView2D:n,Stage:o}]=await Promise.all([N(()=>import("./webglDeps-DBdOE5NJ.js"),__vite__mapDeps([260,184,12,261,262,263])),N(()=>import("./mapViewDeps-BL38ngkY.js"),__vite__mapDeps([264,148,34,35,108,109,45,12,110,105,111,104,112,113,114,107,77,115,66,265,119,266,261,184,262,188,164,267,138,268,206,171,170,123,49,50,18,117,125,269,120,121,122,270,32,169,260,263,271,133,272,106,116,59,47,42,54,53,273,177,178,162,186,274,93,275,124,276,277,118,278,82,129,102,279,280,281,282,180,225,283,284]))]);hI=e,dI=t,pI=r,fI=i,mI=s,yI=n,cI=o}let ne=class extends tq(_F(ZU(kU(uz)))){constructor(e){super(e),this._magnifierView=null,this._gridView=null,this.stage=null,this._resolveWhenReady=[],this.rootLayerViews=new Pc({getCollections:()=>{var t,r;return[(t=this.basemapView)==null?void 0:t.baseLayerViews,this.layerViews,(r=this.basemapView)==null?void 0:r.referenceLayerViews]},getChildrenFunction:()=>null}),this.featuresTilingScheme=null,this.graphicsView=null,this.labelManager=null,this.navigation=new pm({actionMap:new Uv({dragTertiary:"none"})}),this.renderingOptions={samplingMode:"dynamic",edgeLabelsVisible:!0,labelsAnimationTime:125,labelCollisionsEnabled:!0},this.supersampleScreenshotsEnabled=!0,this.supportsGround=!1,this.floors=new H,this.grid=null,this.map=null,this.spatialReferenceLocked=!1,this.timeline=new TC,this.type="2d",this.view2dType=null,this.ui=new uI,this.test={takeScreenshot:async t=>lZ(this._getScreenshotView(t),t)},this.padding={top:0,right:0,bottom:0,left:0},R9()}destroy(){this.layerViewManager.clear(),this._set("preconditionsReady",!1),this.frameTask=Ne(this.frameTask),this.goToManager.destroy(),this.rootLayerViews.destroy(),this.inputManager.destroy(),this._set("inputManager",null)}get graphicsTileStore(){return new mW(this.featuresTilingScheme)}get constraintsInfo(){var r,i;const e=(r=this.defaultsFromMap)==null?void 0:r.tileInfo,t=this.spatialReference;return{lods:(i=e==null?void 0:e.spatialReference)!=null&&i.equals(t)?e.lods:null,spatialReference:t}}get initialExtentRequired(){var o;if(!this.stateManager)return!1;const{scale:e,constraints:t,center:r,viewpoint:i,extent:s}=this;let n=this.zoom;return!(this.map&&"initialViewProperties"in this.map&&((o=this.map.initialViewProperties)!=null&&o.viewpoint))&&!s&&(t!=null&&t.effectiveLODs||(n=-1),(!r||e===0&&n===-1)&&((i==null?void 0:i.targetGeometry)==null||i.targetGeometry.type!=="extent"&&!i.scale))}get defaultsFromMapSettings(){return{required:{extent:!1,heightModelInfo:!1,tileInfo:!0},requiresExtentInSpatialReference:this.spatialReferenceLocked}}get scheduler(){return this.frameTask.scheduler}get typeSpecificPreconditionsReady(){const e=this._getDefaultViewpoint();if(!e)return!1;const t=e.targetGeometry,r=this.spatialReference;return Bx(t.spatialReference,r)}get background(){return jy(this.map)?this.map.initialViewProperties.background:null}set background(e){this._override("background",e)}get center(){var e;return((e=this.stateManager)==null?void 0:e.center)??null}set center(e){this.stateManager.center=e}get highlightOptions(){return qW(this)}set highlightOptions(e){WW(this,e)}get padding(){var e;return(e=this.stateManager)==null?void 0:e.padding}set padding(e){this.stateManager&&(this.stateManager.padding=e)}get rendering(){var e;return((e=this.stage)==null?void 0:e.renderRequested)??!1}get resolution(){return this.stateManager.resolution??0}get scale(){var e;return((e=this.stateManager)==null?void 0:e.scale)??0}set scale(e){this.stateManager&&(this.stateManager.scale=e)}get tileInfo(){var e;return(e=this.featuresTilingScheme)==null?void 0:e.tileInfo}get updating(){var r,i,s,n;const e=!(!this.magnifier.visible||this.magnifier.position===null||!((r=this._magnifierView)!=null&&r.updatingHandles.updating)),t=!this.destroyed&&(!this.layerViewManager||!this.labelManager||!this.graphicsView||this.layerViewManager.updating===!0||this.labelManager.updating===!0||this.graphicsView.updating===!0||this.allLayerViews.some(o=>!o.destroyed&&!("layerViews"in o)&&o.updating===!0)||e);if(A("esri-2d-log-updating")){const o=this.allLayerViews.reduce((a,l)=>({...a,[`${l.layer.id}(${l.layer.type})`]:!l.destroyed&&!("layerViews"in l)&&l.updating}),{});console.log(`Updating MapView: ${t}
-> Null LayerViewManager: ${!this.layerViewManager}
-> Null LabelManager: ${!this.labelManager}
-> Null GraphicsView: ${!this.graphicsView}
-> layerViewManager.updating: ${(i=this.layerViewManager)==null?void 0:i.updating}
-> labelManager.updating: ${(s=this.labelManager)==null?void 0:s.updating}
-> graphicsView.updating: ${(n=this.graphicsView)==null?void 0:n.updating}
-> allLayerViews: ${JSON.stringify(o)}
-> updatingMagnifier: ${e}
`)}return t}get visibleArea(){const e=this.stateManager.visibleArea;return e&&new Ci({rings:[e.map(t=>[t[0],t[1]])],spatialReference:this.spatialReference})}get zoom(){return this.stateManager.zoom??-1}set zoom(e){this.stateManager.zoom=e}get navigating(){var e;return((e=this.mapViewNavigation)==null?void 0:e.interacting)??!1}async hitTest(e,t){return ZW(this,e,t)}async takeScreenshot(e){return aZ(this._getScreenshotView(e),e)}toMap(e){if(!this.ready)return null;const t=RP(e)?IP(this,e):e;return this.stateManager.toMap(t)}toScreen(e,t){return this.stateManager.toScreen(e,t)}whenLayerView(e){return super.whenLayerView(e)}graphicChanged(e){this.graphicsView&&this.graphicsView.graphicUpdateHandler(e)}whenReady(){return new Promise(e=>{this.ready?e(this):this._resolveWhenReady.push(e)})}forceDOMReadyCycle(){this.forceReadyCycle()}getDefaultSpatialReference(){var e;return this.map&&"initialViewProperties"in this.map&&this.map.initialViewProperties.spatialReference||((e=this.defaultsFromMap)==null?void 0:e.spatialReference)||null}getDefaultTimeZone(){return jy(this.map)?this.map.initialViewProperties.timeZone:null}getDefaultTimeExtent(){return jy(this.map)?this.map.initialViewProperties.timeExtent:null}hasLayerViewModule(e){return HS.hasLayerViewModule(e)}importLayerView(e){return HS.importLayerView(e)}pixelSizeAt(){return this.ready?this.resolution:(U.getLogger(this).error("#pixelSizeAt()","Map view cannot be used before it is ready"),null)}async popupHitTest(e){var l;const t=this.toMap(e),r=await this.hitTest(e),i=this.allLayerViews.toArray().filter(h=>h.clips.every(p=>dC(this,p,e,t))).reverse(),s=new globalThis.Map(i.map(h=>[h.layer.uid,h])),n=[];let o=0,a=0;for(;o<r.results.length||a<i.length;){const h=r.results.at(o);if(h&&h.type!=="graphic"){++o;continue}const p=s.get((l=(h==null?void 0:h.layer)??(h==null?void 0:h.graphic.layer))==null?void 0:l.uid);if((!h||p)&&a<i.length&&i.at(a)!==p){const f=i.at(a);"fetchPopupFeaturesAtLocation"in f&&n.push({mapPoint:t,layerView:f}),++a}else h&&(n.push({graphic:h.graphic,layerView:p}),++o)}return{hits:n,location:t}}requestUpdate(){this.ready&&this.frameTask.requestUpdate()}async validate(){let e=_Z(this.type);if(A("safari")&&A("safari")<9&&(e=new I("mapview:browser-not-supported","This browser is not supported by MapView (Safari < 9)",{type:"safari",requiredVersion:9,detectedVersion:A("safari")})),e!=null)throw U.getLogger(this).warn("#validate()",e.message),e}loadAsyncDependencies(){return zY()}_getDefaultViewpoint(){var v;const{constraints:e,initialExtent:t,map:r,padding:i,size:s}=this;if(!e)return null;const n=r&&"initialViewProperties"in r?r.initialViewProperties:void 0,o=this.stateManager.getUserStartupOptions(this.size),a=n==null?void 0:n.viewpoint,l=((v=a==null?void 0:a.targetGeometry)==null?void 0:v.extent)??t,h=l==null?void 0:l.center,p=(a==null?void 0:a.rotation)??0,f=(a==null?void 0:a.scale)||l&&ym(l,[s[0]-i.left-i.right,s[1]-i.top-i.bottom]),m=o.center??h,y=o.rotation??p,_=o.scale??f;return m&&_?new Pr({targetGeometry:m,scale:_,rotation:y}):null}_startup(){var o;this.timeline.begin("MapView Startup");const e=this._getDefaultViewpoint();this.stateManager.startup(e,this.size,this.spatialReference,(o=this.defaultsFromMap.extent)==null?void 0:o.center),this.graphics.owner=this;const t=new cI(this.surface,{canvas:this.renderCanvas,contextOptions:{disabledExtensions:this.deactivatedWebGLExtensions,debugWebGLExtensions:this.debugWebGLExtensions},renderingOptions:this.renderingOptions,timeline:this.timeline});this.stage=t,this._magnifierView=new mI,this._magnifierView.magnifier=this.magnifier,this._gridView=new yI;const r=new pI({view:this});this._set("labelManager",r);const i=new Kq({view:this});this._set("animationManager",i);const s=new fI({view:this,animationManager:i});this._set("mapViewNavigation",s),this._setupSpatialReferenceDependentProperties(),this.addHandles([this.rootLayerViews.on("change",()=>this._updateStageChildren()),t.on("webgl-error",a=>this.fatalError=a.error),Q(()=>this.stationary,a=>t.stationary=a,Gt),Q(()=>this.background,a=>{t.backgroundColor=a==null?void 0:a.color,this._magnifierView.backgroundColor=a==null?void 0:a.color},Gt),Q(()=>this.magnifier,a=>this._magnifierView.magnifier=a,Gt),Q(()=>this.grid,a=>this._gridView.grid=a,Gt),Q(()=>this.renderingOptions,a=>t.renderingOptions=a,Gt),Q(()=>this.highlights.items.map(a=>({name:a.name,options:{fillColor:a.color,haloColor:a.haloColor,fillOpacity:a.fillOpacity,haloOpacity:a.haloOpacity,haloWidth:a.haloWidth,haloBlur:a.haloBlur}})),()=>{t.highlightGradient=BW(t.highlightGradient,this.highlights.items)},Gt),Q(()=>this.state.id,()=>t.state=this.state,Gt)],"map-view"),this._updateStageChildren();const n=this._resolveWhenReady;this._resolveWhenReady=[],n.forEach(a=>a(this)),this.timeline.end("MapView Startup"),this.frameTask.start(),this._set("ready",!0)}_teardown(){this._destroySpatialReferenceDependentProperties(),this.removeHandles("map-view"),this.mapViewNavigation.destroy(),this._set("mapViewNavigation",null),this.animation=null,this.animationManager.destroy(),this._set("animationManager",null),this.layerViewManager.clear(),this.labelManager.destroy(),this._magnifierView.destroy(),this._gridView.destroy(),this.stage.destroy(),this.stage=null,this._set("graphicsView",null),this._magnifierView=null,this._gridView=null,this._set("labelManager",null),this._set("mapViewNavigation",null),this.graphics.owner=null,this.frameTask.stop(),this.stationaryManager.clear(),this._set("ready",!1),this.stateManager.teardown()}_updateStageChildren(){this.stage.removeAllChildren(),this.rootLayerViews.forEach(t=>{this.stage.addChild(t.container)});const e=this.graphicsView;this.stage.addChild(e.container),this.stage.addChild(this._magnifierView),this.stage.addChild(this._gridView)}_setupSpatialReferenceDependentProperties(){const e=new iW(yF.create({spatialReference:this.spatialReference,size:512,numLODs:36}));this._set("featuresTilingScheme",e);const t=new hI({view:this,graphics:this.graphics,requestUpdateCallback:()=>this.requestUpdate(),container:new dI(e)});this._set("graphicsView",t)}_destroySpatialReferenceDependentProperties(){const e=this.graphicsView;this._set("graphicsView",null),e.destroy(),this._set("featuresTilingScheme",null)}_getScreenshotView(e){var n;const{allLayerViews:t,padding:r,size:i,stage:s}=this;return{allLayerViews:t,backgroundColor:e!=null&&e.ignoreBackground?null:(n=this.background)==null?void 0:n.color,padding:r,size:i,stage:s}}_spatialReferenceChanged(e){if(this.ready){this.frameTask.stop();for(const t of this.allLayerViews)t.processDetach();this._destroySpatialReferenceDependentProperties(),this.stateManager.changeSpatialReference(e),this.stage.state=this.state,this._setupSpatialReferenceDependentProperties();for(const t of this.allLayerViews)t.processAttach();this.frameTask.requestFrame(),this.frameTask.start(),this._updateStageChildren()}}};ne.type="2d",c([d({constructOnly:!0})],ne.prototype,"deactivatedWebGLExtensions",void 0),c([d({constructOnly:!0})],ne.prototype,"debugWebGLExtensions",void 0),c([d({readOnly:!0})],ne.prototype,"featuresTilingScheme",void 0),c([d({readOnly:!0})],ne.prototype,"graphicsTileStore",null),c([d()],ne.prototype,"graphicsView",void 0),c([d()],ne.prototype,"constraintsInfo",null),c([d()],ne.prototype,"initialExtentRequired",null),c([d()],ne.prototype,"labelManager",void 0),c([d({type:pm,nonNullable:!0})],ne.prototype,"navigation",void 0),c([d({constructOnly:!0})],ne.prototype,"renderCanvas",void 0),c([d()],ne.prototype,"renderingOptions",void 0),c([d({constructOnly:!0})],ne.prototype,"supersampleScreenshotsEnabled",void 0),c([d({readOnly:!0})],ne.prototype,"supportsGround",void 0),c([d()],ne.prototype,"defaultsFromMapSettings",null),c([d({readOnly:!0})],ne.prototype,"typeSpecificPreconditionsReady",null),c([d({type:GY})],ne.prototype,"background",null),c([d()],ne.prototype,"center",null),c([d({type:H})],ne.prototype,"floors",void 0),c([d()],ne.prototype,"grid",void 0),c([d({type:dn})],ne.prototype,"highlightOptions",null),c([d()],ne.prototype,"map",void 0),c([d()],ne.prototype,"padding",null),c([d({readOnly:!0})],ne.prototype,"rendering",null),c([d({readOnly:!0})],ne.prototype,"resolution",null),c([d()],ne.prototype,"scale",null),c([d({constructOnly:!0})],ne.prototype,"spatialReferenceLocked",void 0),c([d({readOnly:!0})],ne.prototype,"tileInfo",null),c([d({type:TC,readOnly:!0})],ne.prototype,"timeline",void 0),c([d({readOnly:!0})],ne.prototype,"type",void 0),c([d({readOnly:!0})],ne.prototype,"updating",null),c([d({readOnly:!0})],ne.prototype,"view2dType",void 0),c([d({readOnly:!0})],ne.prototype,"visibleArea",null),c([d()],ne.prototype,"zoom",null),c([d({readOnly:!0})],ne.prototype,"navigating",null),c([d(),rt(e=>e instanceof lI?e:Mf(uI,e))],ne.prototype,"ui",void 0),ne=c([S("esri.views.View2D")],ne);const VY=ne;let up=class extends VY{constructor(e){super(e),this.view2dType="map"}};c([d({readOnly:!0})],up.prototype,"view2dType",void 0),up=c([S("esri.views.MapView")],up);const BY=up,HY=new ux({basemap:"topo-vector"});new BY({container:"viewDiv",map:HY,center:[-122.4194,37.7749],zoom:12});D;export{LK as $,Ne as A,c1 as B,oC as C,Nw as D,W_ as E,V as F,tl as G,lf as H,Nt as I,B1 as J,Uz as K,et as L,xe as M,hT as N,bi as O,Tt as P,oT as Q,tT as R,ys as S,ZE as T,Vc as U,H as V,wT as W,noe as X,cf as Y,wn as Z,N as _,iW as a,ki as a$,E3 as a0,KE as a1,Be as a2,ms as a3,vn as a4,W$ as a5,We as a6,ve as a7,nu as a8,le as a9,sK as aA,C as aB,m$ as aC,Cx as aD,$ne as aE,_W as aF,nT as aG,sT as aH,iT as aI,rT as aJ,Rx as aK,lv as aL,kx as aM,Ix as aN,eS as aO,Kre as aP,$ee as aQ,O$ as aR,Yd as aS,gl as aT,Vp as aU,Ie as aV,Ar as aW,s_ as aX,Or as aY,Ee as aZ,Xc as a_,Bo as aa,Wx as ab,EI as ac,rre as ad,G7 as ae,ore as af,are as ag,Qte as ah,xc as ai,F_ as aj,Si as ak,ft as al,Ef as am,cr as an,nre as ao,G as ap,wD as aq,Dte as ar,um as as,Wo as at,Lv as au,cm as av,Ni as aw,UX as ax,Ha as ay,oe as az,se as b,gQ as b$,$l as b0,ri as b1,Qee as b2,Kee as b3,Xee as b4,Pi as b5,Mf as b6,Qr as b7,Ci as b8,Ht as b9,$I as bA,Xu as bB,Pf as bC,fX as bD,De as bE,Wf as bF,re as bG,eh as bH,J as bI,UA as bJ,Kte as bK,Yte as bL,zte as bM,Nc as bN,kc as bO,tj as bP,dre as bQ,fQ as bR,mQ as bS,vQ as bT,LD as bU,hre as bV,AA as bW,fG as bX,q as bY,Wh as bZ,_Q as b_,Q_ as ba,si as bb,loe as bc,x$ as bd,YX as be,He as bf,Rt as bg,Yh as bh,Uee as bi,sO as bj,It as bk,wo as bl,I8 as bm,A as bn,Uo as bo,pe as bp,yF as bq,bX as br,ae as bs,ye as bt,PQ as bu,aX as bv,rN as bw,un as bx,$3 as by,Yee as bz,fc as c,Gy as c$,yQ as c0,ire as c1,sre as c2,oV as c3,oS as c4,M8 as c5,BX as c6,qX as c7,HX as c8,WX as c9,ZQ as cA,No as cB,Zte as cC,ue as cD,$D as cE,vG as cF,_G as cG,kt as cH,Ge as cI,An as cJ,$n as cK,Ii as cL,pg as cM,Ce as cN,Ip as cO,dg as cP,mg as cQ,qx as cR,Am as cS,lh as cT,N0 as cU,Gee as cV,Rre as cW,Qre as cX,Ste as cY,Pc as cZ,Gt as c_,ZX as ca,JX as cb,$e as cc,wl as cd,tv as ce,Ute as cf,Zt as cg,it as ch,hG as ci,wv as cj,W as ck,Rf as cl,K7 as cm,Yw as cn,c_ as co,fl as cp,cv as cq,Sg as cr,ab as cs,K9 as ct,Y as cu,Wt as cv,FQ as cw,UQ as cx,Tte as cy,jQ as cz,M_ as d,jO as d$,KY as d0,aW as d1,p$ as d2,lx as d3,H2 as d4,QJ as d5,_oe as d6,Loe as d7,oY as d8,Ioe as d9,Ic as dA,pH as dB,IQ as dC,l3 as dD,dG as dE,ere as dF,uv as dG,Oo as dH,V7 as dI,cre as dJ,sr as dK,ure as dL,z7 as dM,zQ as dN,QE as dO,O_ as dP,nL as dQ,$r as dR,Lf as dS,GO as dT,QB as dU,Pl as dV,bH as dW,U1 as dX,K_ as dY,UB as dZ,kO as d_,Toe as da,koe as db,boe as dc,Goe as dd,voe as de,zoe as df,cL as dg,n2 as dh,Kc as di,gV as dj,Ai as dk,Yre as dl,Dee as dm,Bt as dn,cK as dp,RQ as dq,w$ as dr,pL as ds,kf as dt,Nf as du,I_ as dv,R_ as dw,dL as dx,xn as dy,oh as dz,Wse as e,w_ as e$,GB as e0,DO as e1,UO as e2,Q1 as e3,e_ as e4,Ete as e5,UI as e6,mK as e7,oN as e8,sl as e9,W6 as eA,a8 as eB,FD as eC,foe as eD,nl as eE,lre as eF,FM as eG,Hf as eH,q6 as eI,g6 as eJ,_6 as eK,v6 as eL,hH as eM,nh as eN,$t as eO,om as eP,qB as eQ,WB as eR,yH as eS,lE as eT,_X as eU,bf as eV,Of as eW,$c as eX,F$ as eY,ar as eZ,vN as e_,S_ as ea,vX as eb,u9 as ec,RO as ed,tx as ee,M6 as ef,nH as eg,F6 as eh,jB as ei,FO as ej,mH as ek,DQ as el,zp as em,_f as en,vf as eo,Qc as ep,hX as eq,mie as er,pc as es,Y0 as et,QX as eu,nw as ev,kK as ew,n_ as ex,gf as ey,p6 as ez,ce as f,G1 as f$,$_ as f0,wN as f1,uX as f2,bn as f3,By as f4,n3 as f5,XE as f6,pQ as f7,xee as f8,sF as f9,ZY as fA,JY as fB,GX as fC,i7 as fD,ah as fE,xte as fF,gs as fG,Ate as fH,Pte as fI,To as fJ,oX as fK,gX as fL,Noe as fM,jc as fN,Le as fO,JP as fP,qo as fQ,fee as fR,pl as fS,Bx as fT,Bv as fU,cH as fV,mR as fW,yR as fX,SI as fY,Wc as fZ,yp as f_,B8 as fa,Fee as fb,c2 as fc,Xs as fd,Tc as fe,rt as ff,HC as fg,qC as fh,tt as fi,$oe as fj,Coe as fk,WY as fl,jre as fm,tie as fn,vc as fo,yw as fp,AQ as fq,Kie as fr,aV as fs,ul as ft,Eo as fu,_R as fv,zI as fw,hn as fx,SK as fy,jX as fz,EQ as g,dd as g$,uf as g0,na as g1,y$ as g2,_$ as g3,v$ as g4,tK as g5,gK as g6,Zne as g7,Nte as g8,mV as g9,em as gA,YY as gB,$i as gC,Ym as gD,bl as gE,Yc as gF,ut as gG,oH as gH,oQ as gI,eB as gJ,VQ as gK,jV as gL,nb as gM,o3 as gN,a3 as gO,GQ as gP,C6 as gQ,ex as gR,KB as gS,rx as gT,KX as gU,lL as gV,L9 as gW,x as gX,L6 as gY,N9 as gZ,qf as g_,fn as ga,mee as gb,yne as gc,kQ as gd,Ane as ge,md as gf,Yg as gg,Ia as gh,Df as gi,zee as gj,Go as gk,Zre as gl,Lre as gm,Aee as gn,u_ as go,rX as gp,tX as gq,fie as gr,nr as gs,IX as gt,y6 as gu,moe as gv,DR as gw,XR as gx,Eie as gy,Lo as gz,TN as h,In as h$,oK as h0,aH as h1,YB as h2,cV as h3,mF as h4,Qf as h5,wX as h6,jE as h7,SX as h8,TX as h9,tf as hA,YQ as hB,kD as hC,$Q as hD,qQ as hE,_K as hF,uT as hG,rl as hH,y_ as hI,gN as hJ,eT as hK,EW as hL,V1 as hM,qne as hN,lT as hO,Er as hP,nC as hQ,os as hR,ep as hS,Xie as hT,vO as hU,Jv as hV,C1 as hW,_l as hX,qV as hY,wO as hZ,ET as h_,yn as ha,ol as hb,uF as hc,Od as hd,mX as he,Z$ as hf,Fte as hg,E8 as hh,T8 as hi,y8 as hj,e2 as hk,Y_ as hl,hK as hm,Vee as hn,Ga as ho,hN as hp,xi as hq,EL as hr,_L as hs,y3 as ht,Foe as hu,Pre as hv,Are as hw,xj as hx,fx as hy,tee as hz,kP as i,jo as i$,EK as i0,Ck as i1,Lk as i2,Uk as i3,cs as i4,MR as i5,ur as i6,vK as i7,lm as i8,nm as i9,BB as iA,wH as iB,SH as iC,XV as iD,Gx as iE,uL as iF,yL as iG,ef as iH,HB as iI,NO as iJ,Bp as iK,tH as iL,ot as iM,JR as iN,TE as iO,pF as iP,UY as iQ,l_ as iR,wa as iS,ns as iT,ir as iU,Hx as iV,$X as iW,lK as iX,uK as iY,aK as iZ,sN as i_,am as ia,kv as ib,dh as ic,ph as id,wj as ie,hm as ig,Rv as ih,wie as ii,MQ as ij,w8 as ik,XK as il,Eee as im,at as io,zV as ip,BV as iq,_O as ir,qY as is,yc as it,z1 as iu,dO as iv,ev as iw,BC as ix,m6 as iy,d6 as iz,ct as j,Sm as j$,gi as j0,HQ as j1,_ee as j2,px as j3,H8 as j4,q8 as j5,L_ as j6,ZL as j7,QS as j8,une as j9,gB as jA,_B as jB,LO as jC,jz as jD,Rc as jE,aT as jF,Wne as jG,HL as jH,XL as jI,th as jJ,aQ as jK,OI as jL,WV as jM,kw as jN,ine as jO,RX as jP,kee as jQ,a_ as jR,BK as jS,VK as jT,yoe as jU,IR as jV,CR as jW,Oee as jX,eK as jY,ke as jZ,FX as j_,lne as ja,ane as jb,one as jc,hne as jd,cne as je,nne as jf,sne as jg,E6 as jh,DM as ji,ZM as jj,CQ as jk,JD as jl,OQ as jm,YD as jn,If as jo,qE as jp,Dv as jq,GM as jr,mp as js,KD as jt,g as ju,xv as jv,Nre as jw,Ire as jx,vR as jy,DK as jz,qt as k,I6 as k$,fw as k0,Vt as k1,Tm as k2,Voe as k3,Mi as k4,aoe as k5,TZ as k6,vU as k7,MI as k8,lX as k9,Sie as kA,vie as kB,XS as kC,D8 as kD,HV as kE,iv as kF,sv as kG,af as kH,gx as kI,vne as kJ,gne as kK,_ne as kL,gW as kM,SO as kN,TW as kO,mn as kP,zM as kQ,dn as kR,BW as kS,qW as kT,WW as kU,lj as kV,jte as kW,goe as kX,Uoe as kY,U6 as kZ,O6 as k_,Vk as ka,Af as kb,yX as kc,ld as kd,Px as ke,L8 as kf,bee as kg,QA as kh,AO as ki,EX as kj,DI as kk,Mte as kl,fm as km,hee as kn,cee as ko,ZP as kp,qP as kq,yz as kr,_z as ks,Du as kt,TP as ku,QU as kv,tre as kw,bie as kx,ND as ky,$ie as kz,wQ as l,ZV as l$,hu as l0,uP as l1,Iv as l2,Ol as l3,Zj as l4,$B as l5,Pne as l6,JK as l7,tO as l8,yO as l9,k6 as lA,VV as lB,gh as lC,Tz as lD,NQ as lE,cX as lF,q$ as lG,Cre as lH,Ore as lI,v_ as lJ,Z6 as lK,H6 as lL,XB as lM,B6 as lN,Cj as lO,NU as lP,Gz as lQ,Lte as lR,lQ as lS,DX as lT,Sn as lU,cT as lV,pZ as lW,Hne as lX,$W as lY,mT as lZ,fT as l_,Gc as la,Ti as lb,jv as lc,P1 as ld,VP as le,yh as lf,kte as lg,g$ as lh,OE as li,nX as lj,u3 as lk,Ww as ll,NE as lm,fZ as ln,Rte as lo,Vo as lp,m7 as lq,BQ as lr,cF as ls,gee as lt,yee as lu,uh as lv,ch as lw,hh as lx,N6 as ly,R6 as lz,En as m,wee as m$,Wl as m0,Ct as m1,Y6 as m2,l8 as m3,Xa as m4,Mz as m5,KQ as m6,e8 as m7,tL as m8,WA as m9,rv as mA,$z as mB,zz as mC,jy as mD,see as mE,rf as mF,fH as mG,xQ as mH,wK as mI,Cee as mJ,eie as mK,Ote as mL,Oi as mM,Fne as mN,iC as mO,pee as mP,jne as mQ,Une as mR,Xse as mS,Qse as mT,Bz as mU,mm as mV,_3 as mW,eQ as mX,Dz as mY,xz as mZ,Az as m_,Cte as ma,Tie as mb,zc as mc,dB as md,Z_ as me,NK as mf,MP as mg,iK as mh,hO as mi,yie as mj,gie as mk,_ie as ml,mne as mm,bT as mn,ene as mo,OY as mp,Pr as mq,gm as mr,cO as ms,pO as mt,SV as mu,Qie as mv,CV as mw,ese as mx,T6 as my,iee as mz,U as n,tne as n$,Hz as n0,eO as n1,MT as n2,hC as n3,kne as n4,Nne as n5,Lne as n6,Dne as n7,bne as n8,Tne as n9,soe as nA,cG as nB,HA as nC,nj as nD,zK as nE,Lw as nF,rQ as nG,iQ as nH,Kse as nI,Xte as nJ,Vte as nK,qte as nL,Bte as nM,Wte as nN,Hte as nO,Jte as nP,$te as nQ,ioe as nR,vw as nS,Gte as nT,xne as nU,One as nV,zv as nW,Mne as nX,IW as nY,Ene as nZ,TT as n_,Sne as na,HW as nb,ds as nc,rV as nd,Gv as ne,k8 as nf,vee as ng,XX as nh,Uc as ni,PS as nj,pz as nk,fz as nl,_g as nm,bQ as nn,tQ as no,VX as np,zX as nq,$L as nr,pU as ns,NP as nt,AR as nu,xR as nv,fU as nw,$Z as nx,JQ as ny,Rp as nz,c as o,cC as o$,rne as o0,Cne as o1,Ine as o2,Gne as o3,zne as o4,dne as o5,Vne as o6,Bne as o7,yW as o8,wW as o9,U9 as oA,Iz as oB,X7 as oC,nte as oD,ote as oE,rj as oF,SZ as oG,Lc as oH,Fc as oI,ej as oJ,dK as oK,Vn as oL,cj as oM,hj as oN,$v as oO,G2 as oP,IY as oQ,r2 as oR,Hee as oS,dW as oT,Nee as oU,w9 as oV,KS as oW,toe as oX,eoe as oY,Qne as oZ,zW as o_,wne as oa,TC as ob,il as oc,Rne as od,pX as oe,JV as of,sQ as og,ek as oh,P8 as oi,jee as oj,Z8 as ok,See as ol,C8 as om,$g as on,Tee as oo,nie as op,UV as oq,Mee as or,Iee as os,sm as ot,Lee as ou,jie as ov,WP as ow,YM as ox,X$ as oy,Q6 as oz,Hse as p,pv as p$,fne as p0,pne as p1,UW as p2,roe as p3,Yse as p4,r7 as p5,JM as p6,QV as p7,MN as p8,qre as p9,O2 as pA,QY as pB,bI as pC,XY as pD,Fre as pE,Jne as pF,ZB as pG,zre as pH,x6 as pI,kre as pJ,ka as pK,rie as pL,Pj as pM,Nz as pN,LQ as pO,wz as pP,Aj as pQ,FK as pR,T3 as pS,A3 as pT,eee as pU,Bre as pV,QQ as pW,dS as pX,XQ as pY,Ree as pZ,hS as p_,Wre as pa,c8 as pb,u8 as pc,vH as pd,joe as pe,Mn as pf,Roe as pg,Doe as ph,iz as pi,Wie as pj,sie as pk,Xre as pl,Ure as pm,Vre as pn,Gre as po,pK as pp,cie as pq,uie as pr,nK as ps,Dre as pt,Pee as pu,Jre as pv,BU as pw,TB as px,xO as py,ZK as pz,dX as q,I$ as q0,bK as q1,Hre as q2,G6 as q3,D6 as q4,cS as q5,J6 as q6,ete as q7,rte as q8,uoe as q9,r_ as r,I as s,wf as t,ooe as u,d as v,S as w,Q as x,mj as y,Cr as z};
