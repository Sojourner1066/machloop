const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/IdentityManager-IB1_N7Mt.js","assets/substitute-DuLq_Qbc.js","assets/ElevationLayer-KiqoMB0H.js","assets/ArcGISCachedService-BXLnaGBn.js","assets/TileInfoTilemapCache-CYf_8RrL.js","assets/TilemapCache-C_l31VN-.js","assets/ByteSizeUnit-BsxeN7wM.js","assets/memoryEstimations-B7_Jwj04.js","assets/WorkerHandle-DgHvdDhd.js","assets/layersCreator-DfVSmhd4.js","assets/loadUtils-cDTjsAMp.js","assets/fetchService-DOpyS1v1.js","assets/associatedFeatureServiceUtils-ogvVNufE.js","assets/lazyLayerLoader-fFwk2IYF.js","assets/portalLayers-DoTkasCl.js","assets/arcgisLayers-Dzpbvhj4.js","assets/statsWorker-D9ZDnM3g.js","assets/utils-CPs0OUil.js","assets/quantizationUtils-CrQL7F8F.js","assets/utils-BOcVauar.js","assets/utils-ClwJ7PVs.js","assets/ClassBreaksDefinition-DxtXpx_T.js","assets/geometryEngineWorker-DmHSjfnn.js","assets/geometryEngineJSON-C8_S-6e4.js","assets/json-Wa8cmqdu.js","assets/CSVSourceWorker-BKDs2qz7.js","assets/date-Ctp1FiBW.js","assets/OptimizedFeature-CAs8C_6w.js","assets/executeQueryForSnapping-CayfJp8a.js","assets/queryUtils-BoaFe4en.js","assets/QueryEngine-BQSL2sKi.js","assets/featureConversionUtils-D8tC_IN5.js","assets/OptimizedFeatureSet-Blu9Ckm7.js","assets/WhereClauseCache-CfQztPdi.js","assets/WhereClause-CKXQ1p-G.js","assets/TimeOnly-CVgLqrpK.js","assets/timeSupport-B-rYk-YC.js","assets/QueryEngineCapabilities-B_pTbIiR.js","assets/SnappingCandidate-DGkpYqI6.js","assets/FixedIntervalBinParameters-DKHQSzaq.js","assets/FeatureStore-BC5__XGr.js","assets/BoundsStore-cklG7tdy.js","assets/PooledRBush-SeVDtihQ.js","assets/optimizedFeatureQueryEngineAdapter-gTEK_f5j.js","assets/number-B-KLSYP3.js","assets/clientSideDefaults-DexQn4Fj.js","assets/EdgeProcessingWorker-GpB3W9Rm.js","assets/workerHelper-CFGAy6bZ.js","assets/InterleavedLayout-hEsKBZ7L.js","assets/BufferView-BnloAaDm.js","assets/types-D0PSWh4d.js","assets/edgeProcessing-DVGWzEsn.js","assets/deduplicate-D6IQYJhP.js","assets/Indices-CX_njfJF.js","assets/VertexAttribute-Cq4MnHjR.js","assets/glUtil-DW_knhTH.js","assets/VertexElementDescriptor-BLyltQyJ.js","assets/Normals-DVRNubqz.js","assets/ElevationSamplerWorker-D5-h3rGm.js","assets/MeshLocalVertexSpace-DVq20P2P.js","assets/vertexSpaceConversion-XqQ-Gxkg.js","assets/mat3f64-q3fE-ZOt.js","assets/mat4f64-Dk4dwAN8.js","assets/spatialReferenceEllipsoidUtils-Dt3i00wg.js","assets/computeTranslationToOriginAndRotation-BKUgOs_N.js","assets/projectPointToVector-D4QINAum.js","assets/meshVertexSpaceUtils-C3eC4eMG.js","assets/vec3-tRjQ2E2L.js","assets/vec4-CMOwvsJ_.js","assets/FeatureServiceSnappingSourceWorker-YdR-WnsE.js","assets/symbologySnappingCandidates-BOBWfizq.js","assets/pbfQueryUtils-BzIyC_vF.js","assets/pbf-C8WmPobi.js","assets/query-DA927wtq.js","assets/GeoJSONSourceWorker-Czal_HAX.js","assets/geojson-DkNvK9Qn.js","assets/sourceUtils-B1qCzWX6.js","assets/MemorySourceWorker-BMVfOCcj.js","assets/objectIdUtils-4dd1rf9p.js","assets/PBFDecoderWorker-CidAeNob.js","assets/dehydratedFeatures-ILc6Rtrm.js","assets/FeaturePipelineWorker-Dt4Os2-0.js","assets/AttributeStore-rRtoSbdP.js","assets/Utils-D4O3KAMI.js","assets/UpdateTracking2D-BabZ4s23.js","assets/BidiEngine-QXap_35O.js","assets/GeometryUtils-UTnbVDfc.js","assets/rasterizingUtils-DiZURDwE.js","assets/floatRGBA-CFy-2SA-.js","assets/Rect-CUzevAry.js","assets/streamLayerUtils-CKwt2uXH.js","assets/MeshWriterRegistry-B2twYYlZ.js","assets/TechniqueType-uMFRS8dR.js","assets/PieChartMeshWriter-1eW93D9Q.js","assets/TurboLine-B9aYUxBU.js","assets/utils-BxKWZfoY.js","assets/earcut-D9gy186-.js","assets/grouping-C553Dvci.js","assets/QueueProcessor-DF79sej7.js","assets/operatorGeodeticDensify-NALtGIWL.js","assets/SimpleGeometryCursor-B92kdZ15.js","assets/geodeticCurveType-CirnHLSB.js","assets/normalizeUtilsSync-B1HzKDFh.js","assets/ogcFeatureUtils-g1DgdzKb.js","assets/parquet-C7dIRqkG.js","assets/CircularArray-CujHzHWW.js","assets/createConnection-DxjWu0uu.js","assets/PointCloudWorker-BDfGofSW.js","assets/quat-BvDT_bxV.js","assets/quatf64-aQ5IuZRd.js","assets/vec3f32-nZdmKIgz.js","assets/PointCloudUniqueValueRenderer-vMnV-uJO.js","assets/I3SBinaryReader-G29obL-R.js","assets/orientedBoundingBox-_rBUPh5x.js","assets/plane-gAgGBHhk.js","assets/RasterWorker-BKJlp1mq.js","assets/dataUtils-BSqcJ1ng.js","assets/RasterSymbolizer-4bRcvtBz.js","assets/colorUtils-DSamnXnQ.js","assets/rasterFunctionHelper-DFqtcEx_.js","assets/rasterProjectionHelper-BBf77JYc.js","assets/PolynomialTransform-D303awsX.js","assets/SceneLayerSnappingSourceWorker-DzTlme-M.js","assets/lineSegment-BFjWctde.js","assets/sphere-DRB5B-QR.js","assets/Octree-BPpZKQ9G.js","assets/SceneLayerWorker-DcUSzAFh.js","assets/projectVectorToVector-DV5W_8-J.js","assets/I3SUtil-DMNhfZEG.js","assets/edgeUtils-B-MZinji.js","assets/NormalAttribute.glsl-BIpMjOeO.js","assets/glsl-BH37Aalp.js","assets/ShaderOutput-DnYY5J1_.js","assets/BindType-BBwFZqyN.js","assets/WFSSourceWorker-tRE7YnXu.js","assets/wfsUtils-a2zRYNmo.js","assets/xmlUtils-CtUoQO7q.js","assets/WorkerTileHandler-Cs6abKUF.js","assets/enums-BRzLM11V.js","assets/config-BOD8--da.js","assets/StyleDefinition-BnwSCDGd.js","assets/SourceLayerData-Dv3AFJSS.js","assets/StyleRepository-CGeBc1qf.js","assets/Feature3DPipelineWorker-Cia2CBz5.js","assets/HUDMaterial.glsl-Hp4U_GfR.js","assets/Geometry-CHQYtKrq.js","assets/renderState-DUM9wQon.js","assets/basicInterfaces-CZwQPxTp.js","assets/boundedPlane-D5TJwWtA.js","assets/requestImageUtils-BSNTxBzf.js","assets/TextureFormat-1mYWTFa-.js","assets/triangle-D8cXwHdU.js","assets/HUDMaterial-CJ1wk24_.js","assets/VertexArrayObject-CWSP7Dtc.js","assets/dehydratedFeatureUtils-CRr7ZGGS.js","assets/doublePrecisionUtils-B0owpBza.js","assets/hydratedFeatures-DhDTqLyY.js","assets/ShaderBuilder-4Epc3uLW.js","assets/IntersectorInterfaces-CmNINbyF.js","assets/DefaultMaterial-CoM1pcjY.js","assets/LodResources-DugStyIF.js","assets/TextureCompressionWorker-C5yZInYd.js","assets/Popup-dybzQ7mi.js","assets/unitFormatUtils-BNS4SlEM.js","assets/quantityUtils-CqnQm8eu.js","assets/AttachmentInfo-DgZwF72U.js","assets/featureUtils-Js9diYnz.js","assets/utils-BkLQB36d.js","assets/cimSymbolUtils-BoGkCqP0.js","assets/executeQueryJSON-sBZ6A4nC.js","assets/shared-CB1KQ4rx.js","assets/NetworkElement-Bun4wdyB.js","assets/ReactiveSet-C3S_GyKm.js","assets/layerViewUtils-0c-tok9A.js","assets/arcadeUtils-DCwswLkL.js","assets/arcade-Awqyjs4G.js","assets/unitConversion-EHaOLYRe.js","assets/ImmutableArray-BPVd6ESQ.js","assets/webStyleSymbolUtils-2uWLXmRp.js","assets/devEnvironmentUtils-CnNDiFMM.js","assets/webStyleAcceptedFormats-CG7ZQ6BV.js","assets/webglDeps-CO71pC9T.js","assets/FramebufferObject-CHpIv-62.js","assets/ProgramTemplate-7-I-ic88.js","assets/NestedMap-GuqgquCN.js","assets/mapViewDeps-f-cG9gqN.js","assets/FeatureCommandQueue-DsslgJpE.js","assets/GraphShaderModule-CGrQHD0I.js","assets/WGLContainer-B7ZgRvVt.js","assets/Container-CNbOd1fT.js","assets/SDFHelper-C-qef0Pl.js","assets/OverrideHelper-DHz01mPW.js","assets/GridShader-CqEIn5Sa.js","assets/testSVGPremultipliedAlpha-7n8bGtKf.js","assets/RenderingContext-CfXHrYzi.js","assets/CIMResourceManager-BGTVb84o.js","assets/utils-D2rQdvlP.js","assets/VertexStream-CoujGsoS.js","assets/utils-ehcGqGxa.js","assets/GraphicsView2D-BCpuNJlL.js","assets/GraphicContainer-BLgif4L4.js","assets/AGraphicContainer-C5AAy4ti.js","assets/TechniqueInstance-CIvSNEhV.js","assets/TileContainer-DRvhRlwz.js","assets/gridUtils-BjMDcABE.js","assets/geodesicUtils-43dYgYaw.js","assets/TileLayerView2D-AXR-ZhLN.js","assets/imageUtils-CqmHI5nU.js","assets/BitmapTechnique-Ctzfck9e.js","assets/LayerView-CLlz1xmb.js","assets/HighlightGraphicContainer-CAMg5eTc.js","assets/RefreshableLayerView-Bd898Vj9.js","assets/MapServiceLayerViewHelper-Cm1C6ycv.js","assets/floorFilterUtils-DZ5C6FQv.js","assets/drapedUtils-CB5UOLwq.js","assets/sublayerUtils-WkQInJ6V.js","assets/popupUtils-Ckrzy3Gu.js","assets/FeatureLayerView2D-CUITw5xH.js","assets/timeSupport-5XGO9pvP.js","assets/AttributeBinsFeatureSet-CMo_dGKw.js","assets/AttributeBinsQuery-0-g_WFaE.js","assets/constants-B4mRqufT.js","assets/BaseDynamicLayerView2D-Bx1ZtY2v.js","assets/BitmapContainer-BAc12lbc.js","assets/ExportStrategy-g0sbgl-i.js","assets/CatalogLayerView2D-4xdCgXHw.js","assets/CatalogDynamicGroupLayerView2D-BKx1g5Vw.js","assets/CatalogFootprintLayerView2D-qdRVmvcw.js","assets/GeoRSSLayerView2D-DSO3btK9.js","assets/GraphicsLayerView2D-DrsxVMfp.js","assets/GroupLayerView2D-CEJRWWOT.js","assets/ImageryLayerView2D-CdK-L2ZK.js","assets/RasterVFDisplayObject-N1-0jURM.js","assets/ImageryTileLayerView2D-Cjfre5pL.js","assets/rasterFieldUtils-Cev67IpJ.js","assets/rasterUtils-Brgd3IQ_.js","assets/RawBlockCache-87OZqfr9.js","assets/KMLLayerView2D-Df0NgdoH.js","assets/kmlUtils-BAHszfvD.js","assets/KnowledgeGraphLayerView2D-CsacwMYg.js","assets/MapImageLayerView2D-D4_MvN8I.js","assets/ExportImageParameters-B6eKvDoL.js","assets/MapNotesLayerView2D-BEuAd3UG.js","assets/MediaLayerView2D-D4keR_NS.js","assets/mediaLayerUtils-5wEbi0nC.js","assets/OverlayContainer-BDz7MqYH.js","assets/OGCFeatureLayerView2D-DgIe2m7d.js","assets/RouteLayerView2D-CwE5pSo3.js","assets/Stop-ydy3kZfa.js","assets/networkEnums-B_Ikcs9K.js","assets/StreamLayerView2D-uOA6qnd2.js","assets/SubtypeGroupLayerView2D-wFnuSyoT.js","assets/VectorTileLayerView2D-CmUidh76.js","assets/VideoLayerView2D-DZfLo7JD.js","assets/GraphicsLayer-Dd_06yaf.js","assets/TelemetryDisplay-Bve_qtMC.js","assets/WMSLayerView2D-DC9p_2Df.js","assets/ExportWMSImageParameters-D5c_Yxcm.js","assets/WMTSLayerView2D-B6wz1w5t.js","assets/index-6QQzcgB0.js","assets/index-B13UgI8z.js","assets/guid-BDWAkmkV.js","assets/useT9n-BIJNl0vY.js","assets/index-DQzuOjKz.js","assets/dom-nl4F7zDh.js","assets/observers-rTy4l9z5.js","assets/ref-CPT1LBbF.js","assets/static-CJJ3WWfc.js","assets/form-DYXasU3d.js","assets/interactive-CbpzhYaB.js","assets/label-CPAAimKI.js","assets/component-D1WZwb4g.js","assets/layersLoader-DMqki-Hz.js","assets/jsonContext-DmUbEMC0.js","assets/featureLayerUtils-DDlyLYY9.js","assets/originUtils-D69mHv66.js","assets/multiOriginJSONSupportUtils-C0wm8_Yw.js","assets/utils-BpvWoXSL.js","assets/saveUtils-ByDzxqZy.js","assets/FeatureLayerSource-CumDccsK.js","assets/External-Sf5H1ZLY.js","assets/MeshTransform-CIgZqfid.js","assets/axisAngleDegrees-B8RLYrIK.js","assets/editingSupport-lEbp6S8t.js","assets/QueryTask-H9CF1UnN.js","assets/executeForIds-Cmw0KFmp.js","assets/index-FAcl2Gaw.js","assets/floating-ui-DHkJHL3a.js","assets/debounce-D0G5qrda.js","assets/openCloseComponent-Cm-8peXt.js","assets/FloatingArrow-G_oNyvir.js","assets/keyed-BL7WIaJn.js","assets/index-CAMexMjX.js","assets/index-xEr6MRTq.js","assets/key-ak3_eHKH.js","assets/index-DjFjT8aR.js","assets/index-CTLwDD7A.js","assets/index-CW1OuYt6.js","assets/useFocusTrap-KAqqoYw0.js","assets/customElement-BbyDdWy8.js","assets/index-BqwqN2_e.js","assets/interact.min-iNRM8XgC.js","assets/dynamicClasses-Dlk4kLaw.js"])))=>i.map(i=>d[i]);
(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))r(a);new MutationObserver(a=>{for(const p of a)if(p.type==="childList")for(const y of p.addedNodes)y.tagName==="LINK"&&y.rel==="modulepreload"&&r(y)}).observe(document,{childList:!0,subtree:!0});function i(a){const p={};return a.integrity&&(p.integrity=a.integrity),a.referrerPolicy&&(p.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?p.credentials="include":a.crossOrigin==="anonymous"?p.credentials="omit":p.credentials="same-origin",p}function r(a){if(a.ep)return;a.ep=!0;const p=i(a);fetch(a.href,p)}})();function v(e,t,i,r){var a,p=arguments.length,y=p<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,i):r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")y=Reflect.decorate(e,t,i,r);else for(var g=e.length-1;g>=0;g--)(a=e[g])&&(y=(p<3?a(y):p>3?a(t,i,y):a(t,i))||y);return p>3&&y&&Object.defineProperty(t,i,y),y}function qve(e,t){return function(i,r){t(i,r,e)}}function Hve(e,t,i,r){function a(p){return p instanceof i?p:new i(function(y){y(p)})}return new(i||(i=Promise))(function(p,y){function g(I){try{T(r.next(I))}catch(A){y(A)}}function _(I){try{T(r.throw(I))}catch(A){y(A)}}function T(I){I.done?p(I.value):a(I.value).then(g,_)}T((r=r.apply(e,[])).next())})}function Wve(e,t,i){if(t!=null){if(typeof t!="object"&&typeof t!="function")throw new TypeError("Object expected.");var r,a;if(r===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");r=t[Symbol.dispose]}if(typeof r!="function")throw new TypeError("Object not disposable.");a&&(r=function(){try{a.call(this)}catch(p){return Promise.reject(p)}}),e.stack.push({value:t,dispose:r,async:i})}return t}var hU=typeof SuppressedError=="function"?SuppressedError:function(e,t,i){var r=new Error(i);return r.name="SuppressedError",r.error=e,r.suppressed=t,r};function Jve(e){function t(p){e.error=e.hasError?new hU(p,e.error,"An error was suppressed during disposal."):p,e.hasError=!0}var i,r=0;function a(){for(;i=e.stack.pop();)try{if(!i.async&&r===1)return r=0,e.stack.push(i),Promise.resolve().then(a);if(i.dispose){var p=i.dispose.call(i.value);if(i.async)return r|=2,Promise.resolve(p).then(a,function(y){return t(y),a()})}else r|=1}catch(y){t(y)}if(r===1)return e.hasError?Promise.reject(e.error):Promise.resolve();if(e.hasError)throw e.error}return a()}const cU="modulepreload",pU=function(e){return"/machloop/"+e},zx={},fe=function(t,i,r){let a=Promise.resolve();if(i&&i.length>0){document.getElementsByTagName("link");const y=document.querySelector("meta[property=csp-nonce]"),g=(y==null?void 0:y.nonce)||(y==null?void 0:y.getAttribute("nonce"));a=Promise.allSettled(i.map(_=>{if(_=pU(_),_ in zx)return;zx[_]=!0;const T=_.endsWith(".css"),I=T?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${_}"]${I}`))return;const A=document.createElement("link");if(A.rel=T?"stylesheet":cU,T||(A.as="script"),A.crossOrigin="",A.href=_,g&&A.setAttribute("nonce",g),document.head.appendChild(A),T)return new Promise((P,N)=>{A.addEventListener("load",P),A.addEventListener("error",()=>N(new Error(`Unable to preload CSS for ${_}`)))})}))}function p(y){const g=new Event("vite:preloadError",{cancelable:!0});if(g.payload=y,window.dispatchEvent(g),!g.defaultPrevented)throw y}return a.then(y=>{for(const g of y||[])g.status==="rejected"&&p(g.reason);return t().catch(p)})};let Ol;function ne(e){return typeof Ol[e]=="function"?Ol[e]=Ol[e](globalThis):Ol[e]}var SA,xA,TA,MA;Ol=(SA=globalThis.dojoConfig)!=null&&SA.has||(xA=globalThis.esriConfig)!=null&&xA.has?{...(TA=globalThis.dojoConfig)==null?void 0:TA.has,...(MA=globalThis.esriConfig)==null?void 0:MA.has}:{},ne.add=(e,t,i,r)=>{(r||Ol[e]===void 0)&&(Ol[e]=t),i&&ne(e)},ne.cache=Ol,ne.add("big-integer-warning-enabled",!0),ne.add("esri-deprecation-warnings",!0),ne.add("esri-tests-disable-screenshots",!1),ne.add("esri-tests-use-full-window",!1),ne.add("esri-tests-post-to-influx",!0),ne.add("esri-cim-animations-enable-status","enabled"),ne.add("esri-cim-animations-spotlight",!1),ne.add("esri-cim-animations-freeze-time",!1),ne.add("enable-feature:multiple-highlights",!0),(()=>{var t;ne.add("host-webworker",globalThis.WorkerGlobalScope!==void 0&&self instanceof globalThis.WorkerGlobalScope);const e=typeof window<"u"&&typeof location<"u"&&typeof document<"u"&&window.location===location&&window.document===document;if(ne.add("host-browser",e),ne.add("host-node",typeof globalThis.process=="object"&&((t=globalThis.process.versions)==null?void 0:t.node)&&globalThis.process.versions.v8),ne.add("dom",e),ne("host-browser")){const i=navigator,r=i.userAgent,a=i.appVersion,p=parseFloat(a);if(ne.add("wp",parseFloat(r.split("Windows Phone")[1])||void 0),ne.add("msapp",parseFloat(r.split("MSAppHost/")[1])||void 0),ne.add("khtml",a.includes("Konqueror")?p:void 0),ne.add("edge",parseFloat(r.split("Edge/")[1])||void 0),ne.add("opr",parseFloat(r.split("OPR/")[1])||void 0),ne.add("webkit",!ne("wp")&&!ne("edge")&&parseFloat(r.split("WebKit/")[1])||void 0),ne.add("chrome",!ne("edge")&&!ne("opr")&&parseFloat(r.split("Chrome/")[1])||void 0),ne.add("android",!ne("wp")&&parseFloat(r.split("Android ")[1])||void 0),ne.add("safari",!a.includes("Safari")||ne("wp")||ne("chrome")||ne("android")||ne("edge")||ne("opr")?void 0:parseFloat(a.split("Version/")[1])),ne.add("mac",a.includes("Macintosh")),!ne("wp")&&/(iPhone|iPod|iPad)/.test(r)){const y=RegExp.$1.replace(/P/,"p"),g=/OS ([\d_]+)/.test(r)?RegExp.$1:"1",_=parseFloat(g.replace(/_/,".").replaceAll("_",""));ne.add(y,_),ne.add("ios",_)}ne("webkit")||(!r.includes("Gecko")||ne("wp")||ne("khtml")||ne("edge")||ne.add("mozilla",p),ne("mozilla")&&ne.add("ff",parseFloat(r.split("Firefox/")[1]||r.split("Minefield/")[1])||void 0))}})(),(()=>{if(globalThis.navigator){const e=navigator.userAgent,t=/Android|webOS|iPhone|iPad|iPod|BlackBerry|Opera Mini|IEMobile/i.test(e),i=/iPhone/i.test(e);t&&ne.add("esri-mobile",t),i&&ne.add("esri-iPhone",i),ne.add("esri-geolocation",!!navigator.geolocation)}ne.add("esri-wasm","WebAssembly"in globalThis),ne.add("esri-performance-mode-frames-between-render",20),ne.add("esri-force-performance-mode",!1),ne.add("esri-shared-array-buffer",()=>{const e="SharedArrayBuffer"in globalThis,t=globalThis.crossOriginIsolated===!1;return e&&!t}),ne.add("wasm-simd",()=>{const e=[0,97,115,109,1,0,0,0,1,5,1,96,0,1,123,3,2,1,0,10,10,1,8,0,65,0,253,15,253,98,11];return WebAssembly.validate(new Uint8Array(e))}),ne.add("esri-atomics","Atomics"in globalThis),ne.add("esri-workers","Worker"in globalThis),ne.add("web-feat:cache","caches"in globalThis),ne.add("esri-workers-arraybuffer-transfer",!ne("safari")||Number(ne("safari"))>=12),ne.add("workers-pool-size",8),ne.add("featurelayer-simplify-thresholds",[.5,.5,.5,.5]),ne.add("featurelayer-simplify-payload-size-factors",[1,1,4]),ne.add("featurelayer-fast-triangulation-enabled",!0),ne.add("featurelayer-animation-enabled",!0),ne.add("featurelayer-snapshot-enabled",!0),ne.add("featurelayer-snapshot-point-min-threshold",8e4),ne.add("featurelayer-snapshot-point-max-threshold",4e5),ne.add("featurelayer-snapshot-point-coverage",.1),ne.add("featurelayer-query-max-depth",4),ne.add("featurelayer-query-pausing-enabled",!1),ne.add("featurelayer-advanced-symbols",!1),ne.add("featurelayer-pbf",!0),ne.add("featurelayer-pbf-statistics",!1),ne.add("feature-layers-workers",!0),ne.add("feature-polyline-generalization-factor",1),ne.add("mapview-transitions-duration",200),ne.add("mapview-essential-goto-duration",200),ne.add("mapview-srswitch-adjust-rotation-scale-threshold",24e6),ne.add("mapserver-pbf-version-support",10.81),ne.add("mapservice-popup-identify-max-tolerance",20),ne.add("request-queue-concurrency-hosted",16),ne.add("request-queue-concurrency-non-hosted",4),ne.add("curve-densification-coarse-segments",128),ne.add("curve-densification-max-segments",2e3),ne.add("curve-densification-min-segments",3),ne.add("curve-densification-pixels-per-segment",16),ne.add("view-readyState-waiting-delay",1e3),ne.add("gradient-depth-bias",.01),ne.add("gradient-depth-epsilon",1e-8),ne("host-webworker")||ne("host-browser")&&(ne.add("esri-csp-restrictions",()=>{try{new Function}catch{return!0}return!1}),ne.add("esri-image-decode",()=>{if("decode"in new Image){const e=new Image;return e.src='data:image/svg+xml;charset=UTF-8,<svg version="1.1" xmlns="http://www.w3.org/2000/svg"></svg>',void e.decode().then(()=>{ne.add("esri-image-decode",!0,!0,!0)}).catch(()=>{ne.add("esri-image-decode",!1,!0,!0)})}return!1}),ne.add("esri-url-encodes-apostrophe",()=>{const e=window.document.createElement("a");return e.href="?'",e.href.includes("?%27")}))})();function Zve(e){}function dU(e){return()=>e}function Kve(e){return e}let rm=class Mu{constructor(t=1){this._seed=t}set seed(t){this._seed=t??Math.random()*Mu._m}getInt(){return this._seed=(Mu._a*this._seed+Mu._c)%Mu._m,this._seed}getFloat(){return this.getInt()/(Mu._m-1)}getIntRange(t,i){return Math.round(this.getFloatRange(t,i))}getFloatRange(t,i){const r=i-t;return t+this.getInt()/Mu._m*r}};rm._m=2147483647,rm._a=48271,rm._c=0;const fU=1.5,Yve=1/fU,Xve=.5;function Qve(e,t){return t?e.filter((i,r,a)=>a.findIndex(t.bind(null,i))===r):Array.from(new Set(e))}function Vv(e,t,i){if(e==null&&t==null)return!0;if(e==null||t==null||e.length!==t.length)return!1;if(i){for(let r=0;r<e.length;r++)if(!i(e[r],t[r]))return!1}else for(let r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}function Ux(e,t,i){let r,a;return i?(r=t.filter(p=>!e.some(y=>i(y,p))),a=e.filter(p=>!t.some(y=>i(y,p)))):(r=t.filter(p=>!e.includes(p)),a=e.filter(p=>!t.includes(p))),{added:r,removed:a}}function e2e(e){return e&&typeof e.length=="number"}let PA=class{constructor(){this.last=0}};const kA=new PA;function a3(e,t,i,r){r=r||kA;const a=Math.max(0,r.last-10);for(let y=a;y<i;++y)if(e[y]===t)return r.last=y,y;const p=Math.min(a,i);for(let y=0;y<p;++y)if(e[y]===t)return r.last=y,y;return-1}function yU(e,t,i,r){const a=e.length,p=a3(e,t,a,r);if(p!==-1)return e[p]=e[a-1],e.pop(),t}const sn=new Set;function mU(e,t,i=e.length,r=t.length,a,p){if(r===0||i===0)return i;sn.clear();for(let g=0;g<r;++g)sn.add(t[g]);a=a||kA;const y=Math.max(0,a.last-10);for(let g=y;g<i;++g)if(sn.has(e[g])&&(p==null||p.push(e[g]),sn.delete(e[g]),e[g]=e[i-1],--i,--g,sn.size===0||i===0))return sn.clear(),i;for(let g=0;g<y;++g)if(sn.has(e[g])&&(p==null||p.push(e[g]),sn.delete(e[g]),e[g]=e[i-1],--i,--g,sn.size===0||i===0))return sn.clear(),i;return sn.clear(),i}function i2e(e,t,i){const r=e.length;if(t>=r)return e.slice();const a=RA(i),p=new Set,y=[];for(;y.length<t;){const g=Math.floor(a()*r);p.has(g)||(p.add(g),y.push(e[g]))}return y}function RA(e){return e?(Vx.seed=e,()=>Vx.getFloat()):Math.random}const Vx=new rm;function r2e(e,t){const i=RA(t);for(let r=e.length-1;r>0;r--){const a=Math.floor(i()*(r+1)),p=e[r];e[r]=e[a],e[a]=p}return e}function NA(e,t){const i=e.indexOf(t);return i!==-1?(e.splice(i,1),t):null}function Sa(e,t){return e!=null}const s2e=[];function n2e(e){return e instanceof ArrayBuffer}function q4(e){var t;return((t=e==null?void 0:e.constructor)==null?void 0:t.name)==="Int8Array"}function LA(e){var t;return((t=e==null?void 0:e.constructor)==null?void 0:t.name)==="Uint8Array"}function DA(e){var t;return((t=e==null?void 0:e.constructor)==null?void 0:t.name)==="Uint8ClampedArray"}function H4(e){var t;return((t=e==null?void 0:e.constructor)==null?void 0:t.name)==="Int16Array"}function jA(e){var t;return((t=e==null?void 0:e.constructor)==null?void 0:t.name)==="Uint16Array"}function W4(e){var t;return((t=e==null?void 0:e.constructor)==null?void 0:t.name)==="Int32Array"}function FA(e){var t;return((t=e==null?void 0:e.constructor)==null?void 0:t.name)==="Uint32Array"}function Gv(e){var t;return((t=e==null?void 0:e.constructor)==null?void 0:t.name)==="Float32Array"}function Bv(e){var t;return((t=e==null?void 0:e.constructor)==null?void 0:t.name)==="Float64Array"}function gU(e){return"buffer"in e}const zA=1024;function o2e(e){return Bv(e)||Gv(e)||W4(e)||H4(e)||q4(e)}function a2e(e){return Bv(e)||Gv(e)}function l2e(e){return Bv(e)?179769e303:Gv(e)?3402823e32:FA(e)?4294967295:jA(e)?65535:LA(e)||DA(e)?255:W4(e)?2147483647:H4(e)?32767:q4(e)?127:256}function vU(e,t){let i;for(i in e)e.hasOwnProperty(i)&&e[i]===void 0&&delete e[i];return e}function te(e){if(!e||typeof e!="object"||typeof e=="function")return e;const t=GA(e);if(t!=null)return t;if(Mg(e))return e.clone();if(UA(e))return e.map(te);if(VA(e))throw new Error("Trying to clone an unclonable Accessor instance");const i={};for(const r of Object.getOwnPropertyNames(e))i[r]=te(e[r]);return i}function l3(e){if(!e||typeof e!="object"||typeof e=="function"||"HTMLElement"in globalThis&&e instanceof HTMLElement)return e;const t=GA(e);if(t!=null)return t;if(UA(e)){let r=!0;const a=e.map(p=>{const y=l3(p);return p!=null&&y==null&&(r=!1),y});return r?a:null}if(Mg(e))return e.clone();if(e instanceof File||e instanceof Blob)return e;if(VA(e))return null;const i=new(Object.getPrototypeOf(e)).constructor;for(const r of Object.getOwnPropertyNames(e)){const a=e[r],p=l3(a);if(a!=null&&p==null)return null;i[r]=p}return i}function Mg(e){return typeof e.clone=="function"}function UA(e){return typeof e.map=="function"&&typeof e.forEach=="function"}function VA(e){return typeof e.notifyChange=="function"&&typeof e.watch=="function"}function Gx(e){if(Object.prototype.toString.call(e)!=="[object Object]")return!1;const t=Object.getPrototypeOf(e);return t===null||t===Object.prototype}function GA(e){if(q4(e)||LA(e)||DA(e)||H4(e)||jA(e)||W4(e)||FA(e)||Gv(e)||Bv(e))return e.slice();if(e instanceof Date)return new Date(e.getTime());if(e instanceof ArrayBuffer)return e.slice(0,e.byteLength);if(e instanceof Map){const t=new Map;for(const[i,r]of e)t.set(i,te(r));return t}if(e instanceof Set){const t=new Set;for(const i of e)t.add(te(i));return t}return null}function J4(e,t){return e===t||typeof e=="number"&&isNaN(e)&&typeof t=="number"&&isNaN(t)||typeof(e==null?void 0:e.getTime)=="function"&&typeof(t==null?void 0:t.getTime)=="function"&&e.getTime()===t.getTime()||!1}function BA(e,t){return e===t||(e==null||typeof e=="string"?e===t:typeof e=="number"?e===t||typeof t=="number"&&isNaN(e)&&isNaN(t):e instanceof Date?t instanceof Date&&e.getTime()===t.getTime():Array.isArray(e)?Array.isArray(t)&&Vv(e,t):e instanceof Set?t instanceof Set&&bU(e,t):e instanceof Map?t instanceof Map&&_U(e,t):!!Gx(e)&&Gx(t)&&wU(e,t))}function wU(e,t){if(e===null||t===null)return!1;const i=Object.keys(e);if(t===null||Object.keys(t).length!==i.length)return!1;for(const r of i)if(e[r]!==t[r]||!Object.prototype.hasOwnProperty.call(t,r))return!1;return!0}function bU(e,t){if(e.size!==t.size)return!1;for(const i of e)if(!t.has(i))return!1;return!0}function _U(e,t){if(e.size!==t.size)return!1;for(const[i,r]of e){const a=t.get(i);if(a!==r||a===void 0&&!t.has(i))return!1}return!0}function Z4(e,t,i=!1){return HA(e,t,i)}function qv(e,t){if(t!=null)return t[e]||qA(e.split("."),!1,t)}function Bi(e,t,i){const r=e.split("."),a=r.pop(),p=qA(r,!0,i);p&&a&&(p[a]=t)}function Bx(e,t){if(e==null&&t==null)return!1;if(e==null||t==null)return!0;if(typeof e=="object"){if(Array.isArray(e)){const i=t;if(e.length!==i.length)return!0;for(let r=0;r<e.length;r++)if(Bx(e[r],i[r]))return!0;return!1}if(Object.keys(e).length!==Object.keys(t).length)return!0;for(const i in e)if(Bx(e[i],t[i]))return!0;return!1}return e!==t}function qA(e,t,i){let r=i;for(const a of e){if(r==null)return;if(!(a in r)){if(!t)return;r[a]={}}r=r[a]}return r}function HA(e,t,i){return t?Object.keys(t).reduce((r,a)=>{let p=r[a],y=t[a];return p===y?r:p===void 0?(r[a]=te(y),r):(Array.isArray(y)||Array.isArray(r)?(p=p?Array.isArray(p)?r[a]=p.slice():r[a]=[p]:r[a]=[],y&&(Array.isArray(y)||(y=[y]),i?y.forEach(g=>{p.includes(g)||p.push(g)}):r[a]=y.slice())):y&&typeof y=="object"?r[a]=HA(p,y,i):r.hasOwnProperty(a)&&!t.hasOwnProperty(a)||(r[a]=y),r)},e||{}):e}var $A;const dt={apiKey:void 0,applicationName:"",applicationUrl:($A=globalThis.location)==null?void 0:$A.href,assetsPath:"",fontsUrl:"https://static.arcgis.com/fonts",geometryServiceUrl:"https://utility.arcgisonline.com/arcgis/rest/services/Geometry/GeometryServer",geoRSSServiceUrl:"https://utility.arcgis.com/sharing/rss",kmlServiceUrl:"https://utility.arcgis.com/sharing/kml",userPrivilegesApplied:!0,portalUrl:"https://www.arcgis.com",respectPrefersReducedMotion:!0,routeServiceUrl:"https://route-api.arcgis.com/arcgis/rest/services/World/Route/NAServer/Route_World",workers:{loaderConfig:{has:{},paths:{},map:{},packages:[]}},request:{crossOriginNoCorsDomains:null,httpsDomains:["arcgis.com","arcgisonline.com","esrikr.com","premiumservices.blackbridge.com","esripremium.accuweather.com","gbm.digitalglobe.com","firstlook.digitalglobe.com","msi.digitalglobe.com"],interceptors:[],internalInterceptors:[],maxUrlLength:2e3,priority:"high",proxyRules:[],proxyUrl:null,timeout:62e3,trustedServers:[],useIdentity:!0},log:{interceptors:[],level:null}};if(globalThis.esriConfig&&(Z4(dt,globalThis.esriConfig,!0),delete dt.has),!dt.assetsPath){{const e="4.32";dt.assetsPath=`https://js.arcgis.com/${e}/@arcgis/core/assets`}dt.defaultAssetsPath=dt.assetsPath}const SU=/\{([^}]+)\}/g;function qx(e){return e??""}function Hv(e,t){return t?e.replaceAll(SU,typeof t=="object"?(i,r)=>qx(qv(r,t)):(i,r)=>qx(t(r))):e}function u2e(e,t){return e.replaceAll(/([.$?*|{}()[\]\\/+\-^])/g,i=>t!=null&&t.includes(i)?i:`\\${i}`)}function WA(e){let t=0;for(let i=0;i<e.length;i++)t=(t<<5)-t+e.charCodeAt(i),t|=0;return t}let Hx;function h2e(e){return Hx??(Hx=new DOMParser),Hx.parseFromString(e||"","text/html").body.innerText||""}function c2e(e,t){return new RegExp(`{${t}}`,"ig").test(e)}function p2e(e,...t){let i=e[0];for(let r=0;r<t.length;++r)i+=t[r]+e[r+1];return i}const Wx={info:0,warn:1,error:2,none:3};let ye=class rs{constructor(t){this.level=null,this._module="",this._parent=null,this.writer=null,this._loggedMessages={error:new Map,warn:new Map,info:new Map},t.level!=null&&(this.level=t.level),t.writer!=null&&(this.writer=t.writer),this._module=t.module,rs._loggers.set(this.module,this);const i=this.module.lastIndexOf(".");i!==-1&&(this._parent=rs.getLogger(this.module.slice(0,i)))}get module(){return this._module}get parent(){return this._parent}error(...t){this._log("error","always",...t)}warn(...t){this._log("warn","always",...t)}info(...t){this._log("info","always",...t)}errorOnce(...t){this._log("error","once",...t)}warnOnce(...t){this._log("warn","once",...t)}infoOnce(...t){this._log("info","once",...t)}errorOncePerTick(...t){this._log("error","oncePerTick",...t)}warnOncePerTick(...t){this._log("warn","oncePerTick",...t)}infoOncePerTick(...t){this._log("info","oncePerTick",...t)}get test(){}static get test(){}static getLogger(t){return t=typeof t!="string"?t.declaredClass:t,rs._loggers.get(t)||new rs({module:t})}_log(t,i,...r){if(this._matchLevel(t)){if(i!=="always"&&!rs._throttlingDisabled){const a=TU(r),p=this._loggedMessages[t].get(a);if(i==="once"&&p!=null||i==="oncePerTick"&&p&&p>=rs._tickCounter)return;this._loggedMessages[t].set(a,rs._tickCounter),rs._scheduleTickCounterIncrement()}for(const a of dt.log.interceptors)if(a(t,this.module,...r))return;this._inheritedWriter()(t,this.module,...r)}}_parentWithMember(t,i){let r=this;for(;r!=null;){const a=r[t];if(a!=null)return a;r=r.parent}return i}_inheritedWriter(){return this._parentWithMember("writer",xU)}_matchLevel(t){const i=dt.log.level||"warn";return Wx[this._parentWithMember("level",i)]<=Wx[t]}static _scheduleTickCounterIncrement(){rs._tickCounterScheduled||(rs._tickCounterScheduled=!0,Promise.resolve().then(()=>{rs._tickCounter++,rs._tickCounterScheduled=!1}))}};function xU(e,t,...i){console[e](`[${t}]`,...i)}function TU(...e){return WA(JSON.stringify(e,(i,r)=>typeof r!="object"||Array.isArray(r)?r:"[Object]"))}ye._loggers=new Map,ye._tickCounter=0,ye._tickCounterScheduled=!1,ye._throttlingDisabled=!1;function MU(e,t){return e.replaceAll(/\$\{([^\s:}]*)(?::([^\s:}]+))?\}/g,(i,r)=>r===""?"$":(qv(r,t)??"").toString())}let JA=class{constructor(t,i,r=void 0){this.name=t,this.details=r,this.message=(i&&MU(i,r))??""}toString(){return"["+this.name+"]: "+this.message}},Y=class ZA extends JA{constructor(t,i,r){super(t,i,r)}toJSON(){if(this.details!=null)try{return{name:this.name,message:this.message,details:JSON.parse(JSON.stringify(this.details,(t,i)=>{if(i&&typeof i=="object"&&typeof i.toJSON=="function")return i;try{return te(i)}catch{return"[object]"}}))}}catch(t){throw ye.getLogger("esri.core.Error").error(t),t}return{name:this.name,message:this.message,details:this.details}}static fromJSON(t){return new ZA(t.name,t.message,t.details)}};Y.prototype.type="error";const Jx=new WeakMap;function $U(e,t,i=!1){const r=`🛑 DEPRECATED - ${t}`;if(!i)return void e.warn(r);let a=Jx.get(e);a||(a=new Set,Jx.set(e,a)),a.has(t)||(a.add(t),e.warn(r))}const Zx="https://www.esriurl.com/";function K4(e,t,i,r={}){ne("esri-deprecation-warnings")&&Np(e,`This widget is deprecated. Use the ${t} component instead.`,{see:[`${t} component reference: ${Zx}${i}/`,`Esri's move to web components: ${Zx}components-transition-plan/`],replacement:`<${i}></${i}>`,warnOnce:!0,...r})}function EU(e,t,i={}){if(ne("esri-deprecation-warnings")){const{moduleName:r}=i;Np(e,`Function: ${(r?r+"::":"")+t+"()"}`,i)}}function IU(e,t,i={}){if(ne("esri-deprecation-warnings")){const{moduleName:r}=i;Np(e,`Property: ${(r?r+"::":"")+t}`,i)}}function AU(e,t,i={}){ne("esri-deprecation-warnings")&&Np(e,`Multiple argument constructor: ${t}`,{warnOnce:!0,replacement:`new ${t}({ <your properties here> })`,...i})}function Np(e,t,i={}){if(ne("esri-deprecation-warnings")){const{replacement:r,version:a,see:p,warnOnce:y}=i;let g=t;if(r&&(g+=`
	🛠️ Replacement: ${r}`),a&&(g+=`
	⚙️ Version: ${a}`),p)if(Array.isArray(p)){g+=`
	🔗 See for more details:`;for(const _ of p)g+=`
		${_}`}else g+=`
	🔗 See ${p} for more details.`;$U(e,g,y)}}function f2e(e){const t=[];return function*(){yield*t;for(const i of e)t.push(i),yield i}}function CU(e,t){for(const i of e)if(i!=null&&t(i))return i}function $g(e){return e!=null&&typeof e[Symbol.iterator]=="function"}let rd=class{constructor(){this._groups=new Map}destroy(){this.removeAll()}get size(){let t=0;return this._groups.forEach(i=>{t+=i.length}),t}add(t,i){if($g(t)){const r=this._getOrCreateGroup(i);for(const a of t)Yx(a)&&r.push(a)}else Yx(t)&&this._getOrCreateGroup(i).push(t);return this}forEach(t,i){if(typeof t=="function")this._groups.forEach(r=>r.forEach(t));else{const r=this._getGroup(t);r&&i&&r.forEach(i)}}has(t){return this._groups.has(ey(t))}remove(t){if(typeof t!="string"&&$g(t)){for(const i of t)this.remove(i);return this}return this.has(t)?(Kx(this._getGroup(t)),this._groups.delete(ey(t)),this):this}removeAll(){return this._groups.forEach(Kx),this._groups.clear(),this}removeReference(t){return this._groups.delete(t),this}_getOrCreateGroup(t){if(this.has(t))return this._getGroup(t);const i=[];return this._groups.set(ey(t),i),i}_getGroup(t){return this._groups.get(ey(t))}};function ey(e){return e||"_default_"}function Kx(e){for(const t of e)t instanceof rd?t.removeAll():t.remove()}function Yx(e){return e!=null&&(!!e.remove||e instanceof rd)}function KA(e,t){if(e==null)throw new Error(t??"value is None")}function Ht(e){return e==null||e.destroy(),null}function m2e(e){return e==null||e.dispose(),null}function Wt(e){return e==null||e.remove(),null}function Lp(e){return e==null||e.abort(),null}function g2e(e){return e==null||e.release(),null}function OU(e,t,i){return e!=null&&t!=null?i!=null?i(e,t):e.equals(t):e===t}function YA(e,t){let i;return e.some((r,a)=>(i=t(r,a),i!=null)),i??void 0}const XA=Symbol("Accessor-beforeDestroy"),PU={remove:()=>{}};function yt(e){return e?{remove(){e&&(e(),e=void 0)}}:PU}function QA(e){e.forEach(t=>t==null?void 0:t.remove())}function v2e(e){QA(e),e.length=0}function y1(e){return yt(()=>QA(e))}function w2e(e){return yt(()=>{var t;return(t=e())==null?void 0:t.remove()})}function b2e(e){return yt(()=>e==null?void 0:e.abort())}function kU(e){return yt(e!=null?()=>e.destroy():void 0)}function Xr(e){return e.__accessor__??null}function RU(e,t){var i;return((i=e==null?void 0:e.metadata)==null?void 0:i[t])!=null}function sm(e,t,i){return i?Eg(e,t,{policy:i,path:""}):Eg(e,t,null)}function Eg(e,t,i){return t?Object.keys(t).reduce((r,a)=>{const p=a;let y=null,g="merge";if(i&&(y=i.path?`${i.path}.${a}`:a,g=i.policy(y)),g==="replace"||g==="replace-arrays"&&Array.isArray(r[p]))return r[p]=t[p],r;if(r[p]===void 0)return r[p]=te(t[p]),r;let _=r[p],T=t[p];if(_===T)return r;if(Array.isArray(T)||Array.isArray(r))_=_?Array.isArray(_)?r[p]=_.slice():r[p]=[_]:r[p]=[],T&&(Array.isArray(T)||(T=[T]),T.forEach(I=>{_.includes(I)||_.push(I)}));else if(T&&typeof T=="object")if(i){const I=i.path;i.path=y,r[p]=Eg(_,T,i),i.path=I}else r[p]=Eg(_,T,null);else r.hasOwnProperty(a)&&!t.hasOwnProperty(a)||(r[p]=T);return r},e||{}):e}function eC(e){return Array.isArray(e)?e:e.split(".")}function Xx(e){return e.includes(",")?e.split(",").map(t=>t.trim()):[e.trim()]}function NU(e){if(Array.isArray(e)){const t=[];for(const i of e)t.push(...Xx(i));return t}return Xx(e)}function tC(e,t,i,r){const a=NU(t);if(a.length!==1){const p=a.map(y=>r(e,y,i));return y1(p)}return r(e,a[0],i)}function iC(e,t){const i=e[e.length-1]==="?"?e.slice(0,-1):e;if(t.getItemAt!=null||Array.isArray(t)){const a=parseInt(i,10);if(!isNaN(a))return Array.isArray(t)?t[a]:t.at(a)}const r=Xr(t);return RU(r,i)?r.get(i):t[i]}function rC(e,t,i){if(e==null)return e;const r=iC(t[i],e);return!r&&i<t.length-1?void 0:i===t.length-1?r:rC(r,t,i+1)}function m1(e,t,i=0){return typeof t!="string"||t.includes(".")?rC(e,eC(t),i):iC(t,e)}function mo(e,t){return m1(e,t)}function Qx(e,t){return m1(t,e)!==void 0}var Wr;(function(e){e[e.INITIALIZING=0]="INITIALIZING",e[e.CONSTRUCTING=1]="CONSTRUCTING",e[e.CONSTRUCTED=2]="CONSTRUCTED",e[e.DESTROYED=3]="DESTROYED"})(Wr||(Wr={}));function g1(e){let t=e.constructor.__accessorMetadata__;const i=Object.prototype.hasOwnProperty.call(e.constructor,"__accessorMetadata__");if(t){if(!i){t=Object.create(t);for(const r in t)t[r]=te(t[r]);Object.defineProperty(e.constructor,"__accessorMetadata__",{value:t,enumerable:!1,configurable:!0,writable:!0})}}else t={},Object.defineProperty(e.constructor,"__accessorMetadata__",{value:t,enumerable:!1,configurable:!0,writable:!0});return e.constructor.__accessorMetadata__}function Wv(e,t){const i=g1(e);let r=i[t];return r||(r=i[t]={}),r}function LU(e,t){return sm(e,t,jU)}const DU=/^(?:[^.]+\.)?(?:value|type|(?:json\.type|json\.origins\.[^.]\.type))$/;function jU(e){return DU.test(e)?"replace":"merge"}function FU(e){return(e==null?void 0:e.release)&&typeof e.release=="function"}function zU(e){return(e==null?void 0:e.acquire)&&typeof e.acquire=="function"}let Uh=class u3{constructor(t,i,r,a=1,p=0){this._ctor=t,this._acquireFunction=i,this._releaseFunction=r,this.allocationSize=a,this._pool=new Array(p),this._initialSize=p;for(let y=0;y<p;y++)this._pool[y]=new this._ctor;this.allocationSize=Math.max(a,1)}destroy(){this.prune(0)}acquire(...t){let i;if(u3.test.disabled)i=new this._ctor;else{if(this._pool.length===0){const r=this.allocationSize;for(let a=0;a<r;a++)this._pool[a]=new this._ctor}i=this._pool.pop()}return this._acquireFunction?this._acquireFunction(i,...t):zU(i)&&i.acquire(...t),i}release(t){t&&!u3.test.disabled&&(this._releaseFunction?this._releaseFunction(t):FU(t)&&t.release(),this._pool.push(t))}prune(t=this._initialSize){if(!(t>=this._pool.length)){for(let i=t;i<this._pool.length;++i){const r=this._pool[i];this._dispose(r)}this._pool.length=t}}_dispose(t){t.dispose&&typeof t.dispose=="function"&&t.dispose()}};Uh.test={disabled:!1};let UU=class{constructor(t,i){this._observers=t,this._observer=i}remove(){NA(this._observers,this._observer)}},sC=class{constructor(){this._observers=null,this.destroyed=!1}observe(t){if(this.destroyed||t.destroyed)return VU;this._observers==null&&(this._observers=[]);const i=this._observers;let r=!1,a=!1;const p=i.length;for(let y=0;y<p;++y){const g=i[y];if(g.destroyed)a=!0;else if(g===t){r=!0;break}}return r||(i.push(t),a&&this._removeDestroyedObservers()),new UU(i,t)}_removeDestroyedObservers(){const t=this._observers;if(!t||t.length===0)return;const i=t.length;let r=0;for(let a=0;a<i;++a){for(;a+r<i&&t[a+r].destroyed;)++r;if(r>0){if(!(a+r<i))break;t[a]=t[a+r]}}t.length=i-r}destroy(){if(this.destroyed)return;this.destroyed=!0;const t=this._observers;if(t!=null){for(const i of t)i.onCommitted();this._observers=null}}};const VU=yt();var tt;(function(e){e[e.DEFAULTS=0]="DEFAULTS",e[e.COMPUTED=1]="COMPUTED",e[e.SERVICE=2]="SERVICE",e[e.PORTAL_ITEM=3]="PORTAL_ITEM",e[e.WEB_SCENE=4]="WEB_SCENE",e[e.WEB_MAP=5]="WEB_MAP",e[e.LINK_CHART=6]="LINK_CHART",e[e.USER=7]="USER"})(tt||(tt={}));const h3=tt.USER+1;function Pl(e){switch(e){case"defaults":return tt.DEFAULTS;case"service":return tt.SERVICE;case"portal-item":return tt.PORTAL_ITEM;case"web-scene":return tt.WEB_SCENE;case"web-map":return tt.WEB_MAP;case"link-chart":return tt.LINK_CHART;case"user":return tt.USER;default:return null}}function Ig(e){switch(e){case tt.DEFAULTS:return"defaults";case tt.SERVICE:return"service";case tt.PORTAL_ITEM:return"portal-item";case tt.WEB_SCENE:return"web-scene";case tt.WEB_MAP:return"web-map";case tt.LINK_CHART:return"link-chart";case tt.USER:return"user"}}function GU(e){return Ig(e)}var Tt;(function(e){e[e.Dirty=1]="Dirty",e[e.Overridden=2]="Overridden",e[e.Computing=4]="Computing",e[e.NonNullable=8]="NonNullable",e[e.HasDefaultValue=16]="HasDefaultValue",e[e.DepTrackingInitialized=32]="DepTrackingInitialized",e[e.AutoTracked=64]="AutoTracked",e[e.ExplicitlyTracking=128]="ExplicitlyTracking"})(Tt||(Tt={}));let Jv=class{constructor(t){this.accessed=void 0,this._handles=void 0,this._observer=t}destroy(){var t;(t=this.accessed)==null||t.clear(),this.clear()}onAccessed(t){this._observer!=null&&t!==this._observer&&(this.accessed==null&&(this.accessed=new Set),this.accessed.add(t))}onTrackingEnd(){this._observer!=null&&(this.clear(),this.accessed!=null&&(this._handles==null&&(this._handles=[]),this.accessed.forEach(t=>{this._handles.push(t.observe(this._observer))}),this.accessed.clear()))}clear(){if(this._handles!=null){for(let t=0;t<this._handles.length;++t)this._handles[t].remove();this._handles.length=0}}};const Ag=new Jv,Yd=[];let c0=Ag;function ze(e){c0.onAccessed(e)}let nm=!1,om=!1;function xa(e,t,i){if(nm)return Y4(e,t,i);let r=null;return nC(e),r=t.call(i),oC(),r}function BU(e,t){return xa(Ag,e,t)}function Y4(e,t,i){const r=nm;nm=!0,nC(e);let a=null;try{a=t.call(i)}catch(p){om&&ye.getLogger("esri.core.accessorSupport.tracking").error(p)}return oC(),nm=r,a}function nC(e){c0=e,Yd.push(e)}function oC(){const e=Yd.length;if(e>1){const t=Yd.pop();c0=Yd[e-2],t.onTrackingEnd()}else if(e===1){const t=Yd.pop();c0=Ag,t.onTrackingEnd()}else c0=Ag}function aC(e,t){if(t.flags&Tt.DepTrackingInitialized)return;t.flags|=Tt.DepTrackingInitialized;const i=om;om=!1,t.flags&Tt.AutoTracked?Y4(t.trackingTarget,t.metadata.get,e):lC(e,t),om=i}const qU=[];function lC(e,t){t.flags&Tt.ExplicitlyTracking||(t.flags|=Tt.ExplicitlyTracking,Y4(t.trackingTarget,()=>{const i=t.metadata.dependsOn||qU;for(const r of i)if(typeof r!="string"||r.includes(".")){const a=eC(r);for(let p=0,y=e;p<a.length&&y!=null&&typeof y=="object";++p)y=e7(y,a[p],p!==a.length-1)}else e7(e,r,!1)}),t.flags&=~Tt.ExplicitlyTracking)}function e7(e,t,i){const r=t[t.length-1]==="?"?t.slice(0,-1):t;if(e.getItemAt!=null||Array.isArray(e)){const p=parseInt(r,10);if(!isNaN(p))return Array.isArray(e)?e[p]:e.at(p)}const a=Xr(e);if(a){const p=a.propertiesByName.get(r);p&&(ze(p),aC(e,p))}return i?e[r]:void 0}let t7=class extends sC{constructor(t,i){super(),this.propertyName=t,this.metadata=i,this.trackingTarget=new Jv(this),this.flags=0,this.flags=Tt.Dirty|(i.nonNullable?Tt.NonNullable:0)|(i.hasOwnProperty("value")?Tt.HasDefaultValue:0)|(i.get===void 0?Tt.DepTrackingInitialized:0)|(i.dependsOn===void 0?Tt.AutoTracked:0)}destroy(){this.flags&Tt.Dirty&&this.onCommitted(),super.destroy(),this.trackingTarget.destroy()}getComputed(t){t.mutable&&ze(this);const i=t.store,r=this.propertyName,a=this.flags,p=i.get(r);if(a&Tt.Computing||~a&Tt.Dirty&&i.has(r))return p;this.flags|=Tt.Computing;const y=t.host;let g;a&Tt.AutoTracked?g=xa(this.trackingTarget,this.metadata.get,y):(lC(y,this),g=this.metadata.get.call(y)),this.flags|=Tt.DepTrackingInitialized,i.set(r,g,tt.COMPUTED);const _=i.get(r);return _===p?this.flags&=~Tt.Dirty:BU(this.commit,this),this.flags&=~Tt.Computing,_}notifyChange(){this.onInvalidated(),this.onCommitted()}invalidate(){this.onInvalidated()}commit(){this.flags&=~Tt.Dirty,this.onCommitted()}onInvalidated(){~this.flags&Tt.Overridden&&(this.flags|=Tt.Dirty);const t=this._observers;if(t&&t.length>0)for(const i of t)i.onInvalidated()}onCommitted(){const t=this._observers;if(t&&t.length>0){const i=t.slice();for(const r of i)r.onCommitted()}}},HU=class uC{constructor(){this._values=new Map,this.multipleOriginsSupported=!1}clone(t){const i=new uC;return this._values.forEach((r,a)=>{t&&t.has(a)||i.set(a,te(r))}),i}get(t){return this._values.get(t)}originOf(){return tt.USER}keys(){return[...this._values.keys()]}set(t,i){this._values.set(t,i)}delete(t){this._values.delete(t)}has(t){return this._values.has(t)}forEach(t){this._values.forEach(t)}};function ty(e,t,i){return e!==void 0}function i7(e,t,i,r){return e!==void 0&&(!(i==null&&e.flags&Tt.NonNullable)||(r.lifecycle,Wr.INITIALIZING,!1))}let WU=class{constructor(t){this.host=t,this.propertiesByName=new Map,this.ctorArgs=null,this.lifecycle=Wr.INITIALIZING,this.store=new HU,this.mutable=!0,this._origin=tt.USER;const i=this.host.constructor.__accessorMetadata__;for(const r in i){const a=new t7(r,i[r]);this.propertiesByName.set(r,a)}this.metadata=i}initialize(){this.lifecycle=Wr.CONSTRUCTING}constructed(){this.lifecycle=Wr.CONSTRUCTED}destroy(){this.lifecycle=Wr.DESTROYED,this.propertiesByName.forEach(t=>t.destroy())}get initialized(){return this.lifecycle!==Wr.INITIALIZING}get(t){const i=this.propertiesByName.get(t);if(i.metadata.get)return i.getComputed(this);this.mutable&&ze(i);const r=this.store;return r.has(t)?r.get(t):i.metadata.value}originOf(t){const i=this.store.originOf(t);if(i===void 0){const r=this.propertiesByName.get(t);if(r!==void 0&&r.flags&Tt.HasDefaultValue)return"defaults"}return Ig(i)}has(t){return this.propertiesByName.has(t)&&this.store.has(t)}keys(){return[...this.propertiesByName.keys()]}internalGet(t){const i=this.propertiesByName.get(t);if(ty(i))return this.store.has(t)?this.store.get(t):i.metadata.value}internalSet(t,i){const r=this.propertiesByName.get(t);ty(r)&&this._internalSet(r,i)}getDependsInfo(t,i,r){const a=this.propertiesByName.get(i);if(!ty(a))return"";const p=new Jv,y=xa(p,()=>{var T;return(T=a.metadata.get)==null?void 0:T.call(t)});let g=`${r}${t.declaredClass.split(".").pop()}.${i}: ${y}
`;const _=p.accessed??new Set;if(_.size===0)return g;r+="  ";for(const T of _)T instanceof t7&&(g+=`${r}${T.propertyName}: undefined
`);return g}setAtOrigin(t,i,r){const a=this.propertiesByName.get(t);if(ty(a))return this._setAtOrigin(a,i,r)}isOverridden(t){const i=this.propertiesByName.get(t);return i!==void 0&&!!(i.flags&Tt.Overridden)}clearOverride(t){const i=this.propertiesByName.get(t);i&&i.flags&Tt.Overridden&&(i.flags&=~Tt.Overridden,i.notifyChange())}override(t,i){const r=this.propertiesByName.get(t);if(!i7(r,t,i,this))return;const a=r.metadata.cast;if(a){const p=this._cast(a,i),{valid:y,value:g}=p;if(ww.release(p),!y)return;i=g}r.flags|=Tt.Overridden,this._internalSet(r,i)}set(t,i){const r=this.propertiesByName.get(t);if(!i7(r,t,i,this))return;const a=r.metadata.cast;if(a){const y=this._cast(a,i),{valid:g,value:_}=y;if(ww.release(y),!g)return;i=_}const p=r.metadata.set;p?p.call(this.host,i):this._internalSet(r,i)}setDefaultOrigin(t){this._origin=Pl(t)}getDefaultOrigin(){return Ig(this._origin)}notifyChange(t){const i=this.propertiesByName.get(t);i!==void 0&&i.notifyChange()}invalidate(t){const i=this.propertiesByName.get(t);i!==void 0&&i.invalidate()}commit(t){const i=this.propertiesByName.get(t);i!==void 0&&i.commit()}_internalSet(t,i){const r=this.lifecycle!==Wr.INITIALIZING?this._origin:tt.DEFAULTS;this._setAtOrigin(t,i,r)}_setAtOrigin(t,i,r){const a=this.store,p=t.propertyName;a.has(p,r)&&J4(i,a.get(p))&&~t.flags&Tt.Overridden&&r===a.originOf(p)||(t.invalidate(),a.set(p,i,r),t.commit(),aC(this.host,t))}_cast(t,i){const r=ww.acquire();return r.valid=!0,r.value=i,t&&(r.value=t.call(this.host,i,r)),r}},JU=class{constructor(){this.value=null,this.valid=!0}acquire(){this.valid=!0}release(){this.value=null}};const ww=new Uh(JU);function Cg(e,t,i){if(e&&t)if(typeof t=="object")for(const r of Object.getOwnPropertyNames(t))Cg(e,r,t[r]);else{if(t.includes(".")){const a=t.split("."),p=a.splice(-1,1)[0];return void Cg(mo(e,a),p,i)}const r=e.__accessor__;r!=null&&ZU(t,r),e[t]=i}}function ZU(e,t){if(ne("esri-unknown-property-errors")&&!KU(e,t))throw new Y("set:unknown-property",YU(e,t))}function KU(e,t){return t.metadata[e]!=null}function YU(e,t){return"setting unknown property '"+e+"' on instance of "+t.host.declaredClass}let XU;function QU(){return XU}var r7;(function(e){e[e.Ignore=0]="Ignore",e[e.Destroy=1]="Destroy",e[e.ThrowError=2]="ThrowError"})(r7||(r7={}));function eV(e){e.length=0}let $r=class{constructor(t=50,i=50){this._pool=new Uh(Array,void 0,eV,i,t)}acquire(){return this._pool.acquire()}release(t){this._pool.release(t)}prune(){this._pool.prune(0)}static acquire(){return bw.acquire()}static release(t){return bw.release(t)}static prune(){bw.prune()}};const bw=new $r(100);let hC=class extends Uh{constructor(){super(...arguments),this._set=new Set}destroy(){super.destroy(),this._set=null}acquire(...t){const i=super.acquire(...t);return this._set.delete(i),i}release(t){t&&!this._set.has(t)&&(super.release(t),this._set.add(t))}_dispose(t){this._set.delete(t),super._dispose(t)}};const iy=[];function Og(e){iy.push(e),iy.length===1&&queueMicrotask(()=>{const t=iy.slice();iy.length=0;for(const i of t)i()})}let p0=class{constructor(t,i=30){this.name=t,this._counter=0,this._samples=new Array(i)}push(t){t!=null&&(this._samples[++this._counter%this._samples.length]=t)}set(t){t!=null&&(this._samples[this._counter%this._samples.length]=t)}get median(){return this._samples.slice().sort((t,i)=>t-i)[Math.floor(this._samples.length/2)]}get average(){return this._samples.reduce((t,i)=>t+i,0)/this._samples.length}get last(){return this._samples[this._counter%this._samples.length]}};var c3;(function(e){const t=(p,y,g,_)=>{let T=y,I=y;const A=g>>>1,P=p[T-1];for(;I<=A;){I=T<<1,I<g&&_(p[I-1],p[I])<0&&++I;const N=p[I-1];if(_(N,P)<=0)break;p[T-1]=N,T=I}p[T-1]=P},i=(p,y)=>p<y?-1:p>y?1:0;function r(p,y,g,_){y===void 0&&(y=0),g===void 0&&(g=p.length),_===void 0&&(_=i);for(let I=g>>>1;I>y;I--)t(p,I,g,_);const T=y+1;for(let I=g-1;I>y;I--){const A=p[y];p[y]=p[I],p[I]=A,t(p,T,I,_)}}function*a(p,y,g,_){y===void 0&&(y=0),g===void 0&&(g=p.length),_===void 0&&(_=i);for(let I=g>>>1;I>y;I--)t(p,I,g,_),yield;const T=y+1;for(let I=g-1;I>y;I--){const A=p[y];p[y]=p[I],p[I]=A,t(p,T,I,_),yield}}e.sort=r,e.iterableSort=a})(c3||(c3={}));const s7=c3,tV=1.5,iV=1.1;let xh=class{constructor(t){this.data=[],this._length=0,this._allocator=void 0,this._deallocator=()=>null,this._shrink=()=>{},this._hint=new PA,t&&(t.initialSize&&(this.data=new Array(t.initialSize)),t.allocator&&(this._allocator=t.allocator),t.deallocator!==void 0&&(this._deallocator=t.deallocator),t.shrink&&(this._shrink=()=>n7(this)))}toArray(){return this.data.slice(0,this.length)}filter(t){const i=new Array;for(let r=0;r<this._length;r++){const a=this.data[r];t(a)&&i.push(a)}return i}at(t){if((t=Math.trunc(t)||0)<0&&(t+=this._length),!(t<0||t>=this._length))return this.data[t]}includes(t,i){const r=this.data.indexOf(t,i);return r!==-1&&r<this.length}get length(){return this._length}set length(t){if(t>this._length){if(this._allocator){for(;this._length<t;)this.data[this._length++]=this._allocator(this.data[this._length]);return}this._length=t}else{if(this._deallocator)for(let i=t;i<this._length;++i)this.data[i]=this._deallocator(this.data[i]);this._length=t,this._shrink()}}clear(){this.length=0}prune(){this.clear(),this.data=[]}push(t){this.data[this._length++]=t}pushArray(t,i=t.length){for(let r=0;r<i;r++)this.data[this._length++]=t[r]}fill(t,i){for(let r=0;r<i;r++)this.data[this._length++]=t}pushNew(){this._allocator&&(this.data[this.length]=this._allocator(this.data[this.length]));const t=this.data[this._length];return++this._length,t}unshift(t){this.data.unshift(t),this._length++,n7(this)}pop(){if(this.length===0)return;const t=this.data[this.length-1];return this.length=this.length-1,this._shrink(),t}remove(t){const i=a3(this.data,t,this.length,this._hint);if(i!==-1)return this.data.splice(i,1),this.length=this.length-1,t}removeUnordered(t){return this.removeUnorderedIndex(a3(this.data,t,this.length,this._hint))}removeUnorderedIndex(t){if(!(t>=this.length||t<0))return this.swapElements(t,this.length-1),this.pop()}removeUnorderedMany(t,i=t.length,r){this.length=mU(this.data,t,this.length,i,this._hint,r),this._shrink()}front(){if(this.length!==0)return this.data[0]}back(){if(this.length!==0)return this.data[this.length-1]}swapElements(t,i){if(t>=this.length||i>=this.length||t===i)return;const r=this.data[t];this.data[t]=this.data[i],this.data[i]=r}sort(t){s7.sort(this.data,0,this.length,t)}iterableSort(t){return s7.iterableSort(this.data,0,this.length,t)}some(t,i){for(let r=0;r<this.length;++r)if(t.call(i,this.data[r],r,this.data))return!0;return!1}find(t,i){const{data:r,length:a}=this;for(let p=0;p<a;++p)if(t.call(i,r[p]))return r[p]}filterInPlace(t,i){let r=0;for(let a=0;a<this._length;++a){const p=this.data[a];t.call(i,p,a,this.data)&&(this.data[a]=this.data[r],this.data[r]=p,r++)}if(this._deallocator)for(let a=r;a<this._length;a++)this.data[a]=this._deallocator(this.data[a]);return this._length=r,this._shrink(),this}forAll(t,i){const{data:r,length:a}=this;for(let p=0;p<a;++p)t.call(i,r[p],p,r)}forEach(t,i){this.data.slice(0,this.length).forEach(t,i)}map(t,i){const r=new Array(this.length);for(let a=0;a<this.length;++a)r[a]=t.call(i,this.data[a],a,this.data);return r}reduce(t,i){let r=i;for(let a=0;a<this.length;++a)r=t(r,this.data[a],a,this.data);return r}has(t){const i=this.length,r=this.data;for(let a=0;a<i;++a)if(r[a]===t)return!0;return!1}*[Symbol.iterator](){for(let t=0;t<this.length;t++)yield this.data[t]}};function n7(e){e.data.length>tV*e.length&&(e.data.length=Math.floor(e.length*iV))}function rV(e){return{setTimeout:(t,i)=>{const r=e.setTimeout(t,i);return yt(()=>e.clearTimeout(r))}}}const sd=rV(globalThis);function Zv(e){return sV(e)||cC(e)}function sV(e){return e!=null&&typeof e=="object"&&"on"in e&&typeof e.on=="function"}function cC(e){return e!=null&&typeof e=="object"&&"addEventListener"in e&&typeof e.addEventListener=="function"}function v1(e,t,i){if(!Zv(e))throw new TypeError("target is not a Evented or EventTarget object");return cC(e)?nV(e,t,i):e.on(t,i)}function nV(e,t,i,r){if(Array.isArray(t)){const a=t.slice();for(const p of a)e.addEventListener(p,i,r);return yt(()=>{for(const p of a)e.removeEventListener(p,i,r)})}return e.addEventListener(t,i,r),yt(()=>e.removeEventListener(t,i,r))}function pC(e,t,i){if(!Zv(e))throw new TypeError("target is not a Evented or EventTarget object");if("once"in e)return e.once(t,i);const r=v1(e,t,a=>{r.remove(),i.call(e,a)});return r}function Lt(e="Aborted"){return new Y("AbortError",e)}function At(e,t="Aborted"){if(bs(e))throw Lt(t)}function w1(e){return e instanceof AbortSignal?e:(e==null?void 0:e.signal)??void 0}function bs(e){const t=w1(e);return t!=null&&t.aborted}function po(e){if(Si(e))throw e}function o7(e){if(!Si(e))throw e}function Zs(e,t){const i=w1(e);if(i!=null){if(!i.aborted)return pC(i,"abort",()=>t());t()}}function X4(e,t){const i=w1(e);if(i!=null)return At(i),pC(i,"abort",()=>t(Lt()))}function dC(e,t){return w1(t)==null?e:new Promise((i,r)=>{let a=Zs(t,()=>r(Lt()));const p=()=>{a=Wt(a)};e.then(p,p),e.then(i,r)})}function Si(e){return(e==null?void 0:e.name)==="AbortError"}async function F0(e){try{return await e}catch(t){if(!Si(t))throw t;return}}async function Q4(e){if(!e)return;if(typeof e.forEach!="function"){const i=Object.keys(e),r=i.map(y=>e[y]),a=await Q4(r),p={};return i.map((y,g)=>p[y]=a[g]),p}const t=e;return Promise.allSettled(t).then(i=>Array.from(t,(r,a)=>{const p=i[a];return p.status==="fulfilled"?{promise:r,value:p.value}:{promise:r,error:p.reason}}))}async function oV(e){return(await Promise.allSettled(e)).filter(t=>t.status==="fulfilled").map(t=>t.value)}async function O2e(e){return(await Promise.allSettled(e)).filter(t=>t.status==="rejected").map(t=>t.reason)}function fC(e,t=void 0,i){const r=new AbortController;return Zs(i,()=>r.abort()),new Promise((a,p)=>{let y=setTimeout(()=>{y=0,a(t)},e);Zs(r,()=>{y&&(clearTimeout(y),p(Lt()))})})}function P2e(e,t,i,r){const a=i&&"abort"in i?i:null;r!=null||a||(r=i);let p=setTimeout(()=>{p=0,a==null||a.abort()},t);const y=()=>r||new Y("promiseUtils:timeout","The wrapped promise did not resolve within "+t+" ms");return e.then(g=>{if(p===0)throw y();return clearTimeout(p),g},g=>{throw clearTimeout(p),p===0?y():g})}function aV(e,t){const i=new AbortController,r=setTimeout(()=>i.abort(),t);return Zs(e,()=>{i.abort(),clearTimeout(r)}),{...e,signal:i.signal}}function $o(e){return e&&typeof e.then=="function"}function p3(e){return $o(e)?e:Promise.resolve(e)}function e6(e,t=-1){let i,r,a,p,y=null;const g=(..._)=>{if(i){r=_,p&&p.reject(Lt()),p=_s();const P=p.promise;if(y){const N=y;y=null,N.abort()}return P}if(a=p||_s(),p=null,t>0){const P=new AbortController;i=p3(e(..._,P.signal));const N=i;fC(t).then(()=>{i===N&&(p?P.abort():y=P)})}else i=1,i=p3(e(..._));const T=()=>{const P=r;r=a=i=y=null,P!=null&&g(...P)},I=i,A=a;return I.then(T,T),I.then(A.resolve,A.reject),A.promise};return g}function _s(){let e,t;const i=new Promise((a,p)=>{e=a,t=p}),r=a=>{e(a)};return r.resolve=a=>e(a),r.reject=a=>t(a),r.timeout=(a,p)=>sd.setTimeout(()=>r.reject(p),a),r.promise=i,r}async function a7(e){await Promise.resolve(),At(e)}function k2e(e){return e}function lV(e){return 1e3*e}function R2e(e){return e}function N2e(e){return .001*e}let uV=class{constructor(t){this.phases=t,this.paused=!1,this.ticks=-1,this.removed=!1}},hV=class{constructor(t){this.callback=t,this.isActive=!0}remove(){this.isActive=!1}},d3=0;const $d={time:0,deltaTime:0,elapsedFrameTime:0,frameDuration:0},f3=["prepare","preRender","render","postRender","update","finish"],y3=[],Ch=new xh;let cV=class{constructor(t){this._task=t}remove(){this._task.removed=!0}pause(){this._task.paused=!0}resume(){this._task.paused=!1,yC()}};function pV(){Th!=null&&(cancelAnimationFrame(Th),Th=requestAnimationFrame(t6))}function yC(){Th==null&&(d3=performance.now(),Th=requestAnimationFrame(t6))}const Pg={frameTasks:Ch,willDispatch:!1,clearFrameTasks:dV,dispatch:gC,executeFrameTasks:fV,reschedule:pV};function b1(e){const t=new hV(e);return y3.push(t),Pg.willDispatch||(Pg.willDispatch=!0,Og(gC)),t}function Dp(e){const t=new uV(e);return Ch.push(t),yC(),new cV(t)}let Th=null;function dV(e=!1){Ch.forAll(t=>{t.removed=!0}),e&&mC()}function t6(){const e=performance.now();Th=null,Th=Ch.some(i=>!i.paused&&!i.removed)?requestAnimationFrame(t6):null,Pg.executeFrameTasks(e)}function fV(e){const t=e-d3;d3=e;const i=1e3/60,r=Math.max(0,t-i);$d.time=e,$d.frameDuration=i-r;for(let a=0;a<f3.length;a++){const p=performance.now(),y=f3[a];Ch.forAll(g=>{var _;g.paused||g.removed||(a===0&&g.ticks++,g.phases[y]&&($d.elapsedFrameTime=performance.now()-e,$d.deltaTime=g.ticks===0?0:t,(_=g.phases[y])==null||_.call(g,$d)))}),vV[a].push(performance.now()-p)}mC(),wV.push(performance.now()-e)}const ry=new xh;function mC(){Ch.forAll(e=>{e.removed&&ry.push(e)}),Ch.removeUnorderedMany(ry.data,ry.length),ry.clear()}function gC(){for(;y3.length;){const e=y3.shift();e.isActive&&e.callback()}Pg.willDispatch=!1}function yV(e=1,t){const i=_s(),r=()=>{bs(t)?i.reject(Lt()):e===0?i():(--e,Og(()=>r()))};return r(),i.promise}function mV(e){return yV(1,e)}async function gV(e){await mV(e),await new Promise(t=>requestAnimationFrame(()=>{e!=null&&e.aborted||t()}))}const vV=f3.map(e=>new p0(e)),wV=new p0("total");function vC(e,t){for(const i of e.values())if(t(i))return!0;return!1}function kg(e,t){if(!t)return e;for(const i of t)i!=null&&e.add(i);return e}function l7(e,t){return t!=null&&e.add(t),e}function i6(e,t){const i=new Set;return kg(i,e),kg(i,t),i}function bV(e,t){const i=new Set;for(const r of t)e.has(r)&&i.add(r);return i}function F2e(e,t){if(!e||!t)return!1;if(e===t)return!0;for(const i of e)if(!t.has(i))return!1;return!0}function z2e(e,t){if(e==null&&t==null)return!0;if(e==null||t==null||e.size!==t.size)return!1;for(const i of e)if(!t.has(i))return!1;return!0}function _V(e,t){const i=new Set(e);for(const r of t)i.delete(r);return i}function SV(e,t){return _V(i6(e,t),bV(e,t))}let xV=0;function am(){return++xV}let Kv=class extends Jv{constructor(t){super(new TV(t)),this._observer&&u7.register(this,new WeakRef(this._observer),this)}destroy(){var t,i;this._observer&&u7.unregister(this._observer),(t=this.accessed)==null||t.clear(),this.clear(),(i=this._observer)==null||i.destroy()}},TV=class{constructor(t){this._notify=t,this._invalidCount=0,this.destroyed=!1}onInvalidated(){this._invalidCount++}onCommitted(){if(this.destroyed)return;const t=this._invalidCount;if(t===1)return this._invalidCount=0,void this._notify();this._invalidCount=t>0?t-1:0}destroy(){this.destroyed=!0,this._notify=MV}};const u7=new FinalizationRegistry(e=>{var t;(t=e.deref())==null||t.destroy()});function MV(){}let mp=!1;const Rg=[];function wC(e,t){let i=new Kv(p),r=null,a=!1;function p(){if(!i||a)return;if(mp)return void SC(p);const g=r;i.clear(),mp=!0,a=!0,r=xa(i,e),a=!1,mp=!1,t(r,g),xC()}function y(){i&&(i.destroy(),i=null,r=null)}return a=!0,r=xa(i,e),a=!1,yt(y)}function bC(e,t){let i=new Kv(a),r=null;function a(){t(r,y)}function p(){i&&(i.destroy(),i=null),r=null}function y(){return i?(i.clear(),r=xa(i,e),r):null}return y(),yt(p)}function _C(e,t){let i=!1,r=!1;const a=!!(t!=null&&t.sync);let p=new Kv(()=>{i||r||(r=!0,a?y():queueMicrotask(y))});function y(){r=!1,p&&!i&&(mp?SC(y):(p.clear(),mp=!0,i=!0,xa(p,e),i=!1,mp=!1,xC()))}function g(){p&&(p.destroy(),p=null)}return i=!0,xa(p,e),i=!1,yt(g)}function SC(e){Rg.includes(e)||Rg.unshift(e)}function xC(){for(;Rg.length;)Rg.pop()()}var d0;(function(e){e[e.Untracked=0]="Untracked",e[e.Tracked=1]="Tracked"})(d0||(d0={}));let z0=class{constructor(){this.uid=am(),this.removed=!1,this.type=null,this.oldValue=null,this.callback=null,this.getValue=null,this.target=null,this.path=null,this.equals=null}static acquireUntracked(t,i,r,a,p){return this.pool.acquire(d0.Untracked,t,i,r,a,p,J4)}static acquireTracked(t,i,r,a){return this.pool.acquire(d0.Tracked,t,i,r,null,null,a)}notify(t,i){this.type===d0.Untracked?this.callback.call(this.target,t,i,this.path,this.target):this.callback.call(null,t,i,void 0,void 0)}acquire(t,i,r,a,p,y,g){this.uid=am(),this.removed=!1,this.type=t,this.oldValue=i,this.callback=r,this.getValue=a,this.target=p,this.path=y,this.equals=g}release(){this.target=this.path=this.oldValue=this.callback=this.getValue=null,this.uid=am(),this.removed=!0}};z0.pool=new hC(z0);const lm=new $r,ga=new Set;let Ng;function Lg(e){ga.delete(e),ga.add(e),Ng||(Ng=b1(IV))}function $V(e){if(e.removed)return;const t=e.oldValue,i=e.getValue();e.equals(t,i)||(e.oldValue=i,e.notify(i,t))}function EV(e){for(const t of ga.values())t.target===e&&(t.removed=!0)}function IV(){let e=10;for(;Ng&&e--;){Ng=null;const t=AV(),i=lm.acquire();for(const r of t){const a=r.uid;$V(r),a===r.uid&&r.removed&&i.push(r)}for(const r of ga)r.removed&&(i.push(r),ga.delete(r));for(const r of i)z0.pool.release(r);lm.release(i),lm.release(t),m3.forEach(r=>r())}}function AV(){const e=lm.acquire();e.length=ga.size;let t=0;for(const i of ga)e[t]=i,++t;return ga.clear(),e}const m3=new Set;function CV(e){return m3.add(e),yt(()=>m3.delete(e))}function OV(e,t,i){let r=tC(e,t,i,(a,p,y)=>{let g,_,T=bC(()=>m1(a,p),(I,A)=>{var P;((P=a.__accessor__)==null?void 0:P.lifecycle)===Wr.DESTROYED||g&&g.uid!==_?r.remove():(g||(g=z0.acquireUntracked(I,y,A,a,p),_=g.uid),Lg(g))});return yt(()=>{T.remove(),g&&(g.uid!==_||g.removed||(g.removed=!0,Lg(g)),g=null),r=T=null})});return r}function PV(e,t,i){const r=tC(e,t,i,(a,p,y)=>{let g=!1;return wC(()=>m1(a,p),(_,T)=>{a.__accessor__.lifecycle!==Wr.DESTROYED?g||(g=!0,J4(T,_)||y.call(a,_,T,p,a),g=!1):r.remove()})});return r}function kV(e,t,i,r=!1){return e.__accessor__&&e.__accessor__.lifecycle!==Wr.DESTROYED?r?PV(e,t,i):OV(e,t,i):yt()}function RV(e,t,i){let r,a,p=bC(e,(y,g)=>{r&&r.uid!==a?p.remove():(r||(r=z0.acquireTracked(y,t,g,i),a=r.uid),Lg(r))});return yt(()=>{p.remove(),r&&(r.uid!==a||r.removed||(r.removed=!0,Lg(r)),r=null),p=null})}function NV(e,t,i){let r=!1;return wC(e,(a,p)=>{r||(r=!0,i(p,a)||t(a,p),r=!1)})}function LV(e,t,i=!1,r=BA){return i?NV(e,t,r):RV(e,t,r)}function h7(e){return vC(ga,t=>t.oldValue===e)}function DV(e,t){for(const i of e.values())if(t(i))return!0;return!1}function B2e(e,t){for(const i of e.values())if(t(i))return i;return null}function _1(e,t,i){const r=e.get(t);if(r!==void 0)return r;const a=i();return e.set(t,a),a}function q2e(e){const t=new Map;return i=>(t.has(i)||t.set(i,e(i)),t.get(i))}const gp=()=>ye.getLogger("esri.core.accessorSupport.ensureTypes");function jV(e){return e==null?e:new Date(e)}function FV(e){return e==null?e:!!e}function S1(e){return e==null?e:e.toString()}function Er(e,t=0){return e==null?e:(e=parseFloat(e),isNaN(e)?t:e)}function r6(e){return e==null?e:Math.round(parseFloat(e))}function zV(e){return null}function UV(e,t){return i=>{let r=e(i);return t.step!=null&&(r=Math.round(r/t.step)*t.step),t.min!=null&&(r=Math.max(t.min,r)),t.max!=null&&(r=Math.min(t.max,r)),r}}function TC(e){return(e==null?void 0:e.constructor)&&e.constructor.__accessorMetadata__!==void 0}function Dg(e,t){return t!=null&&e&&!(t instanceof e)}function MC(e){return e&&"isCollection"in e}function c7(e){return e!=null&&e.Type?typeof e.Type=="function"?e.Type:e.Type.base:null}function VV(e,t){if(!(t!=null&&t.constructor)||!MC(t.constructor))return g3(e,t)?t:new e(t);const i=c7(e.prototype.itemType),r=c7(t.constructor.prototype.itemType);return i?r?i===r?t:i.prototype.isPrototypeOf(r.prototype)?new e(t):(g3(e,t),t):new e(t):t}function g3(e,t){return!!TC(t)&&(gp().error("Accessor#set","Assigning an instance of '"+(t.declaredClass||"unknown")+"' which is not a subclass of '"+Yv(e)+"'"),!0)}function nd(e,t){return t==null?t:MC(e)?VV(e,t):Dg(e,t)?g3(e,t)?t:new e(t):t}function Yv(e){var t;return((t=e==null?void 0:e.prototype)==null?void 0:t.declaredClass)||"unknown"}const GV=new WeakMap;function BV(e){switch(e){case Number:return t=>Er(t);case ft:return r6;case Boolean:return FV;case String:return S1;case Date:return jV;case Xv:return zV;default:return _1(GV,e,()=>nd.bind(null,e))}}function di(e,t){const i=BV(e);return arguments.length===1?i:i(t)}function U0(e,t,i){return arguments.length===1?U0.bind(null,e):t&&(Array.isArray(t)?t.map(r=>e(r,i)):[e(t,i)])}function qV(e,t){return arguments.length===1?U0(i=>di(e,i)):U0(i=>di(e,i),t)}function $C(e,t,i){return t!==0&&Array.isArray(i)?i.map(r=>$C(e,t-1,r)):e(i)}function jg(e,t,i){if(arguments.length===2)return p=>jg(e,t,p);if(!i)return i;i=$C(e,t,i);let r=t,a=i;for(;r>0&&Array.isArray(a);)r--,a=a[0];if(a!==void 0)for(let p=0;p<r;p++)i=[i];return i}function HV(e,t,i){return arguments.length===2?jg(r=>di(e,r),t):jg(r=>di(e,r),t,i)}function EC(e){return!!Array.isArray(e)&&!e.some(t=>{const i=typeof t;return!(i==="string"||i==="number"||i==="function"&&e.length>1)})}function v3(e,t){if(arguments.length===2)return v3(e).call(null,t);const i=new Set,r=e.filter(g=>typeof g!="function"),a=e.filter(g=>typeof g=="function");for(const g of e)typeof g!="string"&&typeof g!="number"||i.add(g);let p=null,y=null;return(g,_)=>{if(g==null)return g;const T=typeof g,I=T==="string"||T==="number";return I&&(i.has(g)||a.some(A=>T==="string"&&A===String||T==="number"&&A===Number))||T==="object"&&a.some(A=>!Dg(g,A))?g:(I&&r.length?(p||(p=r.map(A=>typeof A=="string"?`'${A}'`:`${A}`).join(", ")),gp().error("Accessor#set",`'${g}' is not a valid value for this property, only the following values are valid: ${p}`)):typeof g=="object"&&a.length?(y||(y=a.map(A=>Yv(A)).join(", ")),gp().error("Accessor#set",`'${g}' is not a valid value for this property, value must be one of ${y}`)):gp().error("Accessor#set",`'${g}' is not a valid value for this property`),_&&(_.valid=!1),null)}}function Nn(e,t){if(arguments.length===2)return Nn(e).call(null,t);const i={},r=[],a=[];for(const _ in e.typeMap){const T=e.typeMap[_];i[_]=di(T),r.push(Yv(T)),a.push(_)}const p=()=>`'${r.join("', '")}'`,y=()=>`'${a.join("', '")}'`,g=typeof e.key=="string"?_=>_[e.key]:e.key;return _=>{if(e.base&&!Dg(e.base,_)||_==null)return _;const T=g(_)||e.defaultKeyValue,I=i[T];if(!I)return gp().error("Accessor#set",`Invalid property value, value needs to be one of ${p()}, or a plain object that can autocast (having .type = ${y()})`),null;if(!Dg(e.typeMap[T],_))return _;if(typeof e.key=="string"&&!TC(_)){const A={};for(const P in _)P!==e.key&&(A[P]=_[P]);return I(A)}return I(_)}}let ft=class{},Xv=class{};const J2e={native:e=>({type:"native",value:e}),array:e=>({type:"array",value:e}),oneOf:e=>({type:"one-of",values:e})};function WV(e){if(!e||!("type"in e))return!1;switch(e.type){case"native":case"array":case"one-of":return!0}return!1}function IC(e){switch(e.type){case"native":return di(e.value);case"array":return U0(IC(e.value));case"one-of":return JV(e);default:return null}}function JV(e){let t=null;return(i,r)=>b3(i,e)?i:(t==null&&(t=w3(e)),gp().error("Accessor#set",`Invalid property value, value needs to be of type ${t}`),r&&(r.valid=!1),null)}function w3(e){switch(e.type){case"native":switch(e.value){case Number:return"number";case String:return"string";case Boolean:return"boolean";case ft:return"integer";case Date:return"date";case Xv:return"null";default:return Yv(e.value)}case"array":return`array of ${w3(e.value)}`;case"one-of":{const t=e.values.map(i=>w3(i));return`one of ${t.slice(0,-1)} or ${t[t.length-1]}`}}return"unknown"}function b3(e,t){if(e==null)return!0;switch(t.type){case"native":switch(t.value){case Number:case ft:return typeof e=="number";case Boolean:return typeof e=="boolean";case String:return typeof e=="string";case Xv:return e===null}return e instanceof t.value;case"array":return!!Array.isArray(e)&&!e.some(i=>!b3(i,t.value));case"one-of":return t.values.some(i=>b3(e,i))}}function S(e={}){return(t,i)=>{if(t===Function.prototype)throw new Error(`Inappropriate use of @property() on a static field: ${t.name}.${i}. Accessor does not support static properties.`);const r=Object.getOwnPropertyDescriptor(t,i),a=Wv(t,i);r&&(r.get||r.set?(a.get=r.get||a.get,a.set=r.set||a.set):"value"in r&&("value"in e&&ye.getLogger("esri.core.accessorSupport.decorators.property").warn(`@property() will redefine the value of "${i}" on "${t.constructor.name}" already defined in the metadata`,e),a.value=e.value=r.value)),e.readOnly!=null&&(a.readOnly=e.readOnly);const p=e.aliasOf;if(p){const _=typeof p=="string"?p:p.source,T=typeof p=="string"?null:p.overridable===!0;let I;a.dependsOn=[_],a.get=function(){let A=mo(this,_);if(typeof A=="function"){I||(I=_.split(".").slice(0,-1).join("."));const P=mo(this,I);P&&(A=A.bind(P))}return A},a.readOnly||(a.set=T?function(A){this._override(i,A)}:function(A){Cg(this,_,A)})}const y=e.type,g=e.types;if(!a.cast){let _;y?_=ZV(y):g&&(_=Array.isArray(g)?U0(Nn(g[0])):Nn(g)),e.cast=KV(e.cast,_)}LU(a,e),e.range&&(a.cast=UV(a.cast,e.range))}}function AC(e,t,i){const r=Wv(e,i);r.json||(r.json={});let a=r.json;return t!==void 0&&(a.origins||(a.origins={}),a.origins[t]||(a.origins[t]={}),a=a.origins[t]),a}function ZV(e){let t=0,i=e;if(WV(e))return IC(e);for(;Array.isArray(i)&&i.length===1&&typeof i[0]!="string"&&typeof i[0]!="number";)i=i[0],t++;const r=i;if(EC(r))return t===0?v3(r):jg(v3(r),t);if(t===1)return qV(r);if(t>1)return HV(r,t);const a=e;return a.from?a.from:di(a)}function KV(e,t){if(e||t)return e?t?(i,r)=>t(e(i,r),r):e:t}function YV(e){if(e.json&&e.json.origins){const t=e.json.origins,i={"web-document":["web-scene","web-map"]};for(const r in i)if(t[r]){const a=t[r];i[r].forEach(p=>{t[p]=a}),delete t[r]}}}let Ys=class extends JA{constructor(t,i,r){super(t,i,r)}};Ys.prototype.type="warning";function CC(e){var t;return!!e&&((t=e.prototype)==null?void 0:t.declaredClass)&&e.prototype.declaredClass.indexOf("esri.core.Collection")===0}const _3=()=>ye.getLogger("esri.core.accessorSupport.extensions.serializableProperty.reader");function p7(e,t,i){var r,a;e&&(!i&&!t.read||(r=t.read)!=null&&r.reader||((a=t.read)==null?void 0:a.enabled)===!1||eG(e)&&Bi("read.reader",od(e),t))}function od(e){var i,r;const t=e.ndimArray??0;if(t>1)return QV(e);if(t===1)return d7(e);if("type"in e&&PC(e.type)){const a=(r=(i=e.type.prototype)==null?void 0:i.itemType)==null?void 0:r.Type,p=d7(typeof a=="function"?{type:a}:{types:a});return(y,g,_)=>{const T=p(y,g,_);return T&&new e.type(T)}}return s6(e)}function s6(e){return"type"in e?XV(e.type):tG(e.types)}function XV(e){return e.prototype.read?(t,i,r)=>{if(t==null)return t;const a=typeof t;if(a!=="object")return void _3().error(`Expected JSON value of type 'object' to deserialize type '${e.prototype.declaredClass}', but got '${a}'`);const p=new e;return p.read(t,r),p}:e.fromJSON}function OC(e,t,i,r){return r!==0&&Array.isArray(t)?t.map(a=>OC(e,a,i,r-1)):e(t,void 0,i)}function QV(e){const t=s6(e),i=OC.bind(null,t),r=e.ndimArray??0;return(a,p,y)=>{if(a==null)return a;a=i(a,y,r);let g=r,_=a;for(;g>0&&Array.isArray(_);)g--,_=_[0];if(_!==void 0)for(let T=0;T<g;T++)a=[a];return a}}function d7(e){const t=s6(e);return(i,r,a)=>{if(i==null)return i;if(Array.isArray(i)){const y=[];for(const g of i){const _=t(g,void 0,a);_!==void 0&&y.push(_)}return y}const p=t(i,void 0,a);return p!==void 0?[p]:void 0}}function PC(e){if(!CC(e))return!1;const t=e.prototype.itemType;return!(!t||!t.Type)&&(typeof t.Type=="function"?n6(t.Type):kC(t.Type))}function eG(e){return"types"in e?kC(e.types):n6(e.type)}function n6(e){return!Array.isArray(e)&&!!e&&e.prototype&&("read"in e.prototype||"fromJSON"in e||PC(e))}function kC(e){for(const t in e.typeMap)if(!n6(e.typeMap[t]))return!1;return!0}function tG(e){let t=null;const i=e.errorContext??"type",r=e.validate;return(a,p,y)=>{if(a==null)return a;const g=typeof a;if(g!=="object")return void _3().error(`Expected JSON value of type 'object' to deserialize, but got '${g}'`);t||(t=iG(e));const _=e.key;if(typeof _!="string")return;const T=a[_],I=T?t[T]:e.defaultKeyValue?e.typeMap[e.defaultKeyValue]:void 0;if(!I){const P=`Type '${T||"unknown"}' is not supported`;return y!=null&&y.messages&&a&&y.messages.push(new Ys(`${i}:unsupported`,P,{definition:a,context:y})),void _3().error(P)}const A=new I;return A.read(a,y),r?r(A):A}}function iG(e){var i,r;const t={};for(const a in e.typeMap){const p=e.typeMap[a],y=g1(p.prototype);if(typeof e.key=="function")continue;const g=y[e.key];if(!g)continue;if((i=g.json)!=null&&i.type&&Array.isArray(g.json.type)&&g.json.type.length===1&&typeof g.json.type[0]=="string"){t[g.json.type[0]]=p;continue}const _=(r=g.json)==null?void 0:r.write;if(!(_!=null&&_.writer)){t[a]=p;continue}const T=_.target,I=typeof T=="string"?T:e.key,A={};_.writer(a,A,I),A[I]&&(t[A[I]]=p)}return t}function rG(e){if(e.json||(e.json={}),y7(e.json),m7(e.json),f7(e.json),e.json.origins)for(const t in e.json.origins)y7(e.json.origins[t]),m7(e.json.origins[t]),f7(e.json.origins[t]);return!0}function f7(e){e.name&&(e.read&&typeof e.read=="object"?e.read.source===void 0&&(e.read.source=e.name):e.read={source:e.name},e.write&&typeof e.write=="object"?e.write.target===void 0&&(e.write.target=e.name):e.write={target:e.name})}function y7(e){typeof e.read=="boolean"?e.read={enabled:e.read}:typeof e.read=="function"?e.read={enabled:!0,reader:e.read}:e.read&&typeof e.read=="object"&&e.read.enabled===void 0&&(e.read.enabled=!0)}function m7(e){typeof e.write=="boolean"?e.write={enabled:e.write}:typeof e.write=="function"?e.write={enabled:!0,writer:e.write}:e.write&&typeof e.write=="object"&&e.write.enabled===void 0&&(e.write.enabled=!0)}function g7(e,t){if(!t.write||t.write.writer||t.write.enabled===!1&&!t.write.overridePolicy)return;const i=(e==null?void 0:e.ndimArray)??0;e&&(i===1||"type"in e&&CC(e.type))?t.write.writer=oG:i>1?t.write.writer=aG(i):t.types?Array.isArray(t.types)?t.write.writer=nG(t.types[0]):t.write.writer=sG(t.types):t.write.writer=V0}function sG(e){return(t,i,r,a)=>t?RC(t,e,a)?V0(t,i,r,a):void 0:V0(t,i,r,a)}function RC(e,t,i){for(const r in t.typeMap)if(e instanceof t.typeMap[r])return!0;if(i!=null&&i.messages){const r=t.errorContext??"type",a=`Values of type '${(typeof t.key!="function"?e[t.key]:e.declaredClass)??"Unknown"}' cannot be written`;i&&i.messages&&e&&i.messages.push(new Y(`${r}:unsupported`,a,{definition:e,context:i})),ye.getLogger("esri.core.accessorSupport.extensions.serializableProperty.writer").error(a)}return!1}function nG(e){return(t,i,r,a)=>!t||!Array.isArray(t)?V0(t,i,r,a):V0(t.filter(p=>RC(p,e,a)),i,r,a)}function V0(e,t,i,r){Bi(i,Fg(e,r),t)}function Fg(e,t){return e&&typeof e.write=="function"?e.write({},t):e&&typeof e.toJSON=="function"?e.toJSON():typeof e=="number"?zg(e):e}function zg(e){return e===-1/0?-Number.MAX_VALUE:e===1/0?Number.MAX_VALUE:isNaN(e)?null:e}function oG(e,t,i,r){let a;e===null?a=null:e&&typeof e.map=="function"?(a=e.map(p=>Fg(p,r)),typeof a.toArray=="function"&&(a=a.toArray())):a=[Fg(e,r)],Bi(i,a,t)}function NC(e,t,i){return i!==0&&Array.isArray(e)?e.map(r=>NC(r,t,i-1)):Fg(e,t)}function aG(e){return(t,i,r,a)=>{let p;if(t===null)p=null;else{p=NC(t,a,e);let y=e,g=p;for(;y>0&&Array.isArray(g);)y--,g=g[0];if(g!==void 0)for(let _=0;_<y;_++)p=[p]}Bi(r,p,i)}}function lG(e,t){return o6(e,"any",t==null?void 0:t.origin)}function S3(e,t){return o6(e,"read",t==null?void 0:t.origin)}function LC(e,t){return o6(e,"write",t==null?void 0:t.origin)}function o6(e,t,i){let r=e==null?void 0:e.json;if(r!=null&&r.origins&&i){let a;a=i==="link-chart"?r.origins[i]&&(t==="any"||t in r.origins[i])?r.origins[i]:r.origins["web-map"]:r.origins[i],a&&(t==="any"||t in a)&&(r=a)}return r}function uG(e){var i;const t=hG(e);if(e.json.origins)for(const r in e.json.origins){const a=e.json.origins[r],p=a.types?cG(a):t;p7(p,a,!1),a.types&&!a.write&&((i=e.json.write)!=null&&i.enabled)&&(a.write={...e.json.write}),g7(p,a)}p7(t,e.json,!0),g7(t,e.json)}function hG(e){return e.json.types?x3(e.json):e.type?DC(e):x3(e)}function cG(e){return e.type?DC(e):x3(e)}function DC(e){if(!e.type)return;let t=0,i=e.type;for(;Array.isArray(i)&&!EC(i);)i=i[0],t++;return{type:i,ndimArray:t}}function x3(e){if(!e.types)return;let t=0,i=e.types;for(;Array.isArray(i);)i=i[0],t++;return{types:i,ndimArray:t}}function pG(e){rG(e)&&(YV(e),uG(e))}const _w=new Set,Sw=new Set;function H(e){return t=>{e??(e="esri.core.Accessor"),t.prototype.declaredClass=e,fG(t);const i=[],r=[];let a=t.prototype;for(;a;)a.hasOwnProperty("initialize")&&!_w.has(a.initialize)&&(_w.add(a.initialize),i.push(a.initialize)),a.hasOwnProperty("destroy")&&!Sw.has(a.destroy)&&(Sw.add(a.destroy),r.push(a.destroy)),a=Object.getPrototypeOf(a);_w.clear(),Sw.clear();const p=class extends t{constructor(...g){if(super(...g),this.constructor===p&&typeof this.postscript=="function"){if(i.length&&Object.defineProperty(this,"initialize",{enumerable:!1,configurable:!0,value(){for(let _=i.length-1;_>=0;_--)i[_].call(this)}}),r.length){let _=!1;const T=this[XA];Object.defineProperty(this,"destroy",{enumerable:!1,configurable:!0,value(){if(!_){_=!0,T.call(this);for(let I=0;I<r.length;I++)r[I].call(this)}}})}Object.defineProperty(this,Symbol.dispose,{enumerable:!1,configurable:!0,value(){this.destroy()}}),this.postscript()}}};p.__accessorMetadata__=g1(t.prototype),p.prototype.declaredClass=e;const y=(e||"AccessorSubclass").split(".").slice(-1)[0];return Object.defineProperty(p,"name",{value:y,configurable:!0}),p}}function dG(e,t){return t.get==null?function(){const i=this.__accessor__,r=i.propertiesByName.get(e);if(r===void 0)return;i.mutable&&ze(r);const a=i.store;return a.has(e)?a.get(e):r.metadata.value}:function(){const i=this.__accessor__,r=i.propertiesByName.get(e);if(r!==void 0)return r.getComputed(i)}}function fG(e){const t=e.prototype,i=g1(t),r={};for(const a of Object.getOwnPropertyNames(i)){const p=i[a];pG(p),r[a]={enumerable:!0,configurable:!0,get:dG(a,p),set(y){const g=this.__accessor__;if(g!==void 0){if(g.mutable)return g.initialized&&p.readOnly?v7("read-only",a):g.lifecycle===Wr.CONSTRUCTED&&p.constructOnly?v7("construct-only",a):void g.set(a,y)}else Object.defineProperty(this,a,{enumerable:!0,configurable:!0,writable:!0,value:y})}}}Object.defineProperties(e.prototype,r)}const v7=(e,t)=>{ye.getLogger("esri.core.Accessor").error(`cannot assign to ${e} property '${t}'`)};var jC,FC;function yG(e){var t;if(e==null)return{value:e};if(Array.isArray(e))return{type:[e[0]],value:null};switch(typeof e){case"object":return(t=e.constructor)!=null&&t.__accessorMetadata__||e instanceof Date?{type:e.constructor,value:e}:e;case"boolean":return{type:Boolean,value:e};case"string":return{type:String,value:e};case"number":return{type:Number,value:e};case"function":return{type:e,value:null};default:return}}const Vn=Symbol("Accessor-Handles"),T3=Symbol("Accessor-Initialized");let Ae=class um{static createSubclass(t={}){if(Array.isArray(t))throw new Error("Multi-inheritance unsupported since 4.16");const{properties:i,declaredClass:r,constructor:a}=t;delete t.declaredClass,delete t.properties,delete t.constructor;const p=this;class y extends p{constructor(..._){super(..._),this.inherited=null,a&&a.apply(this,_)}}g1(y.prototype);for(const g in t){const _=t[g];y.prototype[g]=typeof _=="function"?function(...T){const I=this.inherited;let A;this.inherited=function(...P){if(p.prototype[g])return p.prototype[g].apply(this,P)};try{A=_.apply(this,T)}catch(P){throw this.inherited=I,P}return this.inherited=I,A}:t[g]}for(const g in i){const _=yG(i[g]);S(_)(y.prototype,g)}return H(r)(y)}static freeze(t){return t instanceof um?t.__accessor__.mutable=!1:Object.freeze(t),t}static isFrozen(t){return t instanceof um?!t.__accessor__.mutable:Object.isFrozen(t)}constructor(...t){var r;if(this[jC]=null,this[FC]=!1,this.constructor===um)throw new Error("[accessor] cannot instantiate Accessor. This can be fixed by creating a subclass of Accessor");const i=new WU(this);Object.defineProperty(this,"__accessor__",{enumerable:!1,value:i}),t.length>0&&(i.ctorArgs=((r=this.normalizeCtorArgs)==null?void 0:r.apply(this,t))??t[0])}postscript(){const t=this.__accessor__,i=t.ctorArgs;t.initialize(),i&&(this.set(i),t.ctorArgs=null),t.constructed(),this.initialize(),this[T3]=!0}initialize(){}[XA](){this[Vn]=Ht(this[Vn])}destroy(){var t;this.destroyed||(EV(this),this.__accessor__.destroy(),(t=QU())==null||t.onInstanceDestroy(this))}[Symbol.dispose](){this.destroy()}get constructed(){return this.__accessor__&&this.__accessor__.initialized||!1}get initialized(){return this[T3]}get destroyed(){var t;return((t=this.__accessor__)==null?void 0:t.lifecycle)===Wr.DESTROYED||!1}commitProperty(t){mo(this,t)}hasOwnProperty(t){return this.__accessor__?this.__accessor__.has(t):Object.prototype.hasOwnProperty.call(this,t)}keys(){return this.__accessor__?this.__accessor__.keys():[]}set(t,i){return Cg(this,t,i),this}watch(t,i,r){return EU(ye.getLogger(this),"`watch` is deprecated in favor of reactiveUtils.watch",{replacement:"reactiveUtils.watch",version:"4.32",see:"https://developers.arcgis.com/javascript/latest/api-reference/esri-core-reactiveUtils.html#watch",warnOnce:!0}),kV(this,t,i,r)}addHandles(t,i){if(this.destroyed){const r=Array.isArray(t)?t:[t];for(const a of r)a.remove();return}(this[Vn]??(this[Vn]=new rd)).add(t,i)}removeHandles(t){var i;(i=this[Vn])==null||i.remove(t)}removeAllHandles(){var t;(t=this[Vn])==null||t.removeAll()}removeHandlesReference(t){var i;(i=this[Vn])==null||i.removeReference(t)}hasHandles(t){var i;return((i=this[Vn])==null?void 0:i.has(t))===!0}_override(t,i){i===void 0?this.__accessor__.clearOverride(t):this.__accessor__.override(t,i)}_clearOverride(t){return this.__accessor__.clearOverride(t)}_overrideIfSome(t,i){i==null?this.__accessor__.clearOverride(t):this.__accessor__.override(t,i)}_isOverridden(t){return this.__accessor__.isOverridden(t)}notifyChange(t){this.__accessor__.notifyChange(t)}_get(t){return this.__accessor__.internalGet(t)}_set(t,i){return this.__accessor__.internalSet(t,i),this}};jC=Vn,FC=T3;let mG=class zC{constructor(){this._values=new Map,this.multipleOriginsSupported=!1}clone(t){const i=new zC;return this._values.forEach((r,a)=>{t&&t.has(a)||i.set(a,te(r.value),r.origin)}),i}get(t,i){i=this._normalizeOrigin(i);const r=this._values.get(t);return i==null||(r==null?void 0:r.origin)===i?r==null?void 0:r.value:void 0}originOf(t){var i;return((i=this._values.get(t))==null?void 0:i.origin)??tt.USER}keys(t){t=this._normalizeOrigin(t);const i=[...this._values.keys()];return t==null?i:i.filter(r=>{var a;return((a=this._values.get(r))==null?void 0:a.origin)===t})}set(t,i,r){if((r=this._normalizeOrigin(r))===tt.DEFAULTS){const a=this._values.get(t);if((a==null?void 0:a.origin)!=null&&a.origin>r)return}this._values.set(t,new gG(i,r))}delete(t,i){var r;(i=this._normalizeOrigin(i))!=null&&((r=this._values.get(t))==null?void 0:r.origin)!==i||this._values.delete(t)}has(t,i){var r;return(i=this._normalizeOrigin(i))!=null?((r=this._values.get(t))==null?void 0:r.origin)===i:this._values.has(t)}forEach(t){this._values.forEach(({value:i},r)=>t(i,r))}_normalizeOrigin(t){if(t!=null)return t===tt.DEFAULTS?t:tt.USER}},gG=class{constructor(t,i){this.value=t,this.origin=i}};function UC(e,t,i){t.keys().forEach(a=>{i.set(a,t.get(a),tt.DEFAULTS)});const r=e.metadata;Object.keys(r).forEach(a=>{e.internalGet(a)&&i.set(a,e.internalGet(a),tt.DEFAULTS)})}function vG(e,t,i){if(!(e!=null&&e.read)||e.read.enabled===!1||!e.read.source)return!1;const r=e.read.source;if(typeof r=="string"){if(r===t||r.includes(".")&&r.indexOf(t)===0&&Qx(r,i))return!0}else for(const a of r)if(a===t||a.includes(".")&&a.indexOf(t)===0&&Qx(a,i))return!0;return!1}function wG(e){return e&&(!e.read||e.read.enabled!==!1&&!e.read.source)}function bG(e,t,i,r,a){let p=S3(t[i],a);wG(p)&&(e[i]=!0);for(const y of Object.getOwnPropertyNames(t))p=S3(t[y],a),vG(p,i,r)&&(e[y]=!0)}function _G(e,t,i,r){const a=i.metadata,p=lG(a[t],r),y=p==null?void 0:p.default;if(y===void 0)return;const g=typeof y=="function"?y.call(e,t,r):y;g!==void 0&&i.set(t,g)}const VC={origin:"service"};function GC(e,t,i=VC){if(!t||typeof t!="object")return;const r=Xr(e),a=r.metadata,p={};for(const y of Object.getOwnPropertyNames(t))bG(p,a,y,t,i);r.setDefaultOrigin(i.origin);for(const y of Object.getOwnPropertyNames(p)){const g=S3(a[y],i).read,_=g==null?void 0:g.source;let T;T=_&&typeof _=="string"?m1(t,_):t[y],g!=null&&g.reader&&(T=g.reader.call(e,T,t,i)),T!==void 0&&r.set(y,T)}if(!i||!i.ignoreDefaults){r.setDefaultOrigin("defaults");for(const y of Object.getOwnPropertyNames(a))p[y]||_G(e,y,r,i)}r.setDefaultOrigin("user")}function SG(e,t,i,r=VC){var p;const a={...r,messages:[]};i(a),(p=a.messages)==null||p.forEach(y=>{y.type!=="warning"||e.loaded?r!=null&&r.messages&&r.messages.push(y):e.loadWarnings.push(y)})}function xG(e,t,i,r,a){var y,g;const p={};return(g=(y=t.write)==null?void 0:y.writer)==null||g.call(e,r,p,i,a),p}function BC(e,t,i,r,a,p){if(!(r!=null&&r.write))return!1;const y=mo(e,i);if(!a&&r.write.overridePolicy){const g=r.write.overridePolicy.call(e,y,i,p??void 0);g!==void 0&&(a=g)}if(a||(a=r.write),!a||a.enabled===!1||a.layerContainerTypes&&(p!=null&&p.layerContainerType)&&!a.layerContainerTypes.includes(p.layerContainerType))return!1;if((y===null&&!a.allowNull&&!a.writerEnsuresNonNull||y===void 0)&&a.isRequired){const g=new Y("web-document-write:property-required",`Missing value for required property '${i}' on '${e.declaredClass}'`,{propertyName:i,target:e});return g&&(p!=null&&p.messages)?p.messages.push(g):g&&!p&&ye.getLogger("esri.core.accessorSupport.write").error(g.name,g.message),!1}return!(y===void 0||y===null&&!a.allowNull&&!a.writerEnsuresNonNull||!a.alwaysWriteDefaults&&(!t.store.multipleOriginsSupported||t.store.originOf(i)===tt.DEFAULTS)&&TG(e,i,p,r,y)||!a.ignoreOrigin&&(p!=null&&p.origin)&&t.store.multipleOriginsSupported&&t.store.originOf(i)<Pl(p.origin))}function TG(e,t,i,r,a){const p=r.default;if(p===void 0)return!1;if(r.defaultEquals!=null)return r.defaultEquals(a);if(typeof p=="function"){if(Array.isArray(a)){const y=p.call(e,t,i??void 0);return Vv(y,a)}return!1}return p===a}function MG(e,t,i,r){const a=Xr(e),p=a.metadata,y=LC(p[t],r);return!!y&&BC(e,a,t,y,i,r)}function qC(e,t,i){var p,y;if(e&&typeof e.toJSON=="function"&&(!e.toJSON.isDefaultToJSON||!e.write))return sm(t,e.toJSON(i));const r=Xr(e),a=r.metadata;for(const g in a){const _=LC(a[g],i);if(!BC(e,r,g,_,void 0,i))continue;const T=mo(e,g),I=xG(e,_,_.write&&typeof _.write.target=="string"?_.write.target:g,T,i);Object.keys(I).length>0&&(t=sm(t,I),(y=(p=i==null?void 0:i.resources)==null?void 0:p.pendingOperations)!=null&&y.length&&i.resources.pendingOperations.push(Promise.all(i.resources.pendingOperations).then(()=>sm(t,I,()=>"replace-arrays"))),i!=null&&i.writtenProperties&&i.writtenProperties.push({target:e,propName:g,oldOrigin:GU(r.store.originOf(g)),newOrigin:i.origin}))}return t}const HC=e=>{let t=class extends e{constructor(...i){super(...i);const r=Xr(this),a=r.store,p=new mG;r.store=p,UC(r,a,p)}read(i,r){GC(this,i,r)}write(i,r){return qC(this,i??{},r)}toJSON(i){return this.write({},i)}static fromJSON(i,r){return $G.call(this,i,r)}};return t=v([H("esri.core.JSONSupport")],t),t.prototype.toJSON.isDefaultToJSON=!0,t};function $G(e,t){if(!e)return null;if(e.declaredClass)throw new Error("JSON object is already hydrated");const i=new this;return i.read(e,t),i}let Xd=class extends HC(Ae){};Xd=v([H("esri.core.JSONSupport")],Xd),function(e){function t(i){return i&&typeof i=="object"&&"toJSON"in i&&typeof i.toJSON=="function"}e.JSONSupportMixin=HC,e.isSerializable=t}(Xd||(Xd={}));const he=Xd,EG=/^https:\/\/([a-z\d-]+)(\.maps([^.]*))?\.arcgis\.com/i,IG={devext:{customBaseUrl:"mapsdevext.arcgis.com",portalHostname:"devext.arcgis.com"},qaext:{customBaseUrl:"mapsqa.arcgis.com",portalHostname:"qaext.arcgis.com"},www:{customBaseUrl:"maps.arcgis.com",portalHostname:"www.arcgis.com"}};function w7(e){const t=e==null?void 0:e.match(EG);if(!t)return null;const[,i,r,a]=t;if(!i)return null;let p=null,y=null,g=null;const{devext:_,qaext:T,www:I}=IG;if(r)if(p=i,a)switch(a.toLowerCase()){case"devext":({customBaseUrl:y,portalHostname:g}=_);break;case"qa":({customBaseUrl:y,portalHostname:g}=T);break;default:return null}else({customBaseUrl:y,portalHostname:g}=I);else switch(i.toLowerCase()){case"devext":({customBaseUrl:y,portalHostname:g}=_);break;case"qaext":({customBaseUrl:y,portalHostname:g}=T);break;case"www":({customBaseUrl:y,portalHostname:g}=I);break;default:return null}return{customBaseUrl:y,isPortal:!1,portalHostname:g,urlKey:p}}function AG(e){return/\/(sharing|usrsvcs)\/(appservices|servers)\//i.test(e)}function WC(e){const t=/^https?:\/\/(?:cdn|[a-z\d-]+\.maps)\.arcgis\.com/i,i=/^https?:\/\/(?:cdndev|[a-z\d-]+\.mapsdevext)\.arcgis\.com/i,r=/^https?:\/\/(?:cdnqa|[a-z\d-]+\.mapsqa)\.arcgis\.com/i;return t.test(e)?e=e.replace(t,"https://www.arcgis.com"):i.test(e)?e=e.replace(i,"https://devext.arcgis.com"):r.test(e)&&(e=e.replace(r,"https://qaext.arcgis.com")),e}function JC(e){const t=atob(e),i=new Uint8Array(t.length);for(let r=0;r<t.length;r++)i[r]=t.charCodeAt(r);return i.buffer}function CG(e){const t=new Uint8Array(e);let i="";for(let r=0;r<t.length;r++)i+=String.fromCharCode(t[r]);return btoa(i)}const OG=()=>ye.getLogger("esri.core.urlUtils"),ad=dt.request,b7="esri/config: esriConfig.request.proxyUrl is not set.",ZC=/^\s*[a-z][a-z0-9-+.]*:(?![0-9])/i,KC=/^\s*http:/i,PG=/^\s*https:/i,kG=/^\s*file:/i,RG=/:\d+$/,NG=/^https?:\/\/[^/]+\.arcgis.com\/sharing(\/|$)/i,LG=new RegExp("^(([^:/?#]+):)?(//([^/?#]*))?([^?#]*)(\\?([^#]*))?(#(.*))?$"),DG=new RegExp("^((([^[:]+):)?([^@]+)@)?(\\[([^\\]]+)\\]|([^[:]*))(:([0-9]+))?$");let vp=class{constructor(t=""){this.uri=t,this.scheme=null,this.authority=null,this.path=null,this.query=null,this.fragment=null,this.user=null,this.password=null,this.host=null,this.port=null;let i=this.uri.match(LG);this.scheme=i[2]||(i[1]?"":null),this.authority=i[4]||(i[3]?"":null),this.path=i[5],this.query=i[7]||(i[6]?"":null),this.fragment=i[9]||(i[8]?"":null),this.authority!=null&&(i=this.authority.match(DG),this.user=i[3]||null,this.password=i[4]||null,this.host=i[6]||i[7],this.port=i[9]||null)}toString(){return this.uri}};const sy={},jG=new vp(dt.applicationUrl);let dr=jG;const FG=zG();let a6=FG;const l6=()=>dr,Q2e=()=>a6;function zG(){const e=dr.path,t=e.slice(0,e.lastIndexOf("/")+1);return`${`${dr.scheme}://${dr.host}${dr.port!=null?`:${dr.port}`:""}`}${t}`}function mr(e){if(!e)return null;const t={path:null,query:null},i=new vp(e),r=e.indexOf("?");return i.query===null?t.path=e:(t.path=e.slice(0,r),t.query=u6(i.query)),i.fragment&&(t.hash=i.fragment,i.query===null&&(t.path=t.path.slice(0,t.path.length-(i.fragment.length+1)))),t}function u6(e){const t=e.split("&"),i={};for(const r of t){if(!r)continue;const a=r.indexOf("=");let p,y;a<0?(p=decodeURIComponent(r),y=""):(p=decodeURIComponent(r.slice(0,a)),y=decodeURIComponent(r.slice(a+1)));let g=i[p];typeof g=="string"&&(g=i[p]=[g]),Array.isArray(g)?g.push(y):i[p]=y}return i}function G0(e,t){return e?Object.keys(e).map(i=>{const r=e[i];if(r==null)return"";const a=encodeURIComponent(i)+"=",p=t==null?void 0:t[i];return p?a+encodeURIComponent(p(r)):Array.isArray(r)?r.map(y=>he.isSerializable(y)?a+encodeURIComponent(JSON.stringify(y)):a+encodeURIComponent(y)).join("&"):he.isSerializable(r)?a+encodeURIComponent(JSON.stringify(r)):a+encodeURIComponent(r)}).filter(i=>i).join("&"):""}function YC(e=!1){let t,i=ad.proxyUrl;if(typeof e=="string"){t=HG(e);const r=Qv(e);r&&(i=r.proxyUrl)}else t=!!e;if(!i)throw OG().warn(b7),new Y("urlUtils:proxy-not-set",b7);return t&&$3()&&(i=f6(i)),mr(i)}function ewe(e,t=!1){const i=Qv(e);let r,a;if(i){const p=h6(i.proxyUrl);r=p.path,a=p.query?u6(p.query):null}else if(t){const p=YC(e);r=p.path,a=p.query}if(r){const p=mr(e);e=r+"?"+p.path;const y=G0({...a,...p.query});y&&(e=`${e}?${y}`)}return e}const Ed={path:"",query:""};function h6(e){const t=e.indexOf("?");return t!==-1?(Ed.path=e.slice(0,t),Ed.query=e.slice(t+1)):(Ed.path=e,Ed.query=null),Ed}function XC(e){return e=(e=Vg(e=XG(e=h6(e).path),!0)).toLowerCase()}function UG(e){const t={proxyUrl:e.proxyUrl,urlPrefix:XC(e.urlPrefix)},i=ad.proxyRules,r=t.urlPrefix;let a=i.length;for(let p=0;p<i.length;p++){const y=i[p].urlPrefix;if(r.indexOf(y)===0){if(r.length===y.length)return-1;a=p;break}y.indexOf(r)===0&&(a=p+1)}return i.splice(a,0,t),a}function Qv(e){const t=ad.proxyRules,i=XC(e);for(let r=0;r<t.length;r++)if(i.indexOf(t[r].urlPrefix)===0)return t[r]}function VG(e,t){if(!e||!t)return!1;e=Ug(e),t=Ug(t);const i=w7(e),r=w7(t);return i!=null&&r!=null?i.portalHostname===r.portalHostname:i==null&&r==null&&jp(e,t,!0)}function QC(e,t){return e=Ug(e),t=Ug(t),Vg(e)===Vg(t)}function Ug(e){const t=(e=Ks(e)).indexOf("/sharing");return t>0?e.slice(0,t):e.replace(/\/+$/,"")}function M3(e,t=ad.interceptors){const i=r=>r==null||r instanceof RegExp&&r.test(e)||typeof r=="string"&&e.startsWith(r);if(t){for(const r of t)if(Array.isArray(r.urls)){if(r.urls.some(i))return r}else if(i(r.urls))return r}return null}function jp(e,t,i=!1){if(!e||!t)return!1;const r=I3(e),a=I3(t);return!(!i&&r.scheme!==a.scheme)&&r.host!=null&&a.host!=null&&r.host.toLowerCase()===a.host.toLowerCase()&&r.port===a.port}function c6(e){if(typeof e=="string"){if(!vs(e))return!0;e=I3(e)}if(jp(e,dr))return!0;const t=ad.trustedServers||[];for(let i=0;i<t.length;i++){const r=GG(t[i]);for(let a=0;a<r.length;a++)if(jp(e,r[a]))return!0}return!1}function GG(e){return sy[e]||(d6(e)||vo(e)?sy[e]=[new vp(Gs(e))]:sy[e]=[new vp(`http://${e}`),new vp(`https://${e}`)]),sy[e]}function Gs(e,t=a6,i){return vo(e)?i!=null&&i.preserveProtocolRelative?e:dr.scheme==="http"&&dr.authority===gs(e).slice(2)?`http:${e}`:`https:${e}`:d6(e)?e:Fp(e[0]==="/"?KG(t):t,e)}function p6(e,t=a6,i){if(e==null||!vs(e))return e;const r=Ks(e),a=r.toLowerCase(),p=Ks(t).toLowerCase().replace(/\/+$/,""),y=i?Ks(i).toLowerCase().replace(/\/+$/,""):null;if(y&&p.indexOf(y)!==0)return e;const g=(A,P,N)=>(N=A.indexOf(P,N))===-1?A.length:N;let _=g(a,"/",a.indexOf("//")+2),T=-1;for(;a.slice(0,_+1)===p.slice(0,_)+"/"&&(T=_+1,_!==a.length);)_=g(a,"/",_+1);if(T===-1||y&&T<y.length)return e;e=r.slice(T);const I=p.slice(T-1).replaceAll(/[^/]+/g,"").length;if(I>0)for(let A=0;A<I;A++)e=`../${e}`;else e=`./${e}`;return e}function Ks(e){return e=tB(e=eB(e=QG(e=Gs(e=e.trim()))))}function Fp(...e){const t=e.filter(Sa);if(!(t!=null&&t.length))return;const i=[];if(vs(t[0])){const a=t[0],p=a.indexOf("//");p!==-1&&(i.push(a.slice(0,p+1)),JG(t[0])&&(i[0]+="/"),t[0]=a.slice(p+2))}else t[0][0]==="/"&&i.push("");const r=t.reduce((a,p)=>p?a.concat(p.split("/")):a,[]);for(let a=0;a<r.length;a++){const p=r[a];p===".."&&i.length>0&&i[i.length-1]!==".."?i.pop():(!p&&a===r.length-1||p&&(p!=="."||i.length===0))&&i.push(p)}return i.join("/")}function gs(e,t=!1){if(e==null||e2(e)||Vh(e))return null;let i=e.indexOf("://");if(i===-1&&vo(e))i=2;else{if(i===-1)return null;i+=3}const r=e.indexOf("/",i);return r!==-1&&(e=e.slice(0,r)),t&&(e=Vg(e,!0)),e}function vs(e){return vo(e)||d6(e)}function e2(e){return e!=null&&e.slice(0,5)==="blob:"}function Vh(e){return e!=null&&e.slice(0,5)==="data:"}function BG(e){const t=zp(e);return t!=null&&t.isBase64?JC(t.data):null}function twe(e){return CG(e).replaceAll("+","-").replaceAll("/","_").replace(/=+$/,"")}const qG=/^data:(.*?)(;base64)?,(.*)$/;function zp(e){const t=e.match(qG);if(!t)return null;const[,i,r,a]=t;return{mediaType:i,isBase64:!!r,data:a}}function eO(e){return e.isBase64?`data:${e.mediaType};base64,${e.data}`:`data:${e.mediaType},${e.data}`}async function iwe(e){return(await fetch(e)).blob()}function rwe(e){const t=BG(e);if(!t)return null;const i=zp(e);return new Blob([t],{type:i.mediaType})}function vo(e){return e!=null&&e[0]==="/"&&e[1]==="/"}function d6(e){return e!=null&&ZC.test(e)}function HG(e){return e!=null&&PG.test(e)||dr.scheme==="https"&&vo(e)}function WG(e){return e!=null&&KC.test(e)||dr.scheme==="http"&&vo(e)}function JG(e){return e!=null&&kG.test(e)}function f6(e){return vo(e)?`https:${e}`:e.replace(KC,"https:")}function ZG(){return dr.scheme==="http"}function $3(){return dr.scheme==="https"}function Vg(e,t=!1){return vo(e)?e.slice(2):(e=e.replace(ZC,""),t&&e.length>1&&e[0]==="/"&&e[1]==="/"&&(e=e.slice(2)),e)}function KG(e){const t=e.indexOf("//"),i=e.indexOf("/",t+2);return i===-1?e:e.slice(0,i)}function YG(e){let t=0;if(vs(e)){const r=e.indexOf("//");r!==-1&&(t=r+2)}const i=e.lastIndexOf("/");return i<t?e:e.slice(0,i+1)}function swe(e,t){if(!e)return"";const i=mr(e).path.replace(/\/+$/,""),r=i.slice(i.lastIndexOf("/")+1);if(!(t!=null&&t.length))return r;const a=new RegExp(`\\.(${t.join("|")})$`,"i");return r.replace(a,"")}function XG(e){return e.endsWith("/")?e:`${e}/`}function tO(e){return e.replace(/\/+$/,"")}function QG(e){if(/^https?:\/\//i.test(e)){const t=h6(e);e=(e=t.path.replaceAll(/\/{2,}/g,"/")).replace("/","//"),t.query&&(e+=`?${t.query}`)}return e}function eB(e){return e.replace(/^(https?:\/\/)(arcgis\.com)/i,"$1www.$2")}function tB(e){const t=ad.httpsDomains;if(!WG(e))return e;const i=e.indexOf("/",7);let r;if(r=i===-1?e:e.slice(0,i),r=r.toLowerCase().slice(7),RG.test(r)){if(!r.endsWith(":80"))return e;r=r.slice(0,-3),e=e.replace(":80","")}return ZG()&&r===dr.authority&&!NG.test(e)||($3()&&r===dr.authority||t&&t.some(a=>r===a||r.endsWith(`.${a}`))||$3()&&!Qv(e))&&(e=f6(e)),e}function E3(e,t,i){if(!(t&&i&&e&&vs(e)))return e;const r=e.indexOf("//"),a=e.indexOf("/",r+2),p=e.indexOf(":",r+2),y=Math.min(a<0?e.length:a,p<0?e.length:p);return e.slice(r+2,y).toLowerCase()!==t.toLowerCase()?e:`${e.slice(0,r+2)}${i}${e.slice(y)}`}function I3(e){return typeof e=="string"?new vp(Gs(e)):(e.scheme||(e.scheme=dr.scheme),e)}function nwe(e){return rB.test(e)}function iO(e,t){const i=mr(e),r=Object.keys(i.query||{});return r.length>0&&t&&t.warn("removeQueryParameters()",`Url query parameters are not supported, the following parameters have been removed: ${r.join(", ")}.`),i.path}function iB(e,t,i){const r=mr(e),a=r.query||{};return a[t]=String(i),`${r.path}?${G0(a)}`}function xw(e,t){if(!t)return e;const i=mr(e),r=i.query||{};for(const[p,y]of Object.entries(t))y!=null&&(r[p]=y);const a=G0(r);return a?`${i.path}?${a}`:i.path}function owe(e){if(e==null)return null;const t=e.match(rO);return t?t[2]:null}function _7(e){if(e==null)return null;const t=e.match(rO);return t?{path:t[1],extension:t[2]}:{path:e,extension:null}}async function awe(e){return typeof e=="string"?zp(e)??{data:e}:new Promise((t,i)=>{const r=new FileReader;r.readAsDataURL(e),r.onload=()=>t(zp(r.result)),r.onerror=a=>i(a)})}const rO=/([^.]*)\.([^/]*)$/,rB=/(^data:image\/svg|\.svg$)/i,sO="20250318",nO="878eb8750809e56d2a9ea9f1475c9e4e58226dad";Symbol.dispose??(Symbol.dispose=Symbol("Symbol.dispose")),Symbol.asyncDispose??(Symbol.asyncDispose=Symbol("Symbol.asyncDispose"));const sB="4.32";let Ze,y6=sB;y6="4.32.9";function lwe(e){Ze=e}function uwe(e){const t=Ze==null?void 0:Ze.findCredential(e);return t!=null&&t.token?iB(e,"token",t.token):e}ne("host-webworker")||globalThis.$arcgis||Object.defineProperty(globalThis,"$arcgis",{configurable:!1,enumerable:!0,writable:!1,value:{}}),ne("host-webworker");function ld(e,t){var r;const i=(r=t==null?void 0:t.url)==null?void 0:r.path;if(e&&i&&(e=Gs(e,i,{preserveProtocolRelative:!0}),t.portalItem&&t.readResourcePaths)){const a=p6(e,t.portalItem.itemUrl);a!=null&&nB.test(a)&&t.readResourcePaths.push(t.portalItem.resourceFromPath(a).path)}return(e=A3(e,t==null?void 0:t.portal))&&t2.test(e)?g6(e):e}function x1(e,t,i=B0.YES){var a,p;if((e=e&&t2.test(e)?aO(e):e)==null)return e;!vs(e)&&(t!=null&&t.blockedRelativeUrls)&&t.blockedRelativeUrls.push(e);let r=Gs(e);if(t){const y=((a=t.verifyItemRelativeUrls)==null?void 0:a.rootPath)||((p=t.url)==null?void 0:p.path);if(y){const g=A3(y,t.portal),_=A3(r,t.portal);r=p6(_,g,g),r!=null&&r!==_&&r!==e&&t.verifyItemRelativeUrls&&t.verifyItemRelativeUrls.writtenUrls.push(r)}}return r=oO(r,t==null?void 0:t.portal),vs(r)&&(r=Ks(r)),t!=null&&t.resources&&(t!=null&&t.portalItem)&&!vs(r)&&!Vh(r)&&i===B0.YES&&t.resources.toKeep.push({resource:t.portalItem.resourceFromPath(r),compress:!1}),r}function m6(e,t,i){return ld(e,i)}function Oh(e,t,i,r){const a=x1(e,r);a!==void 0&&(t[i]=a)}const t2=/\/items\/([^/]+)\/resources\/(.*)/,nB=/^\.\/resources\//;function oB(e){const t=(e==null?void 0:e.match(t2))??null;return(t==null?void 0:t[1])??null}function aB(e){const t=(e==null?void 0:e.match(t2))??null;if(t==null)return null;const i=t[2],r=i.lastIndexOf("/");if(r===-1){const{path:y,extension:g}=_7(i);return{prefix:null,filename:y,extension:g}}const{path:a,extension:p}=_7(i.slice(r+1));return{prefix:i.slice(0,r),filename:a,extension:p}}function oO(e,t){return t&&!t.isPortal&&t.urlKey&&t.customBaseUrl?E3(e,`${t.urlKey}.${t.customBaseUrl}`,t.portalHostname):e}function A3(e,t){if(!t||t.isPortal||!t.urlKey||!t.customBaseUrl)return e;const i=`${t.urlKey}.${t.customBaseUrl}`,r=l6();return jp(r,`${r.scheme}://${i}`)?E3(e,t.portalHostname,i):E3(e,i,t.portalHostname)}function g6(e){if(!e)return e||null;let t=e;return t&&Ze&&!Ze.findCredential(t)&&(t=WC(t),t=t.replace(/^https?:\/\/www\.arcgis\.com/,"https://cdn.arcgis.com"),t=t.replace(/^https?:\/\/devext\.arcgis\.com/,"https://cdndev.arcgis.com"),t=t.replace(/^https?:\/\/qaext\.arcgis\.com/,"https://cdnqa.arcgis.com")),t}function aO(e){if(!e)return e||null;let t=e;return t=t.replace(/^https?:\/\/cdn\.arcgis\.com/,"https://www.arcgis.com"),t=t.replace(/^https?:\/\/cdndev\.arcgis\.com/,"https://devext.arcgis.com"),t=t.replace(/^https?:\/\/cdnqa\.arcgis\.com/,"https://qaext.arcgis.com"),t&&Ze&&!Ze.findCredential(t)&&(t=WC(t)),t}var B0;(function(e){e[e.YES=0]="YES",e[e.NO=1]="NO"})(B0||(B0={}));const hwe=Object.freeze(Object.defineProperty({__proto__:null,get MarkKeep(){return B0},ensureMainOnlineDomain:oO,fromCDNUrl:aO,fromJSON:ld,itemIdFromResourceUrl:oB,prefixAndFilenameFromResourceUrl:aB,read:m6,toCDNUrl:g6,toJSON:x1,write:Oh},Symbol.toStringTag,{value:"Module"})),lO={mapserver:"MapServer",imageserver:"ImageServer",featureserver:"FeatureServer",knowledgegraphserver:"KnowledgeGraphServer",sceneserver:"SceneServer",streamserver:"StreamServer",vectortileserver:"VectorTileServer","3dtilesserver":"3DTilesServer",videoserver:"VideoServer"},uO=Object.values(lO),hO=new RegExp(`^((?:https?:)?\\/\\/\\S+?\\/rest\\/services\\/(.+?)\\/(${uO.join("|")}))(?:\\/(?:layers\\/)?(\\d+))?`,"i"),lB=new RegExp(`^((?:https?:)?\\/\\/\\S+?\\/([^/\\n]+)\\/(${uO.join("|")}))(?:\\/(?:layers\\/)?(\\d+))?`,"i"),uB=/(.*?)\/(?:layers\/)?(\d+)\/?$/i;function cwe(e){return hO.test(e)}function ud(e){if(e==null)return null;const t=mr(e),i=(t==null?void 0:t.path.match(hO))||(t==null?void 0:t.path.match(lB));if(!i)return null;const[,r,a,p,y]=i,g=a.indexOf("/");return{title:v6(g!==-1?a.slice(g+1):a),serverType:lO[p.toLowerCase()],sublayer:y!=null&&y!==""?parseInt(y,10):null,url:{path:r}}}function hB(e){const t=mr(e).path.match(uB);return t?{serviceUrl:t[1],sublayerId:Number(t[2])}:null}function v6(e){return(e=e.replaceAll(/\s*[/_]+\s*/g," "))[0].toUpperCase()+e.slice(1)}function cB(e,t){const i=[];if(e){const r=ud(e);r!=null&&r.title&&i.push(r.title)}if(t){const r=v6(t);i.push(r)}if(i.length===2){if(i[0].toLowerCase().includes(i[1].toLowerCase()))return i[0];if(i[1].toLowerCase().includes(i[0].toLowerCase()))return i[1]}return i.join(" - ")}function Gg(e){let t=gs(e,!0);return!!t&&(t=t.toLowerCase(),t.endsWith(".arcgis.com")&&(t.startsWith("services")||t.startsWith("tiles")||t.startsWith("features")))}function pB(e,t){return e&&tO(iO(e,t))}function dB(e){let{url:t}=e;if(!t)return{url:t};t=iO(t,e.logger);const i=mr(t),r=ud(i.path);let a;if(r!=null)r.sublayer!=null&&e.layer.layerId==null&&(a=r.sublayer),t=r.url.path;else if(e.nonStandardUrlAllowed){const p=hB(i.path);p!=null&&(t=p.serviceUrl,a=p.sublayerId)}return{url:tO(t),layerId:a}}function fB(e,t,i,r,a){Oh(t,r,"url",a),r.url&&e.layerId!=null&&(r.url=Fp(r.url,i,e.layerId.toString()))}function pwe(e){if(!e)return!1;const t=e.toLowerCase(),i=t.includes("/services/"),r=t.includes("/mapserver/wmsserver"),a=t.includes("/imageserver/wmsserver"),p=t.includes("/wmsserver");return i&&(r||a||p)}const yB=new Set(["elevation3d.arcgis.com","js.arcgis.com","jsdev.arcgis.com","jsqa.arcgis.com","static.arcgis.com"]);function mB(e){const t=gs(e,!0);return!!t&&t.endsWith(".arcgis.com")&&!yB.has(t)&&!e.endsWith("/sharing/rest/generateToken")}function cO(e,t){return!(!dt.apiKey||!mB(e))}function gB(e,t,i=!1,r){return new Promise((a,p)=>{if(bs(r))return void p(S7());let y=()=>{T(),p(new Error(`Unable to load ${t}`))},g=()=>{const I=e;T(),a(I)},_=()=>{if(!e)return;const I=e;T(),I.src="",p(S7())};const T=()=>{ne("esri-image-decode")||(e.removeEventListener("error",y),e.removeEventListener("load",g)),y=null,g=null,e=null,r!=null&&r.removeEventListener("abort",_),_=null,i&&URL.revokeObjectURL(t)};r!=null&&r.addEventListener("abort",_),ne("esri-image-decode")?e.decode().then(g,y):(e.addEventListener("error",y),e.addEventListener("load",g))})}function S7(){try{return new DOMException("Aborted","AbortError")}catch{const e=new Error;return e.name="AbortError",e}}const pO="Timeout exceeded";function vB(){return new Error(pO)}function dwe(e){return typeof e=="object"&&!!e&&"message"in e&&e.message===pO}function wB(e){dt.request.crossOriginNoCorsDomains||(dt.request.crossOriginNoCorsDomains={});const t=dt.request.crossOriginNoCorsDomains;for(let i of e)i=i.toLowerCase(),/^https?:\/\//.test(i)?t[gs(i)??""]=0:(t[gs("http://"+i)??""]=0,t[gs("https://"+i)??""]=0)}function bB(e){const t=dt.request.crossOriginNoCorsDomains;if(t){let i=gs(e);if(i)return i=i.toLowerCase(),!jp(i,l6())&&t[i]<Date.now()-36e5}return!1}async function _B(e){var a;const t=mr(e);e=t.path,((a=t.query)==null?void 0:a.f)==="json"&&(e+="?f=json");try{await fetch(e,{mode:"no-cors",credentials:"include"})}catch{}const i=dt.request.crossOriginNoCorsDomains,r=gs(e);i&&r&&(i[r.toLowerCase()]=Date.now())}async function kt(e,t){var N;e instanceof URL&&(e=e.toString()),(t==null?void 0:t.query)instanceof URLSearchParams&&(t.query=u6(t.query.toString().replaceAll("+"," ")));const i=Vh(e),r=e2(e);r||i||(e=Ks(e));const a={url:e,requestOptions:{...t}},p=D=>({data:D,getAllHeaders:Up,getHeader:Up,httpStatus:200,requestOptions:a.requestOptions,url:a.url}),y=M3(e,Us.internalInterceptors);if(y){const D=await T7(y,a);if(D!=null)return p(D)}let g=M3(e);if(g){const D=await T7(g,a);if(D!=null)return p(D);g.after||g.error||(g=null)}if(e=a.url,(t=a.requestOptions).responseType==="image"&&(ne("host-webworker")||ne("host-node")))throw kn("request:invalid-parameters",new Error("responseType 'image' is not supported in Web Workers or Node environment"),a);if(t.method==="head"){if(t.body)throw kn("request:invalid-parameters",new Error("body parameter cannot be set when method is 'head'"),a);if(i||r)throw kn("request:invalid-parameters",new Error("data and blob URLs are not supported for method 'head'"),a)}if(await $B(),Bg)return Bg.execute(e,t);const _=new AbortController,T=Zs(t,()=>_.abort()),I={controller:_,credential:void 0,credentialToken:void 0,fetchOptions:void 0,hasToken:!1,interceptor:g,params:a,redoRequest:!1,useIdentity:Us.useIdentity,useProxy:!1,useSSL:!1,withCredentials:!1},A=t.useRequestQueue?OB(I):O3(I),P=await A.finally(()=>T==null?void 0:T.remove());return(N=g==null?void 0:g.after)==null||N.call(g,P),P}let Bg;const Us=dt.request,dO="FormData"in globalThis,SB=new Set([499,498,403,401]),xB=new Set(["COM_0056","COM_0057","SB_0008"]),TB=[/\/arcgis\/tokens/i,/\/sharing(\/rest)?\/generatetoken/i,/\/rest\/info/i],Up=()=>null,qg=Symbol();function MB(e){const t=gs(e);t&&!kt._corsServers.includes(t)&&kt._corsServers.push(t)}function x7(e){const t=gs(e);return!t||t.endsWith(".arcgis.com")||kt._corsServers.includes(t)||c6(t)}function kn(e,t,i,r){let a="Error";const p={url:i.url,requestOptions:i.requestOptions,getAllHeaders:Up,getHeader:Up,ssl:!1};if(t instanceof Y)return t.details?(t.details=te(t.details),t.details.url=i.url,t.details.requestOptions=i.requestOptions):t.details=p,t;if(t){const y=r&&(()=>Array.from(r.headers)),g=r&&(I=>r.headers.get(I)),_=r==null?void 0:r.status,T=t.message;T&&(a=T),y&&g&&(p.getAllHeaders=y,p.getHeader=g),p.httpStatus=(t.httpCode!=null?t.httpCode:t.code)||_||0,p.subCode=t.subcode,p.messageCode=t.messageCode,typeof t.details=="string"?p.messages=[t.details]:p.messages=t.details,p.raw=qg in t?t[qg]:t}return Si(t)?Lt():new Y(e,a,p)}async function $B(){ne("host-webworker")&&!Bg&&(Bg=await fe(()=>import("./request-DxYb70Sh.js"),[]))}async function C3(){Ze||await fe(()=>import("./IdentityManager-IB1_N7Mt.js"),__vite__mapDeps([0,1]))}async function EB(e){var g;const t=e.params.url,i=e.params.requestOptions,r=e.controller.signal,a=i.body;let p=null,y=null;if(dO&&"HTMLFormElement"in globalThis&&(a instanceof FormData?p=a:a instanceof HTMLFormElement&&(p=new FormData(a))),typeof a=="string"&&(y=a),e.fetchOptions={cache:i.cacheBust?"no-cache":"default",credentials:"same-origin",headers:i.headers||{},method:i.method==="head"?"HEAD":"GET",mode:"cors",priority:Us.priority,redirect:"follow",signal:r},(p||y)&&(e.fetchOptions.body=p||y),i.authMode==="anonymous"&&(e.useIdentity=!1),e.hasToken=!!(/token=/i.test(t)||(g=i.query)!=null&&g.token||p!=null&&p.get("token")),!e.hasToken&&cO(t)&&(i.query||(i.query={}),i.query.token=dt.apiKey,e.hasToken=!0),e.useIdentity&&!e.hasToken&&!e.credentialToken&&!fO(t)&&!bs(r)){let _;i.authMode==="immediate"?(await C3(),_=await Ze.getCredential(t,{signal:r}),e.credential=_):i.authMode==="no-prompt"?(await C3(),_=await Ze.getCredential(t,{prompt:!1,signal:r}).catch(()=>{}),e.credential=_):Ze&&(_=Ze.findCredential(t)),_&&(e.credentialToken=_.token,e.useSSL=!!_.ssl)}}function fO(e){return TB.some(t=>t.test(e))}async function IB(e){let t=e.params.url;const i=e.params.requestOptions,r=e.fetchOptions??{},a=e2(t)||Vh(t),p=i.responseType||"json",y=a?0:i.timeout!=null?i.timeout:Us.timeout;let g=!1;if(!a){e.useSSL&&(t=f6(t));let P={...i.query};e.credentialToken&&(P.token=e.credentialToken);let N=G0(P);ne("esri-url-encodes-apostrophe")&&(N=N.replaceAll("'","%27"));const D=t.length+1+N.length;let z;g=i.method==="delete"||i.method==="post"||i.method==="put"||!!i.body||D>Us.maxUrlLength;const q=i.useProxy||!!Qv(t);if(q){const J=YC(t);z=J.path,!g&&z.length+1+D>Us.maxUrlLength&&(g=!0),J.query&&(P={...J.query,...P})}if(r.method==="HEAD"&&(g||q)){if(g)throw D>Us.maxUrlLength?kn("request:invalid-parameters",new Error("URL exceeds maximum length"),e.params):kn("request:invalid-parameters",new Error("cannot use POST request when method is 'head'"),e.params);if(q)throw kn("request:invalid-parameters",new Error("cannot use proxy when method is 'head'"),e.params)}if(g?(r.method=i.method==="delete"?"DELETE":i.method==="put"?"PUT":"POST",i.body?t=xw(t,P):(r.body=G0(P),r.headers||(r.headers={}),r.headers["Content-Type"]="application/x-www-form-urlencoded")):t=xw(t,P),q&&(e.useProxy=!0,t=`${z}?${t}`),P.token&&dO&&r.body instanceof FormData&&!AG(t)&&r.body.set("token",P.token),i.hasOwnProperty("withCredentials"))e.withCredentials=i.withCredentials;else if(!jp(t,l6())){if(c6(t))e.withCredentials=!0;else if(Ze){const J=Ze.findServerInfo(t);J!=null&&J.webTierAuth&&(e.withCredentials=!0)}}e.withCredentials&&(r.credentials="include",bB(t)&&await _B(g?xw(t,P):t))}let _,T,I=0,A=!1;y>0&&(I=setTimeout(()=>{A=!0,e.controller.abort()},y));try{if(i.responseType==="native-request-init")T=r,T.url=t,i.signal?T.signal=i.signal:delete T.signal;else if(i.responseType!=="image"||r.cache!=="default"||r.method!=="GET"||g||AB(i.headers)||!a&&!e.useProxy&&Us.proxyUrl&&!x7(t)){if(kt._beforeFetch&&await kt._beforeFetch(t,r),_=await fetch(t,r),kt._afterFetch&&await kt._afterFetch(_),e.useProxy||MB(t),i.responseType==="native")T=_;else if(r.method!=="HEAD")if(_.ok){switch(p){case"array-buffer":T=await _.arrayBuffer();break;case"blob":case"image":T=await _.blob();break;default:T=await _.text()}if(I&&(clearTimeout(I),I=0),p==="json"||p==="xml"||p==="document")if(T)switch(p){case"json":T=JSON.parse(T);break;case"xml":T=M7(T,"application/xml");break;case"document":T=M7(T,"text/html")}else T=null;if(T){if(p==="array-buffer"||p==="blob"){const P=_.headers.get("Content-Type");if(P&&/application\/json|text\/plain/i.test(P)&&T[p==="blob"?"size":"byteLength"]<=750)try{const N=await new Response(T).json();N.error&&(T=N)}catch{}}p==="image"&&T instanceof Blob&&(T=await $7(URL.createObjectURL(T),e,!0))}}else{T=await _.text();try{T=JSON.parse(T)}catch{}}}else T=await $7(t,e)}catch(P){if(P.name==="AbortError")throw A?vB():Lt("Request canceled");if(!(!_&&P instanceof TypeError&&Us.proxyUrl)||i.body||i.method==="delete"||i.method==="head"||i.method==="post"||i.method==="put"||e.useProxy||x7(t))throw P;e.redoRequest=!0,UG({proxyUrl:Us.proxyUrl,urlPrefix:gs(t)??""})}finally{I&&clearTimeout(I)}return[_,T]}async function T7(e,t){if(e.responseData!=null)return e.responseData;if(e.headers&&(t.requestOptions.headers={...t.requestOptions.headers,...e.headers}),e.query&&(t.requestOptions.query={...t.requestOptions.query,...e.query}),e.before){let i,r;try{r=await e.before(t)}catch(a){i=kn("request:interceptor",a,t)}if((r instanceof Error||r instanceof Y)&&(i=kn("request:interceptor",r,t)),i)throw e.error&&e.error(i),i;return r}}function AB(e){if(e){for(const t of Object.getOwnPropertyNames(e))if(e[t])return!0}return!1}function M7(e,t){let i;try{i=new DOMParser().parseFromString(e,t)}catch{}if(!i||i.getElementsByTagName("parsererror").length)throw new SyntaxError("XML Parse error");return i}kt._corsServers=["https://server.arcgisonline.com","https://services.arcgisonline.com"],kt._beforeFetch=void 0,kt._afterFetch=void 0;const CB=new Map;async function OB(e){const t=kB(e.params.url);if(!t)return O3(e);const{QueueProcessor:i}=await fe(()=>import("./QueueProcessor-DF79sej7.js"),[]);return _1(CB,t.origin,()=>{const a=t.isHosted?ne("request-queue-concurrency-hosted"):ne("request-queue-concurrency-non-hosted");return new i({concurrency:a,process:p=>{if(bs(p.params.requestOptions))throw kn("",Lt("Request canceled"),p.params);return O3(p)}})}).push(e)}async function O3(e){var p,y;let t,i;await EB(e);try{do[t,i]=await IB(e);while(!await PB(e,t,i))}catch(g){const _=kn("request:server",g,e.params,t);throw _.details.ssl=e.useSSL,(p=e.interceptor)!=null&&p.error&&e.interceptor.error(_),_}const r=e.params.url;if(i&&/\/sharing\/rest\/(accounts|portals)\/self/i.test(r)){if(!e.hasToken&&!e.credentialToken&&((y=i.user)!=null&&y.username)&&!c6(r)){const g=gs(r,!0);g&&Us.trustedServers.push(g)}Array.isArray(i.authorizedCrossOriginNoCorsDomains)&&wB(i.authorizedCrossOriginNoCorsDomains)}const a=e.credential;if(a&&Ze){const g=Ze.findServerInfo(a.server);let _=g==null?void 0:g.owningSystemUrl;if(_){_=_.replace(/\/?$/,"/sharing");const T=Ze.findCredential(_,a.userId);T&&Ze._getIdenticalSvcIdx(_,T)===-1&&T.resources.unshift(_)}}return{data:i,getAllHeaders:t?()=>Array.from(t.headers):Up,getHeader:t?g=>t.headers.get(g):Up,httpStatus:(t==null?void 0:t.status)??200,requestOptions:e.params.requestOptions,ssl:e.useSSL,url:e.params.url}}async function PB(e,t,i){var T;if(e.redoRequest)return e.redoRequest=!1,!1;const r=e.params.requestOptions;if(!t||r.responseType==="native"||r.responseType==="native-request-init")return!0;let a,p;if(i&&(i.error&&typeof i.error=="object"?a=i.error:i.status==="error"&&Array.isArray(i.messages)&&(a={...i},a[qg]=i,a.details=i.messages)),!a&&!t.ok)throw a=new Error(`Unable to load ${t.url} status: ${t.status}`),a[qg]=i,a;let y,g=null;a&&(p=Number(a.code),g=a.hasOwnProperty("subcode")?Number(a.subcode):null,y=a.messageCode,y=y==null?void 0:y.toUpperCase());const _=r.authMode;if(p===403&&(g===4||(T=a.message)!=null&&T.toLowerCase().includes("ssl")&&!a.message.toLowerCase().includes("permission"))){if(!e.useSSL)return e.useSSL=!0,!1}else if(!e.hasToken&&e.useIdentity&&(_!=="no-prompt"||p===498)&&p!==void 0&&SB.has(p)&&!fO(e.params.url)&&(p!==403||(!y||!xB.has(y))&&(g==null||g===2&&e.credentialToken))){await C3();try{const I=await Ze.getCredential(e.params.url,{error:kn("request:server",a,e.params),prompt:_!=="no-prompt",signal:e.controller.signal,token:e.credentialToken});return e.credential=I,e.credentialToken=I.token,e.useSSL=e.useSSL||I.ssl,!1}catch(I){if(_==="no-prompt")return e.credential=void 0,e.credentialToken=void 0,!1;a=I}}if(a)throw a;return!0}function $7(e,t,i=!1){const r=t.controller.signal,a=new Image;return t.withCredentials?a.crossOrigin="use-credentials":a.crossOrigin="anonymous",a.alt="",a.fetchPriority=Us.priority,a.src=e,gB(a,e,i,r)}function kB(e){let t,i;return typeof e=="string"?(t=gs(e,!0),i=Gg(e)):(t=e.origin,i=Gg(e.toString())),t==null?null:{origin:t,isHosted:i}}let Ss=class yO{constructor(){this._emitter=new yO.EventEmitter(this)}emit(t,i){return this._emitter.emit(t,i)}on(t,i){return this._emitter.on(t,i)}once(t,i){return this._emitter.once(t,i)}hasEventListener(t){return this._emitter.hasEventListener(t)}};(function(e){class t{constructor(a=null){this._target=a,this._listenersMap=null}clear(){var a;(a=this._listenersMap)==null||a.clear(),this._listenersMap=null}destroy(){this.clear()}emit(a,p){var T;let y=(T=this._listenersMap)==null?void 0:T.get(a);if(!y)return!1;const g=this._target||this;let _=!1;for(const I of y.slice()){const A="deref"in I?I.deref():I;A?A==null||A.call(g,p):_=!0}return _&&(y=y.filter(I=>!("deref"in I)||I.deref()!=null),this._listenersMap.set(a,y)),y.length>0}on(a,p){if(Array.isArray(a)){const g=a.map(_=>this.on(_,p));return y1(g)}if(a.includes(","))throw new TypeError("Evented.on() with a comma delimited string of event types is not supported");this._listenersMap??(this._listenersMap=new Map);const y=this._listenersMap.get(a)||[];return y.push(p),this._listenersMap.set(a,y),yt(()=>{var T;const g=(T=this._listenersMap)==null?void 0:T.get(a),_=(g==null?void 0:g.indexOf(p))??-1;_>=0&&g.splice(_,1)})}once(a,p){const y=this.on(a,g=>{y.remove();const _="deref"in p?p.deref():p;_==null||_.call(null,g)});return y}hasEventListener(a){var y;const p=(y=this._listenersMap)==null?void 0:y.get(a);return p!=null&&p.length>0}}e.EventEmitter=t,e.EventedMixin=r=>{let a=class extends r{constructor(){super(...arguments),this._emitter=new t}destroy(){this._emitter.clear()}emit(p,y){return this._emitter.emit(p,y)}on(p,y){return this._emitter.on(p,y)}once(p,y){return this._emitter.once(p,y)}hasEventListener(p){return this._emitter.hasEventListener(p)}};return a=v([H("esri.core.Evented")],a),a};let i=class extends Ae{constructor(){super(...arguments),this._emitter=new Ss.EventEmitter(this)}destroy(){this._emitter.clear()}emit(r,a){return this._emitter.emit(r,a)}on(r,a){return this._emitter.on(r,a)}once(r,a){return this._emitter.once(r,a)}hasEventListener(r){return this._emitter.hasEventListener(r)}};i=v([H("esri.core.Evented.EventedAccessor")],i),e.EventedAccessor=i})(Ss);var _t;(function(e){e[e.ADD=1]="ADD",e[e.REMOVE=2]="REMOVE",e[e.MOVE=4]="MOVE"})(_t||(_t={}));function w6(e){return(t,i)=>{t[i]=e}}let T1=class extends sC{notify(){const t=this._observers;if(t&&t.length>0){const i=t.slice();for(const r of i)r.onInvalidated(),r.onCommitted()}}};var da;let RB=class{constructor(){this.target=null,this.cancellable=!1,this.defaultPrevented=!1,this.item=void 0,this.type=void 0}preventDefault(){this.cancellable&&(this.defaultPrevented=!0)}reset(t){this.defaultPrevented=!1,this.item=t}},NB=class{constructor(t,i,r,a,p){this.target=t,this.added=i,this.removed=r,this.start=a,this.deleteCount=p}};const Is=new Uh(RB,void 0,e=>{e.item=null,e.target=null,e.defaultPrevented=!1,e.cancellable=!1});function E7(e){e&&typeof e=="object"&&"destroy"in e&&typeof e.destroy=="function"&&e.destroy()}function Tw(e){return e?e instanceof la?e.toArray():e.length?Array.prototype.slice.apply(e):[]:[]}function Mw(e){if(e!=null&&e.length)return e[0]}function LB(e,t,i,r){const a=Math.min(e.length-i,t.length-r);let p=0;for(;p<a&&e[i+p]===t[r+p];)p++;return p}function mO(e,t,i,r){t&&t.forEach((a,p,y)=>{e.push(a),mO(e,i.call(r,a,p,y),i,r)})}const La=new Set,Da=new Set,ja=new Set,$w=new Map;let DB=0,la=da=class extends Ss.EventedAccessor{static isCollection(e){return e!=null&&e instanceof da}constructor(e){super(e),this._chgListeners=[],this._notifications=null,this._updating=!1,this._timer=null,this._observable=new T1,this.length=0,this._items=[],Object.defineProperty(this,"uid",{value:DB++})}normalizeCtorArgs(e){return e?Array.isArray(e)||e instanceof da?{items:e}:e:{}}destroy(){this._removeAllRaw(),this._timer&&this._timer.remove(),this._emitter.destroy(),this._notifications=null}*[Symbol.iterator](){yield*this.items}get items(){return ze(this._observable),this._items}set items(e){this._emitBeforeChanges(_t.ADD)||(this._splice(0,this.length,Tw(e)),this._emitAfterChanges(_t.ADD))}hasEventListener(e){return!this.destroyed&&(e==="change"?this._chgListeners.length>0:this._emitter.hasEventListener(e))}on(e,t){if(this.destroyed)return yt();if(e==="change"){const i=this._chgListeners,r={removed:!1,callback:t};return i.push(r),this._notifications&&this._notifications.push({listeners:i.slice(),items:this._items.slice(),changes:[]}),yt(()=>{r.removed=!0,i.splice(i.indexOf(r),1)})}return this._emitter.on(e,t)}once(e,t){const i="deref"in t?()=>t.deref():()=>t,r=this.on(e,a=>{var p;(p=i())==null||p.call(null,a),r.remove()});return r}add(e,t){if(ze(this._observable),this._emitBeforeChanges(_t.ADD))return this;const i=this.getNextIndex(t??null);return this._splice(i,0,[e]),this._emitAfterChanges(_t.ADD),this}addMany(e,t=this._items.length){if(ze(this._observable),!(e!=null&&e.length))return this;if(this._emitBeforeChanges(_t.ADD))return this;const i=this.getNextIndex(t);return this._splice(i,0,Tw(e)),this._emitAfterChanges(_t.ADD),this}at(e){if(ze(this._observable),(e=Math.trunc(e)||0)<0&&(e+=this.length),!(e<0||e>=this.length))return this._items[e]}removeAll(){if(ze(this._observable),!this.length||this._emitBeforeChanges(_t.REMOVE))return[];const e=this._removeAllRaw();return this._emitAfterChanges(_t.REMOVE),e}_removeAllRaw(){return this.length===0?[]:this._splice(0,this.length)||[]}clone(){return ze(this._observable),this._createNewInstance({items:this._items.map(te)})}concat(...e){ze(this._observable);const t=e.map(Tw);return this._createNewInstance({items:this._items.concat(...t)})}drain(e,t){if(ze(this._observable),!this.length||this._emitBeforeChanges(_t.REMOVE))return;const i=this._splice(0,this.length),r=i.length;for(let a=0;a<r;a++)e.call(t,i[a],a,i);this._emitAfterChanges(_t.REMOVE)}destroyAll(){this.drain(E7)}destroyMany(e){const t=this.removeMany(e);return t.forEach(E7),t}every(e,t){return ze(this._observable),this._items.every(e,t)}filter(e,t){ze(this._observable);const i=arguments.length===2?this._items.filter(e,t):this._items.filter(e);return this._createNewInstance({items:i})}find(e,t){return ze(this._observable),this._items.find(e,t)}findIndex(e,t){return ze(this._observable),this._items.findIndex(e,t)}flatten(e,t){ze(this._observable);const i=[];return mO(i,this,e,t),new da(i)}forEach(e,t){return ze(this._observable),this._items.forEach(e,t)}getItemAt(e){return ze(this._observable),this._items[e]}getNextIndex(e){ze(this._observable);const t=this.length;return(e=e??t)<0?e=0:e>t&&(e=t),e}includes(e,t=0){return ze(this._observable),this._items.includes(e,t)}indexOf(e,t=0){return ze(this._observable),this._items.indexOf(e,t)}join(e=","){return ze(this._observable),this._items.join(e)}lastIndexOf(e,t=this.length-1){return ze(this._observable),this._items.lastIndexOf(e,t)}map(e,t){ze(this._observable);const i=this._items.map(e,t);return new da({items:i})}reorder(e,t=this.length-1){ze(this._observable);const i=this.indexOf(e);if(i!==-1){if(t<0?t=0:t>=this.length&&(t=this.length-1),i!==t){if(this._emitBeforeChanges(_t.MOVE))return e;this._splice(i,1),this._splice(t,0,[e]),this._emitAfterChanges(_t.MOVE)}return e}}pop(){if(ze(this._observable),!this.length||this._emitBeforeChanges(_t.REMOVE))return;const e=Mw(this._splice(this.length-1,1));return this._emitAfterChanges(_t.REMOVE),e}push(...e){return ze(this._observable),this._emitBeforeChanges(_t.ADD)||(this._splice(this.length,0,e),this._emitAfterChanges(_t.ADD)),this.length}reduce(e,t){ze(this._observable);const i=this._items;return arguments.length===2?i.reduce(e,t):i.reduce(e)}reduceRight(e,t){ze(this._observable);const i=this._items;return arguments.length===2?i.reduceRight(e,t):i.reduceRight(e)}remove(e){return ze(this._observable),this.removeAt(this.indexOf(e))}removeAt(e){if(ze(this._observable),e<0||e>=this.length||this._emitBeforeChanges(_t.REMOVE))return;const t=Mw(this._splice(e,1));return this._emitAfterChanges(_t.REMOVE),t}removeMany(e){if(ze(this._observable),!(e!=null&&e.length)||this._emitBeforeChanges(_t.REMOVE))return[];const t=e instanceof da?e.toArray():e,i=this._items,r=[],a=t.length;for(let p=0;p<a;p++){const y=t[p],g=i.indexOf(y);if(g>-1){const _=1+LB(t,i,p+1,g+1),T=this._splice(g,_);T&&T.length>0&&r.push.apply(r,T),p+=_-1}}return this._emitAfterChanges(_t.REMOVE),r}reverse(){if(ze(this._observable),this._emitBeforeChanges(_t.MOVE))return this;const e=this._splice(0,this.length);return e&&(e.reverse(),this._splice(0,0,e)),this._emitAfterChanges(_t.MOVE),this}shift(){if(ze(this._observable),!this.length||this._emitBeforeChanges(_t.REMOVE))return;const e=Mw(this._splice(0,1));return this._emitAfterChanges(_t.REMOVE),e}slice(e=0,t=this.length){return ze(this._observable),this._createNewInstance({items:this._items.slice(e,t)})}some(e,t){return ze(this._observable),this._items.some(e,t)}sort(e){if(ze(this._observable),!this.length||this._emitBeforeChanges(_t.MOVE)||!this._requiresSort(e))return this;const t=this._splice(0,this.length);return arguments.length?t.sort(e):t.sort(),this._splice(0,0,t),this._emitAfterChanges(_t.MOVE),this}_requiresSort(e=(t,i)=>t===i?0:t<i?-1:1){const t=this.length-1;for(let i=0;i<t;i++)if(e(this.items[i],this.items[i+1])>0)return!0;return!1}splice(e,t,...i){ze(this._observable);const r=(t?_t.REMOVE:0)|(i.length?_t.ADD:0);if(this._emitBeforeChanges(r))return[];const a=this._splice(e,t,i)||[];return this._emitAfterChanges(r),a}toArray(){return ze(this._observable),this._items.slice()}toJSON(){return ze(this._observable),this.toArray()}toLocaleString(){return ze(this._observable),this._items.toLocaleString()}toString(){return ze(this._observable),this._items.toString()}unshift(...e){return ze(this._observable),!e.length||this._emitBeforeChanges(_t.ADD)||(this._splice(0,0,e),this._emitAfterChanges(_t.ADD)),this.length}_createNewInstance(e){return new this.constructor(e)}_splice(e,t,i){const r=this._items,a=this.itemType;let p,y;if(!this._notifications&&this.hasEventListener("change")&&(this._notifications=[{listeners:this._chgListeners.slice(),items:this._items.slice(),changes:[]}],this._timer&&this._timer.remove(),this._updating=!0,this._timer=b1(()=>this._dispatchChange())),e<0&&(e+=this.length),t){if(y=r.splice(e,t),this.hasEventListener("before-remove")){const g=Is.acquire();g.target=this,g.cancellable=!0;for(let _=0,T=y.length;_<T;_++)p=y[_],g.reset(p),this.emit("before-remove",g),g.defaultPrevented&&(y.splice(_,1),r.splice(e,0,p),e+=1,_-=1,T-=1);Is.release(g)}if(this.length=this._items.length,this.hasEventListener("after-remove")){const g=Is.acquire();g.target=this,g.cancellable=!1;const _=y.length;for(let T=0;T<_;T++)g.reset(y[T]),this.emit("after-remove",g);Is.release(g)}}if(i!=null&&i.length){if(a){const I=[];for(const A of i){const P=a.ensureType(A);P==null&&A!=null||I.push(P)}i=I}const g=this.hasEventListener("before-add"),_=this.hasEventListener("after-add"),T=e===this.length;if(g||_){const I=Is.acquire();I.target=this,I.cancellable=!0;const A=Is.acquire();A.target=this,A.cancellable=!1;for(const P of i)g?(I.reset(P),this.emit("before-add",I),I.defaultPrevented||(T?r.push(P):r.splice(e++,0,P),this._set("length",r.length),_&&(A.reset(P),this.emit("after-add",A)))):(T?r.push(P):r.splice(e++,0,P),this._set("length",r.length),A.reset(P),this.emit("after-add",A));Is.release(A),Is.release(I)}else{if(T)for(const I of i)r.push(I);else r.splice(e,0,...i);this._set("length",r.length)}}if((i!=null&&i.length||y!=null&&y.length)&&this._notifyChangeEvent(i,y),this.hasEventListener("after-splice")){const g=new NB(this,i,y,e,t);this.emit("after-splice",g)}return y}_emitBeforeChanges(e){let t=!1;if(this.hasEventListener("before-changes")){const i=Is.acquire();i.target=this,i.cancellable=!0,i.type=e,this.emit("before-changes",i),t=i.defaultPrevented,Is.release(i)}return t}_emitAfterChanges(e){if(this.hasEventListener("after-changes")){const t=Is.acquire();t.target=this,t.cancellable=!1,t.type=e,this.emit("after-changes",t),Is.release(t)}this._observable.notify()}_notifyChangeEvent(e,t){this.hasEventListener("change")&&this._notifications&&this._notifications[this._notifications.length-1].changes.push({added:e,removed:t})}get updating(){return this._updating}_dispatchChange(){if(this._timer&&(this._timer.remove(),this._timer=null),this._updating=!1,!this._notifications)return;const e=this._notifications;this._notifications=null;for(const t of e){const i=t.changes;La.clear(),Da.clear(),ja.clear();for(const{added:_,removed:T}of i){if(_)if(ja.size===0&&Da.size===0)for(const I of _)La.add(I);else for(const I of _)Da.has(I)?(ja.add(I),Da.delete(I)):ja.has(I)||La.add(I);if(T)if(ja.size===0&&La.size===0)for(const I of T)Da.add(I);else for(const I of T)La.has(I)?La.delete(I):(ja.delete(I),Da.add(I))}const r=$r.acquire();La.forEach(_=>{r.push(_)});const a=$r.acquire();Da.forEach(_=>{a.push(_)});const p=this._items,y=t.items,g=$r.acquire();if(ja.forEach(_=>{y.indexOf(_)!==p.indexOf(_)&&g.push(_)}),t.listeners&&(r.length||a.length||g.length)){const _={target:this,added:r,removed:a,moved:g},T=t.listeners.length;for(let I=0;I<T;I++){const A=t.listeners[I];A.removed||A.callback.call(this,_)}}$r.release(r),$r.release(a),$r.release(g)}La.clear(),Da.clear(),ja.clear()}};la.ofType=e=>{if(!e)return da;if($w.has(e))return $w.get(e);let t=null;if(typeof e=="function")t=e.prototype.declaredClass;else if(e.base)t=e.base.prototype.declaredClass;else for(const r in e.typeMap){const a=e.typeMap[r].prototype.declaredClass;t?t+=` | ${a}`:t=a}let i=class extends da{};return v([w6({Type:e,ensureType:typeof e=="function"?di(e):Nn(e)})],i.prototype,"itemType",void 0),i=v([H(`esri.core.Collection<${t}>`)],i),$w.set(e,i),i},v([S()],la.prototype,"_updating",void 0),v([S()],la.prototype,"length",void 0),v([S()],la.prototype,"items",null),v([S({readOnly:!0})],la.prototype,"updating",null),la=da=v([H("esri.core.Collection")],la);const xe=la;function Ta(e,t,i=xe){return t||(t=new i),t===e||(t.removeAll(),jB(e)?t.addMany(e):e&&t.add(e)),t}function gO(e){return e}function jB(e){return e&&(Array.isArray(e)||"items"in e&&Array.isArray(e.items))}var Sl;(function(e){e[e.PENDING=0]="PENDING",e[e.RESOLVED=1]="RESOLVED",e[e.REJECTED=2]="REJECTED"})(Sl||(Sl={}));let FB=class{constructor(){this._resolver=_s(),this._status=Sl.PENDING,this._resolvingPromises=[],this._resolver.promise.then(()=>{this._status=Sl.RESOLVED,this._cleanUp()},()=>{this._status=Sl.REJECTED,this._cleanUp()}),this.promise=this._resolver.promise}destroy(){this._cleanUp()}addResolvingPromise(t){this._resolvingPromises.push(t),this._tryResolve()}isResolved(){return this._status===Sl.RESOLVED}isRejected(){return this._status===Sl.REJECTED}isFulfilled(){return this._status!==Sl.PENDING}abort(){this._resolver.reject(Lt())}_cleanUp(){this._allPromise=null,this._resolvingPromises=null}_tryResolve(){if(this.isFulfilled())return;const t=_s(),i=[...this._resolvingPromises,t.promise],r=this._allPromise=Promise.all(i);r.then(()=>{this.isFulfilled()||this._allPromise!==r||this._resolver.resolve()},a=>{this.isFulfilled()||this._allPromise!==r||Si(a)||this._resolver.reject(a)}),t.resolve()}};const vO=e=>{let t=class extends e{constructor(...i){super(...i),this._promiseProps=new FB,this.addResolvingPromise(Promise.resolve())}destroy(){this._promiseProps.destroy()}isResolved(){return this._promiseProps.isResolved()}isRejected(){return this._promiseProps.isRejected()}isFulfilled(){return this._promiseProps.isFulfilled()}when(i,r){return this._promiseProps.promise.then(()=>this).then(i,r)}catch(i){return this.when(null,i)}addResolvingPromise(i){i&&!this._promiseProps.isFulfilled()&&this._promiseProps.addResolvingPromise("_promiseProps"in i?i.when():i)}};return t=v([H("esri.core.Promise")],t),t};let Qd=class extends vO(Ae){};Qd=v([H("esri.core.Promise")],Qd),function(e){e.EsriPromiseMixin=vO}(Qd||(Qd={}));const hd=Qd,zB="not-loaded",UB="loading",VB="failed",I7="loaded",wO=e=>{let t=class extends e{constructor(...i){super(...i),this._loadController=null,this.loadError=null,this.loadStatus="not-loaded",this._set("loadWarnings",[]),this.addResolvingPromise(new Promise(r=>{const a=this.load.bind(this);this.load=p=>{const y=new Promise((g,_)=>{const T=X4(p,_);this.destroyed&&_(new Y("load:instance-destroyed",`Instance of '${this.declaredClass||this.constructor.name}' is already destroyed`,{instance:this})),this.when(g,_).finally(()=>{T&&T.remove()})});if(this.loadStatus===zB){this._set("loadStatus",UB);const g=this._loadController=new AbortController;a({signal:g.signal})}return r(),y}})),this.when(()=>{this._set("loadStatus",I7),this._loadController=null},r=>{this._set("loadStatus",VB),this._set("loadError",r),this._loadController=null})}destroy(){this._loadController&&(this._loadController=Lp(this._loadController),this._promiseProps.abort()),this._set("loadError",null),this._set("loadWarnings",[])}get loaded(){return this.loadStatus===I7}get loadWarnings(){return this._get("loadWarnings")}load(){return null}cancelLoad(){var i;return this.isFulfilled()||(this._set("loadError",new Y("load:cancelled","Cancelled")),(i=this._loadController)==null||i.abort(),this._promiseProps.abort()),this}};return v([S({readOnly:!0})],t.prototype,"loaded",null),v([S({readOnly:!0})],t.prototype,"loadError",void 0),v([S({clonable:!1})],t.prototype,"loadStatus",void 0),v([S({type:[Ys],readOnly:!0})],t.prototype,"loadWarnings",null),t=v([H("esri.core.Loadable")],t),t};let ef=class extends wO(hd){};ef=v([H("esri.core.Loadable")],ef),function(e){function t(i){return!(!i||!i.load)}e.LoadableMixin=wO,e.isLoadable=t}(ef||(ef={}));const Xs=ef;function bwe(e,t,i){return Q4(e.map((r,a)=>t.apply(i,[r,a])))}async function GB(e,t,i){return(await Q4(e.map((r,a)=>t.apply(i,[r,a])))).map(r=>r.value)}function b6(e){return{ok:!0,value:e}}function _6(e){return{ok:!1,error:e}}function BB(e){return e!=null&&e.ok===!0?e.value:null}function qB(e){return e!=null&&e.ok===!1?e.error:null}async function i2(e){if(e==null)return{ok:!1,error:new Error("no promise provided")};try{return b6(await e)}catch(t){return _6(t)}}async function HB(e){try{return b6(await e)}catch(t){return po(t),_6(t)}}function M1(e,t){return new Ja(e,t)}let Ja=class extends Ae{get value(){return BB(this._result)}get error(){return qB(this._result)}get finished(){return this._result!=null}constructor(t,i){super({}),this._result=null,this._abortHandle=null,this.abort=()=>{this._abortController=Lp(this._abortController)},this.remove=this.abort,this._abortController=new AbortController;const{signal:r}=this._abortController;this.promise=t(r),this.promise.then(a=>{this._result=b6(a),this._cleanup()},a=>{this._result=_6(a),this._cleanup()}),this._abortHandle=Zs(i,this.abort)}normalizeCtorArgs(){return{}}destroy(){this.abort()}_cleanup(){this._abortHandle=Wt(this._abortHandle),this._abortController=null}};v([S()],Ja.prototype,"value",null),v([S()],Ja.prototype,"error",null),v([S()],Ja.prototype,"finished",null),v([S()],Ja.prototype,"promise",void 0),v([S()],Ja.prototype,"_result",void 0),Ja=v([H("esri.core.asyncUtils.ReactiveTask")],Ja);async function bO(e,t){return await e.load(),WB(e,t)}async function WB(e,t){const i=[],r=(...p)=>{for(const y of p)y!=null&&(Array.isArray(y)?r(...y):xe.isCollection(y)?y.forEach(g=>r(g)):Xs.isLoadable(y)&&i.push(y))};t(r);let a=null;if(await GB(i,async p=>{const y=await i2(JB(p)?p.loadAll():p.load());y.ok!==!1||a||(a=y)}),a)throw a.error;return e}function JB(e){return"loadAll"in e&&typeof e.loadAll=="function"}function be(e,t,i){let r,a;return t===void 0?(a=e,r=[void 0]):typeof t!="string"?(a=e,r=[void 0],i=t):(a=t,r=Array.isArray(e)?e:[e]),(p,y)=>{const g=p.constructor.prototype;for(const _ of r){const T=AC(p,_,a);T.write&&typeof T.write=="object"||(T.write={}),i&&(T.write.target=i),T.write.writer=g[y]}}}let rt=class{constructor(t,i={ignoreUnknown:!1,useNumericKeys:!1}){this._jsonToAPI=t,this._options=i,this.apiValues=[],this.jsonValues=[],this._apiToJSON=ZB(t),this.apiValues=A7(this._apiToJSON),this.jsonValues=A7(this._jsonToAPI),this.read=r=>this.fromJSON(r),this.write=(r,a,p)=>{const y=this.toJSON(r);y!==void 0&&Bi(p,y,a)},this.write.isJSONMapWriter=!0}toJSON(t){if(t==null)return null;if(this._apiToJSON.hasOwnProperty(t)){const i=this._apiToJSON[t];return this._options.useNumericKeys?+i:i}return this._options.ignoreUnknown?null:t}fromJSON(t){return t!=null&&this._jsonToAPI.hasOwnProperty(t)?this._jsonToAPI[t]:this._options.ignoreUnknown?void 0:t}};function ZB(e){const t={};for(const i in e)t[e[i]]=i;return t}function A7(e){const t=[];for(const i in e)t.push(i);return t.sort(),t}function qi(){return function(e,t){return new rt(e,{ignoreUnknown:!0,...t})}}let S6=class{constructor(t,i,r,a,p,y){this.semiMajorAxis=t,this.flattening=i,this.outerAtmosphereRimWidth=r,this.atmosphereHeight=a,this.scaleHeight=p;const g=1-this.flattening;this.semiMinorAxis=this.semiMajorAxis*g,this.halfSemiMajorAxis=this.semiMajorAxis/2,this.halfCircumference=Math.PI*this.semiMajorAxis,this.metersPerDegree=this.halfCircumference/180,this.inverseFlattening=1/(1-this.flattening)-1,this.eccentricitySquared=y||2*this.flattening-this.flattening*this.flattening,this.meanRadiusSemiAxes=(2*this.semiMajorAxis+this.semiMinorAxis)/3}get radius(){return this.semiMajorAxis}};const Xt=new S6(6378137,1/298.257223563,3e5,1e5,.085,.006694379990137799),go=new S6(3396190,1/169.8944472236118,23e4,6e4,.111),Wl=new S6(1737400,0,0,0,0);function ti(e){if(!dt.assetsPath)throw ye.getLogger("esri.assets").errorOnce("The API assets location needs to be set using config.assetsPath. More information: https://arcg.is/1OzLe50"),new Y("assets:path-not-set","config.assetsPath is not set");return Fp(dt.assetsPath,e)}let Ew,Q=null;function x6(){return!!Q}function KB(){return!!ne("esri-wasm")}function _O(){return Ew||(Ew=fe(()=>import("./pe-wasm-C09rJv_d.js"),[]).then(e=>e.p).then(({default:e})=>e({locateFile:t=>ti(`esri/geometry/support/${t}`)})).then(e=>{TO(e)}),Ew)}var P3,qt;(function(e){function t(p,y,g){Q.ensureCache.prepare();const _=ph(g),T=g===_,I=Q.ensureFloat64(_),A=Q._pe_geog_to_proj(Q.getPointer(p),y,I);return A&&Il(g,y,I,T),A}function i(p,y,g,_){switch(_){case qt.PE_TRANSFORM_P_TO_G:return r(p,y,g);case qt.PE_TRANSFORM_G_TO_P:return t(p,y,g)}return 0}function r(p,y,g){return a(p,y,g,0)}function a(p,y,g,_){Q.ensureCache.prepare();const T=ph(g),I=g===T,A=Q.ensureFloat64(T),P=Q._pe_proj_to_geog_center(Q.getPointer(p),y,A,_);return P&&Il(g,y,A,I),P}e.geogToProj=t,e.projGeog=i,e.projToGeog=r,e.projToGeogCenter=a})(P3||(P3={})),function(e){function t(){e.PE_BUFFER_MAX=Q.PeDefs.prototype.PE_BUFFER_MAX,e.PE_NAME_MAX=Q.PeDefs.prototype.PE_NAME_MAX,e.PE_MGRS_MAX=Q.PeDefs.prototype.PE_MGRS_MAX,e.PE_USNG_MAX=Q.PeDefs.prototype.PE_USNG_MAX,e.PE_DD_MAX=Q.PeDefs.prototype.PE_DD_MAX,e.PE_DDM_MAX=Q.PeDefs.prototype.PE_DDM_MAX,e.PE_DMS_MAX=Q.PeDefs.prototype.PE_DMS_MAX,e.PE_UTM_MAX=Q.PeDefs.prototype.PE_UTM_MAX,e.PE_PARM_MAX=Q.PeDefs.prototype.PE_PARM_MAX,e.PE_TYPE_NONE=Q.PeDefs.prototype.PE_TYPE_NONE,e.PE_TYPE_GEOGCS=Q.PeDefs.prototype.PE_TYPE_GEOGCS,e.PE_TYPE_PROJCS=Q.PeDefs.prototype.PE_TYPE_PROJCS,e.PE_TYPE_GEOGTRAN=Q.PeDefs.prototype.PE_TYPE_GEOGTRAN,e.PE_TYPE_COORDSYS=Q.PeDefs.prototype.PE_TYPE_COORDSYS,e.PE_TYPE_UNIT=Q.PeDefs.prototype.PE_TYPE_UNIT,e.PE_TYPE_LINUNIT=Q.PeDefs.prototype.PE_TYPE_LINUNIT,e.PE_STR_OPTS_NONE=Q.PeDefs.prototype.PE_STR_OPTS_NONE,e.PE_STR_AUTH_NONE=Q.PeDefs.prototype.PE_STR_AUTH_NONE,e.PE_STR_AUTH_TOP=Q.PeDefs.prototype.PE_STR_AUTH_TOP,e.PE_STR_NAME_CANON=Q.PeDefs.prototype.PE_STR_NAME_CANON,e.PE_STR_FMT_WKT=Q.PeDefs.prototype.PE_STR_FMT_WKT,e.PE_STR_FMT_WKT2=Q.PeDefs.prototype.PE_STR_FMT_WKT2,e.PE_PARM_X0=Q.PeDefs.prototype.PE_PARM_X0,e.PE_PARM_ND=Q.PeDefs.prototype.PE_PARM_ND,e.PE_TRANSFORM_1_TO_2=Q.PeDefs.prototype.PE_TRANSFORM_1_TO_2,e.PE_TRANSFORM_2_TO_1=Q.PeDefs.prototype.PE_TRANSFORM_2_TO_1,e.PE_TRANSFORM_P_TO_G=Q.PeDefs.prototype.PE_TRANSFORM_P_TO_G,e.PE_TRANSFORM_G_TO_P=Q.PeDefs.prototype.PE_TRANSFORM_G_TO_P,e.PE_HORIZON_RECT=Q.PeDefs.prototype.PE_HORIZON_RECT,e.PE_HORIZON_POLY=Q.PeDefs.prototype.PE_HORIZON_POLY,e.PE_HORIZON_LINE=Q.PeDefs.prototype.PE_HORIZON_LINE,e.PE_HORIZON_DELTA=Q.PeDefs.prototype.PE_HORIZON_DELTA}e.init=t}(qt||(qt={}));let SO=null;var k3;(function(e){const t={},i={},r=N=>{const D=N.getType();switch(D){case qt.PE_TYPE_GEOGCS:N=Q.castObject(N,Q.PeGeogcs);break;case qt.PE_TYPE_PROJCS:N=Q.castObject(N,Q.PeProjcs);break;case qt.PE_TYPE_GEOGTRAN:N=Q.castObject(N,Q.PeGeogtran);break;default:D&qt.PE_TYPE_UNIT&&(N=Q.castObject(N,Q.PeUnit))}return N};function a(){Q.PeFactory.prototype.initialize(null)}function p(N){return y(qt.PE_TYPE_COORDSYS,N)}function y(N,D){let z=null,q=t[N];if(q||(q={},t[N]=q),q.hasOwnProperty(String(D))&&(z=q[D],Q.compare(z,Q.NULL)&&(z=null)),!z){const J=Q.PeFactory.prototype.factoryByType(N,D);Q.compare(J,Q.NULL)||(z=r(J),q[D]=z)}return z}function g(N,D){let z=null,q=i[N];if(q||(q={},i[N]=q),q.hasOwnProperty(D)&&(z=q[D],Q.compare(z,Q.NULL)&&(z=null)),!z){const J=Q.PeFactory.prototype.fromString(N,D);Q.compare(J,Q.NULL)||(z=r(J),q[D]=z)}return z}function _(N){return y(qt.PE_TYPE_GEOGCS,N)}function T(N){return y(qt.PE_TYPE_GEOGTRAN,N)}function I(N){return Q.PeFactory.prototype.getCode(N)}function A(N){return y(qt.PE_TYPE_PROJCS,N)}function P(N){return y(qt.PE_TYPE_UNIT,N)}e.initialize=a,e.coordsys=p,e.factoryByType=y,e.fromString=g,e.geogcs=_,e.geogtran=T,e.getCode=I,e.projcs=A,e.unit=P})(k3||(k3={}));let xO=null;var Hg,R3,N3,L3,D3,j3,Wg,F3,Jg,Zg,z3;function TO(e){function t(p,y,g){p[y]=g(p[y])}Q=e,qt.init(),Hg.init(),Wg.init(),Jg.init(),Zg.init(),SO=class extends Q.PeDouble{constructor(p=NaN){super(p)}destroy(){Q.destroy(this)}[Symbol.dispose](){this.destroy()}},xO=class extends Q.PeGCSExtent{destroy(){Q.destroy(this)}[Symbol.dispose](){this.destroy()}};const i=[Q.PeAngunit,Q.PeDatum,Q.PeGeogcs,Q.PeGeogtran,Q.PeObject,Q.PeParameter,Q.PePrimem,Q.PeProjcs,Q.PeSpheroid,Q.PeUnit];for(const p of i)t(p.prototype,"getName",y=>function(){return y.call(this,new Array(qt.PE_NAME_MAX))});for(const p of[Q.PeGeogtran,Q.PeProjcs])t(p.prototype,"getParameters",y=>function(){const g=new Array(qt.PE_PARM_MAX);let _=y.call(this);for(let T=0;T<g.length;T++){const I=Q.getValue(_,"*");g[T]=I?Q.wrapPointer(I,Q.PeParameter):null,_+=Int32Array.BYTES_PER_ELEMENT}return g});t(Q.PeHorizon.prototype,"getCoord",p=>function(y=!1){const g=this.getSize();if(!g)return null;const _=[];return Il(_,g,p.call(this),y),_}),t(Q.PeGTlistExtendedEntry.prototype,"getEntries",p=>{const y=Q._pe_getPeGTlistExtendedGTsSize();return function(){let g=null;const _=p.call(this);if(!Q.compare(_,Q.NULL)){g=[_];const T=this.getSteps();if(T>1){const I=Q.getPointer(_);for(let A=1;A<T;A++)g.push(Q.wrapPointer(I+y*A,Q.PeGTlistExtendedGTs))}}return g}});const r=Q._pe_getPeHorizonSize(),a=p=>function(){let y=this._cache;if(y||(y=new Map,this._cache=y),y.has(p))return y.get(p);let g=null;const _=p.call(this);if(!Q.compare(_,Q.NULL)){g=[_];const T=_.getNump();if(T>1){const I=Q.getPointer(_);for(let A=1;A<T;A++)g.push(Q.wrapPointer(I+r*A,Q.PeHorizon))}}return y.set(p,g),g};t(Q.PeProjcs.prototype,"horizonGcsGenerate",a),t(Q.PeProjcs.prototype,"horizonPcsGenerate",a),Q.PeObject.prototype.toString=function(p=qt.PE_STR_OPTS_NONE){Q.ensureCache.prepare();const y=Q.getPointer(this),g=Q.ensureInt8(new Array(qt.PE_BUFFER_MAX));return Q.UTF8ToString(Q._pe_object_to_string_ext(y,p,g))},Q.PeGeogcs.prototype.destroy=function(){this.Delete(),$n(this),this.ptr=0},Q.PeGeogcs.prototype[Symbol.dispose]=function(){this.destroy()},Q.PeProjcs.prototype.destroy=function(){this.Delete(),$n(this),this.ptr=0},Q.PeProjcs.prototype[Symbol.dispose]=function(){this.destroy()}}function $n(e){if(!e)return;const t=Q.getClass(e);if(!t)return;const i=Q.getCache(t);if(!i)return;const r=Q.getPointer(e);r&&delete i[r]}function ny(e,t){const i=[],r=new Array(t);for(let a=0;a<e;a++)i.push(Q.ensureInt8(r));return i}function ph(e){return ArrayBuffer.isView(e)?e:Array.isArray(e[0])?e.flat():e}function Il(e,t,i,r=!1){if(r)for(let a=0;a<2*t;a++)e[a]=Q.getValue(i+a*Float64Array.BYTES_PER_ELEMENT,"double");else{const a=e.length===0;for(let p=0;p<t;p++)a&&(e[p]=new Array(2)),e[p][0]=Q.getValue(i,"double"),e[p][1]=Q.getValue(i+Float64Array.BYTES_PER_ELEMENT,"double"),i+=2*Float64Array.BYTES_PER_ELEMENT}}(function(e){let t;function i(){e.PE_GTLIST_OPTS_COMMON=Q.PeGTlistExtended.prototype.PE_GTLIST_OPTS_COMMON,t=Q._pe_getPeGTlistExtendedEntrySize()}function r(a,p,y,g,_,T){let I=null;const A=new Q.PeInteger(T);try{const P=Q.PeGTlistExtended.prototype.getGTlist(a,p,y,g,_,A);if((T=A.val)&&(I=[P],T>1)){const N=Q.getPointer(P);for(let D=1;D<T;D++)I.push(Q.wrapPointer(N+t*D,Q.PeGTlistExtendedEntry))}}finally{Q.destroy(A)}return I}e.init=i,e.getGTlist=r})(Hg||(Hg={})),function(e){function t(i){if(i!=null&&i.length){for(const r of i)$n(r),r.getEntries().forEach(a=>{$n(a);const p=a.getGeogtran();$n(p),p.getParameters().forEach($n),[p.getGeogcs1(),p.getGeogcs2()].forEach(y=>{$n(y);const g=y.getDatum();$n(g),$n(g.getSpheroid()),$n(y.getPrimem()),$n(y.getUnit())})});Q.PeGTlistExtendedEntry.prototype.Delete(i[0])}}e.destroy=t}(R3||(R3={})),function(e){function t(i,r,a,p,y){Q.ensureCache.prepare();const g=ph(a),_=a===g,T=Q.ensureFloat64(g);let I=0;p&&(I=Q.ensureFloat64(p));const A=Q._pe_geog_to_geog(Q.getPointer(i),r,T,I,y);return A&&Il(a,r,T,_),A}e.geogToGeog=t}(N3||(N3={})),function(e){function t(p,y,g,_,T,I,A,P){Q.PeLineType.prototype.geodesic_coordinate(p,y,g,_,T,I,A,P)}function i(p,y,g,_,T,I,A,P,N){Q.PeLineType.prototype.geodetic_coordinate(p,y,g,_,T,I,A,P,N)}function r(p,y,g,_,T,I,A,P,N,D){Q.PeLineType.prototype.geodetic_distance(p,y,g,_,T,I,A,P,N,D)}function a(p,y,g,_,T,I,A,P,N){Q.PeLineType.prototype.great_elliptic_distance(p,y,g,_,T,I,A,P,N)}e.geodesicCoordinate=t,e.geodeticCoordinate=i,e.geodeticDistance=r,e.greatEllipticDistance=a}(L3||(L3={})),function(e){function t(y,g){return Q.PeMath.prototype.phi_to_eta(y,g)}function i(y,g){return Q.PeMath.prototype.eta_to_phi(y,g)}function r(y,g){return Q.PeMath.prototype.phi_to_phig(y,g)}function a(y,g,_){return Q.PeMath.prototype.q(y,g,_)}function p(y,g){return Q.PeMath.prototype.q90(y,g)}e.phiToEta=t,e.etaToPhi=i,e.phiToPhig=r,e.q=a,e.q90=p}(D3||(D3={})),function(e){const t=(T,I,A,P,N,D)=>{let z,q;switch(Q.ensureCache.prepare(),T){case"dd":z=Q._pe_geog_to_dd,q=qt.PE_DD_MAX;break;case"ddm":z=Q._pe_geog_to_ddm,q=qt.PE_DDM_MAX;break;case"dms":z=Q._pe_geog_to_dms,q=qt.PE_DMS_MAX}let J=0;I&&(J=Q.getPointer(I));const ee=ph(P),X=Q.ensureFloat64(ee),ie=ny(A,q),oe=z(J,A,X,N,Q.ensureInt32(ie));if(oe)for(let ue=0;ue<A;ue++)D[ue]=Q.UTF8ToString(ie[ue]);return oe},i=(T,I,A,P,N)=>{let D;switch(Q.ensureCache.prepare(),T){case"dd":D=Q._pe_dd_to_geog;break;case"ddm":D=Q._pe_ddm_to_geog;break;case"dms":D=Q._pe_dms_to_geog}let z=0;I&&(z=Q.getPointer(I));const q=P.map(ie=>Q.ensureString(ie)),J=Q.ensureInt32(q),ee=Q.ensureFloat64(new Array(2*A)),X=D(z,A,J,ee);return X&&Il(N,A,ee),X};function r(T,I,A,P,N){return t("dms",T,I,A,P,N)}function a(T,I,A,P){return i("dms",T,I,A,P)}function p(T,I,A,P,N){return t("ddm",T,I,A,P,N)}function y(T,I,A,P){return i("ddm",T,I,A,P)}function g(T,I,A,P,N){return t("dd",T,I,A,P,N)}function _(T,I,A,P){return i("dd",T,I,A,P)}e.geogToDms=r,e.dmsToGeog=a,e.geogToDdm=p,e.ddmToGeog=y,e.geogToDd=g,e.ddToGeog=_}(j3||(j3={})),function(e){function t(){e.PE_MGRS_STYLE_NEW=Q.PeNotationMgrs.prototype.PE_MGRS_STYLE_NEW,e.PE_MGRS_STYLE_OLD=Q.PeNotationMgrs.prototype.PE_MGRS_STYLE_OLD,e.PE_MGRS_STYLE_AUTO=Q.PeNotationMgrs.prototype.PE_MGRS_STYLE_AUTO,e.PE_MGRS_180_ZONE_1_PLUS=Q.PeNotationMgrs.prototype.PE_MGRS_180_ZONE_1_PLUS,e.PE_MGRS_ADD_SPACES=Q.PeNotationMgrs.prototype.PE_MGRS_ADD_SPACES}function i(a,p,y,g,_,T,I){Q.ensureCache.prepare();let A=0;a&&(A=Q.getPointer(a));const P=ph(y),N=Q.ensureFloat64(P),D=ny(p,qt.PE_MGRS_MAX),z=Q.ensureInt32(D),q=Q._pe_geog_to_mgrs_extended(A,p,N,g,_,T,z);if(q)for(let J=0;J<p;J++)I[J]=Q.UTF8ToString(D[J]);return q}function r(a,p,y,g,_){Q.ensureCache.prepare();let T=0;a&&(T=Q.getPointer(a));const I=y.map(D=>Q.ensureString(D)),A=Q.ensureInt32(I),P=Q.ensureFloat64(new Array(2*p)),N=Q._pe_mgrs_to_geog_extended(T,p,A,g,P);return N&&Il(_,p,P),N}e.init=t,e.geogToMgrsExtended=i,e.mgrsToGeogExtended=r}(Wg||(Wg={})),function(e){function t(r,a,p,y,g,_,T){Q.ensureCache.prepare();let I=0;r&&(I=Q.getPointer(r));const A=ph(p),P=Q.ensureFloat64(A),N=ny(a,qt.PE_MGRS_MAX),D=Q.ensureInt32(N),z=Q._pe_geog_to_usng(I,a,P,y,g,_,D);if(z)for(let q=0;q<a;q++)T[q]=Q.UTF8ToString(N[q]);return z}function i(r,a,p,y){Q.ensureCache.prepare();let g=0;r&&(g=Q.getPointer(r));const _=p.map(P=>Q.ensureString(P)),T=Q.ensureInt32(_),I=Q.ensureFloat64(new Array(2*a)),A=Q._pe_usng_to_geog(g,a,T,I);return A&&Il(y,a,I),A}e.geogToUsng=t,e.usngToGeog=i}(F3||(F3={})),function(e){function t(){e.PE_UTM_OPTS_NONE=Q.PeNotationUtm.prototype.PE_UTM_OPTS_NONE,e.PE_UTM_OPTS_ADD_SPACES=Q.PeNotationUtm.prototype.PE_UTM_OPTS_ADD_SPACES,e.PE_UTM_OPTS_NS=Q.PeNotationUtm.prototype.PE_UTM_OPTS_NS}function i(a,p,y,g,_){Q.ensureCache.prepare();let T=0;a&&(T=Q.getPointer(a));const I=ph(y),A=Q.ensureFloat64(I),P=ny(p,qt.PE_UTM_MAX),N=Q.ensureInt32(P),D=Q._pe_geog_to_utm(T,p,A,g,N);if(D)for(let z=0;z<p;z++)_[z]=Q.UTF8ToString(P[z]);return D}function r(a,p,y,g,_){Q.ensureCache.prepare();let T=0;a&&(T=Q.getPointer(a));const I=y.map(D=>Q.ensureString(D)),A=Q.ensureInt32(I),P=Q.ensureFloat64(new Array(2*p)),N=Q._pe_utm_to_geog(T,p,A,g,P);return N&&Il(_,p,P),N}e.init=t,e.geogToUtm=i,e.utmToGeog=r}(Jg||(Jg={})),function(e){const t=new Map;function i(){e.PE_PCSINFO_OPTION_NONE=Q.PePCSInfo.prototype.PE_PCSINFO_OPTION_NONE,e.PE_PCSINFO_OPTION_DOMAIN=Q.PePCSInfo.prototype.PE_PCSINFO_OPTION_DOMAIN,e.PE_POLE_OUTSIDE_BOUNDARY=Q.PePCSInfo.prototype.PE_POLE_OUTSIDE_BOUNDARY,e.PE_POLE_POINT=Q.PePCSInfo.prototype.PE_POLE_POINT}function r(a,p=e.PE_PCSINFO_OPTION_DOMAIN){let y=null,g=null;return t.has(a)&&(g=t.get(a),g[p]&&(y=g[p])),y||(y=Q.PePCSInfo.prototype.generate(a,p),g||(g=[],t.set(a,g)),g[p]=y),y}e.init=i,e.generate=r}(Zg||(Zg={})),function(e){function t(){return Q.PeVersion.prototype.version_string()}e.versionString=t}(z3||(z3={}));const YB=Object.freeze(Object.defineProperty({__proto__:null,get PeCSTransformations(){return P3},get PeDefs(){return qt},get PeDouble(){return SO},get PeFactory(){return k3},get PeGCSExtent(){return xO},get PeGTTransformations(){return N3},get PeGTlistExtended(){return Hg},get PeGTlistExtendedEntry(){return R3},get PeLineType(){return L3},get PeMath(){return D3},get PeNotationDms(){return j3},get PeNotationMgrs(){return Wg},get PeNotationUsng(){return F3},get PeNotationUtm(){return Jg},get PePCSInfo(){return Zg},get PeVersion(){return z3},_init:TO,get _pe(){return Q},isLoaded:x6,isSupported:KB,load:_O},Symbol.toStringTag,{value:"Module"}));var Bs;(function(e){e[e.CGCS2000=4490]="CGCS2000",e[e.GCSMARS2000=104971]="GCSMARS2000",e[e.GCSMARS2000_SPHERE=104905]="GCSMARS2000_SPHERE",e[e.GCSMOON2000=104903]="GCSMOON2000"})(Bs||(Bs={}));let M;const U={values:[1,.3048,.3048006096012192,.3047972654,.9143917962,.201166195164,.9143984146160287,.3047994715386762,20.11676512155263,20.11678249437587,.9143985307444408,.91439523,.3047997101815088,20.1168,20.116756,5e4,15e4],units:["Meter","Foot","Foot_US","Foot_Clarke","Yard_Clarke","Link_Clarke","Yard_Sears","Foot_Sears","Chain_Sears","Chain_Benoit_1895_B","Yard_Indian","Yard_Indian_1937","Foot_Gold_Coast","Chain","Chain_Sears_1922_Truncated","50_Kilometers","150_Kilometers"],2066:5,2136:12,2155:2,2157:0,2158:0,2159:12,2160:12,2204:2,2219:0,2220:0,2254:2,2255:2,2256:1,2265:1,2266:1,2267:2,2268:2,2269:1,2270:1,2271:2,2272:2,2273:1,2294:0,2295:0,2314:3,2899:2,2900:2,2901:1,2909:1,2910:1,2911:2,2912:2,2913:1,2914:1,2992:1,2993:0,2994:1,3080:1,3089:2,3090:0,3091:2,3102:2,3141:0,3142:0,3167:14,3359:2,3360:0,3361:1,3362:0,3363:2,3364:0,3365:2,3366:3,3404:2,3405:0,3406:0,3407:3,3439:0,3440:0,3479:1,3480:0,3481:1,3482:0,3483:1,3484:0,3485:2,3486:0,3487:2,3488:0,3489:0,3490:2,3491:0,3492:2,3493:0,3494:2,3495:0,3496:2,3497:0,3498:2,3499:0,3500:2,3501:0,3502:2,3503:0,3504:2,3505:0,3506:2,3507:0,3508:2,3509:0,3510:2,3511:0,3512:2,3513:0,3514:0,3515:2,3516:0,3517:2,3518:0,3519:2,3520:0,3521:2,3522:0,3523:2,3524:0,3525:2,3526:0,3527:2,3528:0,3529:2,3530:0,3531:2,3532:0,3533:2,3534:0,3535:2,3536:0,3537:2,3538:0,3539:2,3540:0,3541:2,3542:0,3543:2,3544:0,3545:2,3546:0,3547:2,3548:0,3549:2,3550:0,3551:2,3552:0,3553:2,3582:2,3583:0,3584:2,3585:0,3586:2,3587:0,3588:1,3589:0,3590:1,3591:0,3592:0,3593:1,3598:2,3599:0,3600:2,3605:1,3606:0,3607:0,3608:2,3609:0,3610:2,3611:0,3612:2,3613:0,3614:2,3615:0,3616:2,3617:0,3618:2,3619:0,3620:2,3621:0,3622:2,3623:0,3624:2,3625:0,3626:2,3627:0,3628:2,3629:0,3630:2,3631:0,3632:2,3633:0,3634:1,3635:0,3636:1,3640:2,3641:0,3642:2,3643:0,3644:1,3645:0,3646:1,3647:0,3648:1,3649:0,3650:2,3651:0,3652:2,3653:0,3654:2,3655:0,3656:1,3657:0,3658:2,3659:0,3660:2,3661:0,3662:2,3663:0,3664:2,3668:2,3669:0,3670:2,3671:0,3672:2,3673:0,3674:2,3675:0,3676:1,3677:2,3678:0,3679:1,3680:2,3681:0,3682:1,3683:2,3684:0,3685:0,3686:2,3687:0,3688:2,3689:0,3690:2,3691:0,3692:2,3696:2,3697:0,3698:2,3699:0,3700:2,3793:0,3794:0,3812:0,3854:0,3857:0,3920:0,3978:0,3979:0,3991:2,3992:2,4026:0,4037:0,4038:0,4071:0,4082:0,4083:0,4087:0,4088:0,4217:2,4414:0,4415:0,4417:0,4434:0,4437:0,4438:2,4439:2,4462:0,4467:0,4471:0,4474:0,4559:0,4647:0,4822:0,4826:0,4839:0,5018:0,5041:0,5042:0,5048:0,5221:0,5223:0,5234:0,5235:0,5243:0,5247:0,5266:0,5316:0,5320:0,5321:0,5325:0,5337:0,5361:0,5362:0,5367:0,5382:0,5383:0,5396:0,5456:0,5457:0,5469:0,5472:4,5490:0,5513:0,5514:0,5523:0,5559:0,5588:1,5589:3,5596:0,5627:0,5629:0,5641:0,5643:0,5644:0,5646:2,5654:2,5655:2,5659:0,5700:0,5825:0,5836:0,5837:0,5839:0,5842:0,5844:0,5858:0,5879:0,5880:0,5887:0,5890:0,6128:1,6129:1,6141:1,6204:0,6210:0,6211:0,6307:0,6312:0,6316:0,6362:0,6391:1,6405:1,6406:0,6407:1,6408:0,6409:1,6410:0,6411:2,6412:0,6413:2,6414:0,6415:0,6416:2,6417:0,6418:2,6419:0,6420:2,6421:0,6422:2,6423:0,6424:2,6425:0,6426:2,6427:0,6428:2,6429:0,6430:2,6431:0,6432:2,6433:0,6434:2,6435:0,6436:2,6437:0,6438:2,6439:0,6440:0,6441:2,6442:0,6443:2,6444:0,6445:2,6446:0,6447:2,6448:0,6449:2,6450:0,6451:2,6452:0,6453:2,6454:0,6455:2,6456:0,6457:2,6458:0,6459:2,6460:0,6461:2,6462:0,6463:2,6464:0,6465:2,6466:0,6467:2,6468:0,6469:2,6470:0,6471:2,6472:0,6473:2,6474:0,6475:2,6476:0,6477:2,6478:0,6479:2,6484:2,6485:0,6486:2,6487:0,6488:2,6489:0,6490:2,6491:0,6492:2,6493:0,6494:1,6495:0,6496:1,6497:0,6498:0,6499:1,6500:0,6501:2,6502:0,6503:2,6504:0,6505:2,6506:0,6507:2,6508:0,6509:0,6510:2,6515:1,6516:0,6518:0,6519:2,6520:0,6521:2,6522:0,6523:2,6524:0,6525:2,6526:0,6527:2,6528:0,6529:2,6530:0,6531:2,6532:0,6533:2,6534:0,6535:2,6536:0,6537:2,6538:0,6539:2,6540:0,6541:2,6542:0,6543:2,6544:0,6545:1,6546:0,6547:1,6548:0,6549:2,6550:0,6551:2,6552:0,6553:2,6554:0,6555:2,6556:0,6557:1,6558:0,6559:1,6560:0,6561:1,6562:0,6563:2,6564:0,6565:2,6566:0,6567:0,6568:2,6569:0,6570:1,6571:0,6572:2,6573:0,6574:2,6575:0,6576:2,6577:0,6578:2,6582:2,6583:0,6584:2,6585:0,6586:2,6587:0,6588:2,6589:0,6590:2,6591:0,6592:0,6593:2,6594:0,6595:2,6596:0,6597:2,6598:0,6599:2,6600:0,6601:2,6602:0,6603:2,6605:2,6606:0,6607:2,6608:0,6609:2,6610:0,6611:0,6612:2,6613:0,6614:2,6615:0,6616:2,6617:0,6618:2,6633:2,6646:0,6703:0,6784:0,6785:1,6786:0,6787:1,6788:0,6789:1,6790:0,6791:1,6792:0,6793:1,6794:0,6795:1,6796:0,6797:1,6798:0,6799:1,6800:0,6801:1,6802:0,6803:1,6804:0,6805:1,6806:0,6807:1,6808:0,6809:1,6810:0,6811:1,6812:0,6813:1,6814:0,6815:1,6816:0,6817:1,6818:0,6819:1,6820:0,6821:1,6822:0,6823:1,6824:0,6825:1,6826:0,6827:1,6828:0,6829:1,6830:0,6831:1,6832:0,6833:1,6834:0,6835:1,6836:0,6837:1,6838:0,6839:1,6840:0,6841:1,6842:0,6843:1,6844:0,6845:1,6846:0,6847:1,6848:0,6849:1,6850:0,6851:1,6852:0,6853:1,6854:0,6855:1,6856:0,6857:1,6858:0,6859:1,6860:0,6861:1,6862:0,6863:1,6867:0,6868:1,6870:0,6875:0,6876:0,6879:0,6880:2,6884:0,6885:1,6886:0,6887:1,6915:0,6922:0,6923:2,6924:0,6925:2,6962:0,6984:0,6991:0,7128:2,7131:0,7132:2,7142:0,7257:0,7258:2,7259:0,7260:2,7261:0,7262:2,7263:0,7264:2,7265:0,7266:2,7267:0,7268:2,7269:0,7270:2,7271:0,7272:2,7273:0,7274:2,7275:0,7276:2,7277:0,7278:2,7279:0,7280:2,7281:0,7282:2,7283:0,7284:2,7285:0,7286:2,7287:0,7288:2,7289:0,7290:2,7291:0,7292:2,7293:0,7294:2,7295:0,7296:2,7297:0,7298:2,7299:0,7300:2,7301:0,7302:2,7303:0,7304:2,7305:0,7306:2,7307:0,7308:2,7309:0,7310:2,7311:0,7312:2,7313:0,7314:2,7315:0,7316:2,7317:0,7318:2,7319:0,7320:2,7321:0,7322:2,7323:0,7324:2,7325:0,7326:2,7327:0,7328:2,7329:0,7330:2,7331:0,7332:2,7333:0,7334:2,7335:0,7336:2,7337:0,7338:2,7339:0,7340:2,7341:0,7342:2,7343:0,7344:2,7345:0,7346:2,7347:0,7348:2,7349:0,7350:2,7351:0,7352:2,7353:0,7354:2,7355:0,7356:2,7357:0,7358:2,7359:0,7360:2,7361:0,7362:2,7363:0,7364:2,7365:0,7366:2,7367:0,7368:2,7369:0,7370:2,7877:0,7878:0,7882:0,7883:0,7887:0,7899:0,7991:0,7992:0,8035:2,8036:2,8058:0,8059:0,8082:0,8083:0,8088:0,8090:0,8091:2,8092:0,8093:2,8095:0,8096:2,8097:0,8098:2,8099:0,8100:2,8101:0,8102:2,8103:0,8104:2,8105:0,8106:2,8107:0,8108:2,8109:0,8110:2,8111:0,8112:2,8113:0,8114:2,8115:0,8116:2,8117:0,8118:2,8119:0,8120:2,8121:0,8122:2,8123:0,8124:2,8125:0,8126:2,8127:0,8128:2,8129:0,8130:2,8131:0,8132:2,8133:0,8134:2,8135:0,8136:2,8137:0,8138:2,8139:0,8140:2,8141:0,8142:2,8143:0,8144:2,8145:0,8146:2,8147:0,8148:2,8149:0,8150:2,8151:0,8152:2,8153:0,8154:2,8155:0,8156:2,8157:0,8158:2,8159:0,8160:2,8161:0,8162:2,8163:0,8164:2,8165:0,8166:2,8167:0,8168:2,8169:0,8170:2,8171:0,8172:2,8173:0,8177:2,8179:0,8180:2,8181:0,8182:2,8184:0,8185:2,8187:0,8189:2,8191:0,8193:2,8196:0,8197:2,8198:0,8200:2,8201:0,8202:2,8203:0,8204:2,8205:0,8206:2,8207:0,8208:2,8209:0,8210:2,8212:0,8213:2,8214:0,8216:2,8218:0,8220:2,8222:0,8224:2,8225:0,8226:2,8311:0,8312:1,8313:0,8314:1,8315:0,8316:1,8317:0,8318:1,8319:0,8320:1,8321:0,8322:1,8323:0,8324:1,8325:0,8326:1,8327:0,8328:1,8329:0,8330:1,8331:0,8332:1,8333:0,8334:1,8335:0,8336:1,8337:0,8338:1,8339:0,8340:1,8341:0,8342:1,8343:0,8344:1,8345:0,8346:1,8347:0,8348:1,8352:0,8353:0,8379:0,8380:2,8381:0,8382:2,8383:0,8384:2,8385:0,8387:2,8391:0,8395:0,8433:0,8441:0,8455:0,8456:0,8531:2,8682:0,8686:0,8687:0,8692:0,8693:0,8826:0,8903:0,8950:0,8951:0,9039:0,9040:0,9141:0,9149:0,9150:0,9191:0,9221:0,9222:0,9249:0,9250:0,9252:0,9254:0,9265:0,9284:0,9285:0,9300:0,9354:0,9367:0,9373:0,9377:0,9387:0,9391:0,9456:0,9473:0,9498:0,9674:0,9678:0,9680:0,9709:0,9712:0,9713:0,9716:0,9741:0,9748:2,9749:2,9761:0,9766:0,9793:0,9794:0,9869:0,9874:0,9875:0,9880:0,9895:0,9943:0,9945:0,9947:0,9967:0,9972:0,9977:0,10160:0,10183:0,10188:0,10194:0,10199:0,10207:0,10212:0,10217:0,10222:0,10227:0,10235:0,10240:0,10250:0,10254:0,10270:0,10275:0,10280:0,10306:0,10329:0,10471:0,10477:0,10481:2,10516:2,10592:0,10594:0,10596:0,10598:0,10601:0,10603:0,10626:0,10632:0,10665:0,20002:0,20042:0,20050:1,20499:0,20538:0,20539:0,20790:0,20791:0,21291:0,21292:0,21500:0,21817:0,21818:0,22032:0,22033:0,22091:0,22092:0,22239:0,22240:0,22332:0,22337:0,22338:0,22391:0,22392:0,22639:0,22700:0,22739:0,22770:0,22780:0,22832:0,23090:0,23095:0,23239:0,23240:0,23433:0,23700:0,24047:0,24048:0,24100:3,24200:0,24305:0,24306:0,24382:10,24383:0,24500:0,24547:0,24548:0,24571:9,24600:0,25e3:0,25231:0,25884:0,25932:0,26237:0,26331:0,26332:0,26432:0,26591:0,26592:0,26632:0,26692:0,27120:0,27200:0,27291:6,27292:6,27429:0,27492:0,27493:0,27500:0,28232:0,28600:0,28991:0,28992:0,29100:0,29101:0,29220:0,29221:0,29333:0,29635:0,29636:0,29701:0,29738:0,29739:0,29849:0,29850:0,29871:8,29872:7,29873:0,29874:0,30200:5,30339:0,30340:0,30591:0,30592:0,30791:0,30792:0,30800:0,31028:0,31121:0,31154:0,31170:0,31171:0,31370:0,31528:0,31529:0,31600:0,31700:0,31838:0,31839:0,31900:0,31901:0,32061:0,32062:0,32098:0,32099:2,32100:0,32104:0,32161:0,32766:0,53048:0,53049:0,54090:0,54091:0,65061:2,65062:2,65161:0,65163:0,102041:2,102064:11,102068:15,102069:16,102118:2,102119:1,102120:2,102121:2,102217:2,102218:0,102219:2,102220:2,102378:1,102379:1,102380:0,102381:1,102589:2,102599:2,102600:2,102604:2,102647:0,102704:2,102705:2,102706:0,102731:0,102732:0,102759:1,102760:1,102761:2,102762:0,102763:2,102764:0,102765:0,102766:2,102970:1,102974:2,102993:0,102994:0,102995:2,102996:2,103015:0,103016:2,103017:0,103018:2,103025:0,103026:0,103027:2,103028:2,103035:0,103036:0,103037:2,103038:2,103039:0,103040:0,103041:2,103042:2,103043:0,103044:0,103045:2,103046:2,103047:0,103048:0,103049:2,103050:2,103051:0,103052:2,103053:0,103054:2,103055:0,103056:2,103057:0,103058:0,103059:2,103060:2,103061:0,103062:0,103063:2,103064:2,103069:2,103070:0,103071:0,103072:2,103073:2,103086:0,103087:0,103088:2,103089:2,103094:1,103095:0,103096:2,103103:0,103104:2,103105:0,103106:2,103121:0,103122:2,103123:0,103124:0,103125:1,103126:1,103127:0,103128:0,103129:2,103130:2,103131:0,103132:0,103133:2,103134:2,103135:0,103136:0,103137:1,103138:1,103139:0,103140:2,103141:0,103142:2,103143:0,103144:2,103145:0,103146:1,103147:0,103148:0,103149:2,103150:2,103151:0,103152:2,103172:0,103173:2,103174:0,103175:0,103176:2,103177:2,103178:0,103179:0,103180:2,103181:2,103182:0,103183:0,103184:2,103185:2,103228:0,103229:0,103230:2,103231:2,103250:0,103251:2,103252:0,103253:2,103260:0,103261:0,103262:2,103263:2,103270:0,103271:0,103272:2,103273:2,103274:0,103275:0,103276:2,103277:2,103278:0,103279:0,103280:2,103281:2,103282:0,103283:0,103284:2,103285:2,103286:0,103287:2,103288:0,103289:2,103290:0,103291:2,103292:0,103293:0,103294:2,103295:2,103296:0,103297:0,103298:2,103299:2,103376:2,103377:0,103378:0,103379:2,103380:2,103393:0,103394:0,103395:2,103396:2,103472:0,103473:1,103474:0,103475:2,103482:0,103483:2,103484:0,103485:2,103500:0,103501:2,103502:0,103503:0,103504:1,103505:1,103506:0,103507:0,103508:2,103509:2,103510:0,103511:0,103512:2,103513:2,103514:0,103515:2,103516:0,103517:2,103518:0,103519:2,103520:0,103521:1,103522:0,103523:0,103524:2,103525:2,103526:0,103527:2,103561:2,103562:2,103563:0,103564:0,103565:2,103566:2,103567:0,103568:0,103569:2,103570:2,103584:0,103585:2,103586:0,103587:2,103588:1,103589:0,103590:2,103591:1,103592:0,103593:2,103594:1,103695:2,103897:1,103978:2,103979:0,103980:2,103981:0};for(M=2e3;M<=2045;M++)U[M]=0;for(M=2056;M<=2065;M++)U[M]=0;for(M=2067;M<=2135;M++)U[M]=0;for(M=2137;M<=2154;M++)U[M]=0;for(M=2161;M<=2170;M++)U[M]=0;for(M=2172;M<=2193;M++)U[M]=0;for(M=2195;M<=2198;M++)U[M]=0;for(M=2200;M<=2203;M++)U[M]=0;for(M=2205;M<=2217;M++)U[M]=0;for(M=2222;M<=2224;M++)U[M]=1;for(M=2225;M<=2250;M++)U[M]=2;for(M=2251;M<=2253;M++)U[M]=1;for(M=2257;M<=2264;M++)U[M]=2;for(M=2274;M<=2279;M++)U[M]=2;for(M=2280;M<=2282;M++)U[M]=1;for(M=2283;M<=2289;M++)U[M]=2;for(M=2290;M<=2292;M++)U[M]=0;for(M=2308;M<=2313;M++)U[M]=0;for(M=2315;M<=2491;M++)U[M]=0;for(M=2494;M<=2866;M++)U[M]=0;for(M=2867;M<=2869;M++)U[M]=1;for(M=2870;M<=2888;M++)U[M]=2;for(M=2891;M<=2895;M++)U[M]=2;for(M=2896;M<=2898;M++)U[M]=1;for(M=2902;M<=2908;M++)U[M]=2;for(M=2915;M<=2920;M++)U[M]=2;for(M=2921;M<=2923;M++)U[M]=1;for(M=2924;M<=2930;M++)U[M]=2;for(M=2931;M<=2962;M++)U[M]=0;for(M=2964;M<=2968;M++)U[M]=2;for(M=2969;M<=2973;M++)U[M]=0;for(M=2975;M<=2991;M++)U[M]=0;for(M=2995;M<=3051;M++)U[M]=0;for(M=3054;M<=3079;M++)U[M]=0;for(M=3081;M<=3088;M++)U[M]=0;for(M=3092;M<=3101;M++)U[M]=0;for(M=3106;M<=3138;M++)U[M]=0;for(M=3146;M<=3151;M++)U[M]=0;for(M=3153;M<=3166;M++)U[M]=0;for(M=3168;M<=3172;M++)U[M]=0;for(M=3174;M<=3203;M++)U[M]=0;for(M=3294;M<=3358;M++)U[M]=0;for(M=3367;M<=3403;M++)U[M]=0;for(M=3408;M<=3416;M++)U[M]=0;for(M=3417;M<=3438;M++)U[M]=2;for(M=3441;M<=3446;M++)U[M]=2;for(M=3447;M<=3450;M++)U[M]=0;for(M=3451;M<=3459;M++)U[M]=2;for(M=3460;M<=3478;M++)U[M]=0;for(M=3554;M<=3559;M++)U[M]=0;for(M=3560;M<=3570;M++)U[M]=2;for(M=3571;M<=3581;M++)U[M]=0;for(M=3594;M<=3597;M++)U[M]=0;for(M=3601;M<=3604;M++)U[M]=0;for(M=3637;M<=3639;M++)U[M]=0;for(M=3665;M<=3667;M++)U[M]=0;for(M=3693;M<=3695;M++)U[M]=0;for(M=3701;M<=3727;M++)U[M]=0;for(M=3728;M<=3739;M++)U[M]=2;for(M=3740;M<=3751;M++)U[M]=0;for(M=3753;M<=3760;M++)U[M]=2;for(M=3761;M<=3773;M++)U[M]=0;for(M=3775;M<=3777;M++)U[M]=0;for(M=3779;M<=3781;M++)U[M]=0;for(M=3783;M<=3785;M++)U[M]=0;for(M=3788;M<=3791;M++)U[M]=0;for(M=3797;M<=3802;M++)U[M]=0;for(M=3814;M<=3816;M++)U[M]=0;for(M=3825;M<=3829;M++)U[M]=0;for(M=3832;M<=3841;M++)U[M]=0;for(M=3844;M<=3852;M++)U[M]=0;for(M=3873;M<=3885;M++)U[M]=0;for(M=3890;M<=3893;M++)U[M]=0;for(M=3907;M<=3912;M++)U[M]=0;for(M=3942;M<=3950;M++)U[M]=0;for(M=3968;M<=3970;M++)U[M]=0;for(M=3973;M<=3976;M++)U[M]=0;for(M=3986;M<=3989;M++)U[M]=0;for(M=3994;M<=3997;M++)U[M]=0;for(M=4048;M<=4051;M++)U[M]=0;for(M=4056;M<=4063;M++)U[M]=0;for(M=4093;M<=4096;M++)U[M]=0;for(M=4390;M<=4398;M++)U[M]=0;for(M=4399;M<=4413;M++)U[M]=2;for(M=4418;M<=4433;M++)U[M]=2;for(M=4455;M<=4457;M++)U[M]=2;for(M=4484;M<=4489;M++)U[M]=0;for(M=4491;M<=4554;M++)U[M]=0;for(M=4568;M<=4589;M++)U[M]=0;for(M=4652;M<=4656;M++)U[M]=0;for(M=4766;M<=4800;M++)U[M]=0;for(M=5014;M<=5016;M++)U[M]=0;for(M=5069;M<=5072;M++)U[M]=0;for(M=5105;M<=5130;M++)U[M]=0;for(M=5167;M<=5188;M++)U[M]=0;for(M=5253;M<=5259;M++)U[M]=0;for(M=5269;M<=5275;M++)U[M]=0;for(M=5292;M<=5311;M++)U[M]=0;for(M=5329;M<=5331;M++)U[M]=0;for(M=5343;M<=5349;M++)U[M]=0;for(M=5355;M<=5357;M++)U[M]=0;for(M=5387;M<=5389;M++)U[M]=0;for(M=5459;M<=5463;M++)U[M]=0;for(M=5479;M<=5482;M++)U[M]=0;for(M=5518;M<=5520;M++)U[M]=0;for(M=5530;M<=5539;M++)U[M]=0;for(M=5550;M<=5552;M++)U[M]=0;for(M=5562;M<=5583;M++)U[M]=0;for(M=5623;M<=5625;M++)U[M]=2;for(M=5631;M<=5639;M++)U[M]=0;for(M=5649;M<=5653;M++)U[M]=0;for(M=5663;M<=5680;M++)U[M]=0;for(M=5682;M<=5685;M++)U[M]=0;for(M=5875;M<=5877;M++)U[M]=0;for(M=5896;M<=5899;M++)U[M]=0;for(M=5921;M<=5940;M++)U[M]=0;for(M=6050;M<=6125;M++)U[M]=0;for(M=6244;M<=6275;M++)U[M]=0;for(M=6328;M<=6348;M++)U[M]=0;for(M=6350;M<=6356;M++)U[M]=0;for(M=6366;M<=6372;M++)U[M]=0;for(M=6381;M<=6387;M++)U[M]=0;for(M=6393;M<=6404;M++)U[M]=0;for(M=6480;M<=6483;M++)U[M]=0;for(M=6511;M<=6514;M++)U[M]=0;for(M=6579;M<=6581;M++)U[M]=0;for(M=6619;M<=6624;M++)U[M]=0;for(M=6625;M<=6627;M++)U[M]=2;for(M=6628;M<=6632;M++)U[M]=0;for(M=6634;M<=6637;M++)U[M]=0;for(M=6669;M<=6692;M++)U[M]=0;for(M=6707;M<=6709;M++)U[M]=0;for(M=6720;M<=6723;M++)U[M]=0;for(M=6732;M<=6738;M++)U[M]=0;for(M=6931;M<=6933;M++)U[M]=0;for(M=6956;M<=6959;M++)U[M]=0;for(M=7005;M<=7007;M++)U[M]=0;for(M=7057;M<=7070;M++)U[M]=2;for(M=7074;M<=7082;M++)U[M]=0;for(M=7109;M<=7118;M++)U[M]=0;for(M=7119;M<=7127;M++)U[M]=1;for(M=7374;M<=7376;M++)U[M]=0;for(M=7528;M<=7586;M++)U[M]=0;for(M=7587;M<=7645;M++)U[M]=2;for(M=7692;M<=7696;M++)U[M]=0;for(M=7755;M<=7787;M++)U[M]=0;for(M=7791;M<=7795;M++)U[M]=0;for(M=7799;M<=7801;M++)U[M]=0;for(M=7803;M<=7805;M++)U[M]=0;for(M=7825;M<=7831;M++)U[M]=0;for(M=7845;M<=7859;M++)U[M]=0;for(M=8013;M<=8032;M++)U[M]=0;for(M=8065;M<=8068;M++)U[M]=1;for(M=8518;M<=8529;M++)U[M]=2;for(M=8533;M<=8536;M++)U[M]=2;for(M=8538;M<=8540;M++)U[M]=2;for(M=8677;M<=8679;M++)U[M]=0;for(M=8836;M<=8840;M++)U[M]=0;for(M=8857;M<=8859;M++)U[M]=0;for(M=8908;M<=8910;M++)U[M]=0;for(M=9154;M<=9159;M++)U[M]=0;for(M=9205;M<=9218;M++)U[M]=0;for(M=9271;M<=9273;M++)U[M]=0;for(M=9295;M<=9297;M++)U[M]=0;for(M=9356;M<=9360;M++)U[M]=0;for(M=9404;M<=9407;M++)U[M]=0;for(M=9476;M<=9482;M++)U[M]=0;for(M=9487;M<=9494;M++)U[M]=0;for(M=9697;M<=9699;M++)U[M]=0;for(M=9821;M<=9865;M++)U[M]=0;for(M=10285;M<=10291;M++)U[M]=0;for(M=10314;M<=10317;M++)U[M]=0;for(M=10448;M<=10465;M++)U[M]=0;for(M=10731;M<=10733;M++)U[M]=0;for(M=11114;M<=11118;M++)U[M]=0;for(M=20004;M<=20032;M++)U[M]=0;for(M=20047;M<=20049;M++)U[M]=0;for(M=20062;M<=20092;M++)U[M]=0;for(M=20135;M<=20138;M++)U[M]=0;for(M=20248;M<=20258;M++)U[M]=0;for(M=20348;M<=20358;M++)U[M]=0;for(M=20436;M<=20440;M++)U[M]=0;for(M=20822;M<=20824;M++)U[M]=0;for(M=20904;M<=20932;M++)U[M]=0;for(M=20934;M<=20936;M++)U[M]=0;for(M=21004;M<=21032;M++)U[M]=0;for(M=21035;M<=21037;M++)U[M]=0;for(M=21095;M<=21097;M++)U[M]=0;for(M=21148;M<=21150;M++)U[M]=0;for(M=21207;M<=21264;M++)U[M]=0;for(M=21307;M<=21364;M++)U[M]=0;for(M=21413;M<=21423;M++)U[M]=0;for(M=21453;M<=21463;M++)U[M]=0;for(M=21473;M<=21483;M++)U[M]=0;for(M=21780;M<=21782;M++)U[M]=0;for(M=21891;M<=21894;M++)U[M]=0;for(M=21896;M<=21899;M++)U[M]=0;for(M=22171;M<=22177;M++)U[M]=0;for(M=22181;M<=22187;M++)U[M]=0;for(M=22191;M<=22197;M++)U[M]=0;for(M=22207;M<=22222;M++)U[M]=0;for(M=22229;M<=22232;M++)U[M]=0;for(M=22234;M<=22236;M++)U[M]=0;for(M=22243;M<=22250;M++)U[M]=0;for(M=22262;M<=22265;M++)U[M]=0;for(M=22307;M<=22322;M++)U[M]=0;for(M=22348;M<=22357;M++)U[M]=0;for(M=22407;M<=22422;M++)U[M]=0;for(M=22462;M<=22465;M++)U[M]=0;for(M=22521;M<=22525;M++)U[M]=0;for(M=22607;M<=22622;M++)U[M]=0;for(M=22641;M<=22646;M++)U[M]=0;for(M=22648;M<=22657;M++)U[M]=0;for(M=22707;M<=22722;M++)U[M]=0;for(M=22762;M<=22765;M++)U[M]=0;for(M=22807;M<=22822;M++)U[M]=0;for(M=22991;M<=22994;M++)U[M]=0;for(M=23028;M<=23038;M++)U[M]=0;for(M=23301;M<=23333;M++)U[M]=2;for(M=23830;M<=23853;M++)U[M]=0;for(M=23866;M<=23872;M++)U[M]=0;for(M=23877;M<=23884;M++)U[M]=0;for(M=23886;M<=23894;M++)U[M]=0;for(M=23946;M<=23948;M++)U[M]=0;for(M=24311;M<=24313;M++)U[M]=0;for(M=24342;M<=24347;M++)U[M]=0;for(M=24370;M<=24374;M++)U[M]=10;for(M=24375;M<=24381;M++)U[M]=0;for(M=24718;M<=24721;M++)U[M]=0;for(M=24817;M<=24821;M++)U[M]=0;for(M=24877;M<=24882;M++)U[M]=0;for(M=24891;M<=24893;M++)U[M]=0;for(M=25391;M<=25395;M++)U[M]=0;for(M=25828;M<=25838;M++)U[M]=0;for(M=26191;M<=26195;M++)U[M]=0;for(M=26391;M<=26393;M++)U[M]=0;for(M=26701;M<=26722;M++)U[M]=0;for(M=26729;M<=26799;M++)U[M]=2;for(M=26801;M<=26803;M++)U[M]=2;for(M=26811;M<=26813;M++)U[M]=2;for(M=26847;M<=26870;M++)U[M]=2;for(M=26891;M<=26899;M++)U[M]=0;for(M=26901;M<=26923;M++)U[M]=0;for(M=26929;M<=26946;M++)U[M]=0;for(M=26948;M<=26998;M++)U[M]=0;for(M=27037;M<=27040;M++)U[M]=0;for(M=27205;M<=27232;M++)U[M]=0;for(M=27258;M<=27260;M++)U[M]=0;for(M=27391;M<=27398;M++)U[M]=0;for(M=27561;M<=27564;M++)U[M]=0;for(M=27571;M<=27574;M++)U[M]=0;for(M=27581;M<=27584;M++)U[M]=0;for(M=27591;M<=27594;M++)U[M]=0;for(M=27700;M<=27707;M++)U[M]=0;for(M=28191;M<=28193;M++)U[M]=0;for(M=28348;M<=28358;M++)U[M]=0;for(M=28402;M<=28432;M++)U[M]=0;for(M=28462;M<=28492;M++)U[M]=0;for(M=29118;M<=29122;M++)U[M]=0;for(M=29168;M<=29172;M++)U[M]=0;for(M=29177;M<=29185;M++)U[M]=0;for(M=29187;M<=29195;M++)U[M]=0;for(M=29900;M<=29903;M++)U[M]=0;for(M=30161;M<=30179;M++)U[M]=0;for(M=30491;M<=30494;M++)U[M]=0;for(M=30729;M<=30732;M++)U[M]=0;for(M=31251;M<=31259;M++)U[M]=0;for(M=31265;M<=31268;M++)U[M]=0;for(M=31275;M<=31279;M++)U[M]=0;for(M=31281;M<=31297;M++)U[M]=0;for(M=31461;M<=31469;M++)U[M]=0;for(M=31491;M<=31495;M++)U[M]=0;for(M=31917;M<=31922;M++)U[M]=0;for(M=31965;M<=32e3;M++)U[M]=0;for(M=32001;M<=32003;M++)U[M]=2;for(M=32005;M<=32031;M++)U[M]=2;for(M=32033;M<=32060;M++)U[M]=2;for(M=32064;M<=32067;M++)U[M]=2;for(M=32074;M<=32077;M++)U[M]=2;for(M=32081;M<=32086;M++)U[M]=0;for(M=32107;M<=32130;M++)U[M]=0;for(M=32133;M<=32159;M++)U[M]=0;for(M=32164;M<=32167;M++)U[M]=2;for(M=32180;M<=32199;M++)U[M]=0;for(M=32201;M<=32260;M++)U[M]=0;for(M=32301;M<=32360;M++)U[M]=0;for(M=32401;M<=32460;M++)U[M]=0;for(M=32501;M<=32560;M++)U[M]=0;for(M=32601;M<=32662;M++)U[M]=0;for(M=32664;M<=32667;M++)U[M]=2;for(M=32701;M<=32761;M++)U[M]=0;for(M=53001;M<=53004;M++)U[M]=0;for(M=53008;M<=53019;M++)U[M]=0;for(M=53021;M<=53032;M++)U[M]=0;for(M=53034;M<=53037;M++)U[M]=0;for(M=53042;M<=53046;M++)U[M]=0;for(M=53074;M<=53080;M++)U[M]=0;for(M=54001;M<=54004;M++)U[M]=0;for(M=54008;M<=54019;M++)U[M]=0;for(M=54021;M<=54032;M++)U[M]=0;for(M=54034;M<=54037;M++)U[M]=0;for(M=54042;M<=54046;M++)U[M]=0;for(M=54048;M<=54053;M++)U[M]=0;for(M=54074;M<=54080;M++)U[M]=0;for(M=54098;M<=54101;M++)U[M]=0;for(M=102001;M<=102040;M++)U[M]=0;for(M=102042;M<=102063;M++)U[M]=0;for(M=102065;M<=102067;M++)U[M]=0;for(M=102070;M<=102117;M++)U[M]=0;for(M=102122;M<=102216;M++)U[M]=0;for(M=102221;M<=102377;M++)U[M]=0;for(M=102382;M<=102388;M++)U[M]=0;for(M=102389;M<=102398;M++)U[M]=2;for(M=102399;M<=102444;M++)U[M]=0;for(M=102445;M<=102447;M++)U[M]=2;for(M=102448;M<=102458;M++)U[M]=0;for(M=102459;M<=102468;M++)U[M]=2;for(M=102469;M<=102499;M++)U[M]=0;for(M=102500;M<=102519;M++)U[M]=1;for(M=102520;M<=102524;M++)U[M]=0;for(M=102525;M<=102529;M++)U[M]=2;for(M=102530;M<=102588;M++)U[M]=0;for(M=102590;M<=102598;M++)U[M]=0;for(M=102601;M<=102603;M++)U[M]=0;for(M=102605;M<=102628;M++)U[M]=0;for(M=102629;M<=102646;M++)U[M]=2;for(M=102648;M<=102700;M++)U[M]=2;for(M=102701;M<=102703;M++)U[M]=0;for(M=102707;M<=102730;M++)U[M]=2;for(M=102733;M<=102758;M++)U[M]=2;for(M=102767;M<=102900;M++)U[M]=0;for(M=102901;M<=102933;M++)U[M]=2;for(M=102934;M<=102950;M++)U[M]=13;for(M=102951;M<=102963;M++)U[M]=0;for(M=102965;M<=102969;M++)U[M]=0;for(M=102971;M<=102973;M++)U[M]=0;for(M=102975;M<=102989;M++)U[M]=0;for(M=102990;M<=102992;M++)U[M]=1;for(M=102997;M<=103002;M++)U[M]=0;for(M=103003;M<=103008;M++)U[M]=2;for(M=103009;M<=103011;M++)U[M]=0;for(M=103012;M<=103014;M++)U[M]=2;for(M=103019;M<=103021;M++)U[M]=0;for(M=103022;M<=103024;M++)U[M]=2;for(M=103029;M<=103031;M++)U[M]=0;for(M=103032;M<=103034;M++)U[M]=2;for(M=103065;M<=103068;M++)U[M]=0;for(M=103074;M<=103076;M++)U[M]=0;for(M=103077;M<=103079;M++)U[M]=1;for(M=103080;M<=103082;M++)U[M]=0;for(M=103083;M<=103085;M++)U[M]=2;for(M=103090;M<=103093;M++)U[M]=0;for(M=103097;M<=103099;M++)U[M]=0;for(M=103100;M<=103102;M++)U[M]=2;for(M=103107;M<=103109;M++)U[M]=0;for(M=103110;M<=103112;M++)U[M]=2;for(M=103113;M<=103116;M++)U[M]=0;for(M=103117;M<=103120;M++)U[M]=2;for(M=103153;M<=103157;M++)U[M]=0;for(M=103158;M<=103162;M++)U[M]=2;for(M=103163;M<=103165;M++)U[M]=0;for(M=103166;M<=103168;M++)U[M]=1;for(M=103169;M<=103171;M++)U[M]=2;for(M=103186;M<=103188;M++)U[M]=0;for(M=103189;M<=103191;M++)U[M]=2;for(M=103192;M<=103195;M++)U[M]=0;for(M=103196;M<=103199;M++)U[M]=2;for(M=103200;M<=103224;M++)U[M]=0;for(M=103225;M<=103227;M++)U[M]=1;for(M=103232;M<=103237;M++)U[M]=0;for(M=103238;M<=103243;M++)U[M]=2;for(M=103244;M<=103246;M++)U[M]=0;for(M=103247;M<=103249;M++)U[M]=2;for(M=103254;M<=103256;M++)U[M]=0;for(M=103257;M<=103259;M++)U[M]=2;for(M=103264;M<=103266;M++)U[M]=0;for(M=103267;M<=103269;M++)U[M]=2;for(M=103300;M<=103375;M++)U[M]=0;for(M=103381;M<=103383;M++)U[M]=0;for(M=103384;M<=103386;M++)U[M]=1;for(M=103387;M<=103389;M++)U[M]=0;for(M=103390;M<=103392;M++)U[M]=2;for(M=103397;M<=103399;M++)U[M]=0;for(M=103400;M<=103471;M++)U[M]=2;for(M=103476;M<=103478;M++)U[M]=0;for(M=103479;M<=103481;M++)U[M]=2;for(M=103486;M<=103488;M++)U[M]=0;for(M=103489;M<=103491;M++)U[M]=2;for(M=103492;M<=103495;M++)U[M]=0;for(M=103496;M<=103499;M++)U[M]=2;for(M=103528;M<=103543;M++)U[M]=0;for(M=103544;M<=103548;M++)U[M]=2;for(M=103549;M<=103551;M++)U[M]=0;for(M=103552;M<=103554;M++)U[M]=1;for(M=103555;M<=103557;M++)U[M]=2;for(M=103558;M<=103560;M++)U[M]=0;for(M=103571;M<=103573;M++)U[M]=0;for(M=103574;M<=103576;M++)U[M]=2;for(M=103577;M<=103580;M++)U[M]=0;for(M=103581;M<=103583;M++)U[M]=2;for(M=103595;M<=103694;M++)U[M]=0;for(M=103696;M<=103699;M++)U[M]=0;for(M=103700;M<=103793;M++)U[M]=2;for(M=103794;M<=103890;M++)U[M]=0;for(M=103891;M<=103896;M++)U[M]=2;for(M=103900;M<=103971;M++)U[M]=2;for(M=103972;M<=103977;M++)U[M]=0;for(M=112e3;M<=112101;M++)U[M]=0;const MO=[102100,102113,3857,3785,900913],XB=[104905,104971],QB=[4326,...MO,...XB],q0=[-20037508342788905e-9,20037508342788905e-9],U3=[-20037508342787e-6,20037508342787e-6],Iw={wkTemplate:'PROJCS["WGS_1984_Web_Mercator_Auxiliary_Sphere",GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator_Auxiliary_Sphere"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],PARAMETER["Auxiliary_Sphere_Type",0.0],UNIT["Meter",1.0]]',valid:q0,origin:U3,dx:1e-5},$O={102113:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator",GEOGCS["GCS_WGS_1984_Major_Auxiliary_Sphere",DATUM["D_WGS_1984_Major_Auxiliary_Sphere",SPHEROID["WGS_1984_Major_Auxiliary_Sphere",6378137.0,0.0]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],UNIT["Meter",1.0]]',valid:q0,origin:U3,dx:1e-5},102100:Iw,3785:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator",GEOGCS["GCS_WGS_1984_Major_Auxiliary_Sphere",DATUM["D_WGS_1984_Major_Auxiliary_Sphere",SPHEROID["WGS_1984_Major_Auxiliary_Sphere",6378137.0,0.0]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],UNIT["Meter",1.0]]',valid:q0,origin:U3,dx:1e-5},3857:Iw,4326:{wkTemplate:'GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",{Central_Meridian}],UNIT["Degree",0.0174532925199433]]',altTemplate:'PROJCS["WGS_1984_Plate_Carree",GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Plate_Carree"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],UNIT["Degrees",111319.491]]',valid:[-180,180],origin:[-180,90],dx:1e-5},104971:{wkTemplate:'GEOGCS["Mars_2000_(Sphere)",DATUM["Mars_2000_(Sphere)",SPHEROID["Mars_2000_(Sphere)",3396190.0,0.0]],PRIMEM["Reference_Meridian",0.0],UNIT["Degree",0.0174532925199433]]',valid:[-180,180],origin:[-180,90],dx:1e-5},104905:{wkTemplate:'GEOGCS["GCS_Mars_2000",DATUM["D_Mars_2000",SPHEROID["Mars_2000_IAU_IAG",3396190.0,169.8944472236118]],PRIMEM["Reference_Meridian",0.0],UNIT["Degree",0.0174532925199433]]',valid:[-180,180],origin:[-180,90],dx:1e-5},900913:Iw};function fi(e,t){if(e===t)return!0;if(e==null||t==null)return!1;const i=e.wkid,r=t.wkid;if(i!=null||r!=null){if(i===r||wo(e)&&wo(t))return!0;const y=e.latestWkid;if(y!=null&&r===y)return!0;const g=t.latestWkid;return g!=null&&i===g}let a,p;return e.wkt2&&t.wkt2?(a=e.wkt2,p=t.wkt2):e.wkt&&t.wkt&&(a=e.wkt,p=t.wkt),!(!a||!p)&&a.toUpperCase()===p.toUpperCase()}function Ir(e){const t=e==null?void 0:e.wkid;return t!=null&&t>=2e3&&$O[t]||null}function Kg(e){if(!e)return;const{wkid:t,vcsWkid:i}=e;if(t)return i?JSON.stringify({wkid:t,vcsWkid:i}):String(t);const r=e.wkt||e.wkt2;return JSON.stringify(r?i?{wkt:r,vcsWkid:i}:{wkt:r}:{})}function Gh(e){if(!ys(e))return!1;const{wkid:t}=e;if(t)return U[t]==null;const i=e.wkt2||e.wkt;return!!i&&/^\s*(?:GEOGCS|GEOGCRS|GEOGRAPHICCRS)/i.test(i)}function eq(e){return!(T6(e)||M6(e))}function Jl(e){return(e==null?void 0:e.wkid)===4326}function Twe(e){return/^\s*(?:GEOD|GEODETIC|GEOG|GEOGRAPHIC|PROJ|PROJECTED|VERT|VERTICAL|ENG|ENGINEERING|PARAMETRIC|TIME|DERIVEDPROJ|COMPOUND|BOUND)CRS/i.test(e)}function V3(e){return(e==null?void 0:e.wkid)===Bs.CGCS2000}function wo(e){const t=e==null?void 0:e.wkid;return t!=null&&t>=2e3&&MO.includes(t)}function tq(e){return(e==null?void 0:e.wkid)===32662}function r2(e){return e===Bs.GCSMARS2000||e===Bs.GCSMARS2000_SPHERE}function T6(e){return r2(e==null?void 0:e.wkid)}function s2(e){return e===Bs.GCSMOON2000}function M6(e){return s2(e==null?void 0:e.wkid)}function iq(e){const t=e==null?void 0:e.wkid;return t!=null&&t>=2e3&&QB.includes(t)}function ys(e){if(e==null)return!1;const t=e.wkid;return t!=null&&t>=2e3||e.wkt2!=null||e.wkt!=null}const EO={wkid:4326,wkt:Hv($O[4326].wkTemplate,{Central_Meridian:"0.0"})},IO={wkid:102100,latestWkid:3857},rq={wkid:32662};function $6(e){return{wkt:`GEOCCS["Spherical geocentric",
    DATUM["Not specified",
      SPHEROID["Sphere",${e.radius},0]],
    PRIMEM["Greenwich",0.0,
      AUTHORITY["EPSG","8901"]],
    UNIT["m",1.0],
    AXIS["Geocentric X",OTHER],
    AXIS["Geocentric Y",EAST],
    AXIS["Geocentric Z",NORTH]
  ]`}}const sq=$6(Xt),E6=$6(go),I6=$6(Wl),nq={wkt:`GEOCCS["WGS 84",
  DATUM["WGS_1984",
    SPHEROID["WGS 84",${Xt.radius},298.257223563,
      AUTHORITY["EPSG","7030"]],
    AUTHORITY["EPSG","6326"]],
  PRIMEM["Greenwich",0,
    AUTHORITY["EPSG","8901"]],
  UNIT["m",1.0,
    AUTHORITY["EPSG","9001"]],
  AXIS["Geocentric X",OTHER],
  AXIS["Geocentric Y",OTHER],
  AXIS["Geocentric Z",NORTH],
  AUTHORITY["EPSG","4978"]
]`},oq=E6.wkt.toUpperCase(),aq=I6.wkt.toUpperCase();function lq(e){if(e!=null&&ys(e)){const t=e.wkid,i=e.wkt2??e.wkt;if(r2(t))return go;const r=i==null?void 0:i.toUpperCase();if(i&&r===oq)return go;if(s2(t)||r&&r===aq)return Wl}return Xt}function Mwe(e){return r2(e)?go:s2(e)?Wl:Xt}function Yg(e){return fi(e,sq)}function Zl(e){return Yg(e)||fi(e,E6)||fi(e,I6)}const AO=39.37,uq=Xt.radius*Math.PI/200,CO=/(?:LENGTH)?UNIT\[([^\]]+)]]$/i,Vp=U,OO=/UNIT\[([^\]]+)]/i,hq=new Set([4305,4807,4810,4811,4812,4816,4819,4821,4901,4902,37225,104025,104026,104139,104140]),cq=qi()({millimeter:"millimeters",centimeter:"centimeters",meter:"meters",meter_german:"german-meters",kilometer:"kilometers",decimeter:"decimeters",micrometer:"micrometers",nanometer:"nanometers","50_kilometers":"50-kilometers","150_kilometers":"150-kilometers",foot:"feet",foot_us:"us-feet",foot_clarke:"clarke-feet",fathom:"fathoms",nautical_mile:"nautical-miles",chain_us:"us-chains",link_us:"us-links",mile_us:"us-miles",yard_clarke:"clarke-yards",chain_clarke:"clarke-chains",link_clarke:"clarke-links",yard_sears:"sears-yards",foot_sears:"sears-feet",chain_sears:"sears-chains",link_sears:"sears-links",yard_benoit_1895_a:"benoit-1895-a-yards",foot_benoit_1895_a:"benoit-1895-a-feet",chain_benoit_1895_a:"benoit-1895-a-chains",link_benoit_1895_a:"benoit-1895-a-links",yard_benoit_1895_b:"benoit-1895-b-yards",foot_benoit_1895_b:"benoit-1895-b-feet",chain_benoit_1895_b:"benoit-1895-b-chains",link_benoit_1895_b:"benoit-1895-b-links",foot_1865:"1865-feet",foot_indian:"indian-feet",foot_indian_1937:"indian-1937-feet",foot_indian_1962:"indian-1962-feet",foot_indian_1975:"indian-1975-feet",yard_indian:"indian-yards",yard_indian_1937:"indian-1937-yards",yard_indian_1962:"indian-1962-yards",yard_indian_1975:"indian-1975-yards",statute_mile:"statute-miles",foot_gold_coast:"gold-coast-feet",foot_british_1936:"british-1936-feet",yard:"yards",chain:"chains",link:"links",yard_sears_1922_truncated:"sears-1922-truncated-yards",foot_sears_1922_truncated:"sears-1922-truncated-feet",chain_sears_1922_truncated:"sears-1922-truncated-chains",link_sears_1922_truncated:"sears-1922-truncated-links",yard_us:"us-yards",inch:"inches",inch_us:"us-inches",rod:"rods",rod_us:"us-rods",nautical_mile_us:"us-nautical-miles",nautical_mile_uk:"uk-nautical-miles",smoot:"smoots",vara_tx:"tx-vara",point:"points"}),nn=e=>e*e,Fa=e=>e*e*e,H0={length:{baseUnit:"meters",units:{millimeters:{inBaseUnits:.001},centimeters:{inBaseUnits:.01},meters:{inBaseUnits:1},feet:{inBaseUnits:.3048},"us-feet":{inBaseUnits:.3048006096012192},"clarke-feet":{inBaseUnits:.3047972654},fathoms:{inBaseUnits:1.8288},"nautical-miles":{inBaseUnits:1852},"german-meters":{inBaseUnits:1.0000135965},"us-chains":{inBaseUnits:20.11684023368047},"us-links":{inBaseUnits:.2011684023368047},"us-miles":{inBaseUnits:1609.347218694438},kilometers:{inBaseUnits:1e3},"clarke-yards":{inBaseUnits:.9143917962},"clarke-chains":{inBaseUnits:20.1166195164},"clarke-links":{inBaseUnits:.201166195164},"sears-yards":{inBaseUnits:.9143984146160287},"sears-feet":{inBaseUnits:.3047994715386762},"sears-chains":{inBaseUnits:20.11676512155263},"sears-links":{inBaseUnits:.2011676512155263},"benoit-1895-a-yards":{inBaseUnits:.9143992},"benoit-1895-a-feet":{inBaseUnits:.3047997333333333},"benoit-1895-a-chains":{inBaseUnits:20.1167824},"benoit-1895-a-links":{inBaseUnits:.201167824},"benoit-1895-b-yards":{inBaseUnits:.9143992042898124},"benoit-1895-b-feet":{inBaseUnits:.3047997347632708},"benoit-1895-b-chains":{inBaseUnits:20.11678249437587},"benoit-1895-b-links":{inBaseUnits:.2011678249437587},"1865-feet":{inBaseUnits:.3048008333333334},"indian-feet":{inBaseUnits:.3047995102481469},"indian-1937-feet":{inBaseUnits:.30479841},"indian-1962-feet":{inBaseUnits:.3047996},"indian-1975-feet":{inBaseUnits:.3047995},"indian-yards":{inBaseUnits:.9143985307444408},"indian-1937-yards":{inBaseUnits:.91439523},"indian-1962-yards":{inBaseUnits:.9143988},"indian-1975-yards":{inBaseUnits:.9143985},miles:{inBaseUnits:1609.344},"statute-miles":{inBaseUnits:1609.344},"gold-coast-feet":{inBaseUnits:.3047997101815088},"british-1936-feet":{inBaseUnits:.3048007491},yards:{inBaseUnits:.9144},chains:{inBaseUnits:20.1168},links:{inBaseUnits:.201168},"sears-1922-truncated-yards":{inBaseUnits:.914398},"sears-1922-truncated-feet":{inBaseUnits:.3047993333333334},"sears-1922-truncated-chains":{inBaseUnits:20.116756},"sears-1922-truncated-links":{inBaseUnits:.20116756},"us-yards":{inBaseUnits:.9144018288036576},decimeters:{inBaseUnits:.1},inches:{inBaseUnits:.0254},"us-inches":{inBaseUnits:.0254000508001016},rods:{inBaseUnits:5.0292},"us-rods":{inBaseUnits:5.029210058420118},"us-nautical-miles":{inBaseUnits:1853.248},"uk-nautical-miles":{inBaseUnits:1853.184},smoots:{inBaseUnits:1.7018},"tx-vara":{inBaseUnits:.8466683600033867},points:{inBaseUnits:.0003527777777777778},micrometers:{inBaseUnits:1e-6},nanometers:{inBaseUnits:1e-9},"50-kilometers":{inBaseUnits:5e4},"150-kilometers":{inBaseUnits:15e4}}},area:{baseUnit:"square-meters",units:{"square-millimeters":{inBaseUnits:nn(.001)},"square-centimeters":{inBaseUnits:nn(.01)},"square-decimeters":{inBaseUnits:nn(.1)},"square-meters":{inBaseUnits:1},"square-kilometers":{inBaseUnits:nn(1e3)},"square-inches":{inBaseUnits:nn(.0254)},"square-feet":{inBaseUnits:nn(.3048)},"square-yards":{inBaseUnits:nn(.9144)},"square-miles":{inBaseUnits:nn(1609.344)},"square-nautical-miles":{inBaseUnits:nn(1852)},"square-us-feet":{inBaseUnits:nn(1200/3937)},acres:{inBaseUnits:.0015625*nn(1609.344)},ares:{inBaseUnits:100},hectares:{inBaseUnits:1e4}}},volume:{baseUnit:"liters",units:{liters:{inBaseUnits:1},"cubic-millimeters":{inBaseUnits:1e3*Fa(.001)},"cubic-centimeters":{inBaseUnits:1e3*Fa(.01)},"cubic-decimeters":{inBaseUnits:1e3*Fa(.1)},"cubic-meters":{inBaseUnits:1e3},"cubic-kilometers":{inBaseUnits:1e3*Fa(1e3)},"cubic-inches":{inBaseUnits:1e3*Fa(.0254)},"cubic-feet":{inBaseUnits:1e3*Fa(.3048)},"cubic-yards":{inBaseUnits:1e3*Fa(.9144)},"cubic-miles":{inBaseUnits:1e3*Fa(1609.344)}}},angle:{baseUnit:"radians",units:{radians:{inBaseUnits:1},degrees:{inBaseUnits:Math.PI/180}}}},pq=(()=>{const e={};for(const t in H0)for(const i in H0[t].units)e[i]=t;return e})();function dq(e,t,i){return e*H0[i].units[t].inBaseUnits}function fq(e,t,i){return e/H0[i].units[t].inBaseUnits}const PO=["metric","imperial","inches","feet","yards","miles","nautical-miles","us-feet","meters","kilometers"],yq=new Map([["meters","square-meters"],["feet","square-feet"],["us-feet","square-us-feet"]]);function G3(e){const t=pq[e];if(!t)throw new Error("unknown type");return t}function C7(e,t=null){return t=t||G3(e),H0[t].baseUnit===e}function hi(e,t,i){if(t===i)return e;const r=G3(t);if(r!==G3(i))throw new Error("incompatible units");const a=C7(t,r)?e:dq(e,t,r);return C7(i,r)?a:fq(a,i,r)}function $we(e,t,i,r=!1){if(!r&&Gh(t))throw new Error("Unable to convert from an angular unit to a linear unit.");const a=Bh(t);return a!==i&&(e=a?hi(e,a,i):hi(e*=Ts(t),"meters",i)),e}function Ewe(e,t,i,r=!1){if(!r&&Gh(i))throw new Error("Unable to convert from a linear unit to an angular unit.");const a=Bh(i);return t!==a&&(e=a?hi(e,t,a):hi(e,t,"meters")/Ts(i)),e}function mq(e){switch(e){case"metric":return"meters";case"imperial":return"feet";default:return e}}function Iwe(e){return mq(e)}function Awe(e){switch(e){case"metric":return"square-meters";case"imperial":return"square-feet";default:return e}}function Cwe(e,t){const i=hi(e,t,"meters");return Math.abs(i)<3e3?"meters":"kilometers"}function Owe(e,t){const i=hi(e,t,"meters");return Math.abs(i)<1e5?"meters":"kilometers"}function Pwe(e,t){const i=hi(e,t,"feet");return Math.abs(i)<1e3?"feet":"miles"}function kwe(e,t){const i=hi(e,t,"feet");return Math.abs(i)<1e5?"feet":"miles"}function Rwe(e,t){const i=hi(e,t,"square-meters");return Math.abs(i)<3e6?"square-meters":"square-kilometers"}function Nwe(e,t){const i=hi(e,t,"square-feet");return Math.abs(i)<1e6?"square-feet":"square-miles"}function gq(e,t,i){return hi(e,t,"meters")/(i*Math.PI/180)}function A6(e){return cq.fromJSON(e.toLowerCase())||null}function Xg(e){if(e!=null&&!eq(e))return 1;const t=Ts(e);return t>1e5?1:t}function kO(e){return Ts(e)>=lq(e).metersPerDegree?"meters":Bh(e)}function Ts(e,t=Xt.metersPerDegree){return vq(e,!0)??t}function vq(e,t=!1){const i=(e==null?void 0:e.wkid)??null,r=(e==null?void 0:e.wkt2)??(e==null?void 0:e.wkt)??null;let a=null;if(i){if(r2(i))return go.metersPerDegree;if(s2(i))return Wl.metersPerDegree;a=Vp.values[Vp[i]],!a&&t&&hq.has(i)&&(a=uq)}else r&&(LO(r)?a=O7(CO.exec(r),a):NO(r)&&(a=O7(OO.exec(r),a)));return a}function Lwe(e){return Gh(e)?1:Ts(e)}function O7(e,t){return e!=null&&e[1]?RO(e[1]):t}function RO(e){return parseFloat(e.split(",")[1])}function Bh(e){const t=(e==null?void 0:e.wkid)??null,i=(e==null?void 0:e.wkt2)??(e==null?void 0:e.wkt)??null;let r=null;if(t)r=Vp.units[Vp[t]];else if(i){const a=LO(i)?CO:NO(i)?OO:null;if(a){const p=a.exec(i);p!=null&&p[1]&&(r=bq(p[1]))}}return r!=null?A6(r):null}function Dwe(e){const t=Bh(e);return t!=null&&PO.includes(t)?t:null}function jwe(e){const t=kO(e);return t!=null&&PO.includes(t)?t:null}function Fwe(e){const t=Bh(e);return t==null?null:yq.get(t)}function NO(e){return/^GEOCCS/i.test(e)}function LO(e){return/^\s*(?:PROJCS|PROJCRS|PROJECTEDCRS)/i.test(e)}const wq=1e-7;function bq(e){const t=/[\\"']{1}([^\\"']+)/.exec(e);let i=t==null?void 0:t[1];if(!i||!A6(i)){const r=RO(e);i=null;const a=Vp.values;for(let p=0;p<a.length;++p)if(Math.abs(r-a[p])<wq){i=Vp.units[p];break}}return i}function zwe(e){const t=Bh(e);if(t==null)return null;switch(t){case"feet":case"us-feet":case"clarke-feet":case"fathoms":case"nautical-miles":case"us-chains":case"us-links":case"us-miles":case"clarke-yards":case"clarke-chains":case"clarke-links":case"sears-yards":case"sears-feet":case"sears-chains":case"sears-links":case"benoit-1895-a-yards":case"benoit-1895-a-feet":case"benoit-1895-a-chains":case"benoit-1895-a-links":case"benoit-1895-b-yards":case"benoit-1895-b-feet":case"benoit-1895-b-chains":case"benoit-1895-b-links":case"1865-feet":case"indian-feet":case"indian-1937-feet":case"indian-1962-feet":case"indian-1975-feet":case"indian-yards":case"indian-1937-yards":case"indian-1962-yards":case"indian-1975-yards":case"statute-miles":case"gold-coast-feet":case"british-1936-feet":case"yards":case"chains":case"links":case"sears-1922-truncated-yards":case"sears-1922-truncated-feet":case"sears-1922-truncated-chains":case"sears-1922-truncated-links":case"us-yards":case"inches":case"us-inches":case"rods":case"us-rods":case"us-nautical-miles":case"uk-nautical-miles":case"smoots":case"tx-vara":case"points":return"imperial";case"millimeters":case"centimeters":case"meters":case"german-meters":case"kilometers":case"decimeters":case"micrometers":case"nanometers":case"50-kilometers":case"150-kilometers":return"metric"}return null}const _q={esriAcres:"acres",esriAres:"ares",esriHectares:"hectares",esriSquareCentimeters:"square-centimeters",esriSquareDecimeters:"square-decimeters",esriSquareFeet:"square-feet",esriSquareInches:"square-inches",esriSquareKilometers:"square-kilometers",esriSquareMeters:"square-meters",esriSquareMiles:"square-miles",esriSquareMillimeters:"square-millimeters",esriSquareUsFeet:"square-us-feet",esriSquareYards:"square-yards"},Sq={esriCentimeters:"centimeters",esriDecimeters:"decimeters",esriFeet:"feet",esriInches:"inches",esriKilometers:"kilometers",esriMeters:"meters",esriMiles:"miles",esriMillimeters:"millimeters",esriNauticalMiles:"nautical-miles",esriYards:"yards"},xq={esriDUDecimalDegrees:"degrees",esriDURadians:"radians"},Tq=qi()(_q),Mq=qi()(Sq),Uwe=qi()(xq);var Gn;let $t=Gn=class extends he{static fromJSON(e){if(!e)return null;if((e==null?void 0:e.wkid)===102100)return Gn.WebMercator;if((e==null?void 0:e.wkid)===4326)return Gn.WGS84;const t=new Gn;return t.read(e),t}constructor(e){super(e),this.latestWkid=null,this.wkid=null,this.wkt=null,this.wkt2=null,this.vcsWkid=null,this.latestVcsWkid=null,this.imageCoordinateSystem=null}normalizeCtorArgs(e){return e&&typeof e=="object"?e:{[typeof e=="string"?"wkt":"wkid"]:e}}get isWGS84(){return Jl(this)}get isWebMercator(){return wo(this)}get isGeographic(){return Gh(this)}get isWrappable(){return iq(this)}get metersPerUnit(){return Ts(this)}get unit(){return Bh(this)||(this.isGeographic?"degrees":null)}writeWkt(e,t){this.wkid||(t.wkt=e)}clone(){if(this===Gn.WGS84)return new Gn(EO);if(this===Gn.WebMercator)return new Gn(IO);const e=new Gn;return this.wkid!=null?(e.wkid=this.wkid,this.latestWkid!=null&&(e.latestWkid=this.latestWkid),this.vcsWkid!=null&&(e.vcsWkid=this.vcsWkid),this.latestVcsWkid!=null&&(e.latestVcsWkid=this.latestVcsWkid)):(this.wkt!=null&&(e.wkt=this.wkt),this.wkt2!=null&&(e.wkt2=this.wkt2)),this.imageCoordinateSystem&&(e.imageCoordinateSystem=te(this.imageCoordinateSystem)),e}equals(e){if(e==null)return!1;if(this.imageCoordinateSystem||e.imageCoordinateSystem){if(this.imageCoordinateSystem==null||e.imageCoordinateSystem==null)return!1;const{id:t,referenceServiceName:i}=e.imageCoordinateSystem,{geodataXform:r}=e.imageCoordinateSystem,a=this.imageCoordinateSystem;return t==null||r?JSON.stringify(a)===JSON.stringify(e.imageCoordinateSystem):i?a.id===t&&a.referenceServiceName===i:a.id===t}return fi(this,e)}toJSON(e){return this.write(void 0,e)}};$t.GCS_NAD_1927=null,$t.WGS84=null,$t.WebMercator=null,$t.PlateCarree=null,v([S({readOnly:!0})],$t.prototype,"isWGS84",null),v([S({readOnly:!0})],$t.prototype,"isWebMercator",null),v([S({readOnly:!0})],$t.prototype,"isGeographic",null),v([S({readOnly:!0})],$t.prototype,"isWrappable",null),v([S({type:ft,json:{write:!0}})],$t.prototype,"latestWkid",void 0),v([S({readOnly:!0})],$t.prototype,"metersPerUnit",null),v([S({readOnly:!0})],$t.prototype,"unit",null),v([S({type:ft,json:{write:!0,origins:{"web-scene":{write:{overridePolicy(){return{isRequired:this.wkt==null}}}}}}})],$t.prototype,"wkid",void 0),v([S({type:String,json:{origins:{"web-scene":{write:{overridePolicy(){return{isRequired:this.wkid==null}}}}}}})],$t.prototype,"wkt",void 0),v([be("wkt"),be("web-scene","wkt")],$t.prototype,"writeWkt",null),v([S({type:String,json:{write:!1}})],$t.prototype,"wkt2",void 0),v([S({type:ft,json:{write:!0}})],$t.prototype,"vcsWkid",void 0),v([S({type:ft,json:{write:!0}})],$t.prototype,"latestVcsWkid",void 0),v([S()],$t.prototype,"imageCoordinateSystem",void 0),$t=Gn=v([H("esri.geometry.SpatialReference")],$t),$t.prototype.toJSON.isDefaultToJSON=!0,$t.GCS_NAD_1927=Ae.freeze(new $t({wkid:4267,wkt:'GEOGCS["GCS_North_American_1927",DATUM["D_North_American_1927",SPHEROID["Clarke_1866",6378206.4,294.9786982]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]]'})),$t.WGS84=Ae.freeze(new $t(EO)),$t.WebMercator=Ae.freeze(new $t(IO)),$t.PlateCarree=Ae.freeze(new $t(rq));const qe=$t;function me(e,t,i){let r,a;return t===void 0||Array.isArray(t)?(a=e,i=t,r=[void 0]):(a=t,r=Array.isArray(e)?e:[e]),(p,y)=>{const g=p.constructor.prototype;r.forEach(_=>{const T=AC(p,_,a);T.read&&typeof T.read=="object"||(T.read={}),T.read.reader=g[y],i&&(T.read.source=(T.read.source||[]).concat(i))})}}let Bn=class extends he{constructor(...t){super(...t),this.type=null,this.hasM=!1,this.hasZ=!1,this.spatialReference=qe.WGS84}get cache(){return this.commitProperty("spatialReference"),{}}get extent(){return null}readSpatialReference(t,i){if(t instanceof qe)return t;if(t!=null){const r=new qe;return r.read(t,i),r}return t}clone(){return console.warn(".clone() is not implemented for "+this.declaredClass),null}clearCache(){this.notifyChange("cache")}getCacheValue(t){return this.cache[t]}setCacheValue(t,i){this.cache[t]=i}};v([S()],Bn.prototype,"type",void 0),v([S({readOnly:!0})],Bn.prototype,"cache",null),v([S({readOnly:!0})],Bn.prototype,"extent",null),v([S({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],Bn.prototype,"hasM",void 0),v([S({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],Bn.prototype,"hasZ",void 0),v([S({type:qe,json:{write:!0},value:qe.WGS84})],Bn.prototype,"spatialReference",void 0),v([me("spatialReference")],Bn.prototype,"readSpatialReference",null),Bn=v([H("esri.geometry.Geometry")],Bn);const Ia=Bn,$q=Object.prototype.toString;function Eq(e){const t="__accessorMetadata__"in e?di(e):e;return function(...i){if(i.push(t),typeof i[2]=="number")throw new Error("Using @cast has parameter decorator is not supported since 4.16");return Iq.apply(this,i)}}function Iq(e,t,i,r){Wv(e,t).cast=r}function Aq(e){return(t,i)=>{Wv(t,e).cast=t[i]}}function ct(...e){if(e.length!==3||typeof e[1]!="string")return e.length===1&&$q.call(e[0])==="[object Function]"?Eq(e[0]):e.length===1&&typeof e[0]=="string"?Aq(e[0]):void 0}function et(e){if(e&&typeof e=="object"&&"type"in e&&e.type==="mesh")throw new Y("Mesh geometries are not supported for this operation")}function Cq(e){e.forEach(et)}const Oq=57.29577951308232,Pq=.017453292519943;function P7(e){return e*Oq}function k7(e){return e*Pq}function R7(e){return e/Xt.radius}function N7(e){return Math.PI/2-2*Math.atan(Math.exp(-e/Xt.radius))}function B3(e){return e.wkid!=null||e.wkt!=null}const Aw=[0,0];function Qg(e,t,i,r,a){const p=e,y=a;if(y.spatialReference=i,"x"in p&&"x"in y)[y.x,y.y]=t(p.x,p.y,Aw,r);else if("xmin"in p&&"xmin"in y)[y.xmin,y.ymin]=t(p.xmin,p.ymin,Aw,r),[y.xmax,y.ymax]=t(p.xmax,p.ymax,Aw,r);else if("paths"in p&&"paths"in y||"rings"in p&&"rings"in y){const g="paths"in p?p.paths:p.rings,_=[];let T;for(let I=0;I<g.length;I++){const A=g[I];T=[],_.push(T);for(let P=0;P<A.length;P++)T.push(t(A[P][0],A[P][1],[0,0],r)),A[P].length>2&&T[P].push(A[P][2]),A[P].length>3&&T[P].push(A[P][3])}"paths"in y?y.paths=_:y.rings=_}else if("points"in p&&"points"in y){const g=p.points,_=[];for(let T=0;T<g.length;T++)_[T]=t(g[T][0],g[T][1],[0,0],r),g[T].length>2&&_[T].push(g[T][2]),g[T].length>3&&_[T].push(g[T][3]);y.points=_}return a}function hm(e,t){const i=e&&(B3(e)?e:e.spatialReference),r=t&&(B3(t)?t:t.spatialReference);return!(e&&"type"in e&&e.type==="mesh"||t&&"type"in t&&t.type==="mesh"||!i||!r)&&(!!fi(r,i)||wo(r)&&Jl(i)||wo(i)&&Jl(r))}function n2(e,t){if(e==null)return null;const i=e.spatialReference,r=t&&(B3(t)?t:t.spatialReference);return hm(i,r)?fi(i,r)?te(e):wo(r)?Qg(e,op,qe.WebMercator,!1,te(e)):Jl(r)?Qg(e,o2,qe.WGS84,!1,te(e)):null:null}function op(e,t,i=[0,0]){t>89.99999?t=89.99999:t<-89.99999&&(t=-89.99999);const r=k7(t);return i[0]=k7(e)*Xt.radius,i[1]=Xt.halfSemiMajorAxis*Math.log((1+Math.sin(r))/(1-Math.sin(r))),i}function o2(e,t,i=[0,0],r=!1){if(e===q0[0])i[0]=-180;else if(e===q0[1])i[0]=180;else{const a=P7(e/Xt.radius);i[0]=r?a:a-360*Math.floor((a+180)/360)}return i[1]=P7(Math.PI/2-2*Math.atan(Math.exp(-t/Xt.radius))),i}function zl(e,t=!1,i=te(e)){return et(e),et(i),Qg(e,op,qe.WebMercator,t,i)}function ap(e,t=!1,i=te(e)){return et(e),et(i),Qg(e,o2,qe.WGS84,t,i)}function DO(e,t){const i=e.x-t.x,r=e.y-t.y,a=e.z!=null&&t.z!=null?e.z-t.z:0;return Math.sqrt(i*i+r*r+a*a)}function kq(e){var t;return((t=jO(e,FO))==null?void 0:t[0])??null}function Rq(e){var t;return((t=jO(e,FO))==null?void 0:t[1])??null}function jO({x:e,y:t,spatialReference:i},r=[0,0]){if(i){if(wo(i))return o2(e,t,r);if(Gh(i))return r[0]=e,r[1]=t,r}return null}const FO=[0,0];var cm;const Cw=[0,0];function L7(e){return e&&(e.declaredClass==="esri.geometry.SpatialReference"||e.wkid!=null)}let wr=cm=class extends Ia{static copy(e,t){t._set("x",e._get("x")),t._set("y",e._get("y")),t._set("z",e._get("z")),t._set("m",e._get("m"));const i=e._get("spatialReference");t._set("spatialReference",Ae.isFrozen(i)?i:i.clone())}constructor(...e){super(...e),this.x=0,this.y=0,this.z=void 0,this.m=void 0,this.type="point"}normalizeCtorArgs(e,t,i,r,a){let p;if(Array.isArray(e))p=e,a=t,e=p[0],t=p[1],i=p[2],r=p[3];else if(e&&typeof e=="object"){if(p=e,e=p.x!=null?p.x:p.longitude,t=p.y!=null?p.y:p.latitude,i=p.z,r=p.m,(a=p.spatialReference)&&a.declaredClass!=="esri.geometry.SpatialReference"&&(a=new qe(a)),p.longitude!=null||p.latitude!=null){if(p.longitude==null)ye.getLogger(this).warn(".longitude=","Latitude was defined without longitude");else if(p.latitude==null)ye.getLogger(this).warn(".latitude=","Longitude was defined without latitude");else if(!p.declaredClass&&(a!=null&&a.isWebMercator)){const g=op(p.longitude,p.latitude,Cw);e=g[0],t=g[1]}}}else L7(i)?(a=i,i=null):L7(r)&&(a=r,r=null);const y={x:e,y:t};return y.x==null&&y.y!=null?ye.getLogger(this).warn(".y=","Y coordinate was defined without an X coordinate"):y.y==null&&y.x!=null&&ye.getLogger(this).warn(".x=","X coordinate was defined without a Y coordinate"),a!=null&&(y.spatialReference=a),i!=null&&(y.z=i),r!=null&&(y.m=r),y}get cache(){return this.commitProperty("x"),this.commitProperty("y"),this.commitProperty("z"),this.commitProperty("m"),this.commitProperty("spatialReference"),{}}get hasM(){return this.m!==void 0}set hasM(e){e!==(this._get("m")!==void 0)&&(this._set("m",e?0:void 0),this._set("hasM",e))}get hasZ(){return this.z!==void 0}set hasZ(e){e!==(this._get("z")!==void 0)&&(this._set("z",e?0:void 0),this._set("hasZ",e))}get latitude(){return Rq(this)}set latitude(e){const{spatialReference:t,x:i}=this;e!=null&&t&&(t.isWebMercator?this._set("y",op(i,e,Cw)[1]):t.isGeographic&&this._set("y",e),this._set("latitude",e))}get longitude(){return kq(this)}set longitude(e){const{y:t,spatialReference:i}=this;e!=null&&i&&(i.isWebMercator?this._set("x",op(e,t,Cw)[0]):i.isGeographic&&this._set("x",e),this._set("longitude",e))}writeX(e,t,i){t[i]=isNaN(e)?"NaN":e}readX(e){return typeof e=="string"?NaN:e}clone(){const e=new cm;return e.x=this.x,e.y=this.y,e.z=this.z,e.m=this.m,e.spatialReference=this.spatialReference,e}copy(e){return cm.copy(e,this),this}equals(e){if(e==null)return!1;const{x:t,y:i,z:r,m:a,spatialReference:p}=this,{z:y,m:g}=e;let{x:_,y:T,spatialReference:I}=e;if(!p.equals(I))if(p.isWebMercator&&I.isWGS84)[_,T]=op(_,T),I=p;else{if(!p.isWGS84||!I.isWebMercator)return!1;[_,T]=o2(_,T),I=p}return t===_&&i===T&&r===y&&a===g&&p.wkid===I.wkid}offset(e,t,i){return this.x+=e,this.y+=t,i!=null&&(this.z=(this.z??0)+i),this}normalize(){if(!this.spatialReference)return this;const e=Ir(this.spatialReference);if(!e)return this;let t=this.x;const[i,r]=e.valid,a=2*r;let p;return t>r?(p=Math.ceil(Math.abs(t-r)/a),t-=p*a):t<i&&(p=Math.ceil(Math.abs(t-i)/a),t+=p*a),this._set("x",t),this}distance(e){return DO(this,e)}toArray(){const e=this.hasZ,t=this.hasM;return e&&t?[this.x,this.y,this.z,this.m]:e?[this.x,this.y,this.z]:t?[this.x,this.y,this.m]:[this.x,this.y]}toJSON(e){return this.write({},e)}};v([S({readOnly:!0})],wr.prototype,"cache",null),v([S({type:Boolean,json:{read:!1,write:{enabled:!1,overridePolicy:null}}})],wr.prototype,"hasM",null),v([S({type:Boolean,json:{read:!1,write:{enabled:!1,overridePolicy:null}}})],wr.prototype,"hasZ",null),v([S({type:Number})],wr.prototype,"latitude",null),v([S({type:Number})],wr.prototype,"longitude",null),v([S({type:Number,json:{type:[Number,String],write:{isRequired:!0,allowNull:!0}}}),ct(e=>isNaN(e)?e:Er(e))],wr.prototype,"x",void 0),v([be("x")],wr.prototype,"writeX",null),v([me("x")],wr.prototype,"readX",null),v([S({type:Number,json:{write:!0}})],wr.prototype,"y",void 0),v([S({type:Number,json:{write:{overridePolicy(){return{enabled:this.hasZ}}}}})],wr.prototype,"z",void 0),v([S({type:Number,json:{write:{overridePolicy(){return{enabled:this.hasM}}}}})],wr.prototype,"m",void 0),wr=cm=v([H("esri.geometry.Point")],wr),wr.prototype.toJSON.isDefaultToJSON=!0;const Be=wr,Ow=[0,0];function $1(e,t){return t!=null&&Mr(e,t.x,t.y,t.z)}function Gwe(e,t){var i;if(!((i=t.points)!=null&&i.length))return!1;for(const r of t.points)if(!Gp(e,r))return!1;return!0}function Nq(e,t){const{xmin:i,ymin:r,zmin:a,xmax:p,ymax:y,zmax:g}=t;return e.hasZ&&t.hasZ?Mr(e,i,r,a)&&Mr(e,i,y,a)&&Mr(e,p,y,a)&&Mr(e,p,r,a)&&Mr(e,i,r,g)&&Mr(e,i,y,g)&&Mr(e,p,y,g)&&Mr(e,p,r,g):Mr(e,i,r)&&Mr(e,i,y)&&Mr(e,p,y)&&Mr(e,p,r)}function Gp(e,t){return Mr(e,t[0],t[1])}function Lq(e,t){return Mr(e,t[0],t[1],t[2])}function Mr(e,t,i,r){return t>=e.xmin&&t<=e.xmax&&i>=e.ymin&&i<=e.ymax&&(r==null||!e.hasZ||r>=e.zmin&&r<=e.zmax)}function C6(e,t){return Ow[1]=t.y,Ow[0]=t.x,Dq(e,Ow)}function Dq(e,t){return O6(e.rings,t)}function O6(e,t){if(!e)return!1;if(jq(e))return D7(!1,e,t);let i=!1;for(let r=0,a=e.length;r<a;r++)i=D7(i,e[r],t);return i}function jq(e){return!Array.isArray(e[0][0])}function D7(e,t,i){const[r,a]=i;let p=e,y=0;for(let g=0,_=t.length;g<_;g++){y++,y===_&&(y=0);const[T,I]=t[g],[A,P]=t[y];(I<a&&P>=a||P<a&&I>=a)&&T+(a-I)/(P-I)*(A-T)<r&&(p=!p)}return p}function Fq(e,t){return $1(e,t)}function zq(e,t){const i=e.hasZ&&t.hasZ;let r,a,p;if(e.xmin<=t.xmin){if(r=t.xmin,e.xmax<r)return!1}else if(r=e.xmin,t.xmax<r)return!1;if(e.ymin<=t.ymin){if(a=t.ymin,e.ymax<a)return!1}else if(a=e.ymin,t.ymax<a)return!1;if(i&&t.hasZ){if(e.zmin<=t.zmin){if(p=t.zmin,e.zmax<p)return!1}else if(p=e.zmin,t.zmax<p)return!1}return!0}function Uq(e,t){const{points:i,hasZ:r}=t,a=r?Lq:Gp;for(const p of i)if(a(e,p))return!0;return!1}const Ph=[0,0],kh=[0,0],Rh=[0,0],Nh=[0,0],Vq=[Ph,kh,Rh,Nh],zO=[[Rh,Ph],[Ph,kh],[kh,Nh],[Nh,Rh]];function Gq(e,t){return Bq(e,t.rings)}function Bq(e,t){Ph[0]=e.xmin,Ph[1]=e.ymax,kh[0]=e.xmax,kh[1]=e.ymax,Rh[0]=e.xmin,Rh[1]=e.ymin,Nh[0]=e.xmax,Nh[1]=e.ymin;for(const i of Vq)if(O6(t,i))return!0;for(const i of t){if(!i.length)continue;let r=i[0];if(Gp(e,r))return!0;for(let a=1;a<i.length;a++){const p=i[a];if(Gp(e,p)||UO(r,p,zO))return!0;r=p}}return!1}function qq(e,t){Ph[0]=e.xmin,Ph[1]=e.ymax,kh[0]=e.xmax,kh[1]=e.ymax,Rh[0]=e.xmin,Rh[1]=e.ymin,Nh[0]=e.xmax,Nh[1]=e.ymin;const i=t.paths;for(const r of i){if(!i.length)continue;let a=r[0];if(Gp(e,a))return!0;for(let p=1;p<r.length;p++){const y=r[p];if(Gp(e,y)||UO(a,y,zO))return!0;a=y}}return!1}const Ni=[0,0];function Hq(e){for(let t=0;t<e.length;t++){const i=e[t];for(let a=0;a<i.length-1;a++){const p=i[a],y=i[a+1];for(let g=t+1;g<e.length;g++)for(let _=0;_<e[g].length-1;_++){const T=e[g][_],I=e[g][_+1];if(q3(p,y,T,I,Ni)&&!(Ni[0]===p[0]&&Ni[1]===p[1]||Ni[0]===T[0]&&Ni[1]===T[1]||Ni[0]===y[0]&&Ni[1]===y[1]||Ni[0]===I[0]&&Ni[1]===I[1]))return!0}}const r=i.length;if(!(r<=4))for(let a=0;a<r-3;a++){let p=r-1;a===0&&(p=r-2);const y=i[a],g=i[a+1];for(let _=a+2;_<p;_++){const T=i[_],I=i[_+1];if(q3(y,g,T,I,Ni)&&!(Ni[0]===y[0]&&Ni[1]===y[1]||Ni[0]===T[0]&&Ni[1]===T[1]||Ni[0]===g[0]&&Ni[1]===g[1]||Ni[0]===I[0]&&Ni[1]===I[1]))return!0}}}return!1}function UO(e,t,i){for(let r=0;r<i.length;r++)if(q3(e,t,i[r][0],i[r][1]))return!0;return!1}function q3(e,t,i,r,a){const[p,y]=e,[g,_]=t,[T,I]=i,[A,P]=r,N=A-T,D=p-T,z=g-p,q=P-I,J=y-I,ee=_-y,X=q*z-N*ee;if(X===0)return!1;const ie=(N*J-q*D)/X,oe=(z*J-ee*D)/X;return ie>=0&&ie<=1&&oe>=0&&oe<=1&&(a&&(a[0]=p+ie*(g-p),a[1]=y+ie*(_-y)),!0)}function Wq(e){switch(e){case"esriGeometryEnvelope":case"extent":return zq;case"esriGeometryMultipoint":case"multipoint":return Uq;case"esriGeometryPoint":case"point":return Fq;case"esriGeometryMultiPatch":case"multipatch":case"esriGeometryPolygon":case"polygon":return Gq;case"esriGeometryPolyline":case"polyline":return qq}}var dn;function Jq(e){return e&&(e.declaredClass==="esri.geometry.SpatialReference"||e.wkid!=null)}function za(e,t,i){return t==null?i:i==null?t:e(t,i)}let Mi=dn=class extends Ia{constructor(...e){super(...e),this.type="extent",this.xmin=0,this.ymin=0,this.mmin=void 0,this.zmin=void 0,this.xmax=0,this.ymax=0,this.mmax=void 0,this.zmax=void 0}normalizeCtorArgs(e,t,i,r,a){return Jq(e)?{spatialReference:e,xmin:0,ymin:0,xmax:0,ymax:0}:typeof e=="object"?(e.spatialReference=e.spatialReference==null?qe.WGS84:e.spatialReference,e):{xmin:e,ymin:t,xmax:i,ymax:r,spatialReference:a??qe.WGS84}}static fromPoint(e){return new dn({xmin:e.x,ymin:e.y,zmin:e.z,xmax:e.x,ymax:e.y,zmax:e.z,spatialReference:e.spatialReference})}get cache(){return this.commitProperty("xmin"),this.commitProperty("ymin"),this.commitProperty("zmin"),this.commitProperty("mmin"),this.commitProperty("xmax"),this.commitProperty("ymax"),this.commitProperty("zmax"),this.commitProperty("mmax"),this.commitProperty("spatialReference"),{}}get center(){const e=new Be({x:.5*(this.xmin+this.xmax),y:.5*(this.ymin+this.ymax),spatialReference:this.spatialReference});return this.hasZ&&(e.z=.5*(this.zmin+this.zmax)),this.hasM&&(e.m=.5*(this.mmin+this.mmax)),e}get extent(){return this.clone()}get hasM(){return this.mmin!=null&&this.mmax!=null}get hasZ(){return this.zmin!=null&&this.zmax!=null}get height(){return Math.abs(this.ymax-this.ymin)}get width(){return Math.abs(this.xmax-this.xmin)}centerAt(e){const t=this.center;return e.z!=null&&this.hasZ?this.offset(e.x-t.x,e.y-t.y,e.z-t.z):this.offset(e.x-t.x,e.y-t.y)}clone(){const e=new dn;return e.xmin=this.xmin,e.ymin=this.ymin,e.xmax=this.xmax,e.ymax=this.ymax,e.spatialReference=this.spatialReference,this.zmin!=null&&(e.zmin=this.zmin,e.zmax=this.zmax),this.mmin!=null&&(e.mmin=this.mmin,e.mmax=this.mmax),e}contains(e){if(!e)return!1;const t=this.spatialReference,i=e.spatialReference;return t&&i&&!t.equals(i)&&hm(t,i)&&(e=t.isWebMercator?zl(e):ap(e,!0)),e.type==="point"?$1(this,e):e.type==="extent"&&Nq(this,e)}equals(e){if(this===e)return!0;if(e==null)return!1;const t=this.spatialReference,i=e.spatialReference;return t&&i&&!t.equals(i)&&hm(t,i)&&(e=t.isWebMercator?zl(e):ap(e,!0)),this.xmin===e.xmin&&this.ymin===e.ymin&&this.zmin===e.zmin&&this.mmin===e.mmin&&this.xmax===e.xmax&&this.ymax===e.ymax&&this.zmax===e.zmax&&this.mmax===e.mmax}expand(e){const t=.5*(1-e),i=this.width*t,r=this.height*t;if(this.xmin+=i,this.ymin+=r,this.xmax-=i,this.ymax-=r,this.hasZ){const a=(this.zmax-this.zmin)*t;this.zmin+=a,this.zmax-=a}if(this.hasM){const a=(this.mmax-this.mmin)*t;this.mmin+=a,this.mmax-=a}return this}intersects(e){if(e==null)return!1;e.type==="mesh"&&(e=e.extent);const t=this.spatialReference,i=e.spatialReference;return t&&i&&!fi(t,i)&&hm(t,i)&&(e=t.isWebMercator?zl(e):ap(e,!0)),Wq(e.type)(this,e)}normalize(){const e=this._normalize(!1,!0);return Array.isArray(e)?e:[e]}offset(e,t,i){return this.xmin+=e,this.ymin+=t,this.xmax+=e,this.ymax+=t,i!=null&&(this.zmin+=i,this.zmax+=i),this}shiftCentralMeridian(){return this._normalize(!0)}union(e){return this===e||(this.xmin=Math.min(this.xmin,e.xmin),this.ymin=Math.min(this.ymin,e.ymin),this.xmax=Math.max(this.xmax,e.xmax),this.ymax=Math.max(this.ymax,e.ymax),(this.hasZ||e.hasZ)&&(this.zmin=za(Math.min,this.zmin,e.zmin),this.zmax=za(Math.max,this.zmax,e.zmax)),(this.hasM||e.hasM)&&(this.mmin=za(Math.min,this.mmin,e.mmin),this.mmax=za(Math.max,this.mmax,e.mmax))),this}intersection(e){return this===e?this:e!=null&&this.intersects(e)?(this.xmin=Math.max(this.xmin,e.xmin),this.ymin=Math.max(this.ymin,e.ymin),this.xmax=Math.min(this.xmax,e.xmax),this.ymax=Math.min(this.ymax,e.ymax),(this.hasZ||e.hasZ)&&(this.zmin=za(Math.max,this.zmin,e.zmin),this.zmax=za(Math.min,this.zmax,e.zmax)),(this.hasM||e.hasM)&&(this.mmin=za(Math.max,this.mmin,e.mmin),this.mmax=za(Math.min,this.mmax,e.mmax)),this):null}toJSON(e){return this.write({},e)}_shiftCM(e=Ir(this.spatialReference)){if(!e||!this.spatialReference)return this;const t=this.spatialReference,i=this._getCM(e);if(i){const r=t.isWebMercator?ap(i):i;this.xmin-=i.x,this.xmax-=i.x,t.isWebMercator||(r.x=Pw(r.x,e).x),this.spatialReference=new qe(Hv((t.isWGS84?e.altTemplate:null)??e.wkTemplate,{Central_Meridian:r.x}))}return this}_getCM(e){let t=null;const[i,r]=e.valid,a=this.xmin,p=this.xmax;return a>=i&&a<=r&&p>=i&&p<=r||(t=this.center),t}_normalize(e,t,i){const r=this.spatialReference;if(!r)return this;const a=i??Ir(r);if(a==null)return this;const p=this._getParts(a).map(_=>_.extent);if(p.length<2)return p[0]||this;if(p.length>2)return e?this._shiftCM(a):this.set({xmin:a.valid[0],xmax:a.valid[1]});if(e)return this._shiftCM(a);if(t)return p;let y=!0,g=!0;return p.forEach(_=>{_.hasZ||(y=!1),_.hasM||(g=!1)}),{rings:p.map(_=>{const T=[[_.xmin,_.ymin],[_.xmin,_.ymax],[_.xmax,_.ymax],[_.xmax,_.ymin],[_.xmin,_.ymin]];if(y){const I=(_.zmax-_.zmin)/2;for(let A=0;A<T.length;A++)T[A].push(I)}if(g){const I=(_.mmax-_.mmin)/2;for(let A=0;A<T.length;A++)T[A].push(I)}return T}),hasZ:y,hasM:g,spatialReference:r}}_getParts(e){let t=this.cache._parts;if(!t){t=[];const{ymin:a,ymax:p,spatialReference:y}=this,g=this.width,_=this.xmin,T=this.xmax;let I;e=e||Ir(y);const[A,P]=e.valid;I=Pw(this.xmin,e);const N=I.x,D=I.frameId;I=Pw(this.xmax,e);const z=I.x,q=I.frameId,J=N===z&&g>0;if(g>2*P){const ee=new dn(_<T?N:z,a,P,p,y),X=new dn(A,a,_<T?z:N,p,y),ie=new dn(0,a,P,p,y),oe=new dn(A,a,0,p,y),ue=[],ge=[];ee.contains(ie)&&ue.push(D),ee.contains(oe)&&ge.push(D),X.contains(ie)&&ue.push(q),X.contains(oe)&&ge.push(q);for(let Se=D+1;Se<q;Se++)ue.push(Se),ge.push(Se);t.push({extent:ee,frameIds:[D]},{extent:X,frameIds:[q]},{extent:ie,frameIds:ue},{extent:oe,frameIds:ge})}else N>z||J?t.push({extent:new dn(N,a,P,p,y),frameIds:[D]},{extent:new dn(A,a,z,p,y),frameIds:[q]}):t.push({extent:new dn(N,a,z,p,y),frameIds:[D]});this.cache._parts=t}const i=this.hasZ,r=this.hasM;if(i||r){const a={};i&&(a.zmin=this.zmin,a.zmax=this.zmax),r&&(a.mmin=this.mmin,a.mmax=this.mmax);for(let p=0;p<t.length;p++)t[p].extent.set(a)}return t}};function Pw(e,t){const[i,r]=t.valid,a=2*r;let p,y=0;return e>r?(p=Math.ceil(Math.abs(e-r)/a),e-=p*a,y=p):e<i&&(p=Math.ceil(Math.abs(e-i)/a),e+=p*a,y=-p),{x:e,frameId:y}}v([S({readOnly:!0})],Mi.prototype,"cache",null),v([S({readOnly:!0})],Mi.prototype,"center",null),v([S({readOnly:!0})],Mi.prototype,"extent",null),v([S({readOnly:!0,json:{write:{enabled:!1,overridePolicy:null}}})],Mi.prototype,"hasM",null),v([S({readOnly:!0,json:{write:{enabled:!1,overridePolicy:null}}})],Mi.prototype,"hasZ",null),v([S({readOnly:!0})],Mi.prototype,"height",null),v([S({readOnly:!0})],Mi.prototype,"width",null),v([S({type:Number,json:{type:[Number,String],write:{enabled:!0,allowNull:!0}}})],Mi.prototype,"xmin",void 0),v([S({type:Number,json:{write:!0}})],Mi.prototype,"ymin",void 0),v([S({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy(){return{enabled:this.hasM}}}}})],Mi.prototype,"mmin",void 0),v([S({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy(){return{enabled:this.hasZ}}}}})],Mi.prototype,"zmin",void 0),v([S({type:Number,json:{write:!0}})],Mi.prototype,"xmax",void 0),v([S({type:Number,json:{write:!0}})],Mi.prototype,"ymax",void 0),v([S({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy(){return{enabled:this.hasM}}}}})],Mi.prototype,"mmax",void 0),v([S({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy(){return{enabled:this.hasZ}}}}})],Mi.prototype,"zmax",void 0),Mi=dn=v([H("esri.geometry.Extent")],Mi),Mi.prototype.toJSON.isDefaultToJSON=!0;const Ct=Mi;let f0;var EA,IA;const Zq=((EA=globalThis.esriConfig)==null?void 0:EA.locale)??((IA=globalThis.dojoConfig)==null?void 0:IA.locale);var AA;const y0=(AA=globalThis.document)==null?void 0:AA.documentElement;function VO(){var i;const e=y0==null?void 0:y0.getAttribute("lang"),t=(i=globalThis.navigator)==null?void 0:i.language;return Zq??e??t??"en"}function Jr(){return f0===void 0&&(f0=VO()),f0}function Bwe(e=Jr()){const t=/^([a-zA-Z]{2,3})(?:[_-][a-zA-Z0-9]+)*$/.exec(e);return t==null?void 0:t[1].toLowerCase()}const pm=[];function P6(e){return pm.push(e),yt(()=>pm.splice(pm.indexOf(e),1))}const dm=[];function k6(e){return dm.push(e),yt(()=>dm.splice(dm.indexOf(e),1))}function j7(){const e=VO();f0!==e&&([...dm].forEach(t=>t(e)),f0=e,[...pm].forEach(t=>t(e)))}var CA;(CA=globalThis.addEventListener)==null||CA.call(globalThis,"languagechange",j7),y0&&new MutationObserver(()=>{j7()}).observe(y0,{attributeFilter:["lang"]});let oy;function Kq(e){return oy&&!oy.destroyed||(oy=e()),oy}var H3;const Yq=new rt({avgRating:"avg-rating",numRatings:"num-ratings",numComments:"num-comments",numViews:"num-views"});let Cs=H3=class extends Ae{constructor(e){super(e),this.categories=null,this.disableExtraQuery=!1,this.extent=null,this.filter=null,this.num=10,this.query=null,this.sortField=null,this.start=1}get sortOrder(){return this._get("sortOrder")||"asc"}set sortOrder(e){e!=="asc"&&e!=="desc"||this._set("sortOrder",e)}clone(){return new H3({categories:this.categories?te(this.categories):null,disableExtraQuery:this.disableExtraQuery,extent:this.extent?this.extent.clone():null,filter:this.filter,num:this.num,query:this.query,sortField:this.sortField,sortOrder:this.sortOrder,start:this.start})}toRequestOptions(e,t){let i=[];this.categories&&(i=this.categories.map(y=>Array.isArray(y)?JSON.stringify(y):y));let r="";if(this.extent){const y=n2(this.extent,qe.WGS84);y!=null&&(r=`${y.xmin},${y.ymin},${y.xmax},${y.ymax}`)}let a=this.query;!this.disableExtraQuery&&e.extraQuery&&(a="("+a+")"+e.extraQuery);const p={categories:i,bbox:r,q:a,filter:this.filter,num:this.num,sortField:null,sortOrder:null,start:this.start};return this.sortField&&(p.sortField=this.sortField.split(",").map(y=>Yq.toJSON(y.trim())).join(","),p.sortOrder=this.sortOrder),{query:{...t,...p}}}};v([S()],Cs.prototype,"categories",void 0),v([S()],Cs.prototype,"disableExtraQuery",void 0),v([S({type:Ct})],Cs.prototype,"extent",void 0),v([S()],Cs.prototype,"filter",void 0),v([S()],Cs.prototype,"num",void 0),v([S()],Cs.prototype,"query",void 0),v([S()],Cs.prototype,"sortField",void 0),v([S()],Cs.prototype,"sortOrder",null),v([S()],Cs.prototype,"start",void 0),Cs=H3=v([H("esri.portal.PortalQueryParams")],Cs);const On=Cs;var W3;let mi=W3=class extends he{constructor(e){super(e),this.access=null,this.created=null,this.description=null,this.id=null,this.isInvitationOnly=!1,this.modified=null,this.owner=null,this.portal=null,this.snippet=null,this.sortField=null,this.sortOrder=null,this.sourceJSON=null,this.tags=null,this.title=null}get thumbnailUrl(){var i;const e=this.url,t=this.thumbnail;return e&&t&&this.portal?(i=this.portal)==null?void 0:i.normalizeUrl(`${e}/info/${t}?f=json`):null}get url(){var t;const e=(t=this.portal)==null?void 0:t.restUrl;return e?e+"/community/groups/"+this.id:null}fetchCategorySchema(e){return this.portal.request(this.url+"/categorySchema",e).then(t=>{const i=t.categorySchema||[];return i.some(r=>r.source==="contentCategorySetsGroupQuery.LivingAtlas")?this._fetchCategorySchemaSet("LivingAtlas",e):i})}fetchMembers(e){return this.portal.request(this.url+"/users",e)}getThumbnailUrl(e){let t=this.thumbnailUrl;return t&&e&&(t+=`&w=${e}`),t}toJSON(){throw new Y("internal:not-yet-implemented","PortalGroup.toJSON is not yet implemented")}static fromJSON(e){if(!e)return null;if(e.declaredClass)throw new Error("JSON object is already hydrated");const t=new W3({sourceJSON:e});return t.read(e),t}queryItems(e,t){let i=di(On,e);const r=this.portal;return parseFloat(r.currentVersion)>5?(i=i||new On,r.queryPortal(`/content/groups/${this.id}/search`,i,"PortalItem",t)):(i=i?i.clone():new On,i.query="group:"+this.id+(i.query?" "+i.query:""),r.queryItems(i,t))}_fetchCategorySchemaSet(e,t){const i=this.portal;return i.fetchSelf(i.authMode,!0,t).then(r=>{const a=r.contentCategorySetsGroupQuery;if(a){const p=new On({disableExtraQuery:!0,num:1,query:a});return i.queryGroups(p,t)}throw new Y("portal-group:fetchCategorySchema","contentCategorySetsGroupQuery value not found")}).then(r=>{if(r.total){const a=r.results[0],p=new On({num:1,query:`typekeywords:"${e}"`});return a.queryItems(p,t)}throw new Y("portal-group:fetchCategorySchema","contentCategorySetsGroupQuery group not found")}).then(r=>r.total?r.results[0].fetchData("json",t).then(a=>{const p=a==null?void 0:a.categorySchema;return p!=null&&p.length?p:[]}):[])}};v([S()],mi.prototype,"access",void 0),v([S({type:Date})],mi.prototype,"created",void 0),v([S()],mi.prototype,"description",void 0),v([S()],mi.prototype,"id",void 0),v([S()],mi.prototype,"isInvitationOnly",void 0),v([S({type:Date})],mi.prototype,"modified",void 0),v([S()],mi.prototype,"owner",void 0),v([S()],mi.prototype,"portal",void 0),v([S()],mi.prototype,"snippet",void 0),v([S()],mi.prototype,"sortField",void 0),v([S()],mi.prototype,"sortOrder",void 0),v([S()],mi.prototype,"sourceJSON",void 0),v([S()],mi.prototype,"tags",void 0),v([S()],mi.prototype,"thumbnail",void 0),v([S({readOnly:!0})],mi.prototype,"thumbnailUrl",null),v([S()],mi.prototype,"title",void 0),v([S({readOnly:!0})],mi.prototype,"url",null),mi=W3=v([H("esri.portal.PortalGroup")],mi);const J3=mi;let $u=class extends Ae{constructor(t){super(t),this.nextQueryParams=null,this.queryParams=null,this.results=null,this.total=null}};v([S()],$u.prototype,"nextQueryParams",void 0),v([S()],$u.prototype,"queryParams",void 0),v([S()],$u.prototype,"results",void 0),v([S()],$u.prototype,"total",void 0),$u=v([H("esri.portal.PortalQueryResult")],$u);const Xq=$u;let jo=class extends he{constructor(t){super(t),this.created=null,this.id=null,this.portal=null,this.title=null,this.username=null}get url(){var i;const t=(i=this.portal)==null?void 0:i.restUrl;return t?`${t}/content/users/${this.username}/${this.id}`:null}toJSON(){throw new Y("internal:not-yet-implemented","PortalFolder.toJSON is not yet implemented")}};v([S({type:Date})],jo.prototype,"created",void 0),v([S()],jo.prototype,"id",void 0),v([S()],jo.prototype,"portal",void 0),v([S()],jo.prototype,"title",void 0),v([S({readOnly:!0})],jo.prototype,"url",null),v([S()],jo.prototype,"username",void 0),jo=v([H("esri.portal.PortalFolder")],jo);const Qq=jo;var Z3;let Nt=Z3=class extends he{constructor(e){super(e),this.access=null,this.created=null,this.culture=null,this.description=null,this.email=null,this.fullName=null,this.modified=null,this.orgId=null,this.portal=null,this.preferredView=null,this.privileges=null,this.region=null,this.role=null,this.roleId=null,this.sourceJSON=null,this.units=null,this.username=null,this.userLicenseTypeId=null,this.userType=null}get thumbnailUrl(){const e=this.url,t=this.thumbnail;return e&&t?this.portal.normalizeUrl(`${e}/info/${t}?f=json`):null}get userContentUrl(){var t;const e=(t=this.portal)==null?void 0:t.restUrl;return e?`${e}/content/users/${this.username}`:null}get url(){var t;const e=(t=this.portal)==null?void 0:t.restUrl;return e?`${e}/community/users/${this.username}`:null}addItem(e){const t=e&&e.item,i=e==null?void 0:e.data,r=e==null?void 0:e.folder,a={method:"post"};t&&(a.query=t.createPostQuery(),i!=null&&(typeof i=="string"?a.query.text=i:typeof i=="object"&&(a.query.text=JSON.stringify(i))));let p=this.userContentUrl;return r&&(p+="/"+(typeof r=="string"?r:r.id)),this.portal.request(p+"/addItem",a).then(y=>(t.id=y.id,t.portal=this.portal,t.loaded?t.reload():t.load()))}async deleteItem(e,t=!1){let i=this.userContentUrl;e.ownerFolder&&(i+="/"+e.ownerFolder);const r=t?{permanentDelete:!0}:{};await this.portal.request(i+`/items/${e.id}/delete`,{method:"post",query:r}),e.id=null,e.portal=null}async deleteItems(e,t=!1){e=e.slice();const i=this.userContentUrl+"/deleteItems",r=[],a=e.map(p=>p.id);if(a.length){const p={method:"post",query:{items:a.join(","),permanentDelete:t}},y=await this.portal.request(i,p);for(const g of y.results){const _=e.find(A=>g.itemId===A.id),T=g.success;let I=null;T?(_.id=null,_.portal=null):g.error&&(I=new Y("portal:delete-item-failed",g.error.message,g.error)),r.push({item:_,success:T,error:I})}}return r}fetchFolders(){const e={query:{num:1}};return this.portal.request(this.userContentUrl??"",e).then(t=>{let i;return i=t&&t.folders?t.folders.map(r=>{const a=Qq.fromJSON(r);return a.portal=this.portal,a}):[],i})}fetchGroups(){return this.portal.request(this.url??"").then(e=>{let t;return t=e&&e.groups?e.groups.map(i=>{const r=J3.fromJSON(i);return r.portal=this.portal,r}):[],t})}async fetchItems(e){e??(e={});let t=this.userContentUrl??"";e.folder&&(t+="/"+e.folder.id);const{default:i}=await fe(()=>Promise.resolve().then(()=>GO),void 0),r={folders:!1,inRecycleBin:!!e.inRecycleBin||null,foldersContent:!(e.folder||!e.includeSubfolderItems)||null,num:e.num||10,start:e.start||1,sortField:e.sortField||"created",sortOrder:e.sortOrder||"asc"},a=await this.portal.request(t,{query:r});let p;return a!=null&&a.items?(p=a.items.map(y=>{const g=i.fromJSON(y);return g.portal=this.portal,g}),await Promise.all(p.map(y=>y.load())),{items:p,nextStart:a.nextStart,total:a.total}):{items:[],nextStart:-1,total:0}}fetchTags(){return this.portal.request(this.url+"/tags").then(e=>e.tags)}getThumbnailUrl(e){let t=this.thumbnailUrl;return t&&e&&(t+=`&w=${e}`),t}queryFavorites(e){return this.favGroupId?(this._favGroup||(this._favGroup=new J3({id:this.favGroupId,portal:this.portal})),this._favGroup.queryItems(e)):Promise.reject(new Y("internal:unknown","Unknown internal error",{internalError:"Unknown favGroupId"}))}async restoreItem(e,t){const i=this.userContentUrl,r=t?{folderID:typeof t=="string"?t:t.id}:null;await this.portal.request(i+`/items/${e.id}/restore`,{method:"post",query:r})}toJSON(){throw new Y("internal:not-yet-implemented","PortalUser.toJSON is not yet implemented")}static fromJSON(e){if(!e)return null;if(e.declaredClass)throw new Error("JSON object is already hydrated");const t=new Z3({sourceJSON:e});return t.read(e),t}};v([S()],Nt.prototype,"access",void 0),v([S({type:Date})],Nt.prototype,"created",void 0),v([S()],Nt.prototype,"culture",void 0),v([S()],Nt.prototype,"description",void 0),v([S()],Nt.prototype,"email",void 0),v([S()],Nt.prototype,"favGroupId",void 0),v([S()],Nt.prototype,"fullName",void 0),v([S({type:Date})],Nt.prototype,"modified",void 0),v([S()],Nt.prototype,"orgId",void 0),v([S()],Nt.prototype,"portal",void 0),v([S()],Nt.prototype,"preferredView",void 0),v([S()],Nt.prototype,"privileges",void 0),v([S()],Nt.prototype,"region",void 0),v([S()],Nt.prototype,"role",void 0),v([S()],Nt.prototype,"roleId",void 0),v([S()],Nt.prototype,"sourceJSON",void 0),v([S()],Nt.prototype,"thumbnail",void 0),v([S({readOnly:!0})],Nt.prototype,"thumbnailUrl",null),v([S()],Nt.prototype,"units",void 0),v([S({readOnly:!0})],Nt.prototype,"userContentUrl",null),v([S({readOnly:!0})],Nt.prototype,"url",null),v([S()],Nt.prototype,"username",void 0),v([S()],Nt.prototype,"userLicenseTypeId",void 0),v([S()],Nt.prototype,"userType",void 0),Nt=Z3=v([H("esri.portal.PortalUser")],Nt);const R6=Nt;var ss;let Id;const F7={PortalGroup:()=>Promise.resolve({default:J3}),PortalItem:()=>fe(()=>Promise.resolve().then(()=>GO),void 0),PortalUser:()=>Promise.resolve({default:R6})};let ve=ss=class extends he.JSONSupportMixin(Xs){constructor(e){super(e),this._esriIdCredentialCreateHandle=null,this.access=null,this.allSSL=!1,this.authMode="auto",this.authorizedCrossOriginDomains=null,this.basemapGalleryGroupQuery=null,this.basemapGalleryGroupQuery3D=null,this.bingKey=null,this.canListApps=!1,this.canListData=!1,this.canListPreProvisionedItems=!1,this.canProvisionDirectPurchase=!1,this.canSearchPublic=!0,this.canShareBingPublic=!1,this.canSharePublic=!1,this.canSignInArcGIS=!1,this.canSignInIDP=!1,this.colorSetsGroupQuery=null,this.commentsEnabled=!1,this.created=null,this.culture=null,this.customBaseUrl=null,this.default3DBasemapQuery=null,this.defaultBasemap=null,this.defaultDevBasemap=null,this.defaultExtent=null,this.defaultVectorBasemap=null,this.description=null,this.devBasemapGalleryGroupQuery=null,this.eueiEnabled=null,this.featuredGroups=null,this.featuredItemsGroupQuery=null,this.galleryTemplatesGroupQuery=null,this.layoutGroupQuery=null,this.livingAtlasGroupQuery=null,this.hasCategorySchema=!1,this.hasClassificationSchema=!1,this.helperServices=null,this.homePageFeaturedContent=null,this.homePageFeaturedContentCount=null,this.httpPort=null,this.httpsPort=null,this.id=null,this.ipCntryCode=null,this.isPortal=!1,this.isReadOnly=!1,this.layerTemplatesGroupQuery=null,this.maxTokenExpirationMinutes=null,this.modified=null,this.name=null,this.portalHostname=null,this.portalMode=null,this.portalProperties=null,this.region=null,this.recycleBinEnabled=!1,this.rotatorPanels=null,this.showHomePageDescription=!1,this.sourceJSON=null,this.supportsHostedServices=!1,this.symbolSetsGroupQuery=null,this.templatesGroupQuery=null,this.units=null,this.url=dt.portalUrl,this.urlKey=null,this.user=null,this.use3dBasemaps=!0,this.useDefault3dBasemap=!1,this.useStandardizedQuery=!1,this.useVectorBasemaps=!1,this.vectorBasemapGalleryGroupQuery=null}normalizeCtorArgs(e){return typeof e=="string"?{url:e}:e}destroy(){z7.unregister(this),this.defaultBasemap=Ht(this.defaultBasemap),this.defaultDevBasemap=Ht(this.defaultDevBasemap),this.defaultVectorBasemap=Ht(this.defaultVectorBasemap),this._esriIdCredentialCreateHandle=Wt(this._esriIdCredentialCreateHandle)}readAuthorizedCrossOriginDomains(e){if(e)for(const t of e)dt.request.trustedServers.includes(t)||dt.request.trustedServers.push(t);return e}readDefaultBasemap(e){return this._readBasemap(e)}readDefaultDevBasemap(e){return this._readBasemap(e)}readDefaultVectorBasemap(e){return this._readBasemap(e)}get extraQuery(){var i;const e=(i=this.user)==null?void 0:i.orgId,t=!e||this.canSearchPublic;return this.id&&!t?` AND orgid:${this.id}`:null}get hasAPIKey(){return cO(this.url)}get isOrganization(){return!!this.access}get itemPageUrl(){return this.url?`${this.url}/home/item.html`:null}get restUrl(){let e=this.url;if(e){const t=e.indexOf("/sharing");e=t>0?e.slice(0,t):this.url.replace(/\/+$/,""),e+="/sharing/rest"}return e}get thumbnailUrl(){const e=this.restUrl,t=this.thumbnail;return e&&t?this._normalizeSSL(e+"/portals/self/resources/"+t):null}readUrlKey(e){return e&&e.toLowerCase()}readUser(e){let t=null;return e&&(t=R6.fromJSON(e),t.portal=this),t}load(e){const t=fe(()=>Promise.resolve().then(()=>qJ),void 0).then(({default:i})=>{At(e),Id=i}).then(()=>this.sourceJSON?this.sourceJSON:this.fetchSelf(this.authMode,!1,e)).then(i=>{var r;if(!this.hasAPIKey&&Ze){const a=Ze;this.credential=a.findCredential(this.restUrl),this.credential||this.authMode!==ss.AUTH_MODE_AUTO&&this.authMode!==ss.AUTH_MODE_NO_PROMPT||((r=this._esriIdCredentialCreateHandle)==null||r.remove(),this._esriIdCredentialCreateHandle=a.on("credential-create",eH(new WeakRef(this))),z7.register(this,this._esriIdCredentialCreateHandle,this))}this.sourceJSON=i,this.read(i)});return this.addResolvingPromise(t),Promise.resolve(this)}async createElevationLayers(){await this.load();const e=this._getHelperService("defaultElevationLayers"),t=(await fe(async()=>{const{default:i}=await import("./ElevationLayer-KiqoMB0H.js");return{default:i}},__vite__mapDeps([2,3,4,5,6,7,8]))).default;return e?e.map(i=>new t({id:i.id,url:i.url})):[]}async fetchBasemaps(e,t){const i=await this._fetchBasemaps(e,t);if((t==null?void 0:t.include3d)===!0&&this.use3dBasemaps!==!1){const r=await this._fetchBasemaps3D(e,t);i.unshift(...r)}return i}async fetchDefault3DBasemap(e){if(!this.useDefault3dBasemap||!this.default3DBasemapQuery||this.default3DBasemapQuery==="none")return null;const t=new On;t.query=this.default3DBasemapQuery,t.disableExtraQuery=!0;const i=(await this.queryItems(t,e)).results.find(r=>r.type==="Web Scene");return i?new Id({portalItem:i}):null}fetchCategorySchema(e){return this.hasCategorySchema?this.request(this.restUrl+"/portals/self/categorySchema",e).then(t=>t.categorySchema):bs(e)?Promise.reject(Lt()):Promise.resolve([])}async fetchClassificationSchema(e){return this.hasClassificationSchema?this.request(this.restUrl+"/portals/self/classification/classificationSchema",e).then(t=>t.classificationSchema):null}fetchFeaturedGroups(e){const t=this.featuredGroups,i=new On({num:100,sortField:"title"});if(t!=null&&t.length){const r=[];for(const a of t)r.push(`(title:"${a.title}" AND owner:${a.owner})`);return i.query=r.join(" OR "),this.queryGroups(i,e).then(a=>a.results)}return bs(e)?Promise.reject(Lt()):Promise.resolve([])}fetchRegions(e){var i;const t=((i=this.user)==null?void 0:i.culture)||this.culture||Jr();return this.request(this.restUrl+"/portals/regions",{...e,query:{culture:t}})}fetchSettings(e){var i;const t=((i=this.user)==null?void 0:i.culture)||this.culture||Jr();return this.request(this.restUrl+"/portals/self/settings",{...e,query:{culture:t}})}static getDefault(){return Kq(()=>new ss)}queryGroups(e,t){return this.queryPortal("/community/groups",e,"PortalGroup",t)}queryItems(e,t){return this.queryPortal("/search",e,"PortalItem",t)}queryUsers(e,t){return e.sortField||(e.sortField="username"),this.queryPortal("/community/users",e,"PortalUser",t)}fetchSelf(e=this.authMode,t=!1,i){const r=this.restUrl+"/portals/self",a={authMode:e,query:{culture:Jr().toLowerCase()},withCredentials:!0,...i};return a.authMode==="auto"&&(a.authMode="no-prompt"),t&&(a.query.default=!0),this.request(r,a)}queryPortal(e,t,i,r){const a=di(On,t),p=y=>this.request(this.restUrl+e,{...a.toRequestOptions(this),...r}).then(g=>{const _=a.clone();return _.start=g.nextStart,new Xq({nextQueryParams:_,queryParams:a,total:g.total,results:ss._resultsToTypedArray(y,{portal:this},g,r)})}).then(g=>Promise.all(g.results.map(_=>typeof _.when=="function"?_.when():g)).then(()=>g,_=>(po(_),g)));return i&&F7[i]?F7[i]().then(({default:y})=>(At(r),p(y))):p()}signIn(){if(this.hasAPIKey)return this.load().then(()=>{if(!this.user)throw new Y("portal:not-authenticated","Unable to authenticate user. Portal.user is missing")});if(this.authMode===ss.AUTH_MODE_ANONYMOUS||this.authMode===ss.AUTH_MODE_NO_PROMPT&&!Ze)return Promise.reject(new Y("portal:invalid-auth-mode",`Current "authMode"' is "${this.authMode}"`));if(this.loadStatus==="failed")return Promise.reject(this.loadError);const e=t=>Promise.resolve().then(()=>this.loadStatus==="not-loaded"?(t||(this.authMode="immediate"),this.load().then(()=>null)):this.loadStatus==="loading"?this.load().then(()=>this.credential?null:(this.credential=t,this.fetchSelf("immediate"))):this.user&&this.credential===t?null:(this.credential=t,this.fetchSelf("immediate"))).then(i=>{i&&(this.sourceJSON=i,this.read(i))});return Ze?Ze.getCredential(this.restUrl,{prompt:this.authMode!==ss.AUTH_MODE_NO_PROMPT}).then(t=>e(t)):e(this.credential)}normalizeUrl(e){var i;const t=(i=this.credential)==null?void 0:i.token;return this._normalizeSSL(t?e+(e.includes("?")?"&":"?")+"token="+t:e)}requestToTypedArray(e,t,i){return this.request(e,t).then(r=>{const a=ss._resultsToTypedArray(i,{portal:this},r);return Promise.all(a.map(p=>typeof p.when=="function"?p.when():r)).then(()=>a,()=>a)})}request(e,t={}){const i={f:"json",...t.query},{authMode:r=this.authMode===ss.AUTH_MODE_ANONYMOUS||this.authMode===ss.AUTH_MODE_NO_PROMPT?this.authMode:"auto",body:a=null,cacheBust:p=!1,method:y="auto",responseType:g="json",signal:_}=t,T={authMode:r,body:a,cacheBust:p,method:y,query:i,responseType:g,timeout:0,signal:_};return t.withCredentials&&(T.withCredentials=!0),kt(this._normalizeSSL(e),T).then(I=>I.data)}toJSON(){throw new Y("internal:not-yet-implemented","Portal.toJSON is not yet implemented")}static fromJSON(e){if(!e)return null;if(e.declaredClass)throw new Error("JSON object is already hydrated");return new ss({sourceJSON:e})}_getHelperService(e){const t=this.helperServices&&this.helperServices[e];if(!t)throw new Y("portal:service-not-found",`The \`helperServices\` do not include an entry named "${e}"`);return t}async _fetchBasemaps(e,t){const i=new On;i.query=e||(this.hasAPIKey?this.devBasemapGalleryGroupQuery:this.useVectorBasemaps?this.vectorBasemapGalleryGroupQuery:this.basemapGalleryGroupQuery),i.disableExtraQuery=!0;const r=await this.queryGroups(i,t);if(!r.total)return[];const a=r.results[0];i.num=100,i.query='type:"Web Map" -type:"Web Application"',i.sortField=a.sortField||"name",i.sortOrder=a.sortOrder||"desc";const p=await a.queryItems(i,t);return p.total?p.results.filter(y=>y.type==="Web Map").map(y=>new Id({portalItem:y})):[]}async _fetchBasemaps3D(e,t){const i=e||this.basemapGalleryGroupQuery3D;if(!i)return[];if(this.hasAPIKey)return[];const r=new On({query:i,disableExtraQuery:!0}),a=await this.queryGroups(r,t);if(!a.total)return[];const p=a.results[0];r.num=100,r.query='type:"Web Scene"',r.sortField=p.sortField||"name",r.sortOrder=p.sortOrder||"desc";const y=await p.queryItems(r,t);return y.total?y.results.filter(g=>g.type==="Web Scene").map(g=>new Id({portalItem:g})):[]}_normalizeSSL(e){return e.replace(/^http:/i,"https:").replace(":7080",":7443")}_readBasemap(e){if(e){const t=Id.fromJSON(e);return t.portalItem={portal:this},t}return null}static _resultsToTypedArray(e,t,i,r){let a;if(i){const p=r!=null?r.signal:null;a=i.listings||i.notifications||i.userInvitations||i.tags||i.items||i.groups||i.comments||i.provisions||i.results||i.relatedItems||i,(e||t)&&(a=a.map(y=>{const g=Object.assign(e?e.fromJSON(y):y,t);return typeof g.load=="function"&&g.load(p),g}))}else a=[];return a}};ve.AUTH_MODE_ANONYMOUS="anonymous",ve.AUTH_MODE_AUTO="auto",ve.AUTH_MODE_IMMEDIATE="immediate",ve.AUTH_MODE_NO_PROMPT="no-prompt",v([S()],ve.prototype,"access",void 0),v([S()],ve.prototype,"allSSL",void 0),v([S()],ve.prototype,"authMode",void 0),v([S()],ve.prototype,"authorizedCrossOriginDomains",void 0),v([me("authorizedCrossOriginDomains")],ve.prototype,"readAuthorizedCrossOriginDomains",null),v([S()],ve.prototype,"basemapGalleryGroupQuery",void 0),v([S({json:{name:"3DBasemapGalleryGroupQuery"}})],ve.prototype,"basemapGalleryGroupQuery3D",void 0),v([S()],ve.prototype,"bingKey",void 0),v([S()],ve.prototype,"canListApps",void 0),v([S()],ve.prototype,"canListData",void 0),v([S()],ve.prototype,"canListPreProvisionedItems",void 0),v([S()],ve.prototype,"canProvisionDirectPurchase",void 0),v([S()],ve.prototype,"canSearchPublic",void 0),v([S()],ve.prototype,"canShareBingPublic",void 0),v([S()],ve.prototype,"canSharePublic",void 0),v([S()],ve.prototype,"canSignInArcGIS",void 0),v([S()],ve.prototype,"canSignInIDP",void 0),v([S()],ve.prototype,"colorSetsGroupQuery",void 0),v([S()],ve.prototype,"commentsEnabled",void 0),v([S({type:Date})],ve.prototype,"created",void 0),v([S()],ve.prototype,"credential",void 0),v([S()],ve.prototype,"culture",void 0),v([S()],ve.prototype,"currentVersion",void 0),v([S()],ve.prototype,"customBaseUrl",void 0),v([S()],ve.prototype,"default3DBasemapQuery",void 0),v([S()],ve.prototype,"defaultBasemap",void 0),v([me("defaultBasemap")],ve.prototype,"readDefaultBasemap",null),v([S()],ve.prototype,"defaultDevBasemap",void 0),v([me("defaultDevBasemap")],ve.prototype,"readDefaultDevBasemap",null),v([S({type:Ct})],ve.prototype,"defaultExtent",void 0),v([S()],ve.prototype,"defaultVectorBasemap",void 0),v([me("defaultVectorBasemap")],ve.prototype,"readDefaultVectorBasemap",null),v([S()],ve.prototype,"description",void 0),v([S()],ve.prototype,"devBasemapGalleryGroupQuery",void 0),v([S()],ve.prototype,"eueiEnabled",void 0),v([S({readOnly:!0})],ve.prototype,"extraQuery",null),v([S()],ve.prototype,"featuredGroups",void 0),v([S()],ve.prototype,"featuredItemsGroupQuery",void 0),v([S()],ve.prototype,"galleryTemplatesGroupQuery",void 0),v([S()],ve.prototype,"layoutGroupQuery",void 0),v([S()],ve.prototype,"livingAtlasGroupQuery",void 0),v([S({readOnly:!0})],ve.prototype,"hasAPIKey",null),v([S()],ve.prototype,"hasCategorySchema",void 0),v([S()],ve.prototype,"hasClassificationSchema",void 0),v([S()],ve.prototype,"helpBase",void 0),v([S()],ve.prototype,"helperServices",void 0),v([S()],ve.prototype,"helpMap",void 0),v([S()],ve.prototype,"homePageFeaturedContent",void 0),v([S()],ve.prototype,"homePageFeaturedContentCount",void 0),v([S()],ve.prototype,"httpPort",void 0),v([S()],ve.prototype,"httpsPort",void 0),v([S()],ve.prototype,"id",void 0),v([S()],ve.prototype,"ipCntryCode",void 0),v([S({readOnly:!0})],ve.prototype,"isOrganization",null),v([S()],ve.prototype,"isPortal",void 0),v([S()],ve.prototype,"isReadOnly",void 0),v([S({readOnly:!0})],ve.prototype,"itemPageUrl",null),v([S()],ve.prototype,"layerTemplatesGroupQuery",void 0),v([S()],ve.prototype,"maxTokenExpirationMinutes",void 0),v([S({type:Date})],ve.prototype,"modified",void 0),v([S()],ve.prototype,"name",void 0),v([S()],ve.prototype,"portalHostname",void 0),v([S()],ve.prototype,"portalMode",void 0),v([S()],ve.prototype,"portalProperties",void 0),v([S()],ve.prototype,"region",void 0),v([S()],ve.prototype,"recycleBinEnabled",void 0),v([S({readOnly:!0})],ve.prototype,"restUrl",null),v([S()],ve.prototype,"rotatorPanels",void 0),v([S()],ve.prototype,"showHomePageDescription",void 0),v([S()],ve.prototype,"sourceJSON",void 0),v([S()],ve.prototype,"staticImagesUrl",void 0),v([S({json:{name:"2DStylesGroupQuery"}})],ve.prototype,"stylesGroupQuery2d",void 0),v([S({json:{name:"stylesGroupQuery"}})],ve.prototype,"stylesGroupQuery3d",void 0),v([S()],ve.prototype,"supportsHostedServices",void 0),v([S()],ve.prototype,"symbolSetsGroupQuery",void 0),v([S()],ve.prototype,"templatesGroupQuery",void 0),v([S()],ve.prototype,"thumbnail",void 0),v([S({readOnly:!0})],ve.prototype,"thumbnailUrl",null),v([S()],ve.prototype,"units",void 0),v([S()],ve.prototype,"url",void 0),v([S()],ve.prototype,"urlKey",void 0),v([me("urlKey")],ve.prototype,"readUrlKey",null),v([S()],ve.prototype,"user",void 0),v([me("user")],ve.prototype,"readUser",null),v([S()],ve.prototype,"use3dBasemaps",void 0),v([S()],ve.prototype,"useDefault3dBasemap",void 0),v([S()],ve.prototype,"useStandardizedQuery",void 0),v([S()],ve.prototype,"useVectorBasemaps",void 0),v([S()],ve.prototype,"vectorBasemapGalleryGroupQuery",void 0),ve=ss=v([H("esri.portal.Portal")],ve);const er=ve,z7=new FinalizationRegistry(e=>{e.remove()});function eH(e){const t=Ze;return()=>{const i=e.deref();i&&t.findCredential(i.restUrl)&&i.signIn().catch(()=>{})}}let Fo=class extends Ae{constructor(t){super(t),this.portalItem=null}normalizeCtorArgs(t){return t!=null&&t.portalItem&&t.path?{...t,path:U7(t.path,t.portalItem)}:t}set path(t){t!=null&&vs(t)?ye.getLogger(this).error("portalitemresource:invalid-path","A portal item resource path must be relative"):this._set("path",t)}_castPath(t){return U7(t,this.portalItem)}get url(){return this.portalItem&&this.path?`${this.portalItem.itemUrl}/resources/${this.path}`:null}get cdnUrl(){return this.portalItem&&this.path?`${this.portalItem.itemCdnUrl}/resources/${this.path}`:null}get itemRelativeUrl(){return this.portalItem&&this.path?`./resources/${this.path}`:null}fetch(t="json",i){const r=this.cdnUrl;if(r==null)throw new Y("portal-item-resource:fetch","Portal item resource does not refer to a valid item or path");return this.portalItem.portal.request(r,{responseType:t,query:{token:this.portalItem.apiKey,_ts:i!=null&&i.cacheBust?Date.now():null},signal:i==null?void 0:i.signal})}async update(t,i){const{addOrUpdateResources:r}=await fe(()=>import("./resourceUtils-DlH8wwgx.js"),[]);return await r(this.portalItem,[{resource:this,content:t,compress:i==null?void 0:i.compress,access:i==null?void 0:i.access}],"update",i),this}hasPath(){return this.path!=null}};function U7(e,t){return e==null?e:(e=e.replace(/^\/+/,""),t!=null&&vs(e)&&(e=p6(e,t.itemUrl)),e==null?void 0:e.replace(/^\/+/,"").replace(/^(\.\/)?resources\//,""))}v([S()],Fo.prototype,"portalItem",void 0),v([S({type:String,value:null})],Fo.prototype,"path",null),v([ct("path")],Fo.prototype,"_castPath",null),v([S({type:String,readOnly:!0})],Fo.prototype,"url",null),v([S({type:String,readOnly:!0})],Fo.prototype,"cdnUrl",null),v([S({type:String,readOnly:!0})],Fo.prototype,"itemRelativeUrl",null),Fo=v([H("esri.portal.PortalItemResource")],Fo);const tH=Fo;let tf=class extends Ae{constructor(t){super(t),this.created=null,this.rating=null}};v([S({type:Date})],tf.prototype,"created",void 0),v([S()],tf.prototype,"rating",void 0),tf=v([H("esri.portal.PortalRating")],tf);const kw=tf;var Eu;const iH=new Set(["3DTiles Service","CSV","Feature Collection","Feature Service","Feed","GeoJson","Group Layer","Image Service","KML","Map Service","Media Layer","Scene Service","Stream Service","Vector Tile Service","WFS","WMS","WMTS"]),rH=new Set(["KML","GeoJson","CSV"]);let Ke=Eu=class extends he.JSONSupportMixin(Xs){static from(e){return nd(Eu,e)}constructor(e){super(e),this.access=null,this.accessInformation=null,this.apiKey=null,this.applicationProxies=null,this.avgRating=null,this.categories=null,this.classification=null,this.created=null,this.culture=null,this.description=null,this.extent=null,this.groupCategories=null,this.id=null,this.isOrgItem=!1,this.itemControl=null,this.licenseInfo=null,this.modified=null,this.name=null,this.numComments=null,this.numRatings=null,this.numViews=null,this.owner=null,this.ownerFolder=null,this.portal=null,this.screenshots=null,this.size=null,this.snippet=null,this.sourceJSON=null,this.sourceUrl=null,this.spatialReference=null,this.tags=null,this.title=null,this.type=null,this.typeKeywords=null,this.url=null}destroy(){this.portal=null}get displayName(){const e=this.type,t=this.typeKeywords||[];let i=e;return e==="Feature Service"||e==="Feature Collection"?i=t.includes("Table")?"Table":t.includes("Route Layer")?"Route Layer":t.includes("Markup")?"Markup":"Feature Layer":e==="Image Service"?i=t.includes("Elevation 3D Layer")?"Elevation Layer":t.includes("Tiled Imagery")?"Tiled Imagery Layer":"Imagery Layer":e==="Scene Service"?i="Scene Layer":e==="Video Service"?i="Video Layer":e==="Scene Package"?i="Scene Layer Package":e==="Stream Service"?i="Feature Layer":e==="Geoprocessing Service"?i=t.includes("Web Tool")?"Tool":"Geoprocessing Service":e==="Geoenrichment Service"?i="GeoEnrichment Service":e==="Geocoding Service"?i="Locator":e==="Microsoft Powerpoint"?i="Microsoft PowerPoint":e==="GeoJson"?i="GeoJSON":e==="Globe Service"?i="Globe Layer":e==="Vector Tile Service"?i="Tile Layer":e==="netCDF"?i="NetCDF":e==="Map Service"?i=t.includes("Spatiotemporal")||!t.includes("Hosted Service")&&!t.includes("Tiled")||t.includes("Relational")?"Map Image Layer":"Tile Layer":e!=null&&e.toLowerCase().includes("add in")?i=e.replaceAll(/(add in)/gi,"Add-In"):e==="datastore catalog service"?i="Big Data File Share":e==="Compact Tile Package"?i="Tile Package (tpkx)":e==="Raster function template"?i="Raster Function Template":e==="OGCFeatureServer"?i="OGC Feature Layer":e==="web mapping application"&&t.includes("configurableApp")?i="Instant App":e==="Insights Page"?i="Insights Report":e==="Excalibur Imagery Project"?i="Excalibur Project":e==="3DTiles Service"?i="3D tiles layer":e==="3DTiles Package"&&(i="3D tiles package"),i}readExtent(e){return e&&e.length?new Ct(e[0][0],e[0][1],e[1][0],e[1][1]):null}get iconUrl(){var N;const e=((N=this.type)==null?void 0:N.toLowerCase())||"",t=this.typeKeywords||[],i="esri/images/portal/",r="16";let a,p=!1,y=!1,g=!1,_=!1,T=!1,I=!1,A=!1,P=!1;return e.indexOf("service")>0||e==="feature collection"||e==="kml"||e==="wms"||e==="wmts"||e==="wfs"?(p=t.includes("Hosted Service"),e==="feature service"||e==="feature collection"||e==="kml"||e==="wfs"?(y=t.includes("Table"),g=t.includes("Route Layer"),_=t.includes("Markup"),T=t.includes("Spatiotemporal"),I=t.includes("UtilityNetwork"),a=T&&y?"spatiotemporaltable":y?"table":g?"routelayer":_?"markup":T?"spatiotemporal":I?"utilitynetwork":p?"featureshosted":"features"):e==="map service"||e==="wms"||e==="wmts"?(T=t.includes("Spatiotemporal"),A=t.includes("Relational"),a=T||A?"mapimages":p||t.includes("Tiled")||e==="wmts"?"maptiles":"mapimages"):a=e==="scene service"?t.includes("Line")?"sceneweblayerline":t.includes("3DObject")?"sceneweblayermultipatch":t.includes("Point")?"sceneweblayerpoint":t.includes("IntegratedMesh")?"sceneweblayermesh":t.includes("PointCloud")?"sceneweblayerpointcloud":t.includes("Polygon")?"sceneweblayerpolygon":t.includes("Building")?"sceneweblayerbuilding":t.includes("Voxel")?"sceneweblayervoxel":"sceneweblayer":e==="image service"?t.includes("Elevation 3D Layer")?"elevationlayer":t.includes("Tiled Imagery")?"tiledimagerylayer":"imagery":e==="stream service"?"streamlayer":e==="vector tile service"?"vectortile":e==="datastore catalog service"?"datastorecollection":e==="geocoding service"?"geocodeservice":e==="video service"?t.includes("Live Stream")?"livestreamvideolayer":"videolayer":e==="geoprocessing service"?t.includes("Web Tool")?"tool":"layers":e==="geodata service"?"geodataservice":e==="3dtiles service"?t.includes("3DObject")?"3dobjecttileslayer":t.includes("IntegratedMesh")?"integratedmeshtileslayer":"3dtileslayer":"layers"):e==="web map"||e==="cityengine web scene"?a="maps":e==="web scene"?a=t.includes("ViewingMode-Local")?"webscenelocal":"websceneglobal":e==="web mapping application"&&t.includes("configurableApp")?a="instantapps":e==="web mapping application"||e==="mobile application"||e==="application"||e==="operation view"||e==="desktop application"?a="apps":e==="map document"||e==="map package"||e==="published map"||e==="scene document"||e==="globe document"||e==="basemap package"||e==="mobile basemap package"||e==="mobile map package"||e==="project package"||e==="project template"||e==="pro map"||e==="layout"||e==="layer"&&t.includes("ArcGIS Pro")||e==="explorer map"&&t.indexOf("Explorer Document")?a="mapsgray":e==="service definition"||e==="shapefile"||e==="cad drawing"||e==="geojson"||e==="netcdf"||e==="administrative report"?a="datafiles":e==="360 vr experience"?a="360vr":e==="explorer add in"||e==="desktop add in"||e==="windows viewer add in"||e==="windows viewer configuration"?a="appsgray":e==="arcgis pro add in"||e==="arcgis pro configuration"?a="addindesktop":e==="pdf"?a="pdf":e==="microsoft word"?a="word":e==="microsoft excel"?a="excel":e==="microsoft powerpoint"?a="ppt":e==="rule package"||e==="file geodatabase"||e==="sqlite geodatabase"||e==="csv collection"||e==="kml collection"||e==="windows mobile package"||e==="map template"||e==="desktop application template"||e==="gml"||e==="arcpad package"||e==="code sample"||e==="document link"||e==="earth configuration"||e==="operations dashboard add in"||e==="rules package"||e==="workflow manager package"||e==="explorer map"&&t.includes("Explorer Mapping Application")||t.includes("Document")?a="datafilesgray":e==="network analysis service"||e==="geoprocessing service"||e==="geodata service"||e==="geometry service"||e==="geoprocessing package"||e==="locator package"||e==="geoprocessing sample"||e==="workflow manager service"?a="toolsgray":e==="layer"||e==="layer package"||e==="explorer layer"?a="layersgray":e==="analysis model"?a="analysismodel":e==="scene package"?a="scenepackage":e==="3dtiles package"?a="3dtileslayerpackage":e==="3dtiles service"?a="3dtileslayer":e==="mobile scene package"?a="mobilescenepackage":e==="tile package"||e==="compact tile package"?a="tilepackage":e==="task file"?a="taskfile":e==="report template"?a="report-template":e==="statistical data collection"?a="statisticaldatacollection":e==="insights workbook"?a="workbook":e==="insights model"?a="insightsmodel":e==="insights page"?a="insightspage":e==="insights theme"?a="insightstheme":e==="hub initiative"?a="hubinitiative":e==="hub page"?a="hubpage":e==="hub site application"?a="hubsite":e==="hub event"?a="hubevent":e==="hub project"?a="hubproject":e==="relational database connection"?a="relationaldatabaseconnection":e==="big data file share"?a="datastorecollection":e==="image collection"?a="imagecollection":e==="desktop style"?a="desktopstyle":e==="style"?a=t.includes("Dictionary")?"dictionarystyle":"style":e==="dashboard"?a="dashboard":e==="raster function template"?a="rasterprocessingtemplate":e==="vector tile package"?a="vectortilepackage":e==="ortho mapping project"?a="orthomappingproject":e==="ortho mapping template"?a="orthomappingtemplate":e==="solution"?a="solutions":e==="geopackage"?a="geopackage":e==="deep learning package"?a="deeplearningpackage":e==="real time analytic"?a="realtimeanalytics":e==="reality mapping project"?a="realitymappingproject":e==="big data analytic"?a="bigdataanalytics":e==="feed"?a="feed":e==="excalibur imagery project"?a="excaliburimageryproject":e==="notebook"?a="notebook":e==="storymap"?a="storymap":e==="survey123 add in"?a="survey123addin":e==="mission"?a="mission":e==="mission report"?a="missionreport":e==="mission template"?a="missiontemplate":e==="quickcapture project"?a="quickcaptureproject":e==="pro report"?a="proreport":e==="pro report template"?a="proreporttemplate":e==="urban model"?a="urbanmodel":e==="urban project"?a="urbanproject":e==="web experience"?a="experiencebuilder":e==="web experience template"?a="webexperiencetemplate":e==="experience builder widget"?a="experiencebuilderwidget":e==="experience builder widget package"?a="experiencebuilderwidgetpackage":e==="workflow"?a="workflow":e==="kernel gateway connection"?a="kernelgatewayconnection":e==="insights script"?a="insightsscript":e==="hub initiative template"?a="hubinitiativetemplate":e==="storymap theme"?a="storymaptheme":e==="knowledge graph"?a="knowledgegraph":e==="knowledge graph layer"?a="knowledgegraphlayer":e==="knowledge studio project"?a="knowledgestudio":e==="native application"?a="nativeapp":e==="native application installer"?a="nativeappinstaller":e==="web link chart"?a="linkchart":e==="knowledge graph web investigation"?a="investigation":e==="ogcfeatureserver"?a="features":e==="pro presentation"?a="propresentation":e==="pro project"?a="proproject":e==="insights workbook package"?a="insightsworkbookpackage":e==="apache parquet"?a="apacheparquet":e==="notebook code snippet library"?a="notebookcodesnippets":e==="suitability model"?a="suitabilitymodel":e==="esri classifier definition"?a="classifierdefinition":e==="esri classification schema"?a="classificationschema":e==="insights data engineering workbook"?a="dataengineeringworkbook":e==="insights data engineering model"?a="dataengineeringmodel":e==="deep learning studio project"?a="deeplearningproject":e==="discussion"?a="discussion":e==="allsource project"?a="allsourceproject":e==="api key"?a="apikey":e==="data pipeline"?a="datapipelines":e==="group layer"?(P=t.includes("Map"),a=P?"layergroup2d":"layergroup"):a=e==="media layer"?"onlinemedialayer":e==="form"?t.includes("Survey123")?"survey":"datafilesgray":e==="csv"?"csv":e==="image"?"image":"maps",a?ti(i+a+r+".png"):null}get isLayer(){return this.type!=null&&iH.has(this.type)}get itemCdnUrl(){return g6(this.itemUrl)}get itemPageUrl(){var t;const e=(t=this.portal)==null?void 0:t.itemPageUrl;return e&&this.id?`${e}?id=${this.id}`:null}get itemUrl(){var t;const e=(t=this.portal)==null?void 0:t.restUrl;return e&&this.id?`${e}/content/items/${this.id}`:null}get thumbnailUrl(){var i;const e=this.itemUrl,t=this.thumbnail;return e&&t?((i=this.portal)==null?void 0:i.normalizeUrl(`${e}/info/${t}?f=json`))??null:null}get userItemUrl(){var i,r,a;const e=(i=this.portal)==null?void 0:i.restUrl;if(!e)return null;const t=this.owner||((a=(r=this.portal)==null?void 0:r.user)==null?void 0:a.username);return t?`${e}/content/users/${this.ownerFolder?`${t}/${this.ownerFolder}`:t}/items/${this.id}`:null}load(e){const t=this.portal??(this.portal=er.getDefault()),i=t.load(e).then(()=>this.sourceJSON?this.sourceJSON:this.id&&this.itemUrl?t.request(this.itemUrl,{signal:e!=null?e.signal:null,query:{token:this.apiKey}}):{}).then(r=>{this.sourceJSON=r,this.read(r)});return this.addResolvingPromise(i),Promise.resolve(this)}async addRating(e){const t={method:"post",query:{}},i=e instanceof kw?e.rating:e;return i==null||isNaN(i)||typeof e!="number"||(t.query.rating=i),this.portal?(await this.portal.request(this.itemUrl+"/addRating",t),new kw({rating:i,created:new Date})):null}clone(){const e={access:this.access,accessInformation:this.accessInformation,applicationProxies:te(this.applicationProxies),avgRating:this.avgRating,categories:te(this.categories),classification:te(this.classification),created:te(this.created),culture:this.culture,description:this.description,extent:te(this.extent),groupCategories:te(this.groupCategories),id:this.id,itemControl:this.itemControl,licenseInfo:this.licenseInfo,modified:te(this.modified),name:this.name,numComments:this.numComments,numRatings:this.numRatings,numViews:this.numViews,owner:this.owner,ownerFolder:this.ownerFolder,portal:this.portal,screenshots:te(this.screenshots),size:this.size,snippet:this.snippet,sourceUrl:this.sourceUrl,spatialReference:this.spatialReference,tags:te(this.tags),thumbnail:this.thumbnail,title:this.title,type:this.type,typeKeywords:te(this.typeKeywords),url:this.url};this.loaded&&(e.loadStatus="loaded");const t=new Eu({sourceJSON:this.sourceJSON}).set(e);return t._set("isOrgItem",this.isOrgItem),t}createPostQuery(){var t;const e=this.toJSON();for(const i of["tags","typeKeywords","categories"])e[i]=(t=e[i])==null?void 0:t.join(", ");for(const i of["extent","classification"]){const r=e[i];r&&(e[i]=JSON.stringify(r))}return e}async deleteRating(){await this.portal.request(this.itemUrl+"/deleteRating",{method:"post"})}fetchData(e="json",t){return this.portal.request(this.itemUrl+"/data",{responseType:e,...t,query:{token:this.apiKey}})}async fetchRating(e){const t=await this.portal.request(this.itemUrl+"/rating",{query:{token:this.apiKey},...e});return t.rating!=null?(t.created=new Date(t.created),new kw(t)):null}fetchRelatedItems(e,t){return this.portal.requestToTypedArray(this.itemUrl+"/relatedItems",{query:{...e,token:this.apiKey},...t},Eu)}getThumbnailUrl(e){let t=this.thumbnailUrl;return t&&e&&(t+=`&w=${e}`),t}reload(){return this.portal.request(this.itemUrl??"",{cacheBust:!0,query:{token:this.apiKey}}).then(e=>(this.applicationProxies&&!Object.hasOwn(e,"appProxies")&&(this.applicationProxies=null),this.sourceJSON=e,this.read(e),this))}update(e){return this.id?this.load().then(()=>this.portal.signIn()).then(()=>{const t=e==null?void 0:e.data,i={method:"post"};i.query=this.createPostQuery();for(const r in i.query)i.query[r]===null&&(i.query[r]="");return i.query.clearEmptyFields=!0,t!=null&&(typeof t=="string"?i.query.text=t:typeof t=="object"&&(i.query.text=JSON.stringify(t))),this.portal.request(`${this.userItemUrl}/update`,i).then(()=>this.reload())}):Promise.reject(new Y("portal:item-does-not-exist","The item does not exist yet and cannot be updated"))}async copy(e){if(!this.id)throw new Y("portal:item-does-not-exist","The item does not exist yet");await this.load();const{portal:t,itemUrl:i}=this;await t.signIn();const{copyResources:r,folder:a,tags:p,title:y}=e||{},g={method:"post",query:{copyPrivateResources:r==="all",folder:typeof a=="string"?a:a==null?void 0:a.id,includeResources:!!r,tags:p==null?void 0:p.join(","),title:y}},{itemId:_}=await t.request(`${i}/copy`,g);return new Eu({id:_,portal:t})}updateThumbnail(e){return this.id?this.load().then(()=>this.portal.signIn()).then(()=>{const t=e.thumbnail,i=e.filename,r={method:"post"};if(typeof t=="string")Vh(t)?r.query={data:t}:r.query={url:Gs(t)},i!=null&&(r.query.filename=i);else{const a=new FormData;i!=null?a.append("file",t,i):a.append("file",t),r.body=a}return this.portal.request(`${this.userItemUrl}/updateThumbnail`,r).then(()=>this.reload())}):Promise.reject(new Y("portal:item-does-not-exist","The item does not exist yet and cannot be updated"))}async fetchResources(e={},t){const{fetchResources:i}=await fe(()=>import("./resourceUtils-DlH8wwgx.js"),[]);return i(this,e,t)}async addResource(e,t,i){const{addOrUpdateResources:r}=await fe(()=>import("./resourceUtils-DlH8wwgx.js"),[]);return e.portalItem=this,await r(this,[{resource:e,content:t,compress:i==null?void 0:i.compress,access:i==null?void 0:i.access}],"add",i),e}async removeResource(e,t){const{removeResource:i}=await fe(()=>import("./resourceUtils-DlH8wwgx.js"),[]);if(e.portalItem&&e.portalItem.itemUrl!==this.itemUrl)throw new Y("removeresource:portal-item-mismatch","The portal item associated with the provided resource does not match the item");return i(this,e,t)}async removeAllResources(e){const{removeAllResources:t}=await fe(()=>import("./resourceUtils-DlH8wwgx.js"),[]);return t(this,e)}resourceFromPath(e){return new tH({portalItem:this,path:e})}toJSON(){var i,r;const e=this.extent,t={accessInformation:this.accessInformation,categories:te(this.categories),classification:te(this.classification),created:(i=this.created)==null?void 0:i.getTime(),description:this.description,extent:e&&[[e.xmin,e.ymin],[e.xmax,e.ymax]],id:this.id,isOrgItem:this.isOrgItem,licenseInfo:this.licenseInfo,modified:(r=this.modified)==null?void 0:r.getTime(),name:this.name,owner:this.owner,ownerFolder:this.ownerFolder,snippet:this.snippet,sourceUrl:this.sourceUrl,spatialReference:this.spatialReference,tags:te(this.tags),thumbnail:this.thumbnail,title:this.title,type:this.type,typeKeywords:te(this.typeKeywords),url:this.url};return vU(t)}static fromJSON(e){if(!e)return null;if(e.declaredClass)throw new Error("JSON object is already hydrated");return new Eu({sourceJSON:e})}_getPostQuery(){const e=this.toJSON();for(const t in e)t==="tags"&&e[t]!==null&&(e[t]=e[t].join(", ")),t==="typeKeywords"&&e[t]!==null&&(e[t]=e[t].join(", ")),t==="extent"&&e[t]&&(e[t]=JSON.stringify(e[t]));return e}};v([S({type:["private","shared","org","public"]})],Ke.prototype,"access",void 0),v([S()],Ke.prototype,"accessInformation",void 0),v([S({type:String})],Ke.prototype,"apiKey",void 0),v([S({json:{read:{source:"appProxies"}}})],Ke.prototype,"applicationProxies",void 0),v([S()],Ke.prototype,"avgRating",void 0),v([S()],Ke.prototype,"categories",void 0),v([S()],Ke.prototype,"classification",void 0),v([S({type:Date})],Ke.prototype,"created",void 0),v([S()],Ke.prototype,"culture",void 0),v([S()],Ke.prototype,"description",void 0),v([S({readOnly:!0})],Ke.prototype,"displayName",null),v([S({type:Ct})],Ke.prototype,"extent",void 0),v([me("extent")],Ke.prototype,"readExtent",null),v([S()],Ke.prototype,"groupCategories",void 0),v([S({readOnly:!0})],Ke.prototype,"iconUrl",null),v([S()],Ke.prototype,"id",void 0),v([S({readOnly:!0})],Ke.prototype,"isLayer",null),v([S({type:Boolean,readOnly:!0})],Ke.prototype,"isOrgItem",void 0),v([S()],Ke.prototype,"itemControl",void 0),v([S({readOnly:!0})],Ke.prototype,"itemPageUrl",null),v([S({readOnly:!0})],Ke.prototype,"itemUrl",null),v([S()],Ke.prototype,"licenseInfo",void 0),v([S({type:Date})],Ke.prototype,"modified",void 0),v([S()],Ke.prototype,"name",void 0),v([S()],Ke.prototype,"numComments",void 0),v([S()],Ke.prototype,"numRatings",void 0),v([S()],Ke.prototype,"numViews",void 0),v([S()],Ke.prototype,"owner",void 0),v([S()],Ke.prototype,"ownerFolder",void 0),v([S({type:er})],Ke.prototype,"portal",void 0),v([S()],Ke.prototype,"screenshots",void 0),v([S()],Ke.prototype,"size",void 0),v([S()],Ke.prototype,"snippet",void 0),v([S()],Ke.prototype,"sourceJSON",void 0),v([S({type:String})],Ke.prototype,"sourceUrl",void 0),v([S({type:String})],Ke.prototype,"spatialReference",void 0),v([S()],Ke.prototype,"tags",void 0),v([S()],Ke.prototype,"thumbnail",void 0),v([S({readOnly:!0})],Ke.prototype,"thumbnailUrl",null),v([S()],Ke.prototype,"title",void 0),v([S()],Ke.prototype,"type",void 0),v([S()],Ke.prototype,"typeKeywords",void 0),v([S({type:String,json:{read(e,t){var i;if(rH.has(t.type)){const r=(i=this.portal)==null?void 0:i.restUrl;e||(e=r&&this.id?`${r}/content/items/${this.id}/data`:null)}return e}}})],Ke.prototype,"url",void 0),v([S({readOnly:!0})],Ke.prototype,"userItemUrl",null),Ke=Eu=v([H("esri.portal.PortalItem")],Ke);const m0=Ke,GO=Object.freeze(Object.defineProperty({__proto__:null,default:m0},Symbol.toStringTag,{value:"Module"})),V7=/^([a-z]{2})(?:[-_]([A-Za-z]{2}))?$/,BO={ar:!0,bg:!0,bs:!0,ca:!0,cs:!0,da:!0,de:!0,el:!0,en:!0,es:!0,et:!0,fi:!0,fr:!0,he:!0,hr:!0,hu:!0,id:!0,it:!0,ja:!0,ko:!0,lt:!0,lv:!0,nb:"no",nl:!0,no:!0,pl:!0,pt:"pt-BR","pt-BR":!0,"pt-PT":!0,ro:!0,ru:!0,sk:!0,sl:!0,sr:!0,sv:!0,th:!0,tr:!0,uk:!0,vi:!0,zh:"zh-CN","zh-CN":!0,"zh-HK":!0,"zh-TW":!0};function sH(e){return e in BO}function G7(e){if(sH(e)){const t=BO[e];return t===!0?e:t}return null}const rf=[],wp=new Map;function B7(e){for(const t of wp.keys())HO(e.pattern,t)&&wp.delete(t)}function nH(e){return rf.includes(e)||(B7(e),rf.unshift(e)),yt(()=>{const t=rf.indexOf(e);t>-1&&(rf.splice(t,1),B7(e))})}async function N6(e){const t=Jr();wp.has(e)||wp.set(e,oH(e,t));const i=wp.get(e);return i&&await aH.add(i),i}function qO(e){if(!V7.test(e))return null;const t=V7.exec(e);if(t===null)return null;const[,i,r]=t;return G7(i+(r?"-"+r.toUpperCase():""))??G7(i)}async function oH(e,t){const i=[];for(const r of rf)if(HO(r.pattern,e))try{return await r.fetchMessageBundle(e,t)}catch(a){i.push(a)}throw i.length?new Y("intl:message-bundle-error",`Errors occurred while loading "${e}"`,{errors:i}):new Y("intl:no-message-bundle-loader",`No loader found for message bundle "${e}"`)}function HO(e,t){return typeof e=="string"?t.startsWith(e):e.test(t)}k6(()=>{wp.clear()});const aH=new class{constructor(){this._numLoading=0,this._dfd=null}async waitForAll(){this._dfd&&await this._dfd.promise}add(e){return this._increase(),e.then(()=>this._decrease(),()=>this._decrease()),this.waitForAll()}_increase(){this._numLoading++,this._dfd||(this._dfd=_s())}_decrease(){this._numLoading=Math.max(this._numLoading-1,0),this._dfd&&this._numLoading===0&&(this._dfd.resolve(),this._dfd=null)}};async function lH(e){if(!e)return;const t=e.includes("-vector")?e.slice(0,e.indexOf("-vector")):e.includes("-3d")?e.slice(0,e.indexOf("-3d")):e,i=await N6("esri/t9n/basemaps");return i[e]||i[t]}const Bp={satellite:{id:"satellite",classic:!0,get thumbnailUrl(){return ti("esri/images/basemap/satellite.jpg")},baseMapLayers:[{id:"satellite-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Imagery",showLegend:!1,visibility:!0,opacity:1}]},hybrid:{id:"hybrid",classic:!0,get thumbnailUrl(){return ti("esri/images/basemap/hybrid.jpg")},baseMapLayers:[{id:"hybrid-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Imagery",showLegend:!1,visibility:!0,opacity:1},{id:"hybrid-reference-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/30d6b8271e1849cd9c3042060001f425/resources/styles/root.json",layerType:"VectorTileLayer",title:"Hybrid Reference Layer",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},terrain:{id:"terrain",classic:!0,get thumbnailUrl(){return ti("esri/images/basemap/terrain.jpg")},baseMapLayers:[{id:"terrain-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Terrain_Base/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Terrain Base",showLegend:!1,visibility:!0,opacity:1},{id:"terrain-reference-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/Reference/World_Reference_Overlay/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Reference Overlay",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},oceans:{id:"oceans",classic:!0,get thumbnailUrl(){return ti("esri/images/basemap/oceans.jpg")},baseMapLayers:[{id:"oceans-base-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Ocean/World_Ocean_Base/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Ocean Base",showLegend:!1,visibility:!0,opacity:1},{id:"oceans-reference-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Ocean/World_Ocean_Reference/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Ocean Reference",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},osm:{id:"osm",classic:!0,get thumbnailUrl(){return ti("esri/images/basemap/osm.jpg")},baseMapLayers:[{id:"osm-base-layer",layerType:"OpenStreetMap",title:"Open Street Map",showLegend:!1,visibility:!0,opacity:1}]},"dark-gray-vector":{id:"dark-gray-vector",classic:!0,get thumbnailUrl(){return ti("esri/images/basemap/dark-gray-vector.jpg")},baseMapLayers:[{id:"dark-gray-base-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/5e9b3685f4c24d8781073dd928ebda50/resources/styles/root.json",layerType:"VectorTileLayer",title:"Dark Gray Base",visibility:!0,opacity:1},{id:"dark-gray-reference-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/747cb7a5329c478cbe6981076cc879c5/resources/styles/root.json",layerType:"VectorTileLayer",title:"Dark Gray Reference",isReference:!0,visibility:!0,opacity:1}]},get"dark-gray"(){return{...this["dark-gray-vector"],id:"dark-gray"}},"gray-vector":{id:"gray-vector",classic:!0,get thumbnailUrl(){return ti("esri/images/basemap/gray-vector.jpg")},baseMapLayers:[{id:"gray-base-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/291da5eab3a0412593b66d384379f89f/resources/styles/root.json",layerType:"VectorTileLayer",title:"Light Gray Base",visibility:!0,opacity:1},{id:"gray-reference-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/1768e8369a214dfab4e2167d5c5f2454/resources/styles/root.json",layerType:"VectorTileLayer",title:"Light Gray Reference",isReference:!0,visibility:!0,opacity:1}]},get gray(){return{...this["gray-vector"],id:"gray"}},"streets-vector":{id:"streets-vector",classic:!0,get thumbnailUrl(){return ti("esri/images/basemap/streets-vector.jpg")},baseMapLayers:[{id:"streets-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/de26a3cf4cc9451298ea173c4b324736/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Streets",visibility:!0,opacity:1}]},get streets(){return{...this["streets-vector"],id:"streets"}},"topo-vector":{id:"topo-vector",classic:!0,get thumbnailUrl(){return ti("esri/images/basemap/topo-vector.jpg")},baseMapLayers:[{id:"world-hillshade-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Hillshade",showLegend:!1,visibility:!0,opacity:1},{id:"topo-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/7dc6cea0b1764a1f9af2e679f642f0f5/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Topo",visibility:!0,opacity:1}]},get topo(){return{...this["topo-vector"],id:"topo"}},"streets-night-vector":{id:"streets-night-vector",classic:!0,get thumbnailUrl(){return ti("esri/images/basemap/streets-night.jpg")},baseMapLayers:[{id:"streets-night-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/86f556a2d1fd468181855a35e344567f/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Streets Night",visibility:!0,opacity:1}]},"streets-relief-vector":{id:"streets-relief-vector",classic:!0,get thumbnailUrl(){return ti("esri/images/basemap/streets-relief.jpg")},baseMapLayers:[{id:"world-hillshade-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Hillshade",showLegend:!1,visibility:!0,opacity:1},{id:"streets-relief-vector-base-layer",styleUrl:"//www.arcgis.com/sharing/rest/content/items/b266e6d17fc345b498345613930fbd76/resources/styles/root.json",title:"World Streets Relief",layerType:"VectorTileLayer",visibility:!0,opacity:1}]},"streets-navigation-vector":{id:"streets-navigation-vector",classic:!0,get thumbnailUrl(){return ti("esri/images/basemap/streets-navigation.jpg")},baseMapLayers:[{id:"streets-navigation-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/63c47b7177f946b49902c24129b87252/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Streets Navigation",visibility:!0,opacity:1}]},"topo-3d":{id:"topo-3d",is3d:!0,get thumbnailUrl(){return ti("esri/images/basemap/topo-3d.png")},baseMapLayers:[{id:"topo-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/1e7d1784d1ef4b79ba6764d0bd6c3150/resources/styles/root.json",layerType:"VectorTileLayer",title:"Topographic",visibility:!0,opacity:1},{id:"topo-3d-trees",title:"Trees",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Trees_Thematic_v1/SceneServer",itemId:"f75fef56b2d944fe92ef9f7737b4f953",layerType:"ArcGISSceneServiceLayer"},{id:"topo-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_DarkLabels_v1/SceneServer",itemId:"a84404ad39c64c328d0596e361ec459b",layerType:"ArcGISSceneServiceLayer"},{id:"topo-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Buildings_v1/SceneServer",itemId:"ca0470dbbddb4db28bad74ed39949e25",layerType:"ArcGISSceneServiceLayer"}]},"navigation-3d":{id:"navigation-3d",is3d:!0,get thumbnailUrl(){return ti("esri/images/basemap/navigation-3d.jpg")},baseMapLayers:[{id:"navigation-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/ccc904ff872b4144b94934e55e32784b/resources/styles/root.json",layerType:"VectorTileLayer",title:"Navigation",visibility:!0,opacity:1},{id:"navigation-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_DarkLabels_v1/SceneServer",itemId:"a84404ad39c64c328d0596e361ec459b",layerType:"ArcGISSceneServiceLayer"},{id:"navigation-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Buildings_v1/SceneServer",itemId:"ca0470dbbddb4db28bad74ed39949e25",layerType:"ArcGISSceneServiceLayer"}]},"streets-3d":{id:"streets-3d",is3d:!0,get thumbnailUrl(){return ti("esri/images/basemap/streets-3d.png")},baseMapLayers:[{id:"streets-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/198298c4c64c4cb19de5b46aa00c198d/resources/styles/root.json",layerType:"VectorTileLayer",title:"Streets",visibility:!0,opacity:1},{id:"streets-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_DarkLabels_v1/SceneServer",itemId:"a84404ad39c64c328d0596e361ec459b",layerType:"ArcGISSceneServiceLayer"},{id:"streets-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Buildings_v1/SceneServer",itemId:"ca0470dbbddb4db28bad74ed39949e25",layerType:"ArcGISSceneServiceLayer"}]},"osm-3d":{id:"osm-3d",is3d:!0,get thumbnailUrl(){return ti("esri/images/basemap/osm-3d.png")},baseMapLayers:[{id:"osm-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/8628d259c9d14bdc848771c23c513940/resources/styles/root.json",layerType:"VectorTileLayer",title:"OpenStreetMap",visibility:!0,opacity:1},{id:"osm-3d-trees",title:"Trees",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Trees_Thematic_v1/SceneServer",itemId:"f75fef56b2d944fe92ef9f7737b4f953",layerType:"ArcGISSceneServiceLayer"},{id:"osm-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_DarkLabels_v1/SceneServer",itemId:"a84404ad39c64c328d0596e361ec459b",layerType:"ArcGISSceneServiceLayer"},{id:"osm-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Buildings_v1/SceneServer",itemId:"ca0470dbbddb4db28bad74ed39949e25",layerType:"ArcGISSceneServiceLayer"}]},"gray-3d":{id:"gray-3d",is3d:!0,get thumbnailUrl(){return ti("esri/images/basemap/gray-3d.png")},baseMapLayers:[{id:"gray-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/01a14b466345455ba4176d2e6390db92/resources/styles/root.json",layerType:"VectorTileLayer",title:"Streets",visibility:!0,opacity:1},{id:"gray-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_DarkLabels_v1/SceneServer",itemId:"a84404ad39c64c328d0596e361ec459b",layerType:"ArcGISSceneServiceLayer"},{id:"gray-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Buildings_v1/SceneServer",itemId:"ca0470dbbddb4db28bad74ed39949e25",layerType:"ArcGISSceneServiceLayer"}]},"navigation-dark-3d":{id:"navigation-dark-3d",itemId:"5a1365328b4943f09a54cf5fd1205707",is3d:!0,baseMapLayers:[{id:"navigation-dark-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/451a1777ab3f4bf095fae24a117439d9/resources/styles/root.json",layerType:"VectorTileLayer",title:"Navigation Dark"},{id:"navigation-dark-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_LightLabels_v1/SceneServer/layers/0",itemId:"f364b70b012a4da5a4b5921e193eac4a",layerType:"ArcGISSceneServiceLayer"},{id:"navigation-dark-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Buildings_v1/SceneServer",itemId:"ca0470dbbddb4db28bad74ed39949e25",layerType:"ArcGISSceneServiceLayer"}]},"streets-dark-3d":{id:"streets-dark-3d",itemId:"8a4efa2c20484ec9b4557895e65736ff",is3d:!0,baseMapLayers:[{id:"streets-dark-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/bc599b6d741a4ac084b7eea7bf8c5938/resources/styles/root.json",layerType:"VectorTileLayer",title:"OpenStreetMap Streets Night (for 3D)"},{id:"streets-dark-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_LightLabels_v1/SceneServer",itemId:"f364b70b012a4da5a4b5921e193eac4a",layerType:"ArcGISSceneServiceLayer"},{id:"streets-dark-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Buildings_v1/SceneServer",itemId:"ca0470dbbddb4db28bad74ed39949e25",layerType:"ArcGISSceneServiceLayer"}]},"dark-gray-3d":{id:"dark-gray-3d",itemId:"a8b7322a5fe94002bb0f5e0eeb0c5c18",is3d:!0,baseMapLayers:[{id:"dark-gray-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/4178f71acb934fb89f169e7d667c20c6/resources/styles/root.json",layerType:"VectorTileLayer",title:"OpenStreetMap Dark Gray Canvas (for 3D)"},{id:"dark-gray-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_LightLabels_v1/SceneServer/layers/0",itemId:"f364b70b012a4da5a4b5921e193eac4a",layerType:"ArcGISSceneServiceLayer"},{id:"dark-gray-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Buildings_v1/SceneServer",itemId:"ca0470dbbddb4db28bad74ed39949e25",layerType:"ArcGISSceneServiceLayer"}]}},bo="system",Lh="unknown",Kl="UTC",uH=Intl.DateTimeFormat().resolvedOptions().timeZone,q7=new Map([["AUS Central Standard Time","Australia/Darwin"],["AUS Eastern Standard Time","Australia/Sydney"],["Afghanistan Standard Time","Asia/Kabul"],["Alaskan Standard Time","America/Anchorage"],["Aleutian Standard Time","America/Adak"],["Altai Standard Time","Asia/Barnaul"],["Arab Standard Time","Asia/Riyadh"],["Arabian Standard Time","Asia/Dubai"],["Arabic Standard Time","Asia/Baghdad"],["Argentina Standard Time","America/Buenos_Aires"],["Astrakhan Standard Time","Europe/Astrakhan"],["Atlantic Standard Time","America/Halifax"],["Aus Central W. Standard Time","Australia/Eucla"],["Azerbaijan Standard Time","Asia/Baku"],["Azores Standard Time","Atlantic/Azores"],["Bahia Standard Time","America/Bahia"],["Bangladesh Standard Time","Asia/Dhaka"],["Belarus Standard Time","Europe/Minsk"],["Bougainville Standard Time","Pacific/Bougainville"],["Canada Central Standard Time","America/Regina"],["Cape Verde Standard Time","Atlantic/Cape_Verde"],["Caucasus Standard Time","Asia/Yerevan"],["Cen. Australia Standard Time","Australia/Adelaide"],["Central America Standard Time","America/Guatemala"],["Central Asia Standard Time","Asia/Bishkek"],["Central Brazilian Standard Time","America/Cuiaba"],["Central Europe Standard Time","Europe/Budapest"],["Central European Standard Time","Europe/Warsaw"],["Central Pacific Standard Time","Pacific/Guadalcanal"],["Central Standard Time","America/Chicago"],["Central Standard Time (Mexico)","America/Mexico_City"],["Chatham Islands Standard Time","Pacific/Chatham"],["China Standard Time","Asia/Shanghai"],["Cuba Standard Time","America/Havana"],["Dateline Standard Time","Etc/GMT+12"],["E. Africa Standard Time","Africa/Nairobi"],["E. Australia Standard Time","Australia/Brisbane"],["E. Europe Standard Time","Europe/Chisinau"],["E. South America Standard Time","America/Sao_Paulo"],["Easter Island Standard Time","Pacific/Easter"],["Eastern Standard Time","America/New_York"],["Eastern Standard Time (Mexico)","America/Cancun"],["Egypt Standard Time","Africa/Cairo"],["Ekaterinburg Standard Time","Asia/Yekaterinburg"],["FLE Standard Time","Europe/Kiev"],["Fiji Standard Time","Pacific/Fiji"],["GMT Standard Time","Europe/London"],["GTB Standard Time","Europe/Bucharest"],["Georgian Standard Time","Asia/Tbilisi"],["Greenland Standard Time","America/Godthab"],["Greenwich Standard Time","Atlantic/Reykjavik"],["Haiti Standard Time","America/Port-au-Prince"],["Hawaiian Standard Time","Pacific/Honolulu"],["India Standard Time","Asia/Calcutta"],["Iran Standard Time","Asia/Tehran"],["Israel Standard Time","Asia/Jerusalem"],["Jordan Standard Time","Asia/Amman"],["Kaliningrad Standard Time","Europe/Kaliningrad"],["Korea Standard Time","Asia/Seoul"],["Libya Standard Time","Africa/Tripoli"],["Line Islands Standard Time","Pacific/Kiritimati"],["Lord Howe Standard Time","Australia/Lord_Howe"],["Magadan Standard Time","Asia/Magadan"],["Magallanes Standard Time","America/Punta_Arenas"],["Marquesas Standard Time","Pacific/Marquesas"],["Mauritius Standard Time","Indian/Mauritius"],["Middle East Standard Time","Asia/Beirut"],["Montevideo Standard Time","America/Montevideo"],["Morocco Standard Time","Africa/Casablanca"],["Mountain Standard Time","America/Denver"],["Mountain Standard Time (Mexico)","America/Mazatlan"],["Myanmar Standard Time","Asia/Rangoon"],["N. Central Asia Standard Time","Asia/Novosibirsk"],["Namibia Standard Time","Africa/Windhoek"],["Nepal Standard Time","Asia/Katmandu"],["New Zealand Standard Time","Pacific/Auckland"],["Newfoundland Standard Time","America/St_Johns"],["Norfolk Standard Time","Pacific/Norfolk"],["North Asia East Standard Time","Asia/Irkutsk"],["North Asia Standard Time","Asia/Krasnoyarsk"],["North Korea Standard Time","Asia/Pyongyang"],["Omsk Standard Time","Asia/Omsk"],["Pacific SA Standard Time","America/Santiago"],["Pacific Standard Time","America/Los_Angeles"],["Pacific Standard Time (Mexico)","America/Tijuana"],["Pakistan Standard Time","Asia/Karachi"],["Paraguay Standard Time","America/Asuncion"],["Qyzylorda Standard Time","Asia/Qyzylorda"],["Romance Standard Time","Europe/Paris"],["Russia Time Zone 10","Asia/Srednekolymsk"],["Russia Time Zone 11","Asia/Kamchatka"],["Russia Time Zone 3","Europe/Samara"],["Russian Standard Time","Europe/Moscow"],["SA Eastern Standard Time","America/Cayenne"],["SA Pacific Standard Time","America/Bogota"],["SA Western Standard Time","America/La_Paz"],["SE Asia Standard Time","Asia/Bangkok"],["Saint Pierre Standard Time","America/Miquelon"],["Sakhalin Standard Time","Asia/Sakhalin"],["Samoa Standard Time","Pacific/Apia"],["Sao Tome Standard Time","Africa/Sao_Tome"],["Saratov Standard Time","Europe/Saratov"],["Singapore Standard Time","Asia/Singapore"],["South Africa Standard Time","Africa/Johannesburg"],["South Sudan Standard Time","Africa/Juba"],["Sri Lanka Standard Time","Asia/Colombo"],["Sudan Standard Time","Africa/Khartoum"],["Syria Standard Time","Asia/Damascus"],["Taipei Standard Time","Asia/Taipei"],["Tasmania Standard Time","Australia/Hobart"],["Tocantins Standard Time","America/Araguaina"],["Tokyo Standard Time","Asia/Tokyo"],["Tomsk Standard Time","Asia/Tomsk"],["Tonga Standard Time","Pacific/Tongatapu"],["Transbaikal Standard Time","Asia/Chita"],["Turkey Standard Time","Europe/Istanbul"],["Turks And Caicos Standard Time","America/Grand_Turk"],["US Eastern Standard Time","America/Indianapolis"],["US Mountain Standard Time","America/Phoenix"],["UTC","Etc/GMT"],["UTC+01","Etc/GMT-1"],["UTC+02","Etc/GMT-2"],["UTC+03","Etc/GMT-3"],["UTC+04","Etc/GMT-4"],["UTC+05","Etc/GMT-5"],["UTC+06","Etc/GMT-6"],["UTC+07","Etc/GMT-7"],["UTC+08","Etc/GMT-8"],["UTC+09","Etc/GMT-9"],["UTC+10","Etc/GMT-10"],["UTC+11","Etc/GMT-11"],["UTC+12","Etc/GMT-12"],["UTC+13","Etc/GMT-13"],["UTC+14","Etc/GMT-14"],["UTC-01","Etc/GMT+1"],["UTC-02","Etc/GMT+2"],["UTC-03","Etc/GMT+3"],["UTC-04","Etc/GMT+4"],["UTC-05","Etc/GMT+5"],["UTC-06","Etc/GMT+6"],["UTC-07","Etc/GMT+7"],["UTC-08","Etc/GMT+8"],["UTC-09","Etc/GMT+9"],["UTC-10","Etc/GMT+10"],["UTC-11","Etc/GMT+11"],["UTC-12","Etc/GMT+12"],["Ulaanbaatar Standard Time","Asia/Ulaanbaatar"],["Venezuela Standard Time","America/Caracas"],["Vladivostok Standard Time","Asia/Vladivostok"],["Volgograd Standard Time","Europe/Volgograd"],["W. Australia Standard Time","Australia/Perth"],["W. Central Africa Standard Time","Africa/Lagos"],["W. Europe Standard Time","Europe/Berlin"],["W. Mongolia Standard Time","Asia/Hovd"],["West Asia Standard Time","Asia/Tashkent"],["West Bank Standard Time","Asia/Hebron"],["West Pacific Standard Time","Pacific/Port_Moresby"],["Yakutsk Standard Time","Asia/Yakutsk"],["Yukon Standard Time","America/Whitehorse"]]);class qh extends Error{}class hH extends qh{constructor(t){super(`Invalid DateTime: ${t.toMessage()}`)}}class cH extends qh{constructor(t){super(`Invalid Interval: ${t.toMessage()}`)}}class pH extends qh{constructor(t){super(`Invalid Duration: ${t.toMessage()}`)}}class lp extends qh{}class WO extends qh{constructor(t){super(`Invalid unit ${t}`)}}class cr extends qh{}class Ua extends qh{constructor(){super("Zone is an abstract class")}}const Me="numeric",Ln="short",ws="long",ev={year:Me,month:Me,day:Me},JO={year:Me,month:Ln,day:Me},dH={year:Me,month:Ln,day:Me,weekday:Ln},ZO={year:Me,month:ws,day:Me},KO={year:Me,month:ws,day:Me,weekday:ws},YO={hour:Me,minute:Me},XO={hour:Me,minute:Me,second:Me},QO={hour:Me,minute:Me,second:Me,timeZoneName:Ln},eP={hour:Me,minute:Me,second:Me,timeZoneName:ws},tP={hour:Me,minute:Me,hourCycle:"h23"},iP={hour:Me,minute:Me,second:Me,hourCycle:"h23"},rP={hour:Me,minute:Me,second:Me,hourCycle:"h23",timeZoneName:Ln},sP={hour:Me,minute:Me,second:Me,hourCycle:"h23",timeZoneName:ws},nP={year:Me,month:Me,day:Me,hour:Me,minute:Me},oP={year:Me,month:Me,day:Me,hour:Me,minute:Me,second:Me},aP={year:Me,month:Ln,day:Me,hour:Me,minute:Me},lP={year:Me,month:Ln,day:Me,hour:Me,minute:Me,second:Me},fH={year:Me,month:Ln,day:Me,weekday:Ln,hour:Me,minute:Me},uP={year:Me,month:ws,day:Me,hour:Me,minute:Me,timeZoneName:Ln},hP={year:Me,month:ws,day:Me,hour:Me,minute:Me,second:Me,timeZoneName:Ln},cP={year:Me,month:ws,day:Me,weekday:ws,hour:Me,minute:Me,timeZoneName:ws},pP={year:Me,month:ws,day:Me,weekday:ws,hour:Me,minute:Me,second:Me,timeZoneName:ws};class Hh{get type(){throw new Ua}get name(){throw new Ua}get ianaName(){return this.name}get isUniversal(){throw new Ua}offsetName(t,i){throw new Ua}formatOffset(t,i){throw new Ua}offset(t){throw new Ua}equals(t){throw new Ua}get isValid(){throw new Ua}}let Rw=null;class a2 extends Hh{static get instance(){return Rw===null&&(Rw=new a2),Rw}get type(){return"system"}get name(){return new Intl.DateTimeFormat().resolvedOptions().timeZone}get isUniversal(){return!1}offsetName(t,{format:i,locale:r}){return _P(t,i,r)}formatOffset(t,i){return g0(this.offset(t),i)}offset(t){return-new Date(t).getTimezoneOffset()}equals(t){return t.type==="system"}get isValid(){return!0}}let fm={};function yH(e){return fm[e]||(fm[e]=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:e,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",era:"short"})),fm[e]}const mH={year:0,month:1,day:2,era:3,hour:4,minute:5,second:6};function gH(e,t){const i=e.format(t).replace(/\u200E/g,""),r=/(\d+)\/(\d+)\/(\d+) (AD|BC),? (\d+):(\d+):(\d+)/.exec(i),[,a,p,y,g,_,T,I]=r;return[y,a,p,g,_,T,I]}function vH(e,t){const i=e.formatToParts(t),r=[];for(let a=0;a<i.length;a++){const{type:p,value:y}=i[a],g=mH[p];p==="era"?r[g]=y:Ye(g)||(r[g]=parseInt(y,10))}return r}let ay={};class Qr extends Hh{static create(t){return ay[t]||(ay[t]=new Qr(t)),ay[t]}static resetCache(){ay={},fm={}}static isValidSpecifier(t){return this.isValidZone(t)}static isValidZone(t){if(!t)return!1;try{return new Intl.DateTimeFormat("en-US",{timeZone:t}).format(),!0}catch{return!1}}constructor(t){super(),this.zoneName=t,this.valid=Qr.isValidZone(t)}get type(){return"iana"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(t,{format:i,locale:r}){return _P(t,i,r,this.name)}formatOffset(t,i){return g0(this.offset(t),i)}offset(t){const i=new Date(t);if(isNaN(i))return NaN;const r=yH(this.name);let[a,p,y,g,_,T,I]=r.formatToParts?vH(r,i):gH(r,i);g==="BC"&&(a=-Math.abs(a)+1);const P=u2({year:a,month:p,day:y,hour:_===24?0:_,minute:T,second:I,millisecond:0});let N=+i;const D=N%1e3;return N-=D>=0?D:1e3+D,(P-N)/(60*1e3)}equals(t){return t.type==="iana"&&t.name===this.name}get isValid(){return this.valid}}let H7={};function wH(e,t={}){const i=JSON.stringify([e,t]);let r=H7[i];return r||(r=new Intl.ListFormat(e,t),H7[i]=r),r}let K3={};function Y3(e,t={}){const i=JSON.stringify([e,t]);let r=K3[i];return r||(r=new Intl.DateTimeFormat(e,t),K3[i]=r),r}let X3={};function bH(e,t={}){const i=JSON.stringify([e,t]);let r=X3[i];return r||(r=new Intl.NumberFormat(e,t),X3[i]=r),r}let Q3={};function _H(e,t={}){const{base:i,...r}=t,a=JSON.stringify([e,r]);let p=Q3[a];return p||(p=new Intl.RelativeTimeFormat(e,t),Q3[a]=p),p}let sf=null;function SH(){return sf||(sf=new Intl.DateTimeFormat().resolvedOptions().locale,sf)}let W7={};function xH(e){let t=W7[e];if(!t){const i=new Intl.Locale(e);t="getWeekInfo"in i?i.getWeekInfo():i.weekInfo,W7[e]=t}return t}function TH(e){const t=e.indexOf("-x-");t!==-1&&(e=e.substring(0,t));const i=e.indexOf("-u-");if(i===-1)return[e];{let r,a;try{r=Y3(e).resolvedOptions(),a=e}catch{const _=e.substring(0,i);r=Y3(_).resolvedOptions(),a=_}const{numberingSystem:p,calendar:y}=r;return[a,p,y]}}function MH(e,t,i){return(i||t)&&(e.includes("-u-")||(e+="-u"),i&&(e+=`-ca-${i}`),t&&(e+=`-nu-${t}`)),e}function $H(e){const t=[];for(let i=1;i<=12;i++){const r=Ne.utc(2009,i,1);t.push(e(r))}return t}function EH(e){const t=[];for(let i=1;i<=7;i++){const r=Ne.utc(2016,11,13+i);t.push(e(r))}return t}function ly(e,t,i,r){const a=e.listingMode();return a==="error"?null:a==="en"?i(t):r(t)}function IH(e){return e.numberingSystem&&e.numberingSystem!=="latn"?!1:e.numberingSystem==="latn"||!e.locale||e.locale.startsWith("en")||new Intl.DateTimeFormat(e.intl).resolvedOptions().numberingSystem==="latn"}class AH{constructor(t,i,r){this.padTo=r.padTo||0,this.floor=r.floor||!1;const{padTo:a,floor:p,...y}=r;if(!i||Object.keys(y).length>0){const g={useGrouping:!1,...r};r.padTo>0&&(g.minimumIntegerDigits=r.padTo),this.inf=bH(t,g)}}format(t){if(this.inf){const i=this.floor?Math.floor(t):t;return this.inf.format(i)}else{const i=this.floor?Math.floor(t):z6(t,3);return _i(i,this.padTo)}}}class CH{constructor(t,i,r){this.opts=r,this.originalZone=void 0;let a;if(this.opts.timeZone)this.dt=t;else if(t.zone.type==="fixed"){const y=-1*(t.offset/60),g=y>=0?`Etc/GMT+${y}`:`Etc/GMT${y}`;t.offset!==0&&Qr.create(g).valid?(a=g,this.dt=t):(a="UTC",this.dt=t.offset===0?t:t.setZone("UTC").plus({minutes:t.offset}),this.originalZone=t.zone)}else t.zone.type==="system"?this.dt=t:t.zone.type==="iana"?(this.dt=t,a=t.zone.name):(a="UTC",this.dt=t.setZone("UTC").plus({minutes:t.offset}),this.originalZone=t.zone);const p={...this.opts};p.timeZone=p.timeZone||a,this.dtf=Y3(i,p)}format(){return this.originalZone?this.formatToParts().map(({value:t})=>t).join(""):this.dtf.format(this.dt.toJSDate())}formatToParts(){const t=this.dtf.formatToParts(this.dt.toJSDate());return this.originalZone?t.map(i=>{if(i.type==="timeZoneName"){const r=this.originalZone.offsetName(this.dt.ts,{locale:this.dt.locale,format:this.opts.timeZoneName});return{...i,value:r}}else return i}):t}resolvedOptions(){return this.dtf.resolvedOptions()}}class OH{constructor(t,i,r){this.opts={style:"long",...r},!i&&wP()&&(this.rtf=_H(t,r))}format(t,i){return this.rtf?this.rtf.format(t,i):eW(i,t,this.opts.numeric,this.opts.style!=="long")}formatToParts(t,i){return this.rtf?this.rtf.formatToParts(t,i):[]}}const PH={firstDay:1,minimalDays:4,weekend:[6,7]};class Et{static fromOpts(t){return Et.create(t.locale,t.numberingSystem,t.outputCalendar,t.weekSettings,t.defaultToEN)}static create(t,i,r,a,p=!1){const y=t||ci.defaultLocale,g=y||(p?"en-US":SH()),_=i||ci.defaultNumberingSystem,T=r||ci.defaultOutputCalendar,I=e5(a)||ci.defaultWeekSettings;return new Et(g,_,T,I,y)}static resetCache(){sf=null,K3={},X3={},Q3={}}static fromObject({locale:t,numberingSystem:i,outputCalendar:r,weekSettings:a}={}){return Et.create(t,i,r,a)}constructor(t,i,r,a,p){const[y,g,_]=TH(t);this.locale=y,this.numberingSystem=i||g||null,this.outputCalendar=r||_||null,this.weekSettings=a,this.intl=MH(this.locale,this.numberingSystem,this.outputCalendar),this.weekdaysCache={format:{},standalone:{}},this.monthsCache={format:{},standalone:{}},this.meridiemCache=null,this.eraCache={},this.specifiedLocale=p,this.fastNumbersCached=null}get fastNumbers(){return this.fastNumbersCached==null&&(this.fastNumbersCached=IH(this)),this.fastNumbersCached}listingMode(){const t=this.isEnglish(),i=(this.numberingSystem===null||this.numberingSystem==="latn")&&(this.outputCalendar===null||this.outputCalendar==="gregory");return t&&i?"en":"intl"}clone(t){return!t||Object.getOwnPropertyNames(t).length===0?this:Et.create(t.locale||this.specifiedLocale,t.numberingSystem||this.numberingSystem,t.outputCalendar||this.outputCalendar,e5(t.weekSettings)||this.weekSettings,t.defaultToEN||!1)}redefaultToEN(t={}){return this.clone({...t,defaultToEN:!0})}redefaultToSystem(t={}){return this.clone({...t,defaultToEN:!1})}months(t,i=!1){return ly(this,t,TP,()=>{const r=i?{month:t,day:"numeric"}:{month:t},a=i?"format":"standalone";return this.monthsCache[a][t]||(this.monthsCache[a][t]=$H(p=>this.extract(p,r,"month"))),this.monthsCache[a][t]})}weekdays(t,i=!1){return ly(this,t,EP,()=>{const r=i?{weekday:t,year:"numeric",month:"long",day:"numeric"}:{weekday:t},a=i?"format":"standalone";return this.weekdaysCache[a][t]||(this.weekdaysCache[a][t]=EH(p=>this.extract(p,r,"weekday"))),this.weekdaysCache[a][t]})}meridiems(){return ly(this,void 0,()=>IP,()=>{if(!this.meridiemCache){const t={hour:"numeric",hourCycle:"h12"};this.meridiemCache=[Ne.utc(2016,11,13,9),Ne.utc(2016,11,13,19)].map(i=>this.extract(i,t,"dayperiod"))}return this.meridiemCache})}eras(t){return ly(this,t,AP,()=>{const i={era:t};return this.eraCache[t]||(this.eraCache[t]=[Ne.utc(-40,1,1),Ne.utc(2017,1,1)].map(r=>this.extract(r,i,"era"))),this.eraCache[t]})}extract(t,i,r){const a=this.dtFormatter(t,i),p=a.formatToParts(),y=p.find(g=>g.type.toLowerCase()===r);return y?y.value:null}numberFormatter(t={}){return new AH(this.intl,t.forceSimple||this.fastNumbers,t)}dtFormatter(t,i={}){return new CH(t,this.intl,i)}relFormatter(t={}){return new OH(this.intl,this.isEnglish(),t)}listFormatter(t={}){return wH(this.intl,t)}isEnglish(){return this.locale==="en"||this.locale.toLowerCase()==="en-us"||new Intl.DateTimeFormat(this.intl).resolvedOptions().locale.startsWith("en-us")}getWeekSettings(){return this.weekSettings?this.weekSettings:bP()?xH(this.locale):PH}getStartOfWeek(){return this.getWeekSettings().firstDay}getMinDaysInFirstWeek(){return this.getWeekSettings().minimalDays}getWeekendDays(){return this.getWeekSettings().weekend}equals(t){return this.locale===t.locale&&this.numberingSystem===t.numberingSystem&&this.outputCalendar===t.outputCalendar}toString(){return`Locale(${this.locale}, ${this.numberingSystem}, ${this.outputCalendar})`}}let Nw=null;class Vi extends Hh{static get utcInstance(){return Nw===null&&(Nw=new Vi(0)),Nw}static instance(t){return t===0?Vi.utcInstance:new Vi(t)}static parseSpecifier(t){if(t){const i=t.match(/^utc(?:([+-]\d{1,2})(?::(\d{2}))?)?$/i);if(i)return new Vi(h2(i[1],i[2]))}return null}constructor(t){super(),this.fixed=t}get type(){return"fixed"}get name(){return this.fixed===0?"UTC":`UTC${g0(this.fixed,"narrow")}`}get ianaName(){return this.fixed===0?"Etc/UTC":`Etc/GMT${g0(-this.fixed,"narrow")}`}offsetName(){return this.name}formatOffset(t,i){return g0(this.fixed,i)}get isUniversal(){return!0}offset(){return this.fixed}equals(t){return t.type==="fixed"&&t.fixed===this.fixed}get isValid(){return!0}}class kH extends Hh{constructor(t){super(),this.zoneName=t}get type(){return"invalid"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(){return null}formatOffset(){return""}offset(){return NaN}equals(){return!1}get isValid(){return!1}}function Al(e,t){if(Ye(e)||e===null)return t;if(e instanceof Hh)return e;if(FH(e)){const i=e.toLowerCase();return i==="default"?t:i==="local"||i==="system"?a2.instance:i==="utc"||i==="gmt"?Vi.utcInstance:Vi.parseSpecifier(i)||Qr.create(e)}else return Ul(e)?Vi.instance(e):typeof e=="object"&&"offset"in e&&typeof e.offset=="function"?e:new kH(e)}const L6={arab:"[٠-٩]",arabext:"[۰-۹]",bali:"[᭐-᭙]",beng:"[০-৯]",deva:"[०-९]",fullwide:"[０-９]",gujr:"[૦-૯]",hanidec:"[〇|一|二|三|四|五|六|七|八|九]",khmr:"[០-៩]",knda:"[೦-೯]",laoo:"[໐-໙]",limb:"[᥆-᥏]",mlym:"[൦-൯]",mong:"[᠐-᠙]",mymr:"[၀-၉]",orya:"[୦-୯]",tamldec:"[௦-௯]",telu:"[౦-౯]",thai:"[๐-๙]",tibt:"[༠-༩]",latn:"\\d"},J7={arab:[1632,1641],arabext:[1776,1785],bali:[6992,7001],beng:[2534,2543],deva:[2406,2415],fullwide:[65296,65303],gujr:[2790,2799],khmr:[6112,6121],knda:[3302,3311],laoo:[3792,3801],limb:[6470,6479],mlym:[3430,3439],mong:[6160,6169],mymr:[4160,4169],orya:[2918,2927],tamldec:[3046,3055],telu:[3174,3183],thai:[3664,3673],tibt:[3872,3881]},RH=L6.hanidec.replace(/[\[|\]]/g,"").split("");function NH(e){let t=parseInt(e,10);if(isNaN(t)){t="";for(let i=0;i<e.length;i++){const r=e.charCodeAt(i);if(e[i].search(L6.hanidec)!==-1)t+=RH.indexOf(e[i]);else for(const a in J7){const[p,y]=J7[a];r>=p&&r<=y&&(t+=r-p)}}return parseInt(t,10)}else return t}let bc={};function LH(){bc={}}function on({numberingSystem:e},t=""){const i=e||"latn";return bc[i]||(bc[i]={}),bc[i][t]||(bc[i][t]=new RegExp(`${L6[i]}${t}`)),bc[i][t]}let Z7=()=>Date.now(),K7="system",Y7=null,X7=null,Q7=null,eT=60,tT,iT=null;class ci{static get now(){return Z7}static set now(t){Z7=t}static set defaultZone(t){K7=t}static get defaultZone(){return Al(K7,a2.instance)}static get defaultLocale(){return Y7}static set defaultLocale(t){Y7=t}static get defaultNumberingSystem(){return X7}static set defaultNumberingSystem(t){X7=t}static get defaultOutputCalendar(){return Q7}static set defaultOutputCalendar(t){Q7=t}static get defaultWeekSettings(){return iT}static set defaultWeekSettings(t){iT=e5(t)}static get twoDigitCutoffYear(){return eT}static set twoDigitCutoffYear(t){eT=t%100}static get throwOnInvalid(){return tT}static set throwOnInvalid(t){tT=t}static resetCaches(){Et.resetCache(),Qr.resetCache(),Ne.resetCache(),LH()}}class Pn{constructor(t,i){this.reason=t,this.explanation=i}toMessage(){return this.explanation?`${this.reason}: ${this.explanation}`:this.reason}}const dP=[0,31,59,90,120,151,181,212,243,273,304,334],fP=[0,31,60,91,121,152,182,213,244,274,305,335];function Hs(e,t){return new Pn("unit out of range",`you specified ${t} (of type ${typeof t}) as a ${e}, which is invalid`)}function D6(e,t,i){const r=new Date(Date.UTC(e,t-1,i));e<100&&e>=0&&r.setUTCFullYear(r.getUTCFullYear()-1900);const a=r.getUTCDay();return a===0?7:a}function yP(e,t,i){return i+(E1(e)?fP:dP)[t-1]}function mP(e,t){const i=E1(e)?fP:dP,r=i.findIndex(p=>p<t),a=t-i[r];return{month:r+1,day:a}}function j6(e,t){return(e-t+7)%7+1}function tv(e,t=4,i=1){const{year:r,month:a,day:p}=e,y=yP(r,a,p),g=j6(D6(r,a,p),i);let _=Math.floor((y-g+14-t)/7),T;return _<1?(T=r-1,_=W0(T,t,i)):_>W0(r,t,i)?(T=r+1,_=1):T=r,{weekYear:T,weekNumber:_,weekday:g,...c2(e)}}function rT(e,t=4,i=1){const{weekYear:r,weekNumber:a,weekday:p}=e,y=j6(D6(r,1,t),i),g=bp(r);let _=a*7+p-y-7+t,T;_<1?(T=r-1,_+=bp(T)):_>g?(T=r+1,_-=bp(r)):T=r;const{month:I,day:A}=mP(T,_);return{year:T,month:I,day:A,...c2(e)}}function Lw(e){const{year:t,month:i,day:r}=e,a=yP(t,i,r);return{year:t,ordinal:a,...c2(e)}}function sT(e){const{year:t,ordinal:i}=e,{month:r,day:a}=mP(t,i);return{year:t,month:r,day:a,...c2(e)}}function nT(e,t){if(!Ye(e.localWeekday)||!Ye(e.localWeekNumber)||!Ye(e.localWeekYear)){if(!Ye(e.weekday)||!Ye(e.weekNumber)||!Ye(e.weekYear))throw new lp("Cannot mix locale-based week fields with ISO-based week fields");return Ye(e.localWeekday)||(e.weekday=e.localWeekday),Ye(e.localWeekNumber)||(e.weekNumber=e.localWeekNumber),Ye(e.localWeekYear)||(e.weekYear=e.localWeekYear),delete e.localWeekday,delete e.localWeekNumber,delete e.localWeekYear,{minDaysInFirstWeek:t.getMinDaysInFirstWeek(),startOfWeek:t.getStartOfWeek()}}else return{minDaysInFirstWeek:4,startOfWeek:1}}function DH(e,t=4,i=1){const r=l2(e.weekYear),a=Ws(e.weekNumber,1,W0(e.weekYear,t,i)),p=Ws(e.weekday,1,7);return r?a?p?!1:Hs("weekday",e.weekday):Hs("week",e.weekNumber):Hs("weekYear",e.weekYear)}function jH(e){const t=l2(e.year),i=Ws(e.ordinal,1,bp(e.year));return t?i?!1:Hs("ordinal",e.ordinal):Hs("year",e.year)}function gP(e){const t=l2(e.year),i=Ws(e.month,1,12),r=Ws(e.day,1,iv(e.year,e.month));return t?i?r?!1:Hs("day",e.day):Hs("month",e.month):Hs("year",e.year)}function vP(e){const{hour:t,minute:i,second:r,millisecond:a}=e,p=Ws(t,0,23)||t===24&&i===0&&r===0&&a===0,y=Ws(i,0,59),g=Ws(r,0,59),_=Ws(a,0,999);return p?y?g?_?!1:Hs("millisecond",a):Hs("second",r):Hs("minute",i):Hs("hour",t)}function Ye(e){return typeof e>"u"}function Ul(e){return typeof e=="number"}function l2(e){return typeof e=="number"&&e%1===0}function FH(e){return typeof e=="string"}function zH(e){return Object.prototype.toString.call(e)==="[object Date]"}function wP(){try{return typeof Intl<"u"&&!!Intl.RelativeTimeFormat}catch{return!1}}function bP(){try{return typeof Intl<"u"&&!!Intl.Locale&&("weekInfo"in Intl.Locale.prototype||"getWeekInfo"in Intl.Locale.prototype)}catch{return!1}}function UH(e){return Array.isArray(e)?e:[e]}function oT(e,t,i){if(e.length!==0)return e.reduce((r,a)=>{const p=[t(a),a];return r&&i(r[0],p[0])===r[0]?r:p},null)[1]}function VH(e,t){return t.reduce((i,r)=>(i[r]=e[r],i),{})}function qp(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function e5(e){if(e==null)return null;if(typeof e!="object")throw new cr("Week settings must be an object");if(!Ws(e.firstDay,1,7)||!Ws(e.minimalDays,1,7)||!Array.isArray(e.weekend)||e.weekend.some(t=>!Ws(t,1,7)))throw new cr("Invalid week settings");return{firstDay:e.firstDay,minimalDays:e.minimalDays,weekend:Array.from(e.weekend)}}function Ws(e,t,i){return l2(e)&&e>=t&&e<=i}function GH(e,t){return e-t*Math.floor(e/t)}function _i(e,t=2){const i=e<0;let r;return i?r="-"+(""+-e).padStart(t,"0"):r=(""+e).padStart(t,"0"),r}function xl(e){if(!(Ye(e)||e===null||e===""))return parseInt(e,10)}function fu(e){if(!(Ye(e)||e===null||e===""))return parseFloat(e)}function F6(e){if(!(Ye(e)||e===null||e==="")){const t=parseFloat("0."+e)*1e3;return Math.floor(t)}}function z6(e,t,i=!1){const r=10**t;return(i?Math.trunc:Math.round)(e*r)/r}function E1(e){return e%4===0&&(e%100!==0||e%400===0)}function bp(e){return E1(e)?366:365}function iv(e,t){const i=GH(t-1,12)+1,r=e+(t-i)/12;return i===2?E1(r)?29:28:[31,null,31,30,31,30,31,31,30,31,30,31][i-1]}function u2(e){let t=Date.UTC(e.year,e.month-1,e.day,e.hour,e.minute,e.second,e.millisecond);return e.year<100&&e.year>=0&&(t=new Date(t),t.setUTCFullYear(e.year,e.month-1,e.day)),+t}function aT(e,t,i){return-j6(D6(e,1,t),i)+t-1}function W0(e,t=4,i=1){const r=aT(e,t,i),a=aT(e+1,t,i);return(bp(e)-r+a)/7}function t5(e){return e>99?e:e>ci.twoDigitCutoffYear?1900+e:2e3+e}function _P(e,t,i,r=null){const a=new Date(e),p={hourCycle:"h23",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"};r&&(p.timeZone=r);const y={timeZoneName:t,...p},g=new Intl.DateTimeFormat(i,y).formatToParts(a).find(_=>_.type.toLowerCase()==="timezonename");return g?g.value:null}function h2(e,t){let i=parseInt(e,10);Number.isNaN(i)&&(i=0);const r=parseInt(t,10)||0,a=i<0||Object.is(i,-0)?-r:r;return i*60+a}function SP(e){const t=Number(e);if(typeof e=="boolean"||e===""||Number.isNaN(t))throw new cr(`Invalid unit value ${e}`);return t}function rv(e,t){const i={};for(const r in e)if(qp(e,r)){const a=e[r];if(a==null)continue;i[t(r)]=SP(a)}return i}function g0(e,t){const i=Math.trunc(Math.abs(e/60)),r=Math.trunc(Math.abs(e%60)),a=e>=0?"+":"-";switch(t){case"short":return`${a}${_i(i,2)}:${_i(r,2)}`;case"narrow":return`${a}${i}${r>0?`:${r}`:""}`;case"techie":return`${a}${_i(i,2)}${_i(r,2)}`;default:throw new RangeError(`Value format ${t} is out of range for property format`)}}function c2(e){return VH(e,["hour","minute","second","millisecond"])}const BH=["January","February","March","April","May","June","July","August","September","October","November","December"],xP=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],qH=["J","F","M","A","M","J","J","A","S","O","N","D"];function TP(e){switch(e){case"narrow":return[...qH];case"short":return[...xP];case"long":return[...BH];case"numeric":return["1","2","3","4","5","6","7","8","9","10","11","12"];case"2-digit":return["01","02","03","04","05","06","07","08","09","10","11","12"];default:return null}}const MP=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],$P=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],HH=["M","T","W","T","F","S","S"];function EP(e){switch(e){case"narrow":return[...HH];case"short":return[...$P];case"long":return[...MP];case"numeric":return["1","2","3","4","5","6","7"];default:return null}}const IP=["AM","PM"],WH=["Before Christ","Anno Domini"],JH=["BC","AD"],ZH=["B","A"];function AP(e){switch(e){case"narrow":return[...ZH];case"short":return[...JH];case"long":return[...WH];default:return null}}function KH(e){return IP[e.hour<12?0:1]}function YH(e,t){return EP(t)[e.weekday-1]}function XH(e,t){return TP(t)[e.month-1]}function QH(e,t){return AP(t)[e.year<0?0:1]}function eW(e,t,i="always",r=!1){const a={years:["year","yr."],quarters:["quarter","qtr."],months:["month","mo."],weeks:["week","wk."],days:["day","day","days"],hours:["hour","hr."],minutes:["minute","min."],seconds:["second","sec."]},p=["hours","minutes","seconds"].indexOf(e)===-1;if(i==="auto"&&p){const A=e==="days";switch(t){case 1:return A?"tomorrow":`next ${a[e][0]}`;case-1:return A?"yesterday":`last ${a[e][0]}`;case 0:return A?"today":`this ${a[e][0]}`}}const y=Object.is(t,-0)||t<0,g=Math.abs(t),_=g===1,T=a[e],I=r?_?T[1]:T[2]||T[1]:_?a[e][0]:e;return y?`${g} ${I} ago`:`in ${g} ${I}`}function lT(e,t){let i="";for(const r of e)r.literal?i+=r.val:i+=t(r.val);return i}const tW={D:ev,DD:JO,DDD:ZO,DDDD:KO,t:YO,tt:XO,ttt:QO,tttt:eP,T:tP,TT:iP,TTT:rP,TTTT:sP,f:nP,ff:aP,fff:uP,ffff:cP,F:oP,FF:lP,FFF:hP,FFFF:pP};class fr{static create(t,i={}){return new fr(t,i)}static parseFormat(t){let i=null,r="",a=!1;const p=[];for(let y=0;y<t.length;y++){const g=t.charAt(y);g==="'"?(r.length>0&&p.push({literal:a||/^\s+$/.test(r),val:r}),i=null,r="",a=!a):a||g===i?r+=g:(r.length>0&&p.push({literal:/^\s+$/.test(r),val:r}),r=g,i=g)}return r.length>0&&p.push({literal:a||/^\s+$/.test(r),val:r}),p}static macroTokenToFormatOpts(t){return tW[t]}constructor(t,i){this.opts=i,this.loc=t,this.systemLoc=null}formatWithSystemDefault(t,i){return this.systemLoc===null&&(this.systemLoc=this.loc.redefaultToSystem()),this.systemLoc.dtFormatter(t,{...this.opts,...i}).format()}dtFormatter(t,i={}){return this.loc.dtFormatter(t,{...this.opts,...i})}formatDateTime(t,i){return this.dtFormatter(t,i).format()}formatDateTimeParts(t,i){return this.dtFormatter(t,i).formatToParts()}formatInterval(t,i){return this.dtFormatter(t.start,i).dtf.formatRange(t.start.toJSDate(),t.end.toJSDate())}resolvedOptions(t,i){return this.dtFormatter(t,i).resolvedOptions()}num(t,i=0){if(this.opts.forceSimple)return _i(t,i);const r={...this.opts};return i>0&&(r.padTo=i),this.loc.numberFormatter(r).format(t)}formatDateTimeFromString(t,i){const r=this.loc.listingMode()==="en",a=this.loc.outputCalendar&&this.loc.outputCalendar!=="gregory",p=(N,D)=>this.loc.extract(t,N,D),y=N=>t.isOffsetFixed&&t.offset===0&&N.allowZ?"Z":t.isValid?t.zone.formatOffset(t.ts,N.format):"",g=()=>r?KH(t):p({hour:"numeric",hourCycle:"h12"},"dayperiod"),_=(N,D)=>r?XH(t,N):p(D?{month:N}:{month:N,day:"numeric"},"month"),T=(N,D)=>r?YH(t,N):p(D?{weekday:N}:{weekday:N,month:"long",day:"numeric"},"weekday"),I=N=>{const D=fr.macroTokenToFormatOpts(N);return D?this.formatWithSystemDefault(t,D):N},A=N=>r?QH(t,N):p({era:N},"era"),P=N=>{switch(N){case"S":return this.num(t.millisecond);case"u":case"SSS":return this.num(t.millisecond,3);case"s":return this.num(t.second);case"ss":return this.num(t.second,2);case"uu":return this.num(Math.floor(t.millisecond/10),2);case"uuu":return this.num(Math.floor(t.millisecond/100));case"m":return this.num(t.minute);case"mm":return this.num(t.minute,2);case"h":return this.num(t.hour%12===0?12:t.hour%12);case"hh":return this.num(t.hour%12===0?12:t.hour%12,2);case"H":return this.num(t.hour);case"HH":return this.num(t.hour,2);case"Z":return y({format:"narrow",allowZ:this.opts.allowZ});case"ZZ":return y({format:"short",allowZ:this.opts.allowZ});case"ZZZ":return y({format:"techie",allowZ:this.opts.allowZ});case"ZZZZ":return t.zone.offsetName(t.ts,{format:"short",locale:this.loc.locale});case"ZZZZZ":return t.zone.offsetName(t.ts,{format:"long",locale:this.loc.locale});case"z":return t.zoneName;case"a":return g();case"d":return a?p({day:"numeric"},"day"):this.num(t.day);case"dd":return a?p({day:"2-digit"},"day"):this.num(t.day,2);case"c":return this.num(t.weekday);case"ccc":return T("short",!0);case"cccc":return T("long",!0);case"ccccc":return T("narrow",!0);case"E":return this.num(t.weekday);case"EEE":return T("short",!1);case"EEEE":return T("long",!1);case"EEEEE":return T("narrow",!1);case"L":return a?p({month:"numeric",day:"numeric"},"month"):this.num(t.month);case"LL":return a?p({month:"2-digit",day:"numeric"},"month"):this.num(t.month,2);case"LLL":return _("short",!0);case"LLLL":return _("long",!0);case"LLLLL":return _("narrow",!0);case"M":return a?p({month:"numeric"},"month"):this.num(t.month);case"MM":return a?p({month:"2-digit"},"month"):this.num(t.month,2);case"MMM":return _("short",!1);case"MMMM":return _("long",!1);case"MMMMM":return _("narrow",!1);case"y":return a?p({year:"numeric"},"year"):this.num(t.year);case"yy":return a?p({year:"2-digit"},"year"):this.num(t.year.toString().slice(-2),2);case"yyyy":return a?p({year:"numeric"},"year"):this.num(t.year,4);case"yyyyyy":return a?p({year:"numeric"},"year"):this.num(t.year,6);case"G":return A("short");case"GG":return A("long");case"GGGGG":return A("narrow");case"kk":return this.num(t.weekYear.toString().slice(-2),2);case"kkkk":return this.num(t.weekYear,4);case"W":return this.num(t.weekNumber);case"WW":return this.num(t.weekNumber,2);case"n":return this.num(t.localWeekNumber);case"nn":return this.num(t.localWeekNumber,2);case"ii":return this.num(t.localWeekYear.toString().slice(-2),2);case"iiii":return this.num(t.localWeekYear,4);case"o":return this.num(t.ordinal);case"ooo":return this.num(t.ordinal,3);case"q":return this.num(t.quarter);case"qq":return this.num(t.quarter,2);case"X":return this.num(Math.floor(t.ts/1e3));case"x":return this.num(t.ts);default:return I(N)}};return lT(fr.parseFormat(i),P)}formatDurationFromString(t,i){const r=_=>{switch(_[0]){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":return"hour";case"d":return"day";case"w":return"week";case"M":return"month";case"y":return"year";default:return null}},a=_=>T=>{const I=r(T);return I?this.num(_.get(I),T.length):T},p=fr.parseFormat(i),y=p.reduce((_,{literal:T,val:I})=>T?_:_.concat(I),[]),g=t.shiftTo(...y.map(r).filter(_=>_));return lT(p,a(g))}}const CP=/[A-Za-z_+-]{1,256}(?::?\/[A-Za-z0-9_+-]{1,256}(?:\/[A-Za-z0-9_+-]{1,256})?)?/;function cd(...e){const t=e.reduce((i,r)=>i+r.source,"");return RegExp(`^${t}$`)}function pd(...e){return t=>e.reduce(([i,r,a],p)=>{const[y,g,_]=p(t,a);return[{...i,...y},g||r,_]},[{},null,1]).slice(0,2)}function dd(e,...t){if(e==null)return[null,null];for(const[i,r]of t){const a=i.exec(e);if(a)return r(a)}return[null,null]}function OP(...e){return(t,i)=>{const r={};let a;for(a=0;a<e.length;a++)r[e[a]]=xl(t[i+a]);return[r,null,i+a]}}const PP=/(?:(Z)|([+-]\d\d)(?::?(\d\d))?)/,iW=`(?:${PP.source}?(?:\\[(${CP.source})\\])?)?`,U6=/(\d\d)(?::?(\d\d)(?::?(\d\d)(?:[.,](\d{1,30}))?)?)?/,kP=RegExp(`${U6.source}${iW}`),V6=RegExp(`(?:T${kP.source})?`),rW=/([+-]\d{6}|\d{4})(?:-?(\d\d)(?:-?(\d\d))?)?/,sW=/(\d{4})-?W(\d\d)(?:-?(\d))?/,nW=/(\d{4})-?(\d{3})/,oW=OP("weekYear","weekNumber","weekDay"),aW=OP("year","ordinal"),lW=/(\d{4})-(\d\d)-(\d\d)/,RP=RegExp(`${U6.source} ?(?:${PP.source}|(${CP.source}))?`),uW=RegExp(`(?: ${RP.source})?`);function _p(e,t,i){const r=e[t];return Ye(r)?i:xl(r)}function hW(e,t){return[{year:_p(e,t),month:_p(e,t+1,1),day:_p(e,t+2,1)},null,t+3]}function fd(e,t){return[{hours:_p(e,t,0),minutes:_p(e,t+1,0),seconds:_p(e,t+2,0),milliseconds:F6(e[t+3])},null,t+4]}function I1(e,t){const i=!e[t]&&!e[t+1],r=h2(e[t+1],e[t+2]),a=i?null:Vi.instance(r);return[{},a,t+3]}function A1(e,t){const i=e[t]?Qr.create(e[t]):null;return[{},i,t+1]}const cW=RegExp(`^T?${U6.source}$`),pW=/^-?P(?:(?:(-?\d{1,20}(?:\.\d{1,20})?)Y)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20}(?:\.\d{1,20})?)W)?(?:(-?\d{1,20}(?:\.\d{1,20})?)D)?(?:T(?:(-?\d{1,20}(?:\.\d{1,20})?)H)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20})(?:[.,](-?\d{1,20}))?S)?)?)$/;function dW(e){const[t,i,r,a,p,y,g,_,T]=e,I=t[0]==="-",A=_&&_[0]==="-",P=(N,D=!1)=>N!==void 0&&(D||N&&I)?-N:N;return[{years:P(fu(i)),months:P(fu(r)),weeks:P(fu(a)),days:P(fu(p)),hours:P(fu(y)),minutes:P(fu(g)),seconds:P(fu(_),_==="-0"),milliseconds:P(F6(T),A)}]}const fW={GMT:0,EDT:-4*60,EST:-5*60,CDT:-5*60,CST:-6*60,MDT:-6*60,MST:-7*60,PDT:-7*60,PST:-8*60};function G6(e,t,i,r,a,p,y){const g={year:t.length===2?t5(xl(t)):xl(t),month:xP.indexOf(i)+1,day:xl(r),hour:xl(a),minute:xl(p)};return y&&(g.second=xl(y)),e&&(g.weekday=e.length>3?MP.indexOf(e)+1:$P.indexOf(e)+1),g}const yW=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|(?:([+-]\d\d)(\d\d)))$/;function mW(e){const[,t,i,r,a,p,y,g,_,T,I,A]=e,P=G6(t,a,r,i,p,y,g);let N;return _?N=fW[_]:T?N=0:N=h2(I,A),[P,new Vi(N)]}function gW(e){return e.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").trim()}const vW=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun), (\d\d) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) (\d{4}) (\d\d):(\d\d):(\d\d) GMT$/,wW=/^(Monday|Tuesday|Wednesday|Thursday|Friday|Saturday|Sunday), (\d\d)-(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)-(\d\d) (\d\d):(\d\d):(\d\d) GMT$/,bW=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) ( \d|\d\d) (\d\d):(\d\d):(\d\d) (\d{4})$/;function uT(e){const[,t,i,r,a,p,y,g]=e;return[G6(t,a,r,i,p,y,g),Vi.utcInstance]}function _W(e){const[,t,i,r,a,p,y,g]=e;return[G6(t,g,i,r,a,p,y),Vi.utcInstance]}const SW=cd(rW,V6),xW=cd(sW,V6),TW=cd(nW,V6),MW=cd(kP),NP=pd(hW,fd,I1,A1),$W=pd(oW,fd,I1,A1),EW=pd(aW,fd,I1,A1),IW=pd(fd,I1,A1);function AW(e){return dd(e,[SW,NP],[xW,$W],[TW,EW],[MW,IW])}function CW(e){return dd(gW(e),[yW,mW])}function OW(e){return dd(e,[vW,uT],[wW,uT],[bW,_W])}function PW(e){return dd(e,[pW,dW])}const kW=pd(fd);function RW(e){return dd(e,[cW,kW])}const NW=cd(lW,uW),LW=cd(RP),DW=pd(fd,I1,A1);function jW(e){return dd(e,[NW,NP],[LW,DW])}const hT="Invalid Duration",LP={weeks:{days:7,hours:7*24,minutes:7*24*60,seconds:7*24*60*60,milliseconds:7*24*60*60*1e3},days:{hours:24,minutes:24*60,seconds:24*60*60,milliseconds:24*60*60*1e3},hours:{minutes:60,seconds:60*60,milliseconds:60*60*1e3},minutes:{seconds:60,milliseconds:60*1e3},seconds:{milliseconds:1e3}},FW={years:{quarters:4,months:12,weeks:52,days:365,hours:365*24,minutes:365*24*60,seconds:365*24*60*60,milliseconds:365*24*60*60*1e3},quarters:{months:3,weeks:13,days:91,hours:91*24,minutes:91*24*60,seconds:91*24*60*60,milliseconds:91*24*60*60*1e3},months:{weeks:4,days:30,hours:30*24,minutes:30*24*60,seconds:30*24*60*60,milliseconds:30*24*60*60*1e3},...LP},As=146097/400,ic=146097/4800,zW={years:{quarters:4,months:12,weeks:As/7,days:As,hours:As*24,minutes:As*24*60,seconds:As*24*60*60,milliseconds:As*24*60*60*1e3},quarters:{months:3,weeks:As/28,days:As/4,hours:As*24/4,minutes:As*24*60/4,seconds:As*24*60*60/4,milliseconds:As*24*60*60*1e3/4},months:{weeks:ic/7,days:ic,hours:ic*24,minutes:ic*24*60,seconds:ic*24*60*60,milliseconds:ic*24*60*60*1e3},...LP},gh=["years","quarters","months","weeks","days","hours","minutes","seconds","milliseconds"],UW=gh.slice(0).reverse();function Va(e,t,i=!1){const r={values:i?t.values:{...e.values,...t.values||{}},loc:e.loc.clone(t.loc),conversionAccuracy:t.conversionAccuracy||e.conversionAccuracy,matrix:t.matrix||e.matrix};return new vt(r)}function DP(e,t){let i=t.milliseconds??0;for(const r of UW.slice(1))t[r]&&(i+=t[r]*e[r].milliseconds);return i}function cT(e,t){const i=DP(e,t)<0?-1:1;gh.reduceRight((r,a)=>{if(Ye(t[a]))return r;if(r){const p=t[r]*i,y=e[a][r],g=Math.floor(p/y);t[a]+=g*i,t[r]-=g*y*i}return a},null),gh.reduce((r,a)=>{if(Ye(t[a]))return r;if(r){const p=t[r]%1;t[r]-=p,t[a]+=p*e[r][a]}return a},null)}function VW(e){const t={};for(const[i,r]of Object.entries(e))r!==0&&(t[i]=r);return t}class vt{constructor(t){const i=t.conversionAccuracy==="longterm"||!1;let r=i?zW:FW;t.matrix&&(r=t.matrix),this.values=t.values,this.loc=t.loc||Et.create(),this.conversionAccuracy=i?"longterm":"casual",this.invalid=t.invalid||null,this.matrix=r,this.isLuxonDuration=!0}static fromMillis(t,i){return vt.fromObject({milliseconds:t},i)}static fromObject(t,i={}){if(t==null||typeof t!="object")throw new cr(`Duration.fromObject: argument expected to be an object, got ${t===null?"null":typeof t}`);return new vt({values:rv(t,vt.normalizeUnit),loc:Et.fromObject(i),conversionAccuracy:i.conversionAccuracy,matrix:i.matrix})}static fromDurationLike(t){if(Ul(t))return vt.fromMillis(t);if(vt.isDuration(t))return t;if(typeof t=="object")return vt.fromObject(t);throw new cr(`Unknown duration argument ${t} of type ${typeof t}`)}static fromISO(t,i){const[r]=PW(t);return r?vt.fromObject(r,i):vt.invalid("unparsable",`the input "${t}" can't be parsed as ISO 8601`)}static fromISOTime(t,i){const[r]=RW(t);return r?vt.fromObject(r,i):vt.invalid("unparsable",`the input "${t}" can't be parsed as ISO 8601`)}static invalid(t,i=null){if(!t)throw new cr("need to specify a reason the Duration is invalid");const r=t instanceof Pn?t:new Pn(t,i);if(ci.throwOnInvalid)throw new pH(r);return new vt({invalid:r})}static normalizeUnit(t){const i={year:"years",years:"years",quarter:"quarters",quarters:"quarters",month:"months",months:"months",week:"weeks",weeks:"weeks",day:"days",days:"days",hour:"hours",hours:"hours",minute:"minutes",minutes:"minutes",second:"seconds",seconds:"seconds",millisecond:"milliseconds",milliseconds:"milliseconds"}[t&&t.toLowerCase()];if(!i)throw new WO(t);return i}static isDuration(t){return t&&t.isLuxonDuration||!1}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}toFormat(t,i={}){const r={...i,floor:i.round!==!1&&i.floor!==!1};return this.isValid?fr.create(this.loc,r).formatDurationFromString(this,t):hT}toHuman(t={}){if(!this.isValid)return hT;const i=gh.map(r=>{const a=this.values[r];return Ye(a)?null:this.loc.numberFormatter({style:"unit",unitDisplay:"long",...t,unit:r.slice(0,-1)}).format(a)}).filter(r=>r);return this.loc.listFormatter({type:"conjunction",style:t.listStyle||"narrow",...t}).format(i)}toObject(){return this.isValid?{...this.values}:{}}toISO(){if(!this.isValid)return null;let t="P";return this.years!==0&&(t+=this.years+"Y"),(this.months!==0||this.quarters!==0)&&(t+=this.months+this.quarters*3+"M"),this.weeks!==0&&(t+=this.weeks+"W"),this.days!==0&&(t+=this.days+"D"),(this.hours!==0||this.minutes!==0||this.seconds!==0||this.milliseconds!==0)&&(t+="T"),this.hours!==0&&(t+=this.hours+"H"),this.minutes!==0&&(t+=this.minutes+"M"),(this.seconds!==0||this.milliseconds!==0)&&(t+=z6(this.seconds+this.milliseconds/1e3,3)+"S"),t==="P"&&(t+="T0S"),t}toISOTime(t={}){if(!this.isValid)return null;const i=this.toMillis();return i<0||i>=864e5?null:(t={suppressMilliseconds:!1,suppressSeconds:!1,includePrefix:!1,format:"extended",...t,includeOffset:!1},Ne.fromMillis(i,{zone:"UTC"}).toISOTime(t))}toJSON(){return this.toISO()}toString(){return this.toISO()}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`Duration { values: ${JSON.stringify(this.values)} }`:`Duration { Invalid, reason: ${this.invalidReason} }`}toMillis(){return this.isValid?DP(this.matrix,this.values):NaN}valueOf(){return this.toMillis()}plus(t){if(!this.isValid)return this;const i=vt.fromDurationLike(t),r={};for(const a of gh)(qp(i.values,a)||qp(this.values,a))&&(r[a]=i.get(a)+this.get(a));return Va(this,{values:r},!0)}minus(t){if(!this.isValid)return this;const i=vt.fromDurationLike(t);return this.plus(i.negate())}mapUnits(t){if(!this.isValid)return this;const i={};for(const r of Object.keys(this.values))i[r]=SP(t(this.values[r],r));return Va(this,{values:i},!0)}get(t){return this[vt.normalizeUnit(t)]}set(t){if(!this.isValid)return this;const i={...this.values,...rv(t,vt.normalizeUnit)};return Va(this,{values:i})}reconfigure({locale:t,numberingSystem:i,conversionAccuracy:r,matrix:a}={}){const y={loc:this.loc.clone({locale:t,numberingSystem:i}),matrix:a,conversionAccuracy:r};return Va(this,y)}as(t){return this.isValid?this.shiftTo(t).get(t):NaN}normalize(){if(!this.isValid)return this;const t=this.toObject();return cT(this.matrix,t),Va(this,{values:t},!0)}rescale(){if(!this.isValid)return this;const t=VW(this.normalize().shiftToAll().toObject());return Va(this,{values:t},!0)}shiftTo(...t){if(!this.isValid)return this;if(t.length===0)return this;t=t.map(y=>vt.normalizeUnit(y));const i={},r={},a=this.toObject();let p;for(const y of gh)if(t.indexOf(y)>=0){p=y;let g=0;for(const T in r)g+=this.matrix[T][y]*r[T],r[T]=0;Ul(a[y])&&(g+=a[y]);const _=Math.trunc(g);i[y]=_,r[y]=(g*1e3-_*1e3)/1e3}else Ul(a[y])&&(r[y]=a[y]);for(const y in r)r[y]!==0&&(i[p]+=y===p?r[y]:r[y]/this.matrix[p][y]);return cT(this.matrix,i),Va(this,{values:i},!0)}shiftToAll(){return this.isValid?this.shiftTo("years","months","weeks","days","hours","minutes","seconds","milliseconds"):this}negate(){if(!this.isValid)return this;const t={};for(const i of Object.keys(this.values))t[i]=this.values[i]===0?0:-this.values[i];return Va(this,{values:t},!0)}get years(){return this.isValid?this.values.years||0:NaN}get quarters(){return this.isValid?this.values.quarters||0:NaN}get months(){return this.isValid?this.values.months||0:NaN}get weeks(){return this.isValid?this.values.weeks||0:NaN}get days(){return this.isValid?this.values.days||0:NaN}get hours(){return this.isValid?this.values.hours||0:NaN}get minutes(){return this.isValid?this.values.minutes||0:NaN}get seconds(){return this.isValid?this.values.seconds||0:NaN}get milliseconds(){return this.isValid?this.values.milliseconds||0:NaN}get isValid(){return this.invalid===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}equals(t){if(!this.isValid||!t.isValid||!this.loc.equals(t.loc))return!1;function i(r,a){return r===void 0||r===0?a===void 0||a===0:r===a}for(const r of gh)if(!i(this.values[r],t.values[r]))return!1;return!0}}const rc="Invalid Interval";function GW(e,t){return!e||!e.isValid?ui.invalid("missing or invalid start"):!t||!t.isValid?ui.invalid("missing or invalid end"):t<e?ui.invalid("end before start",`The end of an interval must be after its start, but you had start=${e.toISO()} and end=${t.toISO()}`):null}class ui{constructor(t){this.s=t.start,this.e=t.end,this.invalid=t.invalid||null,this.isLuxonInterval=!0}static invalid(t,i=null){if(!t)throw new cr("need to specify a reason the Interval is invalid");const r=t instanceof Pn?t:new Pn(t,i);if(ci.throwOnInvalid)throw new cH(r);return new ui({invalid:r})}static fromDateTimes(t,i){const r=Ad(t),a=Ad(i),p=GW(r,a);return p??new ui({start:r,end:a})}static after(t,i){const r=vt.fromDurationLike(i),a=Ad(t);return ui.fromDateTimes(a,a.plus(r))}static before(t,i){const r=vt.fromDurationLike(i),a=Ad(t);return ui.fromDateTimes(a.minus(r),a)}static fromISO(t,i){const[r,a]=(t||"").split("/",2);if(r&&a){let p,y;try{p=Ne.fromISO(r,i),y=p.isValid}catch{y=!1}let g,_;try{g=Ne.fromISO(a,i),_=g.isValid}catch{_=!1}if(y&&_)return ui.fromDateTimes(p,g);if(y){const T=vt.fromISO(a,i);if(T.isValid)return ui.after(p,T)}else if(_){const T=vt.fromISO(r,i);if(T.isValid)return ui.before(g,T)}}return ui.invalid("unparsable",`the input "${t}" can't be parsed as ISO 8601`)}static isInterval(t){return t&&t.isLuxonInterval||!1}get start(){return this.isValid?this.s:null}get end(){return this.isValid?this.e:null}get isValid(){return this.invalidReason===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}length(t="milliseconds"){return this.isValid?this.toDuration(t).get(t):NaN}count(t="milliseconds",i){if(!this.isValid)return NaN;const r=this.start.startOf(t,i);let a;return i!=null&&i.useLocaleWeeks?a=this.end.reconfigure({locale:r.locale}):a=this.end,a=a.startOf(t,i),Math.floor(a.diff(r,t).get(t))+(a.valueOf()!==this.end.valueOf())}hasSame(t){return this.isValid?this.isEmpty()||this.e.minus(1).hasSame(this.s,t):!1}isEmpty(){return this.s.valueOf()===this.e.valueOf()}isAfter(t){return this.isValid?this.s>t:!1}isBefore(t){return this.isValid?this.e<=t:!1}contains(t){return this.isValid?this.s<=t&&this.e>t:!1}set({start:t,end:i}={}){return this.isValid?ui.fromDateTimes(t||this.s,i||this.e):this}splitAt(...t){if(!this.isValid)return[];const i=t.map(Ad).filter(y=>this.contains(y)).sort((y,g)=>y.toMillis()-g.toMillis()),r=[];let{s:a}=this,p=0;for(;a<this.e;){const y=i[p]||this.e,g=+y>+this.e?this.e:y;r.push(ui.fromDateTimes(a,g)),a=g,p+=1}return r}splitBy(t){const i=vt.fromDurationLike(t);if(!this.isValid||!i.isValid||i.as("milliseconds")===0)return[];let{s:r}=this,a=1,p;const y=[];for(;r<this.e;){const g=this.start.plus(i.mapUnits(_=>_*a));p=+g>+this.e?this.e:g,y.push(ui.fromDateTimes(r,p)),r=p,a+=1}return y}divideEqually(t){return this.isValid?this.splitBy(this.length()/t).slice(0,t):[]}overlaps(t){return this.e>t.s&&this.s<t.e}abutsStart(t){return this.isValid?+this.e==+t.s:!1}abutsEnd(t){return this.isValid?+t.e==+this.s:!1}engulfs(t){return this.isValid?this.s<=t.s&&this.e>=t.e:!1}equals(t){return!this.isValid||!t.isValid?!1:this.s.equals(t.s)&&this.e.equals(t.e)}intersection(t){if(!this.isValid)return this;const i=this.s>t.s?this.s:t.s,r=this.e<t.e?this.e:t.e;return i>=r?null:ui.fromDateTimes(i,r)}union(t){if(!this.isValid)return this;const i=this.s<t.s?this.s:t.s,r=this.e>t.e?this.e:t.e;return ui.fromDateTimes(i,r)}static merge(t){const[i,r]=t.sort((a,p)=>a.s-p.s).reduce(([a,p],y)=>p?p.overlaps(y)||p.abutsStart(y)?[a,p.union(y)]:[a.concat([p]),y]:[a,y],[[],null]);return r&&i.push(r),i}static xor(t){let i=null,r=0;const a=[],p=t.map(_=>[{time:_.s,type:"s"},{time:_.e,type:"e"}]),y=Array.prototype.concat(...p),g=y.sort((_,T)=>_.time-T.time);for(const _ of g)r+=_.type==="s"?1:-1,r===1?i=_.time:(i&&+i!=+_.time&&a.push(ui.fromDateTimes(i,_.time)),i=null);return ui.merge(a)}difference(...t){return ui.xor([this].concat(t)).map(i=>this.intersection(i)).filter(i=>i&&!i.isEmpty())}toString(){return this.isValid?`[${this.s.toISO()} – ${this.e.toISO()})`:rc}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`Interval { start: ${this.s.toISO()}, end: ${this.e.toISO()} }`:`Interval { Invalid, reason: ${this.invalidReason} }`}toLocaleString(t=ev,i={}){return this.isValid?fr.create(this.s.loc.clone(i),t).formatInterval(this):rc}toISO(t){return this.isValid?`${this.s.toISO(t)}/${this.e.toISO(t)}`:rc}toISODate(){return this.isValid?`${this.s.toISODate()}/${this.e.toISODate()}`:rc}toISOTime(t){return this.isValid?`${this.s.toISOTime(t)}/${this.e.toISOTime(t)}`:rc}toFormat(t,{separator:i=" – "}={}){return this.isValid?`${this.s.toFormat(t)}${i}${this.e.toFormat(t)}`:rc}toDuration(t,i){return this.isValid?this.e.diff(this.s,t,i):vt.invalid(this.invalidReason)}mapEndpoints(t){return ui.fromDateTimes(t(this.s),t(this.e))}}class uy{static hasDST(t=ci.defaultZone){const i=Ne.now().setZone(t).set({month:12});return!t.isUniversal&&i.offset!==i.set({month:6}).offset}static isValidIANAZone(t){return Qr.isValidZone(t)}static normalizeZone(t){return Al(t,ci.defaultZone)}static getStartOfWeek({locale:t=null,locObj:i=null}={}){return(i||Et.create(t)).getStartOfWeek()}static getMinimumDaysInFirstWeek({locale:t=null,locObj:i=null}={}){return(i||Et.create(t)).getMinDaysInFirstWeek()}static getWeekendWeekdays({locale:t=null,locObj:i=null}={}){return(i||Et.create(t)).getWeekendDays().slice()}static months(t="long",{locale:i=null,numberingSystem:r=null,locObj:a=null,outputCalendar:p="gregory"}={}){return(a||Et.create(i,r,p)).months(t)}static monthsFormat(t="long",{locale:i=null,numberingSystem:r=null,locObj:a=null,outputCalendar:p="gregory"}={}){return(a||Et.create(i,r,p)).months(t,!0)}static weekdays(t="long",{locale:i=null,numberingSystem:r=null,locObj:a=null}={}){return(a||Et.create(i,r,null)).weekdays(t)}static weekdaysFormat(t="long",{locale:i=null,numberingSystem:r=null,locObj:a=null}={}){return(a||Et.create(i,r,null)).weekdays(t,!0)}static meridiems({locale:t=null}={}){return Et.create(t).meridiems()}static eras(t="short",{locale:i=null}={}){return Et.create(i,null,"gregory").eras(t)}static features(){return{relative:wP(),localeWeek:bP()}}}function pT(e,t){const i=a=>a.toUTC(0,{keepLocalTime:!0}).startOf("day").valueOf(),r=i(t)-i(e);return Math.floor(vt.fromMillis(r).as("days"))}function BW(e,t,i){const r=[["years",(_,T)=>T.year-_.year],["quarters",(_,T)=>T.quarter-_.quarter+(T.year-_.year)*4],["months",(_,T)=>T.month-_.month+(T.year-_.year)*12],["weeks",(_,T)=>{const I=pT(_,T);return(I-I%7)/7}],["days",pT]],a={},p=e;let y,g;for(const[_,T]of r)i.indexOf(_)>=0&&(y=_,a[_]=T(e,t),g=p.plus(a),g>t?(a[_]--,e=p.plus(a),e>t&&(g=e,a[_]--,e=p.plus(a))):e=g);return[e,a,g,y]}function qW(e,t,i,r){let[a,p,y,g]=BW(e,t,i);const _=t-a,T=i.filter(A=>["hours","minutes","seconds","milliseconds"].indexOf(A)>=0);T.length===0&&(y<t&&(y=a.plus({[g]:1})),y!==a&&(p[g]=(p[g]||0)+_/(y-a)));const I=vt.fromObject(p,r);return T.length>0?vt.fromMillis(_,r).shiftTo(...T).plus(I):I}const HW="missing Intl.DateTimeFormat.formatToParts support";function xt(e,t=i=>i){return{regex:e,deser:([i])=>t(NH(i))}}const WW=" ",jP=`[ ${WW}]`,FP=new RegExp(jP,"g");function JW(e){return e.replace(/\./g,"\\.?").replace(FP,jP)}function dT(e){return e.replace(/\./g,"").replace(FP," ").toLowerCase()}function an(e,t){return e===null?null:{regex:RegExp(e.map(JW).join("|")),deser:([i])=>e.findIndex(r=>dT(i)===dT(r))+t}}function fT(e,t){return{regex:e,deser:([,i,r])=>h2(i,r),groups:t}}function hy(e){return{regex:e,deser:([t])=>t}}function ZW(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function KW(e,t){const i=on(t),r=on(t,"{2}"),a=on(t,"{3}"),p=on(t,"{4}"),y=on(t,"{6}"),g=on(t,"{1,2}"),_=on(t,"{1,3}"),T=on(t,"{1,6}"),I=on(t,"{1,9}"),A=on(t,"{2,4}"),P=on(t,"{4,6}"),N=q=>({regex:RegExp(ZW(q.val)),deser:([J])=>J,literal:!0}),z=(q=>{if(e.literal)return N(q);switch(q.val){case"G":return an(t.eras("short"),0);case"GG":return an(t.eras("long"),0);case"y":return xt(T);case"yy":return xt(A,t5);case"yyyy":return xt(p);case"yyyyy":return xt(P);case"yyyyyy":return xt(y);case"M":return xt(g);case"MM":return xt(r);case"MMM":return an(t.months("short",!0),1);case"MMMM":return an(t.months("long",!0),1);case"L":return xt(g);case"LL":return xt(r);case"LLL":return an(t.months("short",!1),1);case"LLLL":return an(t.months("long",!1),1);case"d":return xt(g);case"dd":return xt(r);case"o":return xt(_);case"ooo":return xt(a);case"HH":return xt(r);case"H":return xt(g);case"hh":return xt(r);case"h":return xt(g);case"mm":return xt(r);case"m":return xt(g);case"q":return xt(g);case"qq":return xt(r);case"s":return xt(g);case"ss":return xt(r);case"S":return xt(_);case"SSS":return xt(a);case"u":return hy(I);case"uu":return hy(g);case"uuu":return xt(i);case"a":return an(t.meridiems(),0);case"kkkk":return xt(p);case"kk":return xt(A,t5);case"W":return xt(g);case"WW":return xt(r);case"E":case"c":return xt(i);case"EEE":return an(t.weekdays("short",!1),1);case"EEEE":return an(t.weekdays("long",!1),1);case"ccc":return an(t.weekdays("short",!0),1);case"cccc":return an(t.weekdays("long",!0),1);case"Z":case"ZZ":return fT(new RegExp(`([+-]${g.source})(?::(${r.source}))?`),2);case"ZZZ":return fT(new RegExp(`([+-]${g.source})(${r.source})?`),2);case"z":return hy(/[a-z_+-/]{1,256}?/i);case" ":return hy(/[^\S\n\r]/);default:return N(q)}})(e)||{invalidReason:HW};return z.token=e,z}const YW={year:{"2-digit":"yy",numeric:"yyyyy"},month:{numeric:"M","2-digit":"MM",short:"MMM",long:"MMMM"},day:{numeric:"d","2-digit":"dd"},weekday:{short:"EEE",long:"EEEE"},dayperiod:"a",dayPeriod:"a",hour12:{numeric:"h","2-digit":"hh"},hour24:{numeric:"H","2-digit":"HH"},minute:{numeric:"m","2-digit":"mm"},second:{numeric:"s","2-digit":"ss"},timeZoneName:{long:"ZZZZZ",short:"ZZZ"}};function XW(e,t,i){const{type:r,value:a}=e;if(r==="literal"){const _=/^\s+$/.test(a);return{literal:!_,val:_?" ":a}}const p=t[r];let y=r;r==="hour"&&(t.hour12!=null?y=t.hour12?"hour12":"hour24":t.hourCycle!=null?t.hourCycle==="h11"||t.hourCycle==="h12"?y="hour12":y="hour24":y=i.hour12?"hour12":"hour24");let g=YW[y];if(typeof g=="object"&&(g=g[p]),g)return{literal:!1,val:g}}function QW(e){return[`^${e.map(i=>i.regex).reduce((i,r)=>`${i}(${r.source})`,"")}$`,e]}function eJ(e,t,i){const r=e.match(t);if(r){const a={};let p=1;for(const y in i)if(qp(i,y)){const g=i[y],_=g.groups?g.groups+1:1;!g.literal&&g.token&&(a[g.token.val[0]]=g.deser(r.slice(p,p+_))),p+=_}return[r,a]}else return[r,{}]}function tJ(e){const t=p=>{switch(p){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":case"H":return"hour";case"d":return"day";case"o":return"ordinal";case"L":case"M":return"month";case"y":return"year";case"E":case"c":return"weekday";case"W":return"weekNumber";case"k":return"weekYear";case"q":return"quarter";default:return null}};let i=null,r;return Ye(e.z)||(i=Qr.create(e.z)),Ye(e.Z)||(i||(i=new Vi(e.Z)),r=e.Z),Ye(e.q)||(e.M=(e.q-1)*3+1),Ye(e.h)||(e.h<12&&e.a===1?e.h+=12:e.h===12&&e.a===0&&(e.h=0)),e.G===0&&e.y&&(e.y=-e.y),Ye(e.u)||(e.S=F6(e.u)),[Object.keys(e).reduce((p,y)=>{const g=t(y);return g&&(p[g]=e[y]),p},{}),i,r]}let Dw=null;function iJ(){return Dw||(Dw=Ne.fromMillis(1555555555555)),Dw}function rJ(e,t){if(e.literal)return e;const i=fr.macroTokenToFormatOpts(e.val),r=GP(i,t);return r==null||r.includes(void 0)?e:r}function zP(e,t){return Array.prototype.concat(...e.map(i=>rJ(i,t)))}class UP{constructor(t,i){if(this.locale=t,this.format=i,this.tokens=zP(fr.parseFormat(i),t),this.units=this.tokens.map(r=>KW(r,t)),this.disqualifyingUnit=this.units.find(r=>r.invalidReason),!this.disqualifyingUnit){const[r,a]=QW(this.units);this.regex=RegExp(r,"i"),this.handlers=a}}explainFromTokens(t){if(this.isValid){const[i,r]=eJ(t,this.regex,this.handlers),[a,p,y]=r?tJ(r):[null,null,void 0];if(qp(r,"a")&&qp(r,"H"))throw new lp("Can't include meridiem when specifying 24-hour format");return{input:t,tokens:this.tokens,regex:this.regex,rawMatches:i,matches:r,result:a,zone:p,specificOffset:y}}else return{input:t,tokens:this.tokens,invalidReason:this.invalidReason}}get isValid(){return!this.disqualifyingUnit}get invalidReason(){return this.disqualifyingUnit?this.disqualifyingUnit.invalidReason:null}}function VP(e,t,i){return new UP(e,i).explainFromTokens(t)}function sJ(e,t,i){const{result:r,zone:a,specificOffset:p,invalidReason:y}=VP(e,t,i);return[r,a,p,y]}function GP(e,t){if(!e)return null;const r=fr.create(t,e).dtFormatter(iJ()),a=r.formatToParts(),p=r.resolvedOptions();return a.map(y=>XW(y,e,p))}const jw="Invalid DateTime",nJ=864e13;function nf(e){return new Pn("unsupported zone",`the zone "${e.name}" is not supported`)}function Fw(e){return e.weekData===null&&(e.weekData=tv(e.c)),e.weekData}function zw(e){return e.localWeekData===null&&(e.localWeekData=tv(e.c,e.loc.getMinDaysInFirstWeek(),e.loc.getStartOfWeek())),e.localWeekData}function yu(e,t){const i={ts:e.ts,zone:e.zone,c:e.c,o:e.o,loc:e.loc,invalid:e.invalid};return new Ne({...i,...t,old:i})}function BP(e,t,i){let r=e-t*60*1e3;const a=i.offset(r);if(t===a)return[r,t];r-=(a-t)*60*1e3;const p=i.offset(r);return a===p?[r,a]:[e-Math.min(a,p)*60*1e3,Math.max(a,p)]}function cy(e,t){e+=t*60*1e3;const i=new Date(e);return{year:i.getUTCFullYear(),month:i.getUTCMonth()+1,day:i.getUTCDate(),hour:i.getUTCHours(),minute:i.getUTCMinutes(),second:i.getUTCSeconds(),millisecond:i.getUTCMilliseconds()}}function ym(e,t,i){return BP(u2(e),t,i)}function yT(e,t){const i=e.o,r=e.c.year+Math.trunc(t.years),a=e.c.month+Math.trunc(t.months)+Math.trunc(t.quarters)*3,p={...e.c,year:r,month:a,day:Math.min(e.c.day,iv(r,a))+Math.trunc(t.days)+Math.trunc(t.weeks)*7},y=vt.fromObject({years:t.years-Math.trunc(t.years),quarters:t.quarters-Math.trunc(t.quarters),months:t.months-Math.trunc(t.months),weeks:t.weeks-Math.trunc(t.weeks),days:t.days-Math.trunc(t.days),hours:t.hours,minutes:t.minutes,seconds:t.seconds,milliseconds:t.milliseconds}).as("milliseconds"),g=u2(p);let[_,T]=BP(g,i,e.zone);return y!==0&&(_+=y,T=e.zone.offset(_)),{ts:_,o:T}}function sc(e,t,i,r,a,p){const{setZone:y,zone:g}=i;if(e&&Object.keys(e).length!==0||t){const _=t||g,T=Ne.fromObject(e,{...i,zone:_,specificOffset:p});return y?T:T.setZone(g)}else return Ne.invalid(new Pn("unparsable",`the input "${a}" can't be parsed as ${r}`))}function py(e,t,i=!0){return e.isValid?fr.create(Et.create("en-US"),{allowZ:i,forceSimple:!0}).formatDateTimeFromString(e,t):null}function Uw(e,t){const i=e.c.year>9999||e.c.year<0;let r="";return i&&e.c.year>=0&&(r+="+"),r+=_i(e.c.year,i?6:4),t?(r+="-",r+=_i(e.c.month),r+="-",r+=_i(e.c.day)):(r+=_i(e.c.month),r+=_i(e.c.day)),r}function mT(e,t,i,r,a,p){let y=_i(e.c.hour);return t?(y+=":",y+=_i(e.c.minute),(e.c.millisecond!==0||e.c.second!==0||!i)&&(y+=":")):y+=_i(e.c.minute),(e.c.millisecond!==0||e.c.second!==0||!i)&&(y+=_i(e.c.second),(e.c.millisecond!==0||!r)&&(y+=".",y+=_i(e.c.millisecond,3))),a&&(e.isOffsetFixed&&e.offset===0&&!p?y+="Z":e.o<0?(y+="-",y+=_i(Math.trunc(-e.o/60)),y+=":",y+=_i(Math.trunc(-e.o%60))):(y+="+",y+=_i(Math.trunc(e.o/60)),y+=":",y+=_i(Math.trunc(e.o%60)))),p&&(y+="["+e.zone.ianaName+"]"),y}const qP={month:1,day:1,hour:0,minute:0,second:0,millisecond:0},oJ={weekNumber:1,weekday:1,hour:0,minute:0,second:0,millisecond:0},aJ={ordinal:1,hour:0,minute:0,second:0,millisecond:0},HP=["year","month","day","hour","minute","second","millisecond"],lJ=["weekYear","weekNumber","weekday","hour","minute","second","millisecond"],uJ=["year","ordinal","hour","minute","second","millisecond"];function hJ(e){const t={year:"year",years:"year",month:"month",months:"month",day:"day",days:"day",hour:"hour",hours:"hour",minute:"minute",minutes:"minute",quarter:"quarter",quarters:"quarter",second:"second",seconds:"second",millisecond:"millisecond",milliseconds:"millisecond",weekday:"weekday",weekdays:"weekday",weeknumber:"weekNumber",weeksnumber:"weekNumber",weeknumbers:"weekNumber",weekyear:"weekYear",weekyears:"weekYear",ordinal:"ordinal"}[e.toLowerCase()];if(!t)throw new WO(e);return t}function gT(e){switch(e.toLowerCase()){case"localweekday":case"localweekdays":return"localWeekday";case"localweeknumber":case"localweeknumbers":return"localWeekNumber";case"localweekyear":case"localweekyears":return"localWeekYear";default:return hJ(e)}}function cJ(e){return gm[e]||(mm===void 0&&(mm=ci.now()),gm[e]=e.offset(mm)),gm[e]}function vT(e,t){const i=Al(t.zone,ci.defaultZone);if(!i.isValid)return Ne.invalid(nf(i));const r=Et.fromObject(t);let a,p;if(Ye(e.year))a=ci.now();else{for(const _ of HP)Ye(e[_])&&(e[_]=qP[_]);const y=gP(e)||vP(e);if(y)return Ne.invalid(y);const g=cJ(i);[a,p]=ym(e,g,i)}return new Ne({ts:a,zone:i,loc:r,o:p})}function wT(e,t,i){const r=Ye(i.round)?!0:i.round,a=(y,g)=>(y=z6(y,r||i.calendary?0:2,!0),t.loc.clone(i).relFormatter(i).format(y,g)),p=y=>i.calendary?t.hasSame(e,y)?0:t.startOf(y).diff(e.startOf(y),y).get(y):t.diff(e,y).get(y);if(i.unit)return a(p(i.unit),i.unit);for(const y of i.units){const g=p(y);if(Math.abs(g)>=1)return a(g,y)}return a(e>t?-0:0,i.units[i.units.length-1])}function bT(e){let t={},i;return e.length>0&&typeof e[e.length-1]=="object"?(t=e[e.length-1],i=Array.from(e).slice(0,e.length-1)):i=Array.from(e),[t,i]}let mm,gm={};class Ne{constructor(t){const i=t.zone||ci.defaultZone;let r=t.invalid||(Number.isNaN(t.ts)?new Pn("invalid input"):null)||(i.isValid?null:nf(i));this.ts=Ye(t.ts)?ci.now():t.ts;let a=null,p=null;if(!r)if(t.old&&t.old.ts===this.ts&&t.old.zone.equals(i))[a,p]=[t.old.c,t.old.o];else{const g=Ul(t.o)&&!t.old?t.o:i.offset(this.ts);a=cy(this.ts,g),r=Number.isNaN(a.year)?new Pn("invalid input"):null,a=r?null:a,p=r?null:g}this._zone=i,this.loc=t.loc||Et.create(),this.invalid=r,this.weekData=null,this.localWeekData=null,this.c=a,this.o=p,this.isLuxonDateTime=!0}static now(){return new Ne({})}static local(){const[t,i]=bT(arguments),[r,a,p,y,g,_,T]=i;return vT({year:r,month:a,day:p,hour:y,minute:g,second:_,millisecond:T},t)}static utc(){const[t,i]=bT(arguments),[r,a,p,y,g,_,T]=i;return t.zone=Vi.utcInstance,vT({year:r,month:a,day:p,hour:y,minute:g,second:_,millisecond:T},t)}static fromJSDate(t,i={}){const r=zH(t)?t.valueOf():NaN;if(Number.isNaN(r))return Ne.invalid("invalid input");const a=Al(i.zone,ci.defaultZone);return a.isValid?new Ne({ts:r,zone:a,loc:Et.fromObject(i)}):Ne.invalid(nf(a))}static fromMillis(t,i={}){if(Ul(t))return t<-864e13||t>nJ?Ne.invalid("Timestamp out of range"):new Ne({ts:t,zone:Al(i.zone,ci.defaultZone),loc:Et.fromObject(i)});throw new cr(`fromMillis requires a numerical input, but received a ${typeof t} with value ${t}`)}static fromSeconds(t,i={}){if(Ul(t))return new Ne({ts:t*1e3,zone:Al(i.zone,ci.defaultZone),loc:Et.fromObject(i)});throw new cr("fromSeconds requires a numerical input")}static fromObject(t,i={}){t=t||{};const r=Al(i.zone,ci.defaultZone);if(!r.isValid)return Ne.invalid(nf(r));const a=Et.fromObject(i),p=rv(t,gT),{minDaysInFirstWeek:y,startOfWeek:g}=nT(p,a),_=ci.now(),T=Ye(i.specificOffset)?r.offset(_):i.specificOffset,I=!Ye(p.ordinal),A=!Ye(p.year),P=!Ye(p.month)||!Ye(p.day),N=A||P,D=p.weekYear||p.weekNumber;if((N||I)&&D)throw new lp("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(P&&I)throw new lp("Can't mix ordinal dates with month/day");const z=D||p.weekday&&!N;let q,J,ee=cy(_,T);z?(q=lJ,J=oJ,ee=tv(ee,y,g)):I?(q=uJ,J=aJ,ee=Lw(ee)):(q=HP,J=qP);let X=!1;for(const Ie of q){const ke=p[Ie];Ye(ke)?X?p[Ie]=J[Ie]:p[Ie]=ee[Ie]:X=!0}const ie=z?DH(p,y,g):I?jH(p):gP(p),oe=ie||vP(p);if(oe)return Ne.invalid(oe);const ue=z?rT(p,y,g):I?sT(p):p,[ge,Se]=ym(ue,T,r),Ee=new Ne({ts:ge,zone:r,o:Se,loc:a});return p.weekday&&N&&t.weekday!==Ee.weekday?Ne.invalid("mismatched weekday",`you can't specify both a weekday of ${p.weekday} and a date of ${Ee.toISO()}`):Ee.isValid?Ee:Ne.invalid(Ee.invalid)}static fromISO(t,i={}){const[r,a]=AW(t);return sc(r,a,i,"ISO 8601",t)}static fromRFC2822(t,i={}){const[r,a]=CW(t);return sc(r,a,i,"RFC 2822",t)}static fromHTTP(t,i={}){const[r,a]=OW(t);return sc(r,a,i,"HTTP",i)}static fromFormat(t,i,r={}){if(Ye(t)||Ye(i))throw new cr("fromFormat requires an input string and a format");const{locale:a=null,numberingSystem:p=null}=r,y=Et.fromOpts({locale:a,numberingSystem:p,defaultToEN:!0}),[g,_,T,I]=sJ(y,t,i);return I?Ne.invalid(I):sc(g,_,r,`format ${i}`,t,T)}static fromString(t,i,r={}){return Ne.fromFormat(t,i,r)}static fromSQL(t,i={}){const[r,a]=jW(t);return sc(r,a,i,"SQL",t)}static invalid(t,i=null){if(!t)throw new cr("need to specify a reason the DateTime is invalid");const r=t instanceof Pn?t:new Pn(t,i);if(ci.throwOnInvalid)throw new hH(r);return new Ne({invalid:r})}static isDateTime(t){return t&&t.isLuxonDateTime||!1}static parseFormatForOpts(t,i={}){const r=GP(t,Et.fromObject(i));return r?r.map(a=>a?a.val:null).join(""):null}static expandFormat(t,i={}){return zP(fr.parseFormat(t),Et.fromObject(i)).map(a=>a.val).join("")}static resetCache(){mm=void 0,gm={}}get(t){return this[t]}get isValid(){return this.invalid===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}get outputCalendar(){return this.isValid?this.loc.outputCalendar:null}get zone(){return this._zone}get zoneName(){return this.isValid?this.zone.name:null}get year(){return this.isValid?this.c.year:NaN}get quarter(){return this.isValid?Math.ceil(this.c.month/3):NaN}get month(){return this.isValid?this.c.month:NaN}get day(){return this.isValid?this.c.day:NaN}get hour(){return this.isValid?this.c.hour:NaN}get minute(){return this.isValid?this.c.minute:NaN}get second(){return this.isValid?this.c.second:NaN}get millisecond(){return this.isValid?this.c.millisecond:NaN}get weekYear(){return this.isValid?Fw(this).weekYear:NaN}get weekNumber(){return this.isValid?Fw(this).weekNumber:NaN}get weekday(){return this.isValid?Fw(this).weekday:NaN}get isWeekend(){return this.isValid&&this.loc.getWeekendDays().includes(this.weekday)}get localWeekday(){return this.isValid?zw(this).weekday:NaN}get localWeekNumber(){return this.isValid?zw(this).weekNumber:NaN}get localWeekYear(){return this.isValid?zw(this).weekYear:NaN}get ordinal(){return this.isValid?Lw(this.c).ordinal:NaN}get monthShort(){return this.isValid?uy.months("short",{locObj:this.loc})[this.month-1]:null}get monthLong(){return this.isValid?uy.months("long",{locObj:this.loc})[this.month-1]:null}get weekdayShort(){return this.isValid?uy.weekdays("short",{locObj:this.loc})[this.weekday-1]:null}get weekdayLong(){return this.isValid?uy.weekdays("long",{locObj:this.loc})[this.weekday-1]:null}get offset(){return this.isValid?+this.o:NaN}get offsetNameShort(){return this.isValid?this.zone.offsetName(this.ts,{format:"short",locale:this.locale}):null}get offsetNameLong(){return this.isValid?this.zone.offsetName(this.ts,{format:"long",locale:this.locale}):null}get isOffsetFixed(){return this.isValid?this.zone.isUniversal:null}get isInDST(){return this.isOffsetFixed?!1:this.offset>this.set({month:1,day:1}).offset||this.offset>this.set({month:5}).offset}getPossibleOffsets(){if(!this.isValid||this.isOffsetFixed)return[this];const t=864e5,i=6e4,r=u2(this.c),a=this.zone.offset(r-t),p=this.zone.offset(r+t),y=this.zone.offset(r-a*i),g=this.zone.offset(r-p*i);if(y===g)return[this];const _=r-y*i,T=r-g*i,I=cy(_,y),A=cy(T,g);return I.hour===A.hour&&I.minute===A.minute&&I.second===A.second&&I.millisecond===A.millisecond?[yu(this,{ts:_}),yu(this,{ts:T})]:[this]}get isInLeapYear(){return E1(this.year)}get daysInMonth(){return iv(this.year,this.month)}get daysInYear(){return this.isValid?bp(this.year):NaN}get weeksInWeekYear(){return this.isValid?W0(this.weekYear):NaN}get weeksInLocalWeekYear(){return this.isValid?W0(this.localWeekYear,this.loc.getMinDaysInFirstWeek(),this.loc.getStartOfWeek()):NaN}resolvedLocaleOptions(t={}){const{locale:i,numberingSystem:r,calendar:a}=fr.create(this.loc.clone(t),t).resolvedOptions(this);return{locale:i,numberingSystem:r,outputCalendar:a}}toUTC(t=0,i={}){return this.setZone(Vi.instance(t),i)}toLocal(){return this.setZone(ci.defaultZone)}setZone(t,{keepLocalTime:i=!1,keepCalendarTime:r=!1}={}){if(t=Al(t,ci.defaultZone),t.equals(this.zone))return this;if(t.isValid){let a=this.ts;if(i||r){const p=t.offset(this.ts),y=this.toObject();[a]=ym(y,p,t)}return yu(this,{ts:a,zone:t})}else return Ne.invalid(nf(t))}reconfigure({locale:t,numberingSystem:i,outputCalendar:r}={}){const a=this.loc.clone({locale:t,numberingSystem:i,outputCalendar:r});return yu(this,{loc:a})}setLocale(t){return this.reconfigure({locale:t})}set(t){if(!this.isValid)return this;const i=rv(t,gT),{minDaysInFirstWeek:r,startOfWeek:a}=nT(i,this.loc),p=!Ye(i.weekYear)||!Ye(i.weekNumber)||!Ye(i.weekday),y=!Ye(i.ordinal),g=!Ye(i.year),_=!Ye(i.month)||!Ye(i.day),T=g||_,I=i.weekYear||i.weekNumber;if((T||y)&&I)throw new lp("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(_&&y)throw new lp("Can't mix ordinal dates with month/day");let A;p?A=rT({...tv(this.c,r,a),...i},r,a):Ye(i.ordinal)?(A={...this.toObject(),...i},Ye(i.day)&&(A.day=Math.min(iv(A.year,A.month),A.day))):A=sT({...Lw(this.c),...i});const[P,N]=ym(A,this.o,this.zone);return yu(this,{ts:P,o:N})}plus(t){if(!this.isValid)return this;const i=vt.fromDurationLike(t);return yu(this,yT(this,i))}minus(t){if(!this.isValid)return this;const i=vt.fromDurationLike(t).negate();return yu(this,yT(this,i))}startOf(t,{useLocaleWeeks:i=!1}={}){if(!this.isValid)return this;const r={},a=vt.normalizeUnit(t);switch(a){case"years":r.month=1;case"quarters":case"months":r.day=1;case"weeks":case"days":r.hour=0;case"hours":r.minute=0;case"minutes":r.second=0;case"seconds":r.millisecond=0;break}if(a==="weeks")if(i){const p=this.loc.getStartOfWeek(),{weekday:y}=this;y<p&&(r.weekNumber=this.weekNumber-1),r.weekday=p}else r.weekday=1;if(a==="quarters"){const p=Math.ceil(this.month/3);r.month=(p-1)*3+1}return this.set(r)}endOf(t,i){return this.isValid?this.plus({[t]:1}).startOf(t,i).minus(1):this}toFormat(t,i={}){return this.isValid?fr.create(this.loc.redefaultToEN(i)).formatDateTimeFromString(this,t):jw}toLocaleString(t=ev,i={}){return this.isValid?fr.create(this.loc.clone(i),t).formatDateTime(this):jw}toLocaleParts(t={}){return this.isValid?fr.create(this.loc.clone(t),t).formatDateTimeParts(this):[]}toISO({format:t="extended",suppressSeconds:i=!1,suppressMilliseconds:r=!1,includeOffset:a=!0,extendedZone:p=!1}={}){if(!this.isValid)return null;const y=t==="extended";let g=Uw(this,y);return g+="T",g+=mT(this,y,i,r,a,p),g}toISODate({format:t="extended"}={}){return this.isValid?Uw(this,t==="extended"):null}toISOWeekDate(){return py(this,"kkkk-'W'WW-c")}toISOTime({suppressMilliseconds:t=!1,suppressSeconds:i=!1,includeOffset:r=!0,includePrefix:a=!1,extendedZone:p=!1,format:y="extended"}={}){return this.isValid?(a?"T":"")+mT(this,y==="extended",i,t,r,p):null}toRFC2822(){return py(this,"EEE, dd LLL yyyy HH:mm:ss ZZZ",!1)}toHTTP(){return py(this.toUTC(),"EEE, dd LLL yyyy HH:mm:ss 'GMT'")}toSQLDate(){return this.isValid?Uw(this,!0):null}toSQLTime({includeOffset:t=!0,includeZone:i=!1,includeOffsetSpace:r=!0}={}){let a="HH:mm:ss.SSS";return(i||t)&&(r&&(a+=" "),i?a+="z":t&&(a+="ZZ")),py(this,a,!0)}toSQL(t={}){return this.isValid?`${this.toSQLDate()} ${this.toSQLTime(t)}`:null}toString(){return this.isValid?this.toISO():jw}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`DateTime { ts: ${this.toISO()}, zone: ${this.zone.name}, locale: ${this.locale} }`:`DateTime { Invalid, reason: ${this.invalidReason} }`}valueOf(){return this.toMillis()}toMillis(){return this.isValid?this.ts:NaN}toSeconds(){return this.isValid?this.ts/1e3:NaN}toUnixInteger(){return this.isValid?Math.floor(this.ts/1e3):NaN}toJSON(){return this.toISO()}toBSON(){return this.toJSDate()}toObject(t={}){if(!this.isValid)return{};const i={...this.c};return t.includeConfig&&(i.outputCalendar=this.outputCalendar,i.numberingSystem=this.loc.numberingSystem,i.locale=this.loc.locale),i}toJSDate(){return new Date(this.isValid?this.ts:NaN)}diff(t,i="milliseconds",r={}){if(!this.isValid||!t.isValid)return vt.invalid("created by diffing an invalid DateTime");const a={locale:this.locale,numberingSystem:this.numberingSystem,...r},p=UH(i).map(vt.normalizeUnit),y=t.valueOf()>this.valueOf(),g=y?this:t,_=y?t:this,T=qW(g,_,p,a);return y?T.negate():T}diffNow(t="milliseconds",i={}){return this.diff(Ne.now(),t,i)}until(t){return this.isValid?ui.fromDateTimes(this,t):this}hasSame(t,i,r){if(!this.isValid)return!1;const a=t.valueOf(),p=this.setZone(t.zone,{keepLocalTime:!0});return p.startOf(i,r)<=a&&a<=p.endOf(i,r)}equals(t){return this.isValid&&t.isValid&&this.valueOf()===t.valueOf()&&this.zone.equals(t.zone)&&this.loc.equals(t.loc)}toRelative(t={}){if(!this.isValid)return null;const i=t.base||Ne.fromObject({},{zone:this.zone}),r=t.padding?this<i?-t.padding:t.padding:0;let a=["years","months","days","hours","minutes","seconds"],p=t.unit;return Array.isArray(t.unit)&&(a=t.unit,p=void 0),wT(i,this.plus(r),{...t,numeric:"always",units:a,unit:p})}toRelativeCalendar(t={}){return this.isValid?wT(t.base||Ne.fromObject({},{zone:this.zone}),this,{...t,numeric:"auto",units:["years","months","days"],calendary:!0}):null}static min(...t){if(!t.every(Ne.isDateTime))throw new cr("min requires all arguments be DateTimes");return oT(t,i=>i.valueOf(),Math.min)}static max(...t){if(!t.every(Ne.isDateTime))throw new cr("max requires all arguments be DateTimes");return oT(t,i=>i.valueOf(),Math.max)}static fromFormatExplain(t,i,r={}){const{locale:a=null,numberingSystem:p=null}=r,y=Et.fromOpts({locale:a,numberingSystem:p,defaultToEN:!0});return VP(y,t,i)}static fromStringExplain(t,i,r={}){return Ne.fromFormatExplain(t,i,r)}static buildFormatParser(t,i={}){const{locale:r=null,numberingSystem:a=null}=i,p=Et.fromOpts({locale:r,numberingSystem:a,defaultToEN:!0});return new UP(p,t)}static fromFormatParser(t,i,r={}){if(Ye(t)||Ye(i))throw new cr("fromFormatParser requires an input string and a format parser");const{locale:a=null,numberingSystem:p=null}=r,y=Et.fromOpts({locale:a,numberingSystem:p,defaultToEN:!0});if(!y.equals(i.locale))throw new cr(`fromFormatParser called with a locale of ${y}, but the format parser was created for ${i.locale}`);const{result:g,zone:_,specificOffset:T,invalidReason:I}=i.explainFromTokens(t);return I?Ne.invalid(I):sc(g,_,r,`format ${i.format}`,t,T)}static get DATE_SHORT(){return ev}static get DATE_MED(){return JO}static get DATE_MED_WITH_WEEKDAY(){return dH}static get DATE_FULL(){return ZO}static get DATE_HUGE(){return KO}static get TIME_SIMPLE(){return YO}static get TIME_WITH_SECONDS(){return XO}static get TIME_WITH_SHORT_OFFSET(){return QO}static get TIME_WITH_LONG_OFFSET(){return eP}static get TIME_24_SIMPLE(){return tP}static get TIME_24_WITH_SECONDS(){return iP}static get TIME_24_WITH_SHORT_OFFSET(){return rP}static get TIME_24_WITH_LONG_OFFSET(){return sP}static get DATETIME_SHORT(){return nP}static get DATETIME_SHORT_WITH_SECONDS(){return oP}static get DATETIME_MED(){return aP}static get DATETIME_MED_WITH_SECONDS(){return lP}static get DATETIME_MED_WITH_WEEKDAY(){return fH}static get DATETIME_FULL(){return uP}static get DATETIME_FULL_WITH_SECONDS(){return hP}static get DATETIME_HUGE(){return cP}static get DATETIME_HUGE_WITH_SECONDS(){return pP}}function Ad(e){if(Ne.isDateTime(e))return e;if(e&&e.valueOf&&Ul(e.valueOf()))return Ne.fromJSDate(e);if(e&&typeof e=="object")return Ne.fromObject(e);throw new cr(`Unknown datetime argument: ${e}, of type ${typeof e}`)}const pJ="shortOffset";function dJ(e){return"timeZoneIANA"in e}function fJ(e){return e.startsWith("UTC")}function sv(e,t=!1){return{json:{read:{source:e,reader:(i,r)=>r[e]?vm(r[e]):null},write:!!t&&{allowNull:!0,writer(i,r){r[e]=i?yJ(i):null}}}}}function vm(e,t=bo){return e?dJ(e)?e.timeZoneIANA:mJ(e,t):t}function yJ(e){return{timeZoneIANA:e}}function mJ(e,t=bo){if(!e||!q7.has(e.timeZone))return t;const i=q7.get(e.timeZone);return fJ(e.timeZone)||e.respectsDaylightSaving?i:gJ(i)}function gJ(e){const t=Ne.local().setZone(e),i=Math.min(t.set({month:1,day:1}).offset,t.set({month:5}).offset);return i===0?"Etc/UTC":`Etc/GMT${Vi.instance(-i).formatOffset(0,"narrow")}`}function Zwe(e,t,i,r,a){if(t&&a==="date")return{timeZone:Kl,timeZoneName:void 0};const p=r.timeStyle||r.hour,y=i===Lh;return{timeZone:y?a==="timestamp-offset"?void 0:e??Kl:i,timeZoneName:y&&p?pJ:void 0}}function vJ(e){const t=new Set(["etc/utc","etc/gmt","gmt"]),i=new Set(Intl.supportedValuesOf("timeZone").map(r=>r.toLowerCase()));return e===bo||e===Lh||t.has(e.toLowerCase())||i.has(e.toLowerCase())}const wJ={year:void 0,month:void 0,day:void 0,weekday:void 0},bJ={hour:void 0,minute:void 0,second:void 0},WP={timeZone:Kl},zn={year:"numeric",month:"numeric",day:"numeric"},Cd={year:"numeric",month:"long",day:"numeric"},Od={year:"numeric",month:"short",day:"numeric"},Pd={year:"numeric",month:"long",weekday:"long",day:"numeric"},Tl={hour:"numeric",minute:"numeric"},Iu={...Tl,second:"numeric"},JP={hourCycle:"h23"},kd={...Tl,...JP},Rd={...Iu,...JP},ZP={"short-date":zn,"short-date-short-time":{...zn,...Tl},"short-date-short-time-24":{...zn,...kd},"short-date-long-time":{...zn,...Iu},"short-date-long-time-24":{...zn,...Rd},"short-date-le":zn,"short-date-le-short-time":{...zn,...Tl},"short-date-le-short-time-24":{...zn,...kd},"short-date-le-long-time":{...zn,...Iu},"short-date-le-long-time-24":{...zn,...Rd},"long-month-day-year":Cd,"long-month-day-year-short-time":{...Cd,...Tl},"long-month-day-year-short-time-24":{...Cd,...kd},"long-month-day-year-long-time":{...Cd,...Iu},"long-month-day-year-long-time-24":{...Cd,...Rd},"day-short-month-year":Od,"day-short-month-year-short-time":{...Od,...Tl},"day-short-month-year-short-time-24":{...Od,...kd},"day-short-month-year-long-time":{...Od,...Iu},"day-short-month-year-long-time-24":{...Od,...Rd},"long-date":Pd,"long-date-short-time":{...Pd,...Tl},"long-date-short-time-24":{...Pd,...kd},"long-date-long-time":{...Pd,...Iu},"long-date-long-time-24":{...Pd,...Rd},"long-month-year":{month:"long",year:"numeric"},"short-month-year":{month:"short",year:"numeric"},year:{year:"numeric"},"short-time":Tl,"long-time":Iu},_J=qi()({shortDate:"short-date",shortDateShortTime:"short-date-short-time",shortDateShortTime24:"short-date-short-time-24",shortDateLongTime:"short-date-long-time",shortDateLongTime24:"short-date-long-time-24",shortDateLE:"short-date-le",shortDateLEShortTime:"short-date-le-short-time",shortDateLEShortTime24:"short-date-le-short-time-24",shortDateLELongTime:"short-date-le-long-time",shortDateLELongTime24:"short-date-le-long-time-24",longMonthDayYear:"long-month-day-year",longMonthDayYearShortTime:"long-month-day-year-short-time",longMonthDayYearShortTime24:"long-month-day-year-short-time-24",longMonthDayYearLongTime:"long-month-day-year-long-time",longMonthDayYearLongTime24:"long-month-day-year-long-time-24",dayShortMonthYear:"day-short-month-year",dayShortMonthYearShortTime:"day-short-month-year-short-time",dayShortMonthYearShortTime24:"day-short-month-year-short-time-24",dayShortMonthYearLongTime:"day-short-month-year-long-time",dayShortMonthYearLongTime24:"day-short-month-year-long-time-24",longDate:"long-date",longDateShortTime:"long-date-short-time",longDateShortTime24:"long-date-short-time-24",longDateLongTime:"long-date-long-time",longDateLongTime24:"long-date-long-time-24",longMonthYear:"long-month-year",shortMonthYear:"short-month-year",year:"year"}),KP={ar:"ar-u-nu-latn-ca-gregory"};let i5=new WeakMap;const p2=ZP["short-date-short-time"];function SJ(e){let t=i5.get(e);if(!t){const i=Jr(),r=KP[i]||i,a=q6(e.timeZone??bo),p={...e,timeZone:a};t=new Intl.DateTimeFormat(r,p),i5.set(e,t)}return t}function Kwe(e){return ZP[e]}function B6(e,t=p2){return SJ(t).format(e)}function Ywe(e,t=p2){return B6(new Date(e),{...t,...WP,...bJ})}function Xwe(e,t=p2){return B6(new Date(`1970-01-01T${e}Z`),{...t,...WP,...wJ})}function Qwe(e,t=p2){if(t.timeZone)return B6(new Date(e),t);const i=Ne.fromISO(e,{setZone:!0}),r=Jr(),a=KP[r]??r,p=i.offset===0?Kl:t.timeZone,y={...t,timeZone:p};return i.toLocaleString(y,{locale:a})}function q6(e){switch(e){case bo:return uH;case Lh:return Kl;default:return e}}k6(()=>{i5=new WeakMap});const xJ={ar:"ar-u-nu-latn"};let wm=new WeakMap,YP={};function r5(e){const t=e||YP;if(!wm.has(t)){const i=Jr(),r=xJ[Jr()]||i;wm.set(t,new Intl.NumberFormat(r,e))}return wm.get(t)}function ebe(e={}){const t={};return e.digitSeparator!=null&&(t.useGrouping=e.digitSeparator),e.places!=null&&(t.minimumFractionDigits=t.maximumFractionDigits=e.places),t}function tbe(e,t){return Object.is(e,-0)&&(e=0),r5(t).format(e)}function ibe(e,t=Jr()){var r,a;if(!e)return null;let i=_T.get(t);if(!i){const p=r5().formatToParts(12345.6),y=[...r5({useGrouping:!1}).format(9876543210)].reverse(),g=new Map(y.map((N,D)=>[N,D])),_=new RegExp(`[${(r=p.find(N=>N.type==="group"))==null?void 0:r.value}]`,"g"),T=new RegExp(`[${(a=p.find(N=>N.type==="decimal"))==null?void 0:a.value}]`),I=new RegExp(`[${y.join("")}]`,"g"),A=/[\u200E\u200F\u202A\u202B\u202C\u202D\u202E\u2066\u2067\u2068\u2069\u061C]/g,P=/[-\u2212\u2013\u2014\u2015]/g;i=N=>{if((N=N.trim().replaceAll(_,"").replace(T,".").replace(I,z=>String(g.get(z))).replaceAll(A,"").replaceAll(P,"-"))==="")return null;const D=Number(N);return isNaN(D)?null:D},_T.set(t,i)}return i(e)}k6(()=>{wm=new WeakMap,YP={}});const _T=new Map;async function TJ(e,t,i,r){const a=t.exec(i);if(!a)throw new Y("esri-intl:invalid-bundle",`Bundle id "${i}" is not compatible with the pattern "${t}"`);const p=a[1]?`${a[1]}/`:"",y=a[2],g=qO(r),_=`${p}${y}.json`,T=g?`${p}${y}_${g}.json`:_;let I;try{I=await ST(e(T))}catch(A){if(T===_)throw new Y("intl:unknown-bundle",`Bundle "${i}" cannot be loaded`,{error:A});try{I=await ST(e(_))}catch(P){throw new Y("intl:unknown-bundle",`Bundle "${i}" cannot be loaded`,{error:P})}}return I}async function ST(e){if(xT.fetchBundleAsset!=null)return xT.fetchBundleAsset(e);const t=await kt(e,{responseType:"text"});return JSON.parse(t.data)}let MJ=class{constructor({base:t="",pattern:i,location:r=new URL(window.location.href)}){let a;a=typeof r=="string"?p=>new URL(p,new URL(r,window.location.href)).href:r instanceof URL?p=>new URL(p,r).href:r,this.pattern=typeof i=="string"?new RegExp(`^${i}`):i,this.getAssetUrl=a,t=t?t.endsWith("/")?t:t+"/":"",this.matcher=new RegExp(`^${t}(?:(.*)\\/)?(.*)$`)}fetchMessageBundle(t,i){return TJ(this.getAssetUrl,this.matcher,t,i)}};function $J(e){return new MJ(e)}const xT={};nH($J({pattern:"esri/",location:ti}));let zo=class extends Ae{constructor(t){super(t),this.apiKey=null,this.id=null,this.language=null,this.places=null,this.serviceUrl="https://basemapstyles-api.arcgis.com/arcgis/rest/services/styles/v2",this.worldview=null}get languageParameter(){const t=this.language;let i=t==="local"||t==="global"?t:qO(t??Jr())??"global";return i=i==="no"?"nb":i,i}};v([S()],zo.prototype,"apiKey",void 0),v([S()],zo.prototype,"id",void 0),v([S()],zo.prototype,"language",void 0),v([S()],zo.prototype,"places",void 0),v([S()],zo.prototype,"serviceUrl",void 0),v([S()],zo.prototype,"worldview",void 0),zo=v([H("esri.support.BasemapStyle")],zo);const EJ=zo;function IJ(e){return XP(e)||AJ(e)}function nbe(e){return e!=null&&typeof e=="object"&&"type"in e&&e.type==="feature"}function AJ(e){return(e==null?void 0:e.type)==="scene"}function CJ(e){return e!=null&&typeof e=="object"&&"type"in e&&e.type==="subtype-group"&&"sublayers"in e}function Au(e){return(e==null?void 0:e.type)==="subtype-sublayer"}function XP(e){const t=e==null?void 0:e.type;return t==="imagery-tile"||t==="tile"||t==="open-street-map"||t==="vector-tile"||t==="web-tile"||t==="wmts"}function OJ(e){const t=e==null?void 0:e.type;return t==="base-tile"||t==="tile"||t==="elevation"||t==="imagery-tile"||t==="base-elevation"||t==="open-street-map"||t==="wcs"||t==="web-tile"||t==="wmts"||t==="vector-tile"}const obe={Point:"SceneLayer","3DObject":"SceneLayer",IntegratedMesh:"IntegratedMeshLayer",PointCloud:"PointCloudLayer",Building:"BuildingSceneLayer"};function s5(e){const t=e==null?void 0:e.type;return t==="building-scene"||t==="integrated-mesh"||t==="point-cloud"||t==="scene"}function abe(e){return e==="integrated-mesh"||e==="integrated-mesh-3dtiles"}function d2(e){var t;return(e==null?void 0:e.type)==="feature"&&!e.url&&((t=e.source)==null?void 0:t.type)==="memory"}function lbe(e){var i;const t=e==null?void 0:e.type;return(t==="feature"||t==="subtype-group"||t==="oriented-imagery")&&((i=e==null?void 0:e.source)==null?void 0:i.type)==="feature-layer"}function PJ(e){if(e.activeLayer){const t=e.activeLayer.tileMatrixSet;if(t)return t;const i=e.activeLayer.tileMatrixSets;if(i)return i}return null}async function H6(e,t){const i=Ze==null?void 0:Ze.findServerInfo(e);if((i==null?void 0:i.currentVersion)!=null)return i.owningSystemUrl||null;const r=e.toLowerCase().indexOf("/rest/services");if(r===-1)return null;const a=`${e.slice(0,r)}/rest/info`,p=t!=null?t.signal:null,{data:y}=await kt(a,{query:{f:"json"},responseType:"json",signal:p});return(y==null?void 0:y.owningSystemUrl)||null}function QP(e){if(!("capabilities"in e))return!1;switch(e.type){case"catalog":case"catalog-footprint":case"csv":case"feature":case"geojson":case"imagery":case"knowledge-graph-sublayer":case"ogc-feature":case"oriented-imagery":case"scene":case"sublayer":case"subtype-group":case"subtype-sublayer":case"wfs":return!0;default:return!1}}function kJ(e){return QP(e)?"effectiveCapabilities"in e?e.effectiveCapabilities:e.capabilities:null}function RJ(e){if(!("editingEnabled"in e))return!1;switch(e.type){case"csv":case"feature":case"geojson":case"oriented-imagery":case"scene":case"subtype-group":case"subtype-sublayer":return!0;default:return!1}}function NJ(e){return!!RJ(e)&&("effectiveEditingEnabled"in e?e.effectiveEditingEnabled:e.editingEnabled)}const LJ=new Set(["bing-maps","imagery","imagery-tile","map-image","open-street-map","tile","unknown","unsupported","vector-tile","web-tile","wcs","wms","wmts"]),ek=new Set(["catalog","csv","feature","geo-rss","geojson","group","imagery","imagery-tile","kml","knowledge-graph","map-image","map-notes","media","ogc-feature","oriented-imagery","route","stream","subtype-group","tile","unknown","unsupported","vector-tile","web-tile","wcs","wfs","wms","wmts"]),DJ=new Set([...ek,"link-chart"]);function jJ(e){switch(e.layerContainerType){case"basemap":return LJ;case"operational-layers":return e.origin==="link-chart"?DJ:ek;default:return null}}function FJ(e,t){if(t.restrictedWebMapWriting){const i=jJ(t);return i==null||i.has(e.type)&&!d2(e)}return!0}function zJ(e,t){var i;if(t)if(d2(e)){const r=qv("featureCollection.layers",t),a=(i=r==null?void 0:r[0])==null?void 0:i.layerDefinition;a&&TT(e,a)}else e.type!=="group"&&TT(e,t)}function TT(e,t){"maxScale"in e&&(t.maxScale=zg(e.maxScale)??void 0),"minScale"in e&&(t.minScale=zg(e.minScale)??void 0)}function UJ(e,t){if(zJ(e,t),t&&(t.id=e.id,"blendMode"in e&&(t.blendMode=e.blendMode,t.blendMode==="normal"&&delete t.blendMode),t.opacity=zg(e.opacity)??void 0,t.title=e.title||"Layer",t.visibility=e.visible,"legendEnabled"in e&&e.type!=="wmts"))if(d2(e)){const i=t.featureCollection;i&&(i.showLegend=e.legendEnabled)}else t.showLegend=e.legendEnabled}function MT(e,t,i){if(!e.persistenceEnabled)return null;if(!("write"in e)||!e.write)return i!=null&&i.messages&&i.messages.push(new Y("layer:unsupported",`Layers (${e.title}, ${e.id}) of type '${e.declaredClass}' cannot be persisted`,{layer:e})),null;if(d2(e)&&!e.isTable)t=e.resourceInfo;else if(FJ(e,i)){const r={};return e.write(r,i)?r:null}return t!=null&&UJ(e,t=te(t)),t}var of;let VJ=0,ns=of=class extends he.JSONSupportMixin(Xs){constructor(e){super(e),this.id=null,this.portalItem=null,this.spatialReference=null,this.style=null,this.thumbnailUrl=null,this.title="Basemap",this.id=Date.now().toString(16)+"-basemap-"+VJ++,this.baseLayers=new xe,this.referenceLayers=new xe;const t=r=>{r.parent&&r.parent!==this&&"remove"in r.parent&&r.parent.remove(r),r.parent=this,r.type==="elevation"&&ye.getLogger(this).error(`Layer '${r.title}, id:${r.id}' of type '${r.type}' is not supported as a basemap layer and will therefore be ignored.`)},i=r=>{r.parent=null};this.addHandles([this.baseLayers.on("after-add",r=>t(r.item)),this.referenceLayers.on("after-add",r=>t(r.item)),this.baseLayers.on("after-remove",r=>i(r.item)),this.referenceLayers.on("after-remove",r=>i(r.item))])}initialize(){this.when().catch(e=>{ye.getLogger(this).error("#load()",`Failed to load basemap (title: '${this.title}', id: '${this.id}')`,e)}),this.resourceInfo&&this.read(this.resourceInfo.data,this.resourceInfo.context)}destroy(){const e=this.baseLayers.toArray();for(const i of e)i.destroy();const t=this.referenceLayers.toArray();for(const i of t)i.destroy();this.baseLayers.destroy(),this.referenceLayers.destroy(),this.portalItem=Ht(this.portalItem)}normalizeCtorArgs(e){return e&&"resourceInfo"in e&&(this._set("resourceInfo",e.resourceInfo),delete(e={...e}).resourceInfo),e}set baseLayers(e){this._set("baseLayers",Ta(e,this._get("baseLayers")))}_writeBaseLayers(e,t,i){const r=[];e&&(i={...i,layerContainerType:"basemap"},this.baseLayers.forEach(a=>{const p=MT(a,i.webmap?i.webmap.getLayerJSONFromResourceInfo(a):null,i);p!=null&&r.push(p)}),this.referenceLayers.forEach(a=>{const p=MT(a,i.webmap?i.webmap.getLayerJSONFromResourceInfo(a):null,i);p!=null&&(a.type!=="scene"&&(p.isReference=!0),r.push(p))})),t.baseMapLayers=r}set referenceLayers(e){this._set("referenceLayers",Ta(e,this._get("referenceLayers")))}writeTitle(e,t){t.title=e||"Basemap"}load(e){return this.addResolvingPromise(this._loadFromSource(e)),Promise.resolve(this)}loadAll(){return bO(this,e=>{e(this.baseLayers,this.referenceLayers)})}clone(){const e={id:this.id,title:this.title,portalItem:this.portalItem,baseLayers:this.baseLayers.map(t=>Mg(t)?t.clone():t),referenceLayers:this.referenceLayers.map(t=>Mg(t)?t.clone():t)};return this.loaded&&(e.loadStatus="loaded"),new of({resourceInfo:this.resourceInfo}).set(e)}read(e,t){this.resourceInfo||this._set("resourceInfo",{data:e,context:t}),super.read(e,t)}write(e,t){var i;return e=e||{},t!=null&&t.origin||(t={origin:"web-map",...t}),super.write(e,t),!this.loaded&&((i=this.resourceInfo)!=null&&i.data.baseMapLayers)&&(e.baseMapLayers=this.resourceInfo.data.baseMapLayers.map(r=>{const a=te(r);return a.url&&vo(a.url)&&(a.url=`https:${a.url}`),a.templateUrl&&vo(a.templateUrl)&&(a.templateUrl=`https:${a.templateUrl}`),a})),e}async _loadFromSource(e){const{resourceInfo:t,portalItem:i,style:r}=this;At(e);const a=[];if(t){const p=t.context?t.context.url:null;if(a.push(this._loadLayersFromJSON(t.data,p,e)),t.data.id&&!t.data.title){const y=t.data.id;a.push(lH(y).then(g=>{g&&this.read({title:g},t.context)}))}}else i?a.push(this._loadFromItem(i,e)):r&&a.push(this._loadFromStylesService(r,e));await Promise.all(a)}async _loadLayersFromJSON(e,t,i){var _,T;const r=(_=this.resourceInfo)==null?void 0:_.context,a=((T=this.portalItem)==null?void 0:T.portal)||(r==null?void 0:r.portal)||null,p=BJ[(r==null?void 0:r.origin)||""]??"web-map",{populateOperationalLayers:y}=await fe(async()=>{const{populateOperationalLayers:I}=await import("./layersCreator-DfVSmhd4.js");return{populateOperationalLayers:I}},__vite__mapDeps([9,10,11,12,13,14])),g=[];if(At(i),e.baseMapLayers&&Array.isArray(e.baseMapLayers)){const I={context:{...r,origin:p,url:t,portal:a,layerContainerType:"basemap"},defaultLayerType:"DefaultTileLayer"},A=D=>p==="web-scene"&&D.layerType==="ArcGISSceneServiceLayer"||D.isReference,P=y(this.baseLayers,e.baseMapLayers.filter(D=>!A(D)),I);g.push(P);const N=y(this.referenceLayers,e.baseMapLayers.filter(A),I);g.push(N)}await Promise.allSettled(g)}async _loadFromItem(e,t){const i=await e.load(t),r=await i.fetchData("json",t),a=mr(e.itemUrl??"");return this._set("resourceInfo",{data:r.baseMap??{},context:{origin:GJ[e.type||""]??"web-map",portal:e.portal||er.getDefault(),url:a}}),this.read(this.resourceInfo.data,this.resourceInfo.context),this.read({spatialReference:r.spatialReference},this.resourceInfo.context),this.read({title:e.title,thumbnailUrl:e.thumbnailUrl},{origin:"portal-item",portal:e.portal||er.getDefault(),url:a}),this._loadLayersFromJSON(this.resourceInfo.data,a,t)}async _loadFromStylesService(e,t){const i=e.serviceUrl.endsWith("/webmaps")?e.serviceUrl.slice(0,-8):e.serviceUrl,r=`${i}/styles/${e.id}/self`,a=`${i}/webmaps/${e.id}`,[p,y]=await Promise.all([(await kt(r,{query:{token:e.apiKey},signal:t==null?void 0:t.signal})).data,(await kt(a,{query:{language:e.languageParameter,places:e.places,worldview:e.worldview,token:e.apiKey},signal:t==null?void 0:t.signal})).data]);this.thumbnailUrl??(this.thumbnailUrl=p.thumbnailUrl);const g=mr(a);if(this._set("resourceInfo",{data:y.baseMap??{},context:{origin:"web-map",url:g}}),this.read(this.resourceInfo.data,this.resourceInfo.context),this.read({spatialReference:y.spatialReference},this.resourceInfo.context),await this._loadLayersFromJSON(this.resourceInfo.data,g,t),e.apiKey)for(const _ of[...this.baseLayers,...this.referenceLayers])"apiKey"in _&&(_.apiKey=e.apiKey)}static fromId(e){const t=Bp[e];return t?t.itemId?new of({portalItem:{id:t.itemId,portal:{url:"https://www.arcgis.com"}}}):of.fromJSON(t,{origin:t.is3d?"web-scene":"web-map"}):null}};v([S({json:{write:{ignoreOrigin:!0,target:"baseMapLayers",writer(e,t,i,r){this._writeBaseLayers(e,t,r)}},origins:{"web-scene":{write:{ignoreOrigin:!0,target:{baseMapLayers:{type:xe}},writer(e,t,i,r){this._writeBaseLayers(e,t,r)}}}}}})],ns.prototype,"baseLayers",null),v([S({type:String,json:{origins:{"web-scene":{write:!0}}}})],ns.prototype,"id",void 0),v([S({type:m0})],ns.prototype,"portalItem",void 0),v([S()],ns.prototype,"referenceLayers",null),v([S({readOnly:!0})],ns.prototype,"resourceInfo",void 0),v([S({type:qe})],ns.prototype,"spatialReference",void 0),v([S({type:EJ})],ns.prototype,"style",void 0),v([S()],ns.prototype,"thumbnailUrl",void 0),v([S({type:String,json:{origins:{"web-scene":{write:{isRequired:!0}}}}})],ns.prototype,"title",void 0),v([be("title")],ns.prototype,"writeTitle",null),ns=of=v([H("esri.Basemap")],ns);const GJ={"Web Scene":"web-scene","Web Map":"web-map","Link Chart":"link-chart"},BJ={"web-scene":"web-scene","web-map":"web-map","link-chart":"link-chart"},Vl=ns,qJ=Object.freeze(Object.defineProperty({__proto__:null,default:Vl},Symbol.toStringTag,{value:"Module"})),nv={transparent:[0,0,0,0],black:[0,0,0,1],silver:[192,192,192,1],gray:[128,128,128,1],white:[255,255,255,1],maroon:[128,0,0,1],red:[255,0,0,1],purple:[128,0,128,1],fuchsia:[255,0,255,1],green:[0,128,0,1],lime:[0,255,0,1],olive:[128,128,0,1],yellow:[255,255,0,1],navy:[0,0,128,1],blue:[0,0,255,1],teal:[0,128,128,1],aqua:[0,255,255,1],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],blanchedalmond:[255,235,205,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],oldlace:[253,245,230,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],rebeccapurple:[102,51,153,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],whitesmoke:[245,245,245,1],yellowgreen:[154,205,50,1]};function tk(e){return!!nv[e]||!!nv[e.toLowerCase()]}function W6(e){return nv[e]??nv[e.toLowerCase()]}function HJ(e){return[...W6(e)]}function Vw(e,t,i){i<0&&++i,i>1&&--i;const r=6*i;return r<1?e+(t-e)*r:2*i<1?t:3*i<2?e+(t-e)*(2/3-i)*6:e}function ik(e,t,i,r=1){const a=(e%360+360)%360/360,p=i<=.5?i*(t+1):i+t-i*t,y=2*i-p;return[Math.round(255*Vw(y,p,a+1/3)),Math.round(255*Vw(y,p,a)),Math.round(255*Vw(y,p,a-1/3)),r]}function WJ(e){const t=e.length>5,i=t?8:4,r=(1<<i)-1,a=t?1:17,p=t?e.length===9:e.length===5;let y=+("0x"+e.slice(1));if(isNaN(y))return null;const g=[0,0,0,1];let _;return p&&(_=y&r,y>>=i,g[3]=a*_/255),_=y&r,y>>=i,g[2]=a*_,_=y&r,y>>=i,g[1]=a*_,_=y&r,y>>=i,g[0]=a*_,g}const ube=2.2,$T=new Float32Array(1);function hbe(e){--e;for(let t=1;t<32;t<<=1)e|=e>>t;return e+1}function xs(e,t,i){return Math.min(Math.max(e,t),i)}function cbe(e){return e--,e|=e>>1,e|=e>>2,e|=e>>4,e|=e>>8,e|=e>>16,++e}function af(e,t,i){return e+(t-e)*i}function pbe(e,t,i,r,a){return af(r,a,(e-t)/(i-t))}function kl(e){return e*Math.PI/180}function rk(e){return 180*e/Math.PI}function dbe(e,t=1e-6){return(e<0?-1:1)/Math.max(Math.abs(e),t)}function fbe(e){return Math.acos(xs(e,-1,1))}function JJ(e){return Math.asin(xs(e,-1,1))}function Zr(e,t,i=1e-6){return e===t?!0:!Number.isFinite(e)||!Number.isFinite(t)?!1:(e>t?e-t:t-e)<=i}function sk(e,t,i=1e-6){return!Zr(e,t,i)&&e>t}function n5(e,t,i=1e-6){return!Zr(e,t,i)&&e<t}function ZJ(e,t,i=1e-6){return Zr(e,t,i)||e>t}const ov=new DataView(new ArrayBuffer(Float64Array.BYTES_PER_ELEMENT));function o5(e){return ov.setFloat64(0,e),ov.getBigInt64(0)}function KJ(e){return ov.setBigInt64(0,e),ov.getFloat64(0)}const bm=BigInt("1000000"),YJ=nk(1);function nk(e){const t=o5(e=Math.abs(e)),i=KJ(t<=bm?bm:t-bm);return Math.abs(e-i)}function ybe(e,t,i=YJ){if(e===t)return!0;if(!Number.isFinite(e)||!Number.isFinite(t))return!1;if(i!=null&&nk(Math.min(Math.abs(e),Math.abs(t)))<i)return Math.abs(e-t)<=i;const r=o5(e),a=o5(t);return r<0!=a<0?!1:!((r<a?a-r:r-a)>bm)}function XJ(e,t,i=1e-6){if(e===t)return!0;if(!Number.isFinite(e)||!Number.isFinite(t))return!1;const r=Math.abs(e-t),a=Math.abs(e),p=Math.abs(t);if(e===0||t===0||a<1e-12&&p<1e-12){if(r>.01*i)return!1}else if(r/(a+p)>i)return!1;return!0}function QJ(e){return ok(Math.max(-a5,Math.min(e,a5)))}function ok(e){return $T[0]=e,$T[0]}function mbe(e){const t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],i=e[3]*e[3]+e[4]*e[4]+e[5]*e[5],r=e[6]*e[6]+e[7]*e[7]+e[8]*e[8];return!(Zr(t,1)&&Zr(i,1)&&Zr(r,1))}const a5=ok(34028234663852886e22);function gbe(e,t,i){if(i===void 0||+i==0)return Math[e](t);if(t=+t,i=+i,isNaN(t)||typeof i!="number"||i%1!=0)return NaN;let r=t.toString().split("e");return r=(t=Math[e](+(r[0]+"e"+(r[1]?+r[1]-i:-i)))).toString().split("e"),+(r[0]+"e"+(r[1]?+r[1]+i:i))}function dy(e){return xs(r6(e),0,255)}function fy(e,t,i){return e=Number(e),isNaN(e)?i:e<t?t:e>i?i:e}function yy(e,t){const i=e.toString(16).padStart(2,"0");return t?i.slice(0,1):i}let De=class $i{static blendColors(t,i,r,a=new $i){return a.r=Math.round(t.r+(i.r-t.r)*r),a.g=Math.round(t.g+(i.g-t.g)*r),a.b=Math.round(t.b+(i.b-t.b)*r),a.a=t.a+(i.a-t.a)*r,a._sanitize()}static fromRgb(t,i){const r=t.toLowerCase().match(/^(rgba?|hsla?)\(([\s.\-,%0-9]+)\)/);if(r){const a=r[2].split(/\s*,\s*/),p=r[1];if(p==="rgb"&&a.length===3||p==="rgba"&&a.length===4){const y=a[0];if(y.charAt(y.length-1)==="%"){const g=a.map(_=>2.56*parseFloat(_));return a.length===4&&(g[3]=parseFloat(a[3])),$i.fromArray(g,i)}return $i.fromArray(a.map(g=>parseFloat(g)),i)}if(p==="hsl"&&a.length===3||p==="hsla"&&a.length===4)return $i.fromArray(ik(parseFloat(a[0]),parseFloat(a[1])/100,parseFloat(a[2])/100,parseFloat(a[3])),i)}return null}static fromHex(t,i=new $i){if(t[0]!=="#"||isNaN(+`0x${t.slice(1)}`))return null;switch(t.length){case 4:case 5:{const r=parseInt(t.slice(1,2),16),a=parseInt(t.slice(2,3),16),p=parseInt(t.slice(3,4),16),y=t.length===5?15:parseInt(t.slice(4),16);return $i.fromArray([r+16*r,a+16*a,p+16*p,(y+16*y)/255],i)}case 7:case 9:{const r=parseInt(t.slice(1,3),16),a=parseInt(t.slice(3,5),16),p=parseInt(t.slice(5,7),16),y=t.length===7?255:parseInt(t.slice(7),16);return $i.fromArray([r,a,p,y/255],i)}default:return null}}static fromArray(t,i=new $i){return i._set(Number(t[0]),Number(t[1]),Number(t[2]),Number(t[3])),isNaN(i.a)&&(i.a=1),i._sanitize()}static fromString(t,i){const r=tk(t)?W6(t):null;return r&&$i.fromArray(r,i)||$i.fromRgb(t,i)||$i.fromHex(t,i)}static fromJSON(t){return t!=null?new $i([t[0],t[1],t[2],(t[3]??255)/255]):void 0}static toUnitRGB(t){return t!=null?[t.r/255,t.g/255,t.b/255]:null}static toUnitRGBA(t){return t!=null?[t.r/255,t.g/255,t.b/255,t.a!=null?t.a:1]:null}constructor(t){this.r=255,this.g=255,this.b=255,this.a=1,t&&this.setColor(t)}get isBright(){return .299*this.r+.587*this.g+.114*this.b>=127}setColor(t){return typeof t=="string"?$i.fromString(t,this):Array.isArray(t)?$i.fromArray(t,this):(this._set(t.r??0,t.g??0,t.b??0,t.a??1),t instanceof $i||this._sanitize()),this}toRgb(){return[this.r,this.g,this.b]}toRgba(){return[this.r,this.g,this.b,this.a]}toHex(t){const i=(t==null?void 0:t.capitalize)??!1,r=(t==null?void 0:t.digits)??6,a=r===3||r===4,p=r===4||r===8,y=`#${yy(this.r,a)}${yy(this.g,a)}${yy(this.b,a)}${p?yy(Math.round(255*this.a),a):""}`;return i?y.toUpperCase():y}toCss(t=!1){const i=this.r+", "+this.g+", "+this.b;return t?`rgba(${i}, ${this.a})`:`rgb(${i})`}toString(){return this.toCss(!0)}toJSON(){return this.toArray()}toArray(t=$i.AlphaMode.ALWAYS){const i=dy(this.r),r=dy(this.g),a=dy(this.b);return t===$i.AlphaMode.ALWAYS||this.a!==1?[i,r,a,dy(255*this.a)]:[i,r,a]}clone(){return new $i(this.toRgba())}hash(){return this.r<<24|this.g<<16|this.b<<8|255*this.a}equals(t){return t!=null&&t.r===this.r&&t.g===this.g&&t.b===this.b&&t.a===this.a}_sanitize(){return this.r=Math.round(fy(this.r,0,255)),this.g=Math.round(fy(this.g,0,255)),this.b=Math.round(fy(this.b,0,255)),this.a=fy(this.a,0,1),this}_set(t,i,r,a){this.r=t,this.g=i,this.b=r,this.a=a}};De.prototype.declaredClass="esri.Color",function(e){var t;(t=e.AlphaMode||(e.AlphaMode={}))[t.ALWAYS=0]="ALWAYS",t[t.UNLESS_OPAQUE=1]="UNLESS_OPAQUE"}(De);function Re(e,t={}){const i=e instanceof rt?e:new rt(e,t),{alwaysWriteDefaults:r,default:a,ignoreUnknown:p=!0,name:y,nonNullable:g,readOnly:_=!1}=t;return S({type:p?i.apiValues:String,json:{type:i.jsonValues,default:a,name:y,read:!_&&{reader:i.read},write:{writer:i.write,alwaysWriteDefaults:r}},nonNullable:g,readOnly:_})}var l5;let _m=l5=class extends he{constructor(e){super(e),this.type="none"}clone(){return new l5({type:this.type})}};v([Re({none:"none",stayAbove:"stay-above"}),S({json:{write:{isRequired:!0}}})],_m.prototype,"type",void 0),_m=l5=v([H("esri.ground.NavigationConstraint")],_m);const eZ=Symbol("GroundInstance");function f2(e){const t=r6(100*(1-e));return Math.max(0,Math.min(t,100))}function J0(e){const t=1-e/100;return Math.max(0,Math.min(t,1))}var ak,u5;let Uo=u5=class extends he.JSONSupportMixin(Xs){constructor(e){super(e),this[ak]=!0,this.opacity=1,this.surfaceColor=null,this.navigationConstraint=null,this.layers=new xe;const t=r=>{r.parent&&r.parent!==this&&"remove"in r.parent&&r.parent.remove(r),r.parent=this,r.type!=="elevation"&&r.type!=="base-elevation"&&ye.getLogger(this).error(`Layer '${r.title}, id:${r.id}' of type '${r.type}' is not supported as a ground layer and will therefore be ignored. Only layers of type 'elevation' are supported.`)},i=r=>{r.parent=null};this.addHandles([this.layers.on("after-add",r=>t(r.item)),this.layers.on("after-remove",r=>i(r.item))])}initialize(){this.when().catch(e=>{Si(e)||ye.getLogger(this).error("#load()","Failed to load ground",e)}),this.resourceInfo&&this.read(this.resourceInfo.data,this.resourceInfo.context)}destroy(){const e=this.layers.removeAll();for(const t of e)Ht(t);this.layers.destroy()}normalizeCtorArgs(e){return e&&"resourceInfo"in e&&(this._set("resourceInfo",e.resourceInfo),delete(e={...e}).resourceInfo),e}get layers(){return this._get("layers")}set layers(e){this._set("layers",Ta(e,this._get("layers")))}writeLayers(e,t,i,r){const a=[];e&&(r={...r,layerContainerType:"ground"},e.forEach(p=>{if("write"in p){const y={};dU(p)().write(y,r)&&a.push(y)}else r!=null&&r.messages&&r.messages.push(new Y("layer:unsupported",`Layers (${p.title}, ${p.id}) of type '${p.declaredClass}' cannot be persisted in the ground`,{layer:p}))})),t.layers=a}load(e){return this.addResolvingPromise(this._loadFromSource(e)),Promise.resolve(this)}loadAll(){return bO(this,e=>{e(this.layers)})}async queryElevation(e,t){await this.load({signal:t==null?void 0:t.signal});const{ElevationQuery:i}=await fe(()=>import("./ElevationQuery-BpNoba1T.js"),[]);At(t);const r=new i,a=this.layers.filter(ET).toArray();return r.queryAll(a,e,t)}async createElevationSampler(e,t){await this.load({signal:t==null?void 0:t.signal});const{ElevationQuery:i}=await fe(()=>import("./ElevationQuery-BpNoba1T.js"),[]);At(t);const r=new i,a=this.layers.filter(ET).toArray();return r.createSamplerAll(a,e,t)}clone(){const e={opacity:this.opacity,surfaceColor:te(this.surfaceColor),navigationConstraint:te(this.navigationConstraint),layers:this.layers.slice()};return this.loaded&&(e.loadStatus="loaded"),new u5({resourceInfo:this.resourceInfo}).set(e)}read(e,t){this.resourceInfo||this._set("resourceInfo",{data:e,context:t}),super.read(e,t)}_loadFromSource(e){const t=this.resourceInfo;return t?this._loadLayersFromJSON(t.data,t.context,e):Promise.resolve()}async _loadLayersFromJSON(e,t,i){const r=(t==null?void 0:t.origin)||"web-scene",a=(t==null?void 0:t.portal)||null,p=(t==null?void 0:t.url)||null,{populateOperationalLayers:y}=await fe(async()=>{const{populateOperationalLayers:_}=await import("./layersCreator-DfVSmhd4.js");return{populateOperationalLayers:_}},__vite__mapDeps([9,10,11,12,13,14]));At(i);const g=[];if(e.layers&&Array.isArray(e.layers)){const _={context:{origin:r,url:p,portal:a,layerContainerType:"ground"},defaultLayerType:"ArcGISTiledElevationServiceLayer"};g.push(y(this.layers,e.layers,_))}await Promise.allSettled(g)}};function tZ(e){return e&&"createElevationSampler"in e}function ET(e){return e.type==="elevation"||tZ(e)}ak=eZ,v([S({json:{read:!1,write:{isRequired:!0}}})],Uo.prototype,"layers",null),v([be("layers")],Uo.prototype,"writeLayers",null),v([S({readOnly:!0})],Uo.prototype,"resourceInfo",void 0),v([S({type:Number,nonNullable:!0,range:{min:0,max:1},json:{type:ft,read:{reader:J0,source:"transparency"},write:{writer:(e,t)=>{t.transparency=f2(e)},target:"transparency"}}})],Uo.prototype,"opacity",void 0),v([S({type:De,json:{type:[ft],write:(e,t)=>{t.surfaceColor=e.toJSON().slice(0,3)}}})],Uo.prototype,"surfaceColor",void 0),v([S({type:_m,json:{write:!0}})],Uo.prototype,"navigationConstraint",void 0),Uo=u5=v([H("esri.Ground")],Uo);const av=Uo;function Le(e,t,i={}){return J6(e,t,i,lk)}function gr(e,t,i={}){return J6(e,t,i,uk)}function J6(e,t,i={},r){let a=null;const p=i.once?(y,g)=>{r(y)&&(Wt(a),t(y,g))}:(y,g)=>{r(y)&&t(y,g)};if(a=LV(e,p,i.sync,i.equals),i.initial){const y=e();p(y,y)}return a}function _o(e,t,i,r={}){let a=null,p=null,y=null;function g(){var I;a&&p&&(p.remove(),(I=r.onListenerRemove)==null||I.call(r,a),a=null,p=null)}function _(I){r.once&&r.once&&Wt(y),i(I)}const T=Le(e,(I,A)=>{var P;g(),Zv(I)&&(a=I,p=v1(I,t,_),(P=r.onListenerAdd)==null||P.call(r,I))},{sync:r.sync,initial:!0});return y=yt(()=>{T.remove(),g()}),y}function y2(e,t){return iZ(e,uk,t)}function iZ(e,t,i){if(bs(i))return Promise.reject(Lt());const r=e();if(t!=null&&t(r))return Promise.resolve(r);let a=null;function p(){a=Wt(a)}return new Promise((y,g)=>{a=y1([Zs(i,()=>{p(),g(Lt())}),J6(e,_=>{p(),y(_)},{sync:!1,once:!0},t??lk)])})}function lk(e){return!0}function uk(e){return!!e}function rZ(e,t,i={}){let r=!1;const a=Le(e,(p,y)=>{r||t(p,y)},i);return{remove(){a.remove()},pause(){r=!0},resume(){r=!1}}}function sZ(e,t){const i=new xe,r=_o(e,"after-splice",({added:a,start:p,deleteCount:y})=>{const g=i.splice(p,y);for(const _ of g)_.remove();if(a!=null&&a.length){const _=a.map(t);i.addMany(_,p)}},{sync:!0,onListenerRemove:()=>i.drain(a=>a.remove()),onListenerAdd:a=>i.addMany(a.items.map(t))});return i.addHandles(r),i}function vbe(e,t){const i=new xe,r=sZ(e,g=>M1(async _=>{const T=await t(g,_);if(bs(_))throw T.remove(),Lt();return T})),a=()=>null,p=async g=>{const _=await g.promise,T=r.indexOf(g);T<0||i.splice(T,1,_)};i.addMany(r.items.map(a));for(const g of r)F0(p(g));const y=r.on("after-splice",({added:g,start:_,deleteCount:T})=>{const I=i.splice(_,T);for(const A of I)A==null||A.remove();if(g!=null&&g.length){i.addMany(g.map(a),_);for(const A of g)F0(p(A))}});return i.addHandles([kU(r),y]),i}const So={sync:!0},Pi={initial:!0},qr={sync:!0,initial:!0};let _c=class extends xe{constructor(t){super(t),this.getCollections=null}initialize(){this.addHandles(_C(()=>this._refresh(),So))}destroy(){this.getCollections=null}_refresh(){const t=this.getCollections!=null?this.getCollections():null;if(t==null)return void this.removeAll();let i=0;for(const r of t)r!=null&&(i=this._processCollection(i,r));this.splice(i,this.length)}_createNewInstance(t){return new xe(t)}_processCollection(t,i){if(!i)return t;const r=this.itemFilterFunction??(a=>!!a);for(const a of i)if(a){if(r(a)){const p=this.indexOf(a,t);p>=0?p!==t&&this.reorder(a,t):this.add(a,t),++t}if(this.getChildrenFunction){const p=this.getChildrenFunction(a);if(Array.isArray(p))for(const y of p)t=this._processCollection(t,y);else t=this._processCollection(t,p)}}return t}};v([S()],_c.prototype,"getCollections",void 0),v([S()],_c.prototype,"getChildrenFunction",void 0),v([S()],_c.prototype,"itemFilterFunction",void 0),_c=v([H("esri.core.CollectionFlattener")],_c);const Z0=_c,my=new WeakMap;function hk(e){return!e.destroyed&&(my.has(e)||e.addHandles([Le(()=>{const t=e.parent;return!(!t||!("type"in t))&&(t.type==="catalog-dynamic-group"||hk(t))},t=>my.set(e,t),qr),yt(()=>my.delete(e))]),my.get(e))}function nZ(e){return typeof e=="object"&&e!=null&&"loaded"in e&&e.loaded===!0&&"type"in e}function oZ(e){var t,i;return!(!nZ(e)||!((i=(t=kJ(e))==null?void 0:t.operations)!=null&&i.supportsEditing)||"editingEnabled"in e&&!NJ(e)||hk(e))}const aZ=/^-?(\d+(\.\d+)?)\s*((px)|(pt))?$/i,lZ="screenUtils.toPt: input not recognized!",ck=96;function uZ(e){return e?e/72*ck:0}function Qs(e){return e?72*e/ck:0}function ht(e){if(typeof e=="string"){const t=e.match(aZ);if(t){const i=Number(t[1]),r=t[3]&&t[3].toLowerCase(),a=e.charAt(0)==="-",p=r==="px"?Qs(i):i;return a?-p:p}return console.warn(lZ),null}return e}function Gi(e=0,t=0){return{x:e,y:t}}function bbe(e){return e?Gi(e.x,e.y):null}function _be(e=0,t=0){return[e,t]}function Sbe(e=0,t=0,i=0){return[e,t,i]}function xbe(e){return e}function Tbe(e){return e}function Mbe(e){return e}function $be(e,t){return t?(t[0]=e.x,t[1]=e.y,t.length>2&&(t[2]=0),t):[e.x,e.y]}function m2(){const e=new Float32Array(16);return e[0]=1,e[5]=1,e[10]=1,e[15]=1,e}function hZ(e){const t=new Float32Array(16);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function cZ(e,t,i,r,a,p,y,g,_,T,I,A,P,N,D,z){const q=new Float32Array(16);return q[0]=e,q[1]=t,q[2]=i,q[3]=r,q[4]=a,q[5]=p,q[6]=y,q[7]=g,q[8]=_,q[9]=T,q[10]=I,q[11]=A,q[12]=P,q[13]=N,q[14]=D,q[15]=z,q}function pZ(e,t){return new Float32Array(e,t,16)}const dZ=m2();Object.freeze(Object.defineProperty({__proto__:null,IDENTITY:dZ,clone:hZ,create:m2,createView:pZ,fromValues:cZ},Symbol.toStringTag,{value:"Module"}));function ou(){return[0,0,0]}function Z6(e){return[e[0],e[1],e[2]]}function yd(e,t,i){return[e,t,i]}function fZ(e,t,i){return[e,t,i]}function yZ(e,t=ou()){const i=Math.min(3,e.length);for(let r=0;r<i;++r)t[r]=e[r];return t}function mZ(e,t){return new Float64Array(e,t,3)}function pk(){return ou()}function dk(){return yd(1,1,1)}function fk(){return yd(1,0,0)}function yk(){return yd(0,1,0)}function mk(){return yd(0,0,1)}const gZ=pk(),vZ=dk(),wZ=fk(),bZ=yk(),_Z=mk();Object.freeze(Object.defineProperty({__proto__:null,ONES:vZ,UNIT_X:wZ,UNIT_Y:bZ,UNIT_Z:_Z,ZEROS:gZ,clone:Z6,create:ou,createView:mZ,freeze:fZ,fromArray:yZ,fromValues:yd,ones:dk,unitX:fk,unitY:yk,unitZ:mk,zeros:pk},Symbol.toStringTag,{value:"Module"}));let K6=1e-6;function Ar(){return K6}function SZ(e){K6=e}const g2=Math.random,xZ=Math.PI/180,TZ=180/Math.PI;function Y6(e){return e*xZ}function MZ(e){return e*TZ}function $Z(e,t){return Math.abs(e-t)<=K6*Math.max(1,Math.abs(e),Math.abs(t))}Object.freeze(Object.defineProperty({__proto__:null,RANDOM:g2,equals:$Z,getEpsilon:Ar,setEpsilon:SZ,toDegree:MZ,toRadian:Y6},Symbol.toStringTag,{value:"Module"}));function gk(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function au(e,t,i,r,a,p,y,g,_,T,I,A,P,N,D,z,q){return e[0]=t,e[1]=i,e[2]=r,e[3]=a,e[4]=p,e[5]=y,e[6]=g,e[7]=_,e[8]=T,e[9]=I,e[10]=A,e[11]=P,e[12]=N,e[13]=D,e[14]=z,e[15]=q,e}function v2(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function lu(e,t){if(e===t){const i=t[1],r=t[2],a=t[3],p=t[6],y=t[7],g=t[11];e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=i,e[6]=t[9],e[7]=t[13],e[8]=r,e[9]=p,e[11]=t[14],e[12]=a,e[13]=y,e[14]=g}else e[0]=t[0],e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=t[1],e[5]=t[5],e[6]=t[9],e[7]=t[13],e[8]=t[2],e[9]=t[6],e[10]=t[10],e[11]=t[14],e[12]=t[3],e[13]=t[7],e[14]=t[11],e[15]=t[15];return e}function EZ(e,t){return vk(e,t)||v2(e),e}function vk(e,t){const i=t[0],r=t[1],a=t[2],p=t[3],y=t[4],g=t[5],_=t[6],T=t[7],I=t[8],A=t[9],P=t[10],N=t[11],D=t[12],z=t[13],q=t[14],J=t[15],ee=i*g-r*y,X=i*_-a*y,ie=i*T-p*y,oe=r*_-a*g,ue=r*T-p*g,ge=a*T-p*_,Se=I*z-A*D,Ee=I*q-P*D,Ie=I*J-N*D,ke=A*q-P*z,je=A*J-N*z,st=P*J-N*q;let Ve=ee*st-X*je+ie*ke+oe*Ie-ue*Ee+ge*Se;return Ve?(Ve=1/Ve,e[0]=(g*st-_*je+T*ke)*Ve,e[1]=(a*je-r*st-p*ke)*Ve,e[2]=(z*ge-q*ue+J*oe)*Ve,e[3]=(P*ue-A*ge-N*oe)*Ve,e[4]=(_*Ie-y*st-T*Ee)*Ve,e[5]=(i*st-a*Ie+p*Ee)*Ve,e[6]=(q*ie-D*ge-J*X)*Ve,e[7]=(I*ge-P*ie+N*X)*Ve,e[8]=(y*je-g*Ie+T*Se)*Ve,e[9]=(r*Ie-i*je-p*Se)*Ve,e[10]=(D*ue-z*ie+J*ee)*Ve,e[11]=(A*ie-I*ue-N*ee)*Ve,e[12]=(g*Ee-y*ke-_*Se)*Ve,e[13]=(i*ke-r*Ee+a*Se)*Ve,e[14]=(z*X-D*oe-q*ee)*Ve,e[15]=(I*oe-A*X+P*ee)*Ve,e):null}function IZ(e,t){const i=t[0],r=t[1],a=t[2],p=t[3],y=t[4],g=t[5],_=t[6],T=t[7],I=t[8],A=t[9],P=t[10],N=t[11],D=t[12],z=t[13],q=t[14],J=t[15];return e[0]=g*(P*J-N*q)-A*(_*J-T*q)+z*(_*N-T*P),e[1]=-(r*(P*J-N*q)-A*(a*J-p*q)+z*(a*N-p*P)),e[2]=r*(_*J-T*q)-g*(a*J-p*q)+z*(a*T-p*_),e[3]=-(r*(_*N-T*P)-g*(a*N-p*P)+A*(a*T-p*_)),e[4]=-(y*(P*J-N*q)-I*(_*J-T*q)+D*(_*N-T*P)),e[5]=i*(P*J-N*q)-I*(a*J-p*q)+D*(a*N-p*P),e[6]=-(i*(_*J-T*q)-y*(a*J-p*q)+D*(a*T-p*_)),e[7]=i*(_*N-T*P)-y*(a*N-p*P)+I*(a*T-p*_),e[8]=y*(A*J-N*z)-I*(g*J-T*z)+D*(g*N-T*A),e[9]=-(i*(A*J-N*z)-I*(r*J-p*z)+D*(r*N-p*A)),e[10]=i*(g*J-T*z)-y*(r*J-p*z)+D*(r*T-p*g),e[11]=-(i*(g*N-T*A)-y*(r*N-p*A)+I*(r*T-p*g)),e[12]=-(y*(A*q-P*z)-I*(g*q-_*z)+D*(g*P-_*A)),e[13]=i*(A*q-P*z)-I*(r*q-a*z)+D*(r*P-a*A),e[14]=-(i*(g*q-_*z)-y*(r*q-a*z)+D*(r*_-a*g)),e[15]=i*(g*P-_*A)-y*(r*P-a*A)+I*(r*_-a*g),e}function AZ(e){const t=e[0],i=e[1],r=e[2],a=e[3],p=e[4],y=e[5],g=e[6],_=e[7],T=e[8],I=e[9],A=e[10],P=e[11],N=e[12],D=e[13],z=e[14],q=e[15];return(t*y-i*p)*(A*q-P*z)-(t*g-r*p)*(I*q-P*D)+(t*_-a*p)*(I*z-A*D)+(i*g-r*y)*(T*q-P*N)-(i*_-a*y)*(T*z-A*N)+(r*_-a*g)*(T*D-I*N)}function wk(e,t,i){const r=t[0],a=t[1],p=t[2],y=t[3],g=t[4],_=t[5],T=t[6],I=t[7],A=t[8],P=t[9],N=t[10],D=t[11],z=t[12],q=t[13],J=t[14],ee=t[15];let X=i[0],ie=i[1],oe=i[2],ue=i[3];return e[0]=X*r+ie*g+oe*A+ue*z,e[1]=X*a+ie*_+oe*P+ue*q,e[2]=X*p+ie*T+oe*N+ue*J,e[3]=X*y+ie*I+oe*D+ue*ee,X=i[4],ie=i[5],oe=i[6],ue=i[7],e[4]=X*r+ie*g+oe*A+ue*z,e[5]=X*a+ie*_+oe*P+ue*q,e[6]=X*p+ie*T+oe*N+ue*J,e[7]=X*y+ie*I+oe*D+ue*ee,X=i[8],ie=i[9],oe=i[10],ue=i[11],e[8]=X*r+ie*g+oe*A+ue*z,e[9]=X*a+ie*_+oe*P+ue*q,e[10]=X*p+ie*T+oe*N+ue*J,e[11]=X*y+ie*I+oe*D+ue*ee,X=i[12],ie=i[13],oe=i[14],ue=i[15],e[12]=X*r+ie*g+oe*A+ue*z,e[13]=X*a+ie*_+oe*P+ue*q,e[14]=X*p+ie*T+oe*N+ue*J,e[15]=X*y+ie*I+oe*D+ue*ee,e}function CZ(e,t,i){const r=i[0],a=i[1],p=i[2];if(t===e)e[12]=t[0]*r+t[4]*a+t[8]*p+t[12],e[13]=t[1]*r+t[5]*a+t[9]*p+t[13],e[14]=t[2]*r+t[6]*a+t[10]*p+t[14],e[15]=t[3]*r+t[7]*a+t[11]*p+t[15];else{const y=t[0],g=t[1],_=t[2],T=t[3],I=t[4],A=t[5],P=t[6],N=t[7],D=t[8],z=t[9],q=t[10],J=t[11];e[0]=y,e[1]=g,e[2]=_,e[3]=T,e[4]=I,e[5]=A,e[6]=P,e[7]=N,e[8]=D,e[9]=z,e[10]=q,e[11]=J,e[12]=y*r+I*a+D*p+t[12],e[13]=g*r+A*a+z*p+t[13],e[14]=_*r+P*a+q*p+t[14],e[15]=T*r+N*a+J*p+t[15]}return e}function OZ(e,t,i){const r=i[0],a=i[1],p=i[2];return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r,e[4]=t[4]*a,e[5]=t[5]*a,e[6]=t[6]*a,e[7]=t[7]*a,e[8]=t[8]*p,e[9]=t[9]*p,e[10]=t[10]*p,e[11]=t[11]*p,e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function PZ(e,t,i,r){let a=r[0],p=r[1],y=r[2],g=Math.sqrt(a*a+p*p+y*y);if(g<=Ar())return void gk(e,t);g=1/g,a*=g,p*=g,y*=g;const _=Math.sin(i),T=Math.cos(i),I=1-T,A=t[0],P=t[1],N=t[2],D=t[3],z=t[4],q=t[5],J=t[6],ee=t[7],X=t[8],ie=t[9],oe=t[10],ue=t[11],ge=a*a*I+T,Se=p*a*I+y*_,Ee=y*a*I-p*_,Ie=a*p*I-y*_,ke=p*p*I+T,je=y*p*I+a*_,st=a*y*I+p*_,Ve=p*y*I-a*_,xi=y*y*I+T;e[0]=A*ge+z*Se+X*Ee,e[1]=P*ge+q*Se+ie*Ee,e[2]=N*ge+J*Se+oe*Ee,e[3]=D*ge+ee*Se+ue*Ee,e[4]=A*Ie+z*ke+X*je,e[5]=P*Ie+q*ke+ie*je,e[6]=N*Ie+J*ke+oe*je,e[7]=D*Ie+ee*ke+ue*je,e[8]=A*st+z*Ve+X*xi,e[9]=P*st+q*Ve+ie*xi,e[10]=N*st+J*Ve+oe*xi,e[11]=D*st+ee*Ve+ue*xi,t!==e&&(e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15])}function kZ(e,t,i){const r=Math.sin(i),a=Math.cos(i),p=t[4],y=t[5],g=t[6],_=t[7],T=t[8],I=t[9],A=t[10],P=t[11];return t!==e&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[4]=p*a+T*r,e[5]=y*a+I*r,e[6]=g*a+A*r,e[7]=_*a+P*r,e[8]=T*a-p*r,e[9]=I*a-y*r,e[10]=A*a-g*r,e[11]=P*a-_*r,e}function RZ(e,t,i){const r=Math.sin(i),a=Math.cos(i),p=t[0],y=t[1],g=t[2],_=t[3],T=t[8],I=t[9],A=t[10],P=t[11];return t!==e&&(e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=p*a-T*r,e[1]=y*a-I*r,e[2]=g*a-A*r,e[3]=_*a-P*r,e[8]=p*r+T*a,e[9]=y*r+I*a,e[10]=g*r+A*a,e[11]=_*r+P*a,e}function NZ(e,t,i){const r=Math.sin(i),a=Math.cos(i),p=t[0],y=t[1],g=t[2],_=t[3],T=t[4],I=t[5],A=t[6],P=t[7];return t!==e&&(e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=p*a+T*r,e[1]=y*a+I*r,e[2]=g*a+A*r,e[3]=_*a+P*r,e[4]=T*a-p*r,e[5]=I*a-y*r,e[6]=A*a-g*r,e[7]=P*a-_*r,e}function LZ(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=t[0],e[13]=t[1],e[14]=t[2],e[15]=1,e}function DZ(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=t[1],e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=t[2],e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function jZ(e,t,i){if(t===0)return v2(e);let r=i[0],a=i[1],p=i[2],y=Math.sqrt(r*r+a*a+p*p);if(y<=Ar())return null;y=1/y,r*=y,a*=y,p*=y;const g=Math.sin(t),_=Math.cos(t),T=1-_;return e[0]=r*r*T+_,e[1]=a*r*T+p*g,e[2]=p*r*T-a*g,e[3]=0,e[4]=r*a*T-p*g,e[5]=a*a*T+_,e[6]=p*a*T+r*g,e[7]=0,e[8]=r*p*T+a*g,e[9]=a*p*T-r*g,e[10]=p*p*T+_,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function FZ(e,t){const i=Math.sin(t),r=Math.cos(t);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=r,e[6]=i,e[7]=0,e[8]=0,e[9]=-i,e[10]=r,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function zZ(e,t){const i=Math.sin(t),r=Math.cos(t);return e[0]=r,e[1]=0,e[2]=-i,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=i,e[9]=0,e[10]=r,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function UZ(e,t){const i=Math.sin(t),r=Math.cos(t);return e[0]=r,e[1]=i,e[2]=0,e[3]=0,e[4]=-i,e[5]=r,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function bk(e,t,i){const r=t[0],a=t[1],p=t[2],y=t[3],g=r+r,_=a+a,T=p+p,I=r*g,A=r*_,P=r*T,N=a*_,D=a*T,z=p*T,q=y*g,J=y*_,ee=y*T;return e[0]=1-(N+z),e[1]=A+ee,e[2]=P-J,e[3]=0,e[4]=A-ee,e[5]=1-(I+z),e[6]=D+q,e[7]=0,e[8]=P+J,e[9]=D-q,e[10]=1-(I+N),e[11]=0,e[12]=i[0],e[13]=i[1],e[14]=i[2],e[15]=1,e}function VZ(e,t){const i=GZ,r=-t[0],a=-t[1],p=-t[2],y=t[3],g=t[4],_=t[5],T=t[6],I=t[7],A=r*r+a*a+p*p+y*y;return A>0?(i[0]=2*(g*y+I*r+_*p-T*a)/A,i[1]=2*(_*y+I*a+T*r-g*p)/A,i[2]=2*(T*y+I*p+g*a-_*r)/A):(i[0]=2*(g*y+I*r+_*p-T*a),i[1]=2*(_*y+I*a+T*r-g*p),i[2]=2*(T*y+I*p+g*a-_*r)),bk(e,t,i),e}const GZ=ou();function BZ(e,t){return e[0]=t[12],e[1]=t[13],e[2]=t[14],e}function qZ(e,t){const i=t[0],r=t[1],a=t[2],p=t[4],y=t[5],g=t[6],_=t[8],T=t[9],I=t[10];return e[0]=Math.sqrt(i*i+r*r+a*a),e[1]=Math.sqrt(p*p+y*y+g*g),e[2]=Math.sqrt(_*_+T*T+I*I),e}function HZ(e,t){const i=t[0]+t[5]+t[10];let r=0;return i>0?(r=2*Math.sqrt(i+1),e[3]=.25*r,e[0]=(t[6]-t[9])/r,e[1]=(t[8]-t[2])/r,e[2]=(t[1]-t[4])/r):t[0]>t[5]&&t[0]>t[10]?(r=2*Math.sqrt(1+t[0]-t[5]-t[10]),e[3]=(t[6]-t[9])/r,e[0]=.25*r,e[1]=(t[1]+t[4])/r,e[2]=(t[8]+t[2])/r):t[5]>t[10]?(r=2*Math.sqrt(1+t[5]-t[0]-t[10]),e[3]=(t[8]-t[2])/r,e[0]=(t[1]+t[4])/r,e[1]=.25*r,e[2]=(t[6]+t[9])/r):(r=2*Math.sqrt(1+t[10]-t[0]-t[5]),e[3]=(t[1]-t[4])/r,e[0]=(t[8]+t[2])/r,e[1]=(t[6]+t[9])/r,e[2]=.25*r),e}function WZ(e,t,i,r){const a=t[0],p=t[1],y=t[2],g=t[3],_=a+a,T=p+p,I=y+y,A=a*_,P=a*T,N=a*I,D=p*T,z=p*I,q=y*I,J=g*_,ee=g*T,X=g*I,ie=r[0],oe=r[1],ue=r[2];return e[0]=(1-(D+q))*ie,e[1]=(P+X)*ie,e[2]=(N-ee)*ie,e[3]=0,e[4]=(P-X)*oe,e[5]=(1-(A+q))*oe,e[6]=(z+J)*oe,e[7]=0,e[8]=(N+ee)*ue,e[9]=(z-J)*ue,e[10]=(1-(A+D))*ue,e[11]=0,e[12]=i[0],e[13]=i[1],e[14]=i[2],e[15]=1,e}function JZ(e,t,i,r,a){const p=t[0],y=t[1],g=t[2],_=t[3],T=p+p,I=y+y,A=g+g,P=p*T,N=p*I,D=p*A,z=y*I,q=y*A,J=g*A,ee=_*T,X=_*I,ie=_*A,oe=r[0],ue=r[1],ge=r[2],Se=a[0],Ee=a[1],Ie=a[2],ke=(1-(z+J))*oe,je=(N+ie)*oe,st=(D-X)*oe,Ve=(N-ie)*ue,xi=(1-(P+J))*ue,$s=(q+ee)*ue,Ri=(D+X)*ge,bt=(q-ee)*ge,Pr=(1-(P+z))*ge;return e[0]=ke,e[1]=je,e[2]=st,e[3]=0,e[4]=Ve,e[5]=xi,e[6]=$s,e[7]=0,e[8]=Ri,e[9]=bt,e[10]=Pr,e[11]=0,e[12]=i[0]+Se-(ke*Se+Ve*Ee+Ri*Ie),e[13]=i[1]+Ee-(je*Se+xi*Ee+bt*Ie),e[14]=i[2]+Ie-(st*Se+$s*Ee+Pr*Ie),e[15]=1,e}function ZZ(e,t){const i=t[0],r=t[1],a=t[2],p=t[3],y=i+i,g=r+r,_=a+a,T=i*y,I=r*y,A=r*g,P=a*y,N=a*g,D=a*_,z=p*y,q=p*g,J=p*_;return e[0]=1-A-D,e[1]=I+J,e[2]=P-q,e[3]=0,e[4]=I-J,e[5]=1-T-D,e[6]=N+z,e[7]=0,e[8]=P+q,e[9]=N-z,e[10]=1-T-A,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function KZ(e,t,i,r,a,p,y){const g=1/(i-t),_=1/(a-r),T=1/(p-y);return e[0]=2*p*g,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=2*p*_,e[6]=0,e[7]=0,e[8]=(i+t)*g,e[9]=(a+r)*_,e[10]=(y+p)*T,e[11]=-1,e[12]=0,e[13]=0,e[14]=y*p*2*T,e[15]=0,e}function YZ(e,t,i,r,a){const p=1/Math.tan(t/2);let y;return e[0]=p/i,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=p,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=-1,e[12]=0,e[13]=0,e[15]=0,a!=null&&a!==1/0?(y=1/(r-a),e[10]=(a+r)*y,e[14]=2*a*r*y):(e[10]=-1,e[14]=-2*r),e}function XZ(e,t,i,r){const a=Math.tan(t.upDegrees*Math.PI/180),p=Math.tan(t.downDegrees*Math.PI/180),y=Math.tan(t.leftDegrees*Math.PI/180),g=Math.tan(t.rightDegrees*Math.PI/180),_=2/(y+g),T=2/(a+p);return e[0]=_,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=T,e[6]=0,e[7]=0,e[8]=-(y-g)*_*.5,e[9]=(a-p)*T*.5,e[10]=r/(i-r),e[11]=-1,e[12]=0,e[13]=0,e[14]=r*i/(i-r),e[15]=0,e}function QZ(e,t,i,r,a,p,y){const g=1/(t-i),_=1/(r-a),T=1/(p-y);return e[0]=-2*g,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*_,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*T,e[11]=0,e[12]=(t+i)*g,e[13]=(a+r)*_,e[14]=(y+p)*T,e[15]=1,e}function eK(e,t,i,r){const a=t[0],p=t[1],y=t[2];let g=a-i[0],_=p-i[1],T=y-i[2];const I=Ar();if(Math.abs(g)<I&&Math.abs(_)<I&&Math.abs(T)<I)return void v2(e);let A=1/Math.sqrt(g*g+_*_+T*T);g*=A,_*=A,T*=A;const P=r[0],N=r[1],D=r[2];let z=N*T-D*_,q=D*g-P*T,J=P*_-N*g;A=Math.sqrt(z*z+q*q+J*J),A?(A=1/A,z*=A,q*=A,J*=A):(z=0,q=0,J=0);let ee=_*J-T*q,X=T*z-g*J,ie=g*q-_*z;A=Math.sqrt(ee*ee+X*X+ie*ie),A?(A=1/A,ee*=A,X*=A,ie*=A):(ee=0,X=0,ie=0),e[0]=z,e[1]=ee,e[2]=g,e[3]=0,e[4]=q,e[5]=X,e[6]=_,e[7]=0,e[8]=J,e[9]=ie,e[10]=T,e[11]=0,e[12]=-(z*a+q*p+J*y),e[13]=-(ee*a+X*p+ie*y),e[14]=-(g*a+_*p+T*y),e[15]=1}function tK(e,t,i,r){const a=t[0],p=t[1],y=t[2],g=r[0],_=r[1],T=r[2];let I=a-i[0],A=p-i[1],P=y-i[2],N=I*I+A*A+P*P;N>0&&(N=1/Math.sqrt(N),I*=N,A*=N,P*=N);let D=_*P-T*A,z=T*I-g*P,q=g*A-_*I;return N=D*D+z*z+q*q,N>0&&(N=1/Math.sqrt(N),D*=N,z*=N,q*=N),e[0]=D,e[1]=z,e[2]=q,e[3]=0,e[4]=A*q-P*z,e[5]=P*D-I*q,e[6]=I*z-A*D,e[7]=0,e[8]=I,e[9]=A,e[10]=P,e[11]=0,e[12]=a,e[13]=p,e[14]=y,e[15]=1,e}function iK(e){return"mat4("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+", "+e[8]+", "+e[9]+", "+e[10]+", "+e[11]+", "+e[12]+", "+e[13]+", "+e[14]+", "+e[15]+")"}function rK(e){return Math.sqrt(e[0]**2+e[1]**2+e[2]**2+e[3]**2+e[4]**2+e[5]**2+e[6]**2+e[7]**2+e[8]**2+e[9]**2+e[10]**2+e[11]**2+e[12]**2+e[13]**2+e[14]**2+e[15]**2)}function sK(e,t,i){return e[0]=t[0]+i[0],e[1]=t[1]+i[1],e[2]=t[2]+i[2],e[3]=t[3]+i[3],e[4]=t[4]+i[4],e[5]=t[5]+i[5],e[6]=t[6]+i[6],e[7]=t[7]+i[7],e[8]=t[8]+i[8],e[9]=t[9]+i[9],e[10]=t[10]+i[10],e[11]=t[11]+i[11],e[12]=t[12]+i[12],e[13]=t[13]+i[13],e[14]=t[14]+i[14],e[15]=t[15]+i[15],e}function _k(e,t,i){return e[0]=t[0]-i[0],e[1]=t[1]-i[1],e[2]=t[2]-i[2],e[3]=t[3]-i[3],e[4]=t[4]-i[4],e[5]=t[5]-i[5],e[6]=t[6]-i[6],e[7]=t[7]-i[7],e[8]=t[8]-i[8],e[9]=t[9]-i[9],e[10]=t[10]-i[10],e[11]=t[11]-i[11],e[12]=t[12]-i[12],e[13]=t[13]-i[13],e[14]=t[14]-i[14],e[15]=t[15]-i[15],e}function nK(e,t,i){return e[0]=t[0]*i,e[1]=t[1]*i,e[2]=t[2]*i,e[3]=t[3]*i,e[4]=t[4]*i,e[5]=t[5]*i,e[6]=t[6]*i,e[7]=t[7]*i,e[8]=t[8]*i,e[9]=t[9]*i,e[10]=t[10]*i,e[11]=t[11]*i,e[12]=t[12]*i,e[13]=t[13]*i,e[14]=t[14]*i,e[15]=t[15]*i,e}function oK(e,t,i,r){return e[0]=t[0]+i[0]*r,e[1]=t[1]+i[1]*r,e[2]=t[2]+i[2]*r,e[3]=t[3]+i[3]*r,e[4]=t[4]+i[4]*r,e[5]=t[5]+i[5]*r,e[6]=t[6]+i[6]*r,e[7]=t[7]+i[7]*r,e[8]=t[8]+i[8]*r,e[9]=t[9]+i[9]*r,e[10]=t[10]+i[10]*r,e[11]=t[11]+i[11]*r,e[12]=t[12]+i[12]*r,e[13]=t[13]+i[13]*r,e[14]=t[14]+i[14]*r,e[15]=t[15]+i[15]*r,e}function aK(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]&&e[6]===t[6]&&e[7]===t[7]&&e[8]===t[8]&&e[9]===t[9]&&e[10]===t[10]&&e[11]===t[11]&&e[12]===t[12]&&e[13]===t[13]&&e[14]===t[14]&&e[15]===t[15]}function lK(e,t){if(e===t)return!0;const i=e[0],r=e[1],a=e[2],p=e[3],y=e[4],g=e[5],_=e[6],T=e[7],I=e[8],A=e[9],P=e[10],N=e[11],D=e[12],z=e[13],q=e[14],J=e[15],ee=t[0],X=t[1],ie=t[2],oe=t[3],ue=t[4],ge=t[5],Se=t[6],Ee=t[7],Ie=t[8],ke=t[9],je=t[10],st=t[11],Ve=t[12],xi=t[13],$s=t[14],Ri=t[15],bt=Ar();return Math.abs(i-ee)<=bt*Math.max(1,Math.abs(i),Math.abs(ee))&&Math.abs(r-X)<=bt*Math.max(1,Math.abs(r),Math.abs(X))&&Math.abs(a-ie)<=bt*Math.max(1,Math.abs(a),Math.abs(ie))&&Math.abs(p-oe)<=bt*Math.max(1,Math.abs(p),Math.abs(oe))&&Math.abs(y-ue)<=bt*Math.max(1,Math.abs(y),Math.abs(ue))&&Math.abs(g-ge)<=bt*Math.max(1,Math.abs(g),Math.abs(ge))&&Math.abs(_-Se)<=bt*Math.max(1,Math.abs(_),Math.abs(Se))&&Math.abs(T-Ee)<=bt*Math.max(1,Math.abs(T),Math.abs(Ee))&&Math.abs(I-Ie)<=bt*Math.max(1,Math.abs(I),Math.abs(Ie))&&Math.abs(A-ke)<=bt*Math.max(1,Math.abs(A),Math.abs(ke))&&Math.abs(P-je)<=bt*Math.max(1,Math.abs(P),Math.abs(je))&&Math.abs(N-st)<=bt*Math.max(1,Math.abs(N),Math.abs(st))&&Math.abs(D-Ve)<=bt*Math.max(1,Math.abs(D),Math.abs(Ve))&&Math.abs(z-xi)<=bt*Math.max(1,Math.abs(z),Math.abs(xi))&&Math.abs(q-$s)<=bt*Math.max(1,Math.abs(q),Math.abs($s))&&Math.abs(J-Ri)<=bt*Math.max(1,Math.abs(J),Math.abs(Ri))}function uK(e){const t=Ar(),i=e[0],r=e[1],a=e[2],p=e[4],y=e[5],g=e[6],_=e[8],T=e[9],I=e[10];return Math.abs(1-(i*i+p*p+_*_))<=t&&Math.abs(1-(r*r+y*y+T*T))<=t&&Math.abs(1-(a*a+g*g+I*I))<=t}function hK(e){return e[0]===1&&e[1]===0&&e[2]===0&&e[4]===0&&e[5]===1&&e[6]===0&&e[8]===0&&e[9]===0&&e[10]===1}const cK=wk,pK=_k;Object.freeze(Object.defineProperty({__proto__:null,add:sK,adjoint:IZ,copy:gk,determinant:AZ,equals:lK,exactEquals:aK,frob:rK,fromQuat:ZZ,fromQuat2:VZ,fromRotation:jZ,fromRotationTranslation:bk,fromRotationTranslationScale:WZ,fromRotationTranslationScaleOrigin:JZ,fromScaling:DZ,fromTranslation:LZ,fromXRotation:FZ,fromYRotation:zZ,fromZRotation:UZ,frustum:KZ,getRotation:HZ,getScaling:qZ,getTranslation:BZ,hasIdentityRotation:hK,identity:v2,invert:vk,invertOrIdentity:EZ,isOrthoNormal:uK,lookAt:eK,mul:cK,multiply:wk,multiplyScalar:nK,multiplyScalarAndAdd:oK,ortho:QZ,perspective:YZ,perspectiveFromFieldOfView:XZ,rotate:PZ,rotateX:kZ,rotateY:RZ,rotateZ:NZ,scale:OZ,set:au,str:iK,sub:pK,subtract:_k,targetTo:tK,translate:CZ,transpose:lu},Symbol.toStringTag,{value:"Module"}));const dK=(e,t)=>{const i=au(e,t,0,0,0,0,t,0,0,0,0,t,0,0,0,0,1);return lu(i,i)},fK=(e,t)=>{const i=au(e,t,0,0,.5-.5*t,0,t,0,.5-.5*t,0,0,t,.5-.5*t,0,0,0,1);return lu(i,i)},yK=(e,t)=>{const i=1-t,r=au(e,.2126+.7874*i,.7152-.7152*i,.0722-.0722*i,0,.2126-.2126*i,.7152+.2848*i,.0722-.0722*i,0,.2126-.2126*i,.7152-.7152*i,.0722+.9278*i,0,0,0,0,1);return lu(r,r)},mK=(e,t)=>{const i=Math.sin(t*Math.PI/180),r=Math.cos(t*Math.PI/180),a=au(e,.213+.787*r-.213*i,.715-.715*r-.715*i,.072-.072*r+.928*i,0,.213-.213*r+.143*i,.715+.285*r+.14*i,.072-.072*r-.283*i,0,.213-.213*r-.787*i,.715-.715*r+.715*i,.072+.928*r+.072*i,0,0,0,0,1);return lu(a,a)},gK=(e,t)=>{const i=1-2*t,r=au(e,i,0,0,t,0,i,0,t,0,0,i,t,0,0,0,1);return lu(r,r)},vK=(e,t)=>{const i=au(e,.213+.787*t,.715-.715*t,.072-.072*t,0,.213-.213*t,.715+.285*t,.072-.072*t,0,.213-.213*t,.715-.715*t,.072+.928*t,0,0,0,0,1);return lu(i,i)},wK=(e,t)=>{const i=1-t,r=au(e,.393+.607*i,.769-.769*i,.189-.189*i,0,.349-.349*i,.686+.314*i,.168-.168*i,0,.272-.272*i,.534-.534*i,.131+.869*i,0,0,0,0,1);return lu(r,r)};let Sk=class xk{constructor(t,i,r){this.strength=t,this.radius=i,this.threshold=r,this.type="bloom"}interpolate(t,i,r){this.strength=Hr(t.strength,i.strength,r),this.radius=Hr(t.radius,i.radius,r),this.threshold=Hr(t.threshold,i.threshold,r)}clone(){return new xk(this.strength,this.radius,this.threshold)}toJSON(){return{type:"bloom",radius:v0(this.radius),strength:this.strength,threshold:this.threshold}}},Tk=class Mk{constructor(t){this.radius=t,this.type="blur"}interpolate(t,i,r){this.radius=Math.round(Hr(t.radius,i.radius,r))}clone(){return new Mk(this.radius)}toJSON(){return{type:"blur",radius:v0(this.radius)}}},h5=class $k{constructor(t,i){this.type=t,this.amount=i,this.type!=="invert"&&this.type!=="grayscale"&&this.type!=="sepia"||(this.amount=Math.min(this.amount,1))}get colorMatrix(){return this._colorMatrix||this._updateMatrix(),this._colorMatrix}interpolate(t,i,r){this.amount=Hr(t.amount,i.amount,r),this._updateMatrix()}clone(){return new $k(this.type,this.amount)}toJSON(){return{type:this.type,amount:this.amount}}_updateMatrix(){const t=this._colorMatrix||m2();switch(this.type){case"brightness":this._colorMatrix=dK(t,this.amount);break;case"contrast":this._colorMatrix=fK(t,this.amount);break;case"grayscale":this._colorMatrix=yK(t,this.amount);break;case"invert":this._colorMatrix=gK(t,this.amount);break;case"saturate":this._colorMatrix=vK(t,this.amount);break;case"sepia":this._colorMatrix=wK(t,this.amount)}}},Ek=class Ik{constructor(t,i,r,a){this.offsetX=t,this.offsetY=i,this.blurRadius=r,this.color=a,this.type="drop-shadow"}interpolate(t,i,r){this.offsetX=Hr(t.offsetX,i.offsetX,r),this.offsetY=Hr(t.offsetY,i.offsetY,r),this.blurRadius=Hr(t.blurRadius,i.blurRadius,r),this.color[0]=Math.round(Hr(t.color[0],i.color[0],r)),this.color[1]=Math.round(Hr(t.color[1],i.color[1],r)),this.color[2]=Math.round(Hr(t.color[2],i.color[2],r)),this.color[3]=Hr(t.color[3],i.color[3],r)}clone(){return new Ik(this.offsetX,this.offsetY,this.blurRadius,[...this.color])}toJSON(){const t=[...this.color];return t[3]*=255,{type:"drop-shadow",xoffset:v0(this.offsetX),yoffset:v0(this.offsetY),blurRadius:v0(this.blurRadius),color:t}}},Ak=class Ck{constructor(t){this.angle=t,this.type="hue-rotate"}get colorMatrix(){return this._colorMatrix||this._updateMatrix(),this._colorMatrix}interpolate(t,i,r){this.angle=Hr(t.angle,i.angle,r),this._updateMatrix()}clone(){return new Ck(this.angle)}toJSON(){return{type:"hue-rotate",angle:this.angle}}_updateMatrix(){const t=this._colorMatrix||m2();this._colorMatrix=mK(t,this.angle)}},Ok=class Pk{constructor(t){this.amount=t,this.type="opacity",this.amount=Math.min(this.amount,1)}interpolate(t,i,r){this.amount=Hr(t.amount,i.amount,r)}clone(){return new Pk(this.amount)}toJSON(){return{type:"opacity",amount:this.amount}}};function Hr(e,t,i){return e+(t-e)*i}function v0(e){return Math.round(1e3*Qs(e))/1e3}function bK(e){switch(e.type){case"grayscale":case"sepia":case"invert":return new h5(e.type,0);case"saturate":case"brightness":case"contrast":return new h5(e.type,1);case"opacity":return new Ok(1);case"hue-rotate":return new Ak(0);case"blur":return new Tk(0);case"drop-shadow":return new Ek(0,0,0,[...W6("transparent")]);case"bloom":return new Sk(0,0,1)}}function _K(e,t){const i=e.length>t.length?e:t;return(e.length>t.length?t:e).every((r,a)=>r.type===i[a].type)}function SK(e,t){const i=e.length>t.length?e:t,r=e.length>t.length?t:e;for(let a=r.length;a<i.length;a++)r.push(bK(i[a]))}function xK(e){const t=e[0];return!!t&&"type"in t}function TK(e,t){return JSON.stringify(e??null)===JSON.stringify(t??null)}function MK(e){var t;return((t=e.portalItem)==null?void 0:t.type)==="Web Scene"||e.referenceLayers.some(i=>i.type==="scene")}function $K(e){var t,i;return!!((i=(t=e==null?void 0:e.portalItem)==null?void 0:t.tags)!=null&&i.some(r=>r.toLowerCase()==="beta"))}function Ebe(e,t){var i,r,a,p;return!(!((r=(i=e.basemap)==null?void 0:i.referenceLayers)!=null&&r.some(y=>y.uid===t))&&!((p=(a=e.basemap)==null?void 0:a.baseLayers)!=null&&p.some(y=>y.uid===t)))}function EK(e){let t=null;const i=c5(e),r=!(i!=null&&i.baseLayers.length);for(const a in Bp){const p=Rk(i,kk(Bp[a]),{mustMatchReferences:r});if(p==="equal"){t=a;break}p==="base-layers-equal"&&(t=a)}return t}function IK(e,t){var i,r;return e===t||((i=e==null?void 0:e.portalItem)==null?void 0:i.id)!=null&&e.portalItem.id===((r=t==null?void 0:t.portalItem)==null?void 0:r.id)?!0:Rk(c5(e),c5(t),{mustMatchReferences:!0})==="equal"}function AK(e,t){var p;if(t==null||e==null)return{spatialReference:null,updating:!1};if(t.loadStatus==="not-loaded")return t.load(),{spatialReference:null,updating:!0};if(t.spatialReference)return{spatialReference:t.spatialReference,updating:!1};if(t.baseLayers.length===0)return{spatialReference:null,updating:!1};const i=t.baseLayers.at(0);switch(i.loadStatus){case"not-loaded":i.load();case"loading":return{spatialReference:null,updating:!0};case"failed":return{spatialReference:null,updating:!1}}const r=(("supportedSpatialReferences"in i?i.supportedSpatialReferences:null)||["tileInfo"in i?(p=i.tileInfo)==null?void 0:p.spatialReference:i.spatialReference]).filter(Boolean),a=e.spatialReference;return a?{spatialReference:r.find(y=>a.equals(y))??r[0]??null,updating:!1}:{spatialReference:r[0],updating:!1}}function c5(e){return e?!e.loaded&&e.resourceInfo?kk(e.resourceInfo.data):{baseLayers:IT(e.baseLayers),referenceLayers:IT(e.referenceLayers)}:null}function IT(e){return(xe.isCollection(e)?e.toArray():e).map(CK)}function CK(e){var t,i;return{type:e.type,effect:"effect"in e?e.effect:void 0,url:Nk("urlTemplate"in e&&e.urlTemplate||e.url||"styleUrl"in e&&e.styleUrl||""),minScale:"minScale"in e&&e.minScale!=null?e.minScale:0,maxScale:"maxScale"in e&&e.maxScale!=null?e.maxScale:0,opacity:e.opacity!=null?e.opacity:1,visible:e.visible==null||!!e.visible,sublayers:e.type!=="map-image"&&e.type!=="wms"||e.sublayers==null||(t=e.sublayers)==null?void 0:t.map(r=>({id:r.id,visible:r.visible})),activeLayerId:e.type==="wmts"?(i=e.activeLayer)==null?void 0:i.id:void 0}}function AT(e){return e.isReference||e.layerType==="ArcGISSceneServiceLayer"}function kk(e){return e?{baseLayers:CT((e.baseMapLayers??[]).filter(t=>!AT(t))),referenceLayers:CT((e.baseMapLayers??[]).filter(t=>AT(t)))}:null}function CT(e){return e.map(t=>OK(t))}function OK(e){let t;switch(e.layerType){case"VectorTileLayer":t="vector-tile";break;case"ArcGISTiledMapServiceLayer":t="tile";break;case"ArcGISSceneServiceLayer":t="scene";break;default:t="unknown"}return{type:t,effect:e.effect,url:Nk(e.templateUrl||e.urlTemplate||e.styleUrl||e.url),minScale:e.minScale??0,maxScale:e.maxScale??0,opacity:e.opacity??1,visible:e.visibility==null||!!e.visibility,sublayers:void 0,activeLayerId:void 0}}function Rk(e,t,i){return e!=null!=(t!=null)?"not-equal":!e||!t?"equal":OT(e.baseLayers,t.baseLayers)?OT(e.referenceLayers,t.referenceLayers)?"equal":i.mustMatchReferences?"not-equal":"base-layers-equal":"not-equal"}function OT(e,t){if(e.length!==t.length)return!1;for(let i=0;i<e.length;i++)if(!PK(e[i],t[i]))return!1;return!0}function PK(e,t){if(e.type!==t.type||e.url!==t.url||e.minScale!==t.minScale||e.maxScale!==t.maxScale||e.visible!==t.visible||e.opacity!==t.opacity||!TK(e.effect,t.effect))return!1;if(e.activeLayerId!=null||t.activeLayerId!=null)return e.activeLayerId===t.activeLayerId;if(e.sublayers!=null||t.sublayers!=null){if(e.sublayers==null||t.sublayers==null||e.sublayers.length!==t.sublayers.length)return!1;for(let i=0;i<e.sublayers.length;i++){const r=e.sublayers.at(i),a=t.sublayers.at(i);if((r==null?void 0:r.id)!==(a==null?void 0:a.id)||(r==null?void 0:r.visible)!==(a==null?void 0:a.visible))return!1}}return!0}function Nk(e){return e?Ks(e).replace(/^\s*https?:/i,"").toLowerCase():""}function kK(e){if(!e)return null;const{thumbnailUrl:t}=e;if(t)return t;const i=EK(e);return i?Bp[i].thumbnailUrl:YA(e.baseLayers,RK)}function RK(e){var t;return"portalItem"in e?(t=e.portalItem)==null?void 0:t.thumbnailUrl:void 0}const Gw=()=>ye.getLogger("esri.support.basemapUtils");function NK(){return{}}function LK(e){for(const t in e){const i=e[t];Ht(i),delete e[t]}}function Lk(e,t){let i;if(typeof e=="string"){const r=e in Bp,a=!r&&e.includes("/");if(!r&&!a){if(dt.apiKey)Gw().warn(`Unable to find basemap definition for: ${e}. See available styles at https://developers.arcgis.com/rest/basemap-styles/`);else{const p=Object.entries(Bp).filter(([y,g])=>g.classic||g.is3d).map(([y])=>`"${y}"`).sort().join(", ");Gw().warn(`Unable to find basemap definition for: ${e}. Try one of these: ${p}`)}return null}t&&(i=t[e]),i||(i=r?Vl.fromId(e):new Vl({style:{id:e}}),t&&(t[e]=i))}else i=di(Vl,e);return i!=null&&i.destroyed&&(Gw().warn("The provided basemap is already destroyed",{basemap:i}),i=null),i}function DK(e){return new Z0({getCollections:()=>[e.tables,e.layers],getChildrenFunction:t=>{const i=[];return"tables"in t&&i.push(t.tables),"layers"in t&&i.push(t.layers),i},itemFilterFunction:t=>{const i=t.parent;return!!i&&"tables"in i&&i.tables.includes(t)}})}function Bw(e){for(const t of e.values())t==null||t.destroy();e.clear()}const PT={"world-elevation":{id:"worldElevation",url:"//elevation3d.arcgis.com/arcgis/rest/services/WorldElevation3D/Terrain3D/ImageServer",layerType:"ArcGISTiledElevationServiceLayer"},"world-topobathymetry":{id:"worldTopoBathymetry",url:"//elevation3d.arcgis.com/arcgis/rest/services/WorldElevation3D/TopoBathy3D/ImageServer",layerType:"ArcGISTiledElevationServiceLayer"}};function jK(e){let t=null;if(typeof e=="string")if(e in PT){const i=PT[e];t=new av({resourceInfo:{data:{layers:[i]}}})}else ye.getLogger("esri.support.groundUtils").warn(`Unable to find ground definition for: ${e}. Try "world-elevation"`);else t=di(av,e);return t}let Dk=0;const jk=e=>{let t=class extends e{constructor(...i){super(...i),Object.defineProperty(this,"uid",{writable:!1,configurable:!1,value:Date.now().toString(16)+"-object-"+Dk++})}};return t=v([H("esri.core.Identifiable")],t),t},FK=e=>{let t=class extends e{constructor(...i){super(...i),Object.defineProperty(this,"uid",{writable:!1,configurable:!1,value:Dk++})}};return t=v([H("esri.core.Identifiable.NumericIdentifiable")],t),t};let lf=class extends jk(class{}){};lf=v([H("esri.core.Identifiable")],lf),function(e){e.IdentifiableMixin=jk,e.NumericIdentifiableMixin=FK}(lf||(lf={}));const md=lf;async function zK(e){var r;const t="portalItem"in e?e:{portalItem:e},{fromItem:i}=await fe(async()=>{const{fromItem:a}=await import("./portalLayers-DoTkasCl.js");return{fromItem:a}},__vite__mapDeps([14,12,11,10,13]));try{return await i(t)}catch(a){const p=t==null?void 0:t.portalItem,y=(p==null?void 0:p.id)||"unset",g=((r=p==null?void 0:p.portal)==null?void 0:r.url)||dt.portalUrl;throw ye.getLogger("esri.layers.support.fromPortalItem").error("#fromPortalItem()","Failed to create layer from portal item (portal: '"+g+"', id: '"+y+"')",a),a}}const kT={milliseconds:1,seconds:1e3,minutes:6e4,hours:36e5,days:864e5,weeks:6048e5,months:26784e5,years:31536e6,decades:31536e7,centuries:31536e8};function qw(e,t,i,r=bo){const a=new Qr(q6(r)),p=Ne.fromJSDate(e,{zone:a}),y=i==="decades"||i==="centuries"?"year":zk(i);return i==="decades"&&(t*=10),i==="centuries"&&(t*=100),p.plus({[y]:t}).toJSDate()}function Abe(e,t,i="milliseconds"){const r=e.getTime(),a=Fk(t,i,"milliseconds");return new Date(r+a)}function RT(e,t,i=bo){const r=new Qr(q6(i)),a=Ne.fromJSDate(e,{zone:r});if(t==="decades"||t==="centuries"){const y=a.startOf("year"),{year:g}=y,_=g-g%(t==="decades"?10:100);return y.set({year:_}).toJSDate()}const p=zk(t);return a.startOf(p).toJSDate()}function Fk(e,t,i){return e===0?0:e*kT[t]/kT[i]}function Cbe(e,t){return e&&t?e.intersection(t):e||t}function zk(e){switch(e){case"milliseconds":return"millisecond";case"seconds":return"second";case"minutes":return"minute";case"hours":return"hour";case"days":return"day";case"weeks":return"week";case"months":return"month";case"years":return"year"}}var Os;let fs=Os=class extends he{static get allTime(){return NT}static get empty(){return UK}static fromArray(e){return new Os({start:e[0]!=null?new Date(e[0]):e[0],end:e[1]!=null?new Date(e[1]):e[1]})}constructor(e){super(e),this.end=null,this.start=null}readEnd(e,t){return t.end!=null?new Date(t.end):null}writeEnd(e,t){t.end=(e==null?void 0:e.getTime())??null}get isAllTime(){return this.equals(Os.allTime)}get isEmpty(){return this.equals(Os.empty)}readStart(e,t){return t.start!=null?new Date(t.start):null}writeStart(e,t){t.start=(e==null?void 0:e.getTime())??null}clone(){return new Os({end:this.end,start:this.start})}equals(e){var p,y,g,_;if(!e)return!1;const t=((p=this.start)==null?void 0:p.getTime())??this.start,i=((y=this.end)==null?void 0:y.getTime())??this.end,r=((g=e.start)==null?void 0:g.getTime())??e.start,a=((_=e.end)==null?void 0:_.getTime())??e.end;return t===r&&i===a}expandTo(e,t=bo){if(this.isEmpty||this.isAllTime)return this.clone();let i=this.start;i&&(i=RT(i,e,t));let r=this.end;if(r){const a=RT(r,e,t);r=r.getTime()===a.getTime()?a:qw(a,1,e,t)}return new Os({start:i,end:r})}intersection(e){var g,_,T,I;if(!e)return this.clone();if(this.isEmpty||e.isEmpty)return Os.empty;if(this.isAllTime)return e.clone();if(e.isAllTime)return this.clone();const t=((g=this.start)==null?void 0:g.getTime())??-1/0,i=((_=this.end)==null?void 0:_.getTime())??1/0,r=((T=e.start)==null?void 0:T.getTime())??-1/0,a=((I=e.end)==null?void 0:I.getTime())??1/0;let p,y;return r>=t&&r<=i?p=r:t>=r&&t<=a&&(p=t),i>=r&&i<=a?y=i:a>=t&&a<=i&&(y=a),p==null||y==null||isNaN(p)||isNaN(y)?Os.empty:new Os({start:p===-1/0?null:new Date(p),end:y===1/0?null:new Date(y)})}offset(e,t,i=bo){if(this.isEmpty||this.isAllTime)return this.clone();const r=new Os,{start:a,end:p}=this;return a!=null&&(r.start=qw(a,e,t,i)),p!=null&&(r.end=qw(p,e,t,i)),r}toArray(){var e,t;return this.isEmpty?[void 0,void 0]:[((e=this.start)==null?void 0:e.getTime())??null,((t=this.end)==null?void 0:t.getTime())??null]}union(e){if(!e||e.isEmpty)return this.clone();if(this.isEmpty)return e.clone();if(this.isAllTime||e.isAllTime)return NT.clone();const t=this.start!=null&&e.start!=null?new Date(Math.min(this.start.getTime(),e.start.getTime())):null,i=this.end!=null&&e.end!=null?new Date(Math.max(this.end.getTime(),e.end.getTime())):null;return new Os({start:t,end:i})}};v([S({type:Date,json:{write:{allowNull:!0}}})],fs.prototype,"end",void 0),v([me("end")],fs.prototype,"readEnd",null),v([be("end")],fs.prototype,"writeEnd",null),v([S({readOnly:!0,json:{read:!1}})],fs.prototype,"isAllTime",null),v([S({readOnly:!0,json:{read:!1}})],fs.prototype,"isEmpty",null),v([S({type:Date,json:{write:{allowNull:!0}}})],fs.prototype,"start",void 0),v([me("start")],fs.prototype,"readStart",null),v([be("start")],fs.prototype,"writeStart",null),fs=Os=v([H("esri.time.TimeExtent")],fs);const Ma=fs,NT=new fs,UK=new fs({start:void 0,end:void 0});let VK=0,oi=class extends Ss.EventedMixin(md.IdentifiableMixin(Xs)){constructor(){super(...arguments),this.attributionDataUrl=null,this.fullExtent=new Ct(-180,-90,180,90,qe.WGS84),this.id=Date.now().toString(16)+"-layer-"+VK++,this.legendEnabled=!0,this.listMode="show",this.opacity=1,this.parent=null,this.persistenceEnabled=!1,this.popupEnabled=!0,this.attributionVisible=!0,this.spatialReference=qe.WGS84,this.title=null,this.type=null,this.url=null,this.visibilityTimeExtent=null,this.visible=!0}static async fromArcGISServerUrl(t){const i=typeof t=="string"?{url:t}:t;return(await fe(async()=>{const{fromUrl:r}=await import("./arcgisLayers-Dzpbvhj4.js");return{fromUrl:r}},__vite__mapDeps([15,12,11,13]))).fromUrl(i)}static fromPortalItem(t){return zK(t)}initialize(){this.when().catch(t=>{Si(t)||ye.getLogger(this).error("#load()",`Failed to load layer (title: '${this.title??"no title"}', id: '${this.id??"no id"}')`,{error:t})})}destroy(){const t=this.parent;if(t){const i=this;"layers"in t&&t.layers.includes(i)?t.layers.remove(i):"tables"in t&&t.tables.includes(i)?t.tables.remove(i):"baseLayers"in t&&t.baseLayers.includes(i)?t.baseLayers.remove(i):"referenceLayers"in t&&t.referenceLayers.includes(i)&&t.referenceLayers.remove(i),this._set("parent",null)}}get effectiveVisible(){let t=this.visible;const i=this.parent;return t&&i&&"effectiveVisible"in i&&t&&(t=i.effectiveVisible),t}get hasAttributionData(){return this.attributionDataUrl!=null}get parsedUrl(){return mr(this.url)}createLayerView(t,i){return Promise.reject(new Y("layer:create-layer-view","Layer does not support creating a layer view"))}async fetchAttributionData(){const t=this.attributionDataUrl;if(this.hasAttributionData&&t)return(await kt(t,{query:{f:"json"},responseType:"json"})).data;throw new Y("layer:no-attribution-data","Layer does not have attribution data")}};v([S({type:String})],oi.prototype,"attributionDataUrl",void 0),v([S({readOnly:!0})],oi.prototype,"effectiveVisible",null),v([S({type:Ct})],oi.prototype,"fullExtent",void 0),v([S({readOnly:!0})],oi.prototype,"hasAttributionData",null),v([S({type:String,clonable:!1})],oi.prototype,"id",void 0),v([S({type:Boolean,nonNullable:!0})],oi.prototype,"legendEnabled",void 0),v([S({type:["show","hide","hide-children"]})],oi.prototype,"listMode",void 0),v([S({type:Number,range:{min:0,max:1},nonNullable:!0})],oi.prototype,"opacity",void 0),v([S({clonable:!1})],oi.prototype,"parent",void 0),v([S({readOnly:!0})],oi.prototype,"parsedUrl",null),v([S({type:Boolean,readOnly:!0})],oi.prototype,"persistenceEnabled",void 0),v([S({type:Boolean})],oi.prototype,"popupEnabled",void 0),v([S({type:Boolean})],oi.prototype,"attributionVisible",void 0),v([S({type:qe})],oi.prototype,"spatialReference",void 0),v([S({type:String})],oi.prototype,"title",void 0),v([S({readOnly:!0,json:{read:!1}})],oi.prototype,"type",void 0),v([S()],oi.prototype,"url",void 0),v([S({type:Ma})],oi.prototype,"visibilityTimeExtent",void 0),v([S({type:Boolean,nonNullable:!0})],oi.prototype,"visible",void 0),oi=v([H("esri.layers.Layer")],oi);const X6=oi;function p5(e,t,i){let r,a;if(e)for(let p=0,y=e.length;p<y;p++){if(r=e.at(p),(r==null?void 0:r[t])===i)return r;if((r==null?void 0:r.type)==="group"&&(a=p5(r.layers,t,i),a))return a}}const GK=e=>{let t=class extends e{constructor(...i){super(...i),this.layers=new xe;const r=y=>{y.parent&&"remove"in y.parent&&y.parent.remove(y)},a=y=>{y.parent=this,this.layerAdded(y),y.type!=="elevation"&&y.type!=="base-elevation"||ye.getLogger(this).error(`Layer 'title:${y.title}, id:${y.id}' of type '${y.type}' is not supported as an operational layer and will therefore be ignored.`)},p=y=>{y.parent=null,this.layerRemoved(y)};this.addHandles([this.layers.on("before-add",y=>{if(y.item===this)return y.preventDefault(),void ye.getLogger(this).error("#add()","Cannot add layer to itself.");r(y.item)}),this.layers.on("after-add",y=>a(y.item)),this.layers.on("after-remove",y=>p(y.item))])}destroy(){const i=this.layers.toArray();for(const r of i)r.destroy();this.layers.destroy()}set layers(i){this._set("layers",Ta(i,this._get("layers")))}add(i,r){const a=this.layers;if(r=a.getNextIndex(r),i instanceof X6){const p=i;p.parent===this?this.reorder(p,r):a.add(p,r)}else $o(i)?i.then(p=>{this.destroyed||this.add(p,r)}):ye.getLogger(this).error("#add()","The item being added is not a Layer or a Promise that resolves to a Layer.")}addMany(i,r){const a=this.layers;let p=a.getNextIndex(r);i.slice().forEach(y=>{y.parent!==this?(a.add(y,p),p+=1):this.reorder(y,p)})}findLayerById(i){return p5(this.layers,"id",i)}findLayerByUid(i){return p5(this.layers,"uid",i)}remove(i){return this.layers.remove(i)}removeMany(i){return this.layers.removeMany(i)}removeAll(){return this.layers.removeAll()}reorder(i,r){return this.layers.reorder(i,r)}layerAdded(i){}layerRemoved(i){}};return v([S()],t.prototype,"layers",null),t=v([H("esri.support.LayersMixin")],t),t},BK=new Set(["feature","subtype-group"]);function d5(e,t,i){if(e)for(let r=0,a=e.length;r<a;r++){const p=e.at(r);if(p[t]===i)return p;if((p==null?void 0:p.type)==="group"){const y=d5(p.tables,t,i);if(y)return y}}}const qK=e=>{let t=class extends e{constructor(...i){super(...i),this.tables=new xe,this.addHandles([this.tables.on("after-add",r=>{const a=r.item;a.parent&&a.parent!==this&&"tables"in a.parent&&a.parent.tables.remove(a),a.parent=this,BK.has(a.type)||ye.getLogger(this).error(`Layer 'title:${a.title}, id:${a.id}' of type '${a.type}' is not supported as a table and will therefore be ignored.`)}),this.tables.on("after-remove",r=>{r.item.parent=null})])}destroy(){const i=this.tables.toArray();for(const r of i)r.destroy();this.tables.destroy()}set tables(i){this._set("tables",Ta(i,this._get("tables")))}findTableById(i){return d5(this.tables,"id",i)}findTableByUid(i){return d5(this.tables,"uid",i)}};return v([S()],t.prototype,"tables",null),t=v([H("esri.support.TablesMixin")],t),t};let fn=class extends qK(GK(Ss.EventedMixin(Ae))){constructor(t){super(t),this.allLayers=new Z0({getCollections:()=>{var i,r,a;return[(i=this.basemap)==null?void 0:i.baseLayers,(r=this.ground)==null?void 0:r.layers,this.layers,(a=this.basemap)==null?void 0:a.referenceLayers]},getChildrenFunction:i=>"layers"in i?i.layers:null}),this.allTables=DK(this),this.basemap=null,this.editableLayers=new Z0({getCollections:()=>[this.allLayers],itemFilterFunction:oZ}),this.ground=new av,this._basemapCache=NK()}destroy(){LK(this._basemapCache),this._basemapCache=null,this.allLayers.destroy(),this.allTables.destroy(),this.editableLayers.destroy(),this.basemap=Ht(this.basemap),Ht(this.ground),this._set("ground",null)}castBasemap(t){return Lk(t,this._basemapCache)}castGround(t){return jK(t)??this._get("ground")}findLayerById(t){return this.allLayers.find(i=>i.id===t)}findTableById(t){return this.allTables.find(i=>i.id===t)}};v([S({readOnly:!0,dependsOn:[]})],fn.prototype,"allLayers",void 0),v([S({readOnly:!0})],fn.prototype,"allTables",void 0),v([S({type:Vl,json:{read:{source:"baseMap"},write:{target:"baseMap"}}})],fn.prototype,"basemap",void 0),v([ct("basemap")],fn.prototype,"castBasemap",null),v([S({readOnly:!0})],fn.prototype,"editableLayers",void 0),v([S({type:av,nonNullable:!0})],fn.prototype,"ground",void 0),v([ct("ground")],fn.prototype,"castGround",null),v([S()],fn.prototype,"undoRedo",void 0),fn=v([H("esri.Map")],fn);const Uk=fn,Vk=e=>{let t=class extends e{clone(){var _;const i=Xr(this);KA(i,"unable to clone instance of non-accessor class");const r=i.metadata,a=i.store,p={},y=new Map;for(const T in r){const I=r[T],A=a==null?void 0:a.originOf(T),P=I.clonable;if(I.readOnly||P===!1||A!==tt.USER&&A!==tt.DEFAULTS&&A!==tt.WEB_MAP&&A!==tt.WEB_SCENE)continue;const N=this[T];let D=null;D=typeof P=="function"?P(N):P==="reference"?N:l3(N),N!=null&&D==null||(A===tt.DEFAULTS?y.set(T,D):p[T]=D)}const g=new(Object.getPrototypeOf(this)).constructor(p);if(y.size){const T=(_=Xr(g))==null?void 0:_.store;if(T)for(const[I,A]of y)T.set(I,A,tt.DEFAULTS)}return g}};return t=v([H("esri.core.Clonable")],t),t};let uf=class extends Vk(Ae){};uf=v([H("esri.core.Clonable")],uf),function(e){e.ClonableMixin=Vk}(uf||(uf={}));const at=uf;let Cu=class extends at{constructor(t){super(t),this.row=0,this.column=0,this.rows=1,this.columns=1}equals(t){return t!=null&&this.row===t.row&&this.rows===t.rows&&this.column===t.column&&this.columns===t.columns}};v([S({type:Number,nonNullable:!0,json:{read:!1,write:!1}})],Cu.prototype,"row",void 0),v([S({type:Number,nonNullable:!0,json:{read:!1,write:!1}})],Cu.prototype,"column",void 0),v([S({type:Number,nonNullable:!0,json:{read:!1,write:!1}})],Cu.prototype,"rows",void 0),v([S({type:Number,nonNullable:!0,json:{read:!1,write:!1}})],Cu.prototype,"columns",void 0),Cu=v([H("esri.CameraLayout")],Cu);const Gk=Cu;let Q6=class{constructor(t,i){this.min=t,this.max=i,this.range=i-t}normalize(t,i=0,r=!1){return LT(this.range,this.min,this.max,t,i,r)}clamp(t,i=0){return xs(t-i,this.min,this.max)+i}monotonic(t,i,r){return t<i?i:i+f5(this.range,t-i,r)}minimalMonotonic(t,i,r){return LT(this.range,t,t+this.range,i,r)}center(t,i,r){return i=this.monotonic(t,i,r),this.normalize((t+i)/2,r)}diff(t,i,r){return this.monotonic(t,i,r)-t}shortestSignedDiff(t,i){t=this.normalize(t);const r=(i=this.normalize(i))-t,a=i<t?this.minimalMonotonic(t,i)-t:i-this.minimalMonotonic(i,t);return Math.abs(r)<Math.abs(a)?r:a}contains(t,i,r){return i=this.minimalMonotonic(t,i),(r=this.minimalMonotonic(t,r))>t&&r<i}};function LT(e,t,i,r,a=0,p=!1){return(r-=a)<t?r+=f5(e,t-r):r>i&&(r-=f5(e,r-i)),p&&r===i&&(r=t),r+a}function f5(e,t,i=0){return Math.ceil((t-i)/e)*e+i}const Lbe=new Q6(0,2*Math.PI),Dbe=new Q6(-Math.PI,Math.PI),HK=new Q6(0,360);let qn=class extends at.ClonableMixin(he){constructor(...t){super(...t),this.position=new Be([0,0,0]),this.heading=0,this.tilt=0,this.fov=55,this.layout=new Gk}normalizeCtorArgs(t,i,r,a){if(t&&typeof t=="object"&&("x"in t||Array.isArray(t))){const p={position:t};return i!=null&&(p.heading=i),r!=null&&(p.tilt=r),a!=null&&(p.fov=a),p}return t}writePosition(t,i,r,a){const p=t.clone();p.x=Er(t.x||0),p.y=Er(t.y||0),p.z=t.hasZ?Er(t.z||0):t.z,i[r]=p.write({},a)}readPosition(t,i){const r=new Be;return r.read(t,i),r.x=Er(r.x||0),r.y=Er(r.y||0),r.z=r.hasZ?Er(r.z||0):r.z,r}equals(t){return t!=null&&this.tilt===t.tilt&&this.heading===t.heading&&this.fov===t.fov&&this.position.equals(t.position)&&this.layout.equals(t.layout)}};v([S({type:Be,json:{write:{isRequired:!0}}})],qn.prototype,"position",void 0),v([be("position")],qn.prototype,"writePosition",null),v([me("position")],qn.prototype,"readPosition",null),v([S({type:Number,nonNullable:!0,json:{write:{isRequired:!0}}}),ct(e=>HK.normalize(Er(e)))],qn.prototype,"heading",void 0),v([S({type:Number,nonNullable:!0,json:{write:{isRequired:!0}}}),ct(e=>xs(Er(e),-180,180))],qn.prototype,"tilt",void 0),v([S({type:Number,nonNullable:!0,json:{default:55,write:!0}}),ct(e=>xs(Er(e,55),1,170))],qn.prototype,"fov",void 0),v([S({type:Gk,nonNullable:!0,json:{read:!1,write:!1}})],qn.prototype,"layout",void 0),qn=v([H("esri.Camera")],qn);const WK=qn;function Hp(e,t,i=!1){let{hasM:r,hasZ:a}=e;Array.isArray(t)?t.length!==4||r||a?t.length===3&&i&&!r?(a=!0,r=!1):t.length===3&&r&&a&&(r=!1,a=!1):(r=!0,a=!0):(a=!a&&t.hasZ&&(!r||t.hasM),r=!r&&t.hasM&&(!a||t.hasZ)),e.hasZ=a,e.hasM=r}var y5;function DT(e){return(t,i)=>t==null?i:i==null?t:e(t,i)}function JK(e){return e&&(e.declaredClass==="esri.geometry.SpatialReference"||e.wkid!=null)}let Za=y5=class extends Ia{constructor(...e){super(...e),this.points=[],this.type="multipoint"}normalizeCtorArgs(e,t){var a;if(!e&&!t)return{};const i={};Array.isArray(e)?(i.points=e,i.spatialReference=t):JK(e)?i.spatialReference=e:(e.points&&(i.points=e.points),e.spatialReference&&(i.spatialReference=e.spatialReference),e.hasZ&&(i.hasZ=e.hasZ),e.hasM&&(i.hasM=e.hasM));const r=(a=i.points)==null?void 0:a[0];return r&&(i.hasZ===void 0&&i.hasM===void 0?(i.hasZ=r.length>2,i.hasM=!1):i.hasZ===void 0?i.hasZ=r.length>3:i.hasM===void 0&&(i.hasM=r.length>3)),i}get cache(){return this.commitProperty("points"),this.commitProperty("hasZ"),this.commitProperty("hasM"),this.commitProperty("spatialReference"),{}}get extent(){const e=this.points;if(!e.length)return null;const t=new Ct,i=this.hasZ,r=this.hasM,a=i?3:2,p=e[0],y=DT(Math.min),g=DT(Math.max);let _,T,I,A,[P,N]=p,[D,z]=p;for(let q=0,J=e.length;q<J;q++){const ee=e[q],[X,ie]=ee;if(P=y(P,X),N=y(N,ie),D=g(D,X),z=g(z,ie),i&&ee.length>2){const oe=ee[2];_=y(_,oe),I=g(I,oe)}if(r&&ee.length>a){const oe=ee[a];T=y(T,oe),A=g(A,oe)}}return t.xmin=P,t.ymin=N,t.xmax=D,t.ymax=z,t.spatialReference=this.spatialReference,i?(t.zmin=_,t.zmax=I):(t.zmin=void 0,t.zmax=void 0),r?(t.mmin=T,t.mmax=A):(t.mmin=void 0,t.mmax=void 0),t}writePoints(e,t){t.points=te(this.points)}addPoint(e){return Hp(this,e),Array.isArray(e)?this.points.push(e):this.points.push(e.toArray()),this.notifyChange("points"),this}clone(){const e={points:te(this.points),spatialReference:this.spatialReference};return this.hasZ&&(e.hasZ=!0),this.hasM&&(e.hasM=!0),new y5(e)}getPoint(e){if(!this._validateInputs(e))return null;const t=this.points[e],i={x:t[0],y:t[1],spatialReference:this.spatialReference};let r=2;return this.hasZ&&(i.z=t[2],r=3),this.hasM&&(i.m=t[r]),new Be(i)}removePoint(e){if(!this._validateInputs(e))return null;const t=new Be(this.points.splice(e,1)[0],this.spatialReference);return this.notifyChange("points"),t}setPoint(e,t){return this._validateInputs(e)?(Hp(this,t),Array.isArray(t)||(t=t.toArray()),this.points[e]=t,this.notifyChange("points"),this):this}toJSON(e){return this.write({},e)}_validateInputs(e){return e!=null&&e>=0&&e<this.points.length}};v([S({readOnly:!0})],Za.prototype,"cache",null),v([S()],Za.prototype,"extent",null),v([S({type:[[Number]],json:{write:{isRequired:!0}}})],Za.prototype,"points",void 0),v([be("points")],Za.prototype,"writePoints",null),Za=y5=v([H("esri.geometry.Multipoint")],Za),Za.prototype.toJSON.isDefaultToJSON=!0;const C1=Za;function Fbe(e){const t=[];for(e.reset();e.nextPath();){const i=[];for(;e.nextPoint();)i.push([e.x,e.y]);t.push(i)}return e.reset(),t}function ZK(e){const t=[];for(;e.nextPoint();)t.push([e.x,e.y]);return e.seekPathStart(),t}var lv;(function(e){e[e.X=0]="X",e[e.Y=1]="Y",e[e.Z=2]="Z"})(lv||(lv={}));function zbe(e){if(!e)return null;if(Array.isArray(e))return e;const t=e.hasZ,i=e.hasM;if(e.type==="point")return i&&t?[e.x,e.y,e.z,e.m]:t?[e.x,e.y,e.z]:i?[e.x,e.y,e.m]:[e.x,e.y];if(e.type==="polygon")return e.rings.slice();if(e.type==="polyline")return e.paths.slice();if(e.type==="multipoint")return e.points.slice();if(e.type==="extent"){const r=e.clone().normalize();if(!r)return null;let a=!1,p=!1;return r.forEach(y=>{y.hasZ&&(a=!0),y.hasM&&(p=!0)}),r.map(y=>{const g=[[y.xmin,y.ymin],[y.xmin,y.ymax],[y.xmax,y.ymax],[y.xmax,y.ymin],[y.xmin,y.ymin]];if(a&&y.hasZ){const _=.5*(y.zmax-y.zmin);for(let T=0;T<g.length;T++)g[T].push(_)}if(p&&y.hasM){const _=.5*(y.mmax-y.mmin);for(let T=0;T<g.length;T++)g[T].push(_)}return g})}return null}function w2(e,t){const i=t[0]-e[0],r=t[1]-e[1];if(e.length>2&&t.length>2){const a=e[2]-t[2];return Math.sqrt(i*i+r*r+a*a)}return Math.sqrt(i*i+r*r)}function Bk(e,t,i){const r=e[0]+i*(t[0]-e[0]),a=e[1]+i*(t[1]-e[1]);return e.length>2&&t.length>2?[r,a,e[2]+i*(t[2]-e[2])]:[r,a]}function KK(e,t,i,r){return YK(e,t,i[r],i[r+1])}function YK(e,t,i,r){const[a,p]=t,[y,g]=i,[_,T]=r,I=_-y,A=T-g,P=I*I+A*A,N=(a-y)*I+(p-g)*A,D=Math.min(1,Math.max(0,N/P));return e[0]=y+I*D,e[1]=g+A*D,e}function Ube(e,t,i,r,a,p){let y=i,g=r,_=a-y,T=p-g;if(_!==0||T!==0){const I=((e-y)*_+(t-g)*T)/(_*_+T*T);I>1?(y=a,g=p):I>0&&(y+=_*I,g+=T*I)}return _=e-y,T=t-g,_*_+T*T}function qk(e,t){return Bk(e,t,.5)}function Vbe(e){const t=e.length;let i=0;for(let r=0;r<t-1;++r)i+=w2(e[r],e[r+1]);return i}function Gbe(e,t){if(t<=0)return e[0];const i=e.length;let r=0;for(let a=0;a<i-1;++a){const p=w2(e[a],e[a+1]);if(t-r<p){const y=(t-r)/p;return Bk(e[a],e[a+1],y)}r+=p}return e[i-1]}function Hk(e,t=lv.X,i=lv.Y){let r=0;const a=e.length;let p=e[0];for(let y=1;y<a;y++){const g=e[y];r+=(g[t]-p[t])*(g[i]+p[i]),p=g}if(!Wk(e)){const y=e[0];r+=(y[t]-p[t])*(y[i]+p[i])}return r>=0}function Wk(e){const t=e.length;return t<3||Vv(e[0],e[t-1])}function Bbe(e){"rings"in e&&(XK(e),QK(e))}function XK(e){if(!("rings"in e))return!1;let t=!1;for(const i of e.rings)Wk(i)||(i.push(i[0].slice()),t=!0);return t}function QK(e){if(!("rings"in e)||e.rings.length===0||Hk(e.rings[0]))return!1;for(const t of e.rings)t.reverse();return!0}function qbe(e){return e.type!=="polygon"&&e.type!=="polyline"||eY(e.type==="polygon"?e.rings:e.paths,e.spatialReference),e}function eY(e,t){const i=Ir(t);if(!i)return;const r=i.valid[0],a=i.valid[1],p=a-r;for(const y of e){let g=1/0,_=-1/0;for(const I of y){const A=tY(I[0],r,a);g=Math.min(g,A),_=Math.max(_,A),I[0]=A}const T=_-g;p-T<T&&y.forEach(I=>{I[0]<0&&(I[0]+=p)})}}function tY(e,t,i){const r=i-t;return e<t?i-(t-e)%r:e>i?t+(e-t)%r:e}function Hbe(e,t){if(e===t)return!0;if(e.type!==t.type)return!1;if(e.type==="point"||e.type==="mesh"||e.type==="extent")return!0;if(e.type==="multipoint")return e.points.length===t.points.length;const[i,r]=e.type==="polyline"?[e.paths,t.paths]:[e.rings,t.rings];return i.length===r.length&&i.every((a,p)=>a.length===r[p].length)}function Wbe(e){return e?e.hasZ?[e.xmax-e.xmin/2,e.ymax-e.ymin/2,e.zmax-e.zmin/2]:[e.xmax-e.xmin/2,e.ymax-e.ymin/2]:null}function iY(e){return e?rY(e.rings,e.hasZ??!1):null}function rY(e,t){if(!(e!=null&&e.length))return null;const i=[],r=[],a=t?[1/0,-1/0,1/0,-1/0,1/0,-1/0]:[1/0,-1/0,1/0,-1/0];for(let p=0,y=e.length;p<y;p++){const g=Jk(e[p],t,a);g&&r.push(g)}if(r.sort((p,y)=>{let g=p[2]-y[2];return g===0&&t&&(g=p[4]-y[4]),g}),r.length&&(i[0]=r[0][0],i[1]=r[0][1],t&&(i[2]=r[0][3]),(i[0]<a[0]||i[0]>a[1]||i[1]<a[2]||i[1]>a[3]||t&&(i[2]<a[4]||i[2]>a[5]))&&(i.length=0)),!i.length){const p=e[0]&&e[0].length?sY(e[0],t):null;if(!p)return null;i[0]=p[0],i[1]=p[1],t&&p.length>2&&(i[2]=p[2])}return i}function Jk(e,t,i){let r=0,a=0,p=0,y=0,g=0;const _=e.length?e[0][0]:0,T=e.length?e[0][1]:0,I=e.length&&t?e[0][2]:0;for(let P=0;P<e.length;P++){const N=e[P],D=e[(P+1)%e.length],[z,q,J]=N,ee=z-_,X=q-T,[ie,oe,ue]=D,ge=ie-_,Se=oe-T,Ee=ee*Se-ge*X;if(y+=Ee,r+=(ee+ge)*Ee,a+=(X+Se)*Ee,t&&N.length>2&&D.length>2){const Ie=J-I,ke=ue-I,je=ee*ke-ge*Ie;p+=(Ie+ke)*je,g+=je}z<i[0]&&(i[0]=z),z>i[1]&&(i[1]=z),q<i[2]&&(i[2]=q),q>i[3]&&(i[3]=q),t&&(J<i[4]&&(i[4]=J),J>i[5]&&(i[5]=J))}if(y>0&&(y*=-1),g>0&&(g*=-1),!y)return null;y*=.5,g*=.5;const A=[r/(6*y)+_,a/(6*y)+T,y];return t&&(i[4]===i[5]||g===0?(A[3]=(i[4]+i[5])/2,A[4]=0):(A[3]=p/(6*g)+I,A[4]=g)),A}function Jbe(e,t){let i=0,r=0,a=0;e.nextPoint();const p=e.pathSize?e.x:0,y=e.pathSize?e.y:0;for(let g=0;g<e.pathSize;g++){e.seekInPath(g);const _=[e.x,e.y];e.seekInPath((g+1)%e.pathSize);const T=[e.x,e.y],[I,A]=_,P=I-p,N=A-y,[D,z]=T,q=D-p,J=z-y,ee=P*J-q*N;a+=ee,i+=(P+q)*ee,r+=(N+J)*ee,I<t[0]&&(t[0]=I),I>t[1]&&(t[1]=I),A<t[2]&&(t[2]=A),A>t[3]&&(t[3]=A)}return a>0&&(a*=-1),a?(a*=.5,[i/(6*a)+p,r/(6*a)+y,a]):null}function sY(e,t){const i=t?[0,0,0]:[0,0],r=t?[0,0,0]:[0,0];let a=0,p=0,y=0,g=0;for(let _=0,T=e.length;_<T-1;_++){const I=e[_],A=e[_+1];if(I&&A){i[0]=I[0],i[1]=I[1],r[0]=A[0],r[1]=A[1],t&&I.length>2&&A.length>2&&(i[2]=I[2],r[2]=A[2]);const P=w2(i,r);if(P){a+=P;const N=qk(I,A);p+=P*N[0],y+=P*N[1],t&&N.length>2&&(g+=P*N[2])}}}return a>0?t?[p/a,y/a,g/a]:[p/a,y/a]:e.length?e[0]:null}function nY(e){const{hasZ:t,totalSize:i}=e;if(i===0)return null;const r=[],a=[],p=t?[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY]:[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY];for(e.reset();e.nextPath();){const y=Jk(ZK(e),e.hasZ,p);y&&a.push(y)}if(a.sort((y,g)=>{let _=y[2]-g[2];return _===0&&t&&(_=y[4]-g[4]),_}),a.length&&(r[0]=a[0][0],r[1]=a[0][1],t&&(r[2]=a[0][3]),(r[0]<p[0]||r[0]>p[1]||r[1]<p[2]||r[1]>p[3]||t&&(r[2]<p[4]||r[2]>p[5]))&&(r.length=0)),!r.length){e.reset(),e.nextPath();const y=e.pathSize?oY(e):null;if(!y)return null;r[0]=y[0],r[1]=y[1],t&&y.length>2&&(r[2]=y[2])}return r}function oY(e){const{hasZ:t}=e,i=t?[0,0,0]:[0,0],r=t?[0,0,0]:[0,0];let a=0,p=0,y=0,g=0;if(e.nextPoint()){let _=e.x,T=e.y,I=e.z;for(;e.nextPoint();){const A=e.x,P=e.y,N=e.z;i[0]=_,i[1]=T,r[0]=A,r[1]=P,t&&(i[2]=I,r[2]=N);const D=w2(i,r);if(D){a+=D;const z=qk(i,r);p+=D*z[0],y+=D*z[1],t&&z.length>2&&(g+=D*z[2])}_=A,T=P,I=N}}return a>0?t?[p/a,y/a,g/a]:[p/a,y/a]:e.pathSize?(e.seekPathStart(),e.nextPoint(),[e.x,e.y]):null}const aY=1e-6;function Zbe(e){let t=0;for(e.reset();e.nextPath();)t+=e.getCurrentRingArea();if(t<aY){const a=nY(e);return a?[a[0],a[1]]:null}const i=[0,0];if(e.reset(),!e.nextPath()||!e.nextPoint())return null;const r=[e.x,e.y];for(e.reset();e.nextPath();)uY(i,r,e);return i[0]*=1/t,i[1]*=1/t,i[0]+=r[0],i[1]+=r[1],i}const lY=1/3;function uY(e,t,i){if(!i||i.pathSize<3)return null;i.nextPoint();const r=i.x,a=i.y;i.nextPoint();let p,y=i.x-r,g=i.y-a,_=0,T=0;for(;i.nextPoint();)_=i.x-r,T=i.y-a,p=.5*lY*(_*g-T*y),e[0]+=p*(y+_),e[1]+=p*(g+T),y=_,g=T;const I=i.getCurrentRingArea(),A=[r,a];return A[0]-=t[0],A[1]-=t[1],A[0]*=I,A[1]*=I,e[0]+=A[0],e[1]+=A[1],e}function Oi(e=fY){return[e[0],e[1],e[2],e[3]]}function Zk(e,t){return e!==t&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3]),e}function Kbe(e,t,i,r,a=Oi()){return a[0]=e,a[1]=t,a[2]=i,a[3]=r,a}function hY(e,t=Oi()){return t[0]=e.xmin,t[1]=e.ymin,t[2]=e.xmax,t[3]=e.ymax,t}function cY(e,t,i=new Ct){return i.xmin=e[0],i.ymin=e[1],i.xmax=e[2],i.ymax=e[3],i.spatialReference=t,i}function Ybe(e,t){t[0]<e[0]&&(e[0]=t[0]),t[0]>e[2]&&(e[2]=t[0]),t[1]<e[1]&&(e[1]=t[1]),t[1]>e[3]&&(e[3]=t[1])}function Xbe(e,t,i){if(t!=null)if("length"in t)m5(t)?(i[0]=Math.min(e[0],t[0]),i[1]=Math.min(e[1],t[1]),i[2]=Math.max(e[2],t[2]),i[3]=Math.max(e[3],t[3])):t.length!==2&&t.length!==3||(i[0]=Math.min(e[0],t[0]),i[1]=Math.min(e[1],t[1]),i[2]=Math.max(e[2],t[0]),i[3]=Math.max(e[3],t[1]));else switch(t.type){case"extent":i[0]=Math.min(e[0],t.xmin),i[1]=Math.min(e[1],t.ymin),i[2]=Math.max(e[2],t.xmax),i[3]=Math.max(e[3],t.ymax);break;case"point":i[0]=Math.min(e[0],t.x),i[1]=Math.min(e[1],t.y),i[2]=Math.max(e[2],t.x),i[3]=Math.max(e[3],t.y)}else Zk(i,e)}function Qbe(e,t,i=e){const r=t.length;let a=e[0],p=e[1],y=e[2],g=e[3];for(let _=0;_<r;_++){const T=t[_];a=Math.min(a,T[0]),p=Math.min(p,T[1]),y=Math.max(y,T[0]),g=Math.max(g,T[1])}return i[0]=a,i[1]=p,i[2]=y,i[3]=g,i}function e3e(e){for(let t=0;t<4;t++)if(!isFinite(e[t]))return!1;return!0}function eS(e){return e==null||e[0]>=e[2]?0:e[2]-e[0]}function tS(e){return e==null||e[1]>=e[3]?0:e[3]-e[1]}function t3e(e){return eS(e)*tS(e)}function i3e(e,t=[0,0]){return t[0]=(e[0]+e[2])/2,t[1]=(e[1]+e[3])/2,t}function r3e(e){const t=eS(e),i=tS(e);return Math.sqrt(t*t+i*i)}function s3e(e,t){return pY(e,t.x,t.y)}function pY(e,t,i){return t>=e[0]&&i>=e[1]&&t<=e[2]&&i<=e[3]}function n3e(e,t){return Math.max(t[0],e[0])<=Math.min(t[2],e[2])&&Math.max(t[1],e[1])<=Math.min(t[3],e[3])}function o3e(e,t,i){return Math.max(t[0],e[0])-i<=Math.min(t[2],e[2])&&Math.max(t[1],e[1])-i<=Math.min(t[3],e[3])}function dY(e,t){return t[0]>=e[0]&&t[2]<=e[2]&&t[1]>=e[1]&&t[3]<=e[3]}function a3e(e,t,i,r=e){return r[0]=e[0]+t,r[1]=e[1]+i,r[2]=e[2]+t,r[3]=e[3]+i,r}function l3e(e){return e?Zk(e,jT):Oi(jT)}function m5(e){return e!=null&&e.length===4}function u3e(e,t){return m5(e)&&m5(t)?e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]:e===t}const jT=[1/0,1/0,-1/0,-1/0],fY=[0,0,0,0];function Kk(e){return e.xmin!==void 0&&e.ymin!==void 0&&e.xmax!==void 0&&e.ymax!==void 0}function Yk(e){return e.points!==void 0}function Xk(e){return e.x!==void 0&&e.y!==void 0}function Qk(e){return e.paths!==void 0}function eR(e){return e.rings!==void 0}function tR(e){function t(i,r){return i==null?r:r==null?i:e(i,r)}return t}const Rl=tR(Math.min),Nl=tR(Math.max);function h3e(e,t){return Qk(t)?Wp(e,t.paths,!1,!1):eR(t)?Wp(e,t.rings,!1,!1):Yk(t)?iS(e,t.points,!1,!1,!1,!1):Kk(t)?iR(e,t):(Xk(t)&&(e[0]=t.x,e[1]=t.y,e[2]=t.x,e[3]=t.y),e)}function c3e(e){let t,i,r,a;for(e.reset(),t=r=1/0,i=a=-1/0;e.nextPath();){const p=yY(e);t=Math.min(p[0],t),r=Math.min(p[1],r),i=Math.max(p[2],i),a=Math.max(p[3],a)}return Oi([t,r,i,a])}function yY(e){let t,i,r,a;for(t=r=1/0,i=a=-1/0;e.nextPoint();)t=Math.min(e.x,t),r=Math.min(e.y,r),i=Math.max(e.x,i),a=Math.max(e.y,a);return Oi([t,r,i,a])}function p3e(e,t){return Qk(t)?Wp(e,t.paths,!0,!1):eR(t)?Wp(e,t.rings,!0,!1):Yk(t)?iS(e,t.points,!0,!1,!0,!1):Kk(t)?iR(e,t,!0,!1,!0,!1):(Xk(t)&&(e[0]=t.x,e[1]=t.y,e[2]=t.z,e[3]=t.x,e[4]=t.y,e[5]=t.z),e)}function Wp(e,t,i,r){const a=i?3:2;if(!t.length||!t[0].length)return null;let p,y,g,_,[T,I]=t[0][0],[A,P]=t[0][0];for(let N=0;N<t.length;N++){const D=t[N];for(let z=0;z<D.length;z++){const q=D[z],[J,ee]=q;if(T=Rl(T,J),I=Rl(I,ee),A=Nl(A,J),P=Nl(P,ee),i&&q.length>2){const X=q[2];p=Rl(p,X),y=Nl(y,X)}if(r&&q.length>a){const X=q[a];g=Rl(p,X),_=Nl(y,X)}}}return i?r?(e[0]=T,e[1]=I,e[2]=p,e[3]=g,e[4]=A,e[5]=P,e[6]=y,e[7]=_,e.length=8,e):(e[0]=T,e[1]=I,e[2]=p,e[3]=A,e[4]=P,e[5]=y,e.length=6,e):r?(e[0]=T,e[1]=I,e[2]=g,e[3]=A,e[4]=P,e[5]=_,e.length=6,e):(e[0]=T,e[1]=I,e[2]=A,e[3]=P,e.length=4,e)}function iR(e,t,i,r,a,p){const y=t.xmin,g=t.xmax,_=t.ymin,T=t.ymax;let I=t.zmin,A=t.zmax,P=t.mmin,N=t.mmax;return a?(I=I||0,A=A||0,p?(P=P||0,N=N||0,e[0]=y,e[1]=_,e[2]=I,e[3]=P,e[4]=g,e[5]=T,e[6]=A,e[7]=N,e):(e[0]=y,e[1]=_,e[2]=I,e[3]=g,e[4]=T,e[5]=A,e)):p?(P=P||0,N=N||0,e[0]=y,e[1]=_,e[2]=P,e[3]=g,e[4]=T,e[5]=N,e):(e[0]=y,e[1]=_,e[2]=g,e[3]=T,e)}function iS(e,t,i,r,a,p){const y=i?3:2,g=r&&p,_=i&&a;if(!t.length||!t[0].length)return null;let T,I,A,P,[N,D]=t[0],[z,q]=t[0];for(let J=0;J<t.length;J++){const ee=t[J],[X,ie]=ee;if(N=Rl(N,X),D=Rl(D,ie),z=Nl(z,X),q=Nl(q,ie),_&&ee.length>2){const oe=ee[2];T=Rl(T,oe),I=Nl(I,oe)}if(g&&ee.length>y){const oe=ee[y];A=Rl(T,oe),P=Nl(I,oe)}}return a?(T=T||0,I=I||0,p?(A=A||0,P=P||0,e[0]=N,e[1]=D,e[2]=T,e[3]=A,e[4]=z,e[5]=q,e[6]=I,e[7]=P,e):(e[0]=N,e[1]=D,e[2]=T,e[3]=z,e[4]=q,e[5]=I,e)):p?(A=A||0,P=P||0,e[0]=N,e[1]=D,e[2]=A,e[3]=z,e[4]=q,e[5]=P,e):(e[0]=N,e[1]=D,e[2]=z,e[3]=q,e)}function mY(e){return e.xmin!==void 0&&e.ymin!==void 0&&e.xmax!==void 0&&e.ymax!==void 0}function gY(e){return e.points!==void 0}function vY(e){return e.x!==void 0&&e.y!==void 0}function wY(e){return e.paths!==void 0}function bY(e){return e.rings!==void 0}const rS=[];function rR(e,t,i,r){return{xmin:e,ymin:t,xmax:i,ymax:r}}function sR(e,t,i,r,a,p){return{xmin:e,ymin:t,zmin:i,xmax:r,ymax:a,zmax:p}}function nR(e,t,i,r,a,p){return{xmin:e,ymin:t,mmin:i,xmax:r,ymax:a,mmax:p}}function oR(e,t,i,r,a,p,y,g){return{xmin:e,ymin:t,zmin:i,mmin:r,xmax:a,ymax:p,zmax:y,mmax:g}}function sS(e,t=!1,i=!1){return t?i?oR(e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7]):sR(e[0],e[1],e[2],e[3],e[4],e[5]):i?nR(e[0],e[1],e[2],e[3],e[4],e[5]):rR(e[0],e[1],e[2],e[3])}function d3e(e){return e?mY(e)?e:vY(e)?SY(e):bY(e)?aR(e):wY(e)?lR(e):gY(e)?_Y(e):null:null}function _Y(e){const{hasZ:t,hasM:i,points:r}=e;return sS(iS(rS,r,t??!1,i??!1),t,i)}function SY(e){const{x:t,y:i,z:r,m:a}=e,p=a!=null;return r!=null?p?oR(t,i,r,a,t,i,r,a):sR(t,i,r,t,i,r):p?nR(t,i,a,t,i,a):rR(t,i,t,i)}function aR(e){const{hasZ:t,hasM:i,rings:r}=e,a=Wp(rS,r,t??!1,i??!1);return a?sS(a,t,i):null}function lR(e){const{hasZ:t,hasM:i,paths:r}=e,a=Wp(rS,r,t??!1,i??!1);return a?sS(a,t,i):null}var Sm;function FT(e){return!Array.isArray(e[0])}function xY(e){var t;return typeof((t=e[0])==null?void 0:t[0])=="number"}function TY(e){var p,y;if(!e)return;let{rings:t,hasM:i,hasZ:r,spatialReference:a}=e;switch(t??(t=[]),xY(t)&&(t=[t]),(y=(p=t[0])==null?void 0:p[0])==null?void 0:y.length){case 4:r??(r=!0),i??(i=!0);break;case 3:r??(r=i!==!0),i??(i=!r);break;default:r??(r=!1),i??(i=!1)}return a??(a=qe.WGS84),{...e,hasM:i,hasZ:r,rings:t,spatialReference:a}}let js=Sm=class extends Ia{static fromExtent(e){const t=e.clone().normalize(),{spatialReference:i}=e;let r=!1,a=!1;for(const y of t)y.hasZ&&(r=!0),y.hasM&&(a=!0);const p={rings:t.map(y=>{const g=[[y.xmin,y.ymin],[y.xmin,y.ymax],[y.xmax,y.ymax],[y.xmax,y.ymin],[y.xmin,y.ymin]];if(r&&y.hasZ){const _=y.zmin+.5*(y.zmax-y.zmin);for(let T=0;T<g.length;T++)g[T].push(_)}if(a&&y.hasM){const _=y.mmin+.5*(y.mmax-y.mmin);for(let T=0;T<g.length;T++)g[T].push(_)}return g}),spatialReference:i};return r&&(p.hasZ=!0),a&&(p.hasM=!0),new Sm(p)}constructor(e){super(TY(e)),this.curveRings=void 0,this.rings=[],this.type="polygon"}get cache(){return this.commitProperty("curveRings"),this.commitProperty("hasM"),this.commitProperty("hasZ"),this.commitProperty("rings"),this.commitProperty("spatialReference"),{}}get centroid(){const e=iY(this);if(!e||isNaN(e[0])||isNaN(e[1])||this.hasZ&&isNaN(e[2]))return null;const t=new Be;return t.x=e[0],t.y=e[1],t.spatialReference=this.spatialReference,this.hasZ&&(t.z=e[2]),t}writeCurveRings(e,t){t.curveRings=te(e)}get extent(){const e=aR(this),{spatialReference:t}=this;return e?new Ct({...e,spatialReference:t}):null}get isSelfIntersecting(){return Hq(this.rings)}writeRings(e,t){t.rings=te(this.rings)}addRing(e){if(!e)return;const t=this.rings,i=t.length;if(FT(e)){const r=[];for(let a=0,p=e.length;a<p;a++)r[a]=e[a].toArray();t[i]=r}else t[i]=e.slice();return this.notifyChange("rings"),this}clone(){const e=new Sm;return e.spatialReference=this.spatialReference,e.rings=te(this.rings),e.curveRings=te(this.curveRings),e.hasZ=this.hasZ,e.hasM=this.hasM,e}equals(e){if(this===e)return!0;if(e==null)return!1;const t=this.spatialReference,i=e.spatialReference;if(t!=null!=(i!=null)||t!=null&&i!=null&&!t.equals(i)||this.rings.length!==e.rings.length)return!1;const r=([a,p,y,g],[_,T,I,A])=>a===_&&p===T&&(y==null&&I==null||y===I)&&(g==null&&A==null||g===A);for(let a=0;a<this.rings.length;a++){const p=this.rings[a],y=e.rings[a];if(!Vv(p,y,r))return!1}return!0}contains(e){if(!e)return!1;const t=n2(e,this.spatialReference);return C6(this,t??e)}isClockwise(e){const t=FT(e)?e.map(i=>this.hasZ?this.hasM?[i.x,i.y,i.z,i.m]:[i.x,i.y,i.z]:[i.x,i.y]):e;return Hk(t)}getPoint(e,t){if(!this._validateInputs(e,t))return null;const i=this.rings[e][t],r=this.hasZ,a=this.hasM;return r&&!a?new Be(i[0],i[1],i[2],void 0,this.spatialReference):a&&!r?new Be(i[0],i[1],void 0,i[2],this.spatialReference):r&&a?new Be(i[0],i[1],i[2],i[3],this.spatialReference):new Be(i[0],i[1],this.spatialReference)}insertPoint(e,t,i){return this._validateInputs(e,t,!0)?(Hp(this,i),Array.isArray(i)||(i=i.toArray()),this.rings[e].splice(t,0,i),this.notifyChange("rings"),this):this}removePoint(e,t){if(!this._validateInputs(e,t))return null;const i=new Be(this.rings[e].splice(t,1)[0],this.spatialReference);return this.notifyChange("rings"),i}removeRing(e){if(!this._validateInputs(e,null))return null;const t=this.rings.splice(e,1)[0],i=this.spatialReference,r=t.map(a=>new Be(a,i));return this.notifyChange("rings"),r}setPoint(e,t,i){return this._validateInputs(e,t)?(Hp(this,i),Array.isArray(i)||(i=i.toArray()),this.rings[e][t]=i,this.notifyChange("rings"),this):this}_validateInputs(e,t,i=!1){if(e==null||e<0||e>=this.rings.length)return!1;if(t!=null){const r=this.rings[e];if(i&&(t<0||t>r.length)||!i&&(t<0||t>=r.length))return!1}return!0}toJSON(e){return this.write({},e)}};v([S({readOnly:!0})],js.prototype,"cache",null),v([S({readOnly:!0})],js.prototype,"centroid",null),v([S({json:{write:!0,origins:{"portal-item":{write:!1},"web-map":{write:!1},"web-scene":{write:!1}}}})],js.prototype,"curveRings",void 0),v([be("curveRings")],js.prototype,"writeCurveRings",null),v([S({readOnly:!0})],js.prototype,"extent",null),v([S({readOnly:!0})],js.prototype,"isSelfIntersecting",null),v([S({type:[[[Number]]],json:{write:{isRequired:!0}}})],js.prototype,"rings",void 0),v([be("rings")],js.prototype,"writeRings",null),js=Sm=v([H("esri.geometry.Polygon")],js);const en=js;js.prototype.toJSON.isDefaultToJSON=!0;var g5;function MY(e){return!Array.isArray(e[0])}function $Y(e){var t;return typeof((t=e[0])==null?void 0:t[0])=="number"}function EY(e){var p,y;if(!e)return;let{paths:t,hasM:i,hasZ:r,spatialReference:a}=e;switch(t??(t=[]),$Y(t)&&(t=[t]),(y=(p=t[0])==null?void 0:p[0])==null?void 0:y.length){case 4:r??(r=!0),i??(i=!0);break;case 3:r??(r=i!==!0),i??(i=!r);break;default:r??(r=!1),i??(i=!1)}return a??(a=qe.WGS84),{...e,hasM:i,hasZ:r,paths:t,spatialReference:a}}let ao=g5=class extends Ia{constructor(e){super(EY(e)),this.curvePaths=void 0,this.paths=[],this.type="polyline"}get cache(){return this.commitProperty("curvePaths"),this.commitProperty("hasM"),this.commitProperty("hasZ"),this.commitProperty("paths"),this.commitProperty("spatialReference"),{}}writeCurvePaths(e,t){t.curvePaths=te(e)}get extent(){const e=lR(this),{spatialReference:t}=this;return e?new Ct({...e,spatialReference:t}):null}writePaths(e,t){t.paths=te(this.paths)}addPath(e){if(!e)return;const t=this.paths,i=t.length;if(MY(e)){const r=[];for(let a=0,p=e.length;a<p;a++)r[a]=e[a].toArray();t[i]=r}else t[i]=e.slice();return this.notifyChange("paths"),this}clone(){const e=new g5;return e.spatialReference=this.spatialReference,e.paths=te(this.paths),e.curvePaths=te(this.curvePaths),e.hasZ=this.hasZ,e.hasM=this.hasM,e}getPoint(e,t){if(!this._validateInputs(e,t))return null;const i=this.paths[e][t],r=this.hasZ,a=this.hasM;return r&&!a?new Be(i[0],i[1],i[2],void 0,this.spatialReference):a&&!r?new Be(i[0],i[1],void 0,i[2],this.spatialReference):r&&a?new Be(i[0],i[1],i[2],i[3],this.spatialReference):new Be(i[0],i[1],this.spatialReference)}insertPoint(e,t,i){return this._validateInputs(e,t,!0)?(Hp(this,i),Array.isArray(i)||(i=i.toArray()),this.paths[e].splice(t,0,i),this.notifyChange("paths"),this):this}removePath(e){if(!this._validateInputs(e,null))return null;const t=this.paths.splice(e,1)[0],i=this.spatialReference,r=t.map(a=>new Be(a,i));return this.notifyChange("paths"),r}removePoint(e,t){if(!this._validateInputs(e,t))return null;const i=new Be(this.paths[e].splice(t,1)[0],this.spatialReference);return this.notifyChange("paths"),i}setPoint(e,t,i){return this._validateInputs(e,t)?(Hp(this,i),Array.isArray(i)||(i=i.toArray()),this.paths[e][t]=i,this.notifyChange("paths"),this):this}_validateInputs(e,t,i=!1){if(e==null||e<0||e>=this.paths.length)return!1;if(t!=null){const r=this.paths[e];if(i&&(t<0||t>r.length)||!i&&(t<0||t>=r.length))return!1}return!0}toJSON(e){return this.write({},e)}};v([S({readOnly:!0})],ao.prototype,"cache",null),v([S({json:{write:!0,origins:{"portal-item":{write:!1},"web-map":{write:!1},"web-scene":{write:!1}}}})],ao.prototype,"curvePaths",void 0),v([be("curvePaths")],ao.prototype,"writeCurvePaths",null),v([S({readOnly:!0})],ao.prototype,"extent",null),v([S({type:[[[Number]]],json:{write:{isRequired:!0}}})],ao.prototype,"paths",void 0),v([be("paths")],ao.prototype,"writePaths",null),ao=g5=v([H("esri.geometry.Polyline")],ao);const Js=ao;ao.prototype.toJSON.isDefaultToJSON=!0;function uR(e){return e.xmin!==void 0&&e.ymin!==void 0&&e.xmax!==void 0&&e.ymax!==void 0}function hR(e){return e.points!==void 0}function cR(e){return e.x!==void 0&&e.y!==void 0}function nS(e){return e.paths!==void 0||e.curvePaths!==void 0}function Mh(e){return e.rings!==void 0||e.curveRings!==void 0}function Dh(e){return e==null?null:e instanceof Ia?e:cR(e)?Be.fromJSON(e):nS(e)?Js.fromJSON(e):Mh(e)?en.fromJSON(e):hR(e)?C1.fromJSON(e):uR(e)?Ct.fromJSON(e):null}function O1(e){return e?cR(e)?"esriGeometryPoint":nS(e)?"esriGeometryPolyline":Mh(e)?"esriGeometryPolygon":uR(e)?"esriGeometryEnvelope":hR(e)?"esriGeometryMultipoint":null:null}const IY={esriGeometryPoint:Be,esriGeometryPolyline:Js,esriGeometryPolygon:en,esriGeometryEnvelope:Ct,esriGeometryMultipoint:C1,esriGeometryMultiPatch:en};function AY(e){return e&&IY[e]||null}const CY=qi()({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon"}),zT=qi()({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryEnvelope:"extent",mesh:"mesh"}),P1={base:Ia,key:"type",typeMap:{extent:Ct,multipoint:C1,point:Be,polyline:Js,polygon:en}};var v5;let Ka=v5=class extends he{constructor(e){super(e),this.rotation=0,this.scale=0,this.targetGeometry=null,this.camera=null}castRotation(e){return(e%=360)<0&&(e+=360),e}clone(){return new v5({rotation:this.rotation,scale:this.scale,targetGeometry:this.targetGeometry!=null?this.targetGeometry.clone():null,camera:this.camera!=null?this.camera.clone():null})}};v([S({type:Number,json:{write:!0,origins:{"web-map":{default:0,write:!0},"web-scene":{write:{overridePolicy:Hw}}}}})],Ka.prototype,"rotation",void 0),v([ct("rotation")],Ka.prototype,"castRotation",null),v([S({type:Number,json:{write:!0,origins:{"web-map":{default:0,write:!0},"web-scene":{write:{overridePolicy:Hw}}}}})],Ka.prototype,"scale",void 0),v([S({types:P1,json:{read:Dh,write:!0,origins:{"web-scene":{read:Dh,write:{overridePolicy:Hw}}}}})],Ka.prototype,"targetGeometry",void 0),v([S({type:WK,json:{write:!0,origins:{"web-scene":{write:{isRequired:!0}}}}})],Ka.prototype,"camera",void 0),Ka=v5=v([H("esri.Viewpoint")],Ka);const Kr=Ka;function Hw(){return{enabled:!this.camera}}let uv=class{constructor(t=i=>i.values().next().value){this._peeker=t,this._observable=new T1,this._items=new Set}get length(){return ze(this._observable),this._items.size}clear(){this.length!==0&&(this._items.clear(),this._observable.notify())}last(){if(this.length===0)return;let t;for(t of this._items);return t}peek(){if(this.length!==0)return this._peeker(this._items)}push(t){this.contains(t)||(this._items.add(t),this._observable.notify())}contains(t){return ze(this._observable),this._items.has(t)}pop(){if(this.length===0)return;const t=this.peek();return this._items.delete(t),this._observable.notify(),t}popLast(){if(this.length===0)return;const t=this.last();return this._items.delete(t),this._observable.notify(),t}remove(t){this.contains(t)&&(this._items.delete(t),this._observable.notify())}filter(t){const i=this.length;return this._items.forEach(r=>{t(r)||this._items.delete(r)}),i!==this._items.size&&this._observable.notify(),this}*[Symbol.iterator](){ze(this._observable),yield*this._items}};const pR=new FinalizationRegistry(e=>{e.close()});function OY(e,t){pR.register(e,t,t)}function PY(e){pR.unregister(e)}function dR(e,t){return new Proxy({},{get:(i,r,a)=>(...p)=>{let y,g;const _=p[p.length-1];return kY(_)&&(y=_.signal,g=_.transferList,p.pop()),e.apply(t?`${t}.${r.toString()}`:r.toString(),p,{transferList:g,signal:y})}})}function kY(e){return typeof e=="object"&&!Array.isArray(e)&&e!=null&&("signal"in e||"transferList"in e||Object.keys(e).length===0)}const RY={statsWorker:()=>fe(()=>import("./statsWorker-D9ZDnM3g.js"),__vite__mapDeps([16,17,18,19,20,21])),geometryEngineWorker:()=>fe(()=>import("./geometryEngineWorker-DmHSjfnn.js"),__vite__mapDeps([22,23,24])),arcadeGeometryOperatorsWorker:()=>fe(()=>import("./operatorsWorker-BKvG4C16.js"),[]),CSVSourceWorker:()=>fe(()=>import("./CSVSourceWorker-BKDs2qz7.js"),__vite__mapDeps([25,26,24,27,7,28,29,30,31,32,33,34,35,36,37,18,17,19,20,21,38,39,40,41,42,43,44,45])),EdgeProcessingWorker:()=>fe(()=>import("./EdgeProcessingWorker-GpB3W9Rm.js"),__vite__mapDeps([46,47,48,49,50,51,52,53,54,55,56,57])),ElevationSamplerWorker:()=>fe(()=>import("./ElevationSamplerWorker-D5-h3rGm.js"),__vite__mapDeps([58,42,59,60,61,62,63,64,65,66,67,49,68])),FeatureServiceSnappingSourceWorker:()=>fe(()=>import("./FeatureServiceSnappingSourceWorker-YdR-WnsE.js"),__vite__mapDeps([69,28,29,24,30,31,27,7,32,33,34,35,36,37,18,17,19,20,21,38,39,40,41,42,43,70,71,72,73,6])),GeoJSONSourceWorker:()=>fe(()=>import("./GeoJSONSourceWorker-Czal_HAX.js"),__vite__mapDeps([74,31,27,7,32,28,29,24,30,33,34,35,36,37,18,17,19,20,21,38,39,40,41,42,43,75,26,45,76])),LercWorker:()=>fe(()=>import("./LercWorker-W1qN7NDp.js"),[]),MemorySourceWorker:()=>fe(()=>import("./MemorySourceWorker-BMVfOCcj.js"),__vite__mapDeps([77,31,27,7,32,78,28,29,24,30,33,34,35,36,37,18,17,19,20,21,38,39,40,41,42,43,45,76,26])),PBFDecoderWorker:()=>fe(()=>import("./PBFDecoderWorker-CidAeNob.js"),__vite__mapDeps([79,80,7,31,27,32,71,72])),FeaturePipelineWorker:()=>fe(()=>import("./FeaturePipelineWorker-Dt4Os2-0.js"),__vite__mapDeps([81,82,83,56,84,85,27,7,86,87,88,89,29,24,36,31,32,35,18,90,91,92,93,94,95,96,97,98,43,30,33,34,37,17,19,20,21,38,39,99,100,101,102,73,71,72,103,75,26,45,76,104,105,106])),PointCloudWorker:()=>fe(()=>import("./PointCloudWorker-BDfGofSW.js"),__vite__mapDeps([107,108,61,109,110,111,112,54,113,62,63,64,114])),RasterWorker:()=>fe(()=>import("./RasterWorker-BKJlp1mq.js"),__vite__mapDeps([115,116,117,118,119,120,121])),SceneLayerSnappingSourceWorker:()=>fe(()=>import("./SceneLayerSnappingSourceWorker-DzTlme-M.js"),__vite__mapDeps([122,123,124,61,114,62,109,125,48,49,50,51,52,53,54,55,56,57])),SceneLayerWorker:()=>fe(()=>import("./SceneLayerWorker-DcUSzAFh.js"),__vite__mapDeps([126,59,67,127,65,124,61,114,62,109,128,112,54,129,88,130,131,132,133,113,108,63,64])),WFSSourceWorker:()=>fe(()=>import("./WFSSourceWorker-tRE7YnXu.js"),__vite__mapDeps([134,31,27,7,32,28,29,24,30,33,34,35,36,37,18,17,19,20,21,38,39,40,41,42,43,75,26,76,135,136])),WorkerTileHandler:()=>fe(()=>import("./WorkerTileHandler-Cs6abKUF.js"),__vite__mapDeps([137,138,86,89,139,140,72,7,94,141,142,56,118,96,85])),Lyr3DWorker:()=>fe(()=>import("./Lyr3DWorker-8fKVw3JL.js"),[]),Feature3DPipelineWorker:()=>fe(()=>import("./Feature3DPipelineWorker-Cia2CBz5.js"),__vite__mapDeps([143,30,31,27,7,32,33,34,35,36,29,24,37,18,17,19,20,21,38,39,42,73,71,72,53,144,145,146,147,132,62,133,131,61,54,148,124,114,109,123,113,108,63,64,149,150,48,49,50,151,55,56,152,125,153,88,154,155,66,59,127,65,156,110,157,158,159,130,160])),TextureCompressionWorker:()=>fe(()=>import("./TextureCompressionWorker-C5yZInYd.js"),__vite__mapDeps([161,150]))},fR="worker:port-closed";var Ui;(function(e){e[e.HANDSHAKE=0]="HANDSHAKE",e[e.OPEN=1]="OPEN",e[e.OPENED=2]="OPENED",e[e.RESPONSE=3]="RESPONSE",e[e.INVOKE=4]="INVOKE",e[e.ABORT=5]="ABORT",e[e.CLOSE=6]="CLOSE",e[e.OPEN_PORT=7]="OPEN_PORT",e[e.ON=8]="ON"})(Ui||(Ui={}));let NY=0;function yR(){return NY++}function LY(e){return e&&typeof e=="object"&&("result"in e||"transferList"in e)}function K0(e){return e?typeof e=="string"?JSON.stringify({name:"message",message:e}):e.toJSON?JSON.stringify(e):JSON.stringify({name:e.name,message:e.message,details:e.details||{stack:e.stack}}):null}function oS(e,t,i,r){if(t.type===Ui.OPEN_PORT)return void e.postMessage(t,[t.port]);if(t.type!==Ui.INVOKE&&t.type!==Ui.RESPONSE)return void e.postMessage(t);let a;if(LY(i)?(a=UT(i.transferList),t.data=i.result):(a=UT(r),t.data=i),a){if(ne("ff")){for(const p of a)if("byteLength"in p&&p.byteLength>267386880){const y="Worker call with large ArrayBuffer would crash Firefox";switch(t.type){case Ui.INVOKE:throw y;case Ui.RESPONSE:return void oS(e,{type:Ui.RESPONSE,jobId:t.jobId,error:K0(y)})}}}e.postMessage(t,a)}else e.postMessage(t)}function Y0(e){if(!e)return null;const t=e.data;return t?typeof t=="string"?JSON.parse(t):t:null}function UT(e){if(!(e!=null&&e.length))return null;if(ne("esri-workers-arraybuffer-transfer"))return e;const t=e.filter(i=>!DY(i));return t.length?t:null}function DY(e){var t;return e instanceof ArrayBuffer||((t=e==null?void 0:e.constructor)==null?void 0:t.name)==="ArrayBuffer"}async function y3e(e){try{return await e}catch(t){const i=(t==null?void 0:t.name)===fR;if(!(Si(t)||i))throw t;return}}const{CLOSE:VT,ABORT:GT,INVOKE:BT,RESPONSE:Nd,OPEN_PORT:qT,ON:jY}=Ui,FY=2;let zY=class{constructor(t){this._invoke=t,this._timer=null,this._cancelledJobIds=new Set,this._invokeMessages=[],this._timer=null,this._process=this._process.bind(this)}push(t){t.type===Ui.ABORT?this._cancelledJobIds.add(t.jobId):(this._invokeMessages.push(t),this._timer===null&&(this._timer=setTimeout(this._process,0)))}clear(){this._invokeMessages.length=0,this._cancelledJobIds.clear(),this._timer=null}_process(){this._timer=null;for(const t of this._invokeMessages)this._cancelledJobIds.has(t.jobId)||this._invoke(t);this._cancelledJobIds.clear(),this._invokeMessages.length=0}},Yl=class Sc{static connect(t,i){const r=new MessageChannel;let a;a=typeof t=="function"?new t:"default"in t&&typeof t.default=="function"?new t.default:t;const p=new Sc(r.port1,{channel:r,client:a,schedule:i});return typeof a=="object"&&"remoteClient"in a&&(a.remoteClient=p),Sc.clients.set(p,a),r.port2}static loadWorker(t){const i=RY[t];return i?i():Promise.resolve(null)}constructor(t,i,r){this._port=t,this._jobQueue=r,this._outJobs=new Map,this._inJobs=new Map,this._invokeQueue=new zY(a=>this._onInvokeMessage(a)),this._client=i.client,this._onMessage=this._onMessage.bind(this),this._channel=i.channel,this._schedule=i.schedule,this._port.addEventListener("message",this._onMessage),this._port.start()}close(){this._post({type:VT}),this._close()}isBusy(){return this._outJobs.size>0}invoke(t,i,r){return this.apply(t,[i],r)}apply(t,i,r){const a=r==null?void 0:r.signal,p=r==null?void 0:r.transferList;if(!this._port)return Promise.reject(new Y(fR,`Cannot call invoke('${t}'), port is closed`,{methodName:t,data:i}));const y=yR();return new Promise((g,_)=>{if(bs(a))return this._processWork(),void _(Lt());const T=Zs(a,()=>{const A=this._outJobs.get(y);A&&(this._outJobs.delete(y),this._processWork(),Wt(A.abortHandle),this._post({type:GT,jobId:y}),_(Lt()))}),I={resolve:g,reject:_,abortHandle:T,debugInfo:t};this._outJobs.set(y,I),this._post({type:BT,jobId:y,methodName:t,abortable:a!=null},i,p)})}createInvokeProxy(t){return dR(this,t)}on(t,i){const r=new MessageChannel;function a(p){i(p.data)}return this._port.postMessage({type:Ui.ON,eventType:t,port:r.port2},[r.port2]),r.port1.addEventListener("message",a),r.port1.start(),yt(()=>{r.port1.postMessage({type:Ui.CLOSE}),r.port1.close(),r.port1.removeEventListener("message",a)})}jobAdded(){this._processWork()}openPort(){const t=new MessageChannel;return this._post({type:qT,port:t.port2}),t.port1}_processWork(){var y;if(this._outJobs.size>=FY)return;const t=(y=this._jobQueue)==null?void 0:y.pop();if(!t)return;const{methodName:i,data:r,invokeOptions:a,resolver:p}=t;this.apply(i,r,a).then(g=>p.resolve(g)).catch(g=>p.reject(g))}_close(){this._channel&&(this._channel=void 0),this._port.removeEventListener("message",this._onMessage),this._port.close(),this._outJobs.forEach(t=>{Wt(t.abortHandle),t.reject(Lt(`Worker closing, aborting job calling '${t.debugInfo}'`))}),this._inJobs.clear(),this._outJobs.clear(),this._invokeQueue.clear(),this._port=null,this._client=null,this._schedule=null}_onMessage(t){this._schedule!=null?this._schedule(()=>this._processMessage(t,!0)):this._processMessage(t,!1)}_processMessage(t,i){const r=Y0(t);if(r)switch(r.type){case Nd:this._onResponseMessage(r);break;case BT:i?this._onInvokeMessage(r):this._invokeQueue.push(r);break;case GT:this._onAbortMessage(r);break;case VT:this._onCloseMessage();break;case qT:this._onOpenPortMessage(r);break;case jY:this._onOnMessage(r)}}_onAbortMessage(t){const i=this._inJobs,r=t.jobId,a=i.get(r);this._invokeQueue.push(t),a&&(a.controller&&a.controller.abort(),i.delete(r))}_onCloseMessage(){const t=this._client;this._close(),t&&"destroy"in t&&Sc.clients.get(this)===t&&t.destroy(),Sc.clients.delete(this),t!=null&&t.remoteClient&&(t.remoteClient=null)}_onInvokeMessage(t){const{methodName:i,jobId:r,data:a=[],abortable:p}=t,y=p?new AbortController:null,g=this._inJobs;let _,T=this._client,I=T[i];try{if(!I&&i&&i.includes(".")){const A=i.split(".");for(let P=0;P<A.length-1;P++)T=T[A[P]],I=T[A[P+1]]}if(typeof I!="function")throw new TypeError(`${i} is not a function`);a.push({client:this,signal:y?y.signal:null}),_=I.apply(T,a)}catch(A){return void this._post({type:Nd,jobId:r,error:K0(A)})}$o(_)?(g.set(r,{controller:y,promise:_}),_.then(A=>{g.has(r)&&(g.delete(r),this._post({type:Nd,jobId:r},A))},A=>{g.has(r)&&(g.delete(r),Si(A)||this._post({type:Nd,jobId:r,error:K0(A||{message:`Error encountered at method ${i}`})}))})):this._post({type:Nd,jobId:r},_)}_onOpenPortMessage(t){new Sc(t.port,{client:this._client})}_onOnMessage(t){const{port:i}=t,r=this._client.on(t.eventType,p=>{i.postMessage(p)}),a=v1(t.port,"message",p=>{const y=Y0(p);(y==null?void 0:y.type)===Ui.CLOSE&&(a.remove(),r.remove(),i.close())})}_onResponseMessage(t){const{jobId:i,error:r,data:a}=t,p=this._outJobs;if(!p.has(i))return;const y=p.get(i);p.delete(i),this._processWork(),Wt(y.abortHandle),r?y.reject(Y.fromJSON(JSON.parse(r))):y.resolve(a)}_post(t,i,r){return oS(this._port,t,i,r)}};Yl.kernelInfo={buildDate:sO,fullVersion:y6,revision:nO},Yl.clients=new Map;let UY=class{constructor(){this._inUseClients=new Array,this._clients=new Array,this._clientPromises=new Array,this._ongoingJobsQueue=new uv}destroy(){this.close()}get closed(){var t;return!((t=this._clients)!=null&&t.length)}open(t,i){return new Promise((r,a)=>{let p=!0;const y=g=>{At(i.signal),p&&(p=!1,g())};this._clients.length=t.length,this._clientPromises.length=t.length,this._inUseClients.length=t.length;for(let g=0;g<t.length;++g){const _=t[g];$o(_)?this._clientPromises[g]=_.then(T=>(this._clients[g]=new Yl(T,i,this._ongoingJobsQueue),y(r),this._clients[g]),()=>(y(a),null)):(this._clients[g]=new Yl(_,i,this._ongoingJobsQueue),this._clientPromises[g]=Promise.resolve(this._clients[g]),y(r))}})}broadcast(t,i,r){const a=new Array(this._clientPromises.length);for(let p=0;p<this._clientPromises.length;++p){const y=this._clientPromises[p];a[p]=y.then(g=>g==null?void 0:g.invoke(t,i,r))}return a}close(){let t;for(;t=this._ongoingJobsQueue.pop();)t.resolver.reject(Lt(`Worker closing, aborting job calling '${t.methodName}'`));for(const i of this._clientPromises)i.then(r=>r==null?void 0:r.close());this._clients.length=0,this._clientPromises.length=0,this._inUseClients.length=0,PY(this)}invoke(t,i,r){return this.apply(t,[i],r)}apply(t,i,r){const a=_s();this._ongoingJobsQueue.push({methodName:t,data:i,invokeOptions:r,resolver:a});for(let p=0;p<this._clientPromises.length;p++){const y=this._clients[p];y?y.jobAdded():this._clientPromises[p].then(g=>g==null?void 0:g.jobAdded())}return a.promise}createInvokeProxy(t){return dR(this,t)}on(t,i){return Promise.all(this._clientPromises).then(()=>y1(this._clients.map(r=>r.on(t,i))))}openPorts(){return new Promise(t=>{const i=new Array(this._clientPromises.length);let r=i.length;for(let a=0;a<this._clientPromises.length;++a)this._clientPromises[a].then(p=>{p&&(i[a]=p.openPort()),--r==0&&t(i)})})}get test(){}};const VY={async request(e,t){var y,g;const i=e.options,r=i.responseType;i.signal=t==null?void 0:t.signal,i.responseType=r==="native"||r==="native-request-init"?"native-request-init":r&&["blob","json","text"].includes(r)&&((y=M3(e.url))!=null&&y.after)?r:"array-buffer";const a=await kt(e.url,i),p={data:a.data,httpStatus:a.httpStatus,ssl:a.ssl};switch((g=a.requestOptions)==null?void 0:g.responseType){case"native-request-init":return delete p.data.signal,p;case"blob":p.data=await p.data.arrayBuffer();break;case"json":p.data=new TextEncoder().encode(JSON.stringify(p.data)).buffer;break;case"text":p.data=new TextEncoder().encode(p.data).buffer}return{result:p,transferList:[p.data]}}},HT={};function GY(e){var i;const t={async:e.async,isDebug:e.isDebug,locale:e.locale,baseUrl:e.baseUrl,has:{...e.has},map:{...e.map},packages:((i=e.packages)==null?void 0:i.slice())||[],paths:{...HT.paths,...e.paths}};return e.hasOwnProperty("async")||(t.async=!0),e.hasOwnProperty("isDebug")||(t.isDebug=!1),e.baseUrl||(t.baseUrl=HT.baseUrl),t}let BY=class{constructor(){const t=document.createDocumentFragment();["addEventListener","dispatchEvent","removeEventListener"].forEach(i=>{this[i]=(...r)=>t[i](...r)})}},xm=class{constructor(){this._dispatcher=new BY,this._workerPostMessage({type:Ui.HANDSHAKE})}terminate(){}get onmessage(){return this._onmessageHandler}set onmessage(t){this._onmessageHandler&&this.removeEventListener("message",this._onmessageHandler),this._onmessageHandler=t,t&&this.addEventListener("message",t)}get onmessageerror(){return this._onmessageerrorHandler}set onmessageerror(t){this._onmessageerrorHandler&&this.removeEventListener("messageerror",this._onmessageerrorHandler),this._onmessageerrorHandler=t,t&&this.addEventListener("messageerror",t)}get onerror(){return this._onerrorHandler}set onerror(t){this._onerrorHandler&&this.removeEventListener("error",this._onerrorHandler),this._onerrorHandler=t,t&&this.addEventListener("error",t)}postMessage(t){Og(()=>{this._workerMessageHandler(new MessageEvent("message",{data:t}))})}dispatchEvent(t){return this._dispatcher.dispatchEvent(t)}addEventListener(t,i,r){this._dispatcher.addEventListener(t,i,r)}removeEventListener(t,i,r){this._dispatcher.removeEventListener(t,i,r)}_workerPostMessage(t){Og(()=>{this.dispatchEvent(new MessageEvent("message",{data:t}))})}async _workerMessageHandler(t){const i=Y0(t);if(i&&i.type===Ui.OPEN){const{modulePath:r,jobId:a}=i;let p=await Yl.loadWorker(r);p||(p=await import(r));const y=Yl.connect(p);this._workerPostMessage({type:Ui.OPENED,jobId:a,data:y})}}};const w5=()=>ye.getLogger("esri.core.workers.workerFactory"),{HANDSHAKE:qY}=Ui,HY='let globalId=0;const outgoing=new Map,configuration={CONFIGURATION};self.esriConfig=configuration.esriConfig;const workerPath=self.esriConfig.workers.workerPath,HANDSHAKE=0,OPEN=1,OPENED=2,RESPONSE=3,INVOKE=4,ABORT=5;function createAbortError(){const e=new Error("Aborted");return e.name="AbortError",e}function receiveMessage(e){return e&&e.data?"string"==typeof e.data?JSON.parse(e.data):e.data:null}function invokeStaticMessage(e,o,r){const t=r&&r.signal,n=globalId++;let s=null;return new Promise(((r,i)=>{if(t){if(t.aborted)return i(createAbortError());s=()=>{outgoing.get(n)&&(outgoing.delete(n),self.postMessage({type:5,jobId:n}),i(createAbortError()))},t.addEventListener("abort",s)}outgoing.set(n,{resolve:r,reject:i}),self.postMessage({type:4,jobId:n,methodName:e,abortable:null!=t,data:o})})).finally((()=>{t&&t.removeEventListener("abort",s)}))}let workerRevisionChecked=!1;function checkWorkerRevision(e){if(!workerRevisionChecked&&e.kernelInfo){workerRevisionChecked=!0;const{revision:o,fullVersion:r}=configuration.kernelInfo,{revision:t,fullVersion:n,version:s}=e.kernelInfo;esriConfig.assetsPath!==esriConfig.defaultAssetsPath&&o!==t&&console.warn(`Version mismatch detected between ArcGIS Maps SDK for JavaScript modules and assets. For more information visit https://bit.ly/3QnsuSo.\nModules version: ${r}\nAssets version: ${n??s}\nAssets path: ${esriConfig.assetsPath}`)}}function messageHandler(e){const o=receiveMessage(e);if(!o)return;const r=o.jobId;switch(o.type){case 1:let n;function t(e){const o=n.connect(e);self.postMessage({type:2,jobId:r,data:o},[o])}"function"==typeof define&&define.amd?require([workerPath],(e=>{n=e.default||e,checkWorkerRevision(n),n.loadWorker(o.modulePath).then((e=>e||new Promise((e=>{require([o.modulePath],e)})))).then(t)})):"System"in self&&"function"==typeof System.import?System.import(workerPath).then((e=>(n=e.default,checkWorkerRevision(n),n.loadWorker(o.modulePath)))).then((e=>e||System.import(o.modulePath))).then(t):esriConfig.workers.useDynamicImport?import(workerPath).then((e=>{n=e.default||e,checkWorkerRevision(n),n.loadWorker(o.modulePath).then((e=>e||import(o.modulePath))).then(t)})):(self.RemoteClient||importScripts(workerPath),n=self.RemoteClient.default||self.RemoteClient,checkWorkerRevision(n),n.loadWorker(o.modulePath).then(t));break;case 3:if(outgoing.has(r)){const s=outgoing.get(r);outgoing.delete(r),o.error?s.reject(JSON.parse(o.error)):s.resolve(o.data)}}}self.dojoConfig=configuration.loaderConfig,esriConfig.workers.loaderUrl&&(self.importScripts(esriConfig.workers.loaderUrl),"function"==typeof require&&"function"==typeof require.config&&require.config(configuration.loaderConfig)),self.addEventListener("message",messageHandler),self.postMessage({type:0});';let gy,vy;const WT="Failed to create Worker. Fallback to execute module in main thread";async function WY(){if(!ne("esri-workers"))return JT(new xm);if(!gy&&!vy)try{const t=HY.split("{CONFIGURATION}").join(JY());gy=URL.createObjectURL(new Blob([t],{type:"text/javascript"}))}catch(t){vy=t||{}}let e;if(gy)try{e=new Worker(gy,{name:"esri-worker-"+ZY++})}catch{w5().warn(WT,vy),e=new xm}else w5().warn(WT,vy),e=new xm;return JT(e)}async function JT(e){return new Promise(t=>{function i(a){const p=Y0(a);p&&p.type===qY&&(e.removeEventListener("message",i),e.removeEventListener("error",r),t(e))}function r(a){a.preventDefault(),e.removeEventListener("message",i),e.removeEventListener("error",r),w5().warn("Failed to create Worker. Fallback to execute module in main thread",a),(e=new xm).addEventListener("message",i),e.addEventListener("error",r)}e.addEventListener("message",i),e.addEventListener("error",r)})}function JY(){let e;if(dt.default!=null){const a={...dt};delete a.default,e=JSON.parse(JSON.stringify(a))}else e=JSON.parse(JSON.stringify(dt));e.assetsPath=Gs(e.assetsPath),e.defaultAssetsPath=e.defaultAssetsPath?Gs(e.defaultAssetsPath):void 0,e.request.interceptors=[],e.log.interceptors=[],e.locale=Jr(),e.has={"esri-csp-restrictions":ne("esri-csp-restrictions"),"esri-2d-debug":!1,"esri-2d-update-debug":ne("esri-2d-update-debug"),"esri-2d-log-updating":ne("esri-2d-log-updating"),"featurelayer-pbf":ne("featurelayer-pbf"),"featurelayer-fast-triangulation-enabled":ne("featurelayer-fast-triangulation-enabled"),"featurelayer-simplify-thresholds":ne("featurelayer-simplify-thresholds"),"featurelayer-simplify-payload-size-factors":ne("featurelayer-simplify-payload-size-factors"),"featurelayer-simplify-mobile-factor":ne("featurelayer-simplify-mobile-factor"),"featurelayer-query-max-depth":ne("featurelayer-query-max-depth"),"featurelayer-query-pausing-enabled":ne("featurelayer-query-pausing-enabled"),"featurelayer-snapshot-enabled":ne("featurelayer-snapshot-enabled"),"esri-atomics":ne("esri-atomics"),"esri-shared-array-buffer":ne("esri-shared-array-buffer"),"esri-tiles-debug":ne("esri-tiles-debug"),"esri-workers-arraybuffer-transfer":ne("esri-workers-arraybuffer-transfer"),"feature-polyline-generalization-factor":ne("feature-polyline-generalization-factor"),"host-webworker":1},e.workers.loaderUrl&&(e.workers.loaderUrl=Gs(e.workers.loaderUrl)),e.workers.workerPath?e.workers.workerPath=Gs(e.workers.workerPath):e.workers.workerPath=Gs(ti("esri/core/workers/RemoteClient.js")),e.workers.useDynamicImport=!1;const t=dt.workers.loaderConfig,i=GY({baseUrl:t==null?void 0:t.baseUrl,locale:Jr(),has:{"csp-restrictions":1,"dojo-test-sniff":0,"host-webworker":1,...t==null?void 0:t.has},map:{...t==null?void 0:t.map},paths:{...t==null?void 0:t.paths},packages:(t==null?void 0:t.packages)||[]});return JSON.stringify({esriConfig:e,loaderConfig:i,kernelInfo:{buildDate:sO,fullVersion:y6,revision:nO}})}let ZY=0;const{ABORT:ZT,INVOKE:KY,OPEN:YY,OPENED:XY,RESPONSE:Ld}=Ui;let QY=class mR{static async create(t){const i=await WY();return new mR(i,t)}constructor(t,i){this._outJobs=new Map,this._inJobs=new Map,this.worker=t,this.id=i,t.addEventListener("message",this._onMessage.bind(this)),t.addEventListener("error",r=>{r.preventDefault(),ye.getLogger("esri.core.workers.WorkerOwner").error(r)})}terminate(){this.worker.terminate()}async open(t,i={}){const{signal:r}=i,a=yR();return new Promise((p,y)=>{const g={resolve:p,reject:y,abortHandle:X4(r,()=>{this._outJobs.delete(a),this._post({type:ZT,jobId:a})})};this._outJobs.set(a,g),this._post({type:YY,jobId:a,modulePath:t})})}_onMessage(t){const i=Y0(t);if(i)switch(i.type){case XY:this._onOpenedMessage(i);break;case Ld:this._onResponseMessage(i);break;case ZT:this._onAbortMessage(i);break;case KY:this._onInvokeMessage(i)}}_onAbortMessage(t){const i=this._inJobs,r=t.jobId,a=i.get(r);a&&(a.controller&&a.controller.abort(),i.delete(r))}_onInvokeMessage(t){const{methodName:i,jobId:r,data:a,abortable:p}=t,y=p?new AbortController:null,g=this._inJobs,_=VY[i];let T;try{if(typeof _!="function")throw new TypeError(`${i} is not a function`);T=_.call(null,a,{signal:y?y.signal:null})}catch(I){return void this._post({type:Ld,jobId:r,error:K0(I)})}$o(T)?(g.set(r,{controller:y,promise:T}),T.then(I=>{g.has(r)&&(g.delete(r),this._post({type:Ld,jobId:r},I))},I=>{g.has(r)&&(g.delete(r),I||(I={message:"Error encountered at method"+i}),Si(I)||this._post({type:Ld,jobId:r,error:K0(I||{message:`Error encountered at method ${i}`})}))})):this._post({type:Ld,jobId:r},T)}_onOpenedMessage(t){const{jobId:i,data:r}=t,a=this._outJobs.get(i);a&&(this._outJobs.delete(i),Wt(a.abortHandle),a.resolve(r))}_onResponseMessage(t){const{jobId:i,error:r,data:a}=t,p=this._outJobs.get(i);p&&(this._outJobs.delete(i),Wt(p.abortHandle),r?p.reject(Y.fromJSON(JSON.parse(r))):p.resolve(a))}_post(t,i,r){return oS(this.worker,t,i,r)}};const KT=ne("host-browser")?Math.min(navigator.hardwareConcurrency-1,ne("workers-pool-size")??8):0;let vh=ne("esri-mobile")?Math.min(KT,3):KT;vh||(vh=ne("safari")&&ne("mac")?7:2);let YT=0;const Tm=[];function eX(){gR()}async function wy(e,t){const i=new UY,{registryTarget:r,...a}=t;return await i.open(e,a),r&&OY(r,i),i}async function tX(e,t={}){if(typeof e!="string")throw new Y("workers:undefined-module","modulePath is missing");let i=t.strategy||"distributed";if(ne("host-webworker")&&!ne("esri-workers")&&(i="local"),i==="local"){let r=await Yl.loadWorker(e);r||(r=await import(e)),At(t.signal);const a=t.client||r;return wy([Yl.connect(r,t.schedule)],{...t,client:a})}if(await gR(),At(t.signal),i==="dedicated"){const r=YT++%vh;return wy([await Tm[r].open(e,t)],t)}if(t.maxNumWorkers&&t.maxNumWorkers>0){const r=Math.min(t.maxNumWorkers,vh);if(r<vh){const a=new Array(r);for(let p=0;p<r;++p){const y=YT++%vh;a[p]=Tm[y].open(e,t)}return wy(a,t)}}return wy(Tm.map(r=>r.open(e,t)),t)}let by=null;async function gR(){if(by)return by;new AbortController;const e=[];for(let t=0;t<vh;t++){const i=QY.create(t).then(r=>(Tm[t]=r,r));e.push(i)}return by=Promise.all(e),by}const b3e=Math.PI/180,_3e=/(?:SPHEROID|ELLIPSOID)\[([^\]]+)]/i,Ga=Xt.radius,ln=Xt.eccentricitySquared,iX={a1:Ga*ln,a2:Ga*ln*Ga*ln,a3:Ga*ln*ln/2,a4:Ga*ln*Ga*ln*2.5,a5:Ga*ln+Ga*ln*ln/2,a6:1-ln},S3e={4267:{a:63782064e-1,f:1/294.9786982},4269:{a:6378137,f:1/298.257222101},4326:{a:Xt.radius,f:Xt.flattening},4490:{a:6378137,f:1/298.257222101},104900:{a:2439700,f:0},104901:{a:6051e3,f:0},104902:{a:6051800,f:0},104903:{a:Wl.radius,f:Wl.flattening},104904:{a:3393400,f:1/192.0430107526882},104905:{a:go.radius,f:go.flattening},104906:{a:6200,f:0},104907:{a:11100,f:0},104908:{a:71492e3,f:.06487439154031222},104909:{a:8200,f:0},104910:{a:83500,f:0},104911:{a:1e4,f:0},104912:{a:2409300,f:0},104913:{a:15e3,f:0},104914:{a:4e4,f:0},104915:{a:1562090,f:0},104916:{a:2632345,f:0},104917:{a:85e3,f:0},104918:{a:1821460,f:0},104919:{a:5e3,f:0},104920:{a:12e3,f:0},104921:{a:3e4,f:3},104922:{a:18e3,f:0},104923:{a:14e3,f:0},104924:{a:49300,f:0},104925:{a:60268e3,f:1/10.2079945799458},104926:{a:16e3,f:0},104927:{a:9500,f:0},104928:{a:56e4,f:0},104929:{a:249400,f:0},104930:{a:59500,f:0},104931:{a:16e3,f:0},104932:{a:133e3,f:0},104933:{a:718e3,f:0},104934:{a:888e3,f:0},104935:{a:1986300,f:0},104936:{a:1e4,f:0},104937:{a:41900,f:0},104938:{a:11e4,f:0},104939:{a:50100,f:0},104940:{a:764e3,f:0},104941:{a:11e3,f:0},104942:{a:529800,f:0},104943:{a:2575e3,f:0},104944:{a:25559e3,f:1/43.61604095563141},104945:{a:578900,f:0},104946:{a:33e3,f:0},104947:{a:21e3,f:0},104948:{a:13e3,f:0},104949:{a:31e3,f:0},104950:{a:27e3,f:0},104951:{a:42e3,f:0},104952:{a:235800,f:0},104953:{a:761400,f:0},104954:{a:15e3,f:0},104955:{a:54e3,f:0},104956:{a:77e3,f:0},104957:{a:27e3,f:0},104958:{a:788900,f:0},104959:{a:584700,f:0},104960:{a:24764e3,f:.01708124697141011},104961:{a:74e3,f:0},104962:{a:79e3,f:0},104963:{a:104e3,f:.14423076923076922},104964:{a:29e3,f:0},104965:{a:17e4,f:0},104966:{a:208e3,f:0},104967:{a:4e4,f:0},104968:{a:1352600,f:0},104969:{a:1195e3,f:0},104970:{a:593e3,f:0},104971:{a:go.radius,f:0},104972:{a:47e4,f:0},104973:{a:255e3,f:0},104974:{a:2439400,f:0}};var se;(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.SPHERICAL_ECEF=1]="SPHERICAL_ECEF",e[e.WGS84=2]="WGS84",e[e.WEB_MERCATOR=3]="WEB_MERCATOR",e[e.WGS84_ECEF=4]="WGS84_ECEF",e[e.CGCS2000=5]="CGCS2000",e[e.SPHERICAL_MARS_PCPF=6]="SPHERICAL_MARS_PCPF",e[e.GCSMARS2000=7]="GCSMARS2000",e[e.SPHERICAL_MOON_PCPF=8]="SPHERICAL_MOON_PCPF",e[e.GCSMOON2000=9]="GCSMOON2000",e[e.LON_LAT=10]="LON_LAT",e[e.PLATE_CARREE=11]="PLATE_CARREE"})(se||(se={}));const rX={[se.WGS84]:{[se.CGCS2000]:Bt,[se.GCSMARS2000]:null,[se.GCSMOON2000]:null,[se.LON_LAT]:Bt,[se.SPHERICAL_ECEF]:b0,[se.SPHERICAL_MARS_PCPF]:null,[se.SPHERICAL_MOON_PCPF]:null,[se.UNKNOWN]:null,[se.WEB_MERCATOR]:Sp,[se.PLATE_CARREE]:xp,[se.WGS84]:Bt,[se.WGS84_ECEF]:$p},[se.CGCS2000]:{[se.CGCS2000]:Bt,[se.GCSMARS2000]:null,[se.GCSMOON2000]:null,[se.LON_LAT]:Bt,[se.SPHERICAL_ECEF]:b0,[se.SPHERICAL_MARS_PCPF]:null,[se.SPHERICAL_MOON_PCPF]:null,[se.UNKNOWN]:null,[se.WEB_MERCATOR]:Sp,[se.PLATE_CARREE]:xp,[se.WGS84]:Bt,[se.WGS84_ECEF]:$p},[se.GCSMARS2000]:{[se.CGCS2000]:null,[se.GCSMARS2000]:Bt,[se.GCSMOON2000]:null,[se.LON_LAT]:Bt,[se.SPHERICAL_ECEF]:null,[se.SPHERICAL_MARS_PCPF]:e8,[se.SPHERICAL_MOON_PCPF]:null,[se.UNKNOWN]:null,[se.WEB_MERCATOR]:null,[se.PLATE_CARREE]:null,[se.WGS84]:null,[se.WGS84_ECEF]:null},[se.GCSMOON2000]:{[se.CGCS2000]:null,[se.GCSMARS2000]:null,[se.GCSMOON2000]:Bt,[se.LON_LAT]:Bt,[se.SPHERICAL_ECEF]:null,[se.SPHERICAL_MARS_PCPF]:null,[se.SPHERICAL_MOON_PCPF]:QT,[se.UNKNOWN]:null,[se.WEB_MERCATOR]:null,[se.PLATE_CARREE]:null,[se.WGS84]:null,[se.WGS84_ECEF]:null},[se.WEB_MERCATOR]:{[se.CGCS2000]:w0,[se.GCSMARS2000]:null,[se.GCSMOON2000]:null,[se.LON_LAT]:w0,[se.SPHERICAL_ECEF]:nX,[se.SPHERICAL_MARS_PCPF]:null,[se.SPHERICAL_MOON_PCPF]:null,[se.UNKNOWN]:null,[se.WEB_MERCATOR]:Bt,[se.PLATE_CARREE]:lX,[se.WGS84]:w0,[se.WGS84_ECEF]:oX},[se.WGS84_ECEF]:{[se.CGCS2000]:Ep,[se.GCSMARS2000]:null,[se.GCSMOON2000]:null,[se.LON_LAT]:Ep,[se.SPHERICAL_ECEF]:gX,[se.SPHERICAL_MARS_PCPF]:null,[se.SPHERICAL_MOON_PCPF]:null,[se.UNKNOWN]:null,[se.WEB_MERCATOR]:vX,[se.PLATE_CARREE]:uX,[se.WGS84]:Ep,[se.WGS84_ECEF]:Bt},[se.SPHERICAL_ECEF]:{[se.CGCS2000]:Mp,[se.GCSMARS2000]:null,[se.GCSMOON2000]:null,[se.LON_LAT]:Mp,[se.SPHERICAL_ECEF]:Bt,[se.SPHERICAL_MARS_PCPF]:null,[se.SPHERICAL_MOON_PCPF]:null,[se.UNKNOWN]:null,[se.WEB_MERCATOR]:fX,[se.PLATE_CARREE]:hX,[se.WGS84]:Mp,[se.WGS84_ECEF]:yX},[se.SPHERICAL_MARS_PCPF]:{[se.CGCS2000]:null,[se.GCSMARS2000]:i8,[se.GCSMOON2000]:null,[se.LON_LAT]:i8,[se.SPHERICAL_ECEF]:null,[se.SPHERICAL_MARS_PCPF]:Bt,[se.SPHERICAL_MOON_PCPF]:null,[se.UNKNOWN]:null,[se.WEB_MERCATOR]:null,[se.PLATE_CARREE]:null,[se.WGS84]:null,[se.WGS84_ECEF]:null},[se.SPHERICAL_MOON_PCPF]:{[se.CGCS2000]:null,[se.GCSMARS2000]:null,[se.GCSMOON2000]:t8,[se.LON_LAT]:t8,[se.SPHERICAL_ECEF]:null,[se.SPHERICAL_MARS_PCPF]:null,[se.SPHERICAL_MOON_PCPF]:Bt,[se.UNKNOWN]:null,[se.WEB_MERCATOR]:null,[se.PLATE_CARREE]:null,[se.WGS84]:null,[se.WGS84_ECEF]:null},[se.UNKNOWN]:{[se.CGCS2000]:null,[se.GCSMARS2000]:null,[se.GCSMOON2000]:null,[se.LON_LAT]:null,[se.SPHERICAL_ECEF]:null,[se.SPHERICAL_MARS_PCPF]:null,[se.SPHERICAL_MOON_PCPF]:null,[se.UNKNOWN]:Bt,[se.WEB_MERCATOR]:null,[se.PLATE_CARREE]:null,[se.WGS84]:null,[se.WGS84_ECEF]:null},[se.LON_LAT]:{[se.CGCS2000]:Bt,[se.GCSMARS2000]:Bt,[se.GCSMOON2000]:Bt,[se.LON_LAT]:Bt,[se.SPHERICAL_ECEF]:b0,[se.SPHERICAL_MARS_PCPF]:e8,[se.SPHERICAL_MOON_PCPF]:QT,[se.UNKNOWN]:null,[se.WEB_MERCATOR]:Sp,[se.PLATE_CARREE]:xp,[se.WGS84]:Bt,[se.WGS84_ECEF]:$p},[se.PLATE_CARREE]:{[se.CGCS2000]:Tp,[se.GCSMARS2000]:null,[se.GCSMOON2000]:null,[se.LON_LAT]:Tp,[se.SPHERICAL_ECEF]:cX,[se.SPHERICAL_MARS_PCPF]:null,[se.SPHERICAL_MOON_PCPF]:null,[se.UNKNOWN]:null,[se.WEB_MERCATOR]:pX,[se.PLATE_CARREE]:Bt,[se.WGS84]:Tp,[se.WGS84_ECEF]:dX}};function vR(e,t){var i;return(i=sX(e,t))==null?void 0:i.projector}function sX(e,t){if(e==null||t==null)return null;if(Po.source.spatialReference===e&&Po.dest.spatialReference===t)return Po;const i=XT(e,Po.source),r=XT(t,Po.dest);return i===se.UNKNOWN&&r===se.UNKNOWN?fi(e,t)?Po.projector=Bt:Po.projector=null:Po.projector=rX[i][r],Po}function XT(e,t){return e?t.spatialReference===e?t.spatialReferenceId:(t.spatialReference=e,"metersPerUnit"in t&&(t.metersPerUnit=Ts(e,1)),Yg(e)?t.spatialReferenceId=se.SPHERICAL_ECEF:Jl(e)?t.spatialReferenceId=se.WGS84:wo(e)?t.spatialReferenceId=se.WEB_MERCATOR:tq(e)?t.spatialReferenceId=se.PLATE_CARREE:e.wkt===nq.wkt?t.spatialReferenceId=se.WGS84_ECEF:e.wkid===Bs.CGCS2000?t.spatialReferenceId=se.CGCS2000:e.wkt===E6.wkt?t.spatialReferenceId=se.SPHERICAL_MARS_PCPF:e.wkt===I6.wkt?t.spatialReferenceId=se.SPHERICAL_MOON_PCPF:T6(e)?t.spatialReferenceId=se.GCSMARS2000:M6(e)?t.spatialReferenceId=se.GCSMOON2000:t.spatialReferenceId=se.UNKNOWN):se.UNKNOWN}function Bt(e,t,i,r){e!==i&&(i[r++]=e[t++],i[r++]=e[t++],i[r]=e[t])}function w0(e,t,i,r){i[r]=Zp*(e[t]/$h),i[r+1]=Zp*(wR-2*Math.atan(Math.exp(-e[t+1]/$h))),i[r+2]=e[t+2]}function nX(e,t,i,r){const a=e[t]/$h,p=wR-2*Math.atan(Math.exp(-e[t+1]/$h)),y=$h+e[t+2],g=Math.cos(p)*y;i[r]=Math.cos(a)*g,i[r+1]=Math.sin(a)*g,i[r+2]=Math.sin(p)*y}function oX(e,t,i,r){w0(e,t,i,r),$p(i,r,i,r)}function aX(e,t,i,r,a){const p=.4999999*Math.PI,y=xs(Jp*e[t+1],-p,p),g=Math.sin(y);i[r++]=Jp*e[t]*a.radius,i[r++]=a.halfSemiMajorAxis*Math.log((1+g)/(1-g)),i[r]=e[t+2]}function Sp(e,t,i,r){aX(e,t,i,r,Xt)}function xp(e,t,i,r){i[r]=e[t]*r8,i[r+1]=e[t+1]*r8,i[r+2]=e[t+2]}function Tp(e,t,i,r){i[r]=e[t]*s8,i[r+1]=e[t+1]*s8,i[r+2]=e[t+2]}function lX(e,t,i,r){w0(e,t,i,r),xp(i,r,i,r)}function uX(e,t,i,r){Ep(e,t,i,r),xp(i,r,i,r)}function hX(e,t,i,r){Mp(e,t,i,r),xp(i,r,i,r)}function cX(e,t,i,r){Tp(e,t,i,r),b0(i,r,i,r)}function pX(e,t,i,r){Tp(e,t,i,r),Sp(i,r,i,r)}function dX(e,t,i,r){Tp(e,t,i,r),$p(i,r,i,r)}function aS(e,t,i,r,a){const p=a+e[t+2],y=Jp*e[t+1],g=Jp*e[t],_=Math.cos(y)*p;i[r]=Math.cos(g)*_,i[r+1]=Math.sin(g)*_,i[r+2]=Math.sin(y)*p}function QT(e,t,i,r){aS(e,t,i,r,Wl.radius)}function e8(e,t,i,r){aS(e,t,i,r,go.radius)}function b0(e,t,i,r){aS(e,t,i,r,Xt.radius)}function lS(e,t,i,r,a){const p=e[t],y=e[t+1],g=e[t+2],_=Math.sqrt(p*p+y*y+g*g),T=JJ(g/(_===0?1:_)),I=Math.atan2(y,p);i[r++]=Zp*I,i[r++]=Zp*T,i[r]=_-a}function t8(e,t,i,r){lS(e,t,i,r,Wl.radius)}function i8(e,t,i,r){lS(e,t,i,r,go.radius)}function Mp(e,t,i,r){lS(e,t,i,r,Xt.radius)}function fX(e,t,i,r){Mp(e,t,i,r),Sp(i,r,i,r)}function yX(e,t,i,r){Mp(e,t,i,r),$p(i,r,i,r)}function mX(e,t,i,r,a){const p=Jp*e[t],y=Jp*e[t+1],g=e[t+2],_=Math.sin(y),T=Math.cos(y),I=a.radius/Math.sqrt(1-a.eccentricitySquared*_*_);i[r++]=(I+g)*T*Math.cos(p),i[r++]=(I+g)*T*Math.sin(p),i[r++]=(I*(1-a.eccentricitySquared)+g)*_}function $p(e,t,i,r){mX(e,t,i,r,Xt)}function Ep(e,t,i,r){const a=iX,p=e[t],y=e[t+1],g=e[t+2];let _,T,I,A,P,N,D,z,q,J,ee,X,ie,oe,ue,ge,Se,Ee,Ie,ke,je;_=Math.abs(g),T=p*p+y*y,I=Math.sqrt(T),A=T+g*g,P=Math.sqrt(A),ke=Math.atan2(y,p),N=g*g/A,D=T/A,oe=a.a2/P,ue=a.a3-a.a4/P,D>.3?(z=_/P*(1+D*(a.a1+oe+N*ue)/P),Ie=Math.asin(z),J=z*z,q=Math.sqrt(1-J)):(q=I/P*(1-N*(a.a5-oe-D*ue)/P),Ie=Math.acos(q),J=1-q*q,z=Math.sqrt(J)),ee=1-Xt.eccentricitySquared*J,X=Xt.radius/Math.sqrt(ee),ie=a.a6*X,oe=I-X*q,ue=_-ie*z,Se=q*oe+z*ue,ge=q*ue-z*oe,Ee=ge/(ie/ee+Se),Ie+=Ee,je=Se+ge*Ee/2,g<0&&(Ie=-Ie),i[r++]=Zp*ke,i[r++]=Zp*Ie,i[r]=je}function gX(e,t,i,r){Ep(e,t,i,r),b0(i,r,i,r)}function vX(e,t,i,r){Ep(e,t,i,r),Sp(i,r,i,r)}const Po={source:{spatialReference:null,spatialReferenceId:se.UNKNOWN,metersPerUnit:1},dest:{spatialReference:null,spatialReferenceId:se.UNKNOWN,metersPerUnit:1},projector:Bt},Jp=kl(1),Zp=rk(1),wR=.5*Math.PI,$h=Xt.radius,r8=$h*Math.PI/180,s8=180/($h*Math.PI);function k1(e,t,i,r,a,p,y=Math.floor(e.length/3)){const g=vR(t,a);if(g==null)return!1;if(g===Bt){if(e===r&&i===p)return!0;const T=i+3*y;for(let I=i,A=p;I<T;I++,A++)r[A]=e[I];return!0}const _=i+3*y;for(let T=i,I=p;T<_;T+=3,I+=3)g(e,T,r,I);return!0}const x3e=Object.freeze(Object.defineProperty({__proto__:null,projectBuffer:k1},Symbol.toStringTag,{value:"Module"}));function n8(e,t,i,r,a,p){return _y[0]=e,_y[1]=t,_y[2]=i,k1(_y,r,0,a,p,0)}const _y=ou();let Sy=0,Ww=class b5{static fromGE(t){const i=new b5;return i._wkt=t.wkt,i._wkid=t.wkid,i._isInverse=t.isInverse,i}constructor(t){this.uid=Sy++,t?(this._wkt=t.wkt!=null?t.wkt:null,this._wkid=t.wkid!=null?t.wkid:-1,this._isInverse=t.isInverse!=null&&t.isInverse===!0):(this._wkt=null,this._wkid=-1,this._isInverse=!1)}get wkt(){return this._wkt}set wkt(t){this._wkt=t,this.uid=Sy++}get wkid(){return this._wkid}set wkid(t){this._wkid=t,this.uid=Sy++}get isInverse(){return this._isInverse}set isInverse(t){this._isInverse=t,this.uid=Sy++}getInverse(){const t=new b5;return t._wkt=this.wkt,t._wkid=this._wkid,t._isInverse=!this.isInverse,t}},hv=class hf{static cacheKey(t,i){var r,a,p,y,g,_;return[((r=t.wkid)==null?void 0:r.toString())??"-1",((a=t.wkt)==null?void 0:a.toString())??"",((p=t.wkt2)==null?void 0:p.toString())??"",((y=i.wkid)==null?void 0:y.toString())??"-1",((g=i.wkt)==null?void 0:g.toString())??"",((_=i.wkt2)==null?void 0:_.toString())??""].join()}static fromGE(t){const i=new hf;let r="";for(const a of t.steps){const p=Ww.fromGE(a);i.steps.push(p),r+=p.uid.toString()+","}return i._cachedProjection={},i._gtlistentry=null,i._chain=r,i}constructor(t){if(this.steps=[],this._cachedProjection={},this._chain="",this._gtlistentry=null,t==null?void 0:t.steps)for(const i of t.steps)i instanceof Ww?this.steps.push(i):this.steps.push(new Ww({wkid:i.wkid,wkt:i.wkt,isInverse:i.isInverse}))}getInverse(){const t=new hf;t.steps=[];for(let i=this.steps.length-1;i>=0;i--){const r=this.steps[i];t.steps.push(r.getInverse())}return t}getGTListEntry(){let t="";for(const i of this.steps)t+=i.uid.toString()+",";return t!==this._chain&&(this._gtlistentry=null,this._cachedProjection={},this._chain=t),this._gtlistentry}assignCachedGe(t,i,r){this._cachedProjection[hf.cacheKey(t,i)]=r}getCachedGeTransformation(t,i){let r="";for(const p of this.steps)r+=p.uid.toString()+",";r!==this._chain&&(this._gtlistentry=null,this._cachedProjection={},this._chain=r);const a=this._cachedProjection[hf.cacheKey(t,i)];return a===void 0?null:a}};function bR(e,t,i){if(t==null||i==null||i.vcsWkid||fi(t,i)||Zl(t)||Zl(i))return null;const r=Xg(t)/Xg(i);if(r===1)return null;switch(e){case"point":case"esriGeometryPoint":return a=>wX(a,r);case"polyline":case"esriGeometryPolyline":return a=>_X(a,r);case"polygon":case"esriGeometryPolygon":return a=>bX(a,r);case"multipoint":case"esriGeometryMultipoint":return a=>SX(a,r);case"extent":case"esriGeometryEnvelope":return a=>xX(a,r);default:return null}}function wX(e,t){(e==null?void 0:e.z)!=null&&(e.z*=t)}function bX(e,t){if(e)for(const i of e.rings)for(const r of i)r.length>2&&(r[2]*=t)}function _X(e,t){if(e)for(const i of e.paths)for(const r of i)r.length>2&&(r[2]*=t)}function SX(e,t){if(e)for(const i of e.points)i.length>2&&(i[2]*=t)}function xX(e,t){e&&e.zmin!=null&&e.zmax!=null&&(e.zmin*=t,e.zmax*=t)}let Rn=null,Xl=null,_0=null,Mm={};const uS=new T1;function Aa(){return!!Rn&&x6()}function _R(){return!!Aa()||(ze(uS),xo(),!1)}function SR(e,t){return!e||!t||Dn(e,t)||_R()}function TX(e,t){return!Dn(e,t)&&!Aa()}function xo(e){return _0==null&&(_0=Promise.all([_O(),fe(()=>Promise.resolve().then(()=>Wme),[]).then(t=>t.g),fe(()=>Promise.resolve().then(()=>ege),void 0)])),_0.then(([,t,{hydratedAdapter:i}])=>{At(e),Xl=i,Rn=t.default,Rn._enableProjection(YB),uS.notify()})}function Ca(e,t,i=null,r=null){return Array.isArray(e)?e.length===0?[]:(Cq(e),_5(Xl,e,e[0].spatialReference,t,i,r)):(et(e),_5(Xl,[e],e.spatialReference,t,i,r)[0])}function _5(e,t,i,r,a=null,p=null){if(i==null||r==null)return t;if(Dn(i,r,a))return t.map(y=>$m(y,i,r));if(a==null&&Yg(i))return t.map(y=>$m(y,i,qe.WGS84)).map(y=>X0(y,r));if(a==null&&Yg(r))return t.map(y=>X0(y,qe.WGS84)).map(y=>$m(y,qe.WGS84,r));if(a==null){const y=hv.cacheKey(i,r);Mm[y]!==void 0?a=Mm[y]:((a=TR(i,r,void 0))==null&&(a=new hv),Mm[y]=a)}if(Rn==null||e==null)throw new b2;return p!=null?Rn._project(e,t,i,r,a,p):Rn._project(e,t,i,r,a)}function MX(e,t){const i=xR([e],t);return i.pending!=null?{pending:i.pending,geometry:null}:i.geometries!=null?{pending:null,geometry:i.geometries[0]}:{pending:null,geometry:null}}function xR(e,t){if(!Aa()){for(const i of e)if(i!=null&&!fi(i.spatialReference,t)&&ys(i.spatialReference)&&ys(t)&&!Dn(i.spatialReference,t))return ze(uS),{pending:xo(),geometries:null}}return{pending:null,geometries:e.map(i=>i==null?null:fi(i.spatialReference,t)?i:ys(i.spatialReference)&&ys(t)?X0(i,t):null)}}function TR(e,t,i=null){if(e==null||t==null)return null;if(Rn==null||Xl==null)throw new b2;const r=Rn._getTransformation(Xl,e,t,i,i==null?void 0:i.spatialReference);return r!==null?hv.fromGE(r):null}function $X(e,t,i=null){if(Rn==null||Xl==null)throw new b2;const r=Rn._getTransformationBySuitability(Xl,e,t,i,i==null?void 0:i.spatialReference);if(r!==null){const a=[];for(const p of r)a.push(hv.fromGE(p));return a}return[]}let b2=class extends Y{constructor(){super("projection:not-loaded","projection engine not fully loaded yet, please call load()")}};function EX(){Rn=null,Xl=null,_0=null,Mm={}}const IX={get loadPromise(){return _0}};function X0(e,t){try{const i=Ca(e,t);if(i==null)return null;"xmin"in e&&"xmin"in i&&(i.zmin=e.zmin,i.zmax=e.zmax);const r=bR(i.type,e.spatialReference,t);return r!=null&&r(i),i}catch(i){if(!(i instanceof b2))throw i;return null}}async function AX(e,t,i){const r=e.spatialReference;return r!=null&&t!=null&&await hS(r,t,null,i),X0(e,t)}function Dn(e,t,i){return!i&&(!!fi(e,t)||ys(e)&&ys(t)&&!!vR(e,t))}function CX(e,t){if(fi(e,t))return!0;if(!ys(e)||!ys(t))return!1;const i=Jl(e)||wo(e)||V3(e),r=Jl(t)||wo(t)||V3(t);return i&&r}async function hS(e,t,i,r){if(Aa())return a7(r);if(Array.isArray(e)){for(const{source:a,dest:p,geographicTransformation:y}of e)if(a&&p&&!Dn(a,p,y))return xo(r)}else if(e&&t&&!Dn(e,t,i))return xo(r);return a7(r)}function $m(e,t,i){return e?"x"in e?MR(e,t,new Be,i,0):"xmin"in e?AR(e,t,new Ct,i,0):"rings"in e?IR(e,t,new en,i,0):"paths"in e?ER(e,t,new Js,i,0):"points"in e?$R(e,t,new C1,i,0):null:null}function OX(e,t,i=t.spatialReference,r=0){return i!=null&&e.spatialReference!=null&&MR(e,e.spatialReference,t,i,r)!=null}function MR(e,t,i,r,a){pr[0]=e.x,pr[1]=e.y;const p=e.z;return pr[2]=p!==void 0?p:a,k1(pr,t,0,pr,r,0)?(i.x=pr[0],i.y=pr[1],i.spatialReference=r,p!==void 0||Zl(r)?(i.z=pr[2],i.hasZ=!0):(i.z=void 0,i.hasZ=!1),e.m===void 0?(i.m=void 0,i.hasM=!1):(i.m=e.m,i.hasM=!0),i):null}function PX(e,t,i=t.spatialReference,r=0){return e.spatialReference!=null&&i!=null&&$R(e,e.spatialReference,t,i,r)!=null}function $R(e,t,i,r,a){const{points:p,hasZ:y,hasM:g}=e,_=[],T=p.length,I=[];for(const P of p)I.push(P[0],P[1],y?P[2]:a);if(!k1(I,t,0,I,r,0,T))return null;const A=y||Zl(r);for(let P=0;P<T;++P){const N=3*P,D=I[N],z=I[N+1];A&&g?_.push([D,z,I[N+2],p[P][3]]):A?_.push([D,z,I[N+2]]):g?_.push([D,z,p[P][2]]):_.push([D,z])}return i.points=_,i.spatialReference=r,i.hasZ=y,i.hasM=g,i}function kX(e,t,i=t.spatialReference,r=0){return e.spatialReference!=null&&i!=null&&ER(e,e.spatialReference,t,i,r)!=null}function ER(e,t,i,r,a){const{paths:p,hasZ:y,hasM:g}=e,_=[];if(!CR(p,y??!1,g??!1,t,_,r,a))return null;const T=y||Zl(r);return i.paths=_,i.spatialReference=r,i.hasZ=T,i.hasM=g,i}function RX(e,t,i=t.spatialReference,r=0){return e.spatialReference!=null&&i!=null&&IR(e,e.spatialReference,t,i,r)!=null}function IR(e,t,i,r,a){const{rings:p,hasZ:y,hasM:g}=e,_=[];if(!CR(p,y??!1,g??!1,t,_,r,a))return null;const T=y||Zl(r);return i.rings=_,i.spatialReference=r,i.hasZ=T,i.hasM=g,i}function NX(e,t,i=t.spatialReference,r=0){return e.spatialReference!=null&&i!=null&&AR(e,e.spatialReference,t,i,r)!=null}function AR(e,t,i,r,a){const{xmin:p,ymin:y,xmax:g,ymax:_,hasZ:T,hasM:I}=e,A=T?e.zmin:a;if(!n8(p,y,A,t,pr,r))return null;const P=T||Zl(r);i.xmin=pr[0],i.ymin=pr[1],P&&(i.zmin=pr[2]);const N=T?e.zmax:a;return n8(g,_,N,t,pr,r)?(i.xmax=pr[0],i.ymax=pr[1],P&&(i.zmax=pr[2]),I&&(i.mmin=e.mmin,i.mmax=e.mmax),i.spatialReference=r,i):null}function CR(e,t,i,r,a,p,y=0){const g=new Array;for(const I of e)for(const A of I)g.push(A[0],A[1],t?A[2]:y);if(!k1(g,r,0,g,p,0))return!1;let _=0;a.length=0;const T=t||Zl(p);for(const I of e){const A=new Array;for(const P of I)T&&i?A.push([g[_++],g[_++],g[_++],P[3]]):T?A.push([g[_++],g[_++],g[_++]]):i?(A.push([g[_++],g[_++],P[2]]),_++):(A.push([g[_++],g[_++]]),_++);a.push(A)}return!0}const pr=ou(),M3e=Object.freeze(Object.defineProperty({__proto__:null,canProjectWithoutEngine:Dn,getTransformation:TR,getTransformations:$X,initializeProjection:hS,isEqualBaseGCS:CX,isLoaded:Aa,isLoadedOrLoad:_R,isLoadedOrLoadFor:SR,load:xo,project:Ca,projectExtent:NX,projectMany:_5,projectMultipoint:PX,projectOrLoad:MX,projectOrLoadMany:xR,projectPoint:OX,projectPolygon:RX,projectPolyline:kX,projectWithZConversion:AX,projectWithoutEngine:$m,requiresLoad:TX,test:IX,tryProjectWithZConversion:X0,unload:EX},Symbol.toStringTag,{value:"Module"}));var S5;let Hn=S5=class extends he{constructor(e){super(e),this.cols=null,this.level=0,this.levelValue=null,this.origin=null,this.resolution=0,this.rows=null,this.scale=0}clone(){return new S5({cols:this.cols,level:this.level,levelValue:this.levelValue,resolution:this.resolution,rows:this.rows,scale:this.scale})}};v([S({json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],Hn.prototype,"cols",void 0),v([S({type:ft,json:{write:!0}})],Hn.prototype,"level",void 0),v([S({type:String,json:{write:!0}})],Hn.prototype,"levelValue",void 0),v([S({json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],Hn.prototype,"origin",void 0),v([S({type:Number,json:{write:!0}})],Hn.prototype,"resolution",void 0),v([S({json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],Hn.prototype,"rows",void 0),v([S({type:Number,json:{write:!0}})],Hn.prototype,"scale",void 0),Hn=S5=v([H("esri.layers.support.LOD")],Hn);const Vs=Hn;let LX=class{constructor(t,i,r,a,p=void 0){this.id=t,this.level=i,this.row=r,this.col=a,this.extent=p}};var Ya;const o8=new rt({PNG:"png",PNG8:"png8",PNG24:"png24",PNG32:"png32",JPEG:"jpg",JPG:"jpg",DIB:"dib",TIFF:"tiff",EMF:"emf",PS:"ps",PDF:"pdf",GIF:"gif",SVG:"svg",SVGZ:"svgz",Mixed:"mixed",MIXED:"mixed",LERC:"lerc",LERC2D:"lerc2d",RAW:"raw",pbf:"pbf"});let Ki=Ya=class extends he{static create(e={}){const{resolutionFactor:t=1,scales:i,size:r=256,spatialReference:a=qe.WebMercator,numLODs:p=24}=e;if(!ys(a)){const A=[];if(i)for(let P=0;P<i.length;P++){const N=i[P];A.push(new Vs({level:P,scale:N,resolution:N}))}else{let P=5e-4;for(let N=p-1;N>=0;N--)A.unshift(new Vs({level:N,scale:P,resolution:P})),P*=2}return new Ya({dpi:96,lods:A,origin:new Be(0,0,a),size:[r,r],spatialReference:a})}const y=Ir(a),g=e.origin?new Be({x:e.origin.x,y:e.origin.y,spatialReference:a}):new Be(y?{x:y.origin[0],y:y.origin[1],spatialReference:a}:{x:0,y:0,spatialReference:a}),_=96,T=1/(Ts(a)*39.37*_),I=[];if(i)for(let A=0;A<i.length;A++){const P=i[A],N=P*T;I.push(new Vs({level:A,scale:P,resolution:N}))}else{let A=Gh(a)?512/r*5916575275917094e-7:256/r*591657527591555e-6;const P=Math.ceil(p/t);I.push(new Vs({level:0,scale:A,resolution:A*T}));for(let N=1;N<P;N++){const D=A/2**t,z=D*T;I.push(new Vs({level:N,scale:D,resolution:z})),A=D}}return new Ya({dpi:_,lods:I,origin:g,size:[r,r],spatialReference:a})}constructor(e){super(e),this.dpi=96,this.format=null,this.origin=null,this.size=null,this.spatialReference=null}get isWrappable(){const{spatialReference:e,origin:t}=this;if(e&&t){const i=Ir(e);return e.isWrappable&&!!i&&Math.abs(i.origin[0]-t.x)<=i.dx}return!1}readOrigin(e,t){return Be.fromJSON({spatialReference:t.spatialReference,...e})}set lods(e){let t=0,i=0;const r=[],a=this._levelToLOD={};e&&(t=-1/0,i=1/0,e.forEach(p=>{r.push(p.scale),t=p.scale>t?p.scale:t,i=p.scale<i?p.scale:i,a[p.level]=p})),this._set("scales",r),this._set("lods",e),this._initializeUpsampleLevels()}readSize(e,t){return[t.cols,t.rows]}writeSize(e,t){t.cols=e[0],t.rows=e[1]}zoomToScale(e){const t=this.scales;if(e<=0)return t[0];if(e>=t.length-1)return t[t.length-1];const i=Math.floor(e),r=i+1;return t[i]/(t[i]/t[r])**(e-i)}scaleToZoom(e){const t=this.scales,i=t.length-1;let r=0;for(;r<i;r++){const a=t[r],p=t[r+1];if(a<=e)return r;if(p===e)return r+1;if(a>e&&p<e)return r+Math.log(a/e)/Math.log(a/p)}return r}tileAt(e,t,i,r){const a=this.lodAt(e);if(!a)return null;let p,y;if(typeof t=="number")p=t,y=i;else if(fi(t.spatialReference,this.spatialReference))p=t.x,y=t.y,r=i;else{const T=n2(t,this.spatialReference);if(T==null)return null;p=T.x,y=T.y,r=i}const g=a.resolution*this.size[0],_=a.resolution*this.size[1];return r||(r=new LX(null,0,0,0,Oi())),r.level=e,r.row=Math.floor((this.origin.y-y)/_+.001),r.col=Math.floor((p-this.origin.x)/g+.001),this.updateTileInfo(r),r}updateTileInfo(e,t=Ya.ExtrapolateOptions.NONE){let i=this.lodAt(e.level);if(!i&&t===Ya.ExtrapolateOptions.POWER_OF_TWO){const y=this.lods[this.lods.length-1];y.level<e.level&&(i=y)}if(!i)return;const r=e.level-i.level,a=i.resolution*this.size[0]/2**r,p=i.resolution*this.size[1]/2**r;e.id=`${e.level}/${e.row}/${e.col}`,e.extent||(e.extent=Oi()),e.extent[0]=this.origin.x+e.col*a,e.extent[1]=this.origin.y-(e.row+1)*p,e.extent[2]=e.extent[0]+a,e.extent[3]=e.extent[1]+p}upsampleTile(e){const t=this._upsampleLevels[e.level];return!(!t||t.parentLevel===-1)&&(e.level=t.parentLevel,e.row=Math.floor(e.row/t.factor+.001),e.col=Math.floor(e.col/t.factor+.001),this.updateTileInfo(e),!0)}getTileBounds(e,t){const i=this.lodAt(t.level);if(i==null)return null;const{resolution:r}=i,a=r*this.size[0],p=r*this.size[1];return e[0]=this.origin.x+t.col*a,e[1]=this.origin.y-(t.row+1)*p,e[2]=e[0]+a,e[3]=e[1]+p,e}lodAt(e){var t;return((t=this._levelToLOD)==null?void 0:t[e])??null}clone(){return Ya.fromJSON(this.write({}))}getCompatibleForVTL(e){if(this.size[0]!==this.size[1]||this.size[0]===256&&e===512)return null;const t=(this.size[0]===512&&e===256?-1:0)+(this.spatialReference.isGeographic?1:0);if(this.size[0]===e&&t===0)return this;const i=[],r=this.lods.length-t;for(let a=0;a<r;a++){const p=a+t,{scale:y,resolution:g}=p>=0?this.lods[p]:{scale:2*this.lods[0].scale,resolution:2*this.lods[0].resolution};i.push(new Vs({level:a,scale:y,resolution:g}))}return new Ya({size:[e,e],dpi:this.dpi,format:this.format,compressionQuality:this.compressionQuality,origin:this.origin,spatialReference:this.spatialReference,lods:i})}_initializeUpsampleLevels(){const e=this.lods;this._upsampleLevels=[];let t=null;for(let i=0;i<e.length;i++){const r=e[i];this._upsampleLevels[r.level]={parentLevel:t?t.level:-1,factor:t?t.resolution/r.resolution:0},t=r}}};v([S({type:Number,json:{write:!0}})],Ki.prototype,"compressionQuality",void 0),v([S({type:Number,json:{write:!0}})],Ki.prototype,"dpi",void 0),v([S({type:String,json:{read:o8.read,write:o8.write,origins:{"web-scene":{read:!1,write:!1}}}})],Ki.prototype,"format",void 0),v([S({readOnly:!0})],Ki.prototype,"isWrappable",null),v([S({type:Be,json:{write:!0}})],Ki.prototype,"origin",void 0),v([me("origin")],Ki.prototype,"readOrigin",null),v([S({type:[Vs],value:null,json:{write:!0}})],Ki.prototype,"lods",null),v([S({readOnly:!0})],Ki.prototype,"scales",void 0),v([S({cast:e=>Array.isArray(e)?e:typeof e=="number"?[e,e]:[256,256]})],Ki.prototype,"size",void 0),v([me("size",["rows","cols"])],Ki.prototype,"readSize",null),v([be("size",{cols:{type:ft},rows:{type:ft}})],Ki.prototype,"writeSize",null),v([S({type:qe,json:{write:!0}})],Ki.prototype,"spatialReference",void 0),Ki=Ya=v([H("esri.layers.support.TileInfo")],Ki),function(e){var t;(t=e.ExtrapolateOptions||(e.ExtrapolateOptions={}))[t.NONE=0]="NONE",t[t.POWER_OF_TWO=1]="POWER_OF_TWO"}(Ki||(Ki={}));const S0=Ki,Em={widthBreakpoint:{getValue(e){const t=e.viewSize[0],i=e.breakpoints,r=this.values;return t<=i.xsmall?r.xsmall:t<=i.small?r.small:t<=i.medium?r.medium:t<=i.large?r.large:r.xlarge},values:{xsmall:"xsmall",small:"small",medium:"medium",large:"large",xlarge:"xlarge"},valueToClassName:{xsmall:"esri-view-width-xsmall esri-view-width-less-than-small esri-view-width-less-than-medium esri-view-width-less-than-large esri-view-width-less-than-xlarge",small:"esri-view-width-small esri-view-width-greater-than-xsmall esri-view-width-less-than-medium esri-view-width-less-than-large esri-view-width-less-than-xlarge",medium:"esri-view-width-medium esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-less-than-large esri-view-width-less-than-xlarge",large:"esri-view-width-large esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-greater-than-medium esri-view-width-less-than-xlarge",xlarge:"esri-view-width-xlarge esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-greater-than-medium esri-view-width-greater-than-large"}},heightBreakpoint:{getValue(e){const t=e.viewSize[1],i=e.breakpoints,r=this.values;return t<=i.xsmall?r.xsmall:t<=i.small?r.small:t<=i.medium?r.medium:t<=i.large?r.large:r.xlarge},values:{xsmall:"xsmall",small:"small",medium:"medium",large:"large",xlarge:"xlarge"},valueToClassName:{xsmall:"esri-view-height-xsmall esri-view-height-less-than-small esri-view-height-less-than-medium esri-view-height-less-than-large esri-view-height-less-than-xlarge",small:"esri-view-height-small esri-view-height-greater-than-xsmall esri-view-height-less-than-medium esri-view-height-less-than-large esri-view-height-less-than-xlarge",medium:"esri-view-height-medium esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-less-than-large esri-view-height-less-than-xlarge",large:"esri-view-height-large esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-greater-than-medium esri-view-height-less-than-xlarge",xlarge:"esri-view-height-xlarge esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-greater-than-medium esri-view-height-greater-than-large"}},orientation:{getValue(e){const t=e.viewSize,i=t[0],r=t[1],a=this.values;return r>=i?a.portrait:a.landscape},values:{portrait:"portrait",landscape:"landscape"},valueToClassName:{portrait:"esri-view-orientation-portrait",landscape:"esri-view-orientation-landscape"}}},Jw={xsmall:544,small:768,medium:992,large:1200};function DX(e){const t=e;return t&&t.xsmall<t.small&&t.small<t.medium&&t.medium<t.large}function Zw(e,t){return t?Em[e].valueToClassName[t].split(" "):[]}const jX=e=>{let t=class extends e{constructor(...i){super(...i),this.orientation=null,this.widthBreakpoint=null,this.heightBreakpoint=null,this.breakpoints=Jw}initialize(){this.addHandles(Le(()=>[this.breakpoints,this.size],()=>this._updateClassNames(),Pi))}destroy(){this.destroyed||this._removeActiveClassNames()}set breakpoints(i){if(i!==this._get("breakpoints")){if(!DX(i)){const r=JSON.stringify(Jw,null,2);console.warn("provided breakpoints are not valid, using defaults:"+r),i=Jw}this._set("breakpoints",{...i})}}_updateClassNames(){if(!this.container)return;const i=$r.acquire(),r=$r.acquire();let a,p=!1;for(a in Em){const y=this[a],g=Em[a].getValue({viewSize:this.size,breakpoints:this.breakpoints});y!==g&&(p=!0,this[a]=g,Zw(a,y).forEach(_=>r.push(_)),Zw(a,g).forEach(_=>i.push(_)))}p&&(this._applyClassNameChanges(i,r),$r.release(i),$r.release(r))}_applyClassNameChanges(i,r){const a=this.container;a&&(r.forEach(p=>a.classList.remove(p)),i.forEach(p=>a.classList.add(p)))}_removeActiveClassNames(){const i=this.container;if(!i)return;let r;for(r in Em)Zw(r,this[r]).forEach(a=>i.classList.remove(a))}};return v([S()],t.prototype,"breakpoints",null),v([S()],t.prototype,"orientation",void 0),v([S()],t.prototype,"widthBreakpoint",void 0),v([S()],t.prototype,"heightBreakpoint",void 0),t=v([H("esri.views.BreakpointsOwner")],t),t};function cS(e){return typeof e=="string"?document.getElementById(e):e??null}function a8(e,t){for(;;){const i=e.firstChild;if(!i)break;t.appendChild(i)}}let Eh=class extends Ae{constructor(){super(...arguments),this.updating=!1,this._handleId=0,this._scheduleHandleId=0,this._pendingPromises=new Set}destroy(){this.removeAll()}add(t,i,r={}){return this._installWatch(t,i,r,Le)}addWhen(t,i,r={}){return this._installWatch(t,i,r,gr)}addOnCollectionChange(t,i,{initial:r=!1,final:a=!1}={}){const p=++this._handleId;return this.addHandles([_o(t,"after-changes",this._createSyncUpdatingCallback(),So),_o(t,"change",i,{onListenerAdd:r?y=>i({added:y.toArray(),removed:[]}):void 0,onListenerRemove:a?y=>i({added:[],removed:y.toArray()}):void 0})],p),yt(()=>this.removeHandles(p))}addPromise(t){if(t==null)return t;const i=++this._handleId;this.addHandles(yt(()=>{this._pendingPromises.delete(t)&&(this._pendingPromises.size!==0||this.hasHandles(xy)||this._set("updating",!1))}),i),this._pendingPromises.add(t),this._set("updating",!0);const r=()=>this.removeHandles(i);return t.then(r,r),t}removeAll(){this._pendingPromises.clear(),this.removeAllHandles(),this._set("updating",!1)}_installWatch(t,i,r={},a){const p=++this._handleId;r.sync||this._installSyncUpdatingWatch(t,p);const y=a(t,i,r);return this.addHandles(y,p),yt(()=>this.removeHandles(p))}_installSyncUpdatingWatch(t,i){const r=this._createSyncUpdatingCallback(),a=Le(t,r,{sync:!0,equals:()=>!1});return this.addHandles(a,i),a}_createSyncUpdatingCallback(){return()=>{this.removeHandles(xy),++this._scheduleHandleId;const t=this._scheduleHandleId;this._get("updating")||this._set("updating",!0),this.addHandles(b1(()=>{t===this._scheduleHandleId&&(this._set("updating",this._pendingPromises.size>0),this.removeHandles(xy))}),xy)}}};v([S({readOnly:!0})],Eh.prototype,"updating",void 0),Eh=v([H("esri.core.support.UpdatingHandles")],Eh);const xy=-42;/*!
 * @esri/arcgis-html-sanitizer - v4.1.0 - Tue Dec 03 2024 09:13:28 GMT-0500 (Eastern Standard Time)
 * Copyright (c) 2024 - Environmental Systems Research Institute, Inc.
 * Apache-2.0
 * 
 * js-xss
 * Copyright (c) 2012-2018 Zongmin Lei(雷宗民) <leizongmin@gmail.com>
 * http://ucdok.com
 * MIT License, see https://github.com/leizongmin/js-xss/blob/master/LICENSE for details
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var cv=function(){return cv=Object.assign||function(t){for(var i,r=1,a=arguments.length;r<a;r++){i=arguments[r];for(var p in i)Object.prototype.hasOwnProperty.call(i,p)&&(t[p]=i[p])}return t},cv.apply(this,arguments)},x5={exports:{}},si={},T5={exports:{}},Wh={};function OR(){var e={};return e["align-content"]=!1,e["align-items"]=!1,e["align-self"]=!1,e["alignment-adjust"]=!1,e["alignment-baseline"]=!1,e.all=!1,e["anchor-point"]=!1,e.animation=!1,e["animation-delay"]=!1,e["animation-direction"]=!1,e["animation-duration"]=!1,e["animation-fill-mode"]=!1,e["animation-iteration-count"]=!1,e["animation-name"]=!1,e["animation-play-state"]=!1,e["animation-timing-function"]=!1,e.azimuth=!1,e["backface-visibility"]=!1,e.background=!0,e["background-attachment"]=!0,e["background-clip"]=!0,e["background-color"]=!0,e["background-image"]=!0,e["background-origin"]=!0,e["background-position"]=!0,e["background-repeat"]=!0,e["background-size"]=!0,e["baseline-shift"]=!1,e.binding=!1,e.bleed=!1,e["bookmark-label"]=!1,e["bookmark-level"]=!1,e["bookmark-state"]=!1,e.border=!0,e["border-bottom"]=!0,e["border-bottom-color"]=!0,e["border-bottom-left-radius"]=!0,e["border-bottom-right-radius"]=!0,e["border-bottom-style"]=!0,e["border-bottom-width"]=!0,e["border-collapse"]=!0,e["border-color"]=!0,e["border-image"]=!0,e["border-image-outset"]=!0,e["border-image-repeat"]=!0,e["border-image-slice"]=!0,e["border-image-source"]=!0,e["border-image-width"]=!0,e["border-left"]=!0,e["border-left-color"]=!0,e["border-left-style"]=!0,e["border-left-width"]=!0,e["border-radius"]=!0,e["border-right"]=!0,e["border-right-color"]=!0,e["border-right-style"]=!0,e["border-right-width"]=!0,e["border-spacing"]=!0,e["border-style"]=!0,e["border-top"]=!0,e["border-top-color"]=!0,e["border-top-left-radius"]=!0,e["border-top-right-radius"]=!0,e["border-top-style"]=!0,e["border-top-width"]=!0,e["border-width"]=!0,e.bottom=!1,e["box-decoration-break"]=!0,e["box-shadow"]=!0,e["box-sizing"]=!0,e["box-snap"]=!0,e["box-suppress"]=!0,e["break-after"]=!0,e["break-before"]=!0,e["break-inside"]=!0,e["caption-side"]=!1,e.chains=!1,e.clear=!0,e.clip=!1,e["clip-path"]=!1,e["clip-rule"]=!1,e.color=!0,e["color-interpolation-filters"]=!0,e["column-count"]=!1,e["column-fill"]=!1,e["column-gap"]=!1,e["column-rule"]=!1,e["column-rule-color"]=!1,e["column-rule-style"]=!1,e["column-rule-width"]=!1,e["column-span"]=!1,e["column-width"]=!1,e.columns=!1,e.contain=!1,e.content=!1,e["counter-increment"]=!1,e["counter-reset"]=!1,e["counter-set"]=!1,e.crop=!1,e.cue=!1,e["cue-after"]=!1,e["cue-before"]=!1,e.cursor=!1,e.direction=!1,e.display=!0,e["display-inside"]=!0,e["display-list"]=!0,e["display-outside"]=!0,e["dominant-baseline"]=!1,e.elevation=!1,e["empty-cells"]=!1,e.filter=!1,e.flex=!1,e["flex-basis"]=!1,e["flex-direction"]=!1,e["flex-flow"]=!1,e["flex-grow"]=!1,e["flex-shrink"]=!1,e["flex-wrap"]=!1,e.float=!1,e["float-offset"]=!1,e["flood-color"]=!1,e["flood-opacity"]=!1,e["flow-from"]=!1,e["flow-into"]=!1,e.font=!0,e["font-family"]=!0,e["font-feature-settings"]=!0,e["font-kerning"]=!0,e["font-language-override"]=!0,e["font-size"]=!0,e["font-size-adjust"]=!0,e["font-stretch"]=!0,e["font-style"]=!0,e["font-synthesis"]=!0,e["font-variant"]=!0,e["font-variant-alternates"]=!0,e["font-variant-caps"]=!0,e["font-variant-east-asian"]=!0,e["font-variant-ligatures"]=!0,e["font-variant-numeric"]=!0,e["font-variant-position"]=!0,e["font-weight"]=!0,e.grid=!1,e["grid-area"]=!1,e["grid-auto-columns"]=!1,e["grid-auto-flow"]=!1,e["grid-auto-rows"]=!1,e["grid-column"]=!1,e["grid-column-end"]=!1,e["grid-column-start"]=!1,e["grid-row"]=!1,e["grid-row-end"]=!1,e["grid-row-start"]=!1,e["grid-template"]=!1,e["grid-template-areas"]=!1,e["grid-template-columns"]=!1,e["grid-template-rows"]=!1,e["hanging-punctuation"]=!1,e.height=!0,e.hyphens=!1,e.icon=!1,e["image-orientation"]=!1,e["image-resolution"]=!1,e["ime-mode"]=!1,e["initial-letters"]=!1,e["inline-box-align"]=!1,e["justify-content"]=!1,e["justify-items"]=!1,e["justify-self"]=!1,e.left=!1,e["letter-spacing"]=!0,e["lighting-color"]=!0,e["line-box-contain"]=!1,e["line-break"]=!1,e["line-grid"]=!1,e["line-height"]=!1,e["line-snap"]=!1,e["line-stacking"]=!1,e["line-stacking-ruby"]=!1,e["line-stacking-shift"]=!1,e["line-stacking-strategy"]=!1,e["list-style"]=!0,e["list-style-image"]=!0,e["list-style-position"]=!0,e["list-style-type"]=!0,e.margin=!0,e["margin-bottom"]=!0,e["margin-left"]=!0,e["margin-right"]=!0,e["margin-top"]=!0,e["marker-offset"]=!1,e["marker-side"]=!1,e.marks=!1,e.mask=!1,e["mask-box"]=!1,e["mask-box-outset"]=!1,e["mask-box-repeat"]=!1,e["mask-box-slice"]=!1,e["mask-box-source"]=!1,e["mask-box-width"]=!1,e["mask-clip"]=!1,e["mask-image"]=!1,e["mask-origin"]=!1,e["mask-position"]=!1,e["mask-repeat"]=!1,e["mask-size"]=!1,e["mask-source-type"]=!1,e["mask-type"]=!1,e["max-height"]=!0,e["max-lines"]=!1,e["max-width"]=!0,e["min-height"]=!0,e["min-width"]=!0,e["move-to"]=!1,e["nav-down"]=!1,e["nav-index"]=!1,e["nav-left"]=!1,e["nav-right"]=!1,e["nav-up"]=!1,e["object-fit"]=!1,e["object-position"]=!1,e.opacity=!1,e.order=!1,e.orphans=!1,e.outline=!1,e["outline-color"]=!1,e["outline-offset"]=!1,e["outline-style"]=!1,e["outline-width"]=!1,e.overflow=!1,e["overflow-wrap"]=!1,e["overflow-x"]=!1,e["overflow-y"]=!1,e.padding=!0,e["padding-bottom"]=!0,e["padding-left"]=!0,e["padding-right"]=!0,e["padding-top"]=!0,e.page=!1,e["page-break-after"]=!1,e["page-break-before"]=!1,e["page-break-inside"]=!1,e["page-policy"]=!1,e.pause=!1,e["pause-after"]=!1,e["pause-before"]=!1,e.perspective=!1,e["perspective-origin"]=!1,e.pitch=!1,e["pitch-range"]=!1,e["play-during"]=!1,e.position=!1,e["presentation-level"]=!1,e.quotes=!1,e["region-fragment"]=!1,e.resize=!1,e.rest=!1,e["rest-after"]=!1,e["rest-before"]=!1,e.richness=!1,e.right=!1,e.rotation=!1,e["rotation-point"]=!1,e["ruby-align"]=!1,e["ruby-merge"]=!1,e["ruby-position"]=!1,e["shape-image-threshold"]=!1,e["shape-outside"]=!1,e["shape-margin"]=!1,e.size=!1,e.speak=!1,e["speak-as"]=!1,e["speak-header"]=!1,e["speak-numeral"]=!1,e["speak-punctuation"]=!1,e["speech-rate"]=!1,e.stress=!1,e["string-set"]=!1,e["tab-size"]=!1,e["table-layout"]=!1,e["text-align"]=!0,e["text-align-last"]=!0,e["text-combine-upright"]=!0,e["text-decoration"]=!0,e["text-decoration-color"]=!0,e["text-decoration-line"]=!0,e["text-decoration-skip"]=!0,e["text-decoration-style"]=!0,e["text-emphasis"]=!0,e["text-emphasis-color"]=!0,e["text-emphasis-position"]=!0,e["text-emphasis-style"]=!0,e["text-height"]=!0,e["text-indent"]=!0,e["text-justify"]=!0,e["text-orientation"]=!0,e["text-overflow"]=!0,e["text-shadow"]=!0,e["text-space-collapse"]=!0,e["text-transform"]=!0,e["text-underline-position"]=!0,e["text-wrap"]=!0,e.top=!1,e.transform=!1,e["transform-origin"]=!1,e["transform-style"]=!1,e.transition=!1,e["transition-delay"]=!1,e["transition-duration"]=!1,e["transition-property"]=!1,e["transition-timing-function"]=!1,e["unicode-bidi"]=!1,e["vertical-align"]=!1,e.visibility=!1,e["voice-balance"]=!1,e["voice-duration"]=!1,e["voice-family"]=!1,e["voice-pitch"]=!1,e["voice-range"]=!1,e["voice-rate"]=!1,e["voice-stress"]=!1,e["voice-volume"]=!1,e.volume=!1,e["white-space"]=!1,e.widows=!1,e.width=!0,e["will-change"]=!1,e["word-break"]=!0,e["word-spacing"]=!0,e["word-wrap"]=!0,e["wrap-flow"]=!1,e["wrap-through"]=!1,e["writing-mode"]=!1,e["z-index"]=!1,e}function FX(e,t,i){}function zX(e,t,i){}var UX=/javascript\s*\:/img;function VX(e,t){return UX.test(t)?"":t}Wh.whiteList=OR();Wh.getDefaultWhiteList=OR;Wh.onAttr=FX;Wh.onIgnoreAttr=zX;Wh.safeAttrValue=VX;var GX={indexOf:function(e,t){var i,r;if(Array.prototype.indexOf)return e.indexOf(t);for(i=0,r=e.length;i<r;i++)if(e[i]===t)return i;return-1},forEach:function(e,t,i){var r,a;if(Array.prototype.forEach)return e.forEach(t,i);for(r=0,a=e.length;r<a;r++)t.call(i,e[r],r,e)},trim:function(e){return String.prototype.trim?e.trim():e.replace(/(^\s*)|(\s*$)/g,"")},trimRight:function(e){return String.prototype.trimRight?e.trimRight():e.replace(/(\s*$)/g,"")}},Dd=GX;function BX(e,t){e=Dd.trimRight(e),e[e.length-1]!==";"&&(e+=";");var i=e.length,r=!1,a=0,p=0,y="";function g(){if(!r){var I=Dd.trim(e.slice(a,p)),A=I.indexOf(":");if(A!==-1){var P=Dd.trim(I.slice(0,A)),N=Dd.trim(I.slice(A+1));if(P){var D=t(a,y.length,P,N,I);D&&(y+=D+"; ")}}}a=p+1}for(;p<i;p++){var _=e[p];if(_==="/"&&e[p+1]==="*"){var T=e.indexOf("*/",p+2);if(T===-1)break;p=T+1,a=p+1,r=!1}else _==="("?r=!0:_===")"?r=!1:_===";"?r||g():_===`
`&&g()}return Dd.trim(y)}var qX=BX,Ty=Wh,HX=qX;function l8(e){return e==null}function WX(e){var t={};for(var i in e)t[i]=e[i];return t}function PR(e){e=WX(e||{}),e.whiteList=e.whiteList||Ty.whiteList,e.onAttr=e.onAttr||Ty.onAttr,e.onIgnoreAttr=e.onIgnoreAttr||Ty.onIgnoreAttr,e.safeAttrValue=e.safeAttrValue||Ty.safeAttrValue,this.options=e}PR.prototype.process=function(e){if(e=e||"",e=e.toString(),!e)return"";var t=this,i=t.options,r=i.whiteList,a=i.onAttr,p=i.onIgnoreAttr,y=i.safeAttrValue,g=HX(e,function(_,T,I,A,P){var N=r[I],D=!1;if(N===!0?D=N:typeof N=="function"?D=N(A):N instanceof RegExp&&(D=N.test(A)),D!==!0&&(D=!1),A=y(I,A),!!A){var z={position:T,sourcePosition:_,source:P,isWhite:D};if(D){var q=a(I,A,z);return l8(q)?I+":"+A:q}else{var q=p(I,A,z);if(!l8(q))return q}}});return g};var JX=PR;(function(e,t){var i=Wh,r=JX;function a(y,g){var _=new r(g);return _.process(y)}t=e.exports=a,t.FilterCSS=r;for(var p in i)t[p]=i[p]})(T5,T5.exports);var pS=T5.exports,dS={indexOf:function(e,t){var i,r;if(Array.prototype.indexOf)return e.indexOf(t);for(i=0,r=e.length;i<r;i++)if(e[i]===t)return i;return-1},forEach:function(e,t,i){var r,a;if(Array.prototype.forEach)return e.forEach(t,i);for(r=0,a=e.length;r<a;r++)t.call(i,e[r],r,e)},trim:function(e){return String.prototype.trim?e.trim():e.replace(/(^\s*)|(\s*$)/g,"")},spaceIndex:function(e){var t=/\s|\n|\t/,i=t.exec(e);return i?i.index:-1}},ZX=pS.FilterCSS,KX=pS.getDefaultWhiteList,pv=dS;function kR(){return{a:["target","href","title"],abbr:["title"],address:[],area:["shape","coords","href","alt"],article:[],aside:[],audio:["autoplay","controls","crossorigin","loop","muted","preload","src"],b:[],bdi:["dir"],bdo:["dir"],big:[],blockquote:["cite"],br:[],caption:[],center:[],cite:[],code:[],col:["align","valign","span","width"],colgroup:["align","valign","span","width"],dd:[],del:["datetime"],details:["open"],div:[],dl:[],dt:[],em:[],figcaption:[],figure:[],font:["color","size","face"],footer:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],header:[],hr:[],i:[],img:["src","alt","title","width","height"],ins:["datetime"],li:[],mark:[],nav:[],ol:[],p:[],pre:[],s:[],section:[],small:[],span:[],sub:[],summary:[],sup:[],strong:[],strike:[],table:["width","border","align","valign"],tbody:["align","valign"],td:["width","rowspan","colspan","align","valign"],tfoot:["align","valign"],th:["width","rowspan","colspan","align","valign"],thead:["align","valign"],tr:["rowspan","align","valign"],tt:[],u:[],ul:[],video:["autoplay","controls","crossorigin","loop","muted","playsinline","poster","preload","src","height","width"]}}var RR=new ZX;function YX(e,t,i){}function XX(e,t,i){}function QX(e,t,i){}function eQ(e,t,i){}function NR(e){return e.replace(iQ,"&lt;").replace(rQ,"&gt;")}function tQ(e,t,i,r){if(i=UR(i),t==="href"||t==="src"){if(i=pv.trim(i),i==="#")return"#";if(!(i.substr(0,7)==="http://"||i.substr(0,8)==="https://"||i.substr(0,7)==="mailto:"||i.substr(0,4)==="tel:"||i.substr(0,11)==="data:image/"||i.substr(0,6)==="ftp://"||i.substr(0,2)==="./"||i.substr(0,3)==="../"||i[0]==="#"||i[0]==="/"))return""}else if(t==="background"){if(My.lastIndex=0,My.test(i))return""}else if(t==="style"){if(u8.lastIndex=0,u8.test(i)||(h8.lastIndex=0,h8.test(i)&&(My.lastIndex=0,My.test(i))))return"";r!==!1&&(r=r||RR,i=r.process(i))}return i=VR(i),i}var iQ=/</g,rQ=/>/g,sQ=/"/g,nQ=/&quot;/g,oQ=/&#([a-zA-Z0-9]*);?/gim,aQ=/&colon;?/gim,lQ=/&newline;?/gim,My=/((j\s*a\s*v\s*a|v\s*b|l\s*i\s*v\s*e)\s*s\s*c\s*r\s*i\s*p\s*t\s*|m\s*o\s*c\s*h\s*a):/gi,u8=/e\s*x\s*p\s*r\s*e\s*s\s*s\s*i\s*o\s*n\s*\(.*/gi,h8=/u\s*r\s*l\s*\(.*/gi;function LR(e){return e.replace(sQ,"&quot;")}function DR(e){return e.replace(nQ,'"')}function jR(e){return e.replace(oQ,function(i,r){return r[0]==="x"||r[0]==="X"?String.fromCharCode(parseInt(r.substr(1),16)):String.fromCharCode(parseInt(r,10))})}function FR(e){return e.replace(aQ,":").replace(lQ," ")}function zR(e){for(var t="",i=0,r=e.length;i<r;i++)t+=e.charCodeAt(i)<32?" ":e.charAt(i);return pv.trim(t)}function UR(e){return e=DR(e),e=jR(e),e=FR(e),e=zR(e),e}function VR(e){return e=LR(e),e=NR(e),e}function uQ(){return""}function hQ(e,t){typeof t!="function"&&(t=function(){});var i=!Array.isArray(e);function r(y){return i?!0:pv.indexOf(e,y)!==-1}var a=[],p=!1;return{onIgnoreTag:function(y,g,_){if(r(y))if(_.isClosing){var T="[/removed]",I=_.position+T.length;return a.push([p!==!1?p:_.position,I]),p=!1,T}else return p||(p=_.position),"[removed]";else return t(y,g,_)},remove:function(y){var g="",_=0;return pv.forEach(a,function(T){g+=y.slice(_,T[0]),_=T[1]}),g+=y.slice(_),g}}}function cQ(e){for(var t="",i=0;i<e.length;){var r=e.indexOf("<!--",i);if(r===-1){t+=e.slice(i);break}t+=e.slice(i,r);var a=e.indexOf("-->",r);if(a===-1)break;i=a+3}return t}function pQ(e){var t=e.split("");return t=t.filter(function(i){var r=i.charCodeAt(0);return r===127?!1:r<=31?r===10||r===13:!0}),t.join("")}si.whiteList=kR();si.getDefaultWhiteList=kR;si.onTag=YX;si.onIgnoreTag=XX;si.onTagAttr=QX;si.onIgnoreTagAttr=eQ;si.safeAttrValue=tQ;si.escapeHtml=NR;si.escapeQuote=LR;si.unescapeQuote=DR;si.escapeHtmlEntities=jR;si.escapeDangerHtml5Entities=FR;si.clearNonPrintableCharacter=zR;si.friendlyAttrValue=UR;si.escapeAttrValue=VR;si.onIgnoreTagStripAll=uQ;si.StripTagBody=hQ;si.stripCommentTag=cQ;si.stripBlankChar=pQ;si.cssFilter=RR;si.getDefaultCSSWhiteList=KX;var _2={},Ml=dS;function dQ(e){var t=Ml.spaceIndex(e),i;return t===-1?i=e.slice(1,-1):i=e.slice(1,t+1),i=Ml.trim(i).toLowerCase(),i.slice(0,1)==="/"&&(i=i.slice(1)),i.slice(-1)==="/"&&(i=i.slice(0,-1)),i}function fQ(e){return e.slice(0,2)==="</"}function yQ(e,t,i){var r="",a=0,p=!1,y=!1,g=0,_=e.length,T="",I="";e:for(g=0;g<_;g++){var A=e.charAt(g);if(p===!1){if(A==="<"){p=g;continue}}else if(y===!1){if(A==="<"){r+=i(e.slice(a,g)),p=g,a=g;continue}if(A===">"){r+=i(e.slice(a,p)),I=e.slice(p,g+1),T=dQ(I),r+=t(p,r.length,T,I,fQ(I)),a=g+1,p=!1;continue}if(A==='"'||A==="'")for(var P=1,N=e.charAt(g-P);N.trim()===""||N==="=";){if(N==="="){y=A;continue e}N=e.charAt(g-++P)}}else if(A===y){y=!1;continue}}return a<e.length&&(r+=i(e.substr(a))),r}var mQ=/[^a-zA-Z0-9\\_:.-]/gim;function gQ(e,t){var i=0,r=0,a=[],p=!1,y=e.length;function g(P,N){if(P=Ml.trim(P),P=P.replace(mQ,"").toLowerCase(),!(P.length<1)){var D=t(P,N||"");D&&a.push(D)}}for(var _=0;_<y;_++){var T=e.charAt(_),I,A;if(p===!1&&T==="="){p=e.slice(i,_),i=_+1,r=e.charAt(i)==='"'||e.charAt(i)==="'"?i:wQ(e,_+1);continue}if(p!==!1&&_===r){if(A=e.indexOf(T,_+1),A===-1)break;I=Ml.trim(e.slice(r+1,A)),g(p,I),p=!1,_=A,i=_+1;continue}if(/\s|\n|\t/.test(T))if(e=e.replace(/\s|\n|\t/g," "),p===!1)if(A=vQ(e,_),A===-1){I=Ml.trim(e.slice(i,_)),g(I),p=!1,i=_+1;continue}else{_=A-1;continue}else if(A=bQ(e,_-1),A===-1){I=Ml.trim(e.slice(i,_)),I=c8(I),g(p,I),p=!1,i=_+1;continue}else continue}return i<e.length&&(p===!1?g(e.slice(i)):g(p,c8(Ml.trim(e.slice(i))))),Ml.trim(a.join(" "))}function vQ(e,t){for(;t<e.length;t++){var i=e[t];if(i!==" ")return i==="="?t:-1}}function wQ(e,t){for(;t<e.length;t++){var i=e[t];if(i!==" ")return i==="'"||i==='"'?t:-1}}function bQ(e,t){for(;t>0;t--){var i=e[t];if(i!==" ")return i==="="?t:-1}}function _Q(e){return e[0]==='"'&&e[e.length-1]==='"'||e[0]==="'"&&e[e.length-1]==="'"}function c8(e){return _Q(e)?e.substr(1,e.length-2):e}_2.parseTag=yQ;_2.parseAttr=gQ;var SQ=pS.FilterCSS,En=si,GR=_2,xQ=GR.parseTag,TQ=GR.parseAttr,Im=dS;function $y(e){return e==null}function MQ(e){var t=Im.spaceIndex(e);if(t===-1)return{html:"",closing:e[e.length-2]==="/"};e=Im.trim(e.slice(t+1,-1));var i=e[e.length-1]==="/";return i&&(e=Im.trim(e.slice(0,-1))),{html:e,closing:i}}function $Q(e){var t={};for(var i in e)t[i]=e[i];return t}function EQ(e){var t={};for(var i in e)Array.isArray(e[i])?t[i.toLowerCase()]=e[i].map(function(r){return r.toLowerCase()}):t[i.toLowerCase()]=e[i];return t}function BR(e){e=$Q(e||{}),e.stripIgnoreTag&&(e.onIgnoreTag&&console.error('Notes: cannot use these two options "stripIgnoreTag" and "onIgnoreTag" at the same time'),e.onIgnoreTag=En.onIgnoreTagStripAll),e.whiteList||e.allowList?e.whiteList=EQ(e.whiteList||e.allowList):e.whiteList=En.whiteList,e.onTag=e.onTag||En.onTag,e.onTagAttr=e.onTagAttr||En.onTagAttr,e.onIgnoreTag=e.onIgnoreTag||En.onIgnoreTag,e.onIgnoreTagAttr=e.onIgnoreTagAttr||En.onIgnoreTagAttr,e.safeAttrValue=e.safeAttrValue||En.safeAttrValue,e.escapeHtml=e.escapeHtml||En.escapeHtml,this.options=e,e.css===!1?this.cssFilter=!1:(e.css=e.css||{},this.cssFilter=new SQ(e.css))}BR.prototype.process=function(e){if(e=e||"",e=e.toString(),!e)return"";var t=this,i=t.options,r=i.whiteList,a=i.onTag,p=i.onIgnoreTag,y=i.onTagAttr,g=i.onIgnoreTagAttr,_=i.safeAttrValue,T=i.escapeHtml,I=t.cssFilter;i.stripBlankChar&&(e=En.stripBlankChar(e)),i.allowCommentTag||(e=En.stripCommentTag(e));var A=!1;i.stripIgnoreTagBody&&(A=En.StripTagBody(i.stripIgnoreTagBody,p),p=A.onIgnoreTag);var P=xQ(e,function(N,D,z,q,J){var ee={sourcePosition:N,position:D,isClosing:J,isWhite:Object.prototype.hasOwnProperty.call(r,z)},X=a(z,q,ee);if(!$y(X))return X;if(ee.isWhite){if(ee.isClosing)return"</"+z+">";var ie=MQ(q),oe=r[z],ue=TQ(ie.html,function(ge,Se){var Ee=Im.indexOf(oe,ge)!==-1,Ie=y(z,ge,Se,Ee);return $y(Ie)?Ee?(Se=_(z,ge,Se,I),Se?ge+'="'+Se+'"':ge):(Ie=g(z,ge,Se,Ee),$y(Ie)?void 0:Ie):Ie});return q="<"+z,ue&&(q+=" "+ue),ie.closing&&(q+=" /"),q+=">",q}else return X=p(z,q,ee),$y(X)?T(q):X},T);return A&&(P=A.remove(P)),P};var IQ=BR;(function(e,t){var i=si,r=_2,a=IQ;function p(g,_){var T=new a(_);return T.process(g)}t=e.exports=p,t.filterXSS=p,t.FilterXSS=a,function(){for(var g in i)t[g]=i[g];for(var _ in r)t[_]=r[_]}();function y(){return typeof self<"u"&&typeof DedicatedWorkerGlobalScope<"u"&&self instanceof DedicatedWorkerGlobalScope}y()&&(self.filterXSS=e.exports)})(x5,x5.exports);var nc=x5.exports,AQ=function(e){if(typeof e!="object"||e===null||Object.prototype.toString.call(e)!=="[object Object]")return!1;var t=Object.getPrototypeOf(e);if(t===null)return!0;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t},CQ=function(){function e(t,i){var r=this;this.arcgisWhiteList={a:["href","style","target"],abbr:["title"],article:["style"],aside:["style"],audio:["autoplay","controls","loop","muted","preload"],b:[],blockquote:["style"],br:[],code:["style"],dd:["style"],del:["style"],details:["open","style"],div:["align","aria-hidden","aria-label","style"],dl:["style"],dt:["style"],em:[],figcaption:["style"],figure:["style"],font:["color","face","size","style"],footer:["style"],h1:["style"],h2:["style"],h3:["style"],h4:["style"],h5:["style"],h6:["style"],header:["style"],hr:[],i:[],img:["alt","border","height","src","style","width"],li:[],main:["style"],mark:["style"],nav:["style"],ol:[],p:["style"],pre:["style"],section:["style"],source:["media","src","type"],span:["aria-hidden","aria-label","style"],strong:[],sub:["style"],summary:["style"],sup:["style"],table:["border","cellpadding","cellspacing","height","style","width"],tbody:[],tr:["align","height","style","valign"],td:["align","colspan","height","nowrap","rowspan","style","valign","width"],th:["align","colspan","height","nowrap","rowspan","style","valign","width"],time:["style"],u:[],ul:[],video:["autoplay","controls","height","loop","muted","poster","preload","width"]},this.arcgisCSSWhiteList=cv(cv({},nc.getDefaultCSSWhiteList()),{"align-items":!0,"align-self":!0,flex:!0,"flex-basis":!0,"flex-direction":!0,"flex-flow":!0,"flex-grow":!0,"flex-shrink":!0,"flex-wrap":!0,float:!0,gap:!0,grid:!0,"grid-area":!0,"grid-auto-columns":!0,"grid-auto-flow":!0,"grid-auto-rows":!0,"grid-column":!0,"grid-column-end":!0,"grid-column-start":!0,"grid-row":!0,"grid-row-end":!0,"grid-row-start":!0,"grid-template":!0,"grid-template-areas":!0,"grid-template-columns":!0,"grid-template-rows":!0,"justify-content":!0,"justify-items":!0,"justify-self":!0,"line-height":!0,overflow:!0}),this.allowedProtocols=["http","https","mailto","iform","tel","flow","lfmobile","arcgis-navigator","arcgis-appstudio-player","arcgis-survey123","arcgis-collector","arcgis-workforce","arcgis-explorer","arcgis-trek2there","arcgis-quickcapture","mspbi","comgooglemaps","pdfefile","pdfehttp","pdfehttps","boxapp","boxemm","awb","awbs","gropen","radarscope"],this.arcgisFilterOptions={allowCommentTag:!0,safeAttrValue:function(p,y,g,_){return p==="a"&&y==="href"||(p==="img"||p==="source")&&y==="src"?r.sanitizeUrl(g):nc.safeAttrValue(p,y,g,_)}},this._entityMap={"&":"&#x38;","<":"&#x3C;",">":"&#x3E;",'"':"&#x22;","'":"&#x27;","/":"&#x2F;"};var a;t&&!i?a=t:t&&i?(a=Object.create(this.arcgisFilterOptions),a.css={whiteList:this.arcgisCSSWhiteList},Object.keys(t).forEach(function(p){if(p==="whiteList")a.whiteList=r._extendObjectOfArrays([r.arcgisWhiteList,t.whiteList||{}]);else if(p==="css"){var y=t.css.whiteList;y!=null&&t.css instanceof Object&&Object.keys(y).forEach(function(g){return a.css.whiteList[g]=y[g]})}else a[p]=t[p]})):(a=Object.create(this.arcgisFilterOptions),a.whiteList=this.arcgisWhiteList,a.css={whiteList:this.arcgisCSSWhiteList}),this.xssFilterOptions=a,this._xssFilter=new nc.FilterXSS(a)}return e.prototype.sanitize=function(t,i){switch(i===void 0&&(i={}),typeof t){case"number":return isNaN(t)||!isFinite(t)?null:t;case"boolean":return t;case"string":return this._xssFilter.process(t);case"object":return this._iterateOverObject(t,i);default:return i.allowUndefined&&typeof t>"u"?void 0:null}},e.prototype.sanitizeUrl=function(t,i){var r=(i??{}).isProtocolRequired,a=r===void 0?!0:r,p=this._trim(t.substring(0,t.indexOf(":"))),y=t==="/",g=/^#/.test(t),_=p&&this.allowedProtocols.indexOf(p.toLowerCase())>-1;return y||g||_?nc.escapeAttrValue(t):!p&&!a?nc.escapeAttrValue("https://".concat(t)):""},e.prototype.sanitizeHTMLAttribute=function(t,i,r,a){return typeof this.xssFilterOptions.safeAttrValue=="function"?this.xssFilterOptions.safeAttrValue(t,i,r,a):nc.safeAttrValue(t,i,r,a)},e.prototype.validate=function(t,i){i===void 0&&(i={});var r=this.sanitize(t,i);return{isValid:t===r,sanitized:r}},e.prototype.encodeHTML=function(t){var i=this;return String(t).replace(/[&<>"'\/]/g,function(r){return i._entityMap[r]})},e.prototype.encodeAttrValue=function(t){var i=/^[a-zA-Z0-9]$/;return String(t).replace(/[\x00-\xFF]/g,function(r,a){return i.test(r)?r:"&#x".concat(Number(t.charCodeAt(a)).toString(16),";")})},e.prototype._extendObjectOfArrays=function(t){var i={};return t.forEach(function(r){Object.keys(r).forEach(function(a){Array.isArray(r[a])&&Array.isArray(i[a])?i[a]=i[a].concat(r[a]):i[a]=r[a]})}),i},e.prototype._iterateOverObject=function(t,i){var r=this;i===void 0&&(i={});try{var a=!1,p=void 0;if(Array.isArray(t))p=t.reduce(function(g,_){var T=r.validate(_,i);return T.isValid?g.concat([_]):(a=!0,g.concat([T.sanitized]))},[]);else if(AQ(t)){var y=Object.keys(t);p=y.reduce(function(g,_){var T=t[_],I=r.validate(T,i);return I.isValid?g[_]=T:(a=!0,g[_]=I.sanitized),g},{})}else return i.allowUndefined&&typeof t>"u"?void 0:null;return a?p:t}catch{return null}},e.prototype._trim=function(t){return String.prototype.trim?t.trim():t.replace(/(^\s*)|(\s*$)/g,"")},e}();const S2=new Map;function qR(){S2.clear()}function OQ(e){return S2.get(e)}function PQ(e,t){S2.set(e,t)}function Kw(e){S2.delete(e)}function HR(...e){const t=$r.acquire();for(let r=0;r<e.length;r++){const a=e[r],p=typeof a;if(p==="string")t.push(a);else if(Array.isArray(a))t.push.apply(t,a);else if(p==="object")for(const y in a)a[y]&&t.push(y)}const i=t.join(" ");return $r.release(t),i}(()=>{const e=new Map,t=new ResizeObserver(r=>{var a;qR();for(const p of r)(a=e.get(p.target))==null||a(p)}),i=(r,a,p)=>(e.set(r,a),t.observe(r,p),yt(()=>{t.unobserve(r),e.delete(r)}));return(r,a,p)=>{let y=null;return y1([Le(()=>typeof r=="function"?r():r,g=>{y==null||y.remove(),g&&(y=i(g,a,p))},qr),yt(()=>y==null?void 0:y.remove())])}})();function kQ(e){const t=e==null?void 0:e.closest("[dir]");return t!==null&&t instanceof HTMLElement&&t.dir==="rtl"||document.dir==="rtl"}function I3e(e){const t="data-node-ref";this[e.getAttribute(t)]=null}function A3e(e){const t="data-node-ref";this[e.getAttribute(t)]=e}const RQ=["dd","dl","dt","h1","h2","h3","h4","h5","h6","sub","sup","animate","animatetransform","circle","clippath","defs","ellipse","g","image","line","lineargradient","marker","mask","path","pattern","polygon","polyline","radialgradient","rect","stop","svg","switch","symbol","text","textpath","tspan","use"],NQ=RQ.reduce((e,t)=>(e[t]=[],e),{}),LQ=["align","alink","alt","bgcolor","border","cellpadding","cellspacing","class","color","cols","colspan","coords","d","dir","face","height","hspace","ismap","lang","marginheight","marginwidth","multiple","nohref","noresize","noshade","nowrap","ref","rel","rev","rows","rowspan","scrolling","shape","span","summary","tabindex","title","usemap","valign","value","vlink","vspace","width"],WR=new CQ({whiteList:NQ,onTagAttr:(e,t,i)=>{const r=`${t}="${i}"`;if(LQ.includes(t))return r},stripIgnoreTag:!0,stripIgnoreTagBody:["script","style"]},!0);function DQ(e){return e==="Enter"||e===" "}async function jQ(e,t){await gV(w1(t));const i=typeof e=="function"?e():e;i&&("setFocus"in i&&typeof i.setFocus=="function"?await i.setFocus():i instanceof HTMLElement&&i.focus())}const JR="http://www.w3.org/",x2=`${JR}2000/svg`,ZR=`${JR}1999/xlink`;let p8=[],fS=(e,t)=>{let i={};return Object.keys(e).forEach(r=>{i[r]=e[r]}),t&&Object.keys(t).forEach(r=>{i[r]=t[r]}),i},yS=(e,t)=>e.vnodeSelector===t.vnodeSelector&&(e.properties&&t.properties?e.properties.key===t.properties.key&&e.properties.bind===t.properties.bind:!e.properties&&!t.properties),KR=e=>{if(typeof e!="string")throw new Error("Style values must be strings")},FQ=(e,t,i)=>{if(t.vnodeSelector!==""){for(let r=i;r<e.length;r++)if(yS(e[r],t))return r}return-1},Yw=(e,t,i,r)=>{let a=e[t];if(a.vnodeSelector==="")return;let p=a.properties;if(!(p&&(p.key===void 0?p.bind:p.key))){for(let y=0;y<e.length;y++)if(y!==t){let g=e[y];if(yS(g,a))throw new Error(`${i.vnodeSelector} had a ${a.vnodeSelector} child ${r==="added"?r:"removed"}, but there is now more than one. You must add unique key properties to make them distinguishable.`)}}},zQ=e=>{if(e.properties){let t=e.properties.enterAnimation;t&&t(e.domNode,e.properties)}},M5=[],$5=!1,YR=e=>{(e.children||[]).forEach(YR),e.properties&&e.properties.afterRemoved&&e.properties.afterRemoved.apply(e.properties.bind||e.properties,[e.domNode])},d8=()=>{$5=!1,M5.forEach(YR),M5.length=0},f8=e=>{M5.push(e),$5||($5=!0,typeof window<"u"&&"requestIdleCallback"in window?window.requestIdleCallback(d8,{timeout:16}):setTimeout(d8,16))},y8=e=>{let t=e.domNode;if(e.properties){let i=e.properties.exitAnimation;if(i)return t.style.pointerEvents="none",void i(t,()=>{t.parentNode&&(t.parentNode.removeChild(t),f8(e))},e.properties)}t.parentNode&&(t.parentNode.removeChild(t),f8(e))},UQ=(e,t,i)=>{if(!t)return;let r=i.eventHandlerInterceptor,a=Object.keys(t),p=a.length;for(let y=0;y<p;y++){let g=a[y],_=t[g];if(g==="className")throw new Error('Property "className" is not supported, use "class".');if(g==="class")I5(e,_,!0);else if(g==="classes"){let T=Object.keys(_),I=T.length;for(let A=0;A<I;A++){let P=T[A];_[P]&&e.classList.add(P)}}else if(g==="styles"){let T=Object.keys(_),I=T.length;for(let A=0;A<I;A++){let P=T[A],N=_[P];N&&(KR(N),i.styleApplyer(e,P,N))}}else if(g!=="key"&&_!=null){let T=typeof _;T==="function"?(g.lastIndexOf("on",0)===0&&(r&&(_=r(g,_,e,t)),g==="oninput"&&function(){let I=_;_=function(A){I.apply(this,[A]),A.target["oninput-value"]=A.target.value}}()),e[g]=_):i.namespace===x2?g==="href"?e.setAttributeNS(ZR,g,_):e.setAttribute(g,_):T==="string"&&g!=="value"?g==="innerHTML"?e[g]=WR.sanitize(_):E5(e)&&g in e?e[g]=_:e.setAttribute(g,_):e[g]=_}}};function E5(e){if(!(e instanceof Element&&e.tagName.includes("-")))return!1;const t=window.customElements.get(e.tagName.toLowerCase());return!!t&&e instanceof t}let dv,VQ=(e,t,i)=>{if(t)for(let r of t)x0(r,e,void 0,i)},XR=(e,t,i)=>{VQ(e,t.children,i),t.text&&(e.textContent=t.text),UQ(e,t.properties,i),t.properties&&t.properties.afterCreate&&t.properties.afterCreate.apply(t.properties.bind||t.properties,[e,i,t.vnodeSelector,t.properties,t.children])},x0=(e,t,i,r)=>{let a,p=0,y=e.vnodeSelector,g=t.ownerDocument;if(y==="")a=e.domNode=g.createTextNode(e.text),i!==void 0?t.insertBefore(a,i):t.appendChild(a);else{for(let _=0;_<=y.length;++_){let T=y.charAt(_);if(_===y.length||T==="."||T==="#"){let I=y.charAt(p-1),A=y.slice(p,_);I==="."?a.classList.add(A):I==="#"?a.id=A:(A==="svg"&&(r=fS(r,{namespace:x2})),r.namespace!==void 0?a=e.domNode=g.createElementNS(r.namespace,A):(a=e.domNode=e.domNode||g.createElement(A),A==="input"&&e.properties&&e.properties.type!==void 0&&a.setAttribute("type",e.properties.type)),i!==void 0?t.insertBefore(a,i):a.parentNode!==t&&t.appendChild(a)),p=_+1}}XR(a,e,r)}},I5=(e,t,i)=>{t&&t.split(" ").forEach(r=>{r&&e.classList.toggle(r,i)})},GQ=(e,t,i,r)=>{if(!i)return;let a=!1,p=Object.keys(i),y=p.length;for(let g=0;g<y;g++){let _=p[g],T=i[_],I=t[_];if(_==="class")I!==T&&(I5(e,I,!1),I5(e,T,!0));else if(_==="classes"){let A=e.classList,P=Object.keys(T),N=P.length;for(let D=0;D<N;D++){let z=P[D],q=!!T[z];q!==!!I[z]&&(a=!0,q?A.add(z):A.remove(z))}}else if(_==="styles"){let A=Object.keys(T),P=A.length;for(let N=0;N<P;N++){let D=A[N],z=T[D];z!==I[D]&&(a=!0,z?(KR(z),r.styleApplyer(e,D,z)):r.styleApplyer(e,D,""))}}else if(T||typeof I!="string"||(T=""),_!=="value"||E5(e)){if(T!==I){let A=typeof T;A==="function"&&r.eventHandlerInterceptor||(r.namespace===x2?_==="href"?e.setAttributeNS(ZR,_,T):e.setAttribute(_,T):A==="string"?_==="innerHTML"?e[_]=WR.sanitize(T):_==="role"&&T===""?e.removeAttribute(_):E5(e)&&_ in e?e[_]=T:e.setAttribute(_,T):e[_]!==T&&(e[_]=T),a=!0)}}else{let A=e[_];A!==T&&(e["oninput-value"]?A===e["oninput-value"]:T!==I)&&(e[_]=T,e["oninput-value"]=void 0),T!==I&&(a=!0)}}return a},BQ=(e,t,i,r,a)=>{if(i===r)return!1;r=r||p8;let p,y=(i=i||p8).length,g=r.length,_=0,T=0,I=!1;for(;T<g;){let A=_<y?i[_]:void 0,P=r[T];if(A!==void 0&&yS(A,P))I=dv(A,P,a)||I,_++;else{let N=FQ(i,P,_+1);if(N>=0){for(p=_;p<N;p++)y8(i[p]),Yw(i,p,e,"removed");I=dv(i[N],P,a)||I,_=N+1}else x0(P,t,_<y?i[_].domNode:void 0,a),zQ(P),Yw(r,T,e,"added")}T++}if(y>_)for(p=_;p<y;p++)y8(i[p]),Yw(i,p,e,"removed");return I};dv=(e,t,i)=>{let r=e.domNode,a=!1;if(e===t)return!1;let p=!1;if(t.vnodeSelector===""){if(t.text!==e.text){let y=r.ownerDocument.createTextNode(t.text);return r.parentNode.replaceChild(y,r),t.domNode=y,a=!0,a}t.domNode=r}else t.vnodeSelector.lastIndexOf("svg",0)===0&&(i=fS(i,{namespace:x2})),e.text!==t.text&&(p=!0,t.text===void 0?r.removeChild(r.firstChild):r.textContent=t.text),t.domNode=r,p=BQ(t,r,e.children,t.children,i)||p,p=GQ(r,e.properties,t.properties,i)||p,t.properties&&t.properties.afterUpdate&&t.properties.afterUpdate.apply(t.properties.bind||t.properties,[r,i,t.vnodeSelector,t.properties,t.children]);return p&&t.properties&&t.properties.updateAnimation&&t.properties.updateAnimation(r,t.properties,e.properties),a};let Ey=(e,t)=>({getLastRender:()=>e,update:i=>{if(e.vnodeSelector!==i.vnodeSelector)throw new Error("The selector for the root VNode may not be changed. (consider using dom.merge and add one extra level to the virtual DOM)");let r=e;e=i,dv(r,i,t)},domNode:e.domNode});const qQ={namespace:void 0,performanceLogger:()=>{},eventHandlerInterceptor:void 0,styleApplyer:(e,t,i)=>{t.charAt(0)==="-"?e.style.setProperty(t,i):e.style[t]=i}};let cf=e=>fS(qQ,e),Ll={append:(e,t,i)=>(i=cf(i),x0(t,e,void 0,i),Ey(t,i)),insertBefore:(e,t,i)=>(i=cf(i),x0(t,e.parentNode,e,i),Ey(t,i)),merge:(e,t,i)=>(i=cf(i),t.domNode=e,XR(e,t,i),Ey(t,i)),replace:(e,t,i)=>(i=cf(i),x0(t,e.parentNode,e,i),e.parentNode.removeChild(e),Ey(t,i))},QR,HQ=(e,t)=>{let i=[];for(;e&&e!==t;)i.push(e),e=e.parentNode;return i};QR=Array.prototype.find?(e,t)=>e.find(t):(e,t)=>e.filter(t)[0];let WQ=(e,t)=>{let i=e;return t.forEach(r=>{i=i&&i.children?QR(i.children,a=>a.domNode===r):void 0}),i},JQ=(e,t,i)=>{let r=function(a){i("domEvent",a);let p=t(),y=HQ(a.currentTarget,p.domNode);y.reverse();let g,_=WQ(p.getLastRender(),y);return e.scheduleRender(),_&&(g=_.properties[`on${a.type}`].apply(_.properties.bind||this,arguments)),i("domEventProcessed",a),g};return(a,p,y,g)=>r},m8=e=>{let t,i,r=cf(e),a=r.performanceLogger,p=!0,y=!1,g=[],_=[],T=(A,P,N)=>{let D,z=()=>D;r.eventHandlerInterceptor=JQ(t,z,a),D=A(P,N(),r),g.push(D),_.push(N)},I=()=>{if(i=void 0,p){p=!1,a("renderStart",void 0);for(let A=0;A<g.length;A++){let P=_[A]();a("rendered",void 0),g[A].update(P),a("patched",void 0)}a("renderDone",void 0),p=!0}};return t={renderNow:I,scheduleRender:()=>{i||y||(i=requestAnimationFrame(I))},stop:()=>{i&&(cancelAnimationFrame(i),i=void 0),y=!0},resume:()=>{y=!1,p=!0,t.scheduleRender()},append:(A,P)=>{T(Ll.append,A,P)},insertBefore:(A,P)=>{T(Ll.insertBefore,A,P)},merge:(A,P)=>{T(Ll.merge,A,P)},replace:(A,P)=>{T(Ll.replace,A,P)},detach:A=>{for(let P=0;P<_.length;P++)if(_[P]===A)return _.splice(P,1),g.splice(P,1)[0];throw new Error("renderFunction was not found")}},t},Xa=class extends Ae{constructor(){super(...arguments),this.items=new xe,this._watchUpdatingTracking=new Eh,this._callbacks=new Map,this._projector=m8(),this._hiddenProjector=m8()}get needsRender(){return this.items.length>0}get updating(){var t;return((t=this._watchUpdatingTracking)==null?void 0:t.updating)??!1}initialize(){const t=document.createElement("div");t.className="esri-overlay-surface",this._set("surface",t),this._hiddenSurface=document.createElement("div"),this._hiddenSurface.setAttribute("style","visibility: hidden;"),t.appendChild(this._hiddenSurface),this._watchUpdatingTracking.addOnCollectionChange(()=>this.items,i=>{for(const r of i.added){const a=()=>r.render();this._callbacks.set(r,a),this._projector.append(this.surface,a)}for(const r of i.removed){const a=this._projector.detach(this._callbacks.get(r));this.surface.removeChild(a.domNode),this._callbacks.delete(r)}})}addItem(t){this.items.add(t)}removeItem(t){this.items.remove(t)}destroy(){this.items.removeAll(),this._callbacks.forEach(t=>this._projector.detach(t)),this._callbacks=null,this._projector=null,this._watchUpdatingTracking.destroy()}render(){this._projector.renderNow()}computeBoundingRect(t){const i=this._hiddenSurface,r=this._hiddenProjector;let a;const p=()=>(a=t.render(),a);r.append(i,p),r.renderNow();const y={left:0,top:0,right:0,bottom:0};if(a!=null&&a.domNode){const g=a.domNode.getBoundingClientRect();y.left=g.left,y.top=g.top,y.right=g.right,y.bottom=g.bottom}for(r.detach(p);i.firstChild;)i.removeChild(i.firstChild);return y}overlaps(t,i){const r=this.computeBoundingRect(t),a=this.computeBoundingRect(i);return Math.max(r.left,a.left)<=Math.min(r.right,a.right)&&Math.max(r.top,a.top)<=Math.min(r.bottom,a.bottom)}get hasVisibleItems(){return this.items.some(t=>t.visible)}async prepare(){await document.fonts.load(this._fontString()).catch(()=>{})}renderCanvas(t,i){const r=!!(i!=null&&i.disableDecorations);if(!this.items.some(p=>p.visible&&!(r&&p.isDecoration)))return;const a=t.getContext("2d");a.save(),a.font=this._fontString(),this.items.forEach(p=>{r&&p.isDecoration||(a.save(),p.renderCanvas(a),a.restore())}),a.restore()}_fontString(){return`10px ${getComputedStyle(this.surface).fontFamily}`}};v([S({readOnly:!0})],Xa.prototype,"surface",void 0),v([S({readOnly:!0})],Xa.prototype,"items",void 0),v([S({readOnly:!0})],Xa.prototype,"needsRender",null),v([S({readOnly:!0})],Xa.prototype,"_watchUpdatingTracking",void 0),v([S({readOnly:!0})],Xa.prototype,"updating",null),Xa=v([H("esri.views.overlay.ViewOverlay")],Xa);const g8=Xa,Xw=[0,0];function ZQ(e){const t=(e.ownerDocument||window.document).defaultView,i=e.getBoundingClientRect();return Xw[0]=i.left+((t==null?void 0:t.pageXOffset)??0),Xw[1]=i.top+((t==null?void 0:t.pageYOffset)??0),Xw}function v8(e){e&&(e.textContent="",e.parentNode&&e.parentNode.removeChild(e))}function KQ(e){const t=document.createElement("div");return e.appendChild(t),t}const oc=16,jd=750,YQ=512,XQ=2,QQ=e=>{let t=class extends e{constructor(...i){super(...i),this._freqInfo={freq:oc,time:jd},this._overlayRenderTaskHandle=null,this.height=0,this.messagesCommon=null,this.overlay=null,this.position=null,this.resizing=!1,this.root=null,this.surface=null,this.suspended=!0,this.ui=null,this.userContent=null,this.width=0,this.widthBreakpoint=null,this.addHandles([Le(()=>this.cursor,r=>{const{surface:a}=this;a&&a.setAttribute("data-cursor",r)}),Le(()=>this.navigating,r=>{const{surface:a}=this;a&&a.setAttribute("data-navigating",r.toString())})])}initialize(){this.addHandles([Le(()=>this.ui,(i,r)=>this._handleUIChange(i,r),Pi),this.on("focus",()=>this.notifyChange("focused")),this.on("blur",()=>this.notifyChange("focused"))])}destroy(){var i;this.destroyed||((i=this.ui)==null||i.destroy(),this.container=null)}get container(){return this._get("container")??null}set container(i){const r=this._get("container"),a=cS(i);if(a||typeof i!="string"||ye.getLogger(this).error("#container",`element with id '${i}' not found`),r===a)return;if(this._stopMeasuring(),r&&(r.classList.remove("esri-view"),this._overlayRenderTaskHandle&&(this._overlayRenderTaskHandle.remove(),this._overlayRenderTaskHandle=null),this.overlay&&(this.overlay.destroy(),this._set("overlay",null)),this.root&&(v8(this.root),this._set("root",null)),this.userContent&&(a8(this.userContent,r),v8(this.userContent),this._set("userContent",null))),!a)return this._set("width",0),this._set("height",0),this._set("position",null),this._set("suspended",!0),this._set("surface",null),void this._set("container",null);a.classList.add("esri-view");const p=document.createElement("div");p.className="esri-view-user-storage",a8(a,p),a.appendChild(p),this._set("userContent",p);const y=document.createElement("div");y.className="esri-view-root",a.insertBefore(y,a.firstChild),this._set("root",y);const g=document.createElement("div");g.className="esri-view-surface",g.setAttribute("role","application"),g.tabIndex=0,y.appendChild(g),this._set("surface",g);const _=new g8;y.appendChild(_.surface),this._set("overlay",_),this.addHandles(Le(()=>_.needsRender,T=>{T&&!this._overlayRenderTaskHandle?this._overlayRenderTaskHandle=Dp({render:()=>{var I;return(I=this.overlay)==null?void 0:I.render()}}):this._overlayRenderTaskHandle=Wt(this._overlayRenderTaskHandle)})),this.forceDOMReadyCycle(),this._set("container",a),this._startMeasuring()}get focused(){const i=document.activeElement===this.surface;return document.hasFocus()&&i}get size(){return[this.width,this.height]}blur(){var i;(i=this.surface)==null||i.blur()}focus(){var i;(i=this.surface)==null||i.focus()}pageToContainer(i,r,a){const p=this.position;return i-=p?p[0]:0,r-=p?p[1]:0,a?(a[0]=i,a[1]=r):a=[i,r],a}containerToPage(i,r,a){const p=this.position;return i+=p?p[0]:0,r+=p?p[1]:0,a?(a[0]=i,a[1]=r):a=[i,r],a}_handleUIChange(i,r){this.removeHandles("ui"),r&&r!==i&&r.destroy(),i&&(i.view=this,this.addHandles(Le(()=>this.root,a=>{i.container=a?KQ(a):null},Pi),"ui")),this._set("ui",i)}_stopMeasuring(){this.removeHandles("measuring"),this._get("resizing")&&this._set("resizing",!1)}_startMeasuring(){const i=this._freqInfo;i.freq=oc,i.time=jd;const r=Dp({prepare:y=>{const g=this._measure(),_=this._freqInfo;if(_.time+=y.deltaTime,g&&(_.freq=oc,this._get("resizing")||this._set("resizing",!0)),_.time<_.freq)return;_.time=0;const T=this._position();_.freq=T||g?oc:Math.min(jd,_.freq*XQ),!g&&_.freq>=YQ&&(r.pause(),this._get("resizing")&&this._set("resizing",!1))}}),a=new ResizeObserver(y=>{i.freq=oc,i.time=jd,r.resume()});this.container!=null&&a.observe(this.container);const p=yt(()=>a.disconnect());this.addHandles([v1(window,"resize",()=>{i.freq=oc,i.time=jd,r.resume()}),p,r],"measuring"),this._measure(),this._position()}_measure(){const i=this.container,r=i?i.clientWidth:0,a=i?i.clientHeight:0;if(r===0||a===0)return this.suspended||this._set("suspended",!0),!1;const p=this.width,y=this.height;return r===p&&a===y?(this.suspended&&this._set("suspended",!1),!1):(this._set("width",r),this._set("height",a),this.suspended&&this._set("suspended",!1),this.emit("resize",{oldWidth:p,oldHeight:y,width:r,height:a}),!0)}_position(){const i=this.container,r=this.position,a=i&&ZQ(i);return!!a&&(!r||a[0]!==r[0]||a[1]!==r[1])&&(this._set("position",[a[0],a[1]]),!0)}forceDOMReadyCycle(){}};return v([S()],t.prototype,"container",null),v([S({readOnly:!0})],t.prototype,"focused",null),v([S({readOnly:!0})],t.prototype,"height",void 0),v([S()],t.prototype,"messagesCommon",void 0),v([S({type:g8})],t.prototype,"overlay",void 0),v([S({readOnly:!0})],t.prototype,"position",void 0),v([S({readOnly:!0})],t.prototype,"resizing",void 0),v([S({readOnly:!0})],t.prototype,"root",void 0),v([S({value:null,readOnly:!0})],t.prototype,"size",null),v([S({readOnly:!0})],t.prototype,"surface",void 0),v([S({readOnly:!0})],t.prototype,"suspended",void 0),v([S({nonNullable:!0})],t.prototype,"ui",void 0),v([S({readOnly:!0})],t.prototype,"userContent",void 0),v([S({readOnly:!0})],t.prototype,"width",void 0),v([S()],t.prototype,"widthBreakpoint",void 0),t=v([H("esri.views.DOMContainer")],t),t},eee=ne("mac")?"Meta":"Control",tee=new Set(["Alt","Control","Meta","Shift","Ctrl","Primary"]),iee=e=>tee.has(e);let ree=class{constructor(t,i=[]){this.eventType=t,this.keyModifiers=i}matches(t){if(t.type!==this.eventType)return!1;if(this.keyModifiers.length===0)return!0;const i=t.modifiers;for(const r of this.keyModifiers)if(!i.has(r))return!1;return!0}},ki=class{constructor(t){this._manager=null,this._incoming={},this._outgoing={},this._incomingEventMatches=null,this._incomingEventTypes=null,this._outgoingEventTypes=null,this._hasSideEffects=t}get incomingEventMatches(){if(!this._incomingEventMatches){this._incomingEventMatches=[];for(const t in this._incoming){const i=this._incoming[t];for(const r of i)this._incomingEventMatches.push(r.match)}}return this._incomingEventMatches}get incomingEventTypes(){return this._incomingEventTypes||(this._incomingEventTypes=this.incomingEventMatches.map(t=>t.eventType)),this._incomingEventTypes}get outgoingEventTypes(){return this._outgoingEventTypes||(this._outgoingEventTypes=Object.keys(this._outgoing)),this._outgoingEventTypes}get hasSideEffects(){return this._hasSideEffects}get hasPendingInputs(){return!1}onInstall(t){this._manager||(t.setEventCallback(i=>this._handleEvent(i)),t.setUninstallCallback(()=>this._onUninstall()),this._manager=t)}onUninstall(){}registerIncoming(t,i,r){let a;typeof i=="function"?(r=i,a=[]):a=i||[];const p=typeof t=="string"?new ree(t,a):t,y=()=>{this._incomingEventTypes=null,this._incomingEventMatches=null},g=I=>{const A=this._incoming[I.match.eventType];if(A){const P=A.indexOf(I);A.splice(P,1),y(),this._manager&&this._manager.updateDependencies()}},_=new see(p,r,{onPause:g,onRemove:g,onResume:I=>{const A=this._incoming[I.match.eventType];A&&!A.includes(I)&&(A.push(I),y(),this._manager&&this._manager.updateDependencies())}});let T=this._incoming[p.eventType];return T||(T=[],this._incoming[p.eventType]=T),T.push(_),y(),this._manager&&this._manager.updateDependencies(),_}registerOutgoing(t){if(this._outgoing[t])throw new Error("There is already a callback registered for this outgoing InputEvent: "+t);const i=new nee(t,{onEmit:(r,a,p,y)=>{var g;(g=this._manager)==null||g.emit(r.eventType,a,p,y)},onRemove:r=>{var a;delete this._outgoing[r.eventType],(a=this._manager)==null||a.updateDependencies()}});return this._outgoing[t]=i,this._outgoingEventTypes=null,this._manager&&this._manager.updateDependencies(),i}startCapturingPointer(t){var i;(i=this._manager)==null||i.setPointerCapture(t,!0)}stopCapturingPointer(t){var i;(i=this._manager)==null||i.setPointerCapture(t,!1)}refreshHasPendingInputs(){var t;(t=this._manager)==null||t.refreshHasPendingInputs()}_onUninstall(){this._manager&&(this.onUninstall(),this._manager=null)}_handleEvent(t){var r;const i=this._incoming[t.type];if(i){for(const a of i)if(a.match.matches(t)&&((r=a.callback)==null||r.call(a,t),t.shouldStopPropagation()))break}}},see=class{constructor(t,i,r){this.match=t,this._callback=i,this._handler=r}pause(){this._handler.onPause(this)}resume(){this._handler.onResume(this)}remove(){this._handler.onRemove(this)}get callback(){return this._callback}},nee=class{constructor(t,i){this.eventType=t,this._removed=!1,this._handler=i}emit(t,i,r){this._removed||this._handler.onEmit(this,t,i,r)}remove(){this._removed=!0,this._handler.onRemove(this)}},oee=class extends ki{constructor(t){super(!0),this._onChange=t,this._value="mouse",this._x=null,this._y=null,this.registerIncoming("pointer-move",i=>this._update(i.data))}_update(t){const i=t.native.pointerType==="touch"?"touch":"mouse",{x:r,y:a}=t;i===this._value&&this._x===r&&this._y===a||(this._value=i,this._x=r,this._y=a,this._onChange(i,r,a))}},aee=class{constructor(t,i){this._observable=new T1,this._value=t,this._equalityFunction=i}get value(){return ze(this._observable),this._value}set value(t){this._equalityFunction(t,this._value)||(this._value=t,this._observable.notify())}mutate(t){t(this._value),this._observable.notify()}};function Kp(e,t=BA){return new aee(e,t)}let lee=class extends ki{get multiTouchActive(){return this._multiTouchActive.value}constructor(){super(!0),this._activeTouchPointerIds=new Set,this._multiTouchActive=Kp(!1),this._onPointerAdd=({data:t})=>{t.pointerType==="touch"&&(this._activeTouchPointerIds.add(t.native.pointerId),this._update())},this._onPointerRemove=({data:t})=>{t.pointerType==="touch"&&(this._activeTouchPointerIds.delete(t.native.pointerId),this._update())},this.registerIncoming("pointer-down",this._onPointerAdd),this.registerIncoming("pointer-up",this._onPointerRemove),this.registerIncoming("pointer-capture-lost",this._onPointerRemove),this.registerIncoming("pointer-cancel",this._onPointerRemove)}_update(){this._multiTouchActive.value=this._activeTouchPointerIds.size>1}},uee=class{constructor(t,i){this._owner=i,this._properties={},this._afterDispatchHandle=null;for(const r in t){const a=t[r],p=new hC(a,void 0,void 0,2,2);this._properties[r]={pool:p,acquired:[]}}this._afterDispatchHandle=CV(()=>this._release())}destroy(){this._afterDispatchHandle&&(this._afterDispatchHandle.remove(),this._afterDispatchHandle=null);for(const t in this._properties){const i=this._properties[t];for(const r of i.acquired)h7(r)||i.pool.release(r);i.pool.destroy(),i.pool=null,i.acquired=null}this._properties=null,this._owner=null}get(t){const i=this._owner._get(t),r=this._properties[t];let a=r.pool.acquire();for(r.acquired.push(a);a===i;)r.acquired.push(a),a=r.pool.acquire();return a}_release(){for(const t in this._properties){const i=this._properties[t];let r=0;for(const a of i.acquired)h7(a)?i.acquired[r++]=a:i.pool.release(a);i.acquired.length=r}}},Ps=class extends Ae{constructor(t){super(t),this._pointerCaptures=new Map,this._nameToGroup={},this._handlers=[],this._handlersPriority=[],this._currentPropagation=null,this._updateDependenciesAfterPropagation=!1,this._sourceEvents=new Set,this._keyModifiers=new Set,this._activeKeyModifiers=new Set,this._stoppedPropagationEventIds=new Set,this.primaryKey=eee,this._latestPointerType="mouse",this._propertiesPool=new uee({latestPointerLocation:pee},this),this.latestPointerLocation=null,this._paused=!1,this.test={timestamp:void 0,hasCurrentPropagation:()=>!!this._currentPropagation}}initialize(){this.eventSource.onEventReceived=this._onEventReceived.bind(this),this._installRecognizers()}destroy(){const t=Object.keys(this._nameToGroup);for(const i of t)this.uninstallHandlers(i);this.eventSource.destroy(),this._currentPropagation=null,this._propertiesPool.destroy()}get hasPendingInputs(){return this._handlers.some(t=>t.handler.hasPendingInputs)}get latestPointerType(){return this._latestPointerType}get multiTouchActive(){return this._multiTouchHandler.multiTouchActive}get updating(){return this.hasPendingInputs||this._paused}installHandlers(t,i,r=Gl.INTERNAL){if(this._nameToGroup[t]||i.length===0)return;const a={name:t,handlers:i.map(p=>({handler:p,active:!0,removed:!1,priorityIndex:0,groupPriority:r,eventCallback:null,uninstallCallback:null}))};this._nameToGroup[t]=a;for(let p=a.handlers.length-1;p>=0;p--){const y=a.handlers[p];this._handlers.push(y),y.handler.onInstall({updateDependencies:()=>{this.updateDependencies()},emit:(g,_,T,I,A)=>{this._emitInputEvent(y.priorityIndex+1,g,_,T,A,I)},setPointerCapture:(g,_)=>{this._setPointerCapture(a,y,g,_)},setEventCallback:g=>{y.eventCallback=g},setUninstallCallback:g=>{y.uninstallCallback=g},refreshHasPendingInputs:()=>{this.notifyChange("hasPendingInputs")}})}this.updateDependencies()}uninstallHandlers(t){const i=this._nameToGroup[t];i?(i.handlers.forEach(r=>{var a;r.removed=!0,(a=r.uninstallCallback)==null||a.call(r)}),delete this._nameToGroup[t],this._currentPropagation?this._currentPropagation.needsHandlerGarbageCollect=!0:this._garbageCollectRemovedHandlers()):ye.getLogger(this).error("There is no InputHandler group registered under the name `"+t+"`")}hasHandlers(t){return this._nameToGroup[t]!==void 0}isModifierKeyDown(t){return this._activeKeyModifiers.has(t)}updateDependencies(){if(this._currentPropagation)return void(this._updateDependenciesAfterPropagation=!0);this._updateDependenciesAfterPropagation=!1;const t=new Set,i=new Set;this._handlersPriority=[];for(let r=this._handlers.length-1;r>=0;r--){const a=this._handlers[r];a.priorityIndex=r,this._handlersPriority.push(a)}this._handlersPriority=this._sortHandlersPriority(this._handlersPriority);for(let r=this._handlersPriority.length-1;r>=0;r--){const a=this._handlersPriority[r];a.priorityIndex=r;let p=a.handler.hasSideEffects;if(!p){for(const y of a.handler.outgoingEventTypes)if(t.has(y)){p=!0;break}}if(p)for(const y of a.handler.incomingEventMatches){t.add(y.eventType);for(const g of y.keyModifiers)iee(g)||i.add(g)}a.active=p}this._sourceEvents=t,this._keyModifiers=i,this._pointerCaptures.size>0&&this._sourceEvents.add("pointer-capture-lost"),this._keyModifiers.size>0&&(this._sourceEvents.add("key-down"),this._sourceEvents.add("key-up")),this.eventSource&&(this.eventSource.activeEvents=this._sourceEvents)}_setLatestPointer(t,i,r){this._latestPointerType=t;const a=this._get("latestPointerLocation");if(a==null||a.x!==i||a.y!==r){const p=this._propertiesPool.get("latestPointerLocation");p.x=i,p.y=r,this._set("latestPointerLocation",p)}}_onEventReceived(t,i){if(t==="pointer-capture-lost"){const p=i;this._pointerCaptures.delete(p.native.pointerId)}this._updateKeyModifiers(t,i);const r=this.test.timestamp!=null?this.test.timestamp:i.native?i.native.timestamp:void 0,a=i.native?i.native.cancelable:void 0;this._emitInputEventFromSource(t,i,r,a)}_updateKeyModifiers(t,i){if(!i)return;let r=!1;const a=()=>{r||(this._activeKeyModifiers=new Set(this._activeKeyModifiers),r=!0)},p=(g,_)=>{_&&!this._activeKeyModifiers.has(g)?(a(),this._activeKeyModifiers.add(g)):!_&&this._activeKeyModifiers.has(g)&&(a(),this._activeKeyModifiers.delete(g))};if(t==="key-down"||t==="key-up"){const g=i.key;this._keyModifiers.has(g)&&p(g,t==="key-down")}const y=i.native;p("Alt",!!(y!=null&&y.altKey)),p("Control",!!(y!=null&&y.ctrlKey)),p("Ctrl",!!(y!=null&&y.ctrlKey)),p("Shift",!!(y!=null&&y.shiftKey)),p("Meta",!!(y!=null&&y.metaKey)),p("Primary",this._activeKeyModifiers.has(this.primaryKey))}_installRecognizers(){this._latestPointerHandler=new oee((t,i,r)=>this._setLatestPointer(t,i,r)),this._multiTouchHandler=new lee,this.installHandlers("input-manager-logic",[this._latestPointerHandler,this._multiTouchHandler],Gl.ALWAYS),this.recognizers.length>0&&this.installHandlers("default",this.recognizers,Gl.INTERNAL)}_setPointerCapture(t,i,r,a){const p=t.name+"-"+i.priorityIndex,y=this._pointerCaptures.get(r.pointerId)||new Set;this._pointerCaptures.set(r.pointerId,y),a?(y.add(p),y.size===1&&this.eventSource&&this.eventSource.setPointerCapture(r,!0)):y.has(p)&&(y.delete(p),y.size===0&&(this._pointerCaptures.delete(r.pointerId),this.eventSource&&this.eventSource.setPointerCapture(r,!1)))}_garbageCollectRemovedHandlers(){this._handlers=this._handlers.filter(t=>!t.removed),this.updateDependencies()}_emitInputEventFromSource(t,i,r,a){this._emitInputEvent(0,t,i,r,a)}_emitInputEvent(t,i,r,a,p,y){const g=a!==void 0?a:this._currentPropagation?this._currentPropagation.timestamp:performance.now(),_=p!==void 0&&p,T={event:new hee(i,r,g,y||this._activeKeyModifiers,_),priorityIndex:t};this._currentPropagation?this._currentPropagation.events.push(T):this._doNewPropagation(T)}_doNewPropagation(t){this._currentPropagation={events:new uv,currentHandler:null,needsHandlerGarbageCollect:!1,timestamp:t.event.timestamp},this._currentPropagation.events.push(t),this._continuePropagation()}_continuePropagation(){var i,r,a;this._paused=!1;const t=this._currentPropagation;if(t){for(;t.events.length>0;){const{event:p,priorityIndex:y}=t.events.pop(),g=(i=p.data)==null?void 0:i.eventId;if(!(g!=null&&this._stoppedPropagationEventIds.has(g)))for(t.currentHandler=this._handlersPriority[y];t.currentHandler;){if(t.currentHandler.removed)t.needsHandlerGarbageCollect=!0;else{if(t.currentHandler.active&&!p.shouldStopPropagation()&&((a=(r=t.currentHandler).eventCallback)==null||a.call(r,p)),p.shouldStopPropagation()){g!=null&&this._stoppedPropagationEventIds.add(g);break}if(p.shouldPausePropagation(()=>this._continuePropagation()))return void this._pausePropagation({event:p,priorityIndex:t.currentHandler.priorityIndex+1})}t.currentHandler=this._handlersPriority[t.currentHandler.priorityIndex+1]}}t.needsHandlerGarbageCollect&&this._garbageCollectRemovedHandlers(),this.hasPendingInputs||this._stoppedPropagationEventIds.clear(),this._currentPropagation=null,this._updateDependenciesAfterPropagation&&this.updateDependencies()}}_pausePropagation(t){const i=new uv;i.push(t);const r=this._currentPropagation;if(r){for(;r.events.length;)i.push(r.events.pop());r.events=i,r.currentHandler=null,this._paused=!0}}_compareHandlerPriority(t,i){if(t.handler.hasSideEffects!==i.handler.hasSideEffects)return t.handler.hasSideEffects?1:-1;if(t.groupPriority!==i.groupPriority)return t.groupPriority>i.groupPriority?-1:1;for(const r of t.handler.incomingEventMatches)for(const a of i.handler.incomingEventMatches){if(r.eventType!==a.eventType)continue;const p=r.keyModifiers.filter(y=>a.keyModifiers.includes(y));if(p.length===r.keyModifiers.length!=(p.length===a.keyModifiers.length))return r.keyModifiers.length>a.keyModifiers.length?-1:1}return t.priorityIndex>i.priorityIndex?-1:1}_sortHandlersPriority(t){const i=[];for(const r of t){let a=0;for(;a<i.length&&this._compareHandlerPriority(r,i[a])>=0;)a++;i.splice(a,0,r)}return i}get debug(){const t=i=>{const r=this._setPointerCapture;this._setPointerCapture=()=>{},i(),this._setPointerCapture=r};return{injectEvent:(i,r)=>{t(()=>this._onEventReceived(i,r))},disablePointerCapture:t}}};v([S({readOnly:!0})],Ps.prototype,"hasPendingInputs",null),v([S({constructOnly:!0})],Ps.prototype,"eventSource",void 0),v([S({constructOnly:!0})],Ps.prototype,"recognizers",void 0),v([S()],Ps.prototype,"_latestPointerType",void 0),v([S()],Ps.prototype,"latestPointerType",null),v([S()],Ps.prototype,"multiTouchActive",null),v([S({readOnly:!0})],Ps.prototype,"latestPointerLocation",void 0),v([S()],Ps.prototype,"_paused",void 0),v([S({readOnly:!0})],Ps.prototype,"updating",null),Ps=v([H("esri.views.input.InputManager")],Ps);let hee=class{constructor(t,i,r,a,p){this.type=t,this.data=i,this.timestamp=r,this.modifiers=a,this.cancelable=p,this._propagationState=$l.NONE,this._resumeCallback=null}stopPropagation(){this._propagationState|=$l.STOPPED}shouldStopPropagation(){return!!(this._propagationState&$l.STOPPED)}async(t){this._propagationState|=$l.PAUSED;const i=(r,a)=>{this._propagationState&=~$l.PAUSED;const p=this._resumeCallback;if(this._resumeCallback=null,p&&p(),a)throw r;return r};return(typeof t=="function"?t():t).then(r=>i(r,!1),r=>i(r,!0))}shouldPausePropagation(t){return!!(this._propagationState&$l.PAUSED)&&(this._resumeCallback=t,!0)}preventDefault(){this.data.native.preventDefault()}};var $l;(function(e){e[e.NONE=0]="NONE",e[e.STOPPED=1]="STOPPED",e[e.PAUSED=2]="PAUSED"})($l||($l={}));const Gl={ALWAYS:1,DEFAULT:0,TOOL:-1,WIDGET:-2,INTERNAL:-3};let cee=class{};const pee=cee;function Ba(e){return e!=null&&"open"in e&&"declaredClass"in e}function w8(e){return e!=null&&"declaredClass"in e&&"dockOptions"in e}const dee=e=>{let t=class extends e{constructor(){super(...arguments),this._popupSetupTask=null,this.popup={},this.popupEnabled=!0}initialize(){this.addHandles([Le(()=>[this.ui,this.popup],([i,r],a)=>{const p="popup",y="manual";if(a){const[g,_]=a;g&&Ba(_)&&(_.view=null,w8(_)&&g.remove(_,p))}i&&Ba(r)&&(r.view=this,w8(r)&&i.add(r,{key:p,position:y,internal:!0}))},Pi),this.on("click",i=>{this.popup&&this.popupEnabled&&(i.pointerType!=="mouse"||i.button===0)&&(Ba(this.popup)?this.popup.viewModel.handleViewClick(i):i.async(async()=>{await this.setupPopup(),Ba(this.popup)&&!this.destroyed&&this.ready&&this.popupEnabled&&this.popup.viewModel.handleViewClick(i)}))},Gl.WIDGET)]),y2(()=>this.ready&&this.popupEnabled&&!this.updating).then(()=>{fe(()=>import("./Popup-dybzQ7mi.js").then(i=>i.P),__vite__mapDeps([162,1,163,6,164,165,166,19,167,168,169,73,71,72,7,27,32,170,35,171,172,118,173]))})}destroy(){this.destroyed||this.closePopup()}async openPopup(i){if(Ba(this.popup))return this.popup.open(i);try{if(await this.setupPopup(),!this.popup)return void ye.getLogger(this).error(new Y("view:null-popup","Popup is null and can't be opened"));this.popup.open(i)}catch{}}closePopup(){var i;(i=this._popupSetupTask)==null||i.abort(),Ba(this.popup)&&this.popup.close()}async fetchPopupFeatures(i,r){return await this.when(),this._popupHitsToFeatures(await this._getPopupHits(i,r),r)}async setupPopup(){var i;if((i=this._popupSetupTask)==null||i.abort(),this.popup&&!Ba(this.popup))return this._popupSetupTask=M1(async r=>{const{default:a}=await fe(()=>import("./Popup-dybzQ7mi.js").then(y=>y.P),__vite__mapDeps([162,1,163,6,164,165,166,19,167,168,169,73,71,72,7,27,32,170,35,171,172,118,173]));if(At(r),!this.popup||Ba(this.popup))return;const p=this.popup;delete p.open,delete p.close,this.popup=new a(p)}),this._popupSetupTask.promise}async _popupHitsToFeatures({location:i,hits:r},a){const p=[],y=[];let g=!1;const _=aV(a,ne("popup-view-fetch-timeout")??yee),T=P=>{const N=new fee(P);return y.push(N),p.push(N.promise),N},I=P=>{const N=y.at(-1);return N&&N.layerView===P&&!g?N:T(P)};for(const P of r)"graphic"in P?(I(P.layerView).graphics.push(P.graphic),g=!1):(p.push(P.layerView.fetchPopupFeaturesAtLocation(P.mapPoint,_)),g=!0);y.map(P=>P.resolve(_));const A=oV(p).then(P=>P.filter(N=>!!N).flat());return{pendingFeatures:p,allGraphicsPromise:A,location:i}}async _getPopupHits(i,r){const{hits:a,location:p}=await this.popupHitTest(i);At(r);const y=[];for(const g of a)if("graphic"in g){if(this._isValidPopupGraphic(g.graphic,r)){const _=this._isValidPopupGraphicsLayerView(g.layerView)?g.layerView:void 0;y.push({graphic:g.graphic,layerView:_})}}else this._isValidPopupLocationLayerView(g.layerView)&&y.push({mapPoint:g.mapPoint,layerView:g.layerView});return{hits:y,location:p}}_isValidPopupGraphic(i,r){return i&&!!i.getEffectivePopupTemplate(r==null?void 0:r.defaultPopupTemplateEnabled)}_isValidPopupGraphicsLayerView(i){return!i||(!("layer"in i)||!i.suspended)&&"fetchPopupFeaturesFromGraphics"in i}_isValidPopupLocationLayerView(i){return(!("layer"in i)||!i.suspended)&&"fetchPopupFeaturesAtLocation"in i}};return v([S()],t.prototype,"popup",void 0),v([S()],t.prototype,"popupEnabled",void 0),t=v([H("esri.views.PopupView")],t),t};let fee=class{constructor(t){this.layerView=t,this._resolver=_s(),this.graphics=[]}get promise(){return this._resolver.promise}resolve(t){const{layerView:i,graphics:r,_resolver:a}=this;if(!i)return a.resolve(r),a.promise;let p;return i.fetchPopupFeaturesFromGraphics(r,t).catch(y=>(p=y,null)).then(y=>{y?a.resolve(y):a.reject(p)}),a.promise}};const yee=5e3;let T0=class extends xe{constructor(t){super(t),this.addHandles([this.on("before-add",i=>{i.item==null&&i.preventDefault()}),this.on("after-add",i=>this._own(i.item)),this.on("after-remove",i=>this._release(i.item))])}get owner(){return this._get("owner")}set owner(t){t!==this._get("owner")&&(this._releaseAll(),this._set("owner",t),this._ownAll())}_ownAll(){for(const t of this.items)this._own(t)}_releaseAll(){for(const t of this.items)this._release(t)}_createNewInstance(t){return this.itemType?new(xe.ofType(this.itemType.Type))(t):new xe(t)}};function b8(e,t){return{type:e,cast:gO,set(i){const r=Ta(i,this._get(t),e);r.owner=this,this._set(t,r)}}}v([S()],T0.prototype,"owner",null),T0=v([H("esri.core.support.OwningCollection")],T0);var pf;const fv=qi()({orthometric:"gravity-related-height",gravity_related_height:"gravity-related-height",ellipsoidal:"ellipsoidal"}),eN=fv.jsonValues.slice();yU(eN,"orthometric");const M0=qi()({meter:"meters",foot:"feet","us-foot":"us-feet","clarke-foot":"clarke-feet","clarke-yard":"clarke-yards","clarke-link":"clarke-links","sears-yard":"sears-yards","sears-foot":"sears-feet","sears-chain":"sears-chains","benoit-1895-b-chain":"benoit-1895-b-chains","indian-yard":"indian-yards","indian-1937-yard":"indian-1937-yards","gold-coast-foot":"gold-coast-feet","sears-1922-truncated-chain":"sears-1922-truncated-chains","50-kilometers":"50-kilometers","150-kilometers":"150-kilometers"});let yn=pf=class extends he{constructor(e){super(e),this.heightModel="gravity-related-height",this.heightUnit="meters",this.vertCRS=null}writeHeightModel(e,t,i){return fv.write(e,t,i)}readHeightModel(e,t,i){return fv.read(e)||(i!=null&&i.messages&&i.messages.push(mee(e,{context:i})),null)}readHeightUnit(e,t,i){return M0.read(e)||(i!=null&&i.messages&&i.messages.push(_8(e,{context:i})),null)}readHeightUnitService(e,t,i){return A6(e)||M0.read(e)||(i!=null&&i.messages&&i.messages.push(_8(e,{context:i})),null)}readVertCRS(e,t){return t.vertCRS||t.ellipsoid||t.geoid}clone(){return new pf({heightModel:this.heightModel,heightUnit:this.heightUnit,vertCRS:this.vertCRS})}equals(e){return!!e&&(this===e||this.heightModel===e.heightModel&&this.heightUnit===e.heightUnit&&this.vertCRS===e.vertCRS)}static deriveUnitFromSR(e,t){const i=kO(t);return new pf({heightModel:e.heightModel,heightUnit:i??void 0,vertCRS:e.vertCRS})}write(e,t){return t={origin:"web-scene",...t},super.write(e,t)}static fromJSON(e){if(!e)return null;const t=new pf;return t.read(e,{origin:"web-scene"}),t}};function _8(e,t){return new Ys("height-unit:unsupported",`Height unit of value '${e}' is not supported`,t)}function mee(e,t){return new Ys("height-model:unsupported",`Height model of value '${e}' is not supported`,t)}v([S({type:fv.apiValues,constructOnly:!0,json:{origins:{"web-scene":{type:eN,default:"ellipsoidal",write:{isRequired:!0}}}}})],yn.prototype,"heightModel",void 0),v([be("web-scene","heightModel")],yn.prototype,"writeHeightModel",null),v([me(["web-scene","service"],"heightModel")],yn.prototype,"readHeightModel",null),v([S({type:M0.apiValues,constructOnly:!0,json:{origins:{"web-scene":{type:M0.jsonValues,write:{writer:M0.write,isRequired:!0}}}}})],yn.prototype,"heightUnit",void 0),v([me("web-scene","heightUnit")],yn.prototype,"readHeightUnit",null),v([me("service","heightUnit")],yn.prototype,"readHeightUnitService",null),v([S({type:String,constructOnly:!0,json:{origins:{"web-scene":{write:!0}}}})],yn.prototype,"vertCRS",void 0),v([me("service","vertCRS",["vertCRS","ellipsoid","geoid"])],yn.prototype,"readVertCRS",null),yn=pf=v([H("esri.geometry.HeightModelInfo")],yn);const R1=yn;let yv=class extends T0{constructor(t){super(t),this.addHandles(this.on("before-add",i=>{i.item!=null&&i.item.parent===this.owner&&(ye.getLogger(this).warn("Analysis inside the collection must be unique. Not adding this element again."),i.preventDefault())}))}_own(t){t.parent=this.owner}_release(t){t.parent=null}};yv=v([H("esri.support.AnalysesCollection")],yv);let Qw;async function gee(){return Qw==null&&(Qw=fe(()=>import("./WhereClauseCache-CfQztPdi.js"),__vite__mapDeps([33,34,35])).then(e=>new e.WhereClauseCache(500,500))),Qw}async function tN(e,t){const i=await gee(),r=i.get(e,t);if(r==null)throw i.getError(e,t);return r}function vee(e,t){return e||(e=null),t||(t=null),e==="1=1"?t??e:t==="1=1"?e??t:e&&t?`(${e}) AND (${t})`:e??t}function wee(e,t){return e||(e=null),t||(t=null),e==="1=1"||t==="1=1"||e===t?e==="1=1"?e:t:e&&t?`(${e}) OR (${t})`:e??t}function q3e(e,t){return t.length===0?null:`${e} IN (${bee(t)})`}function bee(e){return e.map(t=>typeof t=="string"?_ee(t):t).join(",")}function _ee(e){return`'${e.replaceAll("'","''")}'`}function S8(e){return typeof e=="number"}function H3e(e){return typeof e=="number"&&isFinite(e)&&Math.floor(e)===e}function W3e(e){return typeof e=="boolean"}function N1(e){return typeof e=="string"||e instanceof String}function See(e){return e==null||N1(e)}function J3e(e){return Array.isArray(e)}function xee(e){return(e==null?void 0:e.declaredClass)==="esri.Graphic"}function Z3e(e){return e instanceof Date}const Tee="HH:mm",Mee="HH:mm:ss",$ee="HH:mm:ss.SSS",Eee=[$ee,Mee,Tee,"TT"],Iee="yyyy-MM-dd";function x8(e){if(!e||!N1(e))return null;const t=Ne.fromFormat(e,Iee);return t.isValid?t:null}function T8(e){return e&&N1(e)?YA(Eee,t=>{const i=Ne.fromFormat(e,t);return i.isValid?i:null})??null:null}function M8(e){if(!e||!N1(e))return null;const t=Ne.fromISO(e);return t.isValid?t:null}var mv;(function(e){e.VALUE_OUT_OF_RANGE="domain-validation-error::value-out-of-range",e.INVALID_CODED_VALUE="domain-validation-error::invalid-coded-value"})(mv||(mv={}));const iN=new Set(["integer","small-integer","big-integer","esriFieldTypeInteger","esriFieldTypeSmallInteger","esriFieldTypeBigInteger"]);function Aee(e){return e!=null&&iN.has(e.type)}function rN(e){return e!=null&&(e.type==="date-only"||e.type==="esriFieldTypeDateOnly")}function sN(e){return e!=null&&(e.type==="timestamp-offset"||e.type==="esriFieldTypeTimestampOffset")}function nN(e){return e!=null&&(e.type==="time-only"||e.type==="esriFieldTypeTimeOnly")}const Cee=new Set(["single","double","esriFieldTypeSingle","esriFieldTypeDouble"]);i6(iN,Cee);function K3e(e,t){const i=e==null?void 0:e.domain;if(!i||i.type!=="range")return;const r="range"in i?i.range[0]:i.minValue,a="range"in i?i.range[1]:i.maxValue,p=Aee(e);return rN(e)||nN(e)||sN(e)?{...Oee(e,a,r),isInteger:p}:{min:r!=null&&typeof r=="number"?r:null,max:a!=null&&typeof a=="number"?a:null,rawMin:r,rawMax:a,isInteger:p}}function Oee(e,t,i){var r,a,p,y,g,_;return rN(e)?{min:(r=x8(i))==null?void 0:r.toMillis(),max:(a=x8(t))==null?void 0:a.toMillis(),rawMin:i,rawMax:t}:nN(e)?{min:(p=T8(i))==null?void 0:p.toMillis(),max:(y=T8(t))==null?void 0:y.toMillis(),rawMin:i,rawMax:t}:sN(e)?{min:(g=M8(i))==null?void 0:g.toMillis(),max:(_=M8(t))==null?void 0:_.toMillis(),rawMin:i,rawMax:t}:{max:null,min:null}}function Pee(e){if(!e)return;const t=e.match(kee);return t!=null&&t.groups?t.groups.doubleQuoted??t.groups.singleQuoted??t.groups.dotNotation:void 0}const kee=/^(\$feature\[(?:"(?<doubleQuoted>[^"]+)"|'(?<singleQuoted>[^']+)')\]|\$feature\.(?<dotNotation>[a-zA-Z_][a-zA-Z0-9_]*))$/i;function Ree(e){var t,i;return((i=(t=e.match(Nee))==null?void 0:t[1])==null?void 0:i.replace(/\\'/g,"'"))??null}const Nee=/^hash\(\$feature\['((\\'|[^'])+)'\]\) \* 8\.381e-8$/;let Cn=class{};function Lee(e){return e instanceof Hh?e===Cn.instance:(e==null?void 0:e.toString().toLowerCase())==="unknown"}function X3e(e){return Lee(e)?Cn.instance:e}Cn.instance=new Qr("Etc/UTC");var gv;(function(e){e.TimeZoneNotRecognized="TimeZoneNotRecognized"})(gv||(gv={}));const Dee={[gv.TimeZoneNotRecognized]:"Timezone identifier has not been recognized."};let jee=class oN extends Error{constructor(t,i){super(Hv(Dee[t],i)),this.declaredRootClass="esri.arcade.arcadedate.dateerror",Error.captureStackTrace&&Error.captureStackTrace(this,oN)}};function ac(e,t,i){return e<t?e-t:e>i?e-i:0}function lc(e,t,i){return e<t?t:e>i?i:e}let Iy=class pi{constructor(t){this._date=t,this.declaredRootClass="esri.arcade.arcadedate"}static fromParts(t=0,i=1,r=1,a=0,p=0,y=0,g=0,_){if(isNaN(t)||isNaN(i)||isNaN(r)||isNaN(a)||isNaN(p)||isNaN(y)||isNaN(g))return null;const T=Ne.local(t,i).daysInMonth;let I=Ne.fromObject({day:lc(r,1,T),year:t,month:lc(i,1,12),hour:lc(a,0,23),minute:lc(p,0,59),second:lc(y,0,59),millisecond:lc(g,0,999)},{zone:mu(_)});return I=I.plus({months:ac(i,1,12),days:ac(r,1,T),hours:ac(a,0,23),minutes:ac(p,0,59),seconds:ac(y,0,59),milliseconds:ac(g,0,999)}),new pi(I)}static get systemTimeZoneCanonicalName(){return Intl.DateTimeFormat().resolvedOptions().timeZone??"system"}static arcadeDateAndZoneToArcadeDate(t,i){const r=mu(i);return t.isUnknownTimeZone||r===Cn.instance?pi.fromParts(t.year,t.monthJS+1,t.day,t.hour,t.minute,t.second,t.millisecond,r):new pi(t._date.setZone(r))}static dateJSToArcadeDate(t){return new pi(Ne.fromJSDate(t,{zone:"system"}))}static dateJSAndZoneToArcadeDate(t,i="system"){const r=mu(i);return new pi(Ne.fromJSDate(t,{zone:r}))}static unknownEpochToArcadeDate(t){return new pi(Ne.fromMillis(t,{zone:Cn.instance}))}static unknownDateJSToArcadeDate(t){return new pi(Ne.fromMillis(t.getTime(),{zone:Cn.instance}))}static epochToArcadeDate(t,i="system"){const r=mu(i);return new pi(Ne.fromMillis(t,{zone:r}))}static dateTimeToArcadeDate(t){return new pi(t)}clone(){return new pi(this._date)}changeTimeZone(t){const i=mu(t);return pi.dateTimeToArcadeDate(this._date.setZone(i))}static dateTimeAndZoneToArcadeDate(t,i){const r=mu(i);return t.zone===Cn.instance||r===Cn.instance?pi.fromParts(t.year,t.month,t.day,t.hour,t.minute,t.second,t.millisecond,r):new pi(t.setZone(r))}static nowToArcadeDate(t){const i=mu(t);return new pi(Ne.fromJSDate(new Date,{zone:i}))}static nowUTCToArcadeDate(){return new pi(Ne.utc())}get isSystem(){return this.timeZone==="system"||this.timeZone===pi.systemTimeZoneCanonicalName}equals(t){return this.isSystem&&t.isSystem?this.toNumber()===t.toNumber():this.isUnknownTimeZone===t.isUnknownTimeZone&&this._date.equals(t._date)}get isUnknownTimeZone(){return this._date.zone===Cn.instance}get isValid(){return this._date.isValid}get hour(){return this._date.hour}get second(){return this._date.second}get day(){return this._date.day}get dayOfWeekISO(){return this._date.weekday}get dayOfWeekJS(){let t=this._date.weekday;return t>6&&(t=0),t}get millisecond(){return this._date.millisecond}get monthISO(){return this._date.month}get weekISO(){return this._date.weekNumber}get yearISO(){return this._date.weekYear}get monthJS(){return this._date.month-1}get year(){return this._date.year}get minute(){return this._date.minute}get zone(){return this._date.zone}get timeZoneOffset(){return this.isUnknownTimeZone?0:this._date.offset}get timeZone(){if(this.isUnknownTimeZone)return"unknown";if(this._date.zone.type==="system")return"system";const t=this.zone;return t.type==="fixed"?t.fixed===0?"UTC":t.formatOffset(0,"short"):t.name}stringify(){return JSON.stringify(this.toJSDate())}plus(t){return new pi(this._date.plus(t))}diff(t,i="milliseconds"){return this._date.diff(t._date,i)[i]}toISODate(){return this._date.toISODate()}toISOString(t){return t?this._date.toISO({suppressMilliseconds:!0,includeOffset:!this.isUnknownTimeZone}):this._date.toISO({includeOffset:!this.isUnknownTimeZone})}toISOTime(t,i){return this._date.toISOTime({suppressMilliseconds:t,includeOffset:i&&!this.isUnknownTimeZone})}toFormat(t,i){return this.isUnknownTimeZone&&(t=t.replaceAll("Z","")),this._date.toFormat(t,i)}toJSDate(){return this._date.toJSDate()}toSQLValue(){return this._date.toFormat("yyyy-LL-dd HH:mm:ss")}toSQLWithKeyword(){return`timestamp '${this.toSQLValue()}'`}toDateTime(){return this._date}toNumber(){return this._date.toMillis()}getTime(){return this._date.toMillis()}toUTC(){return new pi(this._date.toUTC())}toLocal(){return new pi(this._date.toLocal())}toString(){return this.toISOString(!0)}static fromReaderAsTimeStampOffset(t){if(!t)return null;const i=Ne.fromISO(t,{setZone:!0});return new pi(i)}};function mu(e,t=!0){if(e instanceof Hh)return e;if(e.toLowerCase()==="system")return"system";if(e.toLowerCase()==="utc")return"UTC";if(e.toLowerCase()==="unknown")return Cn.instance;if(/^[+-]?[0-9]{1,2}([:][0-9]{2})?$/.test(e)){const r=Vi.parseSpecifier("UTC"+(e.startsWith("+")||e.startsWith("-")?"":"+")+e);if(r)return r}const i=Qr.create(e);if(!i.isValid){if(t)throw new jee(gv.TimeZoneNotRecognized);return null}return i}const Fee=()=>ye.getLogger("esri.support.arcadeOnDemand"),zee=["geometry","scale","timeProperties"];function Q3e(e,t){if(t!=null)for(const i of zee)t.hasArcadeDependency(i)&&e.add(i);return e}let eb;function Ql(){return eb||(eb=(async()=>{const e=await fe(()=>import("./arcadeUtils-DCwswLkL.js"),__vite__mapDeps([174,175,176,177,170,35,44,31,27,7,32,34]));return{arcade:e.arcade,arcadeUtils:e,Dictionary:e.Dictionary,Feature:e.arcadeFeature,Voxel:e.Voxel}})()),eb}const e5e=(e,t,i)=>aN.create(e,t,i,null,["$feature","$view"],[]),Uee=(e,t,i,r)=>aN.create(e,t,i,r,["$feature","$view"],[]);let aN=class lN{constructor(t,i,r,a,p,y,g){this._dependencies=new Map,this.services=null,this.script=t,this.evaluate=a;const _=Array.isArray(y)?y:y==null?void 0:y.fields;this.fields=_??[],this._syntaxTree=r,this._arcade=i,this._arcadeFeature=p,this._spatialReference=g,this._dependencies.set("geometry",i.scriptTouchesGeometry(this._syntaxTree)),this._dependencies.set("scale",this._arcade.referencesMember(this._syntaxTree,"scale")),this._dependencies.set("timeProperties",this._arcade.scriptUsesViewProperties(this._syntaxTree,["timeProperties"]))}static async create(t,i,r,a,p,y){const{arcade:g,Feature:_,Dictionary:T}=await Ql(),I=i instanceof qe?i:qe.fromJSON(i);let A;try{A=g.parseScript(t,y)}catch(Se){return Fee().error(new Y("arcade-bad-expression","Failed to parse arcade script",{script:t,error:Se})),null}const P=p.reduce((Se,Ee)=>({...Se,[Ee]:null}),{});let N=null;a!=null&&(N=new T(a),N.immutable=!0,P.$config=null);const D=g.scriptUsesGeometryEngine(A),z=D&&g.enableGeometrySupport(),q=g.scriptUsesFeatureSet(A)&&g.enableFeatureSetSupport(),J=g.scriptIsAsync(A),ee=J&&g.enableAsyncSupport(),X={vars:P,spatialReference:I,useAsync:!!ee};await Promise.all([z,q,ee]);const ie=new Set;await g.loadDependentModules(ie,A,null,J,D);const oe=new T;oe.immutable=!1,oe.setField("scale",0);const ue=g.compileScript(A,X),ge=(Se,Ee)=>{var ke;const Ie=(ke=Se.$view)==null?void 0:ke.timeZone;if("$view"in Se&&Se.$view){let je;if(oe.setField("scale",typeof Se.$view=="object"&&"scale"in Se.$view?Se.$view.scale:void 0),typeof Se.$view=="object"&&"timeProperties"in Se.$view&&Se.$view.timeProperties!=null){const{currentStart:st,currentEnd:Ve}=Se.$view.timeProperties;je=new T({currentStart:st!=null?Ie!=null?Iy.epochToArcadeDate(st,Ie):Iy.unknownEpochToArcadeDate(st):void 0,currentEnd:Ve!=null?Ie!=null?Iy.epochToArcadeDate(Ve,Ie):Iy.unknownEpochToArcadeDate(Ve):void 0,startIncluded:!0,endIncluded:!0})}oe.setField("timeProperties",je),Se.$view=oe}return N&&(Se.$config=N),ue({vars:Se,spatialReference:I,services:Ee,timeZone:Ie})};return new lN(t,g,A,ge,new _,r,I)}repurposeFeature(t){return t.geometry&&!t.geometry.spatialReference&&(t.geometry.spatialReference=this._spatialReference),this._arcadeFeature.repurposeFromGraphicLikeObject(t.geometry,t.attributes,{fields:this.fields}),this._arcadeFeature}references(t){return this._dependencies.get(t)??!1}};const Vee=/^([0-9_])/,Gee=/[^a-z0-9_\u0080-\uffff]+/gi;function Bee(e){return e==null?null:e.trim().replaceAll(Gee,"_").replace(Vee,"F$1")||null}const qee=["field","field2","field3","normalizationField","rotationInfo.field","proportionalSymbolInfo.field","proportionalSymbolInfo.normalizationField","colorInfo.field","colorInfo.normalizationField"],Hee=["field","normalizationField"];function $8(e,t){if(e!=null&&t!=null){for(const i of Array.isArray(e)?e:[e])if(E8(qee,i,t),"visualVariables"in i&&i.visualVariables)for(const r of i.visualVariables)E8(Hee,r,t)}}function E8(e,t,i){if(e)for(const r of e){const a=qv(r,t),p=a&&typeof a!="function"&&i.get(a);p&&Bi(r,p.name,t)}}function uN(e,t){var i;if(e!=null&&((i=t==null?void 0:t.fields)!=null&&i.length))if("startField"in e){const r=t.get(e.startField),a=t.get(e.endField);e.startField=(r==null?void 0:r.name)??null,e.endField=(a==null?void 0:a.name)??null}else{const r=t.get(e.startTimeField),a=t.get(e.endTimeField);e.startTimeField=(r==null?void 0:r.name)??null,e.endTimeField=(a==null?void 0:a.name)??null}}const tb=new Set;function T2(e,t){return e&&t?(tb.clear(),jh(tb,e,t),Array.from(tb).sort()):[]}function jh(e,t,i){var r;if(i)if((r=t==null?void 0:t.fields)!=null&&r.length)if(i.includes("*"))for(const{name:a}of t.fields)e.add(a);else for(const a of i)Cr(e,t,a);else{if(i.includes("*"))return e.clear(),void e.add("*");for(const a of i)a!=null&&e.add(a)}}function Cr(e,t,i){if(typeof i=="string")if(t){const r=t.get(i);r&&e.add(r.name)}else e.add(i)}function t5e(e,t){return t==null||e==null?[]:t.includes("*")?(e.fields??[]).map(i=>i.name):t}function i5e(e,t,i=1){if(!t||!e)return[];if(t.includes("*"))return["*"];const r=T2(e,t);return r.length/e.fields.length>=i?["*"]:r}async function vr(e,t,i){var p;if(!i)return;let r;const a=Pee(i);if(a)r=[a];else{const{arcadeUtils:y}=await Ql();r=y.extractFieldNames(i,(p=t==null?void 0:t.fields)==null?void 0:p.map(g=>g.name))}for(const y of r)Cr(e,t,y)}async function mS(e,t,i){if(i&&i!=="1=1"){const r=await tN(i,t);if(!r.isStandardized)throw new Y("fieldUtils:collectFilterFields","Where clause is not standardized",{where:i});jh(e,t,r.fieldNames)}}function Wee({displayField:e,fields:t}){return e||(t!=null&&t.length?ib(t,"name-or-title")||ib(t,"unique-identifier")||ib(t,"type-or-category")||Jee(t):null)}function Jee(e){for(const t of e){if(!(t!=null&&t.name))continue;const i=t.name.toLowerCase();if(i.includes("name")||i.includes("title"))return t.name}return null}function ib(e,t){for(const i of e)if(i!=null&&i.valueType&&i.valueType===t)return i.name;return null}async function r5e(e,t){var r;if(!t)return;const i=(r=t.elevationInfo)==null?void 0:r.featureExpressionInfo;return i?i.collectRequiredFields(e,t.fieldsIndex):void 0}function Zee(e,t,i){i.onStatisticExpression?vr(e,t,i.onStatisticExpression.expression):e.add(i.onStatisticField)}async function s5e(e,t,i){if(!t||!i||!("fields"in i))return;const r=[],a=i.popupTemplate;r.push(hN(e,t,a)),i.fields&&r.push(...i.fields.map(async p=>Zee(e,t.fieldsIndex,p))),await Promise.all(r)}async function n5e(e,t){var p,y,g;const{fieldsIndex:i,trackInfo:r}=t;if(!t||!r||!i)return;const a=[(p=r.latestObservations.renderer)==null?void 0:p.collectRequiredFields(e,i),(y=r.previousObservations.renderer)==null?void 0:y.collectRequiredFields(e,i),(g=r.trackLines.renderer)==null?void 0:g.collectRequiredFields(e,i)];r.popupTemplate&&a.push(hN(e,t,r.popupTemplate));for(const _ of[r.latestObservations.labelingInfo,r.previousObservations.labelingInfo,r.trackLines.labelingInfo])if(_)for(const T of _)a.push(dN(e,i,T));await Promise.all(a)}async function hN(e,t,i){const r=[];i!=null&&i.expressionInfos&&r.push(...i.expressionInfos.map(p=>vr(e,t.fieldsIndex,p.expression)));const a=i==null?void 0:i.content;if(Array.isArray(a))for(const p of a)p.type==="expression"&&p.expressionInfo&&r.push(vr(e,t.fieldsIndex,p.expressionInfo.expression));await Promise.all(r)}async function o5e(e,t,i){t&&(t.timeInfo&&(i!=null&&i.timeExtent)&&jh(e,t.fieldsIndex,[t.timeInfo.startField,t.timeInfo.endField]),t.floorInfo&&jh(e,t.fieldsIndex,[t.floorInfo.floorField]),(i==null?void 0:i.where)!=null&&await mS(e,t.fieldsIndex,i.where))}async function a5e(e,t,i){t&&i&&await Promise.all(i.map(r=>Kee(e,t,r)))}async function Kee(e,t,i){t&&i&&(i.valueExpression?await vr(e,t.fieldsIndex,i.valueExpression):i.field&&Cr(e,t.fieldsIndex,i.field))}function l5e(e){return e?T2(e.fieldsIndex,cN(e)):[]}function Yee(e){if(!e)return[];const t=e.geometryFieldsInfo;return t?T2(e.fieldsIndex,[t.shapeAreaField,t.shapeLengthField]):[]}async function u5e(e,t,i){if(!t||!i)return;const r=t.fieldsIndex;await Promise.all(i.filters.map(a=>mS(e,r,a.where)))}const Xee=new Set(["oid","global-id","guid"]),Qee=new Set(["oid","global-id"]),ete=[/^fnode_$/i,/^tnode_$/i,/^lpoly_$/i,/^rpoly_$/i,/^poly_$/i,/^shape$/i,/^shape_$/i,/^subclass$/i,/^subclass_$/i,/^rings_ok$/i,/^rings_nok$/i,/perimeter/i,/objectid/i,/_i$/i];function tte(e){const t=new Set;pN(e).forEach(r=>t.add(r)),Yee(e).forEach(r=>t.add(r.toLowerCase()));const i=e&&"infoFor3D"in e?e.infoFor3D:void 0;return i&&(Object.values(i.assetMapFieldRoles).forEach(r=>t.add(r.toLowerCase())),Object.values(i.transformFieldRoles).forEach(r=>t.add(r.toLowerCase()))),Array.from(t)}function cN(e){if(!e)return[];const t="editFieldsInfo"in e&&e.editFieldsInfo;if(!t)return[];const{creationDateField:i,creatorField:r,editDateField:a,editorField:p}=t;return[i,r,a,p].filter(Boolean)}function pN(e){return cN(e).map(t=>t.toLowerCase())}function ite(e,t){var i;return e.editable&&!Xee.has(e.type)&&!pN(t).includes(((i=e.name)==null?void 0:i.toLowerCase())??"")}function rte(e,t){var r;const i=((r=e.name)==null?void 0:r.toLowerCase())??"";return!((t==null?void 0:t.objectIdField)!=null&&i===t.objectIdField.toLowerCase()||(t==null?void 0:t.globalIdField)!=null&&i===t.globalIdField.toLowerCase()||tte(t).includes(i)||Qee.has(e.type)||ete.some(a=>a.test(i)))}async function h5e(e,t){const{labelingInfo:i,fieldsIndex:r}=t;i!=null&&i.length&&await Promise.all(i.map(a=>dN(e,r,a)))}async function dN(e,t,i){if(!i)return;const r=i.getLabelExpression(),a=i.where;if(r.type==="arcade")await vr(e,t,r.expression);else{const p=r.expression.match(/{[^}]*}/g);p&&p.forEach(y=>{Cr(e,t,y.slice(1,-1))})}await mS(e,t,a)}function ste(e){const t=e.defaultValue;return t!==void 0&&yN(e,t)?t:e.nullable?null:void 0}function c5e(e){const t=typeof e=="string"?{type:e}:e;return vN(t)?255:t.type==="esriFieldTypeDate"||t.type==="date"?8:void 0}function fN(e){return typeof e=="number"&&!isNaN(e)&&isFinite(e)}function nte(e){return e===null||fN(e)}function ote(e){return e===null||Number.isInteger(e)}function ate(){return!0}function yN(e,t){let i;switch(e.type){case"date":case"integer":case"long":case"small-integer":case"big-integer":case"esriFieldTypeDate":case"esriFieldTypeInteger":case"esriFieldTypeLong":case"esriFieldTypeSmallInteger":case"esriFieldTypeBigInteger":i=e.nullable?ote:Number.isInteger;break;case"double":case"single":case"esriFieldTypeSingle":case"esriFieldTypeDouble":i=e.nullable?nte:fN;break;case"string":case"esriFieldTypeString":i=e.nullable?See:N1;break;default:i=ate}return arguments.length===1?i:i(t)}const lte=["integer","small-integer","big-integer"],ute=["single","double"],hte=["esriFieldTypeInteger","esriFieldTypeSmallInteger","esriFieldTypeBigInteger"],cte=["esriFieldTypeSingle","esriFieldTypeDouble"],mN=new Set([...lte,...hte]),pte=new Set([...ute,...cte]),dte=i6(mN,pte);function fte(e){return e!=null&&mN.has(e.type)}function gN(e){return e!=null&&dte.has(e.type)}function vN(e){return e!=null&&(e.type==="string"||e.type==="esriFieldTypeString")}function yte(e){return e!=null&&(e.type==="date"||e.type==="esriFieldTypeDate")}function p5e(e){return e!=null&&(e.type==="date-only"||e.type==="esriFieldTypeDateOnly")}function d5e(e){return e!=null&&(e.type==="timestamp-offset"||e.type==="esriFieldTypeTimestampOffset")}function mte(e){return e!=null&&(e.type==="time-only"||e.type==="esriFieldTypeTimeOnly")}function I8(e){return e!=null&&(e.type==="oid"||e.type==="esriFieldTypeOID")}function A8(e){return e!=null&&(e.type==="global-id"||e.type==="esriFieldTypeGlobalID")}function f5e(e,t){return gte(e,t)===null}var vv,wv;function y5e(e){return e==null||typeof e=="number"&&isNaN(e)?null:e}function gte(e,t){return e==null||e.nullable&&t===null?null:yN(e,t)?gN(e)&&!vte(e.type,Number(t))?vv.OUT_OF_RANGE:null:wv.INVALID_TYPE}function vte(e,t){const i=typeof e=="string"?wN(e):e;if(!i)return!1;const r=i.min,a=i.max;return i.isInteger?Number.isInteger(t)&&t>=r&&t<=a:t>=r&&t<=a}function wN(e){switch(e){case"esriFieldTypeSmallInteger":case"small-integer":return wte;case"esriFieldTypeInteger":case"integer":return bte;case"esriFieldTypeBigInteger":case"big-integer":return _te;case"esriFieldTypeSingle":case"single":return Ste;case"esriFieldTypeDouble":case"double":return xte}}(function(e){e.OUT_OF_RANGE="numeric-range-validation-error::out-of-range"})(vv||(vv={})),function(e){e.INVALID_TYPE="type-validation-error::invalid-type"}(wv||(wv={}));const wte={min:-32768,max:32767,isInteger:!0,rawMin:-32768,rawMax:32767},bte={min:-2147483648,max:2147483647,isInteger:!0,rawMin:-2147483648,rawMax:2147483647},_te={min:-Number.MAX_SAFE_INTEGER,max:Number.MAX_SAFE_INTEGER,isInteger:!0,rawMin:-Number.MAX_SAFE_INTEGER,rawMax:Number.MAX_SAFE_INTEGER},Ste={min:-34e37,max:12e37,isInteger:!1,rawMin:-34e37,rawMax:12e37},xte={min:-Number.MAX_VALUE,max:Number.MAX_VALUE,isInteger:!1,rawMin:-Number.MAX_VALUE,rawMax:Number.MAX_VALUE};function m5e(e,t,i){switch(e){case mv.INVALID_CODED_VALUE:return`Value ${i} is not in the coded domain - field: ${t.name}, domain: ${JSON.stringify(t.domain)}`;case mv.VALUE_OUT_OF_RANGE:return`Value ${i} is out of the range of valid values - field: ${t.name}, domain: ${JSON.stringify(t.domain)}`;case wv.INVALID_TYPE:return`Value ${i} is not a valid value for the field type - field: ${t.name}, type: ${t.type}, nullable: ${t.nullable}`;case vv.OUT_OF_RANGE:{const{min:r,max:a}=wN(t.type);return`Value ${i} is out of range for the number type - field: ${t.name}, type: ${t.type}, value range is ${r} to ${a}`}}}function Tte(e,t){return!Mte(e,t,null)}function Mte(e,t,i){if(!(t!=null&&t.attributes)||!e)return!0;const r=new Set(Object.keys(t.attributes));let a=!1;for(const p of e)if(!r.has(p)&&(a=!0,i==null))break;return a}function $te(e){return!!e&&["raster.itempixelvalue","raster.servicepixelvalue"].some(t=>e.toLowerCase().startsWith(t))}function gS(e){const t=e==null?void 0:e.match(/{[^}]+}/g);return t?t.map(i=>i.slice(1,-1).split(":")[0].trim()):[]}let Am=class extends he{constructor(t){super(t),this.type=null}};v([S({type:["attachments","custom","fields","media","text","expression","relationship","utility-network-associations"],readOnly:!0,json:{read:!1,write:!0}})],Am.prototype,"type",void 0),Am=v([H("esri.popup.content.Content")],Am);const Oa=Am,Ay=new rt({asc:"ascending",desc:"descending"});let df=class extends at.ClonableMixin(he){constructor(t){super(t),this.field=null,this.order="ascending"}};v([S({type:String,json:{write:!0}})],df.prototype,"field",void 0),v([S({type:Ay.apiValues,json:{type:Ay.jsonValues,read:Ay.read,write:Ay.write}})],df.prototype,"order",void 0),df=v([H("esri.popup.support.AttachmentsOrderByInfo")],df);const Ete=df;let Qa=class extends at.ClonableMixin(Oa){constructor(t){super(t),this.description=null,this.displayType="auto",this.orderByFields=null,this.title=null,this.type="attachments"}};v([S({type:String,json:{write:!0}})],Qa.prototype,"description",void 0),v([S({type:["auto","preview","list"],json:{write:!0}})],Qa.prototype,"displayType",void 0),v([S({type:[Ete],json:{write:!0}})],Qa.prototype,"orderByFields",void 0),v([S({type:String,json:{write:!0}})],Qa.prototype,"title",void 0),v([S({type:["attachments"],readOnly:!0,json:{read:!1,write:{isRequired:!0}}})],Qa.prototype,"type",void 0),Qa=v([H("esri.popup.content.AttachmentsContent")],Qa);const Yp=Qa;var A5;let Ou=A5=class extends Oa{constructor(e){super(e),this.creator=null,this.destroyer=null,this.outFields=null,this.type="custom"}clone(){return new A5({creator:this.creator,destroyer:this.destroyer,outFields:Array.isArray(this.outFields)?te(this.outFields):null})}};v([S()],Ou.prototype,"creator",void 0),v([S()],Ou.prototype,"destroyer",void 0),v([S()],Ou.prototype,"outFields",void 0),v([S({type:["custom"],readOnly:!0})],Ou.prototype,"type",void 0),Ou=A5=v([H("esri.popup.content.CustomContent")],Ou);const Ite=Ou;var C5;let xc=C5=class extends he{constructor(e){super(e),this.title=null,this.expression=null,this.returnType="dictionary"}clone(){return new C5({title:this.title,expression:this.expression})}};v([S({type:String,json:{write:!0}})],xc.prototype,"title",void 0),v([S({type:String,json:{write:!0}})],xc.prototype,"expression",void 0),v([S({type:["dictionary"],readOnly:!0,json:{read:!1,write:!0}})],xc.prototype,"returnType",void 0),xc=C5=v([H("esri.popup.ElementExpressionInfo")],xc);const Ate=xc;var O5;let ff=O5=class extends Oa{constructor(e){super(e),this.expressionInfo=null,this.type="expression"}clone(){var e;return new O5({expressionInfo:(e=this.expressionInfo)==null?void 0:e.clone()})}};v([S({type:Ate,json:{write:!0}})],ff.prototype,"expressionInfo",void 0),v([S({type:["expression"],readOnly:!0,json:{read:!1,write:!0}})],ff.prototype,"type",void 0),ff=O5=v([H("esri.popup.content.ExpressionContent")],ff);const M2=ff;let Tc=class extends at.ClonableMixin(he){constructor(t){super(t),this.dateFormat=null,this.digitSeparator=!1,this.places=null}};v([Re(_J)],Tc.prototype,"dateFormat",void 0),v([S({type:Boolean,json:{write:!0}})],Tc.prototype,"digitSeparator",void 0),v([S({type:ft,json:{write:!0}})],Tc.prototype,"places",void 0),Tc=v([H("esri.popup.support.FieldInfoFormat")],Tc);const Cm=Tc;var P5;let mn=P5=class extends he{constructor(e){super(e),this.fieldName=null,this.format=void 0,this.isEditable=!0,this.label=null,this.stringFieldOption="text-box",this.statisticType=null,this.tooltip=null,this.visible=!0}clone(){var e;return new P5({fieldName:this.fieldName,format:(e=this.format)==null?void 0:e.clone(),isEditable:this.isEditable,label:this.label,stringFieldOption:this.stringFieldOption,statisticType:this.statisticType,tooltip:this.tooltip,visible:this.visible})}};v([S({type:String,json:{write:!0}})],mn.prototype,"fieldName",void 0),v([S({type:Cm,json:{write:!0}})],mn.prototype,"format",void 0),v([S({type:Boolean,json:{write:{alwaysWriteDefaults:!0},default:!0}})],mn.prototype,"isEditable",void 0),v([S({type:String,json:{write:!0}})],mn.prototype,"label",void 0),v([Re(new rt({richtext:"rich-text",textarea:"text-area",textbox:"text-box"}),{default:"text-box"})],mn.prototype,"stringFieldOption",void 0),v([S({type:["count","sum","min","max","avg","stddev","var"],json:{write:!0}})],mn.prototype,"statisticType",void 0),v([S({type:String,json:{write:!0}})],mn.prototype,"tooltip",void 0),v([S({type:Boolean,json:{write:!0}})],mn.prototype,"visible",void 0),mn=P5=v([H("esri.popup.FieldInfo")],mn);const vS=mn;var k5;let Vo=k5=class extends Oa{constructor(e){super(e),this.attributes=null,this.description=null,this.fieldInfos=null,this.title=null,this.type="fields"}writeFieldInfos(e,t){t.fieldInfos=e&&e.map(i=>i.toJSON())}clone(){return new k5(te({attributes:this.attributes,description:this.description,fieldInfos:this.fieldInfos,title:this.title}))}};v([S({type:Object,json:{write:!0}})],Vo.prototype,"attributes",void 0),v([S({type:String,json:{write:!0}})],Vo.prototype,"description",void 0),v([S({type:[vS]})],Vo.prototype,"fieldInfos",void 0),v([be("fieldInfos")],Vo.prototype,"writeFieldInfos",null),v([S({type:String,json:{write:!0}})],Vo.prototype,"title",void 0),v([S({type:["fields"],readOnly:!0,json:{read:!1,write:{isRequired:!0}}})],Vo.prototype,"type",void 0),Vo=k5=v([H("esri.popup.content.FieldsContent")],Vo);const Xp=Vo;let Pu=class extends he{constructor(t){super(t),this.altText=null,this.caption="",this.title="",this.type=null}};v([S({type:String,json:{write:!0}})],Pu.prototype,"altText",void 0),v([S({type:String,json:{write:!0}})],Pu.prototype,"caption",void 0),v([S({type:String,json:{write:!0}})],Pu.prototype,"title",void 0),v([S({type:["image","bar-chart","column-chart","line-chart","pie-chart"],readOnly:!0,json:{read:!1,write:!0}})],Pu.prototype,"type",void 0),Pu=v([H("esri.popup.content.mixins.MediaInfo")],Pu);const wS=Pu;var R5;let ku=R5=class extends Ae{constructor(e){super(e),this.color=null,this.fieldName=null,this.tooltip=null,this.value=null}clone(){var e;return new R5({color:(e=this.color)==null?void 0:e.clone(),fieldName:this.fieldName,tooltip:this.tooltip,value:this.value})}};v([S()],ku.prototype,"color",void 0),v([S()],ku.prototype,"fieldName",void 0),v([S()],ku.prototype,"tooltip",void 0),v([S()],ku.prototype,"value",void 0),ku=R5=v([H("esri.popup.content.support.ChartMediaInfoValueSeries")],ku);const Cte=ku;var N5;let el=N5=class extends he{constructor(e){super(e),this.colors=null,this.fields=[],this.normalizeField=null,this.series=[],this.tooltipField=null}clone(){return new N5({colors:te(this.colors),fields:te(this.fields),normalizeField:this.normalizeField,series:te(this.series),tooltipField:this.tooltipField})}};v([S({type:[De],json:{type:[[ft]],write:!0}})],el.prototype,"colors",void 0),v([S({type:[String],json:{write:{isRequired:!0}}})],el.prototype,"fields",void 0),v([S({type:String,json:{write:!0}})],el.prototype,"normalizeField",void 0),v([S({type:[Cte],json:{read:!1}})],el.prototype,"series",void 0),v([S({type:String,json:{write:!0}})],el.prototype,"tooltipField",void 0),el=N5=v([H("esri.popup.content.support.ChartMediaInfoValue")],el);const Ote=el;let yf=class extends wS{constructor(t){super(t),this.type=null,this.value=void 0}};v([S({type:["bar-chart","column-chart","line-chart","pie-chart"],readOnly:!0,json:{read:!1,write:!0}})],yf.prototype,"type",void 0),v([S({type:Ote,json:{write:{isRequired:!0}}})],yf.prototype,"value",void 0),yf=v([H("esri.popup.content.mixins.ChartMediaInfo")],yf);const $2=yf,E2=qi()({barchart:"bar-chart",columnchart:"column-chart",linechart:"line-chart",piechart:"pie-chart"});var L5;let Om=L5=class extends $2{constructor(e){super(e),this.type="bar-chart"}clone(){var e;return new L5({altText:this.altText,title:this.title,caption:this.caption,value:(e=this.value)==null?void 0:e.clone()})}};v([S({type:["bar-chart"],readOnly:!0,json:{type:["barchart"],read:!1,write:{writer:E2.write,isRequired:!0}}})],Om.prototype,"type",void 0),Om=L5=v([H("esri.popup.content.BarChartMediaInfo")],Om);const bN=Om;var D5;let Pm=D5=class extends $2{constructor(e){super(e),this.type="column-chart"}clone(){var e;return new D5({altText:this.altText,title:this.title,caption:this.caption,value:(e=this.value)==null?void 0:e.clone()})}};v([S({type:["column-chart"],readOnly:!0,json:{type:["columnchart"],read:!1,write:{writer:E2.write,isRequired:!0}}})],Pm.prototype,"type",void 0),Pm=D5=v([H("esri.popup.content.ColumnChartMediaInfo")],Pm);const _N=Pm;var j5;let mf=j5=class extends he{constructor(e){super(e),this.linkURL=null,this.sourceURL=null}clone(){return new j5({linkURL:this.linkURL,sourceURL:this.sourceURL})}};v([S({type:String,json:{write:!0}})],mf.prototype,"linkURL",void 0),v([S({type:String,json:{write:{isRequired:!0}}})],mf.prototype,"sourceURL",void 0),mf=j5=v([H("esri.popup.content.support.ImageMediaInfoValue")],mf);const Pte=mf;var F5;let Mc=F5=class extends wS{constructor(e){super(e),this.refreshInterval=0,this.type="image",this.value=void 0}clone(){var e;return new F5({altText:this.altText,title:this.title,caption:this.caption,refreshInterval:this.refreshInterval,value:(e=this.value)==null?void 0:e.clone()})}};v([S({type:Number,json:{write:!0}})],Mc.prototype,"refreshInterval",void 0),v([S({type:["image"],readOnly:!0,json:{read:!1,write:{isRequired:!0}}})],Mc.prototype,"type",void 0),v([S({type:Pte,json:{write:{isRequired:!0}}})],Mc.prototype,"value",void 0),Mc=F5=v([H("esri.popup.content.ImageMediaInfo")],Mc);const SN=Mc;var z5;let km=z5=class extends $2{constructor(e){super(e),this.type="line-chart"}clone(){var e;return new z5({altText:this.altText,title:this.title,caption:this.caption,value:(e=this.value)==null?void 0:e.clone()})}};v([S({type:["line-chart"],readOnly:!0,json:{type:["linechart"],read:!1,write:{writer:E2.write,isRequired:!0}}})],km.prototype,"type",void 0),km=z5=v([H("esri.popup.content.LineChartMediaInfo")],km);const xN=km;var U5;let Rm=U5=class extends $2{constructor(e){super(e),this.type="pie-chart"}clone(){var e;return new U5({altText:this.altText,title:this.title,caption:this.caption,value:(e=this.value)==null?void 0:e.clone()})}};v([S({type:["pie-chart"],readOnly:!0,json:{type:["piechart"],read:!1,write:{writer:E2.write,isRequired:!0}}})],Rm.prototype,"type",void 0),Rm=U5=v([H("esri.popup.content.PieChartMediaInfo")],Rm);const TN=Rm,V5={base:wS,key:"type",defaultKeyValue:"image",typeMap:{"bar-chart":bN,"column-chart":_N,"line-chart":xN,"pie-chart":TN,image:SN}};var G5;let gn=G5=class extends Oa{constructor(e){super(e),this.activeMediaInfoIndex=null,this.attributes=null,this.description=null,this.mediaInfos=null,this.title=null,this.type="media"}readMediaInfos(e){return e&&e.map(t=>t.type==="image"?SN.fromJSON(t):t.type==="barchart"?bN.fromJSON(t):t.type==="columnchart"?_N.fromJSON(t):t.type==="linechart"?xN.fromJSON(t):t.type==="piechart"?TN.fromJSON(t):void 0).filter(Boolean)}writeMediaInfos(e,t){t.mediaInfos=e&&e.map(i=>i.toJSON())}clone(){return new G5(te({activeMediaInfoIndex:this.activeMediaInfoIndex,attributes:this.attributes,description:this.description,mediaInfos:this.mediaInfos,title:this.title}))}};v([S()],gn.prototype,"activeMediaInfoIndex",void 0),v([S({type:Object,json:{write:!0}})],gn.prototype,"attributes",void 0),v([S({type:String,json:{write:!0}})],gn.prototype,"description",void 0),v([S({types:[V5]})],gn.prototype,"mediaInfos",void 0),v([me("mediaInfos")],gn.prototype,"readMediaInfos",null),v([be("mediaInfos")],gn.prototype,"writeMediaInfos",null),v([S({type:String,json:{write:!0}})],gn.prototype,"title",void 0),v([S({type:["media"],readOnly:!0,json:{read:!1,write:{isRequired:!0}}})],gn.prototype,"type",void 0),gn=G5=v([H("esri.popup.content.MediaContent")],gn);const Q0=gn;var B5;let gf=B5=class extends he{constructor(e){super(e),this.field=null,this.order=null}clone(){return new B5({field:this.field,order:this.order})}};v([S({type:String,json:{write:!0}})],gf.prototype,"field",void 0),v([S({type:["asc","desc"],json:{write:!0}})],gf.prototype,"order",void 0),gf=B5=v([H("esri.popup.support.RelatedRecordsInfoFieldOrder")],gf);const bS=gf;let Wn=class extends at.ClonableMixin(Oa){constructor(t){super(t),this.description=null,this.displayCount=null,this.displayType="list",this.orderByFields=null,this.relationshipId=null,this.title=null,this.type="relationship"}};v([S({type:String,json:{write:!0}})],Wn.prototype,"description",void 0),v([S({type:Number,json:{type:ft,write:!0}})],Wn.prototype,"displayCount",void 0),v([S({type:["list"],json:{write:{isRequired:!0}}})],Wn.prototype,"displayType",void 0),v([S({type:[bS],json:{write:!0}})],Wn.prototype,"orderByFields",void 0),v([S({type:Number,json:{type:ft,write:{isRequired:!0}}})],Wn.prototype,"relationshipId",void 0),v([S({type:String,json:{write:!0}})],Wn.prototype,"title",void 0),v([S({type:["relationship"],readOnly:!0,json:{read:!1,write:{isRequired:!0}}})],Wn.prototype,"type",void 0),Wn=v([H("esri.popup.content.RelationshipContent")],Wn);const e1=Wn;var q5;let vf=q5=class extends Oa{constructor(e){super(e),this.text=null,this.type="text"}clone(){return new q5({text:this.text})}};v([S({type:String,json:{write:!0}})],vf.prototype,"text",void 0),v([S({type:["text"],readOnly:!0,json:{read:!1,write:{isRequired:!0}}})],vf.prototype,"type",void 0),vf=q5=v([H("esri.popup.content.TextContent")],vf);const t1=vf;let Go=class extends at.ClonableMixin(he){constructor(t){super(t),this.title=null,this.description=null,this.type=null,this.associatedNetworkSourceId=null,this.associatedAssetGroup=null,this.associatedAssetType=null}};v([S({type:String,json:{write:!0}})],Go.prototype,"title",void 0),v([S({type:String,json:{write:!0}})],Go.prototype,"description",void 0),v([S({type:["attachment","connectivity","container","content","structure"],json:{write:!0}})],Go.prototype,"type",void 0),v([S({type:Number,json:{type:ft,write:!0}})],Go.prototype,"associatedNetworkSourceId",void 0),v([S({type:Number,json:{type:ft,write:!0}})],Go.prototype,"associatedAssetGroup",void 0),v([S({type:Number,json:{type:ft,write:!0}})],Go.prototype,"associatedAssetType",void 0),Go=v([H("esri.popup.support.UtilityNetworkAssociationType")],Go);const MN=Go;let tl=class extends at.ClonableMixin(Oa){constructor(t){super(t),this.description=null,this.displayCount=null,this.title=null,this.associationTypes=[],this.type="utility-network-associations"}};v([S({type:String,json:{write:!0}})],tl.prototype,"description",void 0),v([S({type:Number,json:{type:ft,write:!0}})],tl.prototype,"displayCount",void 0),v([S({type:String,json:{write:!0}})],tl.prototype,"title",void 0),v([S({type:[MN],json:{write:!0}})],tl.prototype,"associationTypes",void 0),v([Re({utilityNetworkAssociations:"utility-network-associations"})],tl.prototype,"type",void 0),tl=v([H("esri.popup.content.UtilityNetworkAssociationsContent")],tl);const _S=tl,kte={base:null,key:"type",typeMap:{attachment:Yp,media:Q0,text:t1,expression:M2,field:Xp,relationship:e1,utilityNetworkAssociations:_S}},Rte={base:null,key:"type",typeMap:{attachment:Yp,media:Q0,text:t1,expression:M2,field:Xp,relationship:e1}};var H5;let Ru=H5=class extends he{constructor(e){super(e),this.name=null,this.title=null,this.expression=null,this.returnType=null}clone(){return new H5({name:this.name,title:this.title,expression:this.expression,returnType:this.returnType})}};v([S({type:String,json:{write:!0}})],Ru.prototype,"name",void 0),v([S({type:String,json:{write:!0}})],Ru.prototype,"title",void 0),v([S({type:String,json:{write:!0}})],Ru.prototype,"expression",void 0),v([S({type:["string","number"],json:{write:!0}})],Ru.prototype,"returnType",void 0),Ru=H5=v([H("esri.popup.ExpressionInfo")],Ru);const Nte=Ru;var W5;let wf=W5=class extends he{constructor(e){super(e),this.returnTopmostRaster=null,this.showNoDataRecords=null}clone(){return new W5({showNoDataRecords:this.showNoDataRecords,returnTopmostRaster:this.returnTopmostRaster})}};v([S({type:Boolean,json:{write:!0}})],wf.prototype,"returnTopmostRaster",void 0),v([S({type:Boolean,json:{write:!0}})],wf.prototype,"showNoDataRecords",void 0),wf=W5=v([H("esri.popup.LayerOptions")],wf);const Lte=wf;var J5;let bf=J5=class extends he{constructor(e){super(e),this.showRelatedRecords=null,this.orderByFields=null}clone(){return new J5({showRelatedRecords:this.showRelatedRecords,orderByFields:this.orderByFields?te(this.orderByFields):null})}};v([S({type:Boolean,json:{write:!0}})],bf.prototype,"showRelatedRecords",void 0),v([S({type:[bS],json:{write:!0}})],bf.prototype,"orderByFields",void 0),bf=J5=v([H("esri.popup.RelatedRecordsInfo")],bf);const C8=bf;var Z5;let ks=Z5=class extends md.IdentifiableMixin(Ae){constructor(e){super(e),this.active=!1,this.className=null,this.disabled=!1,this.icon=null,this.id=null,this.indicator=!1,this.title=null,this.type=null,this.visible=!0}clone(){return new Z5({active:this.active,className:this.className,disabled:this.disabled,icon:this.icon,id:this.id,indicator:this.indicator,title:this.title,visible:this.visible})}};v([S()],ks.prototype,"active",void 0),v([S()],ks.prototype,"className",void 0),v([S()],ks.prototype,"disabled",void 0),v([S()],ks.prototype,"icon",void 0),v([S()],ks.prototype,"id",void 0),v([S()],ks.prototype,"indicator",void 0),v([S()],ks.prototype,"title",void 0),v([S()],ks.prototype,"type",void 0),v([S()],ks.prototype,"visible",void 0),ks=Z5=v([H("esri.support.actions.ActionBase")],ks);const I2=ks;var K5;let Nm=K5=class extends I2{constructor(e){super(e),this.image=null,this.type="button"}clone(){return new K5({active:this.active,className:this.className,disabled:this.disabled,icon:this.icon,id:this.id,indicator:this.indicator,title:this.title,visible:this.visible,image:this.image})}};v([S()],Nm.prototype,"image",void 0),Nm=K5=v([H("esri.support.actions.ActionButton")],Nm);const L1=Nm;var Y5;let _f=Y5=class extends I2{constructor(e){super(e),this.image=null,this.type="toggle",this.value=!1}clone(){return new Y5({active:this.active,className:this.className,disabled:this.disabled,icon:this.icon,id:this.id,indicator:this.indicator,title:this.title,visible:this.visible,image:this.image,value:this.value})}};v([S()],_f.prototype,"image",void 0),v([S()],_f.prototype,"value",void 0),_f=Y5=v([H("esri.support.actions.ActionToggle")],_f);const SS=_f,Fd="relationships/",O8="expression/",Dte=xe.ofType({key:"type",defaultKeyValue:"button",base:I2,typeMap:{button:L1,toggle:SS}}),jte={base:Oa,key:"type",typeMap:{media:Q0,custom:Ite,text:t1,attachments:Yp,fields:Xp,expression:M2,relationship:e1,utilityNetworkAssociations:_S}},$N=new Set(["attachments","fields","media","text","expression","relationship"]),Fte=new Set([...$N,"utility-network-associations"]);let gi=class extends at.ClonableMixin(he){constructor(){super(...arguments),this.actions=null,this.content="",this.expressionInfos=null,this.fieldInfos=null,this.layerOptions=null,this.lastEditInfoEnabled=!0,this.outFields=null,this.overwriteActions=!1,this.returnGeometry=!1,this.title=""}castContent(t){return Array.isArray(t)?t.map(i=>Nn(jte,i)):typeof t=="string"||typeof t=="function"||t instanceof HTMLElement||$o(t)?t:(ye.getLogger(this).error("content error","unsupported content value",{value:t}),null)}readContent(t,i){const{popupElements:r}=i;return Array.isArray(r)&&r.length>0?this._readPopupInfoElements(i.description,i.mediaInfos,r):this._readPopupInfo(i)}writeWebSceneContent(t,i,r,a){this._writePopupTemplateContent(t,i,a)}writeWebMapContent(t,i,r,a){this._writePopupTemplateContent(t,i,a)}writeFieldInfos(t,i,r,a){const{content:p}=this,y=Array.isArray(p)?p:null;if(t){const g=y?y.filter(T=>T.type==="fields"):[],_=g.length&&g.every(T=>{var I;return(I=T.fieldInfos)==null?void 0:I.length});i.fieldInfos=t.filter(Boolean).map(T=>{const I=T.toJSON(a);return _&&(I.visible=!1),I})}if(y)for(const g of y)g.type==="fields"&&this._writeFieldsContent(g,i)}writeLayerOptions(t,i,r,a){i[r]=!t||t.showNoDataRecords===null&&t.returnTopmostRaster===null?null:t.toJSON(a)}writeTitle(t,i){i.title=t||""}async collectRequiredFields(t,i){const r=this.expressionInfos||[];await this._collectExpressionInfoFields(t,i,[...r,...this._getContentExpressionInfos(this.content,r)]),jh(t,i,[...this.outFields||[],...this._getActionsFields(this.actions),...this._getTitleFields(this.title),...this._getContentFields(this.content)])}async getRequiredFields(t){const i=new Set;return await this.collectRequiredFields(i,t),[...i].sort()}_writePopupTemplateContent(t,i,r){typeof t!="string"?Array.isArray(t)&&(i.popupElements=t.filter(a=>(r==null?void 0:r.origin)==="web-scene"?$N.has(a.type):Fte.has(a.type)).map(a=>a==null?void 0:a.toJSON(r)),i.popupElements.forEach(a=>{a.type==="attachments"?this._writeAttachmentContent(i):a.type==="media"?this._writeMediaContent(a,i):a.type==="text"?this._writeTextContent(a,i):a.type==="relationship"&&this._writeRelationshipContent(a,i)})):i.description=t}_writeFieldsContent(t,i){if(!Array.isArray(t.fieldInfos)||!t.fieldInfos.length)return;const r=te(t.fieldInfos);Array.isArray(i.fieldInfos)?r.forEach(a=>{const p=i.fieldInfos.find(y=>{var g,_;return((g=y.fieldName)==null?void 0:g.toLowerCase())===((_=a.fieldName)==null?void 0:_.toLowerCase())});p?p.visible=!0:i.fieldInfos.push(a)}):i.fieldInfos=r}_writeAttachmentContent(t){t.showAttachments||(t.showAttachments=!0)}_writeRelationshipContent(t,i){var p,y;const r=((p=t.orderByFields)==null?void 0:p.map(g=>this._toFieldOrderJSON(g,t.relationshipId)))||[],a=[...((y=i.relatedRecordsInfo)==null?void 0:y.orderByFields)||[],...r];i.relatedRecordsInfo={showRelatedRecords:!0,...(a==null?void 0:a.length)&&{orderByFields:a}}}_writeTextContent(t,i){!i.description&&t.text&&(i.description=t.text)}_writeMediaContent(t,i){if(!Array.isArray(t.mediaInfos)||!t.mediaInfos.length)return;const r=te(t.mediaInfos);Array.isArray(i.mediaInfos)?i.mediaInfos=[...i.mediaInfos,...r]:i.mediaInfos=r}_readPopupInfoElements(t,i,r){const a={description:!1,mediaInfos:!1};return r.map(p=>p.type==="media"?(p.mediaInfos||!i||a.mediaInfos||(p.mediaInfos=i,a.mediaInfos=!0),Q0.fromJSON(p)):p.type==="text"?(p.text||!t||a.description||(p.text=t,a.description=!0),t1.fromJSON(p)):p.type==="attachments"?Yp.fromJSON(p):p.type==="fields"?Xp.fromJSON(p):p.type==="expression"?M2.fromJSON(p):p.type==="relationship"?e1.fromJSON(p):p.type==="utilityNetworkAssociations"?_S.fromJSON(p):void 0).filter(Boolean)}_toRelationshipContent(t){const{field:i,order:r}=t;if(!(i!=null&&i.startsWith(Fd)))return null;const a=i.replace(Fd,"").split("/");if(a.length!==2)return null;const p=parseInt(a[0],10),y=a[1];return!Number.isNaN(p)&&y?e1.fromJSON({relationshipId:p,orderByFields:[{field:y,order:r}]}):null}_toFieldOrderJSON(t,i){const{order:r,field:a}=t;return{field:`${Fd}${i}/${a}`,order:r}}_readPopupInfo({description:t,mediaInfos:i,showAttachments:r,relatedRecordsInfo:a={showRelatedRecords:!1}}){const p=[];t?p.push(new t1({text:t})):p.push(new Xp),Array.isArray(i)&&i.length&&p.push(Q0.fromJSON({mediaInfos:i})),r&&p.push(Yp.fromJSON({displayType:"auto"}));const{showRelatedRecords:y,orderByFields:g}=a;return y&&(g!=null&&g.length)&&g.forEach(_=>{const T=this._toRelationshipContent(_);T&&p.push(T)}),p.length?p:t}_getContentElementFields(t){const i=t==null?void 0:t.type;if(i==="attachments")return[...this._extractFieldNames(t.title),...this._extractFieldNames(t.description)];if(i==="custom")return t.outFields||[];if(i==="fields")return[...this._extractFieldNames(t.title),...this._extractFieldNames(t.description),...this._getFieldInfoFields(t.fieldInfos??this.fieldInfos)];if(i==="media"){const r=t.mediaInfos||[];return[...this._extractFieldNames(t.title),...this._extractFieldNames(t.description),...r.reduce((a,p)=>[...a,...this._getMediaInfoFields(p)],[])]}return i==="text"?this._extractFieldNames(t.text):i==="relationship"||i==="utility-network-associations"?[...this._extractFieldNames(t.title),...this._extractFieldNames(t.description)]:[]}_getMediaInfoFields(t){const{caption:i,title:r,value:a}=t,p=a||{},{fields:y,normalizeField:g,tooltipField:_,sourceURL:T,linkURL:I}=p,A=[...this._extractFieldNames(r),...this._extractFieldNames(i),...this._extractFieldNames(T),...this._extractFieldNames(I),...y??[]];return g&&A.push(g),_&&A.push(_),A}_getContentExpressionInfos(t,i){return Array.isArray(t)?t.reduce((r,a)=>[...r,...a.type==="expression"&&a.expressionInfo?[a.expressionInfo]:[]],i):[]}_getContentFields(t){return typeof t=="string"?this._extractFieldNames(t):Array.isArray(t)?t.reduce((i,r)=>[...i,...this._getContentElementFields(r)],[]):[]}async _collectExpressionInfoFields(t,i,r){r&&await Promise.all(r.map(a=>vr(t,i,a.expression)))}_getFieldInfoFields(t){return t?t.filter(({fieldName:i,visible:r})=>!(r!==void 0&&!r||!i||i.startsWith(Fd)||i.startsWith(O8))).map(i=>i.fieldName):[]}_getActionsFields(t){return t?t.toArray().reduce((i,r)=>[...i,...this._getActionFields(r)],[]):[]}_getActionFields(t){const{className:i,title:r,type:a}=t,p=a==="button"||a==="toggle"?t.image:"";return[...this._extractFieldNames(r),...this._extractFieldNames(i),...this._extractFieldNames(p)]}_getTitleFields(t){return typeof t=="string"?this._extractFieldNames(t):[]}_extractFieldNames(t){return gS(t).filter(i=>!(i.indexOf(Fd)===0||i.indexOf(O8)===0))}};v([S({type:Dte})],gi.prototype,"actions",void 0),v([S()],gi.prototype,"content",void 0),v([ct("content")],gi.prototype,"castContent",null),v([me("content",["description","fieldInfos","popupElements","mediaInfos","showAttachments","relatedRecordsInfo"])],gi.prototype,"readContent",null),v([be("web-scene","content",{popupElements:{type:xe.ofType(Rte)},showAttachments:{type:Boolean},mediaInfos:{type:xe.ofType(V5)},description:{type:String},relatedRecordsInfo:{type:C8}})],gi.prototype,"writeWebSceneContent",null),v([be("content",{popupElements:{type:xe.ofType(kte)},showAttachments:{type:Boolean},mediaInfos:{type:xe.ofType(V5)},description:{type:String},relatedRecordsInfo:{type:C8}})],gi.prototype,"writeWebMapContent",null),v([S({type:[Nte],json:{write:!0}})],gi.prototype,"expressionInfos",void 0),v([S({type:[vS]})],gi.prototype,"fieldInfos",void 0),v([be("fieldInfos")],gi.prototype,"writeFieldInfos",null),v([S({type:Lte})],gi.prototype,"layerOptions",void 0),v([be("layerOptions")],gi.prototype,"writeLayerOptions",null),v([S({type:Boolean,json:{read:{source:"showLastEditInfo"},write:{target:"showLastEditInfo"},default:!0}})],gi.prototype,"lastEditInfoEnabled",void 0),v([S()],gi.prototype,"outFields",void 0),v([S()],gi.prototype,"overwriteActions",void 0),v([S()],gi.prototype,"returnGeometry",void 0),v([S({json:{type:String}})],gi.prototype,"title",void 0),v([be("title")],gi.prototype,"writeTitle",null),gi=v([H("esri.PopupTemplate")],gi);const Jh=gi,P8=new rt({esriSMS:"simple-marker",esriPMS:"picture-marker",esriSLS:"simple-line",esriSFS:"simple-fill",esriPFS:"picture-fill",esriTS:"text",esriSHD:"shield-label-symbol",PointSymbol3D:"point-3d",LineSymbol3D:"line-3d",PolygonSymbol3D:"polygon-3d",WebStyleSymbol:"web-style",MeshSymbol3D:"mesh-3d",LabelSymbol3D:"label-3d",CIMSymbolReference:"cim"});let zte=0,$c=class extends he{constructor(t){super(t),this.id="sym"+zte++,this.type=null,this.color=new De([0,0,0,1])}readColor(t){return(t==null?void 0:t[0])!=null?[t[0],t[1],t[2],t[3]/255]:t}async collectRequiredFields(t,i){}hash(){return JSON.stringify(this.toJSON())}clone(){}};v([S({type:P8.apiValues,readOnly:!0,json:{read:!1,write:{ignoreOrigin:!0,writer:P8.write,isRequired:!0}}})],$c.prototype,"type",void 0),v([S({type:De,json:{write:{allowNull:!0}}})],$c.prototype,"color",void 0),v([me("color")],$c.prototype,"readColor",null),$c=v([H("esri.symbols.Symbol")],$c);const tr=$c;var X5;let il=X5=class extends tr{constructor(e){super(e),this.data=null,this.type="cim"}readData(e,t){return t}writeData(e,t){Object.assign(t,e)}async collectRequiredFields(e,t){var i;if(((i=this.data)==null?void 0:i.type)==="CIMSymbolReference"){const r=this.data.primitiveOverrides;if(r){const a=r.map(p=>{const y=p.valueExpressionInfo;return y?vr(e,t,y.expression):null});await Promise.all(a)}}}clone(){return new X5({data:te(this.data)})}hash(){return WA(JSON.stringify(this.data)).toString()}};v([S({json:{write:!1}})],il.prototype,"color",void 0),v([S({json:{write:!0}})],il.prototype,"data",void 0),v([me("data",["symbol"])],il.prototype,"readData",null),v([be("data",{})],il.prototype,"writeData",null),v([Re({CIMSymbolReference:"cim"},{readOnly:!0})],il.prototype,"type",void 0),il=X5=v([H("esri.symbols.CIMSymbol")],il);const Pa=il;let Ec=class extends he{constructor(t){super(t),this.enabled=!0,this.type=null,this.ignoreDrivers=!1}writeEnabled(t,i,r){t||(i[r]=t)}};v([S({type:Boolean,json:{read:{source:"enable"},write:{target:"enable"}}})],Ec.prototype,"enabled",void 0),v([be("enabled")],Ec.prototype,"writeEnabled",null),v([S({type:["icon","object","line","path","fill","water","extrude","text"],readOnly:!0,json:{write:{isRequired:!0}}})],Ec.prototype,"type",void 0),Ec=v([H("esri.symbols.Symbol3DLayer")],Ec);const Eo=Ec;function Ute(e,t){const i=t.transparency!=null?J0(t.transparency):1,r=t.color;return r&&Array.isArray(r)?new De([r[0]||0,r[1]||0,r[2]||0,i]):null}function Vte(e,t){t.color=e.toJSON().slice(0,3);const i=f2(e.a);i!==0&&(t.transparency=i)}function uu(e){return{type:De,nonNullable:e==null?void 0:e.nonNullable,json:{type:[ft],default:null,read:{source:["color","transparency"],reader:Ute},write:{target:{color:{type:[ft],isRequired:e==null?void 0:e.colorRequiredOnWrite},transparency:{type:ft}},writer:Vte}}}}const To={type:Number,cast:ht,json:{write:!0}};let Nu=class extends he{constructor(t){super(t),this.color=new De([0,0,0,1]),this.extensionLength=0,this.size=Qs(1)}clone(){}cloneProperties(){return{color:te(this.color),size:this.size,extensionLength:this.extensionLength}}};v([S({type:["solid","sketch"],readOnly:!0,json:{read:!0,write:{ignoreOrigin:!0,isRequired:!0}}})],Nu.prototype,"type",void 0),v([S(uu({colorRequiredOnWrite:!0}))],Nu.prototype,"color",void 0),v([S({...To,json:{write:{overridePolicy:e=>({enabled:!!e})}}})],Nu.prototype,"extensionLength",void 0),v([S(To)],Nu.prototype,"size",void 0),Nu=v([H("esri.symbols.edges.Edges3D")],Nu);const xS=Nu;var Q5;let Lm=Q5=class extends xS{constructor(e){super(e),this.type="sketch"}clone(){return new Q5(this.cloneProperties())}};v([Re({sketch:"sketch"},{readOnly:!0})],Lm.prototype,"type",void 0),Lm=Q5=v([H("esri.symbols.edges.SketchEdges3D")],Lm);const Gte=Lm;var e9;let Dm=e9=class extends xS{constructor(e){super(e),this.type="solid"}clone(){return new e9(this.cloneProperties())}};v([Re({solid:"solid"},{readOnly:!0})],Dm.prototype,"type",void 0),Dm=e9=v([H("esri.symbols.edges.SolidEdges3D")],Dm);const EN=Dm,IN={types:{key:"type",base:xS,typeMap:{solid:EN,sketch:Gte}},json:{write:!0}};var t9;let ms=t9=class extends he{constructor(e){super(e),this.color=null,this.emissiveFactor=null}clone(){var t;const e={color:((t=this.color)==null?void 0:t.clone())??null,emissiveFactor:this.emissiveFactor?Z6(this.emissiveFactor):null};return new t9(e)}};v([S(uu())],ms.prototype,"color",void 0),v([S({type:[Number],json:{write:!1}})],ms.prototype,"emissiveFactor",void 0),ms=t9=v([H("esri.symbols.support.Symbol3DMaterial")],ms);var i9;let rl=i9=class extends Eo{constructor(e){super(e),this.type="extrude",this.size=1,this.material=null,this.castShadows=!0,this.edges=null}clone(){var e,t;return new i9({edges:(e=this.edges)==null?void 0:e.clone(),enabled:this.enabled,material:(t=this.material)==null?void 0:t.clone(),castShadows:this.castShadows,size:this.size})}};v([Re({Extrude:"extrude"},{readOnly:!0})],rl.prototype,"type",void 0),v([S({type:Number,json:{write:{enabled:!0,isRequired:!0}},nonNullable:!0})],rl.prototype,"size",void 0),v([S({type:ms,json:{write:!0}})],rl.prototype,"material",void 0),v([S({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],rl.prototype,"castShadows",void 0),v([S(IN)],rl.prototype,"edges",void 0),rl=i9=v([H("esri.symbols.ExtrudeSymbol3DLayer")],rl);const AN=rl;let jm=class extends he{constructor(t){super(t)}clone(){throw new Error("Subclasses of LinePattern3D should implement their own clone method.")}};v([S({type:["style"],readOnly:!0,json:{read:!0,write:{ignoreOrigin:!0}}})],jm.prototype,"type",void 0),jm=v([H("esri.symbols.patterns.LinePattern3D")],jm);const CN=jm,Bte=["dash","dash-dot","dot","long-dash","long-dash-dot","long-dash-dot-dot","none","short-dash","short-dash-dot","short-dash-dot-dot","short-dot","solid"];var r9;const qte=qi()({dash:"dash","dash-dot":"dash-dot","dash-dot-dot":"long-dash-dot-dot",dot:"dot","long-dash":"long-dash","long-dash-dot":"long-dash-dot",null:"none","short-dash":"short-dash","short-dash-dot":"short-dash-dot","short-dash-dot-dot":"short-dash-dot-dot","short-dot":"short-dot",solid:"solid"});let Sf=r9=class extends CN{constructor(e){super(e),this.type="style",this.style="solid"}clone(){const e={style:this.style};return new r9(e)}};v([S({type:["style"],json:{write:{isRequired:!0}}})],Sf.prototype,"type",void 0),v([Re(qte),S({type:Bte,json:{write:{isRequired:!0}}})],Sf.prototype,"style",void 0),Sf=r9=v([H("esri.symbols.patterns.LineStylePattern3D")],Sf);const TS=Sf;let Fm=class extends he{constructor(t){super(t),this.type="style"}clone(){throw new Error("Subclasses of Pattern3D should implement their own clone method.")}};v([S({type:["style"],readOnly:!0,json:{read:!0,write:{ignoreOrigin:!0}}})],Fm.prototype,"type",void 0),Fm=v([H("esri.symbols.patterns.Pattern3D")],Fm);const ON=Fm,Hte=["backward-diagonal","cross","diagonal-cross","forward-diagonal","horizontal","none","solid","vertical"];var s9;let xf=s9=class extends ON{constructor(e){super(e),this.type="style",this.style="solid"}clone(){return new s9({style:this.style})}};v([S({type:["style"],json:{write:{isRequired:!0}}})],xf.prototype,"type",void 0),v([S({type:Hte,json:{read:!0,write:{isRequired:!0}}})],xf.prototype,"style",void 0),xf=s9=v([H("esri.symbols.patterns.StylePattern3D")],xf);const PN=xf,Wte={types:{key:"type",base:ON,typeMap:{style:PN}},json:{write:!0}},kN={types:{key:"type",base:CN,typeMap:{style:TS}},json:{write:!0}},$0=new De("white"),Jte=new De([255,255,255,0]);function Zte(e){return e.r===0&&e.g===0&&e.b===0}var n9;let E0=n9=class extends ms{constructor(e){super(e),this.colorMixMode=null}clone(){var t;const e={color:((t=this.color)==null?void 0:t.clone())??null,emissiveFactor:this.emissiveFactor?Z6(this.emissiveFactor):null,colorMixMode:this.colorMixMode};return new n9(e)}};v([Re({multiply:"multiply",replace:"replace",tint:"tint"})],E0.prototype,"colorMixMode",void 0),E0=n9=v([H("esri.symbols.support.Symbol3DFillMaterial")],E0);function Kte(e,t=!1){return e<=zA?t?new Array(e).fill(0):new Array(e):new Float64Array(e)}function P5e(e){return(gU(e)?e.byteLength/8:e.length)<=zA?Array.from(e):new Float64Array(e)}function k5e(e,t,i){return Array.isArray(e)?e.slice(t,t+i):e.subarray(t,t+i)}function D1(e=eie){return[e[0],e[1],e[2],e[3],e[4],e[5]]}function MS(e,t,i,r,a,p,y=D1()){return y[0]=e,y[1]=t,y[2]=i,y[3]=r,y[4]=a,y[5]=p,y}function R5e(e,t=D1()){return Yte(e,0,e.length/3,t)}function Yte(e,t,i,r=D1()){return RN(r,o9),Xte(r,e,t,i),r}function N5e(e,t=Kte(24)){const[i,r,a,p,y,g]=e;return t[0]=i,t[1]=r,t[2]=a,t[3]=i,t[4]=r,t[5]=g,t[6]=i,t[7]=y,t[8]=a,t[9]=i,t[10]=y,t[11]=g,t[12]=p,t[13]=r,t[14]=a,t[15]=p,t[16]=r,t[17]=g,t[18]=p,t[19]=y,t[20]=a,t[21]=p,t[22]=y,t[23]=g,t}function L5e(e,t){const i=isFinite(e[2])||isFinite(e[5]);return new Ct(i?{xmin:e[0],xmax:e[3],ymin:e[1],ymax:e[4],zmin:e[2],zmax:e[5],spatialReference:t}:{xmin:e[0],xmax:e[3],ymin:e[1],ymax:e[4],spatialReference:t})}function D5e(e,t){e[0]=Math.min(e[0],t[0]),e[1]=Math.min(e[1],t[1]),e[2]=Math.min(e[2],t[2]),e[3]=Math.max(e[3],t[3]),e[4]=Math.max(e[4],t[4]),e[5]=Math.max(e[5],t[5])}function j5e(e,t){e[0]=Math.min(e[0],t[0]),e[1]=Math.min(e[1],t[1]),e[3]=Math.max(e[3],t[2]),e[4]=Math.max(e[4],t[3])}function F5e(e,t){e[0]=Math.min(e[0],t[0]),e[1]=Math.min(e[1],t[1]),e[2]=Math.min(e[2],t[2]),e[3]=Math.max(e[3],t[0]),e[4]=Math.max(e[4],t[1]),e[5]=Math.max(e[5],t[2])}function Xte(e,t,i=0,r=t.length/3){let a=e[0],p=e[1],y=e[2],g=e[3],_=e[4],T=e[5];for(let I=0;I<r;I++)a=Math.min(a,t[i+3*I]),p=Math.min(p,t[i+3*I+1]),y=Math.min(y,t[i+3*I+2]),g=Math.max(g,t[i+3*I]),_=Math.max(_,t[i+3*I+1]),T=Math.max(T,t[i+3*I+2]);e[0]=a,e[1]=p,e[2]=y,e[3]=g,e[4]=_,e[5]=T}function z5e(e,t,i){const r=t.length;let a=e[0],p=e[1],y=e[2],g=e[3],_=e[4],T=e[5];if(i)for(let I=0;I<r;I++){const A=t[I];a=Math.min(a,A[0]),p=Math.min(p,A[1]),y=Math.min(y,A[2]),g=Math.max(g,A[0]),_=Math.max(_,A[1]),T=Math.max(T,A[2])}else for(let I=0;I<r;I++){const A=t[I];a=Math.min(a,A[0]),p=Math.min(p,A[1]),g=Math.max(g,A[0]),_=Math.max(_,A[1])}e[0]=a,e[1]=p,e[2]=y,e[3]=g,e[4]=_,e[5]=T}function U5e(e){for(let t=0;t<6;t++)if(!isFinite(e[t]))return!1;return!0}function j1(e){return e[0]>=e[3]?0:e[3]-e[0]}function F1(e){return e[1]>=e[4]?0:e[4]-e[1]}function z1(e){return e[2]>=e[5]?0:e[5]-e[2]}function V5e(e){const t=j1(e),i=z1(e),r=F1(e);return Math.sqrt(t*t+i*i+r*r)}function G5e(e,t=[0,0,0]){return t[0]=e[0]+j1(e)/2,t[1]=e[1]+F1(e)/2,t[2]=e[2]+z1(e)/2,t}function B5e(e,t=[0,0,0]){return t[0]=j1(e),t[1]=F1(e),t[2]=z1(e),t}function q5e(e,t){return t[0]>=e[0]&&t[1]>=e[1]&&t[2]>=e[2]&&t[0]<=e[3]&&t[1]<=e[4]&&t[2]<=e[5]}function Qte(e,t){return Math.max(t[0],e[0])<=Math.min(t[3],e[3])&&Math.max(t[1],e[1])<=Math.min(t[4],e[4])&&Math.max(t[2],e[2])<=Math.min(t[5],e[5])}function H5e(e,t){return t==null||Qte(e,t)}function W5e(e,t,i,r,a=e){return a[0]=e[0]+t,a[1]=e[1]+i,a[2]=e[2]+r,a[3]=e[3]+t,a[4]=e[4]+i,a[5]=e[5]+r,a}function J5e(e,t,i=e){const r=e[0]+j1(e)/2,a=e[1]+F1(e)/2,p=e[2]+z1(e)/2;return i[0]=r+(e[0]-r)*t,i[1]=a+(e[1]-a)*t,i[2]=p+(e[2]-p)*t,i[3]=r+(e[3]-r)*t,i[4]=a+(e[4]-a)*t,i[5]=p+(e[5]-p)*t,i}function Z5e(e,t){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t}function K5e(e,t,i=e){return i[0]=t[0],i[1]=t[1],i[2]=t[2],i!==e&&(i[3]=e[3],i[4]=e[4],i[5]=e[5]),i}function Y5e(e,t,i=e){return i[3]=t[0],i[4]=t[1],i[5]=t[2],i!==e&&(i[0]=e[0],i[1]=e[1],i[2]=e[2]),e}function RN(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e}function X5e(e){return e?RN(e,o9):D1(o9)}function Q5e(e,t){return t||(t=Oi()),t[0]=e[0],t[1]=e[1],t[2]=e[3],t[3]=e[4],t}function e9e(e,t){return e[0]=t[0],e[1]=t[1],e[2]=Number.NEGATIVE_INFINITY,e[3]=t[2],e[4]=t[3],e[5]=Number.POSITIVE_INFINITY,e}function t9e(e,t,i,r,a){return e[0]=t,e[1]=i,e[2]=Number.NEGATIVE_INFINITY,e[3]=r,e[4]=a,e[5]=Number.POSITIVE_INFINITY,e}function k8(e){return e.length===6}function i9e(e){return j1(e)===0&&F1(e)===0&&z1(e)===0}function r9e(e,t,i){if(e==null||t==null)return e===t;if(!k8(e)||!k8(t))return!1;for(let r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}const o9=[1/0,1/0,1/0,-1/0,-1/0,-1/0],eie=[0,0,0,0,0,0];D1();function s9e(e,{isPrimitive:t,width:i,depth:r,height:a}){const p=t?10:1;if(i==null&&a==null&&r==null)return[p*e[0],p*e[1],p*e[2]];const y=yd(i,r,a);let g;for(let _=0;_<3;_++){const T=y[_];if(T!=null){g=T/e[_];break}}for(let _=0;_<3;_++)y[_]==null&&(y[_]=e[_]*g);return y}const tie=MS(-.5,-.5,-.5,.5,.5,.5),iie=MS(-.5,-.5,0,.5,.5,1),rie=MS(-.5,-.5,0,.5,.5,.5);function n9e(e){switch(e){case"sphere":case"cube":case"diamond":return tie;case"cylinder":case"cone":case"inverted-cone":return iie;case"tetrahedron":return rie;default:return}}const $S=["butt","square","round"],sie=[...$S,"none"],NN=["miter","bevel","round"];var a9;let Lu=a9=class extends he{constructor(e){super(e),this.color=new De([0,0,0,1]),this.size=Qs(1),this.pattern=null,this.patternCap="butt"}clone(){const e={color:this.color!=null?this.color.clone():null,size:this.size,pattern:this.pattern!=null?this.pattern.clone():null,patternCap:this.patternCap};return new a9(e)}};v([S(uu({colorRequiredOnWrite:!0}))],Lu.prototype,"color",void 0),v([S({...To,json:{write:{isRequired:!0}}})],Lu.prototype,"size",void 0),v([S(kN)],Lu.prototype,"pattern",void 0),v([S({type:$S,json:{default:"butt",write:{overridePolicy(){return{enabled:this.pattern!=null}}}}})],Lu.prototype,"patternCap",void 0),Lu=a9=v([H("esri.symbols.support.Symbol3DOutline")],Lu);var zm;let Bo=zm=class extends Eo{constructor(e){super(e),this.type="fill",this.material=null,this.pattern=null,this.castShadows=!0,this.outline=null,this.edges=null}clone(){const e={edges:this.edges!=null?this.edges.clone():null,enabled:this.enabled,material:this.material!=null?this.material.clone():null,pattern:this.pattern!=null?this.pattern.clone():null,castShadows:this.castShadows,outline:this.outline!=null?this.outline.clone():null};return new zm(e)}static fromSimpleFillSymbol(e){var r,a,p;const t=e.outline&&e.outline.style&&e.outline.style!=="solid"?new TS({style:e.outline.style}):null,i={size:((r=e.outline)==null?void 0:r.width)??0,color:(((a=e.outline)==null?void 0:a.color)??$0).clone(),pattern:t};return t&&((p=e.outline)!=null&&p.cap)&&(i.patternCap=e.outline.cap),new zm({material:new E0({color:(e.color??Jte).clone()}),pattern:e.style&&e.style!=="solid"?new PN({style:e.style}):null,outline:i})}};v([Re({Fill:"fill"},{readOnly:!0})],Bo.prototype,"type",void 0),v([S({type:E0,json:{write:!0}})],Bo.prototype,"material",void 0),v([S(Wte)],Bo.prototype,"pattern",void 0),v([S({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],Bo.prototype,"castShadows",void 0),v([S({type:Lu,json:{write:!0}})],Bo.prototype,"outline",void 0),v([S(IN)],Bo.prototype,"edges",void 0),Bo=zm=v([H("esri.symbols.FillSymbol3DLayer")],Bo);const Zh=Bo;var l9;const nie=qi()({circle:"circle",square:"square",cross:"cross",x:"x",kite:"kite",triangle:"triangle"});let Du=l9=class extends he{constructor(e){super(e)}readHref(e,t,i){return e?ld(e,i):t.dataURI}writeHref(e,t,i,r){e&&(Vh(e)?t.dataURI=e:(t.href=x1(e,r),vs(t.href)&&(t.href=Ks(t.href))))}clone(){return new l9({href:this.href,primitive:this.primitive})}};v([S({type:String,json:{write:!0,read:{source:["href","dataURI"]}}})],Du.prototype,"href",void 0),v([me("href")],Du.prototype,"readHref",null),v([be("href",{href:{type:String},dataURI:{type:String}})],Du.prototype,"writeHref",null),v([Re(nie)],Du.prototype,"primitive",void 0),Du=l9=v([H("esri.symbols.support.IconSymbol3DLayerResource")],Du);const o9e="circle";var u9;let up=u9=class extends Ae{constructor(){super(...arguments),this.x=0,this.y=0}clone(){return new u9({x:this.x,y:this.y})}};v([S({type:Number})],up.prototype,"x",void 0),v([S({type:Number})],up.prototype,"y",void 0),up=u9=v([H("esri.symbols.support.Symbol3DAnchorPosition2D")],up);var h9;let Tf=h9=class extends he{constructor(e){super(e),this.color=new De([0,0,0,1]),this.size=Qs(1)}clone(){const e={color:this.color!=null?this.color.clone():null,size:this.size};return new h9(e)}};v([S(uu({colorRequiredOnWrite:!0}))],Tf.prototype,"color",void 0),v([S({...To,json:{write:{isRequired:!0}}})],Tf.prototype,"size",void 0),Tf=h9=v([H("esri.symbols.support.Symbol3DIconOutline")],Tf);var Ic;const LN="esri.symbols.IconSymbol3DLayer";let vn=Ic=class extends Eo{constructor(e){super(e),this.material=null,this.resource=null,this.type="icon",this.size=12,this.anchor="center",this.anchorPosition=null,this.outline=null,this.angle=0}clone(){return new Ic({anchor:this.anchor,anchorPosition:te(this.anchorPosition),enabled:this.enabled,material:te(this.material),outline:te(this.outline),resource:te(this.resource),angle:this.angle,size:this.size})}static fromSimpleMarkerSymbol(e){const t=e.color||$0,i=R8(e),r=e.outline&&e.outline.width>0?{size:e.outline.width,color:(e.outline.color||$0).clone()}:null;return new Ic({size:e.size,angle:e.angle,resource:{primitive:aie(e.style)},material:{color:t},outline:r,anchor:i?"relative":void 0,anchorPosition:i})}static fromPictureMarkerSymbol(e){const t=!e.color||Zte(e.color)?$0:e.color,i=R8(e);return new Ic({size:e.width<=e.height?e.height:e.width,angle:e.angle,resource:{href:e.url},material:{color:t.clone()},anchor:i?"relative":void 0,anchorPosition:i})}static fromCIMSymbol(e){return new Ic({resource:{href:eO({mediaType:"application/json",data:JSON.stringify(e.data)})}})}};v([S({type:ms,json:{write:!0}})],vn.prototype,"material",void 0),v([S({type:Du,json:{write:!0}})],vn.prototype,"resource",void 0),v([Re({Icon:"icon"},{readOnly:!0})],vn.prototype,"type",void 0),v([S({...To,json:{write:{isRequired:!0}}})],vn.prototype,"size",void 0),v([Re({center:"center",left:"left",right:"right",top:"top",bottom:"bottom",topLeft:"top-left",topRight:"top-right",bottomLeft:"bottom-left",bottomRight:"bottom-right",relative:"relative"},{default:"center"})],vn.prototype,"anchor",void 0),v([S({type:up,json:{type:[Number],read:{reader:e=>new up({x:e[0],y:e[1]})},write:{writer:(e,t)=>{t.anchorPosition=[e.x,e.y]},overridePolicy(){return{enabled:this.anchor==="relative"}}}}})],vn.prototype,"anchorPosition",void 0),v([S({type:Tf,json:{write:!0}})],vn.prototype,"outline",void 0),v([S({type:Number,json:{write:!0,default:0}})],vn.prototype,"angle",void 0),vn=Ic=v([H(LN)],vn);const wh=vn;function R8(e){const t="width"in e?e.width:e.size,i="height"in e?e.height:e.size,r=N8(e.xoffset),a=N8(e.yoffset);return(r||a)&&t&&i?{x:-r/t,y:a/i}:null}function N8(e){return isFinite(e)?e:0}const oie={circle:"circle",cross:"cross",diamond:"kite",square:"square",x:"x",triangle:"triangle",path:null};function aie(e){return oie[e]||(ye.getLogger(LN).warn(`${e} cannot be mapped to Icon symbol. Fallback to "circle"`),"circle")}const lie=["begin","end","begin-end"],DN=["arrow","circle","square","diamond","cross","x"];let ju=class extends at.ClonableMixin(he){constructor(t){super(t),this.type="style",this.placement="begin-end",this.style="arrow",this.color=null}equals(t){return t!=null&&t.placement===this.placement&&t.style===this.style&&(this.color==null&&t.color==null||this.color!=null&&t.color!=null&&this.color.toJSON()===t.color.toJSON())}};v([S({type:["style"],readOnly:!0,json:{read:!0,write:{ignoreOrigin:!0,isRequired:!0}}})],ju.prototype,"type",void 0),v([S({type:lie,json:{default:"begin-end",write:!0}})],ju.prototype,"placement",void 0),v([S({type:DN,json:{default:"arrow",write:!0}})],ju.prototype,"style",void 0),v([S({type:De,json:{type:[ft],default:null,write:!0}})],ju.prototype,"color",void 0),ju=v([H("esri.symbols.LineStyleMarker3D")],ju);const c9=ju;var Um;let Jn=Um=class extends Eo{constructor(e){super(e),this.material=null,this.type="line",this.join="miter",this.cap="butt",this.size=Qs(1),this.pattern=null,this.marker=null}clone(){const e={enabled:this.enabled,material:this.material!=null?this.material.clone():null,size:this.size,join:this.join,cap:this.cap,pattern:this.pattern!=null?this.pattern.clone():null,marker:this.marker!=null?this.marker.clone():null};return new Um(e)}static fromSimpleLineSymbol(e){var i;const t={enabled:!0,size:e.width??Qs(1),cap:e.cap||"butt",join:e.join||"miter",pattern:e.style?new TS({style:e.style}):null,material:new ms({color:(e.color||$0).clone()}),marker:e.marker?new c9({placement:e.marker.placement,style:e.marker.style,color:((i=e.marker.color)==null?void 0:i.clone())??null}):null};return new Um(t)}};v([S({type:ms,json:{write:!0}})],Jn.prototype,"material",void 0),v([Re({Line:"line"},{readOnly:!0})],Jn.prototype,"type",void 0),v([S({type:NN,json:{write:!0,default:"miter"}})],Jn.prototype,"join",void 0),v([S({type:$S,json:{write:!0,default:"butt"}})],Jn.prototype,"cap",void 0),v([S({...To,json:{write:{isRequired:!0}}})],Jn.prototype,"size",void 0),v([S(kN)],Jn.prototype,"pattern",void 0),v([S({types:{key:"type",base:c9,typeMap:{style:c9}},json:{write:!0}})],Jn.prototype,"marker",void 0),Jn=Um=v([H("esri.symbols.LineSymbol3DLayer")],Jn);const gd=Jn;var p9;const uie=qi()({sphere:"sphere",cylinder:"cylinder",cube:"cube",cone:"cone",diamond:"diamond",tetrahedron:"tetrahedron",invertedCone:"inverted-cone"});let Mf=p9=class extends he{clone(){return new p9({href:this.href,primitive:this.primitive})}};v([S({type:String,json:{read:m6,write:Oh}})],Mf.prototype,"href",void 0),v([Re(uie)],Mf.prototype,"primitive",void 0),Mf=p9=v([H("esri.symbols.support.ObjectSymbol3DLayerResource")],Mf);const l9e="sphere";var d9;let dh=d9=class extends Ae{constructor(){super(...arguments),this.x=0,this.y=0,this.z=0}clone(){return new d9({x:this.x,y:this.y,z:this.z})}};v([S({type:Number})],dh.prototype,"x",void 0),v([S({type:Number})],dh.prototype,"y",void 0),v([S({type:Number})],dh.prototype,"z",void 0),dh=d9=v([H("esri.symbols.support.Symbol3DAnchorPosition3D")],dh);var f9;let ar=f9=class extends Eo{constructor(e){super(e),this.material=null,this.castShadows=!0,this.resource=null,this.type="object",this.width=void 0,this.height=void 0,this.depth=void 0,this.anchor=void 0,this.anchorPosition=void 0,this.heading=void 0,this.tilt=void 0,this.roll=void 0}clone(){var e,t,i;return new f9({heading:this.heading,tilt:this.tilt,roll:this.roll,anchor:this.anchor,anchorPosition:(e=this.anchorPosition)==null?void 0:e.clone(),depth:this.depth,enabled:this.enabled,height:this.height,material:((t=this.material)==null?void 0:t.clone())??null,castShadows:this.castShadows,resource:(i=this.resource)==null?void 0:i.clone(),width:this.width})}get isPrimitive(){return!this.resource||typeof this.resource.href!="string"}};v([S({type:ms,json:{write:!0}})],ar.prototype,"material",void 0),v([S({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],ar.prototype,"castShadows",void 0),v([S({type:Mf,json:{write:!0}})],ar.prototype,"resource",void 0),v([Re({Object:"object"},{readOnly:!0})],ar.prototype,"type",void 0),v([S({type:Number,json:{write:!0}})],ar.prototype,"width",void 0),v([S({type:Number,json:{write:!0}})],ar.prototype,"height",void 0),v([S({type:Number,json:{write:!0}})],ar.prototype,"depth",void 0),v([Re({center:"center",top:"top",bottom:"bottom",origin:"origin",relative:"relative"},{default:"origin"})],ar.prototype,"anchor",void 0),v([S({type:dh,json:{type:[Number],read:{reader:e=>new dh({x:e[0],y:e[1],z:e[2]})},write:{writer:(e,t)=>{t.anchorPosition=[e.x,e.y,e.z]},overridePolicy(){return{enabled:this.anchor==="relative"}}}}})],ar.prototype,"anchorPosition",void 0),v([S({type:Number,json:{write:!0}})],ar.prototype,"heading",void 0),v([S({type:Number,json:{write:!0}})],ar.prototype,"tilt",void 0),v([S({type:Number,json:{write:!0}})],ar.prototype,"roll",void 0),v([S({readOnly:!0})],ar.prototype,"isPrimitive",null),ar=f9=v([H("esri.symbols.ObjectSymbol3DLayer")],ar);const ES=ar;var y9;let br=y9=class extends Eo{constructor(e){super(e),this.material=null,this.castShadows=!0,this.type="path",this.profile="circle",this.join="miter",this.cap="butt",this.width=void 0,this.height=void 0,this.anchor="center",this.profileRotation="all"}readWidth(e,t){return e??(t.height==null&&t.size!=null?t.size:void 0)}readHeight(e,t){return e??(t.width==null&&t.size!=null?t.size:void 0)}clone(){return new y9({enabled:this.enabled,material:this.material!=null?this.material.clone():null,castShadows:this.castShadows,profile:this.profile,join:this.join,cap:this.cap,width:this.width,height:this.height,profileRotation:this.profileRotation,anchor:this.anchor})}};v([S({type:ms,json:{write:!0}})],br.prototype,"material",void 0),v([S({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],br.prototype,"castShadows",void 0),v([Re({Path:"path"},{readOnly:!0})],br.prototype,"type",void 0),v([S({type:["circle","quad"],json:{write:!0,default:"circle"}})],br.prototype,"profile",void 0),v([S({type:NN,json:{write:!0,default:"miter"}})],br.prototype,"join",void 0),v([S({type:sie,json:{write:!0,default:"butt"}})],br.prototype,"cap",void 0),v([S({type:Number,json:{write:{enabled:!0,target:{width:{type:Number},size:{type:Number}}}}})],br.prototype,"width",void 0),v([me("width",["width","size","height"])],br.prototype,"readWidth",null),v([S({type:Number,json:{write:!0}})],br.prototype,"height",void 0),v([me("height",["height","size","width"])],br.prototype,"readHeight",null),v([S({type:["center","bottom","top"],json:{write:!0,default:"center"}})],br.prototype,"anchor",void 0),v([S({type:["heading","all"],json:{write:!0,default:"all"}})],br.prototype,"profileRotation",void 0),br=y9=v([H("esri.symbols.PathSymbol3DLayer")],br);const IS=br,hie=["none","underline","line-through"],cie=["normal","italic","oblique"],pie=["normal","lighter","bold","bolder"],jN={type:Number,cast:e=>{const t=Er(e);return t===0?1:xs(t,.1,4)},nonNullable:!0},die=["left","right","center"],fie=["baseline","top","middle","bottom"],FN={type:die,nonNullable:!0},zN={type:fie,nonNullable:!0},u9e=8;var m9;let qo=m9=class extends he{constructor(e){super(e),this.decoration="none",this.family="sans-serif",this.size=9,this.style="normal",this.weight="normal"}castSize(e){return ht(e)}clone(){return new m9({decoration:this.decoration,family:this.family,size:this.size,style:this.style,weight:this.weight})}hash(){return`${this.decoration}.${this.family}.${this.size}.${this.style}.${this.weight}`}};v([S({type:hie,json:{default:"none",write:!0}})],qo.prototype,"decoration",void 0),v([S({type:String,json:{write:!0}})],qo.prototype,"family",void 0),v([S({type:Number,json:{write:{overridePolicy:(e,t,i)=>({enabled:!i||!i.textSymbol3D})}}})],qo.prototype,"size",void 0),v([ct("size")],qo.prototype,"castSize",null),v([S({type:cie,json:{default:"normal",write:!0}})],qo.prototype,"style",void 0),v([S({type:pie,json:{default:"normal",write:!0}})],qo.prototype,"weight",void 0),qo=m9=v([H("esri.symbols.Font")],qo);const A2=qo;var g9;let hp=g9=class extends he{constructor(){super(...arguments),this.color=new De([0,0,0,1]),this.size=0}clone(){const e={color:te(this.color),size:this.size};return new g9(e)}};v([S(uu())],hp.prototype,"color",void 0),v([S(To)],hp.prototype,"size",void 0),hp=g9=v([H("esri.symbols.support.Symbol3DHalo")],hp);let I0=class extends at.ClonableMixin(he){constructor(t){super(t),this.color=null}};v([S(uu())],I0.prototype,"color",void 0),I0=v([H("esri.symbols.support.Symbol3DTextBackground")],I0);var Vm;let Nr=Vm=class extends Eo{constructor(e){super(e),this._userSize=void 0,this.halo=null,this.horizontalAlignment="center",this.lineHeight=1,this.material=null,this.background=null,this.text=null,this.type="text",this.verticalAlignment="baseline"}get font(){return this._get("font")||null}set font(e){e!=null&&this._userSize!=null&&(e.size=this._userSize),this._set("font",e)}writeFont(e,t,i,r){const a={...r,textSymbol3D:!0};t.font=e.write({},a),delete t.font.size}get size(){var e;return this._userSize!=null?this._userSize:((e=this.font)==null?void 0:e.size)!=null?this.font.size:9}set size(e){this._userSize=e,this.font!=null&&(this.font.size=this._userSize),this.notifyChange("size")}clone(){const e=new Vm({enabled:this.enabled,font:this.font&&te(this.font),halo:this.halo&&te(this.halo),horizontalAlignment:this.horizontalAlignment,lineHeight:this.lineHeight,material:this.material!=null?this.material.clone():null,text:this.text,verticalAlignment:this.verticalAlignment,background:te(this.background)});return e._userSize=this._userSize,e}static fromTextSymbol(e){return new Vm({font:e.font!=null?e.font.clone():new A2,halo:yie(e.haloColor,e.haloSize),horizontalAlignment:e.horizontalAlignment,lineHeight:e.lineHeight,material:e.color?new ms({color:e.color.clone()}):null,text:e.text,verticalAlignment:e.verticalAlignment,background:e.backgroundColor?new I0({color:e.backgroundColor.clone()}):null})}};function yie(e,t){return e&&t!=null&&t>0?new hp({color:te(e),size:t}):null}v([S({type:A2,json:{write:!0}})],Nr.prototype,"font",null),v([be("font")],Nr.prototype,"writeFont",null),v([S({type:hp,json:{write:!0}})],Nr.prototype,"halo",void 0),v([S({...FN,json:{default:"center",write:!0}})],Nr.prototype,"horizontalAlignment",void 0),v([S({...jN,json:{default:1,write:!0}})],Nr.prototype,"lineHeight",void 0),v([S({type:ms,json:{write:!0}})],Nr.prototype,"material",void 0),v([S({type:I0,json:{write:!0}})],Nr.prototype,"background",void 0),v([S(To)],Nr.prototype,"size",null),v([S({type:String,json:{write:!0}})],Nr.prototype,"text",void 0),v([Re({Text:"text"},{readOnly:!0})],Nr.prototype,"type",void 0),v([S({...zN,json:{default:"baseline",write:!0}})],Nr.prototype,"verticalAlignment",void 0),Nr=Vm=v([H("esri.symbols.TextSymbol3DLayer")],Nr);const vd=Nr;var v9;let sl=v9=class extends Eo{constructor(e){super(e),this.color=w9.clone(),this.type="water",this.waterbodySize="medium",this.waveDirection=null,this.waveStrength="moderate"}clone(){return new v9({color:te(this.color),waterbodySize:this.waterbodySize,waveDirection:this.waveDirection,waveStrength:this.waveStrength})}};v([S({type:De,nonNullable:!0,json:{type:[ft],write:(e,t,i)=>t[i]=e.toArray(De.AlphaMode.UNLESS_OPAQUE),default:()=>w9.clone(),defaultEquals:e=>e.toCss(!0)===w9.toCss(!0)}})],sl.prototype,"color",void 0),v([Re({Water:"water"},{readOnly:!0})],sl.prototype,"type",void 0),v([S({type:["small","medium","large"],json:{write:!0,default:"medium"}})],sl.prototype,"waterbodySize",void 0),v([S({type:Number,json:{write:!0,default:null}})],sl.prototype,"waveDirection",void 0),v([S({type:["calm","rippled","slight","moderate"],json:{write:!0,default:"moderate"}})],sl.prototype,"waveStrength",void 0),sl=v9=v([H("esri.symbols.WaterSymbol3DLayer")],sl);const UN=sl,w9=new De([0,119,190]);var b9;let Fu=b9=class extends Ae{constructor(e){super(e),this.name=null,this.styleUrl=null,this.styleName=null,this.portal=null}clone(){return new b9({name:this.name,styleUrl:this.styleUrl,styleName:this.styleName,portal:this.portal})}};v([S({type:String})],Fu.prototype,"name",void 0),v([S({type:String})],Fu.prototype,"styleUrl",void 0),v([S({type:String})],Fu.prototype,"styleName",void 0),v([S({type:er})],Fu.prototype,"portal",void 0),Fu=b9=v([H("esri.symbols.support.StyleOrigin")],Fu);const _9=Fu;var S9;let A0=S9=class extends Ae{constructor(){super(...arguments),this.url=""}clone(){return new S9({url:this.url})}};v([S({type:String})],A0.prototype,"url",void 0),A0=S9=v([H("esri.symbols.support.Thumbnail")],A0);const VN={icon:wh,object:ES,line:gd,path:IS,fill:Zh,extrude:AN,text:vd,water:UN},mie=xe.ofType({base:Eo,key:"type",typeMap:VN,errorContext:"symbol-layer"});let Zn=class extends tr{constructor(t){super(t),this.styleOrigin=null,this.thumbnail=null,this.type=null;const i=this.__accessor__&&this.__accessor__.metadata&&this.__accessor__.metadata.symbolLayers,r=i==null?void 0:i.type,a=r||xe;this._set("symbolLayers",new a)}get color(){return null}set color(t){this.constructed&&ye.getLogger(this).error("Symbol3D does not support colors on the symbol level. Colors may be set on individual symbol layer materials instead.")}set symbolLayers(t){Ta(t,this._get("symbolLayers"))}readStyleOrigin(t,i,r){if(t.styleUrl&&t.name){const a=ld(t.styleUrl,r);return new _9({styleUrl:a,name:t.name})}if(t.styleName&&t.name)return new _9({portal:(r==null?void 0:r.portal)||er.getDefault(),styleName:t.styleName,name:t.name});r!=null&&r.messages&&r.messages.push(new Ys("symbol3d:incomplete-style-origin","Style origin requires either a 'styleUrl' or 'styleName' and a 'name' property",{context:r,definition:t}))}writeStyleOrigin(t,i,r,a){if(t.styleUrl&&t.name){let p=x1(t.styleUrl,a);vs(p)&&(p=Ks(p)),i.styleOrigin={styleUrl:p,name:t.name}}else t.styleName&&t.name&&(t.portal&&(a!=null&&a.portal)&&!QC(t.portal.restUrl,a.portal.restUrl)?a!=null&&a.messages&&a.messages.push(new Ys("symbol:cross-portal","The symbol style origin cannot be persisted because it refers to an item on a different portal than the one being saved to.",{symbol:this})):i.styleOrigin={styleName:t.styleName,name:t.name})}normalizeCtorArgs(t){return t instanceof Eo||t&&VN[t.type]?{symbolLayers:[t]}:Array.isArray(t)?{symbolLayers:t}:t}};v([S({json:{read:!1,write:!1}})],Zn.prototype,"color",null),v([S({type:mie,nonNullable:!0,json:{write:!0}}),ct(gO)],Zn.prototype,"symbolLayers",null),v([S({type:_9})],Zn.prototype,"styleOrigin",void 0),v([me("styleOrigin")],Zn.prototype,"readStyleOrigin",null),v([be("styleOrigin",{"styleOrigin.styleUrl":{type:String},"styleOrigin.styleName":{type:String},"styleOrigin.name":{type:String}})],Zn.prototype,"writeStyleOrigin",null),v([S({type:A0,json:{read:!1}})],Zn.prototype,"thumbnail",void 0),v([S({type:["point-3d","line-3d","polygon-3d","mesh-3d","label-3d"],readOnly:!0})],Zn.prototype,"type",void 0),Zn=v([H("esri.symbols.Symbol3D")],Zn);const U1=Zn;let $f=class extends he{constructor(t){super(t),this.visible=!0}clone(){throw new Error("Subclasses of Callout3D should implement their own clone method.")}};v([S({type:["line"],constructOnly:!0,json:{read:!1,write:{ignoreOrigin:!0,isRequired:!0}}})],$f.prototype,"type",void 0),v([S({readOnly:!0})],$f.prototype,"visible",void 0),$f=v([H("esri.symbols.callouts.Callout3D")],$f);const GN=$f;var x9;let Gm=x9=class extends he{constructor(e){super(e),this.color=new De("white")}clone(){return new x9({color:te(this.color)})}};v([S(uu({colorRequiredOnWrite:!0}))],Gm.prototype,"color",void 0),Gm=x9=v([H("esri.symbols.callouts.LineCallout3DBorder")],Gm);const gie=Gm;var T9;let nl=T9=class extends GN{constructor(e){super(e),this.type="line",this.color=new De([0,0,0,1]),this.size=Qs(1),this.border=null}get visible(){return this.size>0&&this.color!=null&&this.color.a>0}clone(){return new T9({color:te(this.color),size:this.size,border:te(this.border)})}};v([Re({line:"line"})],nl.prototype,"type",void 0),v([S(uu({colorRequiredOnWrite:!0}))],nl.prototype,"color",void 0),v([S({...To,json:{write:{isRequired:!0}}})],nl.prototype,"size",void 0),v([S({type:gie,json:{write:!0}})],nl.prototype,"border",void 0),v([S({readOnly:!0})],nl.prototype,"visible",null),nl=T9=v([H("esri.symbols.callouts.LineCallout3D")],nl);const BN=nl;function AS(e){if(!e)return!1;const t=e.verticalOffset;return!(!t||t.screenLength<=0||t.maxWorldLength!=null&&t.maxWorldLength<=0)}function qN(e){if(!e||!e.supportsCallout||!e.supportsCallout())return!1;const t=e.callout;return!!(t!=null&&t.visible)&&!!AS(e)}function d9e(e){return e.type==="point-3d"||e.type==="label-3d"}function f9e(e){return e.horizontalAlignment==="center"}const HN={types:{key:"type",base:GN,typeMap:{line:BN}},json:{write:!0}};var M9;let Ac=M9=class extends he{constructor(e){super(e),this.screenLength=0,this.minWorldLength=0,this.maxWorldLength=null}clone(){return new M9({screenLength:this.screenLength,minWorldLength:this.minWorldLength,maxWorldLength:this.maxWorldLength})}};v([S({...To,json:{write:{isRequired:!0}}})],Ac.prototype,"screenLength",void 0),v([S({type:Number,nonNullable:!0,json:{write:!0,default:0}})],Ac.prototype,"minWorldLength",void 0),v([S({type:Number,json:{write:!0}})],Ac.prototype,"maxWorldLength",void 0),Ac=M9=v([H("esri.symbols.support.Symbol3DVerticalOffset")],Ac);const CS=Ac;var Bm;const WN=xe.ofType({base:null,key:"type",typeMap:{text:vd}});let ol=Bm=class extends U1{constructor(e){super(e),this.verticalOffset=null,this.callout=null,this.styleOrigin=null,this.symbolLayers=new WN,this.type="label-3d"}supportsCallout(){return!0}hasVisibleCallout(){return qN(this)}hasVisibleVerticalOffset(){return AS(this)}clone(){return new Bm({styleOrigin:te(this.styleOrigin),symbolLayers:te(this.symbolLayers),thumbnail:te(this.thumbnail),callout:te(this.callout),verticalOffset:te(this.verticalOffset)})}static fromTextSymbol(e){return new Bm({symbolLayers:new xe([vd.fromTextSymbol(e)])})}};v([S({type:CS,json:{write:!0}})],ol.prototype,"verticalOffset",void 0),v([S(HN)],ol.prototype,"callout",void 0),v([S({json:{read:!1,write:!1}})],ol.prototype,"styleOrigin",void 0),v([S({type:WN})],ol.prototype,"symbolLayers",void 0),v([Re({LabelSymbol3D:"label-3d"},{readOnly:!0})],ol.prototype,"type",void 0),ol=Bm=v([H("esri.symbols.LabelSymbol3D")],ol);const C2=ol;var qm;const JN=xe.ofType({base:null,key:"type",typeMap:{line:gd,path:IS}}),vie=xe.ofType({base:null,key:"type",typeMap:{line:gd,path:IS}});let Ef=qm=class extends U1{constructor(e){super(e),this.symbolLayers=new JN,this.type="line-3d"}clone(){return new qm({styleOrigin:te(this.styleOrigin),symbolLayers:te(this.symbolLayers),thumbnail:te(this.thumbnail)})}static fromSimpleLineSymbol(e){return new qm({symbolLayers:new xe([gd.fromSimpleLineSymbol(e)])})}};v([S({type:JN,json:{type:vie}})],Ef.prototype,"symbolLayers",void 0),v([Re({LineSymbol3D:"line-3d"},{readOnly:!0})],Ef.prototype,"type",void 0),Ef=qm=v([H("esri.symbols.LineSymbol3D")],Ef);const Kh=Ef;var Hm;const ZN=xe.ofType({base:null,key:"type",typeMap:{fill:Zh}});let If=Hm=class extends U1{constructor(e){super(e),this.symbolLayers=new ZN,this.type="mesh-3d"}clone(){return new Hm({styleOrigin:te(this.styleOrigin),symbolLayers:te(this.symbolLayers),thumbnail:te(this.thumbnail)})}static fromSimpleFillSymbol(e){return new Hm({symbolLayers:new xe([Zh.fromSimpleFillSymbol(e)])})}};v([S({type:ZN})],If.prototype,"symbolLayers",void 0),v([Re({MeshSymbol3D:"mesh-3d"},{readOnly:!0})],If.prototype,"type",void 0),If=Hm=v([H("esri.symbols.MeshSymbol3D")],If);const V1=If;let Af=class extends tr{constructor(t){super(t),this.type="simple-line",this.width=.75}hash(){return`${this.type}.${this.width}`}};v([Re({esriSLS:"simple-line"},{readOnly:!0})],Af.prototype,"type",void 0),v([S({type:Number,cast:ht,json:{write:!0}})],Af.prototype,"width",void 0),Af=v([H("esri.symbols.LineSymbol")],Af);const wie=Af;var $9;let Kn=$9=class extends he{constructor(e){super(e),this.placement="begin-end",this.type="line-marker",this.style="arrow"}writeStyle(e,t,i,r){t[i]=(r==null?void 0:r.origin)==="web-map"?"arrow":e}set color(e){this._set("color",e)}readColor(e){return(e==null?void 0:e[0])!=null?[e[0],e[1],e[2],e[3]/255]:e}writeColor(e,t,i,r){(r==null?void 0:r.origin)==="web-map"||(t[i]=e)}clone(){return new $9({color:te(this.color),placement:this.placement,style:this.style})}hash(){var e;return`${this.placement}.${(e=this.color)==null?void 0:e.hash()}.${this.style}`}};v([S({type:["begin","end","begin-end"],json:{write:!0}})],Kn.prototype,"placement",void 0),v([Re({"line-marker":"line-marker"},{readOnly:!0}),S({json:{origins:{"web-map":{write:!1}}}})],Kn.prototype,"type",void 0),v([S({type:DN})],Kn.prototype,"style",void 0),v([be("style")],Kn.prototype,"writeStyle",null),v([S({type:De,value:null,json:{write:{allowNull:!0}}})],Kn.prototype,"color",null),v([me("color")],Kn.prototype,"readColor",null),v([be("color")],Kn.prototype,"writeColor",null),Kn=$9=v([H("esri.symbols.LineSymbolMarker")],Kn);const bie=Kn;var E9;const rb=new rt({esriSLSSolid:"solid",esriSLSDash:"dash",esriSLSDot:"dot",esriSLSDashDot:"dash-dot",esriSLSDashDotDot:"long-dash-dot-dot",esriSLSNull:"none",esriSLSShortDash:"short-dash",esriSLSShortDot:"short-dot",esriSLSShortDashDot:"short-dash-dot",esriSLSShortDashDotDot:"short-dash-dot-dot",esriSLSLongDash:"long-dash",esriSLSLongDashDot:"long-dash-dot"});let Ho=E9=class extends wie{constructor(...e){super(...e),this.type="simple-line",this.style="solid",this.cap="round",this.join="round",this.marker=null,this.miterLimit=2}normalizeCtorArgs(e,t,i,r,a,p){if(e&&typeof e!="string")return e;const y={};return e!=null&&(y.style=e),t!=null&&(y.color=t),i!=null&&(y.width=ht(i)),r!=null&&(y.cap=r),a!=null&&(y.join=a),p!=null&&(y.miterLimit=ht(p)),y}clone(){var e;return new E9({color:te(this.color),style:this.style,width:this.width,cap:this.cap,join:this.join,miterLimit:this.miterLimit,marker:(e=this.marker)==null?void 0:e.clone()})}hash(){var e,t;return`${super.hash()}.${(e=this.color)==null?void 0:e.hash()}.${this.style}.${this.cap}.${this.join}.${this.miterLimit}.${(t=this.marker)==null?void 0:t.hash()}`}};v([Re({esriSLS:"simple-line"},{readOnly:!0})],Ho.prototype,"type",void 0),v([S({type:rb.apiValues,json:{read:rb.read,write:rb.write}})],Ho.prototype,"style",void 0),v([S({type:["butt","round","square"],json:{write:{overridePolicy:(e,t,i)=>({enabled:e!=="round"&&(i==null?void 0:i.origin)==null})}}})],Ho.prototype,"cap",void 0),v([S({type:["miter","round","bevel"],json:{write:{overridePolicy:(e,t,i)=>({enabled:e!=="round"&&(i==null?void 0:i.origin)==null})}}})],Ho.prototype,"join",void 0),v([S({types:{key:"type",base:null,defaultKeyValue:"line-marker",typeMap:{"line-marker":bie}},json:{write:!0,origins:{"web-scene":{write:!1}}}})],Ho.prototype,"marker",void 0),v([S({type:Number,json:{read:!1,write:!1}})],Ho.prototype,"miterLimit",void 0),Ho=E9=v([H("esri.symbols.SimpleLineSymbol")],Ho);const Ms=Ho;let Cf=class extends tr{constructor(t){super(t),this.outline=null,this.type=null}hash(){var t;return`${this.type}.${(t=this.outline)==null?void 0:t.hash()}`}};v([S({types:{key:"type",base:null,defaultKeyValue:"simple-line",typeMap:{"simple-line":Ms}},json:{default:null,write:!0}})],Cf.prototype,"outline",void 0),v([S({type:["simple-fill","picture-fill"],readOnly:!0})],Cf.prototype,"type",void 0),Cf=v([H("esri.symbols.FillSymbol")],Cf);const KN=Cf;function _ie(e,t,i){return t.imageData?eO({mediaType:t.contentType||"image/png",isBase64:!0,data:t.imageData}):YN(t.url,i)}function YN(e,t){if(!vs(e)){const i=xie(t);if(i)return Fp(i,"images",e)}return ld(e,t)}function Sie(e,t,i,r){if(Vh(e)){const a=zp(e);if(!a)return;t.contentType=a.mediaType,t.imageData=a.data,i&&i.imageData===t.imageData&&i.url&&Oh(i.url,t,"url",r)}else Oh(e,t,"url",r)}const XN={json:{read:{source:["imageData","url"],reader:_ie},write:{writer(e,t,i,r){Sie(e,t,this.source,r)}}}},QN={readOnly:!0,json:{read:{source:["imageData","url"],reader(e,t,i){const r={};return t.imageData&&(r.imageData=t.imageData),t.contentType&&(r.contentType=t.contentType),t.url&&(r.url=YN(t.url,i)),r}}}};function xie(e){var a,p;if(!e)return null;const{origin:t,layer:i}=e;if(t!=="service"&&t!=="portal-item")return null;const r=i==null?void 0:i.type;return r==="feature"||r==="stream"?(a=i.parsedUrl)==null?void 0:a.path:r==="map-image"||r==="tile"?(p=e.url)==null?void 0:p.path:null}var I9;let Rs=I9=class extends KN{constructor(...e){super(...e),this.type="picture-fill",this.url=null,this.xscale=1,this.yscale=1,this.width=12,this.height=12,this.xoffset=0,this.yoffset=0,this.source=null}normalizeCtorArgs(e,t,i,r){if(e&&typeof e!="string"&&e.imageData==null)return e;const a={};return e&&(a.url=e),t&&(a.outline=t),i!=null&&(a.width=ht(i)),r!=null&&(a.height=ht(r)),a}clone(){const e=new I9({color:te(this.color),height:this.height,outline:te(this.outline),url:this.url,width:this.width,xoffset:this.xoffset,xscale:this.xscale,yoffset:this.yoffset,yscale:this.yscale});return e._set("source",te(this.source)),e}hash(){var e;return`${super.hash()}.${(e=this.color)==null?void 0:e.hash()}.${this.height}.${this.url}.${this.width}.${this.xoffset}.${this.xscale}.${this.yoffset}.${this.yscale}`}};v([Re({esriPFS:"picture-fill"},{readOnly:!0})],Rs.prototype,"type",void 0),v([S(XN)],Rs.prototype,"url",void 0),v([S({type:Number,json:{write:!0}})],Rs.prototype,"xscale",void 0),v([S({type:Number,json:{write:!0}})],Rs.prototype,"yscale",void 0),v([S({type:Number,cast:ht,json:{write:!0}})],Rs.prototype,"width",void 0),v([S({type:Number,cast:ht,json:{write:!0}})],Rs.prototype,"height",void 0),v([S({type:Number,cast:ht,json:{write:!0}})],Rs.prototype,"xoffset",void 0),v([S({type:Number,cast:ht,json:{write:!0}})],Rs.prototype,"yoffset",void 0),v([S(QN)],Rs.prototype,"source",void 0),Rs=I9=v([H("esri.symbols.PictureFillSymbol")],Rs);const OS=Rs;let al=class extends tr{constructor(t){super(t),this.angle=0,this.type=null,this.xoffset=0,this.yoffset=0,this.size=9}hash(){return`${this.type}.${this.angle}.${this.size}.${this.xoffset}.${this.yoffset}`}};v([S({type:Number,json:{read:e=>e&&-1*e,write:(e,t)=>t.angle=e&&-1*e}})],al.prototype,"angle",void 0),v([S({type:["simple-marker","picture-marker"],readOnly:!0})],al.prototype,"type",void 0),v([S({type:Number,cast:ht,json:{write:!0}})],al.prototype,"xoffset",void 0),v([S({type:Number,cast:ht,json:{write:!0}})],al.prototype,"yoffset",void 0),v([S({cast:e=>e==="auto"?e:Er(ht(e)),json:{write:!0}})],al.prototype,"size",void 0),al=v([H("esri.symbols.MarkerSymbol")],al);const eL=al;var A9;let wn=A9=class extends eL{constructor(...e){super(...e),this.color=null,this.type="picture-marker",this.url=null,this.source=null,this.height=12,this.width=12,this.size=null}normalizeCtorArgs(e,t,i){if(e&&typeof e!="string"&&e.imageData==null)return e;const r={};return e&&(r.url=e),t!=null&&(r.width=ht(t)),i!=null&&(r.height=ht(i)),r}readHeight(e,t){return t.size||e}readWidth(e,t){return t.size||e}clone(){const e=new A9({angle:this.angle,height:this.height,url:this.url,width:this.width,xoffset:this.xoffset,yoffset:this.yoffset});return e._set("source",te(this.source)),e}hash(){return`${super.hash()}.${this.height}.${this.url}.${this.width}`}};v([S({json:{write:!1}})],wn.prototype,"color",void 0),v([Re({esriPMS:"picture-marker"},{readOnly:!0})],wn.prototype,"type",void 0),v([S(XN)],wn.prototype,"url",void 0),v([S(QN)],wn.prototype,"source",void 0),v([S({type:Number,cast:ht,json:{write:!0}})],wn.prototype,"height",void 0),v([me("height",["height","size"])],wn.prototype,"readHeight",null),v([S({type:Number,cast:ht,json:{write:!0}})],wn.prototype,"width",void 0),v([S({json:{write:!1}})],wn.prototype,"size",void 0),wn=A9=v([H("esri.symbols.PictureMarkerSymbol")],wn);const Io=wn;var zu;const tL=xe.ofType({base:null,key:"type",typeMap:{icon:wh,object:ES,text:vd}});let Uu=zu=class extends U1{constructor(e){super(e),this.verticalOffset=null,this.callout=null,this.symbolLayers=new tL,this.type="point-3d"}supportsCallout(){if((this.symbolLayers?this.symbolLayers.length:0)<1)return!1;for(const e of this.symbolLayers.items)switch(e.type){case"icon":case"text":case"object":continue;default:return!1}return!0}hasVisibleCallout(){return qN(this)}hasVisibleVerticalOffset(){return AS(this)}clone(){return new zu({verticalOffset:te(this.verticalOffset),callout:te(this.callout),styleOrigin:te(this.styleOrigin),symbolLayers:te(this.symbolLayers),thumbnail:te(this.thumbnail)})}static fromSimpleMarkerSymbol(e){return new zu({symbolLayers:new xe([wh.fromSimpleMarkerSymbol(e)])})}static fromPictureMarkerSymbol(e){return new zu({symbolLayers:new xe([wh.fromPictureMarkerSymbol(e)])})}static fromCIMSymbol(e){var r,a;if(((a=(r=e.data)==null?void 0:r.symbol)==null?void 0:a.type)!=="CIMPointSymbol")return null;const i=e.data.symbol;return new zu(i!=null&&i.callout?{symbolLayers:new xe([wh.fromCIMSymbol(e)]),callout:new BN({size:.5,color:new De([0,0,0])}),verticalOffset:new CS({screenLength:40})}:{symbolLayers:new xe([wh.fromCIMSymbol(e)])})}static fromTextSymbol(e){return new zu({symbolLayers:new xe([vd.fromTextSymbol(e)])})}};v([S({type:CS,json:{write:!0}})],Uu.prototype,"verticalOffset",void 0),v([S(HN)],Uu.prototype,"callout",void 0),v([S({type:tL,json:{origins:{"web-scene":{write:!0}}}})],Uu.prototype,"symbolLayers",void 0),v([Re({PointSymbol3D:"point-3d"},{readOnly:!0})],Uu.prototype,"type",void 0),Uu=zu=v([H("esri.symbols.PointSymbol3D")],Uu);const ma=Uu;var Of;const iL=xe.ofType({base:null,key:"type",typeMap:{extrude:AN,fill:Zh,icon:wh,line:gd,object:ES,text:vd,water:UN}});let Pf=Of=class extends U1{constructor(e){super(e),this.symbolLayers=new iL,this.type="polygon-3d"}initialize(){const e=t=>{t.type==="line"&&Np(ye.getLogger(this),"LineSymbol3DLayer can not be used as a SymbolLayer with a PolygonSymbol3D symbol anymore.",{replacement:"Use FillSymbol3DLayer.outline instead.",version:"4.28"}),t.type==="text"&&Np(ye.getLogger(this),"TextSymbol3DLayer can not be used as a SymbolLayer with a PolygonSymbol3D symbol anymore.",{replacement:"Use Labels instead.",version:"4.28"})};for(const t of this.symbolLayers)e(t);this.addHandles(_o(()=>this.symbolLayers,"after-add",({item:t})=>e(t),So))}clone(){return new Of({styleOrigin:te(this.styleOrigin),symbolLayers:te(this.symbolLayers),thumbnail:te(this.thumbnail)})}static fromJSON(e){var i;const t=new Of;if(t.read(e),t.symbolLayers.length===2&&t.symbolLayers.at(0).type==="fill"&&t.symbolLayers.at(1).type==="line"){const r=t.symbolLayers.at(0),a=t.symbolLayers.at(1);!a.enabled||(i=e.symbolLayers)!=null&&i[1]&&e.symbolLayers[1].enable===!1||(r.outline={size:a.size,color:a.material!=null?a.material.color:null}),t.symbolLayers.removeAt(1)}return t}static fromSimpleFillSymbol(e){return new Of({symbolLayers:new xe([Zh.fromSimpleFillSymbol(e)])})}};v([S({type:iL,json:{write:!0}})],Pf.prototype,"symbolLayers",void 0),v([Re({PolygonSymbol3D:"polygon-3d"},{readOnly:!0})],Pf.prototype,"type",void 0),Pf=Of=v([H("esri.symbols.PolygonSymbol3D")],Pf);const hu=Pf;var C9;const sb=new rt({esriSFSSolid:"solid",esriSFSNull:"none",esriSFSHorizontal:"horizontal",esriSFSVertical:"vertical",esriSFSForwardDiagonal:"forward-diagonal",esriSFSBackwardDiagonal:"backward-diagonal",esriSFSCross:"cross",esriSFSDiagonalCross:"diagonal-cross"});let Vu=C9=class extends KN{constructor(...e){super(...e),this.color=new De([0,0,0,.25]),this.outline=new Ms,this.type="simple-fill",this.style="solid"}normalizeCtorArgs(e,t,i){if(e&&typeof e!="string")return e;const r={};return e&&(r.style=e),t&&(r.outline=t),i&&(r.color=i),r}clone(){return new C9({color:te(this.color),outline:this.outline&&this.outline.clone(),style:this.style})}hash(){return`${super.hash()}${this.style}.${this.color&&this.color.hash()}`}};v([S()],Vu.prototype,"color",void 0),v([S()],Vu.prototype,"outline",void 0),v([Re({esriSFS:"simple-fill"},{readOnly:!0})],Vu.prototype,"type",void 0),v([S({type:sb.apiValues,json:{read:sb.read,write:sb.write}})],Vu.prototype,"style",void 0),Vu=C9=v([H("esri.symbols.SimpleFillSymbol")],Vu);const cu=Vu;var O9;const nb=new rt({esriSMSCircle:"circle",esriSMSSquare:"square",esriSMSCross:"cross",esriSMSX:"x",esriSMSDiamond:"diamond",esriSMSTriangle:"triangle",esriSMSPath:"path"});let Yn=O9=class extends eL{constructor(...e){super(...e),this.color=new De([255,255,255,.25]),this.type="simple-marker",this.size=12,this.style="circle",this.outline=new Ms}normalizeCtorArgs(e,t,i,r){if(e&&typeof e!="string")return e;const a={};return e&&(a.style=e),t!=null&&(a.size=ht(t)),i&&(a.outline=i),r&&(a.color=r),a}writeColor(e,t){e&&this.style!=="x"&&this.style!=="cross"&&(t.color=e.toJSON()),e===null&&(t.color=null)}set path(e){this.style="path",this._set("path",e)}clone(){return new O9({angle:this.angle,color:te(this.color),outline:this.outline&&this.outline.clone(),path:this.path,size:this.size,style:this.style,xoffset:this.xoffset,yoffset:this.yoffset})}hash(){var e;return`${super.hash()}.${this.color&&this.color.hash()}.${this.path}.${this.style}.${(e=this.outline)==null?void 0:e.hash()}`}};v([S()],Yn.prototype,"color",void 0),v([be("color")],Yn.prototype,"writeColor",null),v([Re({esriSMS:"simple-marker"},{readOnly:!0})],Yn.prototype,"type",void 0),v([S()],Yn.prototype,"size",void 0),v([S({type:nb.apiValues,json:{read:nb.read,write:nb.write}})],Yn.prototype,"style",void 0),v([S({type:String,json:{write:!0}})],Yn.prototype,"path",null),v([S({types:{key:"type",base:null,defaultKeyValue:"simple-line",typeMap:{"simple-line":Ms}},json:{default:null,write:!0}})],Yn.prototype,"outline",void 0),Yn=O9=v([H("esri.symbols.SimpleMarkerSymbol")],Yn);const Ao=Yn;var P9;let Ut=P9=class extends tr{constructor(...e){super(...e),this.backgroundColor=null,this.borderLineColor=null,this.borderLineSize=null,this.font=new A2,this.horizontalAlignment="center",this.kerning=!0,this.haloColor=null,this.haloSize=null,this.rightToLeft=null,this.rotated=!1,this.text="",this.type="text",this.verticalAlignment="baseline",this.xoffset=0,this.yoffset=0,this.angle=0,this.width=null,this.lineWidth=192,this.lineHeight=1}normalizeCtorArgs(e,t,i){if(e&&typeof e!="string")return e;const r={};return e&&(r.text=e),t&&(r.font=t),i&&(r.color=i),r}writeLineWidth(e,t,i,r){r&&typeof r!="string"?r.origin:t[i]=e}castLineWidth(e){return ht(e)}writeLineHeight(e,t,i,r){r&&typeof r!="string"?r.origin:t[i]=e}clone(){return new P9({angle:this.angle,backgroundColor:te(this.backgroundColor),borderLineColor:te(this.borderLineColor),borderLineSize:this.borderLineSize,color:te(this.color),font:this.font&&this.font.clone(),haloColor:te(this.haloColor),haloSize:this.haloSize,horizontalAlignment:this.horizontalAlignment,kerning:this.kerning,lineHeight:this.lineHeight,lineWidth:this.lineWidth,rightToLeft:this.rightToLeft,rotated:this.rotated,text:this.text,verticalAlignment:this.verticalAlignment,width:this.width,xoffset:this.xoffset,yoffset:this.yoffset})}hash(){var e,t,i;return`${(e=this.backgroundColor)==null?void 0:e.hash()}.${this.borderLineColor}.${this.borderLineSize}.${(t=this.color)==null?void 0:t.hash()}.${this.font&&this.font.hash()}.${(i=this.haloColor)==null?void 0:i.hash()}.${this.haloSize}.${this.horizontalAlignment}.${this.kerning}.${this.rightToLeft}.${this.rotated}.${this.text}.${this.verticalAlignment}.${this.width}.${this.xoffset}.${this.yoffset}.${this.lineHeight}.${this.lineWidth}.${this.angle}`}};v([S({type:De,json:{write:!0}})],Ut.prototype,"backgroundColor",void 0),v([S({type:De,json:{write:!0}})],Ut.prototype,"borderLineColor",void 0),v([S({type:Number,json:{write:!0},cast:ht})],Ut.prototype,"borderLineSize",void 0),v([S({type:A2,json:{write:!0}})],Ut.prototype,"font",void 0),v([S({...FN,json:{write:!0}})],Ut.prototype,"horizontalAlignment",void 0),v([S({type:Boolean,json:{write:!0}})],Ut.prototype,"kerning",void 0),v([S({type:De,json:{write:!0}})],Ut.prototype,"haloColor",void 0),v([S({type:Number,cast:ht,json:{write:!0}})],Ut.prototype,"haloSize",void 0),v([S({type:Boolean,json:{write:!0}})],Ut.prototype,"rightToLeft",void 0),v([S({type:Boolean,json:{write:!0}})],Ut.prototype,"rotated",void 0),v([S({type:String,json:{write:!0}})],Ut.prototype,"text",void 0),v([Re({esriTS:"text"},{readOnly:!0})],Ut.prototype,"type",void 0),v([S({...zN,json:{write:!0}})],Ut.prototype,"verticalAlignment",void 0),v([S({type:Number,cast:ht,json:{write:!0}})],Ut.prototype,"xoffset",void 0),v([S({type:Number,cast:ht,json:{write:!0}})],Ut.prototype,"yoffset",void 0),v([S({type:Number,json:{read:e=>e&&-1*e,write:(e,t)=>t.angle=e&&-1*e}})],Ut.prototype,"angle",void 0),v([S({type:Number,json:{write:!0}})],Ut.prototype,"width",void 0),v([S({type:Number})],Ut.prototype,"lineWidth",void 0),v([be("lineWidth")],Ut.prototype,"writeLineWidth",null),v([ct("lineWidth")],Ut.prototype,"castLineWidth",null),v([S(jN)],Ut.prototype,"lineHeight",void 0),v([be("lineHeight")],Ut.prototype,"writeLineHeight",null),Ut=P9=v([H("esri.symbols.TextSymbol")],Ut);const wd=Ut;var k9;let bn=k9=class extends tr{constructor(e){super(e),this.color=null,this.styleName=null,this.portal=null,this.styleUrl=null,this.thumbnail=null,this.name=null,this.type="web-style"}get _fetchCacheKey(){const e=this.portal!=null?this.portal:er.getDefault(),t=e.user?e.user.username:null;return`${this.styleName}:${this.styleUrl}:${this.name}:${t}:${e.url}`}read(e,t){this.portal=t==null?void 0:t.portal,super.read(e,t)}clone(){return new k9({name:this.name,styleUrl:this.styleUrl,styleName:this.styleName,portal:this.portal})}fetchSymbol(e){const t=e&&"acceptedFormats"in e?e.acceptedFormats:["web"];return this._fetchSymbol({...e,acceptedFormats:t})}async fetchCIMSymbol(e){const t=await this.fetchSymbol({...e,acceptedFormats:["cim"]});if((t==null?void 0:t.type)!=="cim")throw new Y("webstylesymbol:fetchCIMSymbol","Resolved web style symbol is not of type 'cim'");return t}async _fetchSymbol(e){const t=e!=null?e.cache:null,i=t?this._fetchCacheKey:null;if(t!=null){const y=i&&t.get(i);if(y)return y.clone()}const{resolveWebStyleSymbol:r}=await fe(()=>import("./webStyleSymbolUtils-2uWLXmRp.js"),__vite__mapDeps([178,179,180]));At(e);const a=r(this,{portal:this.portal},e);a.catch(y=>{ye.getLogger(this).error("#fetchSymbol()","Failed to create symbol from style",y)});const p=await a;return t!=null&&t.set(i,p.clone()),p}};v([S({json:{write:!1}})],bn.prototype,"color",void 0),v([S({type:String,json:{write:!0}})],bn.prototype,"styleName",void 0),v([S({type:er,json:{write:!1}})],bn.prototype,"portal",void 0),v([S({type:String,json:{read:m6,write:Oh}})],bn.prototype,"styleUrl",void 0),v([S({type:A0,json:{read:!1}})],bn.prototype,"thumbnail",void 0),v([S({type:String,json:{write:!0}})],bn.prototype,"name",void 0),v([Re({styleSymbolReference:"web-style"},{readOnly:!0})],bn.prototype,"type",void 0),v([S()],bn.prototype,"_fetchCacheKey",null),bn=k9=v([H("esri.symbols.WebStyleSymbol")],bn);const eu=bn;function v9e(e){if(!e)return!1;switch(e.type){case"picture-fill":case"picture-marker":case"simple-fill":case"simple-line":case"simple-marker":case"text":case"cim":return!0;default:return!1}}function rL(e){switch(e==null?void 0:e.type){case"label-3d":case"line-3d":case"mesh-3d":case"point-3d":case"polygon-3d":return!0;default:return!1}}const Dl={base:tr,key:"type",typeMap:{"simple-fill":cu,"picture-fill":OS,"picture-marker":Io,"simple-line":Ms,"simple-marker":Ao,text:wd,"label-3d":C2,"line-3d":Kh,"mesh-3d":V1,"point-3d":ma,"polygon-3d":hu,"web-style":eu,cim:Pa},errorContext:"symbol"},w9e={base:tr,key:"type",typeMap:{"picture-marker":Io,"simple-marker":Ao,"point-3d":ma,cim:Pa},errorContext:"symbol"},b9e={base:tr,key:"type",typeMap:{"simple-line":Ms,"line-3d":Kh,cim:Pa},errorContext:"symbol"},_9e={base:tr,key:"type",typeMap:{"simple-fill":cu,"picture-fill":OS,"polygon-3d":hu,cim:Pa},errorContext:"symbol"},Tie={base:tr,key:"type",typeMap:{"picture-marker":Io,"simple-marker":Ao,text:wd,"web-style":eu,cim:Pa},errorContext:"symbol"},Mie=od({types:Dl}),sL={base:tr,key:"type",typeMap:{"simple-fill":cu,"picture-fill":OS,"picture-marker":Io,"simple-line":Ms,"simple-marker":Ao,text:wd,"line-3d":Kh,"mesh-3d":V1,"point-3d":ma,"polygon-3d":hu,"web-style":eu,cim:Pa},errorContext:"symbol"},$ie={base:tr,key:"type",typeMap:{text:wd,"label-3d":C2},errorContext:"symbol"},L8={base:tr,key:"type",typeMap:{"line-3d":Kh,"mesh-3d":V1,"point-3d":ma,"polygon-3d":hu,"web-style":eu,cim:Pa},errorContext:"symbol"},Eie={base:tr,key:"type",typeMap:{"label-3d":C2},errorContext:"symbol"},nL=Nn(Dl);var R9;function Iie(e){if(!e)return null;const t={};for(const i in e){const r=Dh(e[i]);r&&(t[i]=r)}return Object.keys(t).length!==0?t:null}function Aie(e){if(e==null)return null;const t={};for(const i in e){const r=e[i];r&&(t[i]=r.toJSON())}return Object.keys(t).length!==0?t:null}let Lr=R9=class extends at.ClonableMixin(he){constructor(e){super(e),this.isAggregate=!1,this.layer=null,this.origin=null,this.popupTemplate=null,this.sourceLayer=null,this._version=0,Object.defineProperty(this,"uid",{value:am(),configurable:!0}),Object.defineProperty(this,"_lastMeshTransform",{value:{},configurable:!0,writable:!0,enumerable:!1}),arguments.length>1&&AU(ye.getLogger(this),"Graphic",{version:"4.30"})}initialize(){this._watchMeshGeometryChanges()}set aggregateGeometries(e){const t=this._get("aggregateGeometries");JSON.stringify(t)!==JSON.stringify(e)&&this._set("aggregateGeometries",e)}set attributes(e){const t=this._get("attributes");t!==e&&(this._set("attributes",e),this._notifyLayer("attributes",t,e))}set geometry(e){const t=this._get("geometry");t!==e&&(this._set("geometry",e),(e==null?void 0:e.type)!=="mesh"&&this._notifyLayer("geometry",t,e))}set symbol(e){const t=this._get("symbol");t!==e&&(this._set("symbol",e),this._notifyLayer("symbol",t,e))}get version(){return this._version}set visible(e){const t=this._get("visible");t!==e&&(this._set("visible",e),this._notifyLayer("visible",t,e))}cloneShallow(){return new R9({aggregateGeometries:this.aggregateGeometries,attributes:this.attributes,geometry:this.geometry,isAggregate:this.isAggregate,layer:this.layer,popupTemplate:this.popupTemplate,sourceLayer:this.sourceLayer,symbol:this.symbol,visible:this.visible,origin:this.origin})}getEffectivePopupTemplate(e=!1){if(this.popupTemplate)return this.popupTemplate;const t=this.origin&&"layer"in this.origin?this.origin.layer:null;for(const i of[t,this.sourceLayer,this.layer])if(i){if("popupTemplate"in i&&i.popupTemplate)return i.popupTemplate;if(e&&"defaultPopupTemplate"in i&&i.defaultPopupTemplate!=null)return i.defaultPopupTemplate}return null}getAttribute(e){var t;return(t=this.attributes)==null?void 0:t[e]}setAttribute(e,t){if(this.attributes){const i=this.getAttribute(e);this.attributes[e]=t,this._notifyLayer("attributes",i,t,e)}else this.attributes={[e]:t},this._notifyLayer("attributes",void 0,t,e)}getObjectId(){return this.sourceLayer&&"objectIdField"in this.sourceLayer&&this.sourceLayer.objectIdField?this.getAttribute(this.sourceLayer.objectIdField):null}toJSON(){var e;return{aggregateGeometries:Aie(this.aggregateGeometries),geometry:this.geometry!=null?this.geometry.toJSON():null,symbol:this.symbol!=null?this.symbol.toJSON():null,attributes:he.isSerializable(this.attributes)?this.attributes.toJSON():{...this.attributes},popupTemplate:((e=this.popupTemplate)==null?void 0:e.toJSON())??null}}notifyMeshTransformChanged(e={}){const{geometry:t}=this;if((t==null?void 0:t.type)==="mesh"){const i={origin:t.origin,transform:t.transform};this._notifyLayer("origin-transform",i,i,e.action)}}_notifyLayer(e,t,i,r){if(this._version++,!this.layer||!("graphicChanged"in this.layer))return;const a={graphic:this,property:e,oldValue:t,newValue:i};e==="origin-transform"&&(a.action=r),e==="attributes"&&(a.attributeName=r),this.layer.graphicChanged(a)}_watchMeshGeometryChanges(){this.addHandles([gr(()=>{var e,t;return((e=this.geometry)==null?void 0:e.type)==="mesh"&&this.geometry.vertexSpace.origin?{localMatrix:(t=this.geometry.transform)==null?void 0:t.localMatrix,origin:this.geometry.vertexSpace.origin}:void 0},({localMatrix:e,origin:t})=>{this._lastMeshTransform.localMatrix===e&&this._lastMeshTransform.origin===t||(this._lastMeshTransform.localMatrix=e,this._lastMeshTransform.origin=t,this.notifyMeshTransformChanged())}),gr(()=>{var e;return((e=this.geometry)==null?void 0:e.type)==="mesh"?{vertexAttributes:this.geometry.vertexAttributes}:void 0},()=>{var t;const e=this.geometry;(e==null?void 0:e.type)==="mesh"&&e.vertexSpace.origin?(this._lastMeshTransform.localMatrix=(t=e.transform)==null?void 0:t.localMatrix,this._lastMeshTransform.origin=e.vertexSpace.origin):(this._lastMeshTransform.localMatrix=void 0,this._lastMeshTransform.origin=void 0),this._notifyLayer("geometry",this.geometry,this.geometry)},{equals:(e,t)=>e===t,sync:!0})])}};v([S({value:null,json:{read:Iie}})],Lr.prototype,"aggregateGeometries",null),v([S({value:null})],Lr.prototype,"attributes",null),v([S({value:null,types:P1,json:{read:Dh}})],Lr.prototype,"geometry",null),v([S({type:Boolean})],Lr.prototype,"isAggregate",void 0),v([S({clonable:"reference"})],Lr.prototype,"layer",void 0),v([S({clonable:"reference"})],Lr.prototype,"origin",void 0),v([S({type:Jh})],Lr.prototype,"popupTemplate",void 0),v([S({clonable:"reference"})],Lr.prototype,"sourceLayer",void 0),v([S({value:null,types:Dl})],Lr.prototype,"symbol",null),v([S({clonable:!1,json:{read:!1,write:!1}})],Lr.prototype,"_version",void 0),v([S({type:Boolean,value:!0})],Lr.prototype,"visible",null),Lr=R9=v([H("esri.Graphic")],Lr);const Mo=Lr;let C0=class extends T0{_own(t){t.layer&&"remove"in t.layer&&t.layer!==this.owner&&t.layer.remove(t),t.layer=this.owner}_release(t){t.layer===this.owner&&(t.layer=null)}};v([w6({Type:Mo,ensureType:di(Mo)})],C0.prototype,"itemType",void 0),C0=v([H("esri.support.GraphicsCollection")],C0);let ll=class extends Ae{constructor(t){super(t),this.view=null,this.baseLayerViews=new xe,this.referenceLayerViews=new xe,this._loadingHandle=Le(()=>{var i,r;return(r=(i=this.view)==null?void 0:i.map)==null?void 0:r.basemap},i=>{i&&i.load().catch(()=>{})},Pi)}destroy(){this._set("view",null),this._loadingHandle&&(this._loadingHandle.remove(),this._loadingHandle=null);for(const t of this.baseLayerViews)t.destroy();this.baseLayerViews.length=0;for(const t of this.referenceLayerViews)t.destroy();this.referenceLayerViews.length=0}get suspended(){var t;return((t=this.view)==null?void 0:t.suspended)??!0}get updating(){var i,r,a;if((i=this.view)!=null&&i.suspended)return!1;const t=(a=(r=this.view)==null?void 0:r.map)==null?void 0:a.basemap;return!!(t!=null&&t.loaded)&&(this.baseLayerViews.some(p=>p.updating)||this.referenceLayerViews.some(p=>p.updating))}};v([S({constructOnly:!0})],ll.prototype,"view",void 0),v([S({readOnly:!0})],ll.prototype,"baseLayerViews",void 0),v([S({readOnly:!0})],ll.prototype,"referenceLayerViews",void 0),v([S({readOnly:!0})],ll.prototype,"suspended",null),v([S({type:Boolean,readOnly:!0})],ll.prototype,"updating",null),ll=v([H("esri.views.BasemapView")],ll);const Cie=ll;function Oie(e){return"tryRecycleWith"in e}function Pie(e){return e!=null&&typeof e=="object"&&"layerViews"in e}let kie=class{constructor(t,i,r){this.layer=t,this.view=i,this.layerViewImporter=r,this._controller=new AbortController,this._deferred=_s(),this._started=!1,this.done=!1,this.promise=this._deferred.promise,Zs(this._controller.signal,()=>{const a=new Y("cancelled:layerview-create","layerview creation cancelled",{layer:t});this._deferred.reject(a)})}tryRecycle(t){if(!this.done||!this.layerView||!Oie(this.layerView))return null;const i=this.layer.type,r=this._controller.signal;for(let a=0;a<t.length;a++){const p=t[a];if(p.type!==i)continue;const y=this.layerView.tryRecycleWith(p,{signal:r});if(y){t.splice(a,1),this.layer=p;const g=this.layerView,_=g.view;return this.promise=Promise.race([y.then(()=>(At(this._controller.signal),p.emit("layerview-destroy",{view:_,layerView:g}),_.emit("layerview-destroy",{view:_,layerView:g}),p.emit("layerview-create",{view:_,layerView:g}),_.emit("layerview-create",{view:_,layerView:g}),g)),new Promise((T,I)=>Zs(this._controller.signal,()=>I(Lt())))]),this.promise}}return null}destroy(){this._controller.abort();const{layerView:t}=this;if(t){const{layer:i,view:r}=this;i.emit("layerview-destroy",{view:r,layerView:t}),r.emit("layerview-destroy",{layer:i,layerView:t})}this.done=!0,this.layer=null,this.layerView=null,this.view=null,this.layerViewImporter=null,this._map=null}async start(){var a,p;if(this._started)return;this._started=!0;const{_controller:{signal:t},layer:i,view:r}=this;this._map=r.map;try{let y,g;if(await i.load({signal:t}),i.prefetchResources&&await i.prefetchResources({signal:t}),Nie(i))y=await i.createLayerView(r,{signal:t});else{if(!this.layerViewImporter.hasLayerViewModule(i))throw new Y("layer:view-not-supported","No layerview implementation was found");const I=await this.layerViewImporter.importLayerView(i);At(t),y="default"in I?new I.default({layer:i,view:r}):new I({layer:i,view:r})}const _=()=>{g=Wt(g),y.destroyed||y.destroy(),y.layer=null,y.parent=null,y.view=null,this.done=!0};g=Zs(t,_),At(t);try{await y.when()}catch(I){throw _(),I}if(!((p=(a=this._map)==null?void 0:a.allLayers)==null?void 0:p.includes(i)))return _(),void this._deferred.reject(new Y("view:no-layerview-for-layer","The layer has been removed from the map",{layer:i}));this.layerView=y,i.emit("layerview-create",{view:r,layerView:y}),r.emit("layerview-create",{layer:i,layerView:y}),this.done=!0,this._deferred.resolve(y)}catch(y){i.emit("layerview-create-error",{view:r,error:y}),r.emit("layerview-create-error",{layer:i,error:y}),this.done=!0,this._deferred.reject(new Y("layerview:create-error","layerview creation failed",{layer:i,error:y}))}}},Ns=class extends Ae{constructor(t){super(t),this._layerLayerViewInfoMap=new Map,this._recyclingInfoMap=new Map,this._watchUpdatingTracking=new Eh,this.supportsGround=!0,this._preloadLayerViewModules=()=>{var r;const i=(r=this.view.map)==null?void 0:r.allLayers;if(i)for(const a of i)this.layerViewImporter.hasLayerViewModule(a)&&this.layerViewImporter.importLayerView(a)},this._reschedule=()=>this.destroyed?Promise.reject():(this._workPromise==null&&(this._workPromise=_s(),this._workPromise.promise.catch(()=>{})),this.removeHandles("reschedule"),this.addHandles(b1(this._doWork),"reschedule"),this._workPromise.promise),this._doWork=()=>{var _,T,I;if(this.destroyed)return;const i=this.view.map;if(this._map!==i&&(this.clear(),this._map=i),this._workPromise==null)return void this.notifyChange("updating");this.removeHandles("reschedule"),this.removeHandles("collection-change");const r=new Set,a=[],p=this.view.ready,y=A=>{if(A!=null){for(const P of A)if(P){r.add(P);const N=this._layerLayerViewInfoMap.get(P);N&&p?N.start():N||this._recyclingInfoMap.has(P)||a.push(P),"layers"in P&&P.layers&&y(P.layers)}}};for(const A of this._rootCollectionNames)y(mo(this,A));for(const[A,P]of this._layerLayerViewInfoMap)if(!r.has(A)){this._layerLayerViewInfoMap.delete(P.layer);const N=P.tryRecycle(a);N?(this.notifyChange("updating"),this._recyclingInfoMap.set(P.layer,P),N.then(()=>{this.notifyChange("updating"),this._recyclingInfoMap.delete(P.layer),this._layerLayerViewInfoMap.set(P.layer,P),this._reschedule()}).catch(()=>{this.notifyChange("updating"),this._recyclingInfoMap.delete(P.layer),P.destroy(),this._reschedule()})):P.destroy()}for(const[A,P]of this._recyclingInfoMap)r.has(A)||(this.notifyChange("updating"),this._recyclingInfoMap.delete(P.layer),P.destroy());for(const A of a)this._createLayerView(A);this._refreshCollections();const g=[(_=i==null?void 0:i.ground)==null?void 0:_.layers,(T=i==null?void 0:i.basemap)==null?void 0:T.baseLayers,(I=i==null?void 0:i.basemap)==null?void 0:I.referenceLayers,i==null?void 0:i.layers].filter(A=>!!A);r.forEach(A=>"layers"in A&&g.push(A.layers)),this.addHandles(g.map(A=>this._watchUpdatingTracking.addOnCollectionChange(()=>A,this._reschedule)),"collection-change"),this._workPromise.resolve(),this._workPromise=null}}initialize(){this.addHandles([_o(()=>{var t,i;return(i=(t=this.view)==null?void 0:t.map)==null?void 0:i.allLayers},"change",this._preloadLayerViewModules,{onListenerAdd:this._preloadLayerViewModules}),Le(()=>{const t=this.view,i=t==null?void 0:t.map;return[i==null?void 0:i.basemap,i==null?void 0:i.ground,i==null?void 0:i.layers,t==null?void 0:t.ready]},()=>this._reschedule(),qr)]),this._preloadLayerViewModules(),this._reschedule()}destroy(){this.clear(),Bw(this._recyclingInfoMap),Bw(this._layerLayerViewInfoMap),this._watchUpdatingTracking.destroy(),this._map=null,this._workPromise!=null&&(this._workPromise.reject(Lt()),this._workPromise=null)}get _layersToLayerViews(){const t=[["view.map.basemap.baseLayers","view.basemapView.baseLayerViews"],["view.map.layers","view.layerViews"],["view.map.basemap.referenceLayers","view.basemapView.referenceLayerViews"]];return this.supportsGround&&t.push(["view.map.ground.layers","view.groundView.layerViews"]),new Map(t)}get _rootCollectionNames(){return Array.from(this._layersToLayerViews.keys())}get updating(){return this._workPromise!=null||this._watchUpdatingTracking.updating||DV(this._layerLayerViewInfoMap,t=>!t.done)||this._recyclingInfoMap.size>0}get updatingRemaining(){let t=0;for(const i of this._layerLayerViewInfoMap.values())i.done||++t;return t}clear(){this.destroyed||(Bw(this._layerLayerViewInfoMap),this._refreshCollections())}async whenLayerView(t){if(await this._reschedule(),!this._layerLayerViewInfoMap.has(t)){if(this._recyclingInfoMap.has(t))return this._recyclingInfoMap.get(t).promise;throw new Y("view:no-layerview-for-layer","No layerview has been found for the layer",{layer:t})}return this._layerLayerViewInfoMap.get(t).promise}isCreatingLayerViewsForLayer(t,i){var p;this.commitProperty("updatingRemaining");const r=this._layerLayerViewInfoMap.get(t);if(!(r!=null&&r.done))return!0;const a=r.layerView;return!(!a||!i||a.parent===i)||!!(r.done&&a&&"layers"in t&&((p=t.layers)!=null&&p.length))&&t.layers.some(y=>this.isCreatingLayerViewsForLayer(y,a))}_refreshCollections(){for(const[t,i]of this._layersToLayerViews)this._populateLayerViewsOwners(mo(this,t),mo(this,i),this.view);this.notifyChange("updating"),this.notifyChange("updatingRemaining")}_populateLayerViewsOwners(t,i,r){if(!t||!i)return void(i&&i.removeAll());let a=0;for(const p of t){const y=this._layerLayerViewInfoMap.get(p);if(!(y!=null&&y.layerView))continue;const g=y.layerView;g.layer=p,g.parent=r,i.at(a)!==g&&i.splice(a,0,g),"layers"in p&&Pie(g)&&this._populateLayerViewsOwners(p.layers,g.layerViews,g),a+=1}a<i.length&&i.splice(a,i.length)}_createLayerView(t){t.load().catch(()=>{}),this.layerViewImporter.hasLayerViewModule(t)&&this.layerViewImporter.importLayerView(t);const i=new kie(t,this.view,this.layerViewImporter);i.promise.then(()=>this._refreshCollections(),r=>{r&&(Si(r)||r.name==="cancelled:layerview-create")||ye.getLogger(this).error(`Failed to create layerview for layer title:'${t.title??"no title"}', id:'${t.id??"no id"}' of type '${t.type}'.`,{layer:t,error:r}),this._refreshCollections()}),this._layerLayerViewInfoMap.set(t,i),this.view.ready&&i.start(),this.notifyChange("updating"),this.notifyChange("updatingRemaining")}};v([S()],Ns.prototype,"_workPromise",void 0),v([S({readOnly:!0})],Ns.prototype,"_watchUpdatingTracking",void 0),v([S({readOnly:!0})],Ns.prototype,"_layersToLayerViews",null),v([S({readOnly:!0})],Ns.prototype,"_rootCollectionNames",null),v([S()],Ns.prototype,"layerViewImporter",void 0),v([S()],Ns.prototype,"supportsGround",void 0),v([S({readOnly:!0})],Ns.prototype,"updating",null),v([S({readOnly:!0})],Ns.prototype,"updatingRemaining",null),v([S({constructOnly:!0})],Ns.prototype,"view",void 0),Ns=v([H("esri.views.LayerViewManager")],Ns);const Rie=Ns;function Nie(e){return e.createLayerView!==X6.prototype.createLayerView}let os=class extends Ae{constructor(t){super(t),this.factor=1.5,this.offset=Gi(0,0),this.position=null,this.size=120,this.maskUrl=null,this.maskEnabled=!0,this.overlayUrl=null,this.overlayEnabled=!0,this.visible=!0}get version(){return this.commitProperty("factor"),this.commitProperty("offset"),this.commitProperty("position"),this.commitProperty("visible"),this.commitProperty("size"),this.commitProperty("maskUrl"),this.commitProperty("maskEnabled"),this.commitProperty("overlayUrl"),this.commitProperty("overlayEnabled"),(this._get("version")||0)+1}};v([S({type:Number})],os.prototype,"factor",void 0),v([S({nonNullable:!0})],os.prototype,"offset",void 0),v([S()],os.prototype,"position",void 0),v([S({type:Number,range:{min:0}})],os.prototype,"size",void 0),v([S()],os.prototype,"maskUrl",void 0),v([S()],os.prototype,"maskEnabled",void 0),v([S()],os.prototype,"overlayUrl",void 0),v([S()],os.prototype,"overlayEnabled",void 0),v([S({readOnly:!0})],os.prototype,"version",null),v([S({type:Boolean})],os.prototype,"visible",void 0),os=v([H("esri.views.Magnifier")],os);const oL=os;let Wm=class{constructor(t){this._observable=new T1,this._map=new Map(t)}get size(){return ze(this._observable),this._map.size}clear(){this._map.size>0&&(this._map.clear(),this._observable.notify())}delete(t){const i=this._map.delete(t);return i&&this._observable.notify(),i}entries(){return ze(this._observable),this._map.entries()}forEach(t,i){ze(this._observable),this._map.forEach((r,a)=>t.call(i,r,a,this),i)}get(t){return ze(this._observable),this._map.get(t)}has(t){return ze(this._observable),this._map.has(t)}keys(){return ze(this._observable),this._map.keys()}set(t,i){return this._map.set(t,i),this._observable.notify(),this}values(){return ze(this._observable),this._map.values()}[Symbol.iterator](){return ze(this._observable),this._map[Symbol.iterator]()}[Symbol.dispose](){this._observable.destroy()}get[Symbol.toStringTag](){return this._map[Symbol.toStringTag]}};var N9;let bh=N9=class extends he{constructor(e){super(e),this.name=null,this.code=null}clone(){return new N9({name:this.name,code:this.code})}};v([S({type:String,json:{write:{isRequired:!0}}})],bh.prototype,"name",void 0),v([S({type:[String,Number],json:{write:{isRequired:!0}}})],bh.prototype,"code",void 0),bh=N9=v([H("esri.layers.support.CodedValue")],bh);const Lie=new rt({inherited:"inherited",codedValue:"coded-value",range:"range"});let kf=class extends he{constructor(t){super(t),this.name=null,this.type=null}};v([S({type:String,json:{write:!0}})],kf.prototype,"name",void 0),v([Re(Lie),S({json:{write:{isRequired:!0}}})],kf.prototype,"type",void 0),kf=v([H("esri.layers.support.Domain")],kf);const O2=kf;var L9;let Rf=L9=class extends O2{constructor(e){super(e),this.codedValues=null,this.type="coded-value"}getName(e){let t=null;if(this.codedValues){const i=String(e);this.codedValues.some(r=>(String(r.code)===i&&(t=r.name),!!t))}return t}clone(){return new L9({codedValues:te(this.codedValues),name:this.name})}};v([S({type:[bh],json:{write:{isRequired:!0}}})],Rf.prototype,"codedValues",void 0),v([Re({codedValue:"coded-value"})],Rf.prototype,"type",void 0),Rf=L9=v([H("esri.layers.support.CodedValueDomain")],Rf);const P2=Rf;var D9;let Jm=D9=class extends O2{constructor(e){super(e),this.type="inherited"}clone(){return new D9}};v([Re({inherited:"inherited"})],Jm.prototype,"type",void 0),Jm=D9=v([H("esri.layers.support.InheritedDomain")],Jm);const aL=Jm;var j9;let Cc=j9=class extends O2{constructor(e){super(e),this.maxValue=null,this.minValue=null,this.type="range"}clone(){return new j9({maxValue:this.maxValue,minValue:this.minValue,name:this.name})}};v([S({json:{type:[Number],read:{source:"range",reader:(e,t)=>{var i;return(i=t.range)==null?void 0:i[1]}},write:{enabled:!1,overridePolicy(){return{enabled:this.maxValue!=null&&this.minValue==null}},target:"range",writer(e,t,i){t[i]=[this.minValue||0,e]},isRequired:!0}}})],Cc.prototype,"maxValue",void 0),v([S({json:{type:[Number],read:{source:"range",reader:(e,t)=>{var i;return(i=t.range)==null?void 0:i[0]}},write:{target:"range",writer(e,t,i){t[i]=[e,this.maxValue||0]},isRequired:!0}}})],Cc.prototype,"minValue",void 0),v([Re({range:"range"})],Cc.prototype,"type",void 0),Cc=j9=v([H("esri.layers.support.RangeDomain")],Cc);const lL=Cc,uL={key:"type",base:O2,typeMap:{range:lL,"coded-value":P2,inherited:aL}};function k2(e){if(!(e!=null&&e.type))return null;switch(e.type){case"range":return lL.fromJSON(e);case"codedValue":return P2.fromJSON(e);case"inherited":return aL.fromJSON(e)}return null}const Die=new rt({esriFieldTypeSmallInteger:"small-integer",esriFieldTypeInteger:"integer",esriFieldTypeSingle:"single",esriFieldTypeDouble:"double",esriFieldTypeLong:"long",esriFieldTypeString:"string",esriFieldTypeDate:"date",esriFieldTypeOID:"oid",esriFieldTypeGeometry:"geometry",esriFieldTypeBlob:"blob",esriFieldTypeRaster:"raster",esriFieldTypeGUID:"guid",esriFieldTypeGlobalID:"global-id",esriFieldTypeXML:"xml",esriFieldTypeBigInteger:"big-integer",esriFieldTypeDateOnly:"date-only",esriFieldTypeTimeOnly:"time-only",esriFieldTypeTimestampOffset:"timestamp-offset"});var F9;const jie=new rt({binary:"binary",coordinate:"coordinate",countOrAmount:"count-or-amount",dateAndTime:"date-and-time",description:"description",locationOrPlaceName:"location-or-place-name",measurement:"measurement",nameOrTitle:"name-or-title",none:"none",orderedOrRanked:"ordered-or-ranked",percentageOrRatio:"percentage-or-ratio",typeOrCategory:"type-or-category",uniqueIdentifier:"unique-identifier"});let lr=F9=class extends he{constructor(e){super(e),this.alias=null,this.defaultValue=void 0,this.description=null,this.domain=null,this.editable=!0,this.length=void 0,this.name=null,this.nullable=!0,this.type=null,this.valueType=null,this.visible=!0}readDescription(e,{description:t}){let i=null;try{i=t?JSON.parse(t):null}catch{}return(i==null?void 0:i.value)??null}readValueType(e,{description:t}){let i=null;try{i=t?JSON.parse(t):null}catch{}return i?jie.fromJSON(i.fieldValueType):null}clone(){var e;return new F9({alias:this.alias,defaultValue:this.defaultValue,description:this.description,domain:((e=this.domain)==null?void 0:e.clone())??null,editable:this.editable,length:this.length,name:this.name,nullable:this.nullable,type:this.type,valueType:this.valueType,visible:this.visible})}};v([S({type:String,json:{write:!0}})],lr.prototype,"alias",void 0),v([S({type:[String,Number],json:{write:{allowNull:!0}}})],lr.prototype,"defaultValue",void 0),v([S()],lr.prototype,"description",void 0),v([me("description")],lr.prototype,"readDescription",null),v([S({types:uL,json:{read:{reader:k2},write:!0}})],lr.prototype,"domain",void 0),v([S({type:Boolean,json:{write:!0}})],lr.prototype,"editable",void 0),v([S({type:ft,json:{write:{overridePolicy:e=>({enabled:Number.isFinite(e)})}}})],lr.prototype,"length",void 0),v([S({type:String,json:{write:!0}})],lr.prototype,"name",void 0),v([S({type:Boolean,json:{write:!0}})],lr.prototype,"nullable",void 0),v([Re(Die)],lr.prototype,"type",void 0),v([S()],lr.prototype,"valueType",void 0),v([me("valueType",["description"])],lr.prototype,"readValueType",null),v([S({type:Boolean,json:{read:!1}})],lr.prototype,"visible",void 0),lr=F9=v([H("esri.layers.support.Field")],lr);const PS=lr;var z9;let Oc=z9=class extends he{constructor(e){super(e),this.type="map-layer"}clone(){const{mapLayerId:e,gdbVersion:t}=this;return new z9({mapLayerId:e,gdbVersion:t})}};v([Re({mapLayer:"map-layer"}),S({json:{write:{isRequired:!0}}})],Oc.prototype,"type",void 0),v([S({type:ft,json:{write:{isRequired:!0}}})],Oc.prototype,"mapLayerId",void 0),v([S({type:String,json:{write:!0}})],Oc.prototype,"gdbVersion",void 0),Oc=z9=v([H("esri.layers.support.source.MapLayerSource")],Oc);var U9;let Wo=U9=class extends he{constructor(e){super(e),this.type="query-table"}clone(){const{workspaceId:e,query:t,oidFields:i,spatialReference:r,geometryType:a}=this,p={workspaceId:e,query:t,oidFields:i,spatialReference:(r==null?void 0:r.clone())??void 0,geometryType:a};return new U9(p)}};v([Re({queryTable:"query-table"}),S({json:{write:{isRequired:!0}}})],Wo.prototype,"type",void 0),v([S({type:String,json:{write:!0}})],Wo.prototype,"workspaceId",void 0),v([S({type:String,json:{write:!0}})],Wo.prototype,"query",void 0),v([S({type:String,json:{write:!0}})],Wo.prototype,"oidFields",void 0),v([S({type:qe,json:{write:!0}})],Wo.prototype,"spatialReference",void 0),v([Re(CY)],Wo.prototype,"geometryType",void 0),Wo=U9=v([H("esri.layers.support.source.QueryTableDataSource")],Wo);var V9;let Pc=V9=class extends he{constructor(e){super(e),this.type="raster"}clone(){const{workspaceId:e,dataSourceName:t}=this;return new V9({workspaceId:e,dataSourceName:t})}};v([Re({raster:"raster"}),S({json:{write:{isRequired:!0}}})],Pc.prototype,"type",void 0),v([S({type:String,json:{write:!0}})],Pc.prototype,"dataSourceName",void 0),v([S({type:String,json:{write:!0}})],Pc.prototype,"workspaceId",void 0),Pc=V9=v([H("esri.layers.support.source.RasterDataSource")],Pc);var G9;let Gu=G9=class extends he{constructor(e){super(e),this.type="table"}clone(){const{workspaceId:e,gdbVersion:t,dataSourceName:i}=this;return new G9({workspaceId:e,gdbVersion:t,dataSourceName:i})}};v([Re({table:"table"}),S({json:{write:{isRequired:!0}}})],Gu.prototype,"type",void 0),v([S({type:String,json:{write:!0}})],Gu.prototype,"workspaceId",void 0),v([S({type:String,json:{write:!0}})],Gu.prototype,"gdbVersion",void 0),v([S({type:String,json:{write:!0}})],Gu.prototype,"dataSourceName",void 0),Gu=G9=v([H("esri.layers.support.source.TableDataSource")],Gu);var B9,q9;const Fie=qi()({esriLeftInnerJoin:"left-inner-join",esriLeftOuterJoin:"left-outer-join"});let as=B9=class extends he{constructor(e){super(e),this.type="join-table"}readLeftTableSource(e,t,i){return D8()(e,t,i)}castLeftTableSource(e){return Nn(H9(),e)}readRightTableSource(e,t,i){return D8()(e,t,i)}castRightTableSource(e){return Nn(H9(),e)}clone(){const{leftTableKey:e,rightTableKey:t,leftTableSource:i,rightTableSource:r,joinType:a}=this,p={leftTableKey:e,rightTableKey:t,leftTableSource:(i==null?void 0:i.clone())??void 0,rightTableSource:(r==null?void 0:r.clone())??void 0,joinType:a};return new B9(p)}};v([Re({joinTable:"join-table"}),S({json:{write:{isRequired:!0}}})],as.prototype,"type",void 0),v([S({type:String,json:{write:!0}})],as.prototype,"leftTableKey",void 0),v([S({type:String,json:{write:!0}})],as.prototype,"rightTableKey",void 0),v([S({json:{write:!0}})],as.prototype,"leftTableSource",void 0),v([me("leftTableSource")],as.prototype,"readLeftTableSource",null),v([ct("leftTableSource")],as.prototype,"castLeftTableSource",null),v([S({json:{write:!0}})],as.prototype,"rightTableSource",void 0),v([me("rightTableSource")],as.prototype,"readRightTableSource",null),v([ct("rightTableSource")],as.prototype,"castRightTableSource",null),v([Re(Fie)],as.prototype,"joinType",void 0),as=B9=v([H("esri.layers.support.source.JoinTableDataSource")],as);let ob=null;function D8(){return ob||(ob=od({types:H9()})),ob}let ab=null;function H9(){return ab||(ab={key:"type",base:null,typeMap:{"data-layer":In,"map-layer":Oc}}),ab}const zie={key:"type",base:null,typeMap:{"join-table":as,"query-table":Wo,raster:Pc,table:Gu}};let In=q9=class extends he{constructor(e){super(e),this.type="data-layer"}clone(){const{fields:e,dataSource:t}=this;return new q9({fields:e,dataSource:t})}};v([Re({dataLayer:"data-layer"}),S({json:{write:{isRequired:!0}}})],In.prototype,"type",void 0),v([S({type:[PS],json:{write:!0}})],In.prototype,"fields",void 0),v([S({types:zie,json:{write:!0}})],In.prototype,"dataSource",void 0),In=q9=v([H("esri.layers.support.source.DataLayerSource")],In),In.from=di(In);let Bu=class extends at.ClonableMixin(he){constructor(t){super(t),this.onFields=null,this.operator=null,this.searchTerm=null,this.searchType=null}};v([S({type:[String],json:{write:{enabled:!0,overridePolicy(){return{enabled:this.onFields!=null&&this.onFields.length>0}}}}})],Bu.prototype,"onFields",void 0),v([S({type:String,json:{write:!0}})],Bu.prototype,"operator",void 0),v([S({type:String,json:{write:!0}})],Bu.prototype,"searchTerm",void 0),v([S({type:String,json:{write:!0}})],Bu.prototype,"searchType",void 0),Bu=v([H("esri.rest.support.FullTextSearch")],Bu);const Uie=Bu;var W9;const j8=new rt({upperLeft:"upper-left",lowerLeft:"lower-left"});let qu=W9=class extends he{constructor(e){super(e),this.extent=null,this.mode="view",this.originPosition="upper-left",this.tolerance=1}clone(){return new W9(te({extent:this.extent,mode:this.mode,originPosition:this.originPosition,tolerance:this.tolerance}))}};v([S({type:Ct,json:{write:{overridePolicy(){return{enabled:this.mode==="view"}}}}})],qu.prototype,"extent",void 0),v([S({type:["view","edit"],json:{write:!0}})],qu.prototype,"mode",void 0),v([S({type:String,json:{read:j8.read,write:j8.write}})],qu.prototype,"originPosition",void 0),v([S({type:Number,json:{write:{overridePolicy(){return{enabled:this.mode==="view"}}}}})],qu.prototype,"tolerance",void 0),qu=W9=v([H("esri.rest.support.QuantizationParameters")],qu);const hL=qu,Vie=new rt({esriSpatialRelIntersects:"intersects",esriSpatialRelContains:"contains",esriSpatialRelCrosses:"crosses",esriSpatialRelDisjoint:"disjoint",esriSpatialRelEnvelopeIntersects:"envelope-intersects",esriSpatialRelIndexIntersects:"index-intersects",esriSpatialRelOverlaps:"overlaps",esriSpatialRelTouches:"touches",esriSpatialRelWithin:"within",esriSpatialRelRelation:"relation"});var J9;const F8=new rt({count:"count",sum:"sum",min:"min",max:"max",avg:"avg",stddev:"stddev",var:"var",exceedslimit:"exceedslimit",percentile_cont:"percentile-continuous",percentile_disc:"percentile-discrete",EnvelopeAggregate:"envelope-aggregate",CentroidAggregate:"centroid-aggregate",ConvexHullAggregate:"convex-hull-aggregate"});let _n=J9=class extends he{constructor(e){super(e),this.maxPointCount=void 0,this.maxRecordCount=void 0,this.maxVertexCount=void 0,this.onStatisticField=null,this.outStatisticFieldName=null,this.statisticType=null,this.statisticParameters=null}writeStatisticParameters(e,t){this.statisticType!=="percentile-continuous"&&this.statisticType!=="percentile-discrete"||(t.statisticParameters=te(e))}clone(){return new J9({maxPointCount:this.maxPointCount,maxRecordCount:this.maxRecordCount,maxVertexCount:this.maxVertexCount,onStatisticField:this.onStatisticField,outStatisticFieldName:this.outStatisticFieldName,statisticType:this.statisticType,statisticParameters:te(this.statisticParameters)})}};v([S({type:Number,json:{write:!0}})],_n.prototype,"maxPointCount",void 0),v([S({type:Number,json:{write:!0}})],_n.prototype,"maxRecordCount",void 0),v([S({type:Number,json:{write:!0}})],_n.prototype,"maxVertexCount",void 0),v([S({type:String,json:{write:!0}})],_n.prototype,"onStatisticField",void 0),v([S({type:String,json:{write:!0}})],_n.prototype,"outStatisticFieldName",void 0),v([S({type:String,json:{read:{source:"statisticType",reader:F8.read},write:{target:"statisticType",writer:F8.write}}})],_n.prototype,"statisticType",void 0),v([S({type:Object})],_n.prototype,"statisticParameters",void 0),v([be("statisticParameters")],_n.prototype,"writeStatisticParameters",null),_n=J9=v([H("esri.rest.support.StatisticDefinition")],_n);const Gie=_n;var Zm;const Bie=new rt({esriSRUnit_Meter:"meters",esriSRUnit_Kilometer:"kilometers",esriSRUnit_Foot:"feet",esriSRUnit_StatuteMile:"miles",esriSRUnit_NauticalMile:"nautical-miles",esriSRUnit_USNauticalMile:"us-nautical-miles"});let Fe=Zm=class extends he{static from(e){return nd(Zm,e)}constructor(e){super(e),this.aggregateIds=null,this.cacheHint=void 0,this.compactGeometryEnabled=!1,this.datumTransformation=null,this.defaultSpatialReferenceEnabled=!1,this.distance=void 0,this.dynamicDataSource=void 0,this.formatOf3DObjects=null,this.fullText=null,this.gdbVersion=null,this.geometry=null,this.geometryPrecision=void 0,this.groupByFieldsForStatistics=null,this.having=null,this.historicMoment=null,this.maxAllowableOffset=void 0,this.maxRecordCountFactor=1,this.multipatchOption=null,this.num=void 0,this.objectIds=null,this.orderByFields=null,this.outFields=null,this.outSpatialReference=null,this.outStatistics=null,this.parameterValues=null,this.pixelSize=null,this.quantizationParameters=null,this.rangeValues=null,this.relationParameter=null,this.resultType=null,this.returnCentroid=!1,this.returnDistinctValues=!1,this.returnExceededLimitFeatures=!0,this.returnGeometry=!1,this.returnQueryGeometry=!1,this.returnM=void 0,this.returnZ=void 0,this.returnTrueCurves=void 0,this.sourceSpatialReference=null,this.spatialRelationship="intersects",this.start=void 0,this.sqlFormat=null,this.text=null,this.timeExtent=null,this.timeReferenceUnknownClient=!1,this.units=null,this.where=null}castDatumTransformation(e){return typeof e=="number"||typeof e=="object"?e:null}writeHistoricMoment(e,t){t.historicMoment=e&&e.getTime()}writeParameterValues(e,t){if(e){const i={};for(const r in e){const a=e[r];Array.isArray(a)?i[r]=a.map(p=>p instanceof Date?p.getTime():p):a instanceof Date?i[r]=a.getTime():i[r]=a}t.parameterValues=i}}writeStart(e,t){t.resultOffset=this.start,t.resultRecordCount=this.num||10,t.where="1=1"}writeWhere(e,t){t.where=e||"1=1"}clone(){return new Zm(te({aggregateIds:this.aggregateIds,cacheHint:this.cacheHint,compactGeometryEnabled:this.compactGeometryEnabled,datumTransformation:this.datumTransformation,defaultSpatialReferenceEnabled:this.defaultSpatialReferenceEnabled,distance:this.distance,fullText:this.fullText,formatOf3DObjects:this.formatOf3DObjects,gdbVersion:this.gdbVersion,geometry:this.geometry,geometryPrecision:this.geometryPrecision,groupByFieldsForStatistics:this.groupByFieldsForStatistics,having:this.having,historicMoment:this.historicMoment!=null?new Date(this.historicMoment.getTime()):null,maxAllowableOffset:this.maxAllowableOffset,maxRecordCountFactor:this.maxRecordCountFactor,multipatchOption:this.multipatchOption,num:this.num,objectIds:this.objectIds,orderByFields:this.orderByFields,outFields:this.outFields,outSpatialReference:this.outSpatialReference,outStatistics:this.outStatistics,parameterValues:this.parameterValues,pixelSize:this.pixelSize,quantizationParameters:this.quantizationParameters,rangeValues:this.rangeValues,relationParameter:this.relationParameter,resultType:this.resultType,returnDistinctValues:this.returnDistinctValues,returnGeometry:this.returnGeometry,returnCentroid:this.returnCentroid,returnExceededLimitFeatures:this.returnExceededLimitFeatures,returnQueryGeometry:this.returnQueryGeometry,returnM:this.returnM,returnZ:this.returnZ,returnTrueCurves:this.returnTrueCurves,dynamicDataSource:this.dynamicDataSource,sourceSpatialReference:this.sourceSpatialReference,spatialRelationship:this.spatialRelationship,start:this.start,sqlFormat:this.sqlFormat,text:this.text,timeExtent:this.timeExtent,timeReferenceUnknownClient:this.timeReferenceUnknownClient,units:this.units,where:this.where}))}};Fe.MAX_MAX_RECORD_COUNT_FACTOR=5,v([S({json:{write:!0}})],Fe.prototype,"aggregateIds",void 0),v([S({type:Boolean,json:{write:!0}})],Fe.prototype,"cacheHint",void 0),v([S({type:Boolean,json:{default:!1,write:!0}})],Fe.prototype,"compactGeometryEnabled",void 0),v([S({json:{write:!0}})],Fe.prototype,"datumTransformation",void 0),v([ct("datumTransformation")],Fe.prototype,"castDatumTransformation",null),v([S({type:Boolean,json:{default:!1,write:!0}})],Fe.prototype,"defaultSpatialReferenceEnabled",void 0),v([S({type:Number,json:{write:!0}})],Fe.prototype,"distance",void 0),v([S({type:In,json:{write:!0}})],Fe.prototype,"dynamicDataSource",void 0),v([S({type:String,json:{write:!0}})],Fe.prototype,"formatOf3DObjects",void 0),v([S({type:[Uie],json:{write:{enabled:!0,overridePolicy(){return{enabled:this.fullText!=null&&this.fullText.length>0}}}}})],Fe.prototype,"fullText",void 0),v([S({type:String,json:{write:!0}})],Fe.prototype,"gdbVersion",void 0),v([S({types:P1,json:{read:Dh,write:!0}})],Fe.prototype,"geometry",void 0),v([S({type:Number,json:{write:!0}})],Fe.prototype,"geometryPrecision",void 0),v([S({type:[String],json:{write:!0}})],Fe.prototype,"groupByFieldsForStatistics",void 0),v([S({type:String,json:{write:!0}})],Fe.prototype,"having",void 0),v([S({type:Date})],Fe.prototype,"historicMoment",void 0),v([be("historicMoment")],Fe.prototype,"writeHistoricMoment",null),v([S({type:Number,json:{write:!0}})],Fe.prototype,"maxAllowableOffset",void 0),v([S({type:Number,cast:e=>e<1?1:e>Fe.MAX_MAX_RECORD_COUNT_FACTOR?Fe.MAX_MAX_RECORD_COUNT_FACTOR:e,json:{write:{overridePolicy:e=>({enabled:e>1})}}})],Fe.prototype,"maxRecordCountFactor",void 0),v([S({type:["xyFootprint"],json:{write:!0}})],Fe.prototype,"multipatchOption",void 0),v([S({type:Number,json:{read:{source:"resultRecordCount"}}})],Fe.prototype,"num",void 0),v([S({json:{write:!0}})],Fe.prototype,"objectIds",void 0),v([S({type:[String],json:{write:!0}})],Fe.prototype,"orderByFields",void 0),v([S({type:[String],json:{write:!0}})],Fe.prototype,"outFields",void 0),v([S({type:qe,json:{name:"outSR",write:!0}})],Fe.prototype,"outSpatialReference",void 0),v([S({type:[Gie],json:{write:{enabled:!0,overridePolicy(){return{enabled:this.outStatistics!=null&&this.outStatistics.length>0}}}}})],Fe.prototype,"outStatistics",void 0),v([S({json:{write:!0}})],Fe.prototype,"parameterValues",void 0),v([be("parameterValues")],Fe.prototype,"writeParameterValues",null),v([S({type:Be,json:{write:!0}})],Fe.prototype,"pixelSize",void 0),v([S({type:hL,json:{write:!0}})],Fe.prototype,"quantizationParameters",void 0),v([S({type:[Object],json:{write:!0}})],Fe.prototype,"rangeValues",void 0),v([S({type:String,json:{read:{source:"relationParam"},write:{target:"relationParam",overridePolicy(){return{enabled:this.spatialRelationship==="relation"}}}}})],Fe.prototype,"relationParameter",void 0),v([S({type:String,json:{write:!0}})],Fe.prototype,"resultType",void 0),v([S({type:Boolean,json:{default:!1,write:!0}})],Fe.prototype,"returnCentroid",void 0),v([S({type:Boolean,json:{default:!1,write:!0}})],Fe.prototype,"returnDistinctValues",void 0),v([S({type:Boolean,json:{default:!0,write:!0}})],Fe.prototype,"returnExceededLimitFeatures",void 0),v([S({type:Boolean,json:{write:!0}})],Fe.prototype,"returnGeometry",void 0),v([S({type:Boolean,json:{default:!1,write:!0}})],Fe.prototype,"returnQueryGeometry",void 0),v([S({type:Boolean,json:{default:!1,write:!0}})],Fe.prototype,"returnM",void 0),v([S({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],Fe.prototype,"returnZ",void 0),v([S({type:Boolean,json:{write:!0}})],Fe.prototype,"returnTrueCurves",void 0),v([S({type:qe,json:{write:!0}})],Fe.prototype,"sourceSpatialReference",void 0),v([Re(Vie,{ignoreUnknown:!1,name:"spatialRel"})],Fe.prototype,"spatialRelationship",void 0),v([S({type:Number,json:{read:{source:"resultOffset"}}})],Fe.prototype,"start",void 0),v([be("start"),be("num")],Fe.prototype,"writeStart",null),v([S({type:String,json:{write:!0}})],Fe.prototype,"sqlFormat",void 0),v([S({type:String,json:{write:!0}})],Fe.prototype,"text",void 0),v([S({type:Ma,json:{write:!0}})],Fe.prototype,"timeExtent",void 0),v([S({type:Boolean,json:{default:!1,write:!0}})],Fe.prototype,"timeReferenceUnknownClient",void 0),v([Re(Bie,{ignoreUnknown:!1}),S({json:{write:{overridePolicy(e){return{enabled:!!e&&this.distance!=null}}}}})],Fe.prototype,"units",void 0),v([S({type:String,json:{write:{overridePolicy(e){return{enabled:e!=null||this.start!=null&&this.start>0}}}}})],Fe.prototype,"where",void 0),v([be("where")],Fe.prototype,"writeWhere",null),Fe=Zm=v([H("esri.rest.support.Query")],Fe);const $a=Fe;function Cy(e){return!!(e!=null&&typeof e=="object"&&"createQuery"in e&&e.createQuery&&"on"in e&&e.on)}let Xn=class extends Ss.EventedAccessor{constructor(t){super(t),this._selectionMap=new Wm,this._sources=new xe,this._trashCan=[],this._layerEditHandles=new xe,this._vizTaskId=0,this.showHighlight=!0,this.highlightName="default"}initialize(){this.addHandles([Le(()=>[this.view,this.showHighlight],()=>this._refreshVisualization()),_o(()=>this.sources,"change",i=>{const r=this._selectionMap;for(const a of i.removed)r.delete(a);this._refreshListeners(),this._refreshVisualization()},{onListenerAdd:()=>this._refreshListeners()})]);const t=new xe;this.view.when().then(()=>{this.view.map&&(this.view.map.allLayers.flatten(i=>"sublayers"in i&&i.sublayers?i.sublayers:null).forEach(i=>{(Cy(i)&&!CJ(i)||Au(i))&&t.add(i)}),this.sources=t)})}destroy(){this._layerEditHandles.drain(Wt)}get selections(){return Array.from(this._selectionMap.entries()).map(t=>{const[i,r]=t;return{layer:i,selection:[...r.selection]}})}get count(){let t=0;for(const i of this._selectionMap.values())t+=i.selection.length;return t}get hasSelection(){return this.count>0}get sources(){return this._sources}set sources(t){Ta(t,this._sources)}async getSelectedFeatures(t,i={},r="layerView"){const{view:a,selections:p}=this,y=(t!==void 0?p.filter(g=>t.includes(g.layer)):p).filter(g=>g.selection.length>0).map(async g=>{const{layer:_,selection:T}=g,I=Au(_)?_.parent:_;if(I==null||!U8(I))return null;if(r==="layer")return V8(I,T,i);if(z8(I))return null;const A=await a.whenLayerView(I).catch(()=>null);return A?V8(A,T,i):null});return(await Promise.all(y)).filter(g=>g!=null)}updateSelection(t){const i=new Map;for(const[p,y]of this._selectionMap)i.set(p,[...y.selection]);let r=!1;const a=t.current.concat(t.added);for(const p of a){const y=p.sourceLayer,g=p.getObjectId();if(this.sources.includes(y)&&(Cy(y)||Au(y))&&g!==null){const _=_1(i,y,()=>[]);_.includes(g)||(_.push(g),r=!0)}}for(const p of t.removed){const y=p.sourceLayer,g=p.getObjectId();if(this.sources.includes(y)&&(Cy(y)||Au(y))&&g!==null){const _=i.get(y),T=_==null?void 0:_.indexOf(g);T!==void 0&&T>=0&&(_==null||_.splice(T,1),r=!0)}}if(r){const{_selectionMap:p,_trashCan:y}=this,g=[];for(const[_,T]of i){const I=p.get(_);I!==void 0&&y.push(I),p.set(_,{selection:T}),g.push({layer:_,selection:T,...Ux(I!==void 0?I.selection:[],T)})}this._onSelectionChange(g)}}setSelection(t,i){this._setSelection(t,i)}getSelection(t){const i=this._selectionMap.get(t);return i==null?void 0:i.selection}appendToSelection(t,i){const r=this._selectionMap.get(t),a=r!==void 0?[...r.selection]:[];for(const p of i)a.includes(p)||a.push(p);this._setSelection(t,a)}removeFromSelection(t,i){const r=this._selectionMap.get(t);if(!r)return;const a=[];for(const p of r.selection)i.includes(p)||a.push(p);this._setSelection(t,a)}toggleInSelection(t,i){const r=this._selectionMap.get(t);if(!r||r.selection.length===0)return void this._setSelection(t,i);const a=new Set(r.selection),p=new Set(i),y=SV(a,p);this._setSelection(t,Array.from(y))}clear(){const t=this._selectionMap.values();this._trashCan.push(...t);const i=[];for(const[r,a]of this._selectionMap.entries())i.push({layer:r,added:[],removed:[...a.selection],selection:[]});this._selectionMap.clear(),this._onSelectionChange(i)}_onSelectionChange(t){this._refreshVisualization(),this.emit("selection-change",{view:this.view,changes:t})}_refreshVisualization(){var y;if(this.view==null||this.sources==null)return;for(this._vizTaskId++;this._trashCan.length>0;){const g=this._trashCan.pop();(y=g==null?void 0:g.highlightHandle)==null||y.remove()}const{sources:t,view:i,_selectionMap:r,showHighlight:a}=this,p=this._vizTaskId;for(const g of t){const _=r.get(g),T=Au(g)?g.parent:g;if(T!=null&&U8(T)){if(z8(T))continue;i.whenLayerView(T).then(I=>{var A;(A=_==null?void 0:_.highlightHandle)==null||A.remove(),_!=null&&a&&p===this._vizTaskId&&"highlight"in I&&typeof I.highlight=="function"&&_.selection.length>0&&(_.highlightHandle=I.highlight(_.selection,this.highlightName))}).catch(()=>{var I;(I=_==null?void 0:_.highlightHandle)==null||I.remove()})}}}_refreshListeners(){this._layerEditHandles.drain(Wt);for(const t of this.sources){const i=Au(t)?t.parent:t;if(i!=null&&Cy(i)){const r=i.on("edits",a=>{this._handleEditChanges(a,t)});this._layerEditHandles.push(r)}}}_handleEditChanges(t,i){if(t.deletedFeatures!==void 0&&t.deletedFeatures.length>0&&this._selectionMap.has(i)){const r=t.deletedFeatures.filter(a=>a.error==null).map(a=>a.objectId).filter(Sa);this.removeFromSelection(i,r)}}_setSelection(t,i){if(!this.sources.includes(t))throw new Error(`Cannot set selection on layer ${t.title} because it is not in 'sources'`);const r=this._selectionMap.get(t);if(r===void 0||!Hie(r,{selection:i})){r!==void 0&&this._trashCan.push(r),this._selectionMap.set(t,{selection:[...i]});const a={layer:t,selection:[...i],...Ux(r!==void 0?r.selection:[],i)};this._onSelectionChange([a])}}};v([S({readOnly:!0,nonNullable:!0})],Xn.prototype,"selections",null),v([S({readOnly:!0,nonNullable:!0})],Xn.prototype,"count",null),v([S({constructOnly:!0,nonNullable:!0})],Xn.prototype,"view",void 0),v([S({readOnly:!0,nonNullable:!0})],Xn.prototype,"hasSelection",null),v([S()],Xn.prototype,"showHighlight",void 0),v([S()],Xn.prototype,"sources",null),v([S()],Xn.prototype,"highlightName",void 0),Xn=v([H("esri.views.SelectionManager")],Xn);const z8=e=>{var t;return Au(e)?((t=e.parent)==null?void 0:t.isTable)===!0:e.isTable},qie=e=>e.layer!==void 0,U8=e=>(e==null?void 0:e.when)!==void 0,Hie=(e,t)=>{if(e==null&&t==null)return!0;if(e!=null&&t==null||e==null&&t!=null)return!1;if(e!=null&&t!=null&&e.selection!=null&&t.selection!=null){const i=[...e.selection],r=[...t.selection];if(i.length!==r.length)return!1;i.sort(),r.sort();for(let a=0;a<i.length;a++)if(i[a]!==r[a])return!1}return!0},V8=async(e,t,i={})=>{let r;if(qie(e)){const a=e;r=a===void 0?null:await a.queryFeatures(new $a({...i,objectIds:t})).then(p=>({data:p,layer:e.layer}))}else{const a=e;r=a===void 0?null:await a.queryFeatures(new $a({...i,objectIds:t})).then(p=>({data:p,layer:a}))}return r},Wie=Xn;let Nf=class extends at.ClonableMixin(Ae){constructor(t){super(t),this.accentColor=new De([255,127,0]),this.textColor=new De([255,255,255])}};v([S({type:De,nonNullable:!0})],Nf.prototype,"accentColor",void 0),v([S({type:De,nonNullable:!0})],Nf.prototype,"textColor",void 0),Nf=v([H("esri.views.Theme")],Nf);const Z9=Nf;var G8;(function(e){e[e.Left=0]="Left",e[e.Middle=1]="Middle",e[e.Right=2]="Right"})(G8||(G8={}));const cL=["click","double-click","immediate-click","immediate-double-click","hold","drag","key-down","key-up","pointer-down","pointer-move","pointer-up","pointer-drag","mouse-wheel","pointer-enter","pointer-leave","gamepad","focus","blur"],pL={};function dL(e){return!!pL[e]}function Jie(e){for(const t of e)if(!dL(t))return!1;return!0}cL.forEach(e=>{pL[e]=!0});let fL=class{constructor(t){this._handlers=new Map,this._counter=0,this._handlerCounts=new Map,this.view=t,this.inputManager=null}connect(t){t&&this.disconnect(),this.inputManager=t,this._handlers.forEach(({handler:i,priority:r},a)=>{var p;return(p=this.inputManager)==null?void 0:p.installHandlers(a,[i],r)})}disconnect(){this.inputManager&&this._handlers.forEach((t,i)=>{var r;return(r=this.inputManager)==null?void 0:r.uninstallHandlers(i)}),this.inputManager=null}destroy(){this.disconnect(),this._handlers.clear(),this.view=null}on(t,i,r,a){const p=Array.isArray(t)?t:t.split(",");if(!Jie(p))return p.some(dL)&&console.error("Error: registering input events and other events on the view at the same time is not supported."),null;let y,g;Array.isArray(i)?g=i:(y=i,g=[]),typeof r=="function"?y=r:a=r,a=a??Gl.DEFAULT;const _=this._createUniqueGroupName(),T=new Zie(this.view,p,g,y);this._handlers.set(_,{handler:T,priority:a});for(const I of p){const A=this._handlerCounts.get(I)||0;this._handlerCounts.set(I,A+1)}return this.inputManager&&this.inputManager.installHandlers(_,[T],a),yt(()=>this._removeHandler(_,p))}hasHandler(t){return!!this._handlerCounts.get(t)}_removeHandler(t,i){if(this._handlers.has(t)){this._handlers.delete(t);for(const r of i){const a=this._handlerCounts.get(r);a===void 0||(a===1?this._handlerCounts.delete(r):this._handlerCounts.set(r,a-1))}}this.inputManager&&this.inputManager.uninstallHandlers(t)}_createUniqueGroupName(){return this._counter+=1,`viewEvents_${this._counter}`}},Zie=class extends ki{constructor(t,i,r,a){super(!0),this._latestDragStart=void 0,this.view=t;for(const p of i)switch(p){case"click":this.registerIncoming("click",r,y=>a(Xie(t,y)));break;case"double-click":this.registerIncoming("double-click",r,y=>a(Qie(t,y)));break;case"immediate-click":this.registerIncoming("immediate-click",r,y=>a(ere(t,y)));break;case"immediate-double-click":this.registerIncoming("immediate-double-click",r,y=>a(tre(t,y)));break;case"hold":this.registerIncoming("hold",r,y=>a(ire(t,y)));break;case"drag":this.registerIncoming("drag",r,y=>{const g=this._wrapDrag(y);g&&a(g)});break;case"key-down":this.registerIncoming("key-down",r,y=>a(rre(y)));break;case"key-up":this.registerIncoming("key-up",r,y=>a(sre(y)));break;case"pointer-down":this.registerIncoming("pointer-down",r,y=>a(zd(y,"pointer-down")));break;case"pointer-move":this.registerIncoming("pointer-move",r,y=>a(zd(y,"pointer-move")));break;case"pointer-up":this.registerIncoming("pointer-up",r,y=>a(zd(y,"pointer-up")));break;case"pointer-drag":this.registerIncoming("pointer-drag",r,y=>a(nre(y)));break;case"mouse-wheel":this.registerIncoming("mouse-wheel",r,y=>a(ore(y)));break;case"pointer-enter":this.registerIncoming("pointer-enter",r,y=>a(zd(y,"pointer-enter")));break;case"pointer-leave":this.registerIncoming("pointer-leave",r,y=>a(zd(y,"pointer-leave")));break;case"gamepad":this.registerIncoming("gamepad",r,y=>{a(are(y))});break;case"focus":this.registerIncoming("focus",r,y=>{a(Kie(y))});break;case"blur":this.registerIncoming("blur",r,y=>{a(Yie(y))})}}_wrapDrag(t){const i=t.data,{x:r,y:a}=i.center,{action:p,pointerType:y,button:g}=i;if(p==="start"&&(this._latestDragStart=i),!this._latestDragStart)return;const _=i.pointer.native,T=i.buttons,{cancelable:I,timestamp:A}=t,P={x:this._latestDragStart.center.x,y:this._latestDragStart.center.y};return p==="end"&&(this._latestDragStart=void 0),{type:"drag",action:p,x:r,y:a,origin:P,pointerType:y,button:g,buttons:T,radius:i.radius,angle:rk(i.angle),native:_,timestamp:A,cancelable:I,stopPropagation:()=>t.stopPropagation(),async:N=>t.async(N),preventDefault:()=>t.preventDefault()}}};function Kie(e){return{type:"focus",timestamp:e.timestamp,native:e.data.native,cancelable:e.cancelable,stopPropagation:()=>e.stopPropagation(),async:t=>e.async(t),preventDefault:()=>e.preventDefault()}}function Yie(e){return{type:"blur",timestamp:e.timestamp,native:e.data.native,cancelable:e.cancelable,stopPropagation:()=>e.stopPropagation(),async:t=>e.async(t),preventDefault:()=>e.preventDefault()}}function Xie(e,t){const{pointerType:i,button:r,buttons:a,x:p,y,native:g,eventId:_}=t.data,{cancelable:T,timestamp:I}=t;return{type:"click",pointerType:i,button:r,buttons:a,x:p,y,native:g,timestamp:I,screenPoint:Gi(p,y),mapPoint:G1(e,p,y),eventId:_,cancelable:T,stopPropagation:()=>t.stopPropagation(),async:A=>t.async(A),preventDefault:()=>t.preventDefault()}}function Qie(e,t){const{pointerType:i,button:r,buttons:a,x:p,y,native:g,eventId:_}=t.data,{cancelable:T,timestamp:I}=t;return{type:"double-click",pointerType:i,button:r,buttons:a,x:p,y,native:g,timestamp:I,mapPoint:G1(e,p,y),eventId:_,cancelable:T,stopPropagation:()=>t.stopPropagation(),async:A=>t.async(A),preventDefault:()=>t.preventDefault()}}function ere(e,t){const{pointerType:i,button:r,buttons:a,x:p,y,native:g,eventId:_}=t.data,T=g.pointerId,{cancelable:I,timestamp:A}=t;return{type:"immediate-click",pointerId:T,pointerType:i,button:r,buttons:a,x:p,y,native:g,timestamp:A,mapPoint:G1(e,p,y),eventId:_,cancelable:I,stopPropagation:()=>t.stopPropagation(),async:P=>t.async(P),preventDefault:()=>t.preventDefault()}}function tre(e,t){const{pointerType:i,button:r,buttons:a,x:p,y,native:g,eventId:_}=t.data,T=g.pointerId,{cancelable:I,timestamp:A}=t;return{type:"immediate-double-click",pointerId:T,pointerType:i,button:r,buttons:a,x:p,y,native:g,timestamp:A,mapPoint:G1(e,p,y),eventId:_,cancelable:I,stopPropagation:()=>t.stopPropagation(),async:P=>t.async(P),preventDefault:()=>t.preventDefault()}}function ire(e,t){const{pointerType:i,button:r,buttons:a,x:p,y,native:g}=t.data,{cancelable:_,timestamp:T}=t;return{type:"hold",pointerType:i,button:r,buttons:a,x:p,y,native:g,timestamp:T,mapPoint:G1(e,p,y),cancelable:_,stopPropagation:()=>t.stopPropagation(),async:I=>t.async(I),preventDefault:()=>t.preventDefault()}}function G1(e,t,i){return e.toMap(Gi(t,i),{exclude:[]})}function rre(e){const{key:t,repeat:i,native:r}=e.data,{cancelable:a,timestamp:p}=e;return{type:"key-down",key:t,repeat:i,native:r,timestamp:p,cancelable:a,stopPropagation:()=>e.stopPropagation(),async:y=>e.async(y),preventDefault:()=>e.preventDefault()}}function sre(e){const{key:t,native:i}=e.data,{cancelable:r,timestamp:a}=e;return{type:"key-up",key:t,native:i,timestamp:a,cancelable:r,stopPropagation:()=>e.stopPropagation(),async:p=>e.async(p),preventDefault:()=>e.preventDefault()}}function zd(e,t){const{x:i,y:r,button:a,buttons:p,native:y,eventId:g}=e.data,_=y.pointerId,T=y.pointerType,{cancelable:I,timestamp:A}=e;return{type:t,x:i,y:r,pointerId:_,pointerType:T,button:a,buttons:p,native:y,timestamp:A,eventId:g,cancelable:I,stopPropagation:()=>e.stopPropagation(),async:P=>e.async(P),preventDefault:()=>e.preventDefault()}}function nre(e){const{x:t,y:i,buttons:r,native:a,eventId:p}=e.data.currentEvent,{button:y}=e.data.startEvent,g=e.data.startEvent.native.pointerId,_=e.data.startEvent.native.pointerType,T=e.data.action,I={x:e.data.startEvent.x,y:e.data.startEvent.y},{cancelable:A,timestamp:P}=e;return{type:"pointer-drag",x:t,y:i,pointerId:g,pointerType:_,button:y,buttons:r,action:T,origin:I,native:a,timestamp:P,eventId:p,cancelable:A,stopPropagation:()=>e.stopPropagation(),async:N=>e.async(N),preventDefault:()=>e.preventDefault()}}function ore(e){const{cancelable:t,data:i,timestamp:r}=e,{x:a,y:p,deltaY:y,native:g}=i;return{type:"mouse-wheel",x:a,y:p,deltaY:y,native:g,timestamp:r,cancelable:t,stopPropagation:()=>e.stopPropagation(),async:_=>e.async(_),preventDefault:()=>e.preventDefault()}}function are(e){const{action:t,state:i,device:r}=e.data,{cancelable:a,timestamp:p}=e,{buttons:y,axes:g}=i;return{type:"gamepad",device:r,timestamp:p,action:t,buttons:y,axes:g,cancelable:a,stopPropagation:()=>e.stopPropagation(),async:_=>e.async(_),preventDefault:()=>e.preventDefault()}}var i1,B8,q8;(function(e){e[e.USER=0]="USER",e[e.MANAGER=1]="MANAGER"})(i1||(i1={})),function(e){e[e.None=0]="None",e[e.Unfocused=1]="Unfocused",e[e.Focused=2]="Focused",e[e.Unselected=4]="Unselected",e[e.Selected=8]="Selected",e[e.All=15]="All"}(B8||(B8={})),function(e){e[e.None=0]="None",e[e.Custom1=16]="Custom1",e[e.Custom2=32]="Custom2",e[e.Custom3=64]="Custom3",e[e.Custom4=128]="Custom4",e[e.Custom5=256]="Custom5",e[e.Custom6=512]="Custom6",e[e.Custom7=1024]="Custom7",e[e.Custom8=2048]="Custom8",e[e.Custom9=4096]="Custom9",e[e.Custom10=8192]="Custom10",e[e.Custom11=16384]="Custom11",e[e.Custom12=32768]="Custom12",e[e.All=65520]="All"}(q8||(q8={}));function lre(e){return[e.on("before-add",t=>{const i=t.item;if(i==null||e.includes(i))return ye.getLogger("esri.views.interactive.interactiveToolUtils").warn("Tool is either already in the list of tools or tool is `null`. Not adding tool."),void t.preventDefault();i.onAdd()}),e.on("after-remove",t=>{const i=t.item;i.active&&(i.view.activeTool=null),i.destroy()})]}function K9(e){return e.visible&&e.getEditableFlag!=null&&e.getEditableFlag(i1.USER)&&e.getEditableFlag(i1.MANAGER)}function Qn(e){return Gi(e.x,e.y)}function yL(e,t){var r;const i=(r=e instanceof HTMLElement?e:e.surface)==null?void 0:r.getBoundingClientRect();return i?Gi(t.clientX-i.left,t.clientY-i.top):Gi(0,0)}function mL(e,t){return t instanceof Event?yL(e,t):Qn(t)}function gL(e){if(e instanceof Event)return!0;if(typeof e=="object"&&"type"in e)switch(e.type){case"click":case"double-click":case"pointer-down":case"pointer-drag":case"pointer-enter":case"pointer-leave":case"pointer-up":case"pointer-move":case"immediate-click":case"immediate-double-click":case"hold":case"drag":case"mouse-wheel":return!0;default:return!1}return!1}let ure=class{constructor(){this._pointerLocations=new Map,this._hoveredManipulators=new Map,this._grabbedManipulators=new Map,this._draggedManipulators=new Map,this._stopDrag=!1,this._externallyDragging=!1,this._revertToNullActiveTool=!1,this._cursor=null}get cursor(){return this._cursor}hasFocusedManipulators(){return this._grabbedManipulators.size>0||this._draggedManipulators.size>0}handleInputEvent(t,i){const r=()=>t.stopPropagation();switch(t.type){case"pointer-move":W8(t.pointerType)&&this._pointerLocations.set(t.pointerId,{x:t.x,y:t.y,pointerType:t.pointerType});break;case"drag":this._grabbedManipulators.size>0?this._stopDrag=!0:t.action==="start"?this._externallyDragging=!0:t.action==="end"&&(this._externallyDragging=!1),this._stopDrag&&(r(),t.action==="end"&&(this._stopDrag=!1));break;case"pointer-down":{if(!J8(t))break;const a=Qn(t),p=uc(a,t.pointerType,i.forEachTool);if(p==null)break;const y=p.manipulator,g=p.tool;y==null||g==null||!y.interactive||y.grabbable&&y.grabbableForEvent(t)||!y.grabbing||y.dragging||this._releaseManipulatorBeforeDragging(y,t,i),y!=null&&g!=null&&y.interactive&&y.grabbable&&y.grabbableForEvent(t)&&!y.grabbing&&(this._grabbedManipulators.set(t.pointerId,{manipulator:y,tool:g,start:a,pointerType:t.pointerType}),this._grabbedManipulators.size===1&&i.activeTool==null&&(this._revertToNullActiveTool=!0,i.setActiveTool(p.tool)),y.grabbing=!0,y.events.emit("grab-changed",{action:"start",pointerType:t.pointerType,screenPoint:a}),r());break}case"pointer-up":this._draggedManipulators.has(t.pointerId)||this._handlePointerEnd(t,i);break;case"pointer-drag":{if(!J8(t))break;const a=this._grabbedManipulators.get(t.pointerId),p=a==null?void 0:a.manipulator,y=a==null?void 0:a.tool;if(p==null||y==null)break;const g=Qn(t);g.x=xs(g.x,0,i.view.width),g.y=xs(g.y,0,i.view.height);const _=a.start,T=this._draggedManipulators.get(t.pointerId);switch(t.action){case"start":case"update":t.action!=="update"&&this._grabbedManipulators.size!==1||(p.dragging=!0,T?p.events.emit("drag",{action:"update",start:_,screenPoint:g}):p.events.emit("drag",{action:"start",start:_,screenPoint:g,pointerType:t.pointerType}),this._draggedManipulators.set(t.pointerId,{tool:y,manipulator:p,start:_}));break;case"end":p.dragging=!1,T&&p.events.emit("drag",{action:"end",start:_,screenPoint:g}),this._draggedManipulators.delete(t.pointerId),this._handlePointerEnd(t,i)}r();break}case"immediate-click":{const a=Qn(t),p=uc(a,t.pointerType,i.forEachTool);if(hre(t)||i.forEachTool(T=>{if((p==null||p.tool!==T||T.automaticManipulatorSelection)&&T.manipulators){let I=!1;T.manipulators.forEach(({manipulator:A})=>{A.selected&&(A.selected=!1,I=!0)}),I&&T.onManipulatorSelectionChanged&&T.onManipulatorSelectionChanged()}}),p==null)break;const{manipulator:y,tool:g}=p;if(!y.interactive)break;y.selectable&&g.automaticManipulatorSelection&&(y.selected=!y.selected,g.onManipulatorSelectionChanged&&g.onManipulatorSelectionChanged());const _=t.native.shiftKey;y.events.emit("immediate-click",{screenPoint:a,button:t.button,pointerType:t.pointerType,shiftKey:_,stopPropagation:r}),lb(y,r);break}case"click":{const a=Qn(t),p=uc(a,t.pointerType,i.forEachTool),y=p==null?void 0:p.manipulator;if(y==null||!y.interactive)break;const g=t.native.shiftKey;y.events.emit(t.type,{screenPoint:a,button:t.button,pointerType:t.pointerType,shiftKey:g}),r();break}case"double-click":{const a=Qn(t),p=uc(a,t.pointerType,i.forEachTool),y=p!=null?p.manipulator:null;if(y==null||!y.interactive)break;const g=t.native.shiftKey;y.events.emit("double-click",{screenPoint:a,button:t.button,pointerType:t.pointerType,shiftKey:g,stopPropagation:r}),lb(y,r);break}case"immediate-double-click":{const a=Qn(t),p=uc(a,t.pointerType,i.forEachTool),y=p!=null?p.manipulator:null;if(y==null||!y.interactive)break;const g=t.native.shiftKey;y.events.emit("immediate-double-click",{screenPoint:a,button:t.button,pointerType:t.pointerType,shiftKey:g,stopPropagation:r}),t.pointerType==="mouse"&&lb(y,r);break}}this._onFocusChange(i.forEachTool)}_releaseManipulatorBeforeDragging(t,i,r){t.grabbing=!1,t.events.emit("grab-changed",{action:"end",pointerType:i.pointerType,screenPoint:Qn(i)}),this._grabbedManipulators.forEach(({manipulator:a},p)=>{a===t&&this._grabbedManipulators.delete(p)}),this._afterManipulatorRelease(r.setActiveTool)}_handlePointerEnd(t,i){var a;const r=(a=this._grabbedManipulators.get(t.pointerId))==null?void 0:a.manipulator;r!=null&&r.grabbing&&(r.grabbing=!1,r.events.emit("grab-changed",{action:"end",pointerType:t.pointerType,screenPoint:Qn(t)}),this._grabbedManipulators.delete(t.pointerId),this._afterManipulatorRelease(i.setActiveTool))}_onFocusChange(t){this._updateCursor(),this._updateFocusedManipulatorTools(t)}_updateCursor(){this._grabbedManipulators.size>0?this._cursor=H8(this._grabbedManipulators)||"grabbing":this._hoveredManipulators.size>0?this._cursor=H8(this._hoveredManipulators)||"pointer":this._cursor=null}_updateFocusedManipulatorTools(t){const i=new Set,r=new Set;this._grabbedManipulators.forEach(({tool:a})=>{i.add(a)}),this._hoveredManipulators.forEach(({tool:a})=>{r.add(a)}),t(a=>{a.hasGrabbedManipulators=i.has(a),a.hasHoveredManipulators=r.has(a);const p=this._grabbedManipulators.values(),y=CU(p,({tool:g})=>g===a);a.firstGrabbedManipulator=y!=null?y.manipulator:null})}clearPointers(t,{forEachTool:i,setActiveTool:r},a=!0,p){const y=(g,_)=>g===t&&(p==null||p===_);this._grabbedManipulators.forEach(({tool:g,manipulator:_,pointerType:T},I)=>{y(g,_)&&(this._grabbedManipulators.delete(I),_.grabbing=!1,_.events.emit("grab-changed",{action:"end",screenPoint:null,pointerType:T}))}),this._draggedManipulators.forEach(({tool:g,manipulator:_},T)=>{y(g,_)&&(this._draggedManipulators.delete(T),_.dragging=!1,_.events.emit("drag",{action:"cancel"}))}),a&&this._hoveredManipulators.forEach(({tool:g,manipulator:_},T)=>{y(g,_)&&(this._hoveredManipulators.delete(T),_.hovering=!1)}),this._afterManipulatorRelease(r),this._onFocusChange(i)}updateHoveredStateFromKnownPointers(t){this._pointerLocations.forEach((i,r)=>{this._updateHoveredStateForPointerAtScreenPosition(Gi(i.x,i.y),r,i.pointerType,t)})}handleHoverEvent(t,i){const r=t.type;r!=="pointer-up"&&r!=="immediate-click"&&r!=="pointer-move"||!W8(t.pointerType)||(r!=="pointer-up"&&this._externallyDragging?this._clearHoveredManipulatorStates(t.pointerId):this._updateHoveredStateForPointerAtScreenPosition(Qn(t),t.pointerId,t.pointerType,i))}_updateHoveredStateForPointerAtScreenPosition(t,i,r,a){var g;let p=uc(t,r,a);const y=(g=this._hoveredManipulators.get(i))==null?void 0:g.manipulator;p==null||p.manipulator.interactive||(p=null),p!=null&&y===p.manipulator||(y!=null&&(y.hovering=!1),p!=null?(p.manipulator.hovering=!0,this._hoveredManipulators.set(i,p)):this._hoveredManipulators.delete(i),this._onFocusChange(a))}_afterManipulatorRelease(t){this._grabbedManipulators.size===0&&this._revertToNullActiveTool&&(t(null),this._revertToNullActiveTool=!1)}_clearHoveredManipulatorStates(t){this._hoveredManipulators.forEach(({manipulator:i},r)=>{t===r&&(this._hoveredManipulators.delete(t),i.hovering=!1)})}};function H8(e){for(const{manipulator:t}of e.values())if(t!=null&&t.interactive){if(t.grabbing&&t.grabCursor)return t.grabCursor;if(t.cursor)return t.cursor}return null}function uc(e,t,i){let r=null;return i(a=>{if(a.manipulators==null||!K9(a))return!1;const p=a.manipulators.intersect(e,t);return p!=null&&(r={tool:a,manipulator:p},!0)}),r}function W8(e){return e==="mouse"}function J8(e){return e.pointerType!=="mouse"||e.button===0}function hre(e){return!!e.native.shiftKey}function lb(e,t){e!=null&&e.consumesClicks&&t()}const Z8="attached",ub="tools",cre=1e3;let eo=class extends Ae{constructor(t){super(t),this._updatingHandles=new Eh,this._clock=sd,this._manipulatorState=new ure,this.tools=new xe,this.cursor=null,this._interacting=!1,this._interactingTimeout=cre,this._interactingTimeoutHandle=null,this._forEachTool=i=>{for(const r of this.tools.items)if(i(r))return}}initialize(){this.addHandles([this.view.on(cL,t=>{this._handleInputEvent(t)},Gl.TOOL),...lre(this.tools),this.tools.on("before-add",({item:t})=>{this._updateToolEditableFlag(t)}),this.tools.on("before-remove",({item:t})=>{this._manipulatorState.clearPointers(t,this._manipulatorStateEventArgs),this._updateCursor()}),this.tools.on("change",()=>{this._refreshToolWatchers()})])}destroy(){this.activeTool=null,this.tools.drain(t=>t.destroy()),this._clearInteractingTimeout(),this._interacting=!1,this._updatingHandles.destroy()}get _manipulatorStateEventArgs(){return{forEachTool:this._forEachTool,activeTool:this.activeTool,setActiveTool:t=>{this.activeTool=t},view:this.view}}set activeTool(t){if(t!=null&&!this.view.ready)return void ye.getLogger(this).error("Cannot set active tool while view is not ready.");if(t===this.activeTool)return;const i=this.activeTool;this._set("activeTool",t),i!=null&&i.deactivate(),t!=null&&t.activate(),this._removeIncompleteTools(t);for(const r of this.tools){this._updateToolEditableFlag(r);const a=K9(r);this.activeTool!=null&&a||this._manipulatorState.clearPointers(r,this._manipulatorStateEventArgs,!a)}this._updateCursor()}get updating(){return this._updatingHandles.updating||this.tools.some(t=>t.updating)}get interacting(){return this._interacting}_clearInteractingTimeout(){this._interactingTimeoutHandle=Wt(this._interactingTimeoutHandle)}_startInteractingTimeout(){this._clearInteractingTimeout(),this._interactingTimeoutHandle=this._clock.setTimeout(()=>this._interacting=!1,this._interactingTimeout)}attach(){var t;this.view.type==="3d"?this.addHandles([Le(()=>{const{state:i}=this.view;return"camera"in i&&i.camera},()=>this._forEachManipulator(i=>i.onViewChange())),(t=this.view.elevationProvider)==null?void 0:t.on("elevation-change",i=>this._forEachManipulator(r=>r.onElevationChange(i)))],Z8):this.addHandles(Le(()=>this.view.extent,()=>this._forEachManipulator(i=>i.onViewChange())))}detach(){this.activeTool=null,this.tools.removeAll(),this.removeHandles(Z8),this._clearInteractingTimeout(),this._interacting=!1}_forEachManipulator(t){this._forEachTool(i=>{i.manipulators&&i.manipulators.forEach(({manipulator:r})=>t(r,i))})}_handleInputEvent(t){let i=!1;const r={...t,stopPropagation:()=>{i=!0,t.stopPropagation()}};this.activeTool!=null?this.activeTool.handleInputEvent&&this.activeTool.handleInputEvent(r):this._forEachTool(a=>{!i&&a.visible&&a.handleInputEvent(r)}),!i&&t.type==="key-down"&&t.key==="Escape"&&this.activeTool&&(t.stopPropagation(),this.activeTool=null),this._manipulatorState.handleInputEvent(r,this._manipulatorStateEventArgs),i||this.activeTool==null||this.activeTool.handleInputEventAfter(r),this._manipulatorState.handleHoverEvent(r,this._forEachTool),this._updateCursor(),t.type==="pointer-move"&&(this._manipulatorState.hasFocusedManipulators()||this.activeTool)&&(this._interacting=!0,this._startInteractingTimeout())}_refreshToolWatchers(){this.removeHandles(ub),this._forEachTool(t=>{if(t instanceof Ae){const i=Le(()=>[t.cursor,t.visible,t.editable],()=>{K9(t)||this._manipulatorState.clearPointers(t,this._manipulatorStateEventArgs),this._updateCursor()});this.addHandles(i,ub)}t.manipulators&&this.addHandles([t.manipulators.on("after-remove",i=>{this._manipulatorState.clearPointers(t,this._manipulatorStateEventArgs,!0,i.item.manipulator)}),t.manipulators.on("change",()=>{this._manipulatorState.updateHoveredStateFromKnownPointers(this._forEachTool),this._updateCursor()})],ub)}),this._manipulatorState.updateHoveredStateFromKnownPointers(this._forEachTool),this._updateCursor()}_updateToolEditableFlag(t){var i;(i=t.setEditableFlag)==null||i.call(t,i1.MANAGER,this.activeTool==null||t===this.activeTool)}_updateCursor(){let t=this._manipulatorState.cursor;t==null&&this._forEachTool(i=>!(i.cursor==null||!i.visible)&&(t=i.cursor,!0)),this._get("cursor")!==t&&this._set("cursor",t)}_removeIncompleteTools(t){this.tools.filter(i=>(t==null||i!==t)&&!i.created&&i.removeIncompleteOnCancel).forEach(i=>{this.tools.remove(i)})}get test(){}};v([S({constructOnly:!0,nonNullable:!0})],eo.prototype,"view",void 0),v([S({value:null})],eo.prototype,"activeTool",null),v([S({readOnly:!0,type:xe})],eo.prototype,"tools",void 0),v([S({readOnly:!0})],eo.prototype,"cursor",void 0),v([S({readOnly:!0})],eo.prototype,"updating",null),v([S()],eo.prototype,"_interacting",void 0),v([S({readOnly:!0})],eo.prototype,"interacting",null),eo=v([H("esri.views.ToolViewManager")],eo);const pre=new De("cyan"),dre=1,fre=.25,yre=new De("black"),mre=.4,gre=.2,L9e=.25,vL="default",vre="temporary",wre=new De("yellow");var Y9;let ls=Y9=class extends Ae{constructor(e){super(e),this.name=vL,this.color=pre.clone(),this.haloColor=null,this.haloOpacity=dre,this.fillOpacity=fre,this.shadowColor=yre.clone(),this.shadowOpacity=mre,this.shadowDifference=gre,this.haloWidth=2.1,this.haloBlur=.8/this.haloWidth}equals(e){return this.color.equals(e.color)&&(this.haloColor||this.color).equals(e.haloColor||e.color)&&this.haloOpacity===e.haloOpacity&&this.fillOpacity===e.fillOpacity&&this.haloWidth===e.haloWidth&&this.haloBlur===e.haloBlur&&this.shadowColor.equals(e.shadowColor)&&this.shadowOpacity===e.shadowOpacity&&this.shadowDifference===e.shadowDifference}clone(){var e,t;return new Y9({...this,color:this.color.clone(),haloColor:(e=this.haloColor)==null?void 0:e.clone(),shadowColor:(t=this.shadowColor)==null?void 0:t.clone()})}assignFrom(e){var t;this.color=e.color.clone(),this.haloColor=(t=e.haloColor)==null?void 0:t.clone(),this.haloOpacity=e.haloOpacity,this.fillOpacity=e.fillOpacity,this.shadowColor=e.shadowColor.clone(),this.shadowDifference=e.shadowDifference,this.shadowOpacity=e.shadowOpacity,this.haloBlur=e.haloBlur,this.haloWidth=e.haloWidth}};v([S({type:String,constructOnly:!0,nonNullable:!0})],ls.prototype,"name",void 0),v([S({type:De,nonNullable:!0})],ls.prototype,"color",void 0),v([S({type:De})],ls.prototype,"haloColor",void 0),v([S({nonNullable:!0})],ls.prototype,"haloOpacity",void 0),v([S({nonNullable:!0})],ls.prototype,"fillOpacity",void 0),v([S({type:De,nonNullable:!0})],ls.prototype,"shadowColor",void 0),v([S({nonNullable:!0})],ls.prototype,"shadowOpacity",void 0),v([S({nonNullable:!0})],ls.prototype,"shadowDifference",void 0),v([S({nonNullable:!0})],ls.prototype,"haloWidth",void 0),v([S({nonNullable:!0})],ls.prototype,"haloBlur",void 0),ls=Y9=v([H("esri.views.support.HighlightOptions")],ls);const Bl=ls;function bre(){return new(xe.ofType(Bl))([new Bl({name:vL}),new Bl({name:vre,color:wre})])}let kc=class extends Ae{constructor(t){super(),this.nativeIndex=null,this._detectedDeviceType="unknown",t.mapping==="standard"?this._detectedDeviceType="standard":_re.test(t.id)?this._detectedDeviceType="spacemouse":this._detectedDeviceType="unknown",this.nativeIndex=t.index}get native(){const t=navigator.getGamepads?navigator.getGamepads():[];return this.nativeIndex!=null&&this.nativeIndex<t.length?t[this.nativeIndex]:null}get deviceType(){return this._detectedDeviceType}get axisThreshold(){return Sre[this.deviceType]}};v([S({nonNullable:!0,readOnly:!0})],kc.prototype,"nativeIndex",void 0),v([S({type:String,readOnly:!0})],kc.prototype,"deviceType",null),v([S({type:Number,readOnly:!0})],kc.prototype,"axisThreshold",null),kc=v([H("esri.views.input.gamepad.GamepadInputDevice")],kc);const kS=kc,_re=new RegExp("^(3dconnexion|space(mouse|navigator|pilot|explorer))","i"),Sre={standard:.15,spacemouse:.025,unknown:0};let Lf=class extends Ae{constructor(...t){super(...t),this.devices=new xe,this.enabledFocusMode="document"}};v([S({type:xe.ofType(kS),readOnly:!0})],Lf.prototype,"devices",void 0),v([S({type:["document","view","none"]})],Lf.prototype,"enabledFocusMode",void 0),Lf=v([H("esri.views.input.gamepad.GamepadSettings")],Lf);const xre=Lf;let Km=class extends Ae{constructor(){super(...arguments),this.gamepad=new xre}};v([S({readOnly:!0})],Km.prototype,"gamepad",void 0),Km=v([H("esri.views.input.Input")],Km);const Tre=Km,wL=()=>dt.respectPrefersReducedMotion&&window.matchMedia("(prefers-reduced-motion: reduce)").matches,hb=()=>S({type:["pan","rotate","zoom","none"],nonNullable:!0});let Hu=class extends Ae{constructor(t){super(t),this.dragPrimary="pan",this.dragSecondary="rotate",this.dragTertiary="zoom",this.mouseWheel="zoom"}};v([hb()],Hu.prototype,"dragPrimary",void 0),v([hb()],Hu.prototype,"dragSecondary",void 0),v([hb()],Hu.prototype,"dragTertiary",void 0),v([S({type:["zoom","none"],nonNullable:!0})],Hu.prototype,"mouseWheel",void 0),Hu=v([H("esri.views.navigation.NavigationActionMap")],Hu);const RS=Hu;let ul=class extends Ae{constructor(t){super(t),this.enabled=!0,this.device=null,this.mode="pan",this.tiltDirection="forward-down",this.velocityFactor=1}};v([S({type:Boolean,nonNullable:!0})],ul.prototype,"enabled",void 0),v([S({type:kS})],ul.prototype,"device",void 0),v([S({type:["pan","zoom"],nonNullable:!0})],ul.prototype,"mode",void 0),v([S({type:["forward-down","forward-up"],nonNullable:!0})],ul.prototype,"tiltDirection",void 0),v([S({type:Number,nonNullable:!0})],ul.prototype,"velocityFactor",void 0),ul=v([H("esri.views.navigation.gamepad.GamepadSettings")],ul);const bL=ul;let hl=class extends Ae{constructor(t){super(t),this.actionMap=new RS,this.browserTouchPanEnabled=!0,this.gamepad=new bL,this.momentumEnabled=!0}get effectiveMomentumEnabled(){return this.momentumEnabled&&!wL()}get mouseWheelZoomEnabled(){return this.actionMap.mouseWheel==="zoom"}set mouseWheelZoomEnabled(t){IU(ye.getLogger(this),"mouseWheelZoomEnabled",{replacement:"actionMap.mouseWheel",version:"4.32",warnOnce:!0}),this.actionMap.mouseWheel=t?"zoom":"none"}};v([S({type:RS,nonNullable:!0})],hl.prototype,"actionMap",void 0),v([S({type:Boolean})],hl.prototype,"browserTouchPanEnabled",void 0),v([S({type:bL,nonNullable:!0})],hl.prototype,"gamepad",void 0),v([S({type:Boolean})],hl.prototype,"momentumEnabled",void 0),v([S({type:Boolean})],hl.prototype,"mouseWheelZoomEnabled",null),hl=v([H("esri.views.navigation.Navigation")],hl);const R2=hl;function G9e(e,t,i){const r=_L(e),a=t,p=Mre(r,a,i);if(r){const y=R1.deriveUnitFromSR(r,e.spatialReference).heightUnit;if(!i&&y!==r.heightUnit){const g=new Y("layerview:unmatched-height-unit",`The vertical units of the layer must match the horizontal units (${y})`,{horizontalUnit:y});return new Y("layerview:unsupported-height-model-info","The vertical coordinate system of the layer is not supported",{heightModelInfo:r,error:g})}}if(!$re(e)||p===Br.Unsupported)return new Y("layerview:unsupported-height-model-info","The vertical coordinate system of the layer is not supported",{heightModelInfo:r});switch(p){case Br.Units:{const y=(r==null?void 0:r.heightUnit)||"unknown",g=(a==null?void 0:a.heightUnit)||"unknown",_=new Y("layerview:incompatible-height-unit",`The vertical units of the layer (${y}) must match the vertical units of the scene (${g})`,{layerUnit:y,sceneUnit:g});return new Y("layerview:incompatible-height-model-info","The vertical coordinate system of the layer is incompatible with the scene",{layerHeightModelInfo:r,sceneHeightModelInfo:a,error:_})}case Br.HeightModel:{const y=(r==null?void 0:r.heightModel)||"unknown",g=(a==null?void 0:a.heightModel)||"unknown",_=new Y("layerview:incompatible-height-model",`The height model of the layer (${y}) must match the height model of the scene (${g})`,{layerHeightModel:y,sceneHeightModel:g});return new Y("layerview:incompatible-height-model-info","The vertical coordinate system of the layer is incompatible with the scene",{layerHeightModelInfo:r,sceneHeightModelInfo:a,error:_})}case Br.CRS:{const y=(r==null?void 0:r.vertCRS)||"unknown",g=(a==null?void 0:a.vertCRS)||"unknown",_=new Y("layerview:incompatible-vertical-datum",`The vertical datum of the layer (${y}) must match the vertical datum of the scene (${g})`,{layerDatum:y,sceneDatum:g});return new Y("layerview:incompatible-height-model-info","The vertical coordinate system of the layer is incompatible with the scene",{layerHeightModelInfo:r,sceneHeightModelInfo:a,error:_})}}return null}function Mre(e,t,i){if(!K8(e)||!K8(t))return Br.Unsupported;if(e==null||t==null)return Br.Ok;if(!i&&e.heightUnit!==t.heightUnit)return Br.Units;if(e.heightModel!==t.heightModel)return Br.HeightModel;switch(e.heightModel){case"gravity-related-height":return Br.Ok;case"ellipsoidal":return e.vertCRS===t.vertCRS?Br.Ok:Br.CRS;default:return Br.Unsupported}}var Br;function K8(e){return e==null||e.heightModel!=null&&e.heightUnit!=null}function $re(e){return"heightModelInfo"in e&&e.heightModelInfo!=null||e.spatialReference!=null||!TL(e)}function _L(e){var r;if(e.type==="integrated-mesh-3dtiles")return null;const t=e.url?ud(e.url):void 0;return!(((r=e.spatialReference)==null?void 0:r.vcsWkid)==null&&t!=null&&t.serverType==="ImageServer")&&SL(e)&&e.heightModelInfo?e.heightModelInfo:TL(e)?R1.deriveUnitFromSR(Ire,e.spatialReference):null}function SL(e){return"heightModelInfo"in e}function xL(e){if(e.type==="unknown"||!("capabilities"in e))return!1;switch(e.type){case"catalog":case"catalog-footprint":case"csv":case"feature":case"geojson":case"subtype-group":case"ogc-feature":case"oriented-imagery":case"wfs":case"knowledge-graph-sublayer":return!0;default:return!1}}function TL(e){return xL(e)?!!(e.capabilities&&e.capabilities.data&&e.capabilities.data.supportsZ):ML(e)}function Ere(e){return e.layers!=null||ML(e)||xL(e)||SL(e)}function ML(e){switch(e.type){case"building-scene":case"elevation":case"integrated-mesh":case"integrated-mesh-3dtiles":case"point-cloud":case"scene":case"voxel":return!0;case"base-dynamic":case"base-elevation":case"base-tile":case"bing-maps":case"catalog":case"catalog-footprint":case"catalog-dynamic-group":case"csv":case"dimension":case"geojson":case"feature":case"subtype-group":case"geo-rss":case"graphics":case"group":case"imagery":case"imagery-tile":case"kml":case"knowledge-graph":case"link-chart":case"knowledge-graph-sublayer":case"line-of-sight":case"map-image":case"map-notes":case"media":case"ogc-feature":case"open-street-map":case"oriented-imagery":case"parquet":case"route":case"stream":case"tile":case"unknown":case"unsupported":case"vector-tile":case"video":case"viewshed":case"wcs":case"web-tile":case"wfs":case"wms":case"wmts":case null:return!1}return!1}(function(e){e[e.Ok=0]="Ok",e[e.Units=1]="Units",e[e.HeightModel=2]="HeightModel",e[e.CRS=3]="CRS",e[e.Unsupported=4]="Unsupported"})(Br||(Br={}));const Ire=new R1({heightModel:"gravity-related-height"});var Ea;function Y8(e){return e===Ea.Global?"global":"local"}(function(e){e[e.Global=1]="Global",e[e.Local=2]="Local"})(Ea||(Ea={}));let X9,cb=null;async function Are(e){cb||(cb=fe(()=>import("./geometryServiceUtils-CS-wu6kE.js"),[]).then(t=>X9=t)),await cb,At(e)}async function $L(e,t,i,r){if(!e)return null;const a=e.spatialReference;return Aa()||Dn(a,t)?Ca(e,t):X9?X9.projectGeometry(e,t,i,r):(await Promise.race([Are(r),xo(r)]),$L(e,t,i,r))}let Pt=class extends Ae{constructor(t){super(t),this.required={extent:!1,heightModelInfo:!1,tileInfo:!1},this.defaultSpatialReference=null,this.userSpatialReference=null,this.sourcePreloadCount=10,this.priorityCollection=null,this.requiresExtentInSpatialReference=!0,this.suspended=!1,this._projectExtentTask={task:null,input:null,output:null,spatialReference:null}}destroy(){this._projectExtentTask.task&&(this._projectExtentTask.task=Lp(this._projectExtentTask.task)),this._set("map",null)}get ready(){return!this._spatialReferenceTask.updating&&!this._tileInfoTask.updating&&!this._extentTask.updating}get heightModelInfoReady(){return!this._heightModelInfoTask.updating}get spatialReference(){return this.userSpatialReference??this._spatialReferenceTask.spatialReference}get extent(){return this._extentTask.extent}get heightModelInfo(){return this._heightModelInfoTask.heightModelInfo}get vcsWkid(){return this._heightModelInfoTask.vcsWkid}get latestVcsWkid(){return this._heightModelInfoTask.latestVcsWkid}get viewingMode(){return this.userSpatialReference==null||this.userSpatialReference.equals(this._spatialReferenceTask.spatialReference)?this._spatialReferenceTask.viewingMode:null}get tileInfo(){return this._tileInfoTask.tileInfo}get mapCollections(){var r,a,p,y;const t=(r=this.map)==null?void 0:r.call(this),i=[];return this.priorityCollection!=null&&i.push(this.priorityCollection),i.push({parent:t==null?void 0:t.basemap,layers:(a=t==null?void 0:t.basemap)==null?void 0:a.baseLayers},{layers:t==null?void 0:t.layers},{parent:t==null?void 0:t.ground,layers:(p=t==null?void 0:t.ground)==null?void 0:p.layers},{parent:t==null?void 0:t.basemap,layers:(y=t==null?void 0:t.basemap)==null?void 0:y.referenceLayers}),i}get _spatialReferenceTask(){if(this.suspended)return this._get("_spatialReferenceTask")??{updating:!1};let t;if(this._collectLayers(this.mapCollections,r=>{const a=this._getSupportedSpatialReferences(r);if(a.length>0){const p=this._narrowDownSpatialReferenceCandidates(t,a);p!=null&&(t=p)}return(t==null?void 0:t.length)===1})&&(t==null?void 0:t.length)!==1)return{updating:!0};const i=this._pickSpatialReferenceCandidate(t);return{spatialReference:(i==null?void 0:i.spatialReference)??null,viewingMode:(i==null?void 0:i.viewingMode)??null,updating:!1}}get _tileInfoTask(){var p,y;if(!this.required.tileInfo)return this._get("_tileInfoTask")??{updating:!1};const t=(p=this.map)==null?void 0:p.call(this),i=this.spatialReference;if(!i)return{updating:this._spatialReferenceTask.updating};let r;const a=this._collectLayers([{parent:t==null?void 0:t.basemap,layers:(y=t==null?void 0:t.basemap)==null?void 0:y.baseLayers},{layers:t==null?void 0:t.layers}],g=>{var _;return!(!("tileInfo"in g)||!((_=g.tileInfo)!=null&&_.spatialReference.equals(i)))&&(r=g,!0)},g=>"tileInfo"in g);return r?{tileInfo:r.tileInfo,updating:!1}:{updating:a}}get _heightModelInfoTask(){var r;if(!this.required.heightModelInfo||this.suspended&&((r=this._get("_heightModelInfoTask"))!=null&&r.heightModelInfo))return this._get("_heightModelInfoTask")??{updating:!1};let t={};const i=this._collectLayers(this.mapCollections,a=>{var y,g;const p=_L(a);return!!p&&(t={heightModelInfo:p,vcsWkid:(y=a.spatialReference)==null?void 0:y.vcsWkid,latestVcsWkid:(g=a.spatialReference)==null?void 0:g.latestVcsWkid},!0)},a=>Ere(a));return{...t,updating:i}}get _extentCandidatesTask(){if(this.suspended||!this.required.extent)return this._get("_extentCandidatesTask")??{updating:!1};if(!this.spatialReference)return{updating:this._spatialReferenceTask.updating};const t=[],i=this._collectLayers(this.mapCollections,r=>{const a="fullExtents"in r&&r.fullExtents||(r.fullExtent!=null?[r.fullExtent]:[]),p=this.requiresExtentInSpatialReference?null:a[0],y=a.find(g=>g.spatialReference.equals(this.spatialReference))??p;if(y)return t.push({extent:y,layer:r}),!0;if(this._getSupportedSpatialReferences(r).length>0)for(const g of a)t.push({extent:g,layer:r});return!1});return{candidates:t,updating:i}}get _extentTask(){const{candidates:t,updating:i}=this._extentCandidatesTask;if(i)return{updating:i};if(t==null||t.length===0)return{updating:!1};if(!this.spatialReference)return{updating:this._spatialReferenceTask.updating};const r=this._pickExtentCandidate(t),a=this.spatialReference;return r.extent.equals(this._projectExtentTask.input)&&a.equals(this._projectExtentTask.spatialReference)?{extent:this._projectExtentTask.output,updating:this._projectExtentTask.task!=null&&!this._projectExtentTask.task.finished}:(this._projectExtentTask.task!=null&&(this._projectExtentTask.task=Lp(this._projectExtentTask.task)),this._projectExtentTask={input:r.extent.clone(),output:null,spatialReference:a.clone(),task:M1(async p=>{try{const y=await $L(r.extent,a,"portalItem"in r.layer?r.layer.portalItem:void 0,p);this._projectExtentTask={...this._projectExtentTask,task:null,output:y}}catch{if(bs(p))return;this._projectExtentTask={...this._projectExtentTask,task:null}}})},{updating:!0})}_narrowDownSpatialReferenceCandidates(t,i){if(t==null)return i;const r=new Array;for(const a of t)for(const p of i){if(!a.spatialReference.equals(p.spatialReference))continue;const y=Ore(a.viewingMode,p.viewingMode);if(y!==!1){r.push({spatialReference:a.spatialReference,viewingMode:y});break}}return r.length>0?r:null}_pickSpatialReferenceCandidate(t){const i=this.defaultSpatialReference;return t==null||t.length<1?i?{spatialReference:i,viewingMode:null}:null:(i!=null&&t.length>1&&t.some(({spatialReference:r})=>r.equals(i))&&(t=t.filter(({spatialReference:r})=>r.equals(i))),t.length>1&&t.some(({viewingMode:r})=>r!==Ea.Local)&&(t=t.filter(({viewingMode:r})=>r!==Ea.Local)),t[0])}_getSupportedSpatialReferences(t){const i="supportedSpatialReferences"in t&&t.supportedSpatialReferences||(t.spatialReference?[t.spatialReference]:[]);if(i.length===0)return[];const r=[];for(const a of i){const p=this.getSpatialReferenceSupport(a,t);if(p!=null){const y=p.constraints??[{spatialReference:a,viewingMode:null}];for(const{spatialReference:g,viewingMode:_}of y)this.requiresExtentInSpatialReference&&this.userSpatialReference!=null&&!g.equals(this.userSpatialReference)||r.push({spatialReference:g,viewingMode:_})}}return r}_pickExtentCandidate(t){const i=this.spatialReference;return t.find(({extent:r})=>i.equals(r.spatialReference))||t[0]}_collectLayers(t,i,r=()=>!0){var p;switch(this._loadMaybe((p=this.map)==null?void 0:p.call(this))){case"loading":return!0;case"failed":return!1}const a=new Cre(r,i);for(const y of t)if(this._collectCollection(y,a),a.done||a.preloading===this.sourcePreloadCount)break;return a.updating}_collectCollection(t,i){if(t.layers){switch(this._loadMaybe(t.parent)){case"loading":return i.updating=!0,void++i.preloading;case"failed":return}for(const r of t.layers)if(i.layerFilter(r)){switch(this._loadMaybe(r)){case"failed":continue;case"loading":i.updating=!0,++i.preloading;break;case"loaded":if(i.updating||(i.done=i.pushLayer(r)),i.done||i.preloading===this.sourcePreloadCount)break;"layers"in r&&this._collectCollection({layers:r.layers},i)}if(i.done||i.preloading===this.sourcePreloadCount)break}}}_loadMaybe(t){return t&&"loadStatus"in t&&t.loadStatus!=null?t.loadStatus==="not-loaded"?(t.load().catch(i=>{Si(i)}),"loading"):t.loadStatus:"loaded"}};v([S()],Pt.prototype,"required",void 0),v([S({constructOnly:!0})],Pt.prototype,"map",void 0),v([S({constructOnly:!0})],Pt.prototype,"getSpatialReferenceSupport",void 0),v([S()],Pt.prototype,"defaultSpatialReference",void 0),v([S()],Pt.prototype,"userSpatialReference",void 0),v([S()],Pt.prototype,"sourcePreloadCount",void 0),v([S()],Pt.prototype,"priorityCollection",void 0),v([S()],Pt.prototype,"requiresExtentInSpatialReference",void 0),v([S()],Pt.prototype,"suspended",void 0),v([S({readOnly:!0})],Pt.prototype,"ready",null),v([S({readOnly:!0})],Pt.prototype,"heightModelInfoReady",null),v([S({readOnly:!0})],Pt.prototype,"spatialReference",null),v([S({readOnly:!0})],Pt.prototype,"extent",null),v([S({readOnly:!0})],Pt.prototype,"heightModelInfo",null),v([S({readOnly:!0})],Pt.prototype,"vcsWkid",null),v([S({readOnly:!0})],Pt.prototype,"latestVcsWkid",null),v([S({readOnly:!0})],Pt.prototype,"viewingMode",null),v([S({readOnly:!0})],Pt.prototype,"tileInfo",null),v([S({readOnly:!0})],Pt.prototype,"mapCollections",null),v([S({readOnly:!0})],Pt.prototype,"_spatialReferenceTask",null),v([S({readOnly:!0})],Pt.prototype,"_tileInfoTask",null),v([S({readOnly:!0})],Pt.prototype,"_heightModelInfoTask",null),v([S({readOnly:!0})],Pt.prototype,"_extentCandidatesTask",null),v([S()],Pt.prototype,"_extentTask",null),v([S()],Pt.prototype,"_projectExtentTask",void 0),Pt=v([H("esri.views.support.DefaultsFromMap")],Pt);let Cre=class{constructor(t,i){this.layerFilter=t,this.pushLayer=i,this.preloading=-1,this.updating=!1,this.done=!1}};function Ore(e,t){return e!=null?t!=null?e===t&&e:e:t}let Rc=class extends Ae{constructor(t){super(t),this.featureTitleFields=!1,this.utilityNetworkFields=!1,this.globalIdField=!1}};v([S()],Rc.prototype,"featureTitleFields",void 0),v([S()],Rc.prototype,"utilityNetworkFields",void 0),v([S()],Rc.prototype,"globalIdField",void 0),Rc=v([H("esri.views.support.RequiredFieldsOptions")],Rc);const Pre=Rc;var Df;let Oe=Df=class extends Ss.EventedMixin(hd.EsriPromiseMixin(Ae)){constructor(e){super(e),this._userSpatialReference=null,this._cursor=null,this.handles=new rd,this.updatingHandles=new Eh,this.allLayerViews=new Z0({getCollections:()=>{var t,i,r;return[(t=this.basemapView)==null?void 0:t.baseLayerViews,(i=this.groundView)==null?void 0:i.layerViews,this.layerViews,(r=this.basemapView)==null?void 0:r.referenceLayerViews]},getChildrenFunction:Rre}),this.groundView=null,this.basemapView=null,this.displayFilterEnabled=!0,this.fatalError=null,this.graphics=new C0,this.analyses=new yv,this.typeSpecificPreconditionsReady=!0,this.layerViews=new xe,this.magnifier=new oL,this.padding={left:0,top:0,right:0,bottom:0},this.ready=!1,this._readyStateWaitingTask=null,this.supportsGround=!0,this.type=null,this.scale=null,this.updating=!1,this.initialExtentRequired=!0,this.input=new Tre,this.navigation=new R2,this.layerViewManager=null,this.analysisViewManager=null,this.isHeightModelInfoRequired=!1,this.width=null,this.height=null,this.resizing=!1,this.suspended=!1,this.viewEvents=new fL(this),this.persistableViewModels=new xe,this.requiredFieldsOptions=new Pre,this._isValid=!1,this._readyCycleForced=!1,this._lockedSpatialReference=null,this._userTimeZone=null,this._lockedTimeZone=null,this._userTimeExtent=null,this._lockedTimeExtent=null,this.theme=null,this.handles.add(Le(()=>this.preconditionsReady,t=>{var r,a;const i=this.ready;if(t?(this._lockedSpatialReference=this.spatialReference,this._lockedTimeZone=this.timeZone,this._lockedTimeExtent=this.timeExtent,Df.views.add(this)):(this._lockedSpatialReference=null,Df.views.remove(this)),this.notifyChange("spatialReference"),!t&&i)(r=this.toolViewManager)==null||r.detach(),this.analysisViewManager!=null&&this.analysisViewManager.detach(),(a=this.layerViewManager)==null||a.clear(),this._teardown();else if(t&&!i){try{this._startup()}catch(p){return void queueMicrotask(()=>{this.fatalError=new Y("startup-error",null,p)})}this.analysisViewManager!=null&&this.analysisViewManager.attach(),this.toolViewManager.attach()}},So))}initialize(){this.addResolvingPromise(Promise.all([this.loadAsyncDependencies(),this.validate()]).then(()=>(this._isValid=!0,y2(()=>this.ready)))),this.basemapView=new Cie({view:this}),this.layerViewManager=new Rie({view:this,layerViewImporter:{importLayerView:e=>this.importLayerView(e),hasLayerViewModule:e=>this.hasLayerViewModule(e)},supportsGround:this.supportsGround}),this.toolViewManager=new eo({view:this}),this.selectionManager=new Wie({view:this}),this.addHandles([gr(()=>this.readyState==="map-content-error"&&!this.spatialReference,()=>{ye.getLogger(this).warn("#spatialReference","no spatial reference could be derived from the currently added map layers")}),Le(()=>this.initialExtentRequired,e=>this.defaultsFromMap.required={...this.defaultsFromMap.required,extent:e},qr),Le(()=>this.ready,e=>{this.defaultsFromMap&&(this.defaultsFromMap.suspended=e,this.defaultsFromMap.userSpatialReference=e?this.spatialReference:this._userSpatialReference)},So),Le(()=>this._userSpatialReference,e=>{this.defaultsFromMap&&(this.defaultsFromMap.userSpatialReference=e)},qr)])}destroy(){var e,t;this.destroyed||(Df.views.remove(this),this.viewEvents.destroy(),this.allLayerViews.destroy(),this.navigation&&(this.navigation.destroy(),this._set("navigation",null)),this.graphics=Ht(this.graphics),this.analyses=Ht(this.analyses),this.defaultsFromMap.destroy(),this._set("defaultsFromMap",null),Ht(this.analysisViewManager),this.toolViewManager=Ht(this.toolViewManager),this.layerViewManager=Ht(this.layerViewManager),this.selectionManager=Ht(this.selectionManager),this.basemapView=Ht(this.basemapView),(e=this.groundView)==null||e.destroy(),(t=this.layerViews)==null||t.forEach(i=>i.destroy()),this.layerViews.length=0,this.invalidate(),this._emitter.clear(),this.handles.destroy(),this.map=Ht(this.map),this.updatingHandles.destroy())}_startup(){this._set("ready",!0)}_teardown(){this._set("ready",!1)}whenReady(){return Promise.resolve(this)}toMap(){return ye.getLogger(this).error("#toMap()","Not implemented on this instance of View"),null}get activeTool(){var e;return(e=this.toolViewManager)==null?void 0:e.activeTool}set activeTool(e){this.toolViewManager&&(this.toolViewManager.activeTool=e)}get animation(){return this._get("animation")}set animation(e){this._set("animation",e)}get center(){return null}get defaultsFromMapSettings(){return{}}get defaultsFromMap(){return new Pt({required:{tileInfo:!1,heightModelInfo:!1,extent:!1},map:()=>this.map,getSpatialReferenceSupport:(e,t)=>this.getSpatialReferenceSupport(e,t),...this.defaultsFromMapSettings})}get extent(){return this._get("extent")}set extent(e){this._set("extent",e)}get heightModelInfo(){return this.getDefaultHeightModelInfo()}get highlights(){return this._get("highlights")??bre()}set highlights(e){this._set("highlights",Ta(e,this._get("highlights"),xe.ofType(Bl)))}get interacting(){return this.navigating}get navigating(){return!1}get preconditionsReady(){var e;return!(this.fatalError||!this._isValid||this._readyCycleForced||!this.map||Xs.isLoadable(this.map)&&!this.map.loaded||this.width===0||this.height===0||!this.spatialReference||!this._validateSpatialReference(this.spatialReference)||!this._lockedSpatialReference&&!((e=this.defaultsFromMap)!=null&&e.ready)||!this.typeSpecificPreconditionsReady)}get resolution(){return 0}set map(e){e!==this._get("map")&&(e!=null&&e.destroyed&&(ye.getLogger(this).warn("#map","The provided map is already destroyed",{map:e}),e=null),Xs.isLoadable(e)&&e.load().catch(()=>{}),this.constructed&&!this.destroyed&&(this.forceReadyCycle(),this._lockedSpatialReference=null),this._set("map",e))}get readyState(){var e,t,i,r;if(this.destroyed)return this._get("readyState");if(!this.map)return"missing-map";if("container"in this&&!this.container)return"missing-container";if(this.fatalError)return"rendering-error";if((((e=this.defaultsFromMap)==null?void 0:e.ready)??!1)&&!this.spatialReference){const a=!("loaded"in this.map)||this.map.loaded,p=this.map.ground.loaded,y=((t=this.map.basemap)==null?void 0:t.loaded)??!0;return a&&y&&p&&!((i=this.map)!=null&&i.allLayers.length)?"empty-map":(this._readyStateWaitingTask||(this._readyStateWaitingTask=M1(g=>fC(ne("view-readyState-waiting-delay"),null,g)),this.addHandles(this._readyStateWaitingTask),this.addHandles(this._readyStateWaitingTask,"ready-state-task")),(r=this._readyStateWaitingTask)!=null&&r.finished?"map-content-error":"loading")}return this._readyStateWaitingTask=Lp(this._readyStateWaitingTask),this.removeHandles("ready-state-task"),this.ready?"ready":"loading"}get spatialReference(){var t,i;const e=this._userSpatialReference||this._lockedSpatialReference||this.getDefaultSpatialReference()||null;if(e&&((i=(t=this.defaultsFromMap)==null?void 0:t.required)!=null&&i.heightModelInfo)){const r=e.clone();return r.vcsWkid=this.defaultsFromMap.vcsWkid,r.latestVcsWkid=this.defaultsFromMap.latestVcsWkid,r}return e}set spatialReference(e){const t=!fi(e,this._get("spatialReference"));this._set("_userSpatialReference",e),t&&(this._set("spatialReference",e),this._spatialReferenceChanged(e))}_spatialReferenceChanged(e){}get stationary(){return!this.animation&&!this.navigating&&!this.resizing}get timeExtent(){return this._userTimeExtent??this._lockedTimeExtent??this.getDefaultTimeExtent()??null}set timeExtent(e){this._userTimeExtent=e}get timeZone(){return this._userTimeZone??this._lockedTimeZone??this.getDefaultTimeZone()??bo}set timeZone(e){this._userTimeZone=e,vJ(e)||ye.getLogger(this).warn("#timeZone",`the parsed value '${e}' may not be a valid IANA time zone`)}get tools(){var e;return(e=this.toolViewManager)==null?void 0:e.tools}get initialExtent(){var e;return(e=this.defaultsFromMap)==null?void 0:e.extent}get cursor(){var e;return((e=this.toolViewManager)==null?void 0:e.cursor)??this._cursor??"default"}set cursor(e){this._cursor=e,this.notifyChange("cursor")}get size(){return[this.width,this.height]}get effectiveTheme(){return this.theme??new Z9}whenLayerView(e){var t;return((t=this.layerViewManager)==null?void 0:t.whenLayerView(e))??Promise.reject()}getDefaultSpatialReference(){var e;return(e=this.defaultsFromMap)==null?void 0:e.spatialReference}getDefaultHeightModelInfo(){var e;return(this.map&&"heightModelInfo"in this.map?this.map.heightModelInfo:void 0)??((e=this.defaultsFromMap)==null?void 0:e.heightModelInfo)??null}getDefaultTimeZone(){return null}getDefaultTimeExtent(){return null}importLayerView(e){throw new Y("importLayerView() not implemented")}hasLayerViewModule(e){return!1}async validate(){}async loadAsyncDependencies(){}invalidate(){this._isValid=!1}getSpatialReferenceSupport(){return{constraints:null}}_validateSpatialReference(e){return this.getSpatialReferenceSupport(e)!=null}when(e,t){return this.isResolved()&&!this.ready&&ye.getLogger(this).warn("#when()","Calling view.when() while the view is no longer ready but was already resolved once will resolve immediately. Use reactiveUtils.whenOnce(() => view.ready).then(...) instead."),super.when(e,t)}forceReadyCycle(){this.ready&&(gr(()=>this.destroyed||this.preconditionsReady===!1,()=>this._readyCycleForced=!1,{once:!0}),this._readyCycleForced=!0)}addAndActivateTool(e){this.toolViewManager.tools.add(e),this.activeTool=e}tryFatalErrorRecovery(){this.fatalError=null}};Oe.views=new xe,v([S()],Oe.prototype,"_userSpatialReference",void 0),v([S()],Oe.prototype,"activeTool",null),v([S({readOnly:!0})],Oe.prototype,"allLayerViews",void 0),v([S()],Oe.prototype,"groundView",void 0),v([S()],Oe.prototype,"animation",null),v([S()],Oe.prototype,"basemapView",void 0),v([S()],Oe.prototype,"center",null),v([S()],Oe.prototype,"defaultsFromMapSettings",null),v([S()],Oe.prototype,"defaultsFromMap",null),v([S()],Oe.prototype,"displayFilterEnabled",void 0),v([S()],Oe.prototype,"fatalError",void 0),v([S({type:Ct})],Oe.prototype,"extent",null),v([S(b8(C0,"graphics"))],Oe.prototype,"graphics",void 0),v([S(b8(yv,"analyses"))],Oe.prototype,"analyses",void 0),v([S({readOnly:!0,type:R1})],Oe.prototype,"heightModelInfo",null),v([S({type:xe.ofType(Bl)})],Oe.prototype,"highlights",null),v([S({readOnly:!0})],Oe.prototype,"interacting",null),v([S({readOnly:!0})],Oe.prototype,"navigating",null),v([S({readOnly:!0,dependsOn:["fatalError","_isValid","_readyCycleForced","map","map.loaded?","width","height","spatialReference","_lockedSpatialReference","defaultsFromMap.ready","typeSpecificPreconditionsReady"]})],Oe.prototype,"preconditionsReady",null),v([S({readOnly:!0})],Oe.prototype,"typeSpecificPreconditionsReady",void 0),v([S({type:xe,readOnly:!0})],Oe.prototype,"layerViews",void 0),v([S()],Oe.prototype,"resolution",null),v([S({type:oL})],Oe.prototype,"magnifier",void 0),v([S({value:null,type:Uk})],Oe.prototype,"map",null),v([S()],Oe.prototype,"padding",void 0),v([S({readOnly:!0})],Oe.prototype,"ready",void 0),v([S()],Oe.prototype,"_readyStateWaitingTask",void 0),v([S({readOnly:!0})],Oe.prototype,"readyState",null),v([S({type:qe})],Oe.prototype,"spatialReference",null),v([S()],Oe.prototype,"stationary",null),v([S({readOnly:!0})],Oe.prototype,"supportsGround",void 0),v([S({type:Ma})],Oe.prototype,"timeExtent",null),v([S({type:String,nonNullable:!0})],Oe.prototype,"timeZone",null),v([S()],Oe.prototype,"tools",null),v([S()],Oe.prototype,"toolViewManager",void 0),v([S({readOnly:!0})],Oe.prototype,"type",void 0),v([S({type:Number})],Oe.prototype,"scale",void 0),v([S({readOnly:!0})],Oe.prototype,"updating",void 0),v([S({readOnly:!0})],Oe.prototype,"initialExtentRequired",void 0),v([S({readOnly:!0})],Oe.prototype,"initialExtent",null),v([S()],Oe.prototype,"cursor",null),v([S({readOnly:!0})],Oe.prototype,"input",void 0),v([S({type:R2,nonNullable:!0})],Oe.prototype,"navigation",void 0),v([S()],Oe.prototype,"layerViewManager",void 0),v([S()],Oe.prototype,"analysisViewManager",void 0),v([S()],Oe.prototype,"selectionManager",void 0),v([S()],Oe.prototype,"width",void 0),v([S()],Oe.prototype,"height",void 0),v([S({readOnly:!0})],Oe.prototype,"resizing",void 0),v([S({value:null,readOnly:!0})],Oe.prototype,"size",null),v([S({readOnly:!0})],Oe.prototype,"suspended",void 0),v([S({readOnly:!0})],Oe.prototype,"viewEvents",void 0),v([S({readOnly:!0})],Oe.prototype,"persistableViewModels",void 0),v([S()],Oe.prototype,"_isValid",void 0),v([S()],Oe.prototype,"_readyCycleForced",void 0),v([S()],Oe.prototype,"_lockedSpatialReference",void 0),v([S()],Oe.prototype,"_userTimeZone",void 0),v([S()],Oe.prototype,"_lockedTimeZone",void 0),v([S()],Oe.prototype,"_userTimeExtent",void 0),v([S()],Oe.prototype,"_lockedTimeExtent",void 0),v([S({type:Z9})],Oe.prototype,"theme",void 0),v([S({readOnly:!0,type:Z9})],Oe.prototype,"effectiveTheme",null),Oe=Df=v([H("esri.views.View")],Oe);const pb=globalThis.$arcgis;pb&&!pb.views&&Object.defineProperty(pb,"views",{configurable:!1,enumerable:!0,writable:!1,value:Oe.views});const kre=Oe;function Rre(e){return e.layerViews}function Ip(e,t){return e[0]=t[0],e[1]=t[1],e}function zi(e,t,i){return e[0]=t,e[1]=i,e}function EL(e,t,i){return e[0]=t[0]+i[0],e[1]=t[1]+i[1],e}function r1(e,t,i){return e[0]=t[0]-i[0],e[1]=t[1]-i[1],e}function IL(e,t,i){return e[0]=t[0]*i[0],e[1]=t[1]*i[1],e}function AL(e,t,i){return e[0]=t[0]/i[0],e[1]=t[1]/i[1],e}function Nre(e,t){return e[0]=Math.ceil(t[0]),e[1]=Math.ceil(t[1]),e}function Lre(e,t){return e[0]=Math.floor(t[0]),e[1]=Math.floor(t[1]),e}function Dre(e,t,i){return e[0]=Math.min(t[0],i[0]),e[1]=Math.min(t[1],i[1]),e}function jre(e,t,i){return e[0]=Math.max(t[0],i[0]),e[1]=Math.max(t[1],i[1]),e}function Fre(e,t){return e[0]=Math.round(t[0]),e[1]=Math.round(t[1]),e}function B1(e,t,i){return e[0]=t[0]*i,e[1]=t[1]*i,e}function zre(e,t,i,r){return e[0]=t[0]+i[0]*r,e[1]=t[1]+i[1]*r,e}function N2(e,t){const i=t[0]-e[0],r=t[1]-e[1];return Math.sqrt(i*i+r*r)}function bv(e,t){const i=t[0]-e[0],r=t[1]-e[1];return i*i+r*r}function _v(e){const t=e[0],i=e[1];return Math.sqrt(t*t+i*i)}function CL(e){const t=e[0],i=e[1];return t*t+i*i}function OL(e,t){return e[0]=-t[0],e[1]=-t[1],e}function Ure(e,t){return e[0]=1/t[0],e[1]=1/t[1],e}function Q9(e,t){const i=t[0],r=t[1];let a=i*i+r*r;return a>0&&(a=1/Math.sqrt(a),e[0]=t[0]*a,e[1]=t[1]*a),e}function PL(e,t){return e[0]*t[0]+e[1]*t[1]}function kL(e,t,i){const r=t[0]*i[1]-t[1]*i[0];return e[0]=e[1]=0,e[2]=r,e}function Vre(e,t,i,r){const a=t[0],p=t[1];return e[0]=a+r*(i[0]-a),e[1]=p+r*(i[1]-p),e}function Gre(e,t=1){const i=2*g2()*Math.PI;return e[0]=Math.cos(i)*t,e[1]=Math.sin(i)*t,e}function Bre(e,t,i){const r=t[0],a=t[1];return e[0]=i[0]*r+i[2]*a,e[1]=i[1]*r+i[3]*a,e}function fo(e,t,i){const r=t[0],a=t[1];return e[0]=i[0]*r+i[2]*a+i[4],e[1]=i[1]*r+i[3]*a+i[5],e}function qre(e,t,i){const r=t[0],a=t[1];return e[0]=i[0]*r+i[3]*a+i[6],e[1]=i[1]*r+i[4]*a+i[7],e}function Hre(e,t,i){const r=t[0],a=t[1];return e[0]=i[0]*r+i[4]*a+i[12],e[1]=i[1]*r+i[5]*a+i[13],e}function Wre(e,t,i,r){const a=t[0]-i[0],p=t[1]-i[1],y=Math.sin(r),g=Math.cos(r);return e[0]=a*g-p*y+i[0],e[1]=a*y+p*g+i[1],e}function Jre(e,t){const i=e[0],r=e[1],a=t[0],p=t[1];let y=i*i+r*r;y>0&&(y=1/Math.sqrt(y));let g=a*a+p*p;g>0&&(g=1/Math.sqrt(g));const _=(i*a+r*p)*y*g;return _>1?0:_<-1?Math.PI:Math.acos(_)}function Zre(e){return"vec2("+e[0]+", "+e[1]+")"}function Kre(e,t){return e[0]===t[0]&&e[1]===t[1]}function Yre(e,t){const i=e[0],r=e[1],a=t[0],p=t[1],y=Ar();return Math.abs(i-a)<=y*Math.max(1,Math.abs(i),Math.abs(a))&&Math.abs(r-p)<=y*Math.max(1,Math.abs(r),Math.abs(p))}function Xre(e,t,i,r,a){let p=t[0]-i[0],y=t[1]-i[1];const g=(r[0]*p+r[1]*y)*(a-1);return p=r[0]*g,y=r[1]*g,e[0]=t[0]+p,e[1]=t[1]+y,e}const Qre=_v,NS=r1,ese=IL,tse=AL,ise=N2,rse=bv,sse=CL;Object.freeze(Object.defineProperty({__proto__:null,add:EL,angle:Jre,ceil:Nre,copy:Ip,cross:kL,dist:ise,distance:N2,div:tse,divide:AL,dot:PL,equals:Yre,exactEquals:Kre,floor:Lre,inverse:Ure,len:Qre,length:_v,lerp:Vre,max:jre,min:Dre,mul:ese,multiply:IL,negate:OL,normalize:Q9,projectAndScale:Xre,random:Gre,rotate:Wre,round:Fre,scale:B1,scaleAndAdd:zre,set:zi,sqrDist:rse,sqrLen:sse,squaredDistance:bv,squaredLength:CL,str:Zre,sub:NS,subtract:r1,transformMat2:Bre,transformMat2d:fo,transformMat3:qre,transformMat4:Hre},Symbol.toStringTag,{value:"Module"}));function ri(){return[0,0]}function nse(e){return[e[0],e[1]]}function q1(e,t){return[e,t]}function ose(e,t){return[e,t]}function ase(e,t=ri()){const i=Math.min(2,e.length);for(let r=0;r<i;++r)t[r]=e[r];return t}function lse(e,t){return new Float64Array(e,t,2)}function RL(){return ri()}function NL(){return q1(1,1)}function LL(){return q1(1,0)}function DL(){return q1(0,1)}const use=RL(),hse=NL(),cse=LL(),pse=DL();Object.freeze(Object.defineProperty({__proto__:null,ONES:hse,UNIT_X:cse,UNIT_Y:pse,ZEROS:use,clone:nse,create:ri,createView:lse,freeze:ose,fromArray:ase,fromValues:q1,ones:NL,unitX:LL,unitY:DL,zeros:RL},Symbol.toStringTag,{value:"Module"}));function dse(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e}function fse(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e[4]=0,e[5]=0,e}function yse(e,t,i,r,a,p,y){return e[0]=t,e[1]=i,e[2]=r,e[3]=a,e[4]=p,e[5]=y,e}function LS(e,t){const i=t[0],r=t[1],a=t[2],p=t[3],y=t[4],g=t[5];let _=i*p-r*a;return _?(_=1/_,e[0]=p*_,e[1]=-r*_,e[2]=-a*_,e[3]=i*_,e[4]=(a*g-p*y)*_,e[5]=(r*y-i*g)*_,e):null}function mse(e){return e[0]*e[3]-e[1]*e[2]}function jL(e,t,i){const r=t[0],a=t[1],p=t[2],y=t[3],g=t[4],_=t[5],T=i[0],I=i[1],A=i[2],P=i[3],N=i[4],D=i[5];return e[0]=r*T+p*I,e[1]=a*T+y*I,e[2]=r*A+p*P,e[3]=a*A+y*P,e[4]=r*N+p*D+g,e[5]=a*N+y*D+_,e}function L2(e,t,i){const r=t[0],a=t[1],p=t[2],y=t[3],g=t[4],_=t[5],T=Math.sin(i),I=Math.cos(i);return e[0]=r*I+p*T,e[1]=a*I+y*T,e[2]=r*-T+p*I,e[3]=a*-T+y*I,e[4]=g,e[5]=_,e}function DS(e,t,i){const r=t[0],a=t[1],p=t[2],y=t[3],g=t[4],_=t[5],T=i[0],I=i[1];return e[0]=r*T,e[1]=a*T,e[2]=p*I,e[3]=y*I,e[4]=g,e[5]=_,e}function s1(e,t,i){const r=t[0],a=t[1],p=t[2],y=t[3],g=t[4],_=t[5],T=i[0],I=i[1];return e[0]=r,e[1]=a,e[2]=p,e[3]=y,e[4]=r*T+p*I+g,e[5]=a*T+y*I+_,e}function FL(e,t){const i=Math.sin(t),r=Math.cos(t);return e[0]=r,e[1]=i,e[2]=-i,e[3]=r,e[4]=0,e[5]=0,e}function zL(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=t[1],e[4]=0,e[5]=0,e}function jS(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e[4]=t[0],e[5]=t[1],e}function gse(e){return"mat2d("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+")"}function vse(e){return Math.sqrt(e[0]**2+e[1]**2+e[2]**2+e[3]**2+e[4]**2+e[5]**2+1)}function wse(e,t,i){return e[0]=t[0]+i[0],e[1]=t[1]+i[1],e[2]=t[2]+i[2],e[3]=t[3]+i[3],e[4]=t[4]+i[4],e[5]=t[5]+i[5],e}function UL(e,t,i){return e[0]=t[0]-i[0],e[1]=t[1]-i[1],e[2]=t[2]-i[2],e[3]=t[3]-i[3],e[4]=t[4]-i[4],e[5]=t[5]-i[5],e}function bse(e,t,i){return e[0]=t[0]*i,e[1]=t[1]*i,e[2]=t[2]*i,e[3]=t[3]*i,e[4]=t[4]*i,e[5]=t[5]*i,e}function _se(e,t,i,r){return e[0]=t[0]+i[0]*r,e[1]=t[1]+i[1]*r,e[2]=t[2]+i[2]*r,e[3]=t[3]+i[3]*r,e[4]=t[4]+i[4]*r,e[5]=t[5]+i[5]*r,e}function Sse(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]}function xse(e,t){const i=e[0],r=e[1],a=e[2],p=e[3],y=e[4],g=e[5],_=t[0],T=t[1],I=t[2],A=t[3],P=t[4],N=t[5],D=Ar();return Math.abs(i-_)<=D*Math.max(1,Math.abs(i),Math.abs(_))&&Math.abs(r-T)<=D*Math.max(1,Math.abs(r),Math.abs(T))&&Math.abs(a-I)<=D*Math.max(1,Math.abs(a),Math.abs(I))&&Math.abs(p-A)<=D*Math.max(1,Math.abs(p),Math.abs(A))&&Math.abs(y-P)<=D*Math.max(1,Math.abs(y),Math.abs(P))&&Math.abs(g-N)<=D*Math.max(1,Math.abs(g),Math.abs(N))}const Tse=jL,Mse=UL;Object.freeze(Object.defineProperty({__proto__:null,add:wse,copy:dse,determinant:mse,equals:xse,exactEquals:Sse,frob:vse,fromRotation:FL,fromScaling:zL,fromTranslation:jS,identity:fse,invert:LS,mul:Tse,multiply:jL,multiplyScalar:bse,multiplyScalarAndAdd:_se,rotate:L2,scale:DS,set:yse,str:gse,sub:Mse,subtract:UL,translate:s1},Symbol.toStringTag,{value:"Module"}));function va(){return[1,0,0,1,0,0]}function $se(e){return[e[0],e[1],e[2],e[3],e[4],e[5]]}function Ese(e,t,i,r,a,p){return[e,t,i,r,a,p]}function Ise(e,t){return new Float64Array(e,t,6)}const Ase=va();Object.freeze(Object.defineProperty({__proto__:null,IDENTITY:Ase,clone:$se,create:va,createView:Ise,fromValues:Ese},Symbol.toStringTag,{value:"Module"}));const Oy={102100:{maxX:20037508342788905e-9,minX:-20037508342788905e-9,plus180Line:new Js({paths:[[[20037508342788905e-9,-20037508342788905e-9],[20037508342788905e-9,20037508342788905e-9]]],spatialReference:qe.WebMercator}),minus180Line:new Js({paths:[[[-20037508342788905e-9,-20037508342788905e-9],[-20037508342788905e-9,20037508342788905e-9]]],spatialReference:qe.WebMercator})},4326:{maxX:180,minX:-180,plus180Line:new Js({paths:[[[180,-180],[180,180]]],spatialReference:qe.WGS84}),minus180Line:new Js({paths:[[[-180,-180],[-180,180]]],spatialReference:qe.WGS84})}};function _h(e,t){return Math.ceil((e-t)/(2*t))}function VL(e,t){const i=O0(e);for(const r of i)for(const a of r)a[0]+=t;return e}function O0(e){return Mh(e)?e.rings:e.paths}function Cse(e,t){return t?{...t,query:{...e??{},...t.query}}:{query:e}}function GL(e){return typeof e=="string"?mr(e):te(e)}function Ose(e,t,i){const r={};for(const a in e){if(a==="declaredClass")continue;const p=e[a];if(p!=null&&typeof p!="function")if(Array.isArray(p))r[a]=p.map(y=>Ose(y));else if(typeof p=="object")if(p.toJSON){const y=p.toJSON(i==null?void 0:i[a]);r[a]=t?y:JSON.stringify(y)}else r[a]=t?p:JSON.stringify(p);else r[a]=p}return r}async function Pse(e,t,i,r){const a=GL(e),p=t[0].spatialReference,y={...r,responseType:"json",query:{...a.query,f:"json",sr:Kg(p),target:JSON.stringify({geometryType:O1(t[0]),geometries:t}),cutter:JSON.stringify(i)}},g=await kt(a.path+"/cut",y),{cutIndexes:_,geometries:T=[]}=g.data;return{cutIndexes:_,geometries:T.map(I=>{const A=Dh(I);return A.spatialReference=p,A})}}function kse(e){return{geometryType:O1(e[0]),geometries:e.map(t=>t.toJSON())}}function BL(e,t,i){const r=AY(t);return e.map(a=>{const p=r.fromJSON(a);return p.spatialReference=i,p})}async function Rse(e,t,i){const r=typeof e=="string"?mr(e):e,a=t[0].spatialReference,p=O1(t[0]),y={...i,query:{...r.query,f:"json",sr:Kg(a),geometries:JSON.stringify(kse(t))}},{data:g}=await kt(r.path+"/simplify",y);return BL(g.geometries,p,a)}const qL=()=>ye.getLogger("esri.geometry.support.normalizeUtils");function Nse(e){return e.type==="polygon"}function Lse(e){return e[0].type==="polygon"}function Dse(e){return e[0].type==="polyline"}function X8(e){const t=[];let i=0,r=0;for(let a=0;a<e.length;a++){const p=e[a];let y=null;for(let g=0;g<p.length;g++)y=p[g],t.push(y),g===0?(i=y[0],r=i):(i=Math.min(i,y[0]),r=Math.max(r,y[0]));y&&t.push([(i+r)/2,0])}return t}function jse(e,t){if(!(e instanceof Js||e instanceof en)){const a="straightLineDensify: the input geometry is neither polyline nor polygon";throw qL().error(a),new Y(a)}const i=O0(e),r=[];for(const a of i){const p=[];r.push(p),p.push([a[0][0],a[0][1]]);for(let y=0;y<a.length-1;y++){const g=a[y][0],_=a[y][1],T=a[y+1][0],I=a[y+1][1],A=Math.sqrt((T-g)*(T-g)+(I-_)*(I-_)),P=(I-_)/A,N=(T-g)/A,D=A/t;if(D>1){for(let ee=1;ee<=D-1;ee++){const X=ee*t,ie=N*X+g,oe=P*X+_;p.push([ie,oe])}const z=(A+Math.floor(D-1)*t)/2,q=N*z+g,J=P*z+_;p.push([q,J])}p.push([T,I])}}return Nse(e)?new en({rings:r,spatialReference:e.spatialReference}):new Js({paths:r,spatialReference:e.spatialReference})}function Q8(e,t,i){if(t){const r=jse(e,1e6);e=ap(r,!0)}return i&&(e=VL(e,i)),e}function eM(e,t,i){if(Array.isArray(e)){const r=e[0];if(r>t){const a=_h(r,t);e[0]=r+a*(-2*t)}else if(r<i){const a=_h(r,i);e[0]=r+a*(-2*i)}}else{const r=e.x;if(r>t){const a=_h(r,t);e=e.clone().offset(a*(-2*t),0)}else if(r<i){const a=_h(r,i);e=e.clone().offset(a*(-2*i),0)}}return e}function Fse(e,t){let i=-1;for(let r=0;r<t.cutIndexes.length;r++){const a=t.cutIndexes[r],p=t.geometries[r],y=O0(p);for(let g=0;g<y.length;g++){const _=y[g];_.some(T=>{if(T[0]<180)return!0;{let I=0;for(let P=0;P<_.length;P++){const N=_[P][0];I=N>I?N:I}I=Number(I.toFixed(9));const A=-360*_h(I,180);for(let P=0;P<_.length;P++){const N=p.getPoint(g,P);p.setPoint(g,P,N.clone().offset(A,0))}return!0}})}if(a===i){if(Lse(e))for(const g of O0(p))e[a]=e[a].addRing(g);else if(Dse(e))for(const g of O0(p))e[a]=e[a].addPath(g)}else i=a,e[a]=p}return e}async function zse(e,t,i){if(!Array.isArray(e))return zse([e],t);t&&typeof t!="string"&&qL().warn("normalizeCentralMeridian()","The url object is deprecated, use the url string instead");const r=typeof t=="string"?t:(t==null?void 0:t.url)??dt.geometryServiceUrl;let a,p,y,g,_,T,I,A,P=0;const N=[],D=[];for(const ie of e)if(ie!=null)if(a||(a=ie.spatialReference,p=Ir(a),y=a.isWebMercator,T=y?102100:4326,g=Oy[T].maxX,_=Oy[T].minX,I=Oy[T].plus180Line,A=Oy[T].minus180Line),p)if(ie.type==="mesh")D.push(ie);else if(ie.type==="point")D.push(eM(ie.clone(),g,_));else if(ie.type==="multipoint"){const oe=ie.clone();oe.points=oe.points.map(ue=>eM(ue,g,_)),D.push(oe)}else if(ie.type==="extent"){const oe=ie.clone()._normalize(!1,!1,p);D.push(oe.rings?new en(oe):oe)}else if(ie.extent){const oe=ie.extent,ue=_h(oe.xmin,_)*(2*g);let ge=ue===0?ie.clone():VL(ie.clone(),ue);oe.offset(ue,0);let{xmin:Se,xmax:Ee}=oe;Se=Number(Se.toFixed(9)),Ee=Number(Ee.toFixed(9)),oe.intersects(I)&&Ee!==g?(P=Ee>P?Ee:P,ge=Q8(ge,y),N.push(ge),D.push("cut")):oe.intersects(A)&&Se!==_?(P=Ee*(2*g)>P?Ee*(2*g):P,ge=Q8(ge,y,360),N.push(ge),D.push("cut")):D.push(ge)}else D.push(ie.clone());else D.push(ie);else D.push(ie);let z=_h(P,g),q=-90;const J=z,ee=new Js;for(;z>0;){const ie=360*z-180;ee.addPath([[ie,q],[ie,-1*q]]),q*=-1,z--}if(N.length>0&&J>0){const ie=Fse(N,await Pse(r,N,ee,i)),oe=[],ue=[];for(let Ee=0;Ee<D.length;Ee++){const Ie=D[Ee];if(Ie!=="cut")ue.push(Ie);else{const ke=ie.shift(),je=e[Ee];je!=null&&je.type==="polygon"&&je.rings&&je.rings.length>1&&ke.rings.length>=je.rings.length?(oe.push(ke),ue.push("simplify")):ue.push(y?zl(ke):ke)}}if(!oe.length)return ue;const ge=await Rse(r,oe,i),Se=[];for(let Ee=0;Ee<ue.length;Ee++){const Ie=ue[Ee];Ie!=="simplify"?Se.push(Ie):Se.push(y?zl(ge.shift()):ge.shift())}return Se}const X=[];for(let ie=0;ie<D.length;ie++){const oe=D[ie];if(oe!=="cut")X.push(oe);else{const ue=N.shift();X.push(y===!0?zl(ue):ue)}}return X}function Use(e){if(!e)return null;const t=e.extent;if(!t)return null;const i=e.spatialReference&&Ir(e.spatialReference);if(!i)return t;const[r,a]=i.valid,p=2*a,{width:y}=t;let g,{xmin:_,xmax:T}=t;if([_,T]=[T,_],e.type==="extent"||y===0||y<=a||y>p||_<r||T>a)return t;switch(e.type){case"polygon":if(!(e.rings.length>1))return t;g=X8(e.rings);break;case"polyline":if(!(e.paths.length>1))return t;g=X8(e.paths);break;case"multipoint":g=e.points}const I=t.clone();for(let A=0;A<g.length;A++){let P=g[A][0];P<0?(P+=a,T=Math.max(P,T)):(P-=a,_=Math.min(P,_))}return I.xmin=_,I.xmax=T,I.width<y?(I.xmin-=a,I.xmax-=a,I):t}function FS(e,t,i){const r=Ir(i);if(r==null)return e;const[a,p]=r.valid,y=2*p;let g=0,_=0;t>p?g=Math.ceil(Math.abs(t-p)/y):t<a&&(g=-Math.ceil(Math.abs(t-a)/y)),e>p?_=Math.ceil(Math.abs(e-p)/y):e<a&&(_=-Math.ceil(Math.abs(e-a)/y));let T=e+(g-_)*y;const I=T-t;return I>p?T-=y:I<a&&(T+=y),T}function W9e(e,t){const i=Ir(t);if(i){const[r,a]=i.valid,p=a-r;if(e<r)for(;e<r;)e+=p;if(e>a)for(;e>a;)e-=p}return e}const HL=96,WL=39.37,Vse=180/Math.PI;function JL(e){return e.wkid?e:e.spatialReference||qe.WGS84}function zS(e,t){return t.type?zi(e,t.x,t.y):Ip(e,t)}function ZL(e){return Ts(e)}function D2(e,t,i=0){let r=e.width,a=e.height;if(i!==0){const g=kl(i),_=Math.abs(Math.cos(g)),T=Math.abs(Math.sin(g));r=e.width*_+e.height*T,a=e.width*T+e.height*_}const p=Math.max(1,t[0]),y=Math.max(1,t[1]);return Math.max(r/p,a/y)*Kse(e.spatialReference)}async function jf(e,t,i,r){var g,_,T;let a,p;if(!e||Array.isArray(e)&&!e.length)return null;if(xe.isCollection(e)&&(e=e.toArray()),Array.isArray(e)&&e.length&&typeof e[0]=="object"){const I=e.every(N=>"attributes"in N),A=e.some(N=>!N.geometry);let P=e;if(I&&A&&t&&t.allLayerViews){const N=new Map;for(const J of e){const ee=J.layer,X=N.get(ee)||[],ie=J.attributes[ee.objectIdField];ie!=null&&X.push(ie),N.set(ee,X)}const D=[];N.forEach((J,ee)=>{var ie;const X=(ie=t.allLayerViews)==null?void 0:ie.find(oe=>oe.layer.id===ee.id);if(X&&"queryFeatures"in X){const oe=ee.createQuery();oe.objectIds=J,oe.returnGeometry=!0,D.push(X.queryFeatures(oe))}});const z=await Promise.all(D),q=[];for(const J of z)if(J&&J.features&&J.features.length)for(const ee of J.features)ee.geometry!=null&&q.push(ee.geometry);P=q}for(const N of P)r=await jf(N,t,i,r);return r}if(Array.isArray(e)&&e.length===2&&typeof e[0]=="number"&&typeof e[1]=="number")a=new Be(e);else if(e instanceof Ia)a=e;else if("geometry"in e){if(e.geometry)a=e.geometry;else if(e.layer){const I=e.layer,A=(g=t.allLayerViews)==null?void 0:g.find(P=>P.layer.id===I.id);if(A&&"queryFeatures"in A){const P=I.createQuery();P.objectIds=[e.attributes[I.objectIdField]],P.returnGeometry=!0;const N=await A.queryFeatures(P);a=(T=(_=N==null?void 0:N.features)==null?void 0:_[0])==null?void 0:T.geometry}}}if(a==null)return null;switch(a.type){case"point":p=new Ct({xmin:a.x,ymin:a.y,xmax:a.x,ymax:a.y,spatialReference:a.spatialReference});break;case"extent":case"multipoint":case"polygon":case"polyline":p=Use(a);break;default:p=a.extent}if(!p)return null;Aa()||Dn(p.spatialReference,i)||await xo();const y=Ca(p,i);if(!y)return null;if(r){const I=y.center,A=I.clone();A.x=FS(I.x,r.center.x,i),A.x!==I.x&&y.centerAt(A),r=r.union(y)}else r=y;return r}function Gse(e){var t;if(e&&(!Array.isArray(e)||typeof e[0]!="number")&&(typeof e=="object"||Array.isArray(e)&&typeof e[0]=="object")){if("layer"in e&&((t=e.layer)==null?void 0:t.minScale)!=null&&e.layer.maxScale!=null){const i=e.layer;return{min:i.minScale,max:i.maxScale}}if(Array.isArray(e)&&e.length&&e.every(i=>"layer"in i)){let i=0,r=0;for(const a of e){const p=a.layer;p!=null&&p.minScale&&p.maxScale&&(i=p.minScale<i?p.minScale:i,r=p.maxScale>r?p.maxScale:r)}return i&&r?{min:i,max:r}:null}}}function tM(e,t){const i=JL(e);return fi(i,t)||i.imageCoordinateSystem||t.imageCoordinateSystem?e:Ca(e,t)}async function Bse(e,t){var q;if(!e||!t)return new Kr({targetGeometry:new Be,scale:0,rotation:0});let i=t.spatialReference;const{constraints:r,padding:a,viewpoint:p,size:y}=t,g=[a?y[0]-a.left-a.right:y[0],a?y[1]-a.top-a.bottom:y[1]];let _=null;e instanceof Kr?_=e:e.viewpoint?_=e.viewpoint:e.target&&e.target.declaredClass==="esri.Viewpoint"&&(_=e.target);let T=null;_!=null&&_.targetGeometry?T=_.targetGeometry:e instanceof Ct?T=e:e instanceof Ia?T=await jf(e,t,i):e&&(T=await jf(e.center,t,i)||await jf(e.target,t,i)||await jf(e,t,i)),!T&&(p!=null&&p.targetGeometry)?T=p.targetGeometry:!T&&t.extent&&(T=t.extent),i||(i=JL(t.spatialReference||t.extent||T)),Aa()||fi(T.spatialReference,i)||Dn(T.spatialReference,i)||await xo();const I=tM(T,i),A="center"in I?I.center:I;t.pickClosestTarget!==!1&&A.type==="point"&&((q=p.targetGeometry)==null?void 0:q.type)==="point"&&(A.x=FS(A.x,p.targetGeometry.x,A.spatialReference));let P=0;_?P=_.rotation:e.hasOwnProperty("rotation")?P=e.rotation:p&&(P=p.rotation);let N=0;N=(_==null?void 0:_.targetGeometry)!=null&&_.targetGeometry.type==="point"?_.scale:"scale"in e&&e.scale?e.scale:"zoom"in e&&e.zoom!==-1&&r&&r.effectiveLODs?r.zoomToScale(e.zoom):Array.isArray(T)||T.type==="point"||T.type==="extent"&&T.width===0&&T.height===0?p.scale:D2(tM(T.extent,i),g,P);const D=Gse(e.target??e);D&&(D.min&&D.min<N?N=D.min:D.max&&D.max>N&&(N=D.max));let z=new Kr({targetGeometry:A,scale:N,rotation:P});return r&&(z=r.fit(z),r.constrainByGeometry(z),r.rotationEnabled||(z.rotation=p.rotation)),z}function yr(e,t){const i=e.targetGeometry,r=t.targetGeometry;return i.x=r.x,i.y=r.y,i.spatialReference=r.spatialReference,e.scale=t.scale,e.rotation=t.rotation,e}function qse(e,t,i){return i?zi(e,.5*(t[0]-i.right+i.left),.5*(t[1]-i.bottom+i.top)):B1(e,t,.5)}const Hse=function(){const e=ri();return function(t,i,r){const a=i.targetGeometry;zS(e,a);const p=.5*bd(i);return t.xmin=e[0]-p*r[0],t.ymin=e[1]-p*r[1],t.xmax=e[0]+p*r[0],t.ymax=e[1]+p*r[1],t.spatialReference=a.spatialReference,t}}();function Wse(e,t,i,r,a){var p;return e_(e,t,i.center),e.scale=D2(i,r),(p=a==null?void 0:a.constraints)==null||p.constrain(e),e}function Jse(e,t,i,r){return GS(e,t,i,r),LS(e,e)}const KL=function(){const e=ri();return function(t,i,r){return NS(t,Yse(t,i),qse(e,i,r))}}(),Zse=function(){const e=va(),t=ri();return function(i,r,a,p){const y=bd(r),g=US(r);return zi(t,y,y),zL(e,t),L2(e,e,g),s1(e,e,KL(t,a,p)),s1(e,e,[0,p.top-p.bottom]),zi(i,e[4],e[5])}}();function bd(e){var t;return e.scale*YL((t=e.targetGeometry)==null?void 0:t.spatialReference)}function YL(e){return ys(e)?1/(ZL(e)*WL*HL):1}function US(e){return Y6(e.rotation)||0}function Kse(e){return ys(e)?ZL(e)*WL*HL:1}function Yse(e,t){return B1(e,t,.5)}const VS=function(){const e=ri(),t=ri(),i=ri();return function(r,a,p,y,g,_){return OL(e,a),B1(t,p,.5*_),zi(i,1/y*_,-1/y*_),jS(r,t),g&&L2(r,r,g),DS(r,r,i),s1(r,r,e),r}}(),GS=function(){const e=ri();return function(t,i,r,a){const p=bd(i),y=US(i);return zS(e,i.targetGeometry),VS(t,e,r,p,y,a)}}(),Xse=function(){const e=ri();return function(t,i,r,a){const p=bd(i);return zS(e,i.targetGeometry),VS(t,e,r,p,0,a)}}();function XL(e){const t=Ir(e);return t?t.valid[1]-t.valid[0]:0}function Qse(e,t){return Math.round(XL(e)/t)}const ene=function(){const e=ri(),t=ri(),i=[0,0,0];return function(r,a,p){r1(e,r,a),Q9(e,e),r1(t,r,p),Q9(t,t),kL(i,e,t);let y=Math.acos(PL(e,t)/(_v(e)*_v(t)))*Vse;return i[2]<0&&(y=-y),isNaN(y)&&(y=0),y}}(),tne=function(){const e=ri();return function(t,i,r,a){const p=t.targetGeometry;return yr(t,i),Zse(e,i,r,a),p.x+=e[0],p.y+=e[1],t}}(),e_=function(e,t,i){yr(e,t);const r=e.targetGeometry;return r.x=i.x,r.y=i.y,r.spatialReference=i.spatialReference,e},ine=function(){const e=ri();return function(t,i,r,a,p){p||(p="center"),NS(e,r,a),B1(e,e,.5);const y=e[0],g=e[1];switch(p){case"center":zi(e,0,0);break;case"left":zi(e,-y,0);break;case"top":zi(e,0,g);break;case"right":zi(e,y,0);break;case"bottom":zi(e,0,-g);break;case"top-left":zi(e,-y,g);break;case"bottom-left":zi(e,-y,-g);break;case"top-right":zi(e,y,g);break;case"bottom-right":zi(e,y,-g)}return j2(t,i,e),t}}();function J9e(e,t,i){return yr(e,t),e.rotation+=i,e}function rne(e,t,i){return yr(e,t),e.rotation=i,e}const sne=function(){const e=ri();return function(t,i,r,a,p){return yr(t,i),isNaN(r)||r===0||(eD(e,a,i,p),t.scale=i.scale*r,tD(e,e,t,p),j2(t,t,zi(e,e[0]-a[0],a[1]-e[1]))),t}}();function iM(e,t,i){return yr(e,t),e.scale=i,e}const QL=function(){const e=ri();return function(t,i,r,a,p,y){return yr(t,i),isNaN(r)||r===0||(eD(e,p,i,y),t.scale=i.scale*r,t.rotation+=a,tD(e,e,t,y),j2(t,t,zi(e,e[0]-p[0],p[1]-e[1]))),t}}(),Z9e=function(){const e=ri(),t=ri();return function(i,r,a,p,y,g,_){return KL(t,g,_),EL(e,y,t),p?QL(i,r,a,p,e,g):sne(i,r,a,e,g)}}(),eD=function(){const e=va();return function(t,i,r,a){return fo(t,i,Jse(e,r,a,1))}}(),tD=function(){const e=va();return function(t,i,r,a){return fo(t,i,GS(e,r,a,1))}}(),j2=function(){const e=ri(),t=va();return function(i,r,a){yr(i,r);const p=bd(r),y=i.targetGeometry;return FL(t,US(r)),DS(t,t,q1(p,p)),fo(e,a,t),y.x+=e[0],y.y+=e[1],i}}();function iD(){const e=new Float32Array(6);return e[0]=1,e[3]=1,e}function nne(e){const t=new Float32Array(6);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t}function one(e,t,i,r,a,p){const y=new Float32Array(6);return y[0]=e,y[1]=t,y[2]=i,y[3]=r,y[4]=a,y[5]=p,y}function ane(e,t){return new Float32Array(e,t,6)}function rD(e,t,i,r){const a=t[r],p=t[r+1];e[r]=i[0]*a+i[2]*p+i[4],e[r+1]=i[1]*a+i[3]*p+i[5]}function lne(e,t,i,r=0,a=0,p=2){const y=a||t.length/p;for(let g=r;g<y;g++)rD(e,t,i,g*p)}Object.freeze(Object.defineProperty({__proto__:null,clone:nne,create:iD,createView:ane,fromValues:one,transform:rD,transformMany:lne},Symbol.toStringTag,{value:"Module"}));function une(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[4],e[4]=t[5],e[5]=t[6],e[6]=t[8],e[7]=t[9],e[8]=t[10],e}function hne(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e}function sD(e,t,i,r,a,p,y,g,_,T){return e[0]=t,e[1]=i,e[2]=r,e[3]=a,e[4]=p,e[5]=y,e[6]=g,e[7]=_,e[8]=T,e}function nD(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e}function cne(e,t){if(e===t){const i=t[1],r=t[2],a=t[5];e[1]=t[3],e[2]=t[6],e[3]=i,e[5]=t[7],e[6]=r,e[7]=a}else e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8];return e}function pne(e,t){const i=t[0],r=t[1],a=t[2],p=t[3],y=t[4],g=t[5],_=t[6],T=t[7],I=t[8],A=I*y-g*T,P=-I*p+g*_,N=T*p-y*_;let D=i*A+r*P+a*N;return D?(D=1/D,e[0]=A*D,e[1]=(-I*r+a*T)*D,e[2]=(g*r-a*y)*D,e[3]=P*D,e[4]=(I*i-a*_)*D,e[5]=(-g*i+a*p)*D,e[6]=N*D,e[7]=(-T*i+r*_)*D,e[8]=(y*i-r*p)*D,e):null}function dne(e,t){const i=t[0],r=t[1],a=t[2],p=t[3],y=t[4],g=t[5],_=t[6],T=t[7],I=t[8];return e[0]=y*I-g*T,e[1]=a*T-r*I,e[2]=r*g-a*y,e[3]=g*_-p*I,e[4]=i*I-a*_,e[5]=a*p-i*g,e[6]=p*T-y*_,e[7]=r*_-i*T,e[8]=i*y-r*p,e}function fne(e){const t=e[0],i=e[1],r=e[2],a=e[3],p=e[4],y=e[5],g=e[6],_=e[7],T=e[8];return t*(T*p-y*_)+i*(-T*a+y*g)+r*(_*a-p*g)}function BS(e,t,i){const r=t[0],a=t[1],p=t[2],y=t[3],g=t[4],_=t[5],T=t[6],I=t[7],A=t[8],P=i[0],N=i[1],D=i[2],z=i[3],q=i[4],J=i[5],ee=i[6],X=i[7],ie=i[8];return e[0]=P*r+N*y+D*T,e[1]=P*a+N*g+D*I,e[2]=P*p+N*_+D*A,e[3]=z*r+q*y+J*T,e[4]=z*a+q*g+J*I,e[5]=z*p+q*_+J*A,e[6]=ee*r+X*y+ie*T,e[7]=ee*a+X*g+ie*I,e[8]=ee*p+X*_+ie*A,e}function t_(e,t,i){const r=t[0],a=t[1],p=t[2],y=t[3],g=t[4],_=t[5],T=t[6],I=t[7],A=t[8],P=i[0],N=i[1];return e[0]=r,e[1]=a,e[2]=p,e[3]=y,e[4]=g,e[5]=_,e[6]=P*r+N*y+T,e[7]=P*a+N*g+I,e[8]=P*p+N*_+A,e}function oD(e,t,i){const r=t[0],a=t[1],p=t[2],y=t[3],g=t[4],_=t[5],T=t[6],I=t[7],A=t[8],P=Math.sin(i),N=Math.cos(i);return e[0]=N*r+P*y,e[1]=N*a+P*g,e[2]=N*p+P*_,e[3]=N*y-P*r,e[4]=N*g-P*a,e[5]=N*_-P*p,e[6]=T,e[7]=I,e[8]=A,e}function yne(e,t,i){const r=i[0],a=i[1],p=i[2];return e[0]=r*t[0],e[1]=r*t[1],e[2]=r*t[2],e[3]=a*t[3],e[4]=a*t[4],e[5]=a*t[5],e[6]=p*t[6],e[7]=p*t[7],e[8]=p*t[8],e}function mne(e,t,i){const r=i[0],a=i[1];return e[0]=r*t[0],e[1]=r*t[1],e[2]=r*t[2],e[3]=a*t[3],e[4]=a*t[4],e[5]=a*t[5],e}function gne(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=t[0],e[7]=t[1],e[8]=1,e}function vne(e,t){const i=Math.sin(t),r=Math.cos(t);return e[0]=r,e[1]=i,e[2]=0,e[3]=-i,e[4]=r,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e}function wne(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=0,e[4]=t[1],e[5]=0,e[6]=0,e[7]=0,e[8]=1,e}function bne(e,t){return e[0]=t[0],e[1]=t[1],e[2]=0,e[3]=t[2],e[4]=t[3],e[5]=0,e[6]=t[4],e[7]=t[5],e[8]=1,e}function _ne(e,t){const i=t[0],r=t[1],a=t[2],p=t[3],y=i+i,g=r+r,_=a+a,T=i*y,I=r*y,A=r*g,P=a*y,N=a*g,D=a*_,z=p*y,q=p*g,J=p*_;return e[0]=1-A-D,e[3]=I-J,e[6]=P+q,e[1]=I+J,e[4]=1-T-D,e[7]=N-z,e[2]=P-q,e[5]=N+z,e[8]=1-T-A,e}function Sne(e,t){const i=t[0],r=t[1],a=t[2],p=t[4],y=t[5],g=t[6],_=t[8],T=t[9],I=t[10],A=I*y-g*T,P=-I*p+g*_,N=T*p-y*_,D=i*A+r*P+a*N;if(!D)return null;const z=1/D;return e[0]=A*z,e[1]=(-I*r+a*T)*z,e[2]=(g*r-a*y)*z,e[3]=P*z,e[4]=(I*i-a*_)*z,e[5]=(-g*i+a*p)*z,e[6]=N*z,e[7]=(-T*i+r*_)*z,e[8]=(y*i-r*p)*z,e}function xne(e,t){const i=t[0],r=t[1],a=t[2],p=t[3],y=t[4],g=t[5],_=t[6],T=t[7],I=t[8],A=t[9],P=t[10],N=t[11],D=t[12],z=t[13],q=t[14],J=t[15],ee=i*g-r*y,X=i*_-a*y,ie=i*T-p*y,oe=r*_-a*g,ue=r*T-p*g,ge=a*T-p*_,Se=I*z-A*D,Ee=I*q-P*D,Ie=I*J-N*D,ke=A*q-P*z,je=A*J-N*z,st=P*J-N*q;let Ve=ee*st-X*je+ie*ke+oe*Ie-ue*Ee+ge*Se;return Ve?(Ve=1/Ve,e[0]=(g*st-_*je+T*ke)*Ve,e[1]=(_*Ie-y*st-T*Ee)*Ve,e[2]=(y*je-g*Ie+T*Se)*Ve,e[3]=(a*je-r*st-p*ke)*Ve,e[4]=(i*st-a*Ie+p*Ee)*Ve,e[5]=(r*Ie-i*je-p*Se)*Ve,e[6]=(z*ge-q*ue+J*oe)*Ve,e[7]=(q*ie-D*ge-J*X)*Ve,e[8]=(D*ue-z*ie+J*ee)*Ve,e):null}function Tne(e,t,i){return e[0]=2/t,e[1]=0,e[2]=0,e[3]=0,e[4]=-2/i,e[5]=0,e[6]=-1,e[7]=1,e[8]=1,e}function Mne(e){return"mat3("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+", "+e[8]+")"}function $ne(e){return Math.sqrt(e[0]**2+e[1]**2+e[2]**2+e[3]**2+e[4]**2+e[5]**2+e[6]**2+e[7]**2+e[8]**2)}function Ene(e,t,i){return e[0]=t[0]+i[0],e[1]=t[1]+i[1],e[2]=t[2]+i[2],e[3]=t[3]+i[3],e[4]=t[4]+i[4],e[5]=t[5]+i[5],e[6]=t[6]+i[6],e[7]=t[7]+i[7],e[8]=t[8]+i[8],e}function aD(e,t,i){return e[0]=t[0]-i[0],e[1]=t[1]-i[1],e[2]=t[2]-i[2],e[3]=t[3]-i[3],e[4]=t[4]-i[4],e[5]=t[5]-i[5],e[6]=t[6]-i[6],e[7]=t[7]-i[7],e[8]=t[8]-i[8],e}function Ine(e,t,i){return e[0]=t[0]*i,e[1]=t[1]*i,e[2]=t[2]*i,e[3]=t[3]*i,e[4]=t[4]*i,e[5]=t[5]*i,e[6]=t[6]*i,e[7]=t[7]*i,e[8]=t[8]*i,e}function Ane(e,t,i,r){return e[0]=t[0]+i[0]*r,e[1]=t[1]+i[1]*r,e[2]=t[2]+i[2]*r,e[3]=t[3]+i[3]*r,e[4]=t[4]+i[4]*r,e[5]=t[5]+i[5]*r,e[6]=t[6]+i[6]*r,e[7]=t[7]+i[7]*r,e[8]=t[8]+i[8]*r,e}function Cne(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]&&e[6]===t[6]&&e[7]===t[7]&&e[8]===t[8]}function One(e,t){const i=e[0],r=e[1],a=e[2],p=e[3],y=e[4],g=e[5],_=e[6],T=e[7],I=e[8],A=t[0],P=t[1],N=t[2],D=t[3],z=t[4],q=t[5],J=t[6],ee=t[7],X=t[8],ie=Ar();return Math.abs(i-A)<=ie*Math.max(1,Math.abs(i),Math.abs(A))&&Math.abs(r-P)<=ie*Math.max(1,Math.abs(r),Math.abs(P))&&Math.abs(a-N)<=ie*Math.max(1,Math.abs(a),Math.abs(N))&&Math.abs(p-D)<=ie*Math.max(1,Math.abs(p),Math.abs(D))&&Math.abs(y-z)<=ie*Math.max(1,Math.abs(y),Math.abs(z))&&Math.abs(g-q)<=ie*Math.max(1,Math.abs(g),Math.abs(q))&&Math.abs(_-J)<=ie*Math.max(1,Math.abs(_),Math.abs(J))&&Math.abs(T-ee)<=ie*Math.max(1,Math.abs(T),Math.abs(ee))&&Math.abs(I-X)<=ie*Math.max(1,Math.abs(I),Math.abs(X))}function Pne(e){const t=Ar(),i=e[0],r=e[1],a=e[2],p=e[3],y=e[4],g=e[5],_=e[6],T=e[7],I=e[8];return Math.abs(1-(i*i+p*p+_*_))<=t&&Math.abs(1-(r*r+y*y+T*T))<=t&&Math.abs(1-(a*a+g*g+I*I))<=t}const kne=BS,Rne=aD;Object.freeze(Object.defineProperty({__proto__:null,add:Ene,adjoint:dne,copy:hne,determinant:fne,equals:One,exactEquals:Cne,frob:$ne,fromMat2d:bne,fromMat4:une,fromQuat:_ne,fromRotation:vne,fromScaling:wne,fromTranslation:gne,identity:nD,invert:pne,isOrthoNormal:Pne,mul:kne,multiply:BS,multiplyScalar:Ine,multiplyScalarAndAdd:Ane,normalFromMat4:xne,normalFromMat4Legacy:Sne,projection:Tne,rotate:oD,scale:yne,scaleByVec2:mne,set:sD,str:Mne,sub:Rne,subtract:aD,translate:t_,transpose:cne},Symbol.toStringTag,{value:"Module"}));function Ym(){const e=new Float32Array(9);return e[0]=1,e[4]=1,e[8]=1,e}function Nne(e){const t=new Float32Array(9);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t}function Lne(e,t,i,r,a,p,y,g,_){const T=new Float32Array(9);return T[0]=e,T[1]=t,T[2]=i,T[3]=r,T[4]=a,T[5]=p,T[6]=y,T[7]=g,T[8]=_,T}function Dne(e,t){return new Float32Array(e,t,9)}Object.freeze(Object.defineProperty({__proto__:null,clone:Nne,create:Ym,createView:Dne,fromValues:Lne},Symbol.toStringTag,{value:"Module"}));function lD(){return new Float32Array(2)}function jne(e){const t=new Float32Array(2);return t[0]=e[0],t[1]=e[1],t}function Qp(e,t){const i=new Float32Array(2);return i[0]=e,i[1]=t,i}function Fne(e,t){return new Float32Array(e,t,2)}function uD(){return lD()}function hD(){return Qp(1,1)}function cD(){return Qp(1,0)}function pD(){return Qp(0,1)}const zne=uD(),Une=hD(),Vne=cD(),Gne=pD();Object.freeze(Object.defineProperty({__proto__:null,ONES:Une,UNIT_X:Vne,UNIT_Y:Gne,ZEROS:zne,clone:jne,create:lD,createView:Fne,fromValues:Qp,ones:hD,unitX:cD,unitY:pD,zeros:uD},Symbol.toStringTag,{value:"Module"}));function Bne(e){return e instanceof Float32Array&&e.length>=2}function qne(e){return Array.isArray(e)&&e.length>=2}function db(e){return Bne(e)||qne(e)}var i_;const ko=[0,0];let Jo=i_=class extends he{constructor(e){super(e),this._viewpoint2D={center:ri(),rotation:0,scale:0,spatialReference:void 0},this.center=[0,0],this.extent=new Ct,this.id=0,this.inverseTransform=va(),this.resolution=0,this.rotation=0,this.scale=0,this.transform=va(),this.transformNoRotation=va(),this.displayMat3=Ym(),this.displayViewMat3=Ym(),this.viewMat3=Ym(),this.viewMat2d=iD(),this.worldScreenWidth=0,this.size=[0,0]}set pixelRatio(e){this._set("pixelRatio",e),this._update()}set size(e){this._set("size",e),this._update()}set viewpoint(e){if(e){const t=this._viewpoint2D,i=e.targetGeometry;t.center[0]=i.x,t.center[1]=i.y,t.rotation=e.rotation,t.scale=e.scale,t.spatialReference=i.spatialReference}this._update()}get visibleArea(){const[e,t]=this.size;return[this.toMap([0,0],0,0),this.toMap([0,0],0,t),this.toMap([0,0],e,t),this.toMap([0,0],e,0)]}copy(e){const t=this.size,i=this.viewpoint;return i&&t?(this.viewpoint=yr(i,e.viewpoint),this._set("size",Ip(t,e.size))):(this.viewpoint=e.viewpoint.clone(),this._set("size",[e.size[0],e.size[1]])),this._set("pixelRatio",e.pixelRatio),this}clone(){return new i_({size:this.size,viewpoint:this.viewpoint.clone(),pixelRatio:this.pixelRatio})}toMap(e,t,i){return db(t)?fo(e,t,this.inverseTransform):(ko[0]=t,ko[1]=i,fo(e,ko,this.inverseTransform))}toScreen(e,t,i){return db(t)?fo(e,t,this.transform):(ko[0]=t,ko[1]=i,fo(e,ko,this.transform))}toScreenNoRotation(e,t,i){return db(t)?fo(e,t,this.transformNoRotation):(ko[0]=t,ko[1]=i,fo(e,ko,this.transformNoRotation))}wrapMapCoordinate(e,t){Ip(e,t);const[i]=t,[r]=this.center,{extent:a,spatialReference:p}=this;let{xmin:y,xmax:g}=a;if(p.isWrappable){const _=XL(p)/2;y=Math.max(y,r-_),g=Math.min(g,r+_)}return(i<y||i>g)&&(e[0]=FS(i,r,p)),e}getScreenTransform(e,t){const{center:i}=this._viewpoint2D,r=this._get("pixelRatio")||1,a=this._get("size");return VS(e,i,a,t,0,r),e}_update(){const{center:e,spatialReference:t,scale:i,rotation:r}=this._viewpoint2D,a=this._get("pixelRatio")||1,p=this._get("size"),y=new Kr({targetGeometry:new Be(e[0],e[1],t),scale:i,rotation:r});if(this._set("viewpoint",y),!p||!t||!i)return;this.resolution=bd(y),this.rotation=r,this.scale=i,this.spatialReference=t,Ip(this.center,e);const g=p[0]!==0?2/p[0]:0,_=p[1]!==0?-2/p[1]:0;sD(this.displayMat3,g,0,0,0,_,0,-1,1,1);const T=nD(this.viewMat3),I=Qp(p[0]/2,p[1]/2),A=Qp(-p[0]/2,-p[1]/2),P=Y6(r);t_(T,T,I),oD(T,T,P),t_(T,T,A),BS(this.displayViewMat3,this.displayMat3,T);const N=jS(this.viewMat2d,I);return L2(N,N,P),s1(N,N,A),Hse(this.extent,y,p),GS(this.transform,y,p,a),LS(this.inverseTransform,this.transform),Xse(this.transformNoRotation,y,p,a),this.worldScreenWidth=Qse(this.spatialReference,this.resolution),this._set("id",this.id+1),this.notifyChange("visibleArea"),this}};v([S({readOnly:!0})],Jo.prototype,"id",void 0),v([S({value:1,json:{write:!0}})],Jo.prototype,"pixelRatio",null),v([S({json:{write:!0}})],Jo.prototype,"size",null),v([S()],Jo.prototype,"spatialReference",void 0),v([S({type:Kr,json:{write:!0}})],Jo.prototype,"viewpoint",null),v([S({readOnly:!0})],Jo.prototype,"visibleArea",null),Jo=i_=v([H("esri.views.2d.ViewState")],Jo);const rM=Jo;var r_,s_;let fa=r_=class extends Ae{constructor(){super(...arguments),this.left=0,this.top=0,this.right=0,this.bottom=0}clone(){return new r_({left:this.left,top:this.top,right:this.right,bottom:this.bottom})}};v([S()],fa.prototype,"left",void 0),v([S()],fa.prototype,"top",void 0),v([S()],fa.prototype,"right",void 0),v([S()],fa.prototype,"bottom",void 0),fa=r_=v([H("esri.views.2d.PaddedViewState.Padding")],fa);let Nc=s_=class extends rM{constructor(...e){super(...e),this.paddedViewState=new rM,this._updateContent=(()=>{const t=ri();return()=>{const i=this._get("size"),r=this._get("padding");if(!i||!r)return;const a=this.paddedViewState;zi(t,r.left+r.right,r.top+r.bottom),r1(t,i,t),Ip(a.size,t);const p=a.viewpoint;p&&(this.viewpoint=p)}})(),this.addHandles(Le(()=>[this.size,this.padding],()=>this._updateContent(),So)),this.padding=new fa,this.size=[0,0]}set padding(e){this._set("padding",e||new fa)}set viewpoint(e){if(e){this.paddedViewState.viewpoint=e;let t=e;const i=this._get("padding");i&&(t=tne(e.clone(),e,this._get("size"),i));const{targetGeometry:r,rotation:a,scale:p}=t,{x:y,y:g,spatialReference:_}=r,T=this._viewpoint2D;T.center[0]=y,T.center[1]=g,T.rotation=a,T.scale=p,T.spatialReference=_,this._update()}}clone(){return new s_({padding:this.padding.clone(),size:this.size.slice(),viewpoint:this.paddedViewState.viewpoint.clone(),pixelRatio:this.pixelRatio})}};v([S()],Nc.prototype,"paddedViewState",void 0),v([S({type:fa})],Nc.prototype,"padding",null),v([S()],Nc.prototype,"viewpoint",null),Nc=s_=v([H("esri.views.2d.PaddedViewState")],Nc);const qS=Nc;var Xi;(function(e){e[e.ANIMATING=0]="ANIMATING",e[e.INTERACTING=1]="INTERACTING",e[e.IDLE=2]="IDLE"})(Xi||(Xi={}));const dD=Symbol("Yield");let Hne=class{constructor(){this._tasks=new Array,this._runningTasks=Kp(0)}get length(){return this._tasks.length}get running(){return this._runningTasks.value>0}destroy(){this.cancelAll()}runTask(t){if(this.length===0)return dD;for(;!t.done&&this._process(t);)t.madeProgress()}push(t,i,r){return++this._runningTasks.value,new Promise((a,p)=>this._tasks.push(new sM(a,p,t,i,r))).finally(()=>--this._runningTasks.value)}unshift(t,i,r){return++this._runningTasks.value,new Promise((a,p)=>this._tasks.unshift(new sM(a,p,t,i,r))).finally(()=>--this._runningTasks.value)}_process(t){var r;if(this._tasks.length===0)return!1;const i=this._tasks.shift();try{const a=bs(i.signal);if(a&&!i.abortCallback)i.reject(Lt());else{const p=a?(r=i.abortCallback)==null?void 0:r.call(i,Lt()):i.callback(t);$o(p)?p.then(i.resolve,i.reject):i.resolve(p)}}catch(a){i.reject(a)}return!0}cancelAll(){const t=Lt();for(const i of this._tasks)if(i.abortCallback){const r=i.abortCallback(t);i.resolve(r)}else i.reject(t);this._tasks.length=0}},sM=class{constructor(t,i,r,a=void 0,p=void 0){this.resolve=t,this.reject=i,this.callback=r,this.signal=a,this.abortCallback=p}},Ff=class extends Ae{constructor(){super(...arguments),this.SCHEDULER_LOG_SLOW_TASKS=!1,this.FEATURE_SERVICE_SNAPPING_SOURCE_TILE_TREE_SHOW_TILES=!1}};v([S()],Ff.prototype,"SCHEDULER_LOG_SLOW_TASKS",void 0),v([S()],Ff.prototype,"FEATURE_SERVICE_SNAPPING_SOURCE_TILE_TREE_SHOW_TILES",void 0),Ff=v([H("esri.views.support.debugFlags")],Ff);const Wne=new Ff;function Jne(){return new Sv.Scheduler}var Xe;(function(e){e.RESOURCE_CONTROLLER_IMMEDIATE="immediate",e.RESOURCE_CONTROLLER="schedule",e.SLIDE="slide",e.STREAM_DATA_LOADER="stream loader",e.ELEVATION_QUERY="elevation query",e.TERRAIN_SURFACE="terrain",e.SURFACE_GEOMETRY_UPDATES="surface geometry updates",e.LOD_RENDERER="LoD renderer",e.GRAPHICS_CORE="Graphics3D",e.I3S_CONTROLLER="I3S",e.POINT_CLOUD_LAYER="point cloud",e.FEATURE_TILE_FETCHER="feature fetcher",e.OVERLAY="overlay",e.STAGE="stage",e.GRAPHICS_DECONFLICTOR="graphics deconflictor",e.FILTER_VISIBILITY="Graphics3D filter visibility",e.SCALE_VISIBILITY="Graphics3D scale visibility",e.FRUSTUM_VISIBILITY="Graphics3D frustum visibility",e.POINT_OF_INTEREST_FREQUENT="POI frequent",e.POINT_OF_INTEREST_INFREQUENT="POI infrequent",e.LABELER="labeler",e.FEATURE_QUERY_ENGINE="feature query",e.FEATURE_TILE_TREE="feature tile tree",e.FEATURE_TILE_TREE_ACTIVE="fast feature tile tree",e.ELEVATION_ALIGNMENT="elevation alignment",e.ELEVATION_ALIGNMENT_SCENE="elevation alignment scene",e.TEXT_TEXTURE_ATLAS="text texture atlas",e.TEXTURE_UNLOAD="texture unload",e.LINE_OF_SIGHT_TOOL="line of sight tool",e.LINE_OF_SIGHT_TOOL_INTERACTIVE="interactive line of sight tool",e.ELEVATION_PROFILE="elevation profile",e.SNAPPING="snapping",e.SHADOW_ACCUMULATOR="shadow accumulator",e.CLOUDS_GENERATOR="clouds generator",e.MAPVIEW_FETCH_QUEUE="mapview fetch queue",e.MAPVIEW_LAYERVIEW_UPDATE="mapview layerview update",e.MAPVIEW_VECTOR_TILE_PARSING_QUEUE="mapview vector tile parsing queue",e[e.NONE=0]="NONE",e[e.TEST_PRIO=1]="TEST_PRIO"})(Xe||(Xe={}));const Fs=0,nM=new Map([[Xe.RESOURCE_CONTROLLER_IMMEDIATE,Fs],[Xe.RESOURCE_CONTROLLER,4],[Xe.SLIDE,Fs],[Xe.STREAM_DATA_LOADER,Fs],[Xe.ELEVATION_QUERY,Fs],[Xe.TERRAIN_SURFACE,1],[Xe.SURFACE_GEOMETRY_UPDATES,1],[Xe.LOD_RENDERER,2],[Xe.GRAPHICS_CORE,2],[Xe.I3S_CONTROLLER,2],[Xe.POINT_CLOUD_LAYER,2],[Xe.FEATURE_TILE_FETCHER,2],[Xe.CLOUDS_GENERATOR,2],[Xe.OVERLAY,4],[Xe.STAGE,4],[Xe.GRAPHICS_DECONFLICTOR,4],[Xe.FILTER_VISIBILITY,4],[Xe.SCALE_VISIBILITY,4],[Xe.FRUSTUM_VISIBILITY,4],[Xe.POINT_OF_INTEREST_FREQUENT,6],[Xe.POINT_OF_INTEREST_INFREQUENT,30],[Xe.LABELER,8],[Xe.FEATURE_QUERY_ENGINE,8],[Xe.FEATURE_TILE_TREE,16],[Xe.FEATURE_TILE_TREE_ACTIVE,Fs],[Xe.ELEVATION_ALIGNMENT,12],[Xe.ELEVATION_ALIGNMENT_SCENE,14],[Xe.TEXT_TEXTURE_ATLAS,12],[Xe.TEXTURE_UNLOAD,12],[Xe.LINE_OF_SIGHT_TOOL,16],[Xe.LINE_OF_SIGHT_TOOL_INTERACTIVE,Fs],[Xe.SNAPPING,Fs],[Xe.SHADOW_ACCUMULATOR,30],[Xe.MAPVIEW_FETCH_QUEUE,Fs],[Xe.MAPVIEW_LAYERVIEW_UPDATE,2],[Xe.MAPVIEW_VECTOR_TILE_PARSING_QUEUE,Fs]]);function oM(e){return nM.has(e)?nM.get(e):typeof e=="number"?e:1}const Zne=6.5,aM=1,Kne=30,Yne=1e3/30,Xne=100,lM=.9;var Sv,gu;(function(e){class t{get updating(){return this._updating.value}_updatingChanged(){this._updating.value=this._tasks.some(p=>p.needsUpdate)}constructor(){this._updating=Kp(!0),this._microTaskQueued=!1,this._frameNumber=0,this.performanceInfo={total:new p0("total"),tasks:new Map},this._frameTaskTimes=new Map,this._budget=new r,this._state=Xi.INTERACTING,this._tasks=new xh,this._runQueue=new xh,this._load=0,this._idleStateCallbacks=new xh,this._idleUpdatesStartFired=!1,this._forceTask=!1,this._debug=!1,this._debugHandle=Le(()=>Wne.SCHEDULER_LOG_SLOW_TASKS,p=>this._debug=p,Pi);for(const p of Object.keys(Xe))this.performanceInfo.tasks.set(Xe[p],new p0(Xe[p]))}destroy(){this._tasks.toArray().forEach(p=>p.remove()),this._tasks.clear(),Wt(this._debugHandle),this._microTaskQueued=!1,this._updatingChanged()}taskRunningChanged(p){this._updatingChanged(),p&&this._budget.remaining>0&&!this._microTaskQueued&&(this._microTaskQueued=!0,queueMicrotask(()=>{this._microTaskQueued&&(this._microTaskQueued=!1,this._budget.remaining>0&&this._schedule()&&this._runFrame())}))}registerTask(p,y){const g=new i(this,p,y);return this._tasks.push(g),this._updatingChanged(),this.performanceInfo.tasks.has(p)||this.performanceInfo.tasks.set(p,new p0(p)),g}registerIdleStateCallbacks(p,y){const g={idleBegin:p,idleEnd:y};this._idleStateCallbacks.push(g),this.state===Xi.IDLE&&this._idleUpdatesStartFired&&g.idleBegin();const _=this;return{remove:()=>this._removeIdleStateCallbacks(g),set idleBegin(T){_._idleUpdatesStartFired&&(g.idleEnd(),_._state===Xi.IDLE&&T()),g.idleBegin=T},set idleEnd(T){g.idleEnd=T}}}get load(){return this._load}set state(p){this._state!==p&&(this._state=p,this.state!==Xi.IDLE&&this._idleUpdatesStartFired&&(this._idleUpdatesStartFired=!1,this._idleStateCallbacks.forAll(y=>y.idleEnd())))}get state(){return this._state}frame(p){this._startFrameTaskTimes();const y=this._updateBudget(p);if(y){const g=this._budget.now();this._runFrame(),this._recordFrameTaskTimes(this._budget.now()-g)}else this._recordFrameTaskTimes(0);return y}_updateBudget(p){this._test&&(this._test.usedBudget=0),++this._frameNumber;let y=Zne,g=p.frameDuration,_=aM;switch(this.state){case Xi.IDLE:y=0,g=Math.max(Xne,p.frameDuration),_=Kne;break;case Xi.INTERACTING:g=Math.max(Yne,p.frameDuration);case Xi.ANIMATING:}return g=g-p.elapsedFrameTime-y,this.state!==Xi.IDLE&&g<aM&&!this._forceTask?(this._forceTask=!0,!1):(g=Math.max(g,_),this._budget.reset(g,this.state),this._updateLoad(),this._schedule())}_runFrame(){switch(this._forceTask=!1,this._microTaskQueued=!1,this.state){case Xi.IDLE:this._idleUpdatesStartFired||(this._idleUpdatesStartFired=!0,this._idleStateCallbacks.forAll(p=>p.idleBegin())),this._runIdle();break;case Xi.INTERACTING:this._runInteracting();break;default:this._runAnimating()}this._test&&(this._test.usedBudget=this._budget.elapsed)}stopFrame(){this._budget.reset(0,this._state),this._budget.madeProgress()}_removeIdleStateCallbacks(p){this._idleUpdatesStartFired&&p.idleEnd(),this._idleStateCallbacks.removeUnordered(p)}removeTask(p){this._tasks.removeUnordered(p),this._runQueue.removeUnordered(p),this._updatingChanged()}_updateTask(p){this._tasks.forAll(y=>{y.name===p&&y.setPriority(p)})}_getState(p){if(this._runQueue.some(g=>g.name===p))return gu.SCHEDULED;let y=gu.IDLE;return this._tasks.forAll(g=>{g.name===p&&g.needsUpdate&&(g.schedulePriority<=1?y=gu.READY:y!==gu.READY&&(y=gu.WAITING))}),y}_getRuntime(p){let y=0;return this._tasks.forAll(g=>{g.name===p&&(y+=g.runtime)}),y}_resetRuntimes(){this._tasks.forAll(p=>p.runtime=0)}_getRunning(){const p=new Map;if(this._tasks.forAll(g=>{g.needsUpdate&&p.set(g.name,(p.get(g.name)||0)+1)}),p.size===0)return null;let y="";return p.forEach((g,_)=>{y+=g>1?` ${g}x ${_}`:` ${_}`}),y}_runIdle(){this._run()}_runInteracting(){this._run()}_runAnimating(){this._run()}_updateLoad(){const p=this._tasks.reduce((y,g)=>g.needsUpdate?++y:y,0);this._load=this._load*lM+p*(1-lM)}_schedule(){for(this._runQueue.filterInPlace(p=>!!p.needsUpdate||(p.schedulePriority=p.basePriority,!1)),this._tasks.forAll(p=>{p.basePriority===Fs&&p.needsUpdate&&!this._runQueue.includes(p)&&p.blockFrame!==this._frameNumber&&this._runQueue.unshift(p)});this._runQueue.length===0;){let p=!1,y=0;if(this._tasks.forAll(g=>{g.needsUpdate&&g.schedulePriority!==0&&g.basePriority!==Fs&&g.blockFrame!==this._frameNumber&&(p=!0,y=Math.max(y,g.basePriority),g.schedulePriority===1?(g.schedulePriority=0,this._runQueue.push(g)):--g.schedulePriority)}),!p)return this._updatingChanged(),!1}return this._updatingChanged(),!0}_run(){do for(;this._runQueue.length>0;){const p=this._budget.now(),y=this._runQueue.pop();this._budget.resetProgress();try{y.task.runTask(this._budget)===dD&&(y.blockFrame=this._frameNumber)}catch(_){ye.getLogger("esri.views.support.Scheduler").error(`Exception in task "${y.name}"`,_),y.blockFrame=this._frameNumber}!this._budget.hasProgressed&&y.blockFrame!==this._frameNumber&&y.needsUpdate&&(y.name,Xe.I3S_CONTROLLER,y.blockFrame=this._frameNumber),y.schedulePriority=y.basePriority;const g=this._budget.now()-p;if(y.runtime+=g,this._frameTaskTimes.set(y.priority,this._frameTaskTimes.get(y.priority)+g),this._budget.remaining<=0)return void this._updatingChanged()}while(this._schedule());this._updatingChanged()}_startFrameTaskTimes(){for(const p of Object.keys(Xe))this._frameTaskTimes.set(Xe[p],0)}_recordFrameTaskTimes(p){this._frameTaskTimes.forEach((y,g)=>this.performanceInfo.tasks.get(g).push(y)),this.performanceInfo.total.push(p)}get test(){return this._test}}e.Scheduler=t;class i{get task(){return this._task.value}get updating(){return this._queue.running}constructor(p,y,g){this._scheduler=p,this.name=y,this.blockFrame=0,this.runtime=0,this._queue=new Hne,this._handles=new rd,this._basePriority=oM(y),this.schedulePriority=this._basePriority,this._task=Kp(g??this._queue),this._handles.add(gr(()=>this.task.running,_=>p.taskRunningChanged(_)))}remove(){this.processQueue(fD),this._scheduler.removeTask(this),this.schedule=uM.schedule,this.reschedule=uM.reschedule,this._handles.destroy()}get basePriority(){return this._basePriority}setPriority(p){if(this.name===p)return;this.name=p;const y=oM(p);this._basePriority!==Fs&&this.schedulePriority===0||(this.schedulePriority=y),this._basePriority=y}get priority(){return this.name}set priority(p){this.setPriority(p)}get needsUpdate(){return this.updating||this.task.running}schedule(p,y,g){return this._queue.push(p,y,g)}reschedule(p,y,g){return this._queue.unshift(p,y,g)}processQueue(p){return this._queue.runTask(p)}}class r{constructor(){this._begin=typeof performance<"u"?performance.now():0,this._budget=0,this._state=Xi.IDLE,this._done=!1,this._progressed=!1,this._enabled=!0}run(p){return!this.done&&(p()===!0&&this.madeProgress(),!0)}get done(){return this._done}get budget(){return this._budget}madeProgress(){return this._progressed=!0,this._done=this.elapsed>=this._budget&&this._enabled,this._done}get state(){return this._state}get enabled(){return this._enabled}set enabled(p){this._enabled=p}reset(p,y){this._begin=this.now(),this._budget=p,this._state=y,this.resetProgress()}get remaining(){return Math.max(this._budget-this.elapsed,0)}now(){return performance.now()}get elapsed(){return this.now()-this._begin}resetProgress(){this._progressed=!1,this._done=!1}get hasProgressed(){return this._progressed}}e.Budget=r})(Sv||(Sv={})),function(e){e.SCHEDULED="s",e.READY="r",e.WAITING="w",e.IDLE="i"}(gu||(gu={}));const fD=(()=>{const e=new Sv.Budget;return e.enabled=!1,e})();let Qne=class{remove(){}processQueue(){}schedule(t,i,r){try{if(bs(i)){const a=Lt();return r?Promise.resolve(r(a)):Promise.reject(a)}return p3(t(fD))}catch(a){return Promise.reject(a)}}reschedule(t,i,r){return this.schedule(t,i,r)}};const uM=new Qne;let eoe=class{constructor(t){this.view=t,this._stationaryHandle=null,this._frameTaskHandle=null,this._updateParameters=null,this._updateRequested=!1,this._scheduler=Jne(),this._schedulerHandle=gr(()=>this._scheduler.updating,()=>this.requestFrame()),this.stationary=!0,this.prepare=()=>{var i;this._updateParameters&&(this._updateParameters.state=this.view.state,this._updateParameters.stationary=this.view.stationary,this._updateParameters.pixelRatio=window.devicePixelRatio,this._updateParameters.renderingOptions=this.view.renderingOptions,this._updateParameters.targetState.copy(this.view.state),((i=this.view.animation)==null?void 0:i.target)==null||$o(this.view.animation.target)||(this._updateParameters.targetState.viewpoint=this.view.animation.target))},this.update=i=>{var g,_,T;if(this._updateRequested=!1,(g=this.view)==null?void 0:g.destroyed)return;const{allLayerViews:r,graphicsView:a,labelManager:p,state:{id:y}}=this.view;r==null||r.forEach(this._updateLayerView,this),p!=null&&(p.lastUpdateId!==y&&(p.viewChange(),p.lastUpdateId=y),p.updateRequested&&p.processUpdate(this._updateParameters)),a!=null&&(a.lastUpdateId!==y&&(a.viewChange(),a.lastUpdateId=y),a.updateRequested&&a.processUpdate(this._updateParameters)),(_=this.view.graphicsTileStore)==null||_.setViewState(this._updateParameters.state),this.view.animation?this._scheduler.state=Xi.ANIMATING:this.view.interacting?this._scheduler.state=Xi.INTERACTING:this._scheduler.state=Xi.IDLE,this._scheduler.frame(i)||this._updateRequested||this._scheduler.state!==Xi.IDLE||((T=this._frameTaskHandle)==null||T.pause())}}destroy(){this.stop(),this._schedulerHandle.remove(),this._scheduler.destroy()}get scheduler(){return this._scheduler}start(){if(this._frameTaskHandle)return;const t=this.view;this.stationary=t.stationary,this._updateParameters={state:t.state,targetState:new qS,pixelRatio:window.devicePixelRatio,stationary:this.stationary,renderingOptions:t.renderingOptions},this._stationaryHandle=Le(()=>t.stationary,i=>{this.stationary=i,this.requestFrame()}),this._frameTaskHandle=Dp(this),this.requestUpdate()}stop(){var t;this._frameTaskHandle&&(this._updateRequested=!1,(t=this._stationaryHandle)==null||t.remove(),this._frameTaskHandle.remove(),this._updateParameters=this._stationaryHandle=this._frameTaskHandle=null,this.stationary=!0)}requestUpdate(){this._updateRequested||(this._updateRequested=!0,this.requestFrame())}requestFrame(){this._frameTaskHandle&&this._frameTaskHandle.resume()}_updateLayerView(t){var a;if(!t.attached)return void this.requestUpdate();const i=this.view.state,r=t.lastUpdateId;r!=null&&(this.stationary||t.moving)||(t.moving=!0),r!==i.id&&t.viewChange(),this.stationary&&t.moving&&(t.moving=!1,t.moveEnd()),t.lastUpdateId=i.id,t.updateRequested&&t.processUpdate(this._updateParameters),"layerViews"in t&&((a=t.layerViews)==null||a.forEach(this._updateLayerView,this))}},cl=class extends hd{constructor(t){super(t),this.state="running",this.target=null,this._resolver=null}initialize(){this._resolver=_s(),this.addResolvingPromise(this._resolver.promise)}get done(){return this.state==="finished"||this.state==="stopped"}stop(){var t;this.state!=="stopped"&&this.state!=="finished"&&(this._set("state","stopped"),(t=this._resolver)==null||t.reject(new Y("ViewAnimation stopped")))}finish(){var t;this.state!=="stopped"&&this.state!=="finished"&&(this._set("state","finished"),(t=this._resolver)==null||t.resolve())}update(t,i){i||(i=$o(t)?"waiting-for-target":"running"),this._set("target",t),this._set("state",i)}};v([S({readOnly:!0})],cl.prototype,"done",null),v([S({readOnly:!0,type:String})],cl.prototype,"state",void 0),v([S()],cl.prototype,"target",void 0),cl=v([H("esri.views.ViewAnimation")],cl),function(e){e.State={RUNNING:"running",STOPPED:"stopped",FINISHED:"finished",WAITING_FOR_TARGET:"waiting-for-target"}}(cl||(cl={}));const n_=cl;let Xm=class extends Ae{constructor(t){super(t),this._gotoTask=null}destroy(){this._gotoTask=null}async goTo(t,i){if(!t)return void ye.getLogger(this).error("#goTo()","target cannot be null or undefined");const r=new n_;this.view.animation=r,await y2(()=>this.view.ready,i);const a={...i,animate:(i==null?void 0:i.animate)??!wL(),animationMode:(i==null?void 0:i.animationMode)??"auto"},{extent:p,spatialReference:y,size:g,viewpoint:_,constraints:T,padding:I,allLayerViews:A}=this.view,P=Bse(t,{extent:p,spatialReference:y,size:g,viewpoint:_,constraints:T,padding:I,allLayerViews:A,pickClosestTarget:(i==null?void 0:i.pickClosestTarget)??!0});return r==null||r.update(P),this._gotoTask={},a.animate?this._gotoAnimated(P,a):this._gotoImmediate(P,a)}_gotoImmediate(t,i){const r=this._gotoTask,a=this.view.animation,p=t.then(y=>{if(At(i),r!==this._gotoTask)throw new Y("view:goto-interrupted","Goto was interrupted");this.view.viewpoint=a.target=y,a.finish()});return this._cancellableGoTo(r,a,p,i)}_gotoAnimated(t,i){const r=this._gotoTask,a=this.view.animation;if(!a)return Promise.resolve();const p=t.then(y=>{if(At(i),r!==this._gotoTask)throw new Y("view:goto-interrupted","Goto was interrupted");return a.update(y),this.view.animationManager.animate(a,this.view.viewpoint,i),a.when().then(()=>{},()=>{})});return this._cancellableGoTo(r,a,p,i)}_cancellableGoTo(t,i,r,a){const p=()=>t===this._gotoTask;return dC(r,a).finally(()=>{p()&&(i.done||i.stop())})}};v([S({constructOnly:!0})],Xm.prototype,"view",void 0),Xm=v([H("esri.views.2d.GoToManager")],Xm);function toe(e,t){const{spatialReference:i}=t,r=[t.x,t.y];let a,p,y,g;const _=[0,0],T=ioe(e);for(let P=0;P<T.length;P++){const N=T[P];for(let D=0;D<N.length-1;D++){KK(_,r,N,D);const z=N2(r,_);(a==null||z<a)&&(a=z,p=[..._],y=P,g=D)}}if(a==null||!p||y==null||g==null)throw new Y("nearest-coordinate:failed","Failed to find the nearest coordinate");const[I,A]=p;return{coordinate:new Be({x:I,y:A,spatialReference:i}),distance:a}}function ioe(e){switch(e.type){case"extent":return[[[e.xmin,e.ymin],[e.xmin,e.ymax],[e.xmax,e.ymax],[e.xmax,e.ymin],[e.xmin,e.ymin]]];case"polygon":return e.rings;case"polyline":return e.paths}}var o_;let fh=o_=class extends md.NumericIdentifiableMixin(Ae){constructor(e){super(e),this.geometry=null,this.spatialReference=null}get normalizedGeometry(){if(this.geometry==null||!this.spatialReference)return null;if(!this.spatialReference.equals(this.geometry.spatialReference))try{return Ca(this.geometry,this.spatialReference)}catch(e){return ye.getLogger(this).error("#constraints.geometry","could not project the geometry to the view's spatial reference",{geometry:this.geometry,spatialReference:this.spatialReference,error:e}),null}return this.geometry}constrain(e,t){if(this.normalizedGeometry==null)return e;const i=e.targetGeometry;if(this.normalizedGeometry.type==="extent"?$1(this.normalizedGeometry,i):C6(this.normalizedGeometry,i))return e;const{coordinate:r}=toe(this.normalizedGeometry,i);return r&&(e.targetGeometry=r),e}clone(){var e,t;return new o_({geometry:(e=this.geometry)==null?void 0:e.clone(),spatialReference:(t=this.spatialReference)==null?void 0:t.clone()})}};v([S({constructOnly:!0})],fh.prototype,"geometry",void 0),v([S({readOnly:!0})],fh.prototype,"normalizedGeometry",null),v([S({constructOnly:!0})],fh.prototype,"spatialReference",void 0),fh=o_=v([H("esri.views.2d.constraints.GeometryConstraint")],fh);var a_;let zf=a_=class extends md.NumericIdentifiableMixin(Ae){constructor(){super(...arguments),this.enabled=!0,this.rotationEnabled=!0}constrain(e,t){return this.enabled&&t&&(this.rotationEnabled||(e.rotation=t.rotation)),e}clone(){return new a_({enabled:this.enabled,rotationEnabled:this.rotationEnabled})}};v([S()],zf.prototype,"enabled",void 0),v([S()],zf.prototype,"rotationEnabled",void 0),zf=a_=v([H("esri.views.2d.constraints.RotationConstraint")],zf);const yD=zf;var l_;let Dr=l_=class extends md.NumericIdentifiableMixin(Ae){constructor(e){super(e),this._lodByScale={},this._scales=[],this.effectiveLODs=null,this.effectiveMinZoom=-1,this.effectiveMaxZoom=-1,this.effectiveMinScale=0,this.effectiveMaxScale=0,this.lods=null,this.minZoom=-1,this.maxZoom=-1,this.minScale=0,this.maxScale=0,this.snapToZoom=!0}initialize(){let e,{lods:t,minScale:i,maxScale:r,minZoom:a,maxZoom:p}=this,y=-1,g=-1,_=!1,T=!1;if(i!==0&&r!==0&&i<r&&([i,r]=[r,i]),!(t!=null&&t.length))return this._set("effectiveMinScale",i),void this._set("effectiveMaxScale",r);t=t.map(I=>I.clone()),t.sort((I,A)=>A.scale-I.scale),t.forEach((I,A)=>I.level=A);for(const I of t)!_&&i>0&&i>=I.scale&&(y=I.level,_=!0),!T&&r>0&&r>=I.scale&&(g=e?e.level:-1,T=!0),e=I;a===-1&&(a=i===0?0:y),p===-1&&(p=r===0?t.length-1:g),a=Math.max(a,0),a=Math.min(a,t.length-1),p=Math.max(p,0),p=Math.min(p,t.length-1),a>p&&([a,p]=[p,a]),i=t[a].scale,r=t[p].scale,t.splice(0,a),t.splice(p-a+1,t.length),t.forEach((I,A)=>{this._lodByScale[I.scale]=I,this._scales[A]=I.scale}),this._set("effectiveLODs",t),this._set("effectiveMinZoom",a),this._set("effectiveMaxZoom",p),this._set("effectiveMinScale",i),this._set("effectiveMaxScale",r)}constrain(e,t){if(t&&e.scale===t.scale)return e;const i=this.effectiveMinScale,r=this.effectiveMaxScale,a=e.targetGeometry,p=t&&t.targetGeometry,y=r!==0&&e.scale<r,g=i!==0&&e.scale>i;if(y||g){const _=g?i:r;if(t&&p){const T=(_-t.scale)/(e.scale-t.scale);a.x=p.x+(a.x-p.x)*T,a.y=p.y+(a.y-p.y)*T}e.scale=_}return this.snapToZoom&&this.effectiveLODs&&(e.scale=this._getClosestScale(e.scale)),e}fit(e){if(!this.effectiveLODs||!this.snapToZoom)return this.constrain(e,null);const t=this.scaleToZoom(e.scale),i=Math.abs(t-Math.floor(t));return e.scale=this.zoomToScale(i>.99?Math.round(t):Math.floor(t)),e}zoomToScale(e){if(!this.effectiveLODs)return 0;e-=this.effectiveMinZoom,e=Math.max(0,e);const t=this._scales;if(e<=0)return t[0];if(e>=t.length)return t[t.length-1];const i=Math.floor(e),r=Math.ceil(e);return t[i]+(e-i)*(t[r]-t[i])}scaleToZoom(e){if(!this.effectiveLODs)return-1;const t=this._scales;let i,r;if(e>=t[0])return this.effectiveMinZoom;if(e<=t[t.length-1])return this.effectiveMaxZoom;for(let a=0;a<t.length-1;a++){if(i=t[a],r=t[a+1],r===e)return a+this.effectiveMinZoom+1;if(i>e&&r<e)return a+this.effectiveMinZoom+1-(e-r)/(i-r)}return-1}snapToClosestScale(e){if(!this.effectiveLODs)return e;const t=this.scaleToZoom(e);return this.zoomToScale(Math.round(t))}snapToNextScale(e,t=.5){if(!this.effectiveLODs)return e*t;const i=Math.round(this.scaleToZoom(e));return this.zoomToScale(i+1)}snapToPreviousScale(e,t=2){if(!this.effectiveLODs)return e*t;const i=Math.round(this.scaleToZoom(e));return this.zoomToScale(i-1)}clone(){return new l_({lods:this.lods,minZoom:this.minZoom,maxZoom:this.maxZoom,minScale:this.minScale,maxScale:this.maxScale})}_getClosestScale(e){return this._lodByScale[e]||(e=this._scales.reduce((t,i)=>Math.abs(i-e)<=Math.abs(t-e)?i:t,this._scales[0])),this._lodByScale[e].scale}};v([S({readOnly:!0})],Dr.prototype,"effectiveLODs",void 0),v([S({readOnly:!0})],Dr.prototype,"effectiveMinZoom",void 0),v([S({readOnly:!0})],Dr.prototype,"effectiveMaxZoom",void 0),v([S({readOnly:!0})],Dr.prototype,"effectiveMinScale",void 0),v([S({readOnly:!0})],Dr.prototype,"effectiveMaxScale",void 0),v([S()],Dr.prototype,"lods",void 0),v([S()],Dr.prototype,"minZoom",void 0),v([S()],Dr.prototype,"maxZoom",void 0),v([S()],Dr.prototype,"minScale",void 0),v([S()],Dr.prototype,"maxScale",void 0),v([S()],Dr.prototype,"snapToZoom",void 0),Dr=l_=v([H("esri.views.2d.constraints.ZoomConstraint")],Dr);const mD=Dr,roe={base:null,key:"type",typeMap:{extent:Ct,polygon:en}};let ai=class extends Ae{constructor(t){super(t),this.lods=null,this.minScale=0,this.maxScale=0,this.minZoom=-1,this.maxZoom=-1,this.rotationEnabled=!0,this.snapToZoom=!0,this.customConstraints=new xe}destroy(){this.view=null}get effectiveLODs(){return this._zoom.effectiveLODs}get effectiveMinScale(){return this._zoom.effectiveMinScale}get effectiveMaxScale(){return this._zoom.effectiveMaxScale}get effectiveMinZoom(){return this._zoom.effectiveMinZoom}get effectiveMaxZoom(){return this._zoom.effectiveMaxZoom}set geometry(t){t?this._set("geometry",t):this._set("geometry",null)}get version(){var t,i,r;return`${(t=this._zoom)==null?void 0:t.uid}/${(i=this._rotation)==null?void 0:i.uid}/${(r=this._geometry)==null?void 0:r.uid}`}get _geometry(){var i,r;const t=this._get("_geometry");return t&&this.geometry===t.geometry&&((i=this.view)==null?void 0:i.constraintsInfo.spatialReference)===t.spatialReference?t:new fh({geometry:this.geometry,spatialReference:(r=this.view)==null?void 0:r.constraintsInfo.spatialReference})}get _rotation(){return new yD({rotationEnabled:this.rotationEnabled})}get _zoom(){var _;const t=this._get("_zoom"),i=this.lods||((_=this.view)==null?void 0:_.constraintsInfo.lods),r=this.minZoom,a=this.maxZoom,p=this.minScale,y=this.maxScale,g=this.snapToZoom;return t&&t.lods===i&&t.minZoom===r&&t.maxZoom===a&&t.minScale===p&&t.maxScale===y&&t.snapToZoom===g?t:new mD({lods:i,minZoom:r,maxZoom:a,minScale:p,maxScale:y,snapToZoom:g})}canZoomInTo(t){const i=this.effectiveMaxScale;return i===0||t>=i}canZoomOutTo(t){const i=this.effectiveMinScale;return i===0||t<=i}constrain(t,i){return this._zoom.constrain(t,i),this._rotation.constrain(t,i),this._geometry.constrain(t,i),this.customConstraints.forEach(r=>r.constrain(t,i)),t}constrainByGeometry(t){return this._geometry.constrain(t),this.customConstraints.forEach(i=>{var r;return(r=i.applyPanConstraint)==null?void 0:r.call(i,t)}),t}fit(t){return this._zoom.fit(t)}zoomToScale(t){return this._zoom.zoomToScale(t)}scaleToZoom(t){return this._zoom.scaleToZoom(t)}snapScale(t){return this._zoom.snapToClosestScale(t)}snapToNextScale(t){return this._zoom.snapToNextScale(t)}snapToPreviousScale(t){return this._zoom.snapToPreviousScale(t)}};v([S({readOnly:!0})],ai.prototype,"effectiveLODs",null),v([S({readOnly:!0})],ai.prototype,"effectiveMinScale",null),v([S({readOnly:!0})],ai.prototype,"effectiveMaxScale",null),v([S({readOnly:!0})],ai.prototype,"effectiveMinZoom",null),v([S({readOnly:!0})],ai.prototype,"effectiveMaxZoom",null),v([S({types:roe,value:null})],ai.prototype,"geometry",null),v([S({type:[Vs]})],ai.prototype,"lods",void 0),v([S()],ai.prototype,"minScale",void 0),v([S()],ai.prototype,"maxScale",void 0),v([S()],ai.prototype,"minZoom",void 0),v([S()],ai.prototype,"maxZoom",void 0),v([S()],ai.prototype,"rotationEnabled",void 0),v([S()],ai.prototype,"snapToZoom",void 0),v([S({type:xe})],ai.prototype,"customConstraints",void 0),v([S()],ai.prototype,"view",void 0),v([S({readOnly:!0})],ai.prototype,"version",null),v([S({type:fh,readOnly:!0})],ai.prototype,"_geometry",null),v([S({type:yD})],ai.prototype,"_rotation",null),v([S({readOnly:!0,type:mD})],ai.prototype,"_zoom",null),ai=v([H("esri.views.2d.MapViewConstraints")],ai);const hM=ai;let ur=class extends Ae{constructor(t){super(t),this.constraints=null,this.ready=!1,this.resizeAlign="center",this.addHandles([Le(()=>{var i;return(i=this.constraints)==null?void 0:i.version},i=>{this.constraints&&i&&this.ready&&(this.state.viewpoint=this.constraints.fit(this.state.paddedViewState.viewpoint))},So)])}get center(){if(!this.ready)return this._get("center");const{center:t,spatialReference:i}=this.state.paddedViewState;return this.state.commitProperty("id"),new Be({x:t[0],y:t[1],spatialReference:i})}set center(t){if(t==null)return;if(!this.ready)return void this._set("center",t);let i;try{i=this._project(t,this.state.spatialReference)}catch(a){return void ye.getLogger(this).error(new Y("mapview:invalid-center","could not project the value in the view's spatial reference",{input:t,error:a}))}const r=this.viewpoint;e_(r,r,i),this.viewpoint=r}get extent(){return this.ready?(this.state.commitProperty("id"),this.state.paddedViewState.extent.clone()):this._get("extent")}set extent(t){if(t==null)return;if(!t.width||!t.height)return void ye.getLogger(this).error(new Y("mapview:invalid-extent","invalid extent size"));if(!this.ready)return this._set("extent",t),this._set("center",void 0),this._set("viewpoint",void 0),this._set("scale",void 0),void this._set("zoom",void 0);let i;try{i=this._project(t,this.state.spatialReference)}catch(a){return void ye.getLogger(this).error(new Y("mapview:invalid-extent","could not project the value in the view's spatial reference",{error:a}))}const r=this.viewpoint;Wse(r,r,i,this.state.size,{constraints:this.constraints}),this.viewpoint=r}get padding(){return this.ready?this.state.padding:this._get("padding")}set padding(t){this.ready?(this.state.padding=t,this._set("padding",this.state.padding)):this._set("padding",t)}get resolution(){return this.ready?(this.state.commitProperty("id"),this.state.resolution):0}get rotation(){return this.ready?(this.state.commitProperty("id"),this.state.rotation):this._get("rotation")}set rotation(t){if(isNaN(t))return;if(!this.ready)return void this._set("rotation",t);const i=this.viewpoint;rne(i,i,t),this.viewpoint=i}get scale(){return this.ready?(this.state.commitProperty("id"),this.state.scale):this._get("scale")}set scale(t){if(!t||isNaN(t))return;if(!this.ready){this._set("scale",t),this._set("zoom",void 0);const r=this._get("extent");return void(r&&(this._set("extent",void 0),this._set("center",r.center)))}const i=this.viewpoint;iM(i,i,t),this.viewpoint=i}get viewpoint(){return this.ready?this.state.paddedViewState.viewpoint.clone():this._get("viewpoint")}set viewpoint(t){var p;if(t==null)return;if(!this.ready)return this._set("viewpoint",t),this._set("extent",void 0),this._set("center",void 0),this._set("zoom",void 0),void this._set("scale",void 0);let i,r;try{i=this._project(t,this.state.spatialReference),!t.scale||isNaN(t.scale)?r=new Y("mapview:invalid-viewpoint",`invalid scale value of ${t.scale}`):t.targetGeometry==null&&(r=new Y("mapview:invalid-viewpoint","geometry not defined"))}catch(y){r=new Y("mapview:invalid-viewpoint","could not project the value in the view's spatial reference",{error:y})}if(r)return void ye.getLogger(this).error(r);this._scaleBeforeChangingSpatialReference=null;const a=new Kr({targetGeometry:new Be,scale:0,rotation:0});yr(a,i),(p=this.constraints)==null||p.constrain(a,this.state.paddedViewState.viewpoint),this.state.viewpoint=a,this._set("viewpoint",a)}get visibleArea(){return this.ready?this.state.visibleArea:null}get zoom(){var t;return this.ready?((t=this.constraints)==null?void 0:t.scaleToZoom(this.scale))??-1:this._get("zoom")}set zoom(t){var a,p;if(!(t>=0))return;if(!this.ready){this._set("zoom",t),this._set("scale",void 0);const y=this._get("extent");return void(y&&(this._set("extent",void 0),this._set("center",y.center)))}const i=((a=this.constraints)==null?void 0:a.zoomToScale(t))??0;if(!i)return void this._set("zoom",-1);const r=this.viewpoint;iM(r,r,i),this.viewpoint=r,this._set("zoom",((p=this.constraints)==null?void 0:p.scaleToZoom(this.scale))??-1)}getUserStartupOptions(t){if(!t[0]&&!t[1])return{center:void 0,rotation:void 0,scale:void 0};const{padding:i,constraints:r}=this,a=this._get("center"),p=this._get("extent"),y=this._get("scale"),g=this._get("rotation"),_=this._get("viewpoint"),T=this._get("zoom"),I=T!=null&&r!=null&&r.zoomToScale(T)||void 0;let A,P,N;const D=_==null?void 0:_.rotation,z=_==null?void 0:_.targetGeometry;(z==null?void 0:z.type)==="extent"?A=z:(z==null?void 0:z.type)==="point"&&(P=z,N=_==null?void 0:_.scale);const q=p??A;return{center:a??P??(q==null?void 0:q.center),rotation:g??D,scale:(y??I??N??(q&&D2(q,[t[0]-i.left-i.right,t[1]-i.top-i.bottom])))||void 0}}startup(t,i,r,a){var y;const p=t.targetGeometry;try{this._project(t,r)}catch(g){ye.getLogger(this).warn(new Ys("mapview:startup-projection-error","projection of initial viewpoint to the view's spatial reference, defaulting to the initial viewpoint.",{center:p.toJSON(),spatialReference:r,error:g})),t.targetGeometry=a||new Be({x:0,y:0,spatialReference:r})}(y=this.constraints)==null||y.fit(t),this._set("state",new qS({padding:this.padding,size:i,viewpoint:t})),this._set("ready",!0)}teardown(){this._set("ready",!1);const{center:[t,i],spatialReference:r,rotation:a,scale:p}=this.state.paddedViewState,y=new Be({x:t,y:i,spatialReference:r});this._set("viewpoint",null),this._set("extent",null),this._set("center",y),this._set("zoom",-1),this._set("rotation",a),this._set("scale",p),this._set("state",null)}changeSpatialReference(t){var _;const i=this.state.paddedViewState.clone();if(this._scaleBeforeChangingSpatialReference==null)this._scaleBeforeChangingSpatialReference=i.scale;else{const T=i.viewpoint.clone();T.scale=this._scaleBeforeChangingSpatialReference,i.viewpoint=T}const r=i.clone(),[a,p]=i.center;let y=null;try{y=this._project(new Be({x:a,y:p,spatialReference:i.spatialReference}),t)}catch(T){x6()||ye.getLogger(this).warn(new Ys("mapview:spatial-reference-change","could not project the view's center to the new spatial reference",{center:y==null?void 0:y.toJSON(),spatialReference:t,error:T}))}y||(y=new Be({x:0,y:0,spatialReference:t}));const g=e_(new Kr({targetGeometry:new Be,scale:0,rotation:0}),i.viewpoint,y);r.viewpoint=g;try{const I=[i.size[0]/2,i.size[1]/2],A=[I[0]+20,I[1]],P=i.toMap([0,0],A),{x:N,y:D}=this._project(new Be({x:P[0],y:P[1],spatialReference:i.spatialReference}),t);P[0]=N,P[1]=D,r.toScreen(P,P);const z=ene(I,P,A),q=Math.hypot(P[0]-I[0],P[1]-I[1])/20;!Number.isFinite(q)||Math.abs(q)>4?(g.rotation=0,g.targetGeometry=new Be({x:0,y:0,spatialReference:t})):(g.scale*=q,g.scale>ne("mapview-srswitch-adjust-rotation-scale-threshold")?g.rotation=0:g.rotation+=Number.isFinite(z)?z:0)}catch{}(_=this._get("constraints"))==null||_.constrain(g,void 0),this._get("state").viewpoint=g}resize(t,i){var y;if(!this.ready)return;const r=this.state;let a=this.state.paddedViewState.viewpoint;const p=this.state.paddedViewState.size.slice();r.size=[t,i],ine(a,a,p,this.state.paddedViewState.size,this.resizeAlign),a=((y=this.constraints)==null?void 0:y.constrain(a,void 0))??a,this.state.viewpoint=a}toMap(t){if(!this.ready)return null;const i=[0,0],[r,a]=this.state.toMap(i,[t.x,t.y]),p=this.state.spatialReference;return new Be({x:r,y:a,spatialReference:p})}toScreen(t,i){if(!this.ready)return null;const r=this._project(t,this.state.spatialReference),a=[r.x,r.y];return(i==null?void 0:i.pickClosestTarget)===!1||this.state.paddedViewState.wrapMapCoordinate(a,a),this.state.toScreen(a,a),Gi(a[0],a[1])}_project(t,i){var p;const r=(t==null?void 0:t.targetGeometry)||t;if(!i)return t;if(!r)return null;if(i.imageCoordinateSystem||(p=r.spatialReference)!=null&&p.imageCoordinateSystem||fi(i,r.spatialReference))return t;const a=Ca(r,i);if(!a)throw new Y("mapview:projection-not-possible","projecting input geometry to target spatial reference returned a null value",{geometry:r,spatialReference:i});return soe(t)?(t.targetGeometry=a,t):a}};function soe(e){return(e==null?void 0:e.declaredClass)==="esri.Viewpoint"}v([S({type:Be})],ur.prototype,"center",null),v([S()],ur.prototype,"constraints",void 0),v([S({type:Ct})],ur.prototype,"extent",null),v([S({value:{top:0,right:0,bottom:0,left:0},cast:e=>({top:0,right:0,bottom:0,left:0,...e})})],ur.prototype,"padding",null),v([S()],ur.prototype,"ready",void 0),v([S()],ur.prototype,"resizeAlign",void 0),v([S({readOnly:!0})],ur.prototype,"resolution",null),v([S({type:Number})],ur.prototype,"rotation",null),v([S({type:Number})],ur.prototype,"scale",null),v([S({readOnly:!0})],ur.prototype,"state",void 0),v([S({type:Kr})],ur.prototype,"viewpoint",null),v([S({readOnly:!0})],ur.prototype,"visibleArea",null),v([S()],ur.prototype,"zoom",null),ur=v([H("esri.views.2d.ViewStateManager")],ur);function gD(e,t){switch(t){case"primary":return e.pointerType==="touch"||e.button===0;case"secondary":return e.pointerType!=="touch"&&e.button===2;case"tertiary":return e.pointerType!=="touch"&&e.button===1}}function vD(e,t){return t.some(i=>gD(e,i))}function cM(e,{dragPrimary:t,dragSecondary:i,dragTertiary:r}){return[{key:"primary",value:t},{key:"secondary",value:i},{key:"tertiary",value:r}].filter(a=>a.value===e).map(a=>a.key)}let pM=class extends ki{constructor(t,i){super(!0),this._view=t,this.registerIncoming("double-click",i,r=>this._handleDoubleClick(r,i))}_handleDoubleClick(t,i){gD(t.data,"primary")&&(t.stopPropagation(),i?this._view.mapViewNavigation.zoomOut([t.data.x,t.data.y]):this._view.mapViewNavigation.zoomIn([t.data.x,t.data.y]))}},noe=class extends ki{constructor(t,i,r){super(!0),this.view=t,this.pointerType=i,this.registerIncoming("double-tap-drag",r,a=>this._handleDoubleTapDrag(a))}_handleDoubleTapDrag(t){const{data:i}=t,{pointerType:r}=i;if(r!==this.pointerType)return;t.stopPropagation();const{action:a,delta:p}=i,{view:y}=this,{mapViewNavigation:g}=y;switch(a){case"begin":{const{scale:_}=y;this._startScale=_,this._currentScale=_,this._previousDelta=p,g.begin();break}case"update":{if(this._previousDelta.y===p.y)return;this._previousDelta=p;const _=1.015**p.y,T=this._startScale*_,I=T/this._currentScale;g.setViewpointImmediate(I),this._currentScale=T;break}case"end":{const{constraints:_}=y,{effectiveLODs:T,snapToZoom:I}=_;if(!I||!T)return void g.end();const A=_.snapScale(this._currentScale),P=(p.y>0?Math.max(A,_.snapToPreviousScale(this._startScale)):Math.min(A,_.snapToNextScale(this._startScale)))/this._currentScale;g.zoom(P).then(()=>{g.end()});break}}}},F2=class{constructor(t){this._callbacks=t,this._currentCount=0,this._callbacks.condition||(this._callbacks.condition=()=>!0)}handle(t){const i=t.data,r=i.pointers.size;switch(i.action){case"start":this._currentCount=r,this._emitStart(t);break;case"added":this._emitEnd(this._previousEvent),this._currentCount=r,this._emitStart(t);break;case"update":this._emitUpdate(t);break;case"removed":this._startEvent&&this._emitEnd(this._previousEvent),this._currentCount=r,this._emitStart(t);break;case"end":this._emitEnd(t),this._currentCount=0}this._previousEvent=t}_emitStart(t){var i,r;this._startEvent=t,(r=(i=this._callbacks).condition)!=null&&r.call(i,this._currentCount,t)&&this._callbacks.start(this._currentCount,t,this._startEvent)}_emitUpdate(t){var i,r;(r=(i=this._callbacks).condition)!=null&&r.call(i,this._currentCount,t)&&this._callbacks.update(this._currentCount,t,this._startEvent)}_emitEnd(t){var i,r;(r=(i=this._callbacks).condition)!=null&&r.call(i,this._currentCount,t)&&this._callbacks.end(this._currentCount,t,this._startEvent),this._startEvent=null}},ooe=class extends ki{constructor(t,i,r){super(!0),this.view=t,this.pointerActions=i,this.registerIncoming("drag",r,a=>this._handleDrag(a)),this.registerIncoming("pointer-down",()=>this.stopMomentumNavigation())}onInstall(t){super.onInstall(t),this._dragEventSeparator=new F2({start:(i,r)=>{this.view.mapViewNavigation.pan.begin(this.view,r.data),r.stopPropagation()},update:(i,r)=>{this.view.mapViewNavigation.pan.update(this.view,r.data),r.stopPropagation()},end:(i,r)=>{this.view.mapViewNavigation.pan.end(this.view,r.data),r.stopPropagation()},condition:(i,r)=>i===1&&vD(r.data,this.pointerActions)})}_handleDrag(t){const i=this.view.mapViewNavigation;i.pinch.zoomMomentum||i.pinch.rotateMomentum?this.stopMomentumNavigation():this._dragEventSeparator.handle(t)}stopMomentumNavigation(){this.view.mapViewNavigation.pan.stopMomentumNavigation()}},aoe=class extends ki{constructor(t,i,r){super(!0),this._view=t,this.pointerActions=i;const a=this._view.mapViewNavigation;this._dragEventSeparator=new F2({start:(p,y)=>{a.rotate.begin(this._view,y.data),y.stopPropagation()},update:(p,y)=>{a.rotate.update(this._view,y.data),y.stopPropagation()},end:(p,y)=>{a.rotate.end(),y.stopPropagation()},condition:(p,y)=>p===1&&vD(y.data,this.pointerActions)}),this.registerIncoming("drag",r,p=>this._dragEventSeparator.handle(p))}};function wD(e){const t=e[0],i=e[1],r=e[2];return Math.sqrt(t*t+i*i+r*r)}function loe(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}function uoe(e,t,i,r){return e[0]=t,e[1]=i,e[2]=r,e}function hoe(e,t,i){return e[0]=t[0]+i[0],e[1]=t[1]+i[1],e[2]=t[2]+i[2],e}function bD(e,t,i){return e[0]=t[0]-i[0],e[1]=t[1]-i[1],e[2]=t[2]-i[2],e}function _D(e,t,i){return e[0]=t[0]*i[0],e[1]=t[1]*i[1],e[2]=t[2]*i[2],e}function SD(e,t,i){return e[0]=t[0]/i[0],e[1]=t[1]/i[1],e[2]=t[2]/i[2],e}function coe(e,t){return e[0]=Math.ceil(t[0]),e[1]=Math.ceil(t[1]),e[2]=Math.ceil(t[2]),e}function poe(e,t){return e[0]=Math.floor(t[0]),e[1]=Math.floor(t[1]),e[2]=Math.floor(t[2]),e}function doe(e,t){return e[0]=Math.abs(t[0]),e[1]=Math.abs(t[1]),e[2]=Math.abs(t[2]),e}function foe(e,t){return e[0]=Math.sign(t[0]),e[1]=Math.sign(t[1]),e[2]=Math.sign(t[2]),e}function yoe(e,t,i){return e[0]=Math.min(t[0],i[0]),e[1]=Math.min(t[1],i[1]),e[2]=Math.min(t[2],i[2]),e}function moe(e,t,i){return e[0]=Math.max(t[0],i[0]),e[1]=Math.max(t[1],i[1]),e[2]=Math.max(t[2],i[2]),e}function goe(e,t=0,i=1){return e[0]=Math.min(Math.max(e[0],t),i),e[1]=Math.min(Math.max(e[1],t),i),e[2]=Math.min(Math.max(e[2],t),i),e}function voe(e,t){return e[0]=Math.round(t[0]),e[1]=Math.round(t[1]),e[2]=Math.round(t[2]),e}function xD(e,t,i){return e[0]=t[0]*i,e[1]=t[1]*i,e[2]=t[2]*i,e}function woe(e,t,i,r){return e[0]=t[0]+i[0]*r,e[1]=t[1]+i[1]*r,e[2]=t[2]+i[2]*r,e}function TD(e,t){const i=t[0]-e[0],r=t[1]-e[1],a=t[2]-e[2];return Math.sqrt(i*i+r*r+a*a)}function MD(e,t){const i=t[0]-e[0],r=t[1]-e[1],a=t[2]-e[2];return i*i+r*r+a*a}function $D(e){const t=e[0],i=e[1],r=e[2];return t*t+i*i+r*r}function boe(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e}function _oe(e,t){return e[0]=1/t[0],e[1]=1/t[1],e[2]=1/t[2],e}function u_(e,t){const i=t[0],r=t[1],a=t[2];let p=i*i+r*r+a*a;return p>0&&(p=1/Math.sqrt(p),e[0]=t[0]*p,e[1]=t[1]*p,e[2]=t[2]*p),e}function ED(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function Soe(e,t,i){const r=t[0],a=t[1],p=t[2],y=i[0],g=i[1],_=i[2];return e[0]=a*_-p*g,e[1]=p*y-r*_,e[2]=r*g-a*y,e}function xoe(e,t,i){const r=t[0],a=t[1],p=t[2],y=i[0],g=i[1],_=i[2],T=a*_-p*g,I=p*y-r*_,A=r*g-a*y,P=Math.sqrt(T*T+I*I+A*A);return e[0]=T/P,e[1]=I/P,e[2]=A/P,e}function Toe(e,t,i,r){const a=t[0],p=t[1],y=t[2];return e[0]=a+r*(i[0]-a),e[1]=p+r*(i[1]-p),e[2]=y+r*(i[2]-y),e}function Moe(e,t,i,r,a,p){const y=p*p,g=y*(2*p-3)+1,_=y*(p-2)+p,T=y*(p-1),I=y*(3-2*p);return e[0]=t[0]*g+i[0]*_+r[0]*T+a[0]*I,e[1]=t[1]*g+i[1]*_+r[1]*T+a[1]*I,e[2]=t[2]*g+i[2]*_+r[2]*T+a[2]*I,e}function $oe(e,t,i,r,a,p){const y=1-p,g=y*y,_=p*p,T=g*y,I=3*p*g,A=3*_*y,P=_*p;return e[0]=t[0]*T+i[0]*I+r[0]*A+a[0]*P,e[1]=t[1]*T+i[1]*I+r[1]*A+a[1]*P,e[2]=t[2]*T+i[2]*I+r[2]*A+a[2]*P,e}function Eoe(e,t=1){const i=g2,r=2*i()*Math.PI,a=2*i()-1,p=Math.sqrt(1-a*a)*t;return e[0]=Math.cos(r)*p,e[1]=Math.sin(r)*p,e[2]=a*t,e}function Ioe(e,t,i){const r=t[0],a=t[1],p=t[2];return e[0]=i[0]*r+i[4]*a+i[8]*p+i[12],e[1]=i[1]*r+i[5]*a+i[9]*p+i[13],e[2]=i[2]*r+i[6]*a+i[10]*p+i[14],e}function Aoe(e,t,i){const r=t[0],a=t[1],p=t[2];return e[0]=r*i[0]+a*i[3]+p*i[6],e[1]=r*i[1]+a*i[4]+p*i[7],e[2]=r*i[2]+a*i[5]+p*i[8],e}function Coe(e,t,i){const r=i[0],a=i[1],p=i[2],y=i[3],g=t[0],_=t[1],T=t[2],I=a*T-p*_,A=p*g-r*T,P=r*_-a*g,N=a*P-p*A,D=p*I-r*P,z=r*A-a*I,q=2*y;return e[0]=g+I*q+2*N,e[1]=_+A*q+2*D,e[2]=T+P*q+2*z,e}function Ooe(e,t,i,r){const a=[],p=[];return a[0]=t[0]-i[0],a[1]=t[1]-i[1],a[2]=t[2]-i[2],p[0]=a[0],p[1]=a[1]*Math.cos(r)-a[2]*Math.sin(r),p[2]=a[1]*Math.sin(r)+a[2]*Math.cos(r),e[0]=p[0]+i[0],e[1]=p[1]+i[1],e[2]=p[2]+i[2],e}function Poe(e,t,i,r){const a=[],p=[];return a[0]=t[0]-i[0],a[1]=t[1]-i[1],a[2]=t[2]-i[2],p[0]=a[2]*Math.sin(r)+a[0]*Math.cos(r),p[1]=a[1],p[2]=a[2]*Math.cos(r)-a[0]*Math.sin(r),e[0]=p[0]+i[0],e[1]=p[1]+i[1],e[2]=p[2]+i[2],e}function koe(e,t,i,r){const a=[],p=[];return a[0]=t[0]-i[0],a[1]=t[1]-i[1],a[2]=t[2]-i[2],p[0]=a[0]*Math.cos(r)-a[1]*Math.sin(r),p[1]=a[0]*Math.sin(r)+a[1]*Math.cos(r),p[2]=a[2],e[0]=p[0]+i[0],e[1]=p[1]+i[1],e[2]=p[2]+i[2],e}function Roe(e,t){u_(dM,e),u_(fM,t);const i=ED(dM,fM);return i>1?0:i<-1?Math.PI:Math.acos(i)}const dM=ou(),fM=ou();function Noe(e){return"vec3("+e[0]+", "+e[1]+", "+e[2]+")"}function Loe(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]}function Doe(e,t){if(e===t)return!0;const i=e[0],r=e[1],a=e[2],p=t[0],y=t[1],g=t[2],_=Ar();return Math.abs(i-p)<=_*Math.max(1,Math.abs(i),Math.abs(p))&&Math.abs(r-y)<=_*Math.max(1,Math.abs(r),Math.abs(y))&&Math.abs(a-g)<=_*Math.max(1,Math.abs(a),Math.abs(g))}function joe(e,t,i){const r=i[0]-t[0],a=i[1]-t[1],p=i[2]-t[2];let y=r*r+a*a+p*p;return y>0?(y=1/Math.sqrt(y),e[0]=r*y,e[1]=a*y,e[2]=p*y,e):(e[0]=0,e[1]=0,e[2]=0,e)}const Foe=bD,zoe=_D,Uoe=SD,Voe=TD,Goe=MD,Boe=wD,qoe=$D;Object.freeze(Object.defineProperty({__proto__:null,abs:doe,add:hoe,angle:Roe,bezier:$oe,ceil:coe,clamp:goe,copy:loe,cross:Soe,crossAndNormalize:xoe,direction:joe,dist:Voe,distance:TD,div:Uoe,divide:SD,dot:ED,equals:Doe,exactEquals:Loe,floor:poe,hermite:Moe,inverse:_oe,len:Boe,length:wD,lerp:Toe,max:moe,min:yoe,mul:zoe,multiply:_D,negate:boe,normalize:u_,random:Eoe,rotateX:Ooe,rotateY:Poe,rotateZ:koe,round:voe,scale:xD,scaleAndAdd:woe,set:uoe,sign:foe,sqrDist:Goe,sqrLen:qoe,squaredDistance:MD,squaredLength:$D,str:Noe,sub:Foe,subtract:bD,transformMat3:Aoe,transformMat4:Ioe,transformQuat:Coe},Symbol.toStringTag,{value:"Module"}));function un(e){let t=e*e;return e<0&&(t*=-1),t}function Hoe(e){return e.translation[0]=0,e.translation[1]=0,e.translation[2]=0,e.heading=0,e.tilt=0,e}function Woe(e,t,i){const r=i,a=e.state,p=e.device,y=t.tiltDirection==="forward-down"?1:-1,g=1;return p.deviceType==="standard"?(r.translation[0]=un(a.axes[0]),r.translation[1]=un(a.axes[1]),r.translation[2]=un(a.buttons[7])-un(a.buttons[6]),r.heading=un(a.axes[2]),r.tilt=un(a.axes[3])):p.deviceType==="spacemouse"&&(r.translation[0]=1.2*un(a.axes[0]),r.translation[1]=1.2*un(a.axes[1]),r.translation[2]=2*-un(a.axes[2]),r.heading=1.2*un(a.axes[5]),r.tilt=1.2*un(a.axes[3])),r.tilt*=y,xD(r.translation,r.translation,g),r}function Joe(e){return e.translation[0]===0&&e.translation[1]===0&&e.translation[2]===0&&e.heading===0&&e.tilt===0&&e.zoom===0}let Zoe=class extends ki{constructor(t){super(!0),this._view=t,this._frameTask=null,this._watchHandles=new rd,this._currentDevice=null,this._transformation={translation:[0,0,0],heading:0,tilt:0,zoom:0},this._handle=this.registerIncoming("gamepad",i=>this._handleGamePadEvent(i)),this._handle.pause()}onInstall(t){super.onInstall(t),this._watchHandles.add([Le(()=>{var i;return(i=this._view.navigation.gamepad)==null?void 0:i.enabled},i=>{i?(this._handle.resume(),this._frameTask||(this._frameTask=Dp({update:r=>this._frameUpdate(r.deltaTime)}))):(this._handle.pause(),this._frameTask&&(this._frameTask.remove(),this._frameTask=null))},Pi)])}onUninstall(){this._watchHandles.removeAll(),this._frameTask&&(this._frameTask.remove(),this._frameTask=null),super.onUninstall()}_handleGamePadEvent(t){var r;const i=this._view.navigation.gamepad.device;i&&t.data.device!==i||this._currentDevice&&this._currentDevice!==t.data.device||(t.data.action==="end"?(this._currentDevice=null,Hoe(this._transformation)):(this._currentDevice=t.data.device,Woe(t.data,this._view.navigation.gamepad,this._transformation)),(r=this._frameTask)==null||r.resume())}_frameUpdate(t){var A;const i=this._transformation;if(Joe(i))return void((A=this._frameTask)==null?void 0:A.pause());const r=this._view.viewpoint.clone(),a=this._view.navigation.gamepad.velocityFactor,p=Yoe*a*t;j2(r,r,[i.translation[0]*p,-i.translation[1]*p]);const y=1+i.translation[2]*Xoe*t,g=this._view.constraints.rotationEnabled?-i.heading*Koe*t:0,_=this._view.size,T=[_[0]/2,_[1]];QL(r,r,y,g,T,_);const I=this._view.constraints.constrain(r,this._view.viewpoint);this._view.viewpoint=I}};const Koe=.06,Yoe=.7,Xoe=6e-4;function ID(e){const t=()=>e(document.visibilityState==="visible");return document.addEventListener("visibilitychange",t),yt(()=>document.removeEventListener("visibilitychange",t))}let Qoe=class extends ki{constructor(t,i,r){super(!0),this.view=t,this.keys=i,this._isSticky=!1,this._pressedKeys=new Set,this._timeout=void 0,this._currentDirection=void 0,this._stickyKeyDuration=200,this._handleKey=a=>{const p=this._keyMap[a.data.key];if(a.modifiers.has("Meta")||a.modifiers.has("Control"))return void this._stopMovement();if(p==null)return;a.stopPropagation(),a.preventDefault();const y=a.type==="key-down";if(this._pressedKeys[y?"add":"delete"](p),y){if(this._direction===p)return;this._direction=p,this._isSticky=!1,this._setTimeout(()=>{this._isSticky&&this._handlePopKey()})}else{const g=this._timeout===void 0,_=this._pressedKeys.size>0;g||_?this._handlePopKey():this._isSticky=!0}},this._handlePopKey=()=>{this._direction=Array.from(this._pressedKeys).pop(),this._direction==null&&this._stopMovement()},this._stopMovement=()=>{this._isSticky=!1,this._direction=void 0,this._pressedKeys.clear(),this._setTimeout(void 0)},this._keyMap={[i.left]:"left",[i.right]:"right",[i.up]:"up",[i.down]:"down"},this.registerIncoming("key-down",r,this._handleKey),this.registerIncoming("key-up",r,this._handleKey),this.registerIncoming("blur",r,this._stopMovement),this._visibilityHandle=ID(a=>a?null:this._stopMovement())}onUninstall(){var t;this._stopMovement(),(t=this._visibilityHandle)==null||t.remove()}get _direction(){return this._currentDirection}set _direction(t){const i=this._currentDirection!=null;if(t!=null){if(i||this.view.mapViewNavigation.begin(),this._currentDirection!==t)switch(t){case"left":this.view.mapViewNavigation.continuousPanLeft();break;case"right":this.view.mapViewNavigation.continuousPanRight();break;case"up":this.view.mapViewNavigation.continuousPanUp();break;case"down":this.view.mapViewNavigation.continuousPanDown()}}else i&&this.view.mapViewNavigation.stop();this._currentDirection=t}_setTimeout(t){clearTimeout(this._timeout),this._timeout=t===void 0?void 0:setTimeout(()=>{this._timeout=void 0,t()},this._stickyKeyDuration)}},eae=class extends ki{constructor(t,i,r){super(!0),this.view=t,this.keys=i,this._keyToDirection=new Map,this._pressed=!1,this._addKeysMapping(i),this.registerIncoming("key-down",r,a=>this._handleKeyDown(a)),this.registerIncoming("key-up",r,a=>this._handleKeyUp(a)),this.registerIncoming("blur",r,()=>this._handleStop()),this._visibilityHandle=ID(a=>a?null:this._handleStop())}onUninstall(){var t;(t=this._visibilityHandle)==null||t.remove(),this._handleStop()}_addKeysMapping(t){this._addKeyMapping(t.clockwise,"clockwise"),this._addKeyMapping(t.counterClockwise,"counterClockwise"),this._addKeyMapping(t.reset,"reset")}_addKeyMapping(t,i){for(const r of t)this._keyToDirection.set(r,i)}_handleKeyDown(t){t.data.repeat||this._handleKey(t,!0)}_handleKeyUp(t){this._handleKey(t,!1)}_handleStop(){this._pressed&&(this._pressed=!1,this.view.mapViewNavigation.stop())}_handleKey(t,i){const r=t.modifiers;if(r.size>0&&!r.has("Shift")||!this.view.constraints.rotationEnabled)return;const a=this._keyToDirection.get(t.data.key);if(this._pressed=a!=null,this._pressed){if(t.preventDefault(),i)switch(this.view.mapViewNavigation.begin(),a){case"clockwise":this.view.mapViewNavigation.continuousRotateClockwise();break;case"counterClockwise":this.view.mapViewNavigation.continuousRotateCounterclockwise();break;case"reset":this.view.mapViewNavigation.resetRotation()}else this._pressed=!1,this.view.mapViewNavigation.stop();t.stopPropagation()}}};var cp;(function(e){e[e.IN=0]="IN",e[e.OUT=1]="OUT"})(cp||(cp={}));let tae=class extends ki{constructor(t,i,r){super(!0),this.view=t,this.keys=i,this._keysToZoomAction={},this.registerIncoming("key-down",r,a=>this._handleKeyDown(a)),i.zoomIn.forEach(a=>this._keysToZoomAction[a]=cp.IN),i.zoomOut.forEach(a=>this._keysToZoomAction[a]=cp.OUT)}_handleKeyDown(t){this._handleKey(t)}_handleKey(t){const i=t.modifiers;if(i.size>0&&!i.has("Shift"))return;const{key:r}=t.data;if(!(r in this._keysToZoomAction))return;const a=this._keysToZoomAction[r],{mapViewNavigation:p}=this.view;let y=null;switch(a){case cp.IN:y=p.zoomIn();break;case cp.OUT:y=p.zoomOut();break;default:return}p.begin(),y.then(()=>p.end()),t.stopPropagation()}};const iae=.6;let rae=class extends ki{constructor(t,i){super(!0),this._view=t,this._canZoom=!0,this.registerIncoming("mouse-wheel",i,r=>this._handleMouseWheel(r))}_handleMouseWheel(t){if(this._view.navigation.actionMap.mouseWheel!=="zoom"||(t.preventDefault(),t.stopPropagation(),!this._canZoom))return;const i=this._view.mapViewNavigation,{x:r,y:a,deltaY:p}=t.data,y=1/iae**(1/60*p),g=i.zoom(y,[r,a]);g&&(this._canZoom=!1,g.catch(()=>{}).then(()=>{this._canZoom=!0,i.end()}))}},sae=class extends ki{constructor(t){super(!0),this.view=t,this.registerIncoming("drag",r=>this._handleDrag(r)),this.registerIncoming("pointer-down",()=>this._stopMomentumNavigation());const i=this.view.mapViewNavigation;this._dragEventSeparator=new F2({start:(r,a)=>{i.pinch.begin(this.view,a.data),a.stopPropagation()},update:(r,a)=>{i.pinch.update(this.view,a.data),a.stopPropagation()},end:(r,a)=>{i.pinch.end(this.view),a.stopPropagation()},condition:r=>r>=2})}_handleDrag(t){this._dragEventSeparator.handle(t)}_stopMomentumNavigation(){this.view.mapViewNavigation.pinch.stopMomentumNavigation()}};function yM(e){const t=e.native;return t?{buttons:t.buttons.map(i=>i.pressed?i.value||1:0),axes:t.axes.map(i=>aae(i,e.axisThreshold))}:{buttons:[],axes:[]}}function nae(e,t){if(e.axes.length!==t.axes.length||e.buttons.length!==t.buttons.length)return!1;for(let i=0;i<e.axes.length;i++)if(e.axes[i]!==t.axes[i])return!1;for(let i=0;i<e.buttons.length;i++)if(e.buttons[i]!==t.buttons[i])return!1;return!0}function oae(e){for(let t=0;t<e.axes.length;t++)if(e.axes[t]!==0)return!1;for(let t=0;t<e.buttons.length;t++)if(e.buttons[t]!==0)return!1;return!0}function aae(e,t){const i=Math.abs(e);return i<t?0:Math.sign(e)*(i-t)/(1-t)}let lae=class{constructor(t,i){this._element=t,this._input=i,this._hasEventListeners=!1,this._onConnectGamepad=p=>{this._connectGamepad(p.gamepad)},this._onDisconnectGamepad=p=>{const y=p.gamepad,g=y.index,_=this._inputDevices[g];_&&(this._emitGamepadEvent(y,yM(_),!1),this._inputDevices.splice(g,1),this._latestUpdate.splice(g,1),this._input.gamepad.devices.remove(_),this.ensurePollingState())},this._frameTask=null,this._latestUpdate=new Array,this._inputDevices=new Array,this._callback=null;const r="getGamepads"in window.navigator,a=window.isSecureContext;this.supported=r&&a,this.supported&&(mM(p=>this._connectGamepad(p)),window.addEventListener("gamepadconnected",this._onConnectGamepad),window.addEventListener("gamepaddisconnected",this._onDisconnectGamepad),this.ensurePollingState())}destroy(){this.hasEventListeners=!1,this.supported&&(window.removeEventListener("gamepadconnected",this._onConnectGamepad),window.removeEventListener("gamepaddisconnected",this._onDisconnectGamepad))}set hasEventListeners(t){this._hasEventListeners!==t&&(this._hasEventListeners=t,this.ensurePollingState())}get _eventsEnabled(){return this.supported&&this._inputDevices.length>0&&this._hasEventListeners}set onEvent(t){this._callback=t}_connectGamepad(t){const i=new kS(t);i.deviceType!=="unknown"&&(this._inputDevices[t.index]=i,this._input.gamepad.devices.add(i)),this.ensurePollingState()}ensurePollingState(){this._eventsEnabled?this._startPolling():this._stopPolling()}_startPolling(){this._frameTask==null&&(this._frameTask=Dp({update:()=>this._readGamepadState()}))}_stopPolling(){this._frameTask!=null&&(this._frameTask.remove(),this._frameTask=null,this._latestUpdate=new Array)}_readGamepadState(){const t=document.hasFocus(),i=this._element.contains(document.activeElement),r=this._input.gamepad.enabledFocusMode==="document"&&!t||this._input.gamepad.enabledFocusMode==="view"&&!i;mM(a=>{const p=this._inputDevices[a.index];if(!p)return;const y=this._latestUpdate[a.index],g=yM(p),_=r||oae(g);y&&(y.timestamp===a.timestamp||!y.active&&_||nae(y.state,g))||this._emitGamepadEvent(a,g,!_)})}_emitGamepadEvent(t,i,r){const a=this._latestUpdate[t.index],p=a&&a.active;if(!p&&!r)return;const y=!p&&r?"start":p&&r?"update":"end";this._latestUpdate[t.index]={timestamp:t.timestamp,state:i,active:r},this._callback&&this._callback({device:this._inputDevices[t.index],state:i,action:y})}};function uae(e){if(!e||!e.connected)return!1;for(let t=0;t<e.axes.length;t++)if(isNaN(e.axes[t]))return!1;return!0}function mM(e){for(const t of navigator.getGamepads())uae(t)&&e(t)}const gM=ne("edge"),hae=ne("chrome"),cae=ne("ff"),pae=ne("safari"),vM="esri-view-surface",hc={touchNone:`${vM}--touch-none`,touchPan:`${vM}--touch-pan`};let AD=class CD{constructor(t,i){this._active={},this._callback=()=>{},this._activePointerCaptures=new Set,this._keyDownState=new Set,this._eventId=1,this._browserTouchPanningEnabled=!1,this._element=t,t.getAttribute("tabindex")||t.setAttribute("tabindex","0"),this._eventHandlers={"key-down":this._handleKey,"key-up":this._handleKey,"pointer-down":this._handlePointer,"pointer-move":this._handlePointerPreventDefault,"pointer-up":this._handlePointerPreventDefault,"pointer-enter":this._handlePointer,"pointer-leave":this._handlePointer,"pointer-cancel":this._handlePointer,"mouse-wheel":this._handleMouseWheel,"pointer-capture-lost":this._handlePointerCaptureLost},this._updateTouchAction(),this._element.addEventListener("keydown",this._preventAltKeyDefault),this._gamepadSource=new lae(t,i),this._gamepadSource.onEvent=r=>this._callback("gamepad",r)}destroy(){this._callback=()=>{},this.activeEvents=null,this._activePointerCaptures.forEach(t=>this._releasePointerCaptureSafe(t)),this._activePointerCaptures.clear(),this._gamepadSource=Ht(this._gamepadSource),this._removeTouchAction(),this._element.removeEventListener("keydown",this._preventAltKeyDefault)}get browserTouchPanningEnabled(){return this._browserTouchPanningEnabled}set browserTouchPanningEnabled(t){this._browserTouchPanningEnabled=t,this._updateTouchAction(),this._updateTouchEventHandling()}set onEventReceived(t){this._callback=t}set activeEvents(t){for(const i in this._active)if(!t||!t.has(i)){const r=this._active[i];this._element.removeEventListener(fb[i],r),delete this._active[i]}t&&t.forEach(i=>{if(!this._active[i]&&fb[i]){const r=(this._eventHandlers[i]||this._handleDefault).bind(this,i);this._element.addEventListener(fb[i],r),this._active[i]=r}}),this._gamepadSource&&(this._gamepadSource.hasEventListeners=(t==null?void 0:t.has("gamepad"))??!1)}setPointerCapture(t,i){i?this._setPointerCaptureSafe(t.pointerId):(this._releasePointerCaptureSafe(t.pointerId),this._activePointerCaptures.delete(t.pointerId))}_updateTouchAction(){this._element.classList.remove(this._browserTouchPanningEnabled?hc.touchNone:hc.touchPan),this._element.classList.add(this._browserTouchPanningEnabled?hc.touchPan:hc.touchNone)}_updateTouchEventHandling(){this._browserTouchPanningEnabled?this._element.addEventListener("touchmove",this._preventMultiTouchPanning):this._element.removeEventListener("touchmove",this._preventMultiTouchPanning)}_removeTouchAction(){this._element.classList.remove(hc.touchNone),this._element.classList.remove(hc.touchPan),this._element.removeEventListener("touchmove",this._preventMultiTouchPanning)}_setPointerCaptureSafe(t){try{this._element.setPointerCapture(t),this._activePointerCaptures.add(t)}catch{}}_releasePointerCaptureSafe(t){try{if(this._element.hasPointerCapture&&!this._element.hasPointerCapture(t))return;this._element.releasePointerCapture(t)}catch{}}_updateNormalizedPointerLikeEvent(t,i){const r=yL(this._element,t);return CD.test.disableSubpixelCoordinates&&(r.x=Math.round(r.x),r.y=Math.round(r.y)),i.x=r.x,i.y=r.y,i}_handleKey(t,i){const{key:r}=i;r&&t==="key-up"&&this._keyDownState.delete(r);const a={native:i,key:r,repeat:!!r&&this._keyDownState.has(r)};r&&t==="key-down"&&this._keyDownState.add(a.key),this._callback(t,a)}_handlePointer(t,i){const r=this._updateNormalizedPointerLikeEvent(i,{native:i,x:0,y:0,pointerType:i.pointerType,button:i.button,buttons:i.buttons,eventId:this._eventId++});this._callback(t,r)}_handlePointerPreventDefault(t,i){const r=this._updateNormalizedPointerLikeEvent(i,{native:i,x:0,y:0,pointerType:i.pointerType,button:i.button,buttons:i.buttons,eventId:this._eventId++});i.preventDefault(),this._callback(t,r)}_getDeltaFromTrackpadOrMouseWheel(t){return t.shiftKey&&ne("mac")&&t.deltaY===0?t.deltaX:t.deltaY}_handleMouseWheel(t,i){let r=this._getDeltaFromTrackpadOrMouseWheel(i);switch(i.deltaMode){case 0:gM&&(r=r/document.documentElement.clientHeight*600);break;case 1:r*=30;break;case 2:r*=900}gM?r*=.7:hae||pae?r*=.6:cae&&(r*=1.375);const a=100,p=Math.abs(r);p>a&&(r=r/p*200/(1+Math.exp(-.02*(p-a))));const y=this._updateNormalizedPointerLikeEvent(i,{native:i,x:0,y:0,deltaY:r});this._callback(t,y)}_handlePointerCaptureLost(t,i){this._activePointerCaptures.delete(i.pointerId),this._handleDefault(t,i)}_handleDefault(t,i){const r={native:i};i.preventDefault(),this._callback(t,r)}_preventAltKeyDefault(t){t.key==="Alt"&&t.preventDefault()}_preventMultiTouchPanning(t){t.touches.length>1&&t.preventDefault()}};AD.test={disableSubpixelCoordinates:!1};const fb={"key-down":"keydown","key-up":"keyup","pointer-down":"pointerdown","pointer-up":"pointerup","pointer-move":"pointermove","mouse-wheel":"wheel","pointer-capture-got":"gotpointercapture","pointer-capture-lost":"lostpointercapture","context-menu":"contextmenu","pointer-enter":"pointerenter","pointer-leave":"pointerleave","pointer-cancel":"pointercancel",focus:"focus",blur:"blur"};let dae=class extends ki{constructor(){super(!0),this.registerIncoming("context-menu",t=>t.data.native.preventDefault())}};const Qi={maximumClickDelay:300,movementUntilMouseDrag:1.5,movementUntilPenDrag:6,movementUntilTouchDrag:6,holdDelay:500,maximumDoubleClickDelay:250,maximumDoubleClickDistance:10,maximumDoubleTouchDelay:350,maximumDoubleTouchDistance:35};function xv(e,t){return Math.abs(t.x-e.x)+Math.abs(t.y-e.y)}function fae(e,t){const i=t.x-e.x,r=t.y-e.y;return Math.sqrt(i*i+r*r)}function yae(e,t){if(t?(t.radius=0,t.center.x=0,t.center.y=0):t={radius:0,center:Gi()},e.length===0)return t;if(e.length===1)return t.center.x=e[0].x,t.center.y=e[0].y,t;if(e.length===2){const[X,ie]=e,[oe,ue]=[ie.x-X.x,ie.y-X.y];return t.radius=Math.sqrt(oe*oe+ue*ue)/2,t.center.x=(X.x+ie.x)/2,t.center.y=(X.y+ie.y)/2,t}let i=0,r=0;for(let X=0;X<e.length;X++)i+=e[X].x,r+=e[X].y;i/=e.length,r/=e.length;const a=e.map(X=>X.x-i),p=e.map(X=>X.y-r);let y=0,g=0,_=0,T=0,I=0,A=0,P=0;for(let X=0;X<a.length;X++){const ie=a[X],oe=p[X],ue=ie*ie,ge=oe*oe;y+=ue,g+=ge,_+=ie*oe,T+=ue*ie,I+=ge*oe,A+=ie*ge,P+=oe*ue}const N=.5*(T+A),D=.5*(I+P),z=y*g-_*_,q=(N*g-D*_)/z,J=(y*D-_*N)/z,ee=Gi(q+i,J+r);return{radius:Math.sqrt(q*q+J*J+(y+g)/e.length),center:ee}}function Ih(e){const{native:t}=e,{pointerId:i,button:r,pointerType:a}=t;return a==="mouse"?`${i}:${r}`:`${a}`}let mae=class extends ki{constructor(t=Qi.maximumDoubleClickDelay,i=Qi.maximumDoubleClickDistance,r=Qi.maximumDoubleTouchDelay,a=Qi.maximumDoubleTouchDistance,p=sd){super(!1),this._maximumDoubleClickDelay=t,this._maximumDoubleClickDistance=i,this._maximumDoubleTouchDelay=r,this._maximumDoubleTouchDistance=a,this._clock=p,this._doubleTapDragReady=!1,this._doubleTapDragActive=!1,this._dragStartCenter=Gi(0,0),this._pointerState=new Map,this._doubleTapDrag=this.registerOutgoing("double-tap-drag"),this._dragEventSeparator=new F2({start:(y,g)=>this._dragStart(y,g),update:(y,g)=>this._dragUpdate(g),end:(y,g)=>this._dragEnd(g)}),this.registerIncoming("drag",y=>this._dragEventSeparator.handle(y)),this.registerIncoming("pointer-down",y=>this._handlePointerDown(y)),this.registerIncoming("pointer-up",()=>this._handlePointerUp())}onUninstall(){this._pointerState.forEach(t=>{t.doubleTapTimeout=Wt(t.doubleTapTimeout)})}get hasPendingInputs(){for(const t of this._pointerState.values())if(t.doubleTapTimeout!=null)return!0;return!1}_clearPointerDown(t){const i=this._pointerState.get(t);i&&(i.doubleTapTimeout=Wt(i.doubleTapTimeout),this._pointerState.delete(t),this.refreshHasPendingInputs())}_dragStart(t,i){if(!this._doubleTapDragReady||t!==1)return;this._doubleTapDragReady=!1,this._doubleTapDragActive=!0;const{data:r,modifiers:a}=i,{center:p}=r;this._dragStartCenter=p;const y=yb("begin",Gi(0,0),r);this._doubleTapDrag.emit(y,void 0,a),i.stopPropagation()}_dragUpdate(t){if(!this._doubleTapDragActive)return;const{data:i,modifiers:r}=t,{center:a}=i,p=yb("update",Gi(a.x-this._dragStartCenter.x,a.y-this._dragStartCenter.y),i);this._doubleTapDrag.emit(p,void 0,r),t.stopPropagation()}_dragEnd(t){if(!this._doubleTapDragActive)return;const{data:i,modifiers:r}=t,{center:a}=i,p=yb("end",Gi(a.x-this._dragStartCenter.x,a.y-this._dragStartCenter.y),i);this._doubleTapDrag.emit(p,void 0,r),this._doubleTapDragActive=!1,t.stopPropagation()}_handlePointerDown(t){const{data:i}=t,r=Ih(i),a=this._pointerState.get(r),{pointerType:p}=i.native;if(a){const y=p==="touch"?this._maximumDoubleTouchDistance:this._maximumDoubleClickDistance;this._clearPointerDown(r),xv(a.event.data,i)>y?this._storePointerDown(t):this._doubleTapDragReady=!0}else this._storePointerDown(t)}_handlePointerUp(){this._doubleTapDragReady=!1}_storePointerDown(t){const{data:i}=t,{pointerType:r}=i.native,a=Ih(i),p=r==="touch"?this._maximumDoubleTouchDelay:this._maximumDoubleClickDelay,y=this._clock.setTimeout(()=>this._clearPointerDown(a),p);this._pointerState.set(a,{event:t,doubleTapTimeout:y}),this.refreshHasPendingInputs()}};function yb(e,t,i){const{button:r,buttons:a,pointer:p,pointers:y,pointerType:g,timestamp:_}=i;return{action:e,delta:t,button:r,buttons:a,pointer:p,pointers:y,pointerType:g,timestamp:_}}let gae=class extends ki{constructor(t){super(!1),this._navigationTouch=t,this._startStateModifiers=new Set,this._activePointerMap=new Map,this._isDragging=!1,this._isCurrentDragSuppressed=!1,this._drag=this.registerOutgoing("drag"),this.registerIncoming("pointer-drag",this._handlePointerDrag.bind(this)),this.registerIncoming("pointer-up",this._handlePointerUpAndPointerLost.bind(this)),this.registerIncoming("pointer-capture-lost",this._handlePointerUpAndPointerLost.bind(this)),this.registerIncoming("pointer-cancel",this._handlePointerUpAndPointerLost.bind(this))}_createPayload(t,i,r,a){return{action:t,pointerType:this._pointerType,button:this._mouseButton,buttons:i.buttons,timestamp:a,pointers:vae(this._activePointerMap),pointer:i,angle:r.angle,radius:r.radius,center:r.center}}_addPointer(t){const i=t.native.pointerId,r=Py(this._activePointerMap).angle,a={event:t,initialAngle:0,lastAngle:0};this._activePointerMap.set(i,a);const p=Qm(a,OD(this._activePointerMap));a.initialAngle=p,a.lastAngle=p,this._updatePointerAngles(r)}_updatePointer(t){if(t&&t.x==null&&t.y==null)return;const i=t.native.pointerId,r=this._activePointerMap.get(i);r?r.event=t:this._addPointer(t)}_removePointer(t){const i=Py(this._activePointerMap).angle;this._activePointerMap.delete(t),this._updatePointerAngles(i)}_updatePointerAngles(t){const i=Py(this._activePointerMap);this._activePointerMap.forEach(r=>{r.initialAngle=Qm(r,i)-t,r.lastAngle=Qm(r,i)-t})}_emitEvent(t,i,r){const a=Py(this._activePointerMap);this._drag.emit(this._createPayload(t,i,a,r),void 0,this._startStateModifiers)}_handlePointerUpAndPointerLost(t){const i=t.data.native.pointerId,r=t.timestamp;this._activePointerMap.get(i)&&(this._activePointerMap.size===1?(this._updatePointer(t.data),!this._isCurrentDragSuppressed&&this._emitEvent("end",t.data,r),this._isDragging=!1,this._isCurrentDragSuppressed=!1,this._removePointer(i)):(this._removePointer(i),this._emitEvent("removed",t.data,t.timestamp)))}_handlePointerDrag(t){const i=t.data,r=i.currentEvent,a=t.timestamp;switch(i.action){case"start":case"update":this._isDragging?this._activePointerMap.has(r.native.pointerId)?(this._updatePointer(r),!this._isCurrentDragSuppressed&&this._emitEvent("update",r,a)):(this._addPointer(r),this._emitEvent("added",r,a),this._isCurrentDragSuppressed=this._isSuppressed):(this._updatePointer(r),this._pointerType=t.data.startEvent.pointerType,this._mouseButton=t.data.startEvent.button,this._startStateModifiers=t.modifiers,this._isDragging=!0,this._isCurrentDragSuppressed=this._isSuppressed,!this._isCurrentDragSuppressed&&this._emitEvent("start",r,a))}}get _isSuppressed(){return!!this._navigationTouch&&!this._navigationTouch.browserTouchPanEnabled&&this._pointerType==="touch"&&this._activePointerMap.size===1}};function OD(e){const t=[];return e.forEach(i=>{t.push(Gi(i.event.x,i.event.y))}),yae(t)}function Py(e){const t=OD(e);let i=0;return e.forEach(r=>{let a=Qm(r,t),p=a-r.lastAngle;for(;p>Math.PI;)p-=2*Math.PI;for(;p<-Math.PI;)p+=2*Math.PI;a=r.lastAngle+p,r.lastAngle=a;const y=a-r.initialAngle;i+=y}),i/=e.size||1,{angle:i,radius:t.radius,center:t.center}}function vae(e){const t=new Map;return e.forEach((i,r)=>t.set(r,i.event)),t}function Qm(e,t){const i=e.event,r=i.x-t.center.x,a=i.y-t.center.y;return Math.atan2(a,r)}var wM;(function(e){e[e.Left=0]="Left",e[e.Middle=1]="Middle",e[e.Right=2]="Right",e[e.Back=3]="Back",e[e.Forward=4]="Forward",e[e.Undefined=-1]="Undefined"})(wM||(wM={}));let wae=class extends ki{constructor(t=Qi.maximumDoubleClickDelay,i=Qi.maximumDoubleClickDistance,r=Qi.maximumDoubleTouchDelay,a=Qi.maximumDoubleTouchDistance,p=sd){super(!1),this._maximumDoubleClickDelay=t,this._maximumDoubleClickDistance=i,this._maximumDoubleTouchDelay=r,this._maximumDoubleTouchDistance=a,this._clock=p,this._pointerState=new Map,this._immediateDoubleClick=this.registerOutgoing("immediate-double-click"),this.registerIncoming("pointer-down",this._handlePointerDown.bind(this)),this.registerIncoming("pointer-up",this._handlePointerUp.bind(this))}onUninstall(){this._pointerState.forEach(t=>{t.immediateDoubleClick&&t.immediateDoubleClick.timeoutHandle.remove()}),super.onUninstall()}_handlePointerDown(t){const i=t.data,r=Ih(i);if(!this._pointerState.has(r)){const a={downButton:i.native.button,x:i.x,y:i.y,immediateDoubleClick:null};this._pointerState.set(r,a),this.startCapturingPointer(i.native)}}_handlePointerUp(t){const i=t.data,r=Ih(i),a=this._pointerState.get(r);if(a&&a.downButton===i.native.button){const p=a.immediateDoubleClick,y=t.data.native.pointerType==="touch"?this._maximumDoubleTouchDistance:this._maximumDoubleClickDistance;p?(p.timeoutHandle.remove(),xv(p,t.data)>y?this._startImmediateDoubleClick(t,a):(this._immediateDoubleClick.emit(t.data,void 0,p.modifiers),this._removeState(i))):xv(a,t.data)>y?this._removeState(i):this._startImmediateDoubleClick(t,a)}}_startImmediateDoubleClick(t,i){const r=t.data.native.pointerType==="touch"?this._maximumDoubleTouchDelay:this._maximumDoubleClickDelay;i.immediateDoubleClick={x:t.data.x,y:t.data.y,modifiers:t.modifiers,timeoutHandle:this._clock.setTimeout(()=>this._removeState(t.data),r)}}_removeState(t){const i=Ih(t);this._pointerState.delete(i),this.stopCapturingPointer(t.native),this.refreshHasPendingInputs()}},bae=class extends ki{constructor(t=Qi.maximumClickDelay,i=Qi.movementUntilMouseDrag,r=Qi.movementUntilPenDrag,a=Qi.movementUntilTouchDrag,p=Qi.holdDelay,y=sd){super(!1),this._maximumClickDelay=t,this._movementUntilMouseDrag=i,this._movementUntilPenDrag=r,this._movementUntilTouchDrag=a,this._holdDelay=p,this._clock=y,this._pointerState=new Map,this._pointerDrag=this.registerOutgoing("pointer-drag"),this._immediateClick=this.registerOutgoing("immediate-click"),this._pointerHold=this.registerOutgoing("hold"),this.registerIncoming("pointer-down",g=>this._handlePointerDown(g)),this.registerIncoming("pointer-up",g=>this._handlePointerLoss(g,"pointer-up")),this.registerIncoming("pointer-capture-lost",g=>this._handlePointerLoss(g,"pointer-capture-lost")),this.registerIncoming("pointer-cancel",g=>this._handlePointerLoss(g,"pointer-cancel")),this._moveHandle=this.registerIncoming("pointer-move",g=>this._handlePointerMove(g)),this._moveHandle.pause()}onUninstall(){this._pointerState.forEach(t=>{t.holdTimeout=Wt(t.holdTimeout)}),super.onUninstall()}_handlePointerDown(t){const i=t.data,r=i.native.pointerId;let a=null;this._pointerState.size===0&&(a=this._clock.setTimeout(()=>{const y=this._pointerState.get(r);if(y){if(!y.isDragging){const g=y.previousEvent;this._pointerHold.emit(g,void 0,t.modifiers),y.holdEmitted=!0}y.holdTimeout=null}},this._holdDelay));const p={startEvent:i,previousEvent:i,startTimestamp:t.timestamp,isDragging:!1,downButton:i.native.button,holdTimeout:a,modifiers:new Set};this._pointerState.set(r,p),this.startCapturingPointer(i.native),this._moveHandle.resume(),this._pointerState.size>1&&this._startDragging(t)}_handlePointerMove(t){const i=t.data,r=i.native.pointerId,a=this._pointerState.get(r);a&&(a.isDragging?this._pointerDrag.emit(ky("update",a,i),void 0,a.modifiers):fae(i,a.startEvent)>this._getDragThreshold(i.native.pointerType)&&this._startDragging(t),a.previousEvent=i)}_getDragThreshold(t){switch(t){case"touch":return this._movementUntilTouchDrag;case"pen":return this._movementUntilPenDrag;default:return this._movementUntilMouseDrag}}_startDragging(t){const i=t.data,r=i.native.pointerId;this._pointerState.forEach(a=>{a.holdTimeout!=null&&(a.holdTimeout.remove(),a.holdTimeout=null),a.isDragging||(a.modifiers=t.modifiers,a.isDragging=!0,r===a.startEvent.native.pointerId?this._pointerDrag.emit(ky("start",a,i)):this._pointerDrag.emit(ky("start",a,a.previousEvent),t.timestamp))})}_handlePointerLoss(t,i){const r=t.data,a=r.native.pointerId,p=this._pointerState.get(a);p&&(p.holdTimeout!=null&&(p.holdTimeout.remove(),p.holdTimeout=null),p.isDragging?this._pointerDrag.emit(ky("end",p,i==="pointer-up"?r:p.previousEvent),void 0,p.modifiers):i==="pointer-up"&&p.downButton===r.native.button&&t.timestamp-p.startTimestamp<=this._maximumClickDelay&&!p.holdEmitted&&this._immediateClick.emit(r),this._pointerState.delete(a),this.stopCapturingPointer(r.native),this._pointerState.size===0&&this._moveHandle.pause())}};function ky(e,t,i){return{action:e,startEvent:t.startEvent,previousEvent:t.previousEvent,currentEvent:i}}let _ae=class extends ki{constructor(t=Qi.maximumDoubleClickDelay,i=Qi.maximumDoubleClickDistance,r=Qi.maximumDoubleTouchDelay,a=Qi.maximumDoubleTouchDistance,p=sd){super(!1),this._maximumDoubleClickDelay=t,this._maximumDoubleClickDistance=i,this._maximumDoubleTouchDelay=r,this._maximumDoubleTouchDistance=a,this._clock=p,this._pointerState=new Map,this._click=this.registerOutgoing("click"),this._doubleClick=this.registerOutgoing("double-click"),this.registerIncoming("immediate-click",y=>this._handleImmediateClick(y)),this.registerIncoming("pointer-down",y=>this._handlePointerDown(y))}onUninstall(){this._pointerState.forEach(t=>t.doubleClickTimer=Wt(t.doubleClickTimer))}get hasPendingInputs(){for(const t of this._pointerState.values())if(t.doubleClickTimer!=null)return!0;return!1}_clearDoubleClickTimer(t,i){const r=this._pointerState.get(t);r&&(r.doubleClickTimer=Wt(r.doubleClickTimer),i&&this._click.emit(r.event.data,void 0,r.event.modifiers),this._pointerState.delete(t),this.refreshHasPendingInputs())}_doubleClickTimeoutExceeded(t){const i=this._pointerState.get(t);i.pointerDownCount===1&&this._click.emit(i.event.data,void 0,i.event.modifiers),i.doubleClickTimer=null,this._pointerState.delete(t),this.refreshHasPendingInputs()}_handleImmediateClick(t){const i=t.data,{pointerType:r}=i.native,a=Sae(i);if(!this._pointerState.has(a))return void this._startClick(t);const p=this._pointerState.get(a),{data:y,modifiers:g}=p.event,_=r==="touch"?this._maximumDoubleTouchDistance:this._maximumDoubleClickDistance;xv(y,i)>_?(this._clearDoubleClickTimer(a,!0),this._startClick(t)):(this._clearDoubleClickTimer(a,!1),p.pointerDownCount===2&&this._doubleClick.emit(y,void 0,g))}_handlePointerDown(t){const i=Ih(t.data),r=this._pointerState.get(i);r&&(r.pointerDownCount+=1)}_startClick(t){const{data:i}=t,{native:{pointerType:r}}=i,a=Ih(i),p=r==="touch"?this._maximumDoubleTouchDelay:this._maximumDoubleClickDelay,y=this._clock.setTimeout(()=>this._doubleClickTimeoutExceeded(a),p);this._pointerState.set(a,{event:t,doubleClickTimer:y,pointerDownCount:1}),this.refreshHasPendingInputs()}};function Sae(e){const{pointerId:t,pointerType:i,button:r}=e.native;return i==="mouse"?`${t}:${r}`:`${i}`}const Ry={counter:"Control",pan:{left:"ArrowLeft",right:"ArrowRight",up:"ArrowUp",down:"ArrowDown"},zoom:{zoomIn:["=","+"],zoomOut:["-","_"]},rotate:{clockwise:["a","A"],counterClockwise:["d","D"],reset:["n","N"]}},bM=Symbol("handles");let Wu=class extends Ae{initialize(){const t=()=>{var i;return(i=this.view)==null?void 0:i.ready};this.addHandles([gr(()=>!t(),()=>this._disconnect()),gr(t,()=>this._connect())])}destroy(){this._disconnect()}get latestPointerType(){var t;return(t=this._inputManager)==null?void 0:t.latestPointerType}get latestPointerLocation(){var t;return(t=this._inputManager)==null?void 0:t.latestPointerLocation}get multiTouchActive(){var t;return((t=this._inputManager)==null?void 0:t.multiTouchActive)??!1}isModifierKeyDown(t){var i;return((i=this._inputManager)==null?void 0:i.isModifierKeyDown(t))??!1}_disconnect(){this.view.viewEvents.disconnect(),this.removeHandles(bM),this._inputManager=Ht(this._inputManager)}_connect(){const t=this.view.surface,i=new AD(t,this.view.input),r=[new wae,new bae,new _ae,new gae(this.view.navigation),new mae],a=new Ps({eventSource:i,recognizers:r}),p=new ooe(this.view,["primary"]),y=new aoe(this.view,["secondary"]);a.installHandlers("prevent-context-menu",[new dae],Gl.INTERNAL),a.installHandlers("navigation",[new sae(this.view),new Zoe(this.view),new rae(this.view),new pM(this.view),new pM(this.view,[Ry.counter]),p,new Qoe(this.view,Ry.pan),new tae(this.view,Ry.zoom),new eae(this.view,Ry.rotate),y,new noe(this.view,"touch")],Gl.INTERNAL),this.view.viewEvents.connect(a),this._source=i,this._inputManager=a,this.addHandles([Le(()=>{var g,_;return(_=(g=this.view)==null?void 0:g.navigation)==null?void 0:_.browserTouchPanEnabled},g=>{this._source&&(this._source.browserTouchPanningEnabled=!g)},Pi),Le(()=>{const{actionMap:g}=this.view.navigation;return{panActions:cM("pan",g),rotateActions:cM("rotate",g)}},({panActions:g,rotateActions:_})=>{p.pointerActions=g,y.pointerActions=_},qr)],bM)}get test(){}};v([S()],Wu.prototype,"view",void 0),v([S()],Wu.prototype,"latestPointerType",null),v([S()],Wu.prototype,"latestPointerLocation",null),v([S()],Wu.prototype,"multiTouchActive",null),Wu=v([H("esri.views.2d.input.MapViewInputManager")],Wu);const xae=Wu,_M=160;let Uf=class extends Ae{constructor(){super(...arguments),this._timer=void 0}get stationary(){return!this._timer}flip(){this._timestamp=performance.now(),this._timer==null&&(this._timer=setInterval(()=>{performance.now()-this._timestamp>=_M&&this.clear()},_M))}clear(){this._timer&&(clearInterval(this._timer),this._timer=void 0)}};v([S()],Uf.prototype,"_timer",void 0),v([S()],Uf.prototype,"stationary",null),Uf=v([H("esri.views.2d.support.StationaryManager")],Uf);const Tae=e=>{let t=class extends e{constructor(...i){super(...i),this.fullOpacity=1,this.stateManager=new ur({constraints:new hM({view:this})}),this.goToManager=new Xm({view:this}),this.stationaryManager=new Uf,this.mapViewNavigation=null,this.renderingOptions={samplingMode:"dynamic",edgeLabelsVisible:!1,labelsAnimationTime:0,labelCollisionsEnabled:!1},this.frameTask=new eoe(this),this.inputManager=new xae({view:this}),this.viewEvents=new fL(this),this.padding={top:0,right:0,bottom:0,left:0},this.addHandles([Le(()=>this.viewpoint,()=>this.stationaryManager.flip(),So),this.on("resize",r=>this.stateManager.resize(r.width,r.height))])}get constraintsInfo(){return{lods:null,spatialReference:null}}get extent(){var i;return((i=this.stateManager)==null?void 0:i.extent)??null}set extent(i){this.stateManager.extent=i}get state(){return this.stateManager.state}get interacting(){return this.navigating}get stationary(){return!this.animation&&!this.navigating&&!this.resizing&&this.stationaryManager.stationary}set animation(i){const r=this._get("animation");if(i===r)return;if(r&&r.stop(),i!==this.animationManager.animation&&this.animationManager.stop(),!i||i.isFulfilled())return void this._set("animation",null);this._set("animation",i);const a=()=>{var p;this.destroyed||i===this._get("animation")&&(this._set("animation",null),(p=this.frameTask)==null||p.requestFrame())};i.when(a,a)}get constraints(){var i;return(i=this.stateManager)==null?void 0:i.constraints}set constraints(i){i.view=this;const r=this.stateManager.constraints;this.stateManager.constraints=i,r==null||r.destroy()}get padding(){var i;return(i=this.stateManager)==null?void 0:i.padding}set padding(i){this.stateManager&&(this.stateManager.padding=i)}get resizeAlign(){return this.stateManager.resizeAlign}set resizeAlign(i){this.stateManager.resizeAlign=i}get rotation(){return this.stateManager.rotation??0}set rotation(i){const{rotationEnabled:r}=this.constraints;this.constraints.rotationEnabled=!0,this.stateManager.rotation=i,this.constraints.rotationEnabled=r}get viewpoint(){return this.stateManager.viewpoint??null}set viewpoint(i){this.stateManager.viewpoint=i,this.frameTask.requestFrame()}on(i,r,a,p){return this.inputManager&&this.viewEvents.on(i,r,a,p)||super.on(i,r)}hasEventListener(i){return super.hasEventListener(i)||this.viewEvents.hasHandler(i)}goTo(i,r){return this.goToManager.goTo(i,r)}};return v([S({readOnly:!0})],t.prototype,"animationManager",void 0),v([S({readOnly:!0})],t.prototype,"fullOpacity",void 0),v([S()],t.prototype,"stateManager",void 0),v([S()],t.prototype,"constraintsInfo",null),v([S()],t.prototype,"extent",null),v([S()],t.prototype,"goToManager",void 0),v([S({readOnly:!0})],t.prototype,"state",null),v([S({readOnly:!0})],t.prototype,"mapViewNavigation",void 0),v([S()],t.prototype,"renderingOptions",void 0),v([S({readOnly:!0})],t.prototype,"interacting",null),v([S()],t.prototype,"stationary",null),v([S()],t.prototype,"animation",null),v([S({type:hM})],t.prototype,"constraints",null),v([S({readOnly:!0})],t.prototype,"inputManager",void 0),v([S()],t.prototype,"padding",null),v([S()],t.prototype,"resizeAlign",null),v([S()],t.prototype,"rotation",null),v([S({readOnly:!0})],t.prototype,"viewEvents",void 0),v([S({type:Kr})],t.prototype,"viewpoint",null),t=v([H("esri.views.Viewport2DMixin")],t),t};let SM=class{constructor(t){this._view=t,this.viewpoint=new Kr({targetGeometry:new Be,scale:0,rotation:0})}get view(){return this._view}get size(){const[t,i]=this._view.size;return Math.sqrt(t*t+i*i)}get scale(){return this.viewpoint.scale}get rotation(){return this.viewpoint.rotation}get center(){return this.viewpoint.targetGeometry}get scaleToResolutionFactor(){return YL(this.center.spatialReference)}pixelsPerPanAtZoom(t){return 1/(t*this.scaleToResolutionFactor)}zoomAtPixelsPerPan(t){return 1/(t*this.scaleToResolutionFactor)}pixelsPerRotate(){return this.size/2}compareTo(t,i){i.pan=DO(this.center,t.center);let r=Math.abs(t.rotation-this.rotation);r=r>=180?360-r:r,i.rotate=kl(r),i.sourceZoom=this.scale,i.targetZoom=t.scale}interpolate(t,i,r){const{pan:a,rotate:p,zoom:y,zoomOffset:g}=r,{center:_}=this;_.spatialReference=t.center.spatialReference,_.x=af(t.center.x,i.center.x,a),_.y=af(t.center.y,i.center.y,a),this.viewpoint.scale=af(t.scale,i.scale+g,y);let T=t.rotation;const I=i.rotation;Math.abs(I-T)>=180&&(T+=360*(T<I?1:-1)),this.viewpoint.rotation=af(T,I,p)}copyFrom(t){yr(this.viewpoint,t.viewpoint),this._view=t.view}};function Ud(e,t,i,r){const a=3*e,p=3*(i-e)-a,y=1-a-p,g=3*t,_=3*(r-t)-g,T=1-g-_;function I(D){return((y*D+p)*D+a)*D}function A(D){return((T*D+_)*D+g)*D}function P(D){return(3*y*D+2*p)*D+a}function N(D,z){let q,J,ee,X,ie,oe;for(ee=D,oe=0;oe<8;oe++){if(X=I(ee)-D,Math.abs(X)<z)return ee;if(ie=P(ee),Math.abs(ie)<1e-6)break;ee-=X/ie}if(q=0,J=1,ee=D,ee<q)return q;if(ee>J)return J;for(;q<J;){if(X=I(ee),Math.abs(X-D)<z)return ee;D>X?q=ee:J=ee,ee=.5*(J-q)+q}return ee}return function(D,z=1e-6){return A(N(D,z))}}const zs={};zs.ease=Ud(.25,.1,.25,1),zs.linear=Ud(0,0,1,1),zs.easeIn=zs["ease-in"]=Ud(.42,0,1,1),zs.easeOut=zs["ease-out"]=Ud(0,0,.58,1),zs.easeInOut=zs["ease-in-out"]=Ud(.42,0,.58,1);const Mae=e=>e,z2=e=>e*e,HS=e=>1-z2(1-e),$ae=e=>e<.5?z2(2*e)/2:(HS(2*(e-.5))+1)/2,WS=e=>e*e*e,PD=e=>1-WS(1-e),Eae=e=>e<.5?WS(2*e)/2:(PD(2*(e-.5))+1)/2,JS=e=>e*e*e*e,kD=e=>1-JS(1-e),Iae=e=>e<.5?JS(2*e)/2:(kD(2*(e-.5))+1)/2,ZS=e=>e*e*e*e*e,RD=e=>1-ZS(1-e),Aae=e=>e<.5?ZS(2*e)/2:(RD(2*(e-.5))+1)/2,KS=e=>1-Math.cos(e*Math.PI/2),ND=e=>1-KS(1-e),Cae=e=>e<.5?KS(2*e)/2:(ND(2*(e-.5))+1)/2,YS=e=>2**(10*(e-1)),XS=e=>1-YS(1-e),Oae=e=>e<.5?YS(2*e)/2:(XS(2*(e-.5))+1)/2,QS=e=>-(Math.sqrt(1-e*e)-1),LD=e=>1-QS(1-e),Pae=e=>e<.5?QS(2*e)/2:(LD(2*(e-.5))+1)/2;function tn(e){const t=2*(e-Math.sqrt((e-1)*e)),i=t/2/e;return r=>r<i?e*r*r:t*r-t+1}function rn(e,t){return(i,r)=>i<t?t*e(i/t,r):1-e((1-i)/(1-t),r)*(1-t)}const kae=rn(tn(1),1),Rae=rn(tn(1),0),h_=rn(tn(1),.5),Nae=rn(tn(2),1),Lae=rn(tn(2),0),Dae=rn(tn(2),.5),jae=rn(tn(3),1),Fae=rn(tn(3),0),zae=rn(tn(3),.5),Uae=rn(tn(4),1),Vae=rn(tn(4),0),Gae=rn(tn(4),.5),xM={linear:Mae,"in-quad":z2,"out-quad":HS,"in-out-quad":$ae,"in-coast-quad":kae,"out-coast-quad":Rae,"in-out-coast-quad":h_,"in-cubic":WS,"out-cubic":PD,"in-out-cubic":Eae,"in-coast-cubic":Nae,"out-coast-cubic":Lae,"in-out-coast-cubic":Dae,"in-quart":JS,"out-quart":kD,"in-out-quart":Iae,"in-coast-quart":jae,"out-coast-quart":Fae,"in-out-coast-quart":zae,"in-quint":ZS,"out-quint":RD,"in-out-quint":Aae,"in-coast-quint":Uae,"out-coast-quint":Vae,"in-out-coast-quint":Gae,"in-sine":KS,"out-sine":ND,"in-out-sine":Cae,"in-expo":YS,"out-expo":XS,"in-out-expo":Oae,"in-circ":QS,"out-circ":LD,"in-out-circ":Pae,ease:e=>zs.ease(e),"ease-in":e=>zs.easeIn(e),"ease-out":e=>zs.easeOut(e),"ease-in-out":e=>zs.easeInOut(e)};let Bae=class{constructor(){this.pan=0,this.rotate=0,this.fov=0,this.sourceZoom=0,this.targetZoom=0}};const Tv={desiredScreenFlow:2,minDuration:500,maxDuration:8e3},DD={maxDuration:4e3};let qae=class jD{constructor(t){this._createCamera=t,this.compared=new Bae,this.segmentStart=0,this.segmentEnd=1,this.settings={desiredScreenFlow:Tv.desiredScreenFlow},this.source=t(),this.target=t()}clone(){const t=new jD(this._createCamera);return t.copyFrom(this),t}copyFrom(t){this.update(t.source,t.target,t.settings)}update(t,i,r){this.source!==t&&this.source.copyFrom(t),this.target!==i&&this.target.copyFrom(i),this.source.compareTo(this.target,this.compared),this.settings.desiredScreenFlow=r.desiredScreenFlow??Tv.desiredScreenFlow,this.desiredPixelFlow=this.settings.desiredScreenFlow*this.target.size,this.halfWindowSize=this.target.size/2}halfWindowPanAtZoom(t){const i=this.target.pixelsPerPanAtZoom(t);return this.halfWindowSize/i}get hasZoom(){return Math.abs(this.compared.sourceZoom-this.compared.targetZoom)>1e-5}get hasPan(){return this.compared.pan>Ar()}get hasFov(){return Math.abs(this.compared.fov)>Ar()}get hasRotate(){return this.compared.rotate>Ar()}},Hae=class{constructor(){this.pan=0,this.rotate=0,this.zoom=0,this.fov=0,this.zoomOffset=0}},Wae=class{constructor(){this.segments=new Array}get time(){return this.segments.reduce((t,i)=>t+i.time,0)}interpolateComponentsAt(t,i){t=Math.min(Math.max(t,0),1),t*=this.time;let r=0,a=0;const p=this.definition,y=this.segments.reduce((g,_)=>g||_.definition.hasZoom,!1);for(let g=0;g<this.segments.length;g++){const _=this.segments[g],T=_.definition;if(t<=_.time||g===this.segments.length-1){if(this.segmentInterpolateComponentsAt(_,_.time===0?0:t/_.time,i),p.hasPan&&!isNaN(i.pan)&&isFinite(p.compared.pan)?i.pan=(r+T.compared.pan*i.pan)/p.compared.pan:i.pan=1,p.hasRotate&&!isNaN(i.rotate)&&isFinite(p.compared.rotate)?i.rotate=(a+T.compared.rotate*i.rotate)/p.compared.rotate:i.rotate=1,y&&!isNaN(i.zoom)&&isFinite(T.compared.targetZoom)){const{sourceZoom:I,targetZoom:A}=T.compared,P=i.zoom*(A-I)+I,N=this.segments[0].definition.compared.sourceZoom,D=this.segments[this.segments.length-1].definition.compared.targetZoom,z=Math.abs(A-N)>Math.abs(I-N)?A:I;i.zoomOffset=z-D,i.zoom=(P-N)/(z-N)}else i.zoom=1;return i}t-=_.time,r+=T.compared.pan,a+=T.compared.rotate}}segmentInterpolateComponentsAt(t,i,r){t.interpolateComponentsAt(i,r)}},mb=class{get time(){return this._time}constructor(t){t&&this.update(t)}update(t){t&&(this.definition?this.definition.copyFrom(t):this.definition=t.clone()),this._updatePrecomputedVariables(),this._updatePixelFlow()}_updatePrecomputedVariables(){const t=this.definition,i=t.compared,r=i.sourceZoom,a=i.targetZoom;this._zoomSign=r>a?1:-1,this._panPixelsAtSource=i.pan*t.source.pixelsPerPanAtZoom(r);const p=(t.source.pixelsPerRotate()+t.target.pixelsPerRotate())/2;this._rotatePixels=i.rotate*p}_updatePixelFlow(){const t=this.definition.compared.sourceZoom,i=this.definition.compared.targetZoom,{hasZoom:r,hasPan:a,hasRotate:p}=this.definition;let y=0,g=0;r&&(a&&(y=(i/t-1)/(-1/(this._zoomSign*this.definition.halfWindowSize)*Math.LN2*this._panPixelsAtSource)),p&&(g=this._zoomSign*(Math.log(t/i)/Math.LN2)*this.definition.halfWindowSize/this._rotatePixels)),this._zoomPixelFlow=0,this._panPixelFlow=0,this._rotatePixelFlow=0;const _=this.definition.desiredPixelFlow;if(r&&a&&p){const T=y+g+y*g;this._zoomPixelFlow=y*g/T*_,this._panPixelFlow=g/T*_,this._rotatePixelFlow=y/T*_}else if(r&&a){const T=1+y;this._zoomPixelFlow=y/T*_,this._panPixelFlow=1/T*_}else if(r&&p){const T=1+g;this._zoomPixelFlow=g/T*_,this._rotatePixelFlow=1/T*_}else if(a&&p){const T=this._panPixelsAtSource/this._rotatePixels,I=1+T;this._panPixelFlow=T/I*_,this._rotatePixelFlow=1/I*_}else a?this._panPixelFlow=_:r?this._zoomPixelFlow=_:p&&(this._rotatePixelFlow=_);if(this._time=Math.max(this.rotateTime,this.zoomTime,this.panTime),this.fovTime>this._time){const T=this.fovTime/this._time;this._time=this.fovTime,this._zoomPixelFlow/=T,this._panPixelFlow/=T,this._rotatePixelFlow/=T}}get rotateTime(){return this.definition.hasRotate?this._rotatePixels/this._rotatePixelFlow:0}get zoomTime(){return this.definition.hasZoom?this._zoomSign*(Math.log(this.definition.compared.sourceZoom/this.definition.compared.targetZoom)/Math.LN2)*this.definition.halfWindowSize/this._zoomPixelFlow:0}get fovTime(){return this.definition.hasFov?Math.abs(this.definition.compared.fov)/Jae:0}get panTime(){if(!this.definition.hasPan)return 0;if(this.definition.hasZoom){const t=-1/(this._zoomSign*this.definition.halfWindowSize)*Math.LN2,i=t*this._panPixelsAtSource;return Math.log(i*(this._zoomPixelFlow/this._panPixelFlow)+1)/(t*this._zoomPixelFlow)}return this._panPixelsAtSource/this._panPixelFlow}_interpolateComponentsZoom(t){if(t===0||t===1)return t;if(this.definition.hasZoom){const i=this.definition.compared.sourceZoom,r=this.definition.compared.targetZoom;return(i*(i/r)**-t-i)/(r-i)}return t}_interpolateComponentsFov(t){if(t===0)return this.definition.segmentStart;if(t===1)return this.definition.segmentEnd;if(this.definition.hasFov){const{segmentStart:i,segmentEnd:r}=this.definition;return i+t*(r-i)}return this.definition.segmentStart}_interpolateComponentsPan(t){if(t===0||t===1)return t;if(this.definition.hasPan&&this.definition.hasZoom){const i=-1/(this._zoomSign*this.definition.halfWindowSize)*this._zoomPixelFlow;return 1/this._panPixelsAtSource*(this._panPixelFlow*(2**(i*t*this._time)-1))/(i*Math.LN2)}return t}_interpolateComponentsRotate(t){return t}interpolateComponentsAt(t,i){t=Math.min(Math.max(t,0),1),i.zoom=this._interpolateComponentsZoom(t),i.pan=this._interpolateComponentsPan(t),i.rotate=this._interpolateComponentsRotate(t),i.zoomOffset=0,i.fov=this._interpolateComponentsFov(t)}};const Jae=kl(45);function Zae(e,t,i){const r=t-e.compared.sourceZoom,a=e.halfWindowPanAtZoom(r);return-e.halfWindowSize*(i.ascensionFactor*Math.LN2*e.compared.pan+a)*Math.log(e.compared.sourceZoom/t)/(e.desiredPixelFlow*Math.LN2*a)}function Kae(e,t,i){const r=1/t,a=Math.log(e.compared.sourceZoom*r),p=1/e.desiredPixelFlow,y=1/Math.LN2,g=t-e.compared.sourceZoom,_=1/g,T=(i.ascensionFactor*Math.LN2*e.compared.pan+e.halfWindowPanAtZoom(g))/e.halfWindowPanAtZoom(1);return e.halfWindowSize*r*p*y*_*T-e.halfWindowSize*a*p*y*_+e.halfWindowSize*a*p*y*T/(g*g)}function Yae(e,t,i){const r=t-e.compared.sourceZoom,a=1/r,p=1/t,y=Math.log(e.compared.sourceZoom*p),g=(i.ascensionFactor*Math.LN2*e.compared.pan+e.halfWindowPanAtZoom(r))/e.halfWindowPanAtZoom(1);return e.halfWindowSize*a*(-2*a*p*g+2*a*y+2*p-2*y*g/(r*r)-g/(t*t))/(e.desiredPixelFlow*Math.LN2)}function Xae(e,t){return-e.halfWindowSize*Math.log(e.compared.sourceZoom/t)/(e.desiredPixelFlow*Math.LN2)}function Qae(e,t){return e.halfWindowSize/(t*e.desiredPixelFlow*Math.LN2)}function ele(e,t){return-e.halfWindowSize/(t*t*e.desiredPixelFlow*Math.LN2)}function tle(e,t,i){return-e.compared.pan*e.halfWindowSize*(i.ascensionFactor+i.descensionFactor-1)/(e.desiredPixelFlow*e.halfWindowPanAtZoom(t))}function ile(e,t,i){return e.compared.pan*e.halfWindowSize*(i.ascensionFactor+i.descensionFactor-1)/(e.desiredPixelFlow*e.halfWindowPanAtZoom(t*t))}function rle(e,t,i){return-2*e.compared.pan*e.halfWindowSize*(i.ascensionFactor+i.descensionFactor-1)/(e.desiredPixelFlow*e.halfWindowPanAtZoom(t*t*t))}function sle(e,t,i){return e.halfWindowSize*(-e.halfWindowPanAtZoom(t)-i.descensionFactor*Math.LN2*e.compared.pan+e.halfWindowPanAtZoom(e.compared.targetZoom))*Math.log(t/e.compared.targetZoom)/(e.desiredPixelFlow*Math.LN2*e.halfWindowPanAtZoom(-t+e.compared.targetZoom))}function nle(e,t,i){const r=Math.log(t/e.compared.targetZoom),a=1/e.desiredPixelFlow,p=1/Math.LN2,y=-t+e.compared.targetZoom,g=1/y,_=(-e.halfWindowPanAtZoom(t)-i.descensionFactor*Math.LN2*e.compared.pan+e.halfWindowPanAtZoom(e.compared.targetZoom))/e.halfWindowPanAtZoom(1);return-e.halfWindowSize*r*a*p*g+e.halfWindowSize*r*a*p*_/(y*y)+e.halfWindowSize*a*p*g*_/t}function ole(e,t,i){const r=t-e.compared.targetZoom,a=1/r,p=1/t,y=Math.log(t/e.compared.targetZoom),g=(e.halfWindowPanAtZoom(t)+i.descensionFactor*Math.LN2*e.compared.pan-e.halfWindowPanAtZoom(e.compared.targetZoom))/e.halfWindowPanAtZoom(1);return e.halfWindowSize*a*(-2*a*p*g-2*a*y+2*p+2*y*g/(r*r)-g/(t*t))/(e.desiredPixelFlow*Math.LN2)}function ale(e,t){return e.halfWindowSize*Math.log(t/e.compared.targetZoom)/(e.desiredPixelFlow*Math.LN2)}function lle(e,t){return e.halfWindowSize/(t*e.desiredPixelFlow*Math.LN2)}function ule(e,t){return-e.halfWindowSize/(t*t*e.desiredPixelFlow*Math.LN2)}function hle(e){const t=e.compared.sourceZoom-e.compared.targetZoom;if(t===0)return e.compared.pan*e.halfWindowSize/(e.desiredPixelFlow*e.halfWindowPanAtZoom(e.compared.sourceZoom));const i=Math.LN2*e.compared.pan,r=t,a=e.halfWindowPanAtZoom(r),p=e.halfWindowSize*Math.log(e.compared.sourceZoom/e.compared.targetZoom)/(e.desiredPixelFlow*Math.LN2*a);return e.compared.sourceZoom<=e.compared.targetZoom?p*(i-a):p*(i+a)}function cle(e,t){let i=ple(e,t);const r={ascensionFactor:t.ascensionFactor!=null?t.ascensionFactor:.5,descensionFactor:t.descensionFactor!=null?t.descensionFactor:.5},a=r.ascensionFactor===0,p=r.descensionFactor===0,y=a?Xae:Zae,g=a?Qae:Kae,_=a?ele:Yae,T=p?ale:sle,I=p?lle:nle,A=p?ule:ole,P=ie=>y(e,ie,r)+tle(e,ie,r)+T(e,ie,r),N=ie=>g(e,ie,r)+ile(e,ie,r)+I(e,ie,r),D=ie=>_(e,ie,r)+rle(e,ie,r)+A(e,ie,r);let z=P(i);const q=hle(e);let J;const ee=t.maximumIterations||20,X=t.maximumDistance!=null?t.maximumDistance:1/0;for(J=0;J<ee;J++){const ie=t.desiredSlope??1e-6;let oe=N(i);Math.abs(oe)>ie&&(oe+=ie);const ue=oe/D(i);if(isNaN(ue)||i>=X&&ue<0){if(!isFinite(X))return null;i=X,z=P(i);break}if(i-=ue,i<e.compared.sourceZoom||i<e.compared.targetZoom)return null;const ge=P(i);if(Math.abs(ge-z)/z<=.005)break;z=ge}return z>q*(1-.3)||i<e.compared.sourceZoom||i<e.compared.targetZoom?null:i}function ple(e,t){const i=Math.max(e.compared.sourceZoom,e.compared.targetZoom),r=e.source.zoomAtPixelsPerPan(e.desiredPixelFlow/e.compared.pan)/2;return r<i?t.maximumDistance!=null?i+(t.maximumDistance-i)/2:1.5*i:t.maximumDistance?Math.min(t.maximumDistance,r):r}let dle=class extends Wae{constructor(t,i){super(),this._preallocSegments=[new mb,new mb,new mb],this._ascensionSegment=null,this._descensionSegment=null,this.update(t,i)}update(t,i){if(!t)return;this.definition?this.definition.copyFrom(t):this.definition=t.clone();const r=i!=null&&i.apex?cle(t,i.apex):null;this.segments.length=0,this._ascensionSegment=null,this._descensionSegment=null,r?this._updateWithApex(r,i==null?void 0:i.apex):this._updateWithoutApex()}segmentInterpolateComponentsAt(t,i,r){t.interpolateComponentsAt(i,r),t===this._ascensionSegment?r.zoom=HS(r.zoom):t===this._descensionSegment&&(r.zoom=z2(r.zoom))}_updateWithApex(t,i){const[r,a,p]=this._preallocSegments,y=(i==null?void 0:i.ascensionFactor)??.5,g=Math.min(1-y,(i==null?void 0:i.ascensionFactor)!=null&&i.descensionFactor!=null?i.descensionFactor:.5),_=1-y-g;r.definition?r.definition.copyFrom(this.definition):r.definition=this.definition.clone(),r.definition.compared.targetZoom=t,r.definition.compared.pan=this.definition.compared.pan*y,r.definition.compared.rotate=this.definition.compared.rotate*y,r.definition.segmentEnd=y,r.update(),this._ascensionSegment=r,this.segments.push(r),_>0&&(a.definition?a.definition.copyFrom(this.definition):a.definition=this.definition.clone(),a.definition.copyFrom(this.definition),a.definition.compared.sourceZoom=t,a.definition.compared.targetZoom=t,a.definition.compared.pan=this.definition.compared.pan*_,a.definition.compared.rotate=this.definition.compared.rotate*_,a.definition.segmentStart=r.definition.segmentEnd,a.definition.segmentEnd=r.definition.segmentEnd+_,a.update(),this.segments.push(a)),p.definition?p.definition.copyFrom(this.definition):p.definition=this.definition.clone(),p.definition.compared.sourceZoom=t,p.definition.compared.pan=this.definition.compared.pan*g,p.definition.compared.rotate=this.definition.compared.rotate*g,p.definition.segmentStart=y+_,p.update(),this._descensionSegment=p,this.segments.push(p)}_updateWithoutApex(){const[t]=this._preallocSegments;t.update(this.definition),this.segments.push(t)}};const fle=new Hae;let yle=class{get time(){return this._time}get isLinear(){return this.path.segments.length===1}constructor(t){this._time=0,this._easing=h_,this.definition=new qae(t),this.path=new dle}update(t,i,r){this.definition.update(t,i,r),this.path.update(this.definition,r),this._time=this._applyTimeSettings(lV(isFinite(this.path.time)?this.path.time:0),r),this._easing=r.easing??(this._time>=1e3?h_:XS)}cameraAt(t,i){t=Math.min(Math.max(0,t),1),t=this._normalizedEasing(t);const r=this.path.interpolateComponentsAt(t,fle);i.interpolate(this.definition.source,this.definition.target,r)}_normalizedEasing(t){const i=this._easing(0,this._time),r=this._easing(1,this._time);return(this._easing(t,this._time)-i)/(r-i)}_applyTimeSettings(t,i){const r=i.speedFactor!=null?i.speedFactor:1,a=i.minDuration??Tv.minDuration/r,p=i.maxDuration??Tv.maxDuration/r;return t=i.duration!=null?i.duration:Math.min(Math.max(t/r,a),p)}};const mle=2e3,gle=64;let vle=class{constructor(t){this._view=t,this._animation=new yle(()=>new SM(this._view)),this._current=new SM(this._view)}get _source(){return this._animation.definition.source}get _target(){return this._animation.definition.target}get duration(){return this._animation.time}get animation(){return this._animation}update(t,i,r={}){yr(this._current.viewpoint,t),yr(this._source.viewpoint,t),yr(this._target.viewpoint,i),this._animation.update(this._source,this._target,r)}applyRatio(t,i){this._animation.cameraAt(i,this._current),yr(t,this._current.viewpoint)}},Lc=class extends Ae{constructor(t){super(t),this._animation=null,this._destinationViewState=new qS,this.updateFunction=null,this.easing=xM.ease,this.viewpoint=new Kr({targetGeometry:new Be,scale:0,rotation:0}),this._updateTask=Dp({postRender:this._postRender.bind(this)}),this._updateTask.pause(),this._transition=new vle(t.view)}destroy(){this._updateTask=Wt(this._updateTask)}get animation(){return this._animation}set animation(t){this._animation=t,this.view.animation=t}animate(t,i,r){this.stop();const a=this.viewpoint;yr(a,i);const p=t.target;this._transition.update(this.viewpoint,p,{apex:{maximumDistance:Math.min(Math.min(i.scale,p.scale)*gle,this.view.constraints.effectiveMinScale),desiredSlope:5e-8},duration:r==null?void 0:r.duration,maxDuration:(r==null?void 0:r.animationMode)==="auto"?1/0:(r==null?void 0:r.maxDuration)??DD.maxDuration,speedFactor:r==null?void 0:r.speedFactor,easing:(typeof(r==null?void 0:r.easing)=="string"?xM[r.easing]:r==null?void 0:r.easing)||this.easing}),(r==null?void 0:r.animationMode)==="auto"&&(this._destinationViewState.copy(this.view.state),this._destinationViewState.viewpoint=p,wle(this._transition.animation,r,this.view.state,this._destinationViewState)||this._transition.update(this.viewpoint,p,{duration:0}));const y=()=>{this.animation===t&&this._updateTask&&(t.state==="finished"&&(this._transition.applyRatio(this.viewpoint,1),this.view.state&&(this.view.state.viewpoint=this.viewpoint.clone())),this.animation=null,this.updateFunction=null)};return t.when(y,y),this._startTime=performance.now(),this._updateTask.resume(),this.animation=t,t}animateContinuous(t,i){this.stop(),this.updateFunction=i,this.viewpoint=t;const r=new n_({target:t.clone()}),a=()=>{this.animation===r&&this._updateTask&&(this.animation=null,this.updateFunction=null)};return r.when(a,a),this._startTime=performance.now(),this._updateTask.resume(),this.animation=r,r}stop(){this.animation&&(this.animation.stop(),this.animation=null,this.updateFunction=null)}_postRender(t){var r,a;const i=this.animation;if(i&&i.state!==n_.State.STOPPED){if(this.updateFunction)this.updateFunction(this.viewpoint,t.deltaTime),(r=this.animation)==null||r.update(this.viewpoint);else{const p=performance.now()-this._startTime,y=this._transition.duration,g=y>0?p/y:1,_=g>=1;this._transition.applyRatio(this.viewpoint,g),_&&((a=this.animation)==null||a.finish())}this.view.state&&(this.view.state.viewpoint=this.viewpoint.clone())}else this._updateTask.pause()}};function wle(e,t,i,r){if((t==null?void 0:t.duration)!=null)return!0;const{time:a,isLinear:p}=e,y=(t==null?void 0:t.speedFactor)||1;if(a>((t==null?void 0:t.maxDuration)??DD.maxDuration/y))return!1;if(p){const _=ri(),T=Gi(...r.toScreen(_,...i.center)),I=Gi(...i.toScreen(_,...r.center)),A=I!=null&&I.x>-1*i.size[0]&&I.x<(1.5+.5)*i.size[0]&&I.y>-1*i.size[1]&&I.y<(1.5+.5)*i.size[1],P=T!=null&&T.x>-1*r.size[0]&&T.x<(1.5+.5)*r.size[0]&&T.y>-1*r.size[1]&&T.y<(1.5+.5)*r.size[1];if(a>mle/y&&!A&&!P)return!1}return!0}v([S()],Lc.prototype,"easing",void 0),v([S()],Lc.prototype,"view",void 0),v([S()],Lc.prototype,"viewpoint",void 0),Lc=v([H("esri.views.2d.AnimationManager")],Lc);const ble=Lc;function jt(){return Promise.all([fe(()=>import("./webglDeps-CO71pC9T.js"),__vite__mapDeps([181,153,7,182,183,184])),fe(()=>import("./mapViewDeps-f-cG9gqN.js"),__vite__mapDeps([185,118,84,85,27,7,86,87,88,89,83,56,186,92,187,182,153,183,157,133,188,110,189,140,139,96,31,32,90,98,190,93,94,95,191,18,138,181,184,192,105,193,82,29,24,36,35,194,146,147,131,155,195,72,196,97,197,198,91,199,61,102,80,200,201,202,203,149,204,205]))])}const Vd=()=>jt().then(()=>fe(()=>import("./TileLayerView2D-AXR-ZhLN.js"),__vite__mapDeps([206,118,88,84,85,27,7,86,87,89,83,56,191,18,189,188,183,153,110,140,139,96,31,32,138,192,187,182,157,133,186,92,90,98,105,193,82,29,24,36,35,72,93,94,95,146,147,131,199,61,102,80,207,208,203,209,173,210,201,202,211,212,213,214,215,216]))),vu=()=>jt().then(()=>fe(()=>import("./FeatureLayerView2D-CUITw5xH.js").then(e=>e.F),__vite__mapDeps([217,189,31,27,7,32,218,219,220,29,24,39,209,173,202,84,85,86,87,88,89,83,56,182,153,203,188,183,110,140,139,96,186,92,187,157,133,90,98,105,190,221,104,213,216,211]))),TM={"base-dynamic":()=>jt().then(()=>fe(()=>import("./BaseDynamicLayerView2D-Bx1ZtY2v.js"),__vite__mapDeps([222,223,188,83,56,183,153,7,110,189,140,139,96,31,27,32,208,187,182,157,133,92,209,173,224,211]))),"base-tile":Vd,"bing-maps":Vd,catalog:()=>jt().then(()=>fe(()=>import("./CatalogLayerView2D-4xdCgXHw.js"),__vite__mapDeps([225,209,189,173]))),"catalog-dynamic-group":()=>jt().then(()=>fe(()=>import("./CatalogDynamicGroupLayerView2D-BKx1g5Vw.js"),__vite__mapDeps([226,209,189,173]))),"catalog-footprint":()=>jt().then(()=>fe(()=>import("./CatalogFootprintLayerView2D-qdRVmvcw.js"),__vite__mapDeps([227,217,189,31,27,7,32,218,219,220,29,24,39,209,173,202,84,85,86,87,88,89,83,56,182,153,203,188,183,110,140,139,96,186,92,187,157,133,90,98,105,190,221,104,213,216,211]))),csv:vu,"geo-rss":()=>jt().then(()=>fe(()=>import("./GeoRSSLayerView2D-DSO3btK9.js"),__vite__mapDeps([228,209,189,173,200,201,202,84,85,27,7,86,87,88,89,83,56,182,153,203,188,183,110,140,139,96,31,32,186,92,187,157,133,90,98,199,191,118,18,82,29,24,36,35,61,102,80]))),feature:vu,geojson:vu,parquet:vu,graphics:()=>jt().then(()=>fe(()=>import("./GraphicsLayerView2D-DrsxVMfp.js"),__vite__mapDeps([229,209,189,173,200,201,202,84,85,27,7,86,87,88,89,83,56,182,153,203,188,183,110,140,139,96,31,32,186,92,187,157,133,90,98,199,191,118,18,82,29,24,36,35,61,102,80]))),group:()=>jt().then(()=>fe(()=>import("./GroupLayerView2D-CEJRWWOT.js"),__vite__mapDeps([230,209,189,173]))),imagery:()=>jt().then(()=>fe(()=>import("./ImageryLayerView2D-CdK-L2ZK.js"),__vite__mapDeps([231,232,153,7,56,116,188,83,183,110,189,140,139,96,31,27,32,209,173,199,84,85,86,87,88,89,191,118,18,82,29,24,36,35,186,92,187,182,157,133,90,98,61,102,80,210,201,202,203,223,208,224,120,218,216,211]))),"imagery-tile":()=>jt().then(()=>fe(()=>import("./ImageryTileLayerView2D-Cjfre5pL.js"),__vite__mapDeps([233,234,232,153,7,56,116,188,83,183,110,189,140,139,96,31,27,32,209,173,235,197,95,182,203,236,120,218,216,211]))),kml:()=>jt().then(()=>fe(()=>import("./KMLLayerView2D-Df0NgdoH.js"),__vite__mapDeps([237,238,208,189,187,182,153,7,183,157,133,92,223,188,83,56,110,140,139,96,31,27,32,209,173,200,201,202,84,85,86,87,88,89,203,186,90,98,199,191,118,18,82,29,24,36,35,61,102,80,120,197,95,194,181,184,146,147,131,193,155,235]))),"knowledge-graph":()=>jt().then(()=>fe(()=>import("./KnowledgeGraphLayerView2D-CsacwMYg.js"),__vite__mapDeps([239,209,189,173]))),"link-chart":()=>jt().then(()=>fe(()=>import("./KnowledgeGraphLayerView2D-CsacwMYg.js"),__vite__mapDeps([239,209,189,173]))),"knowledge-graph-sublayer":vu,"map-image":()=>jt().then(()=>fe(()=>import("./MapImageLayerView2D-D4_MvN8I.js"),__vite__mapDeps([240,223,188,83,56,183,153,7,110,189,140,139,96,31,27,32,208,187,182,157,133,92,209,173,199,84,85,86,87,88,89,191,118,18,82,29,24,36,35,186,90,98,61,102,80,210,201,202,203,224,241,213,215,218,211,212,214,216]))),"map-notes":()=>jt().then(()=>fe(()=>import("./MapNotesLayerView2D-BEuAd3UG.js"),__vite__mapDeps([242,209,189,173,200,201,202,84,85,27,7,86,87,88,89,83,56,182,153,203,188,183,110,140,139,96,31,32,186,92,187,157,133,90,98,199,191,118,18,82,29,24,36,35,61,102,80]))),media:()=>jt().then(()=>fe(()=>import("./MediaLayerView2D-D4keR_NS.js"),__vite__mapDeps([243,244,102,61,118,88,84,85,27,7,86,87,89,83,56,191,18,189,188,183,153,110,140,139,96,31,32,138,192,187,182,157,133,186,92,90,98,105,193,82,29,24,36,35,72,93,94,95,146,147,131,199,80,196,97,245,198,209,173]))),"ogc-feature":()=>jt().then(()=>fe(()=>import("./OGCFeatureLayerView2D-DgIe2m7d.js"),__vite__mapDeps([246,217,189,31,27,7,32,218,219,220,29,24,39,209,173,202,84,85,86,87,88,89,83,56,182,153,203,188,183,110,140,139,96,186,92,187,157,133,90,98,105,190,221,104,213,216,211]))),"open-street-map":Vd,"oriented-imagery":vu,route:()=>jt().then(()=>fe(()=>import("./RouteLayerView2D-CwE5pSo3.js"),__vite__mapDeps([247,248,249,209,189,173,200,201,202,84,85,27,7,86,87,88,89,83,56,182,153,203,188,183,110,140,139,96,31,32,186,92,187,157,133,90,98,199,191,118,18,82,29,24,36,35,61,102,80]))),stream:()=>jt().then(()=>fe(()=>import("./StreamLayerView2D-uOA6qnd2.js"),__vite__mapDeps([250,217,189,31,27,7,32,218,219,220,29,24,39,209,173,202,84,85,86,87,88,89,83,56,182,153,203,188,183,110,140,139,96,186,92,187,157,133,90,98,105,190,221,104,213,216,211]))),"subtype-group":()=>jt().then(()=>fe(()=>import("./SubtypeGroupLayerView2D-wFnuSyoT.js"),__vite__mapDeps([251,217,189,31,27,7,32,218,219,220,29,24,39,209,173,202,84,85,86,87,88,89,83,56,182,153,203,188,183,110,140,139,96,186,92,187,157,133,90,98,105,190,221,104,213,216,211]))),tile:Vd,"vector-tile":()=>jt().then(()=>fe(()=>import("./VectorTileLayerView2D-CmUidh76.js"),__vite__mapDeps([252,138,89,72,7,87,88,86,153,139,188,83,56,183,110,189,140,96,31,27,32,203,42,141,142,118,209,173,211]))),video:()=>jt().then(()=>fe(()=>import("./VideoLayerView2D-DZfLo7JD.js"),__vite__mapDeps([253,254,255,245,110,188,83,56,183,153,7,189,140,139,96,31,27,32,186,84,85,86,87,88,89,92,187,182,157,133,90,98,198,209,173,200,201,202,203,199,191,118,18,82,29,24,36,35,61,102,80]))),wcs:()=>jt().then(()=>fe(()=>import("./ImageryTileLayerView2D-Cjfre5pL.js"),__vite__mapDeps([233,234,232,153,7,56,116,188,83,183,110,189,140,139,96,31,27,32,209,173,235,197,95,182,203,236,120,218,216,211]))),"web-tile":Vd,wfs:vu,wms:()=>jt().then(()=>fe(()=>import("./WMSLayerView2D-DC9p_2Df.js"),__vite__mapDeps([256,223,188,83,56,183,153,7,110,189,140,139,96,31,27,32,208,187,182,157,133,92,209,173,224,211,257,218]))),wmts:()=>jt().then(()=>fe(()=>import("./WMTSLayerView2D-B6wz1w5t.js"),__vite__mapDeps([258,207,208,189,187,182,153,7,183,157,133,92,188,83,56,110,140,139,96,31,27,32,203,209,173,211]))),"line-of-sight":null,"base-elevation":null,"building-scene":null,dimension:null,elevation:null,"integrated-mesh":null,"integrated-mesh-3dtiles":null,"point-cloud":null,viewshed:null,voxel:null,scene:null,unknown:null,unsupported:null};function _le(e){const t=e.declaredClass?e.declaredClass.slice(e.declaredClass.lastIndexOf(".")+1):"Unknown",i=t.replaceAll(/([a-z])([A-Z])/g,"$1-$2").toLowerCase();return new Y(`${i}:view-not-supported`,`${t} is not supported in 2D`)}const MM={hasLayerViewModule:e=>TM[e.type]!=null,importLayerView:e=>{const t=TM[e.type];if(t==null)throw _le(e);return t(e)}};let tu=class Ju{static getId(t,i,r,a){return typeof t=="object"?`${t.level}/${t.row}/${t.col}/${t.world}`:`${t}/${i}/${r}/${a}`}constructor(t,i,r,a){this.set(t,i,r,a)}get key(){return this}get id(){return this.toString()}get normalizedId(){return`${this.level}/${this.row}/${this.col}`}set id(t){this.set(t)}get hash(){const t=4095&this.row,i=4095&this.col,r=63&this.level;return(3&this.world)<<30|i<<22|t<<8|r}acquire(t,i,r,a){this.set(t,i,r,a)}contains(t){const i=t.level-this.level;return i>=0&&this.row===t.row>>i&&this.col===t.col>>i&&this.world===t.world}containsChild(t){const i=t.level-this.level;return i>0&&this.row===t.row>>i&&this.col===t.col>>i&&this.world===t.world}equals(t){return this.level===t.level&&this.row===t.row&&this.col===t.col&&this.world===t.world}clone(){return new Ju(this)}release(){this.level=0,this.row=0,this.col=0,this.world=0}set(t,i,r,a){if(t==null)this.level=0,this.row=0,this.col=0,this.world=0;else if(typeof t=="object")this.level=t.level||0,this.row=t.row||0,this.col=t.col||0,this.world=t.world||0;else if(typeof t=="string"){const[p,y,g,_]=t.split("/");this.level=parseFloat(p),this.row=parseFloat(y),this.col=parseFloat(g),this.world=parseFloat(_)}else this.level=+t,this.row=+i,this.col=+r,this.world=+a||0;return this}toString(){return`${this.level}/${this.row}/${this.col}/${this.world}`}getParentKey(){return this.level<=0?null:new Ju(this.level-1,this.row>>1,this.col>>1,this.world)}getNormalizedNeighbor(t,i,r){const a=this.clone();return a.col+=t,a.row+=i,r.normalizeKey(a),a}getChildKeys(){const t=this.level+1,i=this.row<<1,r=this.col<<1,a=this.world;return[new Ju(t,i,r,a),new Ju(t,i,r+1,a),new Ju(t,i+1,r,a),new Ju(t,i+1,r+1,a)]}compareRowMajor(t){return this.row<t.row?-1:this.row>t.row?1:this.col<t.col?-1:this.col>t.col?1:0}};tu.pool=new Uh(tu,null,null,25,50);function cc(e,t){return[e,t]}function wu(e,t,i){return e[0]=t,e[1]=i,e}function Sle(e,t,i,r,a){return e[0]=t,e[1]=i,e[2]=r,e[3]=a,e}const hn=new tu("0/0/0/0");let xle=class FD{static create(t,i,r=null){const a=Ir(t.spatialReference),p=i.origin||cc(t.origin.x,t.origin.y),y=cc(t.size[0]*i.resolution,t.size[1]*i.resolution),g=cc(-1/0,-1/0),_=cc(1/0,1/0),T=cc(1/0,1/0);r!=null&&(wu(g,Math.max(0,Math.floor((r.xmin-p[0])/y[0])),Math.max(0,Math.floor((p[1]-r.ymax)/y[1]))),wu(_,Math.max(0,Math.floor((r.xmax-p[0])/y[0])),Math.max(0,Math.floor((p[1]-r.ymin)/y[1]))),wu(T,_[0]-g[0]+1,_[1]-g[1]+1));const{cols:I,rows:A}=i;let P,N,D,z;return!r&&I&&A&&(wu(g,I[0],A[0]),wu(_,I[1],A[1]),wu(T,I[1]-I[0]+1,A[1]-A[0]+1)),t.isWrappable?(P=cc(Math.ceil(Math.round((a.valid[1]-a.valid[0])/i.resolution)/t.size[0]),T[1]),N=!0,D=a.origin,z=a.valid):(P=T,N=!1),new FD(i.level,i.resolution,i.scale,p,g,_,T,y,P,N,D,z)}constructor(t,i,r,a,p,y,g,_,T,I,A,P){this.level=t,this.resolution=i,this.scale=r,this.origin=a,this.first=p,this.last=y,this.size=g,this.norm=_,this.worldSize=T,this.wrap=I,this._spatialReferenceOrigin=A,this._spatialReferenceValid=P}normalizeCol(t){if(!this.wrap)return t;const i=this.worldSize[0];return t<0?i-1-Math.abs((t+1)%i):t%i}normalizeKey(t){if(!this.wrap)return;const i=this.worldSize[0],r=t.col;r<0?(t.col=r+i,t.world-=1):r>=i&&(t.col=r-i,t.world+=1)}denormalizeCol(t,i){return this.wrap?this.worldSize[0]*i+t:t}getWorldForColumn(t){return this.wrap?Math.floor(t/this.worldSize[0]):0}getFirstColumnForWorld(t){return t*this.worldSize[0]+this.first[0]}getLastColumnForWorld(t){return t*this.worldSize[0]+this.first[0]+this.size[0]-1}getColumnForX(t){return(t-this.origin[0])/this.norm[0]}getXForColumn(t){const i=this.origin[0]+t*this.norm[0],r=this._spatialReferenceOrigin,a=this._spatialReferenceValid;return this.wrap&&r&&a?i===r[0]?a[0]:this.origin[0]===r[0]&&t===this.worldSize[0]?a[1]:i:i}getRowForY(t){return(this.origin[1]-t)/this.norm[1]}getYForRow(t){return this.origin[1]-t*this.norm[1]}getTileBounds(t,i,r=!1){hn.set(i);const a=r?hn.col:this.denormalizeCol(hn.col,hn.world),p=hn.row;return Sle(t,this.getXForColumn(a),this.getYForRow(p+1),this.getXForColumn(a+1),this.getYForRow(p)),t}getTileCoords(t,i,r=!1){hn.set(i);const a=r?hn.col:this.denormalizeCol(hn.col,hn.world);return Array.isArray(t)?wu(t,this.getXForColumn(a),this.getYForRow(hn.row)):(t.x=this.getXForColumn(a),t.y=this.getYForRow(hn.row)),t}},n1=class{constructor(){this.spans=[]}acquire(t){this.lodInfo=t}release(){this.lodInfo=null,this.spans.length=0}*keys(){const t=this.lodInfo;for(const{row:i,colFrom:r,colTo:a}of this.spans)for(let p=r;p<=a;p++){const y=t.getWorldForColumn(p);yield new tu(t.level,i,t.normalizeCol(p),y)}}forEach(t,i){const{spans:r,lodInfo:a}=this,{level:p}=a;if(r.length!==0)for(const{row:y,colFrom:g,colTo:_}of r)for(let T=g;T<=_;T++)t.call(i,p,y,a.normalizeCol(T),a.getWorldForColumn(T))}};n1.pool=new Uh(n1);let gb=class{constructor(t,i,r){this.row=t,this.colFrom=i,this.colTo=r}};const zt=new tu("0/0/0/0");let Tle=class zD{static create(t,i){t[1]>i[1]&&([t,i]=[i,t]);const[r,a]=t,[p,y]=i,g=p-r,_=y-a,T=_!==0?g/_:0,I=(Math.ceil(a)-a)*T,A=(Math.floor(a)-a)*T;return new zD(r,Math.floor(a),Math.ceil(y),T,g<0?I:A,g<0?A:I,g<0?p:r,g<0?r:p)}constructor(t,i,r,a,p,y,g,_){this.x=t,this.ymin=i,this.ymax=r,this.invM=a,this.leftAdjust=p,this.rightAdjust=y,this.leftBound=g,this.rightBound=_}incrRow(){this.x+=this.invM}getLeftCol(){return Math.max(this.x+this.leftAdjust,this.leftBound)}getRightCol(){return Math.min(this.x+this.rightAdjust,this.rightBound)}};const ts=[[0,0],[0,0],[0,0],[0,0]],Mle=1e-6;let $le=class{constructor(t,i=null,r=t.lods[0].level,a=t.lods[t.lods.length-1].level){this.tileInfo=t,this.fullExtent=i,this.scales=[],this._infoByScale={},this._infoByLevel={};const p=t.lods.filter(g=>g.level>=r&&g.level<=a);this.minScale=p[0].scale,this.maxScale=p[p.length-1].scale;const y=this._lodInfos=p.map(g=>xle.create(t,g,i));p.forEach((g,_)=>{this._infoByLevel[g.level]=y[_],this._infoByScale[g.scale]=y[_],this.scales[_]=g.scale},this),this._wrap=t.isWrappable}get spatialReference(){return this.tileInfo.spatialReference}getLODInfoAt(t){return this._infoByLevel[typeof t=="number"?t:t.level]}getTileBounds(t,i,r=!1){zt.set(i);const a=this._infoByLevel[zt.level];return a?a.getTileBounds(t,zt,r):t}getTileCoords(t,i,r=!1){zt.set(i);const a=this._infoByLevel[zt.level];return a?a.getTileCoords(t,zt,r):t}getTileCoverage(t,i=192,r=!0,a="closest"){if(!r&&(t.scale>this.minScale||t.scale<this.maxScale))return null;const p=a==="closest"?this.getClosestInfoForScale(t.scale):this.getSmallestInfoForScale(t.scale),y=n1.pool.acquire(p),g=this._wrap;let _,T,I,A=1/0,P=-1/0;const N=y.spans;ts[0][0]=ts[0][1]=ts[1][1]=ts[3][0]=-i,ts[1][0]=ts[2][0]=t.size[0]+i,ts[2][1]=ts[3][1]=t.size[1]+i;for(const J of ts)t.toMap(J,J),J[0]=p.getColumnForX(J[0]),J[1]=p.getRowForY(J[1]);const D=[];let z=3;for(let J=0;J<4;J++){if(ts[J][1]===ts[z][1]){z=J;continue}const ee=Tle.create(ts[J],ts[z]);A=Math.min(ee.ymin,A),P=Math.max(ee.ymax,P),D[ee.ymin]===void 0&&(D[ee.ymin]=[]),D[ee.ymin].push(ee),z=J}if(A==null||P==null||P-A>100)return null;let q=[];for(_=A;_<P;){D[_]!=null&&(q=q.concat(D[_])),T=1/0,I=-1/0;for(let J=q.length-1;J>=0;J--){const ee=q[J];T=Math.min(T,ee.getLeftCol()),I=Math.max(I,ee.getRightCol())}if(T=Math.floor(T),I=Math.floor(I),_>=p.first[1]&&_<=p.last[1])if(g)if(p.size[0]<p.worldSize[0]){const J=Math.floor(I/p.worldSize[0]);for(let ee=Math.floor(T/p.worldSize[0]);ee<=J;ee++)N.push(new gb(_,Math.max(p.getFirstColumnForWorld(ee),T),Math.min(p.getLastColumnForWorld(ee),I)))}else N.push(new gb(_,T,I));else T>p.last[0]||I<p.first[0]||(T=Math.max(T,p.first[0]),I=Math.min(I,p.last[0]),N.push(new gb(_,T,I)));_+=1;for(let J=q.length-1;J>=0;J--){const ee=q[J];ee.ymax>=_?ee.incrRow():q.splice(J,1)}}return y}getTileParentId(t){zt.set(t);const i=this._infoByLevel[zt.level],r=this._lodInfos.indexOf(i)-1;return r<0?null:(this._getTileIdAtLOD(zt,this._lodInfos[r],zt),zt.id)}getTileResolution(t){const i=this._infoByLevel[typeof t=="object"?t.level:t];return i?i.resolution:-1}getTileScale(t){const i=this._infoByLevel[t.level];return i?i.scale:-1}intersects(t,i){zt.set(i);const r=this._infoByLevel[zt.level],a=t.lodInfo;if(a.resolution>r.resolution){this._getTileIdAtLOD(zt,a,zt);const y=a.denormalizeCol(zt.col,zt.world);for(const g of t.spans)if(g.row===zt.row&&g.colFrom<=y&&g.colTo>=y)return!0}if(a.resolution<r.resolution){const[y,g,_,T]=t.spans.reduce((z,q)=>(z[0]=Math.min(z[0],q.row),z[1]=Math.max(z[1],q.row),z[2]=Math.min(z[2],q.colFrom),z[3]=Math.max(z[3],q.colTo),z),[1/0,-1/0,1/0,-1/0]),I=r.denormalizeCol(zt.col,zt.world),A=a.getColumnForX(r.getXForColumn(I)),P=a.getRowForY(r.getYForRow(zt.row)),N=a.getColumnForX(r.getXForColumn(I+1))-1,D=a.getRowForY(r.getYForRow(zt.row+1))-1;return!(A>T||N<_||P>g||D<y)}const p=a.denormalizeCol(zt.col,zt.world);return t.spans.some(y=>y.row===zt.row&&y.colFrom<=p&&y.colTo>=p)}normalizeBounds(t,i,r){if(t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],this._wrap){const a=Ir(this.tileInfo.spatialReference),p=-r*(a.valid[1]-a.valid[0]);t[0]+=p,t[2]+=p}return t}getSmallestInfoForScale(t){const i=this.scales;if(this._infoByScale[t])return this._infoByScale[t];if(t>i[0])return this._infoByScale[i[0]];for(let r=1;r<i.length-1;r++)if(t>i[r]+Mle)return this._infoByScale[i[r-1]];return this._infoByScale[i[i.length-1]]}getClosestInfoForScale(t){const i=this.scales;return this._infoByScale[t]||(t=i.reduce((r,a)=>Math.abs(a-t)<Math.abs(r-t)?a:r,i[0])),this._infoByScale[t]}scaleToLevel(t){const i=this.scales;if(this._infoByScale[t])return this._infoByScale[t].level;for(let r=i.length-1;r>=0;r--)if(t<i[r])return r===i.length-1?this._infoByScale[i[i.length-1]].level:this._infoByScale[i[r]].level+(i[r]-t)/(i[r]-i[r+1]);return this._infoByScale[i[0]].level}scaleToZoom(t){return this.tileInfo.scaleToZoom(t)}zoomToScale(t){return this.tileInfo.zoomToScale(t)}_getTileIdAtLOD(t,i,r){const a=this._infoByLevel[r.level];return t.set(r),i.resolution<a.resolution?null:(i.resolution===a.resolution||(t.level=i.level,t.col=Math.floor(r.col*a.resolution/i.resolution+.01),t.row=Math.floor(r.row*a.resolution/i.resolution+.01)),t)}},Ele=class{constructor(t,i){this.item=t,this.controller=i,this.promise=null}},Ile=class{constructor(t){this._schedule=null,this._task=null,this._deferreds=new Wm,this._controllers=new Wm,this._processingItems=new Wm,this._pausedSignal=Kp(!1),this.concurrency=1,t.concurrency&&(this.concurrency=t.concurrency),this._queue=new uv(t.peeker),this.process=t.process;const i=t.scheduler;t.priority&&i&&(this._task=i.registerTask(t.priority,this))}destroy(){this.clear(),this._schedule=Wt(this._schedule),this._task=Wt(this._task)}get updating(){var t;return!!((t=this._task)!=null&&t.updating)||this.running}get length(){return this._processingItems.size+this._queue.length}abort(t){const i=this._controllers.get(t);i&&i.abort()}clear(){this._queue.clear();const t=[];this._controllers.forEach(i=>t.push(i)),this._controllers.clear(),t.forEach(i=>i.abort()),this._processingItems.clear(),this._cancelNext()}forEach(t){this._deferreds.forEach((i,r)=>t(r))}get(t){const i=this._deferreds.get(t);return i?i.promise:void 0}isOngoing(t){return this._processingItems.has(t)}has(t){return this._deferreds.has(t)}pause(){this._pausedSignal.value||(this._pausedSignal.value=!0,this._cancelNext())}push(t,i){const r=this.get(t);if(r)return r;const a=new AbortController;let p=null;i&&(p=Zs(i,()=>a.abort()));const y=()=>{const I=this._processingItems.get(t);I&&I.controller.abort(),g(),T.reject(Lt())},g=()=>{_.remove(),p!=null&&p.remove(),this._removeItem(t),this._queue.remove(t),this._scheduleNext()},_=X4(a.signal,y),T=_s();return this._deferreds.set(t,T),this._controllers.set(t,a),T.promise.then(g,g),this._queue.push(t),this._scheduleNext(),T.promise}last(){return this._queue.last()}lastPromise(){const t=this.last();return t?this.get(t):null}peek(){return this._queue.peek()}popLast(){var i;const t=this._queue.popLast();return t&&((i=this._deferreds.get(t))==null||i.reject(Lt()),this._removeItem(t)),t}reset(){const t=Array.from(this._processingItems.values());this._processingItems.clear();for(const i of t)this._queue.push(i.item),i.controller.abort();this._scheduleNext()}resume(){this._pausedSignal.value&&(this._pausedSignal.value=!1,this._scheduleNext())}takeAll(){const t=[];for(;this._queue.length;)t.push(this._queue.pop());return this.clear(),t}get running(){return!this._pausedSignal.value&&this._queue.length>0&&this._processingItems.size<this.concurrency}runTask(t){for(;!t.done&&this._queue.length>0&&this._processingItems.size<this.concurrency;)this._process(this._queue.pop()),t.madeProgress()}_removeItem(t){this._deferreds.delete(t),this._controllers.delete(t),this._processingItems.delete(t)}_scheduleNext(){this._task||this._pausedSignal.value||this._schedule||(this._schedule=b1(()=>{this._schedule=null,this._next()}))}_next(){for(;this._queue.length>0&&this._processingItems.size<this.concurrency;)this._process(this._queue.pop())}_cancelNext(){this._schedule&&(this._schedule.remove(),this._schedule=null)}_processResult(t,i){this._canProcessFulfillment(t)&&(this._scheduleNext(),this._deferreds.get(t.item).resolve(i))}_processError(t,i){this._canProcessFulfillment(t)&&(this._scheduleNext(),this._deferreds.get(t.item).reject(i))}_canProcessFulfillment(t){return!!this._deferreds.get(t.item)&&this._processingItems.get(t.item)===t}_process(t){if(t==null)return;let i;const r=new AbortController,a=new Ele(t,r);this._processingItems.set(t,a);try{i=this.process(t,r.signal)}catch(p){this._processError(a,p)}$o(i)?(a.promise=i,i.then(p=>this._processResult(a,p),p=>this._processError(a,p))):this._processResult(a,i)}get test(){}};const $M=[0,0];let Zo=class extends Ae{constructor(t){super(t),this._keyToItem=new Map,this._tilesByScale=new Map,this.concurrency=6}initialize(){const{concurrency:t,process:i,scheduler:r,priority:a}=this;this._queue=new Ile({concurrency:t,scheduler:r,priority:a,process:(p,y)=>{const g=this._keyToItem.get(p);return i(g,{signal:y})},peeker:p=>this._peek(p)})}destroy(){this.clear(),this._queue=Ht(this._queue)}get length(){return this._queue?this._queue.length:0}abort(t){const i=typeof t=="string"?t:t.id;this._queue.abort(i)}clear(){this._queue.clear(),this._keyToItem.clear(),this._tilesByScale.clear()}has(t){return typeof t=="string"?this._keyToItem.has(t):this._keyToItem.has(t.id)}pause(){this._queue.pause()}push(t){const i=t.key.id;if(this._queue.has(i))return this._queue.get(i);const r=this._queue.push(i),a=this.tileInfoView.getTileScale(t.key),p=_1(this._tilesByScale,a,()=>new Set),y=()=>{p.delete(t.key),p.size===0&&this._tilesByScale.delete(a),this._keyToItem.delete(i)};return p.add(t.key),this._keyToItem.set(i,t),r.then(y,y),r}reset(){this._queue.reset()}resume(){this._queue.resume()}_peek(t){if(!this.state)return t.values().next().value;const i=new Set;for(const y of t)i.add(this._keyToItem.get(y).key);const r=this.state.scale;let a,p=Number.POSITIVE_INFINITY;for(const[y,g]of this._tilesByScale)if(vC(g,_=>i.has(_))){const _=Math.abs(y-r);_<p&&(a=g,p=_)}return this._getClosestTileKey(a,t).id}_getClosestTileKey(t,i){const r=this.tileInfoView,a=this.state.center;let p,y=Number.POSITIVE_INFINITY;for(const g of t)if(i.has(g.id)){r.getTileCoords($M,g);const _=N2($M,a);_<y&&(y=_,p=g)}return p}};v([S({constructOnly:!0})],Zo.prototype,"concurrency",void 0),v([S({constructOnly:!0})],Zo.prototype,"priority",void 0),v([S({constructOnly:!0})],Zo.prototype,"process",void 0),v([S({constructOnly:!0})],Zo.prototype,"scheduler",void 0),v([S()],Zo.prototype,"state",void 0),v([S({constructOnly:!0})],Zo.prototype,"tileInfoView",void 0),Zo=v([H("esri.views.2d.tiling.TileQueue")],Zo);const z_e=Zo;let Ale=class{constructor(t,i,r){this.maxSize=t,this._tileInfoView=i,this._removedFunc=r,this._tilePerId=new Map,this._tileKeysPerLevel=[]}clear(){this._tilePerId.clear(),this._tileKeysPerLevel=[]}has(t){return this._tilePerId.has(t)}get(t){return this._tilePerId.get(t)}pop(t){const i=this._tilePerId.get(t);if(!i)return;const r=i.key.level,a=this._tileKeysPerLevel[r];EM(this._tilePerId,t);for(let p=0;p<a.length;p++)if(a[p].id===t){a.splice(p,1);break}return i.visible=!0,i}add(t){t.visible=!1;const i=t.key,r=i.id;if(this._tilePerId.has(r))return;this._tilePerId.set(r,t);const a=i.level;this._tileKeysPerLevel[a]||(this._tileKeysPerLevel[a]=[]),this._tileKeysPerLevel[a].push(i)}prune(t,i,r){let a=this._tilePerId.size;if(a<=this.maxSize)return;let p=this._tileKeysPerLevel.length-1;for(;a>this.maxSize&&p>=0;)p!==t&&(a=this._pruneAroundCenterTile(a,i,r,p)),p--;a>this.maxSize&&(a=this._pruneAroundCenterTile(a,i,r,t))}_pruneAroundCenterTile(t,i,r,a){const p=this._tileKeysPerLevel[a];if(!p||p.length===0)return t;const{size:y,origin:g}=this._tileInfoView.tileInfo,_=r*y[0],T=r*y[1],I=[0,0],A=[0,0];for(p.sort((P,N)=>(I[0]=g.x+_*(P.col+.5),I[1]=g.y-T*(P.row+.5),A[0]=g.x+_*(N.col+.5),A[1]=g.y-T*(N.row+.5),bv(I,i)-bv(A,i)));p.length>0;){const P=p.pop();if(this._removeTile(P.id),--t===this.maxSize)break}return t}_removeTile(t){const i=this._tilePerId.get(t);this._removedFunc&&i&&this._removedFunc(i),EM(this._tilePerId,t)}};function EM(e,t){e.delete(t)}const bu=new tu(0,0,0,0),Ro=new Map,Gd=[],vb=[];let V_e=class{constructor(t){this._previousScale=Number.POSITIVE_INFINITY,this.cachePolicy="keep",this.coveragePolicy="closest",this.resampling=!0,this.tileIndex=new Map,this.tiles=[],this.buffer=192,this.acquireTile=t.acquireTile,this.releaseTile=t.releaseTile,this.tileInfoView=t.tileInfoView,t.resampling!=null&&(this.resampling=t.resampling),t.cachePolicy&&(this.cachePolicy=t.cachePolicy),t.coveragePolicy&&(this.coveragePolicy=t.coveragePolicy),t.buffer!=null&&(this.buffer=t.buffer),t.cacheSize&&(this._tileCache=new Ale(t.cacheSize,this.tileInfoView,i=>{this.releaseTile(i)}))}destroy(){this.tileIndex.clear()}update(t){var J,ee;const{resampling:i,tileIndex:r}=this,{scale:a,center:p,resolution:y}=t.state,{minScale:g,maxScale:_}=this.tileInfoView,T=!t.stationary&&a>this._previousScale;if(this._previousScale=a,!i&&(a>g||a<_))return this.tiles.length=0,void this.clear();const I=this.tileInfoView.getTileCoverage(t.state,this.buffer,this.resampling,this.coveragePolicy);if(!I)return this.tiles.length=0,void this.clear();const{spans:A,lodInfo:P}=I,{level:N}=P;this.tiles.length=0,r.forEach(X=>X.visible=!0);let D=0,z=0;if(A.length>0)for(const{row:X,colFrom:ie,colTo:oe}of A)for(let ue=ie;ue<=oe;ue++){D++;const ge=bu.set(N,X,P.normalizeCol(ue),P.getWorldForColumn(ue)).id;let Se=r.get(ge);if(Se)Se.isReady?(Ro.set(ge,Se),z++):T||this._addParentTile(ge,Ro);else{if((J=this._tileCache)!=null&&J.has(ge)){if(Se=this._tileCache.pop(ge),this.tileIndex.set(ge,Se),Se.isReady){Ro.set(ge,Se),z++;continue}}else Se=this.acquireTile(bu),this.tileIndex.set(ge,Se);T||this._addParentTile(ge,Ro)}}const q=z===D;for(const[X,ie]of r){if(Ro.has(X))continue;bu.set(X);const oe=this.tileInfoView.intersects(I,bu),ue=this.cachePolicy==="purge"?bu.level!==N:bu.level>N;!oe||!T&&q?!ue&&oe||Gd.push(ie):ie.isReady?ue&&this.cachePolicy==="purge"&&this._hasReadyAncestor(bu,N)?Gd.push(ie):vb.push(ie):ue&&Gd.push(ie)}for(const X of vb)X.isReady&&Ro.set(X.key.id,X);for(const X of Gd)this._tileCache?this._tileCache.add(X):this.releaseTile(X),r.delete(X.key.id);for(const X of Ro.values())this.tiles.push(X);for(const X of r.values())Ro.has(X.key.id)||(X.visible=!1);(ee=this._tileCache)==null||ee.prune(N,p,y),n1.pool.release(I),vb.length=0,Gd.length=0,Ro.clear()}clear(){const{tileIndex:t}=this;for(const i of t.values())this.releaseTile(i);t.clear()}refresh(t){var i;for(const r of this.tileIndex.values())t(r);(i=this._tileCache)==null||i.clear()}updateCacheSize(t){this._tileCache&&(this._tileCache.maxSize=t)}_addParentTile(t,i){var p;let r=t,a=null;for(;r=this.tileInfoView.getTileParentId(r),r;)if(this.tileIndex.has(r)){if(a=this.tileIndex.get(r),a==null?void 0:a.isReady){i.has(a.key.id)||i.set(a.key.id,a);break}}else if((p=this._tileCache)!=null&&p.has(r)&&(a=this._tileCache.pop(r),this.tileIndex.set(r,a),a==null?void 0:a.isReady)){i.has(a.key.id)||i.set(a.key.id,a);break}}_hasReadyAncestor(t,i){const r=Oi();this.tileInfoView.getTileBounds(r,t,!0);for(const a of this.tileIndex.values())if(a.isReady&&a.key.level>=i&&a.key.level<t.level){const p=Oi();if(this.tileInfoView.getTileBounds(p,a.key,!0),dY(p,r))return!0}return!1}};function Cle(e,t,i,r,a){UD(e,t,i||0,r||e.length-1,a||Ole)}function UD(e,t,i,r,a){for(;r>i;){if(r-i>600){var p=r-i+1,y=t-i+1,g=Math.log(p),_=.5*Math.exp(2*g/3),T=.5*Math.sqrt(g*_*(p-_)/p)*(y-p/2<0?-1:1);UD(e,t,Math.max(i,Math.floor(t-y*_/p+T)),Math.min(r,Math.floor(t+(p-y)*_/p+T)),a)}var I=e[t],A=i,P=r;for(Bd(e,i,t),a(e[r],I)>0&&Bd(e,i,r);A<P;){for(Bd(e,A,P),A++,P--;a(e[A],I)<0;)A++;for(;a(e[P],I)>0;)P--}a(e[i],I)===0?Bd(e,i,P):Bd(e,++P,r),P<=t&&(i=P+1),t<=P&&(r=P-1)}}function Bd(e,t,i){var r=e[t];e[t]=e[i],e[i]=r}function Ole(e,t){return e<t?-1:e>t?1:0}function Mv(e,t){if(!(this instanceof Mv))return new Mv(e,t);this._maxEntries=Math.max(4,e||9),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),t&&(typeof t=="function"?this.toBBox=t:this._initFormat(t)),this.clear()}function Ple(e,t,i){if(!i)return t.indexOf(e);for(var r=0;r<t.length;r++)if(i(e,t[r]))return r;return-1}function pc(e,t){Vf(e,0,e.children.length,t,e)}function Vf(e,t,i,r,a){a||(a=Dc(null)),a.minX=1/0,a.minY=1/0,a.maxX=-1/0,a.maxY=-1/0;for(var p,y=t;y<i;y++)p=e.children[y],Gf(a,e.leaf?r(p):p);return a}function Gf(e,t){return e.minX=Math.min(e.minX,t.minX),e.minY=Math.min(e.minY,t.minY),e.maxX=Math.max(e.maxX,t.maxX),e.maxY=Math.max(e.maxY,t.maxY),e}function IM(e,t){return e.minX-t.minX}function AM(e,t){return e.minY-t.minY}function wb(e){return(e.maxX-e.minX)*(e.maxY-e.minY)}function Ny(e){return e.maxX-e.minX+(e.maxY-e.minY)}function kle(e,t){return(Math.max(t.maxX,e.maxX)-Math.min(t.minX,e.minX))*(Math.max(t.maxY,e.maxY)-Math.min(t.minY,e.minY))}function Rle(e,t){var i=Math.max(e.minX,t.minX),r=Math.max(e.minY,t.minY),a=Math.min(e.maxX,t.maxX),p=Math.min(e.maxY,t.maxY);return Math.max(0,a-i)*Math.max(0,p-r)}function bb(e,t){return e.minX<=t.minX&&e.minY<=t.minY&&t.maxX<=e.maxX&&t.maxY<=e.maxY}function Ly(e,t){return t.minX<=e.maxX&&t.minY<=e.maxY&&t.maxX>=e.minX&&t.maxY>=e.minY}function Dc(e){return{children:e,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function CM(e,t,i,r,a){for(var p,y=[t,i];y.length;)(i=y.pop())-(t=y.pop())<=r||(p=t+Math.ceil((i-t)/r/2)*r,Cle(e,p,t,i,a),y.push(t,p,p,i))}Mv.prototype={all:function(){return this._all(this.data,[])},search:function(e){var t=this.data,i=[],r=this.toBBox;if(!Ly(e,t))return i;for(var a,p,y,g,_=[];t;){for(a=0,p=t.children.length;a<p;a++)y=t.children[a],Ly(e,g=t.leaf?r(y):y)&&(t.leaf?i.push(y):bb(e,g)?this._all(y,i):_.push(y));t=_.pop()}return i},collides:function(e){var t=this.data,i=this.toBBox;if(!Ly(e,t))return!1;for(var r,a,p,y,g=[];t;){for(r=0,a=t.children.length;r<a;r++)if(p=t.children[r],Ly(e,y=t.leaf?i(p):p)){if(t.leaf||bb(e,y))return!0;g.push(p)}t=g.pop()}return!1},load:function(e){if(!e||!e.length)return this;if(e.length<this._minEntries){for(var t=0,i=e.length;t<i;t++)this.insert(e[t]);return this}var r=this._build(e.slice(),0,e.length-1,0);if(this.data.children.length)if(this.data.height===r.height)this._splitRoot(this.data,r);else{if(this.data.height<r.height){var a=this.data;this.data=r,r=a}this._insert(r,this.data.height-r.height-1,!0)}else this.data=r;return this},insert:function(e){return e!=null&&this._insert(e,this.data.height-1),this},clear:function(){return this.data=Dc([]),this},remove:function(e,t){if(e==null)return this;for(var i,r,a,p,y=this.data,g=this.toBBox(e),_=[],T=[];y||_.length;){if(y||(y=_.pop(),r=_[_.length-1],i=T.pop(),p=!0),y.leaf&&(a=Ple(e,y.children,t))!==-1)return y.children.splice(a,1),_.push(y),this._condense(_),this;p||y.leaf||!bb(y,g)?r?(i++,y=r.children[i],p=!1):y=null:(_.push(y),T.push(i),i=0,r=y,y=y.children[0])}return this},toBBox:function(e){return e},compareMinX:IM,compareMinY:AM,toJSON:function(){return this.data},fromJSON:function(e){return this.data=e,this},_all:function(e,t){for(var i=[];e;)e.leaf?t.push.apply(t,e.children):i.push.apply(i,e.children),e=i.pop();return t},_build:function(e,t,i,r){var a,p=i-t+1,y=this._maxEntries;if(p<=y)return pc(a=Dc(e.slice(t,i+1)),this.toBBox),a;r||(r=Math.ceil(Math.log(p)/Math.log(y)),y=Math.ceil(p/Math.pow(y,r-1))),(a=Dc([])).leaf=!1,a.height=r;var g,_,T,I,A=Math.ceil(p/y),P=A*Math.ceil(Math.sqrt(y));for(CM(e,t,i,P,this.compareMinX),g=t;g<=i;g+=P)for(CM(e,g,T=Math.min(g+P-1,i),A,this.compareMinY),_=g;_<=T;_+=A)I=Math.min(_+A-1,T),a.children.push(this._build(e,_,I,r-1));return pc(a,this.toBBox),a},_chooseSubtree:function(e,t,i,r){for(var a,p,y,g,_,T,I,A;r.push(t),!t.leaf&&r.length-1!==i;){for(I=A=1/0,a=0,p=t.children.length;a<p;a++)_=wb(y=t.children[a]),(T=kle(e,y)-_)<A?(A=T,I=_<I?_:I,g=y):T===A&&_<I&&(I=_,g=y);t=g||t.children[0]}return t},_insert:function(e,t,i){var r=this.toBBox,a=i?e:r(e),p=[],y=this._chooseSubtree(a,this.data,t,p);for(y.children.push(e),Gf(y,a);t>=0&&p[t].children.length>this._maxEntries;)this._split(p,t),t--;this._adjustParentBBoxes(a,p,t)},_split:function(e,t){var i=e[t],r=i.children.length,a=this._minEntries;this._chooseSplitAxis(i,a,r);var p=this._chooseSplitIndex(i,a,r),y=Dc(i.children.splice(p,i.children.length-p));y.height=i.height,y.leaf=i.leaf,pc(i,this.toBBox),pc(y,this.toBBox),t?e[t-1].children.push(y):this._splitRoot(i,y)},_splitRoot:function(e,t){this.data=Dc([e,t]),this.data.height=e.height+1,this.data.leaf=!1,pc(this.data,this.toBBox)},_chooseSplitIndex:function(e,t,i){var r,a,p,y,g,_,T,I;for(_=T=1/0,r=t;r<=i-t;r++)y=Rle(a=Vf(e,0,r,this.toBBox),p=Vf(e,r,i,this.toBBox)),g=wb(a)+wb(p),y<_?(_=y,I=r,T=g<T?g:T):y===_&&g<T&&(T=g,I=r);return I},_chooseSplitAxis:function(e,t,i){var r=e.leaf?this.compareMinX:IM,a=e.leaf?this.compareMinY:AM;this._allDistMargin(e,t,i,r)<this._allDistMargin(e,t,i,a)&&e.children.sort(r)},_allDistMargin:function(e,t,i,r){e.children.sort(r);var a,p,y=this.toBBox,g=Vf(e,0,t,y),_=Vf(e,i-t,i,y),T=Ny(g)+Ny(_);for(a=t;a<i-t;a++)p=e.children[a],Gf(g,e.leaf?y(p):p),T+=Ny(g);for(a=i-t-1;a>=t;a--)p=e.children[a],Gf(_,e.leaf?y(p):p),T+=Ny(_);return T},_adjustParentBBoxes:function(e,t,i){for(var r=i;r>=0;r--)Gf(t[r],e)},_condense:function(e){for(var t,i=e.length-1;i>=0;i--)e[i].children.length===0?i>0?(t=e[i-1].children).splice(t.indexOf(e[i]),1):this.clear():pc(e[i],this.toBBox)},_initFormat:function(e){var t=["return a"," - b",";"];this.compareMinX=new Function("a","b",t.join(e[0])),this.compareMinY=new Function("a","b",t.join(e[1])),this.toBBox=new Function("a","return {minX: a"+e[0]+", minY: a"+e[1]+", maxX: a"+e[2]+", maxY: a"+e[3]+"};")}};function Nle(e,{timeZone:t,timeExtent:i}){return{$view:{scale:e,timeZone:t,timeProperties:{currentStart:i==null?void 0:i.start,currentEnd:i==null?void 0:i.end}}}}let OM=class VD{constructor(t,i){this.key=new tu(0,0,0,0),this.bounds=Oi(),this.objectIds=new Set,this.key.set(i);const r=t.getLODInfoAt(this.key);this.tileInfoView=t,this.tileInfoView.getTileBounds(this.bounds,this.key,!0),this.resolution=r.resolution,this.level=r.level,this.scale=r.scale,this.minScale=t.zoomToScale(r.level-1),this.maxScale=t.zoomToScale(r.level+1)}get lod(){return this.tileInfoView.getLODInfoAt(this.key)}get id(){return this.key.id}get extent(){return cY(this.bounds,this.tileInfoView.tileInfo.spatialReference)}get transform(){return{originPosition:"upperLeft",scale:[this.resolution,this.resolution],translate:[this.bounds[0],this.bounds[3]]}}createArcadeEvaluationOptions(t){return Nle(this.scale,t)}createChildTiles(){const t=this.key.getChildKeys(),i=$r.acquire();for(let r=0;r<t.length;r++)i[r]=new VD(this.tileInfoView,t[r]);return i}getQuantizationParameters(){return hL.fromJSON({mode:"view",originPosition:"upperLeft",tolerance:this.resolution,extent:{xmin:this.bounds[0],ymin:this.bounds[1],xmax:this.bounds[2],ymax:this.bounds[3],spatialReference:this.tileInfoView.tileInfo.spatialReference}})}};const _u={added:[],removed:[]},_b=new Set,Lle=new tu(0,0,0,0);function Dle(e,t){const i=Ir(t);if(!i)return null;const[r,a]=i.valid;return e[2]>a?[Oi([e[0],e[1],a,e[3]]),Oi([r,e[1],r+e[2]-a,e[3]])]:e[0]<r?[Oi([r,e[1],e[2],e[3]]),Oi([a-(r-e[0]),e[1],a,e[3]])]:null}let jle=class extends Ss{constructor(t){super(),this._tiles=new Map,this._index=Mv(9,ne("esri-csp-restrictions")?i=>({minX:i.bounds[0],minY:i.bounds[1],maxX:i.bounds[2],maxY:i.bounds[3]}):[".bounds[0]",".bounds[1]",".bounds[2]",".bounds[3]"]),this.tiles=[],this.tileScheme=t}destroy(){this.clear()}clear(){this.tiles.length=0,this._tiles.clear(),this._index.clear()}has(t){return this._tiles.has(t)}get(t){return this._tiles.get(t)}getIntersectingTiles(t){if(!t||eS(t)===0||tS(t)===0)return[];const i=Dle(t,this.tileScheme.spatialReference);return i!=null?[...new Set([...this.boundsIntersections(i[0]),...this.boundsIntersections(i[1])])]:this.boundsIntersections(t)}boundsIntersections(t){return this._index.search({minX:t[0],minY:t[1],maxX:t[2],maxY:t[3]})}updateTiles(t){const i={added:[],removed:[]};for(const r of t.added)if(!this.has(r)){const a=new OM(this.tileScheme,r);this._tiles.set(r,a),this._index.insert(a),i.added.push(a)}for(const r of t.removed)if(this.has(r)){const a=this.get(r);this._tiles.delete(r),this._index.remove(a),i.removed.push(a)}this.tiles.length=0,this._tiles.forEach(r=>this.tiles.push(r)),(i.added.length||i.removed.length)&&this.emit("update",i)}setViewState(t){const i=this.tileScheme.getTileCoverage(t,0);if(!i)return;const{spans:r,lodInfo:a}=i,{level:p}=a;if(r.length>0)for(const{row:y,colFrom:g,colTo:_}of r)for(let T=g;T<=_;T++){const I=Lle.set(p,y,a.normalizeCol(T),a.getWorldForColumn(T)).id;if(_b.add(I),!this.has(I)){const A=new OM(this.tileScheme,I);this._tiles.set(I,A),this._index.insert(A),this.tiles.push(A),_u.added.push(A)}}for(let y=this.tiles.length-1;y>=0;y--){const g=this.tiles[y];_b.has(g.id)||(this._tiles.delete(g.id),this.tiles.splice(y,1),this._index.remove(g),_u.removed.push(g))}(_u.added.length||_u.removed.length)&&this.emit("update",_u),n1.pool.release(i),_b.clear(),_u.added.length=0,_u.removed.length=0}};const q_e=1e-30,PM=512,Dy=16777216,H_e=8,W_e=29,J_e=24,Z_e=4,K_e=0,Y_e=0,X_e=0,Q_e=1,e4e=2,t4e=3,i4e=4,r4e=5,s4e=6,n4e=12,o4e=13,a4e=5,Fle=6,l4e=5,u4e=6;var kM;(function(e){e[e.FilterFlags=0]="FilterFlags",e[e.Animation=1]="Animation",e[e.GPGPU=2]="GPGPU",e[e.VV=3]="VV",e[e.DD0=4]="DD0",e[e.DD1=5]="DD1",e[e.DD2=6]="DD2",e[e.LocalTimeOrigin=7]="LocalTimeOrigin"})(kM||(kM={}));const GD=6,zle=1<<GD,h4e=zle<<1,c4e=1.05,p4e=3,d4e=1,f4e=3,y4e=3,m4e=5,g4e=6,v4e=1.15,Ule=4,w4e=128,Vle=256,b4e=Vle-2*Ule,_4e=2,S4e=128,x4e=1,T4e=10,M4e=1024,$4e=128,E4e=4,I4e=1,A4e=1<<20,C4e=.75,O4e=10,P4e=.75,k4e=256,R4e=32,N4e=512,L4e=0,D4e=1,Gle=1,j4e=[0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1],F4e=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],qd=256;var RM,NM,LM,DM,c_,jM,FM,lo,p_,P0,Ii,$v,qs,Ft,Pe,o1,ua,zM,UM,VM;(function(e){e[e.DEPTH=256]="DEPTH",e[e.STENCIL=1024]="STENCIL",e[e.COLOR=16384]="COLOR"})(RM||(RM={})),function(e){e[e.POINTS=0]="POINTS",e[e.LINES=1]="LINES",e[e.LINE_LOOP=2]="LINE_LOOP",e[e.LINE_STRIP=3]="LINE_STRIP",e[e.TRIANGLES=4]="TRIANGLES",e[e.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",e[e.TRIANGLE_FAN=6]="TRIANGLE_FAN"}(NM||(NM={})),function(e){e[e.ZERO=0]="ZERO",e[e.ONE=1]="ONE",e[e.SRC_COLOR=768]="SRC_COLOR",e[e.ONE_MINUS_SRC_COLOR=769]="ONE_MINUS_SRC_COLOR",e[e.SRC_ALPHA=770]="SRC_ALPHA",e[e.ONE_MINUS_SRC_ALPHA=771]="ONE_MINUS_SRC_ALPHA",e[e.DST_ALPHA=772]="DST_ALPHA",e[e.ONE_MINUS_DST_ALPHA=773]="ONE_MINUS_DST_ALPHA",e[e.DST_COLOR=774]="DST_COLOR",e[e.ONE_MINUS_DST_COLOR=775]="ONE_MINUS_DST_COLOR",e[e.SRC_ALPHA_SATURATE=776]="SRC_ALPHA_SATURATE",e[e.CONSTANT_COLOR=32769]="CONSTANT_COLOR",e[e.ONE_MINUS_CONSTANT_COLOR=32770]="ONE_MINUS_CONSTANT_COLOR",e[e.CONSTANT_ALPHA=32771]="CONSTANT_ALPHA",e[e.ONE_MINUS_CONSTANT_ALPHA=32772]="ONE_MINUS_CONSTANT_ALPHA"}(LM||(LM={})),function(e){e[e.ADD=32774]="ADD",e[e.MIN=32775]="MIN",e[e.MAX=32776]="MAX",e[e.SUBTRACT=32778]="SUBTRACT",e[e.REVERSE_SUBTRACT=32779]="REVERSE_SUBTRACT"}(DM||(DM={})),function(e){e[e.ARRAY_BUFFER=34962]="ARRAY_BUFFER",e[e.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",e[e.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER",e[e.PIXEL_PACK_BUFFER=35051]="PIXEL_PACK_BUFFER",e[e.PIXEL_UNPACK_BUFFER=35052]="PIXEL_UNPACK_BUFFER",e[e.COPY_READ_BUFFER=36662]="COPY_READ_BUFFER",e[e.COPY_WRITE_BUFFER=36663]="COPY_WRITE_BUFFER",e[e.TRANSFORM_FEEDBACK_BUFFER=35982]="TRANSFORM_FEEDBACK_BUFFER"}(c_||(c_={})),function(e){e[e.FRONT=1028]="FRONT",e[e.BACK=1029]="BACK",e[e.FRONT_AND_BACK=1032]="FRONT_AND_BACK"}(jM||(jM={})),function(e){e[e.CW=2304]="CW",e[e.CCW=2305]="CCW"}(FM||(FM={})),function(e){e[e.BYTE=5120]="BYTE",e[e.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",e[e.SHORT=5122]="SHORT",e[e.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",e[e.INT=5124]="INT",e[e.UNSIGNED_INT=5125]="UNSIGNED_INT",e[e.FLOAT=5126]="FLOAT",e[e.HALF_FLOAT=5131]="HALF_FLOAT"}(lo||(lo={})),function(e){e[e.NEVER=512]="NEVER",e[e.LESS=513]="LESS",e[e.EQUAL=514]="EQUAL",e[e.LEQUAL=515]="LEQUAL",e[e.GREATER=516]="GREATER",e[e.NOTEQUAL=517]="NOTEQUAL",e[e.GEQUAL=518]="GEQUAL",e[e.ALWAYS=519]="ALWAYS"}(p_||(p_={})),function(e){e[e.ZERO=0]="ZERO",e[e.KEEP=7680]="KEEP",e[e.REPLACE=7681]="REPLACE",e[e.INCR=7682]="INCR",e[e.DECR=7683]="DECR",e[e.INVERT=5386]="INVERT",e[e.INCR_WRAP=34055]="INCR_WRAP",e[e.DECR_WRAP=34056]="DECR_WRAP"}(P0||(P0={})),function(e){e[e.NEAREST=9728]="NEAREST",e[e.LINEAR=9729]="LINEAR",e[e.NEAREST_MIPMAP_NEAREST=9984]="NEAREST_MIPMAP_NEAREST",e[e.LINEAR_MIPMAP_NEAREST=9985]="LINEAR_MIPMAP_NEAREST",e[e.NEAREST_MIPMAP_LINEAR=9986]="NEAREST_MIPMAP_LINEAR",e[e.LINEAR_MIPMAP_LINEAR=9987]="LINEAR_MIPMAP_LINEAR"}(Ii||(Ii={})),function(e){e[e.CLAMP_TO_EDGE=33071]="CLAMP_TO_EDGE",e[e.REPEAT=10497]="REPEAT",e[e.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT"}($v||($v={})),function(e){e[e.TEXTURE_2D=3553]="TEXTURE_2D",e[e.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",e[e.TEXTURE_3D=32879]="TEXTURE_3D",e[e.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",e[e.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",e[e.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",e[e.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",e[e.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",e[e.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z",e[e.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY"}(qs||(qs={})),function(e){e[e.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",e[e.DEPTH_STENCIL=34041]="DEPTH_STENCIL",e[e.DEPTH24_STENCIL8=35056]="DEPTH24_STENCIL8",e[e.ALPHA=6406]="ALPHA",e[e.RGB=6407]="RGB",e[e.RGBA=6408]="RGBA",e[e.LUMINANCE=6409]="LUMINANCE",e[e.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",e[e.RED=6403]="RED",e[e.RG=33319]="RG",e[e.RED_INTEGER=36244]="RED_INTEGER",e[e.RG_INTEGER=33320]="RG_INTEGER",e[e.RGB_INTEGER=36248]="RGB_INTEGER",e[e.RGBA_INTEGER=36249]="RGBA_INTEGER"}(Ft||(Ft={})),function(e){e[e.RGBA4=32854]="RGBA4",e[e.R16F=33325]="R16F",e[e.RG16F=33327]="RG16F",e[e.RGB32F=34837]="RGB32F",e[e.RGBA16F=34842]="RGBA16F",e[e.R32F=33326]="R32F",e[e.RG32F=33328]="RG32F",e[e.RGBA32F=34836]="RGBA32F",e[e.R11F_G11F_B10F=35898]="R11F_G11F_B10F",e[e.RGB8=32849]="RGB8",e[e.RGBA8=32856]="RGBA8",e[e.RGB5_A1=32855]="RGB5_A1",e[e.R8=33321]="R8",e[e.RG8=33323]="RG8",e[e.R8I=33329]="R8I",e[e.R8UI=33330]="R8UI",e[e.R16I=33331]="R16I",e[e.R16UI=33332]="R16UI",e[e.R32I=33333]="R32I",e[e.R32UI=33334]="R32UI",e[e.RG8I=33335]="RG8I",e[e.RG8UI=33336]="RG8UI",e[e.RG16I=33337]="RG16I",e[e.RG16UI=33338]="RG16UI",e[e.RG32I=33339]="RG32I",e[e.RG32UI=33340]="RG32UI",e[e.RGB16F=34843]="RGB16F",e[e.RGB9_E5=35901]="RGB9_E5",e[e.SRGB8=35905]="SRGB8",e[e.SRGB8_ALPHA8=35907]="SRGB8_ALPHA8",e[e.RGB565=36194]="RGB565",e[e.RGBA32UI=36208]="RGBA32UI",e[e.RGB32UI=36209]="RGB32UI",e[e.RGBA16UI=36214]="RGBA16UI",e[e.RGB16UI=36215]="RGB16UI",e[e.RGBA8UI=36220]="RGBA8UI",e[e.RGB8UI=36221]="RGB8UI",e[e.RGBA32I=36226]="RGBA32I",e[e.RGB32I=36227]="RGB32I",e[e.RGBA16I=36232]="RGBA16I",e[e.RGB16I=36233]="RGB16I",e[e.RGBA8I=36238]="RGBA8I",e[e.RGB8I=36239]="RGB8I",e[e.R8_SNORM=36756]="R8_SNORM",e[e.RG8_SNORM=36757]="RG8_SNORM",e[e.RGB8_SNORM=36758]="RGB8_SNORM",e[e.RGBA8_SNORM=36759]="RGBA8_SNORM",e[e.RGB10_A2=32857]="RGB10_A2",e[e.RGB10_A2UI=36975]="RGB10_A2UI"}(Pe||(Pe={})),function(e){e[e.FLOAT=5126]="FLOAT",e[e.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",e[e.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",e[e.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",e[e.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",e[e.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",e[e.BYTE=5120]="BYTE",e[e.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",e[e.SHORT=5122]="SHORT",e[e.UNSIGNED_INT=5125]="UNSIGNED_INT",e[e.INT=5124]="INT",e[e.HALF_FLOAT=5131]="HALF_FLOAT",e[e.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",e[e.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",e[e.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",e[e.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV"}(o1||(o1={})),function(e){e[e.DEPTH_COMPONENT16=33189]="DEPTH_COMPONENT16",e[e.STENCIL_INDEX8=36168]="STENCIL_INDEX8",e[e.DEPTH_STENCIL=34041]="DEPTH_STENCIL",e[e.DEPTH_COMPONENT24=33190]="DEPTH_COMPONENT24",e[e.DEPTH_COMPONENT32F=36012]="DEPTH_COMPONENT32F",e[e.DEPTH24_STENCIL8=35056]="DEPTH24_STENCIL8",e[e.DEPTH32F_STENCIL8=36013]="DEPTH32F_STENCIL8"}(ua||(ua={})),function(e){e[e.STATIC_DRAW=35044]="STATIC_DRAW",e[e.DYNAMIC_DRAW=35048]="DYNAMIC_DRAW",e[e.STREAM_DRAW=35040]="STREAM_DRAW",e[e.STATIC_READ=35045]="STATIC_READ",e[e.DYNAMIC_READ=35049]="DYNAMIC_READ",e[e.STREAM_READ=35041]="STREAM_READ",e[e.STATIC_COPY=35046]="STATIC_COPY",e[e.DYNAMIC_COPY=35050]="DYNAMIC_COPY",e[e.STREAM_COPY=35042]="STREAM_COPY"}(zM||(zM={})),function(e){e[e.FRAGMENT_SHADER=35632]="FRAGMENT_SHADER",e[e.VERTEX_SHADER=35633]="VERTEX_SHADER"}(UM||(UM={})),function(e){e[e.FRAMEBUFFER=36160]="FRAMEBUFFER",e[e.READ_FRAMEBUFFER=36008]="READ_FRAMEBUFFER",e[e.DRAW_FRAMEBUFFER=36009]="DRAW_FRAMEBUFFER"}(VM||(VM={}));const z4e=33984;var Ev,GM,BM;(function(e){e[e.Texture=0]="Texture",e[e.BufferObject=1]="BufferObject",e[e.VertexArrayObject=2]="VertexArrayObject",e[e.Shader=3]="Shader",e[e.Program=4]="Program",e[e.FramebufferObject=5]="FramebufferObject",e[e.Renderbuffer=6]="Renderbuffer",e[e.TransformFeedback=7]="TransformFeedback",e[e.Sync=8]="Sync",e[e.UNCOUNTED=9]="UNCOUNTED",e[e.LinesOfCode=9]="LinesOfCode",e[e.Uniform=10]="Uniform",e[e.COUNT=11]="COUNT"})(Ev||(Ev={})),function(e){e[e.COLOR_ATTACHMENT0=36064]="COLOR_ATTACHMENT0",e[e.COLOR_ATTACHMENT1=36065]="COLOR_ATTACHMENT1",e[e.COLOR_ATTACHMENT2=36066]="COLOR_ATTACHMENT2",e[e.COLOR_ATTACHMENT3=36067]="COLOR_ATTACHMENT3",e[e.COLOR_ATTACHMENT4=36068]="COLOR_ATTACHMENT4",e[e.COLOR_ATTACHMENT5=36069]="COLOR_ATTACHMENT5",e[e.COLOR_ATTACHMENT6=36070]="COLOR_ATTACHMENT6",e[e.COLOR_ATTACHMENT7=36071]="COLOR_ATTACHMENT7",e[e.COLOR_ATTACHMENT8=36072]="COLOR_ATTACHMENT8",e[e.COLOR_ATTACHMENT9=36073]="COLOR_ATTACHMENT9",e[e.COLOR_ATTACHMENT10=36074]="COLOR_ATTACHMENT10",e[e.COLOR_ATTACHMENT11=36075]="COLOR_ATTACHMENT11",e[e.COLOR_ATTACHMENT12=36076]="COLOR_ATTACHMENT12",e[e.COLOR_ATTACHMENT13=36077]="COLOR_ATTACHMENT13",e[e.COLOR_ATTACHMENT14=36078]="COLOR_ATTACHMENT14",e[e.COLOR_ATTACHMENT15=36079]="COLOR_ATTACHMENT15"}(GM||(GM={})),function(e){e[e.NONE=0]="NONE",e[e.BACK=1029]="BACK"}(BM||(BM={}));const U4e=33306;var Fi,qM,HM,WM,JM,ZM,KM;(function(e){e[e.COMPRESSED_RGB_S3TC_DXT1_EXT=33776]="COMPRESSED_RGB_S3TC_DXT1_EXT",e[e.COMPRESSED_RGBA_S3TC_DXT1_EXT=33777]="COMPRESSED_RGBA_S3TC_DXT1_EXT",e[e.COMPRESSED_RGBA_S3TC_DXT3_EXT=33778]="COMPRESSED_RGBA_S3TC_DXT3_EXT",e[e.COMPRESSED_RGBA_S3TC_DXT5_EXT=33779]="COMPRESSED_RGBA_S3TC_DXT5_EXT",e[e.COMPRESSED_R11_EAC=37488]="COMPRESSED_R11_EAC",e[e.COMPRESSED_SIGNED_R11_EAC=37489]="COMPRESSED_SIGNED_R11_EAC",e[e.COMPRESSED_RG11_EAC=37490]="COMPRESSED_RG11_EAC",e[e.COMPRESSED_SIGNED_RG11_EAC=37491]="COMPRESSED_SIGNED_RG11_EAC",e[e.COMPRESSED_RGB8_ETC2=37492]="COMPRESSED_RGB8_ETC2",e[e.COMPRESSED_SRGB8_ETC2=37493]="COMPRESSED_SRGB8_ETC2",e[e.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2=37494]="COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2",e[e.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2=37495]="COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2",e[e.COMPRESSED_RGBA8_ETC2_EAC=37496]="COMPRESSED_RGBA8_ETC2_EAC",e[e.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC=37497]="COMPRESSED_SRGB8_ALPHA8_ETC2_EAC"})(Fi||(Fi={})),function(e){e[e.FLOAT=5126]="FLOAT",e[e.FLOAT_VEC2=35664]="FLOAT_VEC2",e[e.FLOAT_VEC3=35665]="FLOAT_VEC3",e[e.FLOAT_VEC4=35666]="FLOAT_VEC4",e[e.INT=5124]="INT",e[e.INT_VEC2=35667]="INT_VEC2",e[e.INT_VEC3=35668]="INT_VEC3",e[e.INT_VEC4=35669]="INT_VEC4",e[e.BOOL=35670]="BOOL",e[e.BOOL_VEC2=35671]="BOOL_VEC2",e[e.BOOL_VEC3=35672]="BOOL_VEC3",e[e.BOOL_VEC4=35673]="BOOL_VEC4",e[e.FLOAT_MAT2=35674]="FLOAT_MAT2",e[e.FLOAT_MAT3=35675]="FLOAT_MAT3",e[e.FLOAT_MAT4=35676]="FLOAT_MAT4",e[e.SAMPLER_2D=35678]="SAMPLER_2D",e[e.SAMPLER_CUBE=35680]="SAMPLER_CUBE",e[e.UNSIGNED_INT=5125]="UNSIGNED_INT",e[e.UNSIGNED_INT_VEC2=36294]="UNSIGNED_INT_VEC2",e[e.UNSIGNED_INT_VEC3=36295]="UNSIGNED_INT_VEC3",e[e.UNSIGNED_INT_VEC4=36296]="UNSIGNED_INT_VEC4",e[e.FLOAT_MAT2x3=35685]="FLOAT_MAT2x3",e[e.FLOAT_MAT2x4=35686]="FLOAT_MAT2x4",e[e.FLOAT_MAT3x2=35687]="FLOAT_MAT3x2",e[e.FLOAT_MAT3x4=35688]="FLOAT_MAT3x4",e[e.FLOAT_MAT4x2=35689]="FLOAT_MAT4x2",e[e.FLOAT_MAT4x3=35690]="FLOAT_MAT4x3",e[e.SAMPLER_3D=35679]="SAMPLER_3D",e[e.SAMPLER_2D_SHADOW=35682]="SAMPLER_2D_SHADOW",e[e.SAMPLER_2D_ARRAY=36289]="SAMPLER_2D_ARRAY",e[e.SAMPLER_2D_ARRAY_SHADOW=36292]="SAMPLER_2D_ARRAY_SHADOW",e[e.SAMPLER_CUBE_SHADOW=36293]="SAMPLER_CUBE_SHADOW",e[e.INT_SAMPLER_2D=36298]="INT_SAMPLER_2D",e[e.INT_SAMPLER_3D=36299]="INT_SAMPLER_3D",e[e.INT_SAMPLER_CUBE=36300]="INT_SAMPLER_CUBE",e[e.INT_SAMPLER_2D_ARRAY=36303]="INT_SAMPLER_2D_ARRAY",e[e.UNSIGNED_INT_SAMPLER_2D=36306]="UNSIGNED_INT_SAMPLER_2D",e[e.UNSIGNED_INT_SAMPLER_3D=36307]="UNSIGNED_INT_SAMPLER_3D",e[e.UNSIGNED_INT_SAMPLER_CUBE=36308]="UNSIGNED_INT_SAMPLER_CUBE",e[e.UNSIGNED_INT_SAMPLER_2D_ARRAY=36311]="UNSIGNED_INT_SAMPLER_2D_ARRAY"}(qM||(qM={})),function(e){e[e.OBJECT_TYPE=37138]="OBJECT_TYPE",e[e.SYNC_CONDITION=37139]="SYNC_CONDITION",e[e.SYNC_STATUS=37140]="SYNC_STATUS",e[e.SYNC_FLAGS=37141]="SYNC_FLAGS"}(HM||(HM={})),function(e){e[e.UNSIGNALED=37144]="UNSIGNALED",e[e.SIGNALED=37145]="SIGNALED"}(WM||(WM={})),function(e){e[e.ALREADY_SIGNALED=37146]="ALREADY_SIGNALED",e[e.TIMEOUT_EXPIRED=37147]="TIMEOUT_EXPIRED",e[e.CONDITION_SATISFIED=37148]="CONDITION_SATISFIED",e[e.WAIT_FAILED=37149]="WAIT_FAILED"}(JM||(JM={})),function(e){e[e.SYNC_GPU_COMMANDS_COMPLETE=37143]="SYNC_GPU_COMMANDS_COMPLETE"}(ZM||(ZM={})),function(e){e[e.SYNC_FLUSH_COMMANDS_BIT=1]="SYNC_FLUSH_COMMANDS_BIT"}(KM||(KM={}));const Ble=()=>ye.getLogger("esri.views.webgl.checkWebGLError");function qle(e,t){switch(t){case e.INVALID_ENUM:return"Invalid Enum. An unacceptable value has been specified for an enumerated argument.";case e.INVALID_VALUE:return"Invalid Value. A numeric argument is out of range.";case e.INVALID_OPERATION:return"Invalid Operation. The specified command is not allowed for the current state.";case e.INVALID_FRAMEBUFFER_OPERATION:return"Invalid Framebuffer operation. The currently bound framebuffer is not framebuffer complete when trying to render to or to read from it.";case e.OUT_OF_MEMORY:return"Out of memory. Not enough memory is left to execute the command.";case e.CONTEXT_LOST_WEBGL:return"WebGL context has been lost";default:return"Unknown error"}}const BD=!!ne("enable-feature:webgl-debug");function qD(){return BD}function V4e(){return BD}function dc(e){if(qD()){const t=e.getError();if(t){const i=qle(e,t),r=new Error().stack;Ble().error(new Y("webgl-error","WebGL error occurred",{message:i,stack:r}))}}}var d_;(function(e){e[e.Texture=0]="Texture",e[e.RenderBuffer=1]="RenderBuffer"})(d_||(d_={}));function Hle(e){switch(e){case lo.BYTE:case lo.UNSIGNED_BYTE:return 1;case lo.SHORT:case lo.UNSIGNED_SHORT:case lo.HALF_FLOAT:return 2;case lo.FLOAT:case lo.INT:case lo.UNSIGNED_INT:return 4}}function Wle(e){const t=e.gl;switch(t.getError()){case t.NO_ERROR:return null;case t.INVALID_ENUM:return"An unacceptable value has been specified for an enumerated argument";case t.INVALID_VALUE:return"An unacceptable value has been specified for an argument";case t.INVALID_OPERATION:return"The specified command is not allowed for the current state";case t.INVALID_FRAMEBUFFER_OPERATION:return"The currently bound framebuffer is not framebuffer complete";case t.OUT_OF_MEMORY:return"Not enough memory is left to execute the command";case t.CONTEXT_LOST_WEBGL:return"WebGL context is lost"}return"Unknown error"}function G4e(e,t,i,r,a=0){var y;const p=e.gl;e.bindBuffer(i);for(const g of r){const _=t.get(g.name);if(_==null){console.warn(`There is no location for vertex attribute '${g.name}' defined.`);continue}const T=a*g.stride;if(g.count<=4)p.vertexAttribPointer(_,g.count,g.type,g.normalized,g.stride,g.offset+T),p.enableVertexAttribArray(_),g.divisor>0&&e.gl.vertexAttribDivisor(_,g.divisor);else if(g.count===9)for(let I=0;I<3;I++)p.vertexAttribPointer(_+I,3,g.type,g.normalized,g.stride,g.offset+12*I+T),p.enableVertexAttribArray(_+I),g.divisor>0&&e.gl.vertexAttribDivisor(_+I,g.divisor);else if(g.count===16)for(let I=0;I<4;I++)p.vertexAttribPointer(_+I,4,g.type,g.normalized,g.stride,g.offset+16*I+T),p.enableVertexAttribArray(_+I),g.divisor>0&&((y=e.gl)==null||y.vertexAttribDivisor(_+I,g.divisor));else console.error("Unsupported vertex attribute element count: "+g.count);if(qD()){const I=Wle(e),A=Hle(g.type),P=g.offset,N=Math.round(A/P)!==A/P?`. Offset not a multiple of stride. DataType requires ${A} bytes, but descriptor has an offset of ${P}`:"";I&&console.error(`Unable to bind vertex attribute "${g.name}" with baseInstanceOffset ${T}${N}:`,I,g)}}}function B4e(e,t,i,r){var p,y,g;const a=e.gl;e.bindBuffer(i);for(const _ of r){const T=t.get(_.name);if(_.count<=4)a.disableVertexAttribArray(T),_.divisor&&_.divisor>0&&((p=e.gl)==null||p.vertexAttribDivisor(T,0));else if(_.count===9)for(let I=0;I<3;I++)a.disableVertexAttribArray(T+I),_.divisor&&_.divisor>0&&((y=e.gl)==null||y.vertexAttribDivisor(T+I,0));else if(_.count===16)for(let I=0;I<4;I++)a.disableVertexAttribArray(T+I),_.divisor&&_.divisor>0&&((g=e.gl)==null||g.vertexAttribDivisor(T+I,0));else console.error("Unsupported vertex attribute element count: "+_.count)}e.unbindBuffer(c_.ARRAY_BUFFER)}function Jle(e){switch(e){case Ft.ALPHA:case Ft.LUMINANCE:case Ft.RED:case Ft.RED_INTEGER:case Pe.R8:case Pe.R8I:case Pe.R8UI:case Pe.R8_SNORM:case ua.STENCIL_INDEX8:return 1;case Ft.LUMINANCE_ALPHA:case Ft.RG:case Ft.RG_INTEGER:case Pe.RGBA4:case Pe.R16F:case Pe.R16I:case Pe.R16UI:case Pe.RG8:case Pe.RG8I:case Pe.RG8UI:case Pe.RG8_SNORM:case Pe.RGB565:case Pe.RGB5_A1:case ua.DEPTH_COMPONENT16:return 2;case Ft.DEPTH_COMPONENT:case Ft.RGB:case Ft.RGB_INTEGER:case Pe.RGB8:case Pe.RGB8I:case Pe.RGB8UI:case Pe.RGB8_SNORM:case Pe.SRGB8:case ua.DEPTH_COMPONENT24:return 3;case Ft.DEPTH_STENCIL:case Ft.DEPTH24_STENCIL8:case Ft.RGBA:case Ft.RGBA_INTEGER:case Pe.RGBA8:case Pe.R32F:case Pe.R11F_G11F_B10F:case Pe.RG16F:case Pe.R32I:case Pe.R32UI:case Pe.RG16I:case Pe.RG16UI:case Pe.RGBA8I:case Pe.RGBA8UI:case Pe.RGBA8_SNORM:case Pe.SRGB8_ALPHA8:case Pe.RGB9_E5:case Pe.RGB10_A2UI:case Pe.RGB10_A2:case ua.DEPTH_STENCIL:case ua.DEPTH_COMPONENT32F:case ua.DEPTH24_STENCIL8:return 4;case ua.DEPTH32F_STENCIL8:return 5;case Pe.RGB16F:case Pe.RGB16I:case Pe.RGB16UI:return 6;case Pe.RG32F:case Pe.RG32I:case Pe.RG32UI:case Pe.RGBA16F:case Pe.RGBA16I:case Pe.RGBA16UI:return 8;case Pe.RGB32F:case Pe.RGB32I:case Pe.RGB32UI:return 12;case Pe.RGBA32F:case Pe.RGBA32I:case Pe.RGBA32UI:return 16;case Fi.COMPRESSED_RGB_S3TC_DXT1_EXT:case Fi.COMPRESSED_RGBA_S3TC_DXT1_EXT:return .5;case Fi.COMPRESSED_RGBA_S3TC_DXT3_EXT:case Fi.COMPRESSED_RGBA_S3TC_DXT5_EXT:return 1;case Fi.COMPRESSED_R11_EAC:case Fi.COMPRESSED_SIGNED_R11_EAC:case Fi.COMPRESSED_RGB8_ETC2:case Fi.COMPRESSED_SRGB8_ETC2:case Fi.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2:case Fi.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2:return .5;case Fi.COMPRESSED_RG11_EAC:case Fi.COMPRESSED_SIGNED_RG11_EAC:case Fi.COMPRESSED_RGBA8_ETC2_EAC:case Fi.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:return 1}return 0}let HD=class{constructor(t=0,i=t){this.width=t,this.height=i,this.target=qs.TEXTURE_2D,this.pixelFormat=Ft.RGBA,this.dataType=o1.UNSIGNED_BYTE,this.samplingMode=Ii.LINEAR,this.wrapMode=$v.REPEAT,this.maxAnisotropy=1,this.flipped=!1,this.hasMipmap=!1,this.isOpaque=!1,this.unpackAlignment=4,this.preMultiplyAlpha=!1,this.shouldCompress=!1,this.depth=1,this.isImmutable=!1}};function Zle(e){return e.width<=0||e.height<=0?0:Math.round(e.width*e.height*e.depth*(e.hasMipmap?4/3:1)*(e.internalFormat==null?4:Jle(e.internalFormat))*(e.target===qs.TEXTURE_CUBE_MAP?6:1))}const Kle=()=>ye.getLogger("esri/views/webgl/textureUtils");function jy(e){(e.width!=null&&e.width<0||e.height!=null&&e.height<0||e.depth!=null&&e.depth<0)&&Kle().error("Negative dimension parameters are not allowed!")}function Yle(e){return e in Pe}function Xle(e){return e in Fi}function jc(e){return e!=null&&"type"in e&&e.type==="compressed"}function Qle(e){return e!=null&&"byteLength"in e}function YM(e){return e!=null&&!jc(e)&&!Qle(e)}function fc(e){return e===qs.TEXTURE_3D||e===qs.TEXTURE_2D_ARRAY}function XM(e,t,i,r=1){let a=Math.max(t,i);return e===qs.TEXTURE_3D&&(a=Math.max(a,r)),Math.floor(Math.log2(a))+1}function Fy(e){if(e.internalFormat!=null)return e.internalFormat===Ft.DEPTH_STENCIL?Ft.DEPTH24_STENCIL8:e.internalFormat;switch(e.dataType){case o1.FLOAT:switch(e.pixelFormat){case Ft.RGBA:return Pe.RGBA32F;case Ft.RGB:return Pe.RGB32F;default:throw new Y("Unable to derive format")}case o1.UNSIGNED_BYTE:switch(e.pixelFormat){case Ft.RGBA:return Pe.RGBA8;case Ft.RGB:return Pe.RGB8}}return e.internalFormat=e.pixelFormat===Ft.DEPTH_STENCIL?Ft.DEPTH24_STENCIL8:e.pixelFormat}function eue(e){let t="width"in e?e.width:e.codedWidth,i="height"in e?e.height:e.codedHeight;return e instanceof HTMLVideoElement&&(t=e.videoWidth,i=e.videoHeight),{width:t,height:i,depth:1}}let tue=class WD extends HD{constructor(t,i){switch(super(),this.context=t,Object.assign(this,i),this.internalFormat){case Pe.R16F:case Pe.R16I:case Pe.R16UI:case Pe.R32F:case Pe.R32I:case Pe.R32UI:case Pe.R8_SNORM:case Pe.R8:case Pe.R8I:case Pe.R8UI:this.pixelFormat=Ft.RED}}static validate(t,i){return new WD(t,i)}};const qa=()=>ye.getLogger("esri/views/webgl/Texture");let f_=class _r{constructor(t,i=null,r=null){if(this.type=d_.Texture,this._glName=null,this._samplingModeDirty=!1,this._wrapModeDirty=!1,this._wasImmutablyAllocated=!1,this._compressionAbortController=Kp(null),"context"in t)this._descriptor=t,r=i;else{const a=tue.validate(t,i);if(!a)throw new Y("Texture descriptor invalid");this._descriptor=a}this._descriptor.target===qs.TEXTURE_CUBE_MAP?this._setDataCubeMap(r):this.setData(r)}get glName(){return this._glName}get descriptor(){return this._descriptor}get usedMemory(){return Zle(this._descriptor)}get cachedMemory(){return this.usedMemory}get isDirty(){return this._samplingModeDirty||this._wrapModeDirty}get isCompressing(){return this._compressionAbortController.value!==null}dispose(){this.abortCompression(),this._glName&&this._descriptor.context.instanceCounter.decrement(Ev.Texture,this),this._descriptor.context.gl&&this._glName&&(this._descriptor.context.unbindTexture(this),this._descriptor.context.gl.deleteTexture(this._glName),this._glName=null)}release(){this.dispose()}resize(t,i){const r=this._descriptor;if(r.width!==t||r.height!==i){if(this._wasImmutablyAllocated)throw new Y("Immutable textures can't be resized!");r.width=t,r.height=i,this._descriptor.target===qs.TEXTURE_CUBE_MAP?this._setDataCubeMap(null):this.setData(null)}}enableCompression(t){this._descriptor.shouldCompress=t}setData(t){this.abortCompression(),!jc(t)&&this._descriptor.internalFormat&&this._descriptor.internalFormat in Fi&&(this._descriptor.internalFormat=void 0),this._setData(t),!jc(t)&&this._descriptor.shouldCompress&&this._compressOnWorker(t)}updateData(t,i,r,a,p,y,g=0){y||qa().error("An attempt to use uninitialized data!"),this._glName||qa().error("An attempt to update uninitialized texture!");const _=this._descriptor;_.internalFormat=Fy(_);const{context:T,pixelFormat:I,dataType:A,target:P,isImmutable:N}=_;if(N&&!this._wasImmutablyAllocated)throw new Y("Cannot update immutable texture before allocation!");const D=T.bindTexture(this,_r.TEXTURE_UNIT_FOR_UPDATES,!0);(i<0||r<0||i+a>_.width||r+p>_.height)&&qa().error("An attempt to update out of bounds of the texture!"),this._configurePixelStorage();const{gl:z}=T;g&&(a&&p||qa().warn("Must pass width and height if `UNPACK_SKIP_ROWS` is used"),z.pixelStorei(z.UNPACK_SKIP_ROWS,g)),YM(y)?z.texSubImage2D(P,t,i,r,a,p,I,A,y):jc(y)?z.compressedTexSubImage2D(P,t,i,r,a,p,_.internalFormat,y.levels[t]):z.texSubImage2D(P,t,i,r,a,p,I,A,y),g&&z.pixelStorei(z.UNPACK_SKIP_ROWS,0),T.bindTexture(D,_r.TEXTURE_UNIT_FOR_UPDATES)}updateData3D(t,i,r,a,p,y,g,_){_||qa().error("An attempt to use uninitialized data!"),this._glName||qa().error("An attempt to update an uninitialized texture!");const T=this._descriptor;T.internalFormat=Fy(T);const{context:I,pixelFormat:A,dataType:P,isImmutable:N,target:D}=T;if(N&&!this._wasImmutablyAllocated)throw new Y("Cannot update immutable texture before allocation!");fc(D)||qa().warn("Attempting to set 3D texture data on a non-3D texture");const z=I.bindTexture(this,_r.TEXTURE_UNIT_FOR_UPDATES);I.setActiveTexture(_r.TEXTURE_UNIT_FOR_UPDATES),(i<0||r<0||a<0||i+p>T.width||r+y>T.height||a+g>T.depth)&&qa().error("An attempt to update out of bounds of the texture!"),this._configurePixelStorage();const{gl:q}=I;if(jc(_))_=_.levels[t],q.compressedTexSubImage3D(D,t,i,r,a,p,y,g,T.internalFormat,_);else{const J=_;q.texSubImage3D(D,t,i,r,a,p,y,g,A,P,J)}I.bindTexture(z,_r.TEXTURE_UNIT_FOR_UPDATES)}generateMipmap(){const t=this._descriptor;if(t.width===0||t.height===0)return;if(!t.hasMipmap){if(this._wasImmutablyAllocated)throw new Y("Cannot add mipmaps to immutable texture after allocation");t.hasMipmap=!0,this._samplingModeDirty=!0,jy(t)}t.samplingMode===Ii.LINEAR?(this._samplingModeDirty=!0,t.samplingMode=Ii.LINEAR_MIPMAP_NEAREST):t.samplingMode===Ii.NEAREST&&(this._samplingModeDirty=!0,t.samplingMode=Ii.NEAREST_MIPMAP_NEAREST);const i=this._descriptor.context.bindTexture(this,_r.TEXTURE_UNIT_FOR_UPDATES);this._descriptor.context.setActiveTexture(_r.TEXTURE_UNIT_FOR_UPDATES),this._descriptor.context.gl.generateMipmap(t.target),this._descriptor.context.bindTexture(i,_r.TEXTURE_UNIT_FOR_UPDATES)}clearMipmap(){const t=this._descriptor;if(t.hasMipmap){if(this._wasImmutablyAllocated)throw new Y("Cannot delete mipmaps to immutable texture after allocation");t.hasMipmap=!1,this._samplingModeDirty=!0,jy(t)}t.samplingMode===Ii.LINEAR_MIPMAP_NEAREST?(this._samplingModeDirty=!0,t.samplingMode=Ii.LINEAR):t.samplingMode===Ii.NEAREST_MIPMAP_NEAREST&&(this._samplingModeDirty=!0,t.samplingMode=Ii.NEAREST)}setSamplingMode(t){t!==this._descriptor.samplingMode&&(this._descriptor.samplingMode=t,this._samplingModeDirty=!0)}setWrapMode(t){t!==this._descriptor.wrapMode&&(this._descriptor.wrapMode=t,jy(this._descriptor),this._wrapModeDirty=!0)}applyChanges(){this._samplingModeDirty&&(this._applySamplingMode(),this._samplingModeDirty=!1),this._wrapModeDirty&&(this._applyWrapMode(),this._wrapModeDirty=!1)}abortCompression(){this.isCompressing&&(this._compressionAbortController.value=Lp(this._compressionAbortController.value))}_setData(t,i){var _;const r=this._descriptor,a=(_=r.context)==null?void 0:_.gl;if(!a)return;dc(a),this._glName||(this._glName=a.createTexture(),this._glName&&r.context.instanceCounter.increment(Ev.Texture,this)),jy(r);const p=r.context.bindTexture(this,_r.TEXTURE_UNIT_FOR_UPDATES);r.context.setActiveTexture(_r.TEXTURE_UNIT_FOR_UPDATES),this._configurePixelStorage(),dc(a);const y=i??r.target,g=fc(y);if(YM(t))this._setDataFromTexImageSource(t,y);else{const{width:T,height:I,depth:A}=r;if(T==null||I==null)throw new Y("Width and height must be specified!");if(g&&A==null)throw new Y("Depth must be specified!");if(r.internalFormat=Fy(r),r.isImmutable&&!this._wasImmutablyAllocated&&this._texStorage(y,r.internalFormat,r.hasMipmap,T,I,A),jc(t)){if(!Xle(r.internalFormat))throw new Y("Attempting to use compressed data with an uncompressed format!");this._setDataFromCompressedSource(t,r.internalFormat,y)}else this._texImage(y,0,r.internalFormat,T,I,A,t),dc(a),r.hasMipmap&&this.generateMipmap()}this._applySamplingMode(),this._applyWrapMode(),this._applyAnisotropicFilteringParameters(),dc(a),r.context.bindTexture(p,_r.TEXTURE_UNIT_FOR_UPDATES)}_setDataCubeMap(t=null){for(let i=qs.TEXTURE_CUBE_MAP_POSITIVE_X;i<=qs.TEXTURE_CUBE_MAP_NEGATIVE_Z;i++)this._setData(t,i)}_configurePixelStorage(){const t=this._descriptor.context.gl,{unpackAlignment:i,flipped:r,preMultiplyAlpha:a}=this._descriptor;t.pixelStorei(t.UNPACK_ALIGNMENT,i),t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,r?1:0),t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,a?1:0)}_setDataFromTexImageSource(t,i){const{gl:r}=this._descriptor.context,a=this._descriptor;a.internalFormat=Fy(a);const p=fc(i),{width:y,height:g,depth:_}=eue(t);a.width&&a.height,a.width||(a.width=y),a.height||(a.height=g),p&&a.depth,p&&(a.depth=_),a.isImmutable&&!this._wasImmutablyAllocated&&this._texStorage(i,a.internalFormat,a.hasMipmap,y,g,_),this._texImage(i,0,a.internalFormat,y,g,_,t),dc(r),a.hasMipmap&&(this.generateMipmap(),dc(r))}_setDataFromCompressedSource(t,i,r){const a=this._descriptor,{width:p,height:y,depth:g}=a,_=t.levels,T=XM(r,p,y,g),I=Math.min(T,_.length)-1;this._descriptor.context.gl.texParameteri(a.target,a.context.gl.TEXTURE_MAX_LEVEL,I),this._forEachMipmapLevel((A,P,N,D)=>{const z=_[Math.min(A,_.length-1)];this._compressedTexImage(r,A,i,P,N,D,z)},I)}_texStorage(t,i,r,a,p,y){const{gl:g}=this._descriptor.context;if(!Yle(i))throw new Y("Immutable textures must have a sized internal format");if(!this._descriptor.isImmutable)return;const _=r?XM(t,a,p,y):1;if(fc(t)){if(y==null)throw new Y("Missing depth dimension for 3D texture upload");g.texStorage3D(t,_,i,a,p,y)}else g.texStorage2D(t,_,i,a,p);this._wasImmutablyAllocated=!0}_texImage(t,i,r,a,p,y,g){const _=this._descriptor.context.gl,T=fc(t),{isImmutable:I,pixelFormat:A,dataType:P}=this._descriptor;if(I){if(g!=null){const N=g;if(T){if(y==null)throw new Y("Missing depth dimension for 3D texture upload");_.texSubImage3D(t,i,0,0,0,a,p,y,A,P,N)}else _.texSubImage2D(t,i,0,0,a,p,A,P,N)}}else{const N=g;if(T){if(y==null)throw new Y("Missing depth dimension for 3D texture upload");_.texImage3D(t,i,r,a,p,y,0,A,P,N)}else _.texImage2D(t,i,r,a,p,0,A,P,N)}}_compressedTexImage(t,i,r,a,p,y,g){const _=this._descriptor.context.gl,T=fc(t);if(this._descriptor.isImmutable){if(g!=null)if(T){if(y==null)throw new Y("Missing depth dimension for 3D texture upload");_.compressedTexSubImage3D(t,i,0,0,0,a,p,y,r,g)}else _.compressedTexSubImage2D(t,i,0,0,a,p,r,g)}else if(T){if(y==null)throw new Y("Missing depth dimension for 3D texture upload");_.compressedTexImage3D(t,i,r,a,p,y,0,g)}else _.compressedTexImage2D(t,i,r,a,p,0,g)}async _compressOnWorker(t){var a,p;if(!_r.compressionWorkerHandle||!_r.compressionWorkerHandle.isCompressible(t))return;const i=(a=this._descriptor.context)==null?void 0:a.gl.getExtension("WEBGL_compressed_texture_etc"),r=(p=this._descriptor.context)==null?void 0:p.gl.getExtension("WEBGL_compressed_texture_s3tc");if(i||r){const y=new AbortController;this._compressionAbortController.value=y;const g={data:await createImageBitmap(t),flipped:this.descriptor.flipped,width:t.width,height:t.height,hasMipmap:this._descriptor.hasMipmap,hasETC:!!i,hasS3TC:!!r};_r.compressionWorkerHandle.invoke(g,this._compressionAbortController.value.signal).then(_=>{_&&this.isCompressing&&this.glName&&(this._descriptor.internalFormat=_.internalFormat,this._setData(_.compressedTexture)),y===this._compressionAbortController.value&&(this._compressionAbortController.value=null)}).catch(_=>{Si(_)||y!==this._compressionAbortController.value||(this._compressionAbortController.value=null)})}}_forEachMipmapLevel(t,i=1/0){let{width:r,height:a,depth:p,hasMipmap:y,target:g}=this._descriptor;const _=g===qs.TEXTURE_3D;if(r==null||a==null||_&&p==null)throw new Y("Missing texture dimensions for mipmap calculation");for(let T=0;t(T,r,a,p),y&&(r!==1||a!==1||_&&p!==1)&&!(T>=i);++T)r=Math.max(1,r>>1),a=Math.max(1,a>>1),_&&(p=Math.max(1,p>>1))}_applySamplingMode(){var p;const t=this._descriptor,i=(p=t.context)==null?void 0:p.gl;let r=t.samplingMode,a=t.samplingMode;r===Ii.LINEAR_MIPMAP_NEAREST||r===Ii.LINEAR_MIPMAP_LINEAR?(r=Ii.LINEAR,t.hasMipmap||(a=Ii.LINEAR)):r!==Ii.NEAREST_MIPMAP_NEAREST&&r!==Ii.NEAREST_MIPMAP_LINEAR||(r=Ii.NEAREST,t.hasMipmap||(a=Ii.NEAREST)),i.texParameteri(t.target,i.TEXTURE_MAG_FILTER,r),i.texParameteri(t.target,i.TEXTURE_MIN_FILTER,a)}_applyWrapMode(){var r;const t=this._descriptor,i=(r=t.context)==null?void 0:r.gl;typeof t.wrapMode=="number"?(i.texParameteri(t.target,i.TEXTURE_WRAP_S,t.wrapMode),i.texParameteri(t.target,i.TEXTURE_WRAP_T,t.wrapMode)):(i.texParameteri(t.target,i.TEXTURE_WRAP_S,t.wrapMode.s),i.texParameteri(t.target,i.TEXTURE_WRAP_T,t.wrapMode.t))}_applyAnisotropicFilteringParameters(){const t=this._descriptor,i=t.context.capabilities.textureFilterAnisotropic;i&&t.context.gl.texParameterf(t.target,i.TEXTURE_MAX_ANISOTROPY,t.maxAnisotropy??1)}};f_.TEXTURE_UNIT_FOR_UPDATES=0,f_.compressionWorkerHandle=null;const Sb=()=>ye.getLogger("esri.views.2d.engine.webgl.painter.highlight.HighlightGradient");function iue(e,t){t.fillColor[0]=e.color.r/255,t.fillColor[1]=e.color.g/255,t.fillColor[2]=e.color.b/255,t.fillColor[3]=e.color.a,e.haloColor?(t.outlineColor[0]=e.haloColor.r/255,t.outlineColor[1]=e.haloColor.g/255,t.outlineColor[2]=e.haloColor.b/255,t.outlineColor[3]=e.haloColor.a):(t.outlineColor[0]=t.fillColor[0],t.outlineColor[1]=t.fillColor[1],t.outlineColor[2]=t.fillColor[2],t.outlineColor[3]=t.fillColor[3]),t.fillColor[3]*=e.fillOpacity,t.outlineColor[3]*=e.haloOpacity,t.fillColor[0]*=t.fillColor[3],t.fillColor[1]*=t.fillColor[3],t.fillColor[2]*=t.fillColor[3],t.outlineColor[0]*=t.outlineColor[3],t.outlineColor[1]*=t.outlineColor[3],t.outlineColor[2]*=t.outlineColor[3],t.outlineWidth=(1-e.haloBlur)*e.haloWidth,t.outerHaloWidth=e.haloBlur*e.haloWidth/2,t.innerHaloWidth=e.haloBlur*e.haloWidth/2,t.outlinePosition=0}const rue=[0,0,0,0];let JD=class{constructor(){this.type="single",this._highlightOptions=new Bl,this._convertedHighlightOptions={fillColor:[0,0,0,0],outlineColor:[0,0,0,0],outlinePosition:0,outlineWidth:0,innerHaloWidth:0,outerHaloWidth:0},this._optionsShadeTexKey="",this._texelData=new Uint8Array(4*qd),this._minMaxDistance=[0,0]}setHighlightOptions(t){this._highlightOptions=t}applyHighlightOptions(t,i){this._updateGradientTexture(t),t.bindTexture(this._shadeTex,Fle),i.setUniform2fv("u_minMaxDistance",this._minMaxDistance)}destroy(){var t;(t=this._shadeTex)==null||t.dispose(),this._shadeTex=null}getReasonsWithGradients(){return[{activeReasons:(1<<GD)-1,activeGradient:this}]}_updateGradientTexture(t){const i=sue(this._highlightOptions);if(i===this._optionsShadeTexKey)return;this._optionsShadeTexKey=i,iue(this._highlightOptions,this._convertedHighlightOptions);const r=this._convertedHighlightOptions,a=r.outlinePosition-r.outlineWidth/2-r.outerHaloWidth,p=r.outlinePosition-r.outlineWidth/2,y=r.outlinePosition+r.outlineWidth/2,g=r.outlinePosition+r.outlineWidth/2+r.innerHaloWidth,_=Math.sqrt(Math.PI/2)*Gle,T=Math.abs(a)>_?Math.round(10*(Math.abs(a)-_))/10:0,I=Math.abs(g)>_?Math.round(10*(Math.abs(g)-_))/10:0;let A;T&&!I?Sb().error("The outer rim of the highlight is "+T+"px away from the edge of the feature; consider reducing some width values or shifting the outline position towards positive values (inwards)."):!T&&I?Sb().error("The inner rim of the highlight is "+I+"px away from the edge of the feature; consider reducing some width values or shifting the outline position towards negative values (outwards)."):T&&I&&Sb().error("The highlight is "+Math.max(T,I)+"px away from the edge of the feature; consider reducing some width values.");const P=[void 0,void 0,void 0,void 0];function N(z,q,J){P[0]=(1-J)*z[0]+J*q[0],P[1]=(1-J)*z[1]+J*q[1],P[2]=(1-J)*z[2]+J*q[2],P[3]=(1-J)*z[3]+J*q[3]}const{_texelData:D}=this;for(let z=0;z<qd;++z)A=a+z/(qd-1)*(g-a),A<a?(P[0]=0,P[1]=0,P[2]=0,P[3]=0):A<p?N(rue,r.outlineColor,(A-a)/(p-a)):A<y?[P[0],P[1],P[2],P[3]]=r.outlineColor:A<g?N(r.outlineColor,r.fillColor,(A-y)/(g-y)):[P[0],P[1],P[2],P[3]]=r.fillColor,D[4*z]=255*P[0],D[4*z+1]=255*P[1],D[4*z+2]=255*P[2],D[4*z+3]=255*P[3];if(this._minMaxDistance[0]=a,this._minMaxDistance[1]=g,!this._shadeTex){const z=new HD;z.wrapMode=$v.CLAMP_TO_EDGE,z.width=qd,z.height=1,this._shadeTex=new f_(t,z)}this._shadeTex.updateData(0,0,0,qd,1,this._texelData)}};function sue(e){return`${e.color};${e.haloColor};${e.haloOpacity};${e.fillOpacity};${e.haloWidth};${e.haloBlur}`}let nue=class{constructor(){this.type="multi",this.gradients=[]}setHighlightOptions(t){for(let i=0;i<t.length;i++)this.gradients[i]||(this.gradients[i]=new JD),this.gradients[i].setHighlightOptions(t[i]);for(let i=t.length+1;i<this.gradients.length;i++)this.gradients[i].destroy();this.gradients.length=t.length}destroy(){for(const t of this.gradients)t.destroy()}getReasonsWithGradients(){let t=1;const i=[];for(let r=0;r<this.gradients.length;r++){const a=this.gradients[r];i.push({activeReasons:t,activeGradient:a}),t<<=1}return i}};var QM,e$,t$,i$,r$,s$,Iv,n$,o$;(function(e){e[e.FILL=0]="FILL",e[e.LINE=1]="LINE",e[e.MARKER=2]="MARKER",e[e.TEXT=3]="TEXT",e[e.LABEL=4]="LABEL"})(QM||(QM={})),function(e){e[e.NONE=0]="NONE",e[e.MAP=1]="MAP",e[e.LABEL=2]="LABEL",e[e.LABEL_ALPHA=4]="LABEL_ALPHA",e[e.HITTEST=8]="HITTEST",e[e.HIGHLIGHT=16]="HIGHLIGHT",e[e.CLIP=32]="CLIP",e[e.DEBUG=64]="DEBUG",e[e.NUM_DRAW_PHASES=9]="NUM_DRAW_PHASES"}(e$||(e$={})),function(e){e[e.SIZE=0]="SIZE",e[e.COLOR=1]="COLOR",e[e.OPACITY=2]="OPACITY",e[e.ROTATION=3]="ROTATION"}(t$||(t$={})),function(e){e[e.MINMAX_TARGETS_OUTLINE=128]="MINMAX_TARGETS_OUTLINE",e[e.SCALE_TARGETS_OUTLINE=256]="SCALE_TARGETS_OUTLINE",e[e.FIELD_TARGETS_OUTLINE=512]="FIELD_TARGETS_OUTLINE",e[e.UNIT_TARGETS_OUTLINE=1024]="UNIT_TARGETS_OUTLINE"}(i$||(i$={})),function(e){e[e.SPRITE=0]="SPRITE",e[e.GLYPH=1]="GLYPH"}(r$||(r$={})),function(e){e[e.DEFAULT=0]="DEFAULT",e[e.SIMPLE=1]="SIMPLE",e[e.DOT_DENSITY=2]="DOT_DENSITY",e[e.OUTLINE_FILL=3]="OUTLINE_FILL",e[e.OUTLINE_FILL_SIMPLE=4]="OUTLINE_FILL_SIMPLE",e[e.HEATMAP=5]="HEATMAP",e[e.PIE_CHART=6]="PIE_CHART"}(s$||(s$={})),function(e){e[e.All=0]="All",e[e.Highlight=1]="Highlight",e[e.InsideEffect=2]="InsideEffect",e[e.OutsideEffect=3]="OutsideEffect"}(Iv||(Iv={})),function(e){e[e.BATCHING=0]="BATCHING",e[e.STRICT_ORDER=1]="STRICT_ORDER",e[e.STRICT_MARKERS_AND_TEXT=2]="STRICT_MARKERS_AND_TEXT"}(n$||(n$={})),function(e){e[e.FILL=0]="FILL",e[e.LINE=1]="LINE",e[e.MARKER=2]="MARKER",e[e.TEXT=3]="TEXT"}(o$||(o$={}));const ZD={color:{write:[!0,!0,!0,!0],blendMode:"composite"},depth:!1,stencil:{write:!1,test:{ref:e=>e.stencilRef,compare:p_.EQUAL,mask:255,op:{fail:P0.KEEP,zFail:P0.KEEP,zPass:P0.REPLACE}}}},oue={color:{write:[!0,!0,!0,!0],blendMode:"additive"},depth:!1,stencil:!1},aue={...ZD,color:{write:[!0,!0,!0,!0],blendMode:"delete"}};function lue({pixelRatio:e,state:t,displayLevel:i,requiredLevel:r},a){const p=1/2**(i-a.key.level),y=1/2**(r-a.key.level);return{displayMat3:t.displayMat3,displayViewMat3:t.displayViewMat3,displayViewScreenMat3:a.transforms.displayViewScreenMat3,viewMat3:t.viewMat3,tileMat3:a.transforms.tileMat3,displayZoomFactor:p,requiredZoomFactor:y,tileOffset:[a.x,a.y],currentScale:t.scale,currentZoom:i,metersPerSRUnit:Ts(t.spatialReference),rotation:t.rotation,pixelRatio:e}}function KD(e){var t;return((t=e.passOptions)==null?void 0:t.type)==="highlight"}function YD(e){var t;return((t=e.passOptions)==null?void 0:t.type)==="hittest"}function uue(e){if(!YD(e))return null;const{position:t,distance:i,smallSymbolDistance:r,smallSymbolSizeThreshold:a}=e.passOptions;return{position:t,distance:i,smallSymbolDistance:r,smallSymbolSizeThreshold:a}}function hue(e){if(!KD(e))return null;const{activeReasons:t,highlightAll:i}=e.passOptions;return{activeReasons:t,highlightAll:i?1:0}}function J4e(e,t,i){const r={};for(const a in i)i[a]instanceof Function?r[a]=i[a](e,t):r[a]=i[a];return r}function Z4e(e,t){const{attributeView:i,context:r}=e;return{storage:i.getUniforms(r),view:lue(e,t),hittestRequest:uue(e),highlight:hue(e)}}function K4e(e){return{inside:e.selection===Iv.InsideEffect,outside:e.selection===Iv.OutsideEffect}}function cue(e){return YD(e)?oue:KD(e)&&e.passOptions.stepType==="clear"?aue:ZD}function Y4e(e){const{row:t,col:i}=e.key,r=i*PM,a=t*PM;return{tileOffsetFromLocalOrigin:[r%Dy,a%Dy],maxIntsToLocalOrigin:[Math.floor(r/Dy),Math.floor(a/Dy)]}}const pue=new rt({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryMultiPatch:"multipatch",mesh:"mesh"});function X4e(e){return pue.toJSON(e)}function Q4e(e){const{bandCount:t,attributeTable:i,colormap:r,pixelType:a}=e.raster.rasterInfo;return t===1&&(i!=null||r!=null||a==="u8"||a==="s8")}function due(e,t){return t==null?(e==null||e.destroy(),null):((e==null?void 0:e.type)==="single"&&Array.isArray(t)&&(e.destroy(),e=null),(e==null?void 0:e.type)!=="multi"||Array.isArray(t)||(e.destroy(),e=null),e||(e=Array.isArray(t)?new nue:new JD),Array.isArray(t)?e.type==="multi"&&e.setHighlightOptions(t):e.type==="single"&&e.setHighlightOptions(t),e)}function e6e(e,t,i,r){const{painter:a,highlightGradient:p}=e,{highlight:y}=a.effects;if(!p)return;const g=e.passOptions,_=p.getReasonsWithGradients();for(let T=0;T<_.length;T++){const I={...e,passOptions:{type:"highlight",activeGradient:_[T].activeGradient,activeReasons:_[T].activeReasons,stepType:"burn",highlightAll:t}};if(y.bind(I),i(I),T<_.length-1){let P=0;for(let N=T+1;N<_.length;N++)P|=_[N].activeReasons;i({...e,passOptions:{type:"highlight",activeGradient:_[T].activeGradient,activeReasons:P,stepType:"clear",highlightAll:t}})}const A={...e,passOptions:{type:"highlight",activeGradient:_[T].activeGradient,activeReasons:_[T].activeReasons,stepType:"draw",highlightAll:t}};a.setPipelineState(cue(e)),a.updatePipelineState(e.context),y.draw(A),y.unbind()}e.passOptions=g}function t6e(e){if(!e)return[];let t=xee(e)?[e]:xe.isCollection(e)?e.toArray():Array.isArray(e)?e:[];return t=t==null?void 0:t.filter(Sa),((t==null?void 0:t.length)??0)===0?[]:t}const zy=e=>parseFloat(e)/100;function fue(e,t,i){const r=typeof e.left=="string"?zy(e.left)*t:e.left,a=typeof e.right=="string"?zy(e.right)*t:e.right,p=typeof e.top=="string"?zy(e.top)*i:e.top,y=typeof e.bottom=="string"?zy(e.bottom)*i:e.bottom,g=p;return{xmin:r,xmax:Math.max(t-a,r),ymin:g,ymax:Math.max(i-y,p)}}function XD(e,t,i,r){switch(t.type){case"rect":{const{width:a,height:p}=e,{xmin:y,xmax:g,ymin:_,ymax:T}=fue(t,a,p),{x:I,y:A}=i;return I>y&&I<g&&A>_&&A<T}case"path":return t.path.length===0||!Array.isArray(t.path[0][0])||O6(t.path,[i.x,i.y]);case"geometry":return t.geometry==null||(t.geometry.type==="polygon"?C6(t.geometry,r):$1(t.geometry,r))}}function yue(e){if(!e.highlights)return null;const t=e.highlights.findIndex(i=>i.name==="default");return t===-1?null:e.highlights.items[t]}function mue(e,t){if(!e.highlights){if(!t)return;e.highlights=new xe([new Bl])}const i=e.highlights.findIndex(r=>r.name==="default");t?e.highlights.items[i].assignFrom(t):(e.highlights.removeAt(i),e.highlights.length===0&&(e.highlights=null))}async function gue(e,t,i){const r=gL(t)?mL(e,t):t;if(!e.ready||isNaN(r.x)||isNaN(r.y))return{screenPoint:r,results:[]};let a=new Set;const p=new Set;let y=!1,g=null,_=null;i!=null&&i.include?l$(i.include,a$(e,P=>{a.add(P),xb(P,N=>p.add(N))},(P,N)=>{p.add(P),a.add(N)},P=>{g||(g=new Set),g.add(P)},P=>a.add(P),()=>y=!0)):(y=!0,a=new Set(e.allLayerViews),a.forEach(P=>{xb(P,N=>p.add(N))})),i!=null&&i.exclude&&l$(i.exclude,a$(e,P=>{a.delete(P),xb(P,N=>p.delete(N))},P=>p.delete(P),P=>{_||(_=new Set),_.add(P)}));const T=e.toMap(r),I=e.allLayerViews.filter(P=>!P.suspended&&a.has(P)&&P.clips.every(N=>XD(e,N,r,T))).reverse();let A=[...y?e.graphicsView.hitTest(T).map(P=>({type:"graphic",graphic:P,layer:null,mapPoint:T})):[],...await Promise.all(I.map(P=>P.hitTest(T,r)).toArray())].filter(Sa).flat().filter(Sa);return A=A.filter(P=>{var N;return P.type!=="graphic"||((N=P.layer)==null?void 0:N.type)!=="subtype-group"||p.has(P.graphic.layer)}),g&&(A=A.filter(P=>!("graphic"in P)||!P.graphic||(g==null?void 0:g.has(y_(P.graphic))))),_&&(A=A.filter(P=>!("graphic"in P)||!P.graphic||!(_!=null&&_.has(y_(P.graphic))))),{screenPoint:r,results:A}}function a$(e,t,i,r,a,p){return y=>{if(y instanceof Mo){if(y.layer===e)p==null||p();else{const g=e.allLayerViews.find(_=>_.layer===y.layer);g&&(a==null||a(g))}r(y_(y))}else if(!("layer"in y&&"element"in y))if(y.type==="subtype-sublayer"){const g=e.allLayerViews.find(_=>_.layer===y.parent);g&&i(y,g)}else{const g=e.allLayerViews.find(_=>_.layer===y);g&&t(g)}}}function l$(e,t){if(e)if($g(e))for(const i of e)if($g(i))for(const r of i)t(r);else t(i);else t(e)}function y_(e){var i,r;const t=e.getObjectId();return t?`${((i=e.layer)==null?void 0:i.uid)??((r=e.sourceLayer)==null?void 0:r.uid)??"MapView"}/${t}`:`"MapView/${e.uid}`}function xb({layer:e},t){(e==null?void 0:e.type)==="subtype-group"&&e.sublayers.forEach(i=>{t(i)})}let Hd=null,Av=!0;function vue(e,t,i){if(!e||!t)throw new Error("Cannot construct image data without dimensions");if(Av)try{return new ImageData(e,t)}catch{Av=!1}return QD(e,t,i)}function i6e(e,t,i,r){if(!t||!i)throw new Error("Cannot construct image data without dimensions");if(Av)try{return new ImageData(e,t,i)}catch{Av=!1}const a=QD(t,i,r);return a.data.set(e,0),a}function wue(){return Hd||(Hd=document.createElement("canvas"),Hd.width=1,Hd.height=1),Hd}function QD(e,t,i){return i||(i=wue()),i.getContext("2d").createImageData(e,t)}async function bue(e,t){const i=window.URL.createObjectURL(e);try{const{data:r}=await kt(i,{...t,responseType:"image"});return r}catch(r){throw Si(r)?r:new Y("invalid-image",`Could not fetch requested image at ${i}`)}finally{window.URL.revokeObjectURL(i)}}async function r6e(e,t){const{arrayBuffer:i,mediaType:r}=await _ue(e,t),a=r==="image/png";if(r==="image/gif"){const{isAnimatedGIF:p,parseGif:y}=await fe(()=>import("./gif-DbxZHUky.js"),[]);if(p(i))return y(i,t)}if(a){const{isAnimatedPNG:p,parseApng:y}=await fe(()=>import("./apng-U-hv22eG.js"),[]);if(p(i))return y(i,t)}return bue(new Blob([i],{type:r}),t)}async function _ue(e,t){var a;const i=zp(e);if(i!=null&&i.isBase64)return{arrayBuffer:JC(i.data),mediaType:i.mediaType};const r=await kt(e,{responseType:"array-buffer",...t});return{arrayBuffer:r.data,mediaType:((a=r.getHeader)==null?void 0:a.call(r,"Content-Type"))??""}}function ej(e,t,i){const{ctx:r,canvas:a}=ij(e,i),p=r.getImageData(0,0,e.width,e.height),y=sj(a,t);return rj(a),{dataUrl:y,data:p}}function tj(e,t){const{ctx:i,canvas:r}=ij(e,t),a=i.getImageData(0,0,e.width,e.height);return rj(r),a}function ij(e,t){const i=Sue();t.premultipliedAlpha&&$ue(e),i.width=e.width,i.height=e.height;const r=i.getContext("2d",{willReadFrequently:!0});return r.putImageData(e,0,0),t.flipY&&Mue(r),{ctx:r,canvas:i}}function rj(e){e.width=0,e.height=0}function Sue(){return Tb==null&&(Tb=document.createElement("canvas")),Tb}let Tb=null;function sj(e,t){const i=Eue[t.format],r=t.quality/100;return e.toDataURL(i,r)}function nj(e,t){const i=Tue(e),r=Aue[i];return{format:i,quality:xs(t??r,0,100)}}function oj(e,t){return t/Math.max(e[0],e[1])}function xue(e,t,i,r=0,a=0,p=e.width-r,y=e.height-a,g=!1){const{data:_}=e,{width:T,height:I,data:A}=t,P=p/T,N=y/I,D=Math.ceil(P/2),z=Math.ceil(N/2),q=e.width;for(let J=0;J<I;J++)for(let ee=0;ee<T;ee++){const X=4*(ee+(g?I-J-1:J)*T);let ie=0,oe=0,ue=0,ge=0,Se=0,Ee=0;const Ie=(J+.5)*N;for(let ke=Math.floor(J*N);ke<(J+1)*N;ke++){const je=Math.abs(Ie-(ke+.5))/z,st=(ee+.5)*P,Ve=je*je;for(let xi=Math.floor(ee*P);xi<(ee+1)*P;xi++){const $s=Math.abs(st-(xi+.5))/D,Ri=Math.sqrt(Ve+$s*$s);if(Ri>=1)continue;let bt=2*Ri*Ri*Ri-3*Ri*Ri+1;const Pr=4*(r+xi+(a+ke)*q);Ee+=bt*_[Pr+3],oe+=bt,!i&&_[Pr+3]<255&&(bt=bt*_[Pr+3]/255),ue+=bt*_[Pr],ge+=bt*_[Pr+1],Se+=bt*_[Pr+2],ie+=bt}}A[X]=ue/ie,A[X+1]=ge/ie,A[X+2]=Se/ie,A[X+3]=Ee/oe}return t}function Tue(e){switch(e){case"png":case"jpg":case"jpeg":return e;default:return Iue}}function Mue(e){e.save(),e.globalCompositeOperation="copy",e.scale(1,-1),e.translate(0,-e.canvas.height),e.drawImage(e.canvas,0,0),e.restore()}function $ue(e){const t=e.data,i=t.length;for(let r=0;r<i;r+=4){const a=t[r+3];if(a!==255&&a>0){const p=255/a;t[r]=t[r]*p,t[r+1]=t[r+1]*p,t[r+2]=t[r+2]*p}}}const Eue={png:"image/png",jpg:"image/jpeg",jpeg:"image/jpeg"},u$=98,Iue="png",Aue={png:100,jpg:u$,jpeg:u$},s6e=Object.freeze(Object.defineProperty({__proto__:null,createEmptyImageData:vue,encode:ej,encodeData:tj,getFormatAndQuality:nj,getMaximumResolutionScale:oj,resampleHermite:xue,toDataUrl:sj},Symbol.toStringTag,{value:"Module"})),aj={flipY:!0,premultipliedAlpha:!0};async function Cue(e,t){const i=await lj(e,t),{format:r,quality:a}=nj(t==null?void 0:t.format,t==null?void 0:t.quality);return ej(i,{format:r,quality:a},aj)}async function Oue(e,t){const i=await lj(e,t);return tj(i,aj)}function lj(e,t){const i=Rue(t||{},kue(e.stage,e.size),e.size,e.padding),r=Pue(t,e.allLayerViews);return e.stage.takeScreenshot(i,r,e.backgroundColor,t==null?void 0:t.rotation)}function Pue(e={},t){if(!e.layers)return;const i=[];return e.layers.forEach(r=>{const a=t.find(p=>p.layer.id===r.id);a!=null&&a.container&&i.push(a.container)}),i}function kue(e,t){return Math.min(4,oj(t,Math.min(4096,e.context.parameters.maxTextureSize)))}function Rue(e,t,i,r){e.ignorePadding&&(r={left:0,right:0,top:0,bottom:0});let a=null;e.width!=null&&e.height!=null?a=[e.width,e.height]:e.width==null&&e.height!=null?a=[e.height,e.height]:e.width!=null&&e.height==null?a=[e.width,e.width]:e.width==null&&e.height==null&&(a=null);const p=i[0]-(r.left+r.right),y=i[1]-(r.top+r.bottom);let g,_,T=e.area||{x:0,y:0,width:p,height:y};if(a){const I=p/y,A=a[0]/a[1];if(A>I){const P=T.width/A;T={x:T.x,y:Math.round(T.y+(T.height-P)/2),width:T.width,height:Math.round(P)}}else{const P=T.height*A;T={x:Math.round(T.x+(T.width-P)/2),y:T.y,width:Math.round(P),height:T.height}}}else a=[T.width,T.height];return a[0]>T.width?(g=Math.min(a[0]/T.width,t),_=a[0]/T.width/g):(g=1,_=a[0]/T.width),{cropArea:{x:Math.round((T.x+r.left)*g),y:Math.round((T.y+r.top)*g),width:Math.round(T.width*g),height:Math.round(T.height*g)},outputScale:_,resolutionScale:g}}const Nue=e=>e.includes("Brush");let uj=class{constructor(){this._names=new Map}begin(t){this._names.has(t)||(this._names.set(t,!1),Nue(t)&&this.record("Esri.FirstDraw"),performance.mark(`Esri.${t}.Start`))}end(t){this._names.has(t)&&!this._names.get(t)&&(this._names.set(t,!0),performance.mark(`Esri.${t}.End`))}record(t){this._names.has(t)||(this._names.set(t,!0),performance.mark(`Esri.${t}`))}};function Lue(e,t){const i=t.debugRendererInfo&&e.getExtension("WEBGL_debug_renderer_info");return i?{getUnmaskedRendererWebGL:()=>e.getParameter(i.UNMASKED_RENDERER_WEBGL)}:null}let h$;function Due(){return h$??(h$=zue()),h$}let jue=class{constructor(){this.available=!1,this.majorPerformanceCaveat=!1,this.maxTextureSize=0,this.supportsVertexShaderSamplers=!1,this.supportsHighPrecisionFragment=!1,this.supportsColorBufferFloat=!1,this.supportsColorBufferFloatBlend=!1,this.supportsColorBufferHalfFloat=!1,this.unmaskedRenderer="unloaded"}};function Fue(e){if(typeof WebGL2RenderingContext>"u")return null;const t=document.createElement("canvas");if(!t)return null;let i=t.getContext("webgl2",{failIfMajorPerformanceCaveat:!0});if(i==null&&(i=t.getContext("webgl2"),i!=null&&(e.majorPerformanceCaveat=!0)),i==null)return i;e.available=!0,e.maxTextureSize=i.getParameter(i.MAX_TEXTURE_SIZE),e.supportsVertexShaderSamplers=i.getParameter(i.MAX_VERTEX_TEXTURE_IMAGE_UNITS)>0;const r=i.getShaderPrecisionFormat(i.FRAGMENT_SHADER,i.HIGH_FLOAT);return r&&(e.supportsHighPrecisionFragment=r.precision>0),i}function zue(){var i;const e=new jue,t=Fue(e);return t==null||(e.supportsColorBufferFloat=t.getExtension("EXT_color_buffer_float")!==null,e.supportsColorBufferFloatBlend=t.getExtension("EXT_float_blend")!==null,e.supportsColorBufferHalfFloat=e.supportsColorBufferFloat||t.getExtension("EXT_color_buffer_half_float")!==null,e.unmaskedRenderer=((i=Lue(t,{debugRendererInfo:!0}))==null?void 0:i.getUnmaskedRendererWebGL())??"unknown"),e}function Uue(e){const t=Due();return t.available?e==="3d"&&t.majorPerformanceCaveat?new Y("webgl:major-performance-caveat-detected",`Your WebGL implementation (${t.unmaskedRenderer}) doesn't seem to support hardware accelerated rendering. Check your browser settings or if your GPU is in a blocklist.`):t.supportsHighPrecisionFragment?t.supportsVertexShaderSamplers?null:new Y("webgl:vertex-shader-samplers-required","WebGL support for vertex shader samplers is required but not supported."):new Y("webgl:high-precision-fragment-required","WebGL support for high precision fragment shaders is required but not supported."):new Y("webgl:required","WebGL2 is required but not supported.",new Error().stack)}function Vue(e){return e&&"nodeType"in e}function Gue(e){return e&&typeof e.render=="function"}const c$={component:"esri-component"};let Zu=class extends Ae{constructor(){super(...arguments),this.widget=null}destroy(){var t;this.node=null,(t=this.widget)==null||t.destroy()}get id(){var t,i;return this._get("id")??((t=this.widget)==null?void 0:t.id)??((i=this.node)==null?void 0:i.id)}set id(t){this._set("id",t)}set node(t){const i=this._get("node");t!==i&&(t&&t.classList.add(c$.component),i&&i.classList.remove(c$.component),this._set("node",t))}castNode(t){var i;return(i=this.widget)==null||i.destroy(),t?typeof t=="string"||Vue(t)?(this._set("widget",null),cS(t)):(Gue(t)&&!t.domNode&&(t.domNode=document.createElement("div")),this._set("widget",t),t.domNode):(this._set("widget",null),null)}};v([S()],Zu.prototype,"id",null),v([S()],Zu.prototype,"node",null),v([ct("node")],Zu.prototype,"castNode",null),v([S({readOnly:!0})],Zu.prototype,"widget",void 0),Zu=v([H("esri.views.ui.Component")],Zu);const eg=Zu,hj="calcite-mode-";function Bue(){return getComputedStyle(document.body).getPropertyValue("--esri-calcite-mode-name").replaceAll(/\s|'|"/g,"")}function que(){return Bue().startsWith("dark")}function Hue(){return`${hj}${que()?"dark":"light"}`}function Wue(e){Jue(e),e.classList.add(Hue())}function Jue(e){Array.from(e.classList).forEach(t=>{t.startsWith(hj)&&e.classList.remove(t)})}const Zue={left:0,top:0,bottom:0,right:0},cj={bottom:30,top:15,right:15,left:15},No="esri-ui",Rr={ui:No,corner:`${No}-corner`,innerContainer:`${No}-inner-container`,manualContainer:`${No}-manual-container`,cornerContainer:`${No}-corner-container`,topLeft:`${No}-top-left`,topRight:`${No}-top-right`,bottomLeft:`${No}-bottom-left`,bottomRight:`${No}-bottom-right`};function Kue(e){return e&&!e._started&&typeof e.postMixInProperties=="function"&&typeof e.buildRendering=="function"&&typeof e.postCreate=="function"&&typeof e.startup=="function"}function Uy(e){return e===0?"0":`${e}px`}function Mb(e){const t=typeof e=="object"&&e!==null&&Object.getPrototypeOf(e);return(t===null||t===Object.prototype)&&("component"in e||"index"in e||"position"in e)?e:null}function $b(e,{top:t,bottom:i,left:r,right:a}){e.style.top=t,e.style.bottom=i,e.style.left=r,e.style.right=a}let to=class extends Ss.EventedAccessor{constructor(t){super(t),this._cornerNameToContainerLookup={},this._positionNameToContainerLookup={},this._components=new Array,this._componentMap=new Map,this._removeWidgetHandleKey=Symbol("componentOnRemoveSymbol"),this._locale=Jr(),this.view=null,this._applyViewPadding=()=>{const i=this.container;i&&$b(i,this._toPixelPosition(this._getViewPadding()))},this._applyUIPadding=()=>{const i=this._innerContainer;i&&$b(i,this._toPixelPosition(this.padding))},this._initContainers()}initialize(){this.addHandles([Le(()=>{var t;return[(t=this.view)==null?void 0:t.padding,this.container]},this._applyViewPadding,Pi),Le(()=>this.padding,this._applyUIPadding,Pi),Le(()=>[this.container,this._locale],([t,i])=>{t&&t.setAttribute("lang",i)},Pi),P6(t=>{this._locale=t})])}destroy(){this.container=null;for(const t of this._components)t.destroy();this._components.length=0,this._componentMap.clear()}set container(t){const i=this._get("container");t!==i&&(t&&(t.classList.add(Rr.ui),Wue(t),this._attachContainers(t)),i&&(i.classList.remove(Rr.ui),$b(i,{top:"",bottom:"",left:"",right:""}),i.textContent=""),this._set("container",t))}get height(){var p;const t=((p=this.view)==null?void 0:p.height)??0;if(t===0)return t;const i=this._getViewPadding(),{top:r,bottom:a}=i;return Math.max(t-r-a,0)}get padding(){return this._get("padding")}set padding(t){this._overrideIfSome("padding",t)}castPadding(t){return typeof t=="number"?{bottom:t,top:t,right:t,left:t}:{...cj,...t}}get width(){var p;const t=((p=this.view)==null?void 0:p.width)??0;if(t===0)return t;const i=this._getViewPadding(),{left:r,right:a}=i;return Math.max(t-r-a,0)}add(t,i){let r,a,p;if(Array.isArray(t))return void t.forEach(g=>this.add(g,i));const y=Mb(t);y&&({index:r,position:i,component:t,key:a}=y),i&&typeof i=="object"&&({index:r,key:a,position:i,internal:p}=i),!t||i&&!this._isValidPosition(i)||this._add(t,i,r,a,p)}remove(t,i){var a,p;if(!t)return;if(Array.isArray(t))return t.map(y=>this.remove(y,i));const r=this._find(t);if(r){if(this._componentMap.has(r)&&((a=this._componentMap.get(r))==null?void 0:a.key)!==i)return;const y=this._components.indexOf(r),g=r.node.parentNode;return g==null||g.removeChild(r.node),this._componentMap.delete(r),(p=r.widget)==null||p.removeHandlesReference(this._removeWidgetHandleKey),this._components.splice(y,1)[0]}}empty(t,i={removeInternal:!1}){if(Array.isArray(t)){for(const p of t)this.empty(p,i);return}const r=this._positionNameToContainerLookup[t??"manual"],a=Array.prototype.slice.call(r.children).map(p=>this._findByNode(p)).filter(p=>{var y;return p==null?!1:!(((y=this._componentMap.get(p))==null?void 0:y.internal)??!1)||i.removeInternal});for(const p of a)this.remove(p)}move(t,i){if(Array.isArray(t)&&t.forEach(y=>this.move(y,i)),!t)return;let r;const a=Mb(t)||Mb(i);if(a&&(r=a.index,i=a.position,t=a.component||t),i&&!this._isValidPosition(i))return;const p=this.remove(t);p&&this.add(p,{position:i,index:r})}find(t){if(!t)return null;const i=this._findById(t);return i&&(i.widget||i.node)}getComponents(t,i={includeInternal:!1}){return t?Array.isArray(t)?t.flatMap(r=>this._getComponentsAtPosition(r,i)):this._getComponentsAtPosition(t,i):this._components.filter(r=>{var a;return i.includeInternal||!((a=this._componentMap.get(r))!=null&&a.internal)}).map(({widget:r,node:a})=>r??a)}getPosition(t){for(const i in this._positionNameToContainerLookup)if(this._positionNameToContainerLookup[i].contains(t))return i;return null}_add(t,i,r,a,p){t instanceof eg||(t=new eg({node:t}));const{widget:y}=t;y!=null&&y instanceof Ae&&y.addHandles(yt(()=>{queueMicrotask(()=>this.remove(t))}),this._removeWidgetHandleKey),this._place({component:t,position:i,index:r}),this._components.push(t),this._componentMap.set(t,{key:a,internal:p})}_find(t){return t?t instanceof eg?this._findByComponent(t):typeof t=="string"?this._findById(t):this._findByNode(t.domNode||t):null}_getViewPadding(){var t;return((t=this.view)==null?void 0:t.padding)??Zue}_attachContainers(t){t.appendChild(this._innerContainer),t.appendChild(this._manualContainer)}_initContainers(){const t=document.createElement("div");t.classList.add(Rr.innerContainer,Rr.cornerContainer);const i=document.createElement("div");i.classList.add(Rr.innerContainer,Rr.manualContainer);const r=document.createElement("div");r.classList.add(Rr.topLeft,Rr.corner),t.appendChild(r);const a=document.createElement("div");a.classList.add(Rr.topRight,Rr.corner),t.appendChild(a);const p=document.createElement("div");p.classList.add(Rr.bottomLeft,Rr.corner),t.appendChild(p);const y=document.createElement("div");y.classList.add(Rr.bottomRight,Rr.corner),t.appendChild(y),this._innerContainer=t,this._manualContainer=i;const g=kQ();this._cornerNameToContainerLookup={"top-left":r,"top-right":a,"bottom-left":p,"bottom-right":y,"top-leading":g?a:r,"top-trailing":g?r:a,"bottom-leading":g?y:p,"bottom-trailing":g?p:y},this._positionNameToContainerLookup={manual:i,...this._cornerNameToContainerLookup}}_isValidPosition(t){return!!this._positionNameToContainerLookup[t]}_place(t){var T,I;const i=t.position??"manual",{component:r,index:a}=t,p=this._positionNameToContainerLookup[i],y=a!=null&&a>-1;if(Kue(r.widget)&&r.widget.startup(),!y)return void p.appendChild(r.node);const g=Array.from(p.children);if(a===0){const{firstChild:A}=p;return void(A?(T=A.parentNode)==null?void 0:T.insertBefore(r.node,A):p.appendChild(r.node))}if(a>=g.length)return void p.appendChild(r.node);const _=g[a];(I=_.parentNode)==null||I.insertBefore(r.node,_)}_toPixelPosition(t){return{top:Uy(t.top),left:Uy(t.left),right:Uy(t.right),bottom:Uy(t.bottom)}}_findByComponent(t){return this._components.find(i=>i===t)??null}_findById(t){return this._components.find(({id:i})=>i===t)??null}_findByNode(t){return this._components.find(({node:i})=>i===t)??null}_getComponentsAtPosition(t,i){const r=this._positionNameToContainerLookup[t];return Array.prototype.slice.call(r.children).map(a=>this._findByNode(a)).filter(Sa).filter(a=>{var p;return i.includeInternal||!((p=this._componentMap.get(a))!=null&&p.internal)}).map(({widget:a,node:p})=>a??p)}};v([S()],to.prototype,"_locale",void 0),v([S()],to.prototype,"container",null),v([S()],to.prototype,"height",null),v([S({value:cj})],to.prototype,"padding",null),v([ct("padding")],to.prototype,"castPadding",null),v([S()],to.prototype,"view",void 0),v([S()],to.prototype,"width",null),to=v([H("esri.views.ui.UI")],to);const Yue=to,Xue="randomUUID"in crypto;function U2(){if(Xue)return crypto.randomUUID();const e=crypto.getRandomValues(new Uint16Array(8));e[3]=4095&e[3]|16384,e[4]=16383&e[4]|32768;const t=i=>e[i].toString(16).padStart(4,"0");return t(0)+t(1)+"-"+t(2)+"-"+t(3)+"-"+t(4)+"-"+t(5)+t(6)+t(7)}function u6e(){return`{${U2().toUpperCase()}}`}function Que(){return`{${U2()}}`}function ehe(e){const t=e.toUpperCase();return e[0]!=="{"?`{${t}}`:t}const the={handleInterceptedEvent:(e,t,i,r)=>(e.scheduleRender(),t.properties[`on${r.type}`].apply(t.properties.bind||i,[r]))},ihe={namespace:void 0,performanceLogger:()=>{},eventHandlerInterceptor:void 0,styleApplyer:(e,t,i)=>{t.charAt(0)==="-"?e.style.setProperty(t,i):e.style[t]=i}},rhe=e=>({...ihe,...e}),she=(e,t)=>{const i=[];for(;e&&e!==t;)i.push(e),e=e.parentNode;return i},nhe=(e,t)=>e.find(t),p$=(e,t,i=!1)=>{let r=e;return t.forEach((a,p)=>{const y=r!=null&&r.children?nhe(r.children,g=>g.domNode===a):void 0;i&&!y&&p!==t.length-1||(r=y)}),r},ohe=e=>{let t;const i={...the,...e},r=rhe(i),a=r.performanceLogger;let p,y=!0,g=!1;const _=[],T=[],I=(P,N,D)=>{var J;let z;r.eventHandlerInterceptor=(ee,X,ie,oe)=>function(ue){let ge;a("domEvent",ue);const Se=she(ue.currentTarget,z.domNode),Ee=Se.some(ke=>{var je;return customElements.get((je=ke==null?void 0:ke.tagName)==null?void 0:je.toLowerCase())});if(ue.eventPhase===Event.CAPTURING_PHASE||!Ee)Se.reverse(),ge=p$(z.getLastRender(),Se);else{const ke=ue.composedPath(),je=ke.slice(ke.indexOf(ue.currentTarget),ke.indexOf(z.domNode)).reverse();ge=p$(z.getLastRender(),je,!0)}let Ie;return ge&&(Ie=i.handleInterceptedEvent(t,ge,this,ue)),a("domEventProcessed",ue),Ie},(J=i.postProcessProjectionOptions)==null||J.call(i,r);const q=D();z=P(N,q,r),r.eventHandlerInterceptor=void 0,_.push(z),T.push(D),i.afterFirstVNodeRendered&&i.afterFirstVNodeRendered(z,q)};let A=()=>{if(p=void 0,y){y=!1,a("renderStart",void 0);for(let P=0;P<_.length;P++){const N=T[P]();a("rendered",void 0);try{_[P].update(N)}catch(D){console.error(D)}a("patched",void 0)}a("renderDone",void 0),y=!0}};return i.modifyDoRenderImplementation&&(A=i.modifyDoRenderImplementation(A,_,T)),t={renderNow:A,scheduleRender:()=>{p||g||(p=requestAnimationFrame(A))},stop:()=>{p&&(cancelAnimationFrame(p),p=void 0),g=!0},resume:()=>{g=!1,y=!0,t.scheduleRender()},append:(P,N)=>{I(Ll.append,P,N)},insertBefore:(P,N)=>{I(Ll.insertBefore,P,N)},merge:(P,N)=>{I(Ll.merge,P,N)},replace:(P,N)=>{I(Ll.replace,P,N)},detach:P=>{for(let N=0;N<T.length;N++)if(T[N]===P)return T.splice(N,1),_.splice(N,1)[0];throw new Error("renderFunction was not found")}},t};var ahe=":",Fh=class{resolve(e){}reject(e){}constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}};function lhe(e,t){let i=e;for(;i;){if(i===t)return!0;if(!i.parentNode)return!1;i.parentNode instanceof ShadowRoot?i=i.parentNode.host:i=i.parentNode}return!1}function uhe(e,t,i){const{subscribe:r}=hhe(t);return r(a=>{a.some(y=>lhe(e,y.target))&&i()})}var Eb={};function hhe(e){const t=e.join(","),i=Eb[t];if(i!==void 0)return i;const r=new Set,a=new MutationObserver(y=>r.forEach(g=>g(y)));globalThis.document&&a.observe(document.documentElement,{attributes:!0,attributeFilter:e,subtree:!0});const p={subscribe(y){return r.add(y),()=>{r.delete(y),r.size===0&&(a.disconnect(),Eb[t]=void 0)}}};return Eb[t]=p,p}function che(e,t){var r,a;let i=e;for(;i;){const p=(r=i.closest)==null?void 0:r.call(i,t);if(p)return p;const y=(a=i.getRootNode)==null?void 0:a.call(i);if(y===globalThis.document)return null;i=y.host}return null}function phe(e,t,i){const r=che(e,`[${t}]`);return(r==null?void 0:r.getAttribute(t))??i}function Yt(e,t,...i){try{return e==null?void 0:e.call(t,...i)}catch(r){console.error(r,e)}}async function m_(e,t,...i){try{const r=e==null?void 0:e.call(t,...i);return r instanceof Promise?await r:r}catch(r){console.error(r,e)}}var dhe=["ar","bg","bs","ca","cs","da","de","el","en","es","et","fi","fr","he","hr","hu","id","it","ja","ko","lt","lv","nl","nb","no","pl","pt-BR","pt-PT","ro","ru","sk","sl","sr","sv","th","tr","uk","vi","zh-CN","zh-HK","zh-TW"],fhe=new Set(dhe),Cv="en",yhe={pt:"pt-PT",nb:"no",zh:"zh-CN"};async function mhe(e,t,i=""){const r=`${t}/${i}`,a=`${r}${e}.json`;return Ib[a]??(Ib[a]=pj(e,r)),await Ib[a]}var Ib={};async function pj(e,t){const i=`${t}${e}.json`;try{const r=await fetch(i);if(r.ok)return await r.json()}catch(r){return console.error(r),{}}return e===Cv?{}:await pj(Cv,t)}function dj(e){var i;const t=phe(e,"lang",((i=globalThis.navigator)==null?void 0:i.language)||Cv);return{lang:t,t9nLocale:fj(t)}}function fj(e){const[t,i]=e.split("-"),r=t.toLowerCase();let a=r;return i&&(a=`${r}-${i.toUpperCase()}`),a=yhe[a]??a,fhe.has(a)?a:i?fj(r):Cv}function ghe(e,t,i,r){let a;const p=()=>void vhe(e,t(),r).then(y=>{((a==null?void 0:a.lang)!==y.lang||a.t9nLocale!==y.t9nLocale||a.t9nStrings!==y.t9nStrings)&&i(y),a=y}).catch(console.error);return queueMicrotask(p),uhe(e,["lang"],p)}async function vhe(e,t,i=e.tagName.toLowerCase().split("-").slice(1).join("-")){const{lang:r,t9nLocale:a}=dj(e),p=`${t}/${i}/t9n`,g=i===null?{}:await mhe(a,p,"messages.");return{lang:r,t9nLocale:a,t9nStrings:g}}var yj=e=>e.replace(whe,(t,i)=>`${i===0?"":"-"}${t.toLowerCase()}`),whe=/[A-Z]+(?![a-z])|[A-Z]/gu;function bhe(e,t){const i=t/_he;let r=0;const a=setInterval(()=>{r+=i,r>=t&&(clearInterval(a),e())},i);return a}var _he=4;function She(e){return e!==void 0}function mj(e){var i,r;let t=e;for(;t=t.parentNode??t.host;)if((i=t==null?void 0:t.constructor)!=null&&i.lumina){const a=t;return(r=a.manager)!=null&&r.loadedCalled||a._offspring.push(e),a._postLoad.promise}return!1}var tg=Object.defineProperty;function xhe(e){const t=e.split(ahe);return t.length===1?[t[0],yj(t[0])]:t}var The=globalThis.HTMLElement??xhe,Rp;Rp=class extends The{constructor(){super(),this._store={},this._pendingAttributes=[],this._postLoad=new Fh,this._postLoaded=new Fh,this._offspring=[],this._saveInstanceProperties();const t=this.constructor;t._LitConstructor?this._initializeComponent({a:t._LitConstructor}):t._loadPromise.then(this._initializeComponent.bind(this)).catch(i=>{this._postLoaded.reject(i),setTimeout(()=>{throw i})})}static _initializePrototype(){var t,i,r;(t=this._properties)==null||t.forEach(this._bindProp,this),(i=this._asyncMethods)==null||i.forEach(this._bindAsync,this),(r=this._syncMethods)==null||r.forEach(this._bindSync,this)}static _bindProp(t){tg(this.prototype,t,{configurable:!0,enumerable:!0,get(){return this._store[t]},set(i){this._store[t]=i}})}static _bindAsync(t){tg(this.prototype,t,{async value(...i){return this._litElement||await this._postLoaded.promise,await this._litElement[t](...i)},configurable:!0})}static _bindSync(t){tg(this.prototype,t,{value(...i){return this._litElement[t](...i)},configurable:!0})}get manager(){var t;return(t=this._litElement)==null?void 0:t.manager}_saveInstanceProperties(){var r;const t=this.constructor,i=this;(r=t._properties)==null||r.forEach(a=>{Object.hasOwn(this,a)&&(this._store[a]=i[a],delete i[a])})}attributeChangedCallback(t,i,r){var a;(a=this._litElement)==null||a.attributeChangedCallback(t,i,r),this._litElement||this._pendingAttributes.push(t)}connectedCallback(){var t,i;this._litElement?(i=(t=this._litElement).connectedCallback)==null||i.call(t):queueMicrotask(()=>{this._ancestorLoad=mj(this)})}disconnectedCallback(){var t,i;(i=(t=this._litElement)==null?void 0:t.disconnectedCallback)==null||i.call(t)}async componentOnReady(){return await this._postLoaded.promise,this}_initializeComponent(t){var A;const i=this.constructor,r=i._name,a=this._store,p=Object.values(t).find(P=>P.tagName===r),y=`${r}--lazy`;let g=p;for(;g&&!Object.hasOwn(g,"lumina");)g=Object.getPrototypeOf(g);$he(g),!i._LitConstructor&&(i._LitConstructor=p,customElements.define(y,p)),p.lazy=this;const T=document.createElement(y);p.lazy=void 0,this._litElement=T,this._store=T,this._pendingAttributes.forEach(P=>{const N=this.getAttribute(P);T.attributeChangedCallback(P,null,N)}),Object.entries(a).forEach(Mhe,T);const I=this.isConnected;(I||this._ancestorLoad)&&((A=T.connectedCallback)==null||A.call(T),I||T.disconnectedCallback())}addController(){}requestUpdate(){var t;(t=this._litElement)==null||t.requestUpdate()}},Rp.lumina=!0;function Mhe([e,t]){this[e]=t}function $he(e){const t=e.prototype,i=Element.prototype;Object.hasOwn(t,"isConnected")||(t.setAttribute=function(a,p){i.setAttribute.call(this.el,a,p)},t.removeAttribute=function(a){i.removeAttribute.call(this.el,a)},tg(t,"isConnected",{get(){return Reflect.get(i,"isConnected",this.el)}}))}var d$={};function Ehe(e,t){var i;if(t){const r=e.constructor.elementProperties;e.manager.internals.members=Object.fromEntries(Array.from(r,([a,p])=>p.noAccessor?void 0:[a,[(p.readOnly?2048:0)|(p.state?32:16)]]).filter(She))}else{const r=e.constructor,a=((i=r.__registerControllers)==null?void 0:i.call(r,e))??void 0;if(r.__registerControllers=void 0,typeof a!="object")throw new Error("Failed to retrieve component meta");e.manager.internals.members=Object.fromEntries(Object.entries(a).filter(([p,[y]])=>(y&63)!==0))}}function Ihe(e,t=8){return e==null||typeof e=="object"||typeof e=="function"?e:(t&4)!==0?e==="false"?!1:e===""||!!e:(t&2)!==0?Number.parseFloat(e):(t&1)!==0?String(e):e}var Ahe=(e,t)=>{var i,r;return(r=(i=e.manager.internals.members)==null?void 0:i[t])==null?void 0:r[0]},ex=Symbol.for("controller"),Che=e=>typeof e=="object"&&e!==null&&(ex in e||"hostConnected"in e||"hostDisconnected"in e||"hostUpdate"in e||"hostUpdated"in e),Bf;function pp(e){Bf!==e&&(Bf=e,queueMicrotask(()=>{Bf===e&&(Bf=void 0)}))}function V2(e){return Bf}var Ku=[];function gj(e){if(e===void 0){Ku=[];return}const t=Ku.indexOf(e);Ku=t===-1?[...Ku,e]:Ku.slice(0,t+1),queueMicrotask(()=>{Ku=[]})}function vj(){return Ku}var dp;function Ohe(e){dp!==e&&(dp=e,queueMicrotask(()=>{dp===e&&(dp=void 0)}))}function Phe(){const e=dp;return dp=void 0,e}var khe=async(e,t)=>{const i=tx(e);if(i===void 0)return e;if(await i.ready,typeof t=="function"){const r=i.watchExports(a=>t(a,r))}return i.exports},Rhe=async e=>{const t=tx(e);return await t.ready,t},tx=e=>{const i=V2().manager.internals.resolveExports(e);if(i!==void 0)return i;if(Che(e))return e;const r=Phe();if(r!==void 0)return r},g_={readOnly:!1},Ov=new WeakMap,wj;wj=ex;var ix=class{constructor(e){this._callbacks={hostConnected:[],hostDisconnected:[],hostLoad:[],hostLoaded:[],hostUpdate:[],hostUpdated:[],hostDestroy:[],hostLifecycle:[]},this._ready=new Fh,this._lifecycleCleanups=[],this.connectedCalled=!1,this._loadCalled=!1,this.loadedCalled=!1,this[wj]=!0,this.ready=this._ready.promise,this._exports=y$(this),this._exportWatchers=new Set;const t=e??V2();this.component=t,this.component.addController(this),this.component.manager===void 0||(gj(this),queueMicrotask(()=>this.catchUpLifecycle()))}catchUpLifecycle(){const{manager:e}=this.component;e.connectedCalled&&!this.connectedCalled&&this.triggerConnected(),e._loadCalled&&this.triggerLoad().then(()=>{e.loadedCalled&&this.triggerLoaded()}).catch(console.error)}get exports(){return this._exports}set exports(e){const t=this._exports;t!==e&&(this._exports=e,this._exportWatchers.forEach(Yt),this.connectedCalled&&this.assignedProperty!==!1&&this.component.requestUpdate(this.assignedProperty,t)),this._ready.resolve(e)}setProvisionalExports(e,t=!0){this._exports=t?y$(e):e,this._exportWatchers.forEach(Yt)}watchExports(e){const t=()=>e(this._exports);return this._exportWatchers.add(t),()=>void this._exportWatchers.delete(t)}get use(){return pp(this.component),khe}get useRef(){return pp(this.component),Rhe}get useRefSync(){return pp(this.component),tx}controllerRemoved(){this.component.el.isConnected&&this.triggerDisconnected(),this.triggerDestroy()}onConnected(e){this._callbacks.hostConnected.push(e)}onDisconnected(e){this._callbacks.hostDisconnected.push(e)}onLoad(e){this._callbacks.hostLoad.push(e)}onLoaded(e){this._callbacks.hostLoaded.push(e)}onUpdate(e){this._callbacks.hostUpdate.push(e)}onUpdated(e){this._callbacks.hostUpdated.push(e)}onDestroy(e){this._callbacks.hostDestroy.push(e)}onLifecycle(e){this._callbacks.hostLifecycle.push(e),this.connectedCalled&&this.component.el.isConnected&&this._callLifecycle(e)}triggerConnected(){const e=this;e.hostConnected&&Yt(e.hostConnected,e),this._callbacks.hostConnected.forEach(Yt),this.triggerLifecycle(),this.connectedCalled=!0}triggerDisconnected(){const e=this;e.hostDisconnected&&Yt(e.hostDisconnected,e),this._callbacks.hostDisconnected.forEach(Yt),this._lifecycleCleanups.forEach(Yt),this._lifecycleCleanups=[]}async triggerLoad(){if(this._loadCalled)return;this._loadCalled=!0;const e=this;e.hostLoad&&await m_(e.hostLoad,e),this._callbacks.hostLoad.length>0&&await Promise.allSettled(this._callbacks.hostLoad.map(m_)),this._ready.resolve(this._exports)}triggerLoaded(){if(this.loadedCalled)return;const e=this;e.hostLoaded&&Yt(e.hostLoaded,e),this._callbacks.hostLoaded.forEach(Yt),this.loadedCalled=!0}triggerUpdate(e){const t=this;t.hostUpdate&&Yt(t.hostUpdate,t,e),this._callbacks.hostUpdate.forEach(f$,e)}triggerUpdated(e){const t=this;t.hostUpdated&&Yt(t.hostUpdated,t,e),this._callbacks.hostUpdated.forEach(f$,e)}triggerDestroy(){const e=this;e.hostDestroy&&Yt(e.hostDestroy,e),this._callbacks.hostDestroy.forEach(Yt)}triggerLifecycle(){const e=this;e.hostLifecycle&&this._callLifecycle(()=>e.hostLifecycle()),this._callbacks.hostLifecycle.forEach(this._callLifecycle,this)}_callLifecycle(e){pp(this.component);const t=Yt(e);(Array.isArray(t)?t:[t]).forEach(r=>{typeof r=="function"?this._lifecycleCleanups.push(r):typeof r=="object"&&typeof r.remove=="function"&&this._lifecycleCleanups.push(r.remove)})}};function f$(e){Yt(e,void 0,this)}var Nhe=ix;function y$(e){if(typeof e!="object"&&typeof e!="function"||e===null)return e;const t=new Proxy(e,{get(i,r,a){if(!(Lhe.has(r)&&r in i&&i[r]===t)&&(r in i||r in Promise.prototype||typeof r=="symbol"))return typeof i=="function"?i[r]:Reflect.get(i,r,a)},set:(i,r,a,p)=>Reflect.set(i,r,a,p)});return t}var Lhe=new Set(["exports","_exports"]);function Dhe(e,t,i){const r=Object.keys(e),a=r.length;ya===void 0&&queueMicrotask(rx),ya??(ya=new Map);let p=ya.get(e);return p===void 0&&(p={callbacks:[],keyCount:a},ya.set(e,p)),p.keyCount!==a&&(p.callbacks.forEach(y=>y(r)),p.callbacks=[],p.keyCount=a),p.callbacks.push(y=>{const g=T=>Yt(t,null,T),_=y[a];_===void 0?g(void 0):e[_]===i?g(_):g(void 0)}),i}var ya=void 0;function rx(){Array.from((ya==null?void 0:ya.entries())??[]).forEach(([e,{callbacks:t}])=>{const i=Object.keys(e);t.forEach(r=>r(i))}),ya=void 0}function sx(e,t,i){var r;const a=t,p=e.manager.internals;(r=p.allWatchers)[a]??(r[a]=[]);const y=p.allWatchers[a],g=i,_=(T,I,A)=>Yt(g,null,T,I,A);return y.push(_),()=>{const T=y.indexOf(_);T!==-1&&y.splice(T,1)}}var jhe=class{constructor(e){this.enabledWatchers={},this.allWatchers={},this.enableReadonly=()=>{if(this.enableReadonly=void 0,!this.component.manager.isLit)return;const t=this.component.manager.internals;Object.entries(t.members).forEach(([i,[r]])=>{var a;r&2048&&((a=t.setters)[i]??(a[i]=[]),t.setters[i].push(t.readonlySetter))})},this.trackedValue=v_,this.keyTrackers=[],this.getters={},this.setters={},this.accessorGetter={},this.accessorSetter={},this._exports=new WeakMap,this.readonlySetter=(t,i,r)=>{if(g_.readOnly)return t;throw new Error(`Cannot assign to read-only property "${r}" of ${this.component.el.tagName.toLowerCase()}. Trying to assign "${String(t)}"`)},this.component=e}firePropTrackers(e,t){const i=this.keyTrackers;this.trackedValue=v_,this.keyTrackers=[],i.forEach(r=>r(e,t))}getSetProxy(e){const t=this.component,i=t.constructor.prototype;if(this._getSetProxy(i,e,"class"),t.manager.isLit)return;const r=t.el.constructor.prototype;i!==r&&this._getSetProxy(r,e,"html")}_getSetProxy(e,t,i){const r=this.component,a=Ahe(r,t);let p;do p=Object.getOwnPropertyDescriptor(e,t);while(!p&&(e=Object.getPrototypeOf(e)));if(!p)return;const y=p.get,g=p.set,_=Vy in y,T=Vy in g;if(_&&T)return;const I=!_,A=!T,P=I?function(){let z=y.call(this);const q=Ov.get(this);if(q===void 0)return z;const J=q.manager.internals;z=J.accessorGetter[t](z,t);const ee=J.getters[t]??m$;for(let X=0;X<ee.length;X++)z=ee[X](z,t);return z}:y,N=A?function(z){var ie;const q=y.call(this),J=Ov.get(this);if(J===void 0){g.call(this,z);return}let ee=J.manager.isLit?z??void 0:Ihe(z,a);const X=J.manager.internals;if(ee===q)g.call(this,ee);else{const oe=X.setters[t]??m$;for(let ue=0;ue<oe.length&&(ee=oe[ue](ee,q,t),ee!==q);ue++);ee=X.accessorSetter[t](ee,q,t),g.call(this,ee),ee!==q&&((ie=X.enabledWatchers[t])==null||ie.forEach(ue=>ue(ee,q,t)))}X.keyTrackers.length>0&&(X==null||X.firePropTrackers(t,z))}:g;I&&(P[Vy]=!0),A&&(N[Vy]=!0),Object.defineProperty(e,t,{...p,get:P,set:N})}markExports(e,t){(typeof t=="object"&&t!==null||typeof t=="function")&&this._exports.set(t,e)}resolveExports(e){if(typeof e=="object"&&e!==null||typeof e=="function")return this._exports.get(e)}},m$=[],Vy=Symbol(),v_=Symbol();function Fhe(e,t,i){const r=e.manager.internals;return r.trackedValue!==v_&&r.trackedValue!==i&&r.firePropTrackers(void 0,void 0),r.keyTrackers.length===0&&queueMicrotask(()=>r.firePropTrackers(void 0,void 0)),r.trackedValue=i,r.keyTrackers.push((a,p)=>Yt(t,void 0,i===p?a:void 0)),i}function bj(e=[V2(),...vj()],t,i){const r=Array.isArray(e)?e:[e];let a=r.length+1;const p=g=>{a-=1,g!==void 0&&(a=Math.min(a,0)),a===0&&t(g)};r.forEach(g=>Dhe(g,_=>p(_===void 0?void 0:{key:_,host:g,isReactive:!1}),i));const y=r.find(g=>"manager"in g&&typeof g.manager=="object"&&g.manager.component===g);return y&&Fhe(y,g=>p(g===void 0?void 0:{key:g,host:y,isReactive:!0}),i),i}function zhe(e){g_.readOnly=!0;try{return e()}finally{g_.readOnly=!1}}var Uhe=e=>(...t)=>{const i=vj(),r=new e(...t),a=r.exports;gj(i.at(-1));const p=r.component.manager.internals;p.markExports(r,a),r.watchExports(g=>p.markExports(r,g)),Ohe(r);const y=[r.component,...i].reverse();return bj(y,g=>g===void 0?void 0:Vhe(r,g,a),a)};function Vhe(e,{host:t,key:i,isReactive:r},a){const p=t,y=p[i]!==e.exports,g=p[i]!==a,_=a!==e.exports;if(y&&!g&&_&&(p[i]=e.exports),t===e.component){if(r){const I=e.component.manager.internals;g&&I.markExports(e,p[i]),sx(e.component,i,A=>{A!==e.exports&&I.markExports(e,A)})}e.assignedProperty=r?void 0:i}e.watchExports(()=>{var P;if(p[i]===e.exports)return;const I=e.component.manager;((P=I.internals.setters[i])==null?void 0:P.includes(I.internals.readonlySetter))?zhe(()=>{p[i]=e.exports}):p[i]=e.exports})}var Ghe=(e,t)=>new Bhe(e,t),Bhe=class extends Nhe{constructor(e,t){const i="addController"in e,r=new Set;function a(_){var T;r.add(_),!(ex in _)&&e.renderRoot&&e.el.isConnected&&((T=_.hostConnected)==null||T.call(_))}function p(_){var T;r.delete(_),(T=_.controllerRemoved)==null||T.call(_)}const y=e;if(y.addController=a,y.removeController=p,!i){const _=t??e.constructor.__forceUpdate;y.requestUpdate=()=>_(e)}super(e),this.internals=new jhe(this.component),this.destroyed=!1,this._updatePromise=new Fh,this._originalLifecycles={},this.isLit=i,this.component.manager=this,Ehe(e,i),this._controllers=r,this.exports=void 0,this.hasDestroy=Ab in this.component&&typeof this.component.destroy=="function",this._bindLifecycleMethods();const g=this.internals;Object.keys(g.members).forEach(_=>{g.accessorGetter[_]=g$,g.accessorSetter[_]=g$,g.getSetProxy(_)}),i?this.internals.enabledWatchers=this.internals.allWatchers:Object.defineProperty(e,"updateComplete",{get:async()=>await this._updatePromise.promise}),queueMicrotask(g.enableReadonly),pp(e),Ov.set(e.el,e),Ov.set(e,e)}_bindLifecycleMethods(){const e=this.component,t=this.isLit,i=e.el===e;this._originalLifecycles={_connectedCallback:t||i?void 0:e.connectedCallback,_disconnectedCallback:t||i?void 0:e.disconnectedCallback,_load:t?e.load:e.componentWillLoad,_loaded:t?e.loaded:e.componentDidLoad,_willUpdate:t?void 0:e.componentWillUpdate,_updated:t?void 0:e.componentDidUpdate,_destroy:e.destroy};const r=this._connectedCallback.bind(this),a=this._disconnectedCallback.bind(this),p=this._update.bind(this),y=this._updated.bind(this);t?e.constructor.prototype.addController.call(e,{hostConnected:r,hostDisconnected:a,hostUpdate:p,hostUpdated:y}):(e.connectedCallback=r,e.disconnectedCallback=a,e.componentWillLoad=this._load.bind(this),e.componentDidLoad=this._loaded.bind(this),e.componentWillUpdate=p,e.componentDidUpdate=y),this.hasDestroy&&(e.destroy=this.destroy.bind(this))}_connectedCallback(){var t,i;if(this.destroyed){const r=this.component.el.tagName.toLowerCase();throw this.component.el.remove(),new Error(`The ${r} component has already been destroyed. It cannot be used again. If you meant to disconnect and reconnect a component without automatic destroy, set the ${Ab} prop.`)}this._autoDestroyTimeout!==void 0&&clearTimeout(this._autoDestroyTimeout);const e=this.internals;e.enabledWatchers=e.allWatchers,rx(),(t=e.enableReadonly)==null||t.call(e),this._controllers.forEach(Hhe),(i=this._originalLifecycles._connectedCallback)==null||i.call(this.component)}_disconnectedCallback(){var e;this.destroyed||(this._controllers.forEach(Whe),(e=this._originalLifecycles._disconnectedCallback)==null||e.call(this.component),this.hasDestroy&&this._setAutoDestroyTimeout())}async _load(){var e;await Promise.allSettled(Array.from(this._controllers,Jhe)),await((e=this._originalLifecycles._load)==null?void 0:e.call(this.component)),this.hasDestroy&&sx(this.component,Ab,()=>this._setAutoDestroyTimeout())}_loaded(){var e;this._controllers.forEach(Zhe),(e=this._originalLifecycles._loaded)==null||e.call(this.component)}_update(){var t;const e=this.component;return this._controllers.forEach(Khe,e.$changes),(t=this._originalLifecycles._willUpdate)==null?void 0:t.call(this.component)}_updated(){var t;const e=this.component;if(this._controllers.forEach(Yhe,e.$changes),(t=this._originalLifecycles._updated)==null||t.call(this.component),this.isLit)e.$changes=new Map;else{const i=this._updatePromise;this._updatePromise=new Fh,i.resolve(!0)}}async destroy(){var e;if(!this.destroyed){if(this.component.el.isConnected){this.hasDestroy=!1;try{this.component.el.remove()}finally{this.hasDestroy=!0}}this._autoDestroyTimeout=void 0,this.destroyed=!0,this._controllers.forEach(Xhe),this._controllers.clear(),await((e=this._originalLifecycles._destroy)==null?void 0:e.call(this.component))}}_setAutoDestroyTimeout(){if(this._autoDestroyTimeout!==void 0&&clearTimeout(this._autoDestroyTimeout),!this.component.el.isConnected&&!this.component.autoDestroyDisabled){const e=()=>void this.destroy().catch(console.error);this._autoDestroyTimeout=bhe(e,qhe)}}},Ab="autoDestroyDisabled",qhe=1e3,g$=e=>e;function Hhe(e){"triggerConnected"in e?e.triggerConnected():Yt(e.hostConnected,e)}function Whe(e){"triggerDisconnected"in e?e.triggerDisconnected():Yt(e.hostDisconnected,e)}async function Jhe(e){"triggerLoad"in e?await e.triggerLoad():await m_(e.hostLoad,e)}function Zhe(e){"triggerLoaded"in e?e.triggerLoaded():Yt(e.hostLoaded,e)}function Khe(e){"triggerUpdate"in e?e.triggerUpdate(this):Yt(e.hostUpdate,e,this)}function Yhe(e){"triggerUpdated"in e?e.triggerUpdated(this):Yt(e.hostUpdated,e,this)}function Xhe(e){"triggerDestroy"in e?e.triggerDestroy():Yt(e.hostDestroy,e)}var Qhe=e=>_j(void 0,e),h6e=e=>t=>_j(t,e),ece=class extends ix{constructor(e,t){super(e);const i=this.exports;try{pp(this.component);const r=t(this.component,this),a=this.exports!==i;if(r instanceof Promise){a||this.setProvisionalExports(r);const p=r.then(y=>{this.exports=y,super.catchUpLifecycle()}).catch(y=>{this._ready.reject(y),console.error(y)});this.onLoad(async()=>await p)}else(!a||r!==void 0)&&(this.exports=r),queueMicrotask(()=>super.catchUpLifecycle())}catch(r){this._ready.reject(r),console.error(r)}}catchUpLifecycle(){}},_j=Uhe(ece),c6e=(e,t)=>new tce(e,t),tce=class extends ix{constructor(e,t){super(),this._attributes=e,this._callback=t,this._observer=new MutationObserver(i=>{i.forEach(r=>{e.includes(r.attributeName)&&t.call(this.component,this.component.el.getAttribute(r.attributeName),r.oldValue,r.attributeName)})})}hostConnected(){this._attributes.forEach(e=>{this.component.el.hasAttribute(e)&&this._callback.call(this.component,null,this.component.el.getAttribute(e),e)}),this._observer.observe(this.component.el,{attributes:!0,attributeOldValue:!0,attributeFilter:this._attributes})}hostDisconnected(){this._observer.disconnect()}},p6e=e=>(t={})=>Qhe((i,r)=>{const a=dj(i.el),p={_lang:a.lang,_t9nLocale:a.t9nLocale,_loading:!0},y=i;r.onLifecycle(()=>ghe(i.el,()=>e("./assets"),({t9nLocale:_,t9nStrings:T,lang:I})=>{const A={...T,_lang:I,_t9nLocale:_,_loading:!1};r.exports=A;const P=T.componentLabel;typeof P=="string"&&"label"in i&&i.label==null&&(i.label??(i.label=P)),g(y.messageOverrides)},t.name));function g(_){const T=r.exports,I=T._original??T,A=Sj(I,_);_&&(A._original=I),r.exports=A}return"messageOverrides"in y&&r.onLifecycle(()=>sx(y,"messageOverrides",g)),t.blocking?(r.setProvisionalExports(p,!1),r.ready):p});function Sj(e,t){if(!t)return e;const i={...e};return Object.entries(t).forEach(([r,a])=>{typeof a=="object"?i[r]=Sj(e[r],a):i[r]=a??e[r]}),i}/**
 * @license
 * Copyright 2019 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const ig=globalThis,nx=ig.ShadowRoot&&(ig.ShadyCSS===void 0||ig.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,ox=Symbol(),v$=new WeakMap;let xj=class{constructor(t,i,r){if(this._$cssResult$=!0,r!==ox)throw Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=t,this.t=i}get styleSheet(){let t=this.o;const i=this.t;if(nx&&t===void 0){const r=i!==void 0&&i.length===1;r&&(t=v$.get(i)),t===void 0&&((this.o=t=new CSSStyleSheet).replaceSync(this.cssText),r&&v$.set(i,t))}return t}toString(){return this.cssText}};const ice=e=>new xj(typeof e=="string"?e:e+"",void 0,ox),f6e=(e,...t)=>{const i=e.length===1?e[0]:t.reduce((r,a,p)=>r+(y=>{if(y._$cssResult$===!0)return y.cssText;if(typeof y=="number")return y;throw Error("Value passed to 'css' function must be a 'css' function result: "+y+". Use 'unsafeCSS' to pass non-literal values, but take care to ensure page security.")})(a)+e[p+1],e[0]);return new xj(i,e,ox)},rce=(e,t)=>{if(nx)e.adoptedStyleSheets=t.map(i=>i instanceof CSSStyleSheet?i:i.styleSheet);else for(const i of t){const r=document.createElement("style"),a=ig.litNonce;a!==void 0&&r.setAttribute("nonce",a),r.textContent=i.cssText,e.appendChild(r)}},w$=nx?e=>e:e=>e instanceof CSSStyleSheet?(t=>{let i="";for(const r of t.cssRules)i+=r.cssText;return ice(i)})(e):e;/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const{is:sce,defineProperty:nce,getOwnPropertyDescriptor:oce,getOwnPropertyNames:ace,getOwnPropertySymbols:lce,getPrototypeOf:uce}=Object,ql=globalThis,b$=ql.trustedTypes,hce=b$?b$.emptyScript:"",Cb=ql.reactiveElementPolyfillSupport,k0=(e,t)=>e,w_={toAttribute(e,t){switch(t){case Boolean:e=e?hce:null;break;case Object:case Array:e=e==null?e:JSON.stringify(e)}return e},fromAttribute(e,t){let i=e;switch(t){case Boolean:i=e!==null;break;case Number:i=e===null?null:Number(e);break;case Object:case Array:try{i=JSON.parse(e)}catch{i=null}}return i}},Tj=(e,t)=>!sce(e,t),_$={attribute:!0,type:String,converter:w_,reflect:!1,hasChanged:Tj};Symbol.metadata??(Symbol.metadata=Symbol("metadata")),ql.litPropertyMetadata??(ql.litPropertyMetadata=new WeakMap);let Fc=class extends HTMLElement{static addInitializer(t){this._$Ei(),(this.l??(this.l=[])).push(t)}static get observedAttributes(){return this.finalize(),this._$Eh&&[...this._$Eh.keys()]}static createProperty(t,i=_$){if(i.state&&(i.attribute=!1),this._$Ei(),this.elementProperties.set(t,i),!i.noAccessor){const r=Symbol(),a=this.getPropertyDescriptor(t,r,i);a!==void 0&&nce(this.prototype,t,a)}}static getPropertyDescriptor(t,i,r){const{get:a,set:p}=oce(this.prototype,t)??{get(){return this[i]},set(y){this[i]=y}};return{get(){return a==null?void 0:a.call(this)},set(y){const g=a==null?void 0:a.call(this);p.call(this,y),this.requestUpdate(t,g,r)},configurable:!0,enumerable:!0}}static getPropertyOptions(t){return this.elementProperties.get(t)??_$}static _$Ei(){if(this.hasOwnProperty(k0("elementProperties")))return;const t=uce(this);t.finalize(),t.l!==void 0&&(this.l=[...t.l]),this.elementProperties=new Map(t.elementProperties)}static finalize(){if(this.hasOwnProperty(k0("finalized")))return;if(this.finalized=!0,this._$Ei(),this.hasOwnProperty(k0("properties"))){const i=this.properties,r=[...ace(i),...lce(i)];for(const a of r)this.createProperty(a,i[a])}const t=this[Symbol.metadata];if(t!==null){const i=litPropertyMetadata.get(t);if(i!==void 0)for(const[r,a]of i)this.elementProperties.set(r,a)}this._$Eh=new Map;for(const[i,r]of this.elementProperties){const a=this._$Eu(i,r);a!==void 0&&this._$Eh.set(a,i)}this.elementStyles=this.finalizeStyles(this.styles)}static finalizeStyles(t){const i=[];if(Array.isArray(t)){const r=new Set(t.flat(1/0).reverse());for(const a of r)i.unshift(w$(a))}else t!==void 0&&i.push(w$(t));return i}static _$Eu(t,i){const r=i.attribute;return r===!1?void 0:typeof r=="string"?r:typeof t=="string"?t.toLowerCase():void 0}constructor(){super(),this._$Ep=void 0,this.isUpdatePending=!1,this.hasUpdated=!1,this._$Em=null,this._$Ev()}_$Ev(){var t;this._$ES=new Promise(i=>this.enableUpdating=i),this._$AL=new Map,this._$E_(),this.requestUpdate(),(t=this.constructor.l)==null||t.forEach(i=>i(this))}addController(t){var i;(this._$EO??(this._$EO=new Set)).add(t),this.renderRoot!==void 0&&this.isConnected&&((i=t.hostConnected)==null||i.call(t))}removeController(t){var i;(i=this._$EO)==null||i.delete(t)}_$E_(){const t=new Map,i=this.constructor.elementProperties;for(const r of i.keys())this.hasOwnProperty(r)&&(t.set(r,this[r]),delete this[r]);t.size>0&&(this._$Ep=t)}createRenderRoot(){const t=this.shadowRoot??this.attachShadow(this.constructor.shadowRootOptions);return rce(t,this.constructor.elementStyles),t}connectedCallback(){var t;this.renderRoot??(this.renderRoot=this.createRenderRoot()),this.enableUpdating(!0),(t=this._$EO)==null||t.forEach(i=>{var r;return(r=i.hostConnected)==null?void 0:r.call(i)})}enableUpdating(t){}disconnectedCallback(){var t;(t=this._$EO)==null||t.forEach(i=>{var r;return(r=i.hostDisconnected)==null?void 0:r.call(i)})}attributeChangedCallback(t,i,r){this._$AK(t,r)}_$EC(t,i){var p;const r=this.constructor.elementProperties.get(t),a=this.constructor._$Eu(t,r);if(a!==void 0&&r.reflect===!0){const y=(((p=r.converter)==null?void 0:p.toAttribute)!==void 0?r.converter:w_).toAttribute(i,r.type);this._$Em=t,y==null?this.removeAttribute(a):this.setAttribute(a,y),this._$Em=null}}_$AK(t,i){var p;const r=this.constructor,a=r._$Eh.get(t);if(a!==void 0&&this._$Em!==a){const y=r.getPropertyOptions(a),g=typeof y.converter=="function"?{fromAttribute:y.converter}:((p=y.converter)==null?void 0:p.fromAttribute)!==void 0?y.converter:w_;this._$Em=a,this[a]=g.fromAttribute(i,y.type),this._$Em=null}}requestUpdate(t,i,r){if(t!==void 0){if(r??(r=this.constructor.getPropertyOptions(t)),!(r.hasChanged??Tj)(this[t],i))return;this.P(t,i,r)}this.isUpdatePending===!1&&(this._$ES=this._$ET())}P(t,i,r){this._$AL.has(t)||this._$AL.set(t,i),r.reflect===!0&&this._$Em!==t&&(this._$Ej??(this._$Ej=new Set)).add(t)}async _$ET(){this.isUpdatePending=!0;try{await this._$ES}catch(i){Promise.reject(i)}const t=this.scheduleUpdate();return t!=null&&await t,!this.isUpdatePending}scheduleUpdate(){return this.performUpdate()}performUpdate(){var r;if(!this.isUpdatePending)return;if(!this.hasUpdated){if(this.renderRoot??(this.renderRoot=this.createRenderRoot()),this._$Ep){for(const[p,y]of this._$Ep)this[p]=y;this._$Ep=void 0}const a=this.constructor.elementProperties;if(a.size>0)for(const[p,y]of a)y.wrapped!==!0||this._$AL.has(p)||this[p]===void 0||this.P(p,this[p],y)}let t=!1;const i=this._$AL;try{t=this.shouldUpdate(i),t?(this.willUpdate(i),(r=this._$EO)==null||r.forEach(a=>{var p;return(p=a.hostUpdate)==null?void 0:p.call(a)}),this.update(i)):this._$EU()}catch(a){throw t=!1,this._$EU(),a}t&&this._$AE(i)}willUpdate(t){}_$AE(t){var i;(i=this._$EO)==null||i.forEach(r=>{var a;return(a=r.hostUpdated)==null?void 0:a.call(r)}),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated(t)),this.updated(t)}_$EU(){this._$AL=new Map,this.isUpdatePending=!1}get updateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this._$ES}shouldUpdate(t){return!0}update(t){this._$Ej&&(this._$Ej=this._$Ej.forEach(i=>this._$EC(i,this[i]))),this._$EU()}updated(t){}firstUpdated(t){}};Fc.elementStyles=[],Fc.shadowRootOptions={mode:"open"},Fc[k0("elementProperties")]=new Map,Fc[k0("finalized")]=new Map,Cb==null||Cb({ReactiveElement:Fc}),(ql.reactiveElementVersions??(ql.reactiveElementVersions=[])).push("2.0.4");/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const R0=globalThis,Pv=R0.trustedTypes,S$=Pv?Pv.createPolicy("lit-html",{createHTML:e=>e}):void 0,Mj="$lit$",Cl=`lit$${Math.random().toFixed(9).slice(2)}$`,$j="?"+Cl,cce=`<${$j}>`,zh=document,a1=()=>zh.createComment(""),l1=e=>e===null||typeof e!="object"&&typeof e!="function",ax=Array.isArray,pce=e=>ax(e)||typeof(e==null?void 0:e[Symbol.iterator])=="function",Ob=`[ 	
\f\r]`,Wd=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,x$=/-->/g,T$=/>/g,Su=RegExp(`>|${Ob}(?:([^\\s"'>=/]+)(${Ob}*=${Ob}*(?:[^ 	
\f\r"'\`<>=]|("|')|))|$)`,"g"),M$=/'/g,$$=/"/g,Ej=/^(?:script|style|textarea|title)$/i,Ij=e=>(t,...i)=>({_$litType$:e,strings:t,values:i}),m6e=Ij(1),g6e=Ij(2),iu=Symbol.for("lit-noChange"),Ci=Symbol.for("lit-nothing"),E$=new WeakMap,Sh=zh.createTreeWalker(zh,129);function Aj(e,t){if(!ax(e)||!e.hasOwnProperty("raw"))throw Error("invalid template strings array");return S$!==void 0?S$.createHTML(t):t}const dce=(e,t)=>{const i=e.length-1,r=[];let a,p=t===2?"<svg>":t===3?"<math>":"",y=Wd;for(let g=0;g<i;g++){const _=e[g];let T,I,A=-1,P=0;for(;P<_.length&&(y.lastIndex=P,I=y.exec(_),I!==null);)P=y.lastIndex,y===Wd?I[1]==="!--"?y=x$:I[1]!==void 0?y=T$:I[2]!==void 0?(Ej.test(I[2])&&(a=RegExp("</"+I[2],"g")),y=Su):I[3]!==void 0&&(y=Su):y===Su?I[0]===">"?(y=a??Wd,A=-1):I[1]===void 0?A=-2:(A=y.lastIndex-I[2].length,T=I[1],y=I[3]===void 0?Su:I[3]==='"'?$$:M$):y===$$||y===M$?y=Su:y===x$||y===T$?y=Wd:(y=Su,a=void 0);const N=y===Su&&e[g+1].startsWith("/>")?" ":"";p+=y===Wd?_+cce:A>=0?(r.push(T),_.slice(0,A)+Mj+_.slice(A)+Cl+N):_+Cl+(A===-2?g:N)}return[Aj(e,p+(e[i]||"<?>")+(t===2?"</svg>":t===3?"</math>":"")),r]};let b_=class Cj{constructor({strings:t,_$litType$:i},r){let a;this.parts=[];let p=0,y=0;const g=t.length-1,_=this.parts,[T,I]=dce(t,i);if(this.el=Cj.createElement(T,r),Sh.currentNode=this.el.content,i===2||i===3){const A=this.el.content.firstChild;A.replaceWith(...A.childNodes)}for(;(a=Sh.nextNode())!==null&&_.length<g;){if(a.nodeType===1){if(a.hasAttributes())for(const A of a.getAttributeNames())if(A.endsWith(Mj)){const P=I[y++],N=a.getAttribute(A).split(Cl),D=/([.?@])?(.*)/.exec(P);_.push({type:1,index:p,name:D[2],strings:N,ctor:D[1]==="."?yce:D[1]==="?"?mce:D[1]==="@"?gce:G2}),a.removeAttribute(A)}else A.startsWith(Cl)&&(_.push({type:6,index:p}),a.removeAttribute(A));if(Ej.test(a.tagName)){const A=a.textContent.split(Cl),P=A.length-1;if(P>0){a.textContent=Pv?Pv.emptyScript:"";for(let N=0;N<P;N++)a.append(A[N],a1()),Sh.nextNode(),_.push({type:2,index:++p});a.append(A[P],a1())}}}else if(a.nodeType===8)if(a.data===$j)_.push({type:2,index:p});else{let A=-1;for(;(A=a.data.indexOf(Cl,A+1))!==-1;)_.push({type:7,index:p}),A+=Cl.length-1}p++}}static createElement(t,i){const r=zh.createElement("template");return r.innerHTML=t,r}};function ed(e,t,i=e,r){var y,g;if(t===iu)return t;let a=r!==void 0?(y=i._$Co)==null?void 0:y[r]:i._$Cl;const p=l1(t)?void 0:t._$litDirective$;return(a==null?void 0:a.constructor)!==p&&((g=a==null?void 0:a._$AO)==null||g.call(a,!1),p===void 0?a=void 0:(a=new p(e),a._$AT(e,i,r)),r!==void 0?(i._$Co??(i._$Co=[]))[r]=a:i._$Cl=a),a!==void 0&&(t=ed(e,a._$AS(e,t.values),a,r)),t}let fce=class{constructor(t,i){this._$AV=[],this._$AN=void 0,this._$AD=t,this._$AM=i}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}u(t){const{el:{content:i},parts:r}=this._$AD,a=((t==null?void 0:t.creationScope)??zh).importNode(i,!0);Sh.currentNode=a;let p=Sh.nextNode(),y=0,g=0,_=r[0];for(;_!==void 0;){if(y===_.index){let T;_.type===2?T=new lx(p,p.nextSibling,this,t):_.type===1?T=new _.ctor(p,_.name,_.strings,this,t):_.type===6&&(T=new vce(p,this,t)),this._$AV.push(T),_=r[++g]}y!==(_==null?void 0:_.index)&&(p=Sh.nextNode(),y++)}return Sh.currentNode=zh,a}p(t){let i=0;for(const r of this._$AV)r!==void 0&&(r.strings!==void 0?(r._$AI(t,r,i),i+=r.strings.length-2):r._$AI(t[i])),i++}},lx=class Oj{get _$AU(){var t;return((t=this._$AM)==null?void 0:t._$AU)??this._$Cv}constructor(t,i,r,a){this.type=2,this._$AH=Ci,this._$AN=void 0,this._$AA=t,this._$AB=i,this._$AM=r,this.options=a,this._$Cv=(a==null?void 0:a.isConnected)??!0}get parentNode(){let t=this._$AA.parentNode;const i=this._$AM;return i!==void 0&&(t==null?void 0:t.nodeType)===11&&(t=i.parentNode),t}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(t,i=this){t=ed(this,t,i),l1(t)?t===Ci||t==null||t===""?(this._$AH!==Ci&&this._$AR(),this._$AH=Ci):t!==this._$AH&&t!==iu&&this._(t):t._$litType$!==void 0?this.$(t):t.nodeType!==void 0?this.T(t):pce(t)?this.k(t):this._(t)}O(t){return this._$AA.parentNode.insertBefore(t,this._$AB)}T(t){this._$AH!==t&&(this._$AR(),this._$AH=this.O(t))}_(t){this._$AH!==Ci&&l1(this._$AH)?this._$AA.nextSibling.data=t:this.T(zh.createTextNode(t)),this._$AH=t}$(t){var p;const{values:i,_$litType$:r}=t,a=typeof r=="number"?this._$AC(t):(r.el===void 0&&(r.el=b_.createElement(Aj(r.h,r.h[0]),this.options)),r);if(((p=this._$AH)==null?void 0:p._$AD)===a)this._$AH.p(i);else{const y=new fce(a,this),g=y.u(this.options);y.p(i),this.T(g),this._$AH=y}}_$AC(t){let i=E$.get(t.strings);return i===void 0&&E$.set(t.strings,i=new b_(t)),i}k(t){ax(this._$AH)||(this._$AH=[],this._$AR());const i=this._$AH;let r,a=0;for(const p of t)a===i.length?i.push(r=new Oj(this.O(a1()),this.O(a1()),this,this.options)):r=i[a],r._$AI(p),a++;a<i.length&&(this._$AR(r&&r._$AB.nextSibling,a),i.length=a)}_$AR(t=this._$AA.nextSibling,i){var r;for((r=this._$AP)==null?void 0:r.call(this,!1,!0,i);t&&t!==this._$AB;){const a=t.nextSibling;t.remove(),t=a}}setConnected(t){var i;this._$AM===void 0&&(this._$Cv=t,(i=this._$AP)==null||i.call(this,t))}},G2=class{get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}constructor(t,i,r,a,p){this.type=1,this._$AH=Ci,this._$AN=void 0,this.element=t,this.name=i,this._$AM=a,this.options=p,r.length>2||r[0]!==""||r[1]!==""?(this._$AH=Array(r.length-1).fill(new String),this.strings=r):this._$AH=Ci}_$AI(t,i=this,r,a){const p=this.strings;let y=!1;if(p===void 0)t=ed(this,t,i,0),y=!l1(t)||t!==this._$AH&&t!==iu,y&&(this._$AH=t);else{const g=t;let _,T;for(t=p[0],_=0;_<p.length-1;_++)T=ed(this,g[r+_],i,_),T===iu&&(T=this._$AH[_]),y||(y=!l1(T)||T!==this._$AH[_]),T===Ci?t=Ci:t!==Ci&&(t+=(T??"")+p[_+1]),this._$AH[_]=T}y&&!a&&this.j(t)}j(t){t===Ci?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,t??"")}},yce=class extends G2{constructor(){super(...arguments),this.type=3}j(t){this.element[this.name]=t===Ci?void 0:t}},mce=class extends G2{constructor(){super(...arguments),this.type=4}j(t){this.element.toggleAttribute(this.name,!!t&&t!==Ci)}},gce=class extends G2{constructor(t,i,r,a,p){super(t,i,r,a,p),this.type=5}_$AI(t,i=this){if((t=ed(this,t,i,0)??Ci)===iu)return;const r=this._$AH,a=t===Ci&&r!==Ci||t.capture!==r.capture||t.once!==r.once||t.passive!==r.passive,p=t!==Ci&&(r===Ci||a);a&&this.element.removeEventListener(this.name,this,r),p&&this.element.addEventListener(this.name,this,t),this._$AH=t}handleEvent(t){var i;typeof this._$AH=="function"?this._$AH.call(((i=this.options)==null?void 0:i.host)??this.element,t):this._$AH.handleEvent(t)}},vce=class{constructor(t,i,r){this.element=t,this.type=6,this._$AN=void 0,this._$AM=i,this.options=r}get _$AU(){return this._$AM._$AU}_$AI(t){ed(this,t)}};const Pb=R0.litHtmlPolyfillSupport;Pb==null||Pb(b_,lx),(R0.litHtmlVersions??(R0.litHtmlVersions=[])).push("3.2.1");const wce=(e,t,i)=>{const r=(i==null?void 0:i.renderBefore)??t;let a=r._$litPart$;if(a===void 0){const p=(i==null?void 0:i.renderBefore)??null;r._$litPart$=a=new lx(t.insertBefore(a1(),p),p,void 0,i??{})}return a._$AI(e),a};/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */let Ap=class extends Fc{constructor(){super(...arguments),this.renderOptions={host:this},this._$Do=void 0}createRenderRoot(){var i;const t=super.createRenderRoot();return(i=this.renderOptions).renderBefore??(i.renderBefore=t.firstChild),t}update(t){const i=this.render();this.hasUpdated||(this.renderOptions.isConnected=this.isConnected),super.update(t),this._$Do=wce(i,this.renderRoot,this.renderOptions)}connectedCallback(){var t;super.connectedCallback(),(t=this._$Do)==null||t.setConnected(!0)}disconnectedCallback(){var t;super.disconnectedCallback(),(t=this._$Do)==null||t.setConnected(!1)}render(){return iu}};var OA;Ap._$litElement$=!0,Ap.finalized=!0,(OA=globalThis.litElementHydrateSupport)==null||OA.call(globalThis,{LitElement:Ap});const kb=globalThis.litElementPolyfillSupport;kb==null||kb({LitElement:Ap});(globalThis.litElementVersions??(globalThis.litElementVersions=[])).push("4.1.1");/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const Pj={ATTRIBUTE:1,CHILD:2,PROPERTY:3,BOOLEAN_ATTRIBUTE:4},kj=e=>(...t)=>({_$litDirective$:e,values:t});let Rj=class{constructor(t){}get _$AU(){return this._$AM._$AU}_$AT(t,i,r){this._$Ct=t,this._$AM=i,this._$Ci=r}_$AS(t,i){return this.update(t,i)}update(t,i){return this.render(...i)}};/**
 * @license
 * Copyright 2018 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const bce=kj(class extends Rj{constructor(e){var t;if(super(e),e.type!==Pj.ATTRIBUTE||e.name!=="class"||((t=e.strings)==null?void 0:t.length)>2)throw Error("`classMap()` can only be used in the `class` attribute and must be the only part in the attribute.")}render(e){return" "+Object.keys(e).filter(t=>e[t]).join(" ")+" "}update(e,[t]){var r,a;if(this.st===void 0){this.st=new Set,e.strings!==void 0&&(this.nt=new Set(e.strings.join(" ").split(/\s/).filter(p=>p!=="")));for(const p in t)t[p]&&!((r=this.nt)!=null&&r.has(p))&&this.st.add(p);return this.render(t)}const i=e.element.classList;for(const p of this.st)p in t||(i.remove(p),this.st.delete(p));for(const p in t){const y=!!t[p];y===this.st.has(p)||(a=this.nt)!=null&&a.has(p)||(y?(i.add(p),this.st.add(p)):(i.remove(p),this.st.delete(p)))}return iu}});/**
 * @license
 * Copyright 2018 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const Nj="important",_ce=" !"+Nj,Sce=kj(class extends Rj{constructor(e){var t;if(super(e),e.type!==Pj.ATTRIBUTE||e.name!=="style"||((t=e.strings)==null?void 0:t.length)>2)throw Error("The `styleMap` directive must be used in the `style` attribute and must be the only part in the attribute.")}render(e){return Object.keys(e).reduce((t,i)=>{const r=e[i];return r==null?t:t+`${i=i.includes("-")?i:i.replace(/(?:^(webkit|moz|ms|o)|)(?=[A-Z])/g,"-$&").toLowerCase()}:${r};`},"")}update(e,[t]){const{style:i}=e.element;if(this.ft===void 0)return this.ft=new Set(Object.keys(t)),this.render(t);for(const r of this.ft)t[r]==null&&(this.ft.delete(r),r.includes("-")?i.removeProperty(r):i[r]=null);for(const r in t){const a=t[r];if(a!=null){this.ft.add(r);const p=typeof a=="string"&&a.endsWith(_ce);r.includes("-")||p?i.setProperty(r,p?a.slice(0,-11):a,p?Nj:""):i[r]=a}}return iu}});var Lj=(e="",t={},i=V2())=>{const r={emit:a=>{e===""&&rx();const p=new CustomEvent(e,{detail:a,cancelable:!0,bubbles:!0,composed:!0,...t});return i.el.dispatchEvent(p),p}};return e===""&&bj(void 0,a=>{e=a.key},r),r},$6e=Lj.bind(null,""),xce=()=>{},Ah,Tce=(Ah=class extends Ap{constructor(){var i,r,a;super(),this.el=this.constructor.lazy??this,this.manager=Ghe(this),this._postLoad=((i=this.constructor.lazy)==null?void 0:i._postLoad)??new Fh,this._offspring=((r=this.constructor.lazy)==null?void 0:r._offspring)??[],this._postLoaded=((a=this.constructor.lazy)==null?void 0:a._postLoaded)??new Fh,this._enableUpdating=this.enableUpdating,this.enableUpdating=xce;const t=Ah.prototype.shouldUpdate;this.shouldUpdate!==t&&(this._originalShouldUpdate=this.shouldUpdate,this.shouldUpdate=t)}static finalizeStyles(t){var a;const i=super.finalizeStyles(t),r=this.shadowRootOptions===d$;return((a=this.runtime)==null?void 0:a.commonStyles)===void 0||r?i:[this.runtime.commonStyles,...i]}static createProperty(t,i){const r=typeof i=="number"?i:Array.isArray(i)?i[0]:0,a=Array.isArray(i)?i[1]:void 0;super.createProperty(t,{attribute:r&1&&typeof t=="string"?yj(t):!1,reflect:!!(r&2),type:r&4?Boolean:r&8?Number:void 0,state:!!(r&16),readOnly:!!(r&32),noAccessor:!!(r&64),...a})}connectedCallback(){if(this.el.hasAttribute("defer-hydration"))return;const t=!this.manager.connectedCalled;super.connectedCallback(),t&&queueMicrotask(()=>this._load().catch(i=>{this._postLoaded.reject(i),setTimeout(()=>{throw i})}))}createRenderRoot(){const t=this.el.shadowRoot,i=this.constructor,r=i.shadowRootOptions,p=t??(r===d$?this.el:this.el.attachShadow(r));if(Object.defineProperty(this,"shadowRoot",{value:p}),t)return Ap.prototype.createRenderRoot.call(this),t;if(this.isConnected){const y=p.getRootNode();y.adoptedStyleSheets=[...y.adoptedStyleSheets,...i.elementStyles.map(g=>"styleSheet"in g?g.styleSheet:g)]}return p}async _load(){const t=this.el._ancestorLoad??mj(this.el);t&&await t,await this.manager._load(),this._enableUpdating(!0),this.performUpdate(),this._postLoad.resolve(),await Promise.resolve();const i=this._offspring.filter(r=>{var a;return!((a=r.manager)!=null&&a.loadedCalled)});i.length&&await Promise.allSettled(i.map(async r=>await r.componentOnReady())),this._offspring.length=0,this.el.setAttribute(this.constructor.runtime.hydratedAttribute,""),this.manager._loaded(),this._postLoaded.resolve()}shouldUpdate(t){var i;return this.$changes=t,((i=this._originalShouldUpdate)==null?void 0:i.call(this,t))??!0}listen(t,i,r){const a=(i==null?void 0:i.bind(this))??i;this.manager.onLifecycle(()=>(this.el.addEventListener(t,a,r),()=>this.el.removeEventListener(t,a,r)))}listenOn(t,i,r,a){const p=(r==null?void 0:r.bind(this))??r;this.manager.onLifecycle(()=>(t.addEventListener(i,p,a),()=>t.removeEventListener(i,p,a)))}async componentOnReady(){return await this._postLoaded.promise,this}},Ah.lumina=!0,Ah);Tce.$createEvent=Lj;function Mce(e){let t;const i=a=>{var p;t=new URL(a,((p=globalThis.location)==null?void 0:p.href)||void 0).href},r={...e,getAssetPath(a){var y;const p=new URL(a,t);return p.origin!==((y=globalThis.location)==null?void 0:y.origin)?p.href:p.pathname},setAssetPath:i,customElement(a,p){p.runtime=r,p.tagName=a,customElements.get(a)||customElements.define(a,p)}};return i(e.defaultAssetPath),r}var E6e=e=>typeof e=="object"&&e!=null?bce(e):e,I6e=e=>typeof e=="object"&&e!=null?Sce(e):e,A6e=Ci;function C6e(e,t,i){i==null?e.removeAttribute(t):e.setAttribute(t,i)}var O6e={toAttribute:e=>e===!0?"":e===!1?null:e};/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.1.0 */const $ce="calcite-mode-auto",Ece="calcite-mode-dark",P6e={rtl:"calcite--rtl"},k6e={filter:250,nextTick:0,resize:150,reposition:100};function I$(){const{classList:e}=document.body,t=window.matchMedia("(prefers-color-scheme: dark)").matches,i=()=>e.contains(Ece)||e.contains($ce)&&t?"dark":"light",r=y=>document.body.dispatchEvent(new CustomEvent("calciteModeChange",{bubbles:!0,detail:{mode:y}})),a=y=>{p!==y&&r(y),p=y};let p=i();r(p),window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",y=>a(y.matches?"dark":"light")),new MutationObserver(()=>a(i())).observe(document.body,{attributes:!0,attributeFilter:["class"]})}const wa=globalThis.calciteConfig,R6e=(wa==null?void 0:wa.focusTrapStack)||[],N6e=(wa==null?void 0:wa.logLevel)||"info",A$="3.1.0",Ice="2025-03-26",Ace="d5f75fd64";function Cce(){if(wa&&wa.version)return;console.info(`Using Calcite Components ${A$} [Date: ${Ice}, Revision: ${Ace}]`);const e=wa||globalThis.calciteConfig||{};Object.defineProperty(e,"version",{value:A$,writable:!1}),globalThis.calciteConfig=e}const Oce=()=>typeof navigator<"u"&&typeof window<"u"&&typeof location<"u"&&typeof document<"u"&&window.location===location&&window.document===document;function Pce(){Oce()&&(document.readyState==="interactive"?I$():document.addEventListener("DOMContentLoaded",()=>I$(),{once:!0})),Cce()}Pce();const kce=Mce({defaultAssetPath:"https://js.arcgis.com/calcite-components/3.1.0/",hydratedAttribute:"calcite-hydrated"}),{customElement:L6e,getAssetPath:D6e,setAssetPath:Rce}=kce;/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.1.0 */let Dj=!1;const Nce=e=>{Dj=!0,Rce(e)};let jj;function Lce(){Dj||Nce(Gs(ti(jj)))}function Yh(e){var i;const t=[];for(const r of Object.keys(e))customElements.get(`calcite-${r}`)||t.push((i=e[r])==null?void 0:i.call(e));return t.length>0?Promise.all(t):null}jj="components/assets";const Fj=Symbol("widget"),zj=Symbol("widget-test-data"),Dce=[],jce={},kv=new WeakMap;function Uj(e,t){let i=t.children;if(i!=null&&i.length)for(let a=0;a<i.length;++a)i[a]=Uj(e,i[a]);else i=Dce;const r=t.vnodeSelector;if(Rv(r)){const a=t.properties||jce,p=a.key||r,y={key:p,afterCreate:Fce,afterUpdate:zce,afterRemoved:Vj,parentWidget:e,widgetConstructor:r,widgetProperties:{...a,key:p,children:i}};return{vnodeSelector:r.vnodeSelector,properties:y,children:void 0,text:void 0,domNode:null}}return t}function Fce(e,t,i,{parentWidget:r,widgetConstructor:a,widgetProperties:p}){var g;const y=new a(p);y.container=e,kv.set(e,y),(g=y.afterCreate)==null||g.call(y,y,e),r.addHandles(yt(()=>Vj(e))),queueMicrotask(()=>{y[zj].projector.renderNow()})}function zce(e,t,i,{widgetProperties:r}){var p;const a=kv.get(e);a&&(a.set(r),(p=a.afterUpdate)==null||p.call(a,a,e))}function Vj(e){var i;const t=kv.get(e);t&&((i=t.afterRemoved)==null||i.call(t,t,e),t.destroy(),kv.delete(e))}function Rv(e){return typeof e=="function"&&e[Fj]}const C$=new Set;function Uce(e){C$.add(e),e.finally(()=>C$.delete(e))}var Gj;const Vce="esri.widgets.Widget";let Gce=0;function Bj(e,t){const i=Object.prototype.hasOwnProperty;for(const r in t)i.call(t,r)&&i.call(e,r)&&(e[r]!=null&&t[r]!=null&&typeof e[r]=="object"&&typeof t[r]=="object"?Bj(e[r],t[r]):e[r]=t[r]);return e}const Bce=ohe({postProcessProjectionOptions(e){const t=e.eventHandlerInterceptor,i=/capture$/i;e.eventHandlerInterceptor=(r,a,p,y)=>{const g=t==null?void 0:t(r,a,p,y),_=i.test(r);if(!((r=r.replace(i,"")).toLowerCase()in p)||_){const T=r[2].toLowerCase()+r.slice(3),I=N=>g==null?void 0:g.call(p,N);p.addEventListener(T,I,_);const A=()=>p.removeEventListener(T,I,_),P=y.afterRemoved;y.afterRemoved=N=>{P==null||P(N),A()}}return g}},handleInterceptedEvent(e,t,i,r){const{eventPhase:a,type:p}=r,y=a===Event.CAPTURING_PHASE;let g=`on${p}${y?"capture":""}`;const _=t.properties;(_&&g in _||(g=`on${p[0].toUpperCase()}${p.slice(1)}${y?"Capture":""}`,_&&g in _))&&(qR(),e.scheduleRender(),_[g].call(_.bind||i,r))}});let Rb=!1,vi=class extends hd.EsriPromiseMixin(Ss.EventedAccessor){constructor(t,i){super(t,i),this._attached=!1,this._projector=Bce,this._readyForTrueRender=!1,this.key=this,this.autoRenderingEnabled=!0,this._loadLocale=e6(async()=>{var _;if((_=this._messageBundleProps)!=null&&_.length){const T=await Promise.allSettled(this._messageBundleProps.map(async({bundlePath:I,propertyName:A})=>{if(this.destroyed)return;let P=await N6(I);this.uiStrings&&Object.keys(this.uiStrings)&&(P=Bj(te(P),this.uiStrings)),this[A]=P}));if(this.destroyed)return;for(const I of T)I.status==="rejected"&&ye.getLogger(this).error("widget-intl:locale-error",this.declaredClass,I.reason)}await this.loadLocale()}),Lce();const r="esri-widget-uid-"+U2(),a=this.render.bind(this);this._trackingTarget=new Kv(()=>{this.autoRenderingEnabled&&this.scheduleRender()});const p=()=>({vnodeSelector:"div",properties:{key:`${r}-hidden`,class:"",styles:{display:"none"}},domNode:null,children:void 0,text:void 0}),y=()=>{var A,P;if(!this._readyForTrueRender||this.destroyed)return null;const _=a()??p(),T=_.properties??(_.properties={});if(T.key??(T.key=r),Rv(_.vnodeSelector)){if(!this.visible)return p()}else this.visible?T.styles||(T.styles={}):(T.class="",T.styles={display:"none"}),(A=T.styles).display??(A.display="");let I=0;return(P=_.children)==null||P.forEach(N=>{var D;Rv(N.vnodeSelector)||(N.properties??(N.properties={}),(D=N.properties).key??(D.key=`${this.id}--${I++}`))}),Uj(this,_)};this.render=()=>{if(Rb)return y();let _=OQ(this)??null;if(_)return _;this._trackingTarget.clear(),Rb=!0;try{_=xa(this._trackingTarget,y)}catch(T){throw ye.getLogger(this).error(T),T}finally{Rb=!1}return _&&PQ(this,_),_};const g=this.beforeFirstRender();g?this._resourcesFetch=g.then(()=>{this._readyForTrueRender=!0,this._postInitialize()}):(this._resourcesFetch=Promise.resolve().then(()=>{this._postInitialize()}),this._readyForTrueRender=!0),this.addResolvingPromise(this._resourcesFetch),Uce(this._resourcesFetch)}normalizeCtorArgs(t,i){const r={...t};return i&&(r.container=i),r}postInitialize(){}beforeFirstRender(){var i;const t=this.loadDependencies();return(i=this._messageBundleProps)!=null&&i.length||t?Promise.all([t,this._loadLocale()]).then(()=>{}).catch(o7):null}loadDependencies(){return null}loadLocale(){return null}destroy(){this.destroyed||(Ht(this._trackingTarget),Ht(this.viewModel),this._detach(this.container),this._set("container",null),this._emitter.clear(),this.render=()=>null,this._projector=null,Kw(this))}set container(t){this._get("container")||this._set("container",t)}castContainer(t){return cS(t)}get domNode(){return this.container}set domNode(t){this.container=t}get icon(){return null}set icon(t){this._overrideIfSome("icon",t)}get id(){var t;return this._get("id")||((t=this.container)==null?void 0:t.id)||Date.now().toString(16)+"-widget-"+Gce++}set id(t){t&&this._set("id",t)}get label(){return this.declaredClass.split(".").pop()}set label(t){this._overrideIfSome("label",t)}get renderable(){return this._resourcesFetch}get visible(){return this._get("visible")}set visible(t){this._set("visible",t)}get[(Gj=Fj,zj)](){return{projector:this._projector}}render(){throw new Error("not implemented")}scheduleRender(){this.destroyed||(Kw(this),this._projector.scheduleRender())}classes(...t){return HR.apply(this,t)}renderNow(){Kw(this),this._projector.renderNow()}_postInitialize(){var i;if(this.destroyed)return;this.scheduleRender(),(i=this._delegatedEventNames)!=null&&i.length&&this.addHandles(Le(()=>this.viewModel,(r,a)=>{a&&this.removeHandles("delegated-events"),r&&Zv(r)&&this.addHandles(this._delegatedEventNames.map(p=>v1(r,p,y=>{this.emit(p,y)})),"delegated-events")},qr)),this.postInitialize();const t=async()=>{await this._loadLocale().catch(o7),this.scheduleRender()};this.addHandles([P6(t),Le(()=>this.uiStrings,t),gr(()=>this.container,r=>{this.destroyed||this._attach(r)},{initial:!0,once:!0})])}_attach(t){t&&(this._projector.merge(t,this.render),this._attached=!0)}_detach(t){var i;this._attached&&(this._projector.detach(this.render),this._attached=!1),(i=t==null?void 0:t.parentNode)==null||i.removeChild(t)}};vi[Gj]=!0,vi.vnodeSelector="div",v([S()],vi.prototype,"_readyForTrueRender",void 0),v([S({value:null})],vi.prototype,"container",null),v([ct("container")],vi.prototype,"castContainer",null),v([S()],vi.prototype,"icon",null),v([S()],vi.prototype,"id",null),v([S()],vi.prototype,"label",null),v([S()],vi.prototype,"renderable",null),v([S()],vi.prototype,"uiStrings",void 0),v([S()],vi.prototype,"viewModel",void 0),v([S({value:!0})],vi.prototype,"visible",null),v([S()],vi.prototype,"key",void 0),v([S()],vi.prototype,"children",void 0),v([S()],vi.prototype,"afterCreate",void 0),v([S()],vi.prototype,"afterUpdate",void 0),v([S()],vi.prototype,"afterRemoved",void 0),vi=v([H(Vce)],vi);const pu=vi,qce=new Map;function Hce(e){return qce.get(e)}function O$(e,t){return e&&"copyright"in e&&(!t||typeof e.originOf=="function"&&e.originOf("copyright")==="user")}function Wce(e,t){return e.length!==t.length||e.some((i,r)=>i.text!==t[r].text)}function Jd(e,t,i){!i||!t||e.find(r=>r.layerView===t&&r.text===i)||e.push({text:i,layerView:t})}function Jce(e){return e.type==="bing-maps"}const Lo=[];let zc=class extends Ae{constructor(t){super(t),this._clear=()=>{this._fetchedAttributionData.clear(),this._pendingAttributions.clear(),this.removeHandles("suspension"),this.notifyChange("state")},this._pendingAttributions=new Set,this._fetchedAttributionData=new Map,this.items=new xe,this.view=null,this._allLayerViewsChange=i=>{var a;this.removeHandles("suspension"),this.removeHandles("visible-geometry-changed");const r=(a=this.view)==null?void 0:a.allLayerViews;r&&(this.addHandles(r.map(p=>Le(()=>{var y;return[p.suspended,(y=p.layer)==null?void 0:y.attributionVisible]},()=>this._updateAttributionItems())).toArray(),"suspension"),r.forEach(p=>{p.declaredClass==="esri.views.3d.layers.Tiles3DLayerView3D"&&this.addHandles(p.on("visible-geometry-changed",()=>this._updateAttributionItems()),"visible-geometry-changed")})),i!=null&&i.removed&&i.removed.forEach(p=>{this._pendingAttributions.delete(p),this._fetchedAttributionData.delete(p)}),this._updateAttributionItems()},this.addHandles([_o(()=>{var i;return(i=this.view)==null?void 0:i.allLayerViews},"change",i=>this._allLayerViewsChange(i),{onListenerAdd:()=>this._allLayerViewsChange(),onListenerRemove:this._clear}),gr(()=>{var i;return((i=this.view)==null?void 0:i.stationary)===!0},()=>this._updateAttributionItems())])}destroy(){this.view=null,this._fetchedAttributionData.clear(),this._pendingAttributions.clear(),this.items.removeAll()}get state(){var t;return(t=this.view)!=null&&t.ready?this._pendingAttributions.size>0?"loading":"ready":"disabled"}_updateAttributionItems(){const t=this.view,i=t==null?void 0:t.allLayerViews;if(Lo.length=0,!t||!i)return void this._clear();i.forEach(a=>{var g,_;if(a.suspended||!((g=a.layer)!=null&&g.attributionVisible))return;const p=a.layer;if(O$(p,"user"))return void Jd(Lo,a,p.copyright);if(p.hasAttributionData){if(this._fetchedAttributionData.has(a)){const T=this._fetchedAttributionData.get(a);return void(T?Jd(Lo,a,this._getDynamicAttribution(T,t,p)):O$(p)&&Jd(Lo,a,p.copyright))}return void this._fetchAttributionData(a)}const y="portalItem"in p?(_=p.portalItem)==null?void 0:_.accessInformation:void 0;Jd(Lo,a,y||p.copyright)});const r=i.find(a=>{var p;return((p=a.layer)==null?void 0:p.type)==="integrated-mesh-3dtiles"});if(this.view&&r){const a=Hce(this.view);if(a){const p=a.getAttributionText();for(let y=0;y<p.length;++y)Jd(Lo,r,p[y])}}Wce(this.items,Lo)&&(this.items.removeAll(),this.items.addMany(Lo)),Lo.length=0,this.notifyChange("state")}async _fetchAttributionData(t){if(this._pendingAttributions.has(t))return;this._pendingAttributions.add(t);const i=await i2(t.layer.fetchAttributionData());if(this._pendingAttributions.has(t)){const r=i.ok?this._createContributionIndex(i.value,Jce(t.layer)):null;this._pendingAttributions.delete(t),this._fetchedAttributionData.set(t,r)}this._updateAttributionItems()}_createContributionIndex(t,i){const r=t.contributors,a={};if(!r)return a;for(let p=0;p<r.length;p++){const y=r[p],g=y.coverageAreas;if(!g)return;for(const _ of g){const T=_.bbox,I=_.zoomMin-(i&&_.zoomMin?1:0),A=_.zoomMax-(i&&_.zoomMax?1:0),P=new Ct({xmin:T[1],ymin:T[0],xmax:T[3],ymax:T[2],spatialReference:qe.WGS84}),N={extent:zl(P),attribution:y.attribution||"",score:_.score!=null?_.score:100,id:p};for(let D=I;D<=A;D++)a[D]??(a[D]=[]),a[D].push(N)}}return a.maxKey=Math.max.apply(null,Object.keys(a)),a}_getDynamicAttribution(t,i,r){var I;const{extent:a,scale:p}=i;let y=((I=r.tileInfo)==null?void 0:I.scaleToZoom(p))??0;if(y=Math.min(t.maxKey??0,Math.round(y)),!a||y==null||y<=-1)return"";const g=t[y],_=n2(a.center.clone().normalize(),qe.WebMercator),T=new Set;return g?g.filter(A=>{const P=A.id,N=!T.has(P)&&_&&A.extent&&$1(A.extent,_);return N&&T.add(P),N}).sort((A,P)=>P.score-A.score||A.objectId-P.objectId).map(A=>A.attribution).join(", "):""}};v([S({readOnly:!0,type:xe})],zc.prototype,"items",void 0),v([S({readOnly:!0})],zc.prototype,"state",null),v([S()],zc.prototype,"view",void 0),zc=v([H("esri.widgets.Attribution.AttributionViewModel")],zc);const qj=zc,ii={button:"esri-button",buttonDisabled:"esri-button--disabled",buttonHalf:"esri-button--half",buttonSecondary:"esri-button--secondary",buttonSmall:"esri-button--small",buttonTertiary:"esri-button--tertiary",buttonThird:"esri-button--third",disabled:"esri-disabled",empty:"esri-widget__content--empty",heading:"esri-widget__heading",interactive:"esri-interactive",loaderAnimation:"esri-widget__loader-animation",panel:"esri-widget--panel",table:"esri-widget__table",widget:"esri-widget",widgetButton:"esri-widget--button"};function Hj(){return function(e,t){if(!e[t])throw new TypeError(`Cannot auto bind undefined function '${String(t)}'`);return{value:Kce(e[t])}}}function Zce(e){const t=e==null?void 0:e.type;return e instanceof KeyboardEvent||t==="keyup"||t==="keydown"||t==="keypress"}function Kce(e){return function(t,...i){Zce(t)?DQ(t.key)&&(t.preventDefault(),t.stopPropagation(),t.target.click()):e.call(this,t,...i)}}function jn(e){return(t,i)=>{t.hasOwnProperty("_messageBundleProps")||(t._messageBundleProps=t._messageBundleProps?t._messageBundleProps.slice():[]),t._messageBundleProps.push({bundlePath:e,propertyName:i})}}var Yce=function(e){return{vnodeSelector:"",properties:void 0,children:void 0,text:e.toString(),domNode:null}},Wj=function(e,t){for(var i=0,r=e.length;i<r;i++){var a=e[i];Array.isArray(a)?Wj(a,t):a!=null&&a!==!1&&(a.hasOwnProperty("vnodeSelector")||(a=Yce(a)),t.push(a))}},Xce=function(e,t){for(var i=[],r=2;r<arguments.length;r++)i[r-2]=arguments[r];if(i.length===1&&typeof i[0]=="string")return{vnodeSelector:e,properties:t||void 0,children:void 0,text:i[0],domNode:null};var a=[];return Wj(i,a),{vnodeSelector:e,properties:t||void 0,children:a,text:void 0,domNode:null}};function Ge(e,t,...i){return typeof e!="function"||Rv(e)?Xce(e,t??null,...i):e(t,...i)}function z6e(...e){return e}const yc="esri-attribution",mc={base:yc,poweredBy:`${yc}__powered-by`,sources:`${yc}__sources`,open:`${yc}--open`,sourcesOpen:`${yc}__sources--open`,link:`${yc}__link`};let Sr=class extends pu{constructor(t,i){super(t,i),this._isOpen=!1,this._attributionTextOverflowed=!1,this._prevSourceNodeHeight=0,this._resizeObserver=new ResizeObserver(r=>r.forEach(({target:a})=>this._checkSourceTextOverflow(a))),this.itemDelimiter=" | ",this.messages=null,this.viewModel=new qj}initialize(){this.addHandles(_o(()=>{var t;return(t=this.viewModel)==null?void 0:t.items},"change",()=>this.scheduleRender()))}destroy(){var t;(t=this._resizeObserver)==null||t.disconnect()}get _isInteractive(){return this._isOpen||this._attributionTextOverflowed}get attributionText(){return this.viewModel.items.reduce((t,i)=>(t.includes(i.text)||t.push(i.text),t),[]).join(this.itemDelimiter)}get icon(){return"description"}set icon(t){this._overrideIfSome("icon",t)}get label(){var t;return((t=this.messages)==null?void 0:t.widgetLabel)??""}set label(t){this._overrideIfSome("label",t)}get view(){return this.viewModel.view}set view(t){this.viewModel.view=t}render(){const t={[mc.open]:this._isOpen};return Ge("div",{bind:this,class:this.classes(mc.base,ii.widget,t),dir:"ltr",onclick:this._toggleState,onkeydown:this._toggleState},this._renderSourcesNode(),this._renderPoweredBy())}_renderPoweredBy(){return Ge("div",{class:mc.poweredBy},"Powered by"," ",Ge("a",{class:mc.link,href:"https://www.esri.com/",rel:"noreferrer",target:"_blank"},"Esri"))}_renderSourcesNode(){const t=this._isOpen,i=this._isInteractive,r=i?0:void 0,{attributionText:a}=this,p={[mc.sourcesOpen]:t,[ii.interactive]:i};return Ge("div",{afterCreate:this._afterSourcesNodeCreate,bind:this,class:this.classes(mc.sources,p),innerHTML:a,tabIndex:r})}_afterSourcesNodeCreate(t){this._prevSourceNodeHeight=t.clientWidth,this._resizeObserver.observe(t)}_checkSourceTextOverflow(t){let i=!1;const{clientHeight:r,clientWidth:a,scrollWidth:p}=t,y=p>a,g=this._attributionTextOverflowed!==y;if(this._attributionTextOverflowed=y,g&&(i=!0),this._isOpen){const _=r<this._prevSourceNodeHeight;this._prevSourceNodeHeight=r,_&&(this._isOpen=!1,i=!0)}i&&this.scheduleRender()}_toggleState(){this._isInteractive&&(this._isOpen=!this._isOpen)}};v([S()],Sr.prototype,"_isOpen",void 0),v([S()],Sr.prototype,"_isInteractive",null),v([S()],Sr.prototype,"_attributionTextOverflowed",void 0),v([S()],Sr.prototype,"_prevSourceNodeHeight",void 0),v([S({readOnly:!0,dependsOn:["viewModel.items.length","itemDelimiter"]})],Sr.prototype,"attributionText",null),v([S()],Sr.prototype,"icon",null),v([S()],Sr.prototype,"itemDelimiter",void 0),v([S()],Sr.prototype,"label",null),v([S(),jn("esri/widgets/Attribution/t9n/Attribution")],Sr.prototype,"messages",void 0),v([S()],Sr.prototype,"view",null),v([S({type:qj})],Sr.prototype,"viewModel",void 0),v([Hj()],Sr.prototype,"_toggleState",null),Sr=v([H("esri.widgets.Attribution")],Sr);const Qce=Sr;function epe(){const e=ne("mapview-essential-goto-duration");return e==null?e:e}function tpe(e){var t,i;return((t=e==null?void 0:e.spatialReference)==null?void 0:t.isWebMercator)||((i=e==null?void 0:e.spatialReference)==null?void 0:i.isGeographic)||!1}const ux=e=>{let t=class extends e{constructor(...i){super(...i),this.goToOverride=null,this.view=null}callGoTo(i){const{view:r}=this;return KA(r),this.goToOverride?this.goToOverride(r,i):r.goTo(i.target,i.options)}};return v([S()],t.prototype,"goToOverride",void 0),v([S()],t.prototype,"view",void 0),t=v([H("esri.widgets.support.GoTo")],t),t};let Yu=class extends ux(Ae){constructor(t){super(t),this.orientation={x:0,y:0,z:0},this.view=null,this._updateForCamera=this._updateForCamera.bind(this),this._updateForRotation=this._updateForRotation.bind(this),this._updateRotationWatcher=this._updateRotationWatcher.bind(this)}initialize(){this._watchForView(Pi)}destroy(){this.view=null}get canShowNorth(){return tpe(this.view)}get state(){var t;return!((t=this.view)!=null&&t.ready)||this.view.type==="2d"&&!this.view.constraints.rotationEnabled?"disabled":this.canShowNorth?"compass":"rotation"}reset(){var t,i;(t=this.view)!=null&&t.ready&&(((i=this.view)==null?void 0:i.type)==="2d"?this.callGoTo({target:{rotation:0},options:{animationMode:"always",duration:epe()}}):this.callGoTo({target:{heading:0}}))}_updateForRotation(t){t!=null&&this._set("orientation",{z:t})}_updateForCamera(t){if(!t)return;const i=-t.heading;this._set("orientation",{x:0,y:0,z:i})}_updateRotationWatcher(t){this.removeAllHandles(),this._watchForView(),t&&this.addHandles(t.type==="2d"?Le(()=>t==null?void 0:t.rotation,this._updateForRotation,Pi):Le(()=>t==null?void 0:t.camera,this._updateForCamera,Pi))}_watchForView(t){this.addHandles(Le(()=>this.view,this._updateRotationWatcher,t))}};v([S({readOnly:!0})],Yu.prototype,"canShowNorth",null),v([S({readOnly:!0})],Yu.prototype,"orientation",void 0),v([S({readOnly:!0})],Yu.prototype,"state",null),v([S()],Yu.prototype,"view",void 0),Yu=v([H("esri.widgets.Compass.CompassViewModel")],Yu);const Jj=Yu,P$="esri-compass",k$={base:P$,iconContainer:`${P$}__icon-container`};let Ko=class extends pu{constructor(t,i){super(t,i),this.messages=null,this.viewModel=new Jj,this._reset=()=>{this.viewModel.reset()},this._toRotationTransform=r=>({transform:`rotateZ(${r.z}deg)`})}loadDependencies(){return Yh({button:()=>fe(()=>import("./index-6QQzcgB0.js"),__vite__mapDeps([259,260,261,262,263,264,265,266,267,268,269,270,271])),icon:()=>fe(()=>import("./index-DQzuOjKz.js").then(t=>t.i),__vite__mapDeps([263,264,261,265]))})}get goToOverride(){return this.viewModel.goToOverride}set goToOverride(t){this.viewModel.goToOverride=t}get icon(){return this.viewModel.state==="rotation"?"arrow-up":"compass-needle"}set icon(t){this._overrideIfSome("icon",t)}get label(){var t;return((t=this.messages)==null?void 0:t.widgetLabel)??""}set label(t){this._overrideIfSome("label",t)}get view(){return this.viewModel.view}set view(t){this.viewModel.view=t}reset(){return this.viewModel.reset()}render(){const{orientation:t,state:i}=this.viewModel,{messages:r}=this;return Ge("div",{class:this.classes(k$.base,ii.widget)},Ge("calcite-button",{class:ii.widgetButton,disabled:i==="disabled",kind:"neutral",label:r.reset,onclick:this._reset,round:!0,scale:"s",title:r.reset},Ge("div",{"aria-hidden":"true",class:k$.iconContainer,title:r.reset},Ge("calcite-icon",{icon:this.icon,styles:this._toRotationTransform(t)}))))}};v([S()],Ko.prototype,"goToOverride",null),v([S()],Ko.prototype,"icon",null),v([S()],Ko.prototype,"label",null),v([S(),jn("esri/widgets/Compass/t9n/Compass")],Ko.prototype,"messages",void 0),v([S()],Ko.prototype,"view",null),v([S({type:Jj})],Ko.prototype,"viewModel",void 0),Ko=v([H("esri.widgets.Compass")],Ko);const Zj=Ko,R$="esri-navigation-toggle",N$={base:R$,isLayoutHorizontal:`${R$}--horizontal`};let Uc=class extends Ae{constructor(t){super(t),this._navigationMode="pan",this.view=null}initialize(){this.addHandles(gr(()=>{var t,i;return(i=(t=this.view)==null?void 0:t.navigation)==null?void 0:i.actionMap},()=>this._updateNavigationActionMap()))}destroy(){this.view=null}get state(){var t,i;return(t=this.view)!=null&&t.ready&&((i=this.view)==null?void 0:i.type)==="3d"?"ready":"disabled"}get navigationMode(){return this._navigationMode}set navigationMode(t){this._navigationMode=t,this._updateNavigationActionMap()}toggle(){this.state!=="disabled"&&(this.navigationMode=this.navigationMode!=="pan"?"pan":"rotate")}_updateNavigationActionMap(){var r,a;const t=(a=(r=this.view)==null?void 0:r.navigation)==null?void 0:a.actionMap;if(!t)return;const i=this._navigationMode==="pan";t.dragPrimary=i?"pan":"rotate",t.dragSecondary=i?"rotate":"pan"}};v([S({readOnly:!0})],Uc.prototype,"state",null),v([S()],Uc.prototype,"_navigationMode",void 0),v([S()],Uc.prototype,"view",void 0),Uc=v([H("esri.widgets.NavigationToggle.NavigationToggleViewModel")],Uc);const Kj=Uc;let Yo=class extends pu{constructor(t,i){super(t,i),this.messages=null,this.viewModel=new Kj,this.toggle=()=>this.viewModel.toggle(),this._panButton=null,this._rotateButton=null,this._toggle=()=>{var a;const r=((a=this.viewModel)==null?void 0:a.navigationMode)==="pan"?this._rotateButton:this._panButton;jQ(r),this.toggle()}}loadDependencies(){return Yh({button:()=>fe(()=>import("./index-6QQzcgB0.js"),__vite__mapDeps([259,260,261,262,263,264,265,266,267,268,269,270,271]))})}get icon(){return"move"}set icon(t){this._overrideIfSome("icon",t)}get label(){var t;return((t=this.messages)==null?void 0:t.widgetLabel)??""}set label(t){this._overrideIfSome("label",t)}set layout(t){t!=="horizontal"&&(t="vertical"),this._set("layout",t)}get view(){return this.viewModel.view}set view(t){this.viewModel.view=t}render(){var a,p;const t=((a=this.viewModel)==null?void 0:a.state)==="disabled",i=((p=this.viewModel)==null?void 0:p.navigationMode)==="pan",r=this.messages.toggle;return Ge("div",{class:this.classes(N$.base,ii.widget,{[N$.isLayoutHorizontal]:this.layout==="horizontal"})},Ge("calcite-button",{afterCreate:y=>{this._panButton=y},appearance:i?"outline-fill":"solid",class:ii.widgetButton,disabled:t,iconStart:"move",kind:"neutral",label:r,onclick:this._toggle,tabIndex:i?void 0:-1,title:r}),Ge("calcite-button",{afterCreate:y=>{this._rotateButton=y},appearance:i?"solid":"outline-fill",class:ii.widgetButton,disabled:t,iconStart:"rotate",kind:"neutral",label:r,onclick:this._toggle,tabIndex:i?-1:void 0,title:r}))}};v([S()],Yo.prototype,"icon",null),v([S()],Yo.prototype,"label",null),v([S({value:"vertical"})],Yo.prototype,"layout",null),v([S(),jn("esri/widgets/NavigationToggle/t9n/NavigationToggle")],Yo.prototype,"messages",void 0),v([S()],Yo.prototype,"view",null),v([S({type:Kj})],Yo.prototype,"viewModel",void 0),Yo=v([H("esri.widgets.NavigationToggle")],Yo);const ipe=Yo;let Xu=class extends Ae{get canZoomIn(){var r,a,p;if(!((r=this.view)==null?void 0:r.ready))return!1;const i=(p=(a=this.view)==null?void 0:a.constraints)==null?void 0:p.effectiveMaxScale;return i===0||this._scale>i}get canZoomOut(){var a;const{view:t}=this;if(!(t==null?void 0:t.ready))return!1;const r=(a=t.constraints)==null?void 0:a.effectiveMinScale;return r===0||this._scale<r}get _scale(){var i,r,a;const t=(r=(i=this.view)==null?void 0:i.animation)==null?void 0:r.target;return(t&&"then"in t||t==null?void 0:t.scale)??((a=this.view)==null?void 0:a.scale)??0}};v([S({readOnly:!0})],Xu.prototype,"canZoomIn",null),v([S({readOnly:!0})],Xu.prototype,"canZoomOut",null),v([S()],Xu.prototype,"view",void 0),v([S()],Xu.prototype,"_scale",null),Xu=v([H("esri.widgets.Zoom.ZoomConditions2D")],Xu);const rpe=Xu;let Vc=class extends Ae{get canZoomIn(){return!!this.view.ready}get canZoomOut(){return!!this.view.ready}};v([S({readOnly:!0})],Vc.prototype,"canZoomIn",null),v([S({readOnly:!0})],Vc.prototype,"canZoomOut",null),v([S()],Vc.prototype,"view",void 0),Vc=v([H("esri.widgets.Zoom.ZoomConditions3D")],Vc);const spe=Vc;let pl=class extends Ae{constructor(t){super(t)}destroy(){this.view=null}get canZoomIn(){return this._zoomConditions!=null&&this._zoomConditions.canZoomIn}get canZoomOut(){var t;return this._zoomConditions!=null&&((t=this._zoomConditions)==null?void 0:t.canZoomOut)}get state(){var t;return(t=this.view)!=null&&t.ready?"ready":"disabled"}set view(t){t?t.type==="2d"?this._zoomConditions=new rpe({view:t}):t.type==="3d"&&(this._zoomConditions=new spe({view:t})):this._zoomConditions=null,this._set("view",t)}zoomIn(){const t=this.view;this.canZoomIn&&t&&(t.type==="2d"?t.mapViewNavigation.zoomIn():F0(t.goTo({zoomFactor:2})))}zoomOut(){const t=this.view;this.canZoomOut&&t&&(t.type==="2d"?t.mapViewNavigation.zoomOut():F0(t.goTo({zoomFactor:.5})))}};v([S()],pl.prototype,"_zoomConditions",void 0),v([S()],pl.prototype,"canZoomIn",null),v([S()],pl.prototype,"canZoomOut",null),v([S({readOnly:!0})],pl.prototype,"state",null),v([S()],pl.prototype,"view",null),pl=v([H("esri.widgets.Zoom.ZoomViewModel")],pl);const Yj=pl,L$={base:"esri-zoom",horizontalLayout:"esri-zoom--horizontal"};let Xo=class extends pu{constructor(t,i){super(t,i),this.messages=null,this.viewModel=new Yj,this.zoomIn=()=>this.viewModel.zoomIn(),this.zoomOut=()=>this.viewModel.zoomOut()}loadDependencies(){return Yh({button:()=>fe(()=>import("./index-6QQzcgB0.js"),__vite__mapDeps([259,260,261,262,263,264,265,266,267,268,269,270,271]))})}get icon(){return"magnifying-glass-plus"}set icon(t){this._overrideIfSome("icon",t)}get label(){var t;return((t=this.messages)==null?void 0:t.widgetLabel)??""}set label(t){this._overrideIfSome("label",t)}set layout(t){t!=="horizontal"&&(t="vertical"),this._set("layout",t)}set view(t){this.viewModel.view=t}get view(){return this.viewModel.view}render(){const t={[L$.horizontalLayout]:this.layout==="horizontal"},{canZoomIn:i,canZoomOut:r}=this.viewModel,{zoomIn:a,zoomOut:p}=this.messages;return Ge("div",{class:this.classes(L$.base,ii.widget,t)},Ge("calcite-button",{class:ii.widgetButton,disabled:!i,iconStart:"plus",kind:"neutral",label:a,onclick:this.zoomIn,title:a}),Ge("calcite-button",{class:ii.widgetButton,disabled:!r,iconStart:"minus",kind:"neutral",label:p,onclick:this.zoomOut,title:p}))}};v([S()],Xo.prototype,"icon",null),v([S()],Xo.prototype,"label",null),v([S({value:"vertical"})],Xo.prototype,"layout",null),v([S(),jn("esri/widgets/Zoom/t9n/Zoom")],Xo.prototype,"messages",void 0),v([S()],Xo.prototype,"view",null),v([S({type:Yj})],Xo.prototype,"viewModel",void 0),Xo=v([H("esri.widgets.Zoom")],Xo);const npe=Xo;function ope(e){return(e==null?void 0:e.view)!==void 0}let rg=class extends Yue{constructor(t){super(t),this._defaultPositionLookup={attribution:"manual",compass:"top-left","navigation-toggle":"top-left",zoom:"top-left"},this.components=[],this._updateViewAwareWidgets=i=>{this.components.forEach(r=>{const a=this._find(r),p=a==null?void 0:a.widget;ope(p)&&(p.view=i)})},this._componentsWatcher=(i,r)=>{this._removeComponents(r),this._addComponents(i),this._adjustPadding(i)}}initialize(){this.addHandles([Le(()=>this.components,this._componentsWatcher,Pi),Le(()=>this.view,this._updateViewAwareWidgets,Pi)])}_add(t,i,r,a,p){let y=t;if(typeof t=="string"&&this._defaultPositionLookup[t]){if(this._find(t))return;y=this._createComponent(t)}super._add(y,i,r,a,p)}_removeComponents(t){t.forEach(i=>{const r=this._find(i);r&&(this.remove(r),r.destroy())})}_adjustPadding(t){if(!t.includes("attribution")&&!this._isOverridden("padding")){const{top:i}=this.padding;this.padding=i}}_addComponents(t){this.constructed&&t.forEach(i=>this.add(this._createComponent(i),this._defaultPositionLookup[i]))}_createComponent(t){const i=this._createWidget(t);return new eg({id:t,node:i})}_createWidget(t){const i=this.view;switch(t){case"attribution":return new Qce({view:i});case"compass":return new Zj({view:i});case"navigation-toggle":return new ipe({view:i});case"zoom":return new npe({view:i})}}};v([S()],rg.prototype,"components",void 0),rg=v([H("esri.views.ui.DefaultUI")],rg);const Xj=rg;let sg=class extends Xj{constructor(t){super(t),this.components=["attribution","zoom"]}};v([S()],sg.prototype,"components",void 0),sg=v([H("esri.views.ui.2d.DefaultUI2D")],sg);const Qj=sg;let eF=class __{constructor(t,i,r=""){this.major=t,this.minor=i,this._context=r}lessThan(t,i){return this.major<t||t===this.major&&this.minor<i}greaterEqual(t,i){return!this.lessThan(t,i)}validate(t){if(this.major!==t.major){const i=this._context&&this._context+":",r=this._context&&this._context+" ";throw new Y(i+"unsupported-version",`Required major ${r}version is '${this.major}', but got '\${version.major}.\${version.minor}'`,{version:t})}}clone(){return new __(this.major,this.minor,this._context)}static parse(t,i=""){const[r,a]=t.split("."),p=/^\s*\d+\s*$/;if(!(r!=null&&r.match)||!p.test(r))throw new Y((i&&i+":")+"invalid-version","Expected major version to be a number, but got '${version}'",{version:t});if(!(a!=null&&a.match)||!p.test(a))throw new Y((i&&i+":")+"invalid-version","Expected minor version to be a number, but got '${version}'",{version:t});const y=parseInt(r,10),g=parseInt(a,10);return new __(y,g,i)}},ape=class extends eF{constructor(t,i){super(t,i,"webmap")}};function Nb(e){return e!=null&&typeof e=="object"&&"declaredClass"in e&&e.declaredClass==="esri.WebMap"}new ape(2,33);var S_;let ng=S_=class extends he{constructor(e){super(e),this.color=new De([0,0,0,1])}clone(){return new S_(te({color:this.color}))}};v([S({type:De,json:{write:!0}})],ng.prototype,"color",void 0),ng=S_=v([H("esri.webmap.background.ColorBackground")],ng);const lpe=ng;let tF,iF,rF,sF,nF,oF,aF;async function upe(){const[,{GraphicsView2D:e,GraphicContainer:t,LabelManager:i,MapViewNavigation:r,MagnifierView2D:a,GridView2D:p,Stage:y}]=await Promise.all([fe(()=>import("./webglDeps-CO71pC9T.js"),__vite__mapDeps([181,153,7,182,183,184])),fe(()=>import("./mapViewDeps-f-cG9gqN.js"),__vite__mapDeps([185,118,84,85,27,7,86,87,88,89,83,56,186,92,187,182,153,183,157,133,188,110,189,140,139,96,31,32,90,98,190,93,94,95,191,18,138,181,184,192,105,193,82,29,24,36,35,194,146,147,131,155,195,72,196,97,197,198,91,199,61,102,80,200,201,202,203,149,204,205]))]);iF=e,rF=t,sF=i,nF=r,oF=a,aF=p,tF=y}let ot=class extends Tae(jX(dee(QQ(kre)))){constructor(t){super(t),this._magnifierView=null,this._gridView=null,this.stage=null,this._resolveWhenReady=[],this.rootLayerViews=new Z0({getCollections:()=>{var i,r;return[(i=this.basemapView)==null?void 0:i.baseLayerViews,this.layerViews,(r=this.basemapView)==null?void 0:r.referenceLayerViews]},getChildrenFunction:()=>null}),this.featuresTilingScheme=null,this.graphicsView=null,this.labelManager=null,this.navigation=new R2({actionMap:new RS({dragTertiary:"none"})}),this.renderingOptions={samplingMode:"dynamic",edgeLabelsVisible:!0,labelsAnimationTime:125,labelCollisionsEnabled:!0},this.supersampleScreenshotsEnabled=!0,this.supportsGround=!1,this.floors=new xe,this.grid=null,this.map=null,this.spatialReferenceLocked=!1,this.timeline=new uj,this.type="2d",this.view2dType=null,this.ui=new Qj,this.test={takeScreenshot:async i=>Oue(this._getScreenshotView(i),i)},this.padding={top:0,right:0,bottom:0,left:0},eX()}destroy(){this.layerViewManager.clear(),this._set("preconditionsReady",!1),this.frameTask=Ht(this.frameTask),this.goToManager.destroy(),this.rootLayerViews.destroy(),this.inputManager.destroy(),this._set("inputManager",null)}get graphicsTileStore(){return new jle(this.featuresTilingScheme)}get constraintsInfo(){var r,a;const t=(r=this.defaultsFromMap)==null?void 0:r.tileInfo,i=this.spatialReference;return{lods:(a=t==null?void 0:t.spatialReference)!=null&&a.equals(i)?t.lods:null,spatialReference:i}}get initialExtentRequired(){var g;if(!this.stateManager)return!1;const{scale:t,constraints:i,center:r,viewpoint:a,extent:p}=this;let y=this.zoom;return!(this.map&&"initialViewProperties"in this.map&&((g=this.map.initialViewProperties)!=null&&g.viewpoint))&&!p&&(i!=null&&i.effectiveLODs||(y=-1),(!r||t===0&&y===-1)&&((a==null?void 0:a.targetGeometry)==null||a.targetGeometry.type!=="extent"&&!a.scale))}get defaultsFromMapSettings(){return{required:{extent:!1,heightModelInfo:!1,tileInfo:!0},requiresExtentInSpatialReference:this.spatialReferenceLocked}}get scheduler(){return this.frameTask.scheduler}get typeSpecificPreconditionsReady(){const t=this._getDefaultViewpoint();if(!t)return!1;const i=t.targetGeometry,r=this.spatialReference;return SR(i.spatialReference,r)}get background(){return Nb(this.map)?this.map.initialViewProperties.background:null}set background(t){this._override("background",t)}get center(){var t;return((t=this.stateManager)==null?void 0:t.center)??null}set center(t){this.stateManager.center=t}get highlightOptions(){return yue(this)}set highlightOptions(t){mue(this,t)}get padding(){var t;return(t=this.stateManager)==null?void 0:t.padding}set padding(t){this.stateManager&&(this.stateManager.padding=t)}get rendering(){var t;return((t=this.stage)==null?void 0:t.renderRequested)??!1}get resolution(){return this.stateManager.resolution??0}get scale(){var t;return((t=this.stateManager)==null?void 0:t.scale)??0}set scale(t){this.stateManager&&(this.stateManager.scale=t)}get tileInfo(){var t;return(t=this.featuresTilingScheme)==null?void 0:t.tileInfo}get updating(){var r,a,p,y;const t=!(!this.magnifier.visible||this.magnifier.position===null||!((r=this._magnifierView)!=null&&r.updatingHandles.updating)),i=!this.destroyed&&(!this.layerViewManager||!this.labelManager||!this.graphicsView||this.layerViewManager.updating===!0||this.labelManager.updating===!0||this.graphicsView.updating===!0||this.allLayerViews.some(g=>!g.destroyed&&!("layerViews"in g)&&g.updating===!0)||t);if(ne("esri-2d-log-updating")){const g=this.allLayerViews.reduce((_,T)=>({..._,[`${T.layer.id}(${T.layer.type})`]:!T.destroyed&&!("layerViews"in T)&&T.updating}),{});console.log(`Updating MapView: ${i}
-> Null LayerViewManager: ${!this.layerViewManager}
-> Null LabelManager: ${!this.labelManager}
-> Null GraphicsView: ${!this.graphicsView}
-> layerViewManager.updating: ${(a=this.layerViewManager)==null?void 0:a.updating}
-> labelManager.updating: ${(p=this.labelManager)==null?void 0:p.updating}
-> graphicsView.updating: ${(y=this.graphicsView)==null?void 0:y.updating}
-> allLayerViews: ${JSON.stringify(g)}
-> updatingMagnifier: ${t}
`)}return i}get visibleArea(){const t=this.stateManager.visibleArea;return t&&new en({rings:[t.map(i=>[i[0],i[1]])],spatialReference:this.spatialReference})}get zoom(){return this.stateManager.zoom??-1}set zoom(t){this.stateManager.zoom=t}get navigating(){var t;return((t=this.mapViewNavigation)==null?void 0:t.interacting)??!1}async hitTest(t,i){return gue(this,t,i)}async takeScreenshot(t){return Cue(this._getScreenshotView(t),t)}toMap(t){if(!this.ready)return null;const i=gL(t)?mL(this,t):t;return this.stateManager.toMap(i)}toScreen(t,i){return this.stateManager.toScreen(t,i)}whenLayerView(t){return super.whenLayerView(t)}graphicChanged(t){this.graphicsView&&this.graphicsView.graphicUpdateHandler(t)}whenReady(){return new Promise(t=>{this.ready?t(this):this._resolveWhenReady.push(t)})}forceDOMReadyCycle(){this.forceReadyCycle()}getDefaultSpatialReference(){var t;return this.map&&"initialViewProperties"in this.map&&this.map.initialViewProperties.spatialReference||((t=this.defaultsFromMap)==null?void 0:t.spatialReference)||null}getDefaultTimeZone(){return Nb(this.map)?this.map.initialViewProperties.timeZone:null}getDefaultTimeExtent(){return Nb(this.map)?this.map.initialViewProperties.timeExtent:null}hasLayerViewModule(t){return MM.hasLayerViewModule(t)}importLayerView(t){return MM.importLayerView(t)}pixelSizeAt(){return this.ready?this.resolution:(ye.getLogger(this).error("#pixelSizeAt()","Map view cannot be used before it is ready"),null)}async popupHitTest(t){var T;const i=this.toMap(t),r=await this.hitTest(t),a=this.allLayerViews.toArray().filter(I=>I.clips.every(A=>XD(this,A,t,i))).reverse(),p=new globalThis.Map(a.map(I=>[I.layer.uid,I])),y=[];let g=0,_=0;for(;g<r.results.length||_<a.length;){const I=r.results.at(g);if(I&&I.type!=="graphic"){++g;continue}const A=p.get((T=(I==null?void 0:I.layer)??(I==null?void 0:I.graphic.layer))==null?void 0:T.uid);if((!I||A)&&_<a.length&&a.at(_)!==A){const P=a.at(_);"fetchPopupFeaturesAtLocation"in P&&y.push({mapPoint:i,layerView:P}),++_}else I&&(y.push({graphic:I.graphic,layerView:A}),++g)}return{hits:y,location:i}}requestUpdate(){this.ready&&this.frameTask.requestUpdate()}async validate(){let t=Uue(this.type);if(ne("safari")&&ne("safari")<9&&(t=new Y("mapview:browser-not-supported","This browser is not supported by MapView (Safari < 9)",{type:"safari",requiredVersion:9,detectedVersion:ne("safari")})),t!=null)throw ye.getLogger(this).warn("#validate()",t.message),t}loadAsyncDependencies(){return upe()}_getDefaultViewpoint(){var q;const{constraints:t,initialExtent:i,map:r,padding:a,size:p}=this;if(!t)return null;const y=r&&"initialViewProperties"in r?r.initialViewProperties:void 0,g=this.stateManager.getUserStartupOptions(this.size),_=y==null?void 0:y.viewpoint,T=((q=_==null?void 0:_.targetGeometry)==null?void 0:q.extent)??i,I=T==null?void 0:T.center,A=(_==null?void 0:_.rotation)??0,P=(_==null?void 0:_.scale)||T&&D2(T,[p[0]-a.left-a.right,p[1]-a.top-a.bottom]),N=g.center??I,D=g.rotation??A,z=g.scale??P;return N&&z?new Kr({targetGeometry:N,scale:z,rotation:D}):null}_startup(){var g;this.timeline.begin("MapView Startup");const t=this._getDefaultViewpoint();this.stateManager.startup(t,this.size,this.spatialReference,(g=this.defaultsFromMap.extent)==null?void 0:g.center),this.graphics.owner=this;const i=new tF(this.surface,{canvas:this.renderCanvas,contextOptions:{disabledExtensions:this.deactivatedWebGLExtensions,debugWebGLExtensions:this.debugWebGLExtensions},renderingOptions:this.renderingOptions,timeline:this.timeline});this.stage=i,this._magnifierView=new oF,this._magnifierView.magnifier=this.magnifier,this._gridView=new aF;const r=new sF({view:this});this._set("labelManager",r);const a=new ble({view:this});this._set("animationManager",a);const p=new nF({view:this,animationManager:a});this._set("mapViewNavigation",p),this._setupSpatialReferenceDependentProperties(),this.addHandles([this.rootLayerViews.on("change",()=>this._updateStageChildren()),i.on("webgl-error",_=>this.fatalError=_.error),Le(()=>this.stationary,_=>i.stationary=_,qr),Le(()=>this.background,_=>{i.backgroundColor=_==null?void 0:_.color,this._magnifierView.backgroundColor=_==null?void 0:_.color},qr),Le(()=>this.magnifier,_=>this._magnifierView.magnifier=_,qr),Le(()=>this.grid,_=>this._gridView.grid=_,qr),Le(()=>this.renderingOptions,_=>i.renderingOptions=_,qr),Le(()=>this.highlights.items.map(_=>({name:_.name,options:{fillColor:_.color,haloColor:_.haloColor,fillOpacity:_.fillOpacity,haloOpacity:_.haloOpacity,haloWidth:_.haloWidth,haloBlur:_.haloBlur}})),()=>{i.highlightGradient=due(i.highlightGradient,this.highlights.items)},qr),Le(()=>this.state.id,()=>i.state=this.state,qr)],"map-view"),this._updateStageChildren();const y=this._resolveWhenReady;this._resolveWhenReady=[],y.forEach(_=>_(this)),this.timeline.end("MapView Startup"),this.frameTask.start(),this._set("ready",!0)}_teardown(){this._destroySpatialReferenceDependentProperties(),this.removeHandles("map-view"),this.mapViewNavigation.destroy(),this._set("mapViewNavigation",null),this.animation=null,this.animationManager.destroy(),this._set("animationManager",null),this.layerViewManager.clear(),this.labelManager.destroy(),this._magnifierView.destroy(),this._gridView.destroy(),this.stage.destroy(),this.stage=null,this._set("graphicsView",null),this._magnifierView=null,this._gridView=null,this._set("labelManager",null),this._set("mapViewNavigation",null),this.graphics.owner=null,this.frameTask.stop(),this.stationaryManager.clear(),this._set("ready",!1),this.stateManager.teardown()}_updateStageChildren(){this.stage.removeAllChildren(),this.rootLayerViews.forEach(i=>{this.stage.addChild(i.container)});const t=this.graphicsView;this.stage.addChild(t.container),this.stage.addChild(this._magnifierView),this.stage.addChild(this._gridView)}_setupSpatialReferenceDependentProperties(){const t=new $le(S0.create({spatialReference:this.spatialReference,size:512,numLODs:36}));this._set("featuresTilingScheme",t);const i=new iF({view:this,graphics:this.graphics,requestUpdateCallback:()=>this.requestUpdate(),container:new rF(t)});this._set("graphicsView",i)}_destroySpatialReferenceDependentProperties(){const t=this.graphicsView;this._set("graphicsView",null),t.destroy(),this._set("featuresTilingScheme",null)}_getScreenshotView(t){var y;const{allLayerViews:i,padding:r,size:a,stage:p}=this;return{allLayerViews:i,backgroundColor:t!=null&&t.ignoreBackground?null:(y=this.background)==null?void 0:y.color,padding:r,size:a,stage:p}}_spatialReferenceChanged(t){if(this.ready){this.frameTask.stop();for(const i of this.allLayerViews)i.processDetach();this._destroySpatialReferenceDependentProperties(),this.stateManager.changeSpatialReference(t),this.stage.state=this.state,this._setupSpatialReferenceDependentProperties();for(const i of this.allLayerViews)i.processAttach();this.frameTask.requestFrame(),this.frameTask.start(),this._updateStageChildren()}}};ot.type="2d",v([S({constructOnly:!0})],ot.prototype,"deactivatedWebGLExtensions",void 0),v([S({constructOnly:!0})],ot.prototype,"debugWebGLExtensions",void 0),v([S({readOnly:!0})],ot.prototype,"featuresTilingScheme",void 0),v([S({readOnly:!0})],ot.prototype,"graphicsTileStore",null),v([S()],ot.prototype,"graphicsView",void 0),v([S()],ot.prototype,"constraintsInfo",null),v([S()],ot.prototype,"initialExtentRequired",null),v([S()],ot.prototype,"labelManager",void 0),v([S({type:R2,nonNullable:!0})],ot.prototype,"navigation",void 0),v([S({constructOnly:!0})],ot.prototype,"renderCanvas",void 0),v([S()],ot.prototype,"renderingOptions",void 0),v([S({constructOnly:!0})],ot.prototype,"supersampleScreenshotsEnabled",void 0),v([S({readOnly:!0})],ot.prototype,"supportsGround",void 0),v([S()],ot.prototype,"defaultsFromMapSettings",null),v([S({readOnly:!0})],ot.prototype,"typeSpecificPreconditionsReady",null),v([S({type:lpe})],ot.prototype,"background",null),v([S()],ot.prototype,"center",null),v([S({type:xe})],ot.prototype,"floors",void 0),v([S()],ot.prototype,"grid",void 0),v([S({type:Bl})],ot.prototype,"highlightOptions",null),v([S()],ot.prototype,"map",void 0),v([S()],ot.prototype,"padding",null),v([S({readOnly:!0})],ot.prototype,"rendering",null),v([S({readOnly:!0})],ot.prototype,"resolution",null),v([S()],ot.prototype,"scale",null),v([S({constructOnly:!0})],ot.prototype,"spatialReferenceLocked",void 0),v([S({readOnly:!0})],ot.prototype,"tileInfo",null),v([S({type:uj,readOnly:!0})],ot.prototype,"timeline",void 0),v([S({readOnly:!0})],ot.prototype,"type",void 0),v([S({readOnly:!0})],ot.prototype,"updating",null),v([S({readOnly:!0})],ot.prototype,"view2dType",void 0),v([S({readOnly:!0})],ot.prototype,"visibleArea",null),v([S()],ot.prototype,"zoom",null),v([S({readOnly:!0})],ot.prototype,"navigating",null),v([S(),ct(e=>e instanceof Xj?e:nd(Qj,e))],ot.prototype,"ui",void 0),ot=v([H("esri.views.View2D")],ot);const hpe=ot;let og=class extends hpe{constructor(t){super(t),this.view2dType="map"}};v([S({readOnly:!0})],og.prototype,"view2dType",void 0),og=v([H("esri.views.MapView")],og);const cpe=og;let ppe=class lF{constructor(){this._propertyOriginMap=new Map,this._originStores=new Array(h3),this._values=new Map,this.multipleOriginsSupported=!0}clone(t){const i=new lF,r=this._originStores[tt.DEFAULTS];r&&r.forEach((a,p)=>{i.set(p,te(a),tt.DEFAULTS)});for(let a=tt.SERVICE;a<h3;a++){const p=this._originStores[a];p&&p.forEach((y,g)=>{t&&t.has(g)||i.set(g,te(y),a)})}return i}get(t,i){const r=i===void 0?this._values:this._originStores[i];return r?r.get(t):void 0}keys(t){const i=t==null?this._values:this._originStores[t];return i?[...i.keys()]:[]}set(t,i,r=tt.USER){let a=this._originStores[r];if(a||(a=new Map,this._originStores[r]=a),a.set(t,i),!this._values.has(t)||this._propertyOriginMap.get(t)<=r){const p=this._values.get(t);return this._values.set(t,i),this._propertyOriginMap.set(t,r),p!==i}return!1}delete(t,i=tt.USER){const r=this._originStores[i];if(!r)return;const a=r.get(t);if(r.delete(t),this._values.has(t)&&this._propertyOriginMap.get(t)===i){this._values.delete(t);for(let p=i-1;p>=0;p--){const y=this._originStores[p];if(y&&y.has(t)){this._values.set(t,y.get(t)),this._propertyOriginMap.set(t,p);break}}}return a}has(t,i){const r=i===void 0?this._values:this._originStores[i];return!!r&&r.has(t)}revert(t,i){for(;i>0&&!this.has(t,i);)--i;const r=this._originStores[i],a=r==null?void 0:r.get(t),p=this._values.get(t);return this._values.set(t,a),this._propertyOriginMap.set(t,i),p!==a}originOf(t){return this._propertyOriginMap.get(t)||tt.DEFAULTS}forEach(t){this._values.forEach(t)}};const uF=e=>{let t=class extends e{constructor(...i){super(...i);const r=Xr(this),a=r.store,p=new ppe;r.store=p,UC(r,a,p)}read(i,r){GC(this,i,r)}getAtOrigin(i,r){const a=Lb(this),p=Pl(r);if(typeof i=="string")return a.get(i,p);const y={};return i.forEach(g=>{y[g]=a.get(g,p)}),y}originOf(i){return Ig(this.originIdOf(i))}originIdOf(i){return Lb(this).originOf(i)}revert(i,r){const a=Lb(this),p=Pl(r),y=Xr(this);let g;g=typeof i=="string"?i==="*"?a.keys(p):[i]:i,g.forEach(_=>{y.invalidate(_),a.revert(_,p),y.commit(_)})}};return t=v([H("esri.core.ReadOnlyMultiOriginJSONSupport")],t),t};function Lb(e){return Xr(e).store}let D$=class extends uF(Ae){};D$=v([H("esri.core.ReadOnlyMultiOriginJSONSupport")],D$);const dpe=e=>{let t=class extends e{constructor(...i){super(...i)}clear(i,r="user"){return Db(this).delete(i,Pl(r))}write(i,r){return qC(this,i=i||{},r),i}setAtOrigin(i,r,a){Xr(this).setAtOrigin(i,r,Pl(a))}removeOrigin(i){const r=Db(this),a=Pl(i),p=r.keys(a);for(const y of p)r.originOf(y)===a&&r.set(y,r.get(y,a),tt.USER)}updateOrigin(i,r){const a=Db(this),p=Pl(r),y=mo(this,i);for(let g=p+1;g<h3;++g)a.delete(i,g);a.set(i,y,p)}toJSON(i){return this.write({},i)}};return t=v([H("esri.core.MultiOriginJSONSupport.WriteableMultiOriginJSONSupport")],t),t.prototype.toJSON.isDefaultToJSON=!0,t};function Db(e){return Xr(e).store}const hF=e=>{let t=class extends dpe(uF(e)){constructor(...i){super(...i)}};return t=v([H("esri.core.MultiOriginJSONSupport")],t),t};let j$=class extends hF(Ae){};j$=v([H("esri.core.MultiOriginJSONSupport")],j$);const Jt=(e=>e)(["operational-layers","basemap","ground"]);var x_;let Qu=x_=class extends he{constructor(e){super(e),this.expression=null,this.name=null,this.returnType="boolean",this.title=null}clone(){return new x_({name:this.name,title:this.title,expression:this.expression,returnType:this.returnType})}};v([S({type:String,json:{write:!0}})],Qu.prototype,"expression",void 0),v([S({type:String,json:{write:!0}})],Qu.prototype,"name",void 0),v([S({type:["boolean","date","number","string"],json:{write:!0}})],Qu.prototype,"returnType",void 0),v([S({type:String,json:{write:!0}})],Qu.prototype,"title",void 0),Qu=x_=v([H("esri.form.ExpressionInfo")],Qu);const fpe=Qu;let eh=class extends he{constructor(t){super(t),this.description=null,this.label=null,this.type=null,this.visibilityExpression=null}};v([S({type:String,json:{write:!0}})],eh.prototype,"description",void 0),v([S({type:String,json:{write:!0}})],eh.prototype,"label",void 0),v([S()],eh.prototype,"type",void 0),v([S({type:String,json:{write:!0}})],eh.prototype,"visibilityExpression",void 0),eh=v([H("esri.form.elements.Element")],eh);const ru=eh;let ag=class extends at.ClonableMixin(he){constructor(t){super(t),this.type=null}};v([S()],ag.prototype,"type",void 0),ag=v([H("esri.form.elements.inputs.attachments.Input")],ag);const su=ag,B2=["any","capture","upload"];let Gc=class extends su{constructor(t){super(t),this.type="audio",this.inputMethod="any",this.maxDuration=null}};v([S({type:["audio"],readOnly:!0,json:{write:!0}})],Gc.prototype,"type",void 0),v([S({type:B2,json:{write:!0}})],Gc.prototype,"inputMethod",void 0),v([S({type:Number,json:{write:!0}})],Gc.prototype,"maxDuration",void 0),Gc=v([H("esri.form.elements.inputs.attachments.AudioInput")],Gc);const F$=Gc;let qf=class extends su{constructor(t){super(t),this.type="document",this.maxFileSize=null}};v([S({type:["document"],readOnly:!0,json:{write:!0}})],qf.prototype,"type",void 0),v([S({type:Number,json:{write:!0}})],qf.prototype,"maxFileSize",void 0),qf=v([H("esri.form.elements.inputs.attachments.DocumentInput")],qf);const z$=qf;let Bc=class extends su{constructor(t){super(t),this.type="image",this.inputMethod="any",this.maxImageSize=null}};v([S({type:["image"],readOnly:!0,json:{write:!0}})],Bc.prototype,"type",void 0),v([S({type:B2,json:{write:!0}})],Bc.prototype,"inputMethod",void 0),v([S({type:Number,json:{write:!0}})],Bc.prototype,"maxImageSize",void 0),Bc=v([H("esri.form.elements.inputs.attachments.ImageInput")],Bc);const U$=Bc;let Hf=class extends su{constructor(t){super(t),this.type="signature",this.inputMethod="any"}};v([S({type:["signature"],readOnly:!0,json:{write:!0}})],Hf.prototype,"type",void 0),v([S({type:B2,json:{write:!0}})],Hf.prototype,"inputMethod",void 0),Hf=v([H("esri.form.elements.inputs.attachments.SignatureInput")],Hf);const V$=Hf;let qc=class extends su{constructor(t){super(t),this.type="video",this.inputMethod="any",this.maxDuration=null}};v([S({type:["video"],readOnly:!0,json:{write:!0}})],qc.prototype,"type",void 0),v([S({type:B2,json:{write:!0}})],qc.prototype,"inputMethod",void 0),v([S({type:Number,json:{write:!0}})],qc.prototype,"maxDuration",void 0),qc=v([H("esri.form.elements.inputs.attachments.VideoInput")],qc);const G$=qc;function cF(e){return{nestableTypes:{base:su,key:"type",typeMap:{audio:F$,document:z$,image:U$,signature:V$,video:G$}},allTypes:{base:su,key:"type",typeMap:{attachment:e,audio:F$,document:z$,image:U$,signature:V$,video:G$}}}}function ype(e,t,i){return e?e.map(r=>Nn(t.nestableTypes,r)):null}function mpe(e,t,i){if(!e)return null;const r=t.nestableTypes.typeMap;return e.filter(a=>r[a.type]).map(a=>r[a.type].fromJSON(a))}function gpe(e,t,i){if(!e)return null;const r=t.nestableTypes.typeMap;return e.filter(a=>r[a.type]).map(a=>a.toJSON())}let uo=class extends su{constructor(t){super(t),this.type="attachment",this.attachmentAssociationType="exact",this.inputTypes=null}castInputs(t){return ype(t,jb)}readInputs(t,i){return mpe(i.inputTypes,jb)}writeInputs(t,i){i.inputTypes=gpe(t,jb)}};v([S({type:["attachment"],readOnly:!0,json:{write:!0}})],uo.prototype,"type",void 0),v([S({type:["any","exact","exactOrNone"],json:{write:!0}})],uo.prototype,"attachmentAssociationType",void 0),v([S({json:{write:{isRequired:!0}}})],uo.prototype,"inputTypes",void 0),v([ct("inputTypes")],uo.prototype,"castInputs",null),v([me("inputTypes")],uo.prototype,"readInputs",null),v([be("inputTypes")],uo.prototype,"writeInputs",null),uo=v([H("esri.form.elements.inputs.attachments.AttachmentInput")],uo);const jb=cF(uo),vpe=uo;var T_;const wpe=cF(vpe);let us=T_=class extends ru{constructor(e){super(e),this.allowUserRename=!0,this.attachmentKeyword=null,this.displayFilename=!1,this.editableExpression=null,this.filenameExpression="{attachmentKeyword}_{now}",this.input=null,this.maxAttachmentCount=null,this.minAttachmentCount=null,this.type="attachment",this.useOriginalFilename=!0}clone(){var e;return new T_({allowUserRename:this.allowUserRename,attachmentKeyword:this.attachmentKeyword,description:this.description,displayFilename:this.displayFilename,editableExpression:this.editableExpression,filenameExpression:this.filenameExpression,input:(e=this.input)==null?void 0:e.clone(),label:this.label,maxAttachmentCount:this.maxAttachmentCount,minAttachmentCount:this.minAttachmentCount,useOriginalFilename:this.useOriginalFilename,visibilityExpression:this.visibilityExpression})}};v([S({type:Boolean,json:{write:!0}})],us.prototype,"allowUserRename",void 0),v([S({type:String,json:{write:{isRequired:!0}}})],us.prototype,"attachmentKeyword",void 0),v([S({type:Boolean,json:{write:!0}})],us.prototype,"displayFilename",void 0),v([S({type:String,json:{write:!0}})],us.prototype,"editableExpression",void 0),v([S({type:String,json:{write:!0}})],us.prototype,"filenameExpression",void 0),v([S({types:wpe.allTypes,json:{read:{source:"inputType"},write:{target:"inputType",isRequired:!0}}})],us.prototype,"input",void 0),v([S({type:Number,json:{write:!0}})],us.prototype,"maxAttachmentCount",void 0),v([S({type:Number,json:{write:!0}})],us.prototype,"minAttachmentCount",void 0),v([S({type:["attachment"],readOnly:!0,json:{read:!1,write:!0}})],us.prototype,"type",void 0),v([S({type:Boolean,json:{write:!0}})],us.prototype,"useOriginalFilename",void 0),us=T_=v([H("esri.form.elements.AttachmentElement")],us);const B$=us;let lg=class extends he{constructor(t){super(t),this.type=null}};v([S()],lg.prototype,"type",void 0),lg=v([H("esri.form.elements.inputs.Input")],lg);const ka=lg;let Wf=class extends ka{constructor(t){super(t),this.maxLength=null,this.minLength=0}};v([S({type:Number,json:{write:!0}})],Wf.prototype,"maxLength",void 0),v([S({type:Number,json:{write:!0}})],Wf.prototype,"minLength",void 0),Wf=v([H("esri.form.elements.inputs.TextInput")],Wf);const hx=Wf;var M_;let ug=M_=class extends hx{constructor(e){super(e),this.type="barcode-scanner"}clone(){return new M_({maxLength:this.maxLength,minLength:this.minLength})}};v([S({type:["barcode-scanner"],json:{read:!1,write:!0}})],ug.prototype,"type",void 0),ug=M_=v([H("esri.form.elements.inputs.BarcodeScannerInput")],ug);const bpe=ug;var $_;let Hc=$_=class extends ka{constructor(e){super(e),this.noValueOptionLabel=null,this.showNoValueOption=!0,this.type="combo-box"}clone(){return new $_({showNoValueOption:this.showNoValueOption,noValueOptionLabel:this.noValueOptionLabel})}};v([S({type:String,json:{write:!0}})],Hc.prototype,"noValueOptionLabel",void 0),v([S({type:Boolean,json:{write:!0}})],Hc.prototype,"showNoValueOption",void 0),v([S({type:["combo-box"],json:{read:!1,write:!0}})],Hc.prototype,"type",void 0),Hc=$_=v([H("esri.form.elements.inputs.ComboBoxInput")],Hc);const _pe=Hc;var E_;function q$(e){return e??null}function H$(e){return e??null}let io=E_=class extends ka{constructor(e){super(e),this.max=null,this.min=null,this.type="date-picker"}readMax(e,t){return q$(t.max)}writeMax(e,t){t.max=H$(e)}readMin(e,t){return q$(t.min)}writeMin(e,t){t.min=H$(e)}clone(){return new E_({max:this.max,min:this.min})}};v([S({type:String,json:{type:String,write:!0}})],io.prototype,"max",void 0),v([me("max")],io.prototype,"readMax",null),v([be("max")],io.prototype,"writeMax",null),v([S({type:String,json:{type:String,write:!0}})],io.prototype,"min",void 0),v([me("min")],io.prototype,"readMin",null),v([be("min")],io.prototype,"writeMin",null),v([S({type:["date-picker"],json:{read:!1,write:!0}})],io.prototype,"type",void 0),io=E_=v([H("esri.form.elements.inputs.DatePickerInput")],io);const Spe=io;var I_;function Fb(e){return e??null}function zb(e){return e??null}let jr=I_=class extends ka{constructor(e){super(e),this.includeTimeOffset=!0,this.max=null,this.min=null,this.timeResolution="minutes",this.type="datetimeoffset-picker"}readMax(e,t){return Fb(t.max)}writeMax(e,t){t.max=zb(e)}readMin(e,t){return Fb(t.min)}writeMin(e,t){t.min=zb(e)}readTimeResolution(e,t){return Fb(t.timeResolution)}writeTimeResolution(e,t){t.timeResolution=zb(e)}clone(){return new I_({includeTimeOffset:this.includeTimeOffset,max:this.max,min:this.min,timeResolution:this.timeResolution})}};v([S({type:Boolean,json:{write:!0}})],jr.prototype,"includeTimeOffset",void 0),v([S({type:String,json:{type:String,write:!0}})],jr.prototype,"max",void 0),v([me("max")],jr.prototype,"readMax",null),v([be("max")],jr.prototype,"writeMax",null),v([S({type:String,json:{type:String,write:!0}})],jr.prototype,"min",void 0),v([me("min")],jr.prototype,"readMin",null),v([be("min")],jr.prototype,"writeMin",null),v([S({type:String,json:{type:String,write:!0}})],jr.prototype,"timeResolution",void 0),v([me("timeResolution")],jr.prototype,"readTimeResolution",null),v([be("timeResolution")],jr.prototype,"writeTimeResolution",null),v([S({type:["datetimeoffset-picker"],json:{read:!1,write:!0}})],jr.prototype,"type",void 0),jr=I_=v([H("esri.form.elements.inputs.DateTimeOffsetPickerInput")],jr);const xpe=jr;var A_;function W$(e){return e!=null?new Date(e):null}function J$(e){return e?e.getTime():null}let Sn=A_=class extends ka{constructor(e){super(e),this.includeTime=!1,this.max=null,this.min=null,this.type="datetime-picker"}readMax(e,t){return W$(t.max)}writeMax(e,t){t.max=J$(e)}readMin(e,t){return W$(t.min)}writeMin(e,t){t.min=J$(e)}clone(){return new A_({includeTime:this.includeTime,max:this.max,min:this.min})}};v([S({type:Boolean,json:{write:!0}})],Sn.prototype,"includeTime",void 0),v([S({type:Date,json:{type:Number,write:!0}})],Sn.prototype,"max",void 0),v([me("max")],Sn.prototype,"readMax",null),v([be("max")],Sn.prototype,"writeMax",null),v([S({type:Date,json:{type:Number,write:!0}})],Sn.prototype,"min",void 0),v([me("min")],Sn.prototype,"readMin",null),v([be("min")],Sn.prototype,"writeMin",null),v([S({type:["datetime-picker"],json:{read:!1,write:!0}})],Sn.prototype,"type",void 0),Sn=A_=v([H("esri.form.elements.inputs.DateTimePickerInput")],Sn);const Tpe=Sn;var C_;let Wc=C_=class extends ka{constructor(e){super(e),this.noValueOptionLabel=null,this.showNoValueOption=!0,this.type="radio-buttons"}clone(){return new C_({noValueOptionLabel:this.noValueOptionLabel,showNoValueOption:this.showNoValueOption})}};v([S({type:String,json:{write:!0}})],Wc.prototype,"noValueOptionLabel",void 0),v([S({type:Boolean,json:{write:!0}})],Wc.prototype,"showNoValueOption",void 0),v([S({type:["radio-buttons"],json:{read:!1,write:!0}})],Wc.prototype,"type",void 0),Wc=C_=v([H("esri.form.elements.inputs.RadioButtonsInput")],Wc);const Mpe=Wc;var O_;let Jc=O_=class extends ka{constructor(e){super(e),this.offValue=null,this.onValue=null,this.type="switch"}clone(){return new O_({offValue:this.offValue,onValue:this.onValue})}};v([S({type:[String,Number],json:{write:!0}})],Jc.prototype,"offValue",void 0),v([S({type:[String,Number],json:{write:!0}})],Jc.prototype,"onValue",void 0),v([S({type:["switch"],json:{read:!1,write:!0}})],Jc.prototype,"type",void 0),Jc=O_=v([H("esri.form.elements.inputs.SwitchInput")],Jc);const $pe=Jc;var P_;let hg=P_=class extends hx{constructor(e){super(e),this.type="text-area"}clone(){return new P_({maxLength:this.maxLength,minLength:this.minLength})}};v([S({type:["text-area"],json:{read:!1,write:!0}})],hg.prototype,"type",void 0),hg=P_=v([H("esri.form.elements.inputs.TextAreaInput")],hg);const Epe=hg;var k_;let cg=k_=class extends hx{constructor(e){super(e),this.type="text-box"}clone(){return new k_({maxLength:this.maxLength,minLength:this.minLength})}};v([S({type:["text-box"],json:{read:!1,write:!0}})],cg.prototype,"type",void 0),cg=k_=v([H("esri.form.elements.inputs.TextBoxInput")],cg);const Ipe=cg;var R_;function Ub(e){return e??null}function Vb(e){return e??null}let hs=R_=class extends ka{constructor(e){super(e),this.max=null,this.min=null,this.timeResolution="minutes",this.type="time-picker"}readMax(e,t){return Ub(t.max)}writeMax(e,t){t.max=Vb(e)}readMin(e,t){return Ub(t.min)}writeMin(e,t){t.min=Vb(e)}readTimeResolution(e,t){return Ub(t.timeResolution)}writeTimeResolution(e,t){t.timeResolution=Vb(e)}clone(){return new R_({max:this.max,min:this.min,timeResolution:this.timeResolution})}};v([S({type:String,json:{type:String,write:!0}})],hs.prototype,"max",void 0),v([me("max")],hs.prototype,"readMax",null),v([be("max")],hs.prototype,"writeMax",null),v([S({type:String,json:{type:String,write:!0}})],hs.prototype,"min",void 0),v([me("min")],hs.prototype,"readMin",null),v([be("min")],hs.prototype,"writeMin",null),v([S({type:String,json:{type:String,write:!0}})],hs.prototype,"timeResolution",void 0),v([me("timeResolution")],hs.prototype,"readTimeResolution",null),v([be("timeResolution")],hs.prototype,"writeTimeResolution",null),v([S({type:["time-picker"],json:{read:!1,write:!0}})],hs.prototype,"type",void 0),hs=R_=v([H("esri.form.elements.inputs.TimePickerInput")],hs);const Ape=hs,Cpe={base:ka,key:"type",typeMap:{"barcode-scanner":bpe,"combo-box":_pe,"date-picker":Spe,"datetime-picker":Tpe,"datetimeoffset-picker":xpe,"radio-buttons":Mpe,switch:$pe,"text-area":Epe,"text-box":Ipe,"time-picker":Ape}};var N_;let Ls=N_=class extends ru{constructor(e){super(e),this.domain=null,this.editable=null,this.editableExpression=null,this.fieldName=null,this.hint=null,this.input=null,this.requiredExpression=null,this.type="field",this.valueExpression=null}clone(){return new N_({description:this.description,domain:this.domain,editable:this.editable,editableExpression:this.editableExpression,fieldName:this.fieldName,hint:this.hint,input:this.input,label:this.label,requiredExpression:this.requiredExpression,valueExpression:this.valueExpression,visibilityExpression:this.visibilityExpression})}};v([S({types:uL,json:{read:{reader:k2},write:!0}})],Ls.prototype,"domain",void 0),v([S({type:Boolean,json:{write:!0}})],Ls.prototype,"editable",void 0),v([S({type:String,json:{write:!0}})],Ls.prototype,"editableExpression",void 0),v([S({type:String,json:{write:!0}})],Ls.prototype,"fieldName",void 0),v([S({type:String,json:{write:!0}})],Ls.prototype,"hint",void 0),v([S({types:Cpe,json:{read:{source:"inputType"},write:{target:"inputType"}}})],Ls.prototype,"input",void 0),v([S({type:String,json:{write:!0}})],Ls.prototype,"requiredExpression",void 0),v([S({type:String,json:{read:!1,write:!0}})],Ls.prototype,"type",void 0),v([S({type:String,json:{write:!0}})],Ls.prototype,"valueExpression",void 0),Ls=N_=v([H("esri.form.elements.FieldElement")],Ls);const Z$=Ls;var L_;let Qo=L_=class extends ru{constructor(e){super(e),this.displayCount=null,this.displayType="list",this.editableExpression=null,this.orderByFields=null,this.relationshipId=null,this.type="relationship"}clone(){return new L_({description:this.description,displayCount:this.displayCount,displayType:this.displayType,editableExpression:this.editableExpression,label:this.label,orderByFields:te(this.orderByFields),relationshipId:this.relationshipId,visibilityExpression:this.visibilityExpression})}};v([S({type:Number,json:{write:!0}})],Qo.prototype,"displayCount",void 0),v([S({type:["list"],json:{write:!0}})],Qo.prototype,"displayType",void 0),v([S({type:String,json:{write:!0}})],Qo.prototype,"editableExpression",void 0),v([S({type:[bS],json:{write:!0}})],Qo.prototype,"orderByFields",void 0),v([S({type:Number,json:{write:!0}})],Qo.prototype,"relationshipId",void 0),v([S({type:["relationship"],json:{read:!1,write:!0}})],Qo.prototype,"type",void 0),Qo=L_=v([H("esri.form.elements.RelationshipElement")],Qo);const K$=Qo;var D_;let Zc=D_=class extends ru{constructor(e){super(e),this.text=null,this.textFormat="plain-text",this.type="text"}clone(){return new D_({text:this.text,textFormat:this.textFormat,visibilityExpression:this.visibilityExpression})}};v([S({type:String,json:{write:!0}})],Zc.prototype,"text",void 0),v([S({type:String,json:{write:!0}})],Zc.prototype,"textFormat",void 0),v([S({type:["text"],readOnly:!0,json:{read:!1,write:!0}})],Zc.prototype,"type",void 0),Zc=D_=v([H("esri.form.elements.TextElement")],Zc);const Y$=Zc;let Kc=class extends at.ClonableMixin(ru){constructor(t){super(t),this.associationTypes=null,this.editableExpression=null,this.type="utilityNetworkAssociations"}};v([S({type:[MN],json:{write:{isRequired:!0}}})],Kc.prototype,"associationTypes",void 0),v([S({type:String,json:{write:!0}})],Kc.prototype,"editableExpression",void 0),v([S({type:["utilityNetworkAssociations"],json:{read:!1,write:!0}})],Kc.prototype,"type",void 0),Kc=v([H("esri.form.elements.UtilityNetworkAssociationsElement")],Kc);const X$=Kc,Ope=e=>e.type==="field",Ppe=e=>e.type==="group",kpe=e=>e.type==="text";function pF(e){return{typesWithGroup:{base:ru,key:"type",typeMap:{attachment:B$,field:Z$,group:e,relationship:K$,text:Y$,utilityNetworkAssociations:X$}},typesWithoutGroup:{base:ru,key:"type",typeMap:{attachment:B$,field:Z$,relationship:K$,text:Y$,utilityNetworkAssociations:X$}}}}function dF(e,t,i=!0){if(!e)return null;const r=i?t.typesWithGroup.typeMap:t.typesWithoutGroup.typeMap;return e.filter(a=>r[a.type]).map(a=>r[a.type].fromJSON(a))}function fF(e,t,i=!0){if(!e)return null;const r=i?t.typesWithGroup.typeMap:t.typesWithoutGroup.typeMap;return e.filter(a=>r[a.type]).map(a=>a.toJSON())}function yF(e,t,i=!0){return e?e.map(r=>Nn(i?t.typesWithGroup:t.typesWithoutGroup,r)):null}var j_;let ho=j_=class extends ru{constructor(e){super(e),this.elements=null,this.initialState="expanded",this.type="group"}castElements(e){return yF(e,Gb,!1)}readElements(e,t){return dF(t.formElements,Gb,!1)}writeElements(e,t){t.formElements=fF(e,Gb,!1)}clone(){return new j_({description:this.description,elements:te(this.elements),initialState:this.initialState,label:this.label,visibilityExpression:this.visibilityExpression})}};v([S({json:{write:!0}})],ho.prototype,"elements",void 0),v([ct("elements")],ho.prototype,"castElements",null),v([me("elements",["formElements"])],ho.prototype,"readElements",null),v([be("elements")],ho.prototype,"writeElements",null),v([S({type:["collapsed","expanded"],json:{write:!0}})],ho.prototype,"initialState",void 0),v([S({type:String,json:{read:!1,write:!0}})],ho.prototype,"type",void 0),ho=j_=v([H("esri.form.elements.GroupElement")],ho);const Gb=pF(ho),Rpe=ho;var F_;const Bb=pF(Rpe);let xn=F_=class extends he{constructor(e){super(e),this.description=null,this.elements=null,this.expressionInfos=null,this.preserveFieldValuesWhenHidden=!1,this.title=null}castElements(e){return yF(e,Bb)}readElements(e,t){return dF(t.formElements,Bb)}writeElements(e,t){t.formElements=fF(e,Bb)}clone(){return new F_({description:this.description,expressionInfos:te(this.expressionInfos),elements:te(this.elements),title:this.title,preserveFieldValuesWhenHidden:this.preserveFieldValuesWhenHidden})}async getFieldsUsed(e,t){const i=new Set,{description:r,elements:a,expressionInfos:p,title:y}=this;if(N0(i,e,r),N0(i,e,y),!a)return[];const g=Npe(a,p).map(_=>vr(i,e,_));await Promise.all(g);for(const _ of a)mF(i,{fieldsIndex:e,relationships:t},_);return Array.from(i).sort()}};function mF(e,t,i){var a;const{fieldsIndex:r}=t;if(!r||r.fields.length!==e.size)switch(N0(e,r,i.label),N0(e,r,i.description),i.type){case"field":Cr(e,r,i.fieldName);break;case"group":i.elements.forEach(p=>mF(e,t,p));break;case"relationship":if(t.relationships){const p=t.relationships.find(y=>y.id===i.relationshipId);p&&Cr(e,r,p.keyField)}jh(e,r,(a=i.orderByFields)==null?void 0:a.map(p=>p.field));break;case"text":N0(e,r,i.text)}}function Npe(e,t){if(!t||t.length===0)return[];const i=gF(e),r=[];for(const a of t)i.has(a.name)&&r.push(a.expression);return r}function gF(e){const t=new Set;for(const i of e)if(l7(t,i.visibilityExpression),!kpe(i)){if(Ppe(i))kg(t,gF(i.elements));else if(l7(t,i.editableExpression),Ope(i)){const{requiredExpression:r,valueExpression:a}=i;kg(t,[r,a])}}return t}function N0(e,t,i){jh(e,t,gS(i))}v([S({type:String,json:{write:!0}})],xn.prototype,"description",void 0),v([S({json:{write:!0}})],xn.prototype,"elements",void 0),v([ct("elements")],xn.prototype,"castElements",null),v([me("elements",["formElements"])],xn.prototype,"readElements",null),v([be("elements")],xn.prototype,"writeElements",null),v([S({type:[fpe],json:{write:!0}})],xn.prototype,"expressionInfos",void 0),v([S({type:Boolean,json:{default:!1,write:!0}})],xn.prototype,"preserveFieldValuesWhenHidden",void 0),v([S({type:String,json:{write:!0}})],xn.prototype,"title",void 0),xn=F_=v([H("esri.form.FormTemplate")],xn);const Lpe=xn;function Q$(e,t,i){if(e.hasM==null||e.hasZ)for(const r of t)for(const a of r)a.length>2&&(a[2]*=i)}function Dpe(e,t,i){if(!e&&!t||!i)return;const r=Xg(i);eE(e,i,r),eE(t,i,r)}function eE(e,t,i){if(e)for(const r of e)jpe(r.geometry,t,i)}function jpe(e,t,i){if(!(e!=null&&e.spatialReference)||fi(e.spatialReference,t))return;const r=Xg(e.spatialReference)/i;if(r!==1){if("x"in e)e.z!=null&&(e.z*=r);else if("rings"in e)Q$(e,e.rings,r);else if("paths"in e)Q$(e,e.paths,r);else if("points"in e&&(e.hasM==null||e.hasZ))for(const a of e.points)a.length>2&&(a[2]*=r)}}function tE(e,t,i){if(!(i!=null&&i.features)||!i.hasZ)return;const r=bR(i.geometryType,t,e.outSpatialReference);if(r!=null)for(const a of i.features)r(a.geometry)}var z_;const U_=new rt({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryEnvelope:"extent",mesh:"mesh","":null});let Li=z_=class extends he{constructor(e){super(e),this.displayFieldName=null,this.exceededTransferLimit=!1,this.features=[],this.fields=null,this.geometryType=null,this.hasM=!1,this.hasZ=!1,this.queryGeometry=null,this.spatialReference=null}readFeatures(e,t){return this.readFeaturesWithClass(e,t,Mo)}writeGeometryType(e,t,i,r){if(e)return void U_.write(e,t,i,r);const{features:a}=this;if(a){for(const p of a)if((p==null?void 0:p.geometry)!=null)return void U_.write(p.geometry.type,t,i,r)}}readQueryGeometry(e,t){if(!e)return null;const i=!!e.spatialReference,r=Dh(e);return r&&!i&&t.spatialReference&&(r.spatialReference=qe.fromJSON(t.spatialReference)),r}writeSpatialReference(e,t){if(e)return void(t.spatialReference=e.toJSON());const{features:i}=this;if(i){for(const r of i)if(r&&r.geometry!=null&&r.geometry.spatialReference)return void(t.spatialReference=r.geometry.spatialReference.toJSON())}}clone(){return new z_(this.cloneProperties())}cloneProperties(){return te({displayFieldName:this.displayFieldName,exceededTransferLimit:this.exceededTransferLimit,features:this.features,fields:this.fields,geometryType:this.geometryType,hasM:this.hasM,hasZ:this.hasZ,queryGeometry:this.queryGeometry,spatialReference:this.spatialReference,transform:this.transform})}toJSON(e){const t=this.write();if(t.features&&Array.isArray(e)&&e.length>0)for(let i=0;i<t.features.length;i++){const r=t.features[i];if(r.geometry){const a=e==null?void 0:e[i];r.geometry=(a==null?void 0:a.toJSON())||r.geometry}}return t}quantize(e){const{scale:[t,i],translate:[r,a]}=e,p=T=>Math.round((T-r)/t),y=T=>Math.round((a-T)/i),g=this.features,_=this._getQuantizationFunction(this.geometryType,p,y);for(let T=0,I=g.length;T<I;T++)_!=null&&_(g[T].geometry)||(g.splice(T,1),T--,I--);return this.transform=e,this}unquantize(){var P,N;const{geometryType:e,features:t,transform:i}=this;if(!i)return this;const{translate:[r,a],scale:[p,y]}=i,g=D=>D*p+r,_=D=>a-D*y;let T=null,I=null;if(this.hasZ&&((P=i==null?void 0:i.scale)==null?void 0:P[2])!=null){const{translate:[,,D],scale:[,,z]}=i;T=q=>q*z+D}if(this.hasM&&((N=i==null?void 0:i.scale)==null?void 0:N[3])!=null){const{translate:[,,,D],scale:[,,,z]}=i;I=q=>q==null?q:q*z+D}const A=this._getHydrationFunction(e,g,_,T,I);for(const{geometry:D}of t)D!=null&&A&&A(D);return this.transform=null,this}readFeaturesWithClass(e,t,i){var p;const r=qe.fromJSON(t.spatialReference),a=[];for(let y=0;y<e.length;y++){const g=e[y],_=i.fromJSON(g),T=(p=g.geometry)==null?void 0:p.spatialReference;_.geometry==null||T||(_.geometry.spatialReference=r);const I=g.aggregateGeometries,A=_.aggregateGeometries;if(I&&A!=null)for(const P in A){const N=A[P],D=I[P],z=D==null?void 0:D.spatialReference;N==null||z||(N.spatialReference=r)}a.push(_)}return a}_quantizePoints(e,t,i){let r,a;const p=[];for(let y=0,g=e.length;y<g;y++){const _=e[y];if(y>0){const T=t(_[0]),I=i(_[1]);T===r&&I===a||(p.push([T-r,I-a]),r=T,a=I)}else r=t(_[0]),a=i(_[1]),p.push([r,a])}return p.length>0?p:null}_getQuantizationFunction(e,t,i){return e==="point"?r=>(r.x=t(r.x),r.y=i(r.y),r):e==="polyline"||e==="polygon"?r=>{const a=Mh(r)?r.rings:r.paths,p=[];for(let y=0,g=a.length;y<g;y++){const _=a[y],T=this._quantizePoints(_,t,i);T&&p.push(T)}return p.length>0?(Mh(r)?r.rings=p:r.paths=p,r):null}:e==="multipoint"?r=>{const a=this._quantizePoints(r.points,t,i);return a&&a.length>0?(r.points=a,r):null}:e==="extent"?r=>r:null}_getHydrationFunction(e,t,i,r,a){return e==="point"?p=>{p.x=t(p.x),p.y=i(p.y),r&&(p.z=r(p.z))}:e==="polyline"||e==="polygon"?p=>{const y=Mh(p)?p.rings:p.paths;let g,_;for(let T=0,I=y.length;T<I;T++){const A=y[T];for(let P=0,N=A.length;P<N;P++){const D=A[P];P>0?(g+=D[0],_+=D[1]):(g=D[0],_=D[1]),D[0]=t(g),D[1]=i(_)}}if(r&&a)for(let T=0,I=y.length;T<I;T++){const A=y[T];for(let P=0,N=A.length;P<N;P++){const D=A[P];D[2]=r(D[2]),D[3]=a(D[3])}}else if(r)for(let T=0,I=y.length;T<I;T++){const A=y[T];for(let P=0,N=A.length;P<N;P++){const D=A[P];D[2]=r(D[2])}}else if(a)for(let T=0,I=y.length;T<I;T++){const A=y[T];for(let P=0,N=A.length;P<N;P++){const D=A[P];D[2]=a(D[2])}}}:e==="extent"?p=>{p.xmin=t(p.xmin),p.ymin=i(p.ymin),p.xmax=t(p.xmax),p.ymax=i(p.ymax),r&&p.zmax!=null&&p.zmin!=null&&(p.zmax=r(p.zmax),p.zmin=r(p.zmin)),a&&p.mmax!=null&&p.mmin!=null&&(p.mmax=a(p.mmax),p.mmin=a(p.mmin))}:e==="multipoint"?p=>{const y=p.points;let g,_;for(let T=0,I=y.length;T<I;T++){const A=y[T];T>0?(g+=A[0],_+=A[1]):(g=A[0],_=A[1]),A[0]=t(g),A[1]=i(_)}if(r&&a)for(let T=0,I=y.length;T<I;T++){const A=y[T];A[2]=r(A[2]),A[3]=a(A[3])}else if(r)for(let T=0,I=y.length;T<I;T++){const A=y[T];A[2]=r(A[2])}else if(a)for(let T=0,I=y.length;T<I;T++){const A=y[T];A[2]=a(A[2])}}:null}};v([S({type:String,json:{write:!0}})],Li.prototype,"displayFieldName",void 0),v([S({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],Li.prototype,"exceededTransferLimit",void 0),v([S({type:[Mo],json:{write:!0}})],Li.prototype,"features",void 0),v([me("features")],Li.prototype,"readFeatures",null),v([S({type:[PS],json:{write:!0}})],Li.prototype,"fields",void 0),v([S({type:["point","multipoint","polyline","polygon","extent","mesh"],json:{read:{reader:U_.read}}})],Li.prototype,"geometryType",void 0),v([be("geometryType")],Li.prototype,"writeGeometryType",null),v([S({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],Li.prototype,"hasM",void 0),v([S({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],Li.prototype,"hasZ",void 0),v([S({types:P1,json:{write:!0}})],Li.prototype,"queryGeometry",void 0),v([me("queryGeometry")],Li.prototype,"readQueryGeometry",null),v([S({type:qe,json:{write:!0}})],Li.prototype,"spatialReference",void 0),v([be("spatialReference")],Li.prototype,"writeSpatialReference",null),v([S({json:{write:!0}})],Li.prototype,"transform",void 0),Li=z_=v([H("esri.rest.support.FeatureSet")],Li),Li.prototype.toJSON.isDefaultToJSON=!0;const vF=Li;let Fpe=0,ha=class extends Xs.LoadableMixin(hd.EsriPromiseMixin(xe)){constructor(t){super(t),this._idToClientGraphic=null,this.type="memory"}load(t){const i=t!=null?t.signal:null;return this.addResolvingPromise(this._startWorker(i)),Promise.resolve(this)}destroy(){var t;(t=this._connection)==null||t.close(),this._connection=null}get _workerGeometryType(){var i;const t=(i=this.layer)==null?void 0:i.geometryType;return t?this._geometryTypeRequiresClientGraphicMapping(t)?"polygon":t:null}applyEdits(t){return this.load().then(()=>this._applyEdits(t))}openPorts(){return this.load().then(()=>this._connection.openPorts())}async queryFeatures(t,i={}){await this.load(i);const r=await this._connection.invoke("queryFeatures",t?t.toJSON():null,i);tE(t,this.layer.spatialReference,r);const a=vF.fromJSON(r);if(!this._requiresClientGraphicMapping())return a;const p=this.layer.objectIdField;for(const y of a.features){const g=y.attributes[p],_=this._idToClientGraphic.get(g);_&&(y.geometry=_.geometry)}return a.geometryType=this.layer.geometryType,a}async queryFeaturesJSON(t,i={}){if(this._requiresClientGraphicMapping())throw new Y("query-features-json:unsupported","Cannot query in JSON format for client only geometry types (mesh and extent)");await this.load(i);const r=await this._connection.invoke("queryFeatures",t?t.toJSON():null,i);return tE(t,this.layer.spatialReference,r),r}queryFeatureCount(t,i={}){return this.load(i).then(()=>this._connection.invoke("queryFeatureCount",t?t.toJSON():null,i))}queryObjectIds(t,i={}){return this.load(i).then(()=>this._connection.invoke("queryObjectIds",t?t.toJSON():null,i))}queryExtent(t,i={}){return this.load(i).then(()=>this._connection.invoke("queryExtent",t?t.toJSON():null,i)).then(r=>({count:r.count,extent:Ct.fromJSON(r.extent)}))}querySnapping(t,i={}){return this.load(i).then(()=>this._connection.invoke("querySnapping",t,i))}async queryAttributeBins(t,i={}){return await this.load(),this._connection.invoke("queryAttributeBins",t==null?void 0:t.toJSON(),i)}async _applyEdits(t){if(!this._connection)throw new Y("feature-layer-source:edit-failure","Memory source not loaded");const i=this.layer.objectIdField;let r=null;const a=[],p=[];await Promise.all([this._prepareClientMapping(t.addFeatures,null),this._prepareClientMapping(t.updateFeatures,null)]);const y=I=>"objectId"in I&&I.objectId!=null?I.objectId:"attributes"in I&&I.attributes[i]!=null?I.attributes[i]:null;if(t.addFeatures&&(r=this._prepareAddFeatures(t.addFeatures)),t.deleteFeatures)for(const I of t.deleteFeatures){const A=y(I);A!=null&&a.push(A)}const g=t.updateFeatures&&this._idToClientGraphic?new Map:null;if(t.updateFeatures){for(const I of t.updateFeatures)if(p.push(this._serializeFeature(I)),g){const A=y(I);A!=null&&g.set(A,I)}}Dpe(r?r.features:null,p,this.layer.spatialReference);const{fullExtent:_,featureEditResults:T}=await this._connection.invoke("applyEdits",{adds:r?r.features:[],updates:p,deletes:a});return this.fullExtent=_,r&&r.finish(T.uidToObjectId),this._updateClientGraphicIds(g,T),this._createEditsResult(T)}async _prepareClientMapping(t,i){if(this._layerOrSourceGeometryType!=="mesh"||t==null)return;const r=[];for(const{geometry:a}of t)a==null||a.type!=="mesh"||a.hasExtent||a.loaded||r.push(a.load({signal:i}));r.length&&await Promise.all(r)}_updateClientGraphicIds(t,i){if(this._idToClientGraphic){if(t)for(const r of i.updateResults){if(!r.success)continue;const a=t.get(r.objectId);a!=null&&this._addIdToClientGraphic(a)}for(const r of i.deleteResults)r.success&&this._idToClientGraphic.delete(r.objectId)}}_createEditsResult(t){return{addFeatureResults:t.addResults?t.addResults.map(this._createFeatureEditResult,this):[],updateFeatureResults:t.updateResults?t.updateResults.map(this._createFeatureEditResult,this):[],deleteFeatureResults:t.deleteResults?t.deleteResults.map(this._createFeatureEditResult,this):[],addAttachmentResults:[],updateAttachmentResults:[],deleteAttachmentResults:[]}}_createFeatureEditResult(t){const i=t.success===!0?null:t.error||{code:void 0,description:void 0};return{objectId:t.objectId,globalId:t.globalId,error:i?new Y("feature-layer-source:edit-failure",i.description,{code:i.code}):null}}_prepareAddFeatures(t){const i=new Map,r=new Array(t.length);let a=null;for(let y=0;y<t.length;y++){const g=t[y],_=this._serializeFeature(g);a||g.geometry==null||(a=g.geometry.type),r[y]=_,i.set(`${_.uid}`,g)}const p=this;return{features:r,inferredGeometryType:a,finish(y){const g=p.sourceJSON.objectIdField;for(const _ in y){const T=y[_],I=i.get(_);I&&(I.attributes||(I.attributes={}),T===-1?delete I.attributes[g]:I.attributes[g]=T,p._addIdToClientGraphic(I))}}}}_addIdToClientGraphic(t){var a;if(!this._idToClientGraphic)return;const i=this.sourceJSON.objectIdField,r=(a=t.attributes)==null?void 0:a[i];r!=null&&this._idToClientGraphic.set(r,t)}get _layerOrSourceGeometryType(){var t,i;return((t=this.layer)==null?void 0:t.geometryType)??((i=this.sourceJSON)==null?void 0:i.geometryType)}_requiresClientGraphicMapping(){return this._geometryTypeRequiresClientGraphicMapping(this._layerOrSourceGeometryType)}_geometryRequiresClientGraphicMapping(t){return this._geometryTypeRequiresClientGraphicMapping(t.type)}_geometryTypeRequiresClientGraphicMapping(t){return t==="mesh"||t==="multipatch"||t==="extent"}_serializeFeature(t){const{attributes:i}=t,r=this._geometryForSerialization(t),a=(Fpe++).toString();return r?{uid:a,geometry:r.toJSON(),attributes:i}:{uid:a,attributes:i}}_geometryForSerialization(t){const{geometry:i}=t;return i==null?null:this._geometryRequiresClientGraphicMapping(i)?i.extent?en.fromExtent(i.extent):null:i}async _startWorker(t){this._connection=await tX("MemorySourceWorker",{strategy:ne("feature-layers-workers")?"dedicated":"local",signal:t,registryTarget:this});const{fields:i,spatialReference:r,objectIdField:a,hasM:p,hasZ:y,timeInfo:g,dateFieldsTimeZone:_}=this.layer,T=this.layer.originOf("spatialReference")==="defaults";await this._prepareClientMapping(this.items,t);const I=this._prepareAddFeatures(this.items);this.addHandles(this.on("before-changes",D=>{ye.getLogger(this).error("Source modifications will not propagate after layer has been loaded. Please use .applyEdits() instead"),D.preventDefault()}));const A={features:I.features,fields:i==null?void 0:i.map(D=>D.toJSON()),geometryType:zT.toJSON(this._workerGeometryType),hasM:this._layerOrSourceGeometryType!=="mesh"&&p,hasZ:this._layerOrSourceGeometryType==="mesh"||y,objectIdField:a,spatialReference:T?null:r&&r.toJSON(),timeInfo:(g==null?void 0:g.toJSON())??null,dateFieldsTimeZone:_},P=await this._connection.invoke("load",A,{signal:t});for(const D of P.warnings)ye.getLogger(this.layer).warn("#load()",`${D.message} (title: '${this.layer.title||"no title"}', id: '${this.layer.id??"no id"}')`,{warning:D});P.featureErrors.length&&ye.getLogger(this.layer).warn("#load()",`Encountered ${P.featureErrors.length} validation errors while loading features. (title: '${this.layer.title||"no title"}', id: '${this.layer.id??"no id"}')`,{errors:P.featureErrors});const N=P.layerDefinition;this._geometryTypeRequiresClientGraphicMapping(I.inferredGeometryType)&&(N.geometryType=zT.toJSON(I.inferredGeometryType)),this.sourceJSON=N,this._requiresClientGraphicMapping()&&(this._idToClientGraphic=new Map),I.finish(P.assignedObjectIds)}};v([w6({Type:Mo,ensureType:di(Mo)})],ha.prototype,"itemType",void 0),v([S()],ha.prototype,"type",void 0),v([S({constructOnly:!0})],ha.prototype,"layer",void 0),v([S({readOnly:!0})],ha.prototype,"_workerGeometryType",null),v([S()],ha.prototype,"sourceJSON",void 0),ha=v([H("esri.layers.graphics.sources.MemorySource")],ha);function zpe(e){return"portalItem"in e}const Upe=e=>{let t=class extends e{get apiKey(){var i;return this._isOverridden("apiKey")?this._get("apiKey"):zpe(this)?(i=this.portalItem)==null?void 0:i.apiKey:null}set apiKey(i){i!=null?this._override("apiKey",i):(this._clearOverride("apiKey"),this.clear("apiKey","user"))}};return v([S({type:String})],t.prototype,"apiKey",null),t=v([H("esri.layers.mixins.APIKeyMixin")],t),t},Vpe=e=>{let t=class extends e{get title(){if(this._get("title")&&this.originOf("title")!=="defaults")return this._get("title");if(this.url){const i=ud(this.url);if(i!=null&&i.title)return i.title}return this._get("title")||""}set title(i){this._set("title",i)}set url(i){this._set("url",pB(i,ye.getLogger(this)))}};return v([S()],t.prototype,"title",null),v([S({type:String})],t.prototype,"url",null),t=v([H("esri.layers.mixins.ArcGISService")],t),t};function Gpe(e,t){function i(){this.constructor=e}i.prototype=t.prototype,e.prototype=new i}function Cp(e,t,i,r){var a=Error.call(this,e);return Object.setPrototypeOf&&Object.setPrototypeOf(a,Cp.prototype),a.expected=t,a.found=i,a.location=r,a.name="SyntaxError",a}function qb(e,t,i){return i=i||" ",e.length>t?e:(t-=e.length,e+(i+=i.repeat(t)).slice(0,t))}function Bpe(e,t){var i,r={},a=(t=t!==void 0?t:{}).grammarSource,p={start:Ue},y=Ue,g="none",_=")",T=",",I="(",A="%",P="px",N="cm",D="mm",z="in",q="pt",J="pc",ee="deg",X="rad",ie="grad",oe="turn",ue="#",ge=".",Se="e",Ee=/^[ \t\n\r]/,Ie=/^[a-z\-]/,ke=/^[0-9a-fA-F]/,je=/^[+\-]/,st=/^[0-9]/,Ve=de("none"),xi=K("none",!1),$s=K(")",!1),Ri=K(",",!1),bt=de("whitespace"),Pr=re([" ","	",`
`,"\r"],!1,!1),nw=de("function"),ow=K("(",!1),aw=de("identifier"),Z1=re([["a","z"],"-"],!1,!1),lw=de("percentage"),uw=K("%",!1),hw=de("length"),cw=K("px",!1),pw=K("cm",!1),dw=K("mm",!1),fw=K("in",!1),yw=K("pt",!1),K1=K("pc",!1),mw=de("angle"),gw=K("deg",!1),vw=K("rad",!1),yi=K("grad",!1),G=K("turn",!1),ir=de("number"),Y1=de("color"),pt=K("#",!1),Zt=re([["0","9"],["a","f"],["A","F"]],!1,!1),Es=re(["+","-"],!1,!1),Hi=re([["0","9"]],!1,!1),Fn=K(".",!1),Co=K("e",!1),X1=function(){return[]},Q1=function(Z,pe){return{type:"function",name:Z,parameters:pe||[]}},Oo=function(Z,pe){return pe.length>0?tc(Z,pe,3):[Z]},_e=function(Z){return{type:"quantity",value:Z.value,unit:Z.unit}},Na=function(Z){return{type:"color",colorType:Z.type,value:Z.value}},h=function(Z){return Z},C=function(){return W()},w=function(Z){return{value:Z,unit:"%"}},u=function(Z){return{value:Z,unit:"px"}},o=function(Z){return{value:Z,unit:"cm"}},s=function(Z){return{value:Z,unit:"mm"}},n=function(Z){return{value:Z,unit:"in"}},l=function(Z){return{value:Z,unit:"pt"}},c=function(Z){return{value:Z,unit:"pc"}},d=function(Z){return{value:Z,unit:"deg"}},f=function(Z){return{value:Z,unit:"rad"}},m=function(Z){return{value:Z,unit:"grad"}},b=function(Z){return{value:Z,unit:"turn"}},x=function(Z){return{value:Z,unit:null}},$=function(){return{type:"hex",value:W()}},E=function(Z){return{type:"function",value:Z}},O=function(){return{type:"named",value:W()}},R=function(){return parseFloat(W())},k=0|t.peg$currPos,j=k,F=[{line:1,column:1}],L=k,V=t.peg$maxFailExpected||[],B=0|t.peg$silentFails;if(t.startRule){if(!(t.startRule in p))throw new Error(`Can't start parsing from rule "`+t.startRule+'".');y=p[t.startRule]}function W(){return e.substring(j,k)}function K(Z,pe){return{type:"literal",text:Z,ignoreCase:pe}}function re(Z,pe,we){return{type:"class",parts:Z,inverted:pe,ignoreCase:we}}function ae(){return{type:"end"}}function de(Z){return{type:"other",description:Z}}function ce(Z){var pe,we=F[Z];if(we)return we;if(Z>=F.length)pe=F.length-1;else for(pe=Z;!F[--pe];);for(we={line:(we=F[pe]).line,column:we.column};pe<Z;)e.charCodeAt(pe)===10?(we.line++,we.column=1):we.column++,pe++;return F[Z]=we,we}function Te(Z,pe,we){var Je=ce(Z),Rt=ce(pe);return{source:a,start:{offset:Z,line:Je.line,column:Je.column},end:{offset:pe,line:Rt.line,column:Rt.column}}}function le(Z){k<L||(k>L&&(L=k,V=[]),V.push(Z))}function He(Z,pe,we){return new Cp(Cp.buildMessage(Z,pe),Z,pe,we)}function Ue(){var Z;return(Z=lt())===r&&(Z=Mt()),Z}function lt(){var Z,pe;return B++,Z=k,We(),e.substr(k,4)===g?(pe=g,k+=4):(pe=r,B===0&&le(xi)),pe!==r?(We(),j=Z,Z=X1()):(k=Z,Z=r),B--,Z===r&&B===0&&le(Ve),Z}function Mt(){var Z,pe;if(Z=[],(pe=Qt())!==r)for(;pe!==r;)Z.push(pe),pe=Qt();else Z=r;return Z}function Qt(){var Z,pe,we,Je;return Z=k,We(),(pe=Qe())!==r?(We(),(we=It())===r&&(we=null),We(),e.charCodeAt(k)===41?(Je=_,k++):(Je=r,B===0&&le($s)),Je!==r?(We(),j=Z,Z=Q1(pe,we)):(k=Z,Z=r)):(k=Z,Z=r),Z}function It(){var Z,pe,we,Je,Rt,ni,Ti,kr;if(Z=k,(pe=ut())!==r){for(we=[],Je=k,Rt=We(),e.charCodeAt(k)===44?(ni=T,k++):(ni=r,B===0&&le(Ri)),ni===r&&(ni=null),Ti=We(),(kr=ut())!==r?Je=Rt=[Rt,ni,Ti,kr]:(k=Je,Je=r);Je!==r;)we.push(Je),Je=k,Rt=We(),e.charCodeAt(k)===44?(ni=T,k++):(ni=r,B===0&&le(Ri)),ni===r&&(ni=null),Ti=We(),(kr=ut())!==r?Je=Rt=[Rt,ni,Ti,kr]:(k=Je,Je=r);j=Z,Z=Oo(pe,we)}else k=Z,Z=r;return Z}function ut(){var Z,pe;return Z=k,(pe=Ot())===r&&(pe=es())===r&&(pe=nt())===r&&(pe=Wi()),pe!==r&&(j=Z,pe=_e(pe)),(Z=pe)===r&&(Z=k,(pe=gt())!==r&&(j=Z,pe=Na(pe)),Z=pe),Z}function We(){var Z,pe;for(B++,Z=[],pe=e.charAt(k),Ee.test(pe)?k++:(pe=r,B===0&&le(Pr));pe!==r;)Z.push(pe),pe=e.charAt(k),Ee.test(pe)?k++:(pe=r,B===0&&le(Pr));return B--,pe=r,B===0&&le(bt),Z}function Qe(){var Z,pe,we;return B++,Z=k,(pe=Dt())!==r?(e.charCodeAt(k)===40?(we=I,k++):(we=r,B===0&&le(ow)),we!==r?(j=Z,Z=h(pe)):(k=Z,Z=r)):(k=Z,Z=r),B--,Z===r&&(pe=r,B===0&&le(nw)),Z}function Dt(){var Z,pe,we;if(B++,Z=k,pe=[],we=e.charAt(k),Ie.test(we)?k++:(we=r,B===0&&le(Z1)),we!==r)for(;we!==r;)pe.push(we),we=e.charAt(k),Ie.test(we)?k++:(we=r,B===0&&le(Z1));else pe=r;return pe!==r&&(j=Z,pe=C()),B--,(Z=pe)===r&&(pe=r,B===0&&le(aw)),Z}function Ot(){var Z,pe,we;return B++,Z=k,We(),(pe=Ji())!==r?(e.charCodeAt(k)===37?(we=A,k++):(we=r,B===0&&le(uw)),we!==r?(j=Z,Z=w(pe)):(k=Z,Z=r)):(k=Z,Z=r),B--,Z===r&&B===0&&le(lw),Z}function es(){var Z,pe,we;return B++,Z=k,We(),(pe=Ji())!==r?(e.substr(k,2)===P?(we=P,k+=2):(we=r,B===0&&le(cw)),we!==r?(j=Z,Z=u(pe)):(k=Z,Z=r)):(k=Z,Z=r),Z===r&&(Z=k,We(),(pe=Ji())!==r?(e.substr(k,2)===N?(we=N,k+=2):(we=r,B===0&&le(pw)),we!==r?(j=Z,Z=o(pe)):(k=Z,Z=r)):(k=Z,Z=r),Z===r&&(Z=k,We(),(pe=Ji())!==r?(e.substr(k,2)===D?(we=D,k+=2):(we=r,B===0&&le(dw)),we!==r?(j=Z,Z=s(pe)):(k=Z,Z=r)):(k=Z,Z=r),Z===r&&(Z=k,We(),(pe=Ji())!==r?(e.substr(k,2)===z?(we=z,k+=2):(we=r,B===0&&le(fw)),we!==r?(j=Z,Z=n(pe)):(k=Z,Z=r)):(k=Z,Z=r),Z===r&&(Z=k,We(),(pe=Ji())!==r?(e.substr(k,2)===q?(we=q,k+=2):(we=r,B===0&&le(yw)),we!==r?(j=Z,Z=l(pe)):(k=Z,Z=r)):(k=Z,Z=r),Z===r&&(Z=k,We(),(pe=Ji())!==r?(e.substr(k,2)===J?(we=J,k+=2):(we=r,B===0&&le(K1)),we!==r?(j=Z,Z=c(pe)):(k=Z,Z=r)):(k=Z,Z=r)))))),B--,Z===r&&B===0&&le(hw),Z}function nt(){var Z,pe,we;return B++,Z=k,(pe=Ji())!==r?(e.substr(k,3)===ee?(we=ee,k+=3):(we=r,B===0&&le(gw)),we!==r?(j=Z,Z=d(pe)):(k=Z,Z=r)):(k=Z,Z=r),Z===r&&(Z=k,(pe=Ji())!==r?(e.substr(k,3)===X?(we=X,k+=3):(we=r,B===0&&le(vw)),we!==r?(j=Z,Z=f(pe)):(k=Z,Z=r)):(k=Z,Z=r),Z===r&&(Z=k,(pe=Ji())!==r?(e.substr(k,4)===ie?(we=ie,k+=4):(we=r,B===0&&le(yi)),we!==r?(j=Z,Z=m(pe)):(k=Z,Z=r)):(k=Z,Z=r),Z===r&&(Z=k,(pe=Ji())!==r?(e.substr(k,4)===oe?(we=oe,k+=4):(we=r,B===0&&le(G)),we!==r?(j=Z,Z=b(pe)):(k=Z,Z=r)):(k=Z,Z=r)))),B--,Z===r&&(pe=r,B===0&&le(mw)),Z}function Wi(){var Z,pe;return B++,Z=k,We(),(pe=Ji())!==r?(j=Z,Z=x(pe)):(k=Z,Z=r),B--,Z===r&&B===0&&le(ir),Z}function gt(){var Z,pe,we,Je;if(B++,Z=k,e.charCodeAt(k)===35?(pe=ue,k++):(pe=r,B===0&&le(pt)),pe!==r){if(we=[],Je=e.charAt(k),ke.test(Je)?k++:(Je=r,B===0&&le(Zt)),Je!==r)for(;Je!==r;)we.push(Je),Je=e.charAt(k),ke.test(Je)?k++:(Je=r,B===0&&le(Zt));else we=r;we!==r?(j=Z,Z=$()):(k=Z,Z=r)}else k=Z,Z=r;return Z===r&&(Z=k,(pe=Qt())!==r&&(j=Z,pe=E(pe)),(Z=pe)===r&&(Z=k,(pe=Dt())!==r&&(j=Z,pe=O()),Z=pe)),B--,Z===r&&(pe=r,B===0&&le(Y1)),Z}function Ji(){var Z,pe,we,Je,Rt,ni,Ti,kr;for(Z=k,pe=e.charAt(k),je.test(pe)?k++:(pe=r,B===0&&le(Es)),pe===r&&(pe=null),we=k,Je=[],Rt=e.charAt(k),st.test(Rt)?k++:(Rt=r,B===0&&le(Hi));Rt!==r;)Je.push(Rt),Rt=e.charAt(k),st.test(Rt)?k++:(Rt=r,B===0&&le(Hi));if(e.charCodeAt(k)===46?(Rt=ge,k++):(Rt=r,B===0&&le(Fn)),Rt!==r){if(ni=[],Ti=e.charAt(k),st.test(Ti)?k++:(Ti=r,B===0&&le(Hi)),Ti!==r)for(;Ti!==r;)ni.push(Ti),Ti=e.charAt(k),st.test(Ti)?k++:(Ti=r,B===0&&le(Hi));else ni=r;ni!==r?we=Je=[Je,Rt,ni]:(k=we,we=r)}else k=we,we=r;if(we===r)if(we=[],Je=e.charAt(k),st.test(Je)?k++:(Je=r,B===0&&le(Hi)),Je!==r)for(;Je!==r;)we.push(Je),Je=e.charAt(k),st.test(Je)?k++:(Je=r,B===0&&le(Hi));else we=r;if(we!==r){if(Je=k,e.charCodeAt(k)===101?(Rt=Se,k++):(Rt=r,B===0&&le(Co)),Rt!==r){if(ni=e.charAt(k),je.test(ni)?k++:(ni=r,B===0&&le(Es)),ni===r&&(ni=null),Ti=[],kr=e.charAt(k),st.test(kr)?k++:(kr=r,B===0&&le(Hi)),kr!==r)for(;kr!==r;)Ti.push(kr),kr=e.charAt(k),st.test(kr)?k++:(kr=r,B===0&&le(Hi));else Ti=r;Ti!==r?Je=Rt=[Rt,ni,Ti]:(k=Je,Je=r)}else k=Je,Je=r;Je===r&&(Je=null),j=Z,Z=R()}else k=Z,Z=r;return Z}function ec(Z,pe){return Z.map(function(we){return we[pe]})}function tc(Z,pe,we){return[Z].concat(ec(pe,we))}if(i=y(),t.peg$library)return{peg$result:i,peg$currPos:k,peg$FAILED:r,peg$maxFailExpected:V,peg$maxFailPos:L};if(i!==r&&k===e.length)return i;throw i!==r&&k<e.length&&le(ae()),He(V,L<e.length?e.charAt(L):null,L<e.length?Te(L,L+1):Te(L,L))}function wF(e){if(!e||e.length===0)return null;if(typeof e=="string"){const i=iE(e);return i&&i.length!==0?i:null}const t=e.map(i=>{if(!Number.isFinite(i.scale)||i.scale<=0)throw new Y("effect:invalid-scale","scale must be finite and greater than 0",{stop:i});return{scale:i.scale,effects:iE(i.value)}});t.sort((i,r)=>r.effects.length-i.effects.length);for(let i=0;i<t.length-1;i++){if(!_K(t[i].effects,t[i+1].effects))throw new Y("effect:interpolation-impossible","Cannot interpolate by scale between 2 lists of mixed effects",{a:t[i].effects,b:t[i+1].effects});SK(t[i].effects,t[i+1].effects)}return t.sort((i,r)=>r.scale-i.scale),t}function iE(e){let t;if(!e)return[];try{t=Bpe(e)}catch(i){throw new Y("effect:invalid-syntax","Invalid effect syntax",{value:e,error:i})}return t.map(i=>qpe(i))}function qpe(e){try{switch(e.name){case"grayscale":case"sepia":case"saturate":case"invert":case"brightness":case"contrast":return Hpe(e);case"opacity":return Wpe(e);case"hue-rotate":return Jpe(e);case"blur":return Zpe(e);case"drop-shadow":return Kpe(e);case"bloom":return Ype(e)}}catch(t){throw t.details.filter=e,t}throw new Y("effect:unknown-effect",`Effect '${e.name}' is not supported`,{effect:e})}function Hpe(e){let t=1;return _d(e.parameters,1),e.parameters.length===1&&(t=An(e.parameters[0])),new h5(e.name,t)}function Wpe(e){let t=1;return _d(e.parameters,1),e.parameters.length===1&&(t=An(e.parameters[0])),new Ok(t)}function Jpe(e){let t=0;return _d(e.parameters,1),e.parameters.length===1&&(t=rde(e.parameters[0])),new Ak(t)}function Zpe(e){let t=0;return _d(e.parameters,1),e.parameters.length===1&&(t=dx(e.parameters[0]),H1(t,e.parameters[0])),new Tk(t)}function Kpe(e){const t=[];let i=null;for(const r of e.parameters)if(r.type==="color"){if(t.length&&Object.freeze(t),i)throw new Y("effect:type-error","Accepts only one color",{});i=sde(r)}else{const a=dx(r);if(Object.isFrozen(t))throw new Y("effect:type-error","<length> parameters not consecutive",{lengths:t});t.push(a),t.length===3&&H1(a,r)}if(t.length<2||t.length>3)throw new Y("effect:type-error",`Expected <length>{2,3}, Actual: <length>{${t.length}}`,{lengths:t});return new Ek(t[0],t[1],t[2]||0,i||bF("black"))}function Ype(e){let t=1,i=0,r=0;return _d(e.parameters,3),e.parameters[0]&&(t=An(e.parameters[0])),e.parameters[1]&&(i=dx(e.parameters[1]),H1(i,e.parameters[1])),e.parameters[2]&&(r=An(e.parameters[2])),new Sk(t,i,r)}function _d(e,t){if(e.length>t)throw new Y("effect:type-error",`Function supports up to ${t} parameters, Actual: ${e.length}`,{parameters:e})}function q2(e){if(e.type==="color")return"<color>";if(e.unit){if(e.unit in px)return"<length>";if(e.unit in cx)return"<angle>";if(e.unit==="%")return"<percentage>"}return"<double>"}function H1(e,t){if(e<0)throw new Y("effect:type-error",`Negative values are not allowed, Actual: ${e}`,{term:t})}function Xpe(e){if(e.type!=="quantity"||e.unit!==null)throw new Y("effect:type-error",`Expected <double>, Actual: ${q2(e)}`,{term:e})}function Qpe(e){if(e.type!=="quantity"||e.unit!==null&&e.unit!=="%")throw new Y("effect:type-error",`Expected <double> or <percentage>, Actual: ${q2(e)}`,{term:e})}Gpe(Cp,Error),Cp.prototype.format=function(e){var t="Error: "+this.message;if(this.location){var i,r=null;for(i=0;i<e.length;i++)if(e[i].source===this.location.source){r=e[i].text.split(/\r\n|\n|\r/g);break}var a=this.location.start,p=this.location.source&&typeof this.location.source.offset=="function"?this.location.source.offset(a):a,y=this.location.source+":"+p.line+":"+p.column;if(r){var g=this.location.end,_=qb("",p.line.toString().length," "),T=r[a.line-1],I=(a.line===g.line?g.column:T.length+1)-a.column||1;t+=`
 --> `+y+`
`+_+` |
`+p.line+" | "+T+`
`+_+" | "+qb("",a.column-1," ")+qb("",I,"^")}else t+=`
 at `+y}return t},Cp.buildMessage=function(e,t){var i={literal:function(T){return'"'+a(T.text)+'"'},class:function(T){var I=T.parts.map(function(A){return Array.isArray(A)?p(A[0])+"-"+p(A[1]):p(A)});return"["+(T.inverted?"^":"")+I.join("")+"]"},any:function(){return"any character"},end:function(){return"end of input"},other:function(T){return T.description}};function r(T){return T.charCodeAt(0).toString(16).toUpperCase()}function a(T){return T.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(I){return"\\x0"+r(I)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(I){return"\\x"+r(I)})}function p(T){return T.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(I){return"\\x0"+r(I)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(I){return"\\x"+r(I)})}function y(T){return i[T.type](T)}function g(T){var I,A,P=T.map(y);if(P.sort(),P.length>0){for(I=1,A=1;I<P.length;I++)P[I-1]!==P[I]&&(P[A]=P[I],A++);P.length=A}switch(P.length){case 1:return P[0];case 2:return P[0]+" or "+P[1];default:return P.slice(0,-1).join(", ")+", or "+P[P.length-1]}}function _(T){return T?'"'+a(T)+'"':"end of input"}return"Expected "+g(e)+" but "+_(t)+" found."};const cx={deg:1,grad:.9,rad:180/Math.PI,turn:360};function ede(e){if(e.type!=="quantity"||!(e.value===0&&e.unit===null||e.unit&&cx[e.unit]!=null))throw new Y("effect:type-error",`Expected <angle>, Actual: ${q2(e)}`,{term:e})}const px={px:1,cm:96/2.54,mm:96/2.54/10,in:96,pc:16,pt:96/72};function tde(e){if(e.type!=="quantity"||!(e.value===0&&e.unit===null||e.unit&&px[e.unit]!=null))throw new Y("effect:type-error",`Expected <length>, Actual: ${q2(e)}`,{term:e})}function An(e){Qpe(e);const t=e.value;return H1(t,e),e.unit==="%"?.01*t:t}function ide(e){return Xpe(e),H1(e.value,e),e.value}function rde(e){return ede(e),e.value*cx[e.unit]||0}function dx(e){return tde(e),e.value*px[e.unit]||0}function sde(e){switch(e.colorType){case"hex":return WJ(e.value);case"named":return bF(e.value);case"function":return ade(e.value)}}function bF(e){if(!tk(e))throw new Y("effect:unknown-color",`color '${e}' isn't valid`,{namedColor:e});return HJ(e)}const nde=/^rgba?/i,ode=/^hsla?/i;function ade(e){if(_d(e.parameters,4),nde.test(e.name))return[An(e.parameters[0]),An(e.parameters[1]),An(e.parameters[2]),e.parameters[3]?An(e.parameters[3]):1];if(ode.test(e.name))return ik(ide(e.parameters[0]),An(e.parameters[1]),An(e.parameters[2]),e.parameters[3]?An(e.parameters[3]):1);throw new Y("effect:syntax-error",`Invalid color function '${e.name}'`,{colorFunction:e})}function u1(e,t,i){var r;try{return ude(e)}catch(a){(r=i==null?void 0:i.messages)==null||r.push(a)}return null}function h1(e,t,i,r){try{const a=lde(e);Bi(i,a,t)}catch(a){r.messages&&r.messages.push(a)}}function lde(e){const t=wF(e);return t?xK(t)?t.map(i=>i.toJSON()):t.map(({scale:i,effects:r})=>({scale:i,value:r.map(a=>a.toJSON())})):null}function ude(e){if(!e||e.length===0)return null;if(hde(e)){const t=[];for(const i of e)t.push({scale:i.scale,value:rE(i.value)});return t}return rE(e)}function hde(e){const t=e[0];return!!t&&"scale"in t}function rE(e){if(!(e!=null&&e.length))return"";const t=[];for(const i of e){let r=[];switch(i.type){case"grayscale":case"sepia":case"saturate":case"invert":case"brightness":case"contrast":case"opacity":r=[Do(i,"amount")];break;case"blur":r=[Do(i,"radius","pt")];break;case"hue-rotate":r=[Do(i,"angle","deg")];break;case"drop-shadow":r=[Do(i,"xoffset","pt"),Do(i,"yoffset","pt"),Do(i,"blurRadius","pt"),cde(i,"color")];break;case"bloom":r=[Do(i,"strength"),Do(i,"radius","pt"),Do(i,"threshold")]}const a=`${i.type}(${r.filter(Boolean).join(" ")})`;wF(a),t.push(a)}return t.join(" ")}function Do(e,t,i){if(e[t]==null)throw new Y("effect:missing-parameter",`Missing parameter '${t}' in ${e.type} effect`,{effect:e});return i?e[t]+i:""+e[t]}function cde(e,t){if(e[t]==null)throw new Y("effect:missing-parameter",`Missing parameter '${t}' in ${e.type} effect`,{effect:e});const i=e[t];return`rgba(${i[0]||0}, ${i[1]||0}, ${i[2]||0}, ${i[3]/255||0})`}const pde={type:["average","color-burn","color-dodge","color","darken","destination-atop","destination-in","destination-out","destination-over","difference","exclusion","hard-light","hue","invert","lighten","lighter","luminosity","minus","multiply","normal","overlay","plus","reflect","saturation","screen","soft-light","source-atop","source-in","source-out","vivid-light","xor"],nonNullable:!0,json:{read:!1,write:!1,origins:{"web-map":{read:!0,write:{layerContainerTypes:Jt}},"portal-item":{read:!0,write:{layerContainerTypes:Jt}}}}},sE={read:{reader:u1},write:{allowNull:!0,writer:h1,layerContainerTypes:Jt}},dde={json:{read:!1,write:!1,origins:{"web-map":sE,"portal-item":sE}}},fde=e=>{let t=class extends e{constructor(){super(...arguments),this.blendMode="normal",this.effect=null}};return v([S(pde)],t.prototype,"blendMode",void 0),v([S(dde)],t.prototype,"effect",void 0),t=v([H("esri.layers.mixins.BlendLayer")],t),t},yde=e=>{let t=class extends e{constructor(){super(...arguments),this.customParameters=null}};return v([S({type:Object,json:{write:{overridePolicy:i=>({enabled:!!(i&&Object.keys(i).length>0)})}}})],t.prototype,"customParameters",void 0),t=v([H("esri.layers.mixins.CustomParametersMixin")],t),t},_F=96;function ySe(e,t){const i=e.extent,r=e.width,a=Ts(i==null?void 0:i.spatialReference);return i&&r?i.width/r*a*AO*_F:0}function mSe(e,t){return e/(Ts(t)*AO*_F)}function gSe(e,t,i){return mde(e,t)&&gde(e,i)}function mde(e,t){return t===0||Zr(e,t)||e<t}function gde(e,t){return t===0||Zr(e,t)||e>t}function vde(e,t){return Zr(e,t)?0:(e||Number.POSITIVE_INFINITY)>(t||Number.POSITIVE_INFINITY)?1:-1}const nE={write:{overridePolicy:(e,t,i)=>({enabled:!i||i.filterMode==="scale"})}};let dl=class extends at.ClonableMixin(he){constructor(t){super(t),this.id=U2(),this.maxScale=0,this.minScale=0,this.title="",this.where=null}};v([S({type:String,json:{write:!0}})],dl.prototype,"id",void 0),v([S({type:Number,json:nE})],dl.prototype,"maxScale",void 0),v([S({type:Number,json:nE})],dl.prototype,"minScale",void 0),v([S({type:String,json:{write:!0}})],dl.prototype,"title",void 0),v([S({type:String,json:{write:!0}})],dl.prototype,"where",void 0),dl=v([H("esri.layers.support.DisplayFilter")],dl);const SF=dl;function wde(e,t){return{...t,filterMode:e.mode}}function wSe(e,t){return xF(e,t).next().value??null}function bSe(e,t,i){const r=bde(e);if(r&&(sk(t,r[0])||n5(i,r[1])))return"";const a=Array.from(xF(e,t,i)),p=_de(a,t,i)?"1=1":a.map(y=>y.where||"1=1").reduce((y,g)=>wee(y,g),"");return p&&p!=="1=1"?p:""}function bde(e){if(TF(e)==="manual")return null;const t=[Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY];for(const{minScale:i,maxScale:r}of e.filters)t[0]=Math.max(t[0],c1(i)),t[1]=Math.min(t[1],Nv(r));return t}function*xF(e,t,i){if(TF(e)==="manual"){const r=e.filters.find(a=>a.id===e.activeFilterId);r&&(yield r)}else{typeof t=="object"&&(t=t.scale);for(const r of e.filters)Sde(r.minScale,r.maxScale,t,i)&&(yield r)}}function _de(e,t,i){var p,y;if(e.length===0)return!0;const r=c1((p=e.at(0))==null?void 0:p.minScale),a=Nv((y=e.at(-1))==null?void 0:y.maxScale);if(n5(r,t)||sk(a,i))return!0;for(let g=0;g<e.length-1;g++){const _=e[g],T=e[g+1];if(n5(c1(T.minScale),Nv(_.maxScale)))return!0}return!1}function Sde(e,t,i,r){return e=c1(e),i=c1(i),t=Nv(t),!(!Zr(i,e)&&(r??i)>e)&&!ZJ(t,i)&&(r===void 0||!Zr(r,e))}function TF(e){return"mode"in e?e.mode:e.filterMode}function c1(e){return e||Number.POSITIVE_INFINITY}function Nv(e){return e||0}let th=class extends at.ClonableMixin(he){constructor(t){super(t),this.activeFilterId=null,this.filters=new(xe.ofType(SF)),this.mode="manual"}writeFilters(t,i,r,a){const p=t.toArray();this.mode==="scale"&&p.sort((y,g)=>{const _=vde(g.minScale,y.minScale),T=y.maxScale-g.maxScale;return _===0?T:_}),i[r]=p.map(y=>y.toJSON(a))}write(t,i){return super.write(t,wde(this,i))}};v([S({type:String,json:{write:{overridePolicy:(e,t,i)=>({enabled:i.filterMode==="manual",isRequired:!0})}}})],th.prototype,"activeFilterId",void 0),v([S({type:xe.ofType(SF),nonNullable:!0,json:{write:!0}})],th.prototype,"filters",void 0),v([be("filters")],th.prototype,"writeFilters",null),v([S({type:["manual","scale"],nonNullable:!0,json:{name:"filterMode",write:!0}})],th.prototype,"mode",void 0),th=v([H("esri.layers.support.DisplayFilterInfo")],th);const xde=th,Tde=e=>{let t=class extends e{constructor(){super(...arguments),this.displayFilterEnabled=!0,this.displayFilterInfo=null}};return v([S(Mde)],t.prototype,"displayFilterEnabled",void 0),v([S($de)],t.prototype,"displayFilterInfo",void 0),t=v([H("esri.layers.mixins.DisplayFilteredLayer")],t),t},Mde={type:Boolean,json:{name:"layerDefinition.disableDisplayFilter",read:{reader:e=>!e},write:{layerContainerTypes:Jt,writer(e,t,i){Bi(i,!e,t)}},origins:{"web-scene":{write:!1,read:!1}}}},$de={type:xde,json:{name:"layerDefinition.displayFilterInfo",write:{enabled:!0,allowNull:!0,layerContainerTypes:Jt},origins:{"web-scene":{write:!1,read:!1}}}},Ede=Que(),MF=new Map,$F=new Map;async function SSe(e,t,i){if(!e||!i)return!1;if(!t)return!0;const r=new URL(e).host;let a=MF.get(r);if(!a){const p=e.replace(/\/FeatureServer/i,"/VersionManagementServer").replace(/\/\d*$/,"");a=(await kt(p,{responseType:"json",query:{f:"json"}})).data.defaultVersionName}return a===t}async function xSe(e,t,i=!1){var p,y,g;if(!e||!t)return!0;const r=e.replace(/\/FeatureServer/i,"/VersionManagementServer").replace(/\/\d*$/,""),a=(p=$F.get(r))==null?void 0:p.entries();if(a){for(const[_,T]of a)if(T.name===t){const I=!((y=T.stack)!=null&&y.hasForwardEdits());if(!I&&i){const[{deleteForwardEdits:A},{default:P}]=await Promise.all([fe(()=>import("./deleteForwardEdits-CF6b0yxF.js"),[]),fe(()=>import("./DeleteForwardEditsParameters-tczJUeTh.js"),[])]),N=await A(r,_,new P({sessionId:Ede,moment:T.moment}));return N.success&&((g=T.stack)==null||g.clearForwardEdits()),N.success}return I}}return!0}function Ide(e,t){var a;if(!e)return!1;const i=e.replace(/\/FeatureServer/i,"/VersionManagementServer").replace(/\/\d*$/,""),r=(a=$F.get(i))==null?void 0:a.entries();if(r){for(const[p,y]of r)if(y.name===t)return y.lockType==="edit"}return!1}const fx=new Ss.EventEmitter;function Ade(e){return fx.on("apply-edits",new WeakRef(e))}function Cde(e){return fx.on("update-moment",new WeakRef(e))}function TSe(e,t,i=null,r=!1){const a=_s();return r=t==null||r,fx.emit("apply-edits",{serviceUrl:e,layerId:t,gdbVersion:i,mayReceiveServiceEdits:r,result:a.promise}),a}const EF=Symbol();function MSe(e){return e!=null&&typeof e=="object"&&EF in e}function Zd(e){return e!=null&&typeof e=="object"&&"gdbVersion"in e}function Hb(e,t,i){const r=new URL(e).host,a=MF.get(r),p=y=>!y||y===a;return p(t)&&p(i)||t===i}const Ode=e=>{var t;let i=class extends e{constructor(...r){super(...r),this[t]=!0,this._applyEditsHandler=a=>{const{serviceUrl:p,layerId:y,gdbVersion:g,mayReceiveServiceEdits:_,result:T}=a,I=p===this.url,A=y!=null&&this.layerId!=null&&y===this.layerId,P=Zd(this),N=Zd(this)&&Hb(p,g,this.gdbVersion);if(!I||P&&!N||!A&&!_)return;const D=T.then(z=>{var ee;if(this.lastEditsEventDate=new Date,A&&(z.addedFeatures.length||z.updatedFeatures.length||z.deletedFeatures.length||z.addedAttachments.length||z.updatedAttachments.length||z.deletedAttachments.length))return this.emit("edits",te(z)),z;const q=(ee=z.editedFeatures)==null?void 0:ee.find(({layerId:X})=>X===this.layerId);if(q){const{adds:X,updates:ie,deletes:oe}=q.editedFeatures,ue={edits:null,addedAttachments:[],deletedAttachments:[],updatedAttachments:[],addedFeatures:X?X.map(({attributes:ge})=>({objectId:this.objectIdField&&ge[this.objectIdField],globalId:this.globalIdField&&ge[this.globalIdField]})):[],deletedFeatures:oe?oe.map(({attributes:ge})=>({objectId:this.objectIdField&&ge[this.objectIdField],globalId:this.globalIdField&&ge[this.globalIdField]})):[],updatedFeatures:ie?ie.map(({current:{attributes:ge}})=>({objectId:this.objectIdField&&ge[this.objectIdField],globalId:this.globalIdField&&ge[this.globalIdField]})):[],editedFeatures:te(z.editedFeatures),exceededTransferLimit:!1,historicMoment:te(z.historicMoment)};return this.emit("edits",ue),ue}const J={edits:null,addedAttachments:[],deletedAttachments:[],updatedAttachments:[],addedFeatures:[],deletedFeatures:[],updatedFeatures:[],editedFeatures:te(z.editedFeatures),exceededTransferLimit:!1,historicMoment:te(z.historicMoment)};return"historicMoment"in this&&this._shouldUpdateHistoricMoment(p,g,J.historicMoment)&&this.emit("edits",J),J}).then(z=>("historicMoment"in this&&this._shouldUpdateHistoricMoment(p,g,z.historicMoment)&&(this.historicMoment=z.historicMoment),z));this.emit("apply-edits",{result:D})},this._updateMomentHandler=a=>{const{serviceUrl:p,gdbVersion:y,moment:g}=a,_=p===this.url,T=Zd(this),I=Zd(this)&&Hb(p,y,this.gdbVersion),A=Zd(this)&&!Hb(p,this.gdbVersion,null);_&&T&&I&&A&&"historicMoment"in this&&this.historicMoment!==g&&(this.historicMoment=g)},this.when().then(()=>{this.addHandles(Ade(this._applyEditsHandler)),"historicMoment"in this&&this.addHandles(Cde(this._updateMomentHandler))},()=>{})}_shouldUpdateHistoricMoment(r,a,p){return"historicMoment"in this&&this.historicMoment!==p&&Ide(r,a)}};return t=EF,v([S()],i.prototype,"lastEditsEventDate",void 0),i=v([H("esri.layers.mixins.EditBusLayer")],i),i};var V_;const Wb=new rt({esriSpatialRelIntersects:"intersects",esriSpatialRelContains:"contains",esriSpatialRelCrosses:"crosses",esriSpatialRelDisjoint:"disjoint",esriSpatialRelEnvelopeIntersects:"envelope-intersects",esriSpatialRelIndexIntersects:"index-intersects",esriSpatialRelOverlaps:"overlaps",esriSpatialRelTouches:"touches",esriSpatialRelWithin:"within",esriSpatialRelRelation:"relation"}),Jb=new rt({esriSRUnit_Meter:"meters",esriSRUnit_Kilometer:"kilometers",esriSRUnit_Foot:"feet",esriSRUnit_StatuteMile:"miles",esriSRUnit_NauticalMile:"nautical-miles",esriSRUnit_USNauticalMile:"us-nautical-miles"});let ro=V_=class extends he{constructor(e){super(e),this.where=null,this.geometry=null,this.spatialRelationship="intersects",this.distance=void 0,this.objectIds=null,this.units=null,this.timeExtent=null}createQuery(e={}){const{where:t,geometry:i,spatialRelationship:r,timeExtent:a,objectIds:p,units:y,distance:g}=this;return new $a({geometry:te(i),objectIds:te(p),spatialRelationship:r,timeExtent:te(a),where:t,units:y,distance:g,...e})}clone(){const{where:e,geometry:t,spatialRelationship:i,timeExtent:r,objectIds:a,units:p,distance:y}=this;return new V_({geometry:te(t),objectIds:te(a),spatialRelationship:i,timeExtent:te(r),where:e,units:p,distance:y})}};v([S({type:String,json:{write:!0}})],ro.prototype,"where",void 0),v([S({types:P1,json:{write:!0}})],ro.prototype,"geometry",void 0),v([S({type:Wb.apiValues,json:{name:"spatialRel",read:{reader:Wb.read},write:{allowNull:!1,writer:Wb.write,overridePolicy(){return{enabled:this.geometry!=null}}}}})],ro.prototype,"spatialRelationship",void 0),v([S({type:Number,json:{write:{overridePolicy(e){return{enabled:e!=null&&this.geometry!=null}}}}})],ro.prototype,"distance",void 0),v([S({type:[Number],json:{write:!0}})],ro.prototype,"objectIds",void 0),v([S({type:Jb.apiValues,json:{read:Jb.read,write:{writer:Jb.write,overridePolicy(e){return{enabled:e!=null&&this.geometry!=null}}}}})],ro.prototype,"units",void 0),v([S({type:Ma,json:{write:!0}})],ro.prototype,"timeExtent",void 0),ro=V_=v([H("esri.layers.support.FeatureFilter")],ro);const Pde=ro;var G_;const oE={read:{reader:u1},write:{writer:h1,overridePolicy(){return{allowNull:this.excludedEffect!=null,isRequired:this.excludedEffect==null}}}},aE={read:{reader:u1},write:{writer:h1,overridePolicy(){return{allowNull:this.includedEffect!=null,isRequired:this.includedEffect==null}}}},lE={name:"showExcludedLabels",default:!0};let ih=G_=class extends he{constructor(e){super(e),this.filter=null,this.includedEffect=null,this.excludedEffect=null,this.excludedLabelsVisible=!1}write(e,t){var r,a;const i=super.write(e,t);if(t!=null&&t.origin){if(i.filter){const p=Object.keys(i.filter);if(p.length>1||p[0]!=="where")return(r=t.messages)==null||r.push(new Y("web-document-write:unsupported-feature-effect","Invalid feature effect 'filter'. A filter can only contain a 'where' property",{layer:t.layer,effect:this})),null}if("showExcludedLabels"in i)return(a=t.messages)==null||a.push(new Y("web-document-write:unsupported-feature-effect","Invalid value for property 'excludedLabelsVisible' which should always be 'true'",{layer:t.layer,effect:this})),null}return i}clone(){return new G_({filter:this.filter!=null?this.filter.clone():null,includedEffect:this.includedEffect,excludedEffect:this.excludedEffect,excludedLabelsVisible:this.excludedLabelsVisible})}};v([S({type:Pde,json:{write:{allowNull:!0,writer(e,t,i,r){const a=e==null?void 0:e.write({},r);a&&Object.keys(a).length!==0?Bi(i,a,t):Bi(i,null,t)}}}})],ih.prototype,"filter",void 0),v([S({json:{read:u1,write:{writer:h1,allowNull:!0},origins:{"web-map":oE,"portal-item":oE}}})],ih.prototype,"includedEffect",void 0),v([S({json:{read:u1,write:{writer:h1,allowNull:!0},origins:{"web-map":aE,"portal-item":aE}}})],ih.prototype,"excludedEffect",void 0),v([S({type:Boolean,json:{write:!0,name:"showExcludedLabels",origins:{"web-map":lE,"portal-item":lE}}})],ih.prototype,"excludedLabelsVisible",void 0),ih=G_=v([H("esri.layers.support.FeatureEffect")],ih);const kde=ih,uE={write:{allowNull:!0}},Rde={type:kde,json:{origins:{"web-map":uE,"portal-item":uE}}},Nde=e=>{let t=class extends e{constructor(){super(...arguments),this.featureEffect=null}};return v([S(Rde)],t.prototype,"featureEffect",void 0),t=v([H("esri.layers.mixins.FeatureEffectLayer")],t),t};var B_;let Jf=B_=class extends he{constructor(e){super(e)}async collectRequiredFields(e,t){return vr(e,t,this.expression)}clone(){return new B_({expression:this.expression,title:this.title})}equals(e){return this.expression===e.expression&&this.title===e.title}};v([S({type:String,json:{write:{isRequired:!0}}})],Jf.prototype,"expression",void 0),v([S({type:String,json:{write:!0}})],Jf.prototype,"title",void 0),Jf=B_=v([H("esri.symbols.support.FeatureExpressionInfo")],Jf);const hE=Jf,H2={unknown:1,inches:hi(1,"meters","inches"),feet:hi(1,"meters","feet"),"us-feet":hi(1,"meters","us-feet"),yards:hi(1,"meters","yards"),miles:hi(1,"meters","miles"),"nautical-miles":hi(1,"meters","nautical-miles"),millimeters:hi(1,"meters","millimeters"),centimeters:hi(1,"meters","centimeters"),decimeters:hi(1,"meters","decimeters"),meters:hi(1,"meters","meters"),kilometers:hi(1,"meters","kilometers"),"decimal-degrees":1/gq(1,"meters",Xt.radius)};function $Se(e){return!!e&&H2[e]!=null}function ESe(e){return 1/(H2[e]||1)}function Lde(){const e=Object.keys(H2);return NA(e,"decimal-degrees"),e.sort(),e}const Dde=Lde();var q_;const Gy=qi()({onTheGround:"on-the-ground",relativeToGround:"relative-to-ground",relativeToScene:"relative-to-scene",absoluteHeight:"absolute-height"}),cE=new rt({foot:"feet",kilometer:"kilometers",meter:"meters",mile:"miles","us-foot":"us-feet",yard:"yards"});let ea=q_=class extends he{constructor(e){super(e),this.featureExpressionInfo=void 0,this.offset=null}readFeatureExpressionInfo(e,t){return e??(t.featureExpression&&t.featureExpression.value===0?{expression:"0"}:void 0)}writeFeatureExpressionInfo(e,t,i,r){t[i]=e.write({},r),e.expression==="0"&&(t.featureExpression={value:0})}get mode(){const{offset:e,featureExpressionInfo:t}=this;return this._isOverridden("mode")?this._get("mode"):e!=null||t?"relative-to-ground":"on-the-ground"}set mode(e){this._override("mode",e)}set unit(e){this._set("unit",e)}write(e,t){return this.offset||this.mode||this.featureExpressionInfo||this.unit?super.write(e,t):null}clone(){return new q_({mode:this.mode,offset:this.offset,featureExpressionInfo:this.featureExpressionInfo?this.featureExpressionInfo.clone():void 0,unit:this.unit})}equals(e){return this.mode===e.mode&&this.offset===e.offset&&this.unit===e.unit&&OU(this.featureExpressionInfo,e.featureExpressionInfo)}};v([S({type:hE,json:{write:!0}})],ea.prototype,"featureExpressionInfo",void 0),v([me("featureExpressionInfo",["featureExpressionInfo","featureExpression"])],ea.prototype,"readFeatureExpressionInfo",null),v([be("featureExpressionInfo",{featureExpressionInfo:{type:hE},"featureExpression.value":{type:[0]}})],ea.prototype,"writeFeatureExpressionInfo",null),v([S({type:Gy.apiValues,nonNullable:!0,json:{type:Gy.jsonValues,read:Gy.read,write:{writer:Gy.write,isRequired:!0}}})],ea.prototype,"mode",null),v([S({type:Number,json:{write:!0}})],ea.prototype,"offset",void 0),v([S({type:Dde,json:{type:String,read:cE.read,write:cE.write}})],ea.prototype,"unit",null),ea=q_=v([H("esri.symbols.support.ElevationInfo")],ea);const jde=ea;let Yc=class extends he{constructor(t){super(t),this.description=null,this.label=null,this.type=null}};v([S({type:String,json:{write:!0}})],Yc.prototype,"description",void 0),v([S({type:String,json:{write:!0}})],Yc.prototype,"label",void 0),v([S()],Yc.prototype,"type",void 0),Yc=v([H("esri.tables.elements.AttributeTableElement")],Yc);const td=Yc;var H_;let Zf=H_=class extends td{constructor(e){super(e),this.displayType="auto",this.type="attachment"}clone(){return new H_({description:this.description,displayType:this.displayType,label:this.label})}};v([S({type:["auto"],json:{write:!0}})],Zf.prototype,"displayType",void 0),v([S({type:["attachment"],readOnly:!0,json:{read:!1,write:!0}})],Zf.prototype,"type",void 0),Zf=H_=v([H("esri.tables.elements.AttributeTableAttachmentElement")],Zf);const pE=Zf;var W_;let Kf=W_=class extends td{constructor(e){super(e),this.fieldName=null,this.type="field"}clone(){return new W_({description:this.description,fieldName:this.fieldName,label:this.label})}};v([S({type:String,json:{write:!0}})],Kf.prototype,"fieldName",void 0),v([S({type:String,json:{read:!1,write:!0}})],Kf.prototype,"type",void 0),Kf=W_=v([H("esri.tables.elements.AttributeTableFieldElement")],Kf);const dE=Kf;var J_;let Yf=J_=class extends td{constructor(e){super(e),this.relationshipId=null,this.type="relationship"}clone(){return new J_({description:this.description,label:this.label,relationshipId:this.relationshipId})}};v([S({type:Number,json:{write:!0}})],Yf.prototype,"relationshipId",void 0),v([S({type:["relationship"],json:{read:!1,write:!0}})],Yf.prototype,"type",void 0),Yf=J_=v([H("esri.tables.elements.AttributeTableRelationshipElement")],Yf);const fE=Yf;function IF(e){return{typesWithGroup:{base:td,key:"type",typeMap:{attachment:pE,field:dE,group:e,relationship:fE}},typesWithoutGroup:{base:td,key:"type",typeMap:{attachment:pE,field:dE,relationship:fE}}}}function AF(e,t,i=!0){if(!e)return null;const r=i?t.typesWithGroup.typeMap:t.typesWithoutGroup.typeMap;return e.filter(a=>r[a.type]).map(a=>r[a.type].fromJSON(a))}function CF(e,t,i=!0){if(!e)return null;const r=i?t.typesWithGroup.typeMap:t.typesWithoutGroup.typeMap;return e.filter(a=>r[a.type]).map(a=>a.toJSON())}function OF(e,t,i=!0){return e?e.map(r=>Nn(i?t.typesWithGroup:t.typesWithoutGroup,r)):null}var Z_;let ca=Z_=class extends td{constructor(e){super(e),this.elements=null,this.type="group"}castElements(e){return OF(e,Zb,!1)}readElements(e,t){return AF(t.attributeTableElements,Zb,!1)}writeElements(e,t){t.attributeTableElements=CF(e,Zb,!1)}clone(){return new Z_({description:this.description,elements:te(this.elements),label:this.label})}};v([S({json:{write:!0}})],ca.prototype,"elements",void 0),v([ct("elements")],ca.prototype,"castElements",null),v([me("elements",["attributeTableElements"])],ca.prototype,"readElements",null),v([be("elements")],ca.prototype,"writeElements",null),v([S({type:String,json:{read:!1,write:!0}})],ca.prototype,"type",void 0),ca=Z_=v([H("esri.tables.elements.AttributeTableGroupElement")],ca);const Zb=IF(ca),Fde=ca;var K_;const Kb=IF(Fde);let fl=K_=class extends he{constructor(e){super(e),this.elements=null,this.orderByFields=null}castElements(e){return OF(e,Kb)}readElements(e,t){return AF(t.attributeTableElements,Kb)}writeElements(e,t){t.attributeTableElements=CF(e,Kb)}clone(){return new K_({elements:te(this.elements),orderByFields:this.orderByFields})}};v([S({json:{write:!0}})],fl.prototype,"elements",void 0),v([ct("elements")],fl.prototype,"castElements",null),v([me("elements",["attributeTableElements"])],fl.prototype,"readElements",null),v([be("elements")],fl.prototype,"writeElements",null),v([S({type:[Object],json:{write:!0}})],fl.prototype,"orderByFields",void 0),fl=K_=v([H("esri.tables.AttributeTableTemplate")],fl);const zde=fl,Ude={type:Boolean,value:!0,json:{origins:{service:{read:!1,write:!1},"web-map":{read:!1,write:!1}},name:"screenSizePerspective",write:{enabled:!0,layerContainerTypes:Jt}}},W2={type:Boolean,value:!0,json:{name:"disablePopup",read:{reader:(e,t)=>!t.disablePopup},write:{enabled:!0,writer(e,t,i){t[i]=!e}}}},J2={type:Boolean,value:!0,nonNullable:!0,json:{name:"showLabels",write:{enabled:!0,layerContainerTypes:Jt}}},Vde={type:String,json:{origins:{"portal-item":{write:!1}},write:{isRequired:!0,ignoreOrigin:!0,writer:Oh}}},Gde={type:Boolean,value:!0,nonNullable:!0,json:{origins:{service:{read:{enabled:!1}}},name:"showLegend",write:{enabled:!0,layerContainerTypes:Jt}}},Bde={value:null,type:jde,json:{origins:{service:{name:"elevationInfo",write:!0}},name:"layerDefinition.elevationInfo",write:{enabled:!0,layerContainerTypes:Jt}}};function ASe(e){return{type:e,readOnly:!0,json:{origins:{service:{read:!0}},read:!1}}}const PF={write:{enabled:!0,layerContainerTypes:Jt},read:!0},Y_={type:Number,json:{origins:{"web-document":PF,"portal-item":{write:{layerContainerTypes:Jt}}}}},qde={...Y_,json:{...Y_.json,origins:{"web-document":{...PF,write:{enabled:!0,layerContainerTypes:Jt,target:{opacity:{type:Number},"layerDefinition.drawingInfo.transparency":{type:Number}}}}},read:{source:["layerDefinition.drawingInfo.transparency","drawingInfo.transparency"],reader:(e,t,i)=>{var r;return i&&i.origin!=="service"||!t.drawingInfo||t.drawingInfo.transparency===void 0?(r=t.layerDefinition)!=null&&r.drawingInfo&&t.layerDefinition.drawingInfo.transparency!==void 0?J0(t.layerDefinition.drawingInfo.transparency):void 0:J0(t.drawingInfo.transparency)}}}},CSe={type:Ct,readOnly:!0,json:{origins:{service:{read:{source:["fullExtent","spatialReference"],reader:(e,t)=>{const i=Ct.fromJSON(e);return t.spatialReference!=null&&typeof t.spatialReference=="object"&&(i.spatialReference=qe.fromJSON(t.spatialReference)),i}}}},read:!1}},Hde={type:String,json:{origins:{service:{read:!1},"portal-item":{read:!1}}}},Wde={type:Number,json:{origins:{service:{write:{enabled:!1}}},name:"layerDefinition.minScale",write:{layerContainerTypes:Jt}}},Jde={type:Number,json:{origins:{service:{write:{enabled:!1}}},name:"layerDefinition.maxScale",write:{layerContainerTypes:Jt}}},kF={json:{write:{ignoreOrigin:!0,layerContainerTypes:Jt},origins:{"web-map":{read:!1,write:!1}}}},Zde={type:zde,json:{name:"attributeTableInfo",write:!0,origins:{"web-scene":{read:!1,write:!1}}}};let ta=class extends at.ClonableMixin(he){constructor(t){super(t),this.creatorField=null,this.creationDateField=null,this.editorField=null,this.editDateField=null,this.realm=null,this.timeZone=null}};v([S()],ta.prototype,"creatorField",void 0),v([S()],ta.prototype,"creationDateField",void 0),v([S()],ta.prototype,"editorField",void 0),v([S()],ta.prototype,"editDateField",void 0),v([S()],ta.prototype,"realm",void 0),v([S(sv("dateFieldsTimeReference",!0))],ta.prototype,"timeZone",void 0),ta=v([H("esri.layers.support.EditFieldsInfo")],ta);const Kde=ta;let co=class extends at.ClonableMixin(he){constructor(t){super(t)}};v([S({constructOnly:!0,json:{write:!0}})],co.prototype,"name",void 0),v([S({constructOnly:!0,json:{write:!0}})],co.prototype,"fields",void 0),v([S({constructOnly:!0,json:{write:!0}})],co.prototype,"isAscending",void 0),v([S({constructOnly:!0,json:{write:!0}})],co.prototype,"indexType",void 0),v([S({constructOnly:!0,json:{write:!0}})],co.prototype,"isUnique",void 0),v([S({constructOnly:!0,json:{write:!0}})],co.prototype,"description",void 0),co=v([H("esri.layers.support.FeatureIndex")],co);async function Yde(e,t,i){t=t.clone(),e.capabilities.query.supportsMaxRecordCountFactor&&(t.maxRecordCountFactor=RF(e));const r=Xde(e),a=e.capabilities.query.supportsPagination;t.start=0,t.num=r;let p=null;for(;;){const y=await e.source.queryFeaturesJSON(t,i);if(p==null?p=y:p.features=p.features.concat(y.features),p.exceededTransferLimit=y.exceededTransferLimit,!a||!y.exceededTransferLimit)break;t.start+=r}return p}function Xde(e){return RF(e)*Qde(e)}function Qde(e){return e.capabilities.query.maxRecordCount||2e3}function RF(e){return e.capabilities.query.supportsMaxRecordCountFactor?$a.MAX_MAX_RECORD_COUNT_FACTOR:1}var X_;let Xf=X_=class extends he{constructor(e){super(e),this.minValue=0,this.maxValue=0}clone(){return new X_({minValue:this.minValue,maxValue:this.maxValue})}};v([S({type:Number,json:{write:!0}})],Xf.prototype,"minValue",void 0),v([S({type:Number,json:{write:!0}})],Xf.prototype,"maxValue",void 0),Xf=X_=v([H("esri.renderers.support.AuthoringInfoClassBreakInfo")],Xf);var Q_;let El=Q_=class extends he{constructor(e){super(e),this.field="",this.normalizationField="",this.label="",this.classBreakInfos=new Array}clone(){return new Q_({field:this.field,normalizationField:this.normalizationField,label:this.label,classBreakInfos:te(this.classBreakInfos)})}};v([S({type:String,json:{write:!0}})],El.prototype,"field",void 0),v([S({type:String,json:{write:!0}})],El.prototype,"normalizationField",void 0),v([S({type:String,json:{write:!0}})],El.prototype,"label",void 0),v([S({type:[Xf],json:{write:!0}})],El.prototype,"classBreakInfos",void 0),El=Q_=v([H("esri.renderers.support.AuthoringInfoFieldInfo")],El);var e4;let Xc=e4=class extends he{constructor(e){super(e),this.label=null,this.size=null,this.value=null}clone(){return new e4({label:this.label,value:this.value,size:this.size})}};v([S({type:String,json:{write:!0}})],Xc.prototype,"label",void 0),v([S({type:Number,json:{write:!0}})],Xc.prototype,"size",void 0),v([S({type:Number,json:{write:!0}})],Xc.prototype,"value",void 0),Xc=e4=v([H("esri.renderers.support.AuthoringInfoSizeStop")],Xc);const efe=Xc;var t4;const By=new rt({percentTotal:"percent-of-total",ratio:"ratio",percent:"percent"}),qy=new rt({sizeInfo:"size",colorInfo:"color",transparencyInfo:"opacity",rotationInfo:"rotation"}),yE={key:e=>typeof e=="number"?"number":"string",typeMap:{number:Number,string:String},base:null},mE=["high-to-low","above-and-below","centered-on","extremes"],gE=[...new Set(["high-to-low","above-and-below","centered-on","extremes","above","below","high-to-low","above-and-below","above","below","reference-size"])],vE=["seconds","minutes","hours","days","months","years"],tfe=["circle","diamond","hexagon-flat","hexagon-pointy","square"];let Di=t4=class extends he{constructor(e){super(e),this.endTime=null,this.field=null,this.maxSliderValue=null,this.minSliderValue=null,this.startTime=null,this.type=null,this.units=null}castEndTime(e){return typeof e=="string"||typeof e=="number"?e:null}get normalizationField(){return this.theme==="reference-size"?this._get("normalizationField"):null}set normalizationField(e){this._set("normalizationField",e)}get referenceSizeScale(){return this.theme==="reference-size"?this._get("referenceSizeScale"):null}set referenceSizeScale(e){this._set("referenceSizeScale",e)}get referenceSizeSymbolStyle(){return this.theme==="reference-size"?this._get("referenceSizeSymbolStyle"):null}set referenceSizeSymbolStyle(e){this._set("referenceSizeSymbolStyle",e)}castStartTime(e){return typeof e=="string"||typeof e=="number"?e:null}get sizeStops(){return this.theme==="reference-size"?this._get("sizeStops"):null}set sizeStops(e){this._set("sizeStops",e)}get style(){return this.type==="color"?this._get("style"):null}set style(e){this._set("style",e)}get theme(){return this.type==="color"||this.type==="size"?this._get("theme")||"high-to-low":null}set theme(e){this._set("theme",e)}clone(){return new t4({endTime:this.endTime,field:this.field,maxSliderValue:this.maxSliderValue,minSliderValue:this.minSliderValue,normalizationField:this.normalizationField,referenceSizeScale:this.referenceSizeScale,referenceSizeSymbolStyle:this.referenceSizeSymbolStyle,sizeStops:te(this.sizeStops),startTime:this.startTime,style:this.style,theme:this.theme,type:this.type,units:this.units})}};v([S({types:yE,json:{write:!0}})],Di.prototype,"endTime",void 0),v([ct("endTime")],Di.prototype,"castEndTime",null),v([S({type:String,json:{write:!0}})],Di.prototype,"field",void 0),v([S({type:Number,json:{write:!0}})],Di.prototype,"maxSliderValue",void 0),v([S({type:Number,json:{write:!0}})],Di.prototype,"minSliderValue",void 0),v([S({type:String,json:{origins:{"web-scene":{write:!1}},write:!0}})],Di.prototype,"normalizationField",null),v([S({type:Number,value:null,json:{origins:{"web-scene":{write:!1}},write:!0}})],Di.prototype,"referenceSizeScale",null),v([S({type:tfe,value:null,json:{origins:{"web-scene":{write:!1}},write:!0}})],Di.prototype,"referenceSizeSymbolStyle",null),v([S({types:yE,json:{write:!0}})],Di.prototype,"startTime",void 0),v([ct("startTime")],Di.prototype,"castStartTime",null),v([S({type:[efe],json:{origins:{"web-scene":{write:!1}},write:!0}})],Di.prototype,"sizeStops",null),v([S({type:By.apiValues,value:null,json:{type:By.jsonValues,read:By.read,write:By.write}})],Di.prototype,"style",null),v([S({type:gE,value:null,json:{type:gE,origins:{"web-scene":{type:mE,write:{writer:(e,t)=>{mE.includes(e)&&(t.theme=e)}}}},write:!0}})],Di.prototype,"theme",null),v([S({type:qy.apiValues,json:{type:qy.jsonValues,read:qy.read,write:qy.write}})],Di.prototype,"type",void 0),v([S({type:vE,json:{type:vE,write:!0}})],Di.prototype,"units",void 0),Di=t4=v([H("esri.renderers.support.AuthoringInfoVisualVariable")],Di);const ife=Di;let pg=class extends he{constructor(t){super(t),this.type=null}};v([S({readOnly:!0,json:{read:!1,write:!0}})],pg.prototype,"type",void 0),pg=v([H("esri.rest.support.ColorRamp")],pg);const yx=pg;var i4;let rh=i4=class extends yx{constructor(e){super(e),this.algorithm=null,this.fromColor=null,this.toColor=null,this.type="algorithmic"}clone(){return new i4({fromColor:te(this.fromColor),toColor:te(this.toColor),algorithm:this.algorithm})}};v([Re({esriCIELabAlgorithm:"cie-lab",esriHSVAlgorithm:"hsv",esriLabLChAlgorithm:"lab-lch"})],rh.prototype,"algorithm",void 0),v([S({type:De,json:{type:[ft],write:!0}})],rh.prototype,"fromColor",void 0),v([S({type:De,json:{type:[ft],write:!0}})],rh.prototype,"toColor",void 0),v([S({type:["algorithmic"]})],rh.prototype,"type",void 0),rh=i4=v([H("esri.rest.support.AlgorithmicColorRamp")],rh);const mx=rh;var r4;let Qf=r4=class extends yx{constructor(e){super(e),this.colorRamps=null,this.type="multipart"}clone(){return new r4({colorRamps:te(this.colorRamps)})}};v([S({type:[mx],json:{write:!0}})],Qf.prototype,"colorRamps",void 0),v([S({type:["multipart"]})],Qf.prototype,"type",void 0),Qf=r4=v([H("esri.rest.support.MultipartColorRamp")],Qf);const NF=Qf,rfe={key:"type",base:yx,typeMap:{algorithmic:mx,multipart:NF}};function sfe(e){return e!=null&&e.type?e.type==="algorithmic"?mx.fromJSON(e):e.type==="multipart"?NF.fromJSON(e):null:null}var s4;const xu=new rt({esriClassifyDefinedInterval:"defined-interval",esriClassifyEqualInterval:"equal-interval",esriClassifyManual:"manual",esriClassifyNaturalBreaks:"natural-breaks",esriClassifyQuantile:"quantile",esriClassifyStandardDeviation:"standard-deviation"}),Hy=new rt({classedSize:"class-breaks-size",classedColor:"class-breaks-color",univariateColorSize:"univariate-color-size",relationship:"relationship",predominance:"predominance",dotDensity:"dot-density",flow:"flow"}),wE=new rt({classedSize:"class-breaks-size",classedColor:"class-breaks-color",univariateColorSize:"univariate-color-size",relationship:"relationship",predominance:"predominance",dotDensity:"dot-density"}),bE=["inches","feet","yards","miles","nautical-miles","millimeters","centimeters","decimeters","meters","kilometers"],nfe=["high-to-low","above-and-below","above","below"],ofe=["flow-line","wave-front"],afe=["caret","circle-caret","arrow","circle-arrow","plus-minus","circle-plus-minus","square","circle","triangle","happy-sad","thumb","custom"];let ei=s4=class extends he{constructor(e){super(e),this.colorRamp=null,this.fadeRatio=null,this.isAutoGenerated=!1,this.lengthUnit=null,this.maxSliderValue=null,this.minSliderValue=null,this.visualVariables=null}get classificationMethod(){const e=this._get("classificationMethod"),t=this.type;return t&&t!=="relationship"?t==="class-breaks-size"||t==="class-breaks-color"?e||"manual":null:e}set classificationMethod(e){this._set("classificationMethod",e)}readColorRamp(e){return e?sfe(e):void 0}get fields(){return this.type&&this.type!=="predominance"?null:this._get("fields")}set fields(e){this._set("fields",e)}get field1(){return this.type&&this.type!=="relationship"?null:this._get("field1")}set field1(e){this._set("field1",e)}get field2(){return this.type&&this.type!=="relationship"?null:this._get("field2")}set field2(e){this._set("field2",e)}get flowTheme(){return this.type==="flow"?this._get("flowTheme"):null}set flowTheme(e){this._set("flowTheme",e)}get focus(){return this.type&&this.type!=="relationship"?null:this._get("focus")}set focus(e){this._set("focus",e)}get numClasses(){return this.type&&this.type!=="relationship"?null:this._get("numClasses")}set numClasses(e){this._set("numClasses",e)}get statistics(){return this.type==="univariate-color-size"&&this.univariateTheme==="above-and-below"?this._get("statistics"):null}set statistics(e){this._set("statistics",e)}get standardDeviationInterval(){const e=this.type;return e&&e!=="relationship"&&e!=="class-breaks-size"&&e!=="class-breaks-color"||this.classificationMethod&&this.classificationMethod!=="standard-deviation"?null:this._get("standardDeviationInterval")}set standardDeviationInterval(e){this._set("standardDeviationInterval",e)}get type(){return this._get("type")}set type(e){let t=e;e==="classed-size"?t="class-breaks-size":e==="classed-color"&&(t="class-breaks-color"),this._set("type",t)}get univariateSymbolStyle(){return this.type==="univariate-color-size"&&this.univariateTheme==="above-and-below"?this._get("univariateSymbolStyle"):null}set univariateSymbolStyle(e){this._set("univariateSymbolStyle",e)}get univariateTheme(){return this.type==="univariate-color-size"?this._get("univariateTheme"):null}set univariateTheme(e){this._set("univariateTheme",e)}clone(){var e;return new s4({classificationMethod:this.classificationMethod,colorRamp:te(this.colorRamp),fadeRatio:te(this.fadeRatio),fields:(e=this.fields)==null?void 0:e.slice(),field1:te(this.field1),field2:te(this.field2),isAutoGenerated:this.isAutoGenerated,focus:this.focus,numClasses:this.numClasses,maxSliderValue:this.maxSliderValue,minSliderValue:this.minSliderValue,lengthUnit:this.lengthUnit,statistics:this.statistics,standardDeviationInterval:this.standardDeviationInterval,type:this.type,visualVariables:this.visualVariables&&this.visualVariables.map(t=>t.clone()),univariateSymbolStyle:this.univariateSymbolStyle,univariateTheme:this.univariateTheme,flowTheme:this.flowTheme})}};v([S({type:xu.apiValues,value:null,json:{type:xu.jsonValues,read:xu.read,write:xu.write,origins:{"web-document":{default:"manual",type:xu.jsonValues,read:xu.read,write:xu.write}}}})],ei.prototype,"classificationMethod",null),v([S({types:rfe,json:{write:!0}})],ei.prototype,"colorRamp",void 0),v([me("colorRamp")],ei.prototype,"readColorRamp",null),v([S({json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],ei.prototype,"fadeRatio",void 0),v([S({type:[String],value:null,json:{write:!0}})],ei.prototype,"fields",null),v([S({type:El,value:null,json:{write:!0}})],ei.prototype,"field1",null),v([S({type:El,value:null,json:{write:!0}})],ei.prototype,"field2",null),v([S({type:ofe,value:null,json:{write:!0,origins:{"web-scene":{write:!1}}}})],ei.prototype,"flowTheme",null),v([S({type:["HH","HL","LH","LL"],value:null,json:{write:!0}})],ei.prototype,"focus",null),v([S({type:Boolean,json:{write:!0,default:!1,origins:{"web-scene":{write:!1}}}})],ei.prototype,"isAutoGenerated",void 0),v([S({type:Number,value:null,json:{type:ft,write:!0}})],ei.prototype,"numClasses",null),v([S({type:bE,json:{type:bE,read:!1,write:!1,origins:{"web-scene":{read:!0,write:!0}}}})],ei.prototype,"lengthUnit",void 0),v([S({type:Number,json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],ei.prototype,"maxSliderValue",void 0),v([S({type:Number,json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],ei.prototype,"minSliderValue",void 0),v([S({type:Object,value:null,json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],ei.prototype,"statistics",null),v([S({type:[.25,.33,.5,1],value:null,json:{type:[.25,.33,.5,1],write:!0}})],ei.prototype,"standardDeviationInterval",null),v([S({type:Hy.apiValues,value:null,json:{type:Hy.jsonValues,read:Hy.read,write:Hy.write,origins:{"web-scene":{type:wE.jsonValues,write:{writer:wE.write,overridePolicy:e=>({enabled:e!=="flow"})}}}}})],ei.prototype,"type",null),v([S({type:[ife],json:{write:!0}})],ei.prototype,"visualVariables",void 0),v([S({type:afe,value:null,json:{write:!0,origins:{"web-scene":{write:!1}}}})],ei.prototype,"univariateSymbolStyle",null),v([S({type:nfe,value:null,json:{write:!0,origins:{"web-scene":{write:!1}}}})],ei.prototype,"univariateTheme",null),ei=s4=v([H("esri.renderers.support.AuthoringInfo")],ei);const gx=ei,Yb=new rt({simple:"simple",uniqueValue:"unique-value",classBreaks:"class-breaks",heatmap:"heatmap",dotDensity:"dot-density",dictionary:"dictionary",pieChart:"pie-chart"},{ignoreUnknown:!0});let e0=class extends he{constructor(t){super(t),this.authoringInfo=null,this.type=null}async getRequiredFields(t){if(!this.collectRequiredFields)return[];const i=new Set;return await this.collectRequiredFields(i,t),Array.from(i).sort()}getSymbol(t,i){}async getSymbolAsync(t,i){}get symbols(){return[]}get arcadeRequired(){return!1}getAttributeHash(){return JSON.stringify(this)}getMeshHash(){return JSON.stringify(this)}};v([S({type:gx,json:{write:!0}})],e0.prototype,"authoringInfo",void 0),v([S({type:Yb.apiValues,readOnly:!0,json:{type:Yb.jsonValues,read:!1,write:{writer:Yb.write,ignoreOrigin:!0,isRequired:!0}}})],e0.prototype,"type",void 0),e0=v([H("esri.renderers.Renderer")],e0);const Ra=e0;let t0=class extends at.ClonableMixin(he){constructor(){super(...arguments),this.showLegend=null,this.title=null}};v([S({type:Boolean,json:{write:!0}})],t0.prototype,"showLegend",void 0),v([S({type:String,json:{write:!0}})],t0.prototype,"title",void 0),t0=v([H("esri.renderers.visualVariables.support.VisualVariableLegendOptions")],t0);const LF=t0,Xb=new rt({colorInfo:"color",transparencyInfo:"opacity",rotationInfo:"rotation",sizeInfo:"size"});let Tn=class extends he{constructor(t){super(t),this.index=null,this.type=null,this.field=null,this.valueExpression=null,this.valueExpressionTitle=null,this.legendOptions=null}castField(t){return t==null?t:typeof t=="function"?(ye.getLogger(this).error(".field: field must be a string value"),null):S1(t)}get arcadeRequired(){return!!this.valueExpression}clone(){}getAttributeHash(){return`${this.type}-${this.field}-${this.valueExpression}`}};v([S()],Tn.prototype,"index",void 0),v([S({type:Xb.apiValues,readOnly:!0,json:{read:Xb.read,write:{writer:Xb.write,isRequired:!0}}})],Tn.prototype,"type",void 0),v([S({type:String,json:{write:!0}})],Tn.prototype,"field",void 0),v([ct("field")],Tn.prototype,"castField",null),v([S({type:String,json:{write:!0}})],Tn.prototype,"valueExpression",void 0),v([S({type:String,json:{write:!0}})],Tn.prototype,"valueExpressionTitle",void 0),v([S({readOnly:!0})],Tn.prototype,"arcadeRequired",null),v([S({type:LF,json:{write:!0}})],Tn.prototype,"legendOptions",void 0),Tn=v([H("esri.renderers.visualVariables.VisualVariable")],Tn);const Sd=Tn;var n4;let sh=n4=class extends he{constructor(e){super(e),this.color=null,this.label=null,this.value=null}writeValue(e,t,i){t[i]=e??0}clone(){return new n4({color:this.color&&this.color.clone(),label:this.label,value:this.value})}};v([S({type:De,json:{type:[ft],write:{isRequired:!0}}})],sh.prototype,"color",void 0),v([S({type:String,json:{write:!0}})],sh.prototype,"label",void 0),v([S({type:Number,json:{write:{writerEnsuresNonNull:!0}}})],sh.prototype,"value",void 0),v([be("value")],sh.prototype,"writeValue",null),sh=n4=v([H("esri.renderers.visualVariables.support.ColorStop")],sh);const lfe=sh;var o4;let nh=o4=class extends Sd{constructor(e){super(e),this.type="color",this.normalizationField=null}get cache(){return{ipData:this._interpolateData(),hasExpression:!!this.valueExpression,compiledFunc:null}}set stops(e){e&&Array.isArray(e)&&(e=e.filter(t=>!!t)).sort((t,i)=>t.value-i.value),this._set("stops",e)}clone(){var e;return new o4({field:this.field,normalizationField:this.normalizationField,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,stops:this.stops&&this.stops.map(t=>t.clone()),legendOptions:(e=this.legendOptions)==null?void 0:e.clone()})}getAttributeHash(){return`${super.getAttributeHash()}-${this.normalizationField}`}_interpolateData(){return this.stops&&this.stops.map(e=>e.value||0)}};v([S({readOnly:!0})],nh.prototype,"cache",null),v([S({type:["color"],json:{type:["colorInfo"]}})],nh.prototype,"type",void 0),v([S({type:String,json:{write:!0}})],nh.prototype,"normalizationField",void 0),v([S({type:[lfe],json:{write:!0}})],nh.prototype,"stops",null),nh=o4=v([H("esri.renderers.visualVariables.ColorVariable")],nh);const DF=nh;var a4;let yl=a4=class extends he{constructor(e){super(e),this.label=null,this.opacity=null,this.value=null}readOpacity(e,t){return J0(t.transparency)}writeOpacity(e,t,i){t[i]=f2(e)}clone(){return new a4({label:this.label,opacity:this.opacity,value:this.value})}};v([S({type:String,json:{write:!0}})],yl.prototype,"label",void 0),v([S({type:Number,json:{type:ft,write:{target:"transparency",isRequired:!0}}})],yl.prototype,"opacity",void 0),v([me("opacity",["transparency"])],yl.prototype,"readOpacity",null),v([be("opacity")],yl.prototype,"writeOpacity",null),v([S({type:Number,json:{write:{isRequired:!0}}})],yl.prototype,"value",void 0),yl=a4=v([H("esri.renderers.visualVariables.support.OpacityStop")],yl);const ufe=yl;var l4;let oh=l4=class extends Sd{constructor(e){super(e),this.type="opacity",this.normalizationField=null}get cache(){return{ipData:this._interpolateData(),hasExpression:!!this.valueExpression,compiledFunc:null}}set stops(e){e&&Array.isArray(e)&&(e=e.filter(t=>!!t)).sort((t,i)=>t.value-i.value),this._set("stops",e)}clone(){var e;return new l4({field:this.field,normalizationField:this.normalizationField,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,stops:this.stops&&this.stops.map(t=>t.clone()),legendOptions:(e=this.legendOptions)==null?void 0:e.clone()})}getAttributeHash(){return`${super.getAttributeHash()}-${this.normalizationField}`}_interpolateData(){return this.stops&&this.stops.map(e=>e.value||0)}};v([S({readOnly:!0})],oh.prototype,"cache",null),v([S({type:["opacity"],json:{type:["transparencyInfo"]}})],oh.prototype,"type",void 0),v([S({type:String,json:{write:!0}})],oh.prototype,"normalizationField",void 0),v([S({type:[ufe],json:{write:!0}})],oh.prototype,"stops",null),oh=l4=v([H("esri.renderers.visualVariables.OpacityVariable")],oh);const vx=oh;var u4;let ah=u4=class extends Sd{constructor(e){super(e),this.axis=null,this.type="rotation",this.rotationType="geographic"}get cache(){return{hasExpression:!!this.valueExpression,compiledFunc:null}}clone(){var e;return new u4({axis:this.axis,rotationType:this.rotationType,field:this.field,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,legendOptions:(e=this.legendOptions)==null?void 0:e.clone()})}};v([S({readOnly:!0})],ah.prototype,"cache",null),v([S({type:["heading","tilt","roll"],json:{origins:{"web-scene":{default:"heading",write:!0}}}})],ah.prototype,"axis",void 0),v([S({type:["rotation"],json:{type:["rotationInfo"]}})],ah.prototype,"type",void 0),v([S({type:["geographic","arithmetic"],json:{write:!0,origins:{"web-document":{write:!0,default:"geographic"}}}})],ah.prototype,"rotationType",void 0),ah=u4=v([H("esri.renderers.visualVariables.RotationVariable")],ah);const jF=ah;function hfe(e){return ht(e)}var h4;let ml=h4=class extends he{constructor(e){super(e),this.label=null,this.size=null,this.value=null,this.useMinValue=null,this.useMaxValue=null}clone(){return new h4({label:this.label,size:this.size,value:this.value,useMaxValue:this.useMaxValue,useMinValue:this.useMinValue})}};v([S({type:String,json:{write:!0}})],ml.prototype,"label",void 0),v([S({type:Number,cast:ht,json:{write:{isRequired:!0}}})],ml.prototype,"size",void 0),v([S({type:Number,json:{write:{isRequired:!0}}})],ml.prototype,"value",void 0),v([S({type:Boolean,json:{write:!1}})],ml.prototype,"useMinValue",void 0),v([S({type:Boolean,json:{write:!1}})],ml.prototype,"useMaxValue",void 0),ml=h4=v([H("esri.renderers.visualVariables.support.SizeStop")],ml);const dg=ml;let fg=class extends LF{constructor(){super(...arguments),this.customValues=null}};v([S({type:[Number],json:{write:!0}})],fg.prototype,"customValues",void 0),fg=v([H("esri.renderers.visualVariables.support.SizeVariableLegendOptions")],fg);const cfe=fg;var ba,Ai;function fp(e){return e&&e.declaredClass==="esri.renderers.visualVariables.SizeVariable"}function p1(e){return e!=null&&!isNaN(e)&&isFinite(e)}function FF(e){return e.valueExpression?ba.Expression:e.field&&typeof e.field=="string"?ba.Field:ba.Unknown}function pfe(e,t){const i=t||FF(e),r=e.valueUnit||"unknown";return i===ba.Unknown?Ai.Constant:e.stops?Ai.Stops:e.minSize!=null&&e.maxSize!=null&&e.minDataValue!=null&&e.maxDataValue!=null?Ai.ClampedLinear:r==="unknown"?e.minSize!=null&&e.minDataValue!=null?e.minSize&&e.minDataValue?Ai.Proportional:Ai.Additive:Ai.Identity:Ai.RealWorldSize}(function(e){e.Unknown="unknown",e.Expression="expression",e.Field="field"})(ba||(ba={})),function(e){e.Unknown="unknown",e.Stops="stops",e.ClampedLinear="clamped-linear",e.Proportional="proportional",e.Additive="additive",e.Constant="constant",e.Identity="identity",e.RealWorldSize="real-world-size"}(Ai||(Ai={}));const zF=()=>ye.getLogger("esri.renderers.visualVariables.support.visualVariableUtils"),Z2=e=>zF().warn(`The visualVariable should be an instance of esri.renderers.visualVariables.${e}`),K2=()=>zF().error("Use of arcade expressions requires an arcade context"),_E=new Mo,yg=Math.PI,UF=/^\s*(return\s+)?\$view\.scale\s*(;)?\s*$/i;function VF(e,t,i){const r="visualVariables"in e&&e.visualVariables?e.visualVariables.find(D=>D.type==="color"):e;if(!r)return;if(r.declaredClass!=="esri.renderers.visualVariables.ColorVariable")return void Z2("ColorVariable");const a=typeof t=="number",p=a?null:t,y=p==null?void 0:p.attributes;let g=a?t:null;const _=r.field,{ipData:T,hasExpression:I}=r.cache;let A=r.cache.compiledFunc;if(!_&&!I){const D=r.stops;return D&&D[0]&&D[0].color}if(typeof g!="number")if(I){if((i==null?void 0:i.arcade)==null)return void K2();const D={viewingMode:i.viewingMode,scale:i.scale,spatialReference:i.spatialReference},z=i.arcade.arcadeUtils,q=z.getViewInfo(D),J=z.createExecContext(p,q,i.timeZone);if(!A){const ee=z.createSyntaxTree(r.valueExpression);A=z.createFunction(ee),r.cache.compiledFunc=A}g=z.executeFunction(A,J)}else y&&(g=y[_]);const P=r.normalizationField,N=y!=null&&P!=null?parseFloat(y[P]):void 0;if(g!=null&&(!P||a||!isNaN(N)&&N!==0)){isNaN(N)||a||(g/=N);const D=wx(g,T);if(D){const z=D[0],q=D[1],J=z===q?r.stops[z].color:De.blendColors(r.stops[z].color,r.stops[q].color,D[2],i!=null?i.color:void 0);return new De(J)}}}function GF(e,t,i){const r="visualVariables"in e&&e.visualVariables?e.visualVariables.find(D=>D.type==="opacity"):e;if(!r)return;if(r.declaredClass!=="esri.renderers.visualVariables.OpacityVariable")return void Z2("OpacityVariable");const a=typeof t=="number",p=a?null:t,y=p==null?void 0:p.attributes;let g=a?t:null;const _=r.field,{ipData:T,hasExpression:I}=r.cache;let A=r.cache.compiledFunc;if(!_&&!I){const D=r.stops;return D&&D[0]&&D[0].opacity}if(typeof g!="number")if(I){if((i==null?void 0:i.arcade)==null)return void K2();const D={viewingMode:i.viewingMode,scale:i.scale,spatialReference:i.spatialReference},z=i.arcade.arcadeUtils,q=z.getViewInfo(D),J=z.createExecContext(p,q,i.timeZone);if(!A){const ee=z.createSyntaxTree(r.valueExpression);A=z.createFunction(ee),r.cache.compiledFunc=A}g=z.executeFunction(A,J)}else y&&(g=y[_]);const P=r.normalizationField,N=y!=null&&P!=null?parseFloat(y[P]):void 0;if(g!=null&&(!P||a||!isNaN(N)&&N!==0)){isNaN(N)||a||(g/=N);const D=wx(g,T);if(D){const z=D[0],q=D[1];if(z===q)return r.stops[z].opacity;{const J=r.stops[z].opacity;return J+(r.stops[q].opacity-J)*D[2]}}}}function BF(e,t,i){const r="visualVariables"in e&&e.visualVariables?e.visualVariables.find(N=>N.type==="rotation"):e;if(!r)return;if(r.declaredClass!=="esri.renderers.visualVariables.RotationVariable")return void Z2("RotationVariable");const a=r.axis||"heading",p=a==="heading"&&r.rotationType==="arithmetic"?90:0,y=a==="heading"&&r.rotationType==="arithmetic"?-1:1,g=typeof t=="number"?null:t,_=g==null?void 0:g.attributes,T=r.field,{hasExpression:I}=r.cache;let A=r.cache.compiledFunc,P=0;if(!T&&!I)return P;if(I){if((i==null?void 0:i.arcade)==null)return void K2();const N={viewingMode:i.viewingMode,scale:i.scale,spatialReference:i.spatialReference},D=i.arcade.arcadeUtils,z=D.getViewInfo(N),q=D.createExecContext(g,z,i.timeZone);if(!A){const J=D.createSyntaxTree(r.valueExpression);A=D.createFunction(J),r.cache.compiledFunc=A}P=D.executeFunction(A,q)}else _&&(P=_[T]||0);return P=typeof P!="number"||isNaN(P)?null:p+y*P,P}function dfe(e,t,i){const r=typeof t=="number",a=r?null:t,p=a==null?void 0:a.attributes;let y=r?t:null;const{isScaleDriven:g}=e.cache;let _=e.cache.compiledFunc;if(g){const I=i!=null?i.scale:void 0,A=i!=null?i.view:void 0;y=I==null||A==="3d"?ffe(e):I}else if(!r)switch(e.inputValueType){case ba.Expression:{if((i==null?void 0:i.arcade)==null)return void K2();const I={viewingMode:i.viewingMode,scale:i.scale,spatialReference:i.spatialReference},A=i.arcade.arcadeUtils,P=A.getViewInfo(I),N=A.createExecContext(a,P,i.timeZone);if(!_){const D=A.createSyntaxTree(e.valueExpression);_=A.createFunction(D),e.cache.compiledFunc=_}y=A.executeFunction(_,N);break}case ba.Field:p&&(y=p[e.field]);break;case ba.Unknown:y=null}if(!p1(y))return null;if(r||!e.normalizationField)return y;const T=p?parseFloat(p[e.normalizationField]):null;return p1(T)&&T!==0?y/T:null}function ffe(e){let t=null,i=null;const r=e.stops;return r?(t=r[0].value,i=r[r.length-1].value):(t=e.minDataValue||0,i=e.maxDataValue||0),(t+i)/2}function Y2(e,t,i){const r="visualVariables"in e&&e.visualVariables?e.visualVariables.find(p=>p.type==="size"):e;if(!r)return;if(r.declaredClass!=="esri.renderers.visualVariables.SizeVariable")return void Z2("SizeVariable");const a=HF(dfe(r,t,i),r,t,i,r.cache.ipData);return a==null||isNaN(a)?0:a}function Yr(e,t,i){return e==null?null:fp(e)?Y2(e,t,i):p1(e)?e:null}function qF(e,t,i){return p1(i)&&e>i?i:p1(t)&&e<t?t:e}function yfe(e,t,i,r){return e+((Yr(t.minSize,i,r)||t.minDataValue)??0)}function mfe(e,t,i){const r=e.stops;let a=(r==null?void 0:r.length)&&r[0].size;return a==null&&(a=e.minSize),Yr(a,t,i)}function gfe(e,t,i,r){const a=(e-t.minDataValue)/(t.maxDataValue-t.minDataValue),p=Yr(t.minSize,i,r),y=Yr(t.maxSize,i,r),g=r!=null?r.shape:void 0;if(e<=t.minDataValue)return p;if(e>=t.maxDataValue)return y;if(p==null||y==null)return null;if(t.scaleBy==="area"&&g){const _=g==="circle",T=_?yg*(p/2)**2:p*p,I=T+a*((_?yg*(y/2)**2:y*y)-T);return _?2*Math.sqrt(I/yg):Math.sqrt(I)}return p+a*(y-p)}function vfe(e,t,i,r){const a=r!=null?r.shape:void 0,p=e/t.minDataValue,y=Yr(t.minSize,i,r),g=Yr(t.maxSize,i,r);let _=null;return _=a==="circle"?2*Math.sqrt(p*(y/2)**2):a==="square"||a==="diamond"||a==="image"?Math.sqrt(p*y**2):p*y,qF(_,y,g)}function wfe(e,t,i,r,a){var _,T,I;const[p,y,g]=wx(e,a);if(p===y)return Yr((_=t.stops)==null?void 0:_[p].size,i,r);{const A=Yr((T=t.stops)==null?void 0:T[p].size,i,r);return A+(Yr((I=t.stops)==null?void 0:I[y].size,i,r)-A)*g}}function bfe(e,t,i,r){const a=((r==null?void 0:r.resolution)??1)*H2[t.valueUnit],p=Yr(t.minSize,i,r),y=Yr(t.maxSize,i,r),{valueRepresentation:g}=t;let _=null;return _=g==="area"?2*Math.sqrt(e/yg)/a:g==="radius"||g==="distance"?2*e/a:e/a,qF(_,p,y)}function HF(e,t,i,r,a){switch(t.transformationType){case Ai.Additive:return yfe(e,t,i,r);case Ai.Constant:return mfe(t,i,r);case Ai.ClampedLinear:return gfe(e,t,i,r);case Ai.Proportional:return vfe(e,t,i,r);case Ai.Stops:return wfe(e,t,i,r,a);case Ai.RealWorldSize:return bfe(e,t,i,r);case Ai.Identity:return e;case Ai.Unknown:return null}}function _fe(e,t,i){const{isScaleDriven:r}=e.cache;if(!(r&&i==="3d"||t))return null;const a={scale:t,view:i};let p=Yr(e.minSize,_E,a),y=Yr(e.maxSize,_E,a);if(p!=null||y!=null){if(p>y){const g=y;y=p,p=g}return{minSize:p,maxSize:y}}}function Sfe(e,t,i){if(!e.visualVariables)return;const r=[],a=[],p=[],y=[],g=[];for(const _ of e.visualVariables)switch(_.type){case"color":a.push(_);break;case"opacity":p.push(_);break;case"rotation":g.push(_);break;case"size":y.push(_)}return a.forEach(_=>{const T=VF(_,t,i);r.push({variable:_,value:T})}),p.forEach(_=>{const T=GF(_,t,i);r.push({variable:_,value:T})}),g.forEach(_=>{const T=BF(_,t,i);r.push({variable:_,value:T})}),y.forEach(_=>{const T=Y2(_,t,i);r.push({variable:_,value:T})}),r.filter(_=>_.value!=null)}function wx(e,t){if(!t)return;let i=0,r=t.length-1;return t.some((a,p)=>e<a?(r=p,!0):(i=p,!1)),[i,r,(e-t[i])/(t[r]-t[i])]}function xfe(e,t,i){const r=["proportional","proportional","proportional"];for(const a of e){const p=a.useSymbolValue?"symbol-value":Y2(a,t,i);switch(a.axis){case"width":r[0]=p;break;case"depth":r[1]=p;break;case"height":r[2]=p;break;case"width-and-depth":r[0]=p,r[1]=p;break;case"all":case void 0:case null:r[0]=p,r[1]=p,r[2]=p;break;default:a.axis}}return r}const jSe=Object.freeze(Object.defineProperty({__proto__:null,getAllSizes:xfe,getColor:VF,getOpacity:GF,getRotationAngle:BF,getSize:Y2,getSizeForValue:HF,getSizeFromNumberOrVariable:Yr,getSizeRangeAtScale:_fe,getVisualVariableValues:Sfe,viewScaleRE:UF},Symbol.toStringTag,{value:"Module"}));var c4;const Wy=new rt({width:"width",depth:"depth",height:"height",widthAndDepth:"width-and-depth",all:"all"}),p4=new rt({unknown:"unknown",inch:"inches",foot:"feet",yard:"yards",mile:"miles","nautical-mile":"nautical-miles",millimeter:"millimeters",centimeter:"centimeters",decimeter:"decimeters",meter:"meters",kilometer:"kilometers"});function SE(e){if(e!=null)return typeof e=="string"||typeof e=="number"?hfe(e):e.type==="size"?fp(e)?e:(delete(e={...e}).type,new St(e)):void 0}function xE(e,t,i){if(typeof e!="object")return e;const r=new St;return r.read(e,i),r}let St=c4=class extends Sd{constructor(e){super(e),this.axis=null,this.legendOptions=null,this.normalizationField=null,this.scaleBy=null,this.target=null,this.type="size",this.useSymbolValue=null,this.valueExpression=null,this.valueRepresentation=null,this.valueUnit=null}get cache(){return{ipData:this._interpolateData(),hasExpression:!!this.valueExpression,compiledFunc:null,isScaleDriven:this.valueExpression!=null&&UF.test(this.valueExpression)}}set index(e){fp(this.maxSize)&&(this.maxSize.index=`visualVariables[${e}].maxSize`),fp(this.minSize)&&(this.minSize.index=`visualVariables[${e}].minSize`),this._set("index",e)}get inputValueType(){return FF(this)}set maxDataValue(e){e&&this.stops&&(ye.getLogger(this).warn("cannot set maxDataValue when stops is not null."),e=null),this._set("maxDataValue",e)}set maxSize(e){e&&this.stops&&(ye.getLogger(this).warn("cannot set maxSize when stops is not null."),e=null),this._set("maxSize",e)}castMaxSize(e){return SE(e)}readMaxSize(e,t,i){return xE(e,t,i)}set minDataValue(e){e&&this.stops&&(ye.getLogger(this).warn("cannot set minDataValue when stops is not null."),e=null),this._set("minDataValue",e)}set minSize(e){e&&this.stops&&(ye.getLogger(this).warn("cannot set minSize when stops is not null."),e=null),this._set("minSize",e)}castMinSize(e){return SE(e)}readMinSize(e,t,i){return xE(e,t,i)}get arcadeRequired(){return!!this.valueExpression||this.minSize!=null&&typeof this.minSize=="object"&&this.minSize.arcadeRequired||this.maxSize!=null&&typeof this.maxSize=="object"&&this.maxSize.arcadeRequired}set stops(e){this.minDataValue==null&&this.maxDataValue==null&&this.minSize==null&&this.maxSize==null?e&&Array.isArray(e)&&(e=e.filter(t=>!!t)).sort((t,i)=>t.value-i.value):e&&(ye.getLogger(this).warn("cannot set stops when one of minDataValue, maxDataValue, minSize or maxSize is not null."),e=null),this._set("stops",e)}get transformationType(){return pfe(this,this.inputValueType)}readValueExpression(e,t){return e||t.expression&&"$view.scale"}writeValueExpressionWebScene(e,t,i,r){if(e==="$view.scale"){if(r!=null&&r.messages){const a=this.index,p=typeof a=="string"?a:`visualVariables[${a}]`;r.messages.push(new Y("property:unsupported",this.type+"VisualVariable.valueExpression = '$view.scale' is not supported in Web Scene. Please remove this property to save the Web Scene.",{instance:this,propertyName:p+".valueExpression",context:r}))}}else t[i]=e}readValueUnit(e){return e?p4.read(e):null}clone(){var e,t;return new c4({axis:this.axis,field:this.field,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,maxDataValue:this.maxDataValue,maxSize:fp(this.maxSize)?this.maxSize.clone():this.maxSize,minDataValue:this.minDataValue,minSize:fp(this.minSize)?this.minSize.clone():this.minSize,normalizationField:this.normalizationField,stops:(e=this.stops)==null?void 0:e.map(i=>i.clone()),target:this.target,useSymbolValue:this.useSymbolValue,valueRepresentation:this.valueRepresentation,valueUnit:this.valueUnit,legendOptions:(t=this.legendOptions)==null?void 0:t.clone()})}flipSizes(){if(this.transformationType===Ai.ClampedLinear){const{minSize:e,maxSize:t}=this;return this.minSize=t,this.maxSize=e,this}if(this.transformationType===Ai.Stops){const e=this.stops;if(!e)return this;const t=e.map(r=>r.size).reverse(),i=e.length;for(let r=0;r<i;r++)e[r].size=t[r];return this}return this}getAttributeHash(){return`${super.getAttributeHash()}-${this.target}-${this.normalizationField}`}_interpolateData(){var e;return(e=this.stops)==null?void 0:e.map(t=>t.value||0)}};v([S({readOnly:!0})],St.prototype,"cache",null),v([S({type:Wy.apiValues,json:{type:Wy.jsonValues,origins:{"web-map":{read:!1}},read:Wy.read,write:Wy.write}})],St.prototype,"axis",void 0),v([S()],St.prototype,"index",null),v([S({type:String,readOnly:!0})],St.prototype,"inputValueType",null),v([S({type:cfe,json:{write:!0}})],St.prototype,"legendOptions",void 0),v([S({type:Number,value:null,json:{write:!0}})],St.prototype,"maxDataValue",null),v([S({type:Number,value:null,json:{write:!0}})],St.prototype,"maxSize",null),v([ct("maxSize")],St.prototype,"castMaxSize",null),v([me("maxSize")],St.prototype,"readMaxSize",null),v([S({type:Number,value:null,json:{write:!0}})],St.prototype,"minDataValue",null),v([S({type:Number,value:null,json:{write:!0}})],St.prototype,"minSize",null),v([ct("minSize")],St.prototype,"castMinSize",null),v([me("minSize")],St.prototype,"readMinSize",null),v([S({type:String,json:{write:!0}})],St.prototype,"normalizationField",void 0),v([S({readOnly:!0})],St.prototype,"arcadeRequired",null),v([S({type:String})],St.prototype,"scaleBy",void 0),v([S({type:[dg],value:null,json:{write:!0}})],St.prototype,"stops",null),v([S({type:["outline"],json:{write:!0}})],St.prototype,"target",void 0),v([S({type:String,readOnly:!0})],St.prototype,"transformationType",null),v([S({type:["size"],json:{type:["sizeInfo"]}})],St.prototype,"type",void 0),v([S({type:Boolean,json:{write:!0,origins:{"web-map":{read:!1}}}})],St.prototype,"useSymbolValue",void 0),v([S({type:String,json:{write:!0}})],St.prototype,"valueExpression",void 0),v([me("valueExpression",["valueExpression","expression"])],St.prototype,"readValueExpression",null),v([be("web-scene","valueExpression")],St.prototype,"writeValueExpressionWebScene",null),v([S({type:["radius","diameter","area","width","distance"],json:{write:!0}})],St.prototype,"valueRepresentation",void 0),v([S({type:p4.apiValues,json:{write:p4.write,origins:{"web-map":{read:!1},"web-scene":{write:!0},"portal-item":{write:!0}}}})],St.prototype,"valueUnit",void 0),v([me("valueUnit")],St.prototype,"readValueUnit",null),St=c4=v([H("esri.renderers.visualVariables.SizeVariable")],St);const X2=St,Tfe={color:DF,size:X2,opacity:vx,rotation:jF},Mfe=new rt({colorInfo:"color",transparencyInfo:"opacity",rotationInfo:"rotation",sizeInfo:"size"}),$fe=/^\[([^\]]+)\]$/i;let mg=class extends Ae{constructor(){super(...arguments),this.colorVariables=null,this.opacityVariables=null,this.rotationVariables=null,this.sizeVariables=null}set visualVariables(t){if(this._resetVariables(),t=t==null?void 0:t.filter(i=>!!i),t==null?void 0:t.length){for(const i of t)switch(i.type){case"color":this.colorVariables.push(i);break;case"opacity":this.opacityVariables.push(i);break;case"rotation":this.rotationVariables.push(i);break;case"size":this.sizeVariables.push(i)}this.sizeVariables.length&&this.sizeVariables.some(i=>!!i.target)&&t.sort((i,r)=>{let a=null;return a=i.target===r.target?0:i.target?1:-1,a});for(let i=0;i<t.length;i++)t[i].index=i;this._set("visualVariables",t)}else this._set("visualVariables",t)}readVariables(t,i,r){const{rotationExpression:a,rotationType:p}=i,y=a==null?void 0:a.match($fe),g=y==null?void 0:y[1];if(g&&(t||(t=[]),t.push({type:"rotationInfo",rotationType:p,field:g})),t)return t.map(_=>{const T=Mfe.read(_.type),I=Tfe[T];I||(ye.getLogger(this).warn(`Unknown variable type: ${T}`),r!=null&&r.messages&&r.messages.push(new Ys("visual-variable:unsupported",`visualVariable of type '${T}' is not supported`,{definition:_,context:r})));const A=new I;return A.read(_,r),A})}writeVariables(t,i){const r=[];for(const a of t){const p=a.toJSON(i);p&&r.push(p)}return r}_resetVariables(){this.colorVariables=[],this.opacityVariables=[],this.rotationVariables=[],this.sizeVariables=[]}};v([S()],mg.prototype,"visualVariables",null),mg=v([H("esri.renderers.visualVariables.VisualVariableFactory")],mg);const Efe=mg,Ife={base:Sd,key:"type",typeMap:{opacity:vx,color:DF,rotation:jF,size:X2}},xd=e=>{let t=class extends e{constructor(){super(...arguments),this._vvFactory=new Efe}set visualVariables(i){this._vvFactory.visualVariables=i,this._set("visualVariables",this._vvFactory.visualVariables)}readVisualVariables(i,r,a){return this._vvFactory.readVariables(i,r,a)}writeVisualVariables(i,r,a,p){r[a]=this._vvFactory.writeVariables(i,p)}get arcadeRequiredForVisualVariables(){var i;return((i=this.visualVariables)==null?void 0:i.some(({arcadeRequired:r})=>r))??!1}hasVisualVariables(i,r){return i?this.getVisualVariablesForType(i,r).length>0:this.getVisualVariablesForType("size",r).length>0||this.getVisualVariablesForType("color",r).length>0||this.getVisualVariablesForType("opacity",r).length>0||this.getVisualVariablesForType("rotation",r).length>0}getVisualVariablesForType(i,r){var a;return((a=this.visualVariables)==null?void 0:a.filter(p=>p.type===i&&(typeof r=="string"?p.target===r:r!==!1||!p.target)))??[]}async collectVVRequiredFields(i,r){let a=[];this.visualVariables&&(a=a.concat(this.visualVariables));for(const p of a)p&&(p.field&&Cr(i,r,p.field),p.normalizationField&&Cr(i,r,p.normalizationField),p.valueExpression&&(Afe(p.valueExpression,i,r)||await vr(i,r,p.valueExpression)))}};return v([S({types:[Ife],value:null,json:{write:!0}})],t.prototype,"visualVariables",null),v([me("visualVariables",["visualVariables","rotationType","rotationExpression"])],t.prototype,"readVisualVariables",null),v([be("visualVariables")],t.prototype,"writeVisualVariables",null),t=v([H("esri.renderers.mixins.VisualVariablesMixin")],t),t};function Afe(e,t,i){const r=Ree(e);return r!=null&&(Cr(t,i,r),!0)}const bx=[252,146,31,255],Cfe=[153,153,153,255],Ofe={type:"esriSMS",style:"esriSMSCircle",size:6,color:bx,outline:{type:"esriSLS",style:"esriSLSSolid",width:.75,color:[153,153,153,255]}},Pfe={type:"esriSLS",style:"esriSLSSolid",width:.75,color:bx},kfe={type:"esriSFS",style:"esriSFSSolid",color:[252,146,31,196],outline:{type:"esriSLS",style:"esriSLSSolid",width:.75,color:[255,255,255,191]}},Rfe={type:"esriTS",color:[255,255,255,255],font:{family:"arial-unicode-ms",size:10,weight:"bold"},horizontalAlignment:"center",kerning:!0,haloColor:[0,0,0,255],haloSize:1,rotated:!1,text:"",xoffset:0,yoffset:0,angle:0},Nfe={type:"esriSMS",style:"esriSMSCircle",color:[0,0,0,255],outline:null,size:10.5},Lfe={type:"esriSLS",style:"esriSLSSolid",color:[0,0,0,255],width:1.5},Dfe={type:"esriSFS",style:"esriSFSSolid",color:[0,0,0,255],outline:null},Lv=Ao.fromJSON(Ofe),_x=Ms.fromJSON(Pfe),WF=cu.fromJSON(kfe),jfe=wd.fromJSON(Rfe);function zSe(e){if(e==null)return null;switch(e.type){case"mesh":return null;case"point":case"multipoint":return Lv;case"polyline":return _x;case"polygon":case"extent":return WF}return null}const USe=Ao.fromJSON(Nfe),VSe=Ms.fromJSON(Lfe),GSe=cu.fromJSON(Dfe),Ffe=ma.fromSimpleMarkerSymbol(Lv),zfe=Kh.fromSimpleLineSymbol(_x),Ufe=hu.fromSimpleFillSymbol(WF),Vfe=new V1({symbolLayers:new xe([new Zh({material:{color:bx},edges:new EN({size:Qs(1),color:new De(Cfe)})})])}),Gfe=new Kh({symbolLayers:new xe([new gd({material:{color:new De([0,0,0])},size:Qs(1)})])}),Bfe=new hu({symbolLayers:new xe([new Zh({outline:{color:new De([0,0,0]),size:Qs(1)}})])});function BSe(e){if(e==null)return null;switch(e.type){case"mesh":return Vfe;case"point":case"multipoint":return Ffe;case"polyline":return zfe;case"polygon":case"extent":return Ufe}return null}const TE="#useCIMFallbackSymbology()",gc={retainId:!1,ignoreDrivers:!1,hasLabelingContext:!0};function qfe(e,t=gc){var _,T,I,A;if(!e)return{symbol:null};const{retainId:i=gc.retainId,ignoreDrivers:r=gc.ignoreDrivers,hasLabelingContext:a=gc.hasLabelingContext,retainCIM:p=gc.retainCIM,cimFallbackEnabled:y=gc.cimFallbackEnabled}=t;let g=null;if(rL(e)||e instanceof eu)g=e.clone();else if(e.type==="cim"){const P=(T=(_=e.data)==null?void 0:_.symbol)==null?void 0:T.type;switch(P){case"CIMPointSymbol":g=p?e.clone():ma.fromCIMSymbol(e);break;case"CIMLineSymbol":y&&(g=Gfe.clone(),(I=t==null?void 0:t.logWarning)==null||I.call(t,TE,"Unsupported CIM line symbology converted to fallback 3D line symbology"));break;case"CIMPolygonSymbol":y&&(g=Bfe.clone(),(A=t==null?void 0:t.logWarning)==null||A.call(t,TE,"Unsupported CIM polygon symbology converted to fallback 3D polygon symbology"))}if(!g)return{error:new Y("symbol-conversion:unsupported-cim-symbol",`CIM symbol of type '${P||"unknown"}' is unsupported in 3D`,{symbol:e})}}else if(e instanceof Ms)g=Kh.fromSimpleLineSymbol(e);else if(e instanceof Ao)g=ma.fromSimpleMarkerSymbol(e);else if(e instanceof Io)g=ma.fromPictureMarkerSymbol(e);else if(e instanceof cu)g=t.geometryType&&t.geometryType==="mesh"?V1.fromSimpleFillSymbol(e):hu.fromSimpleFillSymbol(e);else{if(!(e instanceof wd))return{error:new Y("symbol-conversion:unsupported-2d-symbol",`2D symbol of type '${e.type||e.declaredClass}' is unsupported in 3D`,{symbol:e})};g=a?C2.fromTextSymbol(e):ma.fromTextSymbol(e)}return i&&g&&g.type!=="cim"&&(g.id=e.id),!r||g.type==="cim"||g instanceof eu||g.symbolLayers.forEach(P=>P.ignoreDrivers=!0),{symbol:g}}function Dv(e,t,i,r){const a=JF(e,{},{context:r,isLabelSymbol:!1});a!=null&&(t[i]=a)}function ME(e,t,i,r){const a=JF(e,{},{context:r,isLabelSymbol:!0});a!=null&&(t[i]=a)}function $E(e){return rL(e)||e instanceof eu}function Hfe(e){return(e==null?void 0:e.type)==="polygon-3d"||(e==null?void 0:e.type)==="line-3d"}function JF(e,t,i){var g;if(e==null)return null;const{context:r,isLabelSymbol:a}=i,p=r==null?void 0:r.origin,y=r==null?void 0:r.messages;if(p==="web-scene"&&!$E(e)){const _=qfe(e,{retainCIM:!0,hasLabelingContext:a});return _.symbol!=null?_.symbol.write(t,r):(y==null||y.push(new Y("symbol:unsupported",`Symbols of type '${e.declaredClass}' are not supported in scenes. Use 3D symbology instead when working with WebScene and SceneView`,{symbol:e,context:r,error:_.error})),null)}return s5(r==null?void 0:r.layer)&&Hfe(e)?(y==null||y.push(new Y("symbol:unsupported",`Symbols of type '${e.declaredClass}' are not supported on layers of type '${(g=r==null?void 0:r.layer)==null?void 0:g.declaredClass}'.`,{symbol:e,context:r})),null):(p==="web-map"||p==="portal-item"&&!s5(r==null?void 0:r.layer))&&$E(e)?(y==null||y.push(new Y("symbol:unsupported",`Symbols of type '${e.declaredClass}' are not supported in web maps and portal items. Use 2D symbology and CIMSymbol instead when working with MapView`,{symbol:e,context:r})),null):e.write(t,r)}function qSe(e,t){return Mie(e,null,t)}const Q2={types:sL,json:{write:{writer:Dv},origins:{"web-scene":{types:L8,write:{writer:Dv},read:{reader:od({types:L8})}}}}},Sx=Z4({json:{origins:{"web-scene":{write:{isRequired:!0}}}}},Q2),xx={types:{base:tr,key:"type",typeMap:{"simple-fill":Dl.typeMap["simple-fill"],"picture-fill":Dl.typeMap["picture-fill"],"polygon-3d":Dl.typeMap["polygon-3d"],cim:Dl.typeMap.cim}},json:{write:{writer:Dv},origins:{"web-scene":{type:hu,write:{writer:Dv}}}}},gg={cast:e=>e==null||typeof e=="string"||typeof e=="number"?e:`${e}`,json:{type:String,write:{writer:(e,t)=>{t.value=e==null?void 0:e.toString()}}}};var d4;let lh=d4=class extends xd(Ra){constructor(e){super(e),this.description=null,this.label=null,this.symbol=null,this.type="simple"}async collectRequiredFields(e,t){await Promise.all([this.collectSymbolFields(e,t),this.collectVVRequiredFields(e,t)])}async collectSymbolFields(e,t){await Promise.all(this.symbols.map(i=>i.collectRequiredFields(e,t)))}getSymbol(e,t){return this.symbol}async getSymbolAsync(e,t){return this.symbol}get symbols(){return this.symbol?[this.symbol]:[]}getAttributeHash(){var e;return((e=this.visualVariables)==null?void 0:e.reduce((t,i)=>t+i.getAttributeHash(),""))??""}getMeshHash(){return this.symbols.reduce((e,t)=>e+JSON.stringify(t),"")}get arcadeRequired(){return this.arcadeRequiredForVisualVariables}clone(){return new d4({description:this.description,label:this.label,symbol:te(this.symbol),visualVariables:te(this.visualVariables),authoringInfo:te(this.authoringInfo)})}};v([S({type:String,json:{write:!0}})],lh.prototype,"description",void 0),v([S({type:String,json:{write:!0}})],lh.prototype,"label",void 0),v([S(Sx)],lh.prototype,"symbol",void 0),v([Re({simple:"simple"})],lh.prototype,"type",void 0),lh=d4=v([H("esri.renderers.SimpleRenderer")],lh);const Or=lh,Wfe=new Set(["esri.Color","esri.portal.Portal","esri.symbols.support.Symbol3DAnchorPosition2D","esri.symbols.support.Symbol3DAnchorPosition3D"]);function f4(e){return e instanceof Ae}function EE(e){return e instanceof xe?Object.keys(e.items):f4(e)?Xr(e).keys():e?Object.keys(e):[]}function Jy(e,t){return e instanceof xe?e.items[t]:e[t]}function Jfe(e,t){return!(!Array.isArray(e)||!Array.isArray(t))&&e.length!==t.length}function L0(e){return e?e.declaredClass:null}function ZF(e,t){var A;const i=e.diff;if(i&&typeof i=="function")return i(e,t);const r=EE(e),a=EE(t);if(r.length===0&&a.length===0)return;if(!r.length||!a.length||Jfe(e,t))return{type:"complete",oldValue:e,newValue:t};const p=a.filter(P=>!r.includes(P)),y=r.filter(P=>!a.includes(P)),g=r.filter(P=>a.includes(P)&&Jy(e,P)!==Jy(t,P)).concat(p,y).sort(),_=L0(e);if(_&&Wfe.has(_)&&g.length)return{type:"complete",oldValue:e,newValue:t};let T;const I=f4(e)&&f4(t);for(const P of g){const N=Jy(e,P),D=Jy(t,P);let z;if((I||typeof N!="function"&&typeof D!="function")&&N!==D&&(N!=null||D!=null)){if(i&&i[P]&&typeof i[P]=="function")z=(A=i[P])==null?void 0:A.call(i,N,D);else if(N instanceof Date&&D instanceof Date){if(N.getTime()===D.getTime())continue;z={type:"complete",oldValue:N,newValue:D}}else z=typeof N=="object"&&typeof D=="object"&&L0(N)===L0(D)?ZF(N,D):{type:"complete",oldValue:N,newValue:D};z!=null&&(T!=null?T.diff[P]=z:T={type:"partial",diff:{[P]:z}})}}return T}function HSe(e,t){return Zfe(e,t)}function Zfe(e,t){if(e==null)return!1;const i=t.split(".");let r=e;for(const a of i){if(r.type==="complete")return!0;if(r.type!=="partial")return!1;{const p=r.diff[a];if(!p)return!1;r=p}}return!0}function WSe(e,t){if(!e)return!1;if(e.type==="partial"){const i=Object.keys(e.diff);return i.length===1&&i[0]===t}return!1}function Kfe(e,t){if(typeof e!="function"&&typeof t!="function"&&(e!=null||t!=null))return e==null||t==null||typeof e=="object"&&typeof t=="object"&&L0(e)!==L0(t)?{type:"complete",oldValue:e,newValue:t}:ZF(e,t)}function Zy(e){if(e==null)return!0;switch(e.type){case"complete":return!1;case"collection":{const t=e;for(const i of t.added)if(!Zy(i))return!1;for(const i of t.removed)if(!Zy(i))return!1;for(const i of t.changed)if(!Zy(i))return!1;return!0}case"partial":for(const t in e.diff)if(!Zy(e.diff[t]))return!1;return!0}}var y4;const Yfe=qi()({ascendingValues:"ascending-values",descendingValues:"descending-values"});let i0=y4=class extends at.ClonableMixin(he){static from(e){return nd(y4,e)}constructor(e){super(e),this.title=null,this.order=null}};v([S({type:String,json:{write:!0}})],i0.prototype,"title",void 0),v([Re(Yfe)],i0.prototype,"order",void 0),i0=y4=v([H("esri.renderers.support.RendererLegendOptions")],i0);const Tx=i0;let Qc=class extends at.ClonableMixin(he){constructor(t){super(t),this.value=null,this.value2=null,this.value3=null}};v([S(gg)],Qc.prototype,"value",void 0),v([S(gg)],Qc.prototype,"value2",void 0),v([S(gg)],Qc.prototype,"value3",void 0),Qc=v([H("esri.renderers.support.UniqueValue")],Qc);const Op=Qc;let gl=class extends at.ClonableMixin(he){constructor(t){super(t),this.description=null,this.label=null,this.symbol=null,this.values=null}castValues(t){if(t==null)return null;const i=typeof(t=Array.isArray(t)?t:[t])[0];return i==="string"||i==="number"?t.map(r=>new Op({value:r})):i==="object"?t[0]instanceof Op?t:t.map(r=>new Op(r)):null}};v([S({type:String,json:{write:!0}})],gl.prototype,"description",void 0),v([S({type:String,json:{write:!0}})],gl.prototype,"label",void 0),v([S(Q2)],gl.prototype,"symbol",void 0),v([S({type:[Op],json:{type:[[String]],read:{reader:e=>e?e.map(t=>new Op({value:t[0],value2:t[1],value3:t[2]})):null},write:{writer:(e,t)=>{const i=[];for(const r of e){const a=[r.value,r.value2,r.value3].filter(Sa).map(p=>p.toString());i.push(a)}t.values=i}}}})],gl.prototype,"values",void 0),v([ct("values")],gl.prototype,"castValues",null),gl=v([H("esri.renderers.support.UniqueValueClass")],gl);const KF=gl;let r0=class extends at.ClonableMixin(he){constructor(t){super(t),this.heading=null,this.classes=null}};v([S({type:String,json:{write:!0}})],r0.prototype,"heading",void 0),v([S({type:[KF],json:{write:{isRequired:!0}}})],r0.prototype,"classes",void 0),r0=v([H("esri.renderers.support.UniqueValueGroup")],r0);const m4=r0;var g4;let uh=g4=class extends he{constructor(e){super(e),this.description=null,this.label=null,this.symbol=null,this.value=null}clone(){return new g4({value:this.value,description:this.description,label:this.label,symbol:this.symbol?this.symbol.clone():null})}getMeshHash(){var t;const e=JSON.stringify((t=this.symbol)==null?void 0:t.toJSON());return`${this.value}.${e}`}};v([S({type:String,json:{write:!0}})],uh.prototype,"description",void 0),v([S({type:String,json:{write:!0}})],uh.prototype,"label",void 0),v([S(Sx)],uh.prototype,"symbol",void 0),v([S(gg)],uh.prototype,"value",void 0),uh=g4=v([H("esri.renderers.support.UniqueValueInfo")],uh);const D0=uh,IE=new Map;async function Xfe(e,t){try{return{data:(await i0e(e,t)).data,baseUrl:YG(e),styleUrl:e}}catch(i){return po(i),null}}function Qfe(e,t,i){var _;const r=t.portal!=null?t.portal:er.getDefault();let a;const p=`${r.url} - ${(_=r.user)==null?void 0:_.username} - ${e}`,y=IE.get(p);if(y)return y;const g=e0e(e,r,i).then(T=>(a=T,T.fetchData())).then(T=>({data:T,baseUrl:a.itemUrl??"",styleName:e}));return IE.set(p,g),g}function e0e(e,t,i){return t.load(i).then(()=>{const r=new On({disableExtraQuery:!0,query:`owner:${AE} AND type:${CE} AND typekeywords:"${e}"`});return t.queryItems(r,i)}).then(({results:r})=>{var y;let a=null;const p=e.toLowerCase();if(r&&Array.isArray(r)){for(const g of r)if(((y=g.typeKeywords)==null?void 0:y.some(T=>T.toLowerCase()===p))&&g.type===CE&&g.owner===AE){a=g;break}}if(!a)throw new Y("symbolstyleutils:style-not-found",`The style '${e}' could not be found`,{styleName:e});return a.load(i)})}function t0e(e,t,i){return(e==null?void 0:e.styleUrl)!=null?Xfe(e.styleUrl,i):(e==null?void 0:e.styleName)!=null?Qfe(e.styleName,t,i):Promise.reject(new Y("symbolstyleutils:style-url-and-name-missing","Either styleUrl or styleName is required to resolve a style"))}function YSe(e){return e===null||e.type==="CIMSymbolReference"?e:{type:"CIMSymbolReference",symbol:e}}function XSe(e,t){for(const i of t)switch(i){case"cim":if(e.cimRef)return{format:i,url:encodeURI(e.cimRef)};break;case"web-gltf-basisu":{const r=Qb(e,"gltf_basisu");if(r)return{format:i,url:r};break}case"web-gltf":{const r=Qb(e,"gltf");if(r)return{format:i,url:r};break}case"web":{const r=Qb(e,"gltf");if(r)return{format:"web-gltf",url:r};if(e.webRef)return{format:i,url:encodeURI(e.webRef)};break}}}function Qb(e,t){var i,r;if(!ne("enable-feature:force-wosr"))return(r=(i=e.formatInfos)==null?void 0:i.find(a=>a.type===t))==null?void 0:r.href}function i0e(e,t){const i={responseType:"json",query:{f:"json"},...t};return kt(Ks(e),i)}const AE="esri_en",CE="Style",QSe="https://cdn.arcgis.com/sharing/rest/content/items/220936cc6ed342c9937abd8f180e7d1e/resources/styles/cim/{SymbolName}.json?f=json";var s0;const YF="esri.renderers.UniqueValueRenderer",Ha=()=>ye.getLogger(YF),OE="uvInfos-watcher",PE="uvGroups-watcher",r0e=",",s0e=di(D0);function n0e(e){const{field1:t,field2:i,field3:r,fieldDelimiter:a,uniqueValueInfos:p,valueExpression:y}=e,g=!(!t||!i);return[{classes:(p??[]).map(_=>{var J;const{symbol:T,label:I,value:A,description:P}=_,[N,D,z]=g?((J=A==null?void 0:A.toString())==null?void 0:J.split(a||""))||[]:[A],q=[];return(t||y)&&q.push(N),i&&q.push(D),r&&q.push(z),{symbol:T,label:I,values:[q],description:P}})}]}function vc(e){return e!=null&&e!==""&&(typeof e!="string"||e.trim()!==""&&e.toLowerCase()!=="<null>")||(e=null),e+""}let Vt=s0=class extends xd(Ra){constructor(e){super(e),this._valueInfoMap={},this._isDefaultSymbolDerived=!1,this._isInfosSource=null,this.type="unique-value",this.backgroundFillSymbol=null,this.orderByClassesEnabled=!1,this.valueExpressionTitle=null,this.legendOptions=null,this.defaultLabel=null,this.portal=null,this.styleOrigin=null,this.diff={uniqueValueInfos(t,i){if(!t&&!i)return;if(!t||!i)return{type:"complete",oldValue:t,newValue:i};let r=!1;const a={type:"collection",added:[],removed:[],changed:[],unchanged:[]};for(let p=0;p<i.length;p++){const y=t.find(g=>g.value===i[p].value);y?Kfe(y,i[p])?(a.changed.push({type:"complete",oldValue:y,newValue:i[p]}),r=!0):a.unchanged.push({oldValue:y,newValue:i[p]}):(a.added.push(i[p]),r=!0)}for(let p=0;p<t.length;p++)i.find(y=>y.value===t[p].value)||(a.removed.push(t[p]),r=!0);return r?a:void 0}},this._set("uniqueValueInfos",[]),this._set("uniqueValueGroups",[])}get _cache(){return{compiledFunc:null}}set field(e){this._set("field",e),this._updateFieldDelimiter(),this._updateUniqueValues()}castField(e){return e==null||typeof e=="function"?e:S1(e)}writeField(e,t,i,r){typeof e=="string"?t[i]=e:r!=null&&r.messages?r.messages.push(new Y("property:unsupported","UniqueValueRenderer.field set to a function cannot be written to JSON")):Ha().error(".field: cannot write field to JSON since it's not a string value")}set field2(e){this._set("field2",e),this._updateFieldDelimiter(),this._updateUniqueValues()}set field3(e){this._set("field3",e),this._updateUniqueValues()}set valueExpression(e){this._set("valueExpression",e),this._updateUniqueValues()}set defaultSymbol(e){this._isDefaultSymbolDerived=!1,this._set("defaultSymbol",e)}set fieldDelimiter(e){this._set("fieldDelimiter",e),this._updateUniqueValues()}readPortal(e,t,i){return i.portal||er.getDefault()}readStyleOrigin(e,t,i){if(t.styleName)return Object.freeze({styleName:t.styleName});if(t.styleUrl){const r=ld(t.styleUrl,i);return Object.freeze({styleUrl:r})}}writeStyleOrigin(e,t,i,r){e.styleName?t.styleName=e.styleName:e.styleUrl&&(t.styleUrl=x1(e.styleUrl,r))}set uniqueValueGroups(e){this.styleOrigin?Ha().error("#uniqueValueGroups=","Cannot modify unique value groups of a UniqueValueRenderer created from a web style"):(this._set("uniqueValueGroups",e),this._updateInfosFromGroups(),this._isInfosSource=!1,this._watchUniqueValueGroups())}set uniqueValueInfos(e){this.styleOrigin?Ha().error("#uniqueValueInfos=","Cannot modify unique value infos of a UniqueValueRenderer created from a web style"):(this._set("uniqueValueInfos",e),this._updateValueInfoMap(),this._updateGroupsFromInfos(),this._isInfosSource=!0,this._watchUniqueValueInfos())}addUniqueValueInfo(e,t){var r;if(this.styleOrigin)return void Ha().error("#addUniqueValueInfo()","Cannot modify unique value infos of a UniqueValueRenderer created from a web style");let i;i=typeof e=="object"?s0e(e):new D0({value:e,symbol:nL(t)}),(r=this.uniqueValueInfos)==null||r.push(i),this._valueInfoMap[vc(i.value)]=i,this._updateGroupsFromInfos(),this._isInfosSource=!0,this._watchUniqueValueInfos()}removeUniqueValueInfo(e){if(this.styleOrigin)return void Ha().error("#removeUniqueValueInfo()","Cannot modify unique value infos of a UniqueValueRenderer created from a web style");const t=this.uniqueValueInfos;if(t)for(let i=0;i<t.length;i++){const r=t[i];if(String(r.value)===String(e)){delete this._valueInfoMap[vc(e)],t.splice(i,1);break}}this._updateGroupsFromInfos(),this._isInfosSource=!0,this._watchUniqueValueInfos()}async getUniqueValueInfo(e,t){let i=t;return this.valueExpression&&(t==null?void 0:t.arcade)==null&&(i={...i,arcade:await Ql()}),this._getUniqueValueInfo(e,i)}getSymbol(e,t){if(this.valueExpression&&(t==null?void 0:t.arcade)==null)return void Ha().error("#getSymbol()","Please use getSymbolAsync if valueExpression is used");const i=this._getUniqueValueInfo(e,t);return(i==null?void 0:i.symbol)||this.defaultSymbol}async getSymbolAsync(e,t){let i=t;if(this.valueExpression&&(i==null?void 0:i.arcade)==null){const a=await Ql(),{arcadeUtils:p}=a;p.hasGeometryOperations(this.valueExpression)&&await p.enableGeometryOperations(),i={...i,arcade:a}}const r=this._getUniqueValueInfo(e,i);return(r==null?void 0:r.symbol)||this.defaultSymbol}get symbols(){const e=[];for(const t of this.uniqueValueInfos??[])t.symbol&&e.push(t.symbol);return this.defaultSymbol&&e.push(this.defaultSymbol),e}getAttributeHash(){var e;return((e=this.visualVariables)==null?void 0:e.reduce((t,i)=>t+i.getAttributeHash(),""))??""}getMeshHash(){var r;const e=JSON.stringify(this.backgroundFillSymbol),t=JSON.stringify(this.defaultSymbol),i=(r=this.uniqueValueInfos)==null?void 0:r.reduce((a,p)=>a+p.getMeshHash(),"");return`${e}.${t}.${i}.${`${this.field}.${this.field2}.${this.field3}.${this.fieldDelimiter}`}.${this.valueExpression}`}clone(){const e=new s0({field:this.field,field2:this.field2,field3:this.field3,defaultLabel:this.defaultLabel,defaultSymbol:te(this.defaultSymbol),orderByClassesEnabled:this.orderByClassesEnabled,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,fieldDelimiter:this.fieldDelimiter,visualVariables:te(this.visualVariables),legendOptions:te(this.legendOptions),authoringInfo:te(this.authoringInfo),backgroundFillSymbol:te(this.backgroundFillSymbol)});this._isDefaultSymbolDerived&&(e._isDefaultSymbolDerived=!0),e._set("portal",this.portal);const t=te(this.uniqueValueInfos),i=te(this.uniqueValueGroups);return this.styleOrigin&&(e._set("styleOrigin",Object.freeze(te(this.styleOrigin))),Object.freeze(t),Object.freeze(i)),e._set("uniqueValueInfos",t),e._updateValueInfoMap(),e._set("uniqueValueGroups",i),e._isInfosSource=this._isInfosSource,e._watchUniqueValueInfosAndGroups(),e}get arcadeRequired(){return this.arcadeRequiredForVisualVariables||!!this.valueExpression}async collectRequiredFields(e,t){const i=[this.collectVVRequiredFields(e,t),this.collectSymbolFields(e,t)];await Promise.all(i)}async collectSymbolFields(e,t){const i=[...this.symbols.map(r=>r.collectRequiredFields(e,t)),vr(e,t,this.valueExpression)];Cr(e,t,this.field),Cr(e,t,this.field2),Cr(e,t,this.field3),await Promise.all(i)}populateFromStyle(){return t0e(this.styleOrigin,{portal:this.portal}).then(e=>{var i;const t=[];return this._valueInfoMap={},e!=null&&e.data&&Array.isArray(e.data.items)&&e.data.items.forEach(r=>{const a=new eu({styleUrl:e.styleUrl,styleName:e.styleName,portal:this.portal,name:r.name});this.defaultSymbol||r.name!==e.data.defaultItem||(this.defaultSymbol=a,this._isDefaultSymbolDerived=!0);const p=new D0({value:r.name,symbol:a});t.push(p),this._valueInfoMap[vc(r.name)]=p}),this._set("uniqueValueInfos",Object.freeze(t)),this._updateGroupsFromInfos(!0),this._isInfosSource=null,this._watchUniqueValueInfos(),!this.defaultSymbol&&((i=this.uniqueValueInfos)!=null&&i.length)&&(this.defaultSymbol=this.uniqueValueInfos[0].symbol,this._isDefaultSymbolDerived=!0),this})}_updateFieldDelimiter(){this.field&&this.field2&&!this.fieldDelimiter&&this._set("fieldDelimiter",r0e)}_updateUniqueValues(){this._isInfosSource!=null&&(this._isInfosSource?this._updateGroupsFromInfos():this._updateInfosFromGroups())}_updateValueInfoMap(){this._valueInfoMap={};const{uniqueValueInfos:e}=this;if(e)for(const t of e)this._valueInfoMap[vc(t.value)]=t}_watchUniqueValueInfosAndGroups(){this._watchUniqueValueInfos(),this._watchUniqueValueGroups()}_watchUniqueValueInfos(){this.removeHandles(OE);const{uniqueValueInfos:e}=this;if(e){const t=[];for(const i of e)t.push(Le(()=>({symbol:i.symbol,value:i.value,label:i.label,description:i.description}),(r,a)=>{r!==a&&(this._updateGroupsFromInfos(),this._isInfosSource=!0)},{sync:!0}));this.addHandles(t,OE)}}_watchUniqueValueGroups(){this.removeHandles(PE);const{uniqueValueGroups:e}=this;if(e){const t=[];for(const i of e){t.push(Le(()=>({classes:i.classes}),(r,a)=>{r!==a&&(this._updateInfosFromGroups(),this._isInfosSource=!1)},{sync:!0}));for(const r of i.classes??[])t.push(Le(()=>({symbol:r.symbol,values:r.values,label:r.label,description:r.description}),(a,p)=>{a!==p&&(this._updateInfosFromGroups(),this._isInfosSource=!1)},{sync:!0}))}this.addHandles(t,PE)}}_updateInfosFromGroups(){if(!this.uniqueValueGroups)return this._set("uniqueValueInfos",null),this._updateValueInfoMap(),void this._watchUniqueValueInfos();const e=[],{field:t,field2:i,field3:r,fieldDelimiter:a,uniqueValueGroups:p,valueExpression:y}=this;if(!t&&!y)return this._set("uniqueValueInfos",e),this._updateValueInfoMap(),void this._watchUniqueValueInfos();const g=!(!t||!i);for(const _ of p)for(const T of _.classes??[]){const{symbol:I,label:A,values:P,description:N}=T;for(const D of P??[]){const{value:z,value2:q,value3:J}=D,ee=[z];i&&ee.push(q),r&&ee.push(J);const X=g?ee.join(a||""):ee[0]??void 0;e.push(new D0({symbol:I,label:A,value:X,description:N}))}}this._set("uniqueValueInfos",e),this._updateValueInfoMap(),this._watchUniqueValueInfos()}_updateGroupsFromInfos(e=!1){if(!this.uniqueValueInfos)return this._set("uniqueValueGroups",null),void this._watchUniqueValueGroups();const{field:t,field2:i,valueExpression:r,fieldDelimiter:a,uniqueValueInfos:p}=this;if(!t&&!r||!p.length)return this._set("uniqueValueGroups",[]),void this._watchUniqueValueGroups();const y=!(!t||!i),g=p.map(T=>{var J;const{symbol:I,label:A,value:P,description:N}=T,[D,z,q]=y?((J=P==null?void 0:P.toString())==null?void 0:J.split(a||""))||[]:[P];return new KF({symbol:I,label:A,description:N,values:[new Op({value:D,value2:z,value3:q})]})}),_=[new m4({classes:g})];e&&Object.freeze(_),this._set("uniqueValueGroups",_),this._watchUniqueValueGroups()}_getUniqueValueInfo(e,t){return this.valueExpression?this._getUnqiueValueInfoForExpression(e,t):this._getUnqiueValueInfoForFields(e)}_getUnqiueValueInfoForExpression(e,t){const{viewingMode:i,scale:r,spatialReference:a,arcade:p,timeZone:y}=t??{};let g=this._cache.compiledFunc;const _=p.arcadeUtils;if(!g){const I=_.createSyntaxTree(this.valueExpression);g=_.createFunction(I),this._cache.compiledFunc=g}const T=_.executeFunction(g,_.createExecContext(e,_.getViewInfo({viewingMode:i,scale:r,spatialReference:a}),y));return this._valueInfoMap[vc(T)]}_getUnqiueValueInfoForFields(e){const t=this.field,i=e.attributes;let r;if(this.field2){const a=this.field2,p=this.field3,y=[];t&&y.push(i[t]),a&&y.push(i[a]),p&&y.push(i[p]),r=y.join(this.fieldDelimiter||"")}else t&&(r=i[t]);return this._valueInfoMap[vc(r)]}static fromPortalStyle(e,t){const i=new s0(t==null?void 0:t.properties);i._set("styleOrigin",Object.freeze({styleName:e})),i._set("portal",(t==null?void 0:t.portal)||er.getDefault());const r=i.populateFromStyle();return r.catch(a=>{Ha().error(`#fromPortalStyle('${e}'[, ...])`,"Failed to create unique value renderer from style name",a)}),r}static fromStyleUrl(e,t){const i=new s0(t==null?void 0:t.properties);i._set("styleOrigin",Object.freeze({styleUrl:e}));const r=i.populateFromStyle();return r.catch(a=>{Ha().error(`#fromStyleUrl('${e}'[, ...])`,"Failed to create unique value renderer from style URL",a)}),r}};v([S({readOnly:!0})],Vt.prototype,"_cache",null),v([Re({uniqueValue:"unique-value"})],Vt.prototype,"type",void 0),v([S(xx)],Vt.prototype,"backgroundFillSymbol",void 0),v([S({value:null,json:{type:String,read:{source:"field1"},write:{target:"field1"}}})],Vt.prototype,"field",null),v([ct("field")],Vt.prototype,"castField",null),v([be("field")],Vt.prototype,"writeField",null),v([S({type:String,value:null,json:{write:!0}})],Vt.prototype,"field2",null),v([S({type:String,value:null,json:{write:!0}})],Vt.prototype,"field3",null),v([S({type:Boolean,json:{name:"drawInClassOrder",default:!1,write:!0,origins:{"web-scene":{write:!1}}}})],Vt.prototype,"orderByClassesEnabled",void 0),v([S({type:String,value:null,json:{write:!0}})],Vt.prototype,"valueExpression",null),v([S({type:String,json:{write:!0}})],Vt.prototype,"valueExpressionTitle",void 0),v([S({type:Tx,json:{write:!0}})],Vt.prototype,"legendOptions",void 0),v([S({type:String,json:{write:!0}})],Vt.prototype,"defaultLabel",void 0),v([S(Z4({...Q2},{json:{write:{overridePolicy(){return{enabled:!this._isDefaultSymbolDerived}}},origins:{"web-scene":{write:{overridePolicy(){return{enabled:!this._isDefaultSymbolDerived}}}}}}}))],Vt.prototype,"defaultSymbol",null),v([S({type:String,value:null,json:{write:!0}})],Vt.prototype,"fieldDelimiter",null),v([S({type:er,readOnly:!0})],Vt.prototype,"portal",void 0),v([me("portal",["styleName"])],Vt.prototype,"readPortal",null),v([S({readOnly:!0,json:{write:{enabled:!1,overridePolicy:()=>({enabled:!0})}}})],Vt.prototype,"styleOrigin",void 0),v([me("styleOrigin",["styleName","styleUrl"])],Vt.prototype,"readStyleOrigin",null),v([be("styleOrigin",{styleName:{type:String},styleUrl:{type:String}})],Vt.prototype,"writeStyleOrigin",null),v([S({type:[m4],json:{read:{source:["uniqueValueGroups","uniqueValueInfos"],reader:(e,t,i)=>(t.uniqueValueGroups||n0e(t)).map(r=>m4.fromJSON(r,i))},write:{overridePolicy(){return this.styleOrigin?{enabled:!1}:{enabled:!0}}}}})],Vt.prototype,"uniqueValueGroups",null),v([S({type:[D0],json:{read:!1,write:{isRequired:!0,overridePolicy(){return this.styleOrigin?{enabled:!1}:{enabled:!0,isRequired:!0}}}}})],Vt.prototype,"uniqueValueInfos",null),Vt=s0=v([H(YF)],Vt);const Mx=Vt;var v4;let Ei=v4=class extends he{constructor(e){super(e),this.attachmentTypes=null,this.attachmentsWhere=null,this.cacheHint=void 0,this.keywords=null,this.globalIds=null,this.name=null,this.num=null,this.objectIds=null,this.orderByFields=null,this.returnMetadata=!1,this.size=null,this.start=null,this.where=null}writeStart(e,t){t.resultOffset=this.start,t.resultRecordCount=this.num||10}clone(){return new v4(te({attachmentTypes:this.attachmentTypes,attachmentsWhere:this.attachmentsWhere,cacheHint:this.cacheHint,keywords:this.keywords,where:this.where,globalIds:this.globalIds,name:this.name,num:this.num,objectIds:this.objectIds,orderByFields:this.orderByFields,returnMetadata:this.returnMetadata,size:this.size,start:this.start}))}};v([S({type:[String],json:{write:!0}})],Ei.prototype,"attachmentTypes",void 0),v([S({type:String,json:{read:{source:"attachmentsDefinitionExpression"},write:{target:"attachmentsDefinitionExpression"}}})],Ei.prototype,"attachmentsWhere",void 0),v([S({type:Boolean,json:{write:!0}})],Ei.prototype,"cacheHint",void 0),v([S({type:[String],json:{write:!0}})],Ei.prototype,"keywords",void 0),v([S({type:[String],json:{write:!0}})],Ei.prototype,"globalIds",void 0),v([S({json:{write:!0}})],Ei.prototype,"name",void 0),v([S({type:Number,json:{read:{source:"resultRecordCount"}}})],Ei.prototype,"num",void 0),v([S({type:[Number],json:{write:!0}})],Ei.prototype,"objectIds",void 0),v([S({type:[String],json:{write:!0}})],Ei.prototype,"orderByFields",void 0),v([S({type:Boolean,json:{default:!1,write:!0}})],Ei.prototype,"returnMetadata",void 0),v([S({type:[Number],json:{write:!0}})],Ei.prototype,"size",void 0),v([S({type:Number,json:{read:{source:"resultOffset"}}})],Ei.prototype,"start",void 0),v([be("start"),be("num")],Ei.prototype,"writeStart",null),v([S({type:String,json:{read:{source:"definitionExpression"},write:{target:"definitionExpression"}}})],Ei.prototype,"where",void 0),Ei=v4=v([H("esri.rest.support.AttachmentQuery")],Ei),Ei.from=di(Ei);const o0e=Ei,XF=qi()({naturalLog:"natural-log",squareRoot:"square-root",percentOfTotal:"percent-of-total",log:"log",field:"field"}),kE="percent-of-total",RE="field",exe=e=>{let t=class extends e{constructor(){super(...arguments),this.normalizationField=null,this.normalizationMaxValue=null,this.normalizationMinValue=null,this.normalizationTotal=null}get normalizationType(){let i=this._get("normalizationType");const r=!!this.normalizationField,a=this.normalizationTotal!=null;return r||a?(i=r&&RE||a&&kE||null,r&&a&&ye.getLogger(this).warn("warning: both normalizationField and normalizationTotal are set!")):i!==RE&&i!==kE||(i=null),i}set normalizationType(i){this._set("normalizationType",i)}};return v([S({type:String,json:{name:"parameters.normalizationField",write:!0}})],t.prototype,"normalizationField",void 0),v([S({type:Number,json:{name:"parameters.normalizationMaxValue",write:!0}})],t.prototype,"normalizationMaxValue",void 0),v([S({type:Number,json:{name:"parameters.normalizationMinValue",write:!0}})],t.prototype,"normalizationMinValue",void 0),v([S({type:Number,json:{name:"parameters.normalizationTotal",write:!0}})],t.prototype,"normalizationTotal",void 0),v([Re(XF,{name:"parameters.normalizationType"})],t.prototype,"normalizationType",null),t=v([H("esri.rest.support.NormalizationBinParametersMixin")],t),t};var w4;let Kt=w4=class extends he{constructor(e){super(e),this.cacheHint=void 0,this.dynamicDataSource=void 0,this.gdbVersion=null,this.geometryPrecision=void 0,this.historicMoment=null,this.maxAllowableOffset=void 0,this.objectIds=null,this.orderByFields=null,this.outFields=null,this.outSpatialReference=null,this.relationshipId=void 0,this.start=void 0,this.num=void 0,this.returnGeometry=!1,this.returnM=void 0,this.returnZ=void 0,this.where=null}_writeHistoricMoment(e,t){t.historicMoment=e&&e.getTime()}writeStart(e,t){t.resultOffset=this.start,t.resultRecordCount=this.num||10,this.start>0&&this.where==null&&(t.definitionExpression="1=1")}clone(){return new w4(te({cacheHint:this.cacheHint,dynamicDataSource:this.dynamicDataSource,gdbVersion:this.gdbVersion,geometryPrecision:this.geometryPrecision,historicMoment:this.historicMoment&&new Date(this.historicMoment.getTime()),maxAllowableOffset:this.maxAllowableOffset,objectIds:this.objectIds,orderByFields:this.orderByFields,outFields:this.outFields,outSpatialReference:this.outSpatialReference,relationshipId:this.relationshipId,start:this.start,num:this.num,returnGeometry:this.returnGeometry,where:this.where,returnZ:this.returnZ,returnM:this.returnM}))}};v([S({type:Boolean,json:{write:!0}})],Kt.prototype,"cacheHint",void 0),v([S({type:In,json:{write:!0}})],Kt.prototype,"dynamicDataSource",void 0),v([S({type:String,json:{write:!0}})],Kt.prototype,"gdbVersion",void 0),v([S({type:Number,json:{write:!0}})],Kt.prototype,"geometryPrecision",void 0),v([S({type:Date})],Kt.prototype,"historicMoment",void 0),v([be("historicMoment")],Kt.prototype,"_writeHistoricMoment",null),v([S({type:Number,json:{write:!0}})],Kt.prototype,"maxAllowableOffset",void 0),v([S({json:{write:!0}})],Kt.prototype,"objectIds",void 0),v([S({type:[String],json:{write:!0}})],Kt.prototype,"orderByFields",void 0),v([S({type:[String],json:{write:!0}})],Kt.prototype,"outFields",void 0),v([S({type:qe,json:{read:{source:"outSR"},write:{target:"outSR"}}})],Kt.prototype,"outSpatialReference",void 0),v([S({json:{write:!0}})],Kt.prototype,"relationshipId",void 0),v([S({type:Number,json:{read:{source:"resultOffset"}}})],Kt.prototype,"start",void 0),v([be("start"),be("num")],Kt.prototype,"writeStart",null),v([S({type:Number,json:{read:{source:"resultRecordCount"}}})],Kt.prototype,"num",void 0),v([S({json:{write:!0}})],Kt.prototype,"returnGeometry",void 0),v([S({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],Kt.prototype,"returnM",void 0),v([S({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],Kt.prototype,"returnZ",void 0),v([S({type:String,json:{read:{source:"definitionExpression"},write:{target:"definitionExpression"}}})],Kt.prototype,"where",void 0),Kt=w4=v([H("esri.rest.support.RelationshipQuery")],Kt),Kt.from=di(Kt);const $x=Kt,txe=Object.freeze(Object.defineProperty({__proto__:null,default:$x},Symbol.toStringTag,{value:"Module"})),b4=new rt({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryMultiPatch:"multipatch"});async function a0e(e,t,i,r){const a=await du(e);if(await Ex(e,t,r),!a.addAttachment)throw new Y(r,"Layer source does not support addAttachment capability");return a.addAttachment(t,i)}function Ex(e,t,i){var p,y;const{attributes:r}=t,{objectIdField:a}=e;return(y=(p=e.capabilities)==null?void 0:p.data)!=null&&y.supportsAttachment?t?r?a&&r[a]?Promise.resolve():Promise.reject(new Y(i,`feature is missing the identifying attribute ${a}`)):Promise.reject(new Y(i,"'attributes' are required on a feature to query attachments")):Promise.reject(new Y(i,"A feature is required to add/delete/update attachments")):Promise.reject(new Y(i,"this layer doesn't support attachments"))}async function l0e(e,t,i,r,a){const p=await du(e);if(await Ex(e,t,a),!p.updateAttachment)throw new Y(a,"Layer source does not support updateAttachment capability");return p.updateAttachment(t,i,r)}async function u0e(e,t,i){const{applyEdits:r}=await fe(()=>import("./editingSupport-lEbp6S8t.js"),[]),a=await e.load();let p=i;return a.type==="feature"&&a.infoFor3D&&t.deleteFeatures!=null&&a.globalIdField!=null&&(p={...p,globalIdToObjectId:await O0e(a,t.deleteFeatures,a.globalIdField)}),r(a,a.source,t,i)}async function h0e(e,t,i){const{uploadAssets:r}=await fe(()=>import("./editingSupport-lEbp6S8t.js"),[]),a=await e.load();return r(a,a.source,t,i)}async function c0e(e,t,i,r){const a=await du(e);if(await Ex(e,t,r),!a.deleteAttachments)throw new Y(r,"Layer source does not support deleteAttachments capability");return a.deleteAttachments(t,i)}async function p0e(e,t,i){const r=(await e.load({signal:t==null?void 0:t.signal})).source;if(!r.fetchRecomputedExtents)throw new Y(i,"Layer source does not support fetchUpdates capability");return r.fetchRecomputedExtents(t)}async function d0e(e,t,i,r){var N,D,z,q;t=o0e.from(t),await e.load();const a=e.source,p=e.capabilities;if(!((N=p==null?void 0:p.data)!=null&&N.supportsAttachment))throw new Y(r,"this layer doesn't support attachments");const{attachmentTypes:y,objectIds:g,globalIds:_,num:T,size:I,start:A,where:P}=t;if(!((D=p==null?void 0:p.operations)!=null&&D.supportsQueryAttachments)&&((y==null?void 0:y.length)>0||(_==null?void 0:_.length)>0||(I==null?void 0:I.length)>0||T||A||P))throw new Y(r,"when 'capabilities.operations.supportsQueryAttachments' is false, only objectIds is supported",t);if(!(g!=null&&g.length||_!=null&&_.length||P))throw new Y(r,"'objectIds', 'globalIds', or 'where' are required to perform attachment query",t);if(!a.queryAttachments)throw new Y(r,"Layer source does not support queryAttachments capability",t);return!((z=p==null?void 0:p.attachment)!=null&&z.supportsOrderByFields)&&((q=t.orderByFields)!=null&&q.length)&&((t=t.clone()).orderByFields=null),a.queryAttachments(t)}async function f0e(e,t,i,r){const a=await du(e);if(!a.queryObjectIds)throw new Y(r,"Layer source does not support queryObjectIds capability");return a.queryObjectIds($a.from(t)??e.createQuery(),i)}async function y0e(e,t,i,r){const a=await du(e);if(!a.queryFeatureCount)throw new Y(r,"Layer source does not support queryFeatureCount capability");return a.queryFeatureCount($a.from(t)??e.createQuery(),i)}async function m0e(e,t,i,r){const a=await du(e);if(!a.queryExtent)throw new Y(r,"Layer source does not support queryExtent capability");return a.queryExtent($a.from(t)??e.createQuery(),i)}async function g0e(e,t,i,r){const a=await du(e);if(!a.queryRelatedFeatures)throw new Y(r,"Layer source does not support queryRelatedFeatures capability");return a.queryRelatedFeatures($x.from(t),i)}async function v0e(e,t,i,r){const a=await du(e);if(!a.queryRelatedFeaturesCount)throw new Y(r,"Layer source does not support queryRelatedFeaturesCount capability");return a.queryRelatedFeaturesCount($x.from(t),i)}async function w0e(e){const t=e.source;if(t!=null&&t.refresh)try{const{dataChanged:i,updates:r}=await t.refresh();if(r!=null&&(e.sourceJSON={...e.sourceJSON,...r},e.read(r,{origin:"service",url:e.parsedUrl})),i)return!0}catch{}if(e.definitionExpression)try{return(await tN(e.definitionExpression,e.fieldsIndex)).hasDateFunctions}catch{}return!1}function b0e(e){var y,g;const t=new $a,i=(y=e.capabilities)==null?void 0:y.data,r=(g=e.capabilities)==null?void 0:g.query;t.historicMoment=e.historicMoment,t.gdbVersion=e.gdbVersion,t.returnGeometry=!0,r&&(t.compactGeometryEnabled=r.supportsCompactGeometry,t.defaultSpatialReferenceEnabled=r.supportsDefaultSpatialReference),i&&(i.supportsZ&&e.returnZ!=null&&(t.returnZ=e.returnZ),i.supportsM&&e.returnM!=null&&(t.returnM=e.returnM)),t.outFields=["*"];const{timeOffset:a,timeExtent:p}=e;return t.timeExtent=a!=null&&p!=null?p.offset(-a.value,a.unit):p||null,t.multipatchOption=e.geometryType==="multipatch"?"xyFootprint":null,t}function QF(e){const{globalIdField:t,fields:i}=e;if(t)return t;if(i){for(const r of i)if(r.type==="esriFieldTypeGlobalID")return r.name}}function ez(e){const{objectIdField:t,fields:i}=e;if(t)return t;if(i){for(const r of i)if(r.type==="esriFieldTypeOID")return r.name}}function _0e(e){return e.currentVersion?e.currentVersion:e.hasOwnProperty("capabilities")||e.hasOwnProperty("drawingInfo")||e.hasOwnProperty("hasAttachments")||e.hasOwnProperty("htmlPopupType")||e.hasOwnProperty("relationships")||e.hasOwnProperty("timeInfo")||e.hasOwnProperty("typeIdField")||e.hasOwnProperty("types")?10:9.3}function S0e(e,t,i,r){var _,T;const a=i==null?void 0:i.feature,p=!!((_=e.subtypes)!=null&&_.length);if(p&&!(i!=null&&i.excludeImpliedDomains)){const I=T0e(e,t);if(I)return I}const y=p&&x0e(e,a);if(y){const I=(T=y==null?void 0:y.domains)==null?void 0:T[t];return(I==null?void 0:I.type)==="inherited"?r:I}const g=rz(e.types,e.typeIdField,a);if(g){const I=g.domains&&g.domains[t];if(I&&(I==null?void 0:I.type)!=="inherited")return I}if(r)return r;if(!(i!=null&&i.excludeImpliedDomains)){const I=M0e(e,t);if(I)return I}return null}function x0e(e,t){const{subtypes:i,subtypeField:r}=e;if(!(t!=null&&t.attributes)||!(i!=null&&i.length)||!r)return null;const a=t.attributes[r];return a==null?null:i.find(p=>p.code===a)}function T0e(e,t){var y,g;const{fieldsIndex:i,subtypeField:r}=e,{name:a,type:p}=i.get(t)??{};if(!a)return null;if((r&&((y=i.get(r))==null?void 0:y.name))===a&&((g=e.subtypes)!=null&&g.length)){const _=e.subtypes.map(T=>new bh({code:tz(T.code,p),name:T.name}));if(_!=null&&_.length)return new P2({codedValues:_})}return null}function M0e(e,t){var p,y;const{fieldsIndex:i}=e,{name:r,type:a}=i.get(t)??{};if(!r)return null;if(("typeIdField"in e?(p=i.get(e.typeIdField))==null?void 0:p.name:null)===r&&"types"in e&&((y=e.types)!=null&&y.length)){const g=e.types.map(_=>new bh({code:tz(_.id,a),name:_.name}));return new P2({codedValues:g})}return null}function tz(e,t){return t?vN({type:t})&&typeof e=="number"?`${e}`:fte({type:t})&&typeof e=="string"?Number.parseInt(e,10):e:e}async function du(e){return(await e.load()).source}async function ixe(e,t){if(!Ze)return;const i=Ze.findCredential(e);if(i)return i.userId;let r;try{const a=await H6(e,t);a&&(r=await Ze.checkSignInStatus(`${a}/sharing`))}catch{}return r?r.userId:null}async function iz(e,t){if(!Ze||Ze.findCredential(e))return;let i;try{const r=await H6(e,t);r&&(i=await Ze.checkSignInStatus(`${r}/sharing`))}catch{}if(i)try{const r=t!=null?t.signal:null;await Ze.getCredential(e,{signal:r})}catch{}}async function $0e(e,t,i){var a;const r=(a=e.parsedUrl)==null?void 0:a.path;r&&e.authenticationTriggerEvent===t&&await iz(r,i)}async function rxe(e){var i;const t=(i=e.parsedUrl)==null?void 0:i.path;t&&E0e(e)&&await iz(t)}function E0e(e){return I0e(e)&&("serviceDefinitionExpression"in e&&jv(e.serviceDefinitionExpression)||"definitionExpression"in e&&jv(e.definitionExpression))}function I0e(e){var t;return!(!QP(e)||!((t=e.capabilities)!=null&&t.query.supportsCurrentUser))}function jv(e){return!!(e!=null&&e.toLowerCase().includes("current_user"))}function A0e(e){return!vg(e)&&(e.userHasUpdateItemPrivileges||e.editingEnabled)}const e3=od({types:sL});function Ix(e,t){var i;if(e.defaultSymbol)return(i=e.types)!=null&&i.length?new Mx({defaultSymbol:e3(e.defaultSymbol,e,t),field:e.typeIdField,uniqueValueInfos:e.types.map(r=>({id:r.id,symbol:e3(r.symbol,r,t)}))}):new Or({symbol:e3(e.defaultSymbol,e,t)})}function C0e(e){var r,a,p;let t=(r=e.sourceJSON)==null?void 0:r.cacheMaxAge;if(!t)return!1;const i=(p=(a=e.editingInfo)==null?void 0:a.lastEditDate)==null?void 0:p.getTime();return i==null||(t*=1e3,Date.now()-i<t)}async function O0e(e,t,i){if(t==null)return null;const r=[],{objectIdField:a}=e;if(t.forEach(T=>{let I=null;if("attributes"in T){const{attributes:A}=T;I={globalId:A[i],objectId:A[a]!=null&&A[a]!==-1?A[a]:null}}else I={globalId:T.globalId,objectId:T.objectId!=null&&T.objectId!==-1?T.objectId:null};I.globalId!=null&&(I.objectId!=null&&I.objectId!==-1||r.push(I.globalId))}),r.length===0)return null;const p=e.createQuery();p.where=r.map(T=>`${i}='${T}'`).join(" OR "),p.returnGeometry=!1,p.outFields=[a,i],p.cacheHint=!1;const y=await HB(Yde(e,p));if(!y.ok)return null;const g=new Map,_=y.value.features;for(const T of _){const I=T.attributes[i],A=T.attributes[a];I!=null&&A!=null&&A!==-1&&g.set(ehe(I),A)}return g}function rz(e,t,i){if(!t||!i||!e)return null;const r=i.getAttribute(t);return r==null?null:e.find(a=>{const{id:p}=a;return p!=null&&p.toString()===r.toString()})??null}function vg(e){var t;return((t=e.sourceJSON)==null?void 0:t.isMultiServicesView)||P0e(e)}function P0e(e){var t,i;return!!((i=(t=e.sourceJSON)==null?void 0:t.capabilities)!=null&&i.toLowerCase().split(",").map(r=>r.trim()).includes("map"))}function k0e(e,t,i){const r=t==null?void 0:t.queryAttributeBins;if(!r)throw new Y(i,"Layer source does not support binning");switch(e.binParameters.type){case"auto-interval":if(!r.supportsAutoInterval)throw new Y(i,"Layer source does not support auto-interval binning");if(e.binParameters.normalizationType&&(!r.supportsNormalization||!NE(e.binParameters.normalizationType,r.supportedNormalizationTypes)))throw new Y(i,"Layer source does not support normalization binning");break;case"date":if(!r.supportsDate)throw new Y(i,"Layer source does not support date binning");if(e.binParameters.snapToData&&!r.supportsSnapToData)throw new Y(i,"Layer source does not support snapToData binning");if(e.binParameters.returnFullIntervalBin&&!r.supportsReturnFullIntervalBin)throw new Y(i,"Layer source does not support returnFullIntervalBin binning");break;case"fixed-boundaries":if(!r.supportsFixedBoundaries)throw new Y(i,"Layer source does not support fixed-boundaries binning");break;case"fixed-interval":if(!r.supportsFixedInterval)throw new Y(i,"Layer source does not support fixed-interval binning");if(e.binParameters.normalizationType&&(!r.supportsNormalization||!NE(e.binParameters.normalizationType,r.supportedNormalizationTypes)))throw new Y(i,"Layer source does not support normalization binning")}if(e.binParameters.stackBy&&!r.supportsStackBy)throw new Y(i,"Layer source does not support stackBy binning");if(e.binParameters.splitBy&&!r.supportsSplitBy)throw new Y(i,"Layer source does not support splitBy binning");if(e.binParameters.firstDayOfWeek&&!r.supportsFirstDayOfWeek)throw new Y(i,"Layer source does not support firstDayOfWeek binning");const a=r==null?void 0:r.supportedStatistics;if(e.outStatistics&&a){const p=new Map([["count","count"],["sum","sum"],["min","min"],["max","max"],["avg","avg"],["stddev","stddev"],["var","var"],["percentile-continuous","percentileContinuous"],["percentile-discrete","percentileDiscrete"],["centroid-aggregate","centroid"],["convex-hull-aggregate","convexHull"],["envelope-aggregate","envelope"]]);for(const{statisticType:y}of e.outStatistics){const g=p.get(y);if(g&&!a[g])throw new Y(i,`Layer source does not support ${y} statistic type`)}}}function NE(e,t){return e!=null&&!!(t!=null&&t[XF.toJSON(e)])}let ep=class extends at.ClonableMixin(he){constructor(t){super(t),this.shapeAreaField=null,this.shapeLengthField=null,this.units=null}};v([S({type:String,json:{read:{source:"shapeAreaFieldName"}}})],ep.prototype,"shapeAreaField",void 0),v([S({type:String,json:{read:{source:"shapeLengthFieldName"}}})],ep.prototype,"shapeLengthField",void 0),v([S({type:String,json:{read:e=>Tq.read(e)||Mq.read(e)}})],ep.prototype,"units",void 0),ep=v([H("esri.layers.support.GeometryFieldsInfo")],ep);const R0e=ep;var _4;let tp=_4=class extends he{constructor(e){super(e),this.floorField=null,this.viewAllMode=!1,this.viewAllLevelIds=new xe}clone(){return new _4({floorField:this.floorField,viewAllMode:this.viewAllMode,viewAllLevelIds:this.viewAllLevelIds})}};v([S({type:String,json:{write:{isRequired:!0}}})],tp.prototype,"floorField",void 0),v([S({json:{read:!1,write:!1}})],tp.prototype,"viewAllMode",void 0),v([S({json:{read:!1,write:!1}})],tp.prototype,"viewAllLevelIds",void 0),tp=_4=v([H("esri.layers.support.LayerFloorInfo")],tp);const N0e=tp,LE=new rt({esriRelCardinalityOneToOne:"one-to-one",esriRelCardinalityOneToMany:"one-to-many",esriRelCardinalityManyToMany:"many-to-many"}),DE=new rt({esriRelRoleOrigin:"origin",esriRelRoleDestination:"destination"});let cs=class extends at.ClonableMixin(he){constructor(t){super(t),this.cardinality=null,this.catalogId=null,this.composite=null,this.id=null,this.keyField=null,this.keyFieldInRelationshipTable=null,this.name=null,this.relatedTableId=null,this.relationshipTableId=null,this.role=null}};v([S({json:{read:LE.read,write:LE.write}})],cs.prototype,"cardinality",void 0),v([S({json:{name:"catalogID"}})],cs.prototype,"catalogId",void 0),v([S({json:{read:!0,write:!0}})],cs.prototype,"composite",void 0),v([S({json:{read:!0,write:!0}})],cs.prototype,"id",void 0),v([S({json:{read:!0,write:!0}})],cs.prototype,"keyField",void 0),v([S({json:{read:!0,write:!0}})],cs.prototype,"keyFieldInRelationshipTable",void 0),v([S({json:{read:!0,write:!0}})],cs.prototype,"name",void 0),v([S({json:{read:!0,write:!0}})],cs.prototype,"relatedTableId",void 0),v([S({json:{read:!0,write:!0}})],cs.prototype,"relationshipTableId",void 0),v([S({json:{read:DE.read,write:DE.write}})],cs.prototype,"role",void 0),cs=v([H("esri.layers.support.Relationship")],cs);const L0e=cs,D0e=[["binary","application/octet-stream","bin",""]];function oxe(e,t){return az(t.name,(e==null?void 0:e.supportedFormats)??[])!=null}function axe(e,t){if(!e)return!1;const i=j0e(t,e.supportedFormats??[]);return i!=null&&e.editFormats.includes(i)}function sz(e,t){return Cx(V0e(e,t))}function nz(e,t){return Cx(az(e,t))}function lxe(e,t){return lz(U0e(e,t))}function j0e(e,t){return nz(e.name,t)??sz(e.type,t)}function ew(e,t,i){return sz(e,i)??nz(t,i)}function oz({supportedFormats:e}){return ew("model/gltf-binary","glb",e)}function uxe(e){const t=oz(e);return t!=null&&e.editFormats.includes(t)}function F0e({supportedFormats:e}){return ew("model/gltf+json","gltf",e)}function z0e(e){if(!e)return null;const t=oz(e),i=F0e(e);let r=null;for(const a of e.queryFormats){if(a===t)return a;a===i&&(r=a)}return r}function hxe({supportedFormats:e}){return ew("application/esri3do-SR_world","wld",e)}function cxe({supportedFormats:e}){return ew("application/esri3do-SR_prj","prj",e)}function Ax(e){return[...D0e,...e]}function U0e(e,t){return Ax(t).find(i=>Cx(i)===e)}function V0e(e,t){const i=e.toLowerCase();return Ax(t).find(r=>lz(r)===i)}function az(e,t){const i=e.toLowerCase();return Ax(t).find(r=>G0e(r).some(a=>i.endsWith(a)))}function Cx(e){return e==null?void 0:e[0]}function lz(e){return e==null?void 0:e[1].toLowerCase()}function G0e(e){return(e==null?void 0:e[2].split(",").map(t=>t.toLowerCase()))??[]}function pxe(e){var t;return(t=e.tables)==null?void 0:t.find(i=>i.role==="assetMaps")}function $e(e,t,i){return!!uz(e,t,i)}function n0(e,t,i){return uz(e,t,i)}function uz(e,t,i){return e&&e.hasOwnProperty(t)?e[t]:i}const B0e={name:"supportsName",size:"supportsSize",contentType:"supportsContentType",keywords:"supportsKeywords",exifInfo:"supportsExifInfo"};function q0e(e){var i;const t=(i=e==null?void 0:e.supportedSpatialAggregationStatistics)==null?void 0:i.map(r=>r.toLowerCase());return{envelope:!!(t!=null&&t.includes("envelopeaggregate")),centroid:!!(t!=null&&t.includes("centroidaggregate")),convexHull:!!(t!=null&&t.includes("convexhullaggregate"))}}function W1(e,t){var r;const i=(r=e==null?void 0:e.supportedOperationsWithCacheHint)==null?void 0:r.map(a=>a.toLowerCase());return!!(i!=null&&i.includes(t.toLowerCase()))}function H0e(e){var i;const t=(i=e==null?void 0:e.supportedStatisticTypes)==null?void 0:i.map(r=>r.toLowerCase());return{count:!!(t!=null&&t.includes("count")),sum:!!(t!=null&&t.includes("sum")),min:!!(t!=null&&t.includes("min")),max:!!(t!=null&&t.includes("max")),avg:!!(t!=null&&t.includes("avg")),var:!!(t!=null&&t.includes("var")),stddev:!!(t!=null&&t.includes("stddev")),percentileContinuous:!!(t!=null&&t.includes("percentile_continuous")),percentileDiscrete:!!(t!=null&&t.includes("percentile_discrete")),envelope:!!(t!=null&&t.includes("envelopeaggregate")),centroid:!!(t!=null&&t.includes("centroidaggregate")),convexHull:!!(t!=null&&t.includes("convexhullaggregate"))}}function W0e(e){var i;const t=(i=e==null?void 0:e.supportedNormalizationTypes)==null?void 0:i.map(r=>r.toLowerCase());return{field:!!(t!=null&&t.includes("field")),log:!!(t!=null&&t.includes("log")),naturalLog:!!(t!=null&&t.includes("naturallog")),percentOfTotal:!!(t!=null&&t.includes("percentoftotal")),squareRoot:!!(t!=null&&t.includes("squareroot"))}}function hz(e,t){return{analytics:J0e(e),attachment:Z0e(e),data:K0e(e),metadata:Y0e(e),operations:X0e(e.capabilities,e,t),query:Q0e(e,t),queryAttributeBins:i1e(e),queryRelated:e1e(e),queryTopFeatures:t1e(e),editing:r1e(e)}}function J0e(e){return{supportsCacheHint:W1(e.advancedQueryCapabilities,"queryAnalytics")}}function Z0e(e){const t=e.attachmentProperties,i={supportsName:!1,supportsSize:!1,supportsContentType:!1,supportsKeywords:!1,supportsExifInfo:!1,supportsCacheHint:W1(e.advancedQueryCapabilities,"queryAttachments"),supportsOrderByFields:$e(e.advancedQueryCapabilities,"supportsQueryAttachmentOrderByFields",!1),supportsResize:$e(e,"supportsAttachmentsResizing",!1)};return t&&Array.isArray(t)&&t.forEach(r=>{const a=B0e[r.name];a&&(i[a]=!!r.isEnabled)}),i}function K0e(e){return{isVersioned:$e(e,"isDataVersioned",!1),isBranchVersioned:$e(e,"isDataBranchVersioned",!1),supportsAttachment:$e(e,"hasAttachments",!1),supportsM:$e(e,"hasM",!1),supportsZ:$e(e,"hasZ",!1)}}function Y0e(e){return{supportsAdvancedFieldProperties:$e(e,"supportsFieldDescriptionProperty",!1)}}function X0e(e,t,i){const r=e?e.toLowerCase().split(",").map(P=>P.trim()):[],a=i?ud(i):null,p=r.includes(a!=null&&a.serverType==="MapServer"?"data":"query"),y=r.includes("editing")&&!t.datesInUnknownTimezone;let g=y&&r.includes("create"),_=y&&r.includes("delete"),T=y&&r.includes("update");const I=r.includes("changetracking"),A=t.advancedQueryCapabilities;return y&&!(g||_||T)&&(g=_=T=!0),{supportsCalculate:$e(t,"supportsCalculate",!1),supportsTruncate:$e(t,"supportsTruncate",!1),supportsValidateSql:$e(t,"supportsValidateSql",!1),supportsAdd:g,supportsDelete:_,supportsEditing:y,supportsChangeTracking:I,supportsQuery:p,supportsQueryAnalytics:$e(A,"supportsQueryAnalytic",!1),supportsQueryAttachments:$e(A,"supportsQueryAttachments",!1),supportsQueryBins:$e(A,"supportsQueryBins",!1),supportsQueryTopFeatures:$e(A,"supportsTopFeaturesQuery",!1),supportsResizeAttachments:$e(t,"supportsAttachmentsResizing",!1),supportsSync:r.includes("sync"),supportsUpdate:T,supportsExceedsLimitStatistics:$e(t,"supportsExceedsLimitStatistics",!1),supportsAsyncConvert3D:$e(t,"supportsAsyncConvert3D",!1)}}function Q0e(e,t){const i=e.advancedQueryCapabilities,r=e.ownershipBasedAccessControlForFeatures,a=e.archivingInfo,p=e.currentVersion,y=t==null?void 0:t.includes("MapServer"),g=!y||p>=ne("mapserver-pbf-version-support"),_=Gg(t),T=new Set((e.supportedQueryFormats??"").split(",").map(I=>I.toLowerCase().trim()));return{maxRecordCount:n0(e,"maxRecordCount",void 0),maxRecordCountFactor:n0(e,"maxRecordCountFactor",void 0),standardMaxRecordCount:n0(e,"standardMaxRecordCount",void 0),supportedSpatialAggregationStatistics:q0e(i),supportsCacheHint:$e(i,"supportsQueryWithCacheHint",!1)||W1(i,"query"),supportsCentroid:$e(i,"supportsReturningGeometryCentroid",!1),supportsCompactGeometry:_,supportsCurrentUser:$e(i,"supportsCurrentUserQueries",!1),supportsDefaultSpatialReference:$e(i,"supportsDefaultSR",!1),supportsDisjointSpatialRelationship:$e(i,"supportsDisjointSpatialRel",!1),supportsDistance:$e(i,"supportsQueryWithDistance",!1),supportsDistinct:$e(i,"supportsDistinct",e.supportsAdvancedQueries),supportsExtent:$e(i,"supportsReturningQueryExtent",!1),supportsFormatPBF:g&&T.has("pbf"),supportsFullTextSearch:$e(i,"supportsFullTextSearch",!1),supportsGeometryProperties:$e(i,"supportsReturningGeometryProperties",!1),supportsHavingClause:$e(i,"supportsHavingClause",!1),supportsHistoricMoment:$e(a,"supportsQueryWithHistoricMoment",!1),supportsMaxRecordCountFactor:$e(i,"supportsMaxRecordCountFactor",!1),supportsOrderBy:$e(i,"supportsOrderBy",e.supportsAdvancedQueries),supportsPagination:$e(i,"supportsPagination",!1),supportsPercentileStatistics:$e(i,"supportsPercentileStatistics",!1),supportsQuantization:$e(e,"supportsCoordinatesQuantization",!1),supportsQuantizationEditMode:$e(e,"supportsQuantizationEditMode",!1),supportsQueryByAnonymous:$e(r,"allowAnonymousToQuery",!0),supportsQueryByOthers:$e(r,"allowOthersToQuery",!0),supportsQueryGeometry:$e(e,"supportsReturningQueryGeometry",!1),supportsResultType:$e(i,"supportsQueryWithResultType",!1),supportsReturnMesh:!!z0e(e.infoFor3D),supportsSpatialAggregationStatistics:$e(i,"supportsSpatialAggregationStatistics",!1),supportsSqlExpression:$e(i,"supportsSqlExpression",!1),supportsStandardizedQueriesOnly:$e(e,"useStandardizedQueries",!1),supportsStatistics:$e(i,"supportsStatistics",e.supportsStatistics),supportsTopFeaturesQuery:$e(i,"supportsTopFeaturesQuery",!1),supportsTrueCurve:$e(i,"supportsTrueCurve",!1),tileMaxRecordCount:n0(e,"tileMaxRecordCount",void 0)}}function e1e(e){const t=e.advancedQueryCapabilities,i=$e(t,"supportsAdvancedQueryRelated",!1);return{supportsPagination:$e(t,"supportsQueryRelatedPagination",!1),supportsCount:i,supportsOrderBy:i,supportsCacheHint:W1(t,"queryRelated")}}function t1e(e){return{supportsCacheHint:W1(e.advancedQueryCapabilities,"queryTopFilter")}}function i1e(e){const t=e?e.queryBinsCapabilities:void 0;return{supportsDate:$e(t,"supportsDateBin",!1),supportsFixedInterval:$e(t,"supportsFixedIntervalBin",!1),supportsAutoInterval:$e(t,"supportsAutoIntervalBin",!1),supportsFixedBoundaries:$e(t,"supportsFixedBoundariesBin",!1),supportsStackBy:$e(t,"supportsStackBy",!1),supportsSplitBy:$e(t,"supportsSplitBy",!1),supportsSnapToData:$e(t,"supportsSnapToData",!1),supportsReturnFullIntervalBin:$e(t,"supportsReturnFullIntervalBin",!1),supportsFirstDayOfWeek:$e(t,"supportsFirstDayOfWeek",!1),supportsNormalization:$e(t,"supportsNormalization",!1),supportedStatistics:H0e(t),supportedNormalizationTypes:W0e(t)}}function r1e(e){const t=e.ownershipBasedAccessControlForFeatures,i=e?e.advancedEditingCapabilities:void 0;return{supportsGeometryUpdate:$e(e,"allowGeometryUpdates",!0),supportsGlobalId:$e(e,"supportsApplyEditsWithGlobalIds",!1),supportsReturnServiceEditsInSourceSpatialReference:$e(e,"supportsReturnServiceEditsInSourceSR",!1),supportsRollbackOnFailure:$e(e,"supportsRollbackOnFailureParameter",!1),supportsUpdateWithoutM:$e(e,"allowUpdateWithoutMValues",!1),supportsUploadWithItemId:$e(e,"supportsAttachmentsByUploadId",!1),supportsDeleteByAnonymous:$e(t,"allowAnonymousToDelete",!0),supportsDeleteByOthers:$e(t,"allowOthersToDelete",!0),supportsUpdateByAnonymous:$e(t,"allowAnonymousToUpdate",!0),supportsUpdateByOthers:$e(t,"allowOthersToUpdate",!0),supportsAsyncApplyEdits:$e(i,"supportsAsyncApplyEdits",!1),zDefault:n0(e,"zDefault",void 0)}}function dxe(e){var t;return{operations:{supportsAppend:$e(e,"supportsAppend",!1),supportsCoverageQuery:((t=e==null?void 0:e.playbackInfo)==null?void 0:t.klv["0601"])??!1,supportsExportClip:$e(e,"supportsExportClip",!1),supportsExportFrameset:$e(e,"supportsExportFrameset",!1),supportsMensuration:$e(e,"supportsMensuration",!1),supportsUpdate:$e(e,"supportsUpdate",!1)}}}let ia=class extends at.ClonableMixin(he){constructor(t){super(t),this.code=null,this.defaultValues={},this.domains=null,this.name=null}readDomains(t){if(!t)return null;const i={};for(const r of Object.keys(t))i[r]=k2(t[r]);return i}writeDomains(t,i){var a;if(!t)return;const r={};for(const p of Object.keys(t))t[p]&&(r[p]=(a=t[p])==null?void 0:a.toJSON());i.domains=r}};v([S({type:Number,json:{write:!0}})],ia.prototype,"code",void 0),v([S({type:Object,json:{write:!0}})],ia.prototype,"defaultValues",void 0),v([S({json:{write:!0}})],ia.prototype,"domains",void 0),v([me("domains")],ia.prototype,"readDomains",null),v([be("domains")],ia.prototype,"writeDomains",null),v([S({type:String,json:{write:!0}})],ia.prototype,"name",void 0),ia=v([H("esri.layers.support.Subtype")],ia);const s1e=ia,n1e=e=>{let t=class extends e{constructor(){super(...arguments),this.copyright=null,this.capabilities=null,this.dateFieldsTimeZone=null,this.datesInUnknownTimezone=!1,this.definitionExpression=null,this.displayField=null,this.editFieldsInfo=null,this.editingInfo=null,this.elevationInfo=null,this.fieldsIndex=null,this.floorInfo=null,this.fullExtent=null,this.gdbVersion=null,this.geometryFieldsInfo=null,this.geometryType=null,this.globalIdField=null,this.hasM=void 0,this.hasZ=void 0,this.heightModelInfo=null,this.historicMoment=null,this.indexes=new(xe.ofType(co)),this.isTable=!1,this.layerId=void 0,this.maxScale=0,this.minScale=0,this.objectIdField=null,this.preferredTimeZone=null,this.relationships=null,this.returnM=void 0,this.returnZ=void 0,this.serviceDefinitionExpression=null,this.serviceItemId=null,this.sourceJSON=null,this.spatialReference=qe.WGS84,this.subtypeField=null,this.subtypes=null,this.trackIdField=null,this.version=void 0}getFieldDomain(){throw new Error("Not implemented")}getField(i){return this.fieldsIndex.get(i)}get authenticationTriggerEvent(){if(!this.url)return null;const{capabilities:i}=this;if(i){const{query:a,operations:p,editing:y}=i;if(!a.supportsQueryByOthers||!a.supportsQueryByAnonymous||p.supportsEditing&&!(y.supportsUpdateByOthers&&y.supportsUpdateByAnonymous&&y.supportsDeleteByOthers&&y.supportsDeleteByAnonymous))return"load"}if(jv(this.serviceDefinitionExpression)||jv(this.definitionExpression))return"load";if(this.userHasUpdateItemPrivileges){if(C0e(this))return"load";if(this.hasUpdateItemRestrictions)return i.operations.supportsQuery?"editing":"load"}if(this.userHasFullEditingPrivileges&&this.hasFullEditingRestrictions)return"editing";const r=this.editFieldsInfo;return(r!=null&&r.creatorField||r!=null&&r.editorField)&&(i!=null&&i.operations.supportsEditing)?"editing":null}readCapabilitiesFromService(i,r){return hz(r,this.url)}readEditingInfo(i,r){const{editingInfo:a}=r;return a?{lastEditDate:a.lastEditDate!=null?new Date(a.lastEditDate):null}:null}get effectiveCapabilities(){const i=this.capabilities;if(!i)return null;const r=te(i),{operations:a,editing:p}=r;return vg(this)?(this.userHasUpdateItemPrivileges&&(a.supportsQuery=!0),r):this.userHasUpdateItemPrivileges?(a.supportsAdd=a.supportsDelete=a.supportsEditing=a.supportsQuery=a.supportsUpdate=p.supportsDeleteByOthers=p.supportsGeometryUpdate=p.supportsUpdateByOthers=!0,r):(this.userHasFullEditingPrivileges&&a.supportsEditing&&(a.supportsAdd=a.supportsDelete=a.supportsUpdate=p.supportsGeometryUpdate=!0),r)}get effectiveEditingEnabled(){return!1}readGlobalIdFieldFromService(i,r){return QF(r)}get hasFullEditingRestrictions(){const i=this.capabilities;if(!i||vg(this))return!1;const{operations:r,editing:a}=i;return r.supportsEditing&&!(r.supportsAdd&&r.supportsDelete&&r.supportsUpdate&&a.supportsGeometryUpdate)}get hasUpdateItemRestrictions(){const i=this.capabilities;if(!i)return!1;const{operations:r,editing:a}=i;return vg(this)?!r.supportsQuery:!(r.supportsAdd&&r.supportsDelete&&r.supportsEditing&&r.supportsQuery&&r.supportsUpdate&&a.supportsDeleteByOthers&&a.supportsGeometryUpdate&&a.supportsUpdateByOthers)}readIsTableFromService(i,r){return r.type==="Table"}readMaxScale(i,r){return r.effectiveMaxScale||i||0}readMinScale(i,r){return r.effectiveMinScale||i||0}readObjectIdFieldFromService(i,r){return ez(r)}readServiceDefinitionExpression(i,r){return r.definitionQuery||r.definitionExpression}set url(i){if(i==null)return void this._set("url",i);const r=dB({layer:this,url:i,nonStandardUrlAllowed:!0,logger:ye.getLogger(this)});this._set("url",r.url),r.layerId!=null&&this._set("layerId",r.layerId)}writeUrl(i,r,a,p){fB(this,i,null,r,p)}readVersion(i,r){return _0e(r)}};return v([S({readOnly:!0})],t.prototype,"authenticationTriggerEvent",null),v([S({type:String,json:{origins:{service:{read:{source:"copyrightText"}}}}})],t.prototype,"copyright",void 0),v([S({readOnly:!0,json:{read:!1,origins:{service:{read:{source:["advancedQueryCapabilities","allowGeometryUpdates","allowUpdateWithoutMValues","archivingInfo","capabilities","datesInUnknownTimezone","hasAttachments","hasM","hasZ","isDataBranchVersioned","isDataVersioned","maxRecordCount","maxRecordCountFactor","ownershipBasedAccessControlForFeatures","standardMaxRecordCount","supportedQueryFormats","supportsAdvancedQueries","supportsApplyEditsWithGlobalIds","supportsAttachmentsByUploadId","supportsAttachmentsResizing","supportsCalculate","supportsCoordinatesQuantization","supportsExceedsLimitStatistics","supportsFieldDescriptionProperty","supportsQuantizationEditMode","supportsRollbackOnFailureParameter","supportsStatistics","supportsTruncate","supportsValidateSql","tileMaxRecordCount","useStandardizedQueries"]}}}}})],t.prototype,"capabilities",void 0),v([me("service","capabilities")],t.prototype,"readCapabilitiesFromService",null),v([S(sv("dateFieldsTimeReference"))],t.prototype,"dateFieldsTimeZone",void 0),v([S({type:Boolean})],t.prototype,"datesInUnknownTimezone",void 0),v([S({type:String,json:{origins:{service:{read:!1,write:!1}},name:"layerDefinition.definitionExpression",write:{enabled:!0,allowNull:!0}}})],t.prototype,"definitionExpression",void 0),v([S({type:String,json:{origins:{service:{read:{source:"displayField"}}}}})],t.prototype,"displayField",void 0),v([S({readOnly:!0,type:Kde})],t.prototype,"editFieldsInfo",void 0),v([S({readOnly:!0})],t.prototype,"editingInfo",void 0),v([me("editingInfo")],t.prototype,"readEditingInfo",null),v([S({readOnly:!0})],t.prototype,"effectiveCapabilities",null),v([S()],t.prototype,"effectiveEditingEnabled",null),v([S((()=>{const i=te(Bde),r=i.json.origins;return r["web-map"]={read:!1,write:!1},r["portal-item"]={read:!1,write:!1},i})())],t.prototype,"elevationInfo",void 0),v([S()],t.prototype,"fieldsIndex",void 0),v([S({type:N0e,json:{name:"layerDefinition.floorInfo",write:{layerContainerTypes:Jt}}})],t.prototype,"floorInfo",void 0),v([S({type:Ct,json:{origins:{service:{read:{source:"extent"}}}}})],t.prototype,"fullExtent",void 0),v([S()],t.prototype,"gdbVersion",void 0),v([S({readOnly:!0,type:R0e,json:{read:{source:"geometryProperties"}}})],t.prototype,"geometryFieldsInfo",void 0),v([S({type:["point","polygon","polyline","multipoint","multipatch","mesh"],json:{origins:{service:{read:b4.read}}}})],t.prototype,"geometryType",void 0),v([S({type:String})],t.prototype,"globalIdField",void 0),v([me("service","globalIdField",["globalIdField","fields"])],t.prototype,"readGlobalIdFieldFromService",null),v([S({readOnly:!0})],t.prototype,"hasFullEditingRestrictions",null),v([S({type:Boolean,json:{origins:{service:{read:!0}}}})],t.prototype,"hasM",void 0),v([S({readOnly:!0})],t.prototype,"hasUpdateItemRestrictions",null),v([S({type:Boolean,json:{origins:{service:{read:!0}}}})],t.prototype,"hasZ",void 0),v([S({readOnly:!0,type:R1})],t.prototype,"heightModelInfo",void 0),v([S({type:Date})],t.prototype,"historicMoment",void 0),v([S({type:xe.ofType(co),readOnly:!0})],t.prototype,"indexes",void 0),v([S({readOnly:!0})],t.prototype,"isTable",void 0),v([me("service","isTable",["type"])],t.prototype,"readIsTableFromService",null),v([S({type:Number,json:{origins:{service:{read:{source:"id"}},"portal-item":{read:!1,write:{target:"id"}}},read:!1}})],t.prototype,"layerId",void 0),v([S(Jde)],t.prototype,"maxScale",void 0),v([me("service","maxScale",["maxScale","effectiveMaxScale"])],t.prototype,"readMaxScale",null),v([S(Wde)],t.prototype,"minScale",void 0),v([me("service","minScale",["minScale","effectiveMinScale"])],t.prototype,"readMinScale",null),v([S({type:String})],t.prototype,"objectIdField",void 0),v([me("service","objectIdField",["objectIdField","fields"])],t.prototype,"readObjectIdFieldFromService",null),v([S(sv("preferredTimeReference"))],t.prototype,"preferredTimeZone",void 0),v([S({type:[L0e],readOnly:!0})],t.prototype,"relationships",void 0),v([S({type:Boolean})],t.prototype,"returnM",void 0),v([S({type:Boolean})],t.prototype,"returnZ",void 0),v([S({readOnly:!0,json:{write:!1}})],t.prototype,"serverGens",void 0),v([S({readOnly:!0})],t.prototype,"serviceDefinitionExpression",void 0),v([me("service","serviceDefinitionExpression",["definitionQuery","definitionExpression"])],t.prototype,"readServiceDefinitionExpression",null),v([S({type:String,readOnly:!0,json:{read:!1,origins:{service:{read:!0}}}})],t.prototype,"serviceItemId",void 0),v([S()],t.prototype,"sourceJSON",void 0),v([S({type:qe,json:{origins:{service:{read:{source:"extent.spatialReference"}}}}})],t.prototype,"spatialReference",void 0),v([S({type:String,readOnly:!0,json:{origins:{service:{read:!0}}}})],t.prototype,"subtypeField",void 0),v([S({type:[s1e],readOnly:!0,json:{read:!1,origins:{service:{read:!0}}}})],t.prototype,"subtypes",void 0),v([S({type:String,json:{read:{source:"timeInfo.trackIdField"}}})],t.prototype,"trackIdField",void 0),v([S(Vde)],t.prototype,"url",null),v([be("url")],t.prototype,"writeUrl",null),v([S({json:{origins:{service:{read:!0}},read:!1}})],t.prototype,"version",void 0),v([me("service","version",["currentVersion","capabilities","drawingInfo","hasAttachments","htmlPopupType","relationships","timeInfo","typeIdField","types"])],t.prototype,"readVersion",null),t=v([H("esri.layers.mixins.FeatureLayerBase")],t),t};let ip=class extends at.ClonableMixin(he){constructor(t){super(t),this.expression=null,this.title=null,this.returnType=null}};v([S({type:String,json:{write:!0}})],ip.prototype,"expression",void 0),v([S({type:String,json:{write:!0}})],ip.prototype,"title",void 0),v([S({type:String,json:{write:!0}})],ip.prototype,"returnType",void 0),ip=v([H("esri.layers.support.ExpressionInfo")],ip);const Ox=ip;var S4;let ra=S4=class extends he{constructor(e){super(e),this.isAutoGenerated=!1,this.name=null,this.alias=null,this.onStatisticField=null,this.onStatisticExpression=null,this.statisticType=null}clone(){return new S4({name:this.name,alias:this.alias,isAutoGenerated:this.isAutoGenerated,onStatisticExpression:te(this.onStatisticExpression),onStatisticField:this.onStatisticField,statisticType:this.statisticType})}};v([S({type:Boolean,json:{write:!0}})],ra.prototype,"isAutoGenerated",void 0),v([S({type:String,json:{write:!0}})],ra.prototype,"name",void 0),v([S({type:String,json:{write:!0}})],ra.prototype,"alias",void 0),v([S({type:String,json:{write:!0}})],ra.prototype,"onStatisticField",void 0),v([S({type:Ox,json:{write:!0}})],ra.prototype,"onStatisticExpression",void 0),v([S({type:String,json:{write:!0}})],ra.prototype,"statisticType",void 0),ra=S4=v([H("esri.layers.support.AggregateField")],ra);const nu=ra;let Hl=class extends he{constructor(){super(...arguments),this.type=null}};v([S({type:["selection","cluster","binning"],readOnly:!0,json:{read:!1,write:!0}})],Hl.prototype,"type",void 0),Hl=v([H("esri.layers.support.FeatureReduction")],Hl);const Px="__begin__",kx="__end__",o1e=new RegExp(Px,"ig"),a1e=new RegExp(kx,"ig"),jE=new RegExp("^"+Px,"i"),FE=new RegExp(kx+"$","i"),Fv='"',l1e=Fv+" + ",u1e=" + "+Fv;function h1e(e){return e.replaceAll(new RegExp("\\[","g"),"{").replaceAll(new RegExp("\\]","g"),"}")}function c1e(e){return e.replaceAll(new RegExp("\\{","g"),"[").replaceAll(new RegExp("\\}","g"),"]")}function Rx(e){const t={expression:"",type:"none"};return e.labelExpressionInfo?e.labelExpressionInfo.value?(t.expression=e.labelExpressionInfo.value,t.type="conventional"):e.labelExpressionInfo.expression&&(t.expression=e.labelExpressionInfo.expression,t.type="arcade"):e.labelExpression!=null&&(t.expression=h1e(e.labelExpression),t.type="conventional"),t}function p1e(e){const t=Rx(e);switch(t.type){case"conventional":return x4(t.expression);case"arcade":return t.expression}return null}function d1e(e){const t=Rx(e);switch(t.type){case"conventional":return y1e(t.expression);case"arcade":return cz(t.expression)}return null}function x4(e){let t;return e?(t=Hv(e,i=>Px+'$feature["'+i+'"]'+kx),t=jE.test(t)?t.replace(jE,""):Fv+t,t=FE.test(t)?t.replace(FE,""):t+Fv,t=t.replaceAll(o1e,l1e).replaceAll(a1e,u1e)):t='""',t}const f1e=/^\s*\{([^}]+)\}\s*$/i;function y1e(e){const t=e==null?void 0:e.match(f1e);return(t==null?void 0:t[1].trim())||null}const m1e=/^\s*(?:(?:\$feature\.(\w+))|(?:\$feature\[(["'])(.+)(\2)\]));?\s*$/i,g1e=/^\s*(?:(?:\$feature\.(\w+))|(?:\$feature\[(["'])(.+)(\2)\]));?\s*(?:DomainName\(\s*\$feature\s*,\s*(["'])(\1|\3)(\5)\s*\));?\s*$/i,v1e=/^\s*(?:DomainName\(\s*\$feature\s*,\s*(["'])(.+)(\1)\s*\));?\s*$/i;function cz(e){if(!e)return null;let t=m1e.exec(e)||g1e.exec(e);return t?t[1]||t[3]:(t=v1e.exec(e),t?t[2]:null)}var T4;let vl=T4=class extends he{constructor(){super(...arguments),this.expression=null,this.title=null,this.value=null}readExpression(e,t){return t.value?x4(t.value):e}writeExpression(e,t,i){this.value!=null&&(e=x4(this.value)),e!=null&&(t[i]=e)}clone(){return new T4({expression:this.expression,title:this.title,value:this.value})}};v([S({type:String,json:{write:{writerEnsuresNonNull:!0}}})],vl.prototype,"expression",void 0),v([me("expression",["expression","value"])],vl.prototype,"readExpression",null),v([be("expression")],vl.prototype,"writeExpression",null),v([S({type:String,json:{write:!0,origins:{"web-scene":{write:!1}}}})],vl.prototype,"title",void 0),v([S({json:{read:!1,write:!1}})],vl.prototype,"value",void 0),vl=T4=v([H("esri.layers.support.LabelExpressionInfo")],vl);const pz=vl;var M4;const Ky=new rt({esriServerPointLabelPlacementAboveCenter:"above-center",esriServerPointLabelPlacementAboveLeft:"above-left",esriServerPointLabelPlacementAboveRight:"above-right",esriServerPointLabelPlacementBelowCenter:"below-center",esriServerPointLabelPlacementBelowLeft:"below-left",esriServerPointLabelPlacementBelowRight:"below-right",esriServerPointLabelPlacementCenterCenter:"center-center",esriServerPointLabelPlacementCenterLeft:"center-left",esriServerPointLabelPlacementCenterRight:"center-right",esriServerLinePlacementAboveAfter:"above-after",esriServerLinePlacementAboveAlong:"above-along",esriServerLinePlacementAboveBefore:"above-before",esriServerLinePlacementAboveStart:"above-start",esriServerLinePlacementAboveEnd:"above-end",esriServerLinePlacementBelowAfter:"below-after",esriServerLinePlacementBelowAlong:"below-along",esriServerLinePlacementBelowBefore:"below-before",esriServerLinePlacementBelowStart:"below-start",esriServerLinePlacementBelowEnd:"below-end",esriServerLinePlacementCenterAfter:"center-after",esriServerLinePlacementCenterAlong:"center-along",esriServerLinePlacementCenterBefore:"center-before",esriServerLinePlacementCenterStart:"center-start",esriServerLinePlacementCenterEnd:"center-end",esriServerPolygonPlacementAlwaysHorizontal:"always-horizontal"},{ignoreUnknown:!0});function Yy(e,t,i){return{enabled:!s5(i==null?void 0:i.layer)}}function dz(e){var t;return!e||e.origin!=="service"&&((t=e.layer)==null?void 0:t.type)!=="map-image"}function w1e(e){return(e==null?void 0:e.type)==="map-image"}function fz(e){var t,i;return!!w1e(e)&&!!((i=(t=e.capabilities)==null?void 0:t.exportMap)!=null&&i.supportsArcadeExpressionForLabeling)}function b1e(e){return dz(e)||fz(e==null?void 0:e.layer)}let li=M4=class extends he{static evaluateWhere(e,t){const i=(r,a,p)=>{switch(a){case"=":return r==p;case"<>":return r!=p;case">":return r>p;case">=":return r>=p;case"<":return r<p;case"<=":return r<=p}return!1};try{if(e==null)return!0;const r=e.split(" ");if(r.length===3)return i(t[r[0]],r[1],r[2]);if(r.length===7){const a=i(t[r[0]],r[1],r[2]),p=r[3],y=i(t[r[4]],r[5],r[6]);switch(p){case"AND":return a&&y;case"OR":return a||y}}return!1}catch{}}constructor(e){super(e),this.type="label",this.name=null,this.allowOverrun=!1,this.deconflictionStrategy="static",this.labelExpression=null,this.labelExpressionInfo=null,this.labelPlacement=null,this.labelPosition="curved",this.maxScale=0,this.minScale=0,this.repeatLabel=!0,this.repeatLabelDistance=null,this.symbol=jfe,this.useCodedValues=void 0,this.where=null}readLabelExpression(e,t){const i=t.labelExpressionInfo;if(!i||!i.value&&!i.expression)return e}writeLabelExpression(e,t,i){if(this.labelExpressionInfo){if(this.labelExpressionInfo.value!=null)e=c1e(this.labelExpressionInfo.value);else if(this.labelExpressionInfo.expression!=null){const r=cz(this.labelExpressionInfo.expression);r&&(e="["+r+"]")}}e!=null&&(t[i]=e)}writeLabelExpressionInfo(e,t,i,r){if(e==null&&this.labelExpression!=null&&dz(r))e=new pz({expression:this.getLabelExpressionArcade()});else if(!e)return;const a=e.toJSON(r);a.expression&&(t[i]=a)}writeMaxScale(e,t){(e||this.minScale)&&(t.maxScale=e)}writeMinScale(e,t){(e||this.maxScale)&&(t.minScale=e)}getLabelExpression(){return Rx(this)}getLabelExpressionArcade(){return p1e(this)}getLabelExpressionSingleField(){return d1e(this)}hash(){return JSON.stringify(this)}clone(){return new M4({allowOverrun:this.allowOverrun,deconflictionStrategy:this.deconflictionStrategy,labelExpression:this.labelExpression,labelExpressionInfo:te(this.labelExpressionInfo),labelPosition:this.labelPosition,labelPlacement:this.labelPlacement,maxScale:this.maxScale,minScale:this.minScale,name:this.name,repeatLabel:this.repeatLabel,repeatLabelDistance:this.repeatLabelDistance,symbol:te(this.symbol),where:this.where,useCodedValues:this.useCodedValues})}};v([S({type:String,json:{write:!0}})],li.prototype,"name",void 0),v([S({type:Boolean,json:{write:!0,default:!1,origins:{"web-scene":{write:!1},"portal-item":{default:!1,write:{overridePolicy:Yy}}}}})],li.prototype,"allowOverrun",void 0),v([S({type:String,json:{write:!0,default:"static",origins:{"web-scene":{write:!1},"portal-item":{default:"static",write:{overridePolicy:Yy}}}}})],li.prototype,"deconflictionStrategy",void 0),v([S({type:String,json:{write:{overridePolicy(e,t,i){return this.labelExpressionInfo&&(i==null?void 0:i.origin)==="service"&&fz(i.layer)?{enabled:!1}:{allowNull:!0}}}}})],li.prototype,"labelExpression",void 0),v([me("labelExpression")],li.prototype,"readLabelExpression",null),v([be("labelExpression")],li.prototype,"writeLabelExpression",null),v([S({type:pz,json:{write:{overridePolicy:(e,t,i)=>b1e(i)?{allowNull:!0}:{enabled:!1}}}})],li.prototype,"labelExpressionInfo",void 0),v([be("labelExpressionInfo")],li.prototype,"writeLabelExpressionInfo",null),v([S({type:Ky.apiValues,json:{type:Ky.jsonValues,read:Ky.read,write:Ky.write}})],li.prototype,"labelPlacement",void 0),v([S({type:["curved","parallel"],json:{write:!0,origins:{"web-map":{write:!1},"web-scene":{write:!1},"portal-item":{write:!1}}}})],li.prototype,"labelPosition",void 0),v([S({type:Number})],li.prototype,"maxScale",void 0),v([be("maxScale")],li.prototype,"writeMaxScale",null),v([S({type:Number})],li.prototype,"minScale",void 0),v([be("minScale")],li.prototype,"writeMinScale",null),v([S({type:Boolean,json:{write:!0,origins:{"web-scene":{write:!1},"portal-item":{write:{overridePolicy:Yy}}}}})],li.prototype,"repeatLabel",void 0),v([S({type:Number,cast:ht,json:{write:!0,origins:{"web-scene":{write:!1},"portal-item":{write:{overridePolicy:Yy}}}}})],li.prototype,"repeatLabelDistance",void 0),v([S({types:$ie,json:{origins:{"web-scene":{types:Eie,write:ME,default:null}},write:ME,default:null}})],li.prototype,"symbol",void 0),v([S({type:Boolean,json:{write:!0}})],li.prototype,"useCodedValues",void 0),v([S({type:String,json:{write:!0}})],li.prototype,"where",void 0),li=M4=v([H("esri.layers.support.LabelClass")],li);const Td=li;var $4;let wl=$4=class extends he{constructor(e){super(e),this.description=null,this.label=null,this.minValue=null,this.maxValue=0,this.symbol=null}clone(){var e;return new $4({description:this.description,label:this.label,minValue:this.minValue,maxValue:this.maxValue,symbol:((e=this.symbol)==null?void 0:e.clone())??null})}getMeshHash(){const e=JSON.stringify(this.symbol);return`${this.minValue}.${this.maxValue}.${e}`}};v([S({type:String,json:{write:!0}})],wl.prototype,"description",void 0),v([S({type:String,json:{write:!0}})],wl.prototype,"label",void 0),v([S({type:Number,json:{read:{source:"classMinValue"},write:{target:"classMinValue"}}})],wl.prototype,"minValue",void 0),v([S({type:Number,json:{read:{source:"classMaxValue"},write:{target:"classMaxValue"}}})],wl.prototype,"maxValue",void 0),v([S(Sx)],wl.prototype,"symbol",void 0),wl=$4=v([H("esri.renderers.support.ClassBreakInfo")],wl);const zv=wl;var E4;const yz="log",wg="percent-of-total",bg="field",Xy=new rt({esriNormalizeByLog:yz,esriNormalizeByPercentOfTotal:wg,esriNormalizeByField:bg}),_1e=di(zv);let wi=E4=class extends xd(Ra){constructor(e){super(e),this._compiledValueExpression={valueExpression:null,compiledFunction:null},this.backgroundFillSymbol=null,this.classBreakInfos=null,this.defaultLabel=null,this.defaultSymbol=null,this.field=null,this.isMaxInclusive=!0,this.legendOptions=null,this.normalizationField=null,this.normalizationTotal=null,this.type="class-breaks",this.valueExpression=null,this.valueExpressionTitle=null,this._set("classBreakInfos",[])}readClassBreakInfos(e,t,i){if(!Array.isArray(e))return;let r=t.minValue;return e.map(a=>{const p=new zv;return p.read(a,i),p.minValue==null&&(p.minValue=r),p.maxValue==null&&(p.maxValue=p.minValue),r=p.maxValue,p})}writeClassBreakInfos(e,t,i,r){const a=e.map(p=>p.write({},r));this._areClassBreaksConsecutive()&&a.forEach(p=>delete p.classMinValue),t[i]=a}castField(e){return e==null?e:typeof e=="function"?(ye.getLogger(this).error(".field: field must be a string value"),null):S1(e)}get minValue(){return this.classBreakInfos&&this.classBreakInfos[0]&&this.classBreakInfos[0].minValue||0}get normalizationType(){let e=this._get("normalizationType");const t=!!this.normalizationField,i=this.normalizationTotal!=null;return t||i?(e=t&&bg||i&&wg||null,t&&i&&ye.getLogger(this).warn("warning: both normalizationField and normalizationTotal are set!")):e!==bg&&e!==wg||(e=null),e}set normalizationType(e){this._set("normalizationType",e)}addClassBreakInfo(e,t,i){let r=null;r=typeof e=="number"?new zv({minValue:e,maxValue:t,symbol:nL(i)}):_1e(te(e)),this.classBreakInfos.push(r),this.classBreakInfos.length===1&&this.notifyChange("minValue")}removeClassBreakInfo(e,t){const i=this.classBreakInfos.length;for(let r=0;r<i;r++){const a=[this.classBreakInfos[r].minValue,this.classBreakInfos[r].maxValue];if(a[0]===e&&a[1]===t){this.classBreakInfos.splice(r,1);break}}}getBreakIndex(e,t){return this.valueExpression&&(t==null?void 0:t.arcade)==null&&ye.getLogger(this).warn(""),this.valueExpression?this._getBreakIndexForExpression(e,t):this._getBreakIndexForField(e)}async getClassBreakInfo(e,t){let i=t;this.valueExpression&&(t==null?void 0:t.arcade)==null&&(i={...i,arcade:await Ql()});const r=this.getBreakIndex(e,i);return r!==-1?this.classBreakInfos[r]:null}getSymbol(e,t){if(this.valueExpression&&(t==null?void 0:t.arcade)==null)return void ye.getLogger(this).error("#getSymbol()","Please use getSymbolAsync if valueExpression is used");const i=this.getBreakIndex(e,t);return i>-1?this.classBreakInfos[i].symbol:this.defaultSymbol}async getSymbolAsync(e,t){let i=t;if(this.valueExpression&&(t==null?void 0:t.arcade)==null){const a=await Ql(),{arcadeUtils:p}=a;p.hasGeometryOperations(this.valueExpression)&&await p.enableGeometryOperations(),i={...i,arcade:a}}const r=this.getBreakIndex(e,i);return r>-1?this.classBreakInfos[r].symbol:this.defaultSymbol}get symbols(){const e=[];return this.classBreakInfos.forEach(t=>{t.symbol&&e.push(t.symbol)}),this.defaultSymbol&&e.push(this.defaultSymbol),e}getAttributeHash(){var e;return((e=this.visualVariables)==null?void 0:e.reduce((t,i)=>t+i.getAttributeHash(),""))??""}getMeshHash(){const e=JSON.stringify(this.backgroundFillSymbol),t=JSON.stringify(this.defaultSymbol),i=`${this.normalizationField}.${this.normalizationType}.${this.normalizationTotal}`;return`${e}.${t}.${this.classBreakInfos.reduce((r,a)=>r+a.getMeshHash(),"")}.${i}.${this.field}.${this.valueExpression}`}get arcadeRequired(){return this.arcadeRequiredForVisualVariables||!!this.valueExpression}clone(){var e,t;return new E4({field:this.field,backgroundFillSymbol:(e=this.backgroundFillSymbol)==null?void 0:e.clone(),defaultLabel:this.defaultLabel,defaultSymbol:(t=this.defaultSymbol)==null?void 0:t.clone(),valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,classBreakInfos:te(this.classBreakInfos),isMaxInclusive:this.isMaxInclusive,normalizationField:this.normalizationField,normalizationTotal:this.normalizationTotal,normalizationType:this.normalizationType,visualVariables:te(this.visualVariables),legendOptions:te(this.legendOptions),authoringInfo:te(this.authoringInfo)})}async collectRequiredFields(e,t){const i=[this.collectVVRequiredFields(e,t),this.collectSymbolFields(e,t)];await Promise.all(i)}async collectSymbolFields(e,t){const i=[...this.symbols.map(r=>r.collectRequiredFields(e,t)),vr(e,t,this.valueExpression)];Cr(e,t,this.field),Cr(e,t,this.normalizationField),await Promise.all(i)}_getBreakIndexForExpression(e,t){const{viewingMode:i,scale:r,spatialReference:a,arcade:p,timeZone:y}=t??{},{valueExpression:g}=this;let _=this._compiledValueExpression.valueExpression===g?this._compiledValueExpression.compiledFunction:null;const T=p.arcadeUtils;if(!_){const A=T.createSyntaxTree(g);_=T.createFunction(A),this._compiledValueExpression.compiledFunction=_}this._compiledValueExpression.valueExpression=g;const I=T.executeFunction(_,T.createExecContext(e,T.getViewInfo({viewingMode:i,scale:r,spatialReference:a}),y));return this._getBreakIndexfromInfos(I)}_getBreakIndexForField(e){const t=this.field,i=e.attributes,r=this.normalizationType;let a=parseFloat(i[t]);if(r){const p=this.normalizationTotal,y=parseFloat(this.normalizationField?i[this.normalizationField]:void 0);if(r===yz)a=Math.log(a)*Math.LOG10E;else if(r!==wg||p==null||isNaN(p)){if(r===bg&&!isNaN(y)){if(isNaN(a)||isNaN(y))return-1;a/=y}}else a=a/p*100}return this._getBreakIndexfromInfos(a)}_getBreakIndexfromInfos(e){const t=this.isMaxInclusive;if(e!=null&&typeof e=="number"&&!isNaN(e))for(let i=0;i<this.classBreakInfos.length;i++){const r=[this.classBreakInfos[i].minValue,this.classBreakInfos[i].maxValue];if(r[0]<=e&&(t?e<=r[1]:e<r[1]))return i}return-1}_areClassBreaksConsecutive(){const e=this.classBreakInfos,t=e.length;for(let i=1;i<t;i++)if(e[i-1].maxValue!==e[i].minValue)return!1;return!0}};v([S(xx)],wi.prototype,"backgroundFillSymbol",void 0),v([S({type:[zv],json:{write:{isRequired:!0}}})],wi.prototype,"classBreakInfos",void 0),v([me("classBreakInfos")],wi.prototype,"readClassBreakInfos",null),v([be("classBreakInfos")],wi.prototype,"writeClassBreakInfos",null),v([S({type:String,json:{write:!0}})],wi.prototype,"defaultLabel",void 0),v([S(Q2)],wi.prototype,"defaultSymbol",void 0),v([S({type:String,json:{write:!0}})],wi.prototype,"field",void 0),v([ct("field")],wi.prototype,"castField",null),v([S({type:Boolean})],wi.prototype,"isMaxInclusive",void 0),v([S({type:Tx,json:{write:!0}})],wi.prototype,"legendOptions",void 0),v([S({type:Number,readOnly:!0,value:null,json:{read:!1,write:{overridePolicy(){return this.classBreakInfos.length!==0&&this._areClassBreaksConsecutive()?{enabled:!0}:{enabled:!1}}}}})],wi.prototype,"minValue",null),v([S({type:String,json:{write:!0}})],wi.prototype,"normalizationField",void 0),v([S({type:Number,json:{write:!0}})],wi.prototype,"normalizationTotal",void 0),v([S({type:Xy.apiValues,value:null,json:{type:Xy.jsonValues,read:Xy.read,write:Xy.write}})],wi.prototype,"normalizationType",null),v([Re({classBreaks:"class-breaks"})],wi.prototype,"type",void 0),v([S({type:String,json:{write:!0}})],wi.prototype,"valueExpression",void 0),v([S({type:String,json:{write:!0}})],wi.prototype,"valueExpressionTitle",void 0),wi=E4=v([H("esri.renderers.ClassBreaksRenderer")],wi);const mz=wi,I4=-3,S1e=I4-1;var pa;(function(e){e[e.ALL=0]="ALL",e[e.SOME=1]="SOME"})(pa||(pa={}));let x1e=class{get size(){return this._size}constructor(t=10485760){this._maxSize=t,this._db=new Map,this._size=0,this._hit=0,this._miss=0,this._removeFuncs=new xh,this._users=new xh}destroy(){this.clearAll(),this._removeFuncs.clear(),this._users.clear()}register(t){this._users.push(t)}deregister(t){this._users.removeUnordered(t)}registerRemoveFunc(t,i){this._removeFuncs.push([t,i])}deregisterRemoveFunc(t){this._removeFuncs.filterInPlace(i=>i[0]!==t)}get maxSize(){return this._maxSize}set maxSize(t){this._maxSize=Math.max(t,-1),this._checkSize()}getSize(t,i){const r=this._db.get(t.id+i);return(r==null?void 0:r.size)??0}put(t,i,r,a,p){i=t.id+i;const y=this._db.get(i);if(y&&(this._size-=y.size,t.size-=y.size,this._db.delete(i),y.entry!==r&&this._notifyRemove(i,y.entry,y.size,pa.ALL)),a>this._maxSize)return void this._notifyRemove(i,r,a,pa.ALL);if(r===void 0)return void console.warn("Refusing to cache undefined entry ");if(!a||a<0)return console.warn(`Refusing to cache entry with size ${a} for key ${i}`),void this._notifyRemove(i,r,0,pa.ALL);const g=1+Math.max(p,S1e)-I4;this._db.set(i,new T1e(r,a,g)),this._size+=a,t.size+=a,this._checkSize()}updateSize(t,i,r,a){i=t.id+i;const p=this._db.get(i);if(p&&p.entry===r){for(this._size-=p.size,t.size-=p.size;a>this._maxSize;){const y=this._notifyRemove(i,r,a,pa.SOME);if(!(y!=null&&y>0))return void this._db.delete(i);a=y}p.size=a,this._size+=a,t.size+=a,this._checkSize()}}pop(t,i){i=t.id+i;const r=this._db.get(i);if(r)return this._size-=r.size,t.size-=r.size,this._db.delete(i),++this._hit,r.entry;++this._miss}get(t,i){i=t.id+i;const r=this._db.get(i);if(r!==void 0)return this._db.delete(i),r.lives=r.lifetime,this._db.set(i,r),++this._hit,r.entry;++this._miss}peek(t,i){const r=this._db.get(t.id+i);return r?++this._hit:++this._miss,r==null?void 0:r.entry}get performanceInfo(){const t={Size:Math.round(this._size/1048576)+"/"+Math.round(this._maxSize/1048576)+"MB","Hit rate":Math.round(100*this._getHitRate())+"%",Entries:this._db.size.toString()},i={},r=new Array;this._db.forEach((y,g)=>{const _=y.lifetime;r[_]=(r[_]||0)+y.size,this._users.forAll(T=>{const{id:I,name:A}=T;if(g.startsWith(I)){const P=i[A]||0;i[A]=P+y.size}})});const a={};this._users.forAll(y=>{const g=y.name;if("hitRate"in y&&typeof y.hitRate=="number"&&!isNaN(y.hitRate)&&y.hitRate>0){const _=i[g]||0;i[g]=_,a[g]=Math.round(100*y.hitRate)+"%"}else a[g]="0%"});const p=Object.keys(i);p.sort((y,g)=>i[g]-i[y]),p.forEach(y=>t[y]=Math.round(i[y]/2**20)+"MB / "+a[y]);for(let y=r.length-1;y>=0;--y){const g=r[y];g&&(t["Priority "+(y+I4-1)]=Math.round(g/this._size*100)+"%")}return t}resetStats(){this._hit=this._miss=0,this._users.forAll(t=>t.resetHitRate())}clear(t){const i=t.id;this._db.forEach((r,a)=>{a.startsWith(i)&&(this._size-=r.size,this._db.delete(a),this._notifyRemove(a,r.entry,r.size,pa.ALL))}),t.size=0}clearAll(){this._db.forEach((t,i)=>this._notifyRemove(i,t.entry,t.size,pa.ALL)),this._users.forAll(t=>t.size=0),this._size=0,this._db.clear()}_getHitRate(){return this._hit/(this._hit+this._miss)}_notifyRemove(t,i,r,a){let p;return this._removeFuncs.some(y=>{if(t.startsWith(y[0])){const g=y[1](i,a,r);return typeof g=="number"&&(p=g),!0}return!1}),p}_checkSize(){this._users.forAll(t=>this._checkSizeLimits(t)),this._checkSizeLimits()}_checkSizeLimits(t){const i=t??this;if(i.maxSize<0||i.size<=i.maxSize)return;const r=t==null?void 0:t.id;let a=!0;for(;a;){a=!1;for(const[p,y]of this._db)if(y.lifetime===0&&(!r||p.startsWith(r))){if(this._purgeItem(p,y,t),i.size<=.9*i.maxSize)return;a||(a=this._db.has(p))}}for(const[p,y]of this._db)if((!r||p.startsWith(r))&&(this._purgeItem(p,y,t),i.size<=.9*i.maxSize))return}_purgeItem(t,i,r=this._users.find(a=>t.startsWith(a.id))){if(this._db.delete(t),i.lives<=1){this._size-=i.size,r&&(r.size-=i.size);const a=this._notifyRemove(t,i.entry,i.size,pa.SOME);a!=null&&a>0&&(this._size+=a,r&&(r.size+=a),i.lives=i.lifetime,i.size=a,this._db.set(t,i))}else--i.lives,this._db.set(t,i)}},T1e=class{constructor(t,i,r){this.entry=t,this.size=i,this.lifetime=r,this.lives=r}},M1e=class{constructor(t,i){this._storage=new x1e,this.id="",this.name="",this.size=0,this._storage.maxSize=t,this._storage.register(this),i&&this._storage.registerRemoveFunc("",i)}destroy(){this._storage.deregister(this),this._storage.destroy()}put(t,i,r=1){this._storage.put(this,t,i,r,1)}pop(t){return this._storage.pop(this,t)}get(t){return this._storage.get(this,t)}clear(){this._storage.clearAll()}get maxSize(){return this._storage.maxSize}set maxSize(t){this._storage.maxSize=t}resetHitRate(){}};function $1e(e){return"timeZone"in e}function E1e(e){return"timeZone"in e}function I1e(e){return"dateFieldsTimeZone"in e}const A1e=new Map;let gz=class _g{static fromJSON(t){return new _g(t.fields,t.timeZoneByFieldName)}static fromLayer(t){return new _g(t.fields??[],UE(t))}static fromLayerJSON(t){return new _g(t.fields??[],UE(t))}constructor(t=[],i){var a;this._fieldsMap=new Map,this._normalizedFieldsMap=new Map,this._dateFieldsSet=new Set,this._numericFieldsSet=new Set,this._requiredFields=null,this.dateFields=[],this.numericFields=[],this.fields=t||[],this._timeZoneByFieldName=i?new Map(i):null;const r=[];for(const p of this.fields){const y=p==null?void 0:p.name,g=zE(y);if(y&&g){const _=yh(y);this._fieldsMap.set(y,p),this._fieldsMap.set(_,p),this._normalizedFieldsMap.set(g,p),r.push(`${_}:${p.type}:${(a=this._timeZoneByFieldName)==null?void 0:a.get(y)}`),yte(p)?(this.dateFields.push(p),this._dateFieldsSet.add(p)):gN(p)&&(this._numericFieldsSet.add(p),this.numericFields.push(p)),I8(p)||A8(p)||(p.editable=p.editable==null||!!p.editable,p.nullable=p.nullable==null||!!p.nullable)}}r.sort(),this.uid=r.join()}get requiredFields(){if(!this._requiredFields){this._requiredFields=[];for(const t of this.fields)I8(t)||A8(t)||t.nullable||ste(t)!==void 0||this._requiredFields.push(t)}return this._requiredFields}equals(t){return this.uid===(t==null?void 0:t.uid)}has(t){return this.get(t)!=null}get(t){if(!t)return;let i=this._fieldsMap.get(t);return i||(i=this._fieldsMap.get(yh(t))??this._normalizedFieldsMap.get(zE(t)),i&&this._fieldsMap.set(t,i),i)}getTimeZone(t){const i=this.get(t&&typeof t!="string"?t.name:t);return i?this._timeZoneByFieldName?this._timeZoneByFieldName.get(i.name):i.type==="date"||i.type==="esriFieldTypeDate"?(ye.getLogger("esri.layers.support.FieldsIndex").errorOnce(new Y("getTimeZone:no-timezone-information",`no time zone information for field '${i.name}'`)),Kl):vz.has(i.type)?Lh:null:null}getLuxonTimeZone(t){const i=this.getTimeZone(t);return i?i===Lh?Cn.instance:i===Kl?Vi.utcInstance:_1(A1e,i,()=>Qr.create(i)):null}isDateField(t){return this._dateFieldsSet.has(this.get(t))}isTimeOnlyField(t){return mte(this.get(t))}isNumericField(t){return this._numericFieldsSet.has(this.get(t))}normalizeFieldName(t){var i;return((i=this.get(t))==null?void 0:i.name)??void 0}toJSON(){return{fields:this.fields.map(t=>he.isSerializable(t)?t.toJSON():t),timeZoneByFieldName:this._timeZoneByFieldName?Array.from(this._timeZoneByFieldName.entries()):null}}};function yh(e){return e.trim().toLowerCase()}function zE(e){var t;return((t=Bee(e))==null?void 0:t.toLowerCase())??""}const vz=new Set(["time-only","date-only","timestamp-offset","esriFieldTypeDateOnly","esriFieldTypeTimeOnly","esriFieldTypeTimestampOffset"]);function UE(e){const t=new Map;if(!e.fields)return t;const i=e.datesInUnknownTimezone===!0,{timeInfo:r,editFieldsInfo:a}=e,p=(r?"startField"in r?r.startField:r.startTimeField:"")??"",y=(r?"endField"in r?r.endField:r.endTimeField:"")??"",g=I1e(e)?e.dateFieldsTimeZone??null:e.dateFieldsTimeReference?vm(e.dateFieldsTimeReference):null,_=a?$1e(a)?a.timeZone??g:a.dateFieldsTimeReference?vm(a.dateFieldsTimeReference):g??Kl:null,T=r?E1e(r)?r.timeZone??g:r.timeReference?vm(r.timeReference):g:null,I=new Map([[yh((a==null?void 0:a.creationDateField)??""),_],[yh((a==null?void 0:a.editDateField)??""),_],[yh(p),T],[yh(y),T]]);for(const{name:A,type:P}of e.fields)if(vz.has(P))t.set(A,Lh);else if(P!=="date"&&P!=="esriFieldTypeDate")t.set(A,null);else if(i)t.set(A,Lh);else{const N=I.get(yh(A??""))??g;t.set(A,N)}return t}var VE,GE,BE,qE,HE,WE,JE,ZE,KE,YE,A4,C4,XE,QE,eI,tI,iI,rI,sI,nI,oI,aI,lI,uI,hI,cI,pI,dI,fI,yI,mI,gI,vI,wI,bI,_I,SI,xI,TI,MI,$I,EI,II,AI,CI,OI,PI,kI,RI,NI,LI,DI,jI,FI,zI,Uv,UI,VI,GI,BI,qI,HI,WI;(function(e){e[e.BUTT=0]="BUTT",e[e.ROUND=1]="ROUND",e[e.SQUARE=2]="SQUARE",e[e.UNKNOWN=4]="UNKNOWN"})(VE||(VE={})),function(e){e[e.BEVEL=0]="BEVEL",e[e.ROUND=1]="ROUND",e[e.MITER=2]="MITER",e[e.UNKNOWN=4]="UNKNOWN"}(GE||(GE={})),function(e){e[e.SCREEN=0]="SCREEN",e[e.MAP=1]="MAP"}(BE||(BE={})),function(e){e[e.Tint=0]="Tint",e[e.Ignore=1]="Ignore",e[e.Multiply=99]="Multiply"}(qE||(qE={})),function(e){e.Both="Both",e.JustBegin="JustBegin",e.JustEnd="JustEnd",e.None="None"}(HE||(HE={})),function(e){e[e.Mosaic=0]="Mosaic",e[e.Centered=1]="Centered"}(WE||(WE={})),function(e){e[e.Normal=0]="Normal",e[e.Superscript=1]="Superscript",e[e.Subscript=2]="Subscript"}(JE||(JE={})),function(e){e[e.MSSymbol=0]="MSSymbol",e[e.Unicode=1]="Unicode"}(ZE||(ZE={})),function(e){e[e.Unspecified=0]="Unspecified",e[e.TrueType=1]="TrueType",e[e.PSOpenType=2]="PSOpenType",e[e.TTOpenType=3]="TTOpenType",e[e.Type1=4]="Type1"}(KE||(KE={})),function(e){e[e.Display=0]="Display",e[e.Map=1]="Map"}(YE||(YE={})),function(e){e.None="None",e.Loop="Loop",e.Oscillate="Oscillate"}(A4||(A4={})),function(e){e.Linear="Linear",e.EaseIn="EaseIn",e.EaseOut="EaseOut",e.EaseInOut="EaseInOut"}(C4||(C4={})),function(e){e[e.Z=0]="Z",e[e.X=1]="X",e[e.Y=2]="Y"}(XE||(XE={})),function(e){e[e.XYZ=0]="XYZ",e[e.ZXY=1]="ZXY",e[e.YXZ=2]="YXZ"}(QE||(QE={})),function(e){e[e.Rectangle=0]="Rectangle",e[e.RoundedRectangle=1]="RoundedRectangle",e[e.Oval=2]="Oval"}(eI||(eI={})),function(e){e[e.None=0]="None",e[e.Alpha=1]="Alpha",e[e.Screen=2]="Screen",e[e.Multiply=3]="Multiply",e[e.Add=4]="Add"}(tI||(tI={})),function(e){e[e.TTB=0]="TTB",e[e.RTL=1]="RTL",e[e.BTT=2]="BTT"}(iI||(iI={})),function(e){e[e.None=0]="None",e[e.SignPost=1]="SignPost",e[e.FaceNearPlane=2]="FaceNearPlane"}(rI||(rI={})),function(e){e[e.Float=0]="Float",e[e.String=1]="String",e[e.Boolean=2]="Boolean"}(sI||(sI={})),function(e){e[e.Intersect=0]="Intersect",e[e.Subtract=1]="Subtract"}(nI||(nI={})),function(e){e.OpenEnded="OpenEnded",e.Block="Block",e.Crossed="Crossed"}(oI||(oI={})),function(e){e.FullGeometry="FullGeometry",e.PerpendicularFromFirstSegment="PerpendicularFromFirstSegment",e.ReversedFirstSegment="ReversedFirstSegment",e.PerpendicularToSecondSegment="PerpendicularToSecondSegment",e.SecondSegmentWithTicks="SecondSegmentWithTicks",e.DoublePerpendicular="DoublePerpendicular",e.OppositeToFirstSegment="OppositeToFirstSegment",e.TriplePerpendicular="TriplePerpendicular",e.HalfCircleFirstSegment="HalfCircleFirstSegment",e.HalfCircleSecondSegment="HalfCircleSecondSegment",e.HalfCircleExtended="HalfCircleExtended",e.OpenCircle="OpenCircle",e.CoverageEdgesWithTicks="CoverageEdgesWithTicks",e.GapExtentWithDoubleTicks="GapExtentWithDoubleTicks",e.GapExtentMidline="GapExtentMidline",e.Chevron="Chevron",e.PerpendicularWithArc="PerpendicularWithArc",e.ClosedHalfCircle="ClosedHalfCircle",e.TripleParallelExtended="TripleParallelExtended",e.ParallelWithTicks="ParallelWithTicks",e.Parallel="Parallel",e.PerpendicularToFirstSegment="PerpendicularToFirstSegment",e.ParallelOffset="ParallelOffset",e.OffsetOpposite="OffsetOpposite",e.OffsetSame="OffsetSame",e.CircleWithArc="CircleWithArc",e.DoubleJog="DoubleJog",e.PerpendicularOffset="PerpendicularOffset",e.LineExcludingLastSegment="LineExcludingLastSegment",e.MultivertexArrow="MultivertexArrow",e.CrossedArrow="CrossedArrow",e.ChevronArrow="ChevronArrow",e.ChevronArrowOffset="ChevronArrowOffset",e.PartialFirstSegment="PartialFirstSegment",e.Arch="Arch",e.CurvedParallelTicks="CurvedParallelTicks",e.Arc90Degrees="Arc90Degrees",e.TipWithPerpendicularAndTicks="TipWithPerpendicularAndTicks",e.ConcentricCircles="ConcentricCircles",e.DoubleJogArrow="DoubleJogArrow",e.LinkedChevrons="LinkedChevrons",e.SegmentThenHalfCircle="SegmentThenHalfCircle",e.LineWithStraightTicks="LineWithStraightTicks",e.DoubleCurve="DoubleCurve",e.ParallelWithTicksByWidth="ParallelWithTicksByWidth",e.EnclosingRoundedRectangle="EnclosingRoundedRectangle"}(aI||(aI={})),function(e){e.Mitered="Mitered",e.Bevelled="Bevelled",e.Rounded="Rounded",e.Square="Square",e.TrueBuffer="TrueBuffer"}(lI||(lI={})),function(e){e.ClosePath="ClosePath",e.ConvexHull="ConvexHull",e.RectangularBox="RectangularBox"}(uI||(uI={})),function(e){e.BeginningOfLine="BeginningOfLine",e.EndOfLine="EndOfLine"}(hI||(hI={})),function(e){e.Mitered="Mitered",e.Bevelled="Bevelled",e.Rounded="Rounded",e.Square="Square"}(cI||(cI={})),function(e){e.Fast="Fast",e.Accurate="Accurate"}(pI||(pI={})),function(e){e.BeginningOfLine="BeginningOfLine",e.EndOfLine="EndOfLine"}(dI||(dI={})),function(e){e.Sinus="Sinus",e.Square="Square",e.Triangle="Triangle",e.Random="Random"}(fI||(fI={})),function(e){e[e.None=0]="None",e[e.Default=1]="Default",e[e.Force=2]="Force"}(yI||(yI={})),function(e){e[e.Buffered=0]="Buffered",e[e.Left=1]="Left",e[e.Right=2]="Right",e[e.AlongLine=3]="AlongLine"}(mI||(mI={})),function(e){e[e.Linear=0]="Linear",e[e.Rectangular=1]="Rectangular",e[e.Circular=2]="Circular",e[e.Buffered=3]="Buffered"}(gI||(gI={})),function(e){e[e.Discrete=0]="Discrete",e[e.Continuous=1]="Continuous"}(vI||(vI={})),function(e){e[e.AcrossLine=0]="AcrossLine",e[e.AlongLine=1]="AlongLine"}(wI||(wI={})),function(e){e[e.Auto=0]="Auto",e[e.Clockwise=1]="Clockwise",e[e.Counterclockwise=2]="Counterclockwise"}(bI||(bI={})),function(e){e[e.Left=0]="Left",e[e.Right=1]="Right",e[e.Center=2]="Center",e[e.Justify=3]="Justify"}(_I||(_I={})),function(e){e[e.Base=0]="Base",e[e.MidPoint=1]="MidPoint",e[e.ThreePoint=2]="ThreePoint",e[e.FourPoint=3]="FourPoint",e[e.Underline=4]="Underline",e[e.CircularCW=5]="CircularCW",e[e.CircularCCW=6]="CircularCCW"}(SI||(SI={})),function(e){e.Butt="Butt",e.Round="Round",e.Square="Square"}(xI||(xI={})),function(e){e.NoConstraint="NoConstraint",e.HalfPattern="HalfPattern",e.HalfGap="HalfGap",e.FullPattern="FullPattern",e.FullGap="FullGap",e.Custom="Custom"}(TI||(TI={})),function(e){e[e.None=-1]="None",e[e.Custom=0]="Custom",e[e.Circle=1]="Circle",e[e.OpenArrow=2]="OpenArrow",e[e.ClosedArrow=3]="ClosedArrow",e[e.Diamond=4]="Diamond"}(MI||(MI={})),function(e){e[e.ExtraLeading=0]="ExtraLeading",e[e.Multiple=1]="Multiple",e[e.Exact=2]="Exact"}($I||($I={})),function(e){e.Bevel="Bevel",e.Round="Round",e.Miter="Miter"}(EI||(EI={})),function(e){e[e.Default=0]="Default",e[e.String=1]="String",e[e.Numeric=2]="Numeric"}(II||(II={})),function(e){e[e.InsidePolygon=0]="InsidePolygon",e[e.PolygonCenter=1]="PolygonCenter",e[e.RandomlyInsidePolygon=2]="RandomlyInsidePolygon"}(AI||(AI={})),function(e){e[e.Tint=0]="Tint",e[e.Replace=1]="Replace",e[e.Multiply=2]="Multiply"}(CI||(CI={})),function(e){e[e.ClipAtBoundary=0]="ClipAtBoundary",e[e.RemoveIfCenterOutsideBoundary=1]="RemoveIfCenterOutsideBoundary",e[e.DoNotTouchBoundary=2]="DoNotTouchBoundary",e[e.DoNotClip=3]="DoNotClip"}(OI||(OI={})),function(e){e.NoConstraint="NoConstraint",e.WithMarkers="WithMarkers",e.WithFullGap="WithFullGap",e.WithHalfGap="WithHalfGap",e.Custom="Custom"}(PI||(PI={})),function(e){e.Fixed="Fixed",e.Random="Random",e.RandomFixedQuantity="RandomFixedQuantity"}(kI||(kI={})),function(e){e.LineMiddle="LineMiddle",e.LineBeginning="LineBeginning",e.LineEnd="LineEnd",e.SegmentMidpoint="SegmentMidpoint"}(RI||(RI={})),function(e){e.OnPolygon="OnPolygon",e.CenterOfMass="CenterOfMass",e.BoundingBoxCenter="BoundingBoxCenter"}(NI||(NI={})),function(e){e[e.Low=0]="Low",e[e.Medium=1]="Medium",e[e.High=2]="High"}(LI||(LI={})),function(e){e[e.MarkerCenter=0]="MarkerCenter",e[e.MarkerBounds=1]="MarkerBounds"}(DI||(DI={})),function(e){e[e.None=0]="None",e[e.PropUniform=1]="PropUniform",e[e.PropNonuniform=2]="PropNonuniform",e[e.DifUniform=3]="DifUniform",e[e.DifNonuniform=4]="DifNonuniform"}(jI||(jI={})),function(e){e.Tube="Tube",e.Strip="Strip",e.Wall="Wall"}(FI||(FI={})),function(e){e[e.Random=0]="Random",e[e.Increasing=1]="Increasing",e[e.Decreasing=2]="Decreasing",e[e.IncreasingThenDecreasing=3]="IncreasingThenDecreasing"}(zI||(zI={})),function(e){e[e.Relative=0]="Relative",e[e.Absolute=1]="Absolute"}(Uv||(Uv={})),function(e){e[e.Normal=0]="Normal",e[e.LowerCase=1]="LowerCase",e[e.Allcaps=2]="Allcaps"}(UI||(UI={})),function(e){e[e.LTR=0]="LTR",e[e.RTL=1]="RTL"}(VI||(VI={})),function(e){e.Draft="Draft",e.Picture="Picture",e.Text="Text"}(GI||(GI={})),function(e){e[e.Top=0]="Top",e[e.Center=1]="Center",e[e.Baseline=2]="Baseline",e[e.Bottom=3]="Bottom"}(BI||(BI={})),function(e){e[e.Right=0]="Right",e[e.Upright=1]="Upright"}(qI||(qI={})),function(e){e[e.Small=0]="Small",e[e.Medium=1]="Medium",e[e.Large=2]="Large"}(HI||(HI={})),function(e){e[e.Calm=0]="Calm",e[e.Rippled=1]="Rippled",e[e.Slight=2]="Slight",e[e.Moderate=3]="Moderate"}(WI||(WI={}));const C1e={color:[128,128,128,1],outlinecolor:[0,0,0,1],backgroundcolor:[128,128,128,1],borderlinecolor:[0,0,0,1],tintcolor:[255,255,255,1]},O4={CIMVectorMarker:{scalesymbolsproportionally:!1,respectframe:!0,anchorpointunits:"Relative",offsetx:0,offsety:0,rotateclockwise:!1,rotation:0,size:10,enable:!0,colorlocked:!1},CIMPictureMarker:{scalex:1,texturefilter:"Draft",anchorpointunits:"Relative",offsetx:0,offsety:0,rotateclockwise:!1,rotation:0,size:10,enable:!0,colorlocked:!1},CIMTextSymbol:{angle:0,anglex:0,angley:0,halosize:1,height:10,horizontalalignment:"Left",kerning:!0,letterspacing:0,letterwidth:100,ligatures:!0,linegap:0,offsetx:0,offsety:0,strikethrough:!1,textcase:"Normal",textstring:"",underline:!1,verticalalignment:"Bottom",enable:!0,colorlocked:!1},CIMSolidStroke:{capstyle:"Round",joinstyle:"Round",miterlimit:4,width:4,enable:!0,colorlocked:!1},CIMPictureStroke:{texturefilter:"Draft",capstyle:"Round",joinstyle:"Round",miterlimit:4,width:4,enable:!0,colorlocked:!1},CIMGradientStroke:{capstyle:"Round",joinstyle:"Round",miterlimit:4,width:4,enable:!0,colorlocked:!1,gradientMethod:"AcrossLine",gradientSize:75,gradientSizeUnits:Uv.Relative,gradientType:"Discrete",interval:5},CIMSolidFill:{enable:!0,colorlocked:!1},CIMPictureFill:{offsetx:0,offsety:0,rotation:0,scalex:1,height:10,texturefilter:"Draft",enable:!0,colorlocked:!1},CIMHatchFill:{offsetx:0,offsety:0,rotation:0,separation:4,enable:!0,colorlocked:!1},CIMGradientFill:{enable:!0,angle:90,gradientMethod:"Linear",gradientSize:75,gradientSizeUnits:Uv.Relative,gradientType:"Discrete",interval:5},CIMGeometricEffectAddControlPoints:{angletolerance:120},CIMGeometricEffectArrow:{arrowtype:"OpenEnded",width:5},CIMGeometricEffectBuffer:{size:1},CIMGeometricEffectCut:{begincut:1,endcut:1,middlecut:0,invert:!1},CIMGeometricEffectDashes:{customendingoffset:0,linedashending:"NoConstraint",offsetalongline:0},CIMGeometricEffectDonut:{method:"Mitered",option:"Accurate",width:2},CIMGeometricEffectJog:{angle:225,length:20,position:50},CIMGeometricEffectControlMeasureLine:{rule:"FullGeometry"},CIMGeometricEffectMove:{offsetx:1,offsety:-1},CIMGeometricEffectOffset:{method:"Square",offset:1,option:"Fast"},CIMGeometricEffectRotate:{angle:15},CIMGeometricEffectScale:{xscalefactor:1.15,yscalefactor:1.15},CIMGeometricEffectWave:{amplitude:2,period:3,seed:1,waveform:"Sinus"},CIMMarkerPlacementAlongLine:{customendingoffset:0,endings:"WithHalfGap",offsetalongline:0,placeperpart:!0,angletoline:!0,offset:0},CIMMarkerPlacementAtExtremities:{extremityplacement:"Both",offsetalongline:0,angletoline:!0,offset:0},CIMMarkerPlacementAtRatioPositions:{beginposition:0,endposition:0,flipfirst:!0,angletoline:!0,offset:0},CIMMarkerPlacementInsidePolygon:{gridangle:0,gridtype:"Fixed",offsetx:0,offsety:0,randomness:100,seed:0,shiftoddrows:!1,stepx:16,stepy:16,clipping:"ClipAtBoundary"},CIMMarkerPlacementOnLine:{relativeto:"LineMiddle",startpointoffset:0,angletoline:!0,offset:0},CIMMarkerPlacementOnVertices:{placeperpart:!0,placeoncontrolpoints:!0,placeonendpoints:!0,placeonregularvertices:!0,angletoline:!0,offset:0},CIMMarkerPlacementPolygonCenter:{method:"OnPolygon",offsetx:0,offsety:0,clipatboundary:!1},CIMAnimatedSymbolProperties:{playanimation:!1,reverseanimation:!1,randomizestarttime:!1,randomizestartseed:0,starttimeoffset:0,duration:3,endingduration:3,useendingduration:!1,repeattype:A4.Loop,repeatdelay:0,easing:C4.Linear},CIMSymbolAnimationSize:{tosize:10},CIMSymbolAnimationScale:{scalefactor:1},CIMSymbolAnimationColor:{tocolor:[255,255,255,1]},CIMSymbolAnimationTransparency:{totransparency:0},CIMSymbolAnimationRotation:{torotation:0,rotateclockwise:!1},CIMSymbolAnimationOffset:{offsetx:0,offsety:0}};function O1e(e){return typeof e=="function"}function bxe(e,t,i,r){return O1e(e)?e(t,i,r):e}function _xe(e){return[e.r,e.g,e.b,e.a]}const P1e=` /-,
`;function JI(e){let t=e.length;for(;t--;)if(!P1e.includes(e.charAt(t)))return!1;return!0}function Sxe(e,t){const i=[];let r=0,a=-1;do if(a=e.indexOf("[",r),a>=r){if(a>r){const p=e.slice(r,a);i.push([p,null,JI(p)])}if(r=a+1,a=e.indexOf("]",r),a>=r){if(a>r){const p=t[e.slice(r,a)];p&&i.push([null,p,!1])}r=a+1}}while(a!==-1);if(r<e.length){const p=e.slice(r);i.push([p,null,JI(p)])}return i}function xxe(e,t,i,r){let a="",p=null;for(const y of t){const[g,_,T]=y;if(g)T?p=g:(p&&(a+=p,p=null),a+=g);else{let I=_;i!=null&&(I=wz(_,i));const A=e.attributes[I];A&&(p&&(a+=p,p=null),a+=A)}}return k1e(a,r)}function k1e(e,t){switch(typeof e!="string"&&(e=String(e)),t){case"LowerCase":return e.toLowerCase();case"Allcaps":return e.toUpperCase();default:return e}}function Txe(e,t,i,r,a,p,y=!0){const g=t/a,_=i/p,T=Math.ceil(g/2),I=Math.ceil(_/2);for(let A=0;A<p;A++)for(let P=0;P<a;P++){const N=4*(P+(y?p-A-1:A)*a);let D=0,z=0,q=0,J=0,ee=0,X=0,ie=0;const oe=(A+.5)*_;for(let ue=Math.floor(A*_);ue<(A+1)*_;ue++){const ge=Math.abs(oe-(ue+.5))/I,Se=(P+.5)*g,Ee=ge*ge;for(let Ie=Math.floor(P*g);Ie<(P+1)*g;Ie++){let ke=Math.abs(Se-(Ie+.5))/T;const je=Math.sqrt(Ee+ke*ke);je>=-1&&je<=1&&(D=2*je*je*je-3*je*je+1,D>0&&(ke=4*(Ie+ue*t),ie+=D*e[ke+3],q+=D,e[ke+3]<255&&(D=D*e[ke+3]/250),J+=D*e[ke],ee+=D*e[ke+1],X+=D*e[ke+2],z+=D))}}r[N]=J/z,r[N+1]=ee/z,r[N+2]=X/z,r[N+3]=ie/q}}function R1e(e){return e?[e[0],e[1],e[2],e[3]/255]:[0,0,0,0]}function Mxe(e){var t;return((t=e.data)==null?void 0:t.symbol)??null}function $xe(e){return e.type==="CIMVectorMarker"||e.type==="CIMPictureMarker"||e.type==="CIMBarChartMarker"||e.type==="CIMCharacterMarker"||e.type==="CIMPieChartMarker"||e.type==="CIMStackedBarChartMarker"}function Exe(e){return e.type==="CIMGradientStroke"||e.type==="CIMPictureStroke"||e.type==="CIMSolidStroke"}function Ixe(e){return e!=null&&(e.type==="CIMGradientFill"||e.type==="CIMHatchFill"||e.type==="CIMPictureFill"||e.type==="CIMSolidFill"||e.type==="CIMWaterFill")}function N1e(e){return e!=null&&(e.type==="CIMMarkerPlacementAlongLineRandomSize"||e.type==="CIMMarkerPlacementAlongLineSameSize"||e.type==="CIMMarkerPlacementAlongLineVariableSize"||e.type==="CIMMarkerPlacementAtExtremities"||e.type==="CIMMarkerPlacementAtMeasuredUnits"||e.type==="CIMMarkerPlacementAtRatioPositions"||e.type==="CIMMarkerPlacementOnLine"||e.type==="CIMMarkerPlacementOnVertices")}const Axe=(e,t=0)=>e==null||isNaN(e)?t:e,Cxe=(e,t)=>e??t,Oxe=(e,t)=>e??t,Pxe=e=>e.tintColor?R1e(e.tintColor):[255,255,255,1],kxe=e=>{if(!e)return!1;for(const t of e)switch(t.type){case"CIMGeometricEffectBuffer":case"CIMGeometricEffectOffset":case"CIMGeometricEffectDonut":return!0}return!1};function Rxe(){return fe(()=>import("./geometryEngineJSON-C8_S-6e4.js").then(e=>e.g),__vite__mapDeps([23,24]))}function Nxe(e){if(!e)return"normal";switch(e.toLowerCase()){case"italic":return"italic";case"oblique":return"oblique";default:return"normal"}}function Lxe(e){if(!e)return"normal";switch(e.toLowerCase()){case"bold":return"bold";case"bolder":return"bolder";case"lighter":return"lighter";default:return"normal"}}function Dxe(e){let t="normal",i="normal";if(e){const r=e.toLowerCase();r.includes("italic")?t="italic":r.includes("oblique")&&(t="oblique"),r.includes("bold")?i="bold":r.includes("light")&&(i="lighter")}return{style:t,weight:i}}function jxe(e){return e.underline?"underline":e.strikethrough?"line-through":"none"}function ZI(e){if(!e)return null;switch(e.type){case"CIMPolygonSymbol":if(e.symbolLayers)for(const t of e.symbolLayers){const i=ZI(t);if(i!=null)return i}break;case"CIMTextSymbol":return ZI(e.symbol);case"CIMSolidFill":return e.color}return null}function KI(e){if(e)switch(e.type){case"CIMPolygonSymbol":case"CIMLineSymbol":{const t=e.symbolLayers;if(t)for(const i of t){const r=KI(i);if(r!=null)return r}break}case"CIMTextSymbol":return KI(e.symbol);case"CIMSolidStroke":return e.color}}function YI(e){if(e)switch(e.type){case"CIMPolygonSymbol":case"CIMLineSymbol":if(e.symbolLayers)for(const t of e.symbolLayers){const i=YI(t);if(i!==void 0)return i}break;case"CIMTextSymbol":return YI(e.symbol);case"CIMSolidStroke":case"CIMGradientStroke":case"CIMPictureStroke":return e.width}}function Fxe(e){switch(e){case"Left":default:return"left";case"Right":return"right";case"Center":case"Justify":return"center"}}function zxe(e){switch(e){case"Top":default:return"top";case"Center":return"middle";case"Baseline":return"baseline";case"Bottom":return"bottom"}}function Uxe(e){return(e?Object.keys(e):[]).map(t=>({name:t,alias:t,type:typeof e[t]=="string"?"esriFieldTypeString":"esriFieldTypeDouble"}))}const Vxe=e=>e.includes("data:image/svg+xml");function Gxe(e){if(!e)return null;switch(e.type){case"CIMPointSymbol":case"CIMTextSymbol":return"esriGeometryPoint";case"CIMLineSymbol":return"esriGeometryPolyline";case"CIMPolygonSymbol":return"esriGeometryPolygon";default:return null}}function Nx(e){return e&&e.charAt(0).toLowerCase()+e.slice(1)}function Bxe(e,t,i,r,a,p,y=!0){const{infos:g}=p;let _=1,T=0,I=0,A=0,P=1;for(const{absoluteAnchorPoint:z,offsetX:q,offsetY:J,rotation:ee,size:X,frameHeight:ie,rotateClockWise:oe,scaleSymbolsProportionally:ue}of g)P=z?1:_,I=QI(q,J,T,P,I),A=XI(q,J,T,P,A),ie&&(ue||y)&&(_*=X/ie),T=eA(ee,oe,T);const N=QI(r,a,T,P,I),D=XI(r,a,T,P,A);return{size:e*_,rotation:eA(t,i,T),offsetX:N,offsetY:D}}function L1e(e){if(e==null)return!1;if(Array.isArray(e))return e.every(t=>L1e(t));switch(typeof e){case"string":return!!e;case"number":return!isNaN(e)}}function D1e(e,t){if(t==="color"||t==="outlinecolor"||t==="backgroundcolor"||t==="borderlinecolor"||t==="tintcolor")return[...C1e[t]];const i=O4[e];if(!i)throw new Error(`InternalError: default value for type ${e}.`);return i[t]}function j1e(e){return e.split(" ").map(t=>Number(t))}function F1e(e){return typeof e=="string"?j1e(e):e}function qxe(e){return e!=null&&e.dashTemplate&&(e.dashTemplate=F1e(e.dashTemplate)),e}function P4(e){if(e==null)return"Normal";switch(e.type){case"CIMTextSymbol":return e.textCase??"Normal";case"CIMPointSymbol":case"CIMLineSymbol":case"CIMPolygonSymbol":{const t=e.symbolLayers;if(!t)return"Normal";for(const i of t)if(i.type==="CIMVectorMarker")return P4(i)}break;case"CIMVectorMarker":{const t=e.markerGraphics;if(!t)return"Normal";for(const i of t)if(i.symbol)return P4(i.symbol)}}return"Normal"}function Hxe(e){if(e)switch(e.type){case"CIMTextSymbol":return e.height;case"CIMPointSymbol":{let t=0;if(e.symbolLayers){for(const i of e.symbolLayers)if(i)switch(i.type){case"CIMCharacterMarker":case"CIMPictureMarker":case"CIMVectorMarker":case"CIMObjectMarker3D":case"CIMglTFMarker3D":{const r=i.size??O4.CIMVectorMarker.size;r>t&&(t=r);break}}}return t}case"CIMLineSymbol":case"CIMPolygonSymbol":{let t=0;if(e.symbolLayers){for(const i of e.symbolLayers)if(i)switch(i.type){case"CIMSolidStroke":case"CIMPictureStroke":case"CIMGradientStroke":{const r=i.width;r!=null&&r>t&&(t=r);break}case"CIMCharacterMarker":case"CIMPictureMarker":case"CIMVectorMarker":case"CIMObjectMarker3D":case"CIMglTFMarker3D":if(i.markerPlacement&&N1e(i.markerPlacement)){const r=i.size??O4.CIMVectorMarker.size;r>t&&(t=r)}break;case"CIMPictureFill":{const r=i.height;r!=null&&r>t&&(t=r)}}}return t}}}function wz(e,t){if(t!==null){const i=t.get(e);return i?i.name:e}return e}function Wxe(e){return e.map(t=>({...t,propertyName:Nx(t.propertyName)}))}function Jxe(e){const t={};for(const i in e){const r=e[i];t[Nx(i)]=r}return t}function XI(e,t,i,r,a){const p=i*Math.PI/180;if(p){const y=Math.cos(p);return(Math.sin(p)*e+y*t)*r+a}return t*r+a}function QI(e,t,i,r,a){const p=i*Math.PI/180;return p?(Math.cos(p)*e-Math.sin(p)*t)*r+a:e*r+a}function eA(e,t,i){return t?i-e:i+e}function Zxe(e,t,i){const r=i==="Color"||i==="TintColor"||i==="ToColor",a=i==="Rotation"||i==="Angle"||i==="ToRotation";let p=t[Nx(i)];if(p!=null&&(r?p=[p[0]/255,p[1]/255,p[2]/255,p[3]/255]:a&&(p*=Math.PI/180)),p==null&&(p=D1e(t.type,i.toLowerCase()),p!=null&&(r?p=[p[0]/255,p[1]/255,p[2]/255,p[3]]:a&&(p*=Math.PI/180))),t.primitiveName!=null){const y=e[t.primitiveName];if(y!=null){const g=y[i];g==null||(typeof g=="string"||typeof g=="number"||Array.isArray(g)?(p=g,p!=null&&(r?p=[p[0]/255,p[1]/255,p[2]/255,p[3]/255]:a&&(p*=Math.PI/180))):(p={valueExpressionInfo:g,defaultValue:p},p!=null&&(r?p={type:"Process",op:"ArcadeColor",value:p}:a&&(p={type:"Process",op:"Divide",left:p,right:180/Math.PI}))))}}if(p==null)throw new Error(`Failed to derive a value or an expression for "${i}".`);return p}function Kxe(e,t){return Math.max(Math.min((e??t)/100,1),0)}const tA="esri.renderers.support.DictionaryLoader",z1e={type:"CIMSimpleLineCallout",lineSymbol:{type:"CIMLineSymbol",symbolLayers:[{type:"CIMSolidStroke",width:.5,color:[0,0,0,255]}]}};let bz=class{constructor(t,i,r){this.config=null,this.fieldMap=null,this.url=null,this._ongoingRequests=new Map,this._symbolCache=new M1e(100),this._dictionaryVersion=null,this._fieldIndex=null,this._dictionaryPromise=null,this.url=t,this.config=i,this.fieldMap=r}getSymbolFields(){return this._symbolFields}async getSymbolAsync(t,i){var A;let r;this._dictionaryPromise||(this._dictionaryPromise=this.fetchResources(i));try{r=await this._dictionaryPromise}catch(P){if(Si(P))return this._dictionaryPromise=null,null}const a=(A=this._dictionaryVersion)==null?void 0:A.greaterEqual(4,0),p={};if(this.fieldMap)for(const P of this._symbolFields){const N=wz(this.fieldMap[P],this._fieldIndex);if(N){const D=t.attributes[N];p[P]=a?D:D!=null?""+t.attributes[N]:""}else p[P]=""}let y=null;try{y=r==null?void 0:r(p,i)}catch{return null}if(!y||typeof y!="string"||y==="invalid")return null;const g=y.split(";"),_=[],T=[];for(let P=0;P<g.length;P++){const N=g[P];if(N){if(N.includes("po:")){const D=N.slice(3).split("|");if(D.length===3){const z=D[0],q=D[1];let J=D[2];const ee="countrylabel";if(z===ee&&q==="TextString"){if(this.fieldMap!=null){let X=this.fieldMap[ee];X==null&&(X=ee,this.fieldMap[X]=X),t.attributes[X]=J}continue}if(q==="DashTemplate")J=J.split(" ").map(X=>Number(X));else if(q==="Color"){const X=new De(J).toRgba();J=[X[0],X[1],X[2],255*X[3]]}else J=Number(J);T.push({primitiveName:z,propertyName:q,value:J,defaultValue:null})}}else if(N.includes("|")){for(const D of N.split("|"))if(this._itemNames.has(D)){_.push(D);break}}else if(this._itemNames.has(N))_.push(N);else if(P===0){_.length=0;let D="Invalid_P";t.geometry!=null&&(Mh(t.geometry)?D="Invalid_A":nS(t.geometry)&&(D="Invalid_L")),_.push(D);break}}}const I=t.geometry==null||!t.geometry.hasZ&&t.geometry.type==="point";return this._cimPartsToCIMSymbol(t,_,T,I,i)}async fetchResources(t){if(this._dictionaryPromise)return this._dictionaryPromise;if(!this.url)return void ye.getLogger(tA).error("no valid URL!");const i=kt(this.url+"/resources/styles/dictionary-info.json",{responseType:"json",query:{f:"json"},signal:t!=null?t.signal:null}),[{data:r}]=await Promise.all([i,Ql()]);if(!r)throw this._dictionaryPromise=null,new Y("esri.renderers.DictionaryRenderer","Bad dictionary data!");const{authoringInfo:a,dictionary_version:p,expression:y,itemsNames:g}=r,_=y;let T=!1;p&&(this._dictionaryVersion=eF.parse(p),T=this._dictionaryVersion.greaterEqual(4,0)),this._refSymbolUrlTemplate=this.url+"/"+r.cimRefTemplateUrl,this._itemNames=new Set(g),this._symbolFields=a.symbol;const I={};if(this.config){const N=this.config;for(const D in N)I[D]=N[D]}if(a.configuration)for(const N of a.configuration)I.hasOwnProperty(N.name)||(I[N.name]=N.value);const A=[];if(t!=null&&t.fields&&this.fieldMap)for(const N in this.fieldMap){const D=this.fieldMap[N],z=t.fields.filter(q=>q.name.toLowerCase()===(D==null?void 0:D.toLowerCase()));z.length>0&&A.push({...z[0],type:T?z[0].type:"esriFieldTypeString"})}A.length>0&&(this._fieldIndex=new gz(A));const P=Uee(_,t!=null?t.spatialReference:null,A,I).then(N=>{const D={scale:0};return(z,q)=>{if(N==null)return null;const J=N.repurposeFeature({geometry:null,attributes:z});return D.scale=q!=null?q.scale??void 0:void 0,N.evaluate({$feature:J,$view:D},N.services)}}).catch(N=>(ye.getLogger(tA).error("Creating dictionary expression failed:",N),null));return this._dictionaryPromise=P,P}async _cimPartsToCIMSymbol(t,i,r,a,p){const y=new Array(i.length);for(let T=0;T<i.length;T++)y[T]=this._getSymbolPart(i[T],p);let g=await Promise.all(y);const _=this.fieldMap;if(_&&g.length>0){const{OverrideHelper:T}=await fe(()=>import("./OverrideHelper-DHz01mPW.js").then(I=>I.O),__vite__mapDeps([191,118,18]));g=te(g);for(const I of g)T.applyDictionaryTextOverrides(I,t,_,this._fieldIndex,P4(I))}return new Pa({data:U1e(g,r,a)})}async _getSymbolPart(t,i){const r=this._symbolCache.get(t);if(r)return r;if(this._ongoingRequests.has(t))return this._ongoingRequests.get(t).then(y=>y.data);const a=this._refSymbolUrlTemplate.replaceAll(/\{itemName\}/gi,t),p=kt(a,{responseType:"json",query:{f:"json"},...i});this._ongoingRequests.set(t,p),p.finally(()=>this._ongoingRequests.delete(t));try{const y=await p;return this._symbolCache.put(t,y.data),y.data}catch(y){throw y}}};function U1e(e,t,i){if(!e||e.length===0)return null;const r={...e[0]};if(e.length>1){r.effects=null,r.symbolLayers=[];for(const a of e){const p=a;if(p.effects!=null)for(const y of p.symbolLayers)y.effects==null?y.effects=p.effects:y.effects.unshift(...p.effects);r.symbolLayers.unshift(...p.symbolLayers)}}return i&&(r.callout=z1e),{type:"CIMSymbolReference",symbol:r,primitiveOverrides:t}}var k4;let Mn=k4=class extends xd(Ra){constructor(e){super(e),this.config=null,this.fieldMap=null,this.scaleExpression=null,this.scaleExpressionTitle=null,this.url=null,this.type="dictionary"}get _loader(){return new bz(this.url,this.config,this.fieldMap)}writeData(e,t){e&&(t.scalingExpressionInfo={expression:e,returnType:"number"})}writeVisualVariables(e,t,i,r){r!=null&&r.origin||super.writeVisualVariables(e,t,i,r)}clone(){return new k4({config:te(this.config),scaleExpression:this.scaleExpression,scaleExpressionTitle:this.scaleExpressionTitle,fieldMap:te(this.fieldMap),url:te(this.url),visualVariables:te(this.visualVariables)})}async getSymbolAsync(e,t){return this._loader.getSymbolAsync(e,t)}async collectRequiredFields(e,t){await this.collectVVRequiredFields(e,t),this.scaleExpression&&await vr(e,t,this.scaleExpression);for(const i in this.fieldMap){const r=this.fieldMap[i];t.has(r)&&e.add(r)}}get arcadeRequired(){return!0}getSymbol(){return null}get symbols(){return[]}getAttributeHash(){var e;return((e=this.visualVariables)==null?void 0:e.reduce((t,i)=>t+i.getAttributeHash(),""))??""}getMeshHash(){return`${this.url}-${JSON.stringify(this.fieldMap)}`}getSymbolFields(){return this._loader.getSymbolFields()}};v([S({type:bz})],Mn.prototype,"_loader",null),v([S({type:Object,json:{read:{source:"configuration"},write:{target:"configuration"}}})],Mn.prototype,"config",void 0),v([S({type:Object,json:{write:!0}})],Mn.prototype,"fieldMap",void 0),v([S({type:String,json:{read:{source:"scalingExpressionInfo.expression"},write:!0}})],Mn.prototype,"scaleExpression",void 0),v([be("scaleExpression")],Mn.prototype,"writeData",null),v([S({type:String,json:{read:{source:"scalingExpressionInfo.title"},write:{target:"scalingExpressionInfo.title",overridePolicy(e){return{enabled:!!e&&!!this.scaleExpression}}}}})],Mn.prototype,"scaleExpressionTitle",void 0),v([S({type:String,json:{write:!0}})],Mn.prototype,"url",void 0),v([be("visualVariables")],Mn.prototype,"writeVisualVariables",null),Mn=k4=v([H("esri.renderers.DictionaryRenderer")],Mn);const V1e=Mn;var R4;let sa=R4=class extends he{constructor(e){super(e),this.color=null,this.field=null,this.label=null,this.valueExpression=null,this.valueExpressionTitle=null}castField(e){return e==null?e:typeof e=="function"?(ye.getLogger(this).error(".field: field must be a string value"),null):S1(e)}getAttributeHash(){return`${this.field}-${this.valueExpression}`}clone(){var e;return new R4({color:(e=this.color)==null?void 0:e.clone(),field:this.field,label:this.label,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle})}};v([S({type:De,json:{type:[Number],write:!0}})],sa.prototype,"color",void 0),v([S({type:String,json:{write:!0}})],sa.prototype,"field",void 0),v([ct("field")],sa.prototype,"castField",null),v([S({type:String,json:{write:!0}})],sa.prototype,"label",void 0),v([S({type:String,json:{write:!0}})],sa.prototype,"valueExpression",void 0),v([S({type:String,json:{write:!0}})],sa.prototype,"valueExpressionTitle",void 0),sa=R4=v([H("esri.renderers.support.AttributeColorInfo")],sa);const _z=sa;var N4;let Sg=N4=class extends he{constructor(){super(...arguments),this.unit=null}clone(){return new N4({unit:this.unit})}};v([S({type:String,json:{write:!0}})],Sg.prototype,"unit",void 0),Sg=N4=v([H("esri.renderers.support.DotDensityLegendOptions")],Sg);const G1e=Sg;var L4;let Fr=L4=class extends xd(Ra){constructor(e){super(e),this.attributes=null,this.backgroundColor=new De([0,0,0,0]),this.dotBlendingEnabled=!0,this.dotShape="square",this.dotSize=1,this.legendOptions=null,this.outline=new Ms,this.dotValue=null,this.referenceScale=null,this.seed=1,this.type="dot-density"}calculateDotValue(e){if(this.referenceScale==null)return this.dotValue;const t=e/this.referenceScale*this.dotValue;return t<1?1:t}getSymbol(){return new cu({outline:this.outline})}async getSymbolAsync(){return this.getSymbol()}get symbols(){return[this.getSymbol()]}getAttributeHash(){var e;return((e=this.attributes)==null?void 0:e.reduce((t,i)=>t+i.getAttributeHash(),""))??""}getMeshHash(){return JSON.stringify(this.outline)}clone(){return new L4({attributes:te(this.attributes),backgroundColor:te(this.backgroundColor),dotBlendingEnabled:te(this.dotBlendingEnabled),dotShape:te(this.dotShape),dotSize:te(this.dotSize),dotValue:te(this.dotValue),legendOptions:te(this.legendOptions),outline:te(this.outline),referenceScale:te(this.referenceScale),seed:te(this.seed),visualVariables:te(this.visualVariables),authoringInfo:te(this.authoringInfo)})}getControllerHash(){var t;return`${(t=this.attributes)==null?void 0:t.map(i=>i.field||i.valueExpression||"")}-${this.outline&&JSON.stringify(this.outline.toJSON())||""}`}async collectRequiredFields(e,t){await this.collectVVRequiredFields(e,t);for(const i of this.attributes??[])i.valueExpression&&await vr(e,t,i.valueExpression),i.field&&e.add(i.field)}};v([S({type:[_z],json:{write:!0}})],Fr.prototype,"attributes",void 0),v([S({type:De,json:{write:!0}})],Fr.prototype,"backgroundColor",void 0),v([S({type:Boolean,json:{write:!0}})],Fr.prototype,"dotBlendingEnabled",void 0),v([S({type:String,json:{write:!1}})],Fr.prototype,"dotShape",void 0),v([S({type:Number,json:{write:!0}})],Fr.prototype,"dotSize",void 0),v([S({type:G1e,json:{write:!0}})],Fr.prototype,"legendOptions",void 0),v([S({type:Ms,json:{default:null,write:!0}})],Fr.prototype,"outline",void 0),v([S({type:Number,json:{write:!0}})],Fr.prototype,"dotValue",void 0),v([S({type:Number,json:{write:!0}})],Fr.prototype,"referenceScale",void 0),v([S({type:Number,json:{write:!0}})],Fr.prototype,"seed",void 0),v([Re({dotDensity:"dot-density"})],Fr.prototype,"type",void 0),Fr=L4=v([H("esri.renderers.DotDensityRenderer")],Fr);const B1e=Fr;var D4;let o0=D4=class extends he{constructor(e){super(e),this.color=null,this.ratio=null}clone(){return new D4({color:this.color&&this.color.clone(),ratio:this.ratio})}};v([S({type:De,json:{type:[ft],default:null,write:{isRequired:!0}}})],o0.prototype,"color",void 0),v([S({type:Number,json:{write:{isRequired:!0}}})],o0.prototype,"ratio",void 0),o0=D4=v([H("esri.renderers.support.HeatmapColorStop")],o0);const xg=o0;let rp=class extends at.ClonableMixin(he){constructor(){super(...arguments),this.minLabel=null,this.maxLabel=null,this.title=null}};v([S({type:String,json:{write:!0}})],rp.prototype,"minLabel",void 0),v([S({type:String,json:{write:!0}})],rp.prototype,"maxLabel",void 0),v([S({type:String,json:{write:!0}})],rp.prototype,"title",void 0),rp=v([H("esri.renderers.support.HeatmapLegendOptions")],rp);function q1e(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e}function H1e(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}function W1e(e,t,i,r,a){return e[0]=t,e[1]=i,e[2]=r,e[3]=a,e}function J1e(e,t,i){return e[0]=t[0]+i[0],e[1]=t[1]+i[1],e[2]=t[2]+i[2],e[3]=t[3]+i[3],e}function Sz(e,t,i){return e[0]=t[0]-i[0],e[1]=t[1]-i[1],e[2]=t[2]-i[2],e[3]=t[3]-i[3],e}function xz(e,t,i){return e[0]=t[0]*i[0],e[1]=t[1]*i[1],e[2]=t[2]*i[2],e[3]=t[3]*i[3],e}function Tz(e,t,i){return e[0]=t[0]/i[0],e[1]=t[1]/i[1],e[2]=t[2]/i[2],e[3]=t[3]/i[3],e}function Z1e(e,t){return e[0]=Math.ceil(t[0]),e[1]=Math.ceil(t[1]),e[2]=Math.ceil(t[2]),e[3]=Math.ceil(t[3]),e}function K1e(e,t){return e[0]=Math.floor(t[0]),e[1]=Math.floor(t[1]),e[2]=Math.floor(t[2]),e[3]=Math.floor(t[3]),e}function Y1e(e,t,i){return e[0]=Math.min(t[0],i[0]),e[1]=Math.min(t[1],i[1]),e[2]=Math.min(t[2],i[2]),e[3]=Math.min(t[3],i[3]),e}function X1e(e,t,i){return e[0]=Math.max(t[0],i[0]),e[1]=Math.max(t[1],i[1]),e[2]=Math.max(t[2],i[2]),e[3]=Math.max(t[3],i[3]),e}function Q1e(e,t){return e[0]=Math.round(t[0]),e[1]=Math.round(t[1]),e[2]=Math.round(t[2]),e[3]=Math.round(t[3]),e}function eye(e,t,i){return e[0]=t[0]*i,e[1]=t[1]*i,e[2]=t[2]*i,e[3]=t[3]*i,e}function tye(e,t,i,r){return e[0]=t[0]+i[0]*r,e[1]=t[1]+i[1]*r,e[2]=t[2]+i[2]*r,e[3]=t[3]+i[3]*r,e}function Mz(e,t){const i=t[0]-e[0],r=t[1]-e[1],a=t[2]-e[2],p=t[3]-e[3];return Math.sqrt(i*i+r*r+a*a+p*p)}function $z(e,t){const i=t[0]-e[0],r=t[1]-e[1],a=t[2]-e[2],p=t[3]-e[3];return i*i+r*r+a*a+p*p}function Ez(e){const t=e[0],i=e[1],r=e[2],a=e[3];return Math.sqrt(t*t+i*i+r*r+a*a)}function Iz(e){const t=e[0],i=e[1],r=e[2],a=e[3];return t*t+i*i+r*r+a*a}function iye(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=-t[3],e}function rye(e,t){return e[0]=1/t[0],e[1]=1/t[1],e[2]=1/t[2],e[3]=1/t[3],e}function sye(e,t){const i=t[0],r=t[1],a=t[2],p=t[3];let y=i*i+r*r+a*a+p*p;return y>0&&(y=1/Math.sqrt(y),e[0]=i*y,e[1]=r*y,e[2]=a*y,e[3]=p*y),e}function nye(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]+e[3]*t[3]}function Az(e,t,i,r){const a=t[0],p=t[1],y=t[2],g=t[3];return e[0]=a+r*(i[0]-a),e[1]=p+r*(i[1]-p),e[2]=y+r*(i[2]-y),e[3]=g+r*(i[3]-g),e}function oye(e,t=1){const i=g2;let r,a,p,y,g,_;do r=2*i()-1,a=2*i()-1,g=r*r+a*a;while(g>=1);do p=2*i()-1,y=2*i()-1,_=p*p+y*y;while(_>=1);const T=Math.sqrt((1-g)/_);return e[0]=t*r,e[1]=t*a,e[2]=t*p*T,e[3]=t*y*T,e}function aye(e,t,i){const r=t[0],a=t[1],p=t[2],y=t[3];return e[0]=i[0]*r+i[4]*a+i[8]*p+i[12]*y,e[1]=i[1]*r+i[5]*a+i[9]*p+i[13]*y,e[2]=i[2]*r+i[6]*a+i[10]*p+i[14]*y,e[3]=i[3]*r+i[7]*a+i[11]*p+i[15]*y,e}function lye(e,t,i){const r=t[0],a=t[1],p=t[2],y=i[0],g=i[1],_=i[2],T=i[3],I=T*r+g*p-_*a,A=T*a+_*r-y*p,P=T*p+y*a-g*r,N=-y*r-g*a-_*p;return e[0]=I*T+N*-y+A*-_-P*-g,e[1]=A*T+N*-g+P*-y-I*-_,e[2]=P*T+N*-_+I*-g-A*-y,e[3]=t[3],e}function uye(e){return"vec4("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+")"}function hye(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]}function cye(e,t){const i=e[0],r=e[1],a=e[2],p=e[3],y=t[0],g=t[1],_=t[2],T=t[3],I=Ar();return Math.abs(i-y)<=I*Math.max(1,Math.abs(i),Math.abs(y))&&Math.abs(r-g)<=I*Math.max(1,Math.abs(r),Math.abs(g))&&Math.abs(a-_)<=I*Math.max(1,Math.abs(a),Math.abs(_))&&Math.abs(p-T)<=I*Math.max(1,Math.abs(p),Math.abs(T))}const pye=Sz,dye=xz,fye=Tz,yye=Mz,mye=$z,gye=Ez,vye=Iz;Object.freeze(Object.defineProperty({__proto__:null,add:J1e,ceil:Z1e,copy:q1e,copyVec3:H1e,dist:yye,distance:Mz,div:fye,divide:Tz,dot:nye,equals:cye,exactEquals:hye,floor:K1e,inverse:rye,len:gye,length:Ez,lerp:Az,max:X1e,min:Y1e,mul:dye,multiply:xz,negate:iye,normalize:sye,random:oye,round:Q1e,scale:eye,scaleAndAdd:tye,set:W1e,sqrDist:mye,sqrLen:vye,squaredDistance:$z,squaredLength:Iz,str:uye,sub:pye,subtract:Sz,transformMat4:aye,transformQuat:lye},Symbol.toStringTag,{value:"Module"}));function tw(){return[0,0,0,0]}function wye(e){return[e[0],e[1],e[2],e[3]]}function Md(e,t,i,r){return[e,t,i,r]}function bye(e,t,i,r){return[e,t,i,r]}function _ye(e,t=tw()){const i=Math.min(4,e.length);for(let r=0;r<i;++r)t[r]=e[r];return t}function Sye(e,t){return new Float64Array(e,t,4)}function Cz(){return tw()}function Oz(){return Md(1,1,1,1)}function Pz(){return Md(1,0,0,0)}function kz(){return Md(0,1,0,0)}function Rz(){return Md(0,0,1,0)}function Nz(){return Md(0,0,0,1)}const xye=Cz(),Tye=Oz(),Mye=Pz(),$ye=kz(),Eye=Rz(),Iye=Nz();Object.freeze(Object.defineProperty({__proto__:null,ONES:Tye,UNIT_W:Iye,UNIT_X:Mye,UNIT_Y:$ye,UNIT_Z:Eye,ZEROS:xye,clone:wye,create:tw,createView:Sye,freeze:bye,fromArray:_ye,fromValues:Md,ones:Oz,unitW:Nz,unitX:Pz,unitY:kz,unitZ:Rz,zeros:Cz},Symbol.toStringTag,{value:"Module"}));const Lx=2.4;function Aye(e){return Qs(e*Lx)}function Cye(e){return uZ(e)/Lx}function Oye(e,t,i,r){let{color:a,ratio:p}=t,{color:y,ratio:g}=i;g===p&&(g===1?p-=1e-6:g+=1e-6);const _=xs((r-p)/(g-p),0,1);Az(e,a.toArray(),y.toArray(),_)}function Qxe(e){const i=new Uint8ClampedArray(2048);if(e=e.filter(({ratio:g})=>g>=0&&g<=1).sort((g,_)=>g.ratio-_.ratio).map(({color:g,ratio:_})=>({color:g,ratio:Math.max(_,.001)})),e.length<1)return i;let r=e[0],a=e[0],p=1;const y=tw();for(let g=0;g<512;g++){const _=(g+.5)/512;for(;_>a.ratio&&p<e.length;)r=a,a=e[p++];Oye(y,r,a,_),i.set(y,4*g)}return i}function e7e(e,t,i){const r=Math.sqrt(e**2+t**2)/i;return r>1?0:3/(Math.PI*i**2)*(1-r**2)**2}function t7e(e){return typeof e=="function"?e:e?t=>+t[e]:()=>1}var j4;function iA(e){if(e!=null){const{maxDensity:t,minDensity:i,radius:r}=e;if(t!=null||i!=null||r!=null){const{blurRadius:a,maxPixelIntensity:p,minPixelIntensity:y,...g}=e;return g}}return e}let ji=j4=class extends Ra{constructor(e){super(e),this.authoringInfo=null,this.colorStops=[new xg({ratio:0,color:new De("rgba(255, 140, 0, 0)")}),new xg({ratio:.75,color:new De("rgba(255, 140, 0, 1)")}),new xg({ratio:.9,color:new De("rgba(255, 0,   0, 1)")})],this.field=null,this.legendOptions=null,this.maxDensity=.04,this.minDensity=0,this.radius=18,this.referenceScale=0,this.type="heatmap",this.valueExpression=null,this.valueExpressionTitle=null}normalizeCtorArgs(e){return iA(e)}get blurRadius(){return Cye(this.radius)}set blurRadius(e){const t=this.maxPixelIntensity,i=this.minPixelIntensity;this._set("radius",Aye(e)),this._set("maxDensity",t*this._pixelIntensityToDensity),this._set("minDensity",i*this._pixelIntensityToDensity)}get maxPixelIntensity(){return this.maxDensity/this._pixelIntensityToDensity}set maxPixelIntensity(e){this._set("maxDensity",e*this._pixelIntensityToDensity)}get minPixelIntensity(){return this.minDensity/this._pixelIntensityToDensity}set minPixelIntensity(e){this._set("minDensity",e*this._pixelIntensityToDensity)}get _pixelIntensityToDensity(){return 24/(Lx**2*this.blurRadius**4)}read(e,t){e=iA(e),super.read(e,t)}getSymbol(){return new Ao}async getSymbolAsync(){return this.getSymbol()}get symbols(){return[this.getSymbol()]}async collectRequiredFields(e,t){const i=this.field,r=this.valueExpression;i&&typeof i=="string"&&Cr(e,t,i),r&&typeof r=="string"&&await vr(e,t,r)}getAttributeHash(){return""}getMeshHash(){return`${JSON.stringify(this.colorStops)}.${this.blurRadius}.${this.field}`}clone(){return new j4({authoringInfo:this.authoringInfo&&this.authoringInfo.clone(),colorStops:te(this.colorStops),field:this.field,legendOptions:te(this.legendOptions),maxDensity:this.maxDensity,minDensity:this.minDensity,radius:this.radius,referenceScale:this.referenceScale,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle})}};v([S({type:gx,json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],ji.prototype,"authoringInfo",void 0),v([S({type:Number,json:{origins:{"portal-item":{write:!0},"web-map":{write:!0}}}})],ji.prototype,"blurRadius",null),v([S({type:[xg],json:{write:{isRequired:!0}}})],ji.prototype,"colorStops",void 0),v([S({type:String,json:{write:!0}})],ji.prototype,"field",void 0),v([S({type:rp,json:{write:!0}})],ji.prototype,"legendOptions",void 0),v([S({type:Number,json:{write:!0}})],ji.prototype,"maxDensity",void 0),v([S({type:Number,json:{origins:{"portal-item":{write:!0},"web-map":{write:!0}}}})],ji.prototype,"maxPixelIntensity",null),v([S({type:Number,json:{write:!0}})],ji.prototype,"minDensity",void 0),v([S({type:Number,json:{origins:{"portal-item":{write:!0},"web-map":{write:!0}}}})],ji.prototype,"minPixelIntensity",null),v([S({type:Number,cast:ht,json:{write:!0}})],ji.prototype,"radius",void 0),v([S({type:Number,range:{min:0},json:{default:0,write:!0}})],ji.prototype,"referenceScale",void 0),v([Re({heatmap:"heatmap"})],ji.prototype,"type",void 0),v([S({type:String,json:{write:!0,origins:{"web-document":{write:!1},"portal-item":{write:!1}}}})],ji.prototype,"valueExpression",void 0),v([S({type:String})],ji.prototype,"valueExpressionTitle",void 0),v([S({readOnly:!0})],ji.prototype,"_pixelIntensityToDensity",null),ji=j4=v([H("esri.renderers.HeatmapRenderer")],ji);const Lz=ji;let mh=class extends at.ClonableMixin(he){constructor(){super(...arguments),this.color=new De([0,0,0,0]),this.label=null,this.threshold=0}};v([S({type:De,json:{write:!0}})],mh.prototype,"color",void 0),v([S({type:String,json:{write:!0}})],mh.prototype,"label",void 0),v([S({type:Number,range:{min:0,max:1},json:{write:!0}})],mh.prototype,"threshold",void 0),mh=v([H("esri.renderers.support.OthersCategory")],mh);const Pye={base:Sd,key:"type",typeMap:{size:X2,opacity:vx}};let zr=class extends xd(at.ClonableMixin(Ra)){constructor(t){super(t),this.attributes=null,this.backgroundFillSymbol=null,this.defaultColor=new De([0,0,0,0]),this.defaultLabel=null,this.holePercentage=0,this.othersCategory=new mh,this.legendOptions=null,this.outline=null,this.size=12,this.type="pie-chart",this.visualVariables=null}getSymbol(){var t;return new Ao({size:this.size?this.size/2+(((t=this.outline)==null?void 0:t.width)||0):0})}async getSymbolAsync(){return this.getSymbol()}get symbols(){return[this.getSymbol(),this.backgroundFillSymbol].filter(Sa)}getAttributeHash(){var t;return((t=this.visualVariables)==null?void 0:t.reduce((i,r)=>i+r.getAttributeHash(),""))??""}getMeshHash(){return this.symbols.reduce((t,i)=>t+JSON.stringify(i),"")}async collectRequiredFields(t,i){await this.collectVVRequiredFields(t,i);for(const r of this.attributes)r.valueExpression&&await vr(t,i,r.valueExpression),r.field&&t.add(r.field)}};v([S({type:[_z],json:{write:!0}})],zr.prototype,"attributes",void 0),v([S(xx)],zr.prototype,"backgroundFillSymbol",void 0),v([S({type:De,json:{write:!0}})],zr.prototype,"defaultColor",void 0),v([S({type:String,json:{write:!0}})],zr.prototype,"defaultLabel",void 0),v([S({type:Number,range:{min:0,max:1},json:{write:!0}})],zr.prototype,"holePercentage",void 0),v([S({type:mh,json:{write:!0}})],zr.prototype,"othersCategory",void 0),v([S({type:Tx,json:{write:!0}})],zr.prototype,"legendOptions",void 0),v([S({type:Ms,json:{default:null,write:!0}})],zr.prototype,"outline",void 0),v([S({type:Number,cast:ht,json:{write:!0}})],zr.prototype,"size",void 0),v([Re({pieChart:"pie-chart"})],zr.prototype,"type",void 0),v([S({types:[Pye]})],zr.prototype,"visualVariables",void 0),zr=v([H("esri.renderers.PieChartRenderer")],zr);const kye=zr,J1={key:"type",base:Ra,typeMap:{heatmap:Lz,simple:Or,"unique-value":Mx,"class-breaks":mz,"dot-density":B1e,dictionary:V1e,"pie-chart":kye},errorContext:"renderer"},Rye={key:"type",base:Ra,typeMap:{simple:Or,"unique-value":Mx,"class-breaks":mz,heatmap:Lz},errorContext:"renderer",validate:Nye};function Nye(e){switch(e.type){case"simple":return Lye(e);case"unique-value":return Dye(e);case"class-breaks":return jye(e);case"heatmap":return e}}function Lye(e){if(e.symbol)return e;ye.getLogger("esri.renderers.support.types").error("Removed invalid 'simple' renderer without a symbol from web scene.")}function Dye(e){const t=e.uniqueValueInfos,i=t==null?void 0:t.filter(({symbol:r,label:a},p)=>(r||ye.getLogger("esri.renderers.support.types").error(`Removed invalid unique value info ([${p}] ${a}) without a symbol from web scene.`),!!r));return(i==null?void 0:i.length)!==(t==null?void 0:t.length)&&(e.uniqueValueInfos=i),e}function jye(e){const t=e.classBreakInfos,i=t==null?void 0:t.filter(({symbol:r,label:a},p)=>(r||ye.getLogger("esri.renderers.support.types").error(`Removed invalid class break info ([${p}] ${a}) without a symbol from web scene.`),!!r));return(i==null?void 0:i.length)!==(t==null?void 0:t.length)&&(e.classBreakInfos=i),e}function s7e(e,t){return d1(e,null,t)}const Fye=od({types:J1});function d1(e,t,i){return e?e&&(e.styleName||e.styleUrl)&&e.type!=="uniqueValue"?(i!=null&&i.messages&&i.messages.push(new Ys("renderer:unsupported","Only UniqueValueRenderer can be referenced from a web style, but found '"+e.type+"'",{definition:e,context:i})),null):Fye(e,t,i):null}var F4;let hr=F4=class extends Hl{constructor(e){super(e),this.type="binning",this.binType="geohash",this.fixedBinLevel=null,this.labelingInfo=null,this.labelsVisible=!0,this.maxScale=0,this.popupEnabled=!0,this.popupTemplate=null,this.size=ht("12px"),this.fields=[],this.renderer=null}writeFields(e,t,i){const r=e.filter(a=>a.statisticType!=="avg_angle").map(a=>a.toJSON());Bi(i,r,t)}readRenderer(e,t,i){var a;const r=(a=t.drawingInfo)==null?void 0:a.renderer;return r?d1(r,t,i)??void 0:Ix(t,i)}clone(){return new F4({fields:te(this.fields),fixedBinLevel:this.fixedBinLevel,labelingInfo:te(this.labelingInfo),labelsVisible:this.labelsVisible,maxScale:this.maxScale,popupEnabled:this.popupEnabled,popupTemplate:te(this.popupTemplate),renderer:te(this.renderer),binType:te(this.binType),size:this.size})}};v([Re({binning:"binning"})],hr.prototype,"type",void 0),v([Re({geohash:"geohash",square:"square"}),S({type:["geohash","square"]})],hr.prototype,"binType",void 0),v([S({type:Number,json:{write:!0}})],hr.prototype,"fixedBinLevel",void 0),v([S({type:[Td],json:{read:{source:"drawingInfo.labelingInfo"},write:{target:"drawingInfo.labelingInfo"}}})],hr.prototype,"labelingInfo",void 0),v([S(J2)],hr.prototype,"labelsVisible",void 0),v([S({type:Number,json:{default:0,name:"visibilityInfo.maxScale"}})],hr.prototype,"maxScale",void 0),v([S(W2)],hr.prototype,"popupEnabled",void 0),v([S({type:Jh,json:{name:"popupInfo",write:!0}})],hr.prototype,"popupTemplate",void 0),v([S({cast:e=>e==="auto"?e:Er(ht(e))})],hr.prototype,"size",void 0),v([S({type:[nu],json:{write:!0}})],hr.prototype,"fields",void 0),v([be("fields")],hr.prototype,"writeFields",null),v([S({types:J1,json:{write:{target:"drawingInfo.renderer"}}})],hr.prototype,"renderer",void 0),v([me("renderer",["drawingInfo.renderer"])],hr.prototype,"readRenderer",null),hr=F4=v([H("esri.layers.support.FeatureReductionBinning")],hr);const Dz=hr;var z4;function rA(e){var t;return e.type==="simple"&&!((t=e.visualVariables)!=null&&t.length)}let bi=z4=class extends he{constructor(e){super(e),this.type="cluster",this.clusterRadius=ht("80px"),this.clusterMinSize=ht("12px"),this.clusterMaxSize=ht("50px"),this.maxScale=0,this.popupEnabled=!0,this.popupTemplate=null,this.renderer=null,this.symbol=null,this.labelingInfo=null,this.labelsVisible=!0,this.fields=[]}readRenderer(e,t,i){var a,p;const r=(a=t.drawingInfo)==null?void 0:a.renderer;return(p=r==null?void 0:r.authoringInfo)!=null&&p.isAutoGenerated?null:r?rA(r)?null:d1(r,t,i)??void 0:Ix(t,i)}readSymbol(e,t,i){var a,p;const r=(a=t.drawingInfo)==null?void 0:a.renderer;if((p=r==null?void 0:r.authoringInfo)!=null&&p.isAutoGenerated)return null;if(r&&rA(r)){const y=d1(r,t,i);return y==null?void 0:y.symbol}return null}writeSymbol(e,t,i,r){var p,y;const a=(y=(p=this.renderer)==null?void 0:p.authoringInfo)==null?void 0:y.isAutoGenerated;if(!this.renderer||a){const g=new Or({symbol:e});t.drawingInfo={renderer:g.write({},r)}}}writeFields(e,t,i){const r=e.filter(a=>a.statisticType!=="avg_angle").map(a=>a.toJSON());Bi(i,r,t)}readFields(e,t,i){return e.filter(r=>!r.isAutoGenerated).map(r=>nu.fromJSON(r))}clone(){return new z4({clusterRadius:this.clusterRadius,clusterMinSize:this.clusterMinSize,clusterMaxSize:this.clusterMaxSize,labelingInfo:te(this.labelingInfo),labelsVisible:this.labelsVisible,fields:te(this.fields),maxScale:this.maxScale,renderer:te(this.renderer),symbol:te(this.symbol),popupEnabled:this.popupEnabled,popupTemplate:te(this.popupTemplate)})}};v([S({type:["cluster"],readOnly:!0,json:{write:!0}})],bi.prototype,"type",void 0),v([S({cast:e=>e==="auto"?e:Er(ht(e)),json:{write:!0}})],bi.prototype,"clusterRadius",void 0),v([S({type:Number,cast:ht,json:{write:!0}})],bi.prototype,"clusterMinSize",void 0),v([S({type:Number,cast:ht,json:{write:!0}})],bi.prototype,"clusterMaxSize",void 0),v([S({type:Number,json:{default:0,name:"visibilityInfo.maxScale"}})],bi.prototype,"maxScale",void 0),v([S(W2)],bi.prototype,"popupEnabled",void 0),v([S({type:Jh,json:{read:{source:"popupInfo"},write:{target:"popupInfo"}}})],bi.prototype,"popupTemplate",void 0),v([S({types:J1,json:{write:{target:"drawingInfo.renderer"}}})],bi.prototype,"renderer",void 0),v([me("renderer",["drawingInfo.renderer"])],bi.prototype,"readRenderer",null),v([S({types:Tie})],bi.prototype,"symbol",void 0),v([me("symbol",["drawingInfo.renderer"])],bi.prototype,"readSymbol",null),v([be("symbol")],bi.prototype,"writeSymbol",null),v([S({type:[Td],json:{read:{source:"drawingInfo.labelingInfo"},write:{target:"drawingInfo.labelingInfo"}}})],bi.prototype,"labelingInfo",void 0),v([S(J2)],bi.prototype,"labelsVisible",void 0),v([S({type:[nu],json:{write:!0}})],bi.prototype,"fields",void 0),v([be("fields")],bi.prototype,"writeFields",null),v([me("fields")],bi.prototype,"readFields",null),bi=z4=v([H("esri.layers.support.FeatureReductionCluster")],bi);const jz=bi;var U4;let Tg=U4=class extends Hl{constructor(e){super(e),this.type="selection"}clone(){return new U4}};v([S({type:["selection"]})],Tg.prototype,"type",void 0),Tg=U4=v([H("esri.layers.support.FeatureReductionSelection")],Tg);const sA=Tg,nA={key:"type",base:Hl,typeMap:{cluster:jz,binning:Dz}},zye={types:{key:"type",base:Hl,typeMap:{selection:sA,cluster:jz,binning:Dz}},json:{name:"layerDefinition.featureReduction",write:{allowNull:!0},origins:{"web-map":{types:nA},"portal-item":{types:nA},"web-scene":{types:{key:"type",base:Hl,typeMap:{selection:sA}},name:"layerDefinition.featureReduction",write:{layerContainerTypes:Jt}}}}},wc={Base64:0,Hex:1,String:2,Raw:3},Pp=8,Fz=(1<<Pp)-1;function jl(e,t){const i=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(i>>16)<<16|65535&i}function Uye(e){const t=[];for(let i=0,r=e.length*Pp;i<r;i+=Pp)t[i>>5]|=(e.charCodeAt(i/Pp)&Fz)<<i%32;return t}function Vye(e){const t=[];for(let i=0,r=32*e.length;i<r;i+=Pp)t.push(String.fromCharCode(e[i>>5]>>>i%32&Fz));return t.join("")}function Gye(e){const t="0123456789abcdef",i=[];for(let r=0,a=4*e.length;r<a;r++)i.push(t.charAt(e[r>>2]>>r%4*8+4&15)+t.charAt(e[r>>2]>>r%4*8&15));return i.join("")}function Bye(e){const t="=",i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",r=[];for(let a=0,p=4*e.length;a<p;a+=3){const y=(e[a>>2]>>a%4*8&255)<<16|(e[a+1>>2]>>(a+1)%4*8&255)<<8|e[a+2>>2]>>(a+2)%4*8&255;for(let g=0;g<4;g++)8*a+6*g>32*e.length?r.push(t):r.push(i.charAt(y>>6*(3-g)&63))}return r.join("")}function qye(e,t){return e<<t|e>>>32-t}function iw(e,t,i,r,a,p){return jl(qye(jl(jl(t,e),jl(r,p)),a),i)}function rr(e,t,i,r,a,p,y){return iw(t&i|~t&r,e,t,a,p,y)}function sr(e,t,i,r,a,p,y){return iw(t&r|i&~r,e,t,a,p,y)}function nr(e,t,i,r,a,p,y){return iw(t^i^r,e,t,a,p,y)}function or(e,t,i,r,a,p,y){return iw(i^(t|~r),e,t,a,p,y)}function Hye(e,t){e[t>>5]|=128<<t%32,e[14+(t+64>>>9<<4)]=t;let i=1732584193,r=-271733879,a=-1732584194,p=271733878;for(let y=0;y<e.length;y+=16){const g=i,_=r,T=a,I=p;i=rr(i,r,a,p,e[y],7,-680876936),p=rr(p,i,r,a,e[y+1],12,-389564586),a=rr(a,p,i,r,e[y+2],17,606105819),r=rr(r,a,p,i,e[y+3],22,-1044525330),i=rr(i,r,a,p,e[y+4],7,-176418897),p=rr(p,i,r,a,e[y+5],12,1200080426),a=rr(a,p,i,r,e[y+6],17,-1473231341),r=rr(r,a,p,i,e[y+7],22,-45705983),i=rr(i,r,a,p,e[y+8],7,1770035416),p=rr(p,i,r,a,e[y+9],12,-1958414417),a=rr(a,p,i,r,e[y+10],17,-42063),r=rr(r,a,p,i,e[y+11],22,-1990404162),i=rr(i,r,a,p,e[y+12],7,1804603682),p=rr(p,i,r,a,e[y+13],12,-40341101),a=rr(a,p,i,r,e[y+14],17,-1502002290),r=rr(r,a,p,i,e[y+15],22,1236535329),i=sr(i,r,a,p,e[y+1],5,-165796510),p=sr(p,i,r,a,e[y+6],9,-1069501632),a=sr(a,p,i,r,e[y+11],14,643717713),r=sr(r,a,p,i,e[y],20,-373897302),i=sr(i,r,a,p,e[y+5],5,-701558691),p=sr(p,i,r,a,e[y+10],9,38016083),a=sr(a,p,i,r,e[y+15],14,-660478335),r=sr(r,a,p,i,e[y+4],20,-405537848),i=sr(i,r,a,p,e[y+9],5,568446438),p=sr(p,i,r,a,e[y+14],9,-1019803690),a=sr(a,p,i,r,e[y+3],14,-187363961),r=sr(r,a,p,i,e[y+8],20,1163531501),i=sr(i,r,a,p,e[y+13],5,-1444681467),p=sr(p,i,r,a,e[y+2],9,-51403784),a=sr(a,p,i,r,e[y+7],14,1735328473),r=sr(r,a,p,i,e[y+12],20,-1926607734),i=nr(i,r,a,p,e[y+5],4,-378558),p=nr(p,i,r,a,e[y+8],11,-2022574463),a=nr(a,p,i,r,e[y+11],16,1839030562),r=nr(r,a,p,i,e[y+14],23,-35309556),i=nr(i,r,a,p,e[y+1],4,-1530992060),p=nr(p,i,r,a,e[y+4],11,1272893353),a=nr(a,p,i,r,e[y+7],16,-155497632),r=nr(r,a,p,i,e[y+10],23,-1094730640),i=nr(i,r,a,p,e[y+13],4,681279174),p=nr(p,i,r,a,e[y],11,-358537222),a=nr(a,p,i,r,e[y+3],16,-722521979),r=nr(r,a,p,i,e[y+6],23,76029189),i=nr(i,r,a,p,e[y+9],4,-640364487),p=nr(p,i,r,a,e[y+12],11,-421815835),a=nr(a,p,i,r,e[y+15],16,530742520),r=nr(r,a,p,i,e[y+2],23,-995338651),i=or(i,r,a,p,e[y],6,-198630844),p=or(p,i,r,a,e[y+7],10,1126891415),a=or(a,p,i,r,e[y+14],15,-1416354905),r=or(r,a,p,i,e[y+5],21,-57434055),i=or(i,r,a,p,e[y+12],6,1700485571),p=or(p,i,r,a,e[y+3],10,-1894986606),a=or(a,p,i,r,e[y+10],15,-1051523),r=or(r,a,p,i,e[y+1],21,-2054922799),i=or(i,r,a,p,e[y+8],6,1873313359),p=or(p,i,r,a,e[y+15],10,-30611744),a=or(a,p,i,r,e[y+6],15,-1560198380),r=or(r,a,p,i,e[y+13],21,1309151649),i=or(i,r,a,p,e[y+4],6,-145523070),p=or(p,i,r,a,e[y+11],10,-1120210379),a=or(a,p,i,r,e[y+2],15,718787259),r=or(r,a,p,i,e[y+9],21,-343485551),i=jl(i,g),r=jl(r,_),a=jl(a,T),p=jl(p,I)}return[i,r,a,p]}function zz(e,t=wc.Hex){const i=t||wc.Base64,r=Hye(Uye(e),e.length*Pp);switch(i){case wc.Raw:return r;case wc.Hex:return Gye(r);case wc.String:return Vye(r);case wc.Base64:return Bye(r)}}const Wye=()=>ye.getLogger("esri.views.2d.layers.support.clusterUtils");ne.add("esri-cluster-arcade-enabled",!0);const Jye=ne("esri-cluster-arcade-enabled"),Zye=new Set(["simple-line","simple-fill","picture-fill"]);function oA(e,t){let i=t.clone();if(!Kye(i))return i;if(t.symbols.some(r=>Zye.has(r.type))&&(i=new Or({symbol:new Ao})),i.authoringInfo||(i.authoringInfo=new gx),i.authoringInfo.isAutoGenerated=!0,"visualVariables"in i){const r=(i.visualVariables||[]).filter(a=>a.valueExpression!=="$view.scale");r.forEach(a=>{a.type==="rotation"?a.field?a.field=Tu(e,a.field,"avg_angle","number"):a.valueExpression&&(a.field=Kd(e,a.valueExpression,"avg_angle","number"),a.valueExpression=null):a.normalizationField?(a.field=Tu(e,a.field,"avg_norm","number",a.normalizationField),a.normalizationField=null):a.field?a.field=Tu(e,a.field,"avg","number"):a.valueExpression&&(a.field=Kd(e,a.valueExpression,"avg","number"),a.valueExpression=null)}),i.visualVariables=r}switch(i.type){case"simple":break;case"pie-chart":for(const r of i.attributes)r.field?r.field=Tu(e,r.field,"sum","number"):r.valueExpression&&(r.field=Kd(e,r.valueExpression,"sum","number"),r.valueExpression=null);break;case"unique-value":i.field?i.field=Tu(e,i.field,"mode","string"):i.valueExpression&&(i.field=Kd(e,i.valueExpression,"mode","string"),i.valueExpression=null);break;case"class-breaks":i.normalizationField?(i.field=Tu(e,i.field,"avg_norm","number",i.normalizationField),i.normalizationField=null):i.field?i.field=Tu(e,i.field,"avg","number"):i.valueExpression&&(i.field=Kd(e,i.valueExpression,"avg","number"),i.valueExpression=null)}return i}const Kye=e=>{const t=i=>Wye().error(new Y("Unsupported-renderer",i,{renderer:e}));if(!e)return!1;switch(e.type){case"unique-value":if(e.field2||e.field3)return t("FeatureReductionCluster does not support multi-field UniqueValueRenderers"),!1;break;case"class-breaks":if(e.normalizationField){const i=e.normalizationType;if(i!=="field")return t(`FeatureReductionCluster does not support a normalizationType of ${i}`),!1}break;case"simple":case"pie-chart":break;default:return t(`FeatureReductionCluster does not support renderers of type ${e.type}`),!1}if(!Jye){if("valueExpression"in e&&e.valueExpression)return t("FeatureReductionCluster does not currently support renderer.valueExpression. Support will be added in a future release"),!1;if(("visualVariables"in e&&e.visualVariables||[]).some(i=>!(!("valueExpression"in i)||!i.valueExpression)))return t("FeatureReductionCluster does not currently support visualVariables with a valueExpression. Support will be added in a future release"),!1}return!0};function Yye(e,t,i){switch(e){case"sum":return`cluster_sum_${t}`;case"avg":case"avg_angle":return`cluster_avg_${t}`;case"mode":return`cluster_type_${t}`;case"avg_norm":{const r=i,a="field",p=t.toLowerCase()+",norm:"+a+","+r.toLowerCase();return"cluster_avg_"+zz(p)}}}function Kd(e,t,i,r){const a=zz(t),p=i==="mode"?`cluster_type_${a}`:i==="sum"?`cluster_sum_${a}`:`cluster_avg_${a}`;return e.some(y=>y.name===p)||e.push(new nu({name:p,isAutoGenerated:!0,onStatisticExpression:new Ox({expression:t,returnType:r}),statisticType:i})),p}function Tu(e,t,i,r,a){if(t==="cluster_count"||e.some(y=>y.name===t))return t;const p=Yye(i,t,a);return e.some(y=>y.name===p)||(i==="avg_norm"?e.push(new nu({name:p,isAutoGenerated:!0,onStatisticExpression:new Ox({expression:`$feature.${t} / $feature.${a}`,returnType:r}),statisticType:"avg"})):e.push(new nu({name:p,isAutoGenerated:!0,onStatisticField:t,statisticType:i}))),p}const Xye=e=>{let t=class extends e{constructor(...i){super(...i),this.addHandles(Le(()=>this.renderer,()=>{if(this.featureReduction){const r=this._normalizeFeatureReduction(this.featureReduction);this._set("featureReduction",r)}},So))}set featureReduction(i){const r=this._normalizeFeatureReduction(i);this._set("featureReduction",r)}set renderer(i){}_withClusterVariable(i,r,a){const p=i.clone();return"visualVariables"in p&&(p.visualVariables||(p.visualVariables=[]),p.visualVariables.some(y=>y.type==="size")||p.visualVariables.push(new X2({field:"cluster_count",stops:[new dg({value:1}),new dg({useMinValue:!0,size:r}),new dg({useMaxValue:!0,size:a})]}))),p}_normalizeFeatureReduction(i){var A;if((i==null?void 0:i.type)!=="cluster")return i;const r=i.clone(),a=[new nu({name:"cluster_count",alias:"cluster_count",isAutoGenerated:!0,statisticType:"count"})],p=(r.fields??[]).filter(P=>!P.isAutoGenerated),y=i.renderer&&!((A=i.renderer.authoringInfo)!=null&&A.isAutoGenerated),{clusterMinSize:g,clusterMaxSize:_}=r;if(y){r.fields=[...a,...p];const P=this._withClusterVariable(r.renderer,g,_);return r.effectiveFeatureRenderer=P,r.effectiveClusterRenderer=P,r}if(i.symbol){if(r.fields=[...a,...p],r.renderer=null,!this.renderer)return r.effectiveFeatureRenderer=null,r.effectiveClusterRenderer=null,r;const P=oA(a,this.renderer),N=this._withClusterVariable(P,g,_),D="visualVariables"in N&&N.visualVariables?N.visualVariables:[],z=new Or({symbol:i.symbol,visualVariables:D});return r.fields=[...a,...p],r.effectiveFeatureRenderer=N,r.effectiveClusterRenderer=z,r}if(!this.renderer)return i;const T=oA(a,this.renderer);r.fields=[...a,...p],r.renderer=T;const I=this._withClusterVariable(T,g,_);return r.effectiveFeatureRenderer=I,r.effectiveClusterRenderer=I,r}};return v([S(zye)],t.prototype,"featureReduction",null),t=v([H("esri.layers.mixins.FeatureReductionLayer")],t),t},aA={ArcGISAnnotationLayer:!0,ArcGISDimensionLayer:!0,ArcGISFeatureLayer:!0,ArcGISImageServiceLayer:!0,ArcGISImageServiceVectorLayer:!0,ArcGISMapServiceLayer:!0,ArcGISStreamLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,BingMapsAerial:!0,BingMapsHybrid:!0,BingMapsRoad:!0,CatalogLayer:!0,CSV:!0,GeoJSON:!0,GeoRSS:!0,GroupLayer:!0,KML:!0,KnowledgeGraphLayer:!0,MediaLayer:!0,OGCFeatureLayer:!0,OrientedImageryLayer:!0,SubtypeGroupLayer:!0,VectorTileLayer:!0,WCS:!0,WFS:!0,WMS:!0,WebTiledLayer:!0},lA={ArcGISImageServiceLayer:!0,ArcGISImageServiceVectorLayer:!0,ArcGISMapServiceLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,BingMapsAerial:!0,BingMapsHybrid:!0,BingMapsRoad:!0,OpenStreetMap:!0,VectorTileLayer:!0,WCS:!0,WMS:!0,WebTiledLayer:!0},uA={ArcGISFeatureLayer:!0,SubtypeGroupTable:!0},Qye={"web-scene/operational-layers":{ArcGISDimensionLayer:!0,ArcGISFeatureLayer:!0,ArcGISImageServiceLayer:!0,ArcGISMapServiceLayer:!0,ArcGISSceneServiceLayer:!0,ArcGISTiledElevationServiceLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,BuildingSceneLayer:!0,CatalogLayer:!0,CSV:!0,GeoJSON:!0,GroupLayer:!0,IntegratedMesh3DTilesLayer:!0,Object3DTilesLayer:!0,IntegratedMeshLayer:!0,KML:!0,LineOfSightLayer:!0,MediaLayer:!0,OGCFeatureLayer:!0,OrientedImageryLayer:!0,PointCloudLayer:!0,RasterDataLayer:!0,VectorTileLayer:!0,ViewshedLayer:!0,Voxel:!0,WCS:!0,WFS:!0,WMS:!0,WebTiledLayer:!0},"web-scene/basemap":{ArcGISImageServiceLayer:!0,ArcGISMapServiceLayer:!0,ArcGISSceneServiceLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,OpenStreetMap:!0,VectorTileLayer:!0,WCS:!0,WMS:!0,WebTiledLayer:!0},"web-scene/ground":{ArcGISTiledElevationServiceLayer:!0,RasterDataElevationLayer:!0},"web-scene/tables":{ArcGISFeatureLayer:!0},"web-map/operational-layers":aA,"web-map/basemap":lA,"web-map/tables":uA,"link-chart/operational-layers":{...aA,LinkChartLayer:!0},"link-chart/basemap":lA,"link-chart/tables":uA,"portal-item/operational-layers":{ArcGISFeatureLayer:!0,ArcGISImageServiceLayer:!0,ArcGISSceneServiceLayer:!0,ArcGISStreamLayer:!0,ArcGISTiledImageServiceLayer:!0,BuildingSceneLayer:!0,IntegratedMesh3DTilesLayer:!0,IntegratedMeshLayer:!0,MediaLayer:!0,OrientedImageryLayer:!0,PointCloudLayer:!0,SubtypeGroupLayer:!0,WCS:!0},"portal-item/tables":{ArcGISFeatureLayer:!0,SubtypeGroupTable:!0}},eme=e=>{let t=class extends e{constructor(){super(...arguments),this.persistenceEnabled=!0,this.title=null}readId(i,r,a){var p;return((p=a==null?void 0:a.portalItem)==null?void 0:p.type)==="Group Layer"?void 0:i}writeListMode(i,r,a,p){(p&&p.layerContainerType==="ground"||i&&MG(this,a,{},p))&&(r[a]=i)}writeOperationalLayerType(i,r,a){i&&(r[a]=i)}writeTitle(i,r){r.title=i??"Layer"}readVisibilityTimeExtent(i){return i?Ma.fromArray(i):null}writeVisibilityTimeExtent(i,r,a,p){i&&p.layerContainerType!=="tables"&&(i.isEmpty?p!=null&&p.messages&&p.messages.push(new Y("layer:invalid-visibilityTimeExtent","visibilityTimeExtent cannot be empty")):r[a]=i.toArray())}read(i,r){r&&(r.layer=this),SG(this,i,a=>super.read(i,a),r)}write(i,r){var y,g;if(!this.persistenceEnabled&&!(r!=null&&r.ignorePersistenceEnabled))return null;if(r!=null&&r.origin){const _=`${r.origin}/${r.layerContainerType||"operational-layers"}`,T=Qye[_];let I=!!(T!=null&&T[this.operationalLayerType]);if(this.operationalLayerType==="ArcGISTiledElevationServiceLayer"&&_==="web-scene/operational-layers"&&(I=!1),this.operationalLayerType==="ArcGISDimensionLayer"&&_==="web-map/operational-layers"&&(I=!1),!I)return(y=r.messages)==null||y.push(new Y("layer:unsupported",`Layers (${this.title}, ${this.id}) of type '${this.declaredClass}' are not supported in the context of '${_}'`,{layer:this})),null}const a=super.write(i,{...r,layer:this}),p=!!r&&!!r.messages&&!!r.messages.filter(_=>_ instanceof Y&&_.name==="web-document-write:property-required").length;return e2(a==null?void 0:a.url)?((g=r==null?void 0:r.messages)==null||g.push(new Y("layer:invalid-url",`Layer (${this.title}, ${this.id}) of type '${this.declaredClass}' using a Blob URL cannot be written to web scenes and web maps`,{layer:this})),null):!this.url&&p?null:a}beforeSave(){}};return v([S({type:String,json:{write:{ignoreOrigin:!0},origins:{"web-scene":{write:{isRequired:!0,ignoreOrigin:!0}},"portal-item":{write:!1}}}})],t.prototype,"id",void 0),v([me("id",["id"])],t.prototype,"readId",null),v([S(kF)],t.prototype,"listMode",void 0),v([be("listMode")],t.prototype,"writeListMode",null),v([S({type:String,readOnly:!0,json:{read:!1,write:{target:"layerType",ignoreOrigin:!0},origins:{"portal-item":{write:!1},"web-scene":{name:"layerType",read:!1,write:{enabled:!0,ignoreOrigin:!0,layerContainerTypes:Jt,isRequired:!0}}}}})],t.prototype,"operationalLayerType",void 0),v([be("operationalLayerType")],t.prototype,"writeOperationalLayerType",null),v([S(Y_)],t.prototype,"opacity",void 0),v([S({type:Boolean,readOnly:!1})],t.prototype,"persistenceEnabled",void 0),v([S({type:String,json:{write:{ignoreOrigin:!0,writerEnsuresNonNull:!0},origins:{"web-scene":{write:{isRequired:!0,ignoreOrigin:!0,writerEnsuresNonNull:!0}},"portal-item":{write:!1}}},value:"Layer"})],t.prototype,"title",void 0),v([be("title"),be(["web-scene"],"title")],t.prototype,"writeTitle",null),v([S({type:Ma,json:{origins:{"web-scene":{write:{layerContainerTypes:Jt}}}}})],t.prototype,"visibilityTimeExtent",void 0),v([me("visibilityTimeExtent")],t.prototype,"readVisibilityTimeExtent",null),v([be(["portal-item","web-map","web-scene"],"visibilityTimeExtent",{visibilityTimeExtent:{type:[[ft,Xv]]}})],t.prototype,"writeVisibilityTimeExtent",null),v([S({type:Boolean,json:{name:"visibility",write:{layerContainerTypes:Jt}}})],t.prototype,"visible",void 0),t=v([H("esri.layers.mixins.OperationalLayer")],t),t};var V4;const Qy=new rt({asc:"ascending",desc:"descending"});let sp=V4=class extends he{constructor(e){super(e),this.field=null,this.valueExpression=null,this.order="ascending"}clone(){return new V4({field:this.field,valueExpression:this.valueExpression,order:this.order})}};v([S({type:String,json:{write:!0}})],sp.prototype,"field",void 0),v([S({type:String,json:{write:!0,origins:{"web-scene":{read:!1,write:!1}}}})],sp.prototype,"valueExpression",void 0),v([S({type:Qy.apiValues,json:{type:Qy.jsonValues,read:Qy.read,write:Qy.write}})],sp.prototype,"order",void 0),sp=V4=v([H("esri.layers.support.OrderByInfo")],sp);const Uz=sp;function tme(e,t,i){if(!e)return null;const r=e.find(p=>!!p.field);if(!r)return null;const a=new Uz;return a.read(r,i),[a]}function ime(e,t,i,r){const a=e.find(p=>!!p.field);a&&Bi(i,[a.toJSON()],t)}const rme={type:[Uz],json:{origins:{"web-scene":{write:!1,read:!1}},name:"layerDefinition.orderBy",read:{reader:tme},write:{writer:ime}}},sme=e=>{let t=class extends e{constructor(){super(...arguments),this.orderBy=null}};return v([S(rme)],t.prototype,"orderBy",void 0),t=v([H("esri.layers.mixins.OrderedLayer")],t),t};async function nme(e){const t=e.spatialReference;if(t.isWGS84)return e.clone();if(t.isWebMercator)return ap(e);const i=qe.WGS84;return await hS(t,i),Ca(e,i)}function ome(e,t){if(!Vz(e,t)){const i=e.typeKeywords;i?i.push(t):e.typeKeywords=[t]}}function Vz(e,t){var i;return!!((i=e.typeKeywords)!=null&&i.includes(t))}function n7e(e){return Vz(e,lme.HOSTED_SERVICE)}function ame(e,t){const i=e.typeKeywords;if(i){const r=i.indexOf(t);r>-1&&i.splice(r,1)}}function o7e(e,t,i){i?ome(e,t):ame(e,t)}async function a7e(e){const t=e.clone().normalize();let i;if(t.length>1)for(const r of t)i?r.width>i.width&&(i=r):i=r;else i=t[0];return nme(i)}const lme={GROUP_LAYER_MAP:"Map",HOSTED_SERVICE:"Hosted Service",JSAPI:"ArcGIS API for JavaScript",METADATA:"Metadata",MULTI_LAYER:"Multilayer",ORIENTED_IMAGERY_LAYER:"OrientedImageryLayer",SINGLE_LAYER:"Singlelayer",SUBTYPE_GROUP_LAYER:"SubtypeGroupLayer",SUBTYPE_GROUP_TABLE:"SubtypeGroupTable",TABLE:"Table",TILED_IMAGERY:"Tiled Imagery"};function ume(e){var _;const{portal:t,isOrgItem:i,itemControl:r}=e,a=(_=t.user)==null?void 0:_.privileges;let p=!a||a.includes("features:user:edit"),y=!!i&&!!(a!=null&&a.includes("features:user:fullEdit"));const g=r==="update"||r==="admin";return g?y=p=!0:y&&(p=!0),{features:{edit:p,fullEdit:y},content:{updateItem:g}}}const hme=e=>{let t=class extends e{constructor(){super(...arguments),this.resourceReferences={portalItem:null,paths:[]},this.userHasEditingPrivileges=!0,this.userHasFullEditingPrivileges=!1,this.userHasUpdateItemPrivileges=!1}destroy(){this.portalItem=Ht(this.portalItem),this.resourceReferences.portalItem=null,this.resourceReferences.paths.length=0}set portalItem(i){i!==this._get("portalItem")&&(this.removeOrigin("portal-item"),this._set("portalItem",i))}readPortalItem(i,r,a){if(r.itemId)return new m0({id:r.itemId,portal:a==null?void 0:a.portal})}writePortalItem(i,r){i!=null&&i.id&&(r.itemId=i.id)}async loadFromPortal(i,r){var a;if((a=this.portalItem)!=null&&a.id)try{const{load:p}=await fe(()=>import("./layersLoader-DMqki-Hz.js"),__vite__mapDeps([272,11,10,12,273]));return At(r),await p({instance:this,supportedTypes:i.supportedTypes,validateItem:i.validateItem,supportsData:i.supportsData,layerModuleTypeMap:i.layerModuleTypeMap,populateGroupLayer:i.populateGroupLayer},r)}catch(p){throw Si(p)||ye.getLogger(this).warn(`Failed to load layer (${this.title}, ${this.id}) portal item (${this.portalItem.id})
  ${p}`),p}}async finishLoadEditablePortalLayer(i){this._set("userHasEditingPrivileges",await this._fetchUserHasEditingPrivileges(i).catch(r=>(po(r),!0)))}async setUserPrivileges(i,r){if(!dt.userPrivilegesApplied)return this.finishLoadEditablePortalLayer(r);if(this.url)try{const{features:{edit:a,fullEdit:p},content:{updateItem:y}}=await this._fetchUserPrivileges(i,r);this._set("userHasEditingPrivileges",a),this._set("userHasFullEditingPrivileges",p),this._set("userHasUpdateItemPrivileges",y)}catch(a){po(a)}}async _fetchUserPrivileges(i,r){let a=this.portalItem;if(!i||!a||!a.loaded||a.sourceUrl)return this._fetchFallbackUserPrivileges(r);const p=!(Ze!=null&&Ze.findCredential(this.url)),y=i===a.id;if(y&&a.portal.user)return this._getUserPrivileges(a,p);let g,_;if(y)g=a.portal.url;else try{g=await H6(this.url,r)}catch(P){po(P)}if(!g||!VG(g,a.portal.url))return this._fetchFallbackUserPrivileges(r);try{const P=r!=null?r.signal:null;_=await(Ze==null?void 0:Ze.getCredential(`${g}/sharing`,{prompt:!1,signal:P}))}catch(P){po(P)}const T=!0,I=!1,A=!1;if(!_)return{features:{edit:T,fullEdit:I},content:{updateItem:A}};try{if(y?await a.reload():(a=new m0({id:i,portal:{url:g}}),await a.load(r)),a.portal.user)return this._getUserPrivileges(a,p)}catch(P){po(P)}return{features:{edit:T,fullEdit:I},content:{updateItem:A}}}_getUserPrivileges(i,r){const a=ume(i);return r&&(a.features.edit=!0),a}async _fetchFallbackUserPrivileges(i){let r=!0;try{r=await this._fetchUserHasEditingPrivileges(i)}catch(a){po(a)}return{features:{edit:r,fullEdit:!1},content:{updateItem:!1}}}async _fetchUserHasEditingPrivileges(i){const r=this.url?Ze==null?void 0:Ze.findCredential(this.url):null;if(!r)return!0;const a=em.credential===r?em.user:await this._fetchEditingUser(i);return em.credential=r,em.user=a,(a==null?void 0:a.privileges)==null||a.privileges.includes("features:user:edit")}async _fetchEditingUser(i){var I,A;const r=(A=(I=this.portalItem)==null?void 0:I.portal)==null?void 0:A.user;if(r)return r;const a=Ze==null?void 0:Ze.findServerInfo(this.url??"");if(!(a!=null&&a.owningSystemUrl))return null;const p=`${a.owningSystemUrl}/sharing/rest`,y=er.getDefault();if(y&&y.loaded&&Ks(y.restUrl)===Ks(p))return y.user;const g=`${p}/community/self`,_=i!=null?i.signal:null,T=await i2(kt(g,{authMode:"no-prompt",query:{f:"json"},signal:_}));return T.ok?R6.fromJSON(T.value.data):null}read(i,r){r&&(r.layer=this),super.read(i,r)}write(i,r){var y;const a=r==null?void 0:r.portal,p=((y=this.portalItem)==null?void 0:y.id)&&(this.portalItem.portal||er.getDefault());return a&&p&&!QC(p.restUrl,a.restUrl)?(r.messages&&r.messages.push(new Y("layer:cross-portal",`The layer '${this.title} (${this.id})' cannot be persisted because it refers to an item on a different portal than the one being saved to. To save, set layer.portalItem to null or save to the same portal as the item associated with the layer`,{layer:this})),null):super.write(i,{...r,layer:this})}};return v([S({type:m0})],t.prototype,"portalItem",null),v([me("web-document","portalItem",["itemId"])],t.prototype,"readPortalItem",null),v([be("web-document","portalItem",{itemId:{type:String}})],t.prototype,"writePortalItem",null),v([S({clonable:!1})],t.prototype,"resourceReferences",void 0),v([S({type:Boolean,readOnly:!0})],t.prototype,"userHasEditingPrivileges",void 0),v([S({type:Boolean,readOnly:!0})],t.prototype,"userHasFullEditingPrivileges",void 0),v([S({type:Boolean,readOnly:!0})],t.prototype,"userHasUpdateItemPrivileges",void 0),t=v([H("esri.layers.mixins.PortalLayer")],t),t},em={credential:null,user:null};let a0=class extends Ae{constructor(){super(...arguments),this.updating=!1,this.status="unknown"}};v([S()],a0.prototype,"updating",void 0),v([S()],a0.prototype,"status",void 0),a0=v([H("esri.layers.support.PublishingInfo")],a0);const cme=a0,pme=Symbol(),dme=e=>{var t;let i=class extends e{constructor(){super(...arguments),this[t]=!0}get publishingInfo(){if(this.destroyed)return null;const r=this._get("publishingInfo");if(r)return r;const a=new cme;return this._checkPublishingStatus(a),a}_checkPublishingStatus(r){let y=0;const g=async T=>{let I;r.updating=!0;try{I=await this.fetchPublishingStatus()}catch{I="unavailable"}I!=="published"&&I!=="unavailable"||(r.status==="publishing"&&this.refresh(),_.remove()),r.status=I,r.updating=!1,_.removed||(y=setTimeout(g,T,T+125))},_={removed:!1,remove(){this.removed=!0,clearTimeout(y)}};this.when().catch(()=>_.remove()),g(250),this.addHandles(_)}};return t=pme,v([S({readOnly:!0,clonable:!1})],i.prototype,"publishingInfo",null),i=v([H("esri.layers.mixins.PublishableLayer")],i),i},Fl=new xe,j0=new WeakMap;function fme(e){mme(e)&&Fl.push(new WeakRef(e))}function yme(e){const t=Fl.find(i=>i.deref()===e);t&&Fl.remove(t)}function mme(e){return e!=null&&typeof e=="object"&&"refreshInterval"in e&&"refresh"in e}function Gz(e,t){return Number.isFinite(e)&&Number.isFinite(t)?t<=0?e:Gz(t,e%t):0}let t3=0,tm=0;function gme(){const e=Date.now();let t=!1;for(const i of Fl){const r=i.deref();r?r.refreshInterval&&e-(j0.get(r)??0)+5>=6e4*r.refreshInterval&&(j0.set(r,e),r.refresh(e)):t=!0}if(t)for(let i=Fl.length-1;i>=0;i--)Fl.at(i).deref()||Fl.removeAt(i)}_C(()=>{const e=Date.now();let t=0;for(const i of Fl){const r=i.deref();r&&(t=Gz(Math.round(6e4*r.refreshInterval),t),r.refreshInterval?j0.get(r)||j0.set(r,e):j0.delete(r))}if(t!==tm){if(tm=t,clearInterval(t3),tm===0)return void(t3=0);t3=setInterval(gme,tm)}},So);const hA=.1,vme=e=>{let t=class extends e{constructor(...i){super(...i),this.refreshInterval=0,this.refreshTimestamp=0,this._debounceHasDataChanged=e6(()=>this.hasDataChanged()),this.when().then(()=>{this.destroyed||fme(this)},()=>{})}destroy(){yme(this)}castRefreshInterval(i){return i>=hA?i:i<=0?0:hA}get refreshParameters(){return{_ts:this.refreshTimestamp||null}}refresh(i=Date.now()){F0(this._debounceHasDataChanged()).then(r=>{r&&this._set("refreshTimestamp",i),this.emit("refresh",{dataChanged:r})},r=>{ye.getLogger(this).error(r),this.emit("refresh",{dataChanged:!1,error:r})})}async hasDataChanged(){return!0}get test(){}};return v([S({type:Number,json:{write:!0,origins:{"web-scene":{write:{enabled:!0,layerContainerTypes:Jt}}}}})],t.prototype,"refreshInterval",void 0),v([ct("refreshInterval")],t.prototype,"castRefreshInterval",null),v([S({readOnly:!0})],t.prototype,"refreshTimestamp",void 0),v([S({readOnly:!0})],t.prototype,"refreshParameters",null),t=v([H("esri.layers.mixins.RefreshableLayer")],t),t},wme=e=>{let t=class extends e{constructor(){super(...arguments),this.minScale=0,this.maxScale=0}get effectiveScaleRange(){const i={minScale:this.minScale,maxScale:this.maxScale},r=this.parent;r&&"effectiveScaleRange"in r&&bme(i,r.effectiveScaleRange);const a=this._get("effectiveScaleRange");return a&&a.minScale===i.minScale&&a.maxScale===i.maxScale?a:i}};return v([S({type:Number,nonNullable:!0,json:{write:!0}})],t.prototype,"minScale",void 0),v([S({type:Number,nonNullable:!0,json:{write:!0}})],t.prototype,"maxScale",void 0),v([S({readOnly:!0})],t.prototype,"effectiveScaleRange",null),t=v([H("esri.layers.mixins.ScaleRangeLayer")],t),t};function bme(e,t){return e.minScale=e.minScale>0?t.minScale>0?Math.min(e.minScale,t.minScale):e.minScale:t.minScale,e.maxScale=e.maxScale>0?t.maxScale>0?Math.max(e.maxScale,t.maxScale):e.maxScale:t.maxScale,e}const Bz=qi()({esriTimeUnitsMilliseconds:"milliseconds",esriTimeUnitsSeconds:"seconds",esriTimeUnitsMinutes:"minutes",esriTimeUnitsHours:"hours",esriTimeUnitsDays:"days",esriTimeUnitsWeeks:"weeks",esriTimeUnitsMonths:"months",esriTimeUnitsYears:"years",esriTimeUnitsDecades:"decades",esriTimeUnitsCenturies:"centuries",esriTimeUnitsUnknown:void 0});let l0=class extends at.ClonableMixin(he){constructor(t){super(t),this.unit="milliseconds",this.value=0}toMilliseconds(){return Fk(this.value,this.unit,"milliseconds")}};v([Re(Bz,{nonNullable:!0})],l0.prototype,"unit",void 0),v([S({type:Number,json:{write:!0},nonNullable:!0})],l0.prototype,"value",void 0),l0=v([H("esri.time.TimeInterval")],l0);const f1=l0;function cA(e,t){return f1.fromJSON({value:e,unit:t})}let Yi=class extends at.ClonableMixin(he){constructor(t){super(t),this.cumulative=!1,this.endField=null,this.fullTimeExtent=null,this.hasLiveData=!1,this.interval=null,this.startField=null,this.timeZone=null,this.trackIdField=null,this.useTime=!0,this.stops=null}readFullTimeExtent(t,i){return i.timeExtent&&Array.isArray(i.timeExtent)&&i.timeExtent.length===2?Ma.fromArray(i.timeExtent):null}writeFullTimeExtent(t,i){(t==null?void 0:t.start)!=null&&t.end!=null?i.timeExtent=t.toArray():i.timeExtent=null}readInterval(t,i){return i.timeInterval&&i.timeIntervalUnits?cA(i.timeInterval,i.timeIntervalUnits):i.defaultTimeInterval&&i.defaultTimeIntervalUnits?cA(i.defaultTimeInterval,i.defaultTimeIntervalUnits):null}writeInterval(t,i){i.timeInterval=(t==null?void 0:t.toJSON().value)??null,i.timeIntervalUnits=(t==null?void 0:t.toJSON().unit)??null}};v([S({type:Boolean,json:{name:"exportOptions.timeDataCumulative",write:!0}})],Yi.prototype,"cumulative",void 0),v([S({type:String,json:{name:"endTimeField",write:{enabled:!0,allowNull:!0}}})],Yi.prototype,"endField",void 0),v([S({type:Ma,json:{write:{enabled:!0,allowNull:!0}}})],Yi.prototype,"fullTimeExtent",void 0),v([me("fullTimeExtent",["timeExtent"])],Yi.prototype,"readFullTimeExtent",null),v([be("fullTimeExtent")],Yi.prototype,"writeFullTimeExtent",null),v([S({type:Boolean,json:{write:!0}})],Yi.prototype,"hasLiveData",void 0),v([S({type:f1,json:{write:{enabled:!0,allowNull:!0}}})],Yi.prototype,"interval",void 0),v([me("interval",["timeInterval","timeIntervalUnits","defaultTimeInterval","defaultTimeIntervalUnits"])],Yi.prototype,"readInterval",null),v([be("interval")],Yi.prototype,"writeInterval",null),v([S({type:String,json:{name:"startTimeField",write:{enabled:!0,allowNull:!0}}})],Yi.prototype,"startField",void 0),v([S(sv("timeReference",!0))],Yi.prototype,"timeZone",void 0),v([S({type:String,json:{write:{enabled:!0,allowNull:!0}}})],Yi.prototype,"trackIdField",void 0),v([S({type:Boolean,json:{name:"exportOptions.useTime",write:!0}})],Yi.prototype,"useTime",void 0),v([S({type:[Date],json:{read:!1}})],Yi.prototype,"stops",void 0),Yi=v([H("esri.layers.support.TimeInfo")],Yi);const qz=Yi,_me={type:Boolean,json:{read:{source:"timeAnimation"},write:{target:"timeAnimation",layerContainerTypes:Jt}}},Sme=e=>{let t=class extends e{constructor(){super(...arguments),this.timeExtent=null,this.timeOffset=null,this.useViewTime=!0}readOffset(i,r){const a=r.timeInfo.exportOptions;if(!a)return null;const p=a.timeOffset,y=Bz.fromJSON(a.timeOffsetUnits);return p&&y?new f1({value:p,unit:y}):null}set timeInfo(i){uN(i,this.fieldsIndex),this._set("timeInfo",i)}};return v([S({type:Ma,json:{write:!1}})],t.prototype,"timeExtent",void 0),v([S({type:f1})],t.prototype,"timeOffset",void 0),v([me("service","timeOffset",["timeInfo.exportOptions"])],t.prototype,"readOffset",null),v([S({value:null,type:qz,json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],t.prototype,"timeInfo",null),v([S(_me)],t.prototype,"useViewTime",void 0),t=v([H("esri.layers.mixins.TemporalLayer")],t),t};let hh=class extends at.ClonableMixin(he){constructor(t){super(t),this.labelingInfo=null,this.labelsVisible=!0,this.renderer=null,this.visible=!0}};v([S({type:[Td],json:{write:!0}})],hh.prototype,"labelingInfo",void 0),v([S(J2)],hh.prototype,"labelsVisible",void 0),v([S({types:J1,json:{write:!0}})],hh.prototype,"renderer",void 0),v([S({type:Boolean,json:{write:!0}})],hh.prototype,"visible",void 0),hh=v([H("esri.layers.support.TrackPartInfo")],hh);const kp=hh;let Ur=class extends at.ClonableMixin(he){constructor(t){super(t),this.enabled=!0,this.fields=[],this.latestObservations=new kp({renderer:new Or({symbol:Lv.clone()})}),this.maxDisplayDuration=null,this.maxDisplayObservationsPerTrack=0,this.popupEnabled=!0,this.popupTemplate=null,this.previousObservations=new kp({renderer:new Or({symbol:Lv.clone()})}),this.trackLines=new kp({renderer:new Or({symbol:_x.clone()})}),this.timeField="startTimeField"}writeFields(t,i,r){const a=t.filter(p=>p.statisticType!=="avg_angle").map(p=>p.toJSON());Bi(r,a,i)}};v([S({type:Boolean,json:{write:!0}})],Ur.prototype,"enabled",void 0),v([S({type:[nu],json:{write:!0}})],Ur.prototype,"fields",void 0),v([be("fields")],Ur.prototype,"writeFields",null),v([S({type:kp,json:{write:!0}})],Ur.prototype,"latestObservations",void 0),v([S({type:f1,json:{write:!0}})],Ur.prototype,"maxDisplayDuration",void 0),v([S({type:Number,json:{write:!0}})],Ur.prototype,"maxDisplayObservationsPerTrack",void 0),v([S(W2)],Ur.prototype,"popupEnabled",void 0),v([S({type:Jh,json:{name:"popupInfo",write:!0}})],Ur.prototype,"popupTemplate",void 0),v([S({type:kp,json:{write:!0}})],Ur.prototype,"previousObservations",void 0),v([S({type:kp,json:{write:!0}})],Ur.prototype,"trackLines",void 0),v([S({type:["timeReceived","startTimeField","endTimeField"],json:{read:!0,write:!0}})],Ur.prototype,"timeField",void 0),Ur=v([H("esri.layers.support.TrackInfo")],Ur);const xme=Ur,Tme=e=>{let t=class extends e{constructor(){super(...arguments),this.trackInfo=null}};return v([S({type:xme})],t.prototype,"trackInfo",void 0),t=v([H("esri.layers.mixins.TrackableLayer")],t),t},pA=new rt({esriFeatureEditToolAutoCompletePolygon:"auto-complete-polygon",esriFeatureEditToolCircle:"circle",esriFeatureEditToolEllipse:"ellipse",esriFeatureEditToolFreehand:"freehand",esriFeatureEditToolLine:"line",esriFeatureEditToolNone:"none",esriFeatureEditToolPoint:"point",esriFeatureEditToolPolygon:"polygon",esriFeatureEditToolRectangle:"rectangle",esriFeatureEditToolArrow:"arrow",esriFeatureEditToolTriangle:"triangle",esriFeatureEditToolLeftArrow:"left-arrow",esriFeatureEditToolRightArrow:"right-arrow",esriFeatureEditToolUpArrow:"up-arrow",esriFeatureEditToolDownArrow:"down-arrow"});let bl=class extends at.ClonableMixin(he){constructor(t){super(t),this.name=null,this.description=null,this.drawingTool=null,this.prototype=null,this.thumbnail=null}};v([S({json:{write:!0}})],bl.prototype,"name",void 0),v([S({json:{write:!0}})],bl.prototype,"description",void 0),v([S({json:{read:pA.read,write:pA.write}})],bl.prototype,"drawingTool",void 0),v([S({json:{write:!0}})],bl.prototype,"prototype",void 0),v([S({json:{write:!0}})],bl.prototype,"thumbnail",void 0),bl=v([H("esri.layers.support.FeatureTemplate")],bl);const Dx=bl;let na=class extends at.ClonableMixin(he){constructor(t){super(t),this.id=null,this.name=null,this.domains=null,this.templates=null}readDomains(t){const i={};for(const r of Object.keys(t))i[r]=k2(t[r]);return i}writeDomains(t,i){var a;const r={};for(const p of Object.keys(t))t[p]&&(r[p]=(a=t[p])==null?void 0:a.toJSON());i.domains=r}};v([S({json:{write:!0}})],na.prototype,"id",void 0),v([S({json:{write:!0}})],na.prototype,"name",void 0),v([S({json:{write:!0}})],na.prototype,"domains",void 0),v([me("domains")],na.prototype,"readDomains",null),v([be("domains")],na.prototype,"writeDomains",null),v([S({type:[Dx],json:{write:!0}})],na.prototype,"templates",void 0),na=v([H("esri.layers.support.FeatureType")],na);const Hz=na;function Mme(){return{fields:{type:[PS],value:null,set:function(e){if(e&&ne("big-integer-warning-enabled")){const t=e.filter(i=>i.type==="big-integer"||i.type==="oid"&&(i.length||0)>=8);if(t.length){const i=t.map(r=>`'${r.name}'`).join(", ");ye.getLogger(this).warn("#fields",`Layer (title: '${this.title??"no title"}', id: '${this.id??"no id"}') references big-integer field(s): ${i}, support for which is experimental. Only integers less than ${Number.MAX_SAFE_INTEGER} (Number.MAX_SAFE_INTEGER) are supported.`)}}this._set("fields",e)}},fieldsIndex:{readOnly:!0,get(){return gz.fromLayer(this)}},outFields:{type:[String],json:{read:!1},set:function(e){this._userOutFields=e,this.notifyChange("outFields")},get:function(){var t;const e=this._userOutFields;if(!(e!=null&&e.length))return null;if(e.includes("*"))return["*"];if(!this.fields)return e;for(const i of e)((t=this.fieldsIndex)==null?void 0:t.has(i))||ye.getLogger("esri.layers.support.fieldProperties").error("field-attributes-layer:invalid-field",`Invalid field ${i} found in outFields`,{layer:this,outFields:e});return T2(this.fieldsIndex,e)}}}}const i3=()=>ye.getLogger("esri.layers.support.labelingInfo"),$me=/\[([^[\]]+)\]/gi;function r3(e,t,i){return e?e.map(r=>{var p;const a=new Td;if(a.read(r,i),a.labelExpression){const y=t.fields||((p=t.layerDefinition)==null?void 0:p.fields)||this.fields;a.labelExpression=a.labelExpression.replaceAll($me,(g,_)=>`[${Eme(_,y)}]`)}return a}):null}function Eme(e,t){if(!t)return e;const i=e.toLowerCase();for(let r=0;r<t.length;r++){const a=t[r].name;if(a.toLowerCase()===i)return a}return e}const Ime={esriGeometryPoint:["above-right","above-center","above-left","center-center","center-left","center-right","below-center","below-left","below-right"],esriGeometryMultiPatch:["always-horizontal"],esriGeometryPolygon:["always-horizontal"],esriGeometryPolyline:["center-along","above-along","below-along"],esriGeometryMultipoint:null,esriGeometryEnvelope:null};function y7e(e,t){const i=[];for(const r of e){const a=r.labelPlacement,p=Ime[t];if(!r.symbol)return i3().warn("No ILabelClass symbol specified."),[];if(!p)return i3().error(new Y("labeling:unsupported-geometry-type",`Unable to create labels for layer, geometry type '${t}' is not supported`)),[];if(p.includes(a))i.push(r);else{const y=p[0];a&&i3().warn(`Found invalid label placement type ${a} for ${t}. Defaulting to ${y}`);const g=r.clone();g.labelPlacement=y,i.push(g)}}return i}const Ame="relationships/",Cme="expression/";let xr=class extends Ae{constructor(t){super(t),this._featureUtils=null,this.effectivePopupTemplate=null}get _arcadeTask(){return this.expressionsUsedInTitle.length>0?this._get("_arcadeTask")||M1(()=>Ql()):null}get featureUtilsPromise(){return this._get("featureUtilsPromise")??fe(()=>import("./featureUtils-Js9diYnz.js"),__vite__mapDeps([166,19])).then(t=>this._featureUtils=t)}get calculatedExpressions(){var i;const t=new xe;if(!this.expressionsUsedInTitle.length)return t;if(!((i=this._arcadeTask)!=null&&i.value)){for(const r of this.expressionsUsedInTitle??[])t.push({name:r.name,invalid:!0});return t}for(const r of this.expressionsUsedInTitle)try{const a=this._arcadeTask.value.arcade.parseScript(r.expression,["$layer","$map","$datastore"]);if(a.isAsync){t.push({name:r.name,invalid:!0});break}t.push({name:r.name,syntax:a,invalid:!1,func:this._arcadeTask.value.arcade.compileScript(a,{vars:{$feature:"any"}})})}catch{t.push({name:r.name,invalid:!0});break}return t}get expressionsUsedInTitle(){var i,r,a;let t=((i=this.effectivePopupTemplate)==null?void 0:i.title)??"";return typeof t!="string"?[]:(t=t.toLowerCase(),((a=(r=this.effectivePopupTemplate)==null?void 0:r.expressionInfos)==null?void 0:a.filter(p=>t.includes(`{expression/${p.name.toLowerCase()}}`)))??[])}get fieldInfoMap(){return this._featureUtils?this._createFieldInfoMap(this._featureUtils.getAllFieldInfos(this.effectivePopupTemplate)):null}get hasBadExpressions(){return this.calculatedExpressions.some(t=>t.invalid===!0)}get requiredFields(){var r,a;const t=new Set;if((r=this._arcadeTask)!=null&&r.value&&!this.hasBadExpressions)for(const p of((a=this.calculatedExpressions)==null?void 0:a.toArray())??[])try{const y=this._arcadeTask.value.arcade.extractFieldLiterals(p.syntax);for(const g of y){const _=g.split("."),T=this.fieldsIndex.get(_.at(-1)??"");T&&t.add(T.name)}}catch{}const i=this._extractFieldNames(this.workingTitle);for(const p of i){const y=this.fieldsIndex.get(p);y&&t.add(y.name)}return t}get titleFromDisplayField(){var i,r;let t="";return this.displayField&&(t=((i=this.fieldsIndex.get(this.displayField))==null?void 0:i.name)??""),t||(t=((r=this.fieldsIndex.get(this.objectIdField))==null?void 0:r.name)??""),t?`{${t}}`:""}get workingTitle(){const t=this.effectivePopupTemplate?this.effectivePopupTemplate.title:"";return t===""||t==null||this.hasBadExpressions||typeof t!="string"?this.titleFromDisplayField:t}async getTitle(t,i,r){var a;try{const{attributes:p}=i,y=(r==null?void 0:r.timeZone)??"system",[{substituteFieldsInLinksAndAttributes:g}]=await Promise.all([this.featureUtilsPromise,(a=this._arcadeTask)==null?void 0:a.promise]);if(r.fetchMissingFields&&(i=await this._checkAndReQueryGraphic(t,i)),this.workingTitle&&this.fieldInfoMap){const _=this._createFormattedAttributes(t,i,y).global;return g({attributes:p,expressionAttributes:null,fieldInfoMap:this.fieldInfoMap,globalAttributes:_,layer:t,text:this.workingTitle})}return""}catch{}return""}async _checkAndReQueryGraphic(t,i){const r=i.getObjectId();if(r==null)return i;if(!Tte(this.requiredFields,i)){const a=t.createQuery();a.where="1=1",a.outFields=[...this.requiredFields],a.objectIds=[r];const p=await t.queryFeatures(a);if((p==null?void 0:p.features.length)===1)return p.features[0]}return i}_createFieldInfoMap(t){const i=new Map;if(!t)return i;for(const r of t){if(!r.fieldName)continue;const a=this.fieldsIndex.get(r.fieldName),p=(a==null?void 0:a.name)??r.fieldName;r.fieldName=p,i.set(p.toLowerCase(),r)}return i}_createFormattedAttributes(t,i,r="system"){var g,_;const a=((g=this.effectivePopupTemplate)==null?void 0:g.fieldInfos)??[],p={};if(!this._featureUtils)return{};if(!this.hasBadExpressions&&this.calculatedExpressions.length>0&&((_=this._arcadeTask)!=null&&_.value)){const T=this._arcadeTask.value.Feature.createFromGraphicLikeObject(i.geometry,i.attributes,t,null);for(const I of this.calculatedExpressions)try{p[`expression/${I.name}`]=I.func({vars:{$feature:T}})}catch{}}const y={...i.attributes,...p};return{global:this._featureUtils.formatAttributes({fieldInfos:a,attributes:y,graphic:i,timeZone:r,layer:t,fieldInfoMap:this.fieldInfoMap}),content:[]}}_extractFieldNames(t){return gS(t).filter(i=>!(i.indexOf(Ame)===0||i.indexOf(Cme)===0))}};v([S({readOnly:!0})],xr.prototype,"_arcadeTask",null),v([S()],xr.prototype,"_featureUtils",void 0),v([S({readOnly:!0})],xr.prototype,"featureUtilsPromise",null),v([S({readOnly:!0})],xr.prototype,"calculatedExpressions",null),v([S()],xr.prototype,"displayField",void 0),v([S()],xr.prototype,"effectivePopupTemplate",void 0),v([S()],xr.prototype,"expressionsUsedInTitle",null),v([S()],xr.prototype,"fieldsIndex",void 0),v([S()],xr.prototype,"fieldInfoMap",null),v([S()],xr.prototype,"fields",void 0),v([S()],xr.prototype,"objectIdField",void 0),v([S()],xr.prototype,"requiredFields",null),xr=v([H("esri.layers.support.TitleCreator")],xr);const Ome=xr,np=[];function Pme(e,t){if(Gg(e.url??""))return!0;const{wkid:i}=t;for(const r of np){if((e.version??0)>=r[0])return!0;if(typeof r[1]=="function"&&(r[1]=r[1]()),r[1].has(i))return!1}return!0}np.push([10.91,()=>{const e=new Set([9709,9716,9741,9761,9766]);for(let t=9712;t<=9713;t++)e.add(t);for(let t=9748;t<=9749;t++)e.add(t);for(let t=20904;t<=20932;t++)e.add(t);for(let t=21004;t<=21032;t++)e.add(t);for(let t=21207;t<=21264;t++)e.add(t);for(let t=21307;t<=21364;t++)e.add(t);for(let t=23301;t<=23333;t++)e.add(t);for(let t=102759;t<=102760;t++)e.add(t);for(let t=102934;t<=102955;t++)e.add(t);return e}]),np.push([10.9,()=>{const e=new Set([9300,9354,9364,9367,9373,9377,9387,9456,9473,9498,9678,9680,29874,103599,103872,104028]);for(let t=9356;t<=9360;t++)e.add(t);for(let t=9404;t<=9407;t++)e.add(t);for(let t=9476;t<=9482;t++)e.add(t);for(let t=9487;t<=9494;t++)e.add(t);for(let t=9697;t<=9699;t++)e.add(t);return e}]),np.push([10.81,()=>{const e=new Set([9265,9333,103598,103699]);for(let t=9248;t<=9254;t++)e.add(t);for(let t=9271;t<=9273;t++)e.add(t);for(let t=9284;t<=9285;t++)e.add(t);for(let t=21453;t<=21463;t++)e.add(t);return e}]),np.push([10.8,()=>{const e=new Set([8088,8395,8428,8433,8531,8687,8692,8694,8699,8900,9003,9006,9009,9012,9017,9191]);for(let t=8035;t<=8036;t++)e.add(t);for(let t=8455;t<=8456;t++)e.add(t);for(let t=8518;t<=8529;t++)e.add(t);for(let t=8533;t<=8536;t++)e.add(t);for(let t=8538;t<=8540;t++)e.add(t);for(let t=8677;t<=8679;t++)e.add(t);for(let t=8902;t<=8903;t++)e.add(t);for(let t=8907;t<=8910;t++)e.add(t);for(let t=8949;t<=8951;t++)e.add(t);for(let t=8972;t<=8987;t++)e.add(t);for(let t=9039;t<=9040;t++)e.add(t);for(let t=9068;t<=9069;t++)e.add(t);for(let t=9140;t<=9141;t++)e.add(t);for(let t=9148;t<=9150;t++)e.add(t);for(let t=9153;t<=9159;t++)e.add(t);for(let t=9205;t<=9218;t++)e.add(t);for(let t=9221;t<=9222;t++)e.add(t);for(let t=54098;t<=54101;t++)e.add(t);return e}]),np.push([10.71,()=>{const e=new Set([6316]);for(let t=8351;t<=8353;t++)e.add(t);for(let t=9294;t<=9297;t++)e.add(t);for(let t=22619;t<=22621;t++)e.add(t);for(let t=103586;t<=103594;t++)e.add(t);return e}]);async function kme(e,t,i){const r=e&&e.getAtOrigin&&e.getAtOrigin("renderer",t.origin);if(r&&r.type==="unique-value"&&r.styleOrigin){const a=await i2(r.populateFromStyle());if(At(i),a.ok===!1){const p=a.error;t!=null&&t.messages&&t.messages.push(new Ys("renderer:style-reference",`Failed to create unique value renderer from style reference: ${p.message}`,{error:p,context:t})),e.clear("renderer",t==null?void 0:t.origin)}}}function Rme({displayField:e,editFieldsInfo:t,fields:i,objectIdField:r,title:a},p){if(!i)return null;const y=jme({editFieldsInfo:t,fields:i,objectIdField:r},p);if(!y.length)return null;const g=Ume({titleBase:a,fields:i,displayField:e}),_=zme();return new Jh({title:g,content:_,fieldInfos:y})}function g7e(e){var T;const{title:t,graphic:i}=e??{},{attributes:r,sourceLayer:a}=i??{},p=a&&"displayField"in a?a.displayField:null,y=p?r==null?void 0:r[p]:null,g=y!=null?JSON.stringify(y):null,_=(T=i==null?void 0:i.getObjectId())==null?void 0:T.toString();return t||g||_||""}const Nme=(e,t)=>t.visibleFieldNames?t.visibleFieldNames.has(e.name):rte(e,t);function Lme({fields:e,ignoreFieldTypes:t,sortDisabled:i}){const r=e;return t&&(e=e.filter(a=>!t.includes(a.type))),e===r&&(e=e.slice()),i!==!0&&e.sort(Dme),e}function Dme(e,t){return e.type==="oid"?-1:t.type==="oid"?1:dA(e)?-1:dA(t)?1:(e.alias||e.name).toLocaleLowerCase().localeCompare((t.alias||t.name).toLocaleLowerCase())}function jme(e,t){const i=t==null?void 0:t.visibleFieldNames;return Lme({fields:e.fields??[],ignoreFieldTypes:(t==null?void 0:t.ignoreFieldTypes)||Vme,sortDisabled:t==null?void 0:t.sortDisabled}).map(r=>new vS({fieldName:r.name,isEditable:ite(r,e),label:r.alias,format:Fme(r),visible:Nme(r,{...e,visibleFieldNames:i})}))}function Fme(e){switch(e.type){case"small-integer":case"integer":case"single":return new Cm({digitSeparator:!0,places:0});case"double":return new Cm({digitSeparator:!0,places:2});case"string":return $te(e.name)?new Cm({digitSeparator:!0,places:0}):void 0;default:return}}function zme(){return[new Xp,new Yp]}function Ume(e){const t=Wee(e),{titleBase:i}=e;return t?`${i}: {${t.trim()}}`:i??""}function dA(e){var i;return(e.name&&e.name.toLowerCase())==="name"?!0:((i=e.alias)==null?void 0:i.toLowerCase())==="name"}const Vme=["geometry","blob","raster","guid","xml"];var yp;(function(e){e[e.SAVE=0]="SAVE",e[e.SAVE_AS=1]="SAVE_AS"})(yp||(yp={}));const Zi="FeatureLayer";function im(e,t){return new Y("layer:unsupported",`Layer (${e.title}, ${e.id}) of type '${e.declaredClass}' ${t}`,{layer:e})}function fA(e){return e&&e instanceof xe}const s3=Mme();function n3(e,t,i){const r=!!(i!=null&&i.writeLayerSchema);return{enabled:r,ignoreOrigin:r}}let Ce=class extends n1e(Xye(Nde(dme(Ode(Tde(fde(sme(Sme(Tme(wme(vme(Vpe(eme(hme(hF(yde(Upe(at.ClonableMixin(X6))))))))))))))))))){constructor(...e){super(...e),this.attributeTableTemplate=null,this.charts=null,this.copyright=null,this.displayField=null,this.dynamicDataSource=null,this.fields=null,this.fieldsIndex=null,this.formTemplate=null,this.fullExtent=null,this.geometryType=null,this.hasM=void 0,this.hasZ=void 0,this.infoFor3D=null,this.isTable=!1,this.labelsVisible=!0,this.labelingInfo=null,this.legendEnabled=!0,this.objectIdField=null,this.operationalLayerType="ArcGISFeatureLayer",this.outFields=null,this.path=null,this.popupEnabled=!0,this.popupTemplate=null,this.resourceInfo=null,this.screenSizePerspectiveEnabled=!0,this.spatialReference=qe.WGS84,this.subtypeCode=null,this.supportedSourceTypes=new Set(["Feature Layer","Oriented Imagery Layer","Table","Catalog Layer"]),this.templates=null,this.timeInfo=null,this.title=null,this.sublayerTitleMode="item-title",this.type="feature",this.typeIdField=null,this.types=null,this.visible=!0,this._debouncedSaveOperations=e6(async(t,i,r)=>{const{save:a,saveAs:p}=await fe(()=>import("./featureLayerUtils-DDlyLYY9.js"),__vite__mapDeps([274,275,276,277,273,278,11]));switch(t){case yp.SAVE:return a(this,i);case yp.SAVE_AS:return p(this,r,i)}})}destroy(){var e;(e=this.source)==null||e.destroy()}normalizeCtorArgs(e,t){return typeof e=="string"?{url:e,...t}:e}load(e){var r;const t=e!=null?e.signal:null;if((r=this.portalItem)!=null&&r.loaded&&this.source)return this.addResolvingPromise(this.createGraphicsSource(t).then(a=>this.initLayerProperties(a))),Promise.resolve(this);const i=this.loadFromPortal({supportedTypes:["Feature Service","Feature Collection","Scene Service"]},e).catch(po).then(async()=>{if(this.url&&this.layerId==null&&/FeatureServer|MapServer\/*$/i.test(this.url)){const a=await this._fetchFirstValidLayerId(t);a!=null&&(this.layerId=a)}if(!this.url&&!this._hasMemorySource())throw new Y("feature-layer:missing-url-or-source","Feature layer must be created with either a url or a source");return this.initLayerProperties(await this.createGraphicsSource(t))}).then(()=>$0e(this,"load",e));return this.addResolvingPromise(i),Promise.resolve(this)}get _titleCreator(){const e=this._get("_titleCreator");return Ht(e),new Ome({fieldsIndex:this.fieldsIndex,objectIdField:this.objectIdField,fields:this.fields,displayField:this.displayField,effectivePopupTemplate:this.popupTemplate??this.defaultPopupTemplate})}readCapabilities(e,t){return t=t.layerDefinition||t,hz(t,this.url)}get createQueryVersion(){return this.commitProperty("definitionExpression"),this.commitProperty("dynamicDataSource"),this.commitProperty("timeExtent"),this.commitProperty("timeOffset"),this.commitProperty("geometryType"),this.commitProperty("gdbVersion"),this.commitProperty("historicMoment"),this.commitProperty("returnZ"),this.commitProperty("capabilities"),this.commitProperty("returnM"),(this._get("createQueryVersion")??0)+1}get editingEnabled(){var e;return!(this.loaded&&!((e=this.capabilities)!=null&&e.operations.supportsEditing))&&(this._isOverridden("editingEnabled")?this._get("editingEnabled"):this._hasMemorySource()||this.userHasEditingPrivileges)}set editingEnabled(e){this._overrideIfSome("editingEnabled",e)}readEditingEnabled(e,t){return this._readEditingEnabled(t,!1)}readEditingEnabledFromWebMap(e,t,i){return this._readEditingEnabled(t,!0,i)}writeEditingEnabled(e,t){this._writeEditingEnabled(e,t,!1)}writeEditingEnabledToWebMap(e,t,i,r){this._writeEditingEnabled(e,t,!0,r)}get effectiveEditingEnabled(){return A0e(this)}get featureTitleFields(){return[...this._titleCreator.requiredFields]}readIsTable(e,t){return(t=(t==null?void 0:t.layerDefinition)??t).type==="Table"||!t.geometryType}writeIsTable(e,t,i,r){r!=null&&r.writeLayerSchema&&Bi(i,e?"Table":"Feature Layer",t)}readGlobalIdField(e,t){return QF(t.layerDefinition||t)}readObjectIdField(e,t){return ez(t.layerDefinition||t)}get parsedUrl(){const e=mr(this.url);return e!=null&&(this.dynamicDataSource!=null?e.path=Fp(e.path,"dynamicLayer"):this.layerId!=null&&(e.path=Fp(e.path,this.layerId.toString()))),e}get defaultPopupTemplate(){return this.createPopupTemplate()}set renderer(e){$8(e,this.fieldsIndex),this._set("renderer",e)}readRenderer(e,t,i){var a;t=t.layerDefinition||t;const r=(a=t.drawingInfo)==null?void 0:a.renderer;if(r){const p=d1(r,t,i)??void 0;return p||ye.getLogger(this).error("Failed to create renderer",{rendererDefinition:t.drawingInfo.renderer,layer:this,context:i}),p}return Ix(t,i)}set source(e){const t=this._get("source");t!==e&&(fA(t)&&this._resetMemorySource(t),fA(e)&&this._initMemorySource(e),this._set("source",e))}castSource(e){return e?Array.isArray(e)||e instanceof xe?new ha({layer:this,items:e}):e:null}readSource(e,t){const i=vF.fromJSON(t.featureSet);return new ha({layer:this,items:(i==null?void 0:i.features)??[]})}readTemplates(e,t){const i=t.editFieldsInfo,r=i==null?void 0:i.creatorField,a=i==null?void 0:i.editorField;return e=e==null?void 0:e.map(p=>Dx.fromJSON(p)),this._fixTemplates(e,r),this._fixTemplates(e,a),e}readTitle(e,t){var a,p,y;const i=((a=t.layerDefinition)==null?void 0:a.name)??t.name,r=t.title||((p=t.layerDefinition)==null?void 0:p.title);if(i){const g=(y=this.portalItem)==null?void 0:y.title;if(this.sublayerTitleMode==="item-title")return this.url?cB(this.url,i):i;let _=i;if(!_&&this.url){const T=ud(this.url);T!=null&&(_=T.title)}return _?(this.sublayerTitleMode==="item-title-and-service-name"&&g&&g!==_&&(_=g+" - "+_),v6(_)):void 0}if(this.sublayerTitleMode==="item-title"&&r)return r}readTitleFromWebMap(e,t){var i;return t.title||((i=t.layerDefinition)==null?void 0:i.name)}readTypeIdField(e,t){let i=(t=t.layerDefinition||t).typeIdField;if(i&&t.fields){i=i.toLowerCase();const r=t.fields.find(a=>a.name.toLowerCase()===i);r&&(i=r.name)}return i}readTypes(e,t){e=(t=t.layerDefinition||t).types;const i=t.editFieldsInfo,r=i==null?void 0:i.creatorField,a=i==null?void 0:i.editorField;return e==null?void 0:e.map(p=>(p=Hz.fromJSON(p),this._fixTemplates(p.templates,r),this._fixTemplates(p.templates,a),p))}readVisible(e,t){var i;return((i=t.layerDefinition)==null?void 0:i.defaultVisibility)!=null?!!t.layerDefinition.defaultVisibility:t.visibility!=null?!!t.visibility:void 0}async addAttachment(e,t){const i=await a0e(this,e,t,Zi);return this.lastEditsEventDate=new Date,i}async updateAttachment(e,t,i){const r=await l0e(this,e,t,i,Zi);return this.lastEditsEventDate=new Date,r}async applyEdits(e,t){return u0e(this,e,t)}async uploadAssets(e,t){return h0e(this,e,t)}on(e,t){return super.on(e,t)}createPopupTemplate(e){return Rme(this,e)}async createGraphicsSource(e){if(this._hasMemorySource()&&this.source)return this.source.load({signal:e});const{default:t}=await dC(fe(()=>import("./FeatureLayerSource-CumDccsK.js"),__vite__mapDeps([279,59,66,280,281,62,108,61,109,282,283,45,37,284,285,73,71,72,7,27,32,169,31])),e);return new t({layer:this,supportedSourceTypes:this.supportedSourceTypes}).load({signal:e})}createQuery(){const e=b0e(this);e.dynamicDataSource=this.dynamicDataSource;const t=this.subtypeCode!=null?`${this.subtypeField} = ${this.subtypeCode}`:null,i=vee(this.definitionExpression,t);return e.where=i||"1=1",e}async deleteAttachments(e,t){const i=await c0e(this,e,t,Zi);return this.lastEditsEventDate=new Date,i}async fetchRecomputedExtents(e){return p0e(this,e,Zi)}getFeatureTitle(e,t={timeZone:"system",fetchMissingFields:!1}){return this._titleCreator.getTitle(this,e,t)}getFeatureType(e){return rz(this.types,this.typeIdField,e)}getFieldDomain(e,t){var i;return S0e(this,e,t,((i=this.getField(e))==null?void 0:i.domain)??null)}async queryAttachments(e,t){return d0e(this,e,t,Zi)}async queryFeatures(e,t){const i=await this.load(),r=await i.source.queryFeatures($a.from(e)??i.createQuery(),t);if(r!=null&&r.features)for(const a of r.features)a.layer=a.sourceLayer=i;return r}async queryObjectIds(e,t){return(await f0e(this,e,t,Zi)).filter(S8)}async queryFeatureCount(e,t){return y0e(this,e,t,Zi)}async queryExtent(e,t){return m0e(this,e,t,Zi)}async queryRelatedFeatures(e,t){return g0e(this,e,t,Zi)}async queryRelatedFeaturesCount(e,t){return v0e(this,e,t,Zi)}async queryTopFeatures(e,t){var y;const{source:i,capabilities:r}=await this.load();if(!i.queryTopFeatures||!((y=r==null?void 0:r.query)!=null&&y.supportsTopFeaturesQuery))throw new Y(Zi,"Layer source does not support queryTopFeatures capability");const a=await fe(()=>import("./TopFeaturesQuery-DhmBqRtu.js"),[]),p=await i.queryTopFeatures(a.default.from(e),t);if(p!=null&&p.features)for(const g of p.features)g.layer=g.sourceLayer=this;return p}async queryAttributeBins(e,t){var y;const{source:i,capabilities:r}=await this.load();if(!i.queryAttributeBins||!((y=r==null?void 0:r.operations)!=null&&y.supportsQueryBins))throw new Y(Zi,"Layer source does not support queryAttributeBins capability");k0e(e,r,Zi);const a=await fe(()=>import("./AttributeBinsQuery-0-g_WFaE.js"),__vite__mapDeps([220,29,24,39])),p=await i.queryAttributeBins(a.default.from(e),t);if(p.features)for(const g of p.features)g.layer=g.sourceLayer=this;return p}async queryTopObjectIds(e,t){const{source:i,capabilities:r}=await this.load();if(!i.queryTopObjectIds||!(r!=null&&r.query.supportsTopFeaturesQuery))throw new Y(Zi,"Layer source does not support queryTopObjectIds capability");const a=await fe(()=>import("./TopFeaturesQuery-DhmBqRtu.js"),[]);return(await i.queryTopObjectIds(a.default.from(e),t)).filter(S8)}async queryTopFeaturesExtent(e,t){var p;const{source:i,capabilities:r}=await this.load();if(!i.queryTopExtents||!((p=r==null?void 0:r.query)!=null&&p.supportsTopFeaturesQuery))throw new Y(Zi,"Layer source does not support queryTopExtents capability");const a=await fe(()=>import("./TopFeaturesQuery-DhmBqRtu.js"),[]);return i.queryTopExtents(a.default.from(e),t)}async queryTopFeatureCount(e,t){var p;const{source:i,capabilities:r}=await this.load();if(!i.queryTopCount||!((p=r==null?void 0:r.query)!=null&&p.supportsTopFeaturesQuery))throw new Y(Zi,"Layer source does not support queryFeatureCount capability");const a=await fe(()=>import("./TopFeaturesQuery-DhmBqRtu.js"),[]);return i.queryTopCount(a.default.from(e),t)}read(e,t){const i=e.featureCollection;if((i||e.type==="Feature Collection")&&(this.resourceInfo=e),i){const r=i.layers;r&&r.length===1&&(super.read(r[0],t),i.showLegend!=null&&super.read({showLegend:i.showLegend},t))}super.read(e,t),t&&t.origin==="service"&&(this.revert(["objectIdField","fields","timeInfo","dateFieldsTimeZone"],"service"),this.spatialReference||this.revert(["spatialReference"],"service"))}write(e,t){t={...t,origin:(t==null?void 0:t.origin)??void 0,writeLayerSchema:(t==null?void 0:t.writeLayerSchema)??this._hasMemorySource()};const{origin:i,layerContainerType:r,messages:a}=t;if(this.dynamicDataSource)return a==null||a.push(im(this,"using a dynamic data source cannot be written to web scenes, web maps and feature service items")),null;if(this.isTable){if((i==="web-map"||i==="web-scene")&&r!=="tables")return a==null||a.push(im(this,`a table source can only be written to tables, not ${r}`)),null;if(this._hasMemorySource())return a==null||a.push(im(this,"using an in-memory table source cannot be written to web scenes and web maps")),null}else if(this.loaded&&(i==="web-map"||i==="web-scene")&&r==="tables")return a==null||a.push(im(this,"using a non-table source cannot be written to tables in web maps or web scenes")),null;return super.write(e,t)}clone(){if(this._hasMemorySource())throw new Y(Zi,`FeatureLayer (title: ${this.title}, id: ${this.id}) created using in-memory source cannot be cloned`);return super.clone()}serviceSupportsSpatialReference(e){var t;return!!this.loaded&&(((t=this.source)==null?void 0:t.type)==="memory"||Pme(this,e))}async save(e){return this._debouncedSaveOperations(yp.SAVE,e)}async saveAs(e,t){return this._debouncedSaveOperations(yp.SAVE_AS,t,e)}_readEditingEnabled(e,t,i){var a;let r=(a=e.layerDefinition)==null?void 0:a.capabilities;return r?this._hasEditingCapability(r):(r=e.capabilities,t&&(i==null?void 0:i.origin)==="web-map"&&!this._hasMemorySource()&&r?this._hasEditingCapability(r):void 0)}_hasEditingCapability(e){return e.toLowerCase().split(",").map(t=>t.trim()).includes("editing")}_writeEditingEnabled(e,t,i,r){var a,p;if(!e){const y=(p=(a=this.capabilities)==null?void 0:a.operations)!=null&&p.supportsSync?"Query,Sync":"Query";Bi("layerDefinition.capabilities",y,t),i&&!(r!=null&&r.writeLayerSchema)&&(t.capabilities=y)}}_fetchFirstValidLayerId(e){return kt(this.url??"",{query:{f:"json",...this.customParameters,token:this.apiKey},responseType:"json",signal:e}).then(t=>{const i=t.data;if(i)return this.findFirstValidLayerId(i)})}async initLayerProperties(e){var t;return this._set("source",e),e.sourceJSON&&(this.sourceJSON=e.sourceJSON,this.read(e.sourceJSON,{origin:"service",portalItem:this.portalItem,portal:(t=this.portalItem)==null?void 0:t.portal,url:this.parsedUrl})),this._verifySource(),this._verifyFields(),$8(this.renderer,this.fieldsIndex),uN(this.timeInfo,this.fieldsIndex),this._hasMemorySource()&&this.geometryType==="mesh"&&(this.capabilities.query.supportsReturnMesh=!0),kme(this,{origin:"service"})}async hasDataChanged(){return w0e(this)}async fetchPublishingStatus(){const e=this.source;return e!=null&&e.fetchPublishingStatus?e.fetchPublishingStatus():"unavailable"}_verifyFields(){var t,i;const e=((t=this.parsedUrl)==null?void 0:t.path)??"undefined";this.objectIdField||console.log("FeatureLayer: 'objectIdField' property is not defined (url: "+e+")"),this.isTable||this._hasMemorySource()||e.search(/\/FeatureServer\//i)!==-1||(i=this.fields)!=null&&i.some(r=>r.type==="geometry")||console.log("FeatureLayer: unable to find field of type 'geometry' in the layer 'fields' list. If you are using a map service layer, features will not have geometry (url: "+e+")")}_fixTemplates(e,t){e&&e.forEach(i=>{var a;const r=(a=i.prototype)==null?void 0:a.attributes;r&&t&&delete r[t]})}_verifySource(){if(this._hasMemorySource()){if(this.url)throw new Y("feature-layer:mixed-source-and-url","FeatureLayer cannot be created with both an in-memory source and a url")}else if(!this.url)throw new Y("feature-layer:source-or-url-required","FeatureLayer requires either a url, a valid portal item or a source")}_initMemorySource(e){e.forEach(t=>{t.layer=this,t.sourceLayer=this}),this.addHandles([e.on("after-add",t=>{t.item.layer=this,t.item.sourceLayer=this}),e.on("after-remove",t=>{t.item.layer=null,t.item.sourceLayer=null})],"fl-source")}_resetMemorySource(e){e.forEach(t=>{t.layer=null,t.sourceLayer=null}),this.removeHandles("fl-source")}_hasMemorySource(){return!(this.url||!this.source)}findFirstValidLayerId(e){return Array.isArray(e.layers)&&e.layers.length>0?e.layers[0].id:Array.isArray(e.tables)&&e.tables.length>0?e.tables[0].id:void 0}};v([S({clonable:!1,readOnly:!0})],Ce.prototype,"_titleCreator",null),v([S(Zde)],Ce.prototype,"attributeTableTemplate",void 0),v([me("service","capabilities")],Ce.prototype,"readCapabilities",null),v([S({json:{origins:{"web-scene":{write:!1}},write:!0}})],Ce.prototype,"charts",void 0),v([S({readOnly:!0})],Ce.prototype,"createQueryVersion",null),v([S({json:{read:{source:"layerDefinition.copyrightText"}}})],Ce.prototype,"copyright",void 0),v([S({json:{read:{source:"layerDefinition.displayField"}}})],Ce.prototype,"displayField",void 0),v([S({types:Dl,readOnly:!0})],Ce.prototype,"defaultSymbol",void 0),v([S({type:In})],Ce.prototype,"dynamicDataSource",void 0),v([S({type:Boolean})],Ce.prototype,"editingEnabled",null),v([me(["portal-item","web-scene"],"editingEnabled",["layerDefinition.capabilities"])],Ce.prototype,"readEditingEnabled",null),v([me("web-map","editingEnabled",["capabilities","layerDefinition.capabilities"])],Ce.prototype,"readEditingEnabledFromWebMap",null),v([be(["portal-item","web-scene"],"editingEnabled",{"layerDefinition.capabilities":{type:String}})],Ce.prototype,"writeEditingEnabled",null),v([be("web-map","editingEnabled",{capabilities:{type:String},"layerDefinition.capabilities":{type:String}})],Ce.prototype,"writeEditingEnabledToWebMap",null),v([S({readOnly:!0})],Ce.prototype,"effectiveEditingEnabled",null),v([S({clonable:!1,readOnly:!0})],Ce.prototype,"featureTitleFields",null),v([S({...s3.fields,json:{read:{source:"layerDefinition.fields"},origins:{service:{name:"fields"},"web-map":{write:{target:"layerDefinition.fields",overridePolicy:n3}}}}})],Ce.prototype,"fields",void 0),v([S(s3.fieldsIndex)],Ce.prototype,"fieldsIndex",void 0),v([S({type:Lpe,json:{name:"formInfo",write:!0,origins:{"web-scene":{read:!1,write:!1}}}})],Ce.prototype,"formTemplate",void 0),v([S({json:{read:{source:"layerDefinition.extent"}}})],Ce.prototype,"fullExtent",void 0),v([S({json:{origins:{"web-map":{write:{target:"layerDefinition.geometryType",overridePolicy:n3,writer(e,t,i){const r=e?b4.toJSON(e):null;r&&Bi(i,r,t)}}}},read:{source:"layerDefinition.geometryType",reader:b4.read}}})],Ce.prototype,"geometryType",void 0),v([S({json:{read:{source:"layerDefinition.hasM"}}})],Ce.prototype,"hasM",void 0),v([S({json:{read:{source:"layerDefinition.hasZ"}}})],Ce.prototype,"hasZ",void 0),v([S(Hde)],Ce.prototype,"id",void 0),v([S({readOnly:!0,json:{origins:{service:{read:!0}},read:!1}})],Ce.prototype,"infoFor3D",void 0),v([S({json:{origins:{"web-map":{write:{target:"layerDefinition.type"}}}}})],Ce.prototype,"isTable",void 0),v([me("service","isTable",["type","geometryType"]),me("isTable",["layerDefinition.type","layerDefinition.geometryType"])],Ce.prototype,"readIsTable",null),v([be("web-map","isTable")],Ce.prototype,"writeIsTable",null),v([S(J2)],Ce.prototype,"labelsVisible",void 0),v([S({type:[Td],json:{origins:{service:{name:"drawingInfo.labelingInfo",read:r3,write:!1},"web-scene":{name:"layerDefinition.drawingInfo.labelingInfo",read:r3,write:{enabled:!0,layerContainerTypes:Jt}}},name:"layerDefinition.drawingInfo.labelingInfo",read:r3,write:!0}})],Ce.prototype,"labelingInfo",void 0),v([S((()=>{const e=te(qde);return e.json.origins["portal-item"]={write:{target:"layerDefinition.drawingInfo.transparency",writer(t,i,r){Bi(r,f2(t),i)}}},e})())],Ce.prototype,"opacity",void 0),v([S(Gde)],Ce.prototype,"legendEnabled",void 0),v([S({type:["show","hide"],json:(()=>{const e=te(kF.json);return e.origins["portal-item"]={read:!1,write:!1},e})()})],Ce.prototype,"listMode",void 0),v([me("globalIdField",["layerDefinition.globalIdField","layerDefinition.fields"])],Ce.prototype,"readGlobalIdField",null),v([S({json:{origins:{"web-map":{write:{target:"layerDefinition.objectIdField",overridePolicy:n3}}}}})],Ce.prototype,"objectIdField",void 0),v([me("objectIdField",["layerDefinition.objectIdField","layerDefinition.fields"])],Ce.prototype,"readObjectIdField",null),v([S({type:["ArcGISFeatureLayer"],json:{write:{target:"layerType",ignoreOrigin:!0,layerContainerTypes:Jt}}})],Ce.prototype,"operationalLayerType",void 0),v([S(s3.outFields)],Ce.prototype,"outFields",void 0),v([S({readOnly:!0})],Ce.prototype,"parsedUrl",null),v([S({type:String,json:{origins:{"web-scene":{read:!0,write:!0}},read:!1}})],Ce.prototype,"path",void 0),v([S(W2)],Ce.prototype,"popupEnabled",void 0),v([S({type:Jh,json:{name:"popupInfo",write:!0}})],Ce.prototype,"popupTemplate",void 0),v([S({readOnly:!0})],Ce.prototype,"defaultPopupTemplate",null),v([S({types:J1,json:{origins:{service:{write:{target:"drawingInfo.renderer",enabled:!1}},"web-scene":{types:Rye,name:"layerDefinition.drawingInfo.renderer",write:{layerContainerTypes:Jt,overridePolicy:(e,t,i)=>({ignoreOrigin:i==null?void 0:i.writeLayerSchema})}}},write:{target:"layerDefinition.drawingInfo.renderer",overridePolicy:(e,t,i)=>({ignoreOrigin:i==null?void 0:i.writeLayerSchema})}}})],Ce.prototype,"renderer",null),v([me("service","renderer",["drawingInfo.renderer","defaultSymbol"]),me("renderer",["layerDefinition.drawingInfo.renderer","layerDefinition.defaultSymbol"])],Ce.prototype,"readRenderer",null),v([S()],Ce.prototype,"resourceInfo",void 0),v([S((()=>{const e=te(Ude);return e.json.origins["portal-item"]={read:!1,write:!1},e})())],Ce.prototype,"screenSizePerspectiveEnabled",void 0),v([S({clonable:!1})],Ce.prototype,"source",null),v([ct("source")],Ce.prototype,"castSource",null),v([me("portal-item","source",["featureSet"]),me("web-map","source",["featureSet"])],Ce.prototype,"readSource",null),v([S({json:{read:{source:"layerDefinition.extent.spatialReference"}}})],Ce.prototype,"spatialReference",void 0),v([S({type:Number})],Ce.prototype,"subtypeCode",void 0),v([S({type:[Dx]})],Ce.prototype,"templates",void 0),v([me("templates",["editFieldsInfo","creatorField","editorField","templates"])],Ce.prototype,"readTemplates",null),v([S({type:qz})],Ce.prototype,"timeInfo",void 0),v([S()],Ce.prototype,"title",void 0),v([me("service","title",["name"]),me("portal-item","title",["layerDefinition.title","layerDefinition.name","title"])],Ce.prototype,"readTitle",null),v([me("web-map","title",["layerDefinition.name","title"])],Ce.prototype,"readTitleFromWebMap",null),v([S({type:String})],Ce.prototype,"sublayerTitleMode",void 0),v([S({json:{read:!1}})],Ce.prototype,"type",void 0),v([S({type:String})],Ce.prototype,"typeIdField",void 0),v([me("service","typeIdField"),me("typeIdField",["layerDefinition.typeIdField"])],Ce.prototype,"readTypeIdField",null),v([S({type:[Hz]})],Ce.prototype,"types",void 0),v([me("service","types",["types"]),me("types",["layerDefinition.types"])],Ce.prototype,"readTypes",null),v([S({type:Boolean,json:{origins:{"portal-item":{write:{target:"layerDefinition.defaultVisibility"}}}}})],Ce.prototype,"visible",void 0),v([me("portal-item","visible",["visibility","layerDefinition.defaultVisibility"])],Ce.prototype,"readVisible",null),Ce=v([H("esri.layers.FeatureLayer")],Ce);const Xh=Ce,v7e=Object.freeze(Object.defineProperty({__proto__:null,default:Xh},Symbol.toStringTag,{value:"Module"}));var w7e=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Gme(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function Bme(e,t){for(var i=0;i<t.length;i++){const r=t[i];if(typeof r!="string"&&!Array.isArray(r)){for(const a in r)if(a!=="default"&&!(a in e)){const p=Object.getOwnPropertyDescriptor(r,a);p&&Object.defineProperty(e,a,p.get?p:{enumerable:!0,get:()=>r[a]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}var yA,mA={exports:{}};function qme(){return yA||(yA=1,function(e){function t(){function r(h){if(typeof h=="number")return G.Tc.Zg(h);if(h==null)return null;if(X1[h]!=null)return G.Tc.Zg(X1[h]);throw Error("Unrecognised Unit Type")}function a(h){if(typeof h=="number")return G.Tc.Zg(h);if(h==null)return null;if(Q1[h]!=null)return G.Tc.Zg(Q1[h]);throw Error("Unrecognised Unit Type")}function p(h){if(h)switch(h){case"loxodrome":return 1;case"great-elliptic":return 2;case"normal-section":return 3;case"shape-preserving":return 4}return 0}function y(h,C,w,u){if(w==null||w.B())return null;switch(w.getType()){case G.qn.Point:return h.exportPoint(C,w,u);case G.qn.Polygon:return h.exportPolygon(C,w,u);case G.qn.Polyline:return h.exportPolyline(C,w,u);case G.qn.MultiPoint:return h.exportMultipoint(C,w,u);case G.qn.Envelope:return h.exportExtent(C,w,u)}return null}function g(h,C,w,u){if(w.getType()!==G.qn.Point)throw Error("Geometry not Point");return h.exportPoint(C,w,u)}function _(h,C,w){return h.convertToGEGeometry(C,w)}function T(h){var C=h.wkid;h=h.wkt2||h.wkt;var w=Oo.get(C||h);return w==null&&(C!==-1&&C!=null?(w=G.Eg.create(C),Oo.set(C,w)):h&&(w=G.Eg.qP(h),Oo.set(h,w)),Na.has(C||h)&&w.VW(Na.get(C||h))),w}function I(h){var C,w,u;if(h==null)return null;var o=T(h);return h=o.Hd(),o=o.Kn(),(C={}).tolerance=o,C.unitType=h==null?-1:h.od,C.unitID=h==null?-1:h.Ec(),C.unitBaseFactor=h==null?0:h.ai,C.unitSquareDerivative=h==null?0:(u=(w=G.Tc.aG(h))===null||w===void 0?void 0:w.Ec())!==null&&u!==void 0?u:0,C}function A(h,C,w,u){return w==null?null:(w=G.$b.clip(_(h,_e,w),_(h,_e,u),T(C)),y(h,_e,w,C))}function P(h,C,w,u){w=G.$b.dl(_(h,_e,w),_(h,_e,u),T(C)),u=[];for(var o=0;o<w.length;o++)u.push(y(h,_e,w[o],C));return u}function N(h,C,w,u){if(w==null||u==null)throw Error("Illegal Argument Exception");return G.$b.contains(_(h,_e,w),_(h,_e,u),T(C))}function D(h,C,w,u){if(w==null||u==null)throw Error("Illegal Argument Exception");return G.$b.BP(_(h,_e,w),_(h,_e,u),T(C))}function z(h,C,w,u,o){if(w==null||u==null)throw Error("Illegal Argument Exception");return G.$b.tb(_(h,_e,w),_(h,_e,u),T(C),r(o))}function q(h,C,w,u){return!(w==null&&u!=null||u==null&&w!=null)&&G.$b.Nb(_(h,_e,w),_(h,_e,u),T(C))}function J(h,C,w,u){if(w==null||u==null)throw Error("Illegal Argument Exception");return G.$b.TS(_(h,_e,w),_(h,_e,u),T(C))}function ee(h,C,w,u){if(w==null||u==null)throw Error("Illegal Argument Exception");return G.$b.touches(_(h,_e,w),_(h,_e,u),T(C))}function X(h,C,w,u){if(w==null||u==null)throw Error("Illegal Argument Exception");return G.$b.qY(_(h,_e,w),_(h,_e,u),T(C))}function ie(h,C,w,u){if(w==null||u==null)throw Error("Illegal Argument Exception");return G.$b.TP(_(h,_e,w),_(h,_e,u),T(C))}function oe(h,C,w,u){if(w==null||u==null)throw Error("Illegal Argument Exception");return G.$b.DU(_(h,_e,w),_(h,_e,u),T(C))}function ue(h,C,w,u,o){if(w==null||u==null)throw Error("Illegal Argument Exception");return G.$b.yB(_(h,_e,w),_(h,_e,u),T(C),o)}function ge(h,C,w){if(w==null)throw Error("Illegal Argument Exception");return G.$b.dT(_(h,_e,w),T(C))}function Se(h,C,w){if(w==null)throw Error("Illegal Argument Exception");return w=G.$b.eC(_(h,_e,w),T(C)),y(h,_e,w,C)}function Ee(h,C,w,u){if(u===void 0&&(u=!1),w==null)throw Error("Illegal Argument Exception");if(Array.isArray(w)){var o=u,s=[];for(u=0;u<w.length;u++)s.push(_(h,_e,w[u]));for(w=G.$b.jP(s,o),o=Array(w.length),u=0;u<w.length;u++)o[u]=y(h,_e,w[u],C);return o}return u=G.$b.iP(_(h,_e,w),T(C)),y(h,_e,u,C)}function Ie(h,C,w,u){if(w==null||u==null)throw Error("Illegal Argument Exception");if(Array.isArray(w)){for(var o=[],s=0;s<w.length;s++)o.push(_(h,_e,w[s]));for(w=G.$b.QP(o,_(h,_e,u),T(C)),u=Array(w.length),s=0;s<w.length;s++)u[s]=y(h,_e,w[s],C);return u}return s=G.$b.im(_(h,_e,w),_(h,_e,u),T(C)),y(h,_e,s,C)}function ke(h,C,w,u){if(w==null||u==null)throw Error("Illegal Argument Exception");if(Array.isArray(w)){for(var o=[],s=0;s<w.length;s++)o.push(_(h,_e,w[s]));for(w=G.$b.VX(o,_(h,_e,u),T(C)),u=Array(w.length),s=0;s<w.length;s++)u[s]=y(h,_e,w[s],C);return u}return s=G.$b.ep(_(h,_e,w),_(h,_e,u),T(C)),y(h,_e,s,C)}function je(h,C,w,u){if(w==null||u==null)throw Error("Illegal Argument Exception");if(Array.isArray(w)){for(var o=[],s=0;s<w.length;s++)o.push(_(h,_e,w[s]));for(w=G.$b.RS(o,_(h,_e,u),T(C)),u=Array(w.length),s=0;s<w.length;s++)u[s]=y(h,_e,w[s],C);return u}return s=G.$b.Ea(_(h,_e,w),_(h,_e,u),T(C)),y(h,_e,s,C)}function st(h,C,w,u){if(w==null)return null;var o=[];if(Array.isArray(w)){if(w.length===0)return null;for(u=0;u<w.length;u++)o.push(_(h,_e,w[u]))}else o.push(_(h,_e,w)),u!=null&&o.push(_(h,_e,u));return y(h,_e,G.$b.jY(o,T(C)),C)}function Ve(h,C,w,u,o,s,n,l){var c=0;if(s!=null)switch(s){case"round":c=0;break;case"bevel":c=1;break;case"miter":c=2;break;case"square":c=3}if(Array.isArray(w)){if(w==null)h=null;else if(w.length===0)h=[];else{var d=[];for(s=0;s<w.length;s++)d.push(_(h,_e,w[s]));for(w=G.$b.BU(d,T(C),u,c,n,l,r(o)),u=Array(w.length),s=0;s<w.length;s++)u[s]=y(h,_e,w[s],C);h=u}return h}return w=G.$b.offset(_(h,_e,w),T(C),u,c,n,l,r(o)),y(h,_e,w,C)}function xi(h,C,w,u,o,s){if(s===void 0&&(s=!1),Array.isArray(w)){if(!Array.isArray(u)){for(var n=[],l=0;l<w.length;l++)n.push(u);u=n}if(u.length!=w.length){if(u.length==0)throw Error("Illegal Argument Exception");n=[];var c=0;for(l=0;l<w.length;l++)u[l]===void 0?n.push(c):(n.push(u[l]),c=u[l]);u=n}return Ri(h,C,w,u,o,!1,s,"geodesic",NaN)}return w=G.$b.buffer(_(h,_e,w),T(C),u,r(o),!1,0,NaN),y(h,_e,w,C)}function $s(h,C,w,u,o,s,n,l){if(Array.isArray(w)){if(!Array.isArray(u)){for(var c=[],d=0;d<w.length;d++)c.push(u);u=c}if(u.length!==w.length){if(u.length===0)throw Error("Illegal Argument Exception");c=[];var f=0;for(d=0;d<w.length;d++)u[d]===void 0?c.push(f):(c.push(u[d]),f=u[d]);u=c}return Ri(h,C,w,u,o,!0,s,n,l)}return n===void 0&&(n=NaN),w=G.$b.buffer(_(h,_e,w),T(C),u,r(o),!0,p(s),n),y(h,_e,w,C)}function Ri(h,C,w,u,o,s,n,l,c){if(c===void 0&&(c=NaN),w==null)return null;if(w.length===0)return[];for(var d=[],f=0;f<w.length;f++)d.push(_(h,_e,w[f]));for(w=G.$b.MN(d,T(C),u,r(o),s,n,p(l),c),u=Array(w.length),f=0;f<w.length;f++)u[f]=y(h,_e,w[f],C);return u}function bt(h,C,w,u,o){var s;return o===void 0&&(o=!0),w=G.$b.nz(_(h,_e,w),_(h,_e,u),o),(s={}).coordinate=g(h,_e,w.fz(),C),s.distance=w.hz(),s.isRightSide=w.Sz(),s.vertexIndex=w.Ua(),s.isEmpty=w.B(),s}function Pr(h,C,w,u){var o;return w=G.$b.oz(_(h,_e,w),_(h,_e,u)),(o={}).coordinate=g(h,_e,w.fz(),C),o.distance=w.hz(),o.isRightSide=w.Sz(),o.vertexIndex=w.Ua(),o.isEmpty=w.B(),o}function nw(h,C,w,u,o,s){var n;for(w=G.$b.pz(_(h,_e,w),_(h,_e,u),o,s),u=[],o=0;o<w.length;o++)w[o].B()===!1&&u.push(((n={}).coordinate=g(h,_e,w[o].fz(),C),n.distance=w[o].hz(),n.isRightSide=w[o].Sz(),n.vertexIndex=w[o].Ua(),n.isEmpty=w[o].B(),n));return u}function ow(h,C,w,u,o,s){return w=G.$b.QQ(_(h,_e,w),T(C),u,o,r(s)),y(h,_e,w,C)}function aw(h,C,w,u,o){return w=G.$b.Qr(_(h,_e,w),T(C),u,r(o)),y(h,_e,w,C)}function Z1(h,C,w,u,o,s){return s===void 0&&(s=0),w=G.$b.Wy(_(h,_e,w),T(C),u,r(o),s),y(h,_e,w,C)}function lw(h,C,w,u){if(w==null)throw Error("Illegal Argument Exception");return G.$b.JU(_(h,_e,w),T(C),a(u))}function uw(h,C,w,u){if(w==null)throw Error("Illegal Argument Exception");return G.$b.KU(_(h,_e,w),T(C),r(u))}function hw(h,C,w,u,o){if(w==null)throw Error("Illegal Argument Exception");return G.$b.WQ(_(h,_e,w),T(C),a(u),p(o))}function cw(h,C,w,u,o){if(w==null)throw Error("Illegal Argument Exception");return G.$b.ZQ(_(h,_e,w),T(C),r(u),p(o))}function pw(h){G.NL.bind(h)}function dw(h,C,w,u,o){var s=null,n=null;if(u){if(!o)throw G.i.N("AOI missing Spatial Reference");s=_(h,_e,u),n=T(o).fh()}return(h=G.gu.XR(T(C).fh(),T(w).fh(),s,n))!==null?h:null}function fw(h,C,w,u,o){var s=null,n=null;if(u){if(!o)throw G.i.N("AOI missing Spatial Reference");s=_(h,_e,u),n=T(o).fh()}return G.gu.YR(T(C).fh(),T(w).fh(),s,n)}function yw(h,C,w,u,o,s){if(o===void 0&&(o=null),s===void 0&&(s=null),s){var n=new G.yC;n.Vu=s.densificationStep,n.Jr=s.centralMeridianOfOutputGCS,s.clipWithInputHorizon&&n.PW(s.clipWithInputHorizon),s.clipWithOutputHorizon&&n.QW(s.clipWithOutputHorizon)}if(this.KY===!1)throw Error("Projection Engine must be enabled using enableProjection");if(C.length===0)return[];if(o){if(!(s=o.getCachedGeTransformation(w,u)))e:{if(s=o,o=null,s){var l=s.getGTListEntry();if(l!==null){o=new G.wC(null);for(var c=0,d=l.steps;c<d.length;c++){l=d[c];var f=new G.Dx(l.geogtran);l.isInverse&&f.Qz(),o.add(f)}n=G.vr.Nr(T(w).fh(),T(u).fh(),o,n),s.assignCachedGe(w,u,n),s=n;break e}}if(o===null&&s&&s.steps&&0<s.steps.length){for(o=new G.wC(null),c=0,d=s.steps;c<d.length;c++)(l=d[c]).wkid!=-1&&l.wkid!=null?o.add(G.Dx.create(l.wkid,l.isInverse)):o.add(G.Dx.uP(l.wkt,l.isInverse));n=G.vr.Nr(T(w).fh(),T(u).fh(),o,n),s.assignCachedGe(w,u,n),s=n}else s=G.vr.Nr(T(w).fh(),T(u).fh(),o,n)}for(w=[],o=0;o<C.length;o++)n=C[o],w.push(K1(h,n,u,s))}else for(s=G.vr.Nr(T(w).fh(),T(u).fh(),null),w=[],o=0;o<C.length;o++)n=C[o],w.push(K1(h,n,u,s));return w}function K1(h,C,w,u){return C=G.$b.zh(_(h,_e,C),u),y(h,_e,C,w)}function mw(h,C){h!=null&&(h=h.wkid||h.wkt2||h.wkt,Na.has(h),Na.set(h,C),Oo.has(h)&&Oo.delete(h))}function gw(h){h!=null&&(h=h.wkid||h.wkt2||h.wkt,Na.has(h)&&(Na.delete(h),Oo.has(h)&&Oo.delete(h)))}function vw(h,C,w,u){if(w==null||u==null)return[];var o=[],s=0;for(w=G.$b.QS(_(h,_e,w),_(h,_e,u),T(C))||[];s<w.length;s++)o.push(y(h,_e,w[s],C));return o}var yi,G,ir,Y1,pt=this&&this.__extends||function(){function h(C,w){return(h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,o){u.__proto__=o}||function(u,o){for(var s in o)o.hasOwnProperty(s)&&(u[s]=o[s])})(C,w)}return function(C,w){function u(){this.constructor=C}h(C,w),C.prototype=w===null?Object.create(w):(u.prototype=w.prototype,new u)}}();(function(h){var C;(C=h.qn||(h.qn={}))[C.Unknown=0]="Unknown",C[C.Point=33]="Point",C[C.Line=322]="Line",C[C.Envelope=197]="Envelope",C[C.MultiPoint=550]="MultiPoint",C[C.Polyline=1607]="Polyline",C[C.Polygon=1736]="Polygon",function(u){u[u.enumMild=0]="enumMild",u[u.enumMedium=1]="enumMedium",u[u.enumHot=2]="enumHot"}(h.YK||(h.YK={}));var w=function(){function u(){this.description=null,this.VA=0}return u.prototype.getType=function(){return 0},u.prototype.Db=function(){return-1},u.prototype.Nf=function(o){this.vc(),o!=this.description&&this.sn(o)},u.prototype.sn=function(){},u.prototype.Jl=function(o){this.vc(),o!=this.description&&(o=h.ee.CR(this.description,o))!=this.description&&this.sn(o)},u.prototype.hasAttribute=function(o){return this.description.hasAttribute(o)},u.prototype.re=function(o){this.vc(),this.description.hasAttribute(o)||(o=h.ee.BR(this.description,o),this.sn(o))},u.prototype.Tg=function(){return null},u.prototype.bn=function(){},u.prototype.A=function(){},u.prototype.Qo=function(){},u.prototype.xc=function(o){this.A(o)},u.prototype.B=function(){return!0},u.prototype.Oa=function(){},u.prototype.Oc=function(){},u.prototype.Ia=function(){return null},u.prototype.copyTo=function(){},u.prototype.Ke=function(){return 0},u.prototype.Qb=function(){return 0},u.prototype.iG=function(){return this.hasAttribute(1)},u.tf=function(o){return 1+((192&o)>>6)>>1},u.Rn=function(o){return!!(32&o)},u.US=function(o){return!!(128&o)},u.yd=function(o){return!!(256&o)},u.xj=function(o){return!!(512&o)},u.Hc=function(o){return!!(1024&o)},u.prototype.Of=function(){var o=this.Ia();return this.copyTo(o),o},u.prototype.mg=function(){return null},u.jg=function(o){var s=o.Ia();return o.copyTo(s),s},u.prototype.vc=function(){0<=this.VA&&(this.VA+=2147483649)},u.Ax=function(o){var s=o.getType();if(u.xj(s))return o.I();if(o.B())return 0;if(s==197)return 4;if(s==33)return 1;if(u.yd(s))return 2;throw h.i.fa("missing type")},u}();h.aa=w})(G||(G={})),ir=G||(G={}),Y1=function(){function h(){this.y=this.x=0}return h.construct=function(C,w){var u=new h;return u.x=C,u.y=w,u},h.al=function(C){var w=new h;return w.x=C.x,w.y=C.y,w},h.prototype.ma=function(C,w){this.x=C,this.y=w},h.prototype.L=function(C){this.x=C.x,this.y=C.y},h.prototype.fq=function(C,w){return this.x===C&&this.y===w},h.prototype.Rz=function(C){return 2220446049250313e-31>=Math.abs(this.x-C.x)&&2220446049250313e-31>=Math.abs(this.y-C.y)},h.prototype.qb=function(C){return this.x===C.x&&this.y===C.y},h.prototype.Nb=function(C){return C==this||C instanceof h&&this.x==C.x&&this.y==C.y},h.prototype.sub=function(C){this.x-=C.x,this.y-=C.y},h.prototype.uc=function(C,w){this.x=C.x-w.x,this.y=C.y-w.y},h.prototype.add=function(C,w){w!==void 0?(this.x=C.x+w.x,this.y=C.y+w.y):(this.x+=C.x,this.y+=C.y)},h.prototype.Sq=function(){this.x=-this.x,this.y=-this.y},h.prototype.mt=function(C){this.x=-C.x,this.y=-C.y},h.prototype.NS=function(C,w,u){this.x=C.x*(1-u)+w.x*u,this.y=C.y*(1-u)+w.y*u},h.prototype.Ct=function(C,w){this.x=this.x*C+w.x,this.y=this.y*C+w.y},h.prototype.HW=function(C,w,u){this.x=w.x*C+u.x,this.y=w.y*C+u.y},h.prototype.scale=function(C){this.x*=C,this.y*=C},h.prototype.compare=function(C){return this.y<C.y?-1:this.y>C.y?1:this.x<C.x?-1:this.x>C.x?1:0},h.prototype.normalize=function(){var C=this.length();C==0&&(this.x=1,this.y=0),this.x/=C,this.y/=C},h.prototype.length=function(){return Math.sqrt(this.x*this.x+this.y*this.y)},h.prototype.Sk=function(){return this.x*this.x+this.y*this.y},h.tb=function(C,w){return Math.sqrt(this.yc(C,w))},h.Oy=function(C,w,u,o){return C-=u,w-=o,Math.sqrt(C*C+w*w)},h.prototype.Qh=function(C){return this.x*C.x+this.y*C.y},h.prototype.fD=function(C){return Math.abs(this.x*C.x)+Math.abs(this.y*C.y)},h.prototype.wi=function(C){return this.x*C.y-this.y*C.x},h.prototype.Bt=function(C,w){var u=-this.x*w+this.y*C;this.x=this.x*C+this.y*w,this.y=u},h.prototype.Hv=function(){var C=this.x;this.x=-this.y,this.y=C},h.prototype.MG=function(C){this.x=-C.y,this.y=C.x},h.prototype.ar=function(){var C=this.x;this.x=this.y,this.y=-C},h.prototype.qu=function(){return 0<this.x?0<=this.y?1:4:0<this.y?2:this.x==0?4:3},h.nu=function(C,w){var u=C.qu(),o=w.qu();return o==u?0>(C=C.wi(w))?1:0<C?-1:0:u<o?-1:1},h.yc=function(C,w){var u=C.x-w.x;return u*u+(C=C.y-w.y)*C},h.prototype.toString=function(){return"("+this.x+" , "+this.y+")"},h.prototype.Rc=function(){this.y=this.x=NaN},h.prototype.isNaN=function(){return isNaN(this.x)||isNaN(this.y)},h.prototype.offset=function(C,w){var u=h.tb(C,w),o=h.construct(this.x,this.y);if(u==0)return h.tb(o,C);var s=new h;return s.L(w),s.sub(C),o.sub(C),o.wi(s)/u},h.Uq=function(C,w,u){var o=new ir.Wb;o.set(w.x),o.sub(C.x);var s=new ir.Wb;s.set(u.y),s.sub(C.y);var n=new ir.Wb;n.set(w.y),n.sub(C.y);var l=new ir.Wb;return l.set(u.x),l.sub(C.x),o.Ag(s),n.Ag(l),o.sub(n),o.ps()?(o=new ir.hp(w.x),s=new ir.hp(C.x),n=new ir.hp(C.y),o=o.jt(s),C=(C=new ir.hp(u.y)).jt(n),w=(w=new ir.hp(w.y)).jt(n),u=(u=new ir.hp(u.x)).jt(s),o=o.lr(C),w=w.lr(u),(o=o.lr(w)).nT()?-1:o.fS()?1:0):0>(u=o.value())?-1:0<u?1:0},h.prototype.cc=function(){return ir.O.uj(ir.O.uj())},h}(),ir.h=Y1,function(h){var C=function(){function w(u){this.Fy=this.Mt=0,this.OX=u}return w.prototype.reset=function(){this.Fy=this.Mt=0},w.prototype.add=function(u){u-=this.Fy;var o=this.Mt+u;this.Fy=o-this.Mt-u,this.Mt=o},w.prototype.sub=function(u){this.add(-u)},w.prototype.rm=function(){return this.OX+this.Mt},w}();h.Fx=C,h.lc=function(){function w(){}return w.Cn=function(u,o){return 0<=o?Math.abs(u):-Math.abs(u)},w.sign=function(u){return 0>u?-1:0<u?1:0},w.RK=function(u){return u-360*Math.floor(u/360)},w.round=function(u){return Math.floor(u+.5)},w.ox=function(u){return u*u},w.hq=function(u,o,s){return .5>=s?u+(o-u)*s:o-(o-u)*(1-s)},w.OG=function(u,o,s,n){.5>=s?(n.x=u.x+(o.x-u.x)*s,n.y=u.y+(o.y-u.y)*s):(n.x=o.x-(o.x-u.x)*(1-s),n.y=o.y-(o.y-u.y)*(1-s))},w.lT=function(u,o,s,n,l,c){.5>=l?(c.x=u+(s-u)*l,c.y=o+(n-o)*l):(c.x=s-(s-u)*(1-l),c.y=n-(n-o)*(1-l))},w}()}(G||(G={})),function(h){var C=function(w){function u(){var o=w.call(this)||this;return o.sa=0,o.na=0,o.pa=0,o.la=0,o.ka=null,o}return pt(u,w),u.prototype.ac=function(){return h.h.construct(this.sa,this.na)},u.prototype.Yp=function(o){o.x=this.sa,o.y=this.na},u.prototype.Dc=function(o){this.em(0,o)},u.prototype.ZB=function(o,s){this.em(0,h.h.construct(o,s))},u.prototype.To=function(o){this.hD(0,o)},u.prototype.setStart=function(o){this.uD(0,o)},u.prototype.wv=function(o,s){return this.Od(0,o,s)},u.prototype.YB=function(o,s,n){this.tn(0,o,s,n)},u.prototype.wc=function(){return h.h.construct(this.pa,this.la)},u.prototype.Tr=function(o){o.x=this.pa,o.y=this.la},u.prototype.Qc=function(o){this.em(1,o)},u.prototype.Ql=function(o,s){this.em(1,h.h.construct(o,s))},u.prototype.Po=function(o){this.hD(1,o)},u.prototype.setEnd=function(o){this.uD(1,o)},u.prototype.gv=function(o,s){return this.Od(1,o,s)},u.prototype.OB=function(o,s,n){this.tn(1,o,s,n)},u.prototype.Db=function(){return 1},u.prototype.B=function(){return this.Ac()},u.prototype.Oa=function(){},u.prototype.Ke=function(){return 0},u.prototype.Ea=function(o,s,n,l,c){return this.KM(o,s,n,l,c)},u.prototype.isIntersecting=function(o,s){return this.zr(o,s,!1)!=0},u.prototype.qs=function(o,s){return this.ru(o,s,!1)},u.prototype.ru=function(){return null},u.prototype.Ac=function(){return!1},u.prototype.ay=function(o){if(this.vc(),this.ka==null&&0<o)this.ka=h.O.lg(2*o);else if(this.ka!=null&&this.ka.length<2*o){for(var s=this.ka.slice(0),n=this.ka.length;n<2*o;n++)s[n]=0;this.ka=s}},u.gM=function(o,s,n){if(0<n)var l=0;for(var c=0;c<n;c++)s[0+l]=o[0],l++},u.prototype.em=function(o,s){o!=0?(this.pa=s.x,this.la=s.y):(this.sa=s.x,this.na=s.y)},u.prototype.sn=function(o){if(this.ka!=null){for(var s=h.ee.Iw(o,this.description),n=[],l=u.Gg(this.description,0),c=u.Gg(this.description,1),d=u.Gg(o,0),f=u.Gg(o,1),m=0,b=1,x=o.Aa;b<x;b++){var $=o.kd(b),E=h.ra.Va($);if(s[b]==-1){var O=h.ra.se($);for($=0;$<E;$++)n[d+m]=O,n[f+m]=O,m++}else for(O=this.description.$j(s[b])-2,$=0;$<E;$++)n[d+m]=this.ka[l+O],n[f+m]=this.ka[c+O],m++,O++}this.ka=n}this.description=o},u.prototype.hD=function(o,s){if(this.Ac())throw h.i.fa("empty geometry");s.Nf(this.description),s.Ac()&&s.un();for(var n=0;n<this.description.Aa;n++)for(var l=this.description.Ed(n),c=0,d=h.ra.Va(l);c<d;c++){var f=this.Od(o,l,c);s.setAttribute(l,c,f)}},u.prototype.uD=function(o,s){if(this.vc(),s.Ac())throw h.i.fa("empty geometry");for(var n=s.description,l=0,c=n.Aa;l<c;l++)for(var d=n.Ed(l),f=h.ra.Va(d),m=0;m<f;m++){var b=s.Uc(d,m);this.tn(o,d,m,b)}},u.prototype.Od=function(o,s,n){if(this.Ac())throw h.i.fa("This operation was performed on an Empty Geometry.");if(s==0)return o!=0?n!=0?this.la:this.pa:n!=0?this.na:this.sa;if(n>=h.ra.Va(s))throw h.i.ce();var l=this.description.Pf(s);return 0<=l?(this.ka!=null&&this.ay(this.description.Ae.length-2),this.ka[u.Gg(this.description,o)+this.description.$j(l)-2+n]):h.ra.se(s)},u.prototype.tn=function(o,s,n,l){if(this.vc(),n>=h.ra.Va(s))throw h.i.ce();var c=this.description.Pf(s);0>c&&(this.re(s),c=this.description.Pf(s)),s==0?o!=0?n!=0?this.la=l:this.pa=l:n!=0?this.na=l:this.sa=l:(this.ka==null&&this.ay(this.description.Ae.length-2),this.ka[u.Gg(this.description,o)+this.description.$j(c)-2+n]=l)},u.prototype.copyTo=function(o){if(o.getType()!=this.getType())throw h.i.N();o.description=this.description,o.ay(this.description.Ae.length-2),u.gM(this.ka,o.ka,2*(this.description.Ae.length-2)),o.sa=this.sa,o.na=this.na,o.pa=this.pa,o.la=this.la,o.vc(),this.op(o)},u.prototype.Tg=function(o,s){var n=new h.Nc;return this.Ac()?(n.Oa(),n):(n.oa=this.Od(0,o,s),n.va=n.oa,n.Lk(this.Od(1,o,s)),n)},u.prototype.ZI=function(o){this.Ac()?o.Oa():(o.oa=this.Od(0,0,0),o.va=o.oa,o.Lk(this.Od(1,0,0)))},u.prototype.Tw=function(o,s){s.Nf(this.description),s.Cb(this.hc(o));for(var n=1,l=this.description.Aa;n<l;n++)for(var c=this.description.Ed(n),d=h.ra.Va(c),f=0;f<d;f++){var m=this.Uc(o,c,f);s.setAttribute(c,f,m)}},u.prototype.FM=function(o){if(this.description!=o.description||this.sa!=o.sa||this.pa!=o.pa||this.na!=o.na||this.la!=o.la)return!1;for(var s=0;s<2*(this.description.Ae.length-2);s++)if(this.ka[s]!=o.ka[s])return!1;return!0},u.prototype.BG=function(){return this.sa==this.pa&&this.na==this.la},u.prototype.reverse=function(){var o=this.sa;this.sa=this.pa,this.pa=o,o=this.na,this.na=this.la,this.la=o,o=1;for(var s=this.description.Aa;o<s;o++)for(var n=this.description.kd(o),l=0,c=h.ra.Va(n);l<c;l++){var d=this.Od(0,n,l),f=this.Od(1,n,l);this.tn(0,n,l,f),this.tn(1,n,l,d)}},u.prototype.zr=function(o,s,n){var l=this.getType(),c=o.getType();if(l===322){if(c==322)return h.yb.OM(this,o,s,n);throw h.i.Qa()}throw h.i.Qa()},u.prototype.KM=function(o,s,n,l,c){var d=this.getType(),f=o.getType();if(d===322){if(f==322)return h.yb.Zx(this,o,s,n,l,c);throw h.i.Qa()}throw h.i.Qa()},u.prototype.Tx=function(){return null},u.Gg=function(o,s){return s*(o.Ae.length-2)},u.prototype.hc=function(o,s){if(s===void 0)return s=new h.h,this.hc(o,s),s;h.lc.lT(this.sa,this.na,this.pa,this.la,o,s)},u.prototype.fe=function(){return null},u.prototype.eG=function(){return null},u.prototype.cq=function(){return null},u.prototype.Bi=function(){return null},u.prototype.Pn=function(){return null},u.prototype.kg=function(){return null},u.prototype.Ux=function(o,s){return s!==void 0?this.vx(s)-this.vx(o):this.vx(o)},u.prototype.op=function(){},u.prototype.dl=function(){return null},u.prototype.ah=function(){},u.prototype.Uc=function(){return null},u.prototype.Pe=function(){return null},u.prototype.vx=function(){return null},u.prototype.NG=function(){return null},u.prototype.tb=function(o,s){if(!s&&this.zr(o,0,!1)!=0)return 0;s=17976931348623157e292;var n=this.ac(),l=o.fe(n,!1);return n.sub(o.hc(l)),(n=n.length())<s&&(s=n),n=this.wc(),l=o.fe(n,!1),n.sub(o.hc(l)),(n=n.length())<s&&(s=n),n=o.ac(),l=this.fe(n,!1),n.sub(this.hc(l)),(n=n.length())<s&&(s=n),n=o.wc(),l=this.fe(n,!1),n.sub(this.hc(l)),(n=n.length())<s&&(s=n),s},u.prototype.mg=function(){return h.pi.gm(this,null)},u}(h.aa);h.SC=C}(G||(G={})),new G.h,function(h){var C;(C=h.$K||(h.$K={}))[C.Unknown=-1]="Unknown",C[C.Not=0]="Not",C[C.Weak=1]="Weak",C[C.Strong=2]="Strong",function(u){u[u.DirtyIsKnownSimple=1]="DirtyIsKnownSimple",u[u.IsWeakSimple=2]="IsWeakSimple",u[u.IsStrongSimple=4]="IsStrongSimple",u[u.DirtyOGCFlags=8]="DirtyOGCFlags",u[u.DirtyVerifiedStreams=32]="DirtyVerifiedStreams",u[u.DirtyExactIntervals=64]="DirtyExactIntervals",u[u.DirtyLooseIntervals=128]="DirtyLooseIntervals",u[u.DirtyIntervals=192]="DirtyIntervals",u[u.DirtyIsEnvelope=256]="DirtyIsEnvelope",u[u.DirtyLength2D=512]="DirtyLength2D",u[u.DirtyRingAreas2D=1024]="DirtyRingAreas2D",u[u.DirtyCoordinates=1993]="DirtyCoordinates",u[u.DirtyAllInternal=65535]="DirtyAllInternal",u[u.DirtyAll=16777215]="DirtyAll"}(h.MK||(h.MK={}));var w=function(u){function o(){var s=u.call(this)||this;return s.Hm=65535,s.wa=0,s.Pg=-1,s.Bb=null,s}return pt(o,u),o.prototype.op=function(){},o.prototype.$x=function(){},o.prototype.iy=function(){},o.prototype.I=function(){return this.wa},o.prototype.B=function(){return this.Ac()},o.prototype.Ac=function(){return this.wa==0},o.prototype.ak=function(s){return!!(this.Hm&s)},o.prototype.Lf=function(s,n){this.Hm=n?this.Hm|s:this.Hm&~s},o.prototype.mc=function(){this.ak(32)&&this.bN()},o.prototype.wx=function(){if(this.Ac())throw h.i.fa("This operation was performed on an Empty Geometry.")},o.prototype.ve=function(s,n){if(0>s||s>=this.wa)throw h.i.fa("index out of bounds");this.mc(),n.Nf(this.description),n.B()&&n.un();for(var l=0;l<this.description.Aa;l++)for(var c=this.description.Ed(l),d=0,f=h.ra.Va(c);d<f;d++){var m=this.za[l].eg(f*s+d);n.setAttribute(c,d,m)}},o.prototype.Ht=function(s,n){this.mc();for(var l=n.description,c=0;c<l.Aa;c++)for(var d=l.Ed(c),f=h.ra.Va(d),m=0;m<f;m++){var b=n.Uc(d,m);this.setAttribute(d,s,m,b)}},o.prototype.D=function(s,n){if(0>s||s>=this.I())throw h.i.ce();this.mc(),this.za[0].tc(2*s,n)},o.prototype.Na=function(s){var n=new h.h;return this.D(s,n),n},o.prototype.Gc=function(s,n){this.za[0].tc(2*s,n)},o.prototype.Cb=function(s,n,l){if(0>s||s>=this.wa)throw h.i.ce();this.mc();var c=this.za[0];l!==void 0?(c.write(2*s,n),c.write(2*s+1,l)):c.Tt(2*s,n),this.Pc(1993)},o.prototype.Cz=function(){if(void 0>=this.I())throw h.i.ce();this.mc();var s=this.za[0],n=new h.Nd;return n.x=s.read(NaN),n.y=s.read(NaN),n.z=this.hasAttribute(1)?this.za[1].eg():h.ra.se(1),n},o.prototype.dC=function(s){if(0>s||s>=this.I())throw h.i.ce();this.re(1),this.mc(),this.Pc(1993);var n=this.za[0];n.write(2*s,(void 0).x),n.write(2*s+1,(void 0).y),this.za[1].pr(s,(void 0).z)},o.prototype.Uc=function(s,n,l){if(0>n||n>=this.wa)throw h.i.ce();var c=h.ra.Va(s);if(l>=c)throw h.i.ce();this.mc();var d=this.description.Pf(s);return 0<=d?this.za[d].eg(n*c+l):h.ra.se(s)},o.prototype.yF=function(s,n){return this.Uc(s,n)},o.prototype.setAttribute=function(s,n,l,c){if(0>n||n>=this.wa)throw h.i.ce();var d=h.ra.Va(s);if(l>=d)throw h.i.ce();this.re(s),this.mc(),s=this.description.Pf(s),this.Pc(1993),this.za[s].pr(n*d+l,c)},o.prototype.ub=function(s){return this.wx(),this.re(s),this.mc(),this.za[this.description.Pf(s)]},o.prototype.hn=function(s,n){if(n!=null&&h.ra.Tp(s)!=n.Tp())throw h.i.N();this.re(s),s=this.description.Pf(s),this.za==null&&(this.za=h.Yc.qI(this.description.Aa)),this.za[s]=n,this.Pc(16777215)},o.prototype.sn=function(s){var n=null;if(this.za!=null){var l=h.ee.Iw(s,this.description);n=[];for(var c=0,d=s.Aa;c<d;c++)l[c]!=-1&&(n[c]=this.za[l[c]])}this.description=s,this.za=n,this.Pg=-1,this.Pc(16777215)},o.prototype.AD=function(s){this.wu(!0),s instanceof h.l?this.$.A(s):this.$.Qo(s)},o.prototype.aN=function(s){this.wu(!1),s instanceof h.l?this.$.A(s):this.$.Qo(s)},o.prototype.bn=function(s){this.wu(!0),this.$.copyTo(s)},o.prototype.A=function(s){this.AD(s)},o.prototype.Qo=function(s){this.AD(s)},o.prototype.xc=function(s){this.aN(s)},o.prototype.Tg=function(s,n){var l=new h.Nc;return this.Ac()?(l.Oa(),l):(this.wu(!0),this.$.Tg(s,n))},o.prototype.cc=function(){var s=this.description.cc();if(!this.Ac())for(var n=this.I(),l=0,c=this.description.Aa;l<c;l++)s=this.za[l].An(s,0,n*h.ra.Va(this.description.Ed(l)));return s},o.prototype.Nb=function(s){if(s==this)return!0;if(!(s instanceof o&&this.description.Nb(s.description))||this.Ac()!=s.Ac())return!1;if(this.Ac())return!0;var n=this.I();if(n!=s.I())return!1;for(var l=0;l<this.description.Aa;l++){var c=this.description.kd(l),d=this.ub(c),f=s.ub(c);if(!d.Nb(f,0,n*h.ra.Va(c)))return!1}return!0},o.prototype.copyTo=function(s){if(s.getType()!=this.getType())throw h.i.N();this.dD(s)},o.prototype.dD=function(s){this.mc(),s.description=this.description,s.za=null;var n=this.description.Aa,l=null;if(this.za!=null){l=[];for(var c=0;c<n;c++)this.za[c]!=null&&(l[c]=this.za[c].GB(this.I()*h.ra.Va(this.description.Ed(c))))}this.$!=null?(s.$=this.$.Ia(),this.$.copyTo(s.$)):s.$=null,s.wa=this.wa,s.Hm=this.Hm,s.za=l;try{this.op(s)}catch{throw s.Oa(),h.i.fu()}},o.prototype.wD=function(){this.wa=0,this.Pg=-1,this.za=null,this.Pc(16777215)},o.prototype.Pc=function(s){s==16777215&&(this.Pg=-1,this.$x()),this.Hm|=s,this.lM(),this.vc()},o.prototype.wu=function(s){if(this.mc(),this.ak(192))if(this.$==null?this.$=new h.Fh(this.description):this.$.Nf(this.description),this.B())this.$.Oa();else{this.hy(s);for(var n=1;n<this.description.Aa;n++)for(var l=this.description.Ed(n),c=h.ra.Va(l),d=this.za[n],f=0;f<c;f++){var m=new h.Nc;m.Oa();for(var b=0;b<this.wa;b++){var x=d.eg(b*c+f);m.Zb(x)}this.$.setInterval(l,f,m)}s&&this.Lf(192,!1)}},o.prototype.hy=function(){this.$.Oa();for(var s=this.za[0],n=new h.h,l=0;l<this.wa;l++)s.tc(2*l,n),this.$.Zb(n)},o.prototype.yp=function(s){s.Oa();for(var n=this.za[0],l=new h.h,c=0;c<this.wa;c++)n.tc(2*c,l),s.Zb(l)},o.prototype.bN=function(){if(this.Pg<this.wa){this.za==null&&(this.za=h.Yc.qI(this.description.Aa)),this.Pg=2147483647;for(var s=0;s<this.description.Aa;s++){var n=this.description.Ed(s);if(this.za[s]!=null){var l=h.ra.Va(n),c=h.O.truncate(this.za[s].size/l);c<this.wa&&(c=h.O.truncate(this.Pg>this.wa+5?(5*this.wa+3)/4:this.wa),this.za[s].resize(c*l,h.ra.se(n))),c<this.Pg&&(this.Pg=c)}else this.za[s]=h.Yc.YE(n,this.wa),this.Pg=this.wa}}this.iy(),this.Lf(32,!1)},o.prototype.dm=function(s){if(0>s)throw h.i.N();s!=this.wa&&(this.wa=s,this.Pc(65535))},o.prototype.om=function(s){if(!this.ak(1)){if(!this.ak(2))return 0;if(this.QT>=s)return this.ak(8)?1:2}return-1},o.prototype.Ch=function(s,n){if(this.QT=n,s==-1)this.Lf(1,!0),this.Lf(8,!0);else if(this.Lf(1,!1),this.Lf(8,!0),s==0)this.Lf(2,!1),this.Lf(4,!1);else if(s==1)this.Lf(2,!0),this.Lf(4,!1);else{if(s!=2)throw h.i.fa("internal error.");this.Lf(2,!0),this.Lf(4,!0)}},o.prototype.lM=function(){this.Bb!=null&&(this.Bb=null)},o.prototype.kD=function(s,n,l,c){if(0>s||s>=this.wa||0>n||n>=this.wa)throw h.i.fa("index out of bounds");this.mc(),c.Nf(this.description),c.B()&&c.un();for(var d=0;d<this.description.Aa;d++)for(var f=this.description.Ed(d),m=0,b=h.ra.Va(f);m<b;m++){var x=this.za[d].eg(b*s+m),$=this.za[d].eg(b*n+m);c.setAttribute(f,m,h.lc.hq(x,$,l))}},o.prototype.yr=function(s,n){var l=this.za[0].o,c=l[2*s]-l[2*n];return s=l[2*s+1]-l[2*n+1],Math.sqrt(c*c+s*s)},o.prototype.KR=function(s){if(0>s||s>=this.wa)throw h.i.ce();this.mc();var n=new h.Sa;n.Nf(this.description),n.B()&&n.un();for(var l=0;l<this.description.Aa;l++)for(var c=this.description.kd(l),d=0,f=h.ra.Va(c);d<f;d++){var m=this.za[l].eg(f*s+d);n.setAttribute(c,d,m)}return n},o.prototype.Dh=function(s,n){if(0>s||s>=this.wa)throw h.i.ce();if(n.B())throw h.i.N();this.mc();for(var l=n.description,c=0;c<l.Aa;c++)for(var d=l.kd(c),f=h.ra.Va(d),m=0;m<f;m++){var b=n.Uc(d,m);this.setAttribute(d,s,m,b)}},o.prototype.lu=function(){return null},o.prototype.fj=function(){return null},o}(h.aa);h.Gx=w}(G||(G={})),function(h){var C=function(){function w(){this.ob=this.Zn=null,this.Tm=124234251,this.Rv=!0,this.Qe=-1,this.ob=new h.$c(7),this.Zn=null}return w.prototype.Vo=function(u){this.Zn=u},w.prototype.RP=function(){this.Rv=!1},w.prototype.De=function(u){this.ob.De(u)},w.prototype.Pr=function(u){var o=this.ob.Ce();return this.rX(o),this.uX(u,o),o},w.prototype.MP=function(u){this.ob.jd(u)},w.prototype.addElement=function(u,o){return o==-1&&(this.Qe==-1&&(this.Qe=this.Pr(-1)),o=this.Qe),this.FD(u,0,o)},w.prototype.KD=function(u){return this.Qe==-1&&(this.Qe=this.Pr(-1)),this.FD(u,1,this.Qe)},w.prototype.xn=function(u){this.Qe==-1&&(this.Qe=this.Pr(-1));var o=this.Qe,s=this.ob.o;if(o==-1||s[7*o]==-1)return u=this.ob.Ll([-1,-1,-1,u,this.gl(),-1,-1]),(s=this.ob.o)[7*o]=u,this.vp(-1,u,o,s),u;var n=o==-1?-1:s[7*o+2];return u=this.ob.Ll([-1,-1,n,u,this.gl(),-1,-1]),(s=this.ob.o)[7*n+1]=u,this.oy(u,s),s[7*u+2]===-1&&(s[7*o]=u),this.vp(-1,u,o,s),u},w.prototype.zu=function(u,o,s,n){var l=-1;l==-1&&(this.Qe==-1&&(this.Qe=this.Pr(-1)),l=this.Qe);var c=this.ob.o;if(l==-1||c[7*l]==-1)return s=this.ob.Ll([-1,-1,-1,s,this.gl(),-1,-1]),(c=this.ob.o)[7*l]=s,this.vp(-1,s,l,c),s;if(n){n=o!=-1?this.Zn.compare(this,s,o):-1;var d=u!=-1?this.Zn.compare(this,s,u):1}else n=-1,d=1;if(n==0||d==0)return c[7*l+3]=n==0?o:u,-1;for((o!=-1&&u!=-1?this.Tm>h.O.bB(this.Tm)>>1:o!=-1)?u=o:n=d,o=!0;;){if(0>n){if((d=c[7*u])==-1){n=u,s=this.ob.Ll([-1,-1,u,s,this.gl(),-1,-1]),(c=this.ob.o)[7*u]=s;break}u=d}else{if((d=c[7*u+1])==-1){n=c[7*u+6],s=this.ob.Ll([-1,-1,u,s,this.gl(),-1,-1]),(c=this.ob.o)[7*u+1]=s;break}u=d}o&&(n*=-1,o=!1)}return this.oy(s,c),c[7*s+2]===-1&&(c[7*l]=s),this.vp(n,s,l,c),s},w.prototype.FF=function(){return this.iR(this.Qe)},w.prototype.vd=function(u,o){o=o==-1?this.Qe:o,this.Rv?this.LP(u,o):this.iY(u,o)},w.prototype.search=function(u,o){for(o=this.sv(o);o!=-1;){var s=this.Zn.compare(this,u,o);if(s==0)return o;o=0>s?this.ll(o):this.Xp(o)}return-1},w.prototype.IW=function(u){for(var o=this.sv(-1),s=-1;o!=-1;){var n=u.compare(this,o);if(n==0)return o;0>n?o=this.ll(o):(s=o,o=this.Xp(o))}return s},w.prototype.uJ=function(u){for(var o=this.sv(-1),s=-1;o!=-1;){var n=u.compare(this,o);if(n==0)return o;0>n?(s=o,o=this.ll(o)):o=this.Xp(o)}return s},w.prototype.ja=function(u){return this.ob.T(u,3)},w.prototype.ll=function(u){return this.ob.T(u,0)},w.prototype.Xp=function(u){return this.ob.T(u,1)},w.prototype.getParent=function(u){return this.ob.T(u,2)},w.prototype.lb=function(u){return this.ob.T(u,6)},w.prototype.we=function(u){return this.ob.T(u,5)},w.prototype.rc=function(u){return u==-1?this.kl(this.Qe):this.kl(u)},w.prototype.Fc=function(u){return u==-1?this.Zr(this.Qe):this.Zr(u)},w.prototype.ZR=function(u){return u==-1?this.bG(this.Qe):this.bG(u)},w.prototype.Sj=function(u,o){this.NB(u,o)},w.prototype.sv=function(u){return u==-1?this.YF(this.Qe):this.YF(u)},w.prototype.clear=function(){this.ob.mj(!1),this.Qe=-1},w.prototype.size=function(u){return u==-1?this.$F(this.Qe):this.$F(u)},w.prototype.KN=function(u,o){for(var s=o[7*u],n=o[7*u+1],l=o[7*u+4];s!=-1||n!=-1;){var c=s!=-1?o[7*s+4]:2147483647;if(n=n!=-1?o[7*n+4]:2147483647,l<=Math.min(c,n))break;c<=n?this.sJ(s,o):this.rJ(u,o),s=o[7*u],n=o[7*u+1]}},w.prototype.oy=function(u,o){if(this.Rv)for(var s=o[7*u+4],n=o[7*u+2];n!=-1&&o[7*n+4]>s;)o[7*n]==u?this.sJ(u,o):this.rJ(n,o),n=o[7*u+2]},w.prototype.rJ=function(u,o){var s=o[7*u+1];o[7*s+2]=o[7*u+2],o[7*u+2]=s;var n=o[7*s];o[7*u+1]=n,n!=-1&&(o[7*n+2]=u),o[7*s]=u,(n=o[7*s+2])!=-1&&(o[7*n]==u?o[7*n]=s:o[7*n+1]=s)},w.prototype.sJ=function(u,o){var s=o[7*u+2];o[7*u+2]=o[7*s+2],o[7*s+2]=u;var n=o[7*u+1];o[7*s]=n,n!=-1&&(o[7*n+2]=s),o[7*u+1]=s,(n=o[7*u+2])!=-1&&(o[7*n]===s?o[7*n]=u:o[7*n+1]=u)},w.prototype.Pk=function(u,o){this.ob.S(u,2,o)},w.prototype.TB=function(u,o){this.ob.S(u,0,o)},w.prototype.XB=function(u,o){this.ob.S(u,1,o)},w.prototype.WB=function(u,o){this.ob.S(u,5,o)},w.prototype.ex=function(u,o){this.ob.S(u,6,o)},w.prototype.XJ=function(u,o){this.ob.S(o,0,u)},w.prototype.rX=function(u){this.ob.S(u,4,0)},w.prototype.uX=function(u,o){this.ob.S(o,5,u)},w.prototype.YF=function(u){return u==-1?-1:this.ob.T(u,0)},w.prototype.kl=function(u){return u==-1?-1:this.ob.T(u,1)},w.prototype.Zr=function(u){return u==-1?-1:this.ob.T(u,2)},w.prototype.iR=function(u){return u==-1?-1:this.ob.T(u,3)},w.prototype.$F=function(u){return u==-1?0:this.ob.T(u,4)},w.prototype.bG=function(u){return this.ob.T(u,5)},w.prototype.Pw=function(){return this.ob.Ll([-1,-1,-1,void 0,this.gl(),-1,-1])},w.prototype.fl=function(u){u!=-1&&this.ob.jd(u)},w.prototype.gl=function(){return this.Tm=h.O.bB(this.Tm),1073741823&this.Tm},w.prototype.FD=function(u,o,s){var n=this.ob.o;if(s==-1||n[7*s]==-1)return u=this.ob.Ll([-1,-1,-1,u,this.gl(),-1,-1]),(n=this.ob.o)[7*s]=u,this.vp(-1,u,s,n),u;for(var l=s==-1?-1:n[7*s];;){var c=o==-1?1:this.Zn.compare(this,u,l);if(0>c){if((c=this.ll(l))==-1){o=l,u=this.ob.Ll([-1,-1,l,u,this.gl(),-1,-1]),(n=this.ob.o)[7*l]=u;break}l=c}else{if(o==1&&c==0)return n[7*s+3]=l,-1;if((c=n[7*l+1])==-1){o=n[7*l+6],u=this.ob.Ll([-1,-1,l,u,this.gl(),-1,-1]),(n=this.ob.o)[7*l+1]=u;break}l=c}}return this.oy(u,n),n[7*u+2]===-1&&(n[7*s]=u),this.vp(o,u,s,n),u},w.prototype.vp=function(u,o,s,n){if(u!=-1){var l=n[7*u+5];n[7*u+5]=o}else l=s==-1?-1:n[7*s+2];n[7*o+5]=l,l!=-1&&(n[7*l+6]=o),n[7*o+6]=u,u==(s==-1?-1:n[7*s+1])&&(n[7*s+1]=o),u==-1&&(n[7*s+2]=o),n[7*s+4]=(s==-1?0:n[7*s+4])+1},w.prototype.AB=function(u,o){var s=this.ob.o,n=s[7*u+5];u=s[7*u+6],n!=-1?s[7*n+6]=u:s[7*o+1]=u,u!=-1?s[7*u+5]=n:s[7*o+2]=n,s[7*o+4]=o===-1?-1:s[7*o+4]-1},w.prototype.iY=function(u,o){this.AB(u,o);var s=this.ll(u),n=this.Xp(u),l=this.getParent(u),c=u;if(s!=-1&&n!=-1){this.Tm=h.O.bB(this.Tm);var d=1073741823<this.Tm?this.lb(u):this.we(u),f=this.getParent(d)==u;this.ob.gC(u,d,0),this.ob.gC(u,d,1),this.ob.gC(u,d,2),l!=-1?this.ll(l)==u?this.TB(l,d):this.XB(l,d):this.XJ(d,o),f?(s==d?(this.TB(d,u),this.Pk(n,d)):n==d&&(this.XB(d,u),this.Pk(s,d)),this.Pk(u,d),l=d):(this.Pk(s,d),this.Pk(n,d),l=this.getParent(u),c=d),s=this.ll(u),n=this.Xp(u),s!=-1&&this.Pk(s,u),n!=-1&&this.Pk(n,u)}s=s!=-1?s:n,l==-1?this.XJ(s,o):this.ll(l)==c?this.TB(l,s):this.XB(l,s),s!=-1&&this.Pk(s,l),this.fl(u)},w.prototype.LP=function(u,o){var s=this.ob.o;s[7*u+4]=2147483647;var n=-1,l=-1,c=o===-1?-1:s[7*o],d=c==u;if(d&&(n=s[7*c],l=s[7*c+1],n==-1&&l==-1))return this.AB(c,o),this.fl(c),void(s[7*o]=-1);this.KN(u,s),(c=s[7*u+2])!=-1&&(s[7*c]==u?s[7*c]=-1:s[7*c+1]=-1),this.AB(u,o),this.fl(u),d&&(s[7*o]=n==-1||s[7*n+2]!=-1?l:n)},w.prototype.NB=function(u,o){this.ob.S(u,3,o)},w}();h.Yj=C}(G||(G={})),function(h){var C=function(){function w(u,o){u!==void 0&&this.K(u,o)}return w.prototype.K=function(u,o){this.oa=u,this.va=o,this.normalize()},w.prototype.isIntersecting=function(u){return this.oa<=u.oa?this.va>=u.oa:u.va>=this.oa},w.prototype.move=function(u){this.B()||(this.oa+=u,this.va+=u)},w.prototype.normalize=function(){if(!isNaN(this.oa)){if(this.oa>this.va){var u=this.oa;this.oa=this.va,this.va=u}isNaN(this.va)&&this.Oa()}},w.prototype.Oa=function(){this.va=this.oa=NaN},w.prototype.B=function(){return isNaN(this.oa)},w.prototype.Zb=function(u){typeof u=="number"?this.B()?this.va=this.oa=u:this.Lk(u):u.B()||(this.B()?(this.oa=u.oa,this.va=u.va):(this.oa>u.oa&&(this.oa=u.oa),this.va<u.va&&(this.va=u.va),this.oa>this.va&&this.Oa()))},w.prototype.Lk=function(u){u<this.oa?this.oa=u:u>this.va&&(this.va=u)},w.prototype.contains=function(u){return typeof u=="number"?u>=this.oa&&u<=this.va:u.oa>=this.oa&&u.va<=this.va},w.prototype.Ea=function(u){this.B()||u.B()?this.Oa():(this.oa<u.oa&&(this.oa=u.oa),this.va>u.va&&(this.va=u.va),this.oa>this.va&&this.Oa())},w.prototype.W=function(u){this.B()||(this.oa-=u,this.va+=u,this.va<this.oa&&this.Oa())},w.prototype.xr=function(){return this.B()?2220446049250313e-29:2220446049250313e-29*(Math.abs(this.oa)+Math.abs(this.va)+1)},w.prototype.KB=function(u,o){u>o?(this.oa=o,this.va=u):(this.oa=u,this.va=o)},w.prototype.It=function(u){return h.O.Rk(u,this.oa,this.va)},w.prototype.R=function(){return this.va-this.oa},w.prototype.sf=function(){return .5*(this.oa+this.va)},w.prototype.Nb=function(u){return u==this||u instanceof w&&(!(!this.B()||!u.B())||this.oa==u.oa&&this.va==u.va)},w.prototype.cc=function(){return h.O.uj(h.O.uj())},w}();h.Nc=C}(G||(G={})),function(h){var C=new h.Nc,w=new h.Nc,u=function(){this.ne=null,this.pb=-1,this.sb=new h.yb,this.qA=55555555,this.Tv=this.Vv=!1,this.Uf=new h.Nc,this.Uf.KB(0,0)};h.IY=u;var o=function(){function s(n,l,c){this.g=n,this.Hk=NaN,this.NH=this.Kq=0,this.OH=NaN,this.qa=l,this.Nq=10*l,this.PH=this.QH=NaN,this.rg=!1,this.Dm=this.gt=this.Lo=this.Xs=this.Ws=-1,this.gA=c,this.TA=new u,this.YH=new u,h.O.truncate(3*n.fd/2)}return s.prototype.mG=function(n,l,c,d){n.ne=d===null?null:d[c[5*l]],n.Tv=n.ne!=null,n.Tv||((d=c[5*l+2])!==-1&&this.g.mW(c[5*l],c[5*d],n.sb),n.ne=n.sb,n.Uf.KB(n.sb.sa,n.sb.pa),n.Uf.va+=this.qa,n.sb.rI(),n.Vv=n.sb.la==n.sb.na,n.Vv||(n.qA=(n.sb.pa-n.sb.sa)/(n.sb.la-n.sb.na)))},s.prototype.OO=function(n,l){var c=n.zr(l,this.qa,!0);return c!=0?c==2?this.Qy():this.xi():(n.Yp(Es),n.Tr(Hi),l.Yp(Fn),l.Tr(Co),Zt.ma(this.Kq,this.Hk),Es.qb(Fn)&&this.Hk==Es.y?0>Hi.compare(Co)?Zt.L(Hi):Zt.L(Co):Es.qb(Co)&&this.Hk==Es.y?0>Hi.compare(Fn)?Zt.L(Hi):Zt.L(Fn):Fn.qb(Hi)&&this.Hk==Fn.y?0>Es.compare(Co)?Zt.L(Es):Zt.L(Co):Hi.qb(Co)&&this.Hk==Hi.y&&(0>Es.compare(Fn)?Zt.L(Es):Zt.L(Fn)),n.Pe(Zt.y,Zt.x)<l.Pe(Zt.y,Zt.x)?-1:1)},s.prototype.MO=function(n,l){if(n.sb.na==l.sb.na&&n.sb.sa==l.sb.sa)return n.sb.la==l.sb.la&&n.sb.pa==l.sb.pa?this.gA?this.Qy():0:this.PE(n,l);if(n.sb.la==l.sb.la&&n.sb.pa==l.sb.pa)return this.OE(n,l);var c=this.OE(n,l);return n=this.PE(n,l),0>c&&0>n?-1:0<c&&0<n?1:this.xi()},s.prototype.IO=function(n,l){if(n.pa>l.pa){if(l.pa>l.sa&&l.la-l.na<2*this.qa&&n.vi(l.pa,l.la,this.qa))return this.xi()}else if((l.la-l.na)/(l.pa-l.sa)*(n.pa-n.sa)<this.Nq&&l.vi(n.pa,n.la,this.qa))return this.xi();return 1},s.prototype.JO=function(n,l){if(n.sa<l.sa){if(l.pa>l.sa&&l.la-l.na<2*this.qa&&n.vi(l.pa,l.la,this.qa))return this.xi()}else if((l.la-l.na)/(l.pa-l.sa)*(n.sa-n.pa)<this.Nq&&l.vi(n.sa,n.na,this.qa))return this.xi();return-1},s.prototype.KO=function(n,l){var c=new h.h;c.uc(l.wc(),l.ac()),c.ar(),c.normalize();var d=new h.h;d.uc(n.ac(),l.ac());var f=new h.h;f.uc(n.wc(),l.ac()),d=d.Qh(c),c=f.Qh(c),f=Math.abs(d);var m=Math.abs(c);if(f<m){if(f<this.Nq&&l.vi(n.sa,n.na,this.qa))return this.xi()}else if(m<this.Nq&&l.vi(n.pa,n.la,this.qa))return this.xi();return 0>d&&0>c?-1:0<d&&0<c?1:this.xi()},s.prototype.NE=function(n,l){return n.na==l.na&&n.sa==l.sa?this.IO(n,l):n.la==l.la&&n.pa==l.pa?this.JO(n,l):this.KO(n,l)},s.prototype.LO=function(n,l){return n.la==l.la&&n.pa==l.pa&&n.na==l.na&&n.sa==l.sa?this.gA?this.Qy():0:this.xi()},s.prototype.OE=function(n,l){var c=1;if(n.sb.na<l.sb.na){c=-1;var d=n;n=l,l=d}n=n.sb,d=l.sb;var f=n.sa-d.sa;l=l.qA*(n.na-d.na);var m=this.Nq;return f<l-m?-c:f>l+m?c:d.vi(n.sa,n.na,this.qa)?this.xi():f<l?-c:c},s.prototype.PE=function(n,l){var c=1;if(l.sb.la<n.sb.la){c=-1;var d=n;n=l,l=d}n=n.sb,d=l.sb;var f=n.pa-d.sa;l=l.qA*(n.la-d.na);var m=this.Nq;return f<l-m?-c:f>l+m?c:d.vi(n.pa,n.la,this.qa)?this.xi():f<l?-c:c},s.prototype.Qy=function(){return this.rg=!0,this.Ni=new h.Md(5,this.Lo,this.gt),-1},s.prototype.xi=function(){return this.rg=!0,this.gA?this.Ni=new h.Md(4,this.Lo,this.gt):this.gt=this.Lo=this.Xs=this.Ws=-1,-1},s.prototype.NO=function(n,l,c,d){if(this.rg)return-1;var f=this.OH==this.Hk&&this.NH==this.Kq;if(f&&n==this.Ws)var m=this.PH;else m=NaN,this.Ws=-1;return f&&l==this.Xs?f=this.QH:(f=NaN,this.Xs=-1),c.ne.ZI(C),d.ne.ZI(w),C.va<w.oa?-1:w.va<C.oa?1:(this.OH=this.Hk,this.NH=this.Kq,isNaN(m)&&(this.Ws=n,this.PH=m=n=c.ne.Pe(this.Hk,this.Kq)),isNaN(f)&&(this.Xs=l,this.QH=f=n=d.ne.Pe(this.Hk,this.Kq)),Math.abs(m-f)<=this.qa?this.OO(c.ne,d.ne):m<f?-1:m>f?1:0)},s.prototype.Kr=function(){this.rg=!1},s.prototype.rm=function(){return this.Ni},s.prototype.$J=function(n,l){this.Hk=n,this.Kq=l,this.gt=this.Lo=this.Xs=this.Ws=-1},s.prototype.compare=function(n,l,c){return this.rg?-1:(n=n.ja(c),this.Dm=c,this.RE(l,l,n,n))},s.prototype.RE=function(n,l,c,d){if(this.Lo==l)var f=this.TA;else this.Lo=l,f=this.TA,this.TA.pb=n,this.mG(f,l,this.g.td.o,this.g.We);if(m==null){this.gt=d;var m=this.YH;this.YH.pb=c,this.mG(m,d,this.g.td.o,this.g.We)}return f.Tv||m.Tv?this.NO(l,d,f,m):f.Uf.va<m.Uf.oa?-1:m.Uf.va<f.Uf.oa?1:(n=f.Vv?1:0,(n|=m.Vv?2:0)==0?this.MO(f,m):n==1?this.NE(f.sb,m.sb):n==2?-1*this.NE(m.sb,f.sb):this.LO(f.sb,m.sb))},s}();h.UC=o}(G||(G={})),function(h){var C=function(){function w(u,o){this.g=u,this.qa=o,this.rg=!1,this.Lo=-1,this.Uf=new h.Nc,this.Gq=new h.h,this.Gq.Rc(),this.ie=new h.yb,this.Dm=-1,this.BA=17976931348623157e292}return w.prototype.Kr=function(){this.rg=!1,this.BA=17976931348623157e292},w.prototype.Dh=function(u){this.Gq.L(u)},w.prototype.compare=function(u,o){return this.SE(o,u.ja(o))},w.prototype.SE=function(u,o){var s=this.g.bc(o)!=null;if(s||(this.g.ed(o,this.ie),this.Uf.KB(this.ie.sa,this.ie.pa)),s)throw h.i.fa("not implemented");if(this.Gq.x+this.qa<this.Uf.oa)return-1;if(this.Gq.x-this.qa>this.Uf.va)return 1;if(this.ie.na==this.ie.la)return this.Dm=u,this.rg=!0,0;this.ie.rI(),s=this.ie.ac(),(o=new h.h).uc(this.ie.wc(),s),o.ar();var n=new h.h;return n.uc(this.Gq,s),s=o.Qh(n),(s/=o.length())<10*-this.qa?-1:s>10*this.qa?1:this.ie.qs(this.Gq,this.qa)&&((o=Math.abs(s))<this.BA&&(this.Dm=u,this.BA=o),this.rg=!0,o<.25*this.qa)?0:0>s?-1:1},w}();h.aM=C}(G||(G={})),function(h){function C(u,o,s,n){s=new Float64Array(u.subarray(s,n)),u.set(s,o)}var w=function(){function u(o){this.Pb=this.pk=!1,this.o=null;var s=o;2>s&&(s=2),this.o=new Float64Array(s),this.size=o}return u.prototype.rotate=function(o,s,n){if(this.Pb)throw h.i.fa("invalid_call");if(s<o||s>n||o>n)throw h.i.N();o!=s&&n!=s&&(this.ni(o,s-o,1),this.ni(s,n-s,1),this.ni(o,n-o,1))},u.qf=function(o,s){var n=new u(o),l=n.o;if(2>o&&(o=2),s!==0)for(var c=0;c<o;c++)l[c]=s;return n},u.Bn=function(o){var s=new u(0);return s.o=new Float64Array(o.o),s.size=o.size,s},u.Lr=function(o,s){var n=new u(0);return n.size=o.size,n.size>s&&(n.size=s),2>(s=n.size)&&(s=2),n.o=new Float64Array(s),n.o.set(o.o.length<=s?o.o:o.o.subarray(0,s),0),n},u.prototype.Jb=function(o){0>=o||(this.o==null?this.o=new Float64Array(o):o<=this.o.length||(0<this.o.length?((o=new Float64Array(o)).set(this.o),this.o=o):this.o=new Float64Array(o)))},u.prototype.read=function(o){return this.o[o]},u.prototype.tc=function(o,s){s.x=this.o[o],s.y=this.o[o+1]},u.prototype.get=function(o){return this.o[o]},u.prototype.write=function(o,s){if(this.Pb)throw h.i.Hb();this.o[o]=s},u.prototype.set=function(o,s){if(this.Pb)throw h.i.Hb();this.o[o]=s},u.prototype.Tt=function(o,s){if(this.Pb)throw h.i.Hb();this.o[o]=s.x,this.o[o+1]=s.y},u.prototype.add=function(o){this.resize(this.size+1),this.o[this.size-1]=o},u.prototype.GB=function(o){return u.Lr(this,o)},u.prototype.eg=function(o){return this.read(o)},u.prototype.resize=function(o,s){if(s===void 0&&(s=0),this.pk)throw h.i.fa("invalid call. Attribute Stream is locked and cannot be resized.");if(o<=this.size){if(30<this.o.length&&5*o/4<this.o.length){var n=new Float64Array(this.o,0,o);this.o=n}}else{o>this.o.length&&(n=h.O.truncate(64>o?Math.max(2*o,4):5*o/4),(n=new Float64Array(n)).set(this.o),this.o=n),n=this.o;for(var l=this.size;l<o;l++)n[l]=s}this.size=o},u.prototype.Bh=function(o){if((this.o==null||o>this.o.length)&&this.resize(o),this.pk)throw h.i.fa("invalid call. Attribute Stream is locked and cannot be resized.");this.size=o},u.prototype.pr=function(o,s){this.write(o,s)},u.prototype.An=function(o,s,n){for(var l=this.size;s<l&&s<n;s++)o=h.O.uj(this.read(s));return o},u.prototype.Nb=function(o,s,n){if(o==null||!(o instanceof u))return!1;var l=this.size,c=o.size;if(n>l||n>c&&l!=c)return!1;for(n>l&&(n=l);s<n;s++)if(this.read(s)!=o.read(s))return!1;return!0},u.prototype.addRange=function(o,s,n,l,c){if(this.Pb)throw h.i.Hb();if(!l&&(1>c||n%c!=0))throw h.i.N();var d=this.size;if(this.resize(d+n),l)this.o.set(o.o.subarray(s,s+n),d);else{l=n;for(var f=0;f<n;f+=c){l-=c;for(var m=0;m<c;m++)this.o[d+f+m]=o.o[s+l+m]}}},u.prototype.Mn=function(o,s,n,l,c,d,f){if(this.Pb)throw h.i.Hb();if(!c&&(1>d||l%d!=0))throw h.i.N();var m=this.size-f;if(m<l&&this.resize(this.size+l-m),C(this.o,o+l,o,o+(f-o)),this.o==s.o&&o<n&&(n+=l),c)this.o.set(s.o.subarray(n,n+l),o);else for(c=l,f=0;f<l;f+=d)for(c-=d,m=0;m<d;m++)this.o[o+f+m]=s.o[n+c+m]},u.prototype.Iz=function(o,s,n,l,c,d){if(this.Pb)throw h.i.Hb();if(0>d&&(d=this.size),this.size+2*l>this.o.length?this.resize(this.size+2*l):this.size+=2*l,C(this.o,o+2*l,o,o+(d-o)),c)for(c=0;c<l;c++)d=s[n++],this.o[o++]=d.x,this.o[o++]=d.y;else{c=0;for(var f=l-1;c<l;++c)d=s[n+f],this.o[o++]=d.x,this.o[o++]=d.y,f--}},u.prototype.Ln=function(o,s,n,l){if(this.Pb)throw h.i.Hb();for(l-=o,C(this.o,o+l,o,o+l),l=0;l<n;l++)this.o[o+l]=s},u.prototype.vj=function(o,s,n){if(this.Pb)throw h.i.Hb();C(this.o,o+2,o,o+(n-o)),this.o[o]=s.x,this.o[o+1]=s.y},u.prototype.Ut=function(o,s,n,l,c,d){if(0>o||0>s||0>l||!c&&(0>=d||s%d!=0)||n.size<l+s)throw h.i.N();if(s!=0)if(this.size<s+o&&this.resize(s+o),n==this)this.Ar(o,s,l,c,d);else if(c)for(c=0;c<s;c++)this.o[o]=n.o[l],o++,l++;else if(l=l+s-d,d==1)for(c=0;c<s;c++)this.o[o]=n.o[l],o++,l--;else for(c=0,s=h.O.truncate(s/d);c<s;c++){for(var f=0;f<d;f++)this.o[o+f]=n.o[l+f];o+=d,l-=d}},u.prototype.En=function(o,s,n){if(this.Pb||o+s>this.size)throw h.i.Hb();0<n-(o+s)&&C(this.o,o,o+s,o+(n-(o+s))+s),this.size-=s},u.prototype.ni=function(o,s,n){if(this.Pb||1>n||s%n!=0)throw h.i.Hb();for(var l=s>>1,c=0;c<l;c+=n){s-=n;for(var d=0;d<n;d++){var f=this.o[o+c+d];this.o[o+c+d]=this.o[o+s+d],this.o[o+s+d]=f}}},u.prototype.Wj=function(o,s,n){if(0>s||0>n||0>s||n+s>this.size)throw h.i.N();for(var l=s;l<s+n;l++)this.o[l]=o},u.prototype.Ar=function(o,s,n,l,c){if(!(l&&o==n||(this.o.set(this.o.subarray(n,n+s),o),l)))for(n=o,o=o+s-c,l=0,s=h.O.truncate(s/2);l<s;l++){for(var d=0;d<c;d++){var f=this.o[n+d];this.o[n+d]=this.o[o+d],this.o[o+d]=f}n+=c,o-=c}},u.prototype.vC=function(o,s,n,l,c){if(0>o||0>s||0>l)throw h.i.N();if(s!=0)for(this.size<(s<<1)+o&&this.resize((s<<1)+o),c||(o+=s-1<<1),c=c?2:-2,s+=l;l<s;l++)this.o[o]=n[l].x,this.o[o+1]=n[l].y,o+=c},u.prototype.uC=function(o,s,n){if(0>o||0>s)throw h.i.N();if(s!=0){this.size<(s<<1)+o&&this.resize((s<<1)+o),s+=0;for(var l=0;l<s;l++)this.o[o]=n[l][0],this.o[o+1]=n[l][1],o+=2}},u.prototype.Vw=function(o,s,n,l,c){if(0>o||0>s||0>l||this.size<s+o)throw h.i.N();if(c)for(c=0;c<s;c++)n[l+c]=this.o[o+c];else for(l=l+s-1;o<s;o++)n[l]=this.o[o],l--},u.prototype.uB=function(o,s,n){if(0>o||0>s||this.size<(s>>1)+o)throw h.i.N();if(s!=0){s=0+s;for(var l=0;l<s;l++)n[l][0]=this.o[o],n[l][1]=this.o[o+1],o+=2}},u.prototype.clear=function(o){o?this.resize(0):this.Bh(0)},u.prototype.ix=function(){this.pk=this.Pb=!0},u.prototype.Vd=function(o,s,n){Array.prototype.sort.call(this.o.subarray(o,s),n)},u.prototype.Tp=function(){return 1},u}();h.be=w}(G||(G={})),function(h){function C(u,o,s,n){s=new Int32Array(u.subarray(s,n)),u.set(s,o)}h.rY=function(){this.random=1973};var w=function(){function u(o){this.Pb=this.pk=!1,this.o=null;var s=o;2>s&&(s=2),this.o=new Int32Array(s),this.size=o}return u.prototype.rotate=function(o,s,n){if(this.Pb)throw h.i.fa("invalid_call");if(s<o||s>n||o>n)throw h.i.N();o!=s&&n!=s&&(this.ni(o,s-o,1),this.ni(s,n-s,1),this.ni(o,n-o,1))},u.qf=function(o,s){var n=new u(o),l=n.o;if(2>o&&(o=2),s!==0)for(var c=0;c<o;c++)l[c]=s;return n},u.Bn=function(o){var s=new u(0);return s.o=new Int32Array(o.o),s.size=o.size,s},u.Lr=function(o,s){var n=new u(0);return n.size=o.size,n.size>s&&(n.size=s),2>(s=n.size)&&(s=2),n.o=new Int32Array(s),n.o.set(o.o.length<=s?o.o:o.o.subarray(0,s),0),n},u.prototype.Jb=function(o){0>=o||(this.o==null?this.o=new Int32Array(o):o<=this.o.length||(0<this.o.length?((o=new Int32Array(o)).set(this.o),this.o=o):this.o=new Int32Array(o)))},u.prototype.read=function(o){return this.o[o]},u.prototype.tc=function(o,s){s.x=this.o[o],s.y=this.o[o+1]},u.prototype.get=function(o){return this.o[o]},u.prototype.write=function(o,s){if(this.Pb)throw h.i.Hb();this.o[o]=s},u.prototype.set=function(o,s){if(this.Pb)throw h.i.Hb();this.o[o]=s},u.prototype.Tt=function(o,s){if(this.Pb)throw h.i.Hb();this.o[o]=s.x,this.o[o+1]=s.y},u.prototype.add=function(o){this.resize(this.size+1),this.o[this.size-1]=o},u.prototype.GB=function(o){return u.Lr(this,o)},u.prototype.eg=function(o){return this.read(o)},u.prototype.resize=function(o,s){if(s===void 0&&(s=0),this.pk)throw h.i.fa("invalid call. Attribute Stream is locked and cannot be resized.");if(o<=this.size){if(30<this.o.length&&5*o/4<this.o.length){var n=new Int32Array(this.o,0,o);this.o=n}}else{o>this.o.length&&(n=h.O.truncate(64>o?Math.max(2*o,4):5*o/4),(n=new Int32Array(n)).set(this.o),this.o=n),n=this.o;for(var l=this.size;l<o;l++)n[l]=s}this.size=o},u.prototype.Bh=function(o){if((this.o==null||o>this.o.length)&&this.resize(o),this.pk)throw h.i.fa("invalid call. Attribute Stream is locked and cannot be resized.");this.size=o},u.prototype.pr=function(o,s){this.write(o,s)},u.prototype.An=function(o,s,n){for(var l=this.size;s<l&&s<n;s++)o=h.O.Th(this.read(s),o);return o},u.prototype.Nb=function(o,s,n){if(o==null||!(o instanceof u))return!1;var l=this.size,c=o.size;if(n>l||n>c&&l!=c)return!1;for(n>l&&(n=l);s<n;s++)if(this.read(s)!=o.read(s))return!1;return!0},u.prototype.addRange=function(o,s,n,l,c){if(this.Pb)throw h.i.Hb();if(!l&&(1>c||n%c!=0))throw h.i.N();var d=this.size;if(this.resize(d+n),l)this.o.set(o.o.subarray(s,s+n),d);else{l=n;for(var f=0;f<n;f+=c){l-=c;for(var m=0;m<c;m++)this.o[d+f+m]=o.o[s+l+m]}}},u.prototype.Mn=function(o,s,n,l,c,d,f){if(this.Pb)throw h.i.Hb();if(!c&&(1>d||l%d!=0))throw h.i.N();if(C(this.o,o+l,o,o+(f-o)),this.o==s.o&&o<n&&(n+=l),c)this.o.set(s.o.subarray(n,n+l),o);else for(c=l,f=0;f<l;f+=d){c-=d;for(var m=0;m<d;m++)this.o[o+f+m]=s.o[n+c+m]}},u.prototype.Iz=function(o,s,n,l,c,d){if(this.Pb)throw h.i.Hb();if(0>d&&(d=this.size),this.size+2*l>this.o.length?this.resize(this.size+2*l):this.size+=2*l,C(this.o,o+2*l,o,o+(d-o)),c)for(c=0;c<l;c++)d=s[n++],this.o[o++]=d.x,this.o[o++]=d.y;else{c=0;for(var f=l-1;c<l;++c)d=s[n+f],this.o[o++]=d.x,this.o[o++]=d.y,f--}},u.prototype.Ln=function(o,s,n,l){if(this.Pb)throw h.i.Hb();for(l-=o,C(this.o,o+l,o,o+l),l=0;l<n;l++)this.o[o+l]=s},u.prototype.vj=function(o,s,n){if(this.Pb)throw h.i.Hb();C(this.o,o+2,o,o+(n-o)),this.o[o]=s.x,this.o[o+1]=s.y},u.prototype.Ut=function(o,s,n,l,c,d){if(0>o||0>s||0>l||!c&&(0>=d||s%d!=0)||n.size<l+s)throw h.i.N();if(s!=0)if(this.size<s+o&&this.resize(s+o),n==this)this.Ar(o,s,l,c,d);else if(c)for(c=0;c<s;c++)this.o[o]=n.o[l],o++,l++;else if(l=l+s-d,d==1)for(c=0;c<s;c++)this.o[o]=n.o[l],o++,l--;else for(c=0,s=h.O.truncate(s/d);c<s;c++){for(var f=0;f<d;f++)this.o[o+f]=n.o[l+f];o+=d,l-=d}},u.prototype.En=function(o,s,n){if(this.Pb||o+s>this.size)throw h.i.Hb();0<n-(o+s)&&C(this.o,o,o+s,o+(n-(o+s))+s),this.size-=s},u.prototype.ni=function(o,s,n){if(this.Pb||1>n||s%n!=0)throw h.i.Hb();for(var l=s>>1,c=0;c<l;c+=n){s-=n;for(var d=0;d<n;d++){var f=this.o[o+c+d];this.o[o+c+d]=this.o[o+s+d],this.o[o+s+d]=f}}},u.prototype.Wj=function(o,s,n){if(0>s||0>n||0>s||n+s>this.size)throw h.i.N();for(var l=s;l<s+n;l++)this.o[l]=o},u.prototype.Ar=function(o,s,n,l,c){if(!(l&&o==n||(this.o.set(this.o.subarray(n,n+s),o),l)))for(n=o,o=o+s-c,l=0,s=h.O.truncate(s/2);l<s;l++){for(var d=0;d<c;d++){var f=this.o[n+d];this.o[n+d]=this.o[o+d],this.o[o+d]=f}n+=c,o-=c}},u.prototype.vC=function(o,s,n,l,c){if(0>o||0>s||0>l)throw h.i.N();if(s!=0)for(this.size<(s<<1)+o&&this.resize((s<<1)+o),c||(o+=s-1<<1),c=c?2:-2,s+=l;l<s;l++)this.o[o]=n[l].x,this.o[o+1]=n[l].y,o+=c},u.prototype.Vw=function(o,s,n,l,c){if(0>o||0>s||0>l||this.size<s+o)throw h.i.N();if(c)for(c=0;c<s;c++)n[l+c]=this.o[o+c];else for(l=l+s-1;o<s;o++)n[l]=this.o[o],l--},u.prototype.clear=function(o){o?this.resize(0):this.Bh(0)},u.prototype.ix=function(){this.pk=this.Pb=!0},u.prototype.Vd=function(o,s,n){10>s-o?u.rG(this.o,o,s,n):u.qB(this.o,o,s-1,n)},u.prototype.Tp=function(){return 2},u.prototype.Fc=function(){return this.o[this.size-1]},u.prototype.If=function(){this.resize(this.size-1)},u.prototype.bX=function(o){this.o[this.size-1]=o},u.prototype.SV=function(o){o<this.size-1&&(this.o[o]=this.o[this.size-1]),this.resize(this.size-1)},u.prototype.lF=function(o){for(var s=0,n=this.size;s<n;s++)if(this.o[s]==o)return s;return-1},u.prototype.hG=function(o){return 0<=this.lF(o)},u.rG=function(o,s,n,l){for(var c=s;c<n;c++){for(var d=o[c],f=c-1;f>=s&&0<l(o[f],d);)o[f+1]=o[f],f--;o[f+1]=d}},u.tx=function(o,s,n){var l=o[n];o[n]=o[s],o[s]=l},u.qB=function(o,s,n,l){if(!(s>=n))for(;;){if(9>n-s){u.rG(o,s,n+1,l);break}var c=o[s];u.tx(o,s,n);for(var d=s,f=s;f<n;f++)0>=l(o[f],c)&&(u.tx(o,d,f),d+=1);u.tx(o,d,n),d-s<n-d?(u.qB(o,s,d-1,l),s=d+1):(u.qB(o,d+1,n,l),n=d-1)}},u}();h.ia=w}(G||(G={})),function(h){function C(u,o,s,n){s=new Int8Array(u.subarray(s,n)),u.set(s,o)}var w=function(){function u(o){this.o=null;var s=o;2>s&&(s=2),this.o=new Int8Array(s),this.size=o}return u.prototype.rotate=function(o,s,n){if(this.Pb)throw h.i.fa("invalid_call");if(s<o||s>n||o>n)throw h.i.N();o!=s&&n!=s&&(this.ni(o,s-o,1),this.ni(s,n-s,1),this.ni(o,n-o,1))},u.qf=function(o,s){var n=new u(o),l=n.o;if(2>o&&(o=2),s!==0)for(var c=0;c<o;c++)l[c]=s;return n},u.Bn=function(o){var s=new u(0);return s.o=new Int8Array(o.o),s.size=o.size,s},u.Lr=function(o,s){var n=new u(0);return n.size=o.size,n.size>s&&(n.size=s),2>(s=n.size)&&(s=2),n.o=new Int8Array(s),n.o.set(o.o.length<=s?o.o:o.o.subarray(0,s),0),n},u.prototype.Jb=function(o){0>=o||(this.o==null?this.o=new Int8Array(o):o<=this.o.length||(0<this.o.length?((o=new Int8Array(o)).set(this.o),this.o=o):this.o=new Int8Array(o)))},u.prototype.read=function(o){return this.o[o]},u.prototype.tc=function(o,s){s.x=this.o[o],s.y=this.o[o+1]},u.prototype.get=function(o){return this.o[o]},u.prototype.write=function(o,s){if(this.Pb)throw h.i.Hb();this.o[o]=s},u.prototype.set=function(o,s){if(this.Pb)throw h.i.Hb();this.o[o]=s},u.prototype.Tt=function(o,s){if(this.Pb)throw h.i.Hb();this.o[o]=s.x,this.o[o+1]=s.y},u.prototype.add=function(o){this.resize(this.size+1),this.o[this.size-1]=o},u.prototype.GB=function(o){return u.Lr(this,o)},u.prototype.eg=function(o){return this.read(o)},u.prototype.resize=function(o,s){if(s===void 0&&(s=0),this.pk)throw h.i.fa("invalid call. Attribute Stream is locked and cannot be resized.");if(o<=this.size){if(30<this.o.length&&5*o/4<this.o.length){var n=new Int8Array(this.o,0,o);this.o=n}}else{o>this.o.length&&(n=h.O.truncate(64>o?Math.max(2*o,4):5*o/4),(n=new Int8Array(n)).set(this.o),this.o=n),n=this.o;for(var l=this.size;l<o;l++)n[l]=s}this.size=o},u.prototype.Bh=function(o){if((this.o==null||o>this.o.length)&&this.resize(o),this.pk)throw h.i.fa("invalid call. Attribute Stream is locked and cannot be resized.");this.size=o},u.prototype.pr=function(o,s){this.write(o,s)},u.prototype.An=function(o,s,n){for(var l=this.size;s<l&&s<n;s++)o=h.O.Th(this.read(s),o);return o},u.prototype.Nb=function(o,s,n){if(o==null||!(o instanceof u))return!1;var l=this.size,c=o.size;if(n>l||n>c&&l!=c)return!1;for(n>l&&(n=l);s<n;s++)if(this.read(s)!=o.read(s))return!1;return!0},u.prototype.addRange=function(o,s,n,l,c){if(this.Pb)throw h.i.Hb();if(!l&&(1>c||n%c!=0))throw h.i.N();var d=this.size;if(this.resize(d+n),l)this.o.set(o.o.subarray(s,s+n),d);else{l=n;for(var f=0;f<n;f+=c){l-=c;for(var m=0;m<c;m++)this.o[d+f+m]=o.o[s+l+m]}}},u.prototype.Mn=function(o,s,n,l,c,d,f){if(this.Pb)throw h.i.Hb();if(!c&&(1>d||l%d!=0))throw h.i.N();if(C(this.o,o+l,o,o+(f-o)),this.o==s.o&&o<n&&(n+=l),c)this.o.set(s.o.subarray(n,n+l),o);else for(c=l,f=0;f<l;f+=d){c-=d;for(var m=0;m<d;m++)this.o[o+f+m]=s.o[n+c+m]}},u.prototype.Ln=function(o,s,n,l){if(this.Pb)throw h.i.Hb();for(l-=o,C(this.o,o+l,o,o+l),l=0;l<n;l++)this.o[o+l]=s},u.prototype.Iz=function(o,s,n,l,c,d){if(this.Pb)throw h.i.Hb();if(0>d&&(d=this.size),this.size+2*l>this.o.length?this.resize(this.size+2*l):this.size+=2*l,C(this.o,o+2*l,o,o+(d-o)),c)for(c=0;c<l;c++)d=s[n++],this.o[o++]=d.x,this.o[o++]=d.y;else{c=0;for(var f=l-1;c<l;++c)d=s[n+f],this.o[o++]=d.x,this.o[o++]=d.y,f--}},u.prototype.vj=function(o,s,n){if(this.Pb)throw h.i.Hb();C(this.o,o+2,o,o+(n-o)),this.o[o]=s.x,this.o[o+1]=s.y},u.prototype.Ut=function(o,s,n,l,c,d){if(0>o||0>s||0>l||!c&&(0>=d||s%d!=0)||n.size<l+s)throw h.i.N();if(s!=0)if(this.size<s+o&&this.resize(s+o),n==this)this.Ar(o,s,l,c,d);else if(c)for(c=0;c<s;c++)this.o[o]=n.o[l],o++,l++;else if(l=l+s-d,d==1)for(c=0;c<s;c++)this.o[o]=n.o[l],o++,l--;else for(c=0,s=h.O.truncate(s/d);c<s;c++){for(var f=0;f<d;f++)this.o[o+f]=n.o[l+f];o+=d,l-=d}},u.prototype.En=function(o,s,n){if(this.Pb||o+s>this.size)throw h.i.Hb();0<n-(o+s)&&C(this.o,o,o+s,o+(n-(o+s))+s),this.size-=s},u.prototype.ni=function(o,s,n){if(this.Pb||1>n||s%n!=0)throw h.i.Hb();for(var l=s>>1,c=0;c<l;c+=n){s-=n;for(var d=0;d<n;d++){var f=this.o[o+c+d];this.o[o+c+d]=this.o[o+s+d],this.o[o+s+d]=f}}},u.prototype.Wj=function(o,s,n){if(0>s||0>n||0>s||n+s>this.size)throw h.i.N();for(var l=s;l<s+n;l++)this.o[l]=o},u.prototype.Ar=function(o,s,n,l,c){if(!(l&&o==n||(this.o.set(this.o.subarray(n,n+s),o),l)))for(n=o,o=o+s-c,l=0,s=h.O.truncate(s/2);l<s;l++){for(var d=0;d<c;d++){var f=this.o[n+d];this.o[n+d]=this.o[o+d],this.o[o+d]=f}n+=c,o-=c}},u.prototype.vC=function(o,s,n,l,c){if(0>o||0>s||0>l)throw h.i.N();if(s!=0)for(this.size<(s<<1)+o&&this.resize((s<<1)+o),c||(o+=s-1<<1),c=c?2:-2,s+=l;l<s;l++)this.o[o]=n[l].x,this.o[o+1]=n[l].y,o+=c},u.prototype.Vw=function(o,s,n,l,c){if(0>o||0>s||0>l||this.size<s+o)throw h.i.N();if(c)for(c=0;c<s;c++)n[l+c]=this.o[o+c];else for(l=l+s-1;o<s;o++)n[l]=this.o[o],l--},u.prototype.clear=function(o){o?this.resize(0):this.Bh(0)},u.prototype.ix=function(){this.pk=this.Pb=!0},u.prototype.Vd=function(o,s,n){s=this.o.subarray(o,s),Array.prototype.sort.call(s,n),this.o.set(s,o)},u.prototype.zJ=function(o,s){if(this.Pb)throw h.i.fa("invalid call. Attribute Stream is read only.");this.o[o]|=s},u.prototype.KE=function(o,s){if(this.Pb)throw h.i.fa("invalid call. Attribute Stream is read only.");this.o[o]&=~s},u.prototype.Tp=function(){return 1},u}();h.pn=w}(G||(G={})),function(h){h.Yc=function(){function C(){}return C.Mr=function(w,u){return h.pn.qf(w,u)},C.Dn=function(w,u){return h.be.qf(w,u)},C.pP=function(w,u,o){switch(w){case 1:w=h.be.qf(u,o);break;case 2:w=h.ia.qf(u,o);break;case 4:w=h.pn.qf(u,o);break;default:throw h.i.Qa()}return w},C.YE=function(w,u){return C.pP(h.ra.Tp(w),u*h.ra.Va(w),h.ra.se(w))},C.Oh=function(w,u){return h.ia.qf(w,u)},C.qI=function(w){var u,o=[];for(u=0;u<w;u++)o.push(null);return o},C}()}(G||(G={})),function(h){h.ga=function(C){C===void 0&&(C=0),this.u=C}}(G||(G={})),function(h){h.NL=function(){function C(){}return C.bind=function(w){h.Sc=w.PeDefs,h.pf=w.PeFactory,h.NC=w.PeVertcs,h.ej=w.PeCSTransformations,h.MC=w.PeGTTransformations,h.LL=w.PeGeogtran,h.KL=w.PeFactoryCodechange,h.LC=w.PeGCSExtent,h.Cg=w.PePCSInfo,h.ML=w.PeHorizon,h.JL=w.PeCoordsys,h.lp=w.PeGTlistExtended,h.lp.PE_GTLIST_OPTS_USE_DEFAULT=128,h.pf.initialize(null),h.Mx=w.PeGTlistExtendedEntry,h.pf.fromString(h.Sc.PE_TYPE_UNIT,'UNIT["Meter",1.0]')},C}(),h.pf=null,h.NC=null,h.JL=null,h.ML=null,h.Cg=null,h.lp=null,h.Mx=null,h.LC=null,h.KL=null,h.LL=null,h.Sc=null,h.MC=null,h.ej=null}(G||(G={})),function(h){var C=function(){function w(){}return w.Mb=function(u,o){return 0<=o?w.P(u):-w.P(u)},w.P=function(u){return 0>u?-u:u},w.ti=function(u){return 3552713678800501e-30>u},w.KC=function(u,o,s){return w.P(u-o)<=s*(1+(w.P(u)+w.P(o))/2)},w.Y=function(u,o){return w.KC(u,o,3552713678800501e-30)},w.FL=function(u){return 3552713678800501e-30>=w.P(u)},w.Cd=function(u){return w.FL(u)},w}();h.s=C,h.F=function(){function w(){}return w.gp=function(u,o){var s=0;return(u=C.P(u))+(o=C.P(o))!=0&&(u>o?(s=o/u,s=u*Math.sqrt(1+s*s)):(s=u/o,s=o*Math.sqrt(1+s*s))),s},w.Wq=function(u,o,s,n,l){for(var c=[0,0,0],d=[0,0,0],f=0;2>=f;f++)o[f]-=u[f],s[f]-=o[f];s=c[1]*d[2]-c[2]*d[1],o=c[2]*d[0]-c[0]*d[2],c=c[0]*d[1]-c[1]*d[0],u=-1*(s*u[0]+o*u[1]+c*u[2]),n[0]=s,n[1]=o,n[2]=c,n[3]=u,d=w.on(n),n[0]/=d,n[1]/=d,n[2]/=d,n[3]/=d,l!=0&&(d=C.Cd(c)?C.Cd(u)?C.Mb(1,o):-C.Mb(1,u):C.Mb(1,c),d*=C.Mb(1,l),n[0]*=d,n[1]*=d,n[2]*=d,n[3]*=d)},w.zx=function(u,o,s){s[0]=u[1]*o[2]-o[1]*u[2],s[1]=u[2]*o[0]-o[2]*u[0],s[2]=u[0]*o[1]-o[0]*u[1]},w.St=function(u,o){return u[0]*o[0]+u[1]*o[1]+u[2]*o[2]},w.on=function(u){return w.gp(w.gp(u[0],u[1]),u[2])},w.cl=function(u,o,s,n,l,c,d,f){u=w.n(u,o,s);var m=Math.cos(s);c.u=(u+l)*m*Math.cos(n),d.u=(u+l)*m*Math.sin(n),f.u=(u*(1-o)+l)*Math.sin(s)},w.jO=function(u,o,s,n,l,c,d){var f=w.gp(o,s),m=1*Math.sqrt(1-u),b=m/1;if(C.Y(f,0))c.u=0,l.u=C.Mb(1.570796326794897,n),d.u=C.P(n)-m;else{c.u=Math.atan2(s,o),s=Math.atan2(1*n,m*f),c=Math.cos(s);var x=Math.sin(s);o=m*u/(1-u),u*=1,s=Math.atan2(n+o*x*x*x,f-u*c*c*c),3.141592653589793<C.P(s)&&(s=C.Mb(3.141592653589793,s)-s),s=Math.atan(b*Math.tan(s)),x=Math.sin(s),c=Math.cos(s),l.u=Math.atan2(n+o*x*x*x,f-u*c*c*c),1.570796326794897<C.P(l.u)&&(l.u=C.Mb(3.141592653589793,l.u)-l.u),s=Math.atan(b*Math.tan(l.u)),x=Math.sin(s),c=Math.cos(s),d.u=(n-m*x)*Math.sin(l.u)+(f-1*c)*Math.cos(l.u)}},w.n=function(u,o,s){return s=Math.sin(s),u/Math.sqrt(1-o*s*s)},w.ot=function(u,o){return Math.atan2(Math.sin(o)*(1-u),Math.cos(o))},w.Qj=function(u,o){return Math.atan2(Math.sin(o),Math.cos(o)*(1-u))},w.Rq=function(u,o){if(C.ti(u)||o==0||C.Y(C.P(o),1.570796326794897))return o;if(.006884661117170036>u){var s=Math.sqrt(1-u),n=(1-s)/(1+s),l=n*n,c=n*l,d=n*c,f=n*d,m=n*f,b=n*m,x=1.572916666666667*c-3.2578125*f+4.295068359375*b;u=2.142578125*d-6.071484375*m,s=3.129296875*f-11.249837239583334*b;var $=4.775276692708333*m,E=7.958636765252976*b,O=Math.cos(2*o);return o+Math.sin(2*o)*(1.5*n-.84375*c+.525390625*f-.2688395182291667*b-x+s-E+O*(2*(1.3125*l-1.71875*d+1.650146484375*m)-4*u+6*$+O*(4*x-12*s+24*E+O*(8*u-32*$+O*(16*s-80*E+O*(32*$+64*O*E))))))}for(s=1-u,n=u/2,c=(l=C.P(o))*w.Zu(u)/(1.570796326794897*s),d=9999,m=l,l=0;1e-16<d&&50>l;l++)b=w.w(u,m),f=m-(x=(f=(w.kG(m,u)-n*Math.sin(2*m)/b)/s-c)/(b=1/(b*b*b))),d=C.P(x),m=f;return 0<=o?m:-m},w.qW=function(u,o){return C.ti(o)?u:u*w.Zu(o)/1.570796326794897},w.ba=function(u){return 0>(u=w.pF(u,6.283185307179586))?u+6.283185307179586:3.141592653589793>C.P(u)||C.Y(C.P(u),3.141592653589793)?u:u-6.283185307179586},w.pF=function(u,o){return u-Math.floor(u/o)*o},w.Ah=function(u,o){if(.006884661117170036>o){var s=(o=(1-(o=Math.sqrt(1-o)))/(1+o))*o,n=s*s;return u/(1+o)*(1+.25*s+.015625*n+.00390625*s*n)*1.570796326794897}return u*w.Zu(o)},w.Vq=function(u,o){var s=C.Mb(1,Math.sin(o));return o=1.570796326794897>=(o=C.P(w.pF(o,3.141592653589793)))?o:3.141592653589793-o,(C.Y(o,1.570796326794897)?o:Math.atan(Math.sqrt(1-u)*Math.tan(o)))*s},w.q=function(u,o,s){if(.006884661117170036>o){var n=(o=(1-(o=Math.sqrt(1-o)))/(1+o))*o,l=o*n,c=o*l,d=o*c,f=o*d,m=o*f,b=-.7291666666666666*l+.2278645833333333*d+.03987630208333334*m,x=.615234375*c-.21533203125*f,$=-.54140625*d+.20302734375*m,E=.48876953125*f,O=-.4488699776785715*m,R=Math.cos(2*s);return u/(1+o)*((1+.25*n+.015625*c+.00390625*f)*s+Math.sin(2*s)*(-1.5*o+.1875*l+.0234375*d+.00732421875*m-b+$-O+R*(2*(.9375*n-.234375*c-.03662109375*f)-4*x+6*E+R*(4*b-12*$+24*O+R*(8*x-32*E+R*(16*$-80*O+R*(32*E+64*R*O)))))))}return u*(w.kG(s,o)-.5*o*Math.sin(2*s)/w.w(o,s))},w.w=function(u,o){return o=Math.sin(o),Math.sqrt(1-u*o*o)},w.Zu=function(u){return C.KC(u,1,2220446049250313e-31)?1:1>u?w.Xw(0,1-u)-u/3*w.Uw(0,1-u):NaN},w.kG=function(u,o){var s=C.Mb(1,u);u=C.P(u);var n=Math.floor(u/1.570796326794897);if(1<o)o=u==0?0:NaN;else if(C.Cd(n))o=(u=w.sin(u))*w.Xw(1-u*u,1-o*u*u)-o/3*u*u*u*w.Uw(1-u*u,1-o*u*u);else{var l=h.O.truncate(n%2),c=w.Zu(o);0<l?(u=1.570796326794897*(n+1)-u,o=c*(n+1)-(o=(u=Math.sin(u))*w.Xw(1-u*u,1-o*u*u)-o/3*u*u*u*w.Uw(1-u*u,1-o*u*u))):(u-=1.570796326794897*n,o=c*n+(o=(u=Math.sin(u))*w.Xw(1-u*u,1-o*u*u)-o/3*u*u*u*w.Uw(1-u*u,1-o*u*u)))}return o*s},w.sin=function(u){u=w.ba(u);var o=C.Mb(1,u);return u=C.P(u),C.Y(u,3.141592653589793)?0:C.Y(u,1.570796326794897)?1*o:Math.sin(u)*o},w.Uw=function(u,o){var s,n,l,c,d=u,f=o,m=1;for(o=0,u=1;n=((s=.2*(d+f+3*m))-d)/s,l=(s-f)/s,c=(s-m)/s,!(1e-4>C.P(n)&&1e-4>C.P(l)&&1e-4>C.P(c));)c=Math.sqrt(f),o+=u/((s=Math.sqrt(m))*(m+(c=Math.sqrt(d)*(c+s)+c*s))),u*=.25,d=.25*(d+c),f=.25*(f+c),m=.25*(m+c);return f=(d=n*l)-(m=c*c),3*o+u*(1+(m=d-6*m)*(.10227272727272728*m-.2142857142857143-.1730769230769231*c*(n=m+f+f))+c*(.1666666666666667*n+c*(-.4090909090909091*f+.1153846153846154*c*d)))/(s*Math.sqrt(s))},w.Xw=function(u,o){for(var s,n,l,c,d=1;n=2-((s=(u+o+d)/3)+u)/s,l=2-(s+o)/s,c=2-(s+d)/s,!(1e-4>C.P(n)&&1e-4>C.P(l)&&1e-4>C.P(c));d=.25*(d+s))s=Math.sqrt(o),n=Math.sqrt(d),u=.25*(u+(s=Math.sqrt(u)*(s+n)+s*n)),o=.25*(o+s);return(1+(.04166666666666666*(u=n*l-c*c)-.1-.06818181818181818*(o=n*l*c))*u+.07142857142857142*o)/Math.sqrt(s)},w.Qw=function(u,o){if(C.ti(u)||o==0||C.Y(C.P(o),1.570796326794897))return o;if(.006884661117170036>u){var s=u*u,n=u*s,l=u*n,c=u*l,d=u*c,f=u*d,m=-(.02708333333333333*n+.03430059523809524*l+.03149181547619048*c+.02634359154541446*d+.02156896735835538*f),b=.007669890873015873*l+.01299603174603175*c+.0148051353064374*d+.01454454953803912*f,x=-(.002275545634920635*c+.004830845032667949*d+.006558395368616723*f),$=.0006957236677288761*d+.001775193002406544*f,E=-.000217324089394402*f,O=Math.cos(2*o);return o+Math.sin(2*o)*(-(.5*u+.2083333333333333*s+.09375*n+.04878472222222222*l+.02916666666666667*c+.01938905423280423*d+.01388255931712963*f)-m+x-E+O*(2*(.1041666666666667*s+.0875*n+.06050347222222222*l+.04151785714285714*c+.02958958540013228*d+.02203667534722222*f)-4*b+6*$+O*(4*m-12*x+24*E+O*(8*b-32*$+O*(16*x-80*E+O*(32*$+64*O*E))))))}return o==0||C.Y(C.P(o),1.570796326794897)?s=o:(l=(n=Math.sqrt(u))*Math.sin(o),s=Math.tan(.7853981633974483+o/2)*Math.pow((1-l)/(1+l),n/2),s=2*Math.atan(s)-1.570796326794897),s},w.yO=function(u,o){if(C.ti(u)||o==0||C.Y(C.P(o),1.570796326794897))return o;if(.006884661117170036>u){var s=u*($=u*(x=u*(O=u*u))),n=u*(E=u*s),l=.05833333333333333*x+.07232142857142858*$+.05634300595238095*s+.0355325796406526*E+.020235546186067*n,c=.02653149801587302*$+.04379960317460317*s+.0429211791776896*E+.03255384637546096*n,d=.01294022817460318*s+.02668104344536636*E+.03155651254609588*n,f=.00659454790965208*E+.0163075268674227*n,m=.003463473736911237*n,b=Math.cos(2*o);return o+Math.sin(2*o)*(.5*u+.2083333333333333*O+.08333333333333333*x+.03611111111111111*$+.01875*s+.01195601851851852*E+.008863673941798942*n-l+d-m+b*(2*(.1458333333333333*O+.1208333333333333*x+.07039930555555556*$+.03616071428571429*s+.01839451058201058*E+.01017113095238095*n)-4*c+6*f+b*(4*l-12*d+24*m+b*(8*c-32*f+b*(16*d-80*m+b*(32*f+64*b*m))))))}var x=Math.sqrt(u),$=x/2,E=Math.tan(.7853981633974483+o/2);u=0,l=1;for(var O=o;l!=0;O=n)s=x*Math.sin(O),n=E*Math.pow((1+s)/(1-s),$),n=2*Math.atan(n)-1.570796326794897,u++,(C.Y(n,O)||3e4<u)&&(l=0);return O},w}()}(G||(G={})),function(h){var C=function(){function w(u){this.ul=this.Us=null,this.Iv=!1,this.GA=this.HA=0,this.HH=new h.h,this.XH=new h.h,this.KA=!1,this.vq=new h.l,this.wH=this.sw=0,this.tw=null,this.zl=!1,this.Eo=null,this.bA=0,this.Ue=u,this.As=h.zb.xv(this.Ue,0,!0),this.HH.Rc(),this.XH.Rc(),this.RH=NaN;var o=u.getCode();0<o?(this.Kk=o,h.pf.getCode(u)):this.Kk=h.pf.getCode(u),0>this.Kk&&(this.Kk=0);var s=this.Ue.getType();if(this.jH=s==h.Sc.PE_TYPE_PROJCS?2:1,s==h.Sc.PE_TYPE_PROJCS&&!u.loadConstants())throw h.i.N("PeProjcs.loadConstants failed");o=s==h.Sc.PE_TYPE_GEOGCS?this.Ue:this.Ue.getGeogcs(),s!=h.Sc.PE_TYPE_GEOGCS&&h.pf.getCode(o),this.Eo=u.getUnit(),this.RH=o.getPrimem().getLongitude(),this.wH=u=o.getUnit().getUnitFactor(),u=Math.PI/(180*u),1e-10>Math.abs(u-1)&&(u=1),this.GA=u,s&h.Sc.PE_TYPE_PROJCS?(o=this.Ue,this.HA=1/o.getUnit().getUnitFactor(),this.sw=.001/this.Ue.getUnit().getUnitFactor(),this.tw=h.Cg.generate(o,h.Cg.PE_PCSINFO_OPTION_NONE),this.zl=this.tw.isPannableRectangle(),this.bA=h.zb.qN(this.tw.getCentralMeridian(),this.GA)):(this.KA=this.zl=!0,this.HA=0,s=1/o.getUnit().getUnitFactor(),this.sw=.001/o.getDatum().getSpheroid().getAxis()*s,this.bA=0),this.zl&&(this.xx(),this.DK(),this.nY(),this.CK(),this.lY(),this.mY())}return w.prototype.$r=function(){return this.Kk},w.prototype.kk=function(){return this.tw},w.Py=function(u,o){return u==o||u!=null&&o!=null&&u.Kk==0&&o.Kk==0&&u.As===o.As},w.prototype.Wc=function(){return this.zl},w.prototype.gh=function(u){u.K(this.so)},w.prototype.pv=function(){return this.so.v},w.prototype.ov=function(){return this.so.C},w.prototype.GR=function(u){u.K(this.uw)},w.prototype.lY=function(){var u=this.Ue.getType();if(u==h.Sc.PE_TYPE_PROJCS){u=this.Ue;var o=this.kk().getCentralMeridian(),s=u.getGeogcs();if(s==null)throw h.i.fa("internal error");o=[[o+(s=1/s.getUnit().getUnitFactor()*Math.PI),0]],h.ej.geogToProj(u,1,o),o=o[0][0],s=u.getParameters()[h.Sc.PE_PARM_X0].getValue();var n=this.ml();u=new h.l,n.A(u),o=(n=Math.abs(o-s))+s,s=-1*n+s,n=u.H,u=u.G;var l=new h.l;l.K(s,u,o,n),this.so==null&&(this.so=l)}else{if(u!=h.Sc.PE_TYPE_GEOGCS)throw h.i.fa("internal error");s=1/this.Ue.getUnit().getUnitFactor()*Math.PI,(u=new h.l).K(-s,-s/2,s,s/2),this.so==null&&(this.so=u)}},w.prototype.mY=function(){var u=this.Ue.getType();if(u==h.Sc.PE_TYPE_PROJCS){var o=this.Ue;if(u=this.kk().getCentralMeridian(),(o=o.getGeogcs())==null)throw h.i.fa("internal error");o=1/o.getUnit().getUnitFactor()*Math.PI;var s=this.Vr(),n=new h.l;s.A(n),(s=new h.l).K(u-o,n.G,u+o,n.H),this.uw==null&&(this.uw=s)}else{if(u!=h.Sc.PE_TYPE_GEOGCS)throw h.i.fa("internal error");o=1/this.Ue.getUnit().getUnitFactor()*Math.PI,(u=new h.l).K(-o,-o/2,o,o/2),this.uw==null&&(this.uw=u)}},w.prototype.bf=function(){return this.GA},w.prototype.pm=function(){return this.HA},w.prototype.Vr=function(){if(this.zl)return this.ul;var u=this.ul;return u??(this.xx(),this.ul)},w.prototype.Wr=function(){return this.zl?null:(this.ul!=null||this.xx(),this.YG)},w.prototype.xx=function(){if(this.Ue.getType()==h.Sc.PE_TYPE_PROJCS){var u=this.Ue,o=u.getGeogcs(),s=u.horizonGcsGenerate();if(s!=null){var n=s[0].getNump(),l=s[0].getKind();u=0<s[0].getInclusive();var c=this.bf(),d=90*c,f=360*c,m=370*c,b=180*c*h.Sc.PE_HORIZON_DELTA/Math.PI,x=new h.l,$=null;if(1<n){for(var E=1;E<n;E++)if(s[E].getKind()==h.Sc.PE_HORIZON_LINE){$==null&&($=new h.Ta);var O=s[E].getCoord();$.sx(O[0][0],O[0][1]),$.yj(O[1][0],O[1][1])}}if(l==h.Sc.PE_HORIZON_RECT)s=s[0].getCoord(),x.K(s[0][0],s[0][1]),x.Zb(s[1][0],s[1][1]),Math.abs(x.H-d)<1e-7*b&&(x.H=d),Math.abs(x.G+d)<1e-7*b&&(x.G=-d),x.R()>m&&(s=-400*c,x.K(s,x.G,s+5*f,x.H)),s=new h.Fh(x),this.ul==null&&(this.ul=s,this.Iv=u);else{if(m=new h.Da,f=this.kk().isGcsHorizonMultiOverlap(),x=h.gu.bF(o,h.hu.Integer64),f){for(m=new h.gL,b=h.Gh.local().V(m,x,null),E=0;E<n;E++)if(s[E].getKind()==h.Sc.PE_HORIZON_POLY){for(o=s[E].getSize(),c=s[E].getCoord(),l=[],d=0;d<o;d++)l[d]=h.h.construct(c[d][0],c[d][1]);s[E].getInclusive(),f&&((c=new h.Da).Yk(l,o-1),m.ZX(c),b.qe())}m=b.next()}else for(E=0;E<n;E++)if(s[E].getKind()==h.Sc.PE_HORIZON_POLY){for(o=s[E].getSize(),c=s[E].getCoord(),f=[],d=0;d<o;d++)f[d]=h.h.construct(c[d][0],c[d][1]);s[E].getInclusive(),m.Yk(f,o-1)}u?h.Xj.local().wn(m,x,1):h.kp.local().wn(m,x,1),h.dj.local().wn(m,x,1),this.ul==null&&(this.ul=m,this.Iv=u,this.YG=$)}}}},w.prototype.hv=function(){return this.zl||this.ul==null&&this.xx(),this.Iv},w.prototype.DK=function(){if(this.jH==2){var u=this.Ue.horizonPcsGenerate();if(u!=null){var o=u[0].getKind();u[0].getInclusive();var s=u[0].getNump(),n=!1;if(o==h.Sc.PE_HORIZON_RECT)u=u[0].getCoord(),(s=new h.l).K(u[0][0],u[0][1]),s.Zb(u[1][0],u[1][1]),u=new h.Fh(s);else{for(o=-1,n=0;n<s;n++)u[n].getKind()==h.Sc.PE_HORIZON_POLY&&(o=n);for(n=u[o].getSize()-1,u=u[o].getCoord(),s=[],o=0;o<n;o++)s[o]=h.h.construct(u[o][0],u[o][1]);u=o=new h.Da,o.Yk(s,n),n=!0}this.kk().isDensificationNeeded()&&(s=1e5*this.pm(),u=h.Xl.local().V(u,s,null)),n&&(n=new h.Fh,u.bn(n),u.Ke(),u.Qb(),u.qR(),h.Xj.local().wn(u,null,1)),this.Us==null&&(this.Us=u)}}},w.prototype.ml=function(){if(this.zl)return this.Us;var u=this.Us;return u??(this.DK(),this.Us)},w.prototype.nY=function(){if(this.Ue.getType()==h.Sc.PE_TYPE_PROJCS){var u=90*this.bf();u=[[0,u],[0,-u]],h.ej.geogToProj(this.Ue,2,u);var o=this.kk(),s=o.getNorthPoleLocation()!=h.Cg.PE_POLE_OUTSIDE_BOUNDARY;o=o.getSouthPoleLocation()!=h.Cg.PE_POLE_OUTSIDE_BOUNDARY,this.KA||(s&&this.HH.ma(u[0][0],u[0][1]),o&&this.XH.ma(u[1][0],u[1][1]))}this.KA=!0},w.prototype.CK=function(){if(this.jH==1){var u=400*this.bf();this.vq.K(-u,-u,u,u)}else u=h.Cg.generate(this.Ue,h.Cg.PE_PCSINFO_OPTION_DOMAIN),u=h.l.construct(u.getDomainMinx(),u.getDomainMiny(),u.getDomainMaxx(),u.getDomainMaxy()),this.vq.B()&&this.vq.K(u)},w.prototype.hR=function(u){this.zl&&u.K(this.vq),this.vq.B()&&this.CK(),u.K(this.vq)},w.prototype.Up=function(){return this.RH},w.prototype.zi=function(){return this.bA},w.prototype.Hd=function(){return this.Eo},w.prototype.Xr=function(){return this.wH},w}();h.OC=C}(G||(G={})),function(h){var C=function(){function w(u){this.KT=u,this.As=h.zb.xv(u,0,!0);var o=u.getCode();this.ss=0<o?o:h.pf.getCode(u),0>this.ss&&(this.ss=0),this.Eo=o=this.KT.getUnit(),this.IH=1/o.getUnitFactor(),h.pf.getCode(u)}return w.Py=function(u,o){return u==o||u!=null&&o!=null&&u.ss==0&&o.ss==0&&u.As===o.As},w.prototype.$r=function(){return this.ss},w}();h.PL=C}(G||(G={})),function(h){h.Yg=function(){function C(){}return C.tb=function(w,u,o,s,n,l,c,d){if(l!=null||c!=null||d!=null){s=h.F.ba(s),u=h.F.ba(u),o=h.F.ba(o),n=h.F.ba(n),1.570796326794897<h.s.P(o)&&(o=h.s.Mb(3.141592653589793,o)-o,u=h.F.ba(u+3.141592653589793)),1.570796326794897<h.s.P(n)&&(n=h.s.Mb(3.141592653589793,n)-n,s=h.F.ba(s+3.141592653589793));var f=h.F.ba(s-u);if(h.s.Y(o,n)&&(h.s.Y(u,s)||h.s.Y(h.s.P(o),1.570796326794897)))l!=null&&(l.u=0),c!=null&&(c.u=0),d!=null&&(d.u=0);else{if(h.s.Y(o,-n)){if(h.s.Y(h.s.P(o),1.570796326794897))return l!=null&&(l.u=3.141592653589793*w),c!=null&&(c.u=0<o?h.F.ba(3.141592653589793-h.F.ba(s)):h.F.ba(s)),void(d!=null&&(d.u=0<o?h.F.ba(s):h.F.ba(3.141592653589793-h.F.ba(s))));if(h.s.Y(h.s.P(f),3.141592653589793))return l!=null&&(l.u=3.141592653589793*w),c!=null&&(c.u=0),void(d!=null&&(d.u=0))}var m=h.s.P(o)==1.570796326794897?0:Math.cos(o),b=Math.sin(o),x=h.s.P(n)==1.570796326794897?0:Math.cos(n),$=Math.sin(n),E=h.s.P(f)==1.570796326794897?0:Math.cos(f),O=h.s.P(f)==3.141592653589793?0:Math.sin(f);if(l!=null){var R=Math.sin((n-o)/2);f=Math.sin(f/2),l.u=2*Math.asin(Math.sqrt(R*R+m*x*f*f))*w}c!=null&&(c.u=h.s.Y(h.s.P(o),1.570796326794897)?0>o?s:h.F.ba(3.141592653589793-s):Math.atan2(x*O,m*$-b*x*E)),d!=null&&(h.s.Y(h.s.P(n),1.570796326794897)?d.u=0>n?u:h.F.ba(3.141592653589793-u):(d.u=Math.atan2(m*O,$*m*E-x*b),d.u=h.F.ba(d.u+3.141592653589793)))}}},C.rf=function(w,u,o,s,n,l,c){if(l!=null||c!=null){u=h.F.ba(u),o=h.F.ba(o),1.570796326794897<h.s.P(o)&&(o=h.s.Mb(3.141592653589793,o)-o,u=h.F.ba(u+3.141592653589793)),h.s.Y(h.s.P(o),1.570796326794897)&&(u=0),n=h.F.ba(n);var d=h.s.Y(h.s.P(n),1.570796326794897)?0:Math.cos(n),f=h.s.Y(h.s.P(n),3.141592653589793)?0:Math.sin(n),m=h.s.Y(h.s.P(o),1.570796326794897)?0:Math.cos(o),b=Math.sin(o);w=s/w,s=h.s.Y(h.s.P(w),1.570796326794897)?0:Math.cos(w);var x=h.s.Y(h.s.P(w),3.141592653589793)?0:Math.sin(w),$=Math.asin(b*s+m*x*d);c!=null&&(c.u=$),l!=null&&(l.u=h.s.Y(h.s.P($),1.570796326794897)?h.s.Y(o,-$)?0>$?n:h.F.ba(3.141592653589793-n):u:h.s.Y(h.s.P(o),1.570796326794897)&&h.s.Y(w,3.141592653589793)?0>o?n:h.F.ba(3.141592653589793-n):h.F.ba(u+Math.atan2(x*f,m*s-b*x*d)))}},C}()}(G||(G={})),function(h){h.Wk=function(){function C(){}return C.tb=function(w,u,o,s,n,l,c,d,f){var m=new h.ga(0),b=new h.ga(0),x=[0,0,0],$=[0,0,0],E=[0,0,0],O=new h.ga(0),R=new h.ga(0),k=new h.ga(0),j=new h.ga(0),F=new h.ga(0);if(c!=null||d!=null||f!=null)if(h.s.ti(u))h.Yg.tb(w,o,s,n,l,c,d,f);else{n=h.F.ba(n),o=h.F.ba(o);var L=h.F.ba(n-o);if(h.s.Y(s,l)&&(h.s.Y(o,n)||h.s.Y(h.s.P(s),1.570796326794897)))c!=null&&(c.u=0),d!=null&&(d.u=0),f!=null&&(f.u=0);else{if(h.s.Y(s,-l)){if(h.s.Y(h.s.P(s),1.570796326794897))return c!=null&&(c.u=2*h.F.Ah(w,u)),d!=null&&(d.u=0<s?h.F.ba(3.141592653589793-h.F.ba(n)):h.F.ba(n)),void(f!=null&&(f.u=0<s?h.F.ba(n):h.F.ba(3.141592653589793-h.F.ba(n))));h.s.Y(h.s.P(L),3.141592653589793)&&(c!=null&&(c.u=2*h.F.Ah(w,u)),d!=null&&(d.u=0),f!=null&&(f.u=0))}else(h.s.Y(h.s.P(s),1.570796326794897)||h.s.Y(h.s.P(l),1.570796326794897))&&(h.s.Y(h.s.P(s),1.570796326794897)?o=n:n=o);var V=0;if(0>L){V=1;var B=o;o=n,n=B,B=s,s=l,l=B}L=h.F.ot(u,s);var W=h.F.ot(u,l);d==null&&f==null||(h.Yg.tb(w,o,L,n,W,null,m,b),m=Math.atan2(Math.sin(m.u)*Math.cos(s-L),Math.cos(m.u)),b=Math.atan2(Math.sin(b.u)*Math.cos(l-W),Math.cos(b.u)),V!=0&&(B=m,m=b,b=B),d!=null&&(d.u=m),f!=null&&(f.u=b)),c!=null&&(h.F.cl(1,u,s,o,0,k,j,F),x[0]=k.u,x[1]=j.u,x[2]=F.u,h.F.cl(1,u,l,n,0,k,j,F),$[0]=k.u,$[1]=j.u,$[2]=F.u,E[0]=x[1]*$[2]-$[1]*x[2],E[1]=-(x[0]*$[2]-$[0]*x[2]),E[2]=x[0]*$[1]-$[0]*x[1],u=1-h.F.w(u,h.F.Vq(u,h.F.Qj(u,Math.acos(E[2]/Math.sqrt(E[0]*E[0]+E[1]*E[1]+E[2]*E[2]))))),u*=2-u,d=Math.atan2(-E[1],-E[0]),E=h.F.ba(d-1.570796326794897),d=h.F.ba(d+1.570796326794897),E=h.s.P(h.F.ba(o-E))<=h.s.P(h.F.ba(o-d))?E:d,h.Yg.tb(1,E,0,o,L,O,null,null),h.Yg.tb(1,E,0,n,W,R,null,null),3.141592653589793<O.u+R.u&&(E=h.F.ba(E+3.141592653589793),h.Yg.tb(1,E,0,o,L,O,null,null),h.Yg.tb(1,E,0,n,W,R,null,null)),O.u*=h.s.Mb(1,s),R.u*=h.s.Mb(1,l),O.u=h.F.Qj(u,O.u),R.u=h.F.Qj(u,R.u),o=h.F.q(w,u,O.u),w=h.F.q(w,u,R.u),c.u=h.s.P(w-o))}}},C.rf=function(w,u,o,s,n,l,c,d){var f=0,m=new h.ga(0),b=new h.ga(0),x=[0,0,0],$=[0,0,0],E=new h.ga(0),O=new h.ga(0),R=new h.ga(0);if(c!=null||d!=null)if(h.s.ti(u))h.Yg.rf(w,o,s,n,l,c,d);else if(h.s.Cd(n))c!=null&&(c.u=o),d!=null&&(d.u=s);else if(l=h.F.ba(l),0>n&&(n=h.s.P(n),l=h.F.ba(l+3.141592653589793)),o=h.F.ba(o),s=h.F.ba(s),1.570796326794897<h.s.P(s)&&(o=h.F.ba(o+3.141592653589793),s=h.s.Mb(3.141592653589793,s)-s),h.s.Y(h.s.P(s),1.570796326794897)&&(o=0),h.s.Cd(s)){var k=h.s.P(1.570796326794897-h.s.P(l));k=h.F.Qj(u,k),k=1-h.F.w(u,h.F.Vq(u,k)),k*=2-k,w=n/h.F.Ah(w,k)*1.570796326794897,w=h.F.Rq(k,w),w=h.F.ot(k,w),h.Yg.rf(1,o,s,w,l,c,m),d!=null&&(f=m.u),d!=null&&(d.u=h.F.Qj(u,f))}else if(h.s.Y(h.s.P(s),1.570796326794897))m=2*(f=h.F.Ah(w,u)),l=0<(w=h.s.Mb(1.570796326794897,s))?h.F.ba(3.141592653589793-l):l,s=f-n,h.s.P(s)<=f?c!=null&&(c.u=l):(s=Math.floor(n/m),h.O.truncate(s%2)==0?(c!=null&&(c.u=l),n-=s*m):(c!=null&&(c.u=h.F.ba(l+3.141592653589793)),n=(s+1)*m-n),s=f-n),d!=null&&(d.u=h.F.Rq(u,s/f*w));else{k=h.F.ot(u,s),l=Math.atan2(Math.sin(l),Math.cos(l)*Math.cos(s-k));var j=h.O.truncate(h.s.Mb(1,k))*(1.570796326794897>=h.s.P(l)?1:-1);l=h.F.ba(o+Math.atan(Math.tan(l)*-Math.sin(k))),h.Yg.tb(w,l,0,o,k,null,b,null),k=h.s.P(1.570796326794897-h.s.P(b.u)),k=h.F.Qj(u,k),k=1-h.F.w(u,h.F.Vq(u,k)),k*=2-k,h.F.cl(1,u,0,l,0,E,O,R),x[0]=E.u,x[1]=O.u,x[2]=R.u,h.F.cl(1,u,s,o,0,E,O,R),$[0]=E.u,$[1]=O.u,$[2]=R.u,s=Math.acos((x[0]*$[0]+x[1]*$[1]+x[2]*$[2])/Math.sqrt($[0]*$[0]+$[1]*$[1]+$[2]*$[2])),s=h.F.Qj(k,s),n=0<(s=h.F.q(w,k,s)+n*j)?b.u:h.F.ba(b.u+3.141592653589793),w=h.s.P(s)/h.F.Ah(w,k)*1.570796326794897,w=h.F.Rq(k,w),w=h.F.ot(k,w),h.Yg.rf(1,l,0,w,n,c,m),d!=null&&(f=m.u),d!=null&&(d.u=h.F.Qj(u,f))}},C}()}(G||(G={})),function(h){h.cu=function(){function C(){}return C.tb=function(w,u,o,s,n,l,c,d,f){var m=0,b=0,x=0;if(c!=null||d!=null||f!=null)if(h.s.ti(u))h.Yg.tb(w,o,s,n,l,c,d,f);else{var $=h.F.ba(n-o);if(h.s.Y(s,l)&&(h.s.Cd($)||h.s.Y(h.s.P(s),1.570796326794897)))c!=null&&(c.u=0),d!=null&&(d.u=0),f!=null&&(f.u=0);else{if(h.s.Y(s,-l)){if(h.s.Y(h.s.P(s),1.570796326794897))return c!=null&&(c.u=2*h.F.Ah(w,u)),d!=null&&(d.u=0<s?h.F.ba(3.141592653589793-h.F.ba(n)):h.F.ba(n)),void(f!=null&&(f.u=0<s?h.F.ba(n):h.F.ba(3.141592653589793-h.F.ba(n))));h.s.Y(h.s.P($),3.141592653589793)&&(c!=null&&(c.u=2*h.F.Ah(w,u)),d!=null&&(d.u=0),f!=null&&(f.u=0))}else if(h.s.Y(h.s.P(s),1.570796326794897)||h.s.Y(h.s.P(l),1.570796326794897)||h.s.Cd($)||h.s.Y(h.s.P($),3.141592653589793))return void h.Wk.tb(w,u,o,s,n,l,c,d,f);var E=1-Math.sqrt(1-u),O=u/(1-u),R=w*(1-E);w=h.F.Vq(u,s);var k=h.F.Vq(u,l);u=h.s.P(w)==1.570796326794897?0:Math.cos(w);var j=Math.sin(w),F=h.s.P(k)==1.570796326794897?0:Math.cos(k),L=Math.sin(k),V=$,B=Math.cos(V),W=Math.sin(V),K=1,re=0;do{var ae=V,de=Math.sqrt(Math.pow(F*W,2)+Math.pow(u*L-j*F*B,2)),ce=j*L+u*F*B,Te=Math.atan2(de,ce);if(de==0){K=0;break}var le=u*F*W/de;if(m=Math.cos(Math.asin(le)),b=ce-2*j*L/(m*=m),1<h.s.P(b)&&(b=h.s.Mb(1,b)),V=$+(1-(V=E/16*m*(4+E*(4-3*m))))*E*le*(Te+V*de*(b+V*ce*(2*(x=b*b)-1))),B=Math.cos(V),W=Math.sin(V),re++,3.141592653589793<h.s.P(V)&&30<re){K=0;break}}while(5e3>=re&&!h.s.Y(ae,V));if(K!=0)E=(O*=m)*(256+O*(O*(74-47*O)-128))/1024,c!=null&&(c.u=R*(1+O*(4096+O*(O*(320-175*O)-768))/16384)*(Te-E*de*(b+E/4*(ce*(2*x-1)-E/6*b*(4*de*de-3)*(4*x-3))))),d!=null&&(d.u=h.s.Y(h.s.P(s),1.570796326794897)?0>s?n:h.F.ba(3.141592653589793-n):Math.atan2(F*W,u*L-j*F*B)),f!=null&&(h.s.Y(h.s.P(l),1.570796326794897)?f.u=0>l?o:h.F.ba(3.141592653589793-o):(f.u=Math.atan2(u*W,u*L*B-j*F),f.u=h.F.ba(f.u+3.141592653589793)));else{V=h.s.Mb(3.141592653589793,$),ce=j*L-u*F,Te=Math.acos(ce),de=Math.sin(Te),m=1,re=le=0;do x=le,B=1-.25*(le=E*(m*=m)*(1+E+E*E))+.1875*(b=E*E*(B=m*m)*(1+2.25*E))-.1953125*(K=E*E*E*B*m),le=.25*le-.25*b+.29296875*K,W=.03125*b-.05859375*K,K*=.00651041666666667,b=ce-2*j*L/m,1<h.s.P(b)&&(b=h.s.Mb(1,b)),m=Math.acos(b),ce=Math.cos(2*m),ae=Math.cos(3*m),W=(le=h.s.Y(s,-l)?h.F.ba(3.141592653589793-$)/(3.141592653589793*E*B):h.F.ba(V-$)/(E*(B*Te+le*de*b+W*Math.sin(2*Te)*ce+K*Math.sin(3*Te)*ae)))*de/(u*F),V=1.570796326794897<h.s.P($)?h.s.Mb(3.141592653589793,W)-Math.asin(W):Math.asin(W),B=Math.cos(V),de=Math.sqrt(Math.pow(F*W,2)+Math.pow(u*L-j*F*B,2)),Te=3.141592653589793-Math.asin(h.s.P(de)),ce=Math.cos(Te),m=Math.cos(Math.asin(le)),re++;while(70>=re&&!h.s.Y(x,le));c!=null&&(B=1+(O*=m*=m)*(4096+O*(O*(320-175*O)-768))/16384,h.s.Y(s,-l)?c.u=3.141592653589793*R*B:(b=ce-2*j*L/m,m=Math.acos(b),ce=Math.cos(2*m),ae=Math.cos(3*m),c.u=R*(B*Te+O*(O*(128+O*(35*O-60))-512)/2048*de*b+O*(5*O-4)/6144*O*O*Math.sin(2*Te)*ce+K*Math.sin(3*Te)*ae+-762939453125e-16*O*O*O*O*Math.sin(4*Te)*Math.cos(4*m)))),d!=null&&(h.s.Cd(s)&&h.s.Cd(l)?(m=Math.sqrt(1-le*le),d.u=Math.acos(m),0>$&&(d.u*=-1)):h.s.Y(h.s.P(s),1.570796326794897)?d.u=0>s?n:h.F.ba(3.141592653589793-n):(c=le/u,R=Math.sqrt(1-c*c),0>u*L-j*F*Math.cos(V)&&(R*=-1),d.u=Math.atan2(c,R),h.s.Y(s,-l)&&h.s.P(h.F.ba(o-n))>3.141592653589793*(1-E*Math.cos(s))&&(0<s&&1.570796326794897>h.s.P(d.u)||0>s&&1.570796326794897<h.s.P(d.u))&&(d.u=h.s.Mb(3.141592653589793,d.u)-d.u))),f!=null&&(h.s.Cd(s)&&h.s.Cd(l)?(m=Math.sqrt(1-le*le),f.u=Math.acos(m),0<=$&&(f.u*=-1)):h.s.Y(h.s.P(l),1.570796326794897)?f.u=0>l?o:h.F.ba(3.141592653589793-o):($=le/F,c=Math.sqrt(1-$*$),R=Math.sin(V/2),0>Math.sin(k-w)-2*u*L*R*R&&(c*=-1),f.u=Math.atan2($,c),f.u=h.F.ba(f.u+3.141592653589793),h.s.Y(s,-l)&&!h.s.Cd(s)&&!h.s.Y(h.s.P(s),1.570796326794897)&&h.s.P(h.F.ba(o-n))>3.141592653589793*(1-E*Math.cos(s))&&(d!=null?R=d.u:(c=le/u,R=Math.sqrt(1-c*c),0>u*L-j*F*Math.cos(V)&&(R*=-1),R=Math.atan2(c,R),h.s.Y(s,-l)&&h.s.P(h.F.ba(o-n))>3.141592653589793*(1-E*Math.cos(s))&&(0<s&&1.570796326794897>h.s.P(R)||0>s&&1.570796326794897<h.s.P(R))&&(R=h.s.Mb(3.141592653589793,R)-R)),1.570796326794897>=h.s.P(R)&&1.570796326794897<h.s.P(f.u)||1.570796326794897<=h.s.P(R)&&1.570796326794897>h.s.P(f.u))&&(f.u=-1*h.F.ba(f.u+3.141592653589793))))}}}},C.rf=function(w,u,o,s,n,l,c,d){if(c!=null||d!=null)if(h.s.ti(u))h.Yg.rf(w,o,s,n,l,c,d);else if(l=h.F.ba(l),h.s.Y(h.s.P(s),1.570796326794897)||h.s.Cd(l)||h.s.Y(h.s.P(l),3.141592653589793))h.Wk.rf(w,u,o,s,n,l,c,d);else{var f=h.s.P(l)==1.570796326794897?0:Math.cos(l),m=h.s.P(l)==3.141592653589793?0:Math.sin(l);h.s.Y(h.s.P(s),1.570796326794897)&&(o=0),l=1-Math.sqrt(1-u);var b=h.F.Vq(u,s);s=h.s.P(b)==1.570796326794897?0:Math.cos(b);var x=Math.sin(b);b=Math.atan2(Math.tan(b),f);var $=s*m,E=$*$,O=1-E,R=u/(1-u)*O,k=(u=R*(256+R*(R*(74-47*R)-128))/1024)/4,j=u/6,F=n/(w*(1-l)*(1+R*(4096+R*(R*(320-175*R)-768))/16384)),L=F;do{var V=L;n=h.s.P(L)==1.570796326794897?0:Math.cos(L);var B=(R=h.s.P(L)==3.141592653589793?0:Math.sin(L))*R;L=u*R*((w=Math.cos(2*b+L))+k*(n*(2*(L=w*w)-1)-j*w*(4*B-3)*(4*L-3)))+F}while(!h.s.Y(V,L));n=h.s.P(L)==1.570796326794897?0:Math.cos(L),R=h.s.P(L)==3.141592653589793?0:Math.sin(L),c!=null&&(m=Math.atan2(R*m,s*n-x*R*f),O=l/16*O*(4+l*(4-3*O)),w=Math.cos(2*b+L),c.u=h.F.ba(o+(m-(1-O)*l*$*(L+O*R*(w+O*n*(2*w*w-1)))))),d!=null&&(O=x*R-s*n*f,O=(1-l)*Math.sqrt(E+O*O),d.u=Math.atan2(x*n+s*R*f,O))}},C}()}(G||(G={})),function(h){h.PC=function(){function C(){}return C.tb=function(w,u,o,s,n,l,c,d,f){var m=h.F.ba(n-o),b=h.s.Y(h.s.P(s),1.570796326794897),x=h.s.Y(h.s.P(l),1.570796326794897);if(h.s.Y(s,l)&&(h.s.Cd(m)||b))c!=null&&(c.u=0),d!=null&&(d.u=0),f!=null&&(f.u=0);else{if(h.s.ti(u)){var $=Math.sin(s),E=Math.sin(l);$=Math.sqrt((1+$)/(1-$)),E=Math.sqrt((1+E)/(1-E)),$=Math.log(E)-Math.log($),$=Math.atan2(m,$),c!=null&&(c.u=h.s.Y(s,l)?h.s.P(w*Math.cos(s)*m):h.s.P((w*l-w*s)/Math.cos($)))}else E=h.F.Qw(u,l),$=Math.sin(h.F.Qw(u,s)),E=Math.sin(E),$=Math.sqrt((1+$)/(1-$)),E=Math.sqrt((1+E)/(1-E)),$=Math.log(E)-Math.log($),$=Math.atan2(m,$),c!=null&&(h.s.Y(s,l)?c.u=h.s.P(w*m*Math.cos(s)/h.F.w(u,s)):(m=h.F.q(w,u,s),w=h.F.q(w,u,l),c.u=h.s.P((w-m)/Math.cos($))));d==null&&f==null||(c=h.F.ba($+3.141592653589793),b&&x||!b&&!x||(b?$=0>s?n:h.F.ba(3.141592653589793-n):x&&(c=0>l?o:h.F.ba(3.141592653589793-o))),d!=null&&(d.u=$),f!=null&&(f.u=c))}},C.rf=function(w,u,o,s,n,l,c,d){l=h.F.ba(l),0>n&&(n=h.s.P(n),l=h.F.ba(l+3.141592653589793)),h.s.ti(u)?h.s.Y(h.s.P(s),1.570796326794897)?(o=0>s?l:h.F.ba(3.141592653589793-l),3.141592653589793>=(l=n/w%6.283185307179586)?w=s-h.s.Mb(l,s):(o=h.F.ba(o+3.141592653589793),w=-s+h.s.Mb(l-3.141592653589793,s))):h.s.Y(h.s.P(l),1.570796326794897)?(o=h.F.ba(o+h.s.Mb(n,l)/(w*Math.cos(s))),w=s):(w=s+n*Math.cos(l)/w,1.570796326794897<h.s.P(w)&&(w=1.570796326794897),h.s.Y(h.s.P(w),1.570796326794897)&&(h.s.Cd(l)||h.s.Y(h.s.P(l),3.141592653589793))||(1.570796316258184<h.s.P(w)&&(w=h.s.Mb(1.570796316258184,w)),u=Math.sin(s),s=Math.sin(w),u=Math.sqrt((1+u)/(1-u)),s=Math.sqrt((1+s)/(1-s)),u=Math.log(s)-Math.log(u),o=h.F.ba(o+Math.tan(l)*u))):h.s.Y(h.s.P(s),1.570796326794897)?(o=0>s?l:h.F.ba(3.141592653589793-l),l=n/h.F.qW(w,u),3.141592653589793>=(l%=6.283185307179586)?w=s-h.s.Mb(l,s):(o=h.F.ba(o+3.141592653589793),w=-s+h.s.Mb(l-3.141592653589793,s)),w=h.F.Rq(u,w)):h.s.Y(h.s.P(l),1.570796326794897)?(o=h.F.ba(o+h.s.Mb(n,l)*h.F.w(u,s)/(w*Math.cos(s))),w=s):(w=1.570796326794897*(n*Math.cos(l)+h.F.q(w,u,s))/h.F.Ah(w,u),1.570796326794897<h.s.P(w)&&(w=h.s.Mb(1.570796326794897,w)),w=h.F.Rq(u,w),h.s.Y(h.s.P(w),1.570796326794897)&&(h.s.Cd(l)||h.s.Y(h.s.P(l),3.141592653589793))||(n=h.F.Qw(u,s),s=h.F.Qw(u,w),1.570796316258184<h.s.P(s)&&(s=h.s.Mb(1.570796316258184,w),w=h.F.yO(u,s)),u=Math.sin(n),s=Math.sin(s),u=Math.sqrt((1+u)/(1-u)),s=Math.sqrt((1+s)/(1-s)),u=Math.log(s)-Math.log(u),o=h.F.ba(o+Math.tan(l)*u))),c!=null&&(c.u=o),d!=null&&(d.u=w)},C}()}(G||(G={})),function(h){h.kb=function(){function C(){}return C.Xy=function(w,u,o,s,n,l,c){h.cu.tb(w,u,o,s,n,l,null,c,null)},C.yi=function(w,u,o,s,n,l,c,d){h.cu.rf(w,u,o,s,n,l,c,d)},C.wd=function(w,u,o,s,n,l,c,d,f,m){switch(m){case 2:h.Wk.tb(w,u,o,s,n,l,c,d,f);break;case 3:h.QC.tb(w,u,o,s,n,l,c,d,f);break;case 1:h.PC.tb(w,u,o,s,n,l,c,d,f);break;default:h.cu.tb(w,u,o,s,n,l,c,d,f)}},C.oj=function(w,u,o,s,n,l,c,d,f){switch(f){case 2:h.Wk.rf(w,u,o,s,n,l,c,d);break;case 3:h.QC.rf(w,u,o,s,n,l,c,d);break;case 1:h.PC.rf(w,u,o,s,n,l,c,d);break;default:h.cu.rf(w,u,o,s,n,l,c,d)}},C}()}(G||(G={})),function(h){var C=function(){function u(){this.y=this.x=null}return u.construct=function(o){var s=new u;return s.x=new h.Wb,s.x.set(o.x),s.y=new h.Wb,s.y.set(o.y),s},u.VE=function(o,s){var n=new u;return n.x=new h.Wb,n.x.set(o),n.y=new h.Wb,n.y.set(s),n},u.prototype.qg=function(){return this.x.qg()&&this.y.qg()},u.prototype.value=function(){return h.h.construct(this.x.value(),this.y.value())},u}();h.vY=C;var w=function(){function u(){this.z=this.y=this.x=null}return u.construct=function(o){var s=new u;return s.x=new h.Wb,s.x.set(o.x),s.y=new h.Wb,s.y.set(o.y),s.z=new h.Wb,s.z.set(o.z),s},u.VE=function(o,s,n){var l=new u;return l.x=new h.Wb,l.x.set(o),l.y=new h.Wb,l.y.set(s),l.z=new h.Wb,l.z.set(n),l},u.prototype.qg=function(){return this.x.qg()&&this.y.qg()&&this.z.qg()},u.prototype.value=function(){return new h.Nd(this.x.value(),this.y.value(),this.z.value())},u.prototype.Qh=function(o){var s=new h.Wb,n=new h.Wb,l=new h.Wb;return s.Kl(this.x,o.x),n.Kl(this.y,o.y),l.Kl(this.z,o.z),(o=new h.Wb).dN(s,n),o.add(l),o},u.prototype.cF=function(o){var s=new u;s.x.Kl(this.y,o.z),s.y.Kl(this.z,o.x),s.z.Kl(this.x,o.y);var n=new h.Wb,l=new h.Wb,c=new h.Wb;return n.Kl(this.z,o.y),l.Kl(this.x,o.z),c.Kl(this.y,o.x),s.x.sub(n),s.y.sub(l),s.z.sub(c),s},u}();h.wY=w,h.Ox=function(){function u(){}return u.EP=function(o,s,n){var l=s.x;s=s.y,u.cl(1,o,Math.cos(l),Math.sin(l),Math.cos(s),Math.sin(s),n)},u.DP=function(o,s){var n=new h.Nd;return u.EP(o,s,n),n},u.cl=function(o,s,n,l,c,d,f){o/=Math.sqrt(1-s*d*d),f.K(o*c*n,o*c*l,o*(1-s)*d)},u.Yu=function(o,s){var n=new h.Wb,l=new h.Wb,c=new h.Wb,d=new h.Wb;n.cos(s.x),l.sin(s.x),c.cos(s.y),d.sin(s.y);var f=new h.Wb;return f.set(d),f.Ag(d),f.No(o),f.No(-1),f.kN(),f.sqrt(),(s=new h.Wb).set(1),s.jm(f),(f=new h.Wb).set(s),f.Ag(c),f.Ag(n),(n=new h.Wb).set(s),n.Ag(c),n.Ag(l),(l=new h.Wb).set(s),l.No(1-o),l.Ag(d),w.VE(f,n,l)},u.SS=function(o,s,n,l){if(Math.abs(s.x-n.x)>Math.PI||Math.abs(s.y)>.5*Math.PI||Math.abs(n.y)>.5*Math.PI||(Math.abs(s.y)==.5*Math.PI||Math.abs(n.y)==.5*Math.PI)&&s.x!=n.x)return NaN;if(l=u.cB(l,Math.min(s.x,n.x),Math.max(s.x,n.x)),!new h.Nc(s.x,n.x).contains(l))return NaN;var c=C.construct(s);if(n=C.construct(n),c=u.Yu(o,c),n=u.Yu(o,n),(n=c.cF(n)).z.qg())return s.y;var d=new h.Wb;d.set(n.x),d.jm(n.z),d.No(-1);var f=new h.Wb;f.set(n.y),f.jm(n.z),f.No(-1);var m=new h.Wb;return m.set(f),m.Ag(f),(c=new h.Wb).set(d),c.Ag(d),c.add(m),c.sqrt(),c.qg()||d.qg()&&f.qg()?s.y:(s=Math.atan2(f.value(),d.value()),s=Math.atan2(c.value()*Math.cos(s-l),1-o),l=u.DP(o,h.h.construct(l,s)),o=new h.Nd(l.x,l.y,-l.z),l=n.value().Qh(l),o=n.value().Qh(o),Math.abs(o)<Math.abs(l)&&(s=-s),s)},u.Oz=function(o,s,n,l,c){if(c[0]=NaN,c[1]=NaN,Math.abs(s.x-n.x)>Math.PI||Math.abs(s.y)>.5*Math.PI||Math.abs(n.y)>.5*Math.PI||(Math.abs(s.y)==.5*Math.PI||Math.abs(n.y)==.5*Math.PI)&&s.x!=n.x||Math.abs(l)>=.5*Math.PI||0<s.y&&0<n.y&&s.y>l&&n.y>l||0>s.y&&0>n.y&&s.y<l&&n.y<l)return 0;var d=C.construct(s),f=C.construct(n);d=u.Yu(o,d),f=u.Yu(o,f);var m=d.cF(f);if(m.z.qg())return new h.Nc(s.y,n.y).contains(l)?(c[0]=s.x,1):0;(f=new h.Wb).set(m.x),f.jm(m.z),f.No(-1),(d=new h.Wb).set(m.y),d.jm(m.z),d.No(-1),(m=new h.Wb).set(d),m.Ag(d);var b=new h.Wb;return b.set(f),b.Ag(f),b.add(m),b.sqrt(),b.qg()||f.qg()&&d.qg()?l==0?(c[0]=s.x,c[1]=n.x,2):0:(o=(1-o)*Math.tan(l)/b.value(),1<Math.abs(o)?0:(o=Math.acos(o),m=Math.atan2(d.value(),f.value()),f=Math.min(s.x,n.x),d=Math.max(s.x,n.x),n=u.cB(m-o,f,d),o=l!=0?u.cB(m+o,f,d):n,l=0,f<=n&&n<=d&&(c[l]=n,l++),o!=n&&f<=o&&o<=d&&(c[l]=o,++l==2&&Math.abs(c[0]-s.x)>Math.abs(c[1]-s.x)&&(s=c[0],c[0]=c[1],c[1]=s)),l))},u.cB=function(o,s,n){return o>n?o-=2*(s=Math.ceil((o-n)/(2*Math.PI)))*Math.PI:o<s&&(o+=2*(s=Math.ceil((s-o)/(2*Math.PI)))*Math.PI),o},u}()}(G||(G={})),function(h){h.XK=function(){function C(){}return C.$X=function(w,u){var o=8,s=[0,0,0,0],n=new h.h;n.L(u),n.scale(h.cb.sc(w).Hd().Ec()==9102?1:h.cb.sc(w).Hd().ai/3.141592653589793*180),-180>n.x?(n.x-=n.x%360,-180>n.x&&(n.x+=360)):180<n.x&&(n.x-=n.x%360,180<n.x&&(n.x-=360)),90<n.y&&(n.y=90),-90>n.y&&(n.y=-90);for(var l=-180,c=180,d=(w=5*o)-1,f=(u=(w+31)/32)-1;0<=f;f--)for(var m=d-32*f,b=Math.min(32,w-32*f),x=1;x<b;x+=2){var $=.5*(c+l);n.x>=$?(s[f]|=1<<m,l=$):c=$,m-=2,d-=2}for(l=-90,c=90,d=w-2,f=u-1;0<=f;f--)for(m=d-32*f,b=Math.min(32,w-32*f),x=0;x<b;x+=2)$=.5*(c+l),n.y>=$?(s[f]|=1<<m,l=$):c=$,m-=2,d-=2;return C.$P(s,o,o)},C.$P=function(w,u,o){for(var s=[],n=0;n<u;n++)s[n]="";for(var l=n=0,c=0;c<u;c++){var d=w[n]>>l&31;if(31<(l+=5)){var f=37-l;d&=(1<<f)-1,l-=32,d|=(w[++n]&(1<<l)-1)<<f}s[u-1-c]="0123456789bcdefghjkmnpqrstuvwxyz".split("")[d]}if(o>u)for(c=0;c<o-u;c++)s.push("0");else o<u&&(s.length=o);return s.join("")},C}()}(G||(G={})),function(h){var C={gcstol:[0,2e-9,1,2241706620489156e-24,2,2313672246530541e-24,3,898240164660333e-23,4,8982433838020134e-24,5,8982439417325895e-24,6,8982466029667677e-24,7,8982476760268133e-24,8,8982492642167149e-24,9,898251968292634e-23,10,898253685210448e-23,11,8982546725256576e-24,12,8982557456049832e-24,13,898257333682596e-23,14,8982575482995276e-24,15,8982578488197342e-24,16,8982579775336987e-24,17,89825840676828e-22,18,8982599090925448e-24,19,8982605529473397e-24,20,8982609220517402e-24,21,8982611968030573e-24,22,8982616260407152e-24,23,8982620552787834e-24,24,8982633429954492e-24,25,8982637722351582e-24,26,898264416095491e-23,27,8982646307158072e-24,28,8982654891980968e-24,29,8982667769246082e-24,30,8982674207892485e-24,31,8982680646548117e-24,32,8982682792768713e-24,33,8982685798042582e-24,34,8982689231436652e-24,35,898269137766135e-23,36,898269266624163e-23,37,8982705114087017e-24,38,8982706830791106e-24,39,8982711958374661e-24,40,8982712839964735e-24,41,8982717991496125e-24,42,8982721424914803e-24,43,8982723571154887e-24,44,8982727863638127e-24,45,8982730868942154e-24,46,8982734302370678e-24,47,8982745033612112e-24,48,8982751472369276e-24,49,8982755764879183e-24,50,8982762203651733e-24,51,8982764776628385e-24,52,8982766496171896e-24,53,898277722749025e-23,54,898278152002477e-23,55,898279933943848e-23,56,89829143024805e-22,57,8982922161948598e-24,58,898292327314211e-23,59,8982925667349601e-24,60,8982932222965576e-24,61,8982961298941316e-24,62,8982965524049989e-24,63,8982994818246099e-24,64,8982994895706967e-24,65,898299489597736e-23,66,8983000733443498e-24,67,8983055097289157e-24,68,8983064111047368e-24,69,8983111996941178e-24,70,8983120447446023e-24,71,898312748954554e-23,72,8983134531656096e-24,73,8983141573777694e-24,74,8983148615910332e-24,75,8983152841195215e-24,76,8983153545409748e-24,77,8983153827095593e-24,78,898315396793852e-23,79,8983154249624393e-24,80,8983155658054012e-24,81,8983960794340072e-24,82,8984061344391998e-24,83,8984072829255685e-24,84,8984194981201908e-24,85,8984275233099427e-24,86,8984326127007554e-24,87,8984330099816539e-24,88,898433275258421e-23,89,8984333047023206e-24,90,8984333885258723e-24,91,8984337959508212e-24,92,8984365176209457e-24,93,8984727360418079e-24,94,8984901041679577e-24,95,898542662091587e-23,96,898610024130669e-23,97,8992894229037531e-24,98,8993203677616635e-24,99,8993206178094346e-24,100,8993216059187305e-24,101,899322029394808e-23,102,8994627867045891e-24,103,9467559984315793e-24,104,946881168618118e-23,105,9980888154931644e-24,106,9981105353606775e-24,107,9983807356573187e-24,108,1687060485811522e-23,109,1688447560354875e-23,110,2176606011487185e-23,111,2225078816042032e-23,112,2348476432064694e-23,113,2348765250187846e-23,114,2378108974103778e-23,115,314559636297708e-22,116,3297788621680806e-23,117,3667892343788279e-23,118,4235973644320739e-23,119,4794625900676345e-23,120,7262742998235812e-23,121,7499447580246377e-23,122,7525056410964318e-23,123,7979913581209237e-23,124,9662020153976783e-23,125,9799175562353741e-23,126,9897353517547472e-23,127,102313891987647e-21,128,1081460541960784e-22,129,121905913857622e-21,130,2246893314238523e-22,131,2297344808062643e-22,132,242984645941825e-21,133,2754604784282804e-22,134,2884548130346993e-22,135,3370339971357784e-22,136,4307953346848296e-22,137,5208707228462029e-22,138,5509209568565608e-22,139,6452227422644406e-22,140,6740679942715567e-22,141,6861770001566745e-22,142,7252630318111686e-22,143,7441010326374328e-22,144,7742672907173287e-22,145,9629542775307953e-22,146,1061032953945969e-21,147,1143628333594458e-21,148,1162186197019925e-21,149,136418522650196e-20,150,1367441038498385e-21,151,1432394487827058e-21,152,1736235742820677e-21,153,1848250952034914e-21,154,1909859317102744e-21,155,1975716534933873e-21,156,2122065907891938e-21,157,272837045300392e-20,158,3183098861837907e-21,159,3580986219567645e-21,160,3819718634205488e-21,161,409255567950588e-20,162,4407367654852486e-21,163,4774648292756861e-21,164,5161781938115525e-21,165,520870722846203e-20,166,5729577951308232e-21,167,6031134685587613e-21,168,6987290184522236e-21,169,9241254760174569e-21,170,1145915590261646e-20],pcstol:[0,6666666666666667e-24,1,2e-8,2,4970973863636364e-20,3,4970978156565657e-20,4,4970980410559237e-20,5,.001,6,.001093615055555556,7,.001093615194444445,8,.001093619003239988,9,.001093623110088878,10,.003280833333333333,11,.003280839895013123,12,.003280843014596366,13,.003280845583333334,14,.003280869330266636,15,.00497101413676763],newtoold:[2154,102110,2195,102200,2204,32036,2205,26979,2225,102641,2226,102642,2227,102643,2228,102644,2229,102645,2230,102646,2231,102653,2232,102654,2233,102655,2234,102656,2235,102657,2236,102658,2237,102659,2238,102660,2239,102666,2240,102667,2241,102668,2242,102669,2243,102670,2246,102679,2247,102680,2248,102685,2249,102686,2250,102687,2254,102694,2255,102695,2257,102712,2258,102713,2259,102714,2260,102715,2261,102716,2262,102717,2263,102718,2264,102719,2267,102724,2268,102725,2271,102728,2272,102729,2274,102736,2275,102737,2276,102738,2277,102739,2278,102740,2279,102741,2283,102746,2284,102747,2285,102748,2286,102749,2287,102752,2288,102753,2289,102754,2312,23433,2326,102140,2395,2091,2396,2092,2397,2166,2398,2167,2399,2168,2759,102229,2760,102230,2761,102248,2762,102249,2763,102250,2764,102251,2765,102252,2766,102241,2767,102242,2768,102243,2769,102244,2770,102245,2771,102246,2772,102253,2773,102254,2774,102255,2775,102256,2776,102257,2777,102258,2778,102259,2779,102260,2780,102266,2781,102267,2782,102261,2783,102262,2784,102263,2785,102264,2786,102265,2787,102268,2788,102269,2789,102270,2790,102271,2791,102272,2792,102273,2793,102274,2794,102275,2795,102276,2796,102277,2797,102278,2798,102279,2799,102280,2800,102281,2801,102282,2802,102283,2803,102284,2804,102285,2805,102286,2806,102287,2807,102288,2808,102289,2809,102290,2810,102291,2811,102292,2812,102293,2813,102294,2814,102295,2815,102296,2816,102297,2817,102298,2818,102300,2819,102304,2820,102307,2821,102308,2822,102309,2823,102310,2824,102311,2825,102312,2826,102313,2827,102314,2828,102315,2829,102316,2830,102317,2831,102318,2832,102320,2833,102321,2834,102322,2835,102323,2836,102324,2837,102325,2838,102326,2839,102327,2840,102330,2841,102334,2842,102335,2843,102336,2844,102337,2845,102338,2846,102339,2847,102340,2848,102341,2849,102342,2850,102343,2851,102344,2852,102345,2853,102346,2854,102347,2855,102348,2856,102349,2857,102350,2858,102351,2859,102352,2860,102353,2861,102354,2862,102355,2863,102356,2864,102357,2865,102358,2866,102361,2942,102167,2943,102169,2944,2139,2945,2140,2946,2141,2947,2142,2948,2143,2949,2144,2950,2145,2951,2146,2952,2147,2953,2036,2954,2291,2955,2153,2956,2152,2957,2151,2958,2150,2959,2149,2960,2037,2961,2038,2962,2148,2965,2244,2966,2245,3003,102091,3004,102092,3005,102190,3060,2982,3067,102139,3072,102606,3074,102608,3075,102208,3077,102210,3078,102123,3080,102119,3081,102603,3082,102602,3083,102601,3088,65163,3089,102763,3090,102363,3092,102151,3093,102152,3094,102153,3095,102154,3096,102155,3097,102145,3098,102146,3099,102147,3100,102148,3101,102149,3102,2155,3107,102172,3110,102170,3111,102171,3119,2214,3158,102234,3159,102235,3160,102236,3336,2979,3338,102006,3346,2600,3370,102126,3371,102127,3372,102130,3373,102131,3389,2577,3390,2694,3400,102184,3401,102185,3404,3359,3407,3366,3417,102675,3418,102676,3419,102677,3420,102678,3421,102707,3422,102708,3423,102709,3424,102711,3433,102651,3434,102652,3435,102671,3436,102672,3437,102710,3438,102730,3448,102095,3451,102681,3452,102682,3455,102735,3461,2063,3462,2064,3463,3073,3464,3076,3560,102742,3566,102743,3567,102744,3734,102722,3735,102723,3736,102755,3737,102756,3738,102757,3739,102758,3741,102205,3742,102206,3743,102207,3748,102211,3750,102202,3751,102203,3759,102663,3760,102463,3764,102112,3770,102090,3771,102180,3772,102181,3773,102182,3775,102186,3776,102187,3777,102188,3800,102183,3801,102189,3812,102199,3814,102609,3815,102469,3819,104990,3821,104136,3824,104137,3825,102444,3826,102443,3827,102442,3828,102441,3857,102100,3889,104991,3906,104992,4048,103201,4049,103202,4050,103203,4051,103204,4056,103205,4057,103206,4058,103207,4059,103208,4060,103209,4061,103210,4062,103211,4063,103212,4071,103213,4082,103214,4083,103215,4093,103216,4094,103217,4095,103218,4096,103219,4167,104108,4169,37252,4171,104107,4189,104110,4197,4234,4223,37223,4304,104304,4414,102201,4415,102762,4417,102764,4434,102765,4437,102647,4455,32029,4456,32018,4457,3454,4462,102439,4463,4466,4470,4469,4484,103794,4485,103795,4486,103796,4487,103797,4488,103798,4489,103799,4611,104104,4612,104111,4613,37255,4615,37247,4616,37250,4617,4140,4618,4291,4620,37211,4626,37235,4647,102362,4658,37204,4668,37201,4669,4126,4672,37217,4673,104125,4675,37220,4684,37232,4698,4631,4707,37213,4708,37231,4709,37212,4710,37238,4711,37214,4712,37237,4713,37208,4714,37215,4715,37253,4716,37216,4717,37239,4719,37219,4722,37242,4724,37233,4725,37222,4727,37224,4728,37246,4729,37226,4730,37227,4731,37228,4732,37229,4733,37230,4734,37251,4735,37259,4736,37254,4739,37205,4758,104133,4760,37001,4762,104114,4826,102214,5013,104142,5014,102331,5015,102332,5016,102333,5173,102085,5174,102086,5175,102087,5176,102088,5177,102089,5178,102040,5179,102080,5185,102081,5186,102082,5187,102083,5188,102084,5221,102066,5246,104100,5247,102490,5324,104144,5325,102420,5329,2934,5365,104143,5367,102305,5451,104132,5513,102065,5514,102067,5519,102111,5520,31461,5646,102745,5839,5388,5858,5532,5879,4474,6207,104256,6244,102769,6245,102790,6246,102770,6247,102771,6248,102793,6249,102796,6250,102772,6251,102788,6252,102775,6253,102795,6254,102781,6255,102767,6256,102774,6257,102768,6258,102797,6259,102789,6260,102780,6261,102783,6262,102787,6263,102791,6264,102777,6265,102798,6266,102779,6267,102784,6268,102792,6269,102782,6270,102785,6271,102794,6272,102773,6273,102778,6274,102786,6275,102776,6311,104141,6318,104145,6322,104287,6325,104286,6328,102046,6329,102047,6330,102048,6331,102049,6332,102050,6333,102051,6334,102052,6335,102053,6336,102054,6337,102055,6338,102056,6339,102057,6340,102058,6341,102059,6342,102382,6343,102383,6344,102384,6345,102385,6346,102386,6347,102387,6348,102388,6350,102965,6355,102975,6356,102976,6391,6141,6393,102966,6394,102977,6395,102978,6396,102979,6397,102980,6398,102981,6399,102982,6400,102983,6401,102984,6402,102985,6403,102986,6404,102988,6405,102991,6406,102987,6407,102990,6408,102989,6409,102992,6410,102993,6411,102995,6412,102994,6413,102996,6414,102962,6415,102997,6416,103003,6417,102998,6418,103004,6419,102999,6420,103005,6421,103e3,6422,103006,6423,103001,6424,103007,6425,103002,6426,103008,6427,103010,6428,103013,6429,103009,6430,103012,6431,103011,6432,103014,6433,103015,6434,103016,6435,103017,6436,103018,6437,103019,6438,103022,6439,102967,6440,103021,6441,103024,6442,103020,6443,103023,6444,103025,6445,103027,6446,103026,6447,103028,6448,103030,6449,103033,6450,103029,6451,103032,6452,103031,6453,103034,6454,103035,6455,103037,6456,103036,6457,103038,6458,103039,6459,103041,6460,103040,6461,103042,6462,103043,6463,103045,6464,103044,6465,103046,6466,103047,6467,103049,6468,103048,6469,103050,6470,103051,6471,103052,6472,103053,6473,103054,6474,103055,6475,103056,6476,103057,6477,103059,6478,103058,6479,103060,6480,103066,6481,103065,6482,103067,6483,103061,6484,103063,6485,103062,6486,103064,6487,103068,6488,103069,6489,103071,6490,103073,6491,103070,6492,103072,6493,103075,6494,103078,6495,103074,6496,103077,6497,102968,6498,103076,6499,103079,6500,103081,6501,103084,6502,103080,6503,103083,6504,103082,6505,103085,6506,103086,6507,103088,6508,102963,6509,103087,6510,103089,6511,103091,6512,103090,6513,103092,6514,103093,6515,103094,6516,103095,6518,103098,6519,103101,6520,103097,6521,103100,6522,103099,6523,103102,6524,103103,6525,103104,6526,103105,6527,103106,6528,103108,6529,103111,6530,103107,6531,103110,6532,103109,6533,103112,6534,103114,6535,103118,6536,103113,6537,103117,6538,103116,6539,103120,6540,103115,6541,103119,6542,103121,6543,103122,6544,103123,6545,103125,6546,103124,6547,103126,6548,103127,6549,103129,6550,103128,6551,103130,6552,103131,6553,103133,6554,103132,6555,103134,6556,102969,6557,102970,6558,103135,6559,103137,6560,103136,6561,103138,6562,103139,6563,103140,6564,103141,6565,103142,6566,103200,6567,103143,6568,103144,6569,103145,6570,103146,6571,103147,6572,103149,6573,103148,6574,103150,6575,103151,6576,103152,6577,103155,6578,103160,6579,102971,6580,102972,6581,103153,6582,103158,6583,103154,6584,103159,6585,103157,6586,103162,6587,103156,6588,103161,6589,103172,6590,103173,6592,103174,6593,103176,6594,103175,6595,103177,6596,103178,6597,103180,6598,103179,6599,103181,6600,103182,6601,103184,6602,103183,6603,103185,6605,103190,6606,103186,6607,103189,6608,103188,6609,103191,6610,102973,6611,103192,6612,103196,6613,103193,6614,103197,6615,103195,6616,103199,6617,103194,6618,103198,6619,103164,6620,103163,6621,103165,6625,103170,6626,103169,6627,103171,6628,102520,6629,102521,6630,102522,6631,102523,6632,102524,6633,102527,6634,102493,6635,102494,6636,102496,6637,102495,6668,104020,6669,102610,6670,102611,6671,102612,6672,102613,6673,102614,6674,102615,6675,102616,6676,102617,6677,102618,6678,102619,6679,102620,6680,102621,6681,102622,6682,102623,6683,102624,6684,102625,6685,102626,6686,102627,6687,102628,6688,102593,6689,102594,6690,102595,6691,102596,6692,102597,6783,104223,6784,102530,6785,102500,6788,102532,6789,102502,6792,102533,6793,102503,6796,102531,6797,102501,6800,102534,6801,102504,6804,102535,6805,102505,6808,102536,6809,102506,6812,102537,6813,102507,6816,102538,6817,102508,6820,102539,6821,102509,6824,102540,6825,102510,6828,102541,6829,102511,6832,102542,6833,102512,6836,102543,6837,102513,6840,102544,6841,102514,6844,102546,6845,102516,6848,102545,6849,102515,6852,102547,6853,102517,6856,102548,6857,102518,6860,102549,6861,102519,6867,102380,6868,102381,6879,103187,6880,103096,6884,102376,6885,102378,6886,102377,6887,102379,7136,6980,7139,6987,7142,102706,7692,102557,7693,102558,7694,102559,7695,102560,7696,102561,8090,103318,8091,103418,8092,103317,8093,103417,8095,103371,8096,103471,8097,103369,8098,103469,8099,103368,8100,103468,8101,103367,8102,103467,8103,103366,8104,103466,8105,103365,8106,103465,8107,103364,8108,103464,8109,103363,8110,103463,8111,103362,8112,103462,8113,103361,8114,103461,8115,103360,8116,103460,8117,103359,8118,103459,8119,103357,8120,103457,8121,103356,8122,103456,8123,103355,8124,103455,8125,103354,8126,103454,8127,103353,8128,103453,8129,103352,8130,103452,8131,103350,8132,103450,8133,103349,8134,103449,8135,103348,8136,103448,8139,103343,8140,103443,8141,103342,8142,103442,8143,103341,8144,103441,8145,103339,8146,103439,8147,103337,8148,103437,8149,103336,8150,103436,8151,103334,8152,103434,8153,103333,8154,103433,8155,103331,8156,103431,8161,103326,8162,103426,8163,103325,8164,103425,8165,103324,8166,103424,8171,103321,8172,103421,8173,103320,8177,103420,8179,103316,8180,103416,8181,103315,8182,103415,8184,103314,8185,103414,8191,103312,8193,103412,8196,103311,8197,103411,8198,103310,8200,103410,8201,103309,8202,103409,8203,103308,8204,103408,8207,103306,8208,103406,8209,103305,8210,103405,8212,103304,8213,103404,8214,103303,8216,103403,8218,103302,8220,103402,8222,103301,8224,103401,8431,104248,8441,102590,8693,102449,8826,102605,8857,54035,8858,54036,8859,54037,8860,8449,8988,104115,8989,104116,8990,104117,8991,104118,8992,104119,8993,104120,8994,104121,8995,104122,8996,104123,8997,104124,8998,104896,8999,104257,9e3,104019,9014,104010,9019,104021,9053,104011,9054,104012,9055,104013,9056,104014,9057,104015,9059,104258,9060,104179,9061,104180,9062,104181,9063,104182,9064,104183,9065,104184,9066,104185,9067,104186,21896,21891,21897,21892,21898,21893,21899,21894,26701,102124,26702,102125,26799,26747,26847,102683,26848,102684,26849,102691,26850,102692,26851,102693,26852,102704,26853,102750,26854,102751,26857,102466,26858,102467,26859,102468,26901,102128,26902,102129,27493,27492,29101,29100,29168,29118,29169,29119,29170,29120,29171,29121,29172,29122,29187,29177,29188,29178,29189,29179,29190,29180,29191,29181,29192,29182,29193,29183,29194,29184,29195,29185,29902,29900,31279,31278,31281,31291,31282,31292,31283,31293,31284,31294,31285,31295,31286,31296,31287,31297,31466,31462,31467,31463,31468,31464,31469,31465,31986,31917,31987,31918,31988,31919,31989,31920,31990,31921,31991,31922,32064,32074,32065,32075,32066,32076,32067,32077,102550,2181,102551,2182,102552,2183,102553,2184,102554,2185,102555,2186,102556,2187],pcsid:[2066,15,2136,12,2155,10,2157,5,2158,5,2159,12,2160,12,2219,5,2220,5,2244,10,2245,10,2256,11,2265,11,2266,11,2269,11,2270,11,2273,11,2290,5,2291,5,2294,5,2295,5,2313,5,2314,14,2899,10,2900,10,2901,11,2909,11,2910,11,2911,10,2912,10,2913,11,2914,11,2964,10,2967,10,2968,10,2991,5,2992,11,2993,5,2994,11,3073,5,3076,5,3079,5,3091,10,3106,5,3108,5,3109,5,3141,5,3142,5,3167,4,3337,5,3347,5,3348,5,3359,10,3360,5,3361,11,3362,5,3363,10,3364,5,3365,10,3366,14,3402,5,3403,5,3405,5,3406,5,3439,5,3440,5,3447,5,3449,5,3450,5,3453,10,3454,10,3460,5,3479,11,3480,5,3481,11,3482,5,3483,11,3484,5,3485,10,3486,5,3487,10,3488,5,3489,5,3490,10,3491,5,3492,10,3493,5,3494,10,3495,5,3496,10,3497,5,3498,10,3499,5,3500,10,3501,5,3502,10,3503,5,3504,10,3505,5,3506,10,3507,5,3508,10,3509,5,3510,10,3511,5,3512,10,3513,5,3514,5,3515,10,3516,5,3517,10,3518,5,3519,10,3520,5,3521,10,3522,5,3523,10,3524,5,3525,10,3526,5,3527,10,3528,5,3529,10,3530,5,3531,10,3532,5,3533,10,3534,5,3535,10,3536,5,3537,10,3538,5,3539,10,3540,5,3541,10,3542,5,3543,10,3544,5,3545,10,3546,5,3547,10,3548,5,3549,10,3550,5,3551,10,3552,5,3553,10,3582,10,3583,5,3584,10,3585,5,3586,10,3587,5,3588,11,3589,5,3590,11,3591,5,3592,5,3593,11,3598,10,3599,5,3600,10,3605,11,3606,5,3607,5,3608,10,3609,5,3610,10,3611,5,3612,10,3613,5,3614,10,3615,5,3616,10,3617,5,3618,10,3619,5,3620,10,3621,5,3622,10,3623,5,3624,10,3625,5,3626,10,3627,5,3628,10,3629,5,3630,10,3631,5,3632,10,3633,5,3634,11,3635,5,3636,11,3640,10,3641,5,3642,10,3643,5,3644,11,3645,5,3646,11,3647,5,3648,11,3649,5,3650,10,3651,5,3652,10,3653,5,3654,10,3655,5,3656,11,3657,5,3658,10,3659,5,3660,10,3661,5,3662,10,3663,5,3664,10,3668,10,3669,5,3670,10,3671,5,3672,10,3673,5,3674,10,3675,5,3676,11,3677,10,3678,5,3679,11,3680,10,3681,5,3682,11,3683,10,3684,5,3685,5,3686,10,3687,5,3688,10,3689,5,3690,10,3691,5,3692,10,3696,10,3697,5,3698,10,3699,5,3700,10,3740,5,3749,5,3783,5,3784,5,3793,5,3794,5,3802,5,3816,5,3829,5,3854,5,3911,5,3912,5,3920,5,3978,5,3979,5,3991,10,3992,10,4026,5,4037,5,4038,5,4087,5,4088,5,4217,10,4438,10,4439,10,4467,5,4471,5,4474,5,4559,5,4822,5,4839,5,5018,5,5048,5,5167,5,5168,5,5223,5,5234,5,5235,5,5243,5,5266,5,5316,5,5320,5,5321,5,5330,5,5331,5,5337,5,5361,5,5362,5,5382,5,5383,5,5396,5,5456,5,5457,5,5469,5,5472,9,5490,5,5518,5,5523,5,5559,5,5588,11,5589,14,5596,5,5627,5,5629,5,5641,5,5643,5,5644,5,5654,10,5655,10,5659,5,5700,5,5825,5,5836,5,5837,5,5842,5,5844,5,5880,5,5887,5,5890,5,6128,11,6129,11,6141,11,6204,5,6210,5,6211,5,6307,5,6312,5,6316,5,6362,5,6591,5,6646,5,6703,5,6786,5,6787,11,6790,5,6791,11,6794,5,6795,11,6798,5,6799,11,6802,5,6803,11,6806,5,6807,11,6810,5,6811,11,6814,5,6815,11,6818,5,6819,11,6822,5,6823,11,6826,5,6827,11,6830,5,6831,11,6834,5,6835,11,6838,5,6839,11,6842,5,6843,11,6846,5,6847,11,6850,5,6851,11,6854,5,6855,11,6858,5,6859,11,6862,5,6863,11,6870,5,6875,5,6876,5,6915,5,6922,5,6923,10,6924,5,6925,10,6962,5,6984,5,6991,5,7128,10,7131,5,7132,10,7257,5,7258,10,7259,5,7260,10,7261,5,7262,10,7263,5,7264,10,7265,5,7266,10,7267,5,7268,10,7269,5,7270,10,7271,5,7272,10,7273,5,7274,10,7275,5,7276,10,7277,5,7278,10,7279,5,7280,10,7281,5,7282,10,7283,5,7284,10,7285,5,7286,10,7287,5,7288,10,7289,5,7290,10,7291,5,7292,10,7293,5,7294,10,7295,5,7296,10,7297,5,7298,10,7299,5,7300,10,7301,5,7302,10,7303,5,7304,10,7305,5,7306,10,7307,5,7308,10,7309,5,7310,10,7311,5,7312,10,7313,5,7314,10,7315,5,7316,10,7317,5,7318,10,7319,5,7320,10,7321,5,7322,10,7323,5,7324,10,7325,5,7326,10,7327,5,7328,10,7329,5,7330,10,7331,5,7332,10,7333,5,7334,10,7335,5,7336,10,7337,5,7338,10,7339,5,7340,10,7341,5,7342,10,7343,5,7344,10,7345,5,7346,10,7347,5,7348,10,7349,5,7350,10,7351,5,7352,10,7353,5,7354,10,7355,5,7356,10,7357,5,7358,10,7359,5,7360,10,7361,5,7362,10,7363,5,7364,10,7365,5,7366,10,7367,5,7368,10,7369,5,7370,10,7877,5,7878,5,7882,5,7883,5,7887,5,7899,5,7991,5,7992,5,8035,10,8036,10,8058,5,8059,5,8082,5,8083,5,8088,5,8137,5,8138,10,8157,5,8158,10,8159,5,8160,10,8167,5,8168,10,8169,5,8170,10,8187,5,8189,10,8205,5,8206,10,8225,5,8226,10,8311,5,8312,11,8313,5,8314,11,8315,5,8316,11,8317,5,8318,11,8319,5,8320,11,8321,5,8322,11,8323,5,8324,11,8325,5,8326,11,8327,5,8328,11,8329,5,8330,11,8331,5,8332,11,8333,5,8334,11,8335,5,8336,11,8337,5,8338,11,8339,5,8340,11,8341,5,8342,11,8343,5,8344,11,8345,5,8346,11,8347,5,8348,11,8352,5,8353,5,8379,5,8380,10,8381,5,8382,10,8383,5,8384,10,8385,5,8387,10,8391,5,8395,5,8433,5,8455,5,8456,5,8531,10,8682,5,8687,5,8692,5,8903,5,8950,5,8951,5,9039,5,9040,5,9141,5,9149,5,9150,5,9191,5,9221,5,9222,5,20499,5,20538,5,20539,5,20790,5,20791,5,21291,5,21292,5,21500,5,21817,5,21818,5,22032,5,22033,5,22091,5,22092,5,22332,5,22391,5,22392,5,22700,5,22770,5,22780,5,22832,5,23090,5,23095,5,23239,5,23240,5,23433,5,23700,5,24047,5,24048,5,24100,14,24200,5,24305,5,24306,5,24382,6,24383,5,24500,5,24547,5,24548,5,24571,2,24600,5,25e3,5,25231,5,25884,5,25932,5,26237,5,26331,5,26332,5,26591,5,26592,5,26632,5,26692,5,26855,10,26856,10,27120,5,27200,5,27291,7,27292,7,27429,5,27492,5,27500,5,27700,5,28232,5,28600,5,28991,5,28992,5,29100,5,29220,5,29221,5,29333,5,29635,5,29636,5,29701,5,29738,5,29739,5,29849,5,29850,5,29871,3,29872,13,29873,5,29900,5,29901,5,29903,5,30200,15,30339,5,30340,5,30791,5,30792,5,31028,5,31121,5,31154,5,31170,5,31171,5,31370,5,31528,5,31529,5,31600,5,31700,5,31838,5,31839,5,31901,5,32061,5,32062,5,32098,5,32099,10,32100,5,32104,5,32161,5,32766,5,53048,5,53049,5,54090,5,54091,5,65061,10,65062,10,65161,5,65163,5,102041,10,102064,8,102068,1,102069,0,102118,10,102119,11,102120,10,102121,10,102217,10,102218,5,102219,10,102220,10,102378,11,102379,11,102380,5,102381,11,102498,5,102499,5,102589,10,102590,5,102599,10,102600,10,102604,10,102605,5,102606,5,102647,5,102704,10,102705,10,102706,5,102733,10,102761,10,102762,5,102763,10,102764,5,102765,5,102766,10,102962,5,102963,5,102970,11,102974,10,102993,5,102994,5,102995,10,102996,10,103015,5,103016,10,103017,5,103018,10,103025,5,103026,5,103027,10,103028,10,103035,5,103036,5,103037,10,103038,10,103039,5,103040,5,103041,10,103042,10,103043,5,103044,5,103045,10,103046,10,103047,5,103048,5,103049,10,103050,10,103051,5,103052,10,103053,5,103054,10,103055,5,103056,10,103057,5,103058,5,103059,10,103060,10,103061,5,103062,5,103063,10,103064,10,103069,10,103070,5,103071,5,103072,10,103073,10,103086,5,103087,5,103088,10,103089,10,103094,11,103095,5,103096,10,103103,5,103104,10,103105,5,103106,10,103121,5,103122,10,103123,5,103124,5,103125,11,103126,11,103127,5,103128,5,103129,10,103130,10,103131,5,103132,5,103133,10,103134,10,103135,5,103136,5,103137,11,103138,11,103139,5,103140,10,103141,5,103142,10,103143,5,103144,10,103145,5,103146,11,103147,5,103148,5,103149,10,103150,10,103151,5,103152,10,103172,5,103173,10,103174,5,103175,5,103176,10,103177,10,103178,5,103179,5,103180,10,103181,10,103182,5,103183,5,103184,10,103185,10,103228,5,103229,5,103230,10,103231,10,103250,5,103251,10,103252,5,103253,10,103260,5,103261,5,103262,10,103263,10,103270,5,103271,5,103272,10,103273,10,103274,5,103275,5,103276,10,103277,10,103278,5,103279,5,103280,10,103281,10,103282,5,103283,5,103284,10,103285,10,103286,5,103287,10,103288,5,103289,10,103290,5,103291,10,103292,5,103293,5,103294,10,103295,10,103296,5,103297,5,103298,10,103299,10,103376,10,103377,5,103378,5,103379,10,103380,10,103393,5,103394,5,103395,10,103396,10,103472,5,103473,11,103474,5,103475,10,103482,5,103483,10,103484,5,103485,10,103500,5,103501,10,103502,5,103503,5,103504,11,103505,11,103506,5,103507,5,103508,10,103509,10,103510,5,103511,5,103512,10,103513,10,103514,5,103515,10,103516,5,103517,10,103518,5,103519,10,103520,5,103521,11,103522,5,103523,5,103524,10,103525,10,103526,5,103527,10,103561,10,103562,10,103563,5,103564,5,103565,10,103566,10,103567,5,103568,5,103569,10,103570,10,103585,10,103586,5,103587,10,103588,11,103589,5,103590,10,103591,11,103592,5,103593,10,103594,11,103695,10,103846,5,103946,10],pcsidc:[[2e3,2045,5],[2056,2065,5],[2067,2135,5],[2137,2153,5],[2161,2170,5],[2172,2193,5],[2196,2198,5],[2200,2203,5],[2206,2217,5],[2222,2224,11],[2251,2253,11],[2280,2282,11],[2308,2311,5],[2315,2325,5],[2327,2394,5],[2400,2491,5],[2494,2758,5],[2867,2869,11],[2870,2888,10],[2891,2895,10],[2896,2898,11],[2902,2908,10],[2915,2920,10],[2921,2923,11],[2924,2930,10],[2931,2941,5],[2969,2973,5],[2975,2982,5],[2984,2988,5],[2995,3002,5],[3006,3051,5],[3054,3059,5],[3061,3066,5],[3068,3071,5],[3084,3087,5],[3112,3118,5],[3120,3138,5],[3146,3151,5],[3153,3157,5],[3161,3166,5],[3168,3172,5],[3174,3203,5],[3294,3313,5],[3315,3335,5],[3339,3345,5],[3350,3358,5],[3367,3369,5],[3374,3388,5],[3391,3399,5],[3408,3416,5],[3425,3432,10],[3441,3446,10],[3456,3459,10],[3465,3478,5],[3554,3559,5],[3561,3565,10],[3568,3570,10],[3571,3581,5],[3594,3597,5],[3601,3604,5],[3637,3639,5],[3665,3667,5],[3693,3695,5],[3701,3727,5],[3728,3733,10],[3744,3747,5],[3753,3758,10],[3761,3763,5],[3765,3769,5],[3779,3781,5],[3788,3791,5],[3797,3799,5],[3832,3841,5],[3844,3852,5],[3873,3885,5],[3890,3893,5],[3942,3950,5],[3968,3970,5],[3973,3976,5],[3986,3989,5],[3994,3997,5],[4390,4398,5],[4399,4413,10],[4418,4433,10],[4491,4554,5],[4568,4589,5],[4652,4656,5],[4766,4800,5],[5069,5072,5],[5105,5130,5],[5180,5184,5],[5253,5259,5],[5269,5275,5],[5292,5311,5],[5343,5349,5],[5355,5357,5],[5387,5389,5],[5459,5463,5],[5479,5482,5],[5530,5539,5],[5550,5552,5],[5562,5583,5],[5623,5625,10],[5631,5639,5],[5649,5653,5],[5663,5680,5],[5682,5685,5],[5875,5877,5],[5896,5899,5],[5921,5940,5],[6050,6125,5],[6351,6354,5],[6366,6372,5],[6381,6387,5],[6622,6624,5],[6707,6709,5],[6720,6723,5],[6732,6738,5],[6931,6933,5],[7005,7007,5],[7057,7070,10],[7074,7082,5],[7109,7118,5],[7119,7127,11],[7374,7376,5],[7528,7586,5],[7587,7645,10],[7755,7787,5],[7791,7795,5],[7799,7801,5],[7803,7805,5],[7825,7831,5],[7845,7859,5],[8013,8032,5],[8065,8068,11],[8518,8529,10],[8533,8536,10],[8538,8540,10],[8677,8679,5],[8836,8840,5],[8908,8910,5],[9154,9159,5],[9205,9218,5],[20002,20032,5],[20062,20092,5],[20135,20138,5],[20248,20258,5],[20348,20358,5],[20436,20440,5],[20822,20824,5],[20934,20936,5],[21035,21037,5],[21095,21097,5],[21148,21150,5],[21413,21423,5],[21473,21483,5],[21780,21782,5],[21891,21894,5],[22171,22177,5],[22181,22187,5],[22191,22197,5],[22234,22236,5],[22521,22525,5],[22991,22994,5],[23028,23038,5],[23830,23853,5],[23866,23872,5],[23877,23884,5],[23886,23894,5],[23946,23948,5],[24311,24313,5],[24342,24347,5],[24370,24374,6],[24375,24381,5],[24718,24721,5],[24817,24821,5],[24877,24882,5],[24891,24893,5],[25391,25395,5],[25828,25838,5],[26191,26195,5],[26391,26393,5],[26703,26722,5],[26729,26760,10],[26766,26798,10],[26860,26870,10],[26891,26899,5],[26903,26923,5],[26929,26946,5],[26948,26998,5],[27037,27040,5],[27205,27232,5],[27258,27260,5],[27391,27398,5],[27561,27564,5],[27571,27574,5],[27581,27584,5],[27591,27594,5],[28191,28193,5],[28348,28358,5],[28402,28432,5],[28462,28492,5],[29118,29122,5],[29177,29185,5],[30161,30179,5],[30491,30494,5],[30729,30732,5],[31251,31259,5],[31265,31268,5],[31275,31278,5],[31288,31297,5],[31461,31465,5],[31491,31495,5],[31917,31922,5],[31965,31985,5],[31992,32e3,5],[32001,32003,10],[32005,32031,10],[32033,32060,10],[32074,32077,10],[32081,32086,5],[32107,32130,5],[32133,32158,5],[32164,32167,10],[32180,32199,5],[32201,32260,5],[32301,32360,5],[32601,32662,5],[32664,32667,10],[32701,32761,5],[53001,53004,5],[53008,53019,5],[53021,53032,5],[53034,53037,5],[53042,53046,5],[53074,53080,5],[54001,54004,5],[54008,54019,5],[54021,54032,5],[54034,54037,5],[54042,54046,5],[54048,54053,5],[54074,54080,5],[54098,54101,5],[102001,102040,5],[102042,102063,5],[102065,102067,5],[102070,102112,5],[102114,102117,5],[102122,102208,5],[102210,102216,5],[102221,102300,5],[102304,102377,5],[102382,102388,5],[102389,102398,10],[102399,102444,5],[102445,102447,10],[102448,102458,5],[102459,102468,10],[102469,102496,5],[102500,102519,11],[102520,102524,5],[102525,102529,10],[102530,102549,5],[102557,102588,5],[102593,102598,5],[102601,102603,5],[102608,102628,5],[102629,102646,10],[102648,102672,10],[102675,102700,10],[102701,102703,5],[102707,102730,10],[102735,102758,10],[102767,102900,5],[102965,102969,5],[102971,102973,5],[102975,102989,5],[102990,102992,11],[102997,103002,5],[103003,103008,10],[103009,103011,5],[103012,103014,10],[103019,103021,5],[103022,103024,10],[103029,103031,5],[103032,103034,10],[103065,103068,5],[103074,103076,5],[103077,103079,11],[103080,103082,5],[103083,103085,10],[103090,103093,5],[103097,103099,5],[103100,103102,10],[103107,103109,5],[103110,103112,10],[103113,103116,5],[103117,103120,10],[103153,103157,5],[103158,103162,10],[103163,103165,5],[103166,103168,11],[103169,103171,10],[103186,103188,5],[103189,103191,10],[103192,103195,5],[103196,103199,10],[103200,103224,5],[103225,103227,11],[103232,103237,5],[103238,103243,10],[103244,103246,5],[103247,103249,10],[103254,103256,5],[103257,103259,10],[103264,103266,5],[103267,103269,10],[103300,103375,5],[103381,103383,5],[103384,103386,11],[103387,103389,5],[103390,103392,10],[103397,103399,5],[103400,103471,10],[103476,103478,5],[103479,103481,10],[103486,103488,5],[103489,103491,10],[103492,103495,5],[103496,103499,10],[103539,103543,5],[103544,103548,10],[103549,103551,5],[103552,103554,11],[103555,103557,10],[103558,103560,5],[103571,103573,5],[103574,103576,10],[103577,103580,5],[103581,103583,10],[103595,103597,5],[103600,103694,5],[103696,103698,5],[103700,103793,10],[103794,103799,5]],gcsid:[4001,81,4002,85,4003,70,4004,84,4005,82,4006,83,4007,60,4008,67,4009,39,4010,57,4011,63,4012,64,4013,64,4014,63,4015,92,4016,90,4018,86,4019,75,4020,68,4021,70,4022,55,4023,75,4024,66,4025,73,4027,95,4028,59,4029,58,4031,75,4032,78,4033,77,4034,65,4035,100,4036,70,4042,88,4044,87,4045,89,4046,75,4047,99,4052,101,4053,97,4054,61,4075,75,4081,75,4120,84,4121,75,4122,80,4123,55,4124,84,4126,75,4130,75,4131,92,4132,64,4133,75,4134,64,4140,75,4141,75,4142,64,4143,64,4144,92,4145,87,4146,89,4147,66,4148,75,4149,84,4150,84,4151,75,4152,75,4153,55,4154,55,4155,63,4156,84,4157,60,4162,84,4163,75,4164,66,4165,55,4166,75,4168,58,4170,75,4172,75,4173,75,4174,58,4175,64,4176,75,4178,66,4179,66,4180,75,4188,81,4190,75,4191,66,4192,55,4193,63,4198,64,4199,55,4200,66,4201,64,4202,70,4203,70,4204,55,4205,66,4206,63,4207,55,4208,55,4209,64,4210,64,4211,84,4212,64,4213,63,4214,66,4215,55,4216,67,4218,55,4219,84,4220,64,4221,55,4222,64,4224,55,4225,55,4229,68,4230,55,4231,55,4232,64,4234,64,4235,55,4236,55,4237,70,4238,70,4239,92,4240,92,4241,65,4242,67,4243,88,4244,92,4245,86,4246,64,4250,64,4251,64,4252,63,4253,67,4254,55,4255,55,4256,64,4257,84,4258,75,4259,55,4260,64,4261,106,4262,84,4263,64,4265,55,4266,63,4267,67,4269,75,4270,64,4271,55,4272,55,4273,82,4274,55,4275,63,4276,73,4280,84,4281,57,4282,63,4283,75,4284,66,4285,55,4286,68,4288,55,4289,84,4291,70,4292,55,4293,83,4294,84,4295,84,4296,63,4297,55,4298,90,4299,85,4300,85,4301,84,4302,60,4303,68,4306,84,4307,64,4308,84,4309,55,4310,63,4311,55,4312,84,4313,55,4314,84,4315,63,4316,55,4317,66,4318,75,4319,75,4322,80,4324,80,4326,75,4466,75,4469,75,4475,55,4483,75,4490,75,4555,66,4558,75,4608,67,4609,67,4610,74,4614,55,4619,75,4624,75,4625,55,4627,75,4636,55,4637,55,4638,67,4639,55,4657,93,4659,75,4660,55,4661,75,4666,84,4667,75,4670,75,4671,63,4674,75,4679,64,4680,64,4682,92,4683,67,4686,75,4687,75,4693,75,4694,75,4695,67,4696,64,4697,64,4702,75,4703,64,4704,55,4705,55,4706,68,4718,55,4720,80,4721,55,4723,67,4726,67,4737,75,4738,60,4740,79,4741,55,4742,75,4743,64,4744,64,4745,84,4746,84,4747,75,4748,56,4749,75,4750,75,4751,91,4752,56,4753,55,4754,55,4759,75,4761,75,4801,84,4802,55,4803,55,4804,84,4805,84,4806,55,4807,106,4808,84,4809,55,4810,105,4811,106,4816,106,4817,82,4818,84,4820,84,4821,106,4823,55,4824,55,4901,107,4902,107,4903,59,4904,84,5228,84,5229,84,5233,92,5252,75,5264,75,5340,75,5354,75,5360,75,5371,75,5373,75,5381,75,5393,75,5464,60,5467,67,5489,75,5524,55,5527,70,5546,75,5561,66,5593,75,5681,84,5886,75,6135,75,6365,75,6706,75,6881,64,6882,64,6883,55,6892,64,6894,64,6980,75,6983,75,6987,75,6990,75,7035,75,7037,75,7039,75,7041,75,7073,75,7084,75,7086,75,7133,75,7373,75,7683,76,7798,75,7844,75,7881,75,7886,75,8042,96,8043,96,8086,75,8232,75,8237,75,8240,75,8246,75,8249,75,8252,75,8255,75,8351,84,8427,75,8428,55,8449,75,8545,75,8685,75,8694,64,8699,75,8818,75,8888,75,8900,75,8902,75,8907,75,8949,75,9003,75,9006,75,9009,75,9012,75,9017,75,9068,75,9069,75,9140,75,9148,75,9153,75,37001,73,37002,69,37003,72,37004,71,37005,62,37006,91,37007,94,37008,101,37201,55,37202,92,37203,87,37204,55,37205,55,37206,64,37207,71,37208,64,37211,64,37220,67,37221,55,37222,55,37223,63,37224,55,37225,106,37226,55,37227,55,37228,64,37229,62,37230,55,37231,70,37232,55,37233,55,37235,55,37237,55,37238,55,37239,67,37240,64,37241,55,37242,55,37243,67,37252,67,37253,55,37254,64,37255,84,37257,66,37259,55,37260,67,104017,79,104018,79,104024,75,104027,75,104047,98,104050,75,104100,75,104101,84,104102,84,104103,64,104104,55,104105,84,104106,55,104107,75,104108,75,104109,67,104110,75,104111,75,104112,67,104113,67,104128,102,104129,75,104130,55,104131,84,104132,67,104133,75,104134,75,104135,66,104136,70,104137,75,104138,55,104139,106,104140,106,104223,75,104248,55,104256,92,104261,63,104286,75,104287,75,104304,63,104700,49,104701,9,104702,24,104703,15,104704,28,104705,32,104706,53,104707,46,104708,37,104709,54,104710,11,104711,14,104712,30,104713,52,104714,4,104715,4,104716,23,104717,14,104718,48,104719,29,104720,22,104721,21,104722,35,104723,21,104724,46,104725,22,104726,49,104727,45,104728,52,104729,10,104730,10,104731,21,104732,31,104733,26,104734,40,104735,19,104736,30,104737,34,104738,27,104739,46,104740,5,104741,12,104742,50,104743,9,104744,43,104745,21,104746,26,104747,25,104748,21,104749,7,104750,53,104751,6,104752,33,104753,29,104754,19,104755,41,104756,31,104757,3,104758,41,104759,25,104760,49,104761,41,104762,44,104763,50,104764,46,104765,6,104766,40,104767,16,104768,8,104769,17,104770,48,104771,42,104772,50,104773,25,104774,29,104775,25,104776,32,104777,13,104778,36,104779,47,104780,14,104781,29,104782,23,104783,38,104784,42,104785,18,104786,20,104808,51,104896,75,104900,112,104901,104,104902,103,104903,116,104904,109,104905,108,104906,169,104907,164,104908,0,104909,168,104910,141,104911,166,104912,114,104913,160,104914,151,104915,117,104916,110,104917,140,104918,115,104919,170,104920,163,104921,154,104922,158,104923,161,104924,148,104925,0,104926,159,104927,167,104928,127,104929,131,104930,145,104931,159,104932,136,104933,123,104934,139,104935,134,104936,166,104937,150,104938,137,104939,147,104940,121,104941,165,104942,128,104943,111,104944,1,104945,126,104946,152,104947,157,104948,162,104949,153,104950,156,104951,149,104952,132,104953,122,104954,160,104955,146,104956,143,104957,156,104958,120,104959,125,104960,2,104961,144,104962,142,104963,138,104964,155,104965,135,104966,133,104967,151,104968,118,104969,119,104970,124,104971,108,104972,129,104973,130,104974,113,104975,0,104990,84,104991,75,104992,84],gcsidc:[[4127,4129,67],[4135,4139,67],[4158,4161,55],[4181,4185,55],[4194,4196,55],[4226,4228,63],[4247,4249,55],[4277,4279,81],[4600,4607,64],[4621,4623,55],[4628,4633,55],[4641,4646,55],[4662,4665,55],[4676,4678,66],[4688,4692,55],[4699,4701,64],[4755,4757,75],[4763,4765,75],[4813,4815,84],[8972,8987,75],[37212,37219,55],[37245,37247,55],[37249,37251,55],[104009,104015,75],[104019,104022,75],[104114,104124,75],[104125,104127,55],[104141,104145,75],[104179,104186,75],[104257,104260,75]]},w={c:[[2e3,2035,9001],[2039,2045,9001],[2056,2062,9001],[2067,2090,9001],[2093,2135,9001],[2161,2165,9001],[2172,2180,9001],[2188,2193,9001],[2195,2198,9001],[2200,2203,9001],[2205,2213,9001],[2215,2217,9001],[2222,2224,9002],[2225,2243,9003],[2246,2250,9003],[2251,2253,9002],[2257,2264,9003],[2274,2279,9003],[2280,2282,9002],[2283,2289,9003],[2308,2313,9001],[2315,2491,9001],[2494,2576,9001],[2578,2599,9001],[2601,2693,9001],[2695,2866,9001],[2867,2869,9002],[2870,2888,9003],[2891,2895,9003],[2896,2898,9002],[2902,2908,9003],[2915,2920,9003],[2921,2923,9002],[2924,2930,9003],[2931,2933,9001],[2935,2962,9001],[2964,2968,9003],[2969,2973,9001],[2975,2978,9001],[2984,2988,9001],[2995,3051,9001],[3054,3072,9001],[3077,3079,9001],[3081,3088,9001],[3092,3101,9001],[3106,3138,9001],[3146,3151,9001],[3153,3166,9001],[3168,3172,9001],[3174,3203,9001],[3294,3313,9001],[3315,3348,9001],[3350,3358,9001],[3367,3403,9001],[3408,3416,9001],[3417,3438,9003],[3441,3446,9003],[3447,3450,9001],[3451,3453,9003],[3455,3459,9003],[3460,3478,9001],[3554,3559,9001],[3560,3570,9003],[3571,3581,9001],[3594,3597,9001],[3601,3604,9001],[3637,3639,9001],[3665,3667,9001],[3693,3695,9001],[3701,3727,9001],[3728,3739,9003],[3740,3751,9001],[3753,3760,9003],[3761,3773,9001],[3775,3777,9001],[3779,3781,9001],[3788,3791,9001],[3797,3802,9001],[3814,3816,9001],[3825,3829,9001],[3832,3841,9001],[3844,3852,9001],[3873,3885,9001],[3890,3893,9001],[3942,3950,9001],[3968,3970,9001],[3973,3976,9001],[3986,3989,9001],[3994,3997,9001],[4001,4016,9102],[4018,4025,9102],[4027,4029,9102],[4031,4036,9102],[4044,4047,9102],[4048,4051,9001],[4052,4054,9102],[4056,4063,9001],[4093,4096,9001],[4120,4124,9102],[4127,4139,9102],[4141,4176,9102],[4178,4185,9102],[4188,4216,9102],[4218,4232,9102],[4235,4260,9102],[4265,4267,9102],[4269,4286,9102],[4292,4304,9102],[4306,4319,9102],[4390,4398,9001],[4399,4413,9003],[4418,4433,9003],[4455,4457,9003],[4484,4489,9001],[4491,4554,9001],[4568,4589,9001],[4600,4630,9102],[4636,4639,9102],[4641,4646,9102],[4652,4656,9001],[4657,4680,9102],[4682,4684,9102],[4686,4765,9102],[4766,4800,9001],[4801,4806,9102],[4813,4815,9102],[5014,5016,9001],[5069,5072,9001],[5105,5130,9001],[5173,5188,9001],[5253,5259,9001],[5269,5275,9001],[5292,5311,9001],[5329,5331,9001],[5343,5349,9001],[5355,5357,9001],[5459,5463,9001],[5479,5482,9001],[5518,5520,9001],[5533,5539,9001],[5550,5552,9001],[5562,5583,9001],[5623,5625,9003],[5631,5639,9001],[5649,5653,9001],[5663,5680,9001],[5682,5685,9001],[5875,5877,9001],[5896,5899,9001],[5921,5940,9001],[6050,6125,9001],[6244,6275,9001],[6328,6348,9001],[6350,6356,9001],[6366,6372,9001],[6381,6387,9001],[6393,6404,9001],[6480,6483,9001],[6511,6514,9001],[6579,6581,9001],[6619,6624,9001],[6625,6627,9003],[6628,6632,9001],[6634,6637,9001],[6669,6692,9001],[6707,6709,9001],[6720,6723,9001],[6732,6738,9001],[6881,6883,9102],[6931,6933,9001],[7005,7007,9001],[7057,7070,9003],[7074,7082,9001],[7109,7118,9001],[7119,7127,9002],[7374,7376,9001],[7528,7586,9001],[7587,7645,9003],[7692,7696,9001],[7755,7787,9001],[7791,7795,9001],[7799,7801,9001],[7803,7805,9001],[7825,7831,9001],[7845,7859,9001],[8013,8032,9001],[8065,8068,9002],[8518,8529,9003],[8533,8536,9003],[8538,8540,9003],[8677,8679,9001],[8836,8840,9001],[8857,8859,9001],[8908,8910,9001],[8972,9e3,9102],[9053,9057,9102],[9059,9069,9102],[9154,9159,9001],[9205,9218,9001],[20002,20032,9001],[20062,20092,9001],[20135,20138,9001],[20248,20258,9001],[20348,20358,9001],[20436,20440,9001],[20822,20824,9001],[20934,20936,9001],[21035,21037,9001],[21095,21097,9001],[21148,21150,9001],[21413,21423,9001],[21473,21483,9001],[21780,21782,9001],[21896,21899,9001],[22171,22177,9001],[22181,22187,9001],[22191,22197,9001],[22234,22236,9001],[22521,22525,9001],[22991,22994,9001],[23028,23038,9001],[23830,23853,9001],[23866,23872,9001],[23877,23884,9001],[23886,23894,9001],[23946,23948,9001],[24311,24313,9001],[24342,24347,9001],[24370,24374,9084],[24375,24381,9001],[24718,24721,9001],[24817,24821,9001],[24877,24882,9001],[24891,24893,9001],[25391,25395,9001],[25828,25838,9001],[26191,26195,9001],[26391,26393,9001],[26701,26722,9001],[26729,26746,9003],[26748,26760,9003],[26766,26799,9003],[26847,26870,9003],[26891,26899,9001],[26901,26923,9001],[26929,26946,9001],[26948,26978,9001],[26980,26998,9001],[27037,27040,9001],[27205,27232,9001],[27258,27260,9001],[27391,27398,9001],[27561,27564,9001],[27571,27574,9001],[27581,27584,9001],[27591,27594,9001],[28191,28193,9001],[28348,28358,9001],[28402,28432,9001],[28462,28492,9001],[29168,29172,9001],[29187,29195,9001],[29901,29903,9001],[30161,30179,9001],[30491,30494,9001],[30729,30732,9001],[31251,31259,9001],[31265,31268,9001],[31275,31277,9001],[31281,31290,9001],[31466,31469,9001],[31491,31495,9001],[31965,32e3,9001],[32001,32003,9003],[32005,32017,9003],[32019,32028,9003],[32033,32035,9003],[32037,32060,9003],[32064,32067,9003],[32081,32086,9001],[32107,32130,9001],[32133,32158,9001],[32164,32167,9003],[32180,32199,9001],[32201,32260,9001],[32301,32360,9001],[32601,32662,9001],[32664,32667,9003],[32701,32761,9001],[37002,37008,9102],[53001,53004,9001],[53008,53019,9001],[53021,53032,9001],[53034,53037,9001],[53042,53046,9001],[53074,53080,9001],[54001,54004,9001],[54008,54019,9001],[54021,54032,9001],[54042,54046,9001],[54048,54053,9001],[54074,54080,9001],[54098,54101,9001],[102001,102005,9001],[102007,102039,9001],[102042,102045,9001],[102060,102063,9001],[102070,102079,9001],[102096,102099,9001],[102101,102109,9001],[102114,102117,9001],[102132,102138,9001],[102141,102144,9001],[102156,102166,9001],[102173,102179,9001],[102191,102198,9001],[102221,102228,9001],[102231,102233,9001],[102237,102240,9001],[102364,102375,9001],[102389,102398,9003],[102399,102419,9001],[102421,102438,9001],[102445,102447,9003],[102450,102458,9001],[102459,102462,9003],[102470,102489,9001],[102550,102556,9001],[102562,102588,9001],[102629,102640,9003],[102648,102650,9003],[102688,102690,9003],[102696,102700,9003],[102701,102703,9001],[102799,102900,9001],[103166,103168,9002],[103220,103224,9001],[103225,103227,9002],[103232,103237,9001],[103238,103243,9003],[103244,103246,9001],[103247,103249,9003],[103254,103256,9001],[103257,103259,9003],[103264,103266,9001],[103267,103269,9003],[103327,103330,9001],[103344,103347,9001],[103372,103375,9001],[103381,103383,9001],[103384,103386,9002],[103387,103389,9001],[103390,103392,9003],[103397,103399,9001],[103427,103430,9003],[103444,103447,9003],[103476,103478,9001],[103479,103481,9003],[103486,103488,9001],[103489,103491,9003],[103492,103495,9001],[103496,103499,9003],[103539,103543,9001],[103544,103548,9003],[103549,103551,9001],[103552,103554,9002],[103555,103557,9003],[103558,103560,9001],[103571,103573,9001],[103574,103576,9003],[103577,103580,9001],[103581,103583,9003],[103595,103597,9001],[103600,103694,9001],[103696,103698,9001],[103700,103793,9003],[104101,104103,9102],[104126,104131,9102],[104259,104261,9102],[104700,104786,9102],[104900,104975,9102]],nc:[2065,9001,2066,9039,2136,9094,2137,9001,2138,9001,2154,9001,2157,9001,2158,9001,2159,9094,2160,9094,2169,9001,2170,9001,2204,9003,2219,9001,2220,9001,2254,9003,2255,9003,2256,9002,2265,9002,2266,9002,2267,9003,2268,9003,2269,9002,2270,9002,2271,9003,2272,9003,2273,9002,2290,9001,2294,9001,2295,9001,2314,9005,2899,9003,2900,9003,2901,9002,2909,9002,2910,9002,2911,9003,2912,9003,2913,9002,2914,9002,2980,9001,2981,9001,2991,9001,2992,9002,2993,9001,2994,9002,3074,9001,3075,9001,3080,9002,3089,9003,3090,9001,3091,9003,3102,9003,3141,9001,3142,9001,3167,9301,3360,9001,3361,9002,3362,9001,3363,9003,3364,9001,3365,9003,3404,9003,3405,9001,3406,9001,3407,9005,3439,9001,3440,9001,3479,9002,3480,9001,3481,9002,3482,9001,3483,9002,3484,9001,3485,9003,3486,9001,3487,9003,3488,9001,3489,9001,3490,9003,3491,9001,3492,9003,3493,9001,3494,9003,3495,9001,3496,9003,3497,9001,3498,9003,3499,9001,3500,9003,3501,9001,3502,9003,3503,9001,3504,9003,3505,9001,3506,9003,3507,9001,3508,9003,3509,9001,3510,9003,3511,9001,3512,9003,3513,9001,3514,9001,3515,9003,3516,9001,3517,9003,3518,9001,3519,9003,3520,9001,3521,9003,3522,9001,3523,9003,3524,9001,3525,9003,3526,9001,3527,9003,3528,9001,3529,9003,3530,9001,3531,9003,3532,9001,3533,9003,3534,9001,3535,9003,3536,9001,3537,9003,3538,9001,3539,9003,3540,9001,3541,9003,3542,9001,3543,9003,3544,9001,3545,9003,3546,9001,3547,9003,3548,9001,3549,9003,3550,9001,3551,9003,3552,9001,3553,9003,3582,9003,3583,9001,3584,9003,3585,9001,3586,9003,3587,9001,3588,9002,3589,9001,3590,9002,3591,9001,3592,9001,3593,9002,3598,9003,3599,9001,3600,9003,3605,9002,3606,9001,3607,9001,3608,9003,3609,9001,3610,9003,3611,9001,3612,9003,3613,9001,3614,9003,3615,9001,3616,9003,3617,9001,3618,9003,3619,9001,3620,9003,3621,9001,3622,9003,3623,9001,3624,9003,3625,9001,3626,9003,3627,9001,3628,9003,3629,9001,3630,9003,3631,9001,3632,9003,3633,9001,3634,9002,3635,9001,3636,9002,3640,9003,3641,9001,3642,9003,3643,9001,3644,9002,3645,9001,3646,9002,3647,9001,3648,9002,3649,9001,3650,9003,3651,9001,3652,9003,3653,9001,3654,9003,3655,9001,3656,9002,3657,9001,3658,9003,3659,9001,3660,9003,3661,9001,3662,9003,3663,9001,3664,9003,3668,9003,3669,9001,3670,9003,3671,9001,3672,9003,3673,9001,3674,9003,3675,9001,3676,9002,3677,9003,3678,9001,3679,9002,3680,9003,3681,9001,3682,9002,3683,9003,3684,9001,3685,9001,3686,9003,3687,9001,3688,9003,3689,9001,3690,9003,3691,9001,3692,9003,3696,9003,3697,9001,3698,9003,3699,9001,3700,9003,3783,9001,3784,9001,3793,9001,3794,9001,3812,9001,3819,9102,3821,9102,3824,9102,3854,9001,3857,9001,3889,9102,3906,9102,3911,9001,3912,9001,3920,9001,3978,9001,3979,9001,3991,9003,3992,9003,4026,9001,4037,9001,4038,9001,4042,9102,4071,9001,4075,9102,4081,9102,4082,9001,4083,9001,4087,9001,4088,9001,4217,9003,4261,9105,4262,9102,4263,9102,4288,9102,4289,9102,4322,9102,4324,9102,4326,9102,4414,9001,4415,9001,4417,9001,4434,9001,4437,9001,4438,9003,4439,9003,4462,9001,4463,9102,4467,9001,4470,9102,4471,9001,4475,9102,4483,9102,4490,9102,4555,9102,4558,9102,4559,9001,4632,9102,4633,9102,4647,9001,4807,9105,4808,9102,4809,9102,4810,9105,4811,9105,4816,9105,4817,9102,4818,9102,4820,9102,4821,9105,4822,9001,4823,9102,4824,9102,4826,9001,4839,9001,4901,9105,4902,9105,4903,9102,4904,9102,5013,9102,5018,9001,5048,9001,5167,9001,5168,9001,5221,9001,5223,9001,5228,9102,5229,9102,5233,9102,5234,9001,5235,9001,5243,9001,5246,9102,5247,9001,5252,9102,5264,9102,5266,9001,5316,9001,5320,9001,5321,9001,5324,9102,5325,9001,5337,9001,5340,9102,5354,9102,5360,9102,5361,9001,5362,9001,5365,9102,5367,9001,5371,9102,5373,9102,5381,9102,5382,9001,5383,9001,5387,9001,5389,9001,5393,9102,5396,9001,5451,9102,5456,9001,5457,9001,5464,9102,5467,9102,5469,9001,5472,9037,5489,9102,5490,9001,5513,9001,5514,9001,5523,9001,5524,9102,5527,9102,5530,9001,5531,9001,5546,9102,5559,9001,5561,9102,5588,9002,5589,9005,5593,9102,5596,9001,5627,9001,5629,9001,5641,9001,5643,9001,5644,9001,5646,9003,5654,9003,5655,9003,5659,9001,5681,9102,5700,9001,5825,9001,5836,9001,5837,9001,5839,9001,5842,9001,5844,9001,5858,9001,5879,9001,5880,9001,5886,9102,5887,9001,5890,9001,6128,9002,6129,9002,6135,9102,6204,9001,6207,9102,6210,9001,6211,9001,6307,9001,6311,9102,6312,9001,6316,9001,6318,9102,6322,9102,6325,9102,6362,9001,6365,9102,6391,9002,6405,9002,6406,9001,6407,9002,6408,9001,6409,9002,6410,9001,6411,9003,6412,9001,6413,9003,6414,9001,6415,9001,6416,9003,6417,9001,6418,9003,6419,9001,6420,9003,6421,9001,6422,9003,6423,9001,6424,9003,6425,9001,6426,9003,6427,9001,6428,9003,6429,9001,6430,9003,6431,9001,6432,9003,6433,9001,6434,9003,6435,9001,6436,9003,6437,9001,6438,9003,6439,9001,6440,9001,6441,9003,6442,9001,6443,9003,6444,9001,6445,9003,6446,9001,6447,9003,6448,9001,6449,9003,6450,9001,6451,9003,6452,9001,6453,9003,6454,9001,6455,9003,6456,9001,6457,9003,6458,9001,6459,9003,6460,9001,6461,9003,6462,9001,6463,9003,6464,9001,6465,9003,6466,9001,6467,9003,6468,9001,6469,9003,6470,9001,6471,9003,6472,9001,6473,9003,6474,9001,6475,9003,6476,9001,6477,9003,6478,9001,6479,9003,6484,9003,6485,9001,6486,9003,6487,9001,6488,9003,6489,9001,6490,9003,6491,9001,6492,9003,6493,9001,6494,9002,6495,9001,6496,9002,6497,9001,6498,9001,6499,9002,6500,9001,6501,9003,6502,9001,6503,9003,6504,9001,6505,9003,6506,9001,6507,9003,6508,9001,6509,9001,6510,9003,6515,9002,6516,9001,6518,9001,6519,9003,6520,9001,6521,9003,6522,9001,6523,9003,6524,9001,6525,9003,6526,9001,6527,9003,6528,9001,6529,9003,6530,9001,6531,9003,6532,9001,6533,9003,6534,9001,6535,9003,6536,9001,6537,9003,6538,9001,6539,9003,6540,9001,6541,9003,6542,9001,6543,9003,6544,9001,6545,9002,6546,9001,6547,9002,6548,9001,6549,9003,6550,9001,6551,9003,6552,9001,6553,9003,6554,9001,6555,9003,6556,9001,6557,9002,6558,9001,6559,9002,6560,9001,6561,9002,6562,9001,6563,9003,6564,9001,6565,9003,6566,9001,6567,9001,6568,9003,6569,9001,6570,9002,6571,9001,6572,9003,6573,9001,6574,9003,6575,9001,6576,9003,6577,9001,6578,9003,6582,9003,6583,9001,6584,9003,6585,9001,6586,9003,6587,9001,6588,9003,6589,9001,6590,9003,6591,9001,6592,9001,6593,9003,6594,9001,6595,9003,6596,9001,6597,9003,6598,9001,6599,9003,6600,9001,6601,9003,6602,9001,6603,9003,6605,9003,6606,9001,6607,9003,6608,9001,6609,9003,6610,9001,6611,9001,6612,9003,6613,9001,6614,9003,6615,9001,6616,9003,6617,9001,6618,9003,6633,9003,6646,9001,6668,9102,6703,9001,6706,9102,6783,9102,6784,9001,6785,9002,6786,9001,6787,9002,6788,9001,6789,9002,6790,9001,6791,9002,6792,9001,6793,9002,6794,9001,6795,9002,6796,9001,6797,9002,6798,9001,6799,9002,6800,9001,6801,9002,6802,9001,6803,9002,6804,9001,6805,9002,6806,9001,6807,9002,6808,9001,6809,9002,6810,9001,6811,9002,6812,9001,6813,9002,6814,9001,6815,9002,6816,9001,6817,9002,6818,9001,6819,9002,6820,9001,6821,9002,6822,9001,6823,9002,6824,9001,6825,9002,6826,9001,6827,9002,6828,9001,6829,9002,6830,9001,6831,9002,6832,9001,6833,9002,6834,9001,6835,9002,6836,9001,6837,9002,6838,9001,6839,9002,6840,9001,6841,9002,6842,9001,6843,9002,6844,9001,6845,9002,6846,9001,6847,9002,6848,9001,6849,9002,6850,9001,6851,9002,6852,9001,6853,9002,6854,9001,6855,9002,6856,9001,6857,9002,6858,9001,6859,9002,6860,9001,6861,9002,6862,9001,6863,9002,6867,9001,6868,9002,6870,9001,6875,9001,6876,9001,6879,9001,6880,9003,6884,9001,6885,9002,6886,9001,6887,9002,6892,9102,6894,9102,6915,9001,6922,9001,6923,9003,6924,9001,6925,9003,6962,9001,6983,9102,6984,9001,6990,9102,6991,9001,7035,9102,7037,9102,7039,9102,7041,9102,7073,9102,7084,9102,7086,9102,7128,9003,7131,9001,7132,9003,7133,9102,7136,9102,7139,9102,7142,9001,7257,9001,7258,9003,7259,9001,7260,9003,7261,9001,7262,9003,7263,9001,7264,9003,7265,9001,7266,9003,7267,9001,7268,9003,7269,9001,7270,9003,7271,9001,7272,9003,7273,9001,7274,9003,7275,9001,7276,9003,7277,9001,7278,9003,7279,9001,7280,9003,7281,9001,7282,9003,7283,9001,7284,9003,7285,9001,7286,9003,7287,9001,7288,9003,7289,9001,7290,9003,7291,9001,7292,9003,7293,9001,7294,9003,7295,9001,7296,9003,7297,9001,7298,9003,7299,9001,7300,9003,7301,9001,7302,9003,7303,9001,7304,9003,7305,9001,7306,9003,7307,9001,7308,9003,7309,9001,7310,9003,7311,9001,7312,9003,7313,9001,7314,9003,7315,9001,7316,9003,7317,9001,7318,9003,7319,9001,7320,9003,7321,9001,7322,9003,7323,9001,7324,9003,7325,9001,7326,9003,7327,9001,7328,9003,7329,9001,7330,9003,7331,9001,7332,9003,7333,9001,7334,9003,7335,9001,7336,9003,7337,9001,7338,9003,7339,9001,7340,9003,7341,9001,7342,9003,7343,9001,7344,9003,7345,9001,7346,9003,7347,9001,7348,9003,7349,9001,7350,9003,7351,9001,7352,9003,7353,9001,7354,9003,7355,9001,7356,9003,7357,9001,7358,9003,7359,9001,7360,9003,7361,9001,7362,9003,7363,9001,7364,9003,7365,9001,7366,9003,7367,9001,7368,9003,7369,9001,7370,9003,7373,9102,7683,9102,7798,9102,7844,9102,7877,9001,7878,9001,7881,9102,7882,9001,7883,9001,7886,9102,7887,9001,7899,9001,7991,9001,7992,9001,8035,9003,8036,9003,8042,9102,8043,9102,8058,9001,8059,9001,8082,9001,8083,9001,8086,9102,8088,9001,8090,9001,8091,9003,8092,9001,8093,9003,8095,9001,8096,9003,8097,9001,8098,9003,8099,9001,8100,9003,8101,9001,8102,9003,8103,9001,8104,9003,8105,9001,8106,9003,8107,9001,8108,9003,8109,9001,8110,9003,8111,9001,8112,9003,8113,9001,8114,9003,8115,9001,8116,9003,8117,9001,8118,9003,8119,9001,8120,9003,8121,9001,8122,9003,8123,9001,8124,9003,8125,9001,8126,9003,8127,9001,8128,9003,8129,9001,8130,9003,8131,9001,8132,9003,8133,9001,8134,9003,8135,9001,8136,9003,8137,9001,8138,9003,8139,9001,8140,9003,8141,9001,8142,9003,8143,9001,8144,9003,8145,9001,8146,9003,8147,9001,8148,9003,8149,9001,8150,9003,8151,9001,8152,9003,8153,9001,8154,9003,8155,9001,8156,9003,8157,9001,8158,9003,8159,9001,8160,9003,8161,9001,8162,9003,8163,9001,8164,9003,8165,9001,8166,9003,8167,9001,8168,9003,8169,9001,8170,9003,8171,9001,8172,9003,8173,9001,8177,9003,8179,9001,8180,9003,8181,9001,8182,9003,8184,9001,8185,9003,8187,9001,8189,9003,8191,9001,8193,9003,8196,9001,8197,9003,8198,9001,8200,9003,8201,9001,8202,9003,8203,9001,8204,9003,8205,9001,8206,9003,8207,9001,8208,9003,8209,9001,8210,9003,8212,9001,8213,9003,8214,9001,8216,9003,8218,9001,8220,9003,8222,9001,8224,9003,8225,9001,8226,9003,8232,9102,8237,9102,8240,9102,8246,9102,8249,9102,8252,9102,8255,9102,8311,9001,8312,9002,8313,9001,8314,9002,8315,9001,8316,9002,8317,9001,8318,9002,8319,9001,8320,9002,8321,9001,8322,9002,8323,9001,8324,9002,8325,9001,8326,9002,8327,9001,8328,9002,8329,9001,8330,9002,8331,9001,8332,9002,8333,9001,8334,9002,8335,9001,8336,9002,8337,9001,8338,9002,8339,9001,8340,9002,8341,9001,8342,9002,8343,9001,8344,9002,8345,9001,8346,9002,8347,9001,8348,9002,8351,9102,8352,9001,8353,9001,8379,9001,8380,9003,8381,9001,8382,9003,8383,9001,8384,9003,8385,9001,8387,9003,8391,9001,8395,9001,8427,9102,8428,9102,8431,9102,8433,9001,8441,9001,8455,9001,8456,9001,8531,9003,8545,9102,8682,9001,8685,9102,8687,9001,8692,9001,8693,9001,8694,9102,8699,9102,8818,9102,8826,9001,8860,9102,8888,9102,8900,9102,8902,9102,8903,9001,8907,9102,8949,9102,8950,9001,8951,9001,9003,9102,9006,9102,9009,9102,9012,9102,9014,9102,9017,9102,9019,9102,9039,9001,9040,9001,9140,9102,9141,9001,9148,9102,9149,9001,9150,9001,9153,9102,9191,9001,9221,9001,9222,9001,20499,9001,20538,9001,20539,9001,20790,9001,20791,9001,21291,9001,21292,9001,21500,9001,21817,9001,21818,9001,22032,9001,22033,9001,22091,9001,22092,9001,22332,9001,22391,9001,22392,9001,22700,9001,22770,9001,22780,9001,22832,9001,23090,9001,23095,9001,23239,9001,23240,9001,23700,9001,24047,9001,24048,9001,24100,9005,24200,9001,24305,9001,24306,9001,24382,9084,24383,9001,24500,9001,24547,9001,24548,9001,24571,9062,24600,9001,25e3,9001,25231,9001,25884,9001,25932,9001,26237,9001,26331,9001,26332,9001,26591,9001,26592,9001,26632,9001,26692,9001,27120,9001,27200,9001,27291,9040,27292,9040,27429,9001,27493,9001,27500,9001,27700,9001,28232,9001,28600,9001,28991,9001,28992,9001,29101,9001,29220,9001,29221,9001,29333,9001,29635,9001,29636,9001,29701,9001,29738,9001,29739,9001,29849,9001,29850,9001,29871,9042,29872,9041,29873,9001,30200,9039,30339,9001,30340,9001,30791,9001,30792,9001,31028,9001,31121,9001,31154,9001,31170,9001,31171,9001,31279,9001,31370,9001,31528,9001,31529,9001,31600,9001,31700,9001,31838,9001,31839,9001,31901,9001,32030,9003,32031,9003,32061,9001,32062,9001,32098,9001,32099,9003,32100,9001,32104,9001,32161,9001,32766,9001,37202,9102,37203,9102,37206,9102,37207,9102,37218,9102,37221,9102,37225,9105,37240,9102,37241,9102,37243,9102,37245,9102,37249,9102,37257,9102,37260,9102,53048,9001,53049,9001,54034,9001,54090,9001,54091,9001,65061,9003,65062,9003,65161,9001,102041,9003,102064,9085,102068,109030,102069,109031,102093,9001,102094,9001,102118,9003,102120,9003,102121,9003,102122,9001,102150,9001,102168,9001,102204,9001,102212,9001,102213,9001,102215,9001,102216,9001,102217,9003,102218,9001,102219,9003,102220,9003,102247,9001,102299,9001,102306,9001,102319,9001,102328,9001,102329,9001,102359,9001,102360,9001,102440,9001,102448,9001,102464,9003,102465,9003,102491,9001,102492,9001,102498,9001,102499,9001,102525,9003,102526,9003,102528,9003,102529,9003,102589,9003,102598,9001,102599,9003,102600,9003,102604,9003,102661,9003,102662,9003,102664,9003,102665,9003,102705,9003,102720,9003,102721,9003,102726,9003,102727,9003,102733,9003,102761,9003,102766,9003,102974,9003,103228,9001,103229,9001,103230,9003,103231,9003,103250,9001,103251,9003,103252,9001,103253,9003,103260,9001,103261,9001,103262,9003,103263,9003,103270,9001,103271,9001,103272,9003,103273,9003,103274,9001,103275,9001,103276,9003,103277,9003,103278,9001,103279,9001,103280,9003,103281,9003,103282,9001,103283,9001,103284,9003,103285,9003,103286,9001,103287,9003,103288,9001,103289,9003,103290,9001,103291,9003,103292,9001,103293,9001,103294,9003,103295,9003,103296,9001,103297,9001,103298,9003,103299,9003,103300,9001,103307,9001,103313,9001,103319,9001,103322,9001,103323,9001,103332,9001,103335,9001,103338,9001,103340,9001,103351,9001,103358,9001,103370,9001,103376,9003,103377,9001,103378,9001,103379,9003,103380,9003,103393,9001,103394,9001,103395,9003,103396,9003,103400,9003,103407,9003,103413,9003,103419,9003,103422,9003,103423,9003,103432,9003,103435,9003,103438,9003,103440,9003,103451,9003,103458,9003,103470,9003,103472,9001,103473,9002,103474,9001,103475,9003,103482,9001,103483,9003,103484,9001,103485,9003,103500,9001,103501,9003,103502,9001,103503,9001,103504,9002,103505,9002,103506,9001,103507,9001,103508,9003,103509,9003,103510,9001,103511,9001,103512,9003,103513,9003,103514,9001,103515,9003,103516,9001,103517,9003,103518,9001,103519,9003,103520,9001,103521,9002,103522,9001,103523,9001,103524,9003,103525,9003,103526,9001,103527,9003,103561,9003,103562,9003,103563,9001,103564,9001,103565,9003,103566,9003,103567,9001,103568,9001,103569,9003,103570,9003,103585,9003,103586,9001,103587,9003,103588,9002,103589,9001,103590,9003,103591,9002,103592,9001,103593,9003,103594,9002,103695,9003,103846,9001,103946,9003,104009,9102,104017,9102,104018,9102,104022,9102,104024,9102,104027,9102,104047,9102,104050,9102,104105,9102,104106,9102,104109,9102,104112,9102,104113,9102,104134,9102,104135,9102,104138,9102,104139,9105,104140,9105,104808,9102]};h.wr=function(){function u(){}return u.Sy=function(o){u.xp===!1&&u.yt();var s=u.FQ(o);if(s==-1){var n=u.Bx(o);n!=o&&(s=u.Sy(n))}return s==-1&&(n=u.FK(o))!=o&&(s=u.Sy(n)),s},u.FQ=function(o){return u.Fw[o]!==void 0?u.Fw[o]:-1},u.CQ=function(o){u.xp===!1&&u.yt();var s=u.nF(o);if(s==1e38){var n=u.Bx(o);if(n!=o&&(s=u.nF(n)),s==1e38)return 1e-10}return s},u.ZS=function(o){if(u.Is[o]!==void 0)return!0;var s=u.Bx(o);return s!=o&&u.Is[s]!==void 0},u.aT=function(o){if(u.xo[o]!==void 0)return!0;var s=u.Bx(o);return s!=o&&u.xo[s]!==void 0},u.nF=function(o){return u.xp===!1&&u.yt(),u.Is[o]!==void 0?u.Is[o]:u.xo[o]!==void 0?u.xo[o]:1e38},u.FK=function(o){return u.xp===!1&&u.yt(),u.WA[o]!==void 0?u.WA[o]:o},u.Bx=function(o){return u.xp===!1&&u.yt(),u.XA[o]!==void 0?u.XA[o]:o},u.yt=function(){for(var o,s=C,n=0;n<s.pcsid.length;n+=2)u.xo[s.pcsid[n]]=s.pcstol[2*s.pcsid[n+1]+1];for(n=0;n<s.pcsidc.length;n+=1)for(var l=(o=s.pcsidc[n])[0];l<=o[1];l++)u.xo[l]=s.pcstol[2*o[2]+1];for(n=0;n<s.gcsid.length;n+=2)u.Is[s.gcsid[n]]=s.gcstol[2*s.gcsid[n+1]+1];for(n=0;n<s.gcsidc.length;n+=1)for(l=(o=s.gcsidc[n])[0];l<=o[1];l++)u.xo[l]=s.gcstol[2*o[2]+1];for(n=0;n<w.c.length;n+=1)for(l=(o=w.c[n])[0];l<=o[1];l++)u.Fw[l]=o[2];for(n=0;n<w.nc.length;n+=2)u.Fw[w.nc[n]]=w.nc[n+1];for(w=null,n=0;n<s.newtoold.length;n+=2)u.WA[s.newtoold[n+1]]=s.newtoold[n],u.XA[s.newtoold[n]]=s.newtoold[n+1];C=null,u.xp=!0},u.xp=!1,u.Is=[],u.xo=[],u.WA=[],u.XA=[],u.Fw=[],u}()}(G||(G={})),function(h){function C(u){return u.length===0?'""':u[0]=='"'||u[0]=="."||"0"<=u[0]&&"9">=u[0]?u:'"'+u.trim()+'"'}var w=[];h.XC=function(){function u(){}return u.EQ=function(o){try{for(var s=0;s<w.length;s++)if(w[s].wkttext===o)return w[s].unit;for(var n,l=s="",c=!1,d=0;d<o.length;d++){var f=o[d];c===!0?f=='"'?o[d+1]=='"'?s+=f:c=c=!1:s+=f:/[\s]/.test(f)||(f==","?(l=s!==""?l+(C(s)+","):l+",",s=""):f==")"||f=="]"?(l=s!==""?l+(C(s)+"]}"):l+"]}",s=""):f=="("||f=="["?(l+='{ "entity": "'+s.toUpperCase().trim()+'", "values":[',s=""):f=='"'?(c=!0,s=""):s+=f)}n=JSON.parse(l);var m=u.mF(n);if(m===null)return null;for(n=null,f=0;f<m.values.length;f++)if(typeof m.values[f]=="object"&&(m.values[f].entity==="UNIT"||m.values[f].entity==="ANGLEUNIT"||m.values[f].entity==="LENGTHUNIT")){n=m.values[f];break}if(n===null)return null;var b=h.Tc.ZO(m.entity==="GEOGCS"||m.entity==="GEOGCRS"?1:0,n.values[1],n.values[2]);return w.push({wkttext:o,unit:b}),10<w.length&&w.shift(),b}catch{return null}},u.mF=function(o){if(o===null)return null;switch(o.entity){case"GEOGCRS":case"GEOGCS":case"PROJCRS":case"PROJCS":return o}for(var s=[],n=0;n<o.values.length;n++)if(typeof o.values[n]=="object"&&o.values[n].entity!==void 0)switch(o.values[n].entity){case"GEOGCRS":case"GEOGCS":case"PROJCRS":case"PROJCS":return o.values[n];default:s.push(o.values[n])}for(o=0;o<s.length;o++)if((n=u.mF(s[o]))!==null)return n;return null},u.DQ=function(o){var s=-1;if(o!=null&&0<o.length){var n=o.search(/PROJCR?S/);if(0<=n){var l=0;if(0<=(n=o.lastIndexOf("UNIT"))&&0<(n=o.indexOf(",",n+4))){n++;var c=o.indexOf("]",n+1);if(0<c)try{l=parseFloat(o.substring(n,c))}catch{l=0}}0<l&&(s=.001/l)}else if(0<=(n=o.search(/GEOGCR?S/))){var d=0;if(l=0,(n=o.indexOf("SPHEROID",n+6))===-1&&(n=o.indexOf("ELLIPSOID",n+7)),0<n&&0<(n=o.indexOf(",",n+8))){if(n++,0<(c=o.indexOf(",",n+1)))try{d=parseFloat(o.substring(n,c))}catch{d=0}if(0<d&&((n=o.lastIndexOf("ANGLEUNIT",c+1))===-1&&(n=o.lastIndexOf("UNIT",c+1)),0<=n&&0<(n=o.indexOf(",",n+4))&&(n++,0<(c=o.indexOf("]",n+1)))))try{l=parseFloat(o.substring(n,c))}catch{l=0}}0<d&&0<l&&(s=.001/(d*l))}}return s},u}()}(G||(G={})),function(h){var C;(C=h.eL||(h.eL={}))[C.NONE=0]="NONE",C[C.LINEAR=1]="LINEAR",C[C.ANGULAR=2]="ANGULAR",function(u){u[u.enumFloat=0]="enumFloat",u[u.enumDouble=1]="enumDouble",u[u.enumInt32=2]="enumInt32",u[u.enumInt64=3]="enumInt64",u[u.enumInt8=4]="enumInt8",u[u.enumInt16=5]="enumInt16"}(h.QL||(h.QL={})),function(u){u[u.POSITION=0]="POSITION",u[u.Z=1]="Z",u[u.M=2]="M",u[u.ID=3]="ID",u[u.NORMAL=4]="NORMAL",u[u.TEXTURE1D=5]="TEXTURE1D",u[u.TEXTURE2D=6]="TEXTURE2D",u[u.TEXTURE3D=7]="TEXTURE3D",u[u.ID2=8]="ID2",u[u.MAXSEMANTICS=10]="MAXSEMANTICS"}(h.Ih||(h.Ih={}));var w=function(){function u(o,s){if(this.Vs=this.Ae=null,this.Oq=this.Aa=0,this.uh=this.bg=null,this.wl=0,s!==void 0){for(this.Aa=s.Aa,this.Oq=s.Oq,this.bg=s.bg.slice(0),this.uh=s.uh.slice(0),this.wl=s.wl,this.Vs=[],o=s=0;o<this.Aa;o++)this.Vs[o]=s,s+=u.Va(this.bg[o]);for(this.Oq=s,this.Ae=[],o=0;o<this.Aa;o++){s=u.Va(this.kd(o));for(var n=u.se(this.kd(o)),l=0;l<s;l++)this.Ae[this.Vs[o]+l]=n}}else this.Oq=this.Aa=0}return u.prototype.kd=function(o){if(0>o||o>this.Aa)throw h.i.N();return this.bg[o]},u.prototype.Pf=function(o){return this.uh[o]},u.lz=function(o){return u.JM[o]},u.Tp=function(o){return u.SM[o]},u.Va=function(o){return u.rM[o]},u.prototype.hasAttribute=function(o){return 0<=this.uh[o]},u.prototype.iG=function(){return this.hasAttribute(1)},u.se=function(o){return u.eD[o]},u.prototype.LR=function(o){return this.Vs[o]},u.DG=function(o,s){return u.eD[o]===s},u.prototype.Nb=function(o){return this===o},u.prototype.An=function(){for(var o=h.O.Th(this.bg[0]),s=1;s<this.Aa;s++)o=h.O.Th(this.bg[s],o);return o},u.prototype.$j=function(o){return this.Vs[o]},u.prototype.cc=function(){return this.wl},u.prototype.Ed=function(o){return this.bg[o]},u.eD=[0,0,NaN,0,0,0,0,0,0],u.JM=[1,1,1,0,2,1,1,1,0],u.SM=[1,1,1,2,0,0,0,0,2],u.rM=[2,1,1,1,3,1,2,3,2],u}();h.ra=w}(G||(G={})),function(h){function C(c,d,f){var m=d-(c=new l(c)).e,b=c.c;for(b.length>++d&&w(c,m,l.eu),b[0]?f?m=d:(b=c.c,m=c.e+m+1):++m;b.length<m;b.push(0));return m=c.e,f===1||f&&(d<=m||m<=o)?(0>c.Bd&&b[0]?"-":"")+(1<b.length?b[0]+"."+b.join("").slice(1):b[0])+(0>m?"e":"e+")+m:c.toString()}function w(c,d,f,m){var b=c.c,x=c.e+d+1;if(f===1?m=5<=b[x]:f===2?m=5<b[x]||b[x]==5&&(m||0>x||b[x+1]!==void 0||1&b[x-1]):f===3?m=m||b[x]!==void 0||0>x:(m=!1,f!==0&&u("!Big.RM!")),1>x||!b[0])m?(c.e=-d,c.c=[1]):c.c=[c.e=0];else{if(b.length=x--,m)for(;9<++b[x];)b[x]=0,x--||(++c.e,b.unshift(1));for(x=b.length;!b[--x];b.pop());}return c}function u(c){throw(c=Error(c)).name="BigError",c}var o=-7,s=21,n=/^-?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,l=function(){function c(d){if(d instanceof c)this.Bd=d.Bd,this.e=d.e,this.c=d.c.slice();else{var f,m,b;for(d===0&&0>1/d?d="-0":n.test(d+="")||u(NaN),this.Bd=d.charAt(0)=="-"?(d=d.slice(1),-1):1,-1<(f=d.indexOf("."))&&(d=d.replace(".","")),0<(m=d.search(/e/i))?(0>f&&(f=m),f+=+d.slice(m+1),d=d.substring(0,m)):0>f&&(f=d.length),m=0;d.charAt(m)=="0";m++);if(m==(b=d.length))this.c=[this.e=0];else{for(;d.charAt(--b)=="0";);for(this.e=f-m-1,this.c=[],f=0;m<=b;this.c[f++]=+d.charAt(m++));}}}return c.prototype.abs=function(){var d=new c(this);return d.Bd=1,d},c.prototype.cmp=function(d){var f=this.c,m=(d=new c(d)).c,b=this.Bd,x=d.Bd,$=this.e,E=d.e;if(!f[0]||!m[0])return f[0]?b:m[0]?-x:0;if(b!=x)return b;if(d=0>b,$!=E)return $>(E^d)?1:-1;for(b=-1,x=($=f.length)<(E=m.length)?$:E;++b<x;)if(f[b]!=m[b])return f[b]>(m[b]^d)?1:-1;return $==E?0:$>(E^d)?1:-1},c.prototype.jm=function(d){var f=this.c,m=(d=new c(d)).c,b=this.Bd==d.Bd?1:-1,x=c.rr;if((x!==~~x||0>x||1e6<x)&&u("!Big.DP!"),!f[0]||!m[0])return f[0]==m[0]&&u(NaN),m[0]||u(b/0),new c(0*b);var $,E,O=m.slice(),R=$=m.length,k=f.length,j=f.slice(0,$),F=j.length,L=d,V=L.c=[],B=0,W=x+(L.e=this.e-d.e)+1;for(L.Bd=b,b=0>W?0:W,O.unshift(0);F++<$;j.push(0));do{for(E=0;10>E;E++){if($!=(F=j.length))var K=$>F?1:-1;else{var re=-1;for(K=0;++re<$;)if(m[re]!=j[re]){K=m[re]>j[re]?1:-1;break}}if(!(0>K))break;for(d=F==$?m:O;F;){if(j[--F]<d[F]){for(re=F;re&&!j[--re];j[re]=9);--j[re],j[F]+=10}j[F]-=d[F]}for(;!j[0];j.shift());}V[B++]=K?E:++E,j[0]&&K?j[F]=f[R]||0:j=[f[R]]}while((R++<k||j[0]!==void 0)&&b--);return V[0]||B==1||(V.shift(),L.e--),B>W&&w(L,x,c.eu,j[0]!==void 0),L},c.prototype.fS=function(){return 0<this.cmp(0)},c.prototype.nT=function(){return 0>this.cmp(0)},c.prototype.jt=function(d){var f,m=this.Bd,b=(d=new c(d)).Bd;if(m!=b)return d.Bd=-b,this.tI(d);var x=this.c.slice(),$=this.e,E=d.c,O=d.e;if(!x[0]||!E[0])return E[0]?(d.Bd=-b,d):new c(x[0]?this:0);if(m=$-O){for((f=0>m)?(m=-m,$=x):(O=$,$=E),$.reverse(),b=m;b--;$.push(0));$.reverse()}else for($=((f=x.length<E.length)?x:E).length,m=b=0;b<$;b++)if(x[b]!=E[b]){f=x[b]<E[b];break}if(f&&($=x,x=E,E=$,d.Bd=-d.Bd),0<(b=($=E.length)-(f=x.length)))for(;b--;x[f++]=0);for(b=f;$>m;){if(x[--$]<E[$]){for(f=$;f&&!x[--f];x[f]=9);--x[f],x[$]+=10}x[$]-=E[$]}for(;x[--b]==0;x.pop());for(;x[0]==0;)x.shift(),--O;return x[0]||(d.Bd=1,x=[O=0]),d.c=x,d.e=O,d},c.prototype.tI=function(d){var f=this.Bd,m=(d=new c(d)).Bd;if(f!=m)return d.Bd=-m,this.jt(d);m=this.e;var b=this.c,x=d.e,$=d.c;if(!b[0]||!$[0])return $[0]?d:new c(b[0]?this:0*f);if(b=b.slice(),f=m-x){for(0<f?(x=m,m=$):(f=-f,m=b),m.reverse();f--;m.push(0));m.reverse()}for(0>b.length-$.length&&(m=$,$=b,b=m),f=$.length,m=0;f;)m=(b[--f]=b[f]+$[f]+m)/10|0,b[f]%=10;for(m&&(b.unshift(m),++x),f=b.length;b[--f]==0;b.pop());return d.c=b,d.e=x,d},c.prototype.pow=function(d){var f=this,m=new c(1),b=m,x=0>d;for((d!==~~d||-1e6>d||1e6<d)&&u("!pow!"),d=x?-d:d;1&d&&(b=b.lr(f)),d>>=1;)f=f.lr(f);return x?m.jm(b):b},c.prototype.round=function(d,f){var m=this;return d==null?d=0:(d!==~~d||0>d||1e6<d)&&u("!round!"),w(m=new c(m),d,f??c.eu),m},c.prototype.sqrt=function(){var d=this.c,f=this.Bd,m=this.e,b=new c("0.5");if(!d[0])return new c(this);0>f&&u(NaN),(f=Math.sqrt(this.toString()))==0||f==1/0?((f=d.join("")).length+m&1||(f+="0"),(d=new c(Math.sqrt(f).toString())).e=((m+1)/2|0)-(0>m||1&m)):d=new c(f.toString()),f=d.e+(c.rr+=4);do m=d,d=b.lr(m.tI(this.jm(m)));while(m.c.slice(0,f).join("")!==d.c.slice(0,f).join(""));return w(d,c.rr-=4,c.eu),d},c.prototype.lr=function(d){var f=this.c,m=(d=new c(d)).c,b=f.length,x=m.length,$=this.e,E=d.e;if(d.Bd=this.Bd==d.Bd?1:-1,!f[0]||!m[0])return new c(0*d.Bd);if(d.e=$+E,b<x){var O=f;f=m,m=O,E=b,b=x,x=E}for(O=Array(E=b+x);E--;O[E]=0);for($=x;$--;){for(x=0,E=b+$;E>$;)x=O[E]+m[$]*f[E-$-1]+x,O[E--]=x%10,x=x/10|0;O[E]=(O[E]+x)%10}for(x&&++d.e,O[0]||O.shift(),$=O.length;!O[--$];O.pop());return d.c=O,d},c.prototype.toString=function(){var d=this.e,f=this.c.join(""),m=f.length;if(d<=o||d>=s)f=f.charAt(0)+(1<m?"."+f.slice(1):"")+(0>d?"e":"e+")+d;else if(0>d){for(;++d;f="0"+f);f="0."+f}else if(0<d)if(++d>m)for(d-=m;d--;f+="0");else d<m&&(f=f.slice(0,d)+"."+f.slice(d));else 1<m&&(f=f.charAt(0)+"."+f.slice(1));return 0>this.Bd&&this.c[0]?"-"+f:f},c.prototype.toExponential=function(d){return d==null?d=this.c.length-1:(d!==~~d||0>d||1e6<d)&&u("!toExp!"),C(this,d,1)},c.prototype.toFixed=function(d){var f=o,m=s;if(o=-(s=1/0),d==null)var b=this.toString();else d===~~d&&0<=d&&1e6>=d&&(b=C(this,this.e+d),0>this.Bd&&this.c[0]&&0>b.indexOf("-")&&(b="-"+b));return o=f,s=m,b||u("!toFix!"),b},c.prototype.toPrecision=function(d){return d==null?this.toString():((d!==~~d||1>d||1e6<d)&&u("!toPre!"),C(this,d-1,2))},c.rr=20,c.eu=1,c}();h.hp=l}(G||(G={})),function(h){var C=function(){function w(u){this.lf=u}return w.prototype.nr=function(u,o,s){var n=new h.h,l=new h.h,c=this.lf;s.Vd(u,o,function(d,f){return c.tc(2*d,n),c.tc(2*f,l),n.compare(l)})},w.prototype.$p=function(u){return this.lf.read(2*u+1)},w}();h.pi=function(){function w(){}return w.aq=function(u){if(u.B())return!1;var o=u.getType();return o==1736?u.Ke()!=0:o==1607?(o=[!1],w.sE(u,!0,o),o[0]):!(o!=197&&(!h.aa.yd(o)||u.BG()))},w.gm=function(u){var o=u.getType();if(o==1736)return o=new h.Ta(u.description),u.B()||u.dD(o),o;if(o==1607)return w.sE(u,!1,null);if(o==197)return o=new h.Ta(u.description),u.B()||o.ad(u,!1),o;if(h.aa.yd(o)){if(o=new h.de(u.description),!u.B()&&!u.BG()){var s=new h.Sa;u.To(s),o.add(s),u.Po(s),o.add(s)}return o}if(h.aa.Rn(o))return null;throw h.i.N()},w.sE=function(u,o,s){s!=null&&(s[0]=!1);var n=null;if(o||(n=new h.de(u.description)),!u.B()){var l=new h.ia(0);l.Jb(2*u.da());for(var c=0,d=u.da();c<d;c++)if(0<u.Ja(c)&&!u.Nn(c)){var f=u.Ba(c);l.add(f),f=u.Vc(c)-1,l.add(f)}if(0<l.size){d=new h.Xt,c=u.ub(0),d.sort(l,0,l.size,new C(c)),d=new h.h,c.tc(2*l.get(0),d),f=0;for(var m=1,b=new h.Sa,x=new h.h,$=1,E=l.size;$<E;$++)if(c.tc(2*l.get($),x),x.qb(d))l.get(f)>l.get($)?(l.set(f,2147483647),f=$):l.set($,2147483647),m++;else{if(1&m){if(o)return s!=null&&(s[0]=!0),null}else l.set(f,2147483647);d.L(x),f=$,m=1}if(1&m){if(o)return s!=null&&(s[0]=!0),null}else l.set(f,2147483647);if(!o)for(l.Vd(0,l.size,function(O,R){return O-R}),$=0,E=l.size;$<E&&l.get($)!=2147483647;$++)u.ve(l.get($),b),n.add(b)}}return o?null:n},w}()}(G||(G={})),function(h){var C=function(){function w(){this.yf=new h.ia(0),this.ys=new h.ia(0),this.EH=1,this.Es=NaN}return w.prototype.sort=function(u,o,s,n){if(32>s-o)n.nr(o,s,u);else{var l=!0;try{for(var c=1/0,d=-1/0,f=o;f<s;f++){var m=n.$p(u.get(f));m<c&&(c=m),m>d&&(d=m)}if(this.reset(s-o,c,d,s-o)){for(f=o;f<s;f++){var b=u.get(f);m=n.$p(b);var x=this.zF(m);this.yf.set(x,this.yf.get(x)+1),this.ys.write(f-o,b)}var $=this.yf.get(0);this.yf.set(0,0),f=1;for(var E=this.yf.size;f<E;f++){var O=this.yf.get(f);this.yf.set(f,$),$+=O}for(f=o;f<s;f++){b=this.ys.read(f-o),m=n.$p(b),x=this.zF(m);var R=this.yf.get(x);u.set(R+o,b),this.yf.set(x,R+1)}l=!1}}catch{this.yf.resize(0),this.ys.resize(0)}if(l)n.nr(o,s,u);else{for(f=s=0,E=this.yf.size;f<E;f++)l=s,(s=this.yf.get(f))>l&&n.nr(o+l,o+s,u);100<this.yf.size&&(this.yf.resize(0),this.ys.resize(0))}}},w.prototype.reset=function(u,o,s,n){return!(2>u||s==o)&&(u=Math.min(w.hL,u),this.yf.Jb(u),this.yf.resize(u),this.yf.Wj(0,0,this.yf.size),this.EH=o,this.ys.resize(n),this.Es=(s-o)/(u-1),!0)},w.prototype.zF=function(u){return h.O.truncate((u-this.EH)/this.Es)},w.hL=65536,w}();h.Xt=C}(G||(G={})),function(h){var C,w;(w=C||(C={}))[w.enum_line=1]="enum_line",w[w.enum_arc=2]="enum_arc",w[w.enum_dummy=4]="enum_dummy",w[w.enum_concave_dip=8]="enum_concave_dip",w[w.enum_connection=3]="enum_connection";var u=function(){function c(){}return c.Qu=function(d,f,m,b,x,$){var E=new c;return E.Im=new h.h,E.Vm=new h.h,E.aw=new h.h,E.Im.L(d),E.Vm.L(f),E.aw.L(m),E.Co=b,E.qh=x,E.sh=$,E},c.construct=function(d,f,m,b){var x=new c;return x.Im=new h.h,x.Vm=new h.h,x.aw=new h.h,x.Im.L(d),x.Vm.L(f),x.aw.Rc(),x.Co=4,x.qh=m,x.sh=b,x},c}(),o=function(){function c(d,f,m,b,x,$){this.Yv=null,this.ya=0,this.EA=d,this.bI=this.$H=0,this.Ka=f,this.Mj=m,this.vk=b,this.Dq=x,this.Ub=$}return c.prototype.next=function(){for(var d=new h.Sa;;){if(this.ya==this.EA.I())return null;if(this.EA.ve(this.ya,d),this.ya++,!d.B())break}var f=!1;if(this.Yv==null&&(this.$H=d.Lg(),this.bI=d.ih(),this.Yv=l.buffer(d,this.Ka,this.Mj,this.vk,this.Dq,this.Ub),f=!0),this.ya<this.EA.I()){var m=new h.Da;this.Yv.copyTo(m)}else m=this.Yv;if(!f){f=new h.Dd;var b=d.Lg()-this.$H;d=d.ih()-this.bI,f.gg(b,d),m.Oc(f)}return m},c.prototype.La=function(){return 0},c.prototype.qe=function(){},c}(),s=function(){function c(d,f){this.Wa=d,this.ya=0,this.oq=f}return c.prototype.next=function(){var d=this.Wa.X;if(this.ya<d.da()){var f=this.ya;if(this.ya++,!d.Nn(f))for(var m=d.Na(d.Vc(f)-1);this.ya<d.da();){var b=d.Na(d.Ba(this.ya));if(d.Nn(this.ya)||b!=m)break;m=d.Na(d.Vc(this.ya)-1),this.ya++}if(this.ya-f==1)return this.Wa.kE(this.Wa.X,f,this.oq);for((m=new h.Ta(this.Wa.X.description)).addPath(this.Wa.X,f,!0),f+=1;f<this.ya;f++)m.Dr(this.Wa.X,f,0,d.rv(f),!1);return this.Wa.kE(m,0,this.oq)}return null},c.prototype.La=function(){return 0},c.prototype.qe=function(){},c}(),n=function(){function c(d){this.Wa=d,this.ya=0}return c.prototype.next=function(){var d=this.Wa.X;if(this.ya<d.da()){var f=this.ya;for(d.Ir(this.ya),this.ya++;this.ya<d.da()&&!(0<d.Ir(this.ya));)this.ya++;return f==0&&this.ya==d.da()?this.Wa.py(d,0,d.da()):this.Wa.py(d,f,this.ya)}return null},c.prototype.La=function(){return 0},c.prototype.qe=function(){},c}(),l=function(){function c(d){this.Ks=this.lw=this.Ls=this.Id=null,this.Zd=[],this.Ub=d,this.rb=this.Kv=this.JT=this.Ka=this.tA=this.ct=this.qa=0,this.oA=this.vk=-1,this.oq=!0}return c.buffer=function(d,f,m,b,x,$){if(d==null||0>b)throw h.i.N();if(d.B())return new h.Da(d.description);var E=new h.l;return d.xc(E),0<f&&E.W(f,f),($=new c($)).Mj=m,$.X=d,$.qa=h.ta.Wd(m,E,!0),$.ct=h.ta.Wd(null,E,!0),$.Ka=f,$.JT=d.getType(),0>=x&&(x=96),$.rb=Math.abs($.Ka),$.Kv=$.rb!=0?1/$.rb:0,isNaN(b)||b==0?b=1e-5*$.rb:b>.5*$.rb&&(b=.5*$.rb),12>x&&(x=12),(d=Math.abs(f)*(1-Math.cos(Math.PI/x)))>b?b=d:(d=Math.PI/Math.acos(1-b/Math.abs(f)))<x-1&&12>(x=h.O.truncate(d))&&(x=12,b=Math.abs(f)*(1-Math.cos(Math.PI/x))),$.vk=b,$.Dq=x,$.tA=Math.min($.ct,.25*b),$.lE()},c.prototype.cv=function(){if(this.Id==null)this.Id=[];else if(this.Id.length!==0)return;var d=this.qE();d=h.O.truncate((d+3)/4);var f=.5*Math.PI/d;this.oA=f;for(var m=0;m<4*d;m++)this.Id.push(null);var b=Math.cos(f);f=Math.sin(f);var x=h.h.construct(0,1);for(m=0;m<d;m++)this.Id[m+0*d]=h.h.construct(x.y,-x.x),this.Id[m+1*d]=h.h.construct(-x.x,-x.y),this.Id[m+2*d]=h.h.construct(-x.y,x.x),this.Id[m+3*d]=x,(x=h.h.construct(x.x,x.y)).Bt(b,f)},c.prototype.lE=function(){var d=this.X.getType();if(h.aa.yd(d))return(d=new h.Ta(this.X.description)).oc(this.X,!0),this.X=d,this.lE();if(this.Ka<=this.qa){if(!h.aa.US(d))return new h.Da(this.X.description);if(0>=this.Ka&&(d=new h.l,this.X.A(d),d.R()<=2*-this.Ka||d.ca()<=2*this.Ka))return new h.Da(this.X.description)}switch(this.X.getType()){case 33:return this.PN();case 550:return this.ON();case 1607:return this.RN();case 1736:return this.QN();case 197:return this.LN();default:throw h.i.Qa()}},c.prototype.RN=function(){if(this.EG(this.X)){var d=new h.Sa;this.X.ve(0,d);var f=new h.l;return this.X.A(f),d.Cb(f.sf()),this.Gu(d)}return this.X=this.WV(this.X),d=new s(this,this.oq),h.Gh.local().V(d,this.Mj,this.Ub).next()},c.prototype.QN=function(){if(this.Ka==0)return this.X;var d=h.Yl.local();if(this.cv(),this.X=d.V(this.X,null,!1,this.Ub),0>this.Ka){var f=this.X;return f=this.py(f,0,f.da()),d.V(f,this.Mj,!1,this.Ub)}return this.EG(this.X)?(d=new h.Sa,this.X.ve(0,d),f=new h.l,this.X.A(f),d.Cb(f.sf()),this.Gu(d)):(d=new n(this),h.Gh.local().V(d,this.Mj,this.Ub).next())},c.prototype.py=function(d,f,m){for(var b=new h.Da(d.description);f<m;f++)if(!(1>d.Ja(f))){var x=d.Ir(f),$=new h.l;if(d.Rj(f,$),0<this.Ka){if(0<x)if(this.FG(d,f))x=new h.Sa,d.ve(d.Ba(f),x),x.Cb($.sf()),this.yu(b,x);else{var E=x=new h.Ta(d.description);E=h.Zt.JG(this.X,f)||this.zn(this.X,f,E,!0,1)==2?this.jE(d,f):this.yn(x),b.add(E,!1)}else if(!($.R()+this.qa<=2*this.rb||$.ca()+this.qa<=2*this.rb||(E=x=new h.Ta(d.description),this.zn(this.X,f,E,!0,1),x.B()))){var O=new h.l;for(O.K($),O.W(this.rb,this.rb),E.tp(O),$=1,x=(E=this.yn(x)).da();$<x;$++)b.addPath(E,$,!0)}}else if(0<x){if(!($.R()+this.qa<=2*this.rb||$.ca()+this.qa<=2*this.rb||(E=x=new h.Ta(d.description),this.zn(this.X,f,E,!0,-1),x.B())))for(O=new h.l,E.xc(O),O.W(this.rb,this.rb),E.tp(O),$=1,x=(E=this.yn(x)).da();$<x;$++)b.addPath(E,$,!0)}else for(E=x=new h.Ta(d.description),this.zn(this.X,f,E,!0,-1),$=0,x=(E=this.yn(x)).da();$<x;$++)b.addPath(E,$,!0)}if(0<this.Ka)return 1<b.da()?b=this.yn(b):c.kx(b);if(d=new h.l,b.xc(d),b.B())return c.kx(b);for(d.W(this.rb,this.rb),b.tp(d),b=this.yn(b),d=new h.Da(b.description),$=1,x=b.da();$<x;$++)d.addPath(b,$,!1);return c.kx(d)},c.prototype.PN=function(){return this.Gu(this.X)},c.prototype.Gu=function(d){var f=new h.Da(this.X.description);return this.yu(f,d),this.sX(f)},c.prototype.ON=function(){var d=new o(this.X,this.Ka,this.Mj,this.vk,this.Dq,this.Ub);return h.Gh.local().V(d,this.Mj,this.Ub).next()},c.prototype.LN=function(){var d=new h.Da(this.X.description);if(0>=this.Ka){if(this.Ka==0)d.ad(this.X,!1);else{var f=new h.Fh;this.X.bn(f),f.W(this.Ka,this.Ka),d.ad(f,!1)}return d}return d.ad(this.X,!1),this.X=d,this.jE(d,0)},c.prototype.jE=function(d,f){this.cv();var m=new h.Da(d.description),b=new h.h,x=new h.h,$=new h.h,E=new h.h,O=new h.h,R=new h.h,k=new h.h,j=new h.h,F=d.Ja(f),L=d.Ba(f),V=0;for(f=d.Ja(f);V<f;V++){if(d.D(L+V,x),d.D(L+(V+1)%F,E),d.D(L+(V+2)%F,R),k.uc(E,x),k.length()==0||(k.Hv(),k.normalize(),k.scale(this.rb),b.add(k,x),$.add(k,E),V==0?m.Lt(b):m.Ci(b),m.Ci($),j.uc(R,E),j.length()==0))throw h.i.Qa();j.Hv(),j.normalize(),j.scale(this.rb),O.add(j,E),this.GD(m,E,$,O,!1)}return c.kx(m)},c.prototype.kE=function(d,f,m){if(this.cv(),1>d.Ja(f))return null;if(this.FG(d,f)&&0<this.Ka){m=new h.Sa,d.ve(d.Ba(f),m);var b=new h.l;return d.Rj(f,b),m.Cb(b.sf()),this.Gu(m)}if(b=new h.Ta(d.description),d.Nn(f))this.zn(d,f,b,m,1),this.zn(d,f,b,m,-1);else{var x=new h.Ta(d.description);x.addPath(d,f,!1),x.Dr(d,f,0,d.rv(f),!1),this.zn(x,0,b,m,1)}return this.yn(b)},c.prototype.Xq=function(){if(this.Ys++,this.Ys%1024==0&&this.Ub!=null&&!this.Ub.progress(-1,-1))throw h.i.fu("user_canceled")},c.prototype.yn=function(d){return h.Fg.Mk(d,this.ct,!0,!0,this.Ub)},c.prototype.qE=function(){if(this.vk==0)return this.Dq;var d=1-this.vk*Math.abs(this.Kv);return 4>(d=-1>d?4:2*Math.PI/Math.acos(d)+.5)?d=4:d>this.Dq&&(d=this.Dq),h.O.truncate(d)},c.prototype.GD=function(d,f,m,b,x){this.cv();var $=new h.h;$.uc(m,f),$.scale(this.Kv);var E=new h.h;E.uc(b,f),E.scale(this.Kv),0>($=Math.atan2($.y,$.x)/this.oA)&&($=this.Id.length+$),$=this.Id.length-$,0>(E=Math.atan2(E.y,E.x)/this.oA)&&(E=this.Id.length+E),(E=this.Id.length-E)<$&&(E+=this.Id.length);var O=h.O.truncate(E);E=h.O.truncate(Math.ceil($)),($=new h.h).L(this.Id[E%this.Id.length]),$.Ct(this.rb,f);var R=10*this.qa;for($.sub(m),$.length()<R&&(E+=1),$.L(this.Id[O%this.Id.length]),$.Ct(this.rb,f),$.sub(b),$.length()<R&&--O,m=O-E,m++,O=0,E%=this.Id.length;O<m;O++,E=(E+1)%this.Id.length)$.L(this.Id[E]),$.Ct(this.rb,f),d.Ci($),this.Xq();x&&d.Ci(b)},c.prototype.zn=function(d,f,m,b,x){var $=new h.gd,E=$.mN(d,f);if($.Gp(this.tA,!1,!1),2>$.I(E))return 0>x||(x=d,$=new h.Sa,x.ve(x.Ba(f),$),this.yu(m,$)),1;var O=$.Na($.Xa($.Ob(E))),R=new h.Dd;if(R.gg(-O.x,-O.y),$.Oc(R),b&&(this.tQ($,E,x),2>$.I(E)))return 0>x||(x=d,$=new h.Sa,x.ve(x.Ba(f),$),this.yu(m,$)),1;this.Zd.length=0;var k=$.Ob(E);f=$.Xa(k);var j=x==1?$.Ma(f):$.U(f);d=x==1?$.U(f):$.Ma(f);var F=!0;b=new h.h,E=new h.h;var L=new h.h,V=new h.h,B=new h.h,W=new h.h,K=new h.h,re=new h.h,ae=new h.h,de=new h.h,ce=this.rb;k=$.Ja(k);for(var Te=0;Te<k;Te++)$.D(d,E),F&&($.D(f,b),$.D(j,L),re.uc(b,L),re.normalize(),de.MG(re),de.scale(ce),V.add(de,b)),K.uc(E,b),K.normalize(),ae.MG(K),ae.scale(ce),B.add(b,ae),j=re.wi(K),F=re.Qh(K),0>j||0>F&&j==0?this.Zd.push(u.Qu(V,B,b,2,this.Zd.length+1,this.Zd.length-1)):V.qb(B)||(this.Zd.push(u.construct(V,b,this.Zd.length+1,this.Zd.length-1,"dummy")),this.Zd.push(u.construct(b,B,this.Zd.length+1,this.Zd.length-1,"dummy"))),W.add(E,ae),this.Zd.push(u.Qu(B,W,b,1,this.Zd.length+1,this.Zd.length-1)),V.L(W),de.L(ae),L.L(b),b.L(E),re.L(K),j=f,f=d,F=!1,d=x==1?$.U(f):$.Ma(f);return this.Zd[this.Zd.length-1].qh=0,this.Zd[0].sh=this.Zd.length-1,this.YV(m),R.gg(O.x,O.y),m.YD(R,m.da()-1),1},c.prototype.YV=function(d){for(var f=this.zO(),m=!0,b=f+1,x=f;b!=f;x=b){var $=this.Zd[x];b=$.qh!=-1?$.qh:(x+1)%this.Zd.length,$.Co!=0&&(m&&d.Lt($.Im),$.Co==2?this.GD(d,$.aw,$.Im,$.Vm,!0):d.Ci($.Vm),m=!1)}},c.prototype.zO=function(){this.Ks==null&&(this.Ks=[null,null,null,null,null,null,null,null,null]);for(var d=0,f=0,m=this.Zd.length;f<m;){var b=this.Zd[f];if(3&b.Co){d=f;break}f=b.qh}for(m=d+1,f=d;m!=d;f=m){m=(b=this.Zd[f]).qh;for(var x=1,$=null;m!=f&&!(3&($=this.Zd[m]).Co);)m=$.qh,x++;x!=1&&(b.Co&$.Co)==1&&(this.Ls==null&&(this.Ls=new h.yb,this.lw=new h.yb),this.Ls.Dc(b.Im),this.Ls.Qc(b.Vm),this.lw.Dc($.Im),this.lw.Qc($.Vm),this.Ls.Ea(this.lw,this.Ks,null,null,this.ct)==1&&(b.Vm.L(this.Ks[0]),$.Im.L(this.Ks[0]),b.qh=m,$.sh=f))}return d},c.prototype.Fv=function(d,f,m){var b=new h.h;if(b.uc(m,d),m=b.length(),0<(m=this.rb*this.rb-m*m*.25)){m=Math.sqrt(m),b.normalize(),b.ar();var x=new h.h;if(x.uc(f,d),x.Qh(b)+m>=this.rb)return!0}return!1},c.prototype.tQ=function(d,f,m){for(var b=0;1>b;b++){var x=!1,$=d.Ob(f),E=d.Ja($);if(E==0)break;var O=E;if(3>E)break;!d.dc($)&&(O=E-1),$=d.Xa($),E=0<m?d.Ma($):d.U($);for(var R=0<m?d.U($):d.Ma($),k=E,j=!0,F=new h.h,L=new h.h,V=new h.h,B=new h.h,W=new h.h,K=h.h.construct(0,0),re=new h.h,ae=new h.h,de=new h.h,ce=new h.h,Te=this.rb,le=0,He=0;He<O&&(d.D(R,L),j&&(d.D($,F),d.D(E,V),k=E),ae.uc(F,V),ae.normalize(),re.uc(L,F),re.normalize(),k!=R);){var Ue=ae.wi(re),lt=ae.Qh(re),Mt=!0;if(0>Ue||0>lt&&Ue==0||!this.Fv(V,F,L)||(K.L(L),Mt=!1,++le,x=!0),Mt){if(0<le)for(;(Ue=0<m?d.Ma(k):d.U(k))!=$;){if(d.D(Ue,B),!this.Fv(B,V,K)){Ue!=R&&this.Fv(B,V,L)&&this.Fv(B,F,L)&&(V.L(B),k=Ue,Mt=!1,++le);break}V.L(B),k=Ue,Mt=!1,++le}if(!Mt)continue;if(0<le){for(k=0<m?d.Ma(E):d.U(E),j=1;j<le;j++)Mt=0<m?d.Ma(k):d.U(k),d.pd(k,!0),k=Mt;de.uc(F,V),le=Te*Te-(le=de.length())*le*.25,Te-(le=Math.sqrt(le))>.5*this.vk?(W.add(V,F),W.scale(.5),de.normalize(),de.ar(),ce.L(de),ce.scale(Te-le),W.add(ce),d.mf(E,W)):d.pd(E,!0),le=0}V.L(F),k=$}F.L(L),E=$,$=R,R=0<m?d.U($):d.Ma($),He++,j=!1}if(0<le){for(k=0<m?d.Ma(E):d.U(E),j=1;j<le;j++)Mt=0<m?d.Ma(k):d.U(k),d.pd(k,!0),k=Mt;W.add(V,F),W.scale(.5),de.uc(F,V),le=Te*Te-(le=de.length())*le*.25,le=Math.sqrt(le),de.normalize(),de.ar(),ce.L(de),ce.scale(Te-le),W.add(ce),d.mf(E,W)}if(d.Gp(this.tA,!1,!1),!x)break}},c.prototype.FG=function(d,f){if(d.Ja(f)==1)return!0;var m=new h.l;return d.Rj(f,m),Math.max(m.R(),m.ca())<.5*this.vk},c.prototype.EG=function(d){var f=new h.l;return d.A(f),Math.max(f.R(),f.ca())<.5*this.vk},c.prototype.WV=function(d){for(var f=0,m=0,b=(d=h.EC.local().V(d,.25*this.vk,!1,this.Ub)).da();m<b;m++)f=Math.max(d.Ja(m),f);return 32>f?(this.oq=!1,d):(this.oq=!0,h.Fg.Mk(d,this.ct,!1,!0,this.Ub))},c.prototype.yu=function(d,f){if(f=f.D(),this.Id!=null&&this.Id.length!==0){var m=new h.h;m.L(this.Id[0]),m.Ct(this.rb,f),d.Lt(m);for(var b=1,x=this.Id.length;b<x;b++)m.L(this.Id[b]),m.Ct(this.rb,f),d.Ci(m)}else{b=this.qE(),m=h.O.truncate((b+3)/4),b=.5*Math.PI/m,x=Math.cos(b);for(var $=Math.sin(b),E=new h.h,O=3;0<=O;O--){switch(E.ma(0,this.rb),O){case 0:for(b=0;b<m;b++)d.yj(E.x+f.x,E.y+f.y),E.Bt(x,$);break;case 1:for(b=0;b<m;b++)d.yj(-E.y+f.x,E.x+f.y),E.Bt(x,$);break;case 2:for(b=0;b<m;b++)d.yj(-E.x+f.x,-E.y+f.y),E.Bt(x,$);break;default:for(d.sx(E.y+f.x,-E.x+f.y),b=1;b<m;b++)E.Bt(x,$),d.yj(E.y+f.x,-E.x+f.y)}this.Xq()}}},c.kx=function(d){return d.Ch(1,0),d},c.prototype.sX=function(d){return d.Ch(2,this.qa),d.fm(),d},c}();h.HK=l}(G||(G={})),function(h){var C=function(){function w(u){this.Ca=u,this.g=new h.gd,this.dd=new h.ia(0)}return w.prototype.Lh=function(u,o,s){switch(o){case 0:if(u.v<s&&u.C<=s)break;return u.v>=s?1:-1;case 1:if(u.G<s&&u.H<=s)break;return u.G>=s?1:-1;case 2:if(u.v>=s&&u.C>s)break;return u.C<=s?1:-1;case 3:if(!(u.G>=s&&u.H>s))return u.H<=s?1:-1}return 0},w.prototype.Ay=function(u,o){return u.getType()==1736?this.Cy(u,o):this.Dy(u)},w.prototype.Cy=function(u,o){if(this.Ca.R()==0||this.Ca.ca()==0)return u.Ia();var s=new h.l;u.xc(s),this.X=this.g.Ib(u);var n=new h.l,l=new h.l,c=new h.h,d=new h.h,f=[0,0,0,0,0,0,0,0,0],m=[0,0,0,0,0,0,0,0,0];new h.ig;var b=new h.yb,x=new h.ia(0);x.Jb(Math.min(100,u.I()));for(var $=!1,E=0;!$&&4>E;E++){var O=!1,R=!!(1&E),k=0;switch(E){case 0:k=this.Ca.v,O=s.v<=k&&s.C>=k;break;case 1:k=this.Ca.G,O=s.G<=k&&s.H>=k;break;case 2:k=this.Ca.C,O=s.v<=k&&s.C>=k;break;case 3:k=this.Ca.H,O=s.G<=k&&s.H>=k}if(O)for($=!0,O=this.g.Ob(this.X);O!=-1;){var j=-1,F=-1,L=this.g.Xa(O),V=L;do{var B=this.g.bc(V);B==null&&(B=b,this.g.D(V,c),B.Dc(c),this.g.D(this.g.U(V),d),B.Qc(d)),B.A(n);var W=this.Lh(n,E,k),K=0,re=-1;if(W==-1){K=0<(B=B.cq(R,k,f,m))?this.g.Ul(V,m,B):0,K+=1;var ae=V,de=this.g.U(ae);for(B=0;B<K;B++){if(this.g.D(ae,c),this.g.D(de,d),(re=this.g.bc(ae))==null&&((re=b).Dc(c),re.Qc(d)),re.A(l),(re=this.Lh(l,E,k))==-1){if(R)(re=Math.abs(c.y-k))<(ce=Math.abs(d.y-k))?(c.y=k,this.g.mf(ae,c)):(d.y=k,this.g.mf(de,d));else{re=Math.abs(c.x-k);var ce=Math.abs(d.x-k);re<ce?(c.x=k,this.g.mf(ae,c)):(d.x=k,this.g.mf(de,d))}(re=this.g.bc(ae))==null&&((re=b).Dc(c),re.Qc(d)),re.A(l),re=this.Lh(l,E,k)}ce=j,j=re,F==-1&&(F=j),ce==0&&j==1||ce==1&&j==0||ce!=0||j!=0||x.add(ae),j==1&&($=!1),re=ae=de,de=this.g.U(de)}}K==0&&(ce=j,j=W,F==-1&&(F=j),ce==0&&j==1||ce==1&&j==0||ce!=0||j!=0||x.add(V),j==1&&($=!1),re=this.g.U(V)),V=re}while(V!=L);for(F==0&&j==0&&x.add(L),B=0,j=x.size;B<j;B++)F=x.get(B),this.g.pd(F,!1);x.clear(!1),O=3>this.g.Ja(O)?this.g.Zq(O):this.g.Rb(O)}}return $?u.Ia():(this.FB(),0<o&&this.My(o),this.g.Ne(this.X))},w.prototype.Dy=function(u){var o=new h.l,s=new h.l,n=[0,0,0,0,0,0,0,0,0],l=[0,0,0,0,0,0,0,0,0],c=new h.ig,d=u,f=new h.l;u.xc(f);for(var m=0;4>m;m++){var b=!1,x=!!(1&m),$=0;switch(m){case 0:$=this.Ca.v,b=f.v<=$&&f.C>=$;break;case 1:$=this.Ca.G,b=f.G<=$&&f.H>=$;break;case 2:$=this.Ca.C,b=f.v<=$&&f.C>=$;break;case 3:$=this.Ca.H,b=f.G<=$&&f.H>=$}if(b){b=d,d=u.Ia(),(b=b.Ga()).Zi();for(var E,O=new h.h;b.$a();)for(var R,k=!0;b.Ha();){var j=b.ha();j.A(o);var F=this.Lh(o,m,$);if(F==-1){if(0<(F=j.cq(x,$,n,l))){var L=0;E=j.ac();for(var V=0;V<=F;V++)if(L!=(R=V<F?l[V]:1)){j.ah(L,R,c);var B=c.get();B.Dc(E),V<F&&(x?(O.x=n[V],O.y=$):(O.x=$,O.y=n[V]),B.Qc(O)),B.A(s);var W=this.Lh(s,m,$);if(W==-1){if(E=B.ac(),L=B.wc(),x)(W=Math.abs(E.y-$))<(K=Math.abs(L.y-$))?(E.y=$,B.Dc(E)):(L.y=$,B.Qc(L));else{W=Math.abs(E.x-$);var K=Math.abs(L.x-$);W<K?(E.x=$,B.Dc(E)):(L.x=$,B.Qc(L))}B.A(s),W=this.Lh(s,m,$)}E=B.wc(),L=R,(R=W)==1?(d.oc(B,k),k=!1):k=!0}}}else(R=F)==1?(d.oc(j,k),k=!1):k=!0}}}return d},w.prototype.FB=function(){this.ji=-1,this.Vl(!1,this.Ca.v),this.Vl(!1,this.Ca.C),this.Vl(!0,this.Ca.G),this.Vl(!0,this.Ca.H),this.dd.resize(0),this.dd.Jb(100),this.ji=this.g.Gd();for(var u=new h.h,o=this.g.Ob(this.X);o!=-1;o=this.g.Rb(o))for(var s=this.g.Xa(o),n=0,l=this.g.Ja(o);n<l;n++,s=this.g.U(s))this.g.D(s,u),(this.Ca.v==u.x||this.Ca.C==u.x||this.Ca.G==u.y||this.Ca.H==u.y)&&(this.g.Ra(s,this.ji,this.dd.size),this.dd.add(s));this.Nl(!1,this.Ca.v),this.Nl(!1,this.Ca.C),this.Nl(!0,this.Ca.G),this.Nl(!0,this.Ca.H),this.Ty()},w.prototype.My=function(u){for(var o=new h.h,s=new h.h,n=h.O.lg(2048,0),l=this.g.Ob(this.X);l!=-1;l=this.g.Rb(l)){var c=this.g.Xa(l),d=c;do{var f=this.g.U(d);this.g.D(d,o);var m=-1;if(o.x==this.Ca.v?(this.g.D(f,s),s.x==this.Ca.v&&(m=1)):o.x==this.Ca.C&&(this.g.D(f,s),s.x==this.Ca.C&&(m=1)),o.y==this.Ca.G?(this.g.D(f,s),s.y==this.Ca.G&&(m=0)):o.y==this.Ca.H&&(this.g.D(f,s),s.y==this.Ca.H&&(m=0)),m!=-1&&(m=h.h.tb(o,s),!(1>=(m=h.O.truncate(Math.min(Math.ceil(m/u),2048)))))){for(var b=1;b<m;b++)n[b-1]=1*b/m;this.g.Ul(d,n,m-1)}d=f}while(d!=c)}},w.prototype.Vl=function(u,o){var s=this.g.Gd(),n=new h.h,l=new h.ia(0);l.Jb(100);for(var c=this.g.Ob(this.X);c!=-1;c=this.g.Rb(c))for(var d=this.g.Xa(c),f=0,m=this.g.Ja(c);f<m;f++){var b=this.g.U(d);this.g.D(d,n),(u?n.y==o:n.x==o)&&(this.g.D(b,n),(u?n.y==o:n.x==o)&&(this.g.Pa(d,s)!=1&&(l.add(d),this.g.Ra(d,s,1)),this.g.Pa(b,s)!=1&&(l.add(b),this.g.Ra(b,s,1)))),d=b}if(this.g.Td(s),!(3>l.size)){var x=this;l.Vd(0,l.size,function(W,K){return x.Mh(W,K)}),s=new h.h,c=new h.h,d=new h.h,c.Rc();var $=-1;f=new h.ia(0),m=new h.ia(0),b=this.g.Gd();for(var E=this.g.Gd(),O=0,R=l.size;O<R;O++){var k=l.get(O);if(this.g.D(k,n),!n.qb(c)){if($!=-1){for(var j=$;j<O;j++){$=l.get(j);var F=this.g.U($);k=this.g.Ma($);var L=!1;0>this.Mh($,F)&&(this.g.D(F,s),u?s.y==o:s.x==o)&&(f.add($),L=!0,this.g.Ra($,E,1)),0>this.Mh($,k)&&(this.g.D(k,s),u?s.y==o:s.x==o)&&(L||f.add($),this.g.Ra($,b,1))}for(j=0,L=f.size;j<L;j++){if($=f.get(j),k=this.g.Pa($,b),F=this.g.Pa($,E),k==1){k=this.g.Ma($),this.g.D(k,d);var V=[0];if(V[0]=0,!d.qb(n)){var B=h.h.tb(c,d);V[0]=h.h.tb(d,n)/B,V[0]==0?V[0]=2220446049250313e-31:V[0]==1&&(V[0]=.9999999999999998),this.g.Ul(k,V,1),k=this.g.Ma($),this.g.mf(k,n),m.add(k),this.g.Ra(k,b,1),this.g.Ra(k,E,-1)}}F==1&&(F=this.g.U($),this.g.D(F,d),(V=[0])[0]=0,d.qb(n)||(B=h.h.tb(c,d),V[0]=h.h.tb(c,n)/B,V[0]==0?V[0]=2220446049250313e-31:V[0]==1&&(V[0]=.9999999999999998),this.g.Ul($,V,1),k=this.g.U($),this.g.mf(k,n),m.add(k),this.g.Ra(k,b,-1),this.g.Ra(k,E,1)))}$=f,f=m,(m=$).clear(!1)}$=O,c.L(n)}}this.g.Td(b),this.g.Td(E)}},w.prototype.Nl=function(u,o){var s=new h.h,n=new h.ia(0);n.Jb(100);for(var l=this.g.Gd(),c=0,d=this.dd.size;c<d;c++){var f=this.dd.get(c);if(f!=-1){var m=this.g.U(f);this.g.D(f,s),(u?s.y==o:s.x==o)&&(this.g.D(m,s),(u?s.y==o:s.x==o)&&(this.g.Pa(f,l)!=-2&&(n.add(f),this.g.Ra(f,l,-2)),this.g.Pa(m,l)!=-2&&(n.add(m),this.g.Ra(m,l,-2))))}}if(n.size!=0){var b=this;for(n.Vd(0,n.size,function(K,re){return b.Mh(K,re)}),c=0,d=n.size;c<d;c++){var x=n.get(c);this.g.Ra(x,l,c)}f=new h.h,(m=new h.h).Rc();var $=-1;for(c=0,d=n.size;c<d;c++)if((x=n.get(c))!=-1&&(this.g.D(x,s),!s.qb(m))){if($!=-1)for(;;){x=!1;for(var E=1<c-$?c-1:c,O=$;O<E;O++){var R=n.get(O);if(R!=-1){var k=-1,j=this.g.U(R);0>this.Mh(R,j)&&(this.g.D(j,f),u?f.y==o:f.x==o)&&(k=j),j=-1;var F=this.g.Ma(R);if(0>this.Mh(R,F)&&(this.g.D(F,f),u?f.y==o:f.x==o)&&(j=F),k!=-1&&j!=-1)this.Kh(R,n,l),this.g.pd(R,!1),this.Kh(k,n,l),this.g.pd(k,!1),x=!0;else if(k!=-1||j!=-1){for(F=O+1;F<c;F++){var L=n.get(F);if(L!=-1){var V=this.g.U(L),B=-1;0>this.Mh(L,V)&&(this.g.D(V,f),u?f.y==o:f.x==o)&&(B=V),V=this.g.Ma(L);var W=-1;if(0>this.Mh(L,V)&&(this.g.D(V,f),u?f.y==o:f.x==o)&&(W=V),B!=-1&&W!=-1){this.Kh(L,n,l),this.g.pd(L,!1),this.Kh(B,n,l),this.g.pd(B,!1),x=!0;break}if(k!=-1&&W!=-1){this.zt(n,R,k,L,W,l),x=!0;break}if(j!=-1&&B!=-1){this.zt(n,L,B,R,j,l),x=!0;break}}}if(x)break}}}if(!x)break}$=c,m.L(s)}}this.g.Td(l)},w.prototype.Kh=function(u,o,s){s=this.g.Pa(u,s),o.set(s,-1),s=this.g.Pa(u,this.ji),this.dd.set(s,-1),(o=this.g.bd(u))!=-1&&this.g.Xa(o)==u&&(this.g.Jf(o,-1),this.g.Wg(o,-1))},w.prototype.zt=function(u,o,s,n,l,c){this.g.Bc(o,n),this.g.Cc(n,o),this.g.Cc(s,l),this.g.Bc(l,s),this.Kh(n,u,c),this.g.mi(n,!1),this.Kh(l,u,c),this.g.mi(l,!0)},w.prototype.Ty=function(){for(var u=0,o=this.dd.size;u<o;u++){var s=this.dd.get(u);s!=-1&&this.g.aj(s,-1)}for(var n=0,l=0,c=this.g.Ob(this.X);c!=-1;){var d=this.g.Xa(c);if(d==-1||c!=this.g.bd(d)){var f=c;c=this.g.Rb(c),this.g.Jf(f,-1),this.g.$q(f)}else{s=d,f=0;do this.g.aj(s,c),f++,s=this.g.U(s);while(s!=d);2>=f?(s=this.g.Pa(d,this.ji),this.dd.set(s,-1),d=this.g.pd(d,!1),f==2&&(s=this.g.Pa(d,this.ji),this.dd.set(s,-1),this.g.pd(d,!1)),f=c,c=this.g.Rb(c),this.g.Jf(f,-1),this.g.$q(f)):(this.g.cp(c,!1),this.g.Wg(c,this.g.Ma(d)),this.g.Vj(c,f),l+=f,n++,c=this.g.Rb(c))}}for(u=0,o=this.dd.size;u<o;u++)if((s=this.dd.get(u))!=-1&&(c=this.g.bd(s))==-1){c=this.g.vf(this.X,-1),f=0,d=s;do this.g.aj(s,c),f++,s=this.g.U(s);while(s!=d);2>=f?(s=this.g.Pa(d,this.ji),this.dd.set(s,-1),d=this.g.pd(d,!1),f==2&&(0<=(s=this.g.Pa(d,this.ji))&&this.dd.set(s,-1),this.g.pd(d,!1)),f=c,this.g.Jf(f,-1),this.g.$q(f)):(this.g.kn(c,!0),this.g.Vj(c,f),this.g.Jf(c,d),this.g.Wg(c,this.g.Ma(d)),this.g.cp(c,!1),l+=f,n++)}for(this.g.Rl(this.X,n),this.g.Tj(this.X,l),u=0,o=this.g.ld;o!=-1;o=this.g.ue(o))u+=this.g.I(o);this.g.bC(u)},w.By=function(u,o,s){return new w(o).Ay(u,s)},w.clip=function(u,o,s,n){if(u.B())return u;if(o.B())return u.Ia();if((s=u.getType())==33)return n=u.D(),o.contains(n)?u:u.Ia();if(s==197)return n=new h.l,u.A(n),n.Ea(o)?(o=new h.Fh,u.copyTo(o),o.Xo(n),o):u.Ia();var l=new h.l;if(u.xc(l),o.contains(l))return u;if(!o.isIntersecting(l))return u.Ia();if((l=u.Bb)!=null&&(l=l.Fk)!=null){if((l=l.Ro(o))==1){if(s!=1736)throw h.i.Qa();return(u=new h.Da(u.description)).tp(o),u}if(l==0)return u.Ia()}switch(s){case 550:s=null,l=u.I();for(var c=u.ub(0),d=0,f=0;f<l;f++)n=new h.h,c.tc(2*f,n),o.contains(n)||(d==0&&(s=u.Ia()),d<f&&s.Fd(u,d,f),d=f+1);return 0<d&&s.Fd(u,d,l),d==0?u:s;case 1736:case 1607:return w.By(u,o,n);default:throw h.i.Qa()}},w.prototype.Mh=function(u,o){var s=new h.h;return this.g.D(u,s),u=new h.h,this.g.D(o,u),s.compare(u)},w}();h.Ud=C}(G||(G={})),function(h){var C=function(){function w(u,o){this.Ca=u,this.g=new h.gd,this.dd=new h.ia(0),this.nd=o}return w.prototype.Lh=function(u,o,s){switch(o){case 0:if(u.v<s&&u.C<=s)break;return u.v>=s?1:-1;case 1:if(u.G<s&&u.H<=s)break;return u.G>=s?1:-1;case 2:if(u.v>=s&&u.C>s)break;return u.C<=s?1:-1;case 3:if(!(u.G>=s&&u.H>s))return u.H<=s?1:-1}return 0},w.prototype.Ay=function(u,o){return u.getType()==1736?this.Cy(u,o):this.Dy(u)},w.prototype.Cy=function(u,o){if(this.Ca.R()==0||this.Ca.ca()==0)return u.Ia();var s=new h.l;u.xc(s),this.X=this.g.Ib(u);var n=new h.l,l=new h.l,c=new h.h,d=new h.h,f=[0,0,0,0,0,0,0,0,0],m=[0,0,0,0,0,0,0,0,0],b=new h.yb,x=new h.ia(0);x.Jb(256);for(var $=!1,E=0;!$&&4>E;E++){var O=!1,R=!!(1&E),k=0;switch(E){case 0:k=this.Ca.v,O=s.v<=k&&s.C>=k;break;case 1:k=this.Ca.G,O=s.G<=k&&s.H>=k;break;case 2:k=this.Ca.C,O=s.v<=k&&s.C>=k;break;case 3:k=this.Ca.H,O=s.G<=k&&s.H>=k}if(O)for($=!0,O=this.g.Ob(this.X);O!=-1;){var j=!0,F=-1,L=-1,V=this.g.Xa(O),B=V;do{var W=this.g.bc(B);W==null&&(W=b,this.g.D(B,c),W.Dc(c),this.g.D(this.g.U(B),d),W.Qc(d)),W.A(n);var K=this.Lh(n,E,k),re=0,ae=-1;if(K==-1){re=0<(W=W.cq(R,k,f,m))?this.g.LX(B,m,W):0,re+=1;var de=B,ce=this.g.U(de);for(W=0;W<re;W++){if(this.g.D(de,c),this.g.D(ce,d),(ae=this.g.bc(de))==null&&((ae=b).Dc(c),ae.Qc(d)),ae.A(l),(ae=this.Lh(l,E,k))==-1){if(R)(ae=Math.abs(c.y-k))<(Te=Math.abs(d.y-k))?(c.y=k,this.g.mf(de,c)):(d.y=k,this.g.mf(ce,d));else{ae=Math.abs(c.x-k);var Te=Math.abs(d.x-k);ae<Te?(c.x=k,this.g.mf(de,c)):(d.x=k,this.g.mf(ce,d))}(ae=this.g.bc(de))==null&&((ae=b).Dc(c),ae.Qc(d)),ae.A(l),ae=this.Lh(l,E,k)}Te=F,F=ae,L==-1&&(L=F),Te==0&&F==1||Te==1&&F==0||Te!=0||F!=0||x.add(de),F==1&&(j=$=!1),ae=de=ce,ce=this.g.U(ce)}}if(re==0&&(Te=F,F=K,L==-1&&(L=F),Te==0&&F==1||Te==1&&F==0||Te!=0||F!=0||x.add(B),F==1&&(j=$=!1),ae=this.g.U(B)),B=ae,256<=x.size){for(W=1,K=x.size-1;W<K;W++)re=x.get(W),this.g.pd(re,!1);x.set(1,x.Fc()),x.Bh(2)}}while(B!=V);if(!j)for(L==0&&F==0&&x.add(V),W=0,K=x.size;W<K;W++)re=x.get(W),this.g.pd(re,!1);x.clear(!1),O=j||this.g.Ja(O)==0?this.g.Zq(O):this.g.Rb(O)}}return $?u.Ia():(this.FB(),0<o&&this.My(o),this.g.Ne(this.X))},w.prototype.Dy=function(u){var o=new h.l,s=new h.l,n=[0,0,0,0,0,0,0,0,0],l=[0,0,0,0,0,0,0,0,0],c=new h.ig,d=u,f=new h.l;u.xc(f);for(var m=new h.h,b=new h.h,x=null,$=null,E=0;4>E;E++){var O=!1,R=!!(1&E),k=0;switch(E){case 0:k=this.Ca.v,O=f.v<=k&&f.C>=k;break;case 1:k=this.Ca.G,O=f.G<=k&&f.H>=k;break;case 2:k=this.Ca.C,O=f.v<=k&&f.C>=k;break;case 3:k=this.Ca.H,O=f.G<=k&&f.H>=k}if(O)for(O=d,d=u.Ia(),(O=O.Ga()).Zi();O.$a();)for(var j,F=!0;O.Ha();){var L=O.ha();L.A(o);var V=this.Lh(o,E,k);if(V==-1){if(0<(V=L.cq(R,k,n,l))){var B=0;L.Yp(m);for(var W=0;W<=V;W++)if(B!=(j=W<V?l[W]:1)){L.ah(B,j,c);var K=c.get();K.Dc(m),W<V&&(R?(b.x=n[W],b.y=k):(b.x=k,b.y=n[W]),K.Qc(b)),K.A(s);var re=this.Lh(s,E,k);re==-1&&(x==null&&(x=new h.h),$==null&&($=new h.h),K.Yp(x),K.Tr($),R?(B=Math.abs(x.y-k))<(re=Math.abs($.y-k))?(x.y=k,K.Dc(x)):($.y=k,K.Qc($)):(B=Math.abs(x.x-k))<(re=Math.abs($.x-k))?(x.x=k,K.Dc(x)):($.x=k,K.Qc($)),K.A(s),re=this.Lh(s,E,k)),K.Tr(m),B=j,(j=re)==1?(d.oc(K,F),F=!1):F=!0}}}else(j=V)==1?(d.oc(L,F),F=!1):F=!0}}return d},w.prototype.FB=function(){this.ji=-1,this.Vl(!1,this.Ca.v),this.Vl(!1,this.Ca.C),this.Vl(!0,this.Ca.G),this.Vl(!0,this.Ca.H),this.dd.resize(0),this.dd.Jb(100),this.ji=this.g.Gd();for(var u=new h.h,o=this.g.Ob(this.X);o!=-1;o=this.g.Rb(o))for(var s=this.g.Xa(o),n=0,l=this.g.Ja(o);n<l;n++,s=this.g.U(s))this.g.D(s,u),(this.Ca.v==u.x||this.Ca.C==u.x||this.Ca.G==u.y||this.Ca.H==u.y)&&(this.g.Ra(s,this.ji,this.dd.size),this.dd.add(s));this.Nl(!1,this.Ca.v),this.Nl(!1,this.Ca.C),this.Nl(!0,this.Ca.G),this.Nl(!0,this.Ca.H),this.Ty()},w.prototype.My=function(u){for(var o=new h.h,s=new h.h,n=null,l=null,c=h.O.lg(2048,0),d=this.g.Ob(this.X);d!=-1;d=this.g.Rb(d)){var f=this.g.Xa(d),m=f;do{var b=this.g.U(m);this.g.D(m,o);var x=-1;if(o.x==this.Ca.v?(this.g.D(b,s),s.x==this.Ca.v&&(x=1)):o.x==this.Ca.C&&(this.g.D(b,s),s.x==this.Ca.C&&(x=1)),o.y==this.Ca.G?(this.g.D(b,s),s.y==this.Ca.G&&(x=0)):o.y==this.Ca.H&&(this.g.D(b,s),s.y==this.Ca.H&&(x=0)),x!=-1){if(n==null&&(n=new h.h),l==null&&(l=new h.h),n.L(o),l.ma(0,0),x==0){var $=o.x-this.Ca.v;l.x=h.lc.sign(s.x-o.x),n.x=u*h.lc.Cn(Math.floor(Math.abs($/u)),$)+this.Ca.v,0>n.x&&(n.x+=u)}else $=o.y-this.Ca.G,l.y=h.lc.sign(s.y-o.y),n.y=u*h.lc.Cn(Math.floor(Math.abs($/u)),$)+this.Ca.G,0>n.y&&(n.y+=u);$=x!=0?s.y-o.y:s.x-o.x;var E=Math.abs($);if(65536<E/u)throw h.i.fa("internal error");if(0<E){E=h.O.truncate(E/u)+2,c.length<E&&(c=h.O.lg(E));for(var O=E=0;;O++){var R=new h.h;if(R.x=n.x+l.x*O*u,R.y=n.y+l.y*O*u,1<=(R=(x!=0?R.y-o.y:R.x-o.x)/$))break;0>=R||(c[E]=R,E++)}E!=0&&this.g.Ul(m,c,E)}}m=b}while(m!=f)}},w.prototype.Vl=function(u,o){for(var s=-1,n=new h.h,l=null,c=this.g.Ob(this.X);c!=-1;c=this.g.Rb(c))for(var d=this.g.Xa(c),f=0,m=this.g.Ja(c);f<m;f++){var b=this.g.U(d);this.g.D(d,n),(u?n.y==o:n.x==o)&&(this.g.D(b,n),(u?n.y==o:n.x==o)&&(s==-1&&(s=this.g.Gd()),l==null&&(l=new h.ia(0)).Jb(100),this.g.Pa(d,s)!=1&&(l.add(d),this.g.Ra(d,s,1)),this.g.Pa(b,s)!=1&&(l.add(b),this.g.Ra(b,s,1)))),d=b}if(s!=-1&&this.g.Td(s),!(l==null||3>l.size)){var x=this;l.Vd(0,l.size,function(W,K){return x.Mh(W,K)}),s=new h.h,c=new h.h,d=new h.h,c.Rc();var $=-1;f=new h.ia(0),m=new h.ia(0),b=null;for(var E=this.g.Gd(),O=this.g.Gd(),R=0,k=l.size;R<k;R++){var j=l.get(R);if(this.g.D(j,n),!n.qb(c)){if($!=-1){for(var F=$;F<R;F++){$=l.get(F);var L=this.g.U($);j=this.g.Ma($);var V=!1;this.g.D(L,s),0>c.compare(s)&&(u?s.y==o:s.x==o)&&(f.add($),V=!0,this.g.Ra($,O,1)),this.g.D(j,s),0>c.compare(s)&&(u?s.y==o:s.x==o)&&(V||f.add($),this.g.Ra($,E,1))}for(F=0,V=f.size;F<V;F++){if($=f.get(F),j=this.g.Pa($,E),L=this.g.Pa($,O),j==1&&(j=this.g.Ma($),this.g.D(j,d),!d.qb(n))){b==null&&(b=[]);var B=h.h.tb(c,d);b[0]=h.h.tb(d,n)/B,b[0]==0?b[0]=2220446049250313e-31:b[0]==1&&(b[0]=.9999999999999998),this.g.Ul(j,b,1),j=this.g.Ma($),this.g.mf(j,n),m.add(j),this.g.Ra(j,E,1),this.g.Ra(j,O,-1)}L==1&&(L=this.g.U($),this.g.D(L,d),d.qb(n)||(b==null&&(b=[]),B=h.h.tb(c,d),b[0]=h.h.tb(c,n)/B,b[0]==0?b[0]=2220446049250313e-31:b[0]==1&&(b[0]=.9999999999999998),this.g.Ul($,b,1),j=this.g.U($),this.g.mf(j,n),m.add(j),this.g.Ra(j,E,-1),this.g.Ra(j,O,1)))}$=f,f=m,(m=$).clear(!1)}$=R,c.L(n)}}this.g.Td(E),this.g.Td(O)}},w.prototype.Nl=function(u,o){for(var s=new h.h,n=null,l=-1,c=0,d=this.dd.size;c<d;c++){var f=this.dd.get(c);if(f!=-1){var m=this.g.U(f);this.g.D(f,s),(u?s.y==o:s.x==o)&&(this.g.D(m,s),(u?s.y==o:s.x==o)&&(l==-1&&(l=this.g.Gd()),n==null&&(n=new h.ia(0)).Jb(100),this.g.Pa(f,l)!=-2&&(n.add(f),this.g.Ra(f,l,-2)),this.g.Pa(m,l)!=-2&&(n.add(m),this.g.Ra(m,l,-2))))}}if(n==null)l!=-1&&this.g.Td(l);else{var b=this;for(n.Vd(0,n.size,function(K,re){return b.Mh(K,re)}),c=0,d=n.size;c<d;c++){var x=n.get(c);this.g.Ra(x,l,c)}f=new h.h,(m=new h.h).Rc();var $=-1;for(c=0,d=n.size;c<d;c++)if((x=n.get(c))!=-1&&(this.g.D(x,s),!s.qb(m))){if($!=-1)for(;;){x=!1;for(var E=1<c-$?c-1:c,O=$;O<E;O++){var R=n.get(O);if(R!=-1){var k=-1,j=this.g.U(R);this.g.D(j,f),0>m.compare(f)&&(u?f.y==o:f.x==o)&&(k=j),j=-1;var F=this.g.Ma(R);if(this.g.D(F,f),0>m.compare(f)&&(u?f.y==o:f.x==o)&&(j=F),k!=-1&&j!=-1)this.Kh(R,n,l),this.g.pd(R,!1),this.Kh(k,n,l),this.g.pd(k,!1),x=!0;else if(k!=-1||j!=-1){for(F=O+1;F<c;F++){var L=n.get(F);if(L!=-1){var V=this.g.U(L),B=-1;this.g.D(V,f),0>m.compare(f)&&(u?f.y==o:f.x==o)&&(B=V),V=this.g.Ma(L);var W=-1;if(this.g.D(V,f),0>m.compare(f)&&(u?f.y==o:f.x==o)&&(W=V),B!=-1&&W!=-1){this.Kh(L,n,l),this.g.pd(L,!1),this.Kh(B,n,l),this.g.pd(B,!1),x=!0;break}if(k!=-1&&W!=-1){this.zt(n,R,k,L,W,l),x=!0;break}if(j!=-1&&B!=-1){this.zt(n,L,B,R,j,l),x=!0;break}}}if(x)break}}}if(!x)break}$=c,m.L(s)}this.g.Td(l)}},w.prototype.Kh=function(u,o,s){s=this.g.Pa(u,s),o.set(s,-1),s=this.g.Pa(u,this.ji),this.dd.set(s,-1),(o=this.g.bd(u))!=-1&&this.g.Xa(o)==u&&(this.g.Jf(o,-1),this.g.Wg(o,-1))},w.prototype.zt=function(u,o,s,n,l,c){this.g.Bc(o,n),this.g.Cc(n,o),this.g.Cc(s,l),this.g.Bc(l,s),this.Kh(n,u,c),this.g.mi(n,!1),this.Kh(l,u,c),this.g.mi(l,!0)},w.prototype.Ty=function(){for(var u=0,o=this.dd.size;u<o;u++){var s=this.dd.get(u);s!=-1&&this.g.aj(s,-1)}for(var n=0,l=0,c=this.g.Ob(this.X);c!=-1;){var d=this.g.Xa(c);if(d==-1||c!=this.g.bd(d)){var f=c;c=this.g.Rb(c),this.g.Jf(f,-1),this.g.$q(f)}else{s=d,f=0;do this.g.aj(s,c),f++,s=this.g.U(s);while(s!=d);this.g.cp(c,!1),this.g.Wg(c,this.g.Ma(d)),this.g.Vj(c,f),l+=f,n++,c=this.g.Rb(c)}}for(u=0,o=this.dd.size;u<o;u++)if((s=this.dd.get(u))!=-1&&(c=this.g.bd(s))==-1){c=this.g.vf(this.X,-1),f=0,d=s;do this.g.aj(s,c),f++,s=this.g.U(s);while(s!=d);2>=f?(s=this.g.Pa(d,this.ji),this.dd.set(s,-1),d=this.g.pd(d,!1),f==2&&(0<=(s=this.g.Pa(d,this.ji))&&this.dd.set(s,-1),this.g.pd(d,!1)),f=c,this.g.Jf(f,-1),this.g.$q(f)):(this.g.kn(c,!0),this.g.Vj(c,f),this.g.Jf(c,d),this.g.Wg(c,this.g.Ma(d)),this.g.cp(c,!1),l+=f,n++)}for(this.g.Rl(this.X,n),this.g.Tj(this.X,l),u=0,o=this.g.ld;o!=-1;o=this.g.ue(o))u+=this.g.I(o);this.g.bC(u)},w.By=function(u,o,s,n){return new w(o,n).Ay(u,s)},w.clip=function(u,o,s,n,l){return w.Nu(u,o,null,s,n,l)},w.Nu=function(u,o,s,n,l,c){var d=u.getType();if(d==33)return l=u.D(),o.contains(l)?u:u.Ia();if(d==197)return l=new h.l,u.A(l),l.Ea(o)?(o=new h.Fh,u.copyTo(o),o.Xo(l),o):u.Ia();if(u.B())return u;if(o.B())return u.Ia();var f=new h.l;if(u.xc(f),o.contains(f))return u;if(!o.isIntersecting(f))return u.Ia();if((s!=null||isNaN(n))&&h.ta.ty(s,o,!1),!h.aa.xj(d))throw h.i.N();if((s=u.Bb)!=null&&(s=s.Fk)!=null){if((s=s.Ro(o))==1){if(d!=1736)throw h.i.fa("internal error");return(u=new h.Da(u.description)).tp(o),u}if(s==0)return u.Ia()}switch(d){case 550:for(c=null,d=u.I(),s=u.ub(0),n=0,l=new h.h,f=0;f<d;f++)s.tc(2*f,l),o.contains(l)||(n==0&&(c=u.Ia()),n<f&&c.Fd(u,n,f),n=f+1);return 0<n&&c.Fd(u,n,d),n==0?u:c;case 1736:case 1607:return w.By(u,o,l,c);default:throw h.i.fa("internal error")}},w.prototype.Mh=function(u,o){var s=new h.h;return this.g.D(u,s),u=new h.h,this.g.D(o,u),s.compare(u)},w}();h.ri=C}(G||(G={})),function(h){var C=new h.h,w=function(){function o(s,n,l,c,d){this.Pm=new h.h,this.Dk=new h.h,this.Pi=new h.h,this.g=s,this.Aw=l,this.no=c,this.Pm=n,this.yl=d,this.Dk.Rc(),this.Pi.Rc()}return o.prototype.xE=function(s){this.g.D(s,this.Dk),s=h.O.truncate((this.Dk.x-this.Pm.x)*this.no+.5);var n=h.O.truncate((this.Dk.y-this.Pm.y)*this.no+.5);return u.jG(s,n)},o.prototype.jz=function(s){return this.g.Pa(s,this.yl)},o.prototype.Py=function(s,n){return this.g.D(s,this.Dk),this.g.D(n,this.Pi),u.Cv(this.Dk.x,this.Dk.y,this.Pi.x,this.Pi.y,this.Aw)},o}();h.sY=function(){};var u=function(){function o(){this.Pm=new h.h,this.pq=[0,0,0,0],this.xs=[0,0,0,0],this.qo=this.yl=-1}return o.iQ=function(s,n){var l=new o;return l.g=s,l.qa=n,l.Aw=n*n,l.$v=2*n,l.no=1/l.$v,l.BO()},o.Cv=function(s,n,l,c,d){return(s-=l)*s+(n-=c)*n<=d},o.jG=function(s,n){return h.O.Th(n,h.O.Th(s))},o.prototype.DO=function(s,n){this.g.Gc(s,C);for(var l=(C.y-this.Pm.y)*this.no,c=h.O.truncate((C.x-this.Pm.x)*this.no),d=h.O.truncate(l),f=l=0;1>=f;f+=1)for(var m=0;1>=m;m+=1){var b=o.jG(c+f,d+m),x=this.xl.rR(b);x!=-1&&(this.pq[l]=x,this.xs[l]=b,l++)}for(c=l-1;1<=c;c--)for(x=this.pq[c],d=c-1;0<=d;d--)if(x==this.pq[d]){this.xs[d]=-1,c!=--l&&(this.xs[c]=this.xs[l],this.pq[c]=this.pq[l]);break}for(d=0;d<l;d++)this.EO(s,this.xs[d],C,this.pq[d],n)},o.prototype.EO=function(s,n,l,c,d){for(var f=new h.h;c!=-1;c=this.xl.ER(c)){var m=this.xl.ja(c);s==m||n!=-1&&this.g.Pa(m,this.yl)!=n||(this.g.Gc(m,f),o.Cv(l.x,l.y,f.x,f.y,this.Aw)&&d.add(c))}},o.prototype.Xm=function(s,n,l){var c=this.g.Pa(s,this.qo),d=this.g.Pa(n,this.qo);return c==-1&&(c=this.zd.Ph(),this.zd.addElement(c,s),this.g.Ra(s,this.qo,c)),d==-1?this.zd.addElement(c,n):this.zd.Hy(c,d),this.g.Ra(n,this.qo,-2),n=this.YT(s,n),l&&(l=this.kw.xE(s),this.g.Ra(s,this.yl,l)),n},o.WT=function(s,n,l){s.Nb(n),l=s;var c=new h.h;o.XT(s.D(),n.D(),c),l.Cb(c)},o.XT=function(s,n,l){var c=s.x;s.x!=n.x&&(c=(1*s.x+1*n.x)/2);var d=s.y;s.y!=n.y&&(d=(1*s.y+1*n.y)/2),l.ma(c,d)},o.prototype.YT=function(s,n){var l=new h.h;this.g.D(s,l);var c=new h.h;this.g.D(n,c);var d=this.g.cG(s),f=d+(n=this.g.cG(n)),m=0,b=l.x;l.x!=c.x&&(b=(l.x*d+c.x*n)/f,m++);var x=l.y;return l.y!=c.y&&(x=(l.y*d+c.y*n)/f,m++),0<m&&this.g.Cb(s,b,x),this.g.vX(s,f),m!=0},o.prototype.BO=function(){var s=this.g.fd,n=this.g.IF();for(this.Pm=n.mz(),n=Math.max(n.ca(),n.R())/2147483646,this.$v<n&&(this.$v=n,this.no=1/this.$v),this.zd=new h.au,this.zd.At(h.O.truncate(this.g.fd/3+1)),this.zd.fn(h.O.truncate(this.g.fd/3+1)),this.yl=this.g.Gd(),this.qo=this.g.Gd(),this.kw=new w(this.g,this.Pm,this.Aw,this.no,this.yl),this.xl=new h.dL(h.O.truncate(4*s/3),this.kw),this.xl.AW(this.g.fd),s=!1,n=this.g.ld;n!=-1;n=this.g.ue(n))for(var l=this.g.Ob(n);l!=-1;l=this.g.Rb(l))for(var c=this.g.Xa(l),d=0,f=this.g.Ja(l);d<f;d++){var m=this.kw.xE(c);this.g.Ra(c,this.yl,m),this.xl.addElement(c,m),c=this.g.U(c)}var b=new h.ia(0);for(b.Jb(10),n=this.g.ld;n!=-1;n=this.g.ue(n))for(l=this.g.Ob(n);l!=-1;l=this.g.Rb(l))for(c=this.g.Xa(l),d=0,f=this.g.Ja(l);d<f;d++){if(this.g.Pa(c,this.qo)!=-2)for(m=this.g.Pa(c,this.yl),this.xl.jd(c,m);this.DO(c,b),b.size!=0;){m=!1;for(var x=0,$=b.size;x<$;x++){var E=b.get(x),O=this.xl.ja(E);this.xl.vd(E),m=this.Xm(c,O,x+1==$)||m}if(s=s||m,b.clear(!1),!m)break}c=this.g.U(c)}return s&&this.vN(),this.kw=this.xl=null,this.g.Td(this.yl),this.g.Td(this.qo),s},o.prototype.vN=function(){for(var s=new h.h,n=this.zd.je;n!=-1;n=this.zd.qz(n)){var l=this.zd.rc(n);for(this.g.D(this.zd.ja(l),s),l=this.zd.lb(l);l!=-1;l=this.zd.lb(l))this.g.mf(this.zd.ja(l),s)}},o}();h.Yt=u}(G||(G={})),function(h){var C=function(){function w(u){u===void 0&&(u=null),this.yg=null,this.Pb=!1,this.yg=u===null?[]:u}return w.prototype.copyTo=function(u){if(u.Pb)throw h.i.fa("CompositeGeographicTransformation is read-only");for(var o=0;o<this.yg.length;o++)u.yg.push(this.yg[o].Of())},w.prototype.count=function(){return this.yg.length},w.prototype.add=function(u){if(this.Pb)throw h.i.fa("CompositeGeographicTransformation is read-only");this.yg.push(u.Of())},w.prototype.clear=function(){if(this.Pb)throw h.i.fa("CompositeGeographicTransformation is read-only");this.yg.length=0},w.prototype.remove=function(u){if(this.Pb)throw h.i.fa("CompositeGeographicTransformation is read-only");this.yg.splice(u,1)},w.prototype.jg=function(){var u=new w;return this.copyTo(u),u},w.prototype.Of=function(){return this.jg()},w.prototype.transform=function(u,o,s,n){if(u.length<o)throw h.i.fa("invalid Argument");var l=s;for(s=0;s<this.yg.length;s++){var c=this.yg[s];if(c.qm()!=null){var d=c.Un,f=d?1:0,m=d?c.qm().getGeogcs2():c.qm().getGeogcs1();if(m=l/(m=m.getUnit().getUnitFactor()),3552713678800501e-30<Math.abs(m-1))for(l=0;l<o;l++)u[l][0]*=m,u[l][1]*=m;h.MC.geogToGeog(c.qm(),o,u,null,f),l=(d?c.qm().getGeogcs1():c.qm().getGeogcs2()).getUnit().getUnitFactor()}}if(m=l/n,3552713678800501e-30<Math.abs(m-1))for(l=0;l<o;l++)u[l][0]*=m,u[l][1]*=m;return o},w.prototype.Nb=function(u){if(u==this)return!0;if(!(u instanceof w)||this.yg.length!=u.yg.length)return!1;for(var o=0;o<this.yg.length;o++)if(!this.yg[o].Nb(u.yg[o]))return!1;return!0},w.prototype.ix=function(){this.Pb=!0},w.prototype.toString=function(){for(var u="CGT ("+this.count()+") ",o=0,s=this.count();o<s;++o)u+=this.yg[o].toString()+", ";return 200<u.length?u.substring(0,197)+"... ("+u.length.toString()+" characters)":u},w.create=function(){return new w},w}();h.wC=C}(G||(G={})),function(h){var C,w=Math.PI,u=2*Math.PI,o=Math.PI/2,s=function(){function c(){}return c.TO=function(d,f){var m=new c;return m.x=d,m.y=f,m.type=0,m.Uh=0,m},c.al=function(d){var f=new c;return f.x=d.x,f.y=d.y,f.type=0,f.Uh=0,f},c.SO=function(d){var f=new c;return f.x=d.x,f.y=d.y,f.type=d.type,f.Uh=d.Uh,f},c.Pd=function(d,f,m){var b=new c;return b.x=d.x+f*Math.cos(m),b.y=d.y+f*Math.sin(m),b.type=d.type,b.Uh=d.Uh,b},c.Pu=function(d,f){var m=new c;return m.x=.5*(d.x+f.x),m.y=.5*(d.y+f.y),m.type=d.type,m.Uh=d.Uh,m},c.TE=function(d,f){var m=new c;return m.x=d.x+.001*(f.x-d.x),m.y=d.y+.001*(f.y-d.y),m.type=d.type,m.Uh=d.Uh,m},c}(),n=function(){};(C=h.fL||(h.fL={}))[C.Round=0]="Round",C[C.Bevel=1]="Bevel",C[C.Miter=2]="Miter",C[C.Square=3]="Square";var l=function(){function c(d){this.NA=this.Yb=this.wg=null,this.nd=d}return c.V=function(d,f,m,b,x,$){if(d==null||1>d.Db())throw h.i.N();return f==0||d.B()?d:(($=new c($)).ko=d,$.Ka=f,$.qa=x,$.Ki=m,$.CA=b,$.Rx())},c.prototype.eM=function(){var d=this.ko,f=d.ac(),m=d.wc(),b=new h.h;return b.uc(m,f),b.normalize(),b.Hv(),b.scale(this.Ka),f.add(b),m.add(b),b=d.Ia(),d.Dc(f),d.Qc(m),b},c.prototype.dM=function(){var d=this.ko;if(0<this.Ka&&this.Ki!=2){var f=new h.Da;return f.ad(d,!1),this.ko=f,this.Rx()}return(d=new h.Fh(d.$)).W(this.Ka,this.Ka),d},c.prototype.tJ=function(d,f,m,b){return(f.x-d.x)*(b.x-m.x)+(f.y-d.y)*(b.y-m.y)},c.prototype.fc=function(d,f){if(f===void 0)this.Yb.push(d),this.gf++;else if(this.gf==0)this.fc(d);else{var m=this.Bw,b=this.wg[f==0?m-1:f-1],x=this.wg[f],$=this.tJ(b,x,this.Yb[this.gf-1],d);0<$?this.fc(d):0>$&&(0<this.tJ(b,x,x,this.Yb[this.gf-1])?(x=this.wg[f==0?m-2:f==1?m-1:f-2],m=s.Pd(b,this.Ka,Math.atan2(b.y-x.y,b.x-x.x)-o),this.Yb[this.gf-1]=m,this.Ki==1||this.Ki==2?(m=s.Pu(m,b),this.fc(m),m=s.Pd(b,this.Ka,this.Jv+o),(b=s.Pu(m,b)).type|=256,this.fc(b)):(m=s.Pd(b,this.Ka,this.Jv+o)).type|=256,this.fc(m),this.fc(d,f)):(m=s.Pd(x,this.Ka,this.Jv+o),this.fc(m),this.Ki==1||this.Ki==2?(m=s.Pu(m,x),this.fc(m),m=s.Pd(x,this.Ka,this.aA-o),(b=s.Pu(m,x)).type|=256,this.fc(b)):(m=s.Pd(x,this.Ka,this.aA-o)).type|=256,this.fc(m)))}},c.prototype.mE=function(){var d,f=this.Bw;this.gf=0;var m=.5*this.qa,b=0,x=0;for(d=0;d<f;d++){var $=this.wg[d],E=d==0?this.wg[f-1]:this.wg[d-1],O=d==f-1?this.wg[0]:this.wg[d+1],R=E.x-$.x,k=E.y-$.y,j=O.x-$.x,F=O.y-$.y,L=Math.atan2(k,R),V=Math.atan2(F,j);if(this.Jv=L,this.aA=V,d==0&&(b=L,x=V),R=R*F-j*k,k=V,V<L&&(V+=u),0<R*this.Ka)this.Ki==1||this.Ki==2?(L=s.Pd($,this.Ka,L+o),this.fc(L),L=s.TE($,L),this.fc(L),L=s.Pd($,this.Ka,V-o),($=s.TE($,L)).type|=256,this.fc($),this.fc(L)):(R=.5*(V-L),R=this.Ka/Math.abs(Math.sin(R)),L=s.Pd($,R,.5*(L+V)),this.fc(L,d));else if(512&$.type){for(R=1-m/Math.abs(this.Ka),E=1,O=0>this.Ka?-w:w,-1<R&&1>R&&(.017453292519943295>(k=2*Math.acos(R))&&(k=.017453292519943295),1<(E=h.O.truncate(w/k+1.5))&&(O/=E)),k=L+o,L=s.Pd($,this.Ka,k),d==0&&(L.type|=1024),this.fc(L,d),R=this.Ka/Math.cos(O/2),k+=O/2,(L=s.Pd($,R,k)).type|=1024,this.fc(L);0<--E;)k+=O,(L=s.Pd($,R,k)).type|=1024,this.fc(L);(L=s.Pd($,this.Ka,V-o)).type|=1024,this.fc(L)}else if(this.Ki==1)L=s.Pd($,this.Ka,L+o),this.fc(L,d),L=s.Pd($,this.Ka,V-o),this.fc(L);else if(this.Ki==0)for(R=1-m/Math.abs(this.Ka),E=1,O=V-o-(L+o),-1<R&&1>R&&(.017453292519943295>(k=2*Math.acos(R))&&(k=.017453292519943295),1<(E=h.O.truncate(Math.abs(O)/k+1.5))&&(O/=E)),R=this.Ka/Math.cos(.5*O),k=L+o+.5*O,L=s.Pd($,R,k),this.fc(L,d);0<--E;)k+=O,L=s.Pd($,R,k),this.fc(L);else this.Ki==2?(R=E.x-$.x,k=E.y-$.y,.99999999<(E=(R*(j=O.x-$.x)+k*(F=O.y-$.y))/Math.sqrt(R*R+k*k)/Math.sqrt(j*j+F*F))?(L=s.Pd($,1.4142135623730951*this.Ka,V-.25*w),this.fc(L,d),L=s.Pd($,1.4142135623730951*this.Ka,V+.25*w),this.fc(L)):(E=Math.abs(this.Ka/Math.sin(.5*Math.acos(E))))>(O=Math.abs(this.CA*this.Ka))?(R=.5*(V-L),R=this.Ka/Math.abs(Math.sin(R)),L=s.Pd($,R,.5*(L+V)),V=h.h.construct(L.x,L.y),L=h.h.construct($.x,$.y),($=new h.h).uc(V,L),(V=new h.h).HW(O/$.length(),$,L),L=(E-O)*Math.abs(this.Ka)/Math.sqrt(E*E-this.Ka*this.Ka),0<this.Ka?$.Hv():$.ar(),$.scale(L/$.length()),(L=new h.h).add(V,$),(E=new h.h).uc(V,$),L=s.al(L),this.fc(L,d),L=s.al(E),this.fc(L)):(R=.5*(V-L),R=this.Ka/Math.abs(Math.sin(R)),L=s.Pd($,R,.5*(L+V)),this.fc(L,d))):(V=k,0<this.Ka?(V>L&&(V-=u),E=L-V<o):(V<L&&(V+=u),E=V-L<o),E?(k=0>(R=1.4142135623730951*this.Ka)?L+.25*w:L+.75*w,L=s.Pd($,R,k),this.fc(L,d),k=0>R?V-.25*w:V-.75*w,L=s.Pd($,R,k),this.fc(L)):(R=.5*(V-L),R=this.Ka/Math.abs(Math.sin(R)),V<L&&(V+=u),L=s.Pd($,R,(L+V)/2),this.fc(L,d)))}return this.Jv=b,this.aA=x,this.fc(this.Yb[0],0),$=s.SO(this.Yb[this.gf-1]),this.Yb[0]=$,this.wW()},c.prototype.Au=function(d,f){if(!(2>f))for(var m=0;m<f;m++){var b=this.Yb[d+m];m!=0?this.NA.Ci(h.h.construct(b.x,b.y)):this.NA.Lt(h.h.construct(b.x,b.y))}},c.prototype.fM=function(d,f,m){var b=d.Ba(f),x=d.Vc(f);if(this.Yb=[],this.NA=m,d.dc(f)){for(f=d.Na(b);d.Na(x-1).qb(f);)x--;if(2<=x-b){for(this.Bw=x-b,this.wg=[],f=b;f<x;f++)this.wg.push(s.al(d.Na(f)));this.mE()&&this.Au(0,this.gf-1)}}else{for(f=d.Na(b);b<x&&d.Na(b+1).qb(f);)b++;for(f=d.Na(x-1);b<x&&d.Na(x-2).qb(f);)x--;if(2<=x-b){for(this.Bw=2*(x-b)-2,this.wg=[],(m=s.al(d.Na(b))).type|=1536,this.wg.push(m),f=b+1;f<x-1;f++)m=s.al(d.Na(f)),this.wg.push(m);for((m=s.al(d.Na(x-1))).type|=512,this.wg.push(m),f=x-2;f>=b+1;f--)(m=s.al(d.Na(f))).type|=1024,this.wg.push(m);if(this.mE())if(2<=this.Yb.length){for(d=-1,(x=!!(1024&this.Yb[this.gf-1].type))||(d=0),f=1;f<this.gf;f++)(b=!!(1024&this.Yb[f].type))?x||1<(x=f-1)-d+1&&this.Au(d,x-d+1):x&&(d=f-1),x=b;x||1<(x=this.gf-1)-d+1&&this.Au(d,x-d+1)}else d=0,x=this.gf-1,0<=d&&1<=x-d&&this.Au(d,x-d+1)}}this.wg=null,this.Bw=0,this.Yb=null,this.gf=0},c.prototype.wW=function(){for(var d=!1,f=0;f<this.gf;f++){var m=this.Yb[f];m.qh=f+1,m.sh=f-1,this.Yb[f]=m}for((m=this.Yb[0]).sh=this.gf-2,this.Yb[0]=m,(m=this.Yb[this.gf-2]).qh=0,this.Yb[this.gf-2]=m,f=m=0;f<this.gf;f++)if(256&this.Yb[m].type){var b=this.GP(m);if(b==-1){d=!0;break}m=b}else m=this.Yb[m].qh;return!d&&(this.QO(m),!0)},c.prototype.GP=function(d){for(var f,m,b=this.gf-1,x=d,$=1;$<=b-2;$++){f=x=this.Yb[x].qh,m=d;for(var E=1;E<=$;E++){if(m=this.Yb[m].sh,!(256&this.Yb[m].type||256&this.Yb[f].type)){var O=this.gS(m,f);if(O!=-1)return O}f=this.Yb[f].sh}}return-1},c.prototype.gS=function(d,f){var m=this.Yb[this.Yb[d].sh],b=this.Yb[d],x=this.Yb[this.Yb[f].sh],$=this.Yb[f];if(!this.JW(m,b,x,$))return-1;var E=new n;return this.xQ(m,b,x,$,E)&&!E.bE&&h.O.bK((b.x-m.x)*($.y-x.y)-(b.y-m.y)*($.x-x.x))!=h.O.bK(this.Ka)?(m=this.Yb[d].sh,E.an.type=b.type,E.an.qh=f,E.an.sh=m,this.Yb[d]=E.an,E.an=this.Yb[f],E.an.sh=d,this.Yb[f]=E.an,f):-1},c.prototype.JW=function(d,f,m,b){return Math.max(d.x,f.x)>=Math.min(m.x,b.x)&&Math.max(m.x,b.x)>=Math.min(d.x,f.x)&&Math.max(d.y,f.y)>=Math.min(m.y,b.y)&&Math.max(m.y,b.y)>=Math.min(d.y,f.y)},c.prototype.xQ=function(d,f,m,b,x){x.bE=!1;var $=(f.y-d.y)*(b.x-m.x)-(f.x-d.x)*(b.y-m.y),E=(m.y-d.y)*(f.x-d.x)-(m.x-d.x)*(f.y-d.y);if(0<=($=$==0?2:E/$)&&1>=$){var O=$;if($=(b.y-m.y)*(f.x-d.x)-(b.x-m.x)*(f.y-d.y),E=(d.y-m.y)*(b.x-m.x)-(d.x-m.x)*(b.y-m.y),0<=($=$==0?2:E/$)&&1>=$)return x.an=s.TO(d.x+$*(f.x-d.x),d.y+$*(f.y-d.y)),x.an.Uh=m.Uh+O*(b.Uh-m.Uh),O!=0&&O!=1||$!=0&&$!=1||(x.bE=!0),x.VY=$,x.WY=O,!((O==0||O==1)&&0<$&&1>$||($==0||$==1)&&0<O&&1>O)}return!1},c.prototype.QO=function(d){for(;this.Yb[d].sh<d;)d=this.Yb[d].sh;var f=0,m=d;do m=this.Yb[m],this.Yb[f]=m,m=m.qh,f++;while(m!=d);this.Yb[f]=this.Yb[0],this.gf=f+1},c.prototype.$C=function(d){var f=this.ko,m=f.Ga();if(m!=null){m.Zi();for(var b=-1;m.$a();)b++,this.fM(f,b,d)}},c.prototype.Rx=function(){var d=this.ko.getType();return d==322?this.eM():d==197?this.dM():h.aa.yd(d)?((d=new h.Ta).oc(this.ko,!0),this.ko=d,this.Rx()):d==1607?(d=new h.Ta,this.$C(d),d):d==1736?(d=new h.Da,this.$C(d),d):null},c}();h.IK=l}(G||(G={})),function(h){var C=function(){function s(n){this.qk=n}return s.prototype.D=function(n,l){this.qk.g.D(n,l)},s.prototype.vd=function(n){var l=this.qk.Fa.ja(n);this.qk.Fa.vd(n,-1),this.qk.g.pd(l,!1)},s}(),w=function(){function s(n){this.qk=n}return s.prototype.D=function(n,l){this.qk.IT.D(n,l)},s.prototype.vd=function(n){this.qk.Fa.vd(n,-1)},s}(),u=function(){function s(n){this.qk=n}return s.prototype.D=function(n,l){l.L(this.qk.LT[n])},s.prototype.vd=function(n){this.qk.Fa.vd(n,-1)},s}(),o=function(){function s(n){n===void 0?(this.Fa=new h.Yj,this.Fa.De(20),this.g=new h.gd,this.xT=this.g.Ig(550),this.Ss=this.g.vf(this.xT,-1),this.Xh=new C(this)):n instanceof Array?(this.Fa=new h.Yj,this.Fa.De(20),this.LT=n,this.Xh=new u(this)):(this.Fa=new h.Yj,this.Fa.De(20),this.IT=n,this.Xh=new w(this))}return s.prototype.Ib=function(n){var l=n.getType();if(h.Gx.xj(l))this.jN(n);else if(h.Vk.yd(l))this.oN(n);else if(l==197)this.gN(n);else{if(l!=33)throw h.i.N("invalid shape type");this.nN(n)}},s.prototype.cR=function(){var n=new h.Sa,l=this.Fa.rc(-1),c=new h.Da(this.g.ht);for(this.g.Vi(this.Fa.ja(l),n),c.nf(n),l=this.Fa.lb(l);l!=-1;l=this.Fa.lb(l))this.g.Vi(this.Fa.ja(l),n),c.lineTo(n);return c},s.RO=function(n){var l=new s(n),c=n.I(),d=1,f=new h.h,m=new h.h,b=new h.h;for(n.D(0,f);n.D(d,m),m.Rz(f)&&d<c-1;)d++;for(l.Fa.addElement(0,-1),l.Fa.xn(d),c=d+1;c<n.I();c++)n.D(c,b),(d=l.pC(b))!=-1&&l.Fa.Sj(d,c);for(b=new h.Sa,d=l.Fa.rc(-1),c=new h.Da(n.description),n.ve(l.Fa.ja(d),b),c.nf(b),d=l.Fa.lb(d);d!=-1;d=l.Fa.lb(d))n.ve(l.Fa.ja(d),b),c.lineTo(b);return c},s.construct=function(n,l,c){for(var d=new s(n),f=1,m=n[0];n[f].Rz(m)&&f<l-1;)f++;for(d.Fa.addElement(0,-1),d.Fa.xn(f),f+=1;f<l;f++)(m=d.pC(n[f]))!=-1&&d.Fa.Sj(m,f);for(n=0,l=d.Fa.rc(-1);l!=-1;l=d.Fa.lb(l))c[n++]=d.Fa.ja(l);return n},s.JG=function(n,l){var c=n.Ba(l),d=n.Vc(l);if(l=!n.dc(l)&&n.Nn(l),n=n.ub(0),d*=2,l&&(d-=2),6>d-(c*=2))return!0;l=new h.h;var f=new h.h,m=new h.h;n.tc(c,l),n.tc(c+2,f),n.tc(c+4,m);var b=s.Wu(f,m,l);if(b.ps()||!s.um(b.value()))return!1;var x=h.h.construct(f.x,f.y),$=new h.h;for(c+=6;c<d;c+=2)if($.L(f),f.L(m),n.tc(c,m),(b=s.Wu(f,m,l)).ps()||!s.um(b.value())||(b=s.Wu(x,m,l)).ps()||!s.um(b.value())||(b=s.Wu(f,m,$)).ps()||!s.um(b.value()))return!1;return!0},s.prototype.jN=function(n){for(var l=new h.Sa,c=new h.h,d=0;d<n.I();d++){n.D(d,c);var f=this.Cr(c);if(f!=-1){n.ve(d,l);var m=this.g.fc(this.Ss,l);this.Fa.Sj(f,m)}}},s.prototype.gN=function(n){for(var l=new h.Sa,c=new h.h,d=0;4>d;d++){n.mB(d,c);var f=this.Cr(c);if(f!=-1){n.Hf(d,l);var m=this.g.fc(this.Ss,l);this.Fa.Sj(f,m)}}},s.prototype.oN=function(n){var l=new h.Sa,c=n.ac();if((c=this.Cr(c))!=-1){n.To(l);var d=this.g.fc(this.Ss,l);this.Fa.Sj(c,d)}c=n.wc(),(c=this.Cr(c))!=-1&&(n.Po(l),n=this.g.fc(this.Ss,l),this.Fa.Sj(c,n))},s.prototype.nN=function(n){var l=n.D();(l=this.Cr(l))!=-1&&(n=this.g.fc(this.Ss,n),this.Fa.Sj(l,n))},s.prototype.Cr=function(n){var l=-1;if(this.Fa.size(-1)==0)return this.Fa.addElement(-4,-1);if(this.Fa.size(-1)==1){var c=this.g.Na(this.Fa.ja(this.Fa.rc(-1)));return n.Rz(c)||(l=this.Fa.xn(-5)),l}return this.pC(n)},s.prototype.pC=function(n){var l=-1;do{var c=this.Fa.rc(-1),d=this.Fa.Fc(-1),f=this.Fa.ja(c),m=this.Fa.ja(d),b=new h.h,x=new h.h;if(this.Xh.D(f,b),this.Xh.D(m,x),f=h.h.Uq(x,n,b),s.um(f))l=this.Fa.xn(-1),(b=this.nC(n,d,c))!=c&&this.oC(n,c,this.Fa.we(b));else if(s.CG(f)){x=this.Fa.sv(-1);var $=this.Fa.rc(-1),E=this.Fa.Fc(-1);for(f=new h.h,m=new h.h;$!=this.Fa.we(E);){var O=this.Fa.ja(x);this.Xh.D(O,f),O=h.h.Uq(f,n,b),s.CG(O)?(E=x,x=this.Fa.ll(x)):($=x,x=this.Fa.Xp(x))}if(x=E,b=$,O=this.Fa.ja(x),$=this.Fa.ja(b),this.Xh.D(O,f),this.Xh.D($,m),b!=c&&(f=h.h.Uq(m,n,f),!s.um(f)))continue;l=this.Fa.zu(b,x,-2,!1),this.oC(n,x,d),this.nC(n,b,c)}else this.sb==null&&(this.sb=new h.yb),this.sb.Dc(x),this.sb.Qc(b),0>(b=this.sb.fe(n,!0))?(b=this.Fa.we(d),this.Fa.vd(d,-1),l=this.Fa.xn(-3),this.nC(n,b,c)):1<b&&(b=this.Fa.lb(c),this.Fa.vd(c,-1),l=this.Fa.zu(-1,b,-3,!1),this.oC(n,b,d))}while(!1);return l},s.prototype.oC=function(n,l,c){if(l!=c){var d=this.Fa.ja(l),f=this.Fa.lb(l),m=new h.h,b=new h.h;for(this.Xh.D(d,m);l!=c&&2<this.Fa.size(-1)&&(this.Xh.D(this.Fa.ja(f),b),d=h.h.Uq(b,n,m),!s.um(d));)d=l,l=f,m.L(b),f=this.Fa.lb(l),this.Xh.vd(d)}},s.prototype.nC=function(n,l,c){if(l==c)return c;var d=this.Fa.ja(l),f=this.Fa.we(l),m=new h.h,b=new h.h;for(this.Xh.D(d,m);l!=c&&2<this.Fa.size(-1)&&(this.Xh.D(this.Fa.ja(f),b),d=h.h.Uq(m,n,b),!s.um(d));)d=l,l=f,m.L(b),f=this.Fa.we(l),this.Xh.vd(d);return l},s.Wu=function(n,l,c){var d=new h.Wb;d.set(l.x),d.sub(n.x);var f=new h.Wb;f.set(c.y),f.sub(n.y);var m=new h.Wb;return m.set(l.y),m.sub(n.y),(l=new h.Wb).set(c.x),l.sub(n.x),d.Ag(f),m.Ag(l),d.sub(m),d},s.um=function(n){return 0>n},s.CG=function(n){return 0<n},s}();h.Zt=o}(G||(G={})),function(h){var C=function(){function w(u){this.g=null,this.tH=!0,this.nd=u}return w.zU=function(u,o,s){return u=h.ta.Er(u),h.Yt.Cv(o.Lg(),o.ih(),s.Lg(),s.ih(),h.lc.ox(u))},w.CO=function(u,o){var s=new h.Sa;return h.Yt.WT(u,o,s),s},w.V=function(u,o,s,n){return(s=new w(s)).g=u,s.qa=o,s.tH=n,s.EM()},w.prototype.nM=function(u){return h.Yt.iQ(this.g,u)},w.prototype.sM=function(u){return h.$t.V(this.g,u,this.nd)},w.prototype.EM=function(){var u=this.qa,o=h.ta.Er(u),s=1.00001*(u=h.ta.rN(u));u*=1.000001;for(var n=!1,l=30<this.g.fd+10?1e3:(this.g.fd+10)*(this.g.fd+10),c=0,d=this.g.jS();;c++){if(c>l)throw h.i.fa("Internal Error: max number of iterations exceeded");var f=this.nM(o);if(n=n||f,this.tH&&(f=this.g.Gp(o,!0,!1)!=0,n=n||f),f=!1,(c==0||d||h.$t.kI(!0,this.g,u,null,this.nd))&&(f=this.sM(s),n=n||f),!f)break;h.mp.zp(this.nd)}return n},w}();h.Tk=C}(G||(G={})),function(h){var C=function(){function u(o){this.$d=this.Mc=null,this.Ys=0,this.Ub=o,this.cA=!0}return u.prototype.uv=function(o,s){var n=this.g.bc(o);if(n==null){if(!this.g.ed(o,s))return null;n=s}return n},u.prototype.Xq=function(){var o;o===void 0&&(o=!1),this.Ys++,!o&&4095&this.Ys||(this.Ys=0,h.mp.zp(this.Ub))},u.prototype.nP=function(){var o=this.g.Yq(!1),s=!1,n=new h.yb,l=new h.yb,c=new h.l;c.Oa();var d=new h.l;d.Oa();for(var f=new h.Sa,m=new h.TC,b=o.next();b!=-1;b=o.next()){h.mp.zp(this.Ub);var x=null,$=!1;if(!h.aa.Rn(this.g.ic(o.ck))){if((x=this.uv(b,n))==null)continue;if(x.A(c),c.W(this.qa,this.qa),x.Bi(this.qa)){if(!x.Bi(0))continue;$=!0,x=null}}var E=this.g.Yq(o),O=E.next();for(O!=-1&&(O=E.next());O!=-1;O=E.next()){var R=null,k=!1;if(!h.aa.Rn(this.g.ic(E.ck))){if((R=this.uv(O,l))==null)continue;if(R.A(d),R.Bi(this.qa)){if(!R.Bi(0))continue;k=!0,R=null}}var j=0,F=0;if(x!=null&&R!=null)c.HG(d)&&(m.Oo(x),m.Oo(R),m.Ea(this.qa,!1),0<(j=m.ol(0))+(F=m.ol(1))&&(this.g.jr(b,m,0,!0),this.g.jr(O,m,1,!0)),m.clear());else if(x!=null){var L=new h.h;if(this.g.D(O,L),c.contains(L)){if(m.Oo(x),this.g.Vi(O,f),m.Kz(this.qa,f,!1),0<(j=m.ol(0)))if(this.g.jr(b,m,0,!0),k){for(k=-1,L=this.g.U(O);L!=-1&&L!=O&&(k=L,(R=this.uv(L,l))!=null&&R.Bi(0));L=this.g.U(L));for(L=O;L!=-1&&(this.g.Dh(L,m.Bf),L!=k);L=this.g.U(L));}else this.g.Dh(O,m.Bf);m.clear()}}else{if(R==null)continue;if(L=new h.h,this.g.D(b,L),d.W(this.qa,this.qa),d.contains(L)){if(m.Oo(R),this.g.Vi(b,f),m.Kz(this.qa,f,!1),0<(F=m.ol(0)))if(this.g.jr(O,m,0,!0),$){for(k=-1,L=this.g.U(b);L!=-1&&L!=b&&(k=L,(R=this.uv(L,l))!=null&&R.Bi(0));L=this.g.U(L));for(L=b;L!=-1&&(this.g.Dh(L,m.Bf),L!=k);L=this.g.U(L));}else this.g.Dh(b,m.Bf);m.clear()}}if(j+F!=0){if(j!=0){if((x=this.g.bc(b))==null){if(!this.g.ed(b,n))continue;x=n,n.A(c)}else x.A(c);if(x.Bi(this.qa))break}s=!0}}}return s},u.prototype.oP=function(){return this.QU()},u.prototype.QU=function(){return new h.RC().PX(this.g,this.qa)},u.prototype.lI=function(){var o=!1;this.Mc==null&&(this.Mc=new h.Yj);var s=new h.ia(0);s.Jb(this.g.fd+1);for(var n=this.g.Yq(),l=n.next();l!=-1;l=n.next())s.add(l);this.g.nx(s,s.size),s.add(-1),n=this.g.Gd(),l=this.g.Gd(),this.$d=new h.UC(this.g,this.qa,!this.cA),this.Mc.Vo(this.$d);var c=new h.ia(0),d=new h.ia(0),f=0;new h.h;var m=this.g.td;this.g.vb.mc();for(var b,x,$=this.g.vb.za[0].o,E=s.get(f++);E!=-1;){var O=b=$[2*(x=m.T(E,0))],R=x=$[2*x+1];do{var k=m.T(E,2),j=m.T(E,1);if(k!=-1){var F=m.T(k,0),L=$[2*F];0>(R<(F=$[2*F+1])?-1:R>F?1:O<L?-1:O>L?1:0)&&(d.add(E),d.add(k))}j!=-1&&(L=$[2*(F=m.T(j,0))],0>(R<(F=$[2*F+1])?-1:R>F?1:O<L?-1:O>L?1:0)&&(d.add(j),d.add(j))),(L=this.g.Pa(E,n))!=-1&&(c.add(L),this.g.Ra(E,n,-1)),(L=this.g.Pa(E,l))!=-1&&(c.add(L),this.g.Ra(E,l,-1)),(E=s.get(f++))!==-1&&(O=$[2*(R=m.T(E,0))],R=$[2*R+1])}while(E!=-1&&O===b&&R===x);for(O=c.size==1&&d.size==2,L=R=-1,k=0,j=c.size;k<j;k++){F=c.get(k);var V=this.Mc.we(F);if(V==-1||c.hG(V)||(R=V),(F=this.Mc.lb(F))==-1||c.hG(F)||(L=F),R!=-1&&L!=-1)break}for(this.$d.$J(x,b),k=0,j=c.size;k<j;k++)F=c.get(k),this.Mc.vd(F,-1);if(c.clear(!1),!O&&R!=-1&&L!=-1&&this.qO(R,L)){o=!0,this.Ni=this.$d.rm();break}for(k=0,j=d.size;k<j;k+=2){if(x=d.get(k),b=d.get(k+1),O?(x=this.Mc.zu(R,L,x,!0),O=!1):x=this.Mc.addElement(x,-1),this.$d.rg){this.Ni=this.$d.rm(),o=!0;break}this.g.Pa(b,n)==-1?this.g.Ra(b,n,x):this.g.Ra(b,l,x)}if(o)break;d.Bh(0)}return this.g.Td(n),this.g.Td(l),o},u.prototype.qO=function(o,s){return this.$d.compare(this.Mc,this.Mc.ja(o),s),o=this.$d.rg,this.$d.Kr(),o},u.yE=function(o){for(var s=o.ld;s!=-1;s=o.ue(s))if(h.aa.Hc(o.ic(s)))return!0;return!1},u.fQ=function(o,s,n,l){return!!u.yE(o)&&((s=new u(l)).g=o,s.qa=n,15>o.fd?o=s.nP():s.oP())},u.V=function(o,s,n){return u.fQ(o,o.IF(),s,n)},u.kI=function(o,s,n,l,c){if(!u.yE(s))return!1;var d=new u(c);if(d.g=s,d.qa=n,d.cA=o,d.lI())return l!=null&&l.Wt(d.Ni),!0;var f=new h.Dd;return f.$B(),s.Oc(f),(d=new u(c)).g=s,d.qa=n,d.cA=o,o=d.lI(),f.$B(),s.Oc(f),!!o&&(l!=null&&l.Wt(d.Ni),!0)},u.Ml=function(o,s){return!(16>(o=o.I()))&&2*o+Math.log(o)*Math.LOG10E/Math.log(2)*s<1*o*s},u.lP=function(o,s,n,l){var c=s.getType();if(h.aa.Hc(c))return new u(l).mP(o,s,n);throw h.i.fa("crack_A_with_B")},u.prototype.mP=function(o,s,n){var l=new h.l;o.xc(l);var c=new h.l;if(s.xc(c),c.W(n,n),!c.isIntersecting(l))return o;var d=o.Bb,f=null;d!=null&&(f=d.Fb),u.Ml(o,o.I())&&(f=h.ta.jj(o,c));var m=f!=null?f.getIterator():null,b=s.Ga();s=o.Ga();var x=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(c=[];b.$a();)for(;b.Ha();){var $=b.ha();if(f!=null){for(m.Uo($,n),d=m.next();d!=-1;d=m.next())if(this.Xq(),s.Vb(f.ja(d),-1),s.Ha()){var E=(d=s.ha()).Ea($,null,x,null,n);for(d=0;d<E;++d){var O=x[d];if(O!=0&&O!=1){var R=s.wb(),k=new w;k.t=O,k.index=R,c.push(k)}}}}else{var j=new h.l;if($.xc(j),j.W(n,n),l.isIntersecting(j)){for(s.Zi();s.$a();)for(;s.Ha();)if(this.Xq(),d=s.ha(),O=new h.l,d.xc(O),O.isIntersecting(j))for(E=d.Ea($,null,x,null,n),d=0;d<E;++d)(O=x[d])!=0&&O!=1&&(R=s.wb(),(k=new w).t=O,k.index=R,c.push(k))}}}if(c.length==0)return o;for(c=c.sort(w.Ey),o=o.Ia(),s.Zi();s.$a()&&!s.Ha(););for(n=s.ha(),l=new h.ig,f=-1,d=0,m=c.length;d<m;){for(x=c[d].index,b=d+1;b<m&&c[b].index==x;)++b;for(;s.wb()<x;){if(this.Xq(),$=s.Ha(),O=s.gb,(j=$||!s.On()||s.Pn())&&o.oc(n,f!=O),f=O,!$)for(;s.$a()&&!s.Ha(););n=s.ha()}for(x=0;d<b;d++)(O=c[d].t)!=x&&(n.ah(x,O,l),x=O,O=s.gb,o.oc(l.get(),f!=O),f=O);if((j=($=s.Ha())||!s.On()||s.Pn())&&(n.ah(x,1,l),o.oc(l.get(),!1)),$)n=s.ha();else{for(;s.$a()&&!s.Ha(););n=s.Ha()?s.ha():null}d=b}for(n!=null&&(O=s.gb,(j=($=s.Ha())||!s.On()||s.Pn())&&o.oc(n,f!=O),f=O),$=s.Ha();;){if(!$){for(;s.$a()&&!($=s.Ha()););if(!$)break}n=s.ha(),O=s.gb,(j=($=s.Ha())||!s.On()||s.Pn())&&o.oc(n,f!=O),f=O}return o},u}();h.$t=C;var w=function(){function u(){}return u.Ey=function(o,s){return o.index==s.index?o.t>s.t?1:o.t<s.t?-1:0:o.index>s.index?1:-1},u}()}(G||(G={})),function(h){var C;(C=h.KK||(h.KK={}))[C.Left=0]="Left",C[C.Right=1]="Right",C[C.Coincident=2]="Coincident",C[C.Undefined=3]="Undefined",C[C.Uncut=4]="Uncut";var w=function(s,n,l,c,d,f,m,b,x,$,E){this.X=s,this.bt=n,this.Ns=l,this.tg=c,this.Lm=$,this.Al=E};h.uY=w;var u=function(){function s(n,l){this.JH=n,this.Hi=l}return s.prototype.qM=function(n,l){var c=new h.h;this.Hi.D(n,c);var d=new h.h;return this.Hi.D(l,d),(c=c.compare(d))!=0?c:(n=this.Hi.Pa(n,this.JH))<(l=this.Hi.Pa(l,this.JH))?-1:n==l?0:1},s}(),o=function(s,n,l,c,d,f,m,b,x){this.tg=s,this.Ns=n,this.OA=l,this.UH=c,this.Ei=d,this.Al=f,this.Lm=m,this.VH=b,this.OT=x};h.tY=o,h.LK=function(){function s(){}return s.JK=function(n,l,c,d,f,m){if(l.B())n=new w(l,4,-1,-1,NaN,4,-1,-1,NaN,-1,-1),f.push(n);else if(c.B())n=new w(l,4,-1,-1,NaN,4,-1,-1,NaN,-1,-1),f.push(n);else{var b=new h.gd;if(b.Ib(l),b.Ib(c),h.Tk.V(b,d,m,!0),b.fd==0)n=new w(l.Ia(),4,-1,-1,NaN,4,-1,-1,NaN,-1,-1),f.push(n);else{for(l=0,c=b.Gd(),d=b.ld;d!=-1;d=b.ue(d))for(m=b.Ob(d);m!=-1;m=b.Rb(m))for(var x=b.Xa(m),$=0,E=b.Ja(m);$<E;x=b.U(x),$++)b.Ra(x,c,l++);l=s.HM(c,b),s.cM(n,l,b,f)}}},s.HM=function(n,l){for(var c=l.fd,d=new h.ia(0),f=l.ld;f!=-1;f=l.ue(f))for(var m=l.Ob(f);m!=-1;m=l.Rb(m))for(var b=l.Xa(m),x=0,$=l.Ja(m);x<$;b=l.U(b),x++)d.add(b);var E=new u(n,l);d.Vd(0,c,function(de,ce){return E.qM(de,ce)}),n=[];var O=[],R=l.Gd(),k=l.Gd();f=l.ld,m=l.ue(f),$=new h.h;var j=new h.h,F=d.get(0),L=l.bd(F),V=l.Qf(L);l.D(F,$);var B=1;for(b=0;B<c-1;){var W=!1;for(x=B;x<c;x++)if(x!=b){var K=d.get(x),re=l.bd(K),ae=l.Qf(re);if(l.D(K,j),!$.qb(j))break;V==f&&ae==m&&(W=s.uM(R,k,l,n,O,L,F,re,K))}if(W||b==B-1){if(W&&b==B-1&&B--,++b==c)break;F=d.get(b),L=l.bd(F),V=l.Qf(L),l.D(F,$)}W||(B=b+1)}for(c=[],f=l.ld;f!=-1;f=l.ue(f))for(m=l.Ob(f);m!=-1;m=l.Rb(m))for(d=l.Xa(m),x=0,$=l.Ja(m);x<$;d=l.U(d),x++){if(0<=(b=l.Pa(d,k)))for(;b<O.length&&O[b].tg==d;)c.push(O[b++]);if(0<=(b=l.Pa(d,R)))for(;b<n.length&&n[b].tg==d;)c.push(n[b++])}return l.Td(R),l.Td(k),c},s.uM=function(n,l,c,d,f,m,b,x,$){var E=c.rj(m),O=c.rj(x),R=c.Xa(m),k=c.Xa(x),j=c.Ma(b),F=c.Ma($),L=!1,V=!1,B=!1,W=!1;return b!=R&&($!=k&&(L=s.vM(n,c,d,m,j,x,F)),$!=O&&(V=s.wM(n,c,d,m,j,x,$))),b!=E&&($!=k&&(B=s.xM(l,c,f,m,b,x,F,R)),$!=O&&(W=s.yM(l,c,f,m,b,x,$,R))),L&&V&&B?(n=d.length-1,f[W?f.length-2:f.length-1].Ei==2&&(d[n-1]=d[n],--d.length)):L&&V&&W&&f[f.length-1].Ei==2&&(f=d[d.length-1],--d.length,c.Pa(f.tg,n)==d.length&&c.Ra(f.tg,n,-1)),L||V||B||W},s.vM=function(n,l,c,d,f,m,b){var x=new h.yb,$=new h.yb,E=[0,0],O=[0,0],R=l.bc(f);return R==null&&(l.ed(f,x),R=x),(x=l.bc(b))==null&&(l.ed(b,$),x=$),2>(R=R.Ea(x,null,E,O,0))&&(d=new o(f,d,E[0],NaN,R,b,m,O[0],NaN),c.push(d),0>(d=l.Pa(f,n))&&l.Ra(f,n,c.length-1)),!0},s.wM=function(n,l,c,d,f,m,b){var x=new h.yb,$=new h.yb,E=[0,0],O=[0,0],R=l.bc(f);return R==null&&(l.ed(f,x),R=x),(x=l.bc(b))==null&&(l.ed(b,$),x=$),2>(R=R.Ea(x,null,E,O,0))&&(d=new o(f,d,E[0],NaN,R,b,m,O[0],NaN),c.push(d),0>(d=l.Pa(f,n))&&l.Ra(f,n,c.length-1),!0)},s.xM=function(n,l,c,d,f,m,b,x){var $=new h.yb,E=new h.yb,O=[0,0],R=[0,0],k=l.bc(f);return k==null&&(l.ed(f,$),k=$),($=l.bc(b))==null&&(l.ed(b,E),$=E),(k=k.Ea($,null,O,R,0))==2?(d=new o(f,d,O[0],O[1],k,b,m,R[0],R[1]),c.push(d),0>(d=l.Pa(f,n))&&l.Ra(f,n,c.length-1),!0):(E=!1,f==x&&(d=new o(f,d,O[0],NaN,k,b,m,R[0],NaN),c.push(d),0>(d=l.Pa(f,n))&&l.Ra(f,n,c.length-1),E=!0),E)},s.yM=function(n,l,c,d,f,m,b,x){var $=new h.yb,E=new h.yb,O=[0,0],R=[0,0],k=l.bc(f);return k==null&&(l.ed(f,$),k=$),($=l.bc(b))==null&&(l.ed(b,E),$=E),(k=k.Ea($,null,O,R,0))==2?(d=new o(f,d,O[0],O[1],k,b,m,R[0],R[1]),c.push(d),0>(d=l.Pa(f,n))&&l.Ra(f,n,c.length-1),!0):(E=!1,f==x&&(d=new o(f,d,O[0],NaN,k,b,m,R[0],NaN),c.push(d),0>(d=l.Pa(f,n))&&l.Ra(f,n,c.length-1),E=!0),E)},s.cM=function(n,l,c,d){var f=[];f[0]=new h.h,f[1]=new h.h,f[2]=new h.h,f[3]=new h.h;var m=new h.h,b=new h.h,x=new h.h,$=new h.h,E=null;d!=null&&(E=new h.ig).Or();var O=0,R=null,k=new h.yb;new h.yb;for(var j=c.Ob(c.ld);j!=-1;j=c.Rb(j)){for(var F=4,L=-1,V=-1,B=-1,W=-1,K=NaN,re=!0,ae=!1,de=!0,ce=!0,Te=!0,le=0,He=j,Ue=0,lt=c.Xa(j),Mt=c.Ja(j),Qt=0;Qt<Mt;lt=c.U(lt),Qt++){var It=c.bc(lt);if(It==null){if(!c.ed(lt,k))continue;It=k}V==-1&&(V=lt);for(var ut=0;O<l.length&&lt==l[O].tg;){L=l[O].Ns;var We=l[O].tg,Qe=l[O].OA,Dt=l[O].Lm,Ot=l[O].Al,es=l[O].VH;if(l[O].Ei==2){if(ae||(He=L,V=We,Ue=Qe,B=Dt,W=Ot,K=es,F=2,d!=null?R=new h.Ta:le=0,Te=!1,ce=!0),Qe=l[O].UH,es=l[O].OT,d!=null?(It.ah(ut,l[O].UH,E),R.oc(E.get(),ce)):le++,ut=Qe,ae=!0,ce=re=!1,O+1==l.length||l[O+1].Ei!=2||l[O+1].tg==We&&l[O+1].OA!=ut){if(d!=null){var nt=new w(R,2,L,We,Qe,F,He,V,Ue,Dt,Ot);d.push(nt)}else null.add(le);He=L,V=We,Ue=Qe,B=Dt,W=Ot,K=es,F=2,ae=re=!1,ce=Te=!0}}else{var Wi=c.U(We);if(O<l.length-1&&l[O+1].tg==Wi&&l[O+1].Al==Ot&&l[O+1].Ei==2)Qe!=ut&&(Te&&(d!=null?R=new h.Ta:le=0),re=0<O&&l[O-1].Ns==L?F==1?0:F==0?1:3:3,d!=null?(It.ah(ut,Qe,E),R.oc(E.get(),ce),nt=new w(R,re,L,We,Qe,F,He,V,Ue,Dt,Ot),d.push(nt)):(le++,null.add(le)),ut=Qe,He=L,V=We,Ue=Qe,B=Dt,W=Ot,K=es,F=re,re=de=!1,ce=Te=!0);else if(!s.CM(n,c,l,O,m,b)){s.zM(c,l,O,j,lt,x,$);var gt=!1;if(Wi=!1,nt=!0,!(m.qb(x)||b.qb(x)||m.qb($)||b.qb($))){f[0].L(m),f[1].L(b),f[2].L(x),f[3].L($),f.sort(h.h.nu);var Ji=f[0],ec=f[1],tc=f[2],Z=f[3];Ji.qb(m)?ec.qb(b)?n?(Wi=gt=!0,nt=!1):gt=!1:Z.qb(b)?n?nt=Wi=gt=!0:gt=!1:(gt=!0,nt=ec.qb(x)):ec.qb(m)?tc.qb(b)?n?(Wi=gt=!0,nt=!1):gt=!1:Ji.qb(b)?n?nt=Wi=gt=!0:gt=!1:(gt=!0,nt=tc.qb(x)):tc.qb(m)?Z.qb(b)?n?(Wi=gt=!0,nt=!1):gt=!1:ec.qb(b)?n?nt=Wi=gt=!0:gt=!1:(gt=!0,nt=Z.qb(x)):Ji.qb(b)?n?(Wi=gt=!0,nt=!1):gt=!1:tc.qb(b)?n?nt=Wi=gt=!0:gt=!1:(gt=!0,nt=Ji.qb(x))}gt&&(gt=lt==We,(Qe!=ut||gt&&ut==0)&&(Te&&(d!=null?R=new h.Ta:le=0),d!=null?(It.ah(ut,Qe,E),R.oc(E.get(),ce)):le++),nt?F!=1?((Qe!=ut||gt&&ut==0)&&(d!=null?(nt=new w(R,1,L,We,Qe,F,He,V,Ue,Dt,Ot),d.push(nt)):null.add(le)),Wi?(O>=l.length-2||l[O+2].Ns!=L)&&(F=0):F=1):((Qe!=ut||gt&&ut==0)&&(d!=null?(nt=new w(R,3,L,We,Qe,F,He,V,Ue,Dt,Ot),d.push(nt)):null.add(le)),F=1):F!=0?((Qe!=ut||gt&&ut==0)&&(d!=null?(nt=new w(R,0,L,We,Qe,F,He,V,Ue,Dt,Ot),d.push(nt)):null.add(le)),Wi?(O>=l.length-2||l[O+2].Ns!=L)&&(F=1):F=0):((Qe!=ut||gt&&ut==0)&&(d!=null?(nt=new w(R,3,L,We,Qe,F,He,V,Ue,Dt,Ot),d.push(nt)):null.add(le)),F=0),(Qe!=ut||gt&&ut==0)&&(ut=Qe,He=L,V=We,Ue=Qe,B=Dt,W=Ot,K=es,re=de=!1,ce=Te=!0))}}O++}ut!=1&&(Te&&(d!=null?R=new h.Ta:le=0),d!=null?(It.ah(ut,1,E),R.oc(E.get(),ce)):le++,ce=Te=!1,de=!0)}de&&(Qe=1,We=c.rj(j),We=c.Ma(We),Ot=Dt=-1,es=NaN,re?d!=null?(nt=new w(R,4,L,We,Qe,F,He,V,Ue,Dt,Ot),d.push(nt)):null.add(le):(re=F==1?0:F==0?1:3,d!=null?(nt=new w(R,re,L,We,Qe,F,He,V,Ue,Dt,Ot),d.push(nt)):null.add(le)))}},s.CM=function(n,l,c,d,f,m){var b=c[d].VH;if(b==1)return s.AM(n,l,c,d,f,m);if(b==0)return s.BM(n,l,c,d,f,m);throw h.i.Qa()},s.AM=function(n,l,c,d,f,m){var b=new h.yb,x=c[d].tg,$=c[d].Lm,E=c[d].Al,O=-1,R=-1,k=-1,j=-1;if(!n&&0<d){var F=c[d-1];O=F.tg,R=F.Lm,k=F.Al,j=F.Ei}var L=-1,V=-1,B=-1,W=-1;d<c.length-1&&(L=(F=c[d+1]).tg,V=F.Lm,B=F.Al,W=F.Ei);var K=l.U(x);return F=l.U(E),n?d==c.length-1||L!=x||V!=$||B!=F||W==2?((n=l.bc(E))==null&&(l.ed(E,b),n=b),m.L(n.kg()),f.mt(m),m.normalize(),f.normalize(),!1):((n=l.bc(E))==null&&(l.ed(E,b),n=b),f.L(n.kg()),(n=l.bc(F))==null&&(l.ed(F,b),n=b),m.L(n.kg()),f.Sq(),m.normalize(),f.normalize(),!1):0<d&&O==x&&R==$&&k==F&&j==2||d<c.length-1&&L==K&&V==$&&B==F&&W==2?((n=l.bc(E))==null&&(l.ed(E,b),n=b),m.L(n.kg()),f.mt(m),m.normalize(),f.normalize(),!1):!(d<c.length-1&&L==x&&V==$&&B==F)||((n=l.bc(E))==null&&(l.ed(E,b),n=b),f.L(n.kg()),(n=l.bc(F))==null&&(l.ed(F,b),n=b),m.L(n.kg()),f.Sq(),m.normalize(),f.normalize(),!1)},s.BM=function(n,l,c,d,f,m){var b=new h.yb,x=c[d].tg,$=c[d].Lm,E=c[d].Al,O=-1,R=-1,k=-1,j=-1;if(!n&&d<c.length-1){var F=c[d+1];O=F.tg,R=F.Lm,k=F.Al,j=F.Ei}var L=-1,V=-1,B=-1;F=-1,0<d&&(L=(F=c[d-1]).tg,V=F.Lm,B=F.Al,F=F.Ei);var W=l.U(x),K=l.Ma(E);return n?d!=0&&L==x&&V==$&&B==K&&F!=2||((n=l.bc(E))==null&&(l.ed(E,b),n=b),m.L(n.kg()),f.mt(m),m.normalize(),f.normalize(),!1):!(0<d&&L==x&&V==$&&B==K&&F==2||d<c.length-1&&O==W&&R==$&&k==K&&j==2)||((n=l.bc(E))==null&&(l.ed(E,b),n=b),m.L(n.kg()),f.mt(m),m.normalize(),f.normalize(),!1)},s.zM=function(n,l,c,d,f,m,b){var x=new h.yb,$=n.bc(f);if($==null&&(n.ed(f,x),$=x),l=(c=l[c]).tg,c=c.OA,f=n.U(l),c==1)m.L($.kg()),f!=-1&&f!=n.rj(d)?(($=n.bc(f))==null&&(n.ed(f,x),$=x),b.L($.kg()),($=n.bc(l))==null&&n.ed(l,x)):b.L(m),m.Sq(),b.normalize(),m.normalize();else{if(c!=0)throw h.i.Qa();b.L($.kg()),m.mt(b),b.normalize(),m.normalize()}},s}()}(G||(G={})),function(h){var C;(C=h.bM||(h.bM={}))[C.Linear=0]="Linear",C[C.Angular=1]="Angular",C[C.Area=2]="Area";var w=function(){function d(f,m,b){this.od=m,this.ai=b,this.vA=f}return d.prototype.Nb=function(f){return f instanceof d&&this.ai===f.ai},d.aG=function(f){return f.od!==0?null:f.vA===-1?new d(-1,2,f.ai*f.ai):d.Zg(l[f.vA])},d.Zg=function(f){return(f=n[f])===void 0?null:f},d.ZO=function(f,m,b){var x=null;if(b!=null)try{b.values[0]==="EPSG"&&(x=d.Zg(parseInt(b.values[1])))}catch{}return x===null&&(x=new d(-1,f,m)),x},d.prototype.Ec=function(){return this.vA},d.prototype.CF=function(f){if(f.od!=this.od)throw h.i.Hb();return this.ai/f.ai},d.Nh=function(f,m,b){return m.CF(b)*f},d.XE=function(f,m,b,x,$){for(b=b.CF(x),x=0;x<m;x++)$[x]=f[x]*b},d}();h.Tc=w;for(var u=[109401,1e4,109402,4046.8564224,109403,4046.87260987425,109404,1,109405,.09290304,109406,.09290341161327487,109407,.09290137299531805,109408,3.34450944,109409,3429904,109410,1.000027193184865,109411,404.6872609874253,109412,.04046872609874253,109413,2.5899984703195216e6,109414,1e6,109415,.8361123569578626,109416,404.67838076760535,109417,.04046783807676053,109418,.8361244606523066,109419,.09290271785025629,109420,404.68423895571647,109421,.04046842389557164,109422,.83612589696064,109423,.0929028774400711,109424,404.6849341289498,109425,.04046849341289498,109426,.836125904805842,109427,.09290287831176021,109428,404.68493792602754,109429,.04046849379260275,109430,.09290354800069446,109431,.09290274144751023,109432,.09290207073852812,109433,.09290279616016,109434,.09290273520025,109435,.836124673027592,109436,.836118636646753,109437,.8361251654414399,109438,.83612461680225,109439,2589988110336e-6,109440,.09290286332673177,109441,.09290349665192114,109442,.83612736,109443,.8361307045194736,109444,404.68564224000005,109445,.04046856422400001,109446,.8361237024040001,109447,.0929026336004445,109448,404.683871963536,109449,.0404683871963536,109450,.01,109451,1e-4,109452,1e-6,109453,64516e-8,109454,.0006451625806477421,109455,25.292852640000003,109456,25.29295381171408,109457,3.4345281495040003e6,109458,3434290937856e-6,109459,2.89612324,109460,25e8,109461,225e8,109462,.7168473118308245,109463,100,109464,1244521604938272e-22,109465,1e-12,109466,1e-18],o=[1031,484813681109536e-23,9101,1,9102,.0174532925199433,9103,.0002908882086657216,9104,484813681109536e-20,9105,.01570796326794897,9106,.01570796326794897,9109,1e-6,9112,.0001570796326794897,9113,1570796326794897e-21,9114,.0009817477042468104],s=[1025,.001,109452,1033,.01,109451,9001,1,109404,9002,.3048,109405,9003,.3048006096012192,109406,9005,.3047972654,109407,9014,1.8288,109408,9030,1852,109409,9031,1.0000135965,109410,9033,20.11684023368047,109411,9034,.2011684023368047,109412,9035,1609.3472186944375,109413,9036,1e3,109414,9037,.9143917962000001,109415,9038,20.1166195164,109416,9039,.201166195164,109417,9040,.9143984146160287,109418,9041,.304799471538676,109419,9042,20.116765121552632,109420,9043,.2011676512155263,109421,9050,.9143992,109422,9051,.3047997333333333,109423,9052,20.1167824,109424,9053,.201167824,109425,9060,.9143992042898124,109426,9061,.3047997347632708,109427,9062,20.116782494375872,109428,9063,.2011678249437587,109429,9070,.3048008333333334,109430,9080,.3047995102481469,109431,9081,.30479841,109432,9082,.3047996,109433,9083,.3047995,109434,9084,.9143985307444408,109435,9085,.91439523,109436,9086,.9143988,109437,9087,.9143985,109438,9093,1609.344,109439,9094,.3047997101815088,109440,9095,.3048007491,109441,9096,.9144,109442,9097,20.1168,109444,9098,.201168,109445,9099,.914398,109446,9300,.3047993333333334,109447,9301,20.116756,109448,9302,.20116756,109449,109001,.9144,109442,109002,.9144018288036576,109443,109003,20.1168,109444,109004,.201168,109445,109005,.1,109450,109006,.01,109451,109007,.001,109452,109008,.0254,109453,109009,.0254000508001016,109454,109010,5.0292,109455,109011,5.029210058420118,109456,109012,1853.248,109457,109013,1853.184,109458,109014,1.7018,109459,109015,.8466683600033867,109462,109016,.0003527777777777778,109464,109017,1e-6,109465,109018,1e-9,109466,109030,5e4,109460,109031,15e4,109461],n=[],l=[],c=0;c<u.length;c+=2)n[u[c]]=new w(u[c],2,u[c+1]);for(u=null,c=0;c<o.length;c+=2)n[o[c]]=new w(o[c],1,o[c+1]);for(o=null,c=0;c<s.length;c+=3)n[s[c]]=new w(s[c],0,s[c+1]),l[s[c]]=s[c+2];s=null}(G||(G={})),function(h){var C=function(){function w(){this.xb=this.pb=0}return w.prototype.set=function(u,o){o!==void 0?(this.pb=u,this.xb=o):typeof u=="number"?(this.pb=u,this.xb=0):(this.pb=u.pb,this.xb=u.xb)},w.prototype.value=function(){return this.pb},w.prototype.add=function(u){var o=this.pb+u.pb;u=this.xb+u.xb+2220446049250313e-31*Math.abs(o),this.pb=o,this.xb=u},w.prototype.kN=function(){var u=this.pb+1,o=this.xb+2220446049250313e-31*Math.abs(u);this.pb=u,this.xb=o},w.prototype.dN=function(u,o){this.pb=u.pb+o.pb,this.xb=u.xb+o.xb+2220446049250313e-31*Math.abs(this.pb)},w.prototype.sub=function(u){if(typeof u=="number"){var o=this.pb-u;u=this.xb+2220446049250313e-31*Math.abs(o)}else o=this.pb-u.pb,u=this.xb+u.xb+2220446049250313e-31*Math.abs(o);this.pb=o,this.xb=u},w.prototype.Ag=function(u){var o=this.pb*u.pb;this.xb=this.xb*Math.abs(u.pb)+u.xb*Math.abs(this.pb)+this.xb*u.xb+2220446049250313e-31*Math.abs(o),this.pb=o},w.prototype.No=function(u){var o=this.pb*u;this.xb=this.xb*Math.abs(u)+2220446049250313e-31*Math.abs(o),this.pb=o},w.prototype.Kl=function(u,o){var s=Math.abs(u.pb)*Math.abs(o.pb);this.xb=u.xb*Math.abs(o.pb)+o.xb*Math.abs(u.pb)+u.xb*o.xb+2220446049250313e-31*Math.abs(s),this.pb=s},w.prototype.jm=function(u){var o=Math.abs(u.pb),s=this.pb/u.pb,n=(this.xb+Math.abs(s)*u.xb)/o;u.xb>.01*o&&(n*=1+(1+(u=u.xb/o))*u),this.pb=s,this.xb=n+2220446049250313e-31*Math.abs(s)},w.prototype.sqrt=function(){if(0<=this.pb){var u=Math.sqrt(this.pb),o=this.pb>10*this.xb?.5*this.xb/u:this.pb>this.xb?u-Math.sqrt(this.pb-this.xb):Math.max(u,Math.sqrt(this.pb+this.xb)-u);o+=2220446049250313e-31*Math.abs(u)}else this.pb<-1*this.xb?o=u=NaN:(u=0,o=Math.sqrt(this.xb));this.pb=u,this.xb=o},w.prototype.sin=function(u){var o=Math.sin(u.pb),s=Math.cos(u.pb);this.pb=o,o=Math.abs(o),this.xb=(Math.abs(s)+.5*o*u.xb)*u.xb+2220446049250313e-31*o},w.prototype.cos=function(u){var o=Math.sin(u.pb),s=Math.cos(u.pb);this.pb=s,s=Math.abs(s),this.xb=(Math.abs(o)+.5*s*u.xb)*u.xb+2220446049250313e-31*s},w.prototype.qg=function(){return Math.abs(this.pb)<=this.xb},w.prototype.ps=function(){return this.qg()&&this.xb!=0},w}();h.Wb=C}(G||(G={}));var Zt=new G.h,Es=new G.h,Hi=new G.h,Fn=new G.h,Co=new G.h;(function(h){var C,w;(w=C||(C={}))[w.closedPath=1]="closedPath",w[w.exteriorPath=2]="exteriorPath",w[w.ringAreaValid=4]="ringAreaValid";var u=function(){function o(s,n,l,c,d,f,m){n!==void 0?(this.ib=s,this.ck=n,this.bl=l,this.ii=c,this.ya=f,this.hA=m,this.ew=d):(this.ib=s.ib,this.ck=s.ck,this.bl=s.bl,this.ii=s.ii,this.ya=s.ya,this.hA=s.hA,this.ew=s.ew),this.bH=!0}return o.prototype.next=function(){return this.bH?(this.bH=!1,this.ii):this.ii!=-1?(this.ii=this.ib.U(this.ii),this.ya++,this.ii!=-1&&this.ii!=this.ew?this.ii:this.$T()):-1},o.prototype.$T=function(){for(this.bl=this.ib.Rb(this.bl),this.ya=0;this.ck!=-1;){for(;this.bl!=-1;this.bl=this.ib.Rb(this.bl))if(this.ew=this.ii=this.ib.Xa(this.bl),this.ii!=-1)return this.ii;if(this.ck=this.ib.ue(this.ck),this.ck==-1)break;this.hA&&!h.aa.Hc(this.ib.ic(this.ck))||(this.bl=this.ib.Ob(this.ck))}return-1},o.AP=function(s,n,l,c,d,f,m){return new o(s,n,l,c,d,f,m)},o}();h.zY=u,C=function(){function o(){this.jo=this.Am=this.wk=this.cd=this.Ck=this.vo=this.Oi=this.md=this.bi=this.Sg=this.We=this.Il=null,this.qw=this.ld=-1,this.fd=0,this.fA=!1,this.ht=this.it=this.vb=null}return o.prototype.Sh=function(s){return this.We!=null?this.We[s]:null},o.prototype.Xg=function(s,n){if(this.We==null){if(n==null)return;this.We=[];for(var l=0,c=this.vb.I();l<c;l++)this.We.push(null)}this.We[s]=n},o.prototype.bp=function(s,n){this.md.S(s,1,n)},o.prototype.ap=function(s,n){this.md.S(s,2,n)},o.prototype.VB=function(s,n){this.md.S(s,6,n)},o.prototype.Sp=function(s){return this.md.T(s,6)},o.prototype.gx=function(s,n){this.md.S(s,7,n)},o.prototype.qv=function(s){return this.md.T(s,0)},o.prototype.OJ=function(s,n){this.cd.S(s,1,n)},o.prototype.SJ=function(s,n){this.cd.S(s,0,n)},o.prototype.JF=function(s){return this.cd.T(s,7)},o.prototype.Zo=function(s,n){this.cd.S(s,3,n)},o.prototype.$o=function(s,n){this.cd.S(s,4,n)},o.prototype.uU=function(s){this.cd==null&&(this.cd=new h.$c(8));var n=this.cd.Ce();return this.cd.S(n,2,s),this.cd.S(n,5,0),this.cd.S(n,6,0),this.cd.S(n,7,n),n},o.prototype.OQ=function(s){this.cd.jd(s)},o.prototype.wU=function(s){this.md==null&&(this.md=new h.$c(8),this.td=new h.$c(5),this.Oi=new h.be(0),this.vo=new h.be(0));var n=this.md.Ce();return this.md.S(n,0,n),this.md.S(n,3,0),this.md.S(n,6,0),this.gx(n,s),n>=this.Oi.size&&(s=16>n?16:h.O.truncate(3*n/2),this.Oi.resize(s),this.vo.resize(s)),this.Oi.set(n,0),this.vo.set(n,0),n},o.prototype.sF=function(s){this.md.jd(s)},o.prototype.Vy=function(s){this.td.jd(s),this.fd--},o.prototype.oI=function(s){this.md==null&&(this.md=new h.$c(8),this.td=new h.$c(5),this.Oi=new h.be(0),this.vo=new h.be(0));var n=this.td.Ce(),l=0<=s?s:n;if(this.td.S(n,0,l),0>s){if(l>=this.vb.I()){if(s=16>l?16:h.O.truncate(3*l/2),this.vb.resize(s),this.We!=null)for(var c=0;c<s;c++)this.We.push(null);this.Sg!=null&&this.Sg.resize(s),this.it=this.vb.ub(0)}this.vb.Cb(l,-1e38,-1e38),this.We!=null&&(this.We[l]=null),this.Sg!=null&&this.Sg.write(l,1)}return this.td.S(n,4,2*l),this.fd++,n},o.prototype.wj=function(s,n,l){var c=n!=-1?this.Ma(n):this.rj(s),d=c!=-1?this.U(c):-1,f=this.oI(l==null?this.fd:-1),m=this.Ua(f);return l!=null&&this.vb.Ht(m,l),this.aj(f,s),this.Bc(f,d),this.Cc(f,c),d!=-1&&this.Cc(d,f),c!=-1&&this.Bc(c,f),l=this.dc(s),c=this.Xa(s),n==-1&&this.Wg(s,f),n==c&&this.Jf(s,f),l&&d==-1&&(this.Bc(f,f),this.Cc(f,f)),this.Vj(s,this.Ja(s)+1),s=this.Qf(s),this.Tj(s,this.I(s)+1),f},o.prototype.nm=function(){return this.jo==null&&(this.jo=new h.Sa(this.vb.description)),this.jo},o.prototype.Yo=function(s,n){this.cd.S(s,2,-134217729&this.cd.T(s,2)||(n==1?134217728:0))},o.prototype.In=function(s){return 134217728&this.cd.T(s,2)?1:0},o.prototype.hN=function(s){var n=this.Ig(s.getType(),s.description);return s.getType()==1736&&this.Yo(n,s.In()),this.UD(n,s),n},o.prototype.iN=function(s){var n=this.Ig(s.getType(),s.description);return this.VD(n,s),n},o.prototype.XV=function(s,n){this.md==null&&(this.md=new h.$c(8),this.td=new h.$c(5),this.Oi=new h.be(0),this.vo=new h.be(0)),this.md.De(this.md.Hg+s),this.td.De(this.td.Hg+n),this.Oi.Jb(this.Oi.size+s),this.vo.Jb(this.vo.size+s)},o.prototype.UD=function(s,n){this.XV(n.da(),n.I()),this.Il.Fd(n,0,n.I()),this.it=this.vb.ub(0);for(var l=this.We!=null&&n.Ve!=null,c=0,d=n.da();c<d;c++)if(!(2>n.Ja(c))){var f=this.vf(s,-1);this.kn(f,n.dc(c));for(var m=n.Ba(c),b=n.Vc(c);m<b;m++){var x=this.wj(f,-1,null);if(l)if(x=this.Ua(x),1&n.ZF(m))this.Xg(x,null);else{var $=new h.ig;n.bc(m,$,!0),this.Xg(x,$.get())}}}},o.prototype.VD=function(s,n){this.Il.Fd(n,0,n.I()),this.it=this.vb.ub(0),s=this.vf(s,-1);var l=0;for(n=n.I();l<n;l++)this.wj(s,-1,null)},o.prototype.NX=function(s,n,l){var c=this.U(s);if(c==-1)throw h.i.Qa();for(var d=this.nm(),f=this.bd(s),m=0,b=n.ol(l);m<b;m++){var x=this.Ua(s),$=this.U(s),E=n.Vp(l,m);m==0&&(E.To(d),this.Dh(s,d)),E.getType()==322?this.Xg(x,null):this.Xg(x,h.aa.jg(E)),E.Po(d),m<b-1?s=this.wj(f,$,d):this.Dh(c,d)}},o.prototype.MX=function(s,n,l){var c=this.U(s);if(c==-1)throw h.i.Qa();for(var d=this.nm(),f=this.bd(s),m=0,b=n.ol(l);m<b;m++){var x=this.Ua(s),$=this.U(s),E=n.Vp(l,b-m-1);m==0&&(E.Po(d),this.Dh(s,d)),E.getType()==322?this.Xg(x,null):this.Xg(x,h.aa.jg(E)),E.To(d),m<b-1?s=this.wj(f,$,d):this.Dh(c,d)}},o.prototype.IF=function(){var s=new h.l;s.Oa();for(var n=this.Yq(),l=new h.h,c=!0,d=n.next();d!=-1;d=n.next())this.D(d,l),c?s.Zb(l.x,l.y):s.Lk(l.x,l.y),c=!1;return s},o.prototype.Ib=function(s){var n=s.getType();if(h.aa.Hc(n))return this.hN(s);if(n==550)return this.iN(s);throw h.i.Qa()},o.prototype.uN=function(s,n){var l=n.getType();if(h.aa.Hc(l))this.UD(s,n);else{if(l!=550)throw h.i.Qa();this.VD(s,n)}},o.prototype.mN=function(s,n){var l=this.Ig(1736,s.description);if(2>s.Ja(n))return l;this.Il.Fd(s,s.Ba(n),s.Vc(n)),this.it=this.vb.ub(0);var c=this.vf(l,-1);this.kn(c,s.dc(n)||!0);var d=this.We!=null&&s.Ve!=null,f=s.Ba(n);for(n=s.Vc(n);f<n;f++){var m=this.wj(c,-1,null);if(d)if(m=this.Ua(m),1&s.ZF(f))this.Xg(m,null);else{var b=new h.ig;s.bc(f,b,!0),this.Xg(m,b.get())}}return l},o.prototype.Ne=function(s){var n=this.ic(s),l=h.ZK.Ig(n,this.Il.description),c=this.I(s);if(c==0)return l;if(h.aa.Hc(n)){n=this.da(s);for(var d=h.Yc.Oh(n+1),f=h.Yc.Mr(n+1,0),m=l.description,b=0,x=m.Aa;b<x;b++){for(var $=m.kd(b),E=h.ra.Va($),O=h.Yc.YE($,c),R=this.vb.ub($),k=0,j=0,F=0,L=this.Ob(s);L!=-1;L=this.Rb(L)){var V=0;this.dc(L)&&(V|=1),this.YS(L)&&(V|=4),V!=0&&f.zJ(j,V);var B=this.Ja(L);if(d.write(j++,F),F+=B,$==0){B=R;var W=O,K=new h.h;for(V=this.Xa(L);k<F;V=this.U(V),k++){var re=this.Ua(V);B.tc(2*re,K),W.Tt(2*k,K)}}else for(V=this.Xa(L);k<F;V=this.U(V),k++)for(re=this.Ua(V),W=0;W<E;W++)K=R.eg(re*E+W),O.pr(k*E+W,K)}l.hn($,O),d.write(n,c)}l.PJ(f),l.QJ(d),l.Pc(16777215)}else if(n==550){for(m=l.description,l.resize(c),b=0,x=m.Aa;b<x;b++){for($=m.kd(b),E=h.ra.Va($),O=l.ub($),R=this.vb.ub($),k=0,L=this.Ob(s),B=this.Ja(L),V=this.Xa(L);k<B;V=this.U(V),k++)for(re=this.Ua(V),W=0;W<E;W++)K=R.eg(re*E+W),O.pr(k*E+W,K);l.hn($,O)}l.Pc(16777215)}return l},o.prototype.BB=function(s){for(var n=this.Ob(s);n!=-1;n=this.Zq(n));n=this.PR(s);var l=this.ue(s);n!=-1?this.OJ(n,l):this.ld=l,l!=-1?this.SJ(l,n):this.qw=n,this.OQ(s)},o.prototype.Ig=function(s,n){return n===void 0?this.$E(s,h.ee.og()):this.$E(s,n)},o.prototype.$E=function(s,n){return s=this.uU(s),this.vb==null?this.vb=this.Il=new h.de(n):this.Il.Jl(n),this.ht=this.Il.description,this.fA=1<this.ht.Aa,this.ld==-1?this.ld=s:(this.SJ(s,this.qw),this.OJ(this.qw,s)),this.qw=s},o.prototype.ue=function(s){return this.cd.T(s,1)},o.prototype.PR=function(s){return this.cd.T(s,0)},o.prototype.ic=function(s){return 2147483647&this.cd.T(s,2)},o.prototype.HJ=function(s,n,l){n=this.wk[n],(s=this.JF(s))>=n.size&&n.resize(Math.max(h.O.truncate(1.25*s),16),-1),n.write(s,l)},o.prototype.KF=function(s,n){return(s=this.JF(s))<(n=this.wk[n]).size?n.read(s):-1},o.prototype.aF=function(){this.wk==null&&(this.wk=[]);for(var s=0;s<this.wk.length;s++)if(this.wk[s]==null)return this.wk[s]=h.Yc.Oh(0),s;return this.wk.push(h.Yc.Oh(0)),this.wk.length-1},o.prototype.xW=function(s){this.wk[s]=null},o.prototype.Ob=function(s){return this.cd.T(s,3)},o.prototype.kv=function(s){return this.cd.T(s,4)},o.prototype.I=function(s){return this.cd.T(s,5)},o.prototype.da=function(s){return this.cd.T(s,6)},o.prototype.Gp=function(s,n,l){for(var c=0,d=this.ld;d!=-1;d=this.ue(d)){var f=this.ic(d);if(h.aa.Hc(f)&&(!l||f==1736)){f=this.ic(d)==1736;for(var m=this.Ob(d);m!=-1;){for(var b=0,x=this.Xa(m);b<h.O.truncate(this.Ja(m)/2);){var $=this.U(x);if($==-1)break;var E=this.Ua(x),O=this.Sh(E);O!=null?E=O.Qb():(O=this.Ua($),E=this.vb.yr(E,O)),E<=s?(E==0?c==0&&(c=-1):c=1,$!=this.rj(m)&&(this.lC($,x),this.pd($,!0))):x=this.U(x),b++}for(b=this.Xa(m),x=this.dc(m)?b:this.rj(m);0<this.Ja(m);){if(($=this.Ma(x))==-1){this.pd(x,!0),c==0&&(c=-1);break}var R=this.Ua($);if((O=this.Sh(R))!=null?E=O.Qb():(E=this.Ua(x),E=this.vb.yr(E,R)),E<=s)E==0?c==0&&(c=-1):c=1,this.lC($,x),this.pd($,!1),b==$&&(b=this.Xa(m));else if((x=this.Ma(x))==b)break}x=this.Ja(m),n&&(f?3>x:2>x)?(m=this.Zq(m),c=0<x?1:c==0?-1:c):m=this.Rb(m)}}}return c},o.prototype.lC=function(s,n){var l=this.Ua(s),c=this.Ua(n);if(this.Sg!=null&&(l=this.Sg.read(l),this.Sg.write(c,l)),this.bi!=null){for(c=0,l=this.bi.length;c<l;c++)if(this.bi[c]!=null){var d=this.Pa(s,c);d!=-1&&this.Ra(n,c,d)}}},o.prototype.Ul=function(s,n,l){var c=0,d=this.U(s);if(d==-1)throw h.i.Qa();for(var f=this.Ua(s),m=this.Ua(d),b=this.Sh(f),x=b==null?this.vb.yr(f,m):b.Qb(),$=0;$<l;$++){var E=n[$];if(0<E&&1>E){var O=E;b!=null&&(O=0<x?b.Ux(E)/x:0),this.vb.kD(f,m,O,this.nm());var R=this.wj(this.bd(s),d,this.nm());if(c++,b!=null){var k=b.dl(0,E);O=this.Ua(this.Ma(R)),this.Xg(O,k),this.mf(R,k.wc()),$!=l-1&&n[$+1]!=1||(E=b.dl(E,1),this.Xg(O,E))}}}return c},o.prototype.LX=function(s,n,l){var c=0,d=this.U(s);if(d==-1)throw h.i.fa("internal error");var f=this.Ua(s),m=this.Ua(d),b=this.Sh(f),x=b==null?this.vb.yr(f,m):b.Qb(),$=0;s=this.bd(s);for(var E=0;E<l;E++){var O=n[E];if($<O&&1>O){var R=O;if(b!=null&&(R=0<x?b.Ux(O)/x:0),this.vb.kD(f,m,R,this.nm()),R=this.yS(s,d,this.nm()),c++,b!=null){$=b.dl($,O);var k=this.Ua(this.Ma(R));this.Xg(k,$),this.Cb(R,$.pa,$.la),E!=l-1&&n[E+1]!=1||($=b.dl(O,1),R=this.Ua(R),this.Xg(R,$))}}$=O}return c},o.prototype.yS=function(s,n,l){var c=n!=-1?this.Ma(n):this.rj(s),d=c!=-1?this.U(c):-1,f=this.oI(l==null?this.fd:-1),m=this.Ua(f);return l!=null&&this.vb.Ht(m,l),this.aj(f,s),this.Bc(f,d),this.Cc(f,c),d!=-1&&this.Cc(d,f),c!=-1&&this.Bc(c,f),l=this.dc(s),c=this.Xa(s),n==-1&&this.Wg(s,f),n==c&&(l&&c!=-1||this.Jf(s,f)),l&&d==-1&&(this.Bc(f,f),this.Cc(f,f)),this.Vj(s,this.Ja(s)+1),s=this.Qf(s),this.Tj(s,this.I(s)+1),f},o.prototype.uE=function(s,n,l){var c=this.Ua(n),d=this.Ua(l);if(0>c||d>this.fd-1)throw h.i.N("invalid call");if(c>d&&!this.dc(s))throw h.i.N("cannot iterate across an open path");for(s=0;n!=l;n=this.U(n))c=this.Ua(n),(d=this.Sh(c))!=null?s+=d.Qb():(d=this.Ua(this.U(n)),s+=this.vb.yr(c,d));return s},o.prototype.Dh=function(s,n){var l=this.Ua(s);this.vb.Ht(l,n),(l=this.Sh(l))!=null&&l.setStart(n),(s=this.Ma(s))!=-1&&(s=this.Ua(s),this.Sh(s)!=null&&l.setEnd(n))},o.prototype.Vi=function(s,n){s=this.Ua(s),this.vb.ve(s,n)},o.prototype.mf=function(s,n){this.Cb(s,n.x,n.y)},o.prototype.Cb=function(s,n,l){var c=this.Ua(s);this.vb.Cb(c,n,l),(c=this.Sh(c))!=null&&c.ZB(n,l),(s=this.Ma(s))!=-1&&(s=this.Ua(s),this.Sh(s)!=null&&c.Ql(n,l))},o.prototype.D=function(s,n){this.vb.D(this.td.T(s,0),n)},o.prototype.Gc=function(s,n){this.vb.za[0].tc(2*this.td.T(s,0),n)},o.prototype.Na=function(s){var n=new h.h;return this.vb.D(this.td.T(s,0),n),n},o.prototype.dG=function(s,n){this.it.tc(2*s,n)},o.prototype.Uc=function(s,n,l){return this.vb.Uc(s,this.Ua(n),l)},o.prototype.setAttribute=function(s,n,l,c){this.vb.setAttribute(s,this.Ua(n),l,c)},o.prototype.Ua=function(s){return this.td.T(s,0)},o.prototype.ih=function(){var s=new h.h;return this.D(void 0,s),s.y},o.prototype.fq=function(s,n){s=this.Ua(s),n=this.Ua(n);var l=this.vb.za[0].o;return l[2*s]===l[2*n]&&l[2*s+1]===l[2*n+1]},o.prototype.Dv=function(s,n){s=this.Ua(s);var l=this.vb.za[0].o;return l[2*s]===n.x&&l[2*s+1]===n.y},o.prototype.vX=function(s,n){if(1>n&&(n=1),this.Sg==null){if(n==1)return;this.Sg=h.Yc.Dn(this.vb.I(),1)}(s=this.Ua(s))>=this.Sg.size&&this.Sg.resize(s+1,1),this.Sg.write(s,n)},o.prototype.cG=function(s){return s=this.Ua(s),this.Sg==null||s>=this.Sg.size?1:this.Sg.read(s)},o.prototype.Ra=function(s,n,l){n=this.bi[n],s=this.Ua(s),n.size<this.vb.I()&&n.resize(this.vb.I(),-1),n.write(s,l)},o.prototype.Pa=function(s,n){return(s=this.Ua(s))<(n=this.bi[n]).size?n.read(s):-1},o.prototype.Gd=function(){this.bi==null&&(this.bi=[]);for(var s=0;s<this.bi.length;s++)if(this.bi[s]==null)return this.bi[s]=h.Yc.Oh(0,-1),s;return this.bi.push(h.Yc.Oh(0,-1)),this.bi.length-1},o.prototype.Td=function(s){this.bi[s]=null},o.prototype.bc=function(s){return this.We!=null?(s=this.Ua(s),this.We[s]):null},o.prototype.ed=function(s,n){var l=this.td.T(s,2);if(l==-1)return!1;if(this.fA){var c=new h.Sa;this.Vi(s,c),n.setStart(c),this.Vi(l,c),n.setEnd(c)}else this.vb.Gc(this.td.T(s,0),Zt),n.em(0,Zt),this.vb.Gc(this.td.T(l,0),Zt),n.em(1,Zt);return!0},o.prototype.mW=function(s,n,l){if(this.fA){var c=new h.Sa;this.Vi(s,c),l.setStart(c),this.Vi(n,c),l.setEnd(c)}else this.vb.Gc(s,Zt),l.em(0,Zt),this.vb.Gc(n,Zt),l.em(1,Zt)},o.prototype.vf=function(s,n){if(n!=-1){if(s!=this.Qf(n))throw h.i.Qa();var l=this.cs(n)}else l=this.kv(s);var c=this.wU(s);return n!=-1&&this.bp(n,c),this.ap(c,n),this.bp(c,l),l!=-1?this.ap(l,c):this.Zo(s,c),n==-1&&this.$o(s,c),this.Rl(s,this.da(s)+1),c},o.prototype.nG=function(s,n,l,c){s=this.vf(s,-1);for(var d=0,f=n,m=!1;f==l&&(m=!0),this.aj(f,s),d++,(f=this.U(f))!=n;);return this.kn(s,!0),this.Vj(s,d),m&&(n=l),this.Jf(s,n),this.Wg(s,this.Ma(n)),this.cp(s,!1),c!=null&&(c[0]=m),s},o.prototype.Zq=function(s){var n=this.cs(s),l=this.Rb(s),c=this.Qf(s);return n!=-1?this.ap(n,l):this.Zo(c,l),l!=-1?this.bp(l,n):this.$o(c,n),this.AO(s),this.Rl(c,this.da(c)-1),this.sF(s),l},o.prototype.AO=function(s){var n=this.Xa(s);if(n!=-1){for(var l=0,c=this.Ja(s);l<c;l++){var d=n;n=this.U(n),this.Vy(d)}n=this.Qf(s),this.Tj(n,this.I(n)-this.Ja(s))}this.Vj(s,0)},o.prototype.Rb=function(s){return this.md.T(s,2)},o.prototype.cs=function(s){return this.md.T(s,1)},o.prototype.Ja=function(s){return this.md.T(s,3)},o.prototype.dc=function(s){return!!(1&this.Sp(s))},o.prototype.kn=function(s,n){if(this.dc(s)!=n){if(0<this.Ja(s)){var l=this.Xa(s),c=this.rj(s);n?(this.Bc(c,l),this.Cc(l,c),l=this.Ua(c)):(this.Bc(c,-1),this.Cc(l,-1),l=this.Ua(c)),this.Xg(l,null)}this.VB(s,(1|this.Sp(s))-1|(n?1:0))}},o.prototype.Qf=function(s){return this.md.T(s,7)},o.prototype.YS=function(s){return!!(2&this.Sp(s))},o.prototype.PB=function(s,n){this.VB(s,(2|this.Sp(s))-2|(n?2:0))},o.prototype.wz=function(s){if(this.cT(s))return this.Oi.get(this.qv(s));var n=new h.yb,l=this.Xa(s);if(l==-1)return 0;var c=new h.h;this.D(l,c);for(var d=0,f=0,m=this.Ja(s);f<m;f++,l=this.U(l)){var b=this.bc(l);if(b==null){if(!this.ed(l,n))continue;b=n}d+=b.Tx(c.x,c.y)}return this.cp(s,!0),this.Oi.set(this.qv(s),d),d},o.prototype.gr=function(s,n,l){n=this.Ck[n],s=this.qv(s),n.size<this.Oi.size&&n.resize(this.Oi.size,-1),n.write(s,l)},o.prototype.sj=function(s,n){return(s=this.qv(s))<(n=this.Ck[n]).size?n.read(s):-1},o.prototype.Ky=function(){this.Ck==null&&(this.Ck=[]);for(var s=0;s<this.Ck.length;s++)if(this.Ck[s]==null)return this.Ck[s]=h.Yc.Oh(0),s;return this.Ck.push(h.Yc.Oh(0)),this.Ck.length-1},o.prototype.CB=function(s){this.Ck[s]=null},o.prototype.ZT=function(s,n,l){if(l==-1)throw h.i.N();if(n!=l){var c=this.Rb(l),d=this.cs(l),f=this.Qf(l);d==-1?this.Zo(f,c):this.ap(d,c),c==-1?this.$o(f,d):this.bp(c,d),this.Tj(f,this.I(f)-this.Ja(l)),this.Rl(f,this.da(f)-1),d=n==-1?this.kv(s):this.cs(n),this.bp(l,d),this.ap(l,n),n==-1?this.$o(s,l):this.bp(n,l),d==-1?this.Zo(s,l):this.ap(d,l),this.Tj(s,this.I(s)+this.Ja(l)),this.Rl(s,this.da(s)+1),this.gx(l,s)}},o.prototype.ij=function(s,n){this.vb.ve(this.Ua(n),this.nm()),this.wj(s,-1,this.nm())},o.prototype.pd=function(s,n){var l=this.bd(s),c=this.Ma(s),d=this.U(s);c!=-1&&this.Bc(c,d);var f=this.Ja(l);if(s==this.Xa(l)&&this.Jf(l,1<f?d:-1),d!=-1&&this.Cc(d,c),s==this.rj(l)&&this.Wg(l,1<f?c:-1),c!=-1&&d!=-1){c=this.Ua(c);var m=this.Ua(d);n?(n=this.Sh(c))!=null&&(c=new h.h,this.vb.D(m,c),n.Qc(c)):(m=this.Ua(s),n=this.Sh(m),this.Xg(c,n),n!=null&&(c=this.vb.Na(c),n.Dc(c)))}return this.Vj(l,f-1),l=this.Qf(l),this.Tj(l,this.I(l)-1),this.Vy(s),d},o.prototype.Xa=function(s){return this.md.T(s,4)},o.prototype.rj=function(s){return this.md.T(s,5)},o.prototype.U=function(s){return this.td.T(s,2)},o.prototype.Ma=function(s){return this.td.T(s,1)},o.prototype.bd=function(s){return this.td.T(s,3)},o.prototype.fc=function(s,n){return this.wj(s,-1,n)},o.prototype.Yq=function(s){if(s===void 0)return this.Yq(!1);if(s instanceof u)return new u(s);var n,l=-1,c=-1,d=-1,f=0,m=!1;for(n=this.ld;n!=-1;n=this.ue(n))if(!s||h.aa.Hc(this.ic(n))){for(l=this.Ob(n);l!=-1;l=this.Rb(l))if(d=c=this.Xa(l),f=0,c!=-1){m=!0;break}if(m)break}return u.AP(this,n,l,c,d,f,s)},o.prototype.Oc=function(s){if(this.Il.Oc(s),this.We!=null)for(var n=0,l=this.We.length;n<l;n++)this.We[n]!=null&&this.We[n].Oc(s)},o.prototype.jr=function(s,n,l,c){c?this.NX(s,n,l):this.MX(s,n,l)},o.prototype.Cc=function(s,n){this.td.S(s,1,n)},o.prototype.Bc=function(s,n){this.td.S(s,2,n)},o.prototype.aj=function(s,n){this.td.S(s,3,n)},o.prototype.Vj=function(s,n){this.md.S(s,3,n)},o.prototype.Jf=function(s,n){this.md.S(s,4,n)},o.prototype.Wg=function(s,n){this.md.S(s,5,n)},o.prototype.Rl=function(s,n){this.cd.S(s,6,n)},o.prototype.Tj=function(s,n){this.cd.S(s,5,n)},o.prototype.pJ=function(s){var n=s;do{var l=this.U(n);this.Bc(n,this.Ma(n)),this.Cc(n,l),n=l}while(n!=s)},o.prototype.bC=function(s){this.fd=s},o.prototype.$q=function(s){var n=this.cs(s),l=this.Rb(s),c=this.Qf(s);n!=-1?this.ap(n,l):this.Zo(c,l),l!=-1?this.bp(l,n):this.$o(c,n),this.Jf(s,-1),this.Wg(s,-1),this.sF(s)},o.prototype.mi=function(s,n){var l=this.Ma(s),c=this.U(s);if(l!=-1&&this.Bc(l,c),c!=-1&&this.Cc(c,l),l!=-1&&c!=-1)if(l=this.Ua(l),c=this.Ua(c),n){if((n=this.Sh(l))!=null){var d=new h.h;this.vb.D(c,d),n.Qc(d)}}else n=this.Ua(s),n=this.Sh(n),this.Xg(l,n),n!=null&&(d=new h.h,this.vb.D(l,d),n.Dc(d));this.Vy(s)},o.prototype.cT=function(s){return!!(4&this.Sp(s))},o.prototype.cp=function(s,n){this.VB(s,(4|this.Sp(s))-4|(n?4:0))},o.prototype.nx=function(s,n){var l=this.td.o;this.vb.mc();var c=this.vb.za[0].o;s.Vd(0,n,function(d,f){var m=l[5*d];d=l[5*f],f=c[2*m],m=c[2*m+1];var b=c[2*d];return m<(d=c[2*d+1])?-1:m>d?1:f<b?-1:f>b?1:0})},o.prototype.jS=function(){for(var s=this.ld;s!=-1;s=this.ue(s))if(!h.aa.Hc(this.ic(s)))return!0;return!1},o.prototype.hC=function(s,n){for(var l=this.Ob(s),c=this.Ob(n),d=this.kv(s),f=this.kv(n),m=this.Ob(s);m!=-1;m=this.Rb(m))this.gx(m,n);for(m=this.Ob(n);m!=-1;m=this.Rb(m))this.gx(m,s);this.Zo(s,c),this.Zo(n,l),this.$o(s,f),this.$o(n,d),l=this.I(s),c=this.da(s),d=this.da(n),this.Tj(s,this.I(n)),this.Tj(n,l),this.Rl(s,d),this.Rl(n,c),l=this.cd.T(s,2),this.cd.S(s,2,this.cd.T(n,2)),this.cd.S(n,2,l)},o}(),h.gd=C})(G||(G={})),function(h){var C=function(w){function u(o,s,n,l){var c=w.call(this)||this;return c.$=new h.l,o===void 0?c.UE():typeof o=="number"?c.VO(o,s,n,l):o instanceof h.Sa?s!==void 0?c.Qu(o,s,n):c.WO(o):o instanceof h.ra?s!==void 0?c.YO(o,s):c.XO(o):o instanceof h.l?c.UO(o):c.UE(),c}return pt(u,w),u.prototype.Qu=function(o,s,n){this.description=h.ee.og(),this.$.Oa(),o.B()||this.tu(o,s,n)},u.prototype.UO=function(o){this.description=h.ee.og(),this.$.K(o),this.$.normalize()},u.prototype.XO=function(o){if(o==null)throw h.i.N();this.description=o,this.$.Oa()},u.prototype.YO=function(o,s){if(o==null)throw h.i.N();this.description=o,this.$.K(s),this.$.normalize()},u.prototype.UE=function(){this.description=h.ee.og(),this.$.Oa()},u.prototype.WO=function(o){this.description=h.ee.og(),this.$.Oa(),o.B()||this.tu(o)},u.prototype.VO=function(o,s,n,l){this.description=h.ee.og(),this.K(o,s,n,l)},u.prototype.K=function(o,s,n,l){if(this.vc(),typeof o=="number")this.$.K(o,s,n,l);else for(this.Oa(),s=0,n=o.length;s<n;s++)this.Zb(o[s])},u.prototype.Xo=function(o){if(this.vc(),!o.fT())throw h.i.N();this.$.K(o)},u.prototype.Oa=function(){this.vc(),this.$.Oa()},u.prototype.B=function(){return this.$.B()},u.prototype.R=function(){return this.$.R()},u.prototype.ca=function(){return this.$.ca()},u.prototype.gk=function(){return this.$.gk()},u.prototype.Jp=function(){return this.$.Jp()},u.prototype.Ip=function(){return this.$.sf()},u.prototype.Zb=function(o){if(o instanceof h.h)this.vc(),this.$.Zb(o);else if(o instanceof h.l)this.vc(),this.$.Zb(o);else if(o instanceof h.Sa){if(this.vc(),!o.Ac()){var s=o.description;if(this.description!=s&&this.Jl(s),this.B())this.tu(o);else{this.$.Zb(o.D());for(var n=1,l=s.Aa;n<l;n++)for(var c=s.Ed(n),d=h.ra.Va(c),f=0;f<d;f++){var m=o.Uc(c,f),b=this.Tg(c,f);b.Zb(m),this.setInterval(c,f,b)}}}}else if(o instanceof u&&!o.B())for((s=o.description)!=this.description&&this.Jl(s),this.$.Zb(o.$),n=1,l=s.Aa;n<l;n++)for(c=s.kd(n),d=h.ra.Va(c),f=0;f<d;f++)m=o.Tg(c,f),(b=this.Tg(c,f)).Zb(m),this.setInterval(c,f,b)},u.prototype.tu=function(o,s,n){if(s!==void 0){this.$.K(o.D(),s,n),n=1;for(var l=(s=o.description).Aa;n<l;n++)for(var c=s.Ed(n),d=h.ra.Va(c),f=0;f<d;f++){var m=o.Uc(c,f);this.setInterval(c,f,m,m)}}else for(this.$.K(o.ka[0],o.ka[1]),n=1,l=(s=o.description).Aa;n<l;n++)for(c=s.Ed(n),d=h.ra.Va(c),f=0;f<d;f++)m=o.Uc(c,f),this.setInterval(c,f,m,m)},u.prototype.setInterval=function(o,s,n,l){if(n=typeof n=="number"?new h.Nc(n,l):n,this.vc(),o==0)if(s==0)this.$.v=n.oa,this.$.C=n.va;else{if(s!=1)throw h.i.ce();this.$.G=n.oa,this.$.H=n.va}else this.vD(0,o,s,n.oa),this.vD(1,o,s,n.va)},u.prototype.W=function(o,s){this.vc(),this.$.W(o,s)},u.prototype.Oc=function(o){if(o instanceof h.Dd)this.vc(),o.mC(this.$);else if(this.vc(),!this.$.B()){var s=new h.OK;this.Qo(s),s.XS()?s.Oa():o.mC(s)}},u.prototype.copyTo=function(o){if(o.getType()!=this.getType())throw h.i.N();if(o.vc(),o.description=this.description,o.$.K(this.$),o.ka=null,this.ka!=null){o.ou();for(var s=0;s<2*(this.description.Ae.length-2);s++)o.ka[s]=this.ka[s]}},u.prototype.Ia=function(){return new u(this.description)},u.prototype.Ke=function(){return this.$.wF()},u.prototype.Qb=function(){return this.$.yR()},u.prototype.getType=function(){return 197},u.prototype.Db=function(){return 2},u.prototype.bn=function(o){this.copyTo(o)},u.prototype.A=function(o){o.v=this.$.v,o.G=this.$.G,o.C=this.$.C,o.H=this.$.H},u.prototype.Qo=function(o){o.v=this.$.v,o.G=this.$.G,o.C=this.$.C,o.H=this.$.H,o.K(this.$.v,this.$.G,this.Od(0,1,0),this.$.C,this.$.H,this.Od(1,1,0))},u.prototype.Tg=function(o,s){var n=new h.Nc;return n.K(this.Od(0,o,s),this.Od(1,o,s)),n},u.prototype.Hf=function(o,s){s.Nf(this.description);var n=this.description.Aa-1;switch(o){case 0:for(o=0;o<n;o++)for(var l=this.description.kd(o),c=h.ra.Va(l),d=0;d<c;d++)s.setAttribute(l,d,this.Od(0,l,d));s.Cb(this.$.v,this.$.G);break;case 1:for(o=0;o<n;o++)for(l=this.description.kd(o),c=h.ra.Va(l),d=0;d<c;d++)s.setAttribute(l,d,this.Od(1,l,d));s.Cb(this.$.v,this.$.H);break;case 2:for(o=0;o<n;o++)for(l=this.description.kd(o),c=h.ra.Va(l),d=0;d<c;d++)s.setAttribute(l,d,this.Od(0,l,d));s.Cb(this.$.C,this.$.H);break;case 3:for(o=0;o<n;o++)for(l=this.description.kd(o),c=h.ra.Va(l),d=0;d<c;d++)s.setAttribute(l,d,this.Od(1,l,d));s.Cb(this.$.C,this.$.G);break;default:throw h.i.ce()}},u.prototype.mB=function(o,s){o=this.$.mB(o),s.ma(o.x,o.y)},u.prototype.kR=function(o,s){return s*(o.Oq-2)},u.prototype.xF=function(o,s,n){if(this.$.B())throw h.i.fa("empty geometry");if(s==0)return o!=0?n!=0?this.$.H:this.$.C:n!=0?this.$.G:this.$.v;if(n>=h.ra.Va(s))throw h.i.N();var l=this.description.Pf(s);return this.ou(),0<=l?this.ka[this.kR(this.description,o)+this.description.LR(l)-2+n]:h.ra.se(s)},u.prototype.ou=function(){if(this.vc(),this.ka==null&&2<this.description.Ae.length){this.ka=[];for(var o=u.Gg(this.description,0),s=u.Gg(this.description,1),n=0,l=1,c=this.description.Aa;l<c;l++){var d=this.description.kd(l),f=h.ra.Va(d);d=h.ra.se(d);for(var m=0;m<f;m++)this.ka[o+n]=d,this.ka[s+n]=d,n++}}},u.prototype.sn=function(o){if(this.ka!=null)if(2<o.Ae.length){for(var s=h.ee.Iw(o,this.description),n=[],l=u.Gg(this.description,0),c=u.Gg(this.description,1),d=u.Gg(o,0),f=u.Gg(o,1),m=0,b=1,x=o.Aa;b<x;b++){var $=o.kd(b),E=h.ra.Va($);if(s[b]==-1){var O=h.ra.se($);for($=0;$<E;$++)n[d+m]=O,n[f+m]=O,m++}else for(O=this.description.$j(s[b])-2,$=0;$<E;$++)n[d+m]=this.ka[l+O],n[f+m]=this.ka[c+O],m++,O++}this.ka=n}else this.ka=null;this.description=o},u.prototype.Od=function(o,s,n){if(this.$.B())throw h.i.fa("This operation was performed on an Empty Geometry.");if(s==0)return o!=0?n!=0?this.$.H:this.$.C:n!=0?this.$.G:this.$.v;if(n>=h.ra.Va(s))throw h.i.ce();var l=this.description.Pf(s);return 0<=l?(this.ou(),this.ka[u.Gg(this.description,o)+this.description.$j(l)-2+n]):h.ra.se(s)},u.prototype.vD=function(o,s,n,l){if(this.vc(),s==0)o!=0?n!=0?this.$.H=l:this.$.C=l:n!=0?this.$.G=l:this.$.v=l;else{if(n>=h.ra.Va(s))throw h.i.ce();if(!this.hasAttribute(s)){if(h.ra.DG(s,l))return;this.re(s)}s=this.description.Pf(s),this.ou(),this.ka[u.Gg(this.description,o)+this.description.$j(s)-2+n]=l}},u.Gg=function(o,s){return s*(o.Ae.length-2)},u.prototype.Ea=function(o){this.vc();var s=new h.l;return o.A(s),this.$.Ea(s)},u.prototype.isIntersecting=function(o){return o instanceof h.l?this.$.isIntersecting(o):this.$.isIntersecting(o.$)},u.prototype.Ju=function(o,s){this.vc(),o.B()?this.Oa():s!==void 0?this.tu(o,s):this.$.Ju(o.Lg(),o.ih())},u.prototype.offset=function(o,s){this.vc(),this.$.offset(o,s)},u.prototype.normalize=function(){this.vc(),this.$.normalize()},u.prototype.sf=function(o){if(o===void 0){if(o=new h.Sa(this.description),this.B())return o;for(s=this.description.Aa,n=1;n<s;n++)for(l=this.description.Ed(n),c=h.ra.Va(l),d=0;d<c;d++)f=.5*(this.Od(0,l,d)+this.Od(1,l,d)),o.setAttribute(l,d,f);return o.Cb(this.$.gk(),this.$.Jp()),o}if(o.Nf(this.description),this.B())o.Oa();else{for(var s=this.description.Aa,n=1;n<s;n++)for(var l=this.description.kd(n),c=h.ra.Va(l),d=0;d<c;d++){var f=.5*(this.xF(0,l,d)+this.xF(1,l,d));o.setAttribute(l,d,f)}o.Cb(this.$.sf())}},u.prototype.mz=function(){return new h.Sa(this.$.mz())},u.prototype.contains=function(o){return o instanceof h.Sa?!o.B()&&this.$.contains(o.Lg(),o.ih()):this.$.contains(o.$)},u.prototype.dP=function(o){return this.$.contains(o)},u.prototype.Nb=function(o){if(o==this)return!0;if(!(o instanceof u)||this.description!=o.description)return!1;if(this.B())return!!o.B();if(!this.$.Nb(o.$))return!1;for(var s=0,n=2*(this.description.Ae.length-2);s<n;s++)if(this.ka[s]!=o.ka[s])return!1;return!0},u.prototype.cc=function(){var o=this.description.cc();if(o=h.O.Th(o,this.$.cc()),!this.B()&&this.ka!=null)for(var s=0,n=2*(this.description.Ae.length-2);s<n;s++)o=h.O.Th(o,this.ka[s]);return o},u.prototype.es=function(){return this.$.v},u.prototype.gs=function(){return this.$.G},u.prototype.ds=function(){return this.$.C},u.prototype.fs=function(){return this.$.H},u.prototype.mg=function(){return h.pi.gm(this,null)},u.prototype.toString=function(){return this.B()?"Envelope: []":"Envelope: ["+this.$.v+", "+this.$.G+", "+this.$.C+", "+this.$.H+"]"},u}(h.aa);h.Fh=C}(G||(G={})),function(h){var C=function(){function w(u,o,s,n){u===void 0?this.Oa():(this.v=u,this.G=o,this.C=s,this.H=n)}return w.construct=function(u,o,s,n){var l=new w;return l.v=u,l.G=o,l.C=s,l.H=n,l},w.prototype.K=function(u,o,s,n){typeof u=="number"?s!==void 0?(this.v=u,this.G=o,this.C=s,this.H=n,this.normalize()):(this.v=u,this.G=o,this.C=u,this.H=o):u instanceof h.h?o!==void 0?(this.v=u.x-.5*o,this.C=this.v+o,this.G=u.y-.5*s,this.H=this.G+s,this.normalize()):(this.v=u.x,this.G=u.y,this.C=u.x,this.H=u.y):u instanceof w?this.K(u.v,u.G,u.C,u.H):u instanceof h.Nc&&(u.B()||o.B()?this.Oa():(this.v=u.oa,this.C=u.va,this.G=o.oa,this.H=o.va))},w.prototype.Zw=function(u,o){if(o!==void 0)if(o==0)this.Oa();else{this.v=u[0].x,this.G=u[0].y,this.C=this.v,this.H=this.G;for(var s=1;s<o;s++){var n=u[s];n.x<this.v?this.v=n.x:n.x>this.C&&(this.C=n.x),n.y<this.G?this.G=n.y:n.y>this.H&&(this.H=n.y)}}else if(u==null||u.length==0)this.Oa();else for(n=u[0],this.K(n.x,n.y),s=1;s<u.length;s++)o=u[s],this.Lk(o.x,o.y)},w.prototype.Oa=function(){this.H=this.C=this.G=this.v=NaN},w.prototype.B=function(){return isNaN(this.v)},w.prototype.Zb=function(u,o){typeof u=="number"?this.B()?(this.v=u,this.G=o,this.C=u,this.H=o):(this.v>u?this.v=u:this.C<u&&(this.C=u),this.G>o?this.G=o:this.H<o&&(this.H=o)):u instanceof h.h||u instanceof h.Nd?this.Zb(u.x,u.y):u instanceof w&&!u.B()&&(this.Zb(u.v,u.G),this.Zb(u.C,u.H))},w.prototype.Lk=function(u,o){this.v>u?this.v=u:this.C<u&&(this.C=u),this.G>o?this.G=o:this.H<o&&(this.H=o)},w.prototype.W=function(u,o){this.B()||(this.v-=u,this.C+=u,this.G-=o,this.H+=o,(this.v>this.C||this.G>this.H)&&this.Oa())},w.prototype.scale=function(u){0>u&&this.Oa(),this.B()||(this.v*=u,this.C*=u,this.G*=u,this.H*=u)},w.prototype.zoom=function(u,o){this.B()||this.K(this.sf(),u*this.R(),o*this.ca())},w.prototype.isIntersecting=function(u){return!this.B()&&!u.B()&&(this.v<=u.v?this.C>=u.v:u.C>=this.v)&&(this.G<=u.G?this.H>=u.G:u.H>=this.G)},w.prototype.HG=function(u){return(this.v<=u.v?this.C>=u.v:u.C>=this.v)&&(this.G<=u.G?this.H>=u.G:u.H>=this.G)},w.prototype.Ea=function(u){return!this.B()&&!u.B()&&(u.v>this.v&&(this.v=u.v),u.C<this.C&&(this.C=u.C),u.G>this.G&&(this.G=u.G),u.H<this.H&&(this.H=u.H),(u=this.v<=this.C&&this.G<=this.H)||this.Oa(),u)},w.prototype.mB=function(u){switch(u){case 0:return h.h.construct(this.v,this.G);case 1:return h.h.construct(this.v,this.H);case 2:return h.h.construct(this.C,this.H);case 3:return h.h.construct(this.C,this.G);default:throw h.i.ce()}},w.prototype.nB=function(u){if(u==null||4>u.length)throw h.i.N();u[0]!=null?u[0].ma(this.v,this.G):u[0]=h.h.construct(this.v,this.G),u[1]!=null?u[1].ma(this.v,this.H):u[1]=h.h.construct(this.v,this.H),u[2]!=null?u[2].ma(this.C,this.H):u[2]=h.h.construct(this.C,this.H),u[3]!=null?u[3].ma(this.C,this.G):u[3]=h.h.construct(this.C,this.G)},w.prototype.wF=function(){return this.B()?0:this.R()*this.ca()},w.prototype.yR=function(){return this.B()?0:2*(this.R()+this.ca())},w.prototype.gk=function(){return(this.C+this.v)/2},w.prototype.Jp=function(){return(this.H+this.G)/2},w.prototype.R=function(){return this.C-this.v},w.prototype.ca=function(){return this.H-this.G},w.prototype.move=function(u,o){this.B()||(this.v+=u,this.G+=o,this.C+=u,this.H+=o)},w.prototype.Ju=function(u,o){if(o!==void 0)this.move(u-this.gk(),o-this.Jp());else if(u instanceof h.h)this.Ju(u.x,u.y);else{if(!(u instanceof h.Sa))throw h.i.N();o=(this.C-this.v)/2;var s=(this.H-this.G)/2;this.v=u.Lg()-o,this.C=u.Lg()+o,this.G=u.ih()-s,this.H=u.ih()+s}},w.prototype.offset=function(u,o){this.v+=u,this.C+=u,this.G+=o,this.H+=o},w.prototype.normalize=function(){if(!this.B()){var u=Math.min(this.v,this.C),o=Math.max(this.v,this.C);this.v=u,this.C=o,u=Math.min(this.G,this.H),o=Math.max(this.G,this.H),this.G=u,this.H=o}},w.prototype.dn=function(u){u.ma(this.v,this.G)},w.prototype.$I=function(u){u.ma(this.C,this.G)},w.prototype.cJ=function(u){u.ma(this.v,this.H)},w.prototype.en=function(u){u.ma(this.C,this.H)},w.prototype.fT=function(){return this.B()||this.v<=this.C&&this.G<=this.H},w.prototype.sf=function(){return h.h.construct((this.C+this.v)/2,(this.H+this.G)/2)},w.prototype.mz=function(){return h.h.construct(this.v,this.G)},w.prototype.contains=function(u,o){if(o!==void 0)return u>=this.v&&u<=this.C&&o>=this.G&&o<=this.H;if(u instanceof h.Sa)return this.contains(u.Lg(),u.ih());if(u instanceof h.h)return this.contains(u.x,u.y);if(u instanceof w)return u.v>=this.v&&u.C<=this.C&&u.G>=this.G&&u.H<=this.H;throw h.i.N()},w.prototype.hm=function(u,o){if(o!==void 0)return u>this.v&&u<this.C&&o>this.G&&o<this.H;if(u instanceof h.h)return this.hm(u.x,u.y);if(u instanceof w)return u.v>this.v&&u.C<this.C&&u.G>this.G&&u.H<this.H;throw h.i.N()},w.prototype.Nb=function(u){return u==this||u instanceof w&&(!(!this.B()||!u.B())||this.v==u.v&&this.G==u.G&&this.C==u.C&&this.H==u.H)},w.prototype.cc=function(){var u=this.v;u=h.O.truncate(u^u>>>32);var o=h.O.Th(u);return u=this.C,u=h.O.truncate(u^u>>>32),o=h.O.Th(u,o),u=this.G,u=h.O.truncate(u^u>>>32),o=h.O.Th(u,o),u=this.H,u=h.O.truncate(u^u>>>32),h.O.Th(u,o)},w.prototype.xr=function(){return this.B()?2220446049250313e-29:2220446049250313e-29*(Math.abs(this.v)+Math.abs(this.C)+Math.abs(this.G)+Math.abs(this.H)+1)},w.prototype.zy=function(u,o){var s=this.Zj(u),n=this.Zj(o);if(s&n)return 0;if(!(s|n))return 4;var l=(s!=0?1:0)|(n!=0?2:0);do{var c=o.x-u.x,d=o.y-u.y;if(c>d?s&w.YC?(s&w.ju?(u.y+=d*(this.v-u.x)/c,u.x=this.v):(u.y+=d*(this.C-u.x)/c,u.x=this.C),s=this.Zj(u)):n&w.YC?(n&w.ju?(o.y+=d*(this.v-o.x)/c,o.x=this.v):(o.y+=d*(this.C-o.x)/c,o.x=this.C),n=this.Zj(o)):s!=0?(s&w.ku?(u.x+=c*(this.G-u.y)/d,u.y=this.G):(u.x+=c*(this.H-u.y)/d,u.y=this.H),s=this.Zj(u)):(n&w.ku?(o.x+=c*(this.G-o.y)/d,o.y=this.G):(o.x+=c*(this.H-o.y)/d,o.y=this.H),n=this.Zj(o)):s&w.ZC?(s&w.ku?(u.x+=c*(this.G-u.y)/d,u.y=this.G):(u.x+=c*(this.H-u.y)/d,u.y=this.H),s=this.Zj(u)):n&w.ZC?(n&w.ku?(o.x+=c*(this.G-o.y)/d,o.y=this.G):(o.x+=c*(this.H-o.y)/d,o.y=this.H),n=this.Zj(o)):s!=0?(s&w.ju?(u.y+=d*(this.v-u.x)/c,u.x=this.v):(u.y+=d*(this.C-u.x)/c,u.x=this.C),s=this.Zj(u)):(n&w.ju?(o.y+=d*(this.v-o.x)/c,o.x=this.v):(o.y+=d*(this.C-o.x)/c,o.x=this.C),n=this.Zj(o)),s&n)return 0}while(s|n);return l},w.prototype.Zj=function(u){return(u.x<this.v?1:0)|(u.x>this.C?1:0)<<1|(u.y<this.G?1:0)<<2|(u.y>this.H?1:0)<<3},w.prototype.Bi=function(u){return!this.B()&&(this.R()<=u||this.ca()<=u)},w.prototype.tb=function(u){return u instanceof h.h?Math.sqrt(this.iK(u)):Math.sqrt(this.px(u))},w.prototype.px=function(u){var o=0,s=0,n=this.v-u.C;return n>o&&(o=n),(n=this.G-u.H)>s&&(s=n),(n=u.v-this.C)>o&&(o=n),(n=u.G-this.H)>s&&(s=n),o*o+s*s},w.prototype.iK=function(u){var o=0,s=0,n=this.v-u.x;return n>o&&(o=n),(n=this.G-u.y)>s&&(s=n),(n=u.x-this.C)>o&&(o=n),(n=u.y-this.H)>s&&(s=n),o*o+s*s},w.prototype.cn=function(u){this.B()?u.Oa():u.K(this.v,this.C)},w.ju=1,w.ku=4,w.YC=3,w.ZC=12,w}();h.l=C}(G||(G={})),function(h){var C,w;(w=C||(C={}))[w.initialize=0]="initialize",w[w.initializeRed=1]="initializeRed",w[w.initializeBlue=2]="initializeBlue",w[w.initializeRedBlue=3]="initializeRedBlue",w[w.sweep=4]="sweep",w[w.sweepBruteForce=5]="sweepBruteForce",w[w.sweepRedBlueBruteForce=6]="sweepRedBlueBruteForce",w[w.sweepRedBlue=7]="sweepRedBlue",w[w.sweepRed=8]="sweepRed",w[w.sweepBlue=9]="sweepBlue",w[w.iterate=10]="iterate",w[w.iterateRed=11]="iterateRed",w[w.iterateBlue=12]="iterateBlue",w[w.iterateBruteForce=13]="iterateBruteForce",w[w.iterateRedBlueBruteForce=14]="iterateRedBlueBruteForce",w[w.resetRed=15]="resetRed",w[w.resetBlue=16]="resetBlue";var u=function(){function o(s,n){this.ci=s,this.dH=n}return o.prototype.nr=function(s,n,l){this.ci.JX(l,s,n,this.dH)},o.prototype.$p=function(s){return this.ci.Rr(s,this.dH)},o}();C=function(){function o(){this.ow=this.oo=this.ff=this.rd=null,this.wq=new h.l,this.Am=this.Hj=this.Ij=this.Ad=this.Ef=this.Ld=this.cw=this.fo=this.qd=this.Eb=null,this.Xb=-1,this.qa=0,this.Nk()}return o.prototype.kr=function(){this.Nk(),this.Pv=!0,this.Eb==null?(this.fo=new h.ia(0),this.Eb=[]):(this.fo.Bh(0),this.Eb.length=0)},o.prototype.ad=function(s,n){if(!this.Pv)throw h.i.Hb();var l=new h.l;l.K(n),this.fo.add(s),this.Eb.push(l)},o.prototype.Fp=function(){if(!this.Pv)throw h.i.Hb();this.Pv=!1,this.Eb!=null&&0<this.Eb.length&&(this.Xb=0,this.Ic=!1)},o.prototype.pK=function(){this.Nk(),this.Ov=!0,this.Eb==null?(this.fo=new h.ia(0),this.Eb=[]):(this.fo.Bh(0),this.Eb.length=0)},o.prototype.JD=function(s,n){if(!this.Ov)throw h.i.Hb();var l=new h.l;l.K(n),this.fo.add(s),this.Eb.push(l)},o.prototype.iF=function(){if(!this.Ov)throw h.i.Hb();this.Ov=!1,this.Eb!=null&&0<this.Eb.length&&this.qd!=null&&0<this.qd.length&&(this.Xb==-1||this.Xb==2?this.Xb=3:this.Xb!=3&&(this.Xb=1),this.Ic=!1)},o.prototype.oK=function(){this.Nk(),this.Nv=!0,this.qd==null?(this.cw=new h.ia(0),this.qd=[]):(this.cw.Bh(0),this.qd.length=0)},o.prototype.ED=function(s,n){if(!this.Nv)throw h.i.Hb();var l=new h.l;l.K(n),this.cw.add(s),this.qd.push(l)},o.prototype.hF=function(){if(!this.Nv)throw h.i.Hb();this.Nv=!1,this.Eb!=null&&0<this.Eb.length&&this.qd!=null&&0<this.qd.length&&(this.Xb==-1||this.Xb==1?this.Xb=3:this.Xb!=3&&(this.Xb=2),this.Ic=!1)},o.prototype.next=function(){if(this.Ic)return!1;for(var s=!0;s;)switch(this.Xb){case 0:s=this.Gz();break;case 1:s=this.rS();break;case 2:s=this.oS();break;case 3:s=this.qS();break;case 4:s=this.UX();break;case 5:s=this.QX();break;case 6:s=this.RX();break;case 7:s=this.SX();break;case 8:s=this.ux();break;case 9:s=this.iC();break;case 10:s=this.Uz();break;case 11:s=this.jT();break;case 12:s=this.gT();break;case 13:s=this.hT();break;case 14:s=this.iT();break;case 15:s=this.kJ();break;case 16:s=this.jJ();break;default:throw h.i.Qa()}return!this.Ic},o.prototype.aC=function(s){this.qa=s},o.prototype.uz=function(s){return this.Eb[s]},o.prototype.az=function(s){return this.qd[s]},o.prototype.nl=function(s){return this.fo.read(s)},o.prototype.hl=function(s){return this.cw.read(s)},o.Tz=function(s){return!(1&~s)},o.eq=function(s){return!(1&s)},o.prototype.Nk=function(){this.Pv=this.Nv=this.Ov=!1,this.Cf=this.Df=this.Rg=this.pe=-1,this.Ic=!0},o.prototype.Gz=function(){if(this.Af=this.Vf=-1,10>this.Eb.length)return this.pe=this.Eb.length,this.Xb=5,!0;this.rd==null&&(this.rd=new h.sr(!0),this.oo=this.rd.getIterator(),this.Ld=new h.ia(0)),this.rd.kr();for(var s=0;s<this.Eb.length;s++){var n=this.Eb[s];this.rd.Br(n.v,n.C)}for(this.rd.Fp(),this.Ld.Jb(2*this.Eb.length),this.Ld.resize(0),s=0;s<2*this.Eb.length;s++)this.Ld.add(s);return this.Kt(this.Ld,2*this.Eb.length,!0),this.pe=2*this.Eb.length,this.Xb=4,!0},o.prototype.rS=function(){if(this.Af=this.Vf=-1,10>this.Eb.length||10>this.qd.length)return this.pe=this.Eb.length,this.Xb=6,!0;this.rd==null&&(this.rd=new h.sr(!0),this.oo=this.rd.getIterator(),this.Ld=new h.ia(0)),this.rd.kr();for(var s=0;s<this.Eb.length;s++){var n=this.Eb[s];this.rd.Br(n.v,n.C)}for(this.rd.Fp(),this.Ld.Jb(2*this.Eb.length),this.Ld.resize(0),s=0;s<2*this.Eb.length;s++)this.Ld.add(s);return this.Kt(this.Ld,this.Ld.size,!0),this.pe=this.Ld.size,this.Df!=-1&&(this.Ad.bh(this.Df),this.Ij.resize(0),this.Df=-1),this.Xb=7,this.jJ()},o.prototype.oS=function(){if(this.Af=this.Vf=-1,10>this.Eb.length||10>this.qd.length)return this.pe=this.Eb.length,this.Xb=6,!0;this.ff==null&&(this.ff=new h.sr(!0),this.ow=this.ff.getIterator(),this.Ef=new h.ia(0)),this.ff.kr();for(var s=0;s<this.qd.length;s++){var n=this.qd[s];this.ff.Br(n.v,n.C)}for(this.ff.Fp(),this.Ef.Jb(2*this.qd.length),this.Ef.resize(0),s=0;s<2*this.qd.length;s++)this.Ef.add(s);return this.Kt(this.Ef,this.Ef.size,!1),this.Rg=this.Ef.size,this.Cf!=-1&&(this.Ad.bh(this.Cf),this.Hj.resize(0),this.Cf=-1),this.Xb=7,this.kJ()},o.prototype.qS=function(){if(this.Af=this.Vf=-1,10>this.Eb.length||10>this.qd.length)return this.pe=this.Eb.length,this.Xb=6,!0;this.rd==null&&(this.rd=new h.sr(!0),this.oo=this.rd.getIterator(),this.Ld=new h.ia(0)),this.ff==null&&(this.ff=new h.sr(!0),this.ow=this.ff.getIterator(),this.Ef=new h.ia(0)),this.rd.kr();for(var s=0;s<this.Eb.length;s++){var n=this.Eb[s];this.rd.Br(n.v,n.C)}for(this.rd.Fp(),this.ff.kr(),s=0;s<this.qd.length;s++)n=this.qd[s],this.ff.Br(n.v,n.C);for(this.ff.Fp(),this.Ld.Jb(2*this.Eb.length),this.Ef.Jb(2*this.qd.length),this.Ld.resize(0),this.Ef.resize(0),s=0;s<2*this.Eb.length;s++)this.Ld.add(s);for(s=0;s<2*this.qd.length;s++)this.Ef.add(s);return this.Kt(this.Ld,this.Ld.size,!0),this.Kt(this.Ef,this.Ef.size,!1),this.pe=this.Ld.size,this.Rg=this.Ef.size,this.Df!=-1&&(this.Ad.bh(this.Df),this.Ij.resize(0),this.Df=-1),this.Cf!=-1&&(this.Ad.bh(this.Cf),this.Hj.resize(0),this.Cf=-1),this.Xb=7,!0},o.prototype.UX=function(){var s=this.Ld.get(--this.pe),n=s>>1;return o.eq(s)?(this.rd.remove(n),this.pe!=0||(this.Af=this.Vf=-1,this.Ic=!0,!1)):(this.oo.EB(this.Eb[n].v,this.Eb[n].C,this.qa),this.Vf=n,this.Xb=10,!0)},o.prototype.QX=function(){return--this.pe==-1?(this.Af=this.Vf=-1,this.Ic=!0,!1):(this.Rg=this.Vf=this.pe,this.Xb=13,!0)},o.prototype.RX=function(){return--this.pe==-1?(this.Af=this.Vf=-1,this.Ic=!0,!1):(this.Vf=this.pe,this.Rg=this.qd.length,this.Xb=14,!0)},o.prototype.SX=function(){var s=this.Ld.get(this.pe-1),n=this.Ef.get(this.Rg-1),l=this.Rr(s,!0),c=this.Rr(n,!1);return l>c?this.ux():l<c?this.iC():o.Tz(s)?this.ux():o.Tz(n)?this.iC():this.ux()},o.prototype.ux=function(){var s=this.Ld.get(--this.pe),n=s>>1;if(o.eq(s))return this.Df!=-1&&this.Ij.get(n)!=-1?(this.Ad.jd(this.Df,this.Ij.get(n)),this.Ij.set(n,-1)):this.rd.remove(n),this.pe!=0||(this.Af=this.Vf=-1,this.Ic=!0,!1);if(this.Cf!=-1&&0<this.Ad.bs(this.Cf))for(s=this.Ad.rc(this.Cf);s!=-1;){var l=this.Ad.getData(s);this.ff.vj(l),this.Hj.set(l,-1),l=this.Ad.lb(s),this.Ad.jd(this.Cf,s),s=l}return 0<this.ff.size()?(this.ow.EB(this.Eb[n].v,this.Eb[n].C,this.qa),this.Vf=n,this.Xb=12):(this.Df==-1&&(this.Ad==null&&(this.Ad=new h.jp),this.Ij=new h.ia(0),this.Ij.resize(this.Eb.length,-1),this.Ij.Wj(-1,0,this.Eb.length),this.Df=this.Ad.Ph(1)),this.Ij.set(n,this.Ad.addElement(this.Df,n)),this.Xb=7),!0},o.prototype.iC=function(){var s=this.Ef.get(--this.Rg),n=s>>1;if(o.eq(s))return this.Cf!=-1&&this.Hj.get(n)!=-1?(this.Ad.jd(this.Cf,this.Hj.get(n)),this.Hj.set(n,-1)):this.ff.remove(n),this.Rg!=0||(this.Af=this.Vf=-1,this.Ic=!0,!1);if(this.Df!=-1&&0<this.Ad.bs(this.Df))for(s=this.Ad.rc(this.Df);s!=-1;){var l=this.Ad.getData(s);this.rd.vj(l),this.Ij.set(l,-1),l=this.Ad.lb(s),this.Ad.jd(this.Df,s),s=l}return 0<this.rd.size()?(this.oo.EB(this.qd[n].v,this.qd[n].C,this.qa),this.Af=n,this.Xb=11):(this.Cf==-1&&(this.Ad==null&&(this.Ad=new h.jp),this.Hj=new h.ia(0),this.Hj.resize(this.qd.length,-1),this.Hj.Wj(-1,0,this.qd.length),this.Cf=this.Ad.Ph(0)),this.Hj.set(n,this.Ad.addElement(this.Cf,n)),this.Xb=7),!0},o.prototype.Uz=function(){if(this.Af=this.oo.next(),this.Af!=-1)return!1;var s=this.Ld.get(this.pe)>>1;return this.rd.vj(s),this.Xb=4,!0},o.prototype.jT=function(){if(this.Vf=this.oo.next(),this.Vf!=-1)return!1;this.Af=this.Vf=-1;var s=this.Ef.get(this.Rg)>>1;return this.ff.vj(s),this.Xb=7,!0},o.prototype.gT=function(){if(this.Af=this.ow.next(),this.Af!=-1)return!1;var s=this.Ld.get(this.pe)>>1;return this.rd.vj(s),this.Xb=7,!0},o.prototype.hT=function(){if(--this.Rg==-1)return this.Xb=5,!0;this.wq.K(this.Eb[this.pe]);var s=this.Eb[this.Rg];return this.wq.W(this.qa,this.qa),!this.wq.isIntersecting(s)||(this.Af=this.Rg,!1)},o.prototype.iT=function(){if(--this.Rg==-1)return this.Xb=6,!0;this.wq.K(this.Eb[this.pe]);var s=this.qd[this.Rg];return this.wq.W(this.qa,this.qa),!this.wq.isIntersecting(s)||(this.Af=this.Rg,!1)},o.prototype.kJ=function(){return this.rd==null?(this.Ic=!0,!1):(this.pe=this.Ld.size,0<this.rd.size()&&this.rd.reset(),this.Df!=-1&&(this.Ad.bh(this.Df),this.Ij.resize(0),this.Df=-1),this.Ic=!1,!0)},o.prototype.jJ=function(){return this.ff==null?(this.Ic=!0,!1):(this.Rg=this.Ef.size,0<this.ff.size()&&this.ff.reset(),this.Cf!=-1&&(this.Ad.bh(this.Cf),this.Hj.resize(0),this.Cf=-1),this.Ic=!1,!0)},o.prototype.Kt=function(s,n,l){this.Am==null&&(this.Am=new h.Xt),l=new u(this,l),this.Am.sort(s,0,n,l)},o.prototype.JX=function(s,n,l,c){var d=this;s.Vd(n,l,function(f,m){var b=d.Rr(f,c),x=d.Rr(m,c);return b<x||b==x&&o.eq(f)&&o.Tz(m)?-1:1})},o.prototype.Rr=function(s,n){var l=.5*this.qa;return n?(n=this.Eb[s>>1],o.eq(s)?n.G-l:n.H+l):(n=this.qd[s>>1],o.eq(s)?n.G-l:n.H+l)},o}(),h.xC=C}(G||(G={})),function(h){var C=function(){function w(){}return w.construct=function(u,o,s,n,l,c){var d=new w;return d.v=u,d.G=o,d.Ye=s,d.C=n,d.H=l,d.Bg=c,d},w.prototype.Oa=function(){this.Ye=this.v=NaN},w.prototype.B=function(){return isNaN(this.v)},w.prototype.XS=function(){return isNaN(this.Ye)},w.prototype.K=function(u,o,s,n,l,c){n!==void 0?typeof u=="number"?(this.v=u,this.G=o,this.Ye=s,this.C=n,this.H=l,this.Bg=c):(this.v=u.x-.5*o,this.C=this.v+o,this.G=u.y-.5*s,this.H=this.G+s,this.Ye=u.z-.5*n,this.Bg=this.Ye+n):(this.v=u,this.G=o,this.Ye=s,this.C=u,this.H=o,this.Bg=s)},w.prototype.move=function(u){this.v+=u.x,this.G+=u.y,this.Ye+=u.z,this.C+=u.x,this.H+=u.y,this.Bg+=u.z},w.prototype.copyTo=function(u){u.v=this.v,u.G=this.G,u.C=this.C,u.H=this.H},w.prototype.Lk=function(u,o,s){this.v>u?this.v=u:this.C<u&&(this.C=u),this.G>o?this.G=o:this.H<o&&(this.H=o),isNaN(this.Ye)==0?this.Ye>s?this.Ye=s:this.Bg<s&&(this.Bg=s):this.Bg=this.Ye=s},w.prototype.Zb=function(u,o,s){if(typeof u=="number")this.B()?(this.v=u,this.G=o,this.Ye=s,this.C=u,this.H=o,this.Bg=s):this.Lk(u,o,s);else if(u instanceof h.Nd)this.Zb(u.x,u.y,u.z);else{if(!(u instanceof w))throw h.i.N();u.B()||(this.Zb(u.v,u.G,u.Ye),this.Zb(u.C,u.H,u.Bg))}},w.prototype.construct=function(u,o,s){u.B()||o.B()?this.Oa():(this.v=u.oa,this.C=u.va,this.G=o.oa,this.H=o.va,this.Ye=s.oa,this.Bg=s.va)},w.prototype.nB=function(u){if(u==null||8>u.length)throw h.i.N();u[0]=new h.Nd(this.v,this.G,this.Ye),u[1]=new h.Nd(this.v,this.H,this.Ye),u[2]=new h.Nd(this.C,this.H,this.Ye),u[3]=new h.Nd(this.C,this.G,this.Ye),u[4]=new h.Nd(this.v,this.G,this.Bg),u[5]=new h.Nd(this.v,this.H,this.Bg),u[6]=new h.Nd(this.C,this.H,this.Bg),u[7]=new h.Nd(this.C,this.G,this.Bg)},w.prototype.Zw=function(u){if(u==null||u.length==0)this.Oa();else{var o=u[0];for(this.K(o.x,o.y,o.z),o=1;o<u.length;o++){var s=u[o];this.Lk(s.x,s.y,s.z)}}},w}();h.OK=C}(G||(G={})),function(h){(function(C){C.Qa=function(){var w=Error();return w.message="Internal Error",w},C.Ie=function(){var w=Error();return w.message="Not Implemented",w},C.Xk=function(){var w=Error();return w.message="The input unit and the spatial reference unit are not of the same unit type.ie Linear vs.Angular",w},C.Hb=function(){var w=Error();return w.message="Invalid Call",w},C.N=function(w){var u=Error();return u.message="Illegal Argument Exception",w!==void 0&&(u.message+=": "+w),u},C.fu=function(w){var u=Error();return u.message=w!==void 0?"Runtime Exception: "+w:"Runtime Exception.",u},C.fa=function(w){var u=Error();return u.message="Geometry Exception: "+w,u},C.GK=function(){var w=Error();return w.message="Assert Failed Exception",w},C.ce=function(){var w=Error();return w.message="IndexOutOfBoundsException",w},C.WC=function(){var w=Error();return w.message="UserCancelException",w}})(h.i||(h.i={}))}(G||(G={})),function(h){(h=h.bm||(h.bm={}))[h.forward=0]="forward",h[h.reverse=1]="reverse"}(G||(G={})),function(h){var C=function(){function o(s,n){this.Wa=s,this.FH=n,this.LH=-1,this.sl=!1}return o.prototype.qe=function(){},o.prototype.next=function(){if(++this.LH==this.FH.I())return null;var s=this.FH.Na(this.LH);s.scale(this.Wa.ec);var n=new h.Da;return this.Wa.sy(s,this.sl,n),n},o.prototype.La=function(){return 0},o}(),w=function(){function o(s,n,l){this.Wa=s,this.rw=n,this.Xn=!1,this.co=l,this.bw=[0],this.sk=[0],this.Nj=[0],this.Gs=[0],this.sl=!1,this.qq=new h.Da,this.uk=[]}return o.prototype.qe=function(){},o.prototype.next=function(){if(this.Xn){this.Xn=!1,this.sd.ha();var s=h.aa.jg(this.qq);return h.Fg.Mk(s,this.Wa.Aq,!0,!0,this.Wa.Ub)}if(this.sd==null&&(this.sd=this.rw.Ga(),this.sd.$a(),this.co!=null&&this.co.Yk(null,0)),!this.sd.Ha()){if(!this.sd.$a())return null;this.co!=null&&this.co.Yk(null,0)}s=null,this.sk[0]=0,this.FA=this.bw[0]=0,this.di=NaN,this.Xn=!1;for(var n=this.uk.length=0,l=new h.h,c=new h.h,d=[0];this.sd.Ha()&&8>this.FA;){var f=this.sd.ha();if(l.L(f.ac()),c.L(f.wc()),l.scale(this.Wa.ec),c.scale(this.Wa.ec),h.cj.Mu(l,c)?l.x=c.x:h.cj.Ku(l,c)&&(c.x=l.x),this.uk.length=0,h.cj.tF(this.Wa.Tb,this.Wa.kc,this.Wa.ze,l,c,this.Wa.QA,this.Wa.Zs,d,this.Nj,this.Gs,this.uk,this.bw),this.co!=null&&(f=this.uk.slice(0),this.co.qG(this.co.da()-1,f,f.length-1)),h.cj.Lu(l,c)?(this.qq.Oa(),this.Wa.sy(l,this.sl,this.qq),this.Xn=!0):(this.qq.Oa(),this.Xn=this.xy(d[0],this.qq)),this.Xn){if(this.sd.li(),this.sd.Ez()){this.sd.li(),this.sd.ha();break}this.sd.DW();break}s==null&&(s=new h.Da).Yk(null,0),this.OD(s),n++}if(this.bw[0]=0,0<n){for(d=this.sd.wb();0<n;)this.sd.li(),l.L(this.rw.Na(this.sd.wb())),c.L(this.rw.Na(this.sd.ik())),l.scale(this.Wa.ec),c.scale(this.Wa.ec),this.sl&&(h.cj.Mu(l,c)?l.x=c.x:h.cj.Ku(l,c)&&(c.x=l.x)),this.uk.length=0,h.cj.tF(this.Wa.Tb,this.Wa.kc,this.Wa.ze,c,l,this.Wa.QA,this.Wa.Zs,null,this.Nj,this.Gs,this.uk,this.bw),this.OD(s),n--;return l.L(this.rw.Na(this.sd.wb())),l.scale(this.Wa.ec),u.Hr(this.Wa.Tb,this.Wa.kc,this.Wa.ec,this.Wa.rb,l,this.di+1.570796326794897,this.di+4.71238898038469,this.Wa.ao,this.sl,this.sk,s,NaN,NaN),this.sd.Vb(d),this.sd.ha(),n=h.ta.kj(null,s,!0),h.Fg.Mk(s,n,!0,!0,this.Wa.Ub)}return this.Xn=!1,this.sd.ha(),s=h.aa.jg(this.qq),h.Fg.Mk(s,this.Wa.Aq,!0,!0,this.Wa.Ub)},o.prototype.OD=function(s){var n=this.uk[0],l=this.Nj[0]-1.570796326794897,c=this.Gs[0]+1.570796326794897;if(!isNaN(this.di)){if(this.di>=this.Nj[0]){var d=this.di+1.570796326794897;l=d+3.141592653589793-(this.di-this.Nj[0])}else l=(d=this.di+1.570796326794897)+3.141592653589793-(6.283185307179586-(this.Nj[0]-this.di));var f=!(this.di>=this.Nj[0]&&3.141592653589793>=this.di-this.Nj[0])&&!(this.di<this.Nj[0]&&3.141592653589793<=this.Nj[0]-this.di),m=!1;if(Math.abs(l-d)<=.5*this.Wa.ao)if(f){var b=s.Na(s.I()-2);b.scale(this.Wa.ec);var x=new h.ga(0);for(h.kb.Xy(this.Wa.Tb,this.Wa.kc,n.x,n.y,b.x,b.y,x),b=x.u;b<=d;)b+=6.283185307179586;for(;b>d;)b-=6.283185307179586;b<l&&(m=!0)}else m=!0;m?(s.DB(0,s.I()-1),this.sl||((n=new h.h).L(s.Na(s.I()-1)),n.scale(this.Wa.ec),-3.141592653589793>n.x-this.sk[0]?this.sk[0]-=6.283185307179586:3.141592653589793<n.x-this.sk[0]&&(this.sk[0]+=6.283185307179586)),f||(l=.5*(l+d))):(f?((d=new h.h).L(n),d.scale(1/this.Wa.ec),s.wf(0,-1,d)):u.Hr(this.Wa.Tb,this.Wa.kc,this.Wa.ec,this.Wa.rb,this.uk[0],d,l,this.Wa.ao,this.sl,this.sk,s,NaN,NaN),this.FA+=1)}u.qy(this.Wa.Tb,this.Wa.kc,this.Wa.ec,this.Wa.rb,this.Wa.ze,this.uk,l,c,this.sl,this.sk,s),this.di=this.Gs[0]},o.prototype.xy=function(s,n){return this.Wa.xy(this.uk,s,this.Nj[0],this.Gs[0],this.sl,n)},o.prototype.La=function(){return 0},o}(),u=function(){function o(){}return o.buffer=function(s,n,l,c,d,f){if(s==null)throw h.i.N("Geometry::Geodesic_bufferer::buffer");if(s.B())return new h.Da(s.description);var m=new o;m.Qg=n,m.Jc=h.cb.sc(n);var b=h.cb.vv(m.Jc);if(m.Ub=f,m.Tb=h.cb.ev(m.Jc),m.kc=b*(2-b),m.ec=m.Jc.Hd().ai,m.qa=m.Qg.Kn(),m.Aq=m.Jc.Kn(),m.Zs=m.Aq*m.ec,m.zq=1.570796326794897/m.ec,m.OY=3.141592653589793/m.ec,m.Js=6.283185307179586/m.ec,m.PY=m.Js/6,m.LA=0,m.NY=1.5707963267948966*m.Tb/m.LA,l==4?(m.ze=2,m.Wv=!0):(m.ze=l,m.Wv=!1),m.Ka=c,m.rb=Math.abs(c),isNaN(d)||.001>d?m.xX():m.$n=d,l=s.getType(),h.aa.yd(l)?((l=new h.Ta(s.description)).oc(s,!0),s=l,l=1607):l==197&&(l=new h.l,s.A(l),l.R()<=m.qa||l.ca()<=m.qa?((l=new h.Ta(s.description)).ad(s,!1),s=l,l=1607):((l=new h.Da(s.description)).ad(s,!1),s=l,l=1736)),m.yX(),h.aa.Rn(l)||m.zX(),m.rb<=.5*m.$n)return l!=1736?new h.Da(s.description):m.Wv?s:h.cj.Qr(s,m.Qg,m.ze,m.QA,-1,f);if(0>m.Ka&&l!=1736)return new h.Da(s.description);if(m.Wv&&h.aa.Hc(l)?(n=h.cj.Qr(s,n,4,NaN,m.$n,f),s=h.cb.zh(n,m.Qg,m.Jc)):s=h.cb.zh(s,m.Qg,m.Jc),(s=h.Hh.lj(s,m.Jc)).B())return new h.Da(s.description);switch(!m.Wv&&h.aa.Hc(l)&&(s=h.cj.pI(m.ec,s)),s=o.KX(s,m.Jc),l){case 1736:n=m.UN(s);break;case 1607:n=m.VN(s);break;case 550:n=m.SN(s);break;case 33:n=m.TN(s);break;default:throw h.i.fa("corrupted_geometry")}return(m=h.cb.zh(n,m.Jc,m.Qg)).Jl(s.description),m},o.prototype.UN=function(s){var n=new h.Da;s=new w(this,s,n),s=h.Gh.local().V(s,this.Jc,this.Ub).next(),s=h.ip.nj(s,this.Jc,2);var l=new h.Dd;return l.scale(1/this.ec,1/this.ec),n.Oc(l),n=h.ip.nj(n,this.Jc,2),0<=this.Ka?h.Gh.local().V(n,s,this.Jc,this.Ub):h.kp.local().V(n,s,this.Jc,this.Ub)},o.prototype.VN=function(s){return s=new w(this,s,null),s=h.Gh.local().V(s,this.Jc,this.Ub).next(),h.ip.nj(s,this.Jc,2)},o.prototype.SN=function(s){return s=new C(this,s),s=h.Gh.local().V(s,this.Jc,this.Ub).next(),h.ip.nj(s,this.Jc,2)},o.prototype.TN=function(s){(s=s.D()).scale(this.ec);var n=new h.Da;return this.sy(s,!1,n),h.ip.nj(n,this.Jc,2)},o.prototype.xy=function(s,n,l,c,d,f){var m=s[0],b=s[s.length-1],x=m.y>b.y?m.y:b.y,$=h.F.q(this.Tb,this.kc,m.y<b.y?m.y:b.y);if(x=h.F.q(this.Tb,this.kc,x),.001<this.LA-($+n+this.rb)&&.001<this.LA+(x-n-this.rb))return!1;$=(n=l-1.570796326794897)-3.141592653589793,x=n+3.141592653589793;var E=(l=c+1.570796326794897)+3.141592653589793,O=[NaN],R=[NaN],k=[NaN],j=[NaN];if(c=!1,o.dJ(this.Tb,this.kc,this.rb,m,n,$,b,l,O,R),o.dJ(this.Tb,this.kc,this.rb,b,E,l,m,$,k,j),(l<O[0]&&O[0]<E||l<R[0]&&R[0]<E)&&(c=!0),c||($<k[0]&&k[0]<n||$<j[0]&&j[0]<n)&&(c=!0),!c&&d)return!1;for(var F=[],L=s.length-1;0<=L;L--)F.push(s[L]);return f.Oa(),f.Yk(null,0),L=[0],o.qy(this.Tb,this.kc,this.ec,this.rb,this.ze,s,n,l,d,L,f),o.Hr(this.Tb,this.kc,this.ec,this.rb,b,l,E,this.ao,d,L,f,O[0],R[0]),o.qy(this.Tb,this.kc,this.ec,this.rb,this.ze,F,E,x,d,L,f),o.Hr(this.Tb,this.kc,this.ec,this.rb,m,$,n,this.ao,d,L,f,k[0],j[0]),s=!1,d||(s=this.IE(this.ec,f)),c||s},o.prototype.sy=function(s,n,l){l.Oa(),l.Yk(null,0),o.Hr(this.Tb,this.kc,this.ec,this.rb,s,-this.ao,6.283185307179586,this.ao,n,[0],l,NaN,NaN),n||this.IE(this.ec,l)},o.prototype.IE=function(s,n){var l=this.vO(s,n);return s=this.wO(s,n),l||s},o.prototype.vO=function(s,n){var l=n.I(),c=!1,d=new h.l;if(n.A(d),!h.s.Y(d.H*s,1.570796326794897)&&!h.s.Y(d.G*s,-1.570796326794897))return!1;var f=new h.h;for(--l;0<=l;l--)n.D(l,f),(f.y==d.H&&h.s.Y(f.y*s,1.570796326794897)||f.y==d.G&&h.s.Y(f.y*s,-1.570796326794897))&&(c=!0,this.OI(f,l,n));return c},o.prototype.wO=function(s,n){var l=n.Na(0),c=n.Na(n.I()-1);return 3.141592653589793<Math.abs(l.x-c.x)*s?(this.VV(n),!0):this.uO(n)},o.prototype.uO=function(s){return 0>s.Ke()&&(this.UV(s),!0)},o.prototype.OI=function(s,n,l){var c=l.I(),d=0<n?n-1:c-1;if(c=l.Na(n<c-1?n+1:0),d=l.Na(d),!h.s.Y(c.y,s.y)&&!h.s.Y(c.x,s.x)){var f=new h.h;f.ma(c.x,s.y),l.Cb(n,f)}h.s.Y(d.y,s.y)||h.s.Y(d.x,s.x)||((c=new h.h).ma(d.x,s.y),l.wf(0,n,c))},o.prototype.VV=function(s){var n=new h.Da,l=new h.Da,c=new h.Dd,d=s.Na(0),f=s.Na(s.I()-1),m=new h.h;d.x>f.x?(f=this.zq,c.gg(-this.Js,0)):(f=-this.zq,c.gg(this.Js,0)),n.add(s,!1),s.Oa(),l.add(n,!1),l.Oc(c),d=new h.l,l.A(d),d.W((this.Js-d.R())/2,0),d.G=-this.zq,d.H=this.zq;for(var b=0;b<l.I();b++)l.D(b,m),n.wf(0,-1,m);for(l.Oc(c),b=0;b<l.I();b++)l.D(b,m),n.wf(0,-1,m);l=n.Na(0),c=n.Na(n.I()-1),m.ma(c.x,f),n.wf(0,-1,m),m.ma(.5*(c.x+l.x),f),n.wf(0,-1,m),m.ma(l.x,f),n.wf(0,-1,m),n=h.Hh.ks(n,this.Jc,2,!0,d.v),n=h.Hh.ks(n,this.Jc,2,!0,d.C),n=h.Ud.clip(n,d,this.Aq,NaN),s.add(n,!1)},o.prototype.UV=function(s){var n=new h.l;s.A(n),n.W((this.Js-n.R())/2,0),n.G=-this.zq,n.H=this.zq,s.Yk(null,0);var l=new h.h;l.ma(n.v,n.G),s.wf(1,-1,l),l.ma(n.v,n.H),s.wf(1,-1,l),l.ma(.5*(n.v+n.C),n.H),s.wf(1,-1,l),l.ma(n.C,n.H),s.wf(1,-1,l),l.ma(n.C,n.G),s.wf(1,-1,l),l.ma(.5*(n.v+n.C),n.G),s.wf(1,-1,l)},o.qy=function(s,n,l,c,d,f,m,b,x,$,E){var O=null;x||((O=new h.h).Rc(),0<E.I()&&(O.L(E.Na(E.I()-1)),O.scale(l)));var R=new h.ga(0),k=new h.ga(0),j=new h.ga(0),F=new h.h,L=new h.h,V=f[f.length-1];l=1/l;for(var B=0;B<f.length;B++){var W=f[B];if(B==0)var K=m;else B==f.length-1?K=b:(h.kb.wd(s,n,V.x,V.y,W.x,W.y,null,null,R,d),K=R.u-1.570796326794897);h.kb.yi(s,n,W.x,W.y,c,K,k,j),x?L.ma(k.u,j.u):(F.ma(k.u,j.u),o.gJ(W.x,F.x,O.x,$),L.ma($[0]+F.x,F.y),O.L(L)),L.scale(l),E.wf(0,-1,L)}},o.Hr=function(s,n,l,c,d,f,m,b,x,$,E,O,R){if(!(m-f<b)){var k=new h.ga(0),j=new h.ga(0),F=new h.h,L=new h.h,V=null;x||((V=new h.h).Rc(),0<E.I()&&(V.L(E.Na(E.I()-1)),V.scale(l)));var B=h.O.truncate(Math.ceil(f/b)),W=B++*b;for(W==f&&(W=B++*b),l=1/l;W<m+b&&(f<O&&O<W?(W=O,B--):f<R&&R<W&&(W=R,B--),!(W>=m));)h.kb.yi(s,n,d.x,d.y,c,W,k,j),x?L.ma(k.u,j.u):(F.ma(k.u,j.u),o.gJ(d.x,F.x,V.x,$),L.ma($[0]+F.x,F.y),V.L(L)),L.scale(l),E.wf(0,-1,L),f=W,W=B++*b}},o.dJ=function(s,n,l,c,d,f,m,b,x,$){var E=new h.h,O=new h.h,R=new h.ga(0),k=new h.ga(0);for(h.kb.yi(s,n,c.x,c.y,l,d,R,k),E.ma(R.u,k.u),h.kb.yi(s,n,c.x,c.y,l,f,R,k),O.ma(R.u,k.u),l=new h.ga(0),h.kb.Xy(s,n,m.x,m.y,E.x,E.y,l),x[0]=l.u,h.kb.Xy(s,n,m.x,m.y,O.x,O.y,l),$[0]=l.u;x[0]<=$[0];)x[0]+=6.283185307179586;for(;x[0]>$[0];)x[0]-=6.283185307179586;for(;x[0]>=b;)x[0]-=6.283185307179586,$[0]-=6.283185307179586;for(;x[0]<b;)x[0]+=6.283185307179586,$[0]+=6.283185307179586},o.gJ=function(s,n,l,c){if(isNaN(l)){for(;3.141592653589793<c[0]+n-s;)c[0]-=6.283185307179586;for(;3.141592653589793<s-(c[0]+n);)c[0]+=6.283185307179586}else 3.141592653589793<c[0]+n-l?c[0]-=6.283185307179586:3.141592653589793<l-(c[0]+n)&&(c[0]+=6.283185307179586)},o.KX=function(s,n){var l=s.getType(),c=h.aa.Hc(l)?s.da():l==550?s.I():1;if(c==1)return s;var d=new h.ia(0);d.resize(c);for(var f=[],m=new h.l,b=0;b<c;b++){if(d.write(b,b),h.aa.Hc(l)){s.Rj(b,m);var x=m.sf()}else x=s.Na(b);x=h.XK.$X(n,x),f[b]=x}for(d.Vd(0,d.size,function($,E){return f[$]<f[E]?-1:f[$]>f[E]?1:0}),n=s.Ia(),b=0;b<c;b++)m=d.read(b),h.aa.Hc(l)?n.addPath(s,m,!0):n.Fd(s,m,m+1);return n},o.prototype.yX=function(){var s=Math.min(3.141592653589793*this.Tb-this.rb,this.rb);s=Math.min(s,.39269908169872414*this.Tb);var n=new h.h;n.ma(0,10*this.ec);var l=45*this.ec,c=new h.ga(0),d=new h.ga(0),f=new h.ga(0),m=new h.ga(0),b=new h.ga(0),x=new h.ga(0),$=new h.ga(0),E=new h.ga(0),O=new h.h,R=new h.h,k=new h.h,j=new h.h;h.kb.yi(this.Tb,this.kc,n.x,n.y,s,0,c,d),O.ma(c.u,d.u),h.kb.yi(this.Tb,this.kc,n.x,n.y,s,l,f,m),R.ma(f.u,m.u),c=new h.ga(0),d=new h.ga(0);for(var F=new h.ga(0);h.kb.yi(this.Tb,this.kc,n.x,n.y,s,.5*(0+l),b,x),k.ma(b.u,x.u),h.kb.wd(this.Tb,this.kc,O.x,O.y,R.x,R.y,c,d,null,2),h.kb.oj(this.Tb,this.kc,O.x,O.y,.5*c.u,d.u,$,E,2),j.ma($.u,E.u),h.kb.wd(this.Tb,this.kc,k.x,k.y,j.x,j.y,F,null,null,2),!(F.u<=this.$n);)l*=.9,h.kb.yi(this.Tb,this.kc,n.x,n.y,s,l,f,m),R.ma(f.u,m.u);this.ao=6.283185307179586/Math.ceil(6.283185307179586/(l-0))},o.prototype.zX=function(){var s=Math.min(3.141592653589793*this.Tb-this.rb,this.rb);s=Math.min(s,.39269908169872414*this.Tb);var n=new h.h,l=new h.h;n.ma(0,10*this.ec),l.ma(10*this.ec,10*this.ec);var c=new h.ga(0),d=new h.ga(0),f=new h.ga(0);h.kb.wd(this.Tb,this.kc,n.x,n.y,l.x,l.y,f,c,d,this.ze);var m=new h.ga(0),b=new h.ga(0),x=new h.ga(0),$=new h.ga(0),E=new h.h,O=new h.ga(0),R=new h.ga(0),k=new h.ga(0),j=new h.ga(0),F=new h.ga(0),L=new h.ga(0),V=new h.ga(0),B=new h.ga(0),W=new h.ga(0),K=new h.h,re=new h.h,ae=new h.h,de=new h.h,ce=1;c=c.u,d=d.u+1.570796326794897,f=f.u,h.kb.yi(this.Tb,this.kc,n.x,n.y,s,c-1.570796326794897,R,k),K.ma(R.u,k.u),h.kb.yi(this.Tb,this.kc,l.x,l.y,s,d,j,F),re.ma(j.u,F.u),R=new h.ga(0),k=new h.ga(0),d=new h.ga(0);for(var Te=new h.ga(0);h.kb.oj(this.Tb,this.kc,n.x,n.y,.5*(0+ce)*f,c,m,b,this.ze),E.ma(m.u,b.u),h.kb.wd(this.Tb,this.kc,n.x,n.y,E.x,E.y,null,null,O,this.ze),h.kb.yi(this.Tb,this.kc,E.x,E.y,s,O.u+1.570796326794897,L,V),ae.ma(L.u,V.u),h.kb.wd(this.Tb,this.kc,K.x,K.y,re.x,re.y,R,k,null,2),h.kb.oj(this.Tb,this.kc,K.x,K.y,.5*R.u,k.u,B,W,2),de.ma(B.u,W.u),h.kb.wd(this.Tb,this.kc,ae.x,ae.y,de.x,de.y,d,null,null,2),!(d.u<=this.$n);)ce*=.9,h.kb.oj(this.Tb,this.kc,n.x,n.y,ce*f,c,x,$,this.ze),l.ma(x.u,$.u),h.kb.wd(this.Tb,this.kc,n.x,n.y,l.x,l.y,null,null,Te,this.ze),h.kb.yi(this.Tb,this.kc,l.x,l.y,s,Te.u+1.570796326794897,j,F),re.ma(j.u,F.u);1e5<(s=ce*f)&&(s=1e5),this.QA=s},o.prototype.xX=function(){var s=5e4<this.rb?100:1e4<this.rb?10:1;500>this.rb/s&&(s=this.rb/500),.01>s&&(s=.01),this.$n=s},o}();h.VK=u}(G||(G={})),function(h){var C=function(){function w(){}return w.Mf=function(u,o){var s=new h.h;s.L(o),u.push(s)},w.up=function(u,o){u.add(o.x),u.add(o.y)},w.hB=function(u){u.Bh(u.size-2)},w.oB=function(u,o){o.ma(u.get(u.size-2),u.get(u.size-1))},w.Qr=function(u,o,s,n,l,c){if(u==null)throw h.i.N();var d=u.getType();if(u.B()||h.aa.Rn(d))return u;var f=new w;f.Qg=o,f.Jc=h.cb.sc(o);var m=h.cb.vv(f.Jc);if(f.Ub=c,f.Tb=h.cb.ev(f.Jc),f.kc=m*(2-m),f.ec=f.Jc.Hd().ai,f.Aq=f.Jc.Kn(),f.Zs=f.Aq*f.ec,f.AA=n,f.zA=l,f.ze=s,d==197?(s=new h.Da(u.description)).ad(u,!1):h.aa.yd(d)?(s=new h.Ta(u.description)).oc(u,!0):s=u,f.ze!=4){if((o=f.Qg.Nb(f.Jc)==0?h.cb.zh(s,f.Qg,f.Jc):h.Hh.lj(s,f.Jc)).B())return o;o=w.pI(f.ec,o),o=f.Zy(o),o=h.ip.nj(o,f.Jc,f.ze),f=h.cb.zh(o,f.Jc,f.Qg)}else{if(h.Eg.Sb(o)==2?(u=h.cb.ml(),(o=h.Xj.local().V(s,u,o,c))==u&&(o=new h.Da,u.copyTo(o))):o=h.Hh.lj(s,f.Jc),o.B())return o;f=f.CX(o)}return f},w.pI=function(u,o){var s=new h.l;if(o.xc(s),3.141592653589793>s.R()*u)return o;var n=!1;s=o.Ga();for(var l=new h.h,c=new h.h;s.$a();)for(;s.Ha();){var d=s.ha();if(l.L(d.ac()),c.L(d.wc()),l.scale(u),c.scale(u),3.141592653589793<Math.abs(l.x-c.x)){var f=w.Lu(l,c);if(!f){n=!0;break}if(6.283185307179586<Math.abs(l.x-c.x)){n=!0;break}}}if(!n)return o;n=o.Ia();var m=1<o.description.Aa,b=new h.h,x=new h.h,$=new h.h,E=new h.h,O=new h.Sa;for(s.Zi();s.$a();)for(var R=NaN,k=[0];s.Ha();){if(d=s.ha(),l.L(d.ac()),c.L(d.wc()),l.scale(u),c.scale(u),isNaN(R)?(w.Wi(l.x,NaN,k),x.L(l)):x.L($),R=x.x,f=w.Lu(l,c)){if(6.283185307179586<c.x-l.x)for(;6.283185307179586<c.x-l.x;)c.x-=6.283185307179586;if(-6.283185307179586>c.x-l.x)for(;-6.283185307179586>c.x-l.x;)c.x+=6.283185307179586;w.Wi(c.x,NaN,k),$.L(c)}else b.L(c),w.AU(b),w.Wi(b.x,R,k),$.ma(k[0]+b.x,b.y);.5>Math.abs($.x-c.x)&&$.L(c),m?(d.Tw(0,O),E.L(x),E.scale(1/u),O.Cb(E),(f=s.vm())?n.nf(O):n.lineTo(O),s.Qn()&&!o.dc(s.gb)&&(d.Tw(1,O),E.L($),E.scale(1/u),O.Cb(E),n.lineTo(O))):((f=s.vm())&&n.Hz(null,0),d=n.da()-1,E.L(x),E.scale(1/u),n.wf(d,-1,E),s.Qn()&&!o.dc(s.gb)&&(E.L($),E.scale(1/u),n.wf(d,-1,E)))}return n},w.tF=function(u,o,s,n,l,c,d,f,m,b,x,$){var E=new h.h,O=new h.h,R=0<n.compare(l);w.fJ(R,n,l,E,O),w.uF(u,o,s,E,O,c,NaN,d,f,m,b,null,x,$),R&&w.fC(m,b,null,x)},w.prototype.Zy=function(u){var o=u.Ia(),s=u.Ga(),n=[],l=null,c=null,d=1<u.description.Aa;d&&(l=new h.be(0),c=new h.ig);for(var f=[0],m=new h.h,b=new h.h,x=new h.h,$=new h.h;s.$a();)for(f[0]=0;s.Ha();){var E=s.ha();m.L(E.ac()),b.L(E.wc()),m.scale(this.ec),b.scale(this.ec);var O=0<m.compare(b);w.fJ(O,m,b,x,$),n.length=0,l!=null&&l.Bh(0),0<this.AA?w.uF(this.Tb,this.kc,this.ze,x,$,this.AA,this.zA,this.Zs,null,null,null,d?l:null,n,f):w.aR(this.Tb,this.kc,this.ze,x,$,this.zA,this.Zs,d?l:null,n,f),O&&w.fC(null,null,d?l:null,n),n[0].L(E.ac()),n[n.length-1].L(E.wc());for(var R=1;R<n.length-1;R++)n[R].scale(1/this.ec);d?(O=w.eJ(O,E,c),w.TD(s.vm(),s.Qn()&&!u.dc(s.gb),E,O,l,n,o)):w.SD(s.vm(),s.Qn()&&!u.dc(s.gb),n,o)}return o},w.prototype.CX=function(u){var o=u.Ia(),s=u.Ga(),n=[],l=null,c=new h.ig,d=1<u.description.Aa;for(d&&(l=new h.be(0));s.$a();)for(;s.Ha();){var f=s.ha(),m=f.ac(),b=f.wc();m=0<m.compare(b),b=w.eJ(m,f,c),n.length=0,l!=null&&l.Bh(0),w.BX(this.Tb,this.kc,this.ec,b,this.Qg,this.AA,this.zA,d?l:null,n),m&&w.fC(null,null,d?l:null,n),d?w.TD(s.vm(),s.Qn()&&!u.dc(s.gb),f,b,l,n,o):w.SD(s.vm(),s.Qn()&&!u.dc(s.gb),n,o)}return o},w.SD=function(u,o,s,n){u&&n.Hz(null,0),u=n.da()-1;var l=s.slice(0);n.qG(u,l,l.length-1),o&&n.wf(u,-1,s[s.length-1])},w.TD=function(u,o,s,n,l,c,d){var f=new h.Sa;if(s.To(f),u?d.nf(f):d.lineTo(f),2<c.length){u=n.Qb();for(var m=1;m<c.length-1;m++){var b=n.NG(l.get(m)*u);n.Tw(b,f),f.Cb(c[m]),d.lineTo(f)}}o&&(s.Po(f),d.lineTo(f))},w.uF=function(u,o,s,n,l,c,d,f,m,b,x,$,E,O){var R=new h.ga(0),k=new h.ga(0),j=new h.ga(0);h.kb.wd(u,o,n.x,n.y,l.x,l.y,j,R,k,s),j=j.u;var F=R=R.u;0>F&&(F+=6.283185307179586),0>(k=k.u)&&(k+=6.283185307179586),m!=null&&(m[0]=j),b!=null&&(b[0]=F),x!=null&&(x[0]=k),b=m=NaN,$!=null&&(m=((b=h.F.Ah(u,o))-(x=h.F.q(u,o,n.y)))/j,b=(b+x)/j),x=w.Mu(n,l),k=w.Ku(n,l),F=x||k;var L=w.FE(n,l,f),V=new h.ga(0),B=new h.ga(0),W=new h.h,K=new h.h,re=new h.h;w.Wi(n.x,NaN,O);var ae=[O[0]];if(j<=c)w.Mf(E,n),w.Wi(l.x,NaN,O),$!=null&&$.add(0),F?(x&&w.kB(n,l,$,E),k&&w.iB(n,l,$,E)):L?w.jB(n,l,R,m,b,$,E):0<d&&(K.ma(n.x-ae[0],n.y),W.ma(l.x-O[0],l.y),w.Yy(u,o,s,n,j,R,K,W,0,1,d,$,E,ae)),w.Mf(E,l);else{var de=j/((c=1+h.O.truncate(Math.ceil(j/c)))-1),ce=new h.h,Te=0;w.Mf(E,n),ce.L(n),K.ma(n.x-O[0],n.y),$!=null&&$.add(0);for(var le=1;le<c;le++){if(le<c-1){h.kb.oj(u,o,n.x,n.y,le*de,R,V,B,s),W.ma(V.u,B.u),w.Wi(W.x,ce.x,O),re.ma(O[0]+W.x,W.y);var He=le/(c-1)}else w.Wi(l.x,NaN,O),W.ma(l.x-O[0],l.y),re.L(l),He=1;F?(le==1&&x&&w.kB(n,re,$,E),le==c-1&&k&&w.iB(ce,l,$,E)):L?w.EE(ce,re,f)&&(n.x<l.x?ce.x>re.x&&(O[0]+=6.283185307179586,re.ma(O[0]+W.x,W.y)):ce.x<re.x&&(O[0]-=6.283185307179586,re.ma(O[0]+W.x,W.y)),w.jB(ce,re,R,m,b,$,E)):0<d&&w.Yy(u,o,s,n,j,R,K,W,Te,He,d,$,E,ae),w.Mf(E,re),$!=null&&$.add(He),ce.L(re),K.L(W),ae[0]=O[0],Te=He}}},w.aR=function(u,o,s,n,l,c,d,f,m,b){var x=new h.ga(0),$=new h.ga(0),E=new h.ga(0);h.kb.wd(u,o,n.x,n.y,l.x,l.y,E,x,$,s),$=E.u,x=x.u;var O=E=NaN;if(f!=null){O=h.F.Ah(u,o);var R=h.F.q(u,o,n.y);E=(O-R)/$,O=(O+R)/$}R=w.Mu(n,l);var k=w.Ku(n,l),j=R||k;d=w.FE(n,l,d);var F=w.Lu(n,l);F=j||d||F,w.Wi(n.x,NaN,b);var L=new h.h;w.Mf(m,n),L.L(n),f!=null&&f.add(0),F?(j?(R&&w.kB(n,l,f,m),k&&w.iB(n,l,f,m)):d&&w.jB(n,l,x,E,O,f,m),w.Wi(l.x,NaN,b),w.Mf(m,l)):$<=c?(w.Wi(l.x,NaN,b),w.Mf(m,l)):(E=new h.h,d=new h.h,E.L(n),d.L(l),E.x-=b[0],d.x-=b[0],-3.141592653589793>d.x?d.x+=6.283185307179586:3.141592653589793<d.x&&(d.x-=6.283185307179586),w.Yy(u,o,s,n,$,x,E,d,0,1,c,f,m,b),w.Mf(m,l),w.Wi(l.x,NaN,b)),f!=null&&f.add(1)},w.Yy=function(u,o,s,n,l,c,d,f,m,b,x,$,E,O){var R=new h.h,k=new h.h;R.ma(d.x+O[0],d.y),new h.ga(0),new h.ga(0),new h.ga(0),new h.ga(0);var j=new h.ga(0),F=new h.ga(0),L=new h.ga(0),V=new h.h,B=new h.h,W=new h.h,K=new h.h;V.L(d),B.L(f),d=new h.be(0),f=new h.be(0),w.up(d,B),f.add(b);var re=new h.h,ae=new h.yb,de=[];for(w.YJ(4,de);0<d.size;){for(var ce,Te=!1,le=NaN,He=0;3>He;He++)if(ce=de[He]*b+(1-de[He])*m,h.kb.oj(u,o,n.x,n.y,ce*l,c,j,F,s),W.ma(j.u,F.u),He==0&&(le=ce,K.L(W)),w.WW(V,W,B,ae),ae.hc(ae.fe(W,!0),re),h.kb.wd(u,o,W.x,W.y,re.x,re.y,L,null,null,2),L.u>x){Te=!0;break}Te?(B.L(K),b=le,w.up(d,B),f.add(b)):(w.hB(d),f.En(f.size-1,1,f.size-1),0<d.size&&(w.Wi(B.x,R.x,O),k.ma(O[0]+B.x,B.y),w.Mf(E,k),R.L(k),$!=null&&$.add(b),V.L(B),m=b,w.oB(d,B),b=f.get(f.size-1)))}},w.BX=function(u,o,s,n,l,c,d,f,m){var b=new h.h,x=new h.h,$=new h.h,E=new h.h,O=new h.h,R=new h.h,k=new h.h,j=new h.h,F=new h.h,L=new h.h,V=new h.ga(0),B=new h.ga(0),W=new h.h,K=[[],[]],re=h.Eg.Sb(l)==1;l=l.Xd(0);var ae=n.ac(),de=n.wc();re?(R.ma(ae.x*s,ae.y*s),k.ma(de.x*s,de.y*s)):(K[0][0]=ae.x,K[0][1]=ae.y,K[1][0]=de.x,K[1][1]=de.y,h.cb.vt(),R.x=K[0][0]*s,R.y=K[0][1]*s,k.x=K[1][0]*s,k.y=K[1][1]*s);var ce=0,Te=0,le=1,He=n.Pn();b.L(ae),x.L(de),de=new h.be(0);var Ue=new h.be(0),lt=new h.be(0);w.up(de,x),w.up(Ue,k),lt.add(le),w.Mf(m,b),f!=null&&f.add(Te);var Mt=[],Qt=0<d?He?5:3:He?5:1;w.YJ(Qt,Mt);for(var It=new h.ga(0),ut=new h.ga(0),We=new h.ga(0),Qe=new h.ga(0),Dt=new h.ga(0),Ot=new h.ga(0),es=new h.ga(0);0<Ue.size;){var nt=!1,Wi=NaN;for(h.kb.wd(u,o,R.x,R.y,k.x,k.y,It,ut,null,2),ae=0;ae<Qt&&!(ae==0&&(!He&&0>=d&&It.u<=c&&3.141592653589793>Math.abs(R.x-k.x)||n.Ux(Te,le)<=l));ae++){var gt=Mt[ae]*le+(1-Mt[ae])*Te;if(n.hc(gt,$),re?j.ma($.x*s,$.y*s):(K[0][0]=$.x,K[0][1]=$.y,h.cb.vt(),j.x=K[0][0]*s,j.y=K[0][1]*s),ae==0&&(Wi=gt,O.L($),L.L(j),0<c&&(It.u>c||3.141592653589793<=Math.abs(R.x-k.x)))){nt=!0;break}if(He&&0<c){if(h.kb.wd(u,o,R.x,R.y,j.x,j.y,We,null,null,2),We.u>c||3.141592653589793<=Math.abs(R.x-j.x)){nt=!0;break}}else if(0<d){if(He?(E.NS(b,x,Mt[ae]),re?F.ma(E.x*s,E.y*s):(K[0][0]=E.x,K[0][1]=E.y,h.cb.vt(),F.x=K[0][0]*s,F.y=K[0][1]*s)):(E.L($),F.L(j)),h.kb.wd(u,o,R.x,R.y,F.x,F.y,Qe,null,null,2),!(Qe.u<=It.u)){nt=!0;break}if(h.kb.oj(u,o,R.x,R.y,Qe.u,ut.u,V,B,2),W.ma(V.u,B.u),h.kb.wd(u,o,W.x,W.y,j.x,j.y,Dt,null,null,2),Dt.u>d){nt=!0;break}if(He){if(h.kb.wd(u,o,W.x,W.y,F.x,F.y,Ot,null,null,2),Ot.u>d){nt=!0;break}if(h.kb.wd(u,o,F.x,F.y,j.x,j.y,es,null,null,2),es.u>d){nt=!0;break}}}}nt?(x.L(O),k.L(L),le=Wi,w.up(de,x),w.up(Ue,k),lt.add(le)):(w.hB(de),w.hB(Ue),lt.En(lt.size-1,1,lt.size-1),w.Mf(m,x),ce+=It.u,f!=null&&f.add(ce),0<Ue.size&&(b.L(x),R.L(k),Te=le,w.oB(de,x),w.oB(Ue,k),le=lt.get(lt.size-1)))}if(f!=null)for(u=1/ce,ae=0;ae<f.size;ae++)f.write(ae,f.read(ae)*u)},w.fC=function(u,o,s,n){n.reverse(),s!=null&&s.ni(0,s.size,1),s=u!=null?u[0]:NaN,n=o!=null?o[0]:NaN,u!=null&&(u[0]=n),o!=null&&(o[0]=s)},w.fJ=function(u,o,s,n,l){u?(n.L(s),l.L(o)):(n.L(o),l.L(s))},w.eJ=function(u,o,s){return u?(s.create(o.getType()),o.copyTo(s.get()),s.get().reverse(),s.get()):o},w.Wi=function(u,o,s){if(isNaN(o)){for(;3.141592653589793<s[0]-u;)s[0]-=6.283185307179586;for(;3.141592653589793<u-s[0];)s[0]+=6.283185307179586}else 3.141592653589793<s[0]+u-o?s[0]-=6.283185307179586:3.141592653589793<o-(s[0]+u)&&(s[0]+=6.283185307179586)},w.WW=function(u,o,s,n){3.141592653589793>Math.abs(o.x-u.x)?(n.Dc(u),3.141592653589793<=s.x-u.x?n.Ql(s.x-6.283185307179586,s.y):3.141592653589793<=u.x-s.x?n.Ql(s.x+6.283185307179586,s.y):n.Ql(s.x,s.y)):(n.Dc(s),3.141592653589793<=u.x-s.x?n.Ql(u.x-6.283185307179586,u.y):3.141592653589793<=s.x-u.x?n.Ql(u.x+6.283185307179586,u.y):n.Ql(u.x,u.y))},w.YJ=function(u,o){for(var s=0;s<u;s++){var n=Math.ceil(s/2)/(u+1);s%2!=0&&(n=-n),o[s]=.5+n}},w.Mu=function(u,o){return!!(h.s.Y(u.y,1.570796326794897)&&!h.s.Y(o.y,1.570796326794897)||h.s.Y(u.y,-1.570796326794897)&&!h.s.Y(o.y,-1.570796326794897))},w.Ku=function(u,o){return!!(h.s.Y(o.y,1.570796326794897)&&!h.s.Y(u.y,1.570796326794897)||h.s.Y(o.y,-1.570796326794897)&&!h.s.Y(u.y,-1.570796326794897))},w.FE=function(u,o,s){return!(!w.EE(u,o,s)||h.s.Y(u.y,1.570796326794897)||h.s.Y(u.y,-1.570796326794897)||h.s.Y(o.y,1.570796326794897)||h.s.Y(o.y,-1.570796326794897))},w.EE=function(u,o,s){return Math.abs(Math.abs(u.x-o.x)-3.141592653589793)<=s},w.Lu=function(u,o){return!!(h.s.Y(u.y,1.570796326794897)&&h.s.Y(o.y,1.570796326794897)||h.s.Y(u.y,-1.570796326794897)&&h.s.Y(o.y,-1.570796326794897))},w.kB=function(u,o,s,n){if(0<u.y){var l=new h.h;l.ma(o.x,1.570796326794897)}else(l=new h.h).ma(o.x,-1.570796326794897);h.s.Y(u.x,l.x)||h.s.Y(o.y,l.y)||(w.Mf(n,l),s!=null&&s.add(0))},w.iB=function(u,o,s,n){if(0<o.y){var l=new h.h;l.ma(u.x,1.570796326794897)}else(l=new h.h).ma(u.x,-1.570796326794897);h.s.Y(o.x,l.x)||h.s.Y(u.y,l.y)||(w.Mf(n,l),s!=null&&s.add(1))},w.jB=function(u,o,s,n,l,c,d){h.s.Cd(s)?(0<1.570796326794897-u.y&&((s=new h.h).ma(u.x,1.570796326794897),w.Mf(d,s),c!=null&&c.add(n)),0<1.570796326794897-o.y&&((s=new h.h).ma(o.x,1.570796326794897),w.Mf(d,s),c!=null&&c.add(n))):(0<1.570796326794897+u.y&&((s=new h.h).ma(u.x,-1.570796326794897),w.Mf(d,s),c!=null&&c.add(l)),0<1.570796326794897+o.y&&((s=new h.h).ma(o.x,-1.570796326794897),w.Mf(d,s),c!=null&&c.add(l)))},w.AU=function(u){if(-3.141592653589793>u.x)for(;-3.141592653589793>u.x;)u.x+=6.283185307179586;if(3.141592653589793<u.x)for(;3.141592653589793<u.x;)u.x-=6.283185307179586},w}();h.cj=C}(G||(G={})),function(h){h.ip=function(){function C(){}return C.nj=function(w,u,o){if(w==null||u==null||!h.cb.Wc(u))throw h.i.N();if(w.B())return w;var s=w,n=s.getType();if(h.aa.Hc(n)){s=h.Hh.lj(w,u),w=new h.l,s.A(w),n=h.ta.Wd(u,w,!1);for(var l=h.cb.gh(u),c=Math.floor((w.v-l.v)/l.R())*l.R()+l.v;c<w.C;)c>w.v+n&&c<w.C-n&&(s=h.Hh.ks(s,u,o,!0,c)),c+=l.R()}else{if(n==197)return(w=new h.Da(s.description)).ad(s,!1),C.nj(w,u,o);if(h.aa.yd(n))return(w=new h.Ta(s.description)).oc(s,!0),C.nj(w,u,o)}return C.Uy(s,u)},C.Uy=function(w,u){if(w==null||u==null||!h.cb.Wc(u))throw h.i.N();if(w.B())return w;var o=w.getType();return o==197?(o=new h.Da(w.description)).ad(w,!1):h.aa.yd(o)?(o=new h.Ta(w.description)).oc(w,!0):o=w,(o=h.Hh.lj(o,u)).B()?o:h.Eg.Sb(u)==1?h.Hh.Fn(o,u,0,o!=w,0):C.NQ(o,u,o!=w)},C.NQ=function(w,u,o){if(!h.cb.Wc(u))throw h.i.N();if(w.B())return w;var s=h.cb.bf(u),n=-180*s;return s*=360,h.Eg.Sb(u)==2&&(s=(n=h.cb.gh(u)).C,s-=n=n.v),h.Hh.Hp(w,n,s,u,o,0,!0)},C}()}(G||(G={})),function(h){h.BY=function(){function C(){}return C.P=function(w){return 0>w?-w:w},C.Mb=function(w,u){return 0<=u?C.P(w):-C.P(w)},C.Y=function(w,u){return w==u||C.P(w-u)<=C.JC*(1+(C.P(w)+C.P(u))/2)},C.Cd=function(w){return w==0||C.P(w)<=C.JC},C.Ah=function(w,u){var o=(u=(1-(u=Math.sqrt(1-u)))/(1+u))*u;return w/(1+u)*(1+o*(.25+o*(.015625+1/256*o)))*C.EL},C.EL=1.5707963267948966,C.JC=3552713678800501e-30,C}()}(G||(G={})),function(h){var C=function(u){this.Wf=u,this.Kk=this.Wf.getCode(),0>this.Kk&&(this.Kk=0)};h.DY=C;var w=function(){function u(o){o===void 0&&(o=null),this.Cj=null,this.Un=!1,o!==null&&(this.Cj=new C(o))}return u.prototype.Ec=function(){return this.Cj!=null?this.Cj.Kk:0},u.prototype.Of=function(){var o=new u;return this.copyTo(o),o},u.prototype.copyTo=function(o){o.Cj=this.Cj,o.Un=this.Un},u.prototype.Qz=function(){this.Un=!this.Un},u.prototype.qm=function(){return this.Cj!=null?this.Cj.Wf:null},u.prototype.LJ=function(o){if(0>=o)throw h.i.N();if(o!=this.Ec()){if((o=h.pf.geogtran(o))==null)throw h.i.N("Geogtran not found.");this.Cj=new C(o)}},u.prototype.Bz=function(){return this.Cj==null?null:this.Cj.Wf.toString()},u.prototype.tX=function(o){if(o==null)throw h.i.N();var s=null;try{s=h.pf.fromString(h.Sc.PE_TYPE_GEOGTRAN,o)}catch{throw h.i.N()}this.Cj=new C(s)},u.prototype.Nb=function(o){return o==this||!(!(o instanceof u)||(0>=this.Ec()||this.Ec()!=o.Ec())&&!this.qm().isEqual(o.qm()))&&this.Un==o.Un},u.prototype.toString=function(){var o="GeographicTransformation: "+this.Bz();return 200<o.length?o.substring(0,197)+"... ("+o.length.toString()+" characters)":o},u.create=function(o,s){var n=new u;return n.LJ(o),s&&n.Qz(),n},u.uP=function(o,s){var n=new u;return n.tX(o),s&&n.Qz(),n},u}();h.Dx=w}(G||(G={})),function(h){var C=function(){function u(){}return u.construct=function(o,s,n,l){var c=new u;return c.hw=o,c.iw=s,c.QY=n,c.RY=l,c},u.Ey=function(o,s){return o.hw==s.hw?o.iw==s.iw?0:o.iw<s.iw?-1:1:o.hw<s.hw?-1:1},u}(),w=function(){function u(){this.yT=[],this.zT=[],this.qp()}return u.kz=function(){return u.jK==null&&(u.jK=new u),u.jK},u.prototype.qp=function(){this.iD(this.yT),this.iD(this.zT)},u.prototype.iD=function(o){try{var s=[];s=s.sort(C.Ey);for(var n=0;n<s.length;n++)o.push(s[n])}catch{}},u}();h.CY=w}(G||(G={})),function(h){var C=function(){function w(){}return w.prototype.yD=function(u){this.Fk=u},w.prototype.WM=function(u){this.Fb=u},w.prototype.xD=function(u){this.zo=u},w.CE=function(u){return!(u.B()||u.getType()!=1607&&u.getType()!=1736)},w.AE=function(u){return!(u.B()||u.getType()!=1607&&u.getType()!=1736||20>u.I())},w.BE=function(u){return!(u.B()||u.getType()!=1607&&u.getType()!=1736||20>u.I())},w}();h.Uk=C}(G||(G={})),function(h){h.$b=function(){function C(){}return C.TT=function(w){var u=new h.Da;return u.sx(w.es(),w.gs()),u.yj(w.es(),w.fs()),u.yj(w.ds(),w.fs()),u.yj(w.ds(),w.gs()),u},C.zh=function(w,u){return w===null?null:h.Hx.local().V(w,u,null)},C.jY=function(w,u){var o=h.Gh.local();return w=new h.Zc(w),o.V(w,u,null).next()},C.im=function(w,u,o){return h.kp.local().V(w,u,o,null)},C.ep=function(w,u,o){return h.Kx.local().V(w,u,o,null)},C.VX=function(w,u,o){var s=h.Kx.local();for(w=new h.Zc(w),u=new h.Zc(u),o=s.V(w,u,o,null),s=[];(u=o.next())!=null;)s.push(u);return s},C.Nb=function(w,u,o){return h.dj.local().V(3,w,u,o,null)},C.TP=function(w,u,o){return h.dj.local().V(4,w,u,o,null)},C.RS=function(w,u,o){var s=h.Xj.local();for(w=new h.Zc(w),u=new h.Zc(u),o=s.V(w,u,o,null),s=[];(u=o.next())!=null;)s.push(u);return s},C.QP=function(w,u,o){var s=h.kp.local();for(w=new h.Zc(w),u=new h.Zc(u),o=s.V(w,u,o,null),s=[];(u=o.next())!=null;)s.push(u);return s},C.Ea=function(w,u,o){return h.Xj.local().V(w,u,o,null)},C.QS=function(w,u,o){if((w=h.Xj.local().V(w,u,o,null,1))===null)return[];if(w.getType()===550){for(u=[],o=0;o<w.wa;o++)u.push(w.KR(o));return u}return w.getType()===33?[w]:[]},C.qY=function(w,u,o){return h.dj.local().V(2,w,u,o,null)},C.contains=function(w,u,o){return h.dj.local().V(1,w,u,o,null)},C.BP=function(w,u,o){return h.dj.local().V(16,w,u,o,null)},C.touches=function(w,u,o){return h.dj.local().V(8,w,u,o,null)},C.DU=function(w,u,o){return h.dj.local().V(32,w,u,o,null)},C.TS=function(w,u,o){return h.dj.local().V(1073741824,w,u,o,null)},C.yB=function(w,u,o,s){return h.zL.local().V(w,u,o,s,null)},C.tb=function(w,u,o,s){var n=null;if(o!=null){if(n=o.Hd(),s!=null&&n.Ec()!=s.Ec()&&n.od!=s.od)throw h.i.Xk()}else if(s!=null)throw h.i.N();return w=h.rL.local().V(w,u,null),n!==null&&s!==null&&(w=h.Tc.Nh(w,n,s)),w},C.clip=function(w,u,o){return h.kL.local().V(w,h.l.construct(u.es(),u.gs(),u.ds(),u.fs()),o,null)},C.dl=function(w,u,o){if(w==null||u==null)return null;for(w=h.mL.local().V(!0,w,u,o,null),u=[];(o=w.next())!=null;)o.B()||u.push(o);return u.slice(0)},C.MN=function(w,u,o,s,n,l,c,d){if(n===!0)return C.NN(w,u,o,s,l,c,d);if(n=o,u!=null){if(c=u.Hd(),s!=null&&c.Ec()!=s.Ec()){if(c.od!=s.od)throw h.i.Xk();n=[],h.Tc.XE(o,o.length,s,c,n)}}else if(s!=null)throw h.i.N();if(o=h.AC.local(),l){for(w=new h.Zc(w),u=o.V(w,u,n,l,null),w=[];(l=u.next())!=null;)w.push(l);l=w.slice(0)}else for(l=[],s=0;s<w.length;s++)l[s]=o.V(w[s],u,n[s],null);return l},C.NN=function(w,u,o,s,n,l,c){if(u===null||(s==null&&(s=u.Ec()!==4326?u.Hd():h.Tc.Zg(9001)),s.od!==0))throw h.i.N();if(h.Tc.XE(o,o.length,s,h.Tc.Zg(9001),o),s=h.FC.local(),n){for(w=new h.Zc(w),u=s.V(w,u,l,o,c,!1,n,null),o=[];(l=u.next())!=null;)o.push(l);n=o.slice(0)}else{n=[];for(var d=0;d<w.length;d++)n[d]=s.V(w[d],u,l,o[d],c,!1,null)}return n},C.buffer=function(w,u,o,s,n,l,c){var d=o;if(n===!1){if(u!=null){if(n=u.Hd(),s!=null&&n.Ec()!=s.Ec()){if(n.od!=s.od)throw h.i.Xk();d=h.Tc.Nh(o,s,n)}}else if(s!=null)throw h.i.N();w=h.AC.local().V(w,u,d,null)}else{if(u===null||(s==null&&(s=u.Ec()!==4326?u.Hd():h.Tc.Zg(9001)),s.od!==0))throw h.i.N();d=h.Tc.Nh(o,s,h.Tc.Zg(9001)),w=h.FC.local().V(w,u,l,d,c,!1,null)}return w},C.BU=function(w,u,o,s,n,l,c){if(u!=null){var d=u.Hd();if(c!=null&&d.Ec()!=c.Ec()){if(d.od!=c.od)throw h.i.Xk();o=h.Tc.Nh(o,c,d)}}else if(c!=null)throw h.i.N();for(w=new h.Zc(w),u=h.IC.local().V(w,u,o,s,n,l,null),o=[];(s=u.next())!=null;)o.push(s);return o.slice(0)},C.offset=function(w,u,o,s,n,l,c){if(u!=null){var d=u.Hd();if(c!=null&&d.Ec()!=c.Ec()){if(d.od!=c.od)throw h.i.Xk();o=h.Tc.Nh(o,c,d)}}else if(c!=null)throw h.i.N();return h.IC.local().V(w,u,o,s,n,l,null)},C.iP=function(w){return h.CC.local().V(w,null)},C.jP=function(w,u){var o=h.CC.local();for(w=new h.Zc(w),u=o.V(w,u,null),o=[];(w=u.next())!=null;)o.push(w);return o},C.nz=function(w,u,o){return h.Ix.local().nz(w,u,o)},C.oz=function(w,u){return h.Ix.local().oz(w,u)},C.pz=function(w,u,o,s){return h.Ix.local().pz(w,u,o,s)},C.eC=function(w,u){return h.Yl.local().V(w,u,!1,null)},C.dT=function(w,u){return h.Yl.local().rs(w,u,null)},C.QQ=function(w,u,o,s,n){var l=h.EC.local();if(u!=null){if(u=u.Hd(),n!=null&&u.Ec()!=n.Ec()){if(u.od!=n.od)throw h.i.Xk();o=h.Tc.Nh(o,n,u)}}else if(n!=null)throw h.i.N();return l.V(w,o,s,null)},C.Qr=function(w,u,o,s){var n=h.Xl.local();if(u!=null){if(u=u.Hd(),s!=null&&u.Ec()!=s.Ec()){if(u.od!=s.od)throw h.i.Xk();o=h.Tc.Nh(o,s,u)}}else if(s!=null)throw h.i.N();return n.V(w,o,null)},C.Wy=function(w,u,o,s,n){n===void 0&&(n=0);var l=h.tL.local();if(n==4||n!==0)throw h.i.Ie();if(s!==null){if(s.od!==0)throw h.i.N("Unit must be a linear unit type");o=h.Tc.Nh(o,s,h.Tc.Zg(9001))}return l.V(w,o,u,n,null)},C.WQ=function(w,u,o,s){if(w===null)return 0;if(s==4||s!==0)throw h.i.Ie();if(w.getType()==197)w=C.TT(w);else if(w.getType()!=1736)return 0;if(s=h.cb.sc(u),w=h.cb.zh(w,u,s),w=h.UK.XQ([w])[0],o!==null){if(o.od!==2)throw h.i.N("Unit must be a area unit type");w=h.Tc.Nh(w,h.Tc.Zg(109404),o)}return w},C.ZQ=function(w,u,o,s){if(w=h.vL.local().V(w,u,s,null),o!==null){if(o.od!==0)throw h.i.N("Unit must be a linear unit type");w=h.Tc.Nh(w,h.Tc.Zg(9001),o)}return w},C.JU=function(w,u,o){if(w===null)return 0;var s=null;if(u!=null){if((s=u.Hd()).od==0&&(s=h.Tc.aG(s))==null&&o!==null)throw h.i.N();if(o!=null&&s.Ec()!=o.Ec()&&s.od!=o.od)throw h.i.Xk()}else if(o!=null)throw h.i.N();return w.getType()==1736||w.getType()==197?(w=w.Ke(),o!==null?h.Tc.Nh(w,s,o):w):0},C.KU=function(w,u,o){if(w===null||w.B()||1>w.Db())return 0;var s=null;if(u!=null){if(s=u.Hd(),o!=null&&s.Ec()!=o.Ec()&&s.od!=o.od)throw h.i.Xk()}else if(o!=null)throw h.i.N();w.getType()==1736||w.getType()==197?u=w.mg():h.aa.yd(w.getType())?(u=new h.Ta(w.description)).oc(w,!0):u=w,w=0,u=u.Ga();for(var n=new h.h,l=new h.h;u.$a();)for(;u.Ha();){var c=u.ha();c.Yp(n),c.Tr(l),w+=h.h.tb(n,l)}return s!==null&&o!==null&&(w=h.Tc.Nh(w,s,o)),w},C.fP=function(w){return w.points!==void 0?C.mS(w,w.hasZ!==void 0&&w.hasZ,w.hasM!==void 0&&w.hasM):w.rings!==void 0?C.lG(w.rings,w.hasZ!==void 0&&w.hasZ,w.hasM!==void 0&&w.hasM,"P"):w.paths!==void 0?C.lG(w.paths,w.hasZ!==void 0&&w.hasZ,w.hasM!==void 0&&w.hasM,"L"):w.x!==void 0?C.nS(w):w.xmin!==void 0?C.lS(w):null},C.nS=function(w){if(w.x==null||w.x=="NaN")return new h.Sa;var u=new h.Sa(w.x,w.y);return w.z!==void 0&&w.z!==null&&u.wX(w.z),w.m!==void 0&&w.m!==null&&u.hX(w.m),u},C.lS=function(w){if(w.xmin==null||w.xmin=="NaN")return new h.Fh;var u=new h.Fh(w.xmin,w.ymin,w.xmax,w.ymax);return w.zmin!==void 0&&w.zmin!==null&&u.setInterval(1,0,w.zmin,w.zmax),w.mmin!==void 0&&w.mmin!==null&&u.setInterval(2,0,w.mmin,w.mmax),u},C.mS=function(w,u,o){var s=0,n=new h.de,l=3*w.points.length;l%2!=0&&l++,2>l&&(l=2);var c=h.O.truncate(3*w.points.length/2);4>c?c=4:16>c&&(c=16),l=h.Yc.Dn(l,0);var d=h.Yc.Dn(c);c=h.Yc.Dn(c);for(var f=0;f<w.points.length;f++)l.write(2*f,w.points[f][0]),l.write(2*f+1,w.points[f][1]),d.write(f,u||o?w.points[f][2]:NaN),c.write(f,o&&u?w.points[f][3]:NaN),s++;return s!=0&&(n.resize(s),n.hn(0,l)),u&&(n.re(1),n.hn(1,d)),o&&(n.re(2),n.hn(2,u==0?d:c)),n.Pc(16777215),n},C.lG=function(w,u,o,s){var n=0,l=2;if(s=="P"){var c=new h.Da;n=1,l=3}else c=new h.Ta;for(var d=h.Yc.Oh(0),f=h.Yc.Mr(0),m=0,b=0,x=[],$=[],E=0;E<w.length;E++){var O=w[E].length;if(x[E]=!1,s==="P"&&w[E][0][0]===w[E][w[E].length-1][0]&&w[E][0][1]===w[E][w[E].length-1][1]){var R=o==0||w[E][0][3]===w[E][w[E].length-1][3]||w[E][0][3]===void 0&&w[E][w[E].length-1][3]===void 0;(u==0||w[E][0][2]===w[E][w[E].length-1][2]||w[E][0][2]===void 0&&w[E][w[E].length-1][2]===void 0)&&R&&(x[E]=!0,--O)}O>=l?($[E]=!1,b+=1,d.add(m),f.add(n),m+=O):$[E]=!0}for((s=3*m)%2!=0&&s++,2>s&&(s=2),4>(E=h.O.truncate(3*m/2))?E=4:16>E&&(E=16),s=h.Yc.Dn(s,0),n=h.Yc.Dn(E),l=h.Yc.Dn(E),E=O=0;E<w.length;E++)if($[E]===!1)for(R=0;R<w[E].length;R++){var k=!1;R===w[E].length-1&&x[E]===!0&&(k=!0),k||(s.write(2*O,w[E][R][0]),s.write(2*O+1,w[E][R][1]),n.write(O,u||o?w[E][R][2]:NaN),l.write(O,o&&u?w[E][R][3]:NaN),O++)}return m!=0&&(w=c,d.resize(b),f.resize(b),0<m&&(d.add(m),f.add(0)),w.hn(0,s),w.PJ(f),w.QJ(d)),u&&(c.re(1),c.hn(1,n)),o&&(c.re(2),c.hn(2,u==0?n:l)),c.Pc(16777215),c},C}()}(G||(G={})),function(h){h.Ex=function(){function C(){}return C.br=function(w){var u,o=0,s=w.length,n=w[0];for(u=0;u<s-1;u++){var l=w[u+1];o+=(l[0]-n[0])*(l[1]+n[1]),n=l}return 0<=o},C.rotate=function(w,u,o){u=u*Math.PI/180;var s=Math.cos(u),n=Math.sin(u);if(w.paths!==void 0){u={paths:[]};for(var l=0;l<w.paths.length;l++){for(var c=w.paths[l],d=[],f=0;f<c.length;f++){var m=c[f].slice(0);d.push(m);var b=s*(c[f][0]-o.x)-n*(c[f][1]-o.y)+o.x,x=n*(c[f][0]-o.x)+s*(c[f][1]-o.y)+o.y;m[0]=b,m[1]=x}u.paths.push(d),w.hasZ!==void 0&&(u.hasZ=w.hasZ),w.hasM!==void 0&&(u.hasM=w.hasM)}return u}if(w.rings!==void 0){for(u={rings:[]},l=0;l<w.rings.length;l++){c=w.rings[l],d=[];var $=C.br(c);for(f=0;f<c.length;f++)m=c[f].slice(0),d.push(m),b=s*(c[f][0]-o.x)-n*(c[f][1]-o.y)+o.x,x=n*(c[f][0]-o.x)+s*(c[f][1]-o.y)+o.y,m[0]=b,m[1]=x;C.br(d)!==$&&d.reverse(),u.rings.push(d),w.hasZ!==void 0&&(u.hasZ=w.hasZ),w.hasM!==void 0&&(u.hasM=w.hasM)}return u}if(w.x!==void 0)return u={x:s*(w.x-o.x)-n*(w.y-o.y)+o.x,y:n*(w.x-o.x)+s*(w.y-o.y)+o.y},w.z!==void 0&&(u.z=w.z),w.m!==void 0&&(u.m=w.m),w.hasZ!==void 0&&(u.hasZ=w.hasZ),w.hasM!==void 0&&(u.hasM=w.hasM),u;if(w.points!==void 0){for(u={points:[]},l=w.points,f=0;f<l.length;f++)(c=l[f].slice(0))[0]=s*(l[f][0]-o.x)-n*(l[f][1]-o.y)+o.x,c[1]=n*(l[f][0]-o.x)+s*(l[f][1]-o.y)+o.y,u.points.push(c);return w.hasZ!==void 0&&(u.hasZ=w.hasZ),w.hasM!==void 0&&(u.hasM=w.hasM),u}return null},C.JQ=function(w,u){if(w.paths!==void 0){for(var o={paths:[]},s=0;s<w.paths.length;s++){for(var n=w.paths[s],l=[],c=0;c<n.length;c++){var d=n[c].slice(0);l.push(d);var f=u.x-n[c][0];d[0]=n[c][0]+2*f}o.paths.push(l)}return w.hasZ!==void 0&&(o.hasZ=w.hasZ),w.hasM!==void 0&&(o.hasM=w.hasM),o}if(w.rings!==void 0){for(o={rings:[]},s=0;s<w.rings.length;s++){n=w.rings[s];var m=C.br(n);for(l=[],c=0;c<n.length;c++)d=n[c].slice(0),l.push(d),f=u.x-n[c][0],d[0]=n[c][0]+2*f;C.br(l)!==m&&l.reverse(),o.rings.push(l)}return w.hasZ!==void 0&&(o.hasZ=w.hasZ),w.hasM!==void 0&&(o.hasM=w.hasM),o}if(w.x!==void 0)return f=u.x-w.x,o={x:w.x+2*f,y:w.y},w.z!==void 0&&(o.z=w.z),w.m!==void 0&&(o.m=w.m),w.hasZ!==void 0&&(o.hasZ=w.hasZ),w.hasM!==void 0&&(o.hasM=w.hasM),o;if(w.points!==void 0){for(o={points:[]},s=w.points,c=0;c<s.length;c++)n=s[c].slice(0),f=u.x-n[0],n[0]+=2*f,o.points.push(n);return w.hasZ!==void 0&&(o.hasZ=w.hasZ),w.hasM!==void 0&&(o.hasM=w.hasM),o}return w.xmin!==void 0?(o={v:w.xmin,G:w.ymin,C:w.xmax,H:w.ymax},w.zmin!==void 0&&(o.zmin=w.zmin,o.zmax=w.zmax),w.mmin!==void 0&&(o.mmin=w.mmin,o.mmax=w.mmax),f=u.x-w.xmin,o.xmax=w.xmin+2*f,f=u.x-w.xmax,o.xmin=w.xmax+2*f,w.zmin!==void 0&&(o.zmin=w.zmin),w.zmax!==void 0&&(o.zmax=w.zmax),w.mmin!==void 0&&(o.mmin=w.mmin),w.mmax!==void 0&&(o.mmax=w.mmax),w.hasZ!==void 0&&(o.hasZ=w.hasZ),w.hasM!==void 0&&(o.hasM=w.hasM),o):null},C.KQ=function(w,u){if(w.paths!==void 0){for(var o={paths:[]},s=0;s<w.paths.length;s++){for(var n=w.paths[s],l=[],c=0;c<n.length;c++){var d=n[c].slice(0);l.push(d);var f=u.y-n[c][1];d[1]=n[c][1]+2*f}o.paths.push(l)}return w.hasZ!==void 0&&(o.hasZ=w.hasZ),w.hasM!==void 0&&(o.hasM=w.hasM),o}if(w.rings!==void 0){for(o={rings:[]},s=0;s<w.rings.length;s++){n=w.rings[s];var m=C.br(n);for(l=[],c=0;c<n.length;c++)d=n[c].slice(0),l.push(d),f=u.y-n[c][1],d[1]=n[c][1]+2*f;C.br(l)!==m&&l.reverse(),o.rings.push(l)}return w.hasZ!==void 0&&(o.hasZ=w.hasZ),w.hasM!==void 0&&(o.hasM=w.hasM),o}if(w.x!==void 0)return f=u.y-w.y,o={y:w.y+2*f,x:w.x},w.z!==void 0&&(o.z=w.z),w.m!==void 0&&(o.m=w.m),w.hasZ!==void 0&&(o.hasZ=w.hasZ),w.hasM!==void 0&&(o.hasM=w.hasM),o;if(w.points!==void 0){for(o={points:[]},s=w.points,c=0;c<s.length;c++)n=s[c].slice(0),f=u.y-n[1],n[1]+=2*f,o.points.push(n);return w.hasZ!==void 0&&(o.hasZ=w.hasZ),w.hasM!==void 0&&(o.hasM=w.hasM),o}return w.xmin!==void 0?(o={v:w.xmin,G:w.ymin,C:w.xmax,H:w.ymax},w.zmin!==void 0&&(o.zmin=w.zmin,o.zmax=w.zmax),w.mmin!==void 0&&(o.mmin=w.mmin,o.mmax=w.mmax),f=u.y-w.ymin,o.ymax=w.ymin+2*f,f=u.y-w.ymax,o.ymin=w.ymax+2*f,w.zmin!==void 0&&(o.zmin=w.zmin),w.zmax!==void 0&&(o.zmax=w.zmax),w.mmin!==void 0&&(o.mmin=w.mmin),w.mmax!==void 0&&(o.mmax=w.mmax),w.hasZ!==void 0&&(o.hasZ=w.hasZ),w.hasM!==void 0&&(o.hasM=w.hasM),o):null},C}()}(G||(G={})),function(h){h.ZK=function(){function C(){}return C.Ig=function(w,u){switch(u==null&&(u=h.ee.og()),w){case 33:return new h.Sa(u);case 322:return new h.yb(u);case 197:return new h.Fh(u);case 550:return new h.de(u);case 1607:return new h.Ta(u);case 1736:return new h.Da(u);default:throw h.i.fa("invalid argument.")}},C}()}(G||(G={})),function(h){var C=function(){function w(u,o){this.Te=h.ia.qf(u,-1),this.ua=new h.au,this.wl=o}return w.prototype.AW=function(u){this.ua.At(Math.min(this.Te.size,u)),this.ua.fn(u)},w.prototype.addElement=function(u,o){if(o===void 0)return this.eN(u);o=h.O.truncate(o%this.Te.size);var s=this.Te.get(o);return s==-1&&(s=this.ua.Ph(),this.Te.set(o,s)),this.ua.addElement(s,u)},w.prototype.eN=function(u){var o=this.wl.jz(u);o=h.O.truncate(o%this.Te.size);var s=this.Te.get(o);return s==-1&&(s=this.ua.Ph(),this.Te.set(o,s)),this.ua.addElement(s,u)},w.prototype.jd=function(u,o){if(o===void 0)this.KP(u);else{o=h.O.truncate(o%this.Te.size);var s=this.Te.get(o);if(s==-1)throw h.i.N();for(var n=this.ua.rc(s),l=-1;n!=-1;){var c=this.ua.lb(n);this.ua.ja(n)==u?(this.ua.jd(s,l,n),this.ua.rc(s)==-1&&(this.ua.bh(s),this.Te.set(o,-1))):l=n,n=c}}},w.prototype.KP=function(u){var o=this.wl.jz(u);o=h.O.truncate(o%this.Te.size);var s=this.Te.get(o);if(s==-1)throw h.i.N();for(var n=this.ua.rc(s),l=-1;n!=-1;){var c=this.ua.lb(n);this.ua.ja(n)==u?(this.ua.jd(s,l,n),this.ua.rc(s)==-1&&(this.ua.bh(s),this.Te.set(o,-1))):l=n,n=c}},w.prototype.rR=function(u){return u=h.O.truncate(u%this.Te.size),(u=this.Te.get(u))==-1?-1:this.ua.rc(u)},w.prototype.ER=function(u){return this.ua.lb(u)},w.prototype.vd=function(u){var o=this.wl.jz(this.ja(u));o=h.O.truncate(o%this.Te.size);var s=this.Te.get(o);if(s==-1)throw h.i.N();for(var n=this.ua.rc(s),l=-1;n!=-1;){if(n==u)return this.ua.jd(s,l,n),void(this.ua.rc(s)==-1&&(this.ua.bh(s),this.Te.set(o,-1)));l=n,n=this.ua.lb(n)}throw h.i.N()},w.prototype.ja=function(u){return this.ua.ja(u)},w.prototype.clear=function(){this.Te=h.ia.qf(this.Te.size,-1),this.ua.clear()},w.prototype.size=function(){return this.ua.TF()},w}();h.dL=C}(G||(G={})),function(h){var C=function(){function w(){this.Li=new h.$c(3),this.ua=new h.$c(6),this.sT=!1,this.je=-1}return w.prototype.fl=function(u){this.Li.jd(u)},w.prototype.Pw=function(){return this.Li.Ce()},w.prototype.bv=function(u){this.ua.jd(u)},w.prototype.$A=function(){return this.ua.Ce()},w.prototype.WB=function(u,o){this.Li.S(u,1,o)},w.prototype.ex=function(u,o){this.Li.S(u,2,o)},w.prototype.gX=function(u,o){this.Li.S(u,3,o)},w.prototype.UB=function(u,o){this.ua.S(u,4,o)},w.prototype.jX=function(u,o){this.ua.S(u,3,o)},w.prototype.TJ=function(u,o){this.ua.S(u,2,o)},w.prototype.Ph=function(u){var o=this.$A();return this.ua.S(o,3,this.je),this.ua.S(o,4,0),this.ua.S(o,5,u),this.je!=-1&&this.TJ(this.je,o),this.je=o},w.prototype.bh=function(u){this.LE(u);var o=this.ua.T(u,2),s=this.ua.T(u,3);return o!=-1?this.jX(o,s):this.je=s,s!=-1&&this.TJ(s,o),this.bv(u),s},w.prototype.At=function(u){this.ua.De(u)},w.prototype.PF=function(u){return this.ua.T(u,5)},w.prototype.fX=function(u,o){this.ua.S(u,5,o)},w.prototype.addElement=function(u,o){return this.tS(u,o)},w.prototype.tS=function(u,o){var s=this.Pw();this.ex(s,-1),this.ua.T(u,0)==-1&&this.ua.S(u,0,s);var n=this.ua.T(u,1);return this.WB(s,n),n!=-1&&this.ex(n,s),this.ua.S(u,1,s),this.setData(s,o),this.UB(u,this.bs(u)+1),this.sT&&this.gX(s,u),s},w.prototype.jd=function(u,o){var s=this.we(o),n=this.lb(o);return s!=-1?this.ex(s,n):this.ua.S(u,0,n),n!=-1?this.WB(n,s):this.ua.S(u,1,s),this.fl(o),this.UB(u,this.bs(u)-1),n},w.prototype.fn=function(u){this.Li.De(u)},w.prototype.getData=function(u){return this.Li.T(u,0)},w.prototype.setData=function(u,o){this.Li.S(u,0,o)},w.prototype.lb=function(u){return this.Li.T(u,2)},w.prototype.we=function(u){return this.Li.T(u,1)},w.prototype.rc=function(u){return this.ua.T(u,0)},w.prototype.Fc=function(u){return this.ua.T(u,1)},w.prototype.clear=function(){for(var u=this.je;u!=-1;)u=this.bh(u)},w.prototype.LE=function(u){for(var o=this.Fc(u);o!=-1;){var s=o;o=this.we(s),this.fl(s)}this.ua.S(u,0,-1),this.ua.S(u,1,-1),this.UB(u,0)},w.prototype.B=function(){return this.Li.size==0},w.prototype.TF=function(){return this.Li.size},w.prototype.bs=function(u){return this.ua.T(u,4)},w.prototype.qz=function(u){return this.ua.T(u,3)},w}();h.jp=C}(G||(G={})),function(h){var C=function(){function w(u){u===void 0?(this.ug=new h.$c(2),this.ua=new h.$c(4),this.je=-1,this.Qv=!0):(this.ug=new h.$c(2),this.ua=new h.$c(u?4:2),this.je=-1,this.Qv=u)}return w.prototype.fl=function(u){this.ug.jd(u)},w.prototype.Pw=function(){return this.ug.Ce()},w.prototype.bv=function(u){this.ua.jd(u)},w.prototype.$A=function(){return this.ua.Ce()},w.prototype.Ph=function(){var u=this.$A();return this.Qv&&(this.ua.S(u,3,this.je),this.je!=-1&&this.ua.S(this.je,2,u),this.je=u),u},w.prototype.bh=function(u){for(var o=this.rc(u);o!=-1;){var s=o;o=this.lb(o),this.fl(s)}this.Qv&&(o=this.ua.T(u,2),s=this.ua.T(u,3),o!=-1?this.ua.S(o,3,s):this.je=s,s!=-1&&this.ua.S(s,2,o)),this.bv(u)},w.prototype.At=function(u){this.ua.De(u)},w.prototype.addElement=function(u,o){var s=this.ua.T(u,1),n=this.Pw();return s!=-1?this.ug.S(s,1,n):this.ua.S(u,0,n),this.ua.S(u,1,n),this.ug.S(n,0,o),n},w.prototype.fn=function(u){this.ug.De(u)},w.prototype.jd=function(u,o,s){o!=-1?(this.ug.S(o,1,this.ug.T(s,1)),this.ua.T(u,1)==s&&this.ua.S(u,1,o)):(this.ua.S(u,0,this.ug.T(s,1)),this.ua.T(u,1)==s&&this.ua.S(u,1,-1)),this.fl(s)},w.prototype.Hy=function(u,o){var s=this.ua.T(u,1),n=this.ua.T(o,0);n!=-1&&(s!=-1?this.ug.S(s,1,n):this.ua.S(u,0,n),this.ua.S(u,1,this.ua.T(o,1))),this.Qv&&(u=this.ua.T(o,2),s=this.ua.T(o,3),u!=-1?this.ua.S(u,3,s):this.je=s,s!=-1&&this.ua.S(s,2,u)),this.bv(o)},w.prototype.ja=function(u){return this.ug.T(u,0)},w.prototype.Sj=function(u,o){this.ug.S(u,0,o)},w.prototype.lb=function(u){return this.ug.T(u,1)},w.prototype.rc=function(u){return this.ua.T(u,0)},w.prototype.Jn=function(u){return this.ja(this.rc(u))},w.prototype.clear=function(){this.ug.mj(!0),this.ua.mj(!0),this.je=-1},w.prototype.B=function(){return this.ug.size==0},w.prototype.TF=function(){return this.ug.size},w.prototype.qz=function(u){return this.ua.T(u,3)},w}();h.au=C}(G||(G={})),function(h){h.ta=function(){function C(){}return C.Wd=function(w,u,o){return u=u.xr(),w=w!=null&&w.Xd!==void 0?w.Xd(0):0,o&&(u*=4,w*=1.1),Math.max(w,u)},C.Er=function(w){return 2*Math.sqrt(2)*w},C.rN=function(w){return Math.sqrt(2)*w},C.kj=function(w,u,o){var s=new h.l;return u.A(s),C.Wd(w,s,o)},C.wE=function(w,u,o){return u=u.Tg(1,0).xr(),w=w!=null?w.Xd(1):0,o&&(u*=4,w*=1.1),Math.max(w,u)},C.mv=function(w,u){var o=new h.l;return w.xc(o),w=new h.l,u.xc(w),o.Zb(w),o},C.YN=function(w){var u=new h.l;if(w.xc(u),u.B())return null;var o=new h.du(u,8),s=-1,n=new h.l,l=!1;do for(var c=0,d=w.da();c<d;c++){if(w.Rj(c,n),(s=o.Jz(c,n,s))==-1){if(l)throw h.i.fa("internal error");w.yp(u,!1),l=!0,o.reset(u,8);break}l=!1}while(l);return o},C.nE=function(w){var u=new h.l;w.xc(u);for(var o=new h.du(u,8),s=-1,n=w.Ga(),l=new h.l,c=!1;n.$a();)for(;n.Ha();){var d=n.ha(),f=n.wb();if(d.A(l),(s=o.Jz(f,l,s))==-1){if(c)throw h.i.Qa();w.yp(u,!1),c=!0,o.reset(u,8),n.Zi();break}}return o},C.jj=function(w,u){var o=new h.l;w.xc(o);for(var s=new h.du(o,8),n=-1,l=new h.l,c=w.Ga(),d=!1;c.$a();)for(;c.Ha();){var f=c.ha(),m=c.wb();if(f.A(l),l.isIntersecting(u)&&(n=s.Jz(m,l,n))==-1){if(d)throw h.i.fa("internal error.");w.yp(o,!1),d=!0,s.reset(o,8),c.Zi();break}}return s},C.oE=function(w,u){for(var o=new h.du(u,8),s=new h.h,n=!1,l=new h.l,c=0;c<w.I();c++)if(w.D(c,s),u.contains(s)&&(l.K(s),o.vj(c,l)==-1)){if(n)throw h.i.Qa();n=!0,c=new h.l,w.yp(c,!1),o.reset(c,8),c=-1}return o},C.lR=function(w,u,o){var s=new h.l,n=new h.l;w.xc(s),u.xc(n),s.W(o,o),n.W(o,o);var l=new h.l;l.K(s),l.Ea(n),w=w.Ga(),u=u.Ga();var c=new h.xC;c.aC(o);var d=!1;for(c.pK();w.$a();)for(;w.Ha();)w.ha().A(s),s.isIntersecting(l)&&(d=!0,(o=new h.l).K(s),c.JD(w.wb(),o));if(c.iF(),!d)return null;for(s=!1,c.oK();u.$a();)for(;u.Ha();)u.ha().A(n),n.isIntersecting(l)&&(s=!0,(o=new h.l).K(n),c.ED(u.wb(),o));return c.hF(),s?c:null},C.mR=function(w,u,o,s,n){var l=w.getType(),c=u.getType(),d=new h.l,f=new h.l;w.xc(d),u.xc(f),d.W(o,o),f.W(o,o);var m=new h.l;m.K(d),m.Ea(f);var b=new h.xC;b.aC(o);var x=!1;b.pK();var $=0;for(o=w.da();$<o;$++)s&&l==1736&&!w.Ev($)||(w.Rj($,d),d.isIntersecting(m)&&(x=!0,b.JD($,d)));if(b.iF(),!x)return null;for(w=!1,b.oK(),s=0,o=u.da();s<o;s++)n&&c==1736&&!u.Ev(s)||(u.Rj(s,f),f.isIntersecting(m)&&(w=!0,b.ED(s,f)));return b.hF(),w?b:null},C.Ru=function(w,u,o){if(w!=u)for(var s=0;s<o;s++)w[s]==null?w[s]=h.h.al(u[s]):w[s].L(u[s])},C.Jy=function(w,u,o,s){var n=0;for(s+=0;n<s;o++,n++)w[n]==null&&(w[n]=[0,0]),w[n][0]=u[o].x,w[n][1]=u[o].y},C.Iy=function(w,u,o,s){var n=u,l=0;for(u=s+u;n<u;l++,n++)w[n]==null?w[n]=h.h.construct(o[l][0],o[l][1]):w[n].ma(o[l][0],o[l][1])},C.kP=function(w,u,o){if(w!=u)for(var s=0;s<o;s++)w[s]==null?w[s]=new h.Sa(u[s]):u[s].copyTo(w[s])},C.vE=function(w,u,o,s){var n=0;return w!=null&&(n=w.Xd(0),s&&!o||w==null||(n+=1.01*w.vz(0))),o&&(u*=4,n*=1.01),Math.max(n,u)},C.ty=function(w,u,o){return C.vE(w,u.xr(),o,!1)},C.gO=function(w,u){var o=new h.l;return u.A(o),C.ty(w,o,!0)},C.uy=function(w,u){return C.vE(w,u.xr(),!1,!0)},C.Hu=function(w,u){var o=new h.l;return u.A(o),C.uy(w,o)},C.AG=function(w,u,o,s){s*=s;var n=new h.h;if(n.uc(w,u),(w=new h.h).uc(o,u),u=n.Sk(),o=w.Sk(),u<=s&&o<=s)return!0;var l=h.lc.ox(n.wi(w));return(l<=s*u||l<=s*o)&&0<=n.Qh(w)},C.dK=function(w,u,o,s){for(var n=0;n<u;n++){var l=w[n].y,c=h.O.Rk(l,o,s);c!=l&&(w[n].y=c)}},C}()}(G||(G={})),function(h){var C,w,u=function(){function l(c){this.Ya=c}return l.prototype.compare=function(c,d,f){c=c.ja(f),f=this.Ya.nk(d);var m=this.Ya.nk(c);return f<m?-1:f==m?n.gq(d)&&n.Gv(c)?-1:n.gq(c)&&n.Gv(d)?1:0:1},l}(),o=function(){function l(c){this.Ya=c}return l.prototype.nr=function(c,d,f){this.Ya.GX(f,c,d)},l.prototype.$p=function(c){return this.Ya.nk(c)},l}();(w=C||(C={}))[w.initialize=0]="initialize",w[w.pIn=1]="pIn",w[w.pL=2]="pL",w[w.pR=3]="pR",w[w.pT=4]="pT",w[w.right=5]="right",w[w.left=6]="left",w[w.all=7]="all";var s=function(){function l(){this.Ya=null,this.Qi=new h.Nc,this.hi=new h.ia(0),this.sg=[0,0]}return l.prototype.Xi=function(c,d){this.Qi.oa=c.oa-d,this.Qi.va=c.va+d,this.hi.resize(0),this.he=0,this.sg[0]=0},l.prototype.EB=function(c,d,f){if(c>d)throw h.i.N();this.Qi.oa=c-f,this.Qi.va=d+f,this.hi.resize(0),this.he=0,this.sg[0]=0},l.prototype.Uo=function(c,d){this.Qi.oa=c-d,this.Qi.va=c+d,this.hi.resize(0),this.he=0,this.sg[0]=0},l.prototype.next=function(){if(!this.Ya.lq)throw h.i.Hb();if(0>this.he)return-1;for(var c=!0;c;)switch(this.sg[this.he]){case 1:c=this.FU();break;case 2:c=this.GU();break;case 3:c=this.HU();break;case 4:c=this.IU();break;case 5:c=this.GW();break;case 6:c=this.kT();break;case 7:c=this.tN();break;case 0:c=this.Gz();break;default:throw h.i.Qa()}return this.Og!=-1?this.Mp()>>1:-1},l.construct=function(c){var d=new l;return d.Ya=c,d.hi.Jb(20),d.he=-1,d},l.prototype.Gz=function(){return this.Og=this.vH=this.Mi=this.Lc=-1,this.Ya.me!=null&&0<this.Ya.me.size?(this.sg[0]=1,this.Mi=this.Ya.kf,!0):(this.he=-1,!1)},l.prototype.FU=function(){if(this.Lc=this.Mi,this.Lc==-1)return this.Og=this.he=-1,!1;var c=this.Ya.Np(this.Lc);return this.Qi.va<c?(c=this.Ya.mk(this.Lc),this.Mi=this.Ya.qj(this.Lc),c!=-1&&(this.ei=this.Ya.kl(c),this.sg[++this.he]=6),!0):c<this.Qi.oa?(c=this.Ya.mk(this.Lc),this.Mi=this.Ya.lk(this.Lc),c!=-1&&(this.ei=this.Ya.Zr(c),this.sg[++this.he]=5),!0):(this.sg[this.he]=2,this.vH=this.Lc,c=this.Ya.mk(this.Lc),this.Mi=this.Ya.qj(this.Lc),c!=-1&&(this.ei=this.Ya.kl(c),this.sg[++this.he]=7),!0)},l.prototype.GU=function(){if(this.Lc=this.Mi,this.Lc==-1)return this.sg[this.he]=3,this.Mi=this.Ya.lk(this.vH),!0;if(this.Ya.Np(this.Lc)<this.Qi.oa){var c=this.Ya.mk(this.Lc);return this.Mi=this.Ya.lk(this.Lc),c!=-1&&(this.ei=this.Ya.Zr(c),this.sg[++this.he]=5),!0}return c=this.Ya.mk(this.Lc),this.Mi=this.Ya.qj(this.Lc),c!=-1&&(this.ei=this.Ya.kl(c),this.sg[++this.he]=7),(c=this.Ya.lk(this.Lc))!=-1&&this.hi.add(c),!0},l.prototype.HU=function(){if(this.Lc=this.Mi,this.Lc==-1)return this.sg[this.he]=4,!0;if(this.Qi.va<this.Ya.Np(this.Lc)){var c=this.Ya.mk(this.Lc);return this.Mi=this.Ya.qj(this.Lc),c!=-1&&(this.ei=this.Ya.kl(c),this.sg[++this.he]=6),!0}return c=this.Ya.mk(this.Lc),this.Mi=this.Ya.lk(this.Lc),c!=-1&&(this.ei=this.Ya.kl(c),this.sg[++this.he]=7),(c=this.Ya.qj(this.Lc))!=-1&&this.hi.add(c),!0},l.prototype.IU=function(){if(this.hi.size==0)return this.Og=this.he=-1,!1;this.Lc=this.hi.get(this.hi.size-1),this.hi.resize(this.hi.size-1);var c=this.Ya.mk(this.Lc);return c!=-1&&(this.ei=this.Ya.kl(c),this.sg[++this.he]=7),this.Ya.qj(this.Lc)!=-1&&this.hi.add(this.Ya.qj(this.Lc)),this.Ya.lk(this.Lc)!=-1&&this.hi.add(this.Ya.lk(this.Lc)),!0},l.prototype.kT=function(){return this.Og=this.ei,this.Og!=-1&&n.gq(this.Mp())&&this.Ya.nk(this.Mp())<=this.Qi.va?(this.ei=this.SF(),!1):(this.he--,!0)},l.prototype.GW=function(){return this.Og=this.ei,this.Og!=-1&&n.Gv(this.Mp())&&this.Ya.nk(this.Mp())>=this.Qi.oa?(this.ei=this.QR(),!1):(this.he--,!0)},l.prototype.tN=function(){return this.Og=this.ei,this.Og!=-1&&n.gq(this.Mp())?(this.ei=this.SF(),!1):(this.he--,!0)},l.prototype.SF=function(){return this.Ya.Sf?this.Ya.$f.lb(this.Og):this.Ya.Ti.lb(this.Og)},l.prototype.QR=function(){return this.Ya.Sf?this.Ya.$f.we(this.Og):this.Ya.Ti.we(this.Og)},l.prototype.Mp=function(){return this.Ya.Sf?this.Ya.$f.ja(this.Og):this.Ya.Ti.getData(this.Og)},l}();h.EY=s;var n=function(){function l(c){this.Am=this.$h=this.$f=this.Ti=this.Km=this.Ej=this.me=this.Fj=null,this.Sf=c,this.lq=this.Sv=!1}return l.prototype.kr=function(){this.Nk(!0)},l.prototype.Br=function(c,d){if(!this.Sv)throw h.i.Hb();this.Fj.push(new h.Nc(c,d))},l.prototype.Fp=function(){if(!this.Sv)throw h.i.fa("invalid call");this.Sv=!1,this.lq=!0,this.Sf||(this.vS(),this.Zv=this.Fj.length)},l.prototype.vj=function(c){if(!this.Sf||!this.lq)throw h.i.N("invalid call");if(this.kf==-1){var d=this.Fj.length;if(this.iA){var f=new h.ia(0);f.Jb(2*d),this.bJ(f),this.$h.Jb(2*d),this.$h.resize(0),this.aJ(f),this.Km.resize(d,-1),this.Km.Wj(-1,0,d),this.iA=!1}else this.Km.Wj(-1,0,d);this.kf=this.Tu()}d=this.pG(c<<1,this.kf),f=this.$f.addElement(1+(c<<1),this.xz(d)),this.VJ(d,f),this.Km.set(c,d),this.Zv++},l.prototype.remove=function(c){if(!this.Sf||!this.lq)throw h.i.fa("invalid call");var d=this.Km.get(c);if(d==-1)throw h.i.N("the interval does not exist in the interval tree");this.Km.set(c,-1),this.Zv--;var f=this.xz(d),m=this.$f.ZR(f);this.$f.vd(this.wR(d),f),this.$f.vd(this.TR(d),f),(c=this.$f.size(f))==0&&(this.$f.MP(f),this.ZJ(m,-1)),this.Ej.jd(d),f=this.UF(m);var b=this.qj(m),x=this.lk(m);for(d=0;!(0<c||m==this.kf||b!=-1&&x!=-1);)m==this.qj(f)?b!=-1?(this.Ok(f,b),this.Uj(b,f),this.Ok(m,-1)):x!=-1?(this.Ok(f,x),this.Uj(x,f),this.Qk(m,-1)):this.Ok(f,-1):b!=-1?(this.Qk(f,b),this.Uj(b,f),this.Ok(m,-1)):x!=-1?(this.Qk(f,x),this.Uj(x,f),this.Qk(m,-1)):this.Qk(f,-1),this.Uj(m,-1),d++,m=f,c=(f=this.mk(m))!=-1?this.$f.size(f):0,b=this.qj(m),x=this.lk(m),f=this.UF(m)},l.prototype.reset=function(){if(!this.Sf||!this.lq)throw h.i.N("invalid call");this.Nk(!1)},l.prototype.size=function(){return this.Zv},l.prototype.getIterator=function(){return s.construct(this)},l.prototype.bJ=function(c){for(var d=this.Fj.length,f=0;f<2*d;f++)c.add(f);this.HX(c,2*d)},l.prototype.aJ=function(c){for(var d=NaN,f=0;f<c.size;f++){var m=c.get(f),b=this.nk(m);b!=d&&(this.$h.add(m),d=b)}},l.prototype.vS=function(){var c=this.Fj.length,d=new h.ia(0);d.Jb(2*c),this.bJ(d),this.$h.Jb(2*c),this.$h.resize(0),this.aJ(d),this.Ej.De(c),this.Ti.fn(2*c);var f=h.Yc.Oh(c);for(f.Wj(-1,0,c),this.kf=this.Tu(),c=0;c<d.size;c++){var m=d.get(c),b=f.get(m>>1);b!=-1?this.VJ(b,this.Ti.addElement(this.xz(b),m)):(b=this.pG(m,this.kf),f.set(m>>1,b))}},l.prototype.pG=function(c,d){var f=d,m=d,b=-1,x=0,$=this.$h.size-1,E=0,O=c>>1,R=NaN,k=NaN,j=!0,F=this.DR(O);for(O=this.AR(O);j;){x<$?(E=x+h.O.truncate(($-x)/2),this.gz(f)==-1&&this.FJ(f,this.$h.get(E),this.$h.get(E+1))):this.gz(f)==-1&&this.FJ(f,this.$h.get(x),this.$h.get(x));var L=this.Np(f);if(O<L)d!=-1&&(d==f?(m=f,R=L,k=(d=this.qj(f))!=-1?this.Np(d):NaN):k>L&&(L<R?this.Ok(m,f):this.Qk(m,f),this.Qk(f,d),this.Sf&&(this.Uj(f,m),this.Uj(d,f)),m=f,R=L,d=-1,k=NaN)),($=this.xR(f))==-1&&($=this.Tu(),this.dX(f,$)),f=$,$=E;else if(F>L)d!=-1&&(d==f?(m=f,R=L,k=(d=this.lk(f))!=-1?this.Np(d):NaN):k<L&&(L<R?this.Ok(m,f):this.Qk(m,f),this.Ok(f,d),this.Sf&&(this.Uj(f,m),this.Uj(d,f)),m=f,R=L,d=-1,k=NaN)),(x=this.UR(f))==-1&&(x=this.Tu(),this.oX(f,x)),f=x,x=E+1;else{(j=this.mk(f))==-1&&(j=this.zP(f),this.ZJ(f,j));var V=this.fN(j,c);b=this.xP(),this.qX(b,j),this.cX(b,V),f!=d&&(L<R?this.Ok(m,f):this.Qk(m,f),this.Sf&&this.Uj(f,m),d!=-1&&(k<L?this.Ok(f,d):this.Qk(f,d),this.Sf&&this.Uj(d,f))),j=!1}}return b},l.prototype.Tu=function(){return this.me.Ce()},l.prototype.zP=function(c){return this.Sf?this.$f.Pr(c):this.Ti.Ph(c)},l.prototype.xP=function(){return this.Ej.Ce()},l.prototype.Nk=function(c){c?(this.Sv=this.iA=!0,this.lq=!1,this.$h==null?this.$h=h.Yc.Oh(0):this.$h.resize(0),this.Fj==null?this.Fj=[]:this.Fj.length=0):this.iA=!1,this.Sf?this.Km==null?(this.Km=h.Yc.Oh(0),this.$f=new h.Yj,this.$f.Vo(new u(this))):this.$f.clear():this.Ti==null?this.Ti=new h.jp:this.Ti.clear(),this.me==null?(this.Ej=new h.$c(3),this.me=new h.$c(this.Sf?8:7)):(this.Ej.mj(!1),this.me.mj(!1)),this.kf=-1,this.Zv=0},l.prototype.FJ=function(c,d,f){this.XW(c,d),this.YW(c,f)},l.prototype.Np=function(c){var d=this.gz(c);return d==-1?NaN:(d=this.nk(d))==(c=this.nk(this.gR(c)))?d:.5*(d+c)},l.prototype.XW=function(c,d){this.me.S(c,0,d)},l.prototype.YW=function(c,d){this.me.S(c,1,d)},l.prototype.dX=function(c,d){this.me.S(c,3,d)},l.prototype.oX=function(c,d){this.me.S(c,4,d)},l.prototype.ZJ=function(c,d){this.me.S(c,2,d)},l.prototype.Ok=function(c,d){this.me.S(c,5,d)},l.prototype.Qk=function(c,d){this.me.S(c,6,d)},l.prototype.Uj=function(c,d){this.me.S(c,7,d)},l.prototype.qX=function(c,d){this.Ej.S(c,0,d)},l.prototype.fN=function(c,d){return this.Sf?this.$f.addElement(d,c):this.Ti.addElement(c,d)},l.prototype.cX=function(c,d){this.Ej.S(c,1,d)},l.prototype.VJ=function(c,d){this.Ej.S(c,2,d)},l.prototype.kl=function(c){return this.Sf?this.$f.rc(c):this.Ti.rc(c)},l.prototype.Zr=function(c){return this.Sf?this.$f.Fc(c):this.Ti.Fc(c)},l.gq=function(c){return!(1&c)},l.Gv=function(c){return!(1&~c)},l.prototype.gz=function(c){return this.me.T(c,0)},l.prototype.gR=function(c){return this.me.T(c,1)},l.prototype.mk=function(c){return this.me.T(c,2)},l.prototype.xR=function(c){return this.me.T(c,3)},l.prototype.UR=function(c){return this.me.T(c,4)},l.prototype.qj=function(c){return this.me.T(c,5)},l.prototype.lk=function(c){return this.me.T(c,6)},l.prototype.UF=function(c){return this.me.T(c,7)},l.prototype.xz=function(c){return this.Ej.T(c,0)},l.prototype.wR=function(c){return this.Ej.T(c,1)},l.prototype.TR=function(c){return this.Ej.T(c,2)},l.prototype.DR=function(c){return this.Fj[c].oa},l.prototype.AR=function(c){return this.Fj[c].va},l.prototype.HX=function(c,d){this.Am==null&&(this.Am=new h.Xt);var f=new o(this);this.Am.sort(c,0,d,f)},l.prototype.GX=function(c,d,f){var m=this;c.Vd(d,f,function(b,x){var $=m.nk(b),E=m.nk(x);return $<E||$==E&&l.gq(b)&&l.Gv(x)?-1:1})},l.prototype.nk=function(c){var d=this.Fj[c>>1];return l.gq(c)?d.oa:d.va},l}();h.sr=n}(G||(G={})),function(h){var C=function(){function w(u){if(u==null)throw h.i.fa("Invalid arguement");this.hf=u;var o=u.nR();o.hS()?u.ef.IG()?this.lo=h.si.PannableFold:this.lo=h.si.Clip:this.lo=h.si.DontClip,o.iS()?u.Yf.IG()?this.Qm=h.si.PannableFold:this.Qm=h.si.Clip:this.Qm=h.si.DontClip,this.Bm=o.Jr,this.mH=o.Vu,u=this.hf.sH,this.aH=u.hs(2147483648),this.Uv=u.hs(1073741824)}return w.zh=function(u,o,s){return o.ww.zh(u,s)},w.Rt=function(u,o,s,n){return u.ww.Rt(o,s,n)},w.Qt=function(u,o,s,n){if(s=0>s?o.length:s,(u=u.ww.Rt(o,s,n))==s)return u;for(var l=o=0;l<s;l++){var c=n[l];c.isNaN()||(o<l&&n[o].L(c),o++)}for(;o<s;o++)n[o].Rc();return u},w.transform=function(u,o,s,n,l){if(u.isIdentity())return h.ta.kP(n,o,s),s;for(var c=[],d=0,f=0;f<s;){for(var m=Math.min(c.length,s-f),b=f,x=0;b<m;b++,x++)c[x]==null?c[x]=o[b].D():o[b].D(c[x]);var $=l?w.Qt(u,c,m,c):w.Rt(u,c,m,c);for(x=b=0;b<$;b++,x++)n[f]==null&&(n[f]=new h.Sa(o[f])),n[f].Cb(c[x]);f+=m,d+=$}return d},w.prototype.Rt=function(u,o,s){if(this.hf.isIdentity())return u!=s&&h.ta.Ru(s,u,o),o;var n=this.hf.ef,l=this.hf.Yf,c=n.Sb(),d=l.Sb();if(c==0&&c===d){var f=n.Qp();return l=f/(l=l.Qp()),(f=new h.Dd).setScale(l,l),f.eY(u,o,s),o}if(f=h.O.Fu(Math.min(o,64)),c==3){var m=n.Ji;c=(n=m.fk()).Sb(),s!=u&&h.ta.Ru(s,u,o),h.zb.$k(m,s,o,!0),m.Qt(h.bm.forward,s,o),h.zb.Zk(m,s,o,!0)}if(c==3||d===3)throw h.i.fa("image: transform_in_place_");if(c==2)this.lo==h.si.Clip?(s!=u&&h.ta.Ru(s,u,o),u=n.ml(),h.zb.OS(u,n,s,o)):(s!=u&&h.ta.Ru(s,u,o),n.Wc()&&(c=n.Xd(0),m=n.Oe(),h.zb.EX(s,o,m,c),h.zb.qF(s,o,n,0))),h.zb.IL(n,s,o,f);else for(c=n.Xd(0),m=n.Oe(),n=0;n<o;n++)h.zb.FX(u[n],m,c,s[n]);for(h.zb.GL(this.hf,s,o,f),u=0,(d=d==2)?u=l.zi():isNaN(this.Bm)||(u=this.Bm),d&&this.Qm!=h.si.Clip||h.zb.qF(s,o,l.sc(),u),d&&(h.zb.yG(s,o,l,this.Qm),h.zb.HL(l,s,o,f)),u=o,n=0;n<o;++n)s[n].isNaN()&&u--;return u},w.prototype.zh=function(u,o){if(this.hf.isIdentity()||u.B())return u;if(u.getType()==33)return this.XI(u);var s=this.hf.ef,n=this.hf.Yf,l=s.Sb(),c=n.Sb();if(l==0&&l==c)return o=s.Qp(),o/=n=n.Qp(),(n=new h.Dd).setScale(o,o),(u=h.aa.jg(u)).Oc(n),u;switch(u.getType()){case 1607:case 1736:u=this.VI(u,o);break;case 550:u=this.fW(u,o);break;case 197:u=this.eW(u,o);break;default:throw h.i.fa("")}return u},w.prototype.XI=function(u){var o=u.D(),s=[];return s[0]=o,this.Rt(s,1,s),(u=new h.Sa(u)).Cb(s[0]),u},w.prototype.VI=function(u,o){if(u.tm())throw h.i.fa("curves not supported");var s=u.getType();if(s==1736)return this.gW(u,o);if(s==1607)return this.hW(u,o);throw h.i.fa("projectMultiPath")},w.prototype.gW=function(u,o){var s=this.hf.ef,n=this.hf.Yf,l=s.Sb(),c=n.Sb(),d=h.O.Fu(Math.min(u.I(),64)),f=h.Da.jg(u);l==3&&(l=(s=(u=s.Ji).fk()).Sb(),f=u.$k(f,!0),this.wp(u,h.bm.forward,f),f=u.Zk(f,!0)),u=null,c==3&&(c=(n=(u=n.Ji).fk()).Sb());var m=l==2,b=c==2,x=b?n.sc():n,$=!b&&!this.Uv;c=!1;var E=f;if(m){if((E=h.zb.UI(E,s,this.lo,o)).B())return E}else{if(f=new h.l,E.xc(f),l=s.Oe(),f.G<l.G||f.H>l.H){var O=h.l.construct(f.v-1,l.G,f.C+1,l.H);if((E=h.ri.Nu(E,O,s,NaN,0,o)).B())return E}f.R()>2*l.R()&&(E=h.zb.Hp(E,-2*l.R(),2*l.R(),s,!0,0,!0,o))}f=this.mH,(l=!isNaN(f))&&(E=h.Xl.local().V(E,f,o)),O=b?n.kk():null;var R=NaN;m&&(R=s.zi());var k=n.Wr()!=null;if(this.aH)m&&(h.zb.ur(s,R,E,d),l&&(m=s.hh(),f*=(R=s.sc().hh())/m)),h.zb.tr(this.hf,E,$,d),l&&(m=s.sc().hh(),f*=(R=n.sc().hh())/m),s=E;else{var j=new h.Ta(E.description);j.DD(E),m&&(h.zb.ur(s,R,j,d),l&&(m=s.hh(),f*=(R=s.sc().hh())/m)),h.zb.tr(this.hf,j,$,d),l&&(m=s.sc().pm(),f*=(R=n.sc().pm())/m),$=NaN,b?(O=n.kk(),$=n.zi()):isNaN(this.Bm)||($=this.Bm),m=w.tv(s)|w.tv(n),R=10*x.Xd(0),this.Uv&&(m=3,R=0),s=h.zb.UQ(E,s,j,x,$,o,m,R)}return k&&(s=h.zb.XD(s,n,o)),b&&(c||(b=x.Oe().R(),s.Tg(0,0).R()>=b-x.Xd(0)&&(x=O.getNorthPoleLocation(),b=O.getSouthPoleLocation(),E=O.getNorthPoleGeometry(),O=O.getSouthPoleGeometry(),$=0,E==h.Cg.PE_POLE_POINT&&x!=h.Cg.PE_POLE_OUTSIDE_BOUNDARY&&($=1),O==h.Cg.PE_POLE_POINT&&b!=h.Cg.PE_POLE_OUTSIDE_BOUNDARY&&($|=2),$!==0&&(c=!0))),s=h.zb.Mz(s,n,this.Qm,o),l&&(s=h.Xl.local().V(s,f,o)),h.zb.Lx(n,s,d)),s.B()||(c&&(s=h.Yl.local().V(s,n,!1,o)),u!=null&&(s=u.Zk(s,!1),this.wp(u,h.bm.reverse,s),s=u.$k(s,!1))),s},w.tv=function(u){if(u.Sb()!=2)return 0;var o=0,s=u.kk();u=s.getNorthPoleLocation();var n=s.getSouthPoleLocation(),l=s.getNorthPoleGeometry();return s=s.getSouthPoleGeometry(),l==h.Cg.PE_POLE_POINT&&u!=h.Cg.PE_POLE_OUTSIDE_BOUNDARY&&(o=1),s==h.Cg.PE_POLE_POINT&&n!=h.Cg.PE_POLE_OUTSIDE_BOUNDARY&&(o|=2),o},w.prototype.hW=function(u,o){var s=this.hf.ef,n=this.hf.Yf,l=s.Sb(),c=n.Sb(),d=h.O.Fu(Math.min(u.I(),64)),f=h.Ta.jg(u);l==3&&(l=(s=(u=s.Ji).fk()).Sb(),f=u.$k(f,!0),this.wp(u,h.bm.forward,f),f=u.Zk(f,!0)),u=null,c==3&&(c=(n=(u=n.Ji).fk()).Sb());var m=l==2;l=(c=c==2)?n.sc():n;var b=!c&&!this.Uv;if(m){if((f=h.zb.UI(f,s,this.lo,o)).B())return f}else{var x=new h.l;f.xc(x);var $=s.Oe();if((x.G<$.G||x.H>$.H)&&(x=h.l.construct(x.v-1,$.G,x.C+1,$.H),(f=h.ri.Nu(f,x,s,NaN,0,o)).B()))return f}var E=NaN;m&&(E=s.zi()),x=n.Wr()!=null,$=this.mH;var O=!isNaN($);if(O&&(f=h.Xl.local().V(f,$,o)),this.aH)m&&h.zb.ur(s,E,f,d),O&&(m=s.hh(),$*=(E=s.sc().hh())/m),h.zb.tr(this.hf,f,b,d),O&&(m=s.sc().hh(),$*=(E=n.sc().hh())/m),s=f;else{var R=new h.Ta(f.description);R.DD(f),m&&(h.zb.ur(s,E,R,d),O&&(m=s.hh(),$*=(E=s.sc().hh())/m)),h.zb.tr(this.hf,R,b,d),O&&(m=s.sc().hh(),$*=(E=n.sc().hh())/m),b=NaN,c?b=n.zi():isNaN(this.Bm)||(b=this.Bm),m=w.tv(s)|w.tv(n),E=10*l.Xd(0),this.Uv&&(m=3,E=0),s=h.zb.VQ(f,s,R,l,b,o,m,E)}return x&&(s=h.zb.XD(s,n,o)),c&&(s=h.zb.Mz(s,n,this.Qm,o),O&&(s=h.Xl.local().V(s,$,o)),h.zb.Lx(n,s,d)),s.B()||u!=null&&(s=u.Zk(s,!1),this.wp(u,h.bm.reverse,s),s=u.$k(s,!1)),s},w.prototype.eW=function(u,o){var s=(u.ca()+u.R())/400;return s!=0?(s=h.Xl.local().V(u,s,o),s=this.VI(s,o),o=u.Ia(),s.bn(o)):(o=new h.Sa(u.Ip()),s=this.XI(o),o=u.Ia(),s.B()?o.Oa():(u.copyTo(o),u=s.D(),o.K(u.x,u.y,u.x,u.y))),o},w.prototype.fW=function(u,o){u=h.aa.jg(u);var s=this.hf.ef,n=this.hf.Yf,l=s.Sb(),c=n.Sb(),d=h.O.Fu(Math.min(u.I(),64));if(l==3){var f=s.Ji;l=(s=f.fk()).Sb(),u=f.Zk(u,!0),this.wp(f,h.bm.forward,u),u=f.$k(u,!0)}if(l==2){if(this.lo==h.si.Clip?u=h.Xj.local().V(u,s.ml(),s,o):s.Wc()&&(l=new h.l,u.xc(l),s.Oe().contains(l)||(this.lo==h.si.PannableFold&&(u=h.zb.lj(u,s)),h.zb.Jt(u,s.Oe(),s.Xd(0),!0),u=h.zb.Fn(u,s,0,!0,0,o))),u.B())return u;h.zb.ur(s,0,u,d)}else h.zb.Jt(u,s.Oe(),s.Xd(0),!0);return h.zb.tr(this.hf,u,!1,d),s=0,l=!1,f=null,c==3&&(l=!0,c=(n=(f=n.Ji).fk()).Sb()),(c=c==2)?s=n.zi():isNaN(this.Bm)||(s=this.Bm),c&&this.Qm!=h.si.Clip||(u=h.zb.Fn(u,n.sc(),s,!1,0,o)),c&&(u=h.zb.Mz(u,n,this.Qm,o),h.zb.Lx(n,u,d),u.B())||l&&(u=f.Zk(u,!0),this.wp(f,h.bm.reverse,u),u=f.$k(u,!0)),u},w.prototype.wp=function(u,o,s){var n=s.I();if(n!=0){for(var l=s.ub(0),c=h.O.lg(200,0),d=[],f=0;f<n;){var m=Math.min(100,n-f);l.Vw(2*f,2*m,c,2,!0);for(var b=0;b<m;++b)d[b]=h.h.construct(c[2*f],c[2*f+1]);u.Qt(o,d,m),f+=m}s.Pc(1993)}},w.Uy=function(u,o,s){if(u==null||o==null||!o.Wc())throw h.i.fa("Invalid Arguement");if(u.B())return u;var n=u.getType();return n==197?(n=new h.Da(u.description)).ad(u,!1):h.aa.yd(n)?(n=new h.Ta(u.description)).oc(u,!0):n=u,(n=h.zb.lj(n,o)).B()?n:h.zb.Fn(n,o,0,n!=u,0,s)},w.nj=function(u,o,s,n){if(u==null||o==null||!o.Wc())throw h.i.fa("Invalid Arguement");if(u.B())return u;var l=u.getType();if(h.aa.Hc(l)){u=h.zb.lj(u,o),l=new h.l,u.A(l);for(var c=h.ta.ty(o,l,!1),d=o.gh(),f=Math.floor((l.v-d.v)/d.R())*d.R()+d.v;f<l.C;)f>l.v+c&&f<l.C-c&&(u=h.zb.uS(u,o,s,f)),f+=d.R()}else{if(l==197)return(l=new h.Da(u.description)).ad(u,!1),w.nj(l,o,s,n);if(h.aa.yd(l))return(l=new h.Ta(u.description)).oc(u,!0),w.nj(l,o,s,n)}return w.Uy(u,o,n)},w}();h.bu=C}(G||(G={})),function(h){var C=function(w){function u(o,s,n,l){var c=w.call(this)||this;return o===void 0?c.description=h.ee.og():n===void 0?c.description=o:(c.description=h.ee.og(),c.ZB(o,s),c.Ql(n,l)),c}return pt(u,w),u.prototype.getType=function(){return 322},u.prototype.Qb=function(){var o=this.sa-this.pa,s=this.na-this.la;return Math.sqrt(o*o+s*s)},u.prototype.Bi=function(o){var s=this.sa-this.pa,n=this.na-this.la;return Math.sqrt(s*s+n*n)<=o},u.prototype.Pn=function(){return!1},u.prototype.kg=function(){var o=new h.h;return o.uc(this.wc(),this.ac()),o},u.cP=function(o,s){return new u(o.x,o.y,s.x,s.y)},u.prototype.bn=function(o){o.Oa(),o.Nf(this.description);var s=new h.l;this.A(s),o.Xo(s),s=1;for(var n=this.description.Aa;s<n;s++)for(var l=this.description.kd(s),c=h.ra.Va(l);s<c;s++){var d=this.Tg(l,0);o.setInterval(l,0,d)}},u.prototype.A=function(o){o.K(this.sa,this.na,this.pa,this.la),o.normalize()},u.prototype.Qo=function(o){o.Oa(),o.Zb(this.sa,this.na,this.Od(0,1,0)),o.Zb(this.pa,this.la,this.Od(1,1,0))},u.prototype.Oc=function(o){if(o instanceof h.Dd){this.vc();var s=new h.h;s.x=this.sa,s.y=this.na,o.Eh(s,s),this.sa=s.x,this.na=s.y,s.x=this.pa,s.y=this.la,o.Eh(s,s),this.pa=s.x,this.la=s.y}else this.vc(),(s=new h.Nd).x=this.sa,s.y=this.na,s.z=this.Od(0,1,0),s=o.fp(s),this.sa=s.x,this.na=s.y,this.tn(0,1,0,s.z),s.x=this.pa,s.y=this.la,s.z=this.Od(1,1,0),s=o.fp(s),this.pa=s.x,this.la=s.y,this.tn(1,1,0,s.z)},u.prototype.Ia=function(){return new u(this.description)},u.prototype.Tx=function(o,s){return(this.pa-o-(this.sa-o))*(this.la-s+(this.na-s))*.5},u.prototype.vx=function(o){return o*this.Qb()},u.prototype.NG=function(o){return o/this.Qb()},u.prototype.DF=function(o){return h.lc.hq(this.sa,this.pa,o)},u.prototype.fR=function(o){return h.lc.hq(this.na,this.la,o)},u.prototype.dl=function(o,s){var n=new h.ig;return this.ah(o,s,n),n.get()},u.prototype.ah=function(o,s,n){if(n==null)throw h.i.N();n.Or(),(n=n.get()).Nf(this.description);var l=new h.h;this.hc(o,l),n.ZB(l.x,l.y),this.hc(s,l),n.Ql(l.x,l.y),l=1;for(var c=this.description.Aa;l<c;l++)for(var d=this.description.Ed(l),f=h.ra.Va(d),m=0;m<f;m++){var b=this.Uc(o,d,m);n.YB(d,m,b),b=this.Uc(s,d,m),n.OB(d,m,b)}},u.prototype.Uc=function(o,s,n){if(s==0)return n==0?this.hc(o).x:this.hc(o).y;switch(h.ra.lz(s)){case 0:return .5>o?this.wv(s,n):this.gv(s,n);case 1:var l=this.wv(s,n);return s=this.gv(s,n),h.lc.hq(l,s,o);case 2:throw h.i.fa("not implemented")}throw h.i.Qa()},u.prototype.fe=function(o,s){var n=this.pa-this.sa,l=this.la-this.na,c=n*n+l*l;return c==0?.5:(o=((o.x-this.sa)*n+(o.y-this.na)*l)/c,s||(0>o?o=0:1<o&&(o=1)),o)},u.prototype.cq=function(o,s,n,l){if(o){if((o=this.la-this.na)==0)return s==this.la?-1:0;if(0>(s=(s-this.na)/o)||1<s)return 0;n!=null&&(n[0]=this.DF(s))}else{if((o=this.pa-this.sa)==0)return s==this.pa?-1:0;if(0>(s=(s-this.sa)/o)||1<s)return 0;n!=null&&(n[0]=this.fR(s))}return l!=null&&(l[0]=s),1},u.prototype.Pe=function(o,s){var n=this.la-this.na;return n==0?o==this.la?s:NaN:(o=(o-this.na)/n,s=this.DF(o),o==1&&(s=this.pa),s)},u.prototype.ru=function(o,s,n){return 0<=this.rp(o.x,o.y,s,n)},u.prototype.vi=function(o,s,n){return 0<=this.rp(o,s,n,!0)},u.prototype.qs=function(o,s){return this.ru(o,s,!1)},u.prototype.rI=function(){if(this.la<this.na||this.la==this.na&&this.pa<this.sa){var o=this.sa;this.sa=this.pa,this.pa=o,o=this.na,this.na=this.la,this.la=o,o=0;for(var s=this.description.Oq-2;o<s;o++){var n=this.ka[o];this.ka[o]=this.ka[o+s],this.ka[o+s]=n}}},u.prototype.uu=function(o,s){(s=h.h.construct(o,s)).sub(this.ac());var n=new h.h;return n.uc(this.wc(),this.ac()),(o=n.wi(s))>(s=8881784197001252e-31*(Math.abs(n.x*s.y)+Math.abs(n.y*s.x)))?-1:o<-s?1:0},u.prototype.rp=function(o,s,n,l){var c=this.sa,d=this.na,f=o-c,m=s-d;if((f=Math.sqrt(f*f+m*m))<=Math.max(n,6661338147750939e-31*f))return l&&f==0?NaN:0;if(f=o-this.pa,m=s-this.la,(f=Math.sqrt(f*f+m*m))<=Math.max(n,6661338147750939e-31*f))return l&&f==0?NaN:1;if(f=this.pa-this.sa,m=this.la-this.na,0<(l=Math.sqrt(f*f+m*m))){var b=1/l,x=o-c,$=s-d,E=x*(f*=b)+$*(m*=b),O=17763568394002505e-31*(Math.abs(x*f)+Math.abs($*m)),R=f;if(f=-m,m=R,E<-(O=Math.max(n,O))||E>l+O)return NaN;if(Math.abs(x*f+$*m)<=Math.max(n,17763568394002505e-31*(Math.abs(x*f)+Math.abs($*m)))&&(.5>=(f=h.O.Rk(E*b,0,1))?(m=this.sa+(this.pa-this.sa)*f,l=this.na+(this.la-this.na)*f):(m=this.pa-(this.pa-this.sa)*(1-f),l=this.la-(this.la-this.na)*(1-f)),h.h.Oy(m,l,o,s)<=n)){if(.5>f){if(h.h.Oy(m,l,c,d)<=n)return 0}else if(h.h.Oy(m,l,this.pa,this.la)<=n)return 1;return f}}return NaN},u.prototype.Nb=function(o){return o!=null&&(o==this||o.constructor===this.constructor&&this.FM(o))},u.prototype.rD=function(o,s,n){var l=n?this.sa:this.pa;n=n?this.na:this.la;var c=new h.h;return c.x=o.pa-l,c.y=o.la-n,!(s.Qh(c)>6661338147750939e-31*s.fD(c))||(c.x=o.sa-l,c.y=o.na-n,s.Qh(c)<=6661338147750939e-31*s.fD(c))},u.prototype.qD=function(o){var s=new h.h;return s.x=this.pa-this.sa,s.y=this.la-this.na,!!this.rD(o,s,!1)&&(s.Sq(),!!this.rD(o,s,!0))},u.NM=function(o,s){var n=o.uu(s.sa,s.na),l=o.uu(s.pa,s.la);return!(0>n&&0>l||0<n&&0<l)&&(n=s.uu(o.sa,o.na),l=s.uu(o.pa,o.la),!(0>n&&0>l||0<n&&0<l)&&((n=o.Qb())>(l=s.Qb())?o.qD(s):s.qD(o)))},u.LM=function(o,s,n){var l=h.h.construct(NaN,NaN),c=o.pa-o.sa,d=o.la-o.na,f=s.pa-s.sa,m=s.la-s.na,b=f*d-c*m;if(b==0)return l;var x=8881784197001252e-31*(Math.abs(f*d)+Math.abs(c*m)),$=s.sa-o.sa,E=s.na-o.na,O=f*E-$*m,R=O/b,k=Math.abs(b);return R<-(f=(8881784197001252e-31*(Math.abs(f*E)+Math.abs($*m))*k+x*Math.abs(O))/(b*b)+2220446049250313e-31*Math.abs(R))||R>1+f||(f=(m=c*E-$*d)/b)<-(c=(8881784197001252e-31*(Math.abs(c*E)+Math.abs($*d))*k+x*Math.abs(m))/(b*b)+2220446049250313e-31*Math.abs(f))||f>1+c||(R=h.O.Rk(R,0,1),c=h.O.Rk(f,0,1),d=o.hc(R),b=s.hc(c),(x=new h.h).uc(d,b),x.length()>n&&(x.add(d,b),x.scale(.5),R=o.fe(x,!1),c=s.fe(x,!1),o=o.hc(R),s=s.hc(c),o.sub(s),o.length()>n)||l.ma(R,c)),l},u.OM=function(o,s,n,l){var c=0;if((o.sa==s.sa&&o.na==s.na||o.sa==s.pa&&o.na==s.la)&&(c++,!l))return 1;if(o.pa==s.sa&&o.la==s.na||o.pa==s.pa&&o.la==s.la){if(++c==2)return 2;if(!l)return 1}return s.vi(o.sa,o.na,n)||s.vi(o.pa,o.la,n)||o.vi(s.sa,s.na,n)||o.vi(s.pa,s.la,n)?1:l&&c!=0||u.NM(o,s)==0?0:1},u.Zx=function(o,s,n,l,c,d){var f=0,m=o.rp(s.sa,s.na,d,!1),b=o.rp(s.pa,s.la,d,!1),x=s.rp(o.sa,o.na,d,!1),$=s.rp(o.pa,o.la,d,!1);return isNaN(m)||(l!=null&&(l[f]=m),c!=null&&(c[f]=0),n!=null&&(n[f]=h.h.construct(s.sa,s.na)),f++),isNaN(b)||(l!=null&&(l[f]=b),c!=null&&(c[f]=1),n!=null&&(n[f]=h.h.construct(s.pa,s.la)),f++),f==2||isNaN(x)||m==0&&x==0||b==0&&x==1||(l!=null&&(l[f]=0),c!=null&&(c[f]=x),n!=null&&(n[f]=h.h.construct(o.sa,o.na)),f++),f==2||isNaN($)||m==1&&$==0||b==1&&$==1||(l!=null&&(l[f]=1),c!=null&&(c[f]=$),n!=null&&(n[f]=h.h.construct(s.pa,s.la)),f++),0<f?(f==2&&l!=null&&l[0]>l[1]&&(o=l[0],l[0]=l[1],l[1]=o,c!=null&&(l=c[0],c[0]=c[1],c[1]=l),n!=null&&(c=h.h.construct(n[0].x,n[0].y),n[0]=n[1],n[1]=c)),f):(f=u.LM(o,s,d),isNaN(f.x)?0:(n!=null&&(n[0]=o.hc(f.x)),l!=null&&(l[0]=f.x),c!=null&&(c[0]=f.y),1))},u.prototype.eG=function(){return 0},u.prototype.op=function(){},u.prototype.toString=function(){return"Line: ["+this.sa.toString()+", "+this.na.toString()+", "+this.pa.toString()+", "+this.la.toString()+"]"},u}(h.SC);h.yb=C}(G||(G={})),function(h){var C=function(){function w(){this.Jm=[],this.ya=-1}return w.prototype.La=function(){return this.ya},w.prototype.next=function(){if(this.Jm!=null&&this.Jm.length!=0){this.ya++;var u=this.Jm[0];return this.Jm=1>=this.Jm.length?[]:this.Jm.slice(1),u}return this.Jm=null},w.prototype.ZX=function(u){this.Jm.push(u)},w.prototype.qe=function(){},w}();h.gL=C}(G||(G={})),function(h){var C;(C=h.SL||(h.SL={}))[C.enumFillRuleOddEven=0]="enumFillRuleOddEven",C[C.enumFillRuleWinding=1]="enumFillRuleWinding";var w=function(u){function o(s,n){var l=u.call(this)||this;if(l.xf=!1,l.Eq=null,l.sq=0,l.rq=0,l.Aj=null,l.Mg=!1,l.nb=null,l.mb=null,l.Ve=null,l.Lj=null,l.Sd=null,l.tq=0,l.gb=0,l.xq=0,n===void 0)l.xf=s,l.Mg=!1,l.tq=0,l.sq=0,l.rq=0,l.wa=0,l.description=h.ee.og();else{if(n==null)throw h.i.N();l.xf=s,l.Mg=!1,l.tq=0,l.sq=0,l.rq=0,l.wa=0,l.description=n}return l.Aj=null,l.gb=0,l}return pt(o,u),o.prototype.tm=function(){return 0<this.tq},o.prototype.Yx=function(){this.vc(),this.Eq==null?this.Eq=new h.Sa(this.description):this.Eq.Nf(this.description)},o.prototype.sx=function(s,n){var l=new h.h;l.x=s,l.y=n,this.Lt(l)},o.prototype.Lt=function(s){this.Yx(),this.Eq.Cb(s),this.Mg=!0},o.prototype.nf=function(s){if(s.B())throw h.i.N();this.Jl(s.description),this.Yx(),s.copyTo(this.Eq),this.Mg=!0},o.prototype.Sx=function(){var s=1;this.Mg&&(this.Yx(),this.nb==null?(this.nb=h.Yc.Oh(2),this.nb.write(0,0),this.mb=h.Yc.Mr(2,0)):(this.nb.resize(this.nb.size+1,0),this.mb.resize(this.mb.size+1,0)),this.xf&&this.mb.write(this.mb.size-2,1),s++);var n=this.wa;this.nb.write(this.nb.size-1,this.wa+s),this.dm(n+s),this.mb.write(this.nb.size-1,0),this.Mg&&(this.Ht(n,this.Eq),this.Mg=!1)},o.prototype.yj=function(s,n){this.Sx(),this.Cb(this.wa-1,s,n)},o.prototype.Ci=function(s){this.Sx(),this.Cb(this.wa-1,s)},o.prototype.lineTo=function(s){this.Sx(),this.Ht(this.wa-1,s)},o.prototype.CU=function(s){if(this.vc(),this.xf)throw h.i.Qa();var n=this.da();if(s>n)throw h.i.Qa();if(this.dc(s)){if(this.mb==null)throw h.i.Qa();var l=this.wa,c=this.Ba(s),d=this.Vc(s);this.dm(this.wa+1),this.mc();for(var f=0,m=this.description.Aa;f<m;f++)if(this.za[f]!=null){var b=h.ra.Va(this.description.Ed(f));this.za[f].Mn(b*d,this.za[f],b*c,b,!0,1,b*l)}for(;n>s;n--)l=this.nb.read(n),this.nb.write(n,l+1);this.mb.KE(s,1)}},o.prototype.Ap=function(){if(this.wx(),s===void 0){this.Mg=!1;var s=this.da()-1}var n=this.mb.read(s);this.mb.write(s,1|n),this.Ve!=null&&(s=this.Vc(s)-1,this.Ve.write(s,1),this.Lj.write(s,-1))},o.prototype.dc=function(s){return!!(1&this.mb.read(s))},o.prototype.Nn=function(s){if(this.dc(s))return!0;var n=this.Ba(s);return!(n>(s=this.Vc(s)-1))&&(n=this.Na(n),s=this.Na(s),n.qb(s))},o.prototype.yv=function(s){return!!(2&this.mb.read(s))},o.prototype.oc=function(s,n){if(this.Jl(s.description),s.getType()!=322)throw h.i.Qa();var l=new h.Sa;(n||this.B())&&(s.To(l),this.nf(l)),s.Po(l),this.lineTo(l)},o.prototype.tp=function(s){var n=this.wa==0;this.sx(s.v,s.G),this.yj(s.v,s.H),this.yj(s.C,s.H),this.yj(s.C,s.G),this.Ap(),this.Mg=!1,n&&this.Lf(256,!1)},o.prototype.ad=function(s,n){if(!s.B()){for(var l=this.wa==0,c=new h.Sa(this.description),d=0;4>d;d++)s.Hf(n?4-d-1:d,c),d==0?this.nf(c):this.lineTo(c);this.Ap(),this.Mg=!1,l&&!n&&this.Lf(256,!1)}},o.prototype.add=function(s,n){for(var l=0;l<s.da();l++)this.addPath(s,l,!n)},o.prototype.addPath=function(s,n,l){this.vf(-1,s,n,l)},o.prototype.Yk=function(s,n){this.Hz(s,n)},o.prototype.Dr=function(s,n,l,c,d){if(d||this.da()!=0||(d=!0),0>n&&(n=s.da()-1),n>=s.da()||0>l||0>c||c>s.rv(n))throw h.i.fa("index out of bounds");if(c!=0){var f=s.dc(n)&&l+c==s.rv(n);if(!f||c!=1){if(this.Mg=!1,this.Jl(s.description),l=s.Ba(n)+l+1,d&&(c++,l--),f&&c--,f=this.wa,this.dm(this.wa+c),this.mc(),d){if(c==0)return;this.nb.add(this.wa),d=s.mb.read(n),d&=-5,this.xf&&(d|=1),this.mb.write(this.mb.size-1,d),this.mb.add(0)}else this.nb.write(this.mb.size-1,this.wa);d=0;for(var m=this.description.Aa;d<m;d++){var b=this.description.kd(d),x=h.ra.Va(b),$=s.description.Pf(b);0>$||s.za[$]==null?this.za[d].Ln(x*f,h.ra.se(b),c*x,x*f):this.za[d].Mn(x*f,s.za[$],x*l,c*x,!0,x,x*f)}if(this.tm()||s.yv(n))throw h.i.Qa();this.Pc(1993)}}},o.prototype.oJ=function(){for(var s=0,n=this.da();s<n;s++)this.FW(s)},o.prototype.FW=function(s){if(this.mc(),s>=this.da())throw h.i.N();var n=this.Ba(s),l=this.Ja(s);s=this.dc(s)?1:0;for(var c=0,d=this.description.Aa;c<d;c++)if(this.za[c]!=null){var f=h.ra.Va(this.description.Ed(c));this.za[c].ni(f*(n+s),f*(l-s),f)}this.Pc(1993)},o.prototype.Zq=function(s){this.mc();var n=this.da();if(0>s&&(s=n-1),s>=n)throw h.i.N();for(var l=this.Ba(s),c=this.Ja(s),d=0,f=this.description.Aa;d<f;d++)if(this.za[d]!=null){var m=h.ra.Va(this.description.Ed(d));this.za[d].En(m*l,m*c,m*this.wa)}for(l=s+1;l<=n;l++)d=this.nb.read(l),this.nb.write(l-1,d-c);if(this.mb==null)for(l=s+1;l<=n;l++)s=this.mb.read(l),this.mb.write(l-1,s);this.nb.resize(n),this.mb.resize(n),this.wa-=c,this.Pg-=c,this.Pc(1993)},o.prototype.vf=function(s,n,l,c){if(n==this||l>=n.da())throw h.i.N();var d=this.da();if(s>d)throw h.i.N();0>s&&(s=d),0>l&&(l=n.da()-1),this.Mg=!1,this.Jl(n.description),n.mc();var f=n.Ba(l),m=n.Ja(l),b=this.wa,x=n.dc(l)&&!c?1:0;this.dm(this.wa+m),this.mc();for(var $=s<d?this.Ba(s):b,E=0,O=this.description.Aa;E<O;E++){var R=this.description.Ed(E),k=n.description.Pf(R),j=h.ra.Va(R);0<=k&&n.za[k]!=null?(x!=0&&this.za[E].Mn($*j,n.za[k],j*f,j,!0,j,j*b),this.za[E].Mn(($+x)*j,n.za[k],j*(f+x),j*(m-x),c,j,j*(b+x))):this.za[E].Ln($*j,h.ra.se(R),j*m,j*b)}for(this.nb.add(b+m),c=d;c>=s+1;c--)f=this.nb.read(c-1),this.nb.write(c,f+m);for(n.yv(l),this.mb.add(0),c=d-1;c>=s+1;c--)d=this.mb.read(c),d&=-5,this.mb.write(c+1,d);d=n.JR().read(l),d&=-5,this.xf&&(d|=1),this.mb.write(s,d)},o.prototype.Hz=function(s,n){var l=-1,c=this.da();if(l>c)throw h.i.N();0>l&&(l=c),this.Mg=!1;var d=this.wa;this.dm(this.wa+n),this.mc();var f=l<c?this.Ba(l):d;if(s!=null)this.za[0].Iz(2*f,s,0,n,!0,2*d);else{var m=h.ra.se(0);this.za[0].Ln(2*f,m,2*n,2*d)}s=1;for(var b=this.description.Aa;s<b;s++){m=this.description.kd(s);var x=h.ra.Va(m);m=h.ra.se(m),this.za[s].Ln(f*x,m,x*n,x*d)}for(this.nb.add(this.wa),d=c;d>=l+1;d--)f=this.nb.read(d-1),this.nb.write(d,f+n);for(this.mb.add(0),d=c-1;d>=l+1;d--)n=this.mb.read(d),n&=-5,this.mb.write(d+1,n);this.xf&&this.mb.write(l,1)},o.prototype.qG=function(s,n,l){var c=-1;if(0>s&&(s=this.da()),s>this.da()||c>this.Ja(s)||l>n.length)throw h.i.fa("index out of bounds");if(l!=0){s==this.da()&&(this.nb.add(this.wa),this.xf?this.mb.add(1):this.mb.add(0)),0>c&&(c=this.Ja(s)),this.mc();var d=this.wa;this.dm(this.wa+l),this.mc();for(var f=0,m=this.description.Aa;f<m;f++){var b=this.description.Ed(f),x=h.ra.Va(b);this.za[f].Ut(x*(this.Ba(s)+c+l),(d-this.Ba(s)-c)*x,this.za[f],x*(this.Ba(s)+c),!0,x),f==0?this.za[f].vC(x*(this.Ba(s)+c),l,n,0,!0):this.za[f].Wj(h.ra.se(b),(this.Ba(s)+c)*x,l*x)}for(this.tm()&&(this.Ve.Ut(this.Ba(s)+c+l,d-this.Ba(s)-c,this.Ve,this.Ba(s)+c,!0,1),this.Lj.Ut(this.Ba(s)+c+l,d-this.Ba(s)-c,this.Lj,this.Ba(s)+c,!0,1),this.Ve.Wj(1,this.Ba(s)+c,l),this.Lj.Wj(-1,this.Ba(s)+c,l)),s+=1,n=this.da();s<=n;s++)this.nb.write(s,this.nb.read(s)+l)}},o.prototype.wf=function(s,n,l){var c=this.da();if(0>s&&(s=this.da()),s>=c||n>this.Ja(s))throw h.i.fa("index out of bounds");s==this.da()&&(this.nb.add(this.wa),this.xf?this.mb.add(1):this.mb.add(0)),0>n&&(n=this.Ja(s));var d=this.wa;this.dm(this.wa+1),this.mc();var f=this.Ba(s);this.za[0].vj(2*(f+n),l,2*d),l=1;for(var m=this.description.Aa;l<m;l++){var b=this.description.Ed(l),x=h.ra.Va(b);this.za[l].Ln(x*(f+n),h.ra.se(b),x,x*d)}for(s+=1;s<=c;s++)this.nb.write(s,this.nb.read(s)+1)},o.prototype.DB=function(s,n){var l=this.da();if(0>s&&(s=l-1),s>=l||n>=this.Ja(s))throw h.i.fa("index out of bounds");this.mc();var c=this.Ba(s);0>n&&(n=this.Ja(s)-1),n=c+n,c=0;for(var d=this.description.Aa;c<d;c++)if(this.za[c]!=null){var f=h.ra.Va(this.description.Ed(c));this.za[c].En(f*n,f,f*this.wa)}for(;l>=s+1;l--)n=this.nb.read(l),this.nb.write(l,n-1);this.wa--,this.Pg--,this.Pc(1993)},o.prototype.uE=function(s,n,l){var c=this.Ba(s)+n;if((l=this.Ba(l)+void 0)<c||0>c||l>this.I()-1)throw h.i.N();n=0,(s=this.Ga()).Vb(c);do{for(;s.Ha()&&(c=s.ha(),s.wb()!=l);)n+=c=c.Qb();if(s.wb()==l)break}while(s.$a());return n},o.prototype.fO=function(s,n,l){if(n=this.Ba(s)+n,l=this.Ba(s)+l,0>n||l>this.I()-1)throw h.i.N();var c=this.Ga();if(n>l){if(!this.dc(s))throw h.i.N("cannot iterate across an open path");c.JB()}var d=s=0;c.Vb(n);do d+=s,s=c.ha().Qb();while(c.wb()!=l);return d},o.prototype.mg=function(){return h.pi.gm(this,null)},o.prototype.KS=function(s,n,l){for(var c=s;c<l-1;c++)if(this.dc(c))throw h.i.N("cannot interpolate across closed paths");if((c=this.description.Aa)!=1){var d=this.uE(s,n,l);if(d!=0)for(var f=1;f<c;f++){var m=this.description.kd(f);if(h.ra.lz(m)!=2)for(var b=h.ra.Va(m),x=0;x<b;x++)this.MS(m,s,n,l,d,x)}}},o.prototype.JS=function(s,n,l){var c=this.description.Aa;if(c!=1){var d=this.fO(s,n,l);if(d!=0)for(var f=1;f<c;f++){var m=this.description.kd(f);if(h.ra.lz(m)!=2)for(var b=h.ra.Va(m),x=0;x<b;x++)this.LS(m,s,n,l,d,x)}}},o.prototype.MS=function(s,n,l,c,d,f){var m=this.Ga(),b=this.Ba(n)+l;c=this.Ba(c)+void 0,n=this.Uc(s,b,f),l=this.Uc(s,c,f);var x=n,$=0;m.Vb(b);do if(m.Ha()){if(m.ha(),m.wb()==c)break;this.setAttribute(s,m.wb(),f,x),m.li();do{if(b=m.ha(),m.ik()==c)return;$+=b=b.Qb(),x=h.lc.hq(n,l,$/d),m.On()||this.setAttribute(s,m.ik(),f,x)}while(m.Ha())}while(m.$a())},o.prototype.LS=function(s,n,l,c,d,f){var m=this.Ga(),b=this.Ba(n)+l;if((n=this.Ba(n)+c)!=b){c=this.Uc(s,b,f),l=this.Uc(s,n,f);var x=0;m.Vb(b),m.JB(),b=c;do{var $=m.ha();this.setAttribute(s,m.wb(),f,b),x+=b=$.Qb(),b=h.lc.hq(c,l,x/d)}while(m.ik()!=n)}},o.prototype.Oa=function(){this.tq=0,this.Mg=!1,this.Sd=this.Ve=this.Lj=this.mb=this.nb=null,this.wD()},o.prototype.Oc=function(s){s instanceof h.Dd?this.YD(s,-1):this.wN(s)},o.prototype.YD=function(s,n){if(!this.B()&&!s.isIdentity()){this.mc();var l=this.za[0],c=new h.h,d=new h.h;if(0>n){var f=this.tm(),m=0;n=this.wa}else f=this.yv(n),m=this.Ba(n),n=this.Vc(n);for(;m<n;m++){if(c.x=l.read(2*m),c.y=l.read(2*m+1),f){var b=this.Lj.read(m);if(0<=b)switch(7&this.Ve.read(m)){case 2:d.x=this.Sd.read(b),d.y=this.Sd.read(b+1),s.Eh(d,d),this.Sd.write(b,d.x),this.Sd.write(b+1,d.y),d.x=this.Sd.read(b+3),d.y=this.Sd.read(b+4),s.Eh(d,d),this.Sd.write(b+3,d.x),this.Sd.write(b+4,d.y);break;case 4:throw h.i.Qa()}}s.Eh(c,c),l.write(2*m,c.x),l.write(2*m+1,c.y)}this.Pc(1993)}},o.prototype.wN=function(s){if(!this.B()){this.re(1),this.mc();for(var n=this.za[0],l=this.za[1],c=new h.Nd,d=new h.Nd,f=this.tm(),m=0;m<this.wa;m++){if(c.x=n.read(2*m),c.y=n.read(2*m+1),c.z=l.read(m),f){var b=this.Lj.read(m);if(0<=b)switch(7&this.Ve.read(m)){case 2:d.x=this.Sd.read(b),d.y=this.Sd.read(b+1),d.z=this.Sd.read(b+2),d=s.fp(d),this.Sd.write(b,d.x),this.Sd.write(b+1,d.y),this.Sd.write(b+1,d.z),d.x=this.Sd.read(b+3),d.y=this.Sd.read(b+4),d.z=this.Sd.read(b+5),d=s.fp(d),this.Sd.write(b+3,d.x),this.Sd.write(b+4,d.y),this.Sd.write(b+5,d.z);break;case 4:throw h.i.Qa()}}c=s.fp(c),n.write(2*m,c.x),n.write(2*m+1,c.y),l.write(m,c.z)}this.Pc(1993)}},o.prototype.iy=function(){this.nb==null&&(this.nb=h.Yc.Oh(1,0),this.mb=h.Yc.Mr(1,0)),this.Ve!=null&&(this.Ve.resize(this.Pg,1),this.Lj.resize(this.Pg,-1))},o.prototype.op=function(s){s.Mg=!1,s.tq=this.tq,s.xq=this.xq,s.nb=this.nb!=null?h.ia.Bn(this.nb):null,s.mb=this.mb!=null?h.pn.Bn(this.mb):null,s.Lj=this.Lj!=null?h.ia.Bn(this.Lj):null,s.Ve=this.Ve!=null?h.pn.Bn(this.Ve):null,s.Sd=this.Sd!=null?h.be.Bn(this.Sd):null,s.sq=this.sq,s.rq=this.rq,s.Aj=this.ak(1024)?null:this.Aj},o.prototype.Qb=function(){if(!this.ak(512))return this.sq;for(var s=this.Ga(),n=new h.Fx(0);s.$a();)for(;s.Ha();)n.add(s.ha().Qb());return this.sq=n.rm(),this.Lf(512,!1),n.rm()},o.prototype.Nb=function(s){if(s==this)return!0;if(!(s instanceof o&&u.prototype.Nb.call(this,s)))return!1;var n=this.da();return!(n!=s.da()||this.nb!=null&&!this.nb.Nb(s.nb,0,n+1)||this.xq!=s.xq||this.mb!=null&&!this.mb.Nb(s.mb,0,n))&&u.prototype.Nb.call(this,s)},o.prototype.Ga=function(){return new h.YL(this)},o.prototype.hy=function(s){if(u.prototype.hy.call(this,s),this.tm())for(s=this.Ga();s.$a();)s.Ha()},o.prototype.yp=function(s,n){if(u.prototype.yp.call(this,s,n),this.tm())for(s=this.Ga();s.$a();)s.Ha()},o.prototype.$x=function(){this.wa=this.nb==null||this.nb.size==0?0:this.nb.read(this.nb.size-1)},o.prototype.Ke=function(){return this.xf?(this.xu(),this.rq):0},o.prototype.Ev=function(s){return!!this.xf&&(this.ak(8)?(this.xu(),0<this.Aj.read(s)):!!(4&this.mb.read(s)))},o.prototype.Ir=function(s){return this.xf?(this.xu(),this.Aj.read(s)):0},o.prototype.xu=function(){if(this.ak(1024)){var s=this.da();this.Aj==null?this.Aj=new h.be(s):this.Aj.size!=s&&this.Aj.resize(s),s=new h.Fx(0);for(var n=new h.Fx(0),l=new h.h,c=0,d=this.Ga();d.$a();){for(n.reset(),this.D(this.Ba(d.gb),l);d.Ha();)n.add(d.ha().Tx(l.x,l.y));s.add(n.rm());var f=c++;this.Aj.write(f,n.rm())}this.rq=s.rm(),this.Lf(1024,!1)}},o.prototype.FR=function(){if(this.xf){this.fm();for(var s=this.da(),n=0;n<s;n++)4&this.mb.read(n)}},o.prototype.fm=function(){if(this.ak(8)){this.xu();var s=this.da();(this.mb==null||this.mb.size<s)&&(this.mb=h.Yc.Mr(s+1));for(var n=1,l=0;l<s;l++){var c=this.Aj.read(l);l==0&&(n=0<c?1:-1),0<c*n?this.mb.zJ(l,4):this.mb.KE(l,4)}this.Lf(8,!1)}},o.prototype.sz=function(s){var n=this.gb,l=this.da();if(0<=n&&n<l){if(s<this.Vc(n)){if(s>=this.Ba(n))return n;n--}else n++;if(0<=n&&n<l&&s>=this.Ba(n)&&s<this.Vc(n))return this.gb=n}if(5>l){for(n=0;n<l;n++)if(s<this.Vc(n))return this.gb=n;throw h.i.fa("corrupted geometry")}for(n=0,--l;l>n;){var c=n+(l-n>>1);if(s<this.Ba(c))l=c-1;else{if(!(s>=(n=this.Vc(c))))return this.gb=c;n=c+1}}return this.gb=n},o.prototype.yz=function(){var s=this.I();if(!this.xf){s-=this.da();for(var n=0,l=this.da();n<l;n++)this.dc(n)&&s++}return s},o.prototype.rv=function(s){var n=this.Ja(s);return this.dc(s)||n--,n},o.prototype.Ia=function(){return new o(this.xf,this.description)},o.prototype.Db=function(){return this.xf?2:1},o.prototype.getType=function(){return this.xf?1736:1607},o.prototype.QJ=function(s){this.nb=s,this.Pc(16777215)},o.prototype.VR=function(){return this.wx(),this.Ve},o.prototype.JR=function(){return this.wx(),this.mb},o.prototype.PJ=function(s){this.mb=s,this.Pc(16777215)},o.prototype.da=function(){return this.nb!=null?this.nb.size-1:0},o.prototype.Vc=function(s){return this.nb.read(s+1)},o.prototype.Ja=function(s){return this.nb.read(s+1)-this.nb.read(s)},o.prototype.Ba=function(s){return this.nb.read(s)},o.prototype.lu=function(s,n){this.Bb==null&&(this.Bb=new h.Uk),n=h.Nx.pW(n);var l=this.Bb.Fk;if(l!=null){if(!(l.Ik<s||n>l.RR()))return!0;this.Bb.yD(null)}return l=h.Nx.create(this,s,n),this.Bb.yD(l),!0},o.prototype.cc=function(){var s=u.prototype.cc.call(this);if(!this.Ac()){var n=this.da();this.nb!=null&&this.nb.An(s,0,n+1),this.mb!=null&&this.mb.An(s,0,n)}return s},o.prototype.ZF=function(s){return this.Ve!=null?this.Ve.read(s):1},o.prototype.bc=function(s,n,l){var c=this.sz(s);if(s==this.Vc(c)-1&&!this.dc(c))throw h.i.fa("index out of bounds");this.mc();var d=this.Ve,f=1;if(d!=null&&(f=7&d.read(s)),f!==1)throw h.i.Qa();if(n.Or(),n=n.get(),l?n.Nf(h.ee.og()):n.Nf(this.description),c=s==this.Vc(c)-1&&this.dc(c)?this.Ba(c):s+1,d=new h.h,this.D(s,d),n.Dc(d),this.D(c,d),n.Qc(d),!l)for(l=1,d=this.description.Aa;l<d;l++){f=this.description.Ed(l);for(var m=h.ra.Va(f),b=0;b<m;b++){var x=this.Uc(f,s,b);n.YB(f,b,x),x=this.Uc(f,c,b),n.OB(f,b,x)}}},o.prototype.Rj=function(s,n){if(s>=this.da())throw h.i.N();if(this.B())n.Oa();else{if(this.yv(s))throw h.i.fa("not implemented");var l=this.ub(0),c=new h.h,d=new h.l;d.Oa();var f=this.Ba(s);for(s=this.Vc(s);f<s;f++)l.tc(2*f,c),d.Zb(c);n.K(d)}},o.prototype.fj=function(s){return this.Bb==null&&(this.Bb=new h.Uk),!(s==0||16>this.I())&&(s=h.ta.nE(this),this.Bb.WM(s),!0)},o.prototype.hM=function(){if(this.Bb==null&&(this.Bb=new h.Uk),this.Bb.zo==null){this.Bb.xD(null);var s=h.ta.YN(this);this.Bb.xD(s)}},o.prototype.Yo=function(s){this.xq=s},o.prototype.In=function(){return this.xq},o.prototype.DD=function(s){if(this==s)throw h.i.fa("MultiPathImpl.add");for(var n=this.da(),l=0;l<s.da();l++)this.addPath(s,l,!0),this.CU(n),n++},o.prototype.kO=function(s){var n=this.sz(s),l=this.Ba(n);if(l!=s){if(s>=(n=this.Vc(n))||s<l)throw h.i.fa("change_ring_start_point");for(var c=0,d=this.description.Aa;c<d;c++){var f=this.description.kd(c);f=h.ra.Va(f),this.za[c].rotate(l*f,s*f,n*f)}}},o}(h.Gx);h.Vk=w}(G||(G={})),function(h){var C=function(w){function u(o){var s=w.call(this)||this;if(o!==void 0){if(o==null)throw h.i.N();s.description=o}else s.description=h.ee.og();return s.wa=0,s}return pt(u,w),u.prototype.Ia=function(){return new u(this.description)},u.prototype.add=function(o){this.resize(this.wa+1),this.Dh(this.wa-1,o)},u.prototype.Bu=function(o,s){this.resize(this.wa+1);var n=new h.h;n.ma(o,s),this.Cb(this.wa-1,n)},u.prototype.Fd=function(o,s,n){if(n=0>n?o.I():n,0>s||s>o.I()||n<s)throw h.i.N();if(s!=n){this.Jl(o.description),n-=s;var l=this.wa;this.resize(this.wa+n),this.mc();for(var c=0,d=o.description.Aa;c<d;c++){var f=o.description.Ed(c),m=h.ra.Va(f),b=this.ub(f);f=o.ub(f),b.Mn(l*m,f,s*m,n*m,!0,1,l*m)}}},u.prototype.HD=function(o,s){var n=o.length;if(s=0>s?n:s,0>n||0>s)throw h.i.N();if(s!=0){n=s-0,s=this.wa,this.resize(this.wa+n);for(var l=0;l<n;l++)this.Cb(s+l,o[0+l])}},u.prototype.DB=function(o){if(0>o||o>=this.I())throw h.i.fa("index out of bounds");this.mc();for(var s=0,n=this.description.Aa;s<n;s++)if(this.za[s]!=null){var l=h.ra.Va(this.description.Ed(s));this.za[s].En(l*o,l,l*this.wa)}this.wa--,this.Pg--,this.Pc(1993)},u.prototype.resize=function(o){this.dm(o)},u.prototype.op=function(){},u.prototype.Oa=function(){w.prototype.wD.call(this)},u.prototype.Oc=function(o){if(o instanceof h.Dd){if(this.B())return;this.mc();for(var s=this.za[0],n=new h.h,l=0;l<this.wa;l++)n.x=s.read(2*l),n.y=s.read(2*l+1),o.Eh(n,n),s.write(2*l,n.x),s.write(2*l+1,n.y)}else{if(this.B())return;this.mc(),this.re(1),this.mc(),s=this.za[0],n=this.za[1];var c=new h.Nd;for(l=0;l<this.wa;l++){c.x=s.read(2*l),c.y=s.read(2*l+1),c.z=n.read(l);var d=o.fp(c);s.write(2*l,d.x),s.write(2*l+1,d.y),n.write(l,d.z)}}this.Pc(1993)},u.prototype.Db=function(){return 0},u.prototype.getType=function(){return 550},u.prototype.Ke=function(){return 0},u.prototype.Qb=function(){return 0},u.prototype.Nb=function(o){return o==this||o instanceof u&&w.prototype.Nb.call(this,o)},u.prototype.lW=function(o,s){var n=this.wa;if(n=Math.min(n,s+1e3),0>s||s>=this.wa||n<s||o.length!=1e3)throw h.i.N();var l=n-s,c=[];for(this.ub(0).Vw(2*s,2*l,c,0,!0),s=0;s<l;s++)o[s]=h.h.construct(c[2*s],c[2*s+1]);return n},u.prototype.$x=function(){},u.prototype.iy=function(){},u.prototype.lu=function(){return!1},u.prototype.fj=function(){return!1},u.prototype.mg=function(){return null},u}(h.Gx);h.de=C}(G||(G={})),function(h){var C;(C=h.iL||(h.iL={}))[C.NotDetermined=0]="NotDetermined",C[C.Structure=1]="Structure",C[C.DegenerateSegments=2]="DegenerateSegments",C[C.Clustering=3]="Clustering",C[C.Cracking=4]="Cracking",C[C.CrossOver=5]="CrossOver",C[C.RingOrientation=6]="RingOrientation",C[C.RingOrder=7]="RingOrder",C[C.OGCPolylineSelfTangency=8]="OGCPolylineSelfTangency",C[C.OGCPolygonSelfTangency=9]="OGCPolygonSelfTangency",C[C.OGCDisconnectedInterior=10]="OGCDisconnectedInterior";var w=function(){function u(o,s,n){o===void 0?(this.Jj=0,this.Ko=this.Jo=-1):(this.Jj=o,this.Jo=s,this.Ko=n)}return u.prototype.Wt=function(o){this.Jj=o.Jj,this.Jo=o.Jo,this.Ko=o.Ko},u}();h.Md=w}(G||(G={})),function(h){h.O=function(){function C(){}return C.assert=function(w){if(w===!1)throw h.i.GK()},C.bK=function(w){return isNaN(w)?NaN:w===0?w:0<w?1:-1},C.Fu=function(w){var u;u===void 0&&(u=0);for(var o=[],s=0;s<w;s++)o[s]=C.lg(2,u);return o},C.lg=function(w,u){u===void 0&&(u=0);for(var o=[],s=0;s<w;s++)o[s]=u;return o},C.$u=function(w,u){var o,s;for(o===void 0&&(o=0),s===void 0&&(s=w.length-1);o<=s;o++)w[o]=u},C.Rk=function(w,u,o){return w<u?u:w>o?o:w},C.Th=function(w,u){var o=5381;return((o=((o=((o=u!==void 0?(u<<5)+u+(255&w):(o<<5)+o+(255&w))<<5)+o+(w>>8&255))<<5)+o+(w>>16&255))<<5)+o+(w>>24&255)&2147483647},C.uj=function(){throw Error("Not Implemented")},C.bB=function(w){return C.aU(w)+12345&2147483647},C.XG=function(w){var u=32,o=w%C.Qx|0,s=w/C.Qx|0;return(u&=63)==0?w:(32>u?(w=o>>>u|s<<32-u,u=s>>u):(w=s>>u-32,u=0<=s?0:-1),u*C.Qx+(w>>>0))},C.aU=function(w){var u=1103515245,o=65535&u;return((u-o)*(w|=0)|0)+(o*w|0)|0},C.truncate=function(w){return 0>w?-1*Math.floor(Math.abs(w)):Math.floor(w)},C.MAX_SAFE_INTEGER=Math.pow(2,53)-1,C.MIN_SAFE_INTEGER=-C.MAX_SAFE_INTEGER,C.VC=65536,C.Qx=C.VC*C.VC,C}()}(G||(G={})),function(h){var C;(C=h.CL||(h.CL={}))[C.Project=0]="Project",C[C.Union=1]="Union",C[C.Difference=2]="Difference",C[C.Proximity2D=3]="Proximity2D",C[C.Relate=4]="Relate",C[C.Equals=5]="Equals",C[C.Disjoint=6]="Disjoint",C[C.Intersects=7]="Intersects",C[C.Within=8]="Within",C[C.Contains=9]="Contains",C[C.Crosses=10]="Crosses",C[C.Touches=11]="Touches",C[C.Overlaps=12]="Overlaps",C[C.Buffer=13]="Buffer",C[C.Distance=14]="Distance",C[C.Intersection=15]="Intersection",C[C.Clip=16]="Clip",C[C.Cut=17]="Cut",C[C.DensifyByLength=18]="DensifyByLength",C[C.DensifyByAngle=19]="DensifyByAngle",C[C.LabelPoint=20]="LabelPoint",C[C.GeodesicBuffer=21]="GeodesicBuffer",C[C.GeodeticDensifyByLength=22]="GeodeticDensifyByLength",C[C.ShapePreservingDensify=23]="ShapePreservingDensify",C[C.GeodeticLength=24]="GeodeticLength",C[C.GeodeticArea=25]="GeodeticArea",C[C.Simplify=26]="Simplify",C[C.SimplifyOGC=27]="SimplifyOGC",C[C.Offset=28]="Offset",C[C.Generalize=29]="Generalize",C[C.SymmetricDifference=30]="SymmetricDifference",C[C.ConvexHull=31]="ConvexHull",C[C.Boundary=32]="Boundary",C[C.SimpleRelation=33]="SimpleRelation";var w=function(){function u(){}return u.prototype.getType=function(){return null},u.prototype.wn=function(){},u.prototype.Iu=function(){return!1},u}();h.Je=w}(G||(G={})),function(h){var C=function(w){function u(){return w!==null&&w.apply(this,arguments)||this}return pt(u,w),u.prototype.getType=function(){return 13},u.local=function(){return u.instance===null&&(u.instance=new u),u.instance},u.prototype.V=function(o,s,n,l,c){return o instanceof h.aa?(c=new h.Zc(o),this.V(c,s,[n],!1,l).next()):l===!0?(n=new h.BC(o,s,n,!1,c),h.Gh.local().V(n,s,c)):new h.BC(o,s,n,!1,c)},u.instance=null,u}(h.Je);h.AC=C}(G||(G={})),function(h){var C=function(){function w(u,o,s,n,l){this.ya=-1,this.Rd=u,this.$z=o,this.Cs=s,this.tT=new h.l,this.tT.Oa(),this.eo=-1,this.Ub=l}return w.prototype.next=function(){for(var u;(u=this.Rd.next())!=null;)return this.ya=this.Rd.La(),this.eo+1<this.Cs.length&&this.eo++,this.buffer(u,this.Cs[this.eo]);return null},w.prototype.La=function(){return this.ya},w.prototype.buffer=function(u,o){return h.HK.buffer(u,o,this.$z,NaN,96,this.Ub)},w.prototype.qe=function(){},w}();h.BC=C}(G||(G={})),function(h){var C=function(w){function u(){return w!==null&&w.apply(this,arguments)||this}return pt(u,w),u.prototype.getType=function(){return 16},u.local=function(){return u.instance===null&&(u.instance=new u),u.instance},u.prototype.V=function(o,s,n,l){return o instanceof h.aa?(o=new h.Zc(o),this.V(o,s,n,l).next()):new h.lL(o,s,n,l)},u.instance=null,u}(h.Je);h.kL=C}(G||(G={})),function(h){var C=function(){function w(u,o,s){if(this.ya=-1,u==null)throw h.i.N();this.$=o,this.yk=u,this.qa=h.ta.Wd(s,o,!1)}return w.prototype.next=function(){var u;return(u=this.yk.next())!=null?(this.ya=this.yk.La(),h.Ud.clip(u,this.$,this.qa,0)):null},w.prototype.La=function(){return this.ya},w.prototype.qe=function(){},w}();h.lL=C}(G||(G={})),function(h){var C=function(w){function u(){return w!==null&&w.apply(this,arguments)||this}return pt(u,w),u.prototype.getType=function(){return 31},u.local=function(){return u.instance===null&&(u.instance=new u),u.instance},u.prototype.V=function(o,s,n){return o instanceof h.aa?h.DC.rE(o):new h.DC(s,o,n)},u.instance=null,u}(h.Je);h.CC=C}(G||(G={})),function(h){var C=function(){function w(u,o,s){if(this.uA=new h.Zt,this.ya=-1,o==null)throw h.i.N();this.cH=u,this.Ic=!1,this.yk=o,this.Ub=s}return w.prototype.next=function(){if(this.cH){if(!this.Ic){var u=this.dO(this.yk);return this.Ic=!0,u}return null}if(!this.Ic){if((u=this.yk.next())!=null)return this.ya=this.yk.La(),w.rE(u);this.Ic=!0}return null},w.prototype.La=function(){return this.ya},w.prototype.dO=function(u){for(var o;(o=u.next())!=null;)this.uA.Ib(o);return this.uA.cR()},w.prototype.qe=function(){if(!this.Ic){if(!this.cH)throw h.i.fa("Invalid call for non merging convex hull.");var u=this.yk.next();if(u==null)throw h.i.fa("Expects a non-null geometry.");this.uA.Ib(u)}},w.rE=function(u){if(w.VS(u))return u;var o=u.getType();if(h.Vk.yd(o))return(o=new h.Ta(u.description)).oc(u,!0),o;if(o==550&&u.I()==2){var s=new h.Sa;return o=new h.Ta(u.description),u.ve(0,s),o.nf(s),u.ve(1,s),o.lineTo(s),o}return h.Zt.RO(u)},w.VS=function(u){if(u.B())return!0;var o=u.getType();return o==33||o==197||!h.Vk.yd(o)&&(o==550?u.I()==1:o==1607?u.da()==1&&2>=u.I():u.da()==1&&(2>=u.I()||h.Zt.JG(u,0)))},w}();h.DC=C}(G||(G={})),function(h){var C=function(w){function u(){return w!==null&&w.apply(this,arguments)||this}return pt(u,w),u.prototype.getType=function(){return 17},u.local=function(){return u.instance===null&&(u.instance=new u),u.instance},u.prototype.V=function(o,s,n,l,c){return new h.nL(o,s,n,l,c)},u.instance=null,u}(h.Je);h.mL=C}(G||(G={})),function(h){var C=function(){function w(u,o,s,n,l){if(this.Tf=null,o==null||s==null)throw h.i.fa("invalid argument");this.qT=u,this.nA=o,this.lH=s,u=h.ta.mv(o,s),this.qa=h.ta.Wd(n,u,!0),this.kH=-1,this.nd=l}return w.prototype.La=function(){return 0},w.prototype.next=function(){return this.RQ(),++this.kH<this.Tf.length?this.Tf[this.kH]:null},w.prototype.RQ=function(){if(this.Tf==null)switch(this.Tf=[],this.nA.getType()){case 1607:this.TQ();break;case 1736:this.SQ()}},w.prototype.TQ=function(){var u=new h.Ta,o=new h.Ta,s=new h.Ta;this.Tf.push(u),this.Tf.push(o);var n=[];h.LK.JK(this.qT,this.nA,this.lH,this.qa,n,this.nd);for(var l=0;l<n.length;l++){var c=n[l];if(c.bt==0)u.add(c.X,!1);else if(c.bt==1||c.bt==2)o.add(c.X,!1);else if(c.bt==3)this.Tf.push(c.X);else{if(c.bt!=4)throw h.i.fa("internal");s.add(c.X,!1)}}s.B()||u.B()&&o.B()&&!(3<=this.Tf.length)||this.Tf.push(s),u.B()&&o.B()&&3>this.Tf.length&&(this.Tf.length=0)},w.prototype.SQ=function(){var u=new h.ia(0),o=new h.gd,s=o.aF(),n=o.Ib(this.nA),l=o.Ib(this.lH),c=new h.Fg;try{c.Ft(o,this.qa,this.nd),c.dl(s,n,l,u);var d=o.Ne(n),f=new h.Da,m=new h.Da;for(this.Tf.length=0,this.Tf.push(f),this.Tf.push(m),n=0;n<u.size;n++){var b=new h.gd,x=b.Ib(d),$=b.Ib(o.Ne(u.get(n)));c.dr(b,this.nd);var E=c.Av(x,$),O=b.Ne(E);if(!O.B()){var R=o.KF(u.get(n),s);R==2?f.add(O,!1):R==1?m.add(O,!1):this.Tf.push(O);var k=new h.gd;x=k.Ib(d),$=k.Ib(o.Ne(u.get(n))),c.dr(k,this.nd),d=k.Ne(c.im(x,$))}}!d.B()&&0<u.size&&this.Tf.push(d),f.B()&&m.B()&&(this.Tf.length=0)}finally{c.Ug()}},w.prototype.qe=function(){},w}();h.nL=C}(G||(G={})),function(h){var C=function(w){function u(){return w!==null&&w.apply(this,arguments)||this}return pt(u,w),u.prototype.getType=function(){return 18},u.local=function(){return u.instance===null&&(u.instance=new u),u.instance},u.prototype.V=function(o,s,n){if(o instanceof h.aa)return o=new h.Zc(o),this.V(o,s,n).next();if(0>=s)throw h.i.N();return new h.oL(o,s,n)},u.instance=null,u}(h.Je);h.Xl=C}(G||(G={})),function(h){var C=function(){function w(u,o){this.ya=-1,this.Rd=u,this.Ps=o}return w.prototype.La=function(){return this.ya},w.prototype.next=function(){var u;return(u=this.Rd.next())!=null?(this.ya=this.Rd.La(),this.NP(u)):null},w.prototype.NP=function(u){if(u.B()||1>u.Db())return u;var o=u.getType();if(o==1736||o==1607)return this.Ny(u);if(h.aa.yd(o))return this.PP(u);if(o==197)return this.OP(u);throw h.i.Qa()},w.prototype.PP=function(u){if(u.Qb()<=this.Ps)return u;var o=new h.Ta(u.description);return o.oc(u,!0),this.Ny(o)},w.prototype.OP=function(u){var o=new h.Da(u.description);o.ad(u,!1);var s=new h.l;return u.A(s),u=s.ca(),s.R()<=this.Ps&&u<=this.Ps?o:this.Ny(o)},w.prototype.Ny=function(u){for(var o=u.Ia(),s=u.Ga();s.$a();)for(var n=!0;s.Ha();){var l=s.ha();if(l.getType()!=322)throw h.i.fa("not implemented");var c=s.On(),d=l.Qb();if(d>this.Ps){var f=Math.ceil(d/this.Ps);d=new h.Sa(u.description),n&&(l.To(d),o.nf(d));var m=n=1/f,b=0;for(--f;b<f;b++)l.Tw(m,d),o.lineTo(d),m+=n;c?o.Ap():(l.Po(d),o.lineTo(d))}else c?o.Ap():o.oc(l,n);n=!1}return o},w.prototype.qe=function(){},w}();h.oL=C}(G||(G={})),function(h){var C=function(w){function u(){return w!==null&&w.apply(this,arguments)||this}return pt(u,w),u.local=function(){return u.instance===null&&(u.instance=new u),u.instance},u.prototype.getType=function(){return 2},u.prototype.V=function(o,s,n,l){return o instanceof h.aa?(o=new h.Zc(o),s=new h.Zc(s),this.V(o,s,n,l).next()):new h.qL(o,s,n,l)},u.im=function(o,s,n,l){if(o.B()||s.B())return o;var c=o.Db(),d=s.Db();if(c>d)return o;var f=o.getType(),m=s.getType(),b=new h.l,x=new h.l,$=new h.l;o.A(b),s.A(x),$.K(b),$.Zb(x);var E=($=h.ta.Wd(n,$,!0))*Math.sqrt(2)*1.00001,O=new h.l;if(O.K(b),O.W(E,E),!O.isIntersecting(x))return o;if(c==1&&d==2)return u.KV(o,s,m,n,l);if(f==33)switch(h.Vk.yd(m)?(n=new h.Ta(s.description),n.oc(s,!0)):n=s,m){case 1736:return u.XU(o,n,$);case 1607:return u.YU(o,n,$);case 550:return u.VU(o,n,$);case 197:return u.UU(o,n,$);case 33:return u.WU(o,n,$);default:throw h.i.N()}else if(f==550)switch(m){case 1736:return u.nU(o,s,$);case 197:return u.lU(o,s,$);case 33:return u.mU(o,s,$)}return h.Fg.im(o,s,n,l)},u.XU=function(o,s,n){return h.hd.KG(s,o,n)==0?o:o.Ia()},u.YU=function(o,s,n){var l=o.D();s=s.Ga();for(var c=n*Math.sqrt(2)*1.00001,d=c*c,f=new h.l;s.$a();)for(;s.Ha();){var m=s.ha();if(m.A(f),f.W(c,c),f.contains(l)){if(m.qs(l,n))return o.Ia();var b=m.ac();if(h.h.yc(l,b)<=d||(b=m.wc(),h.h.yc(l,b)<=d))return o.Ia()}}return o},u.VU=function(o,s,n){var l=s.ub(0);s=s.I();var c=o.D(),d=new h.h;n=n*Math.sqrt(2)*1.00001,n*=n;for(var f=0;f<s;f++)if(l.tc(2*f,d),h.h.yc(d,c)<=n)return o.Ia();return o},u.UU=function(o,s,n){var l=new h.l;return s.A(l),l.W(n,n),s=o.D(),l.contains(s)?o.Ia():o},u.WU=function(o,s,n){n=n*Math.sqrt(2)*1.00001,n*=n;var l=o.D();return s=s.D(),h.h.yc(l,s)<=n?o.Ia():o},u.nU=function(o,s,n){var l=new h.l;s.A(l),l.W(n,n);for(var c=o.I(),d=!1,f=[],m=0;m<c;m++)f[m]=!1;var b=new h.h;for(m=0;m<c;m++)o.D(m,b),l.contains(b)&&h.hd.Yd(s,b,n)!=0&&(d=!0,f[m]=!0);if(!d)return o;for(s=o.Ia(),m=0;m<c;m++)f[m]||s.Fd(o,m,m+1);return s},u.lU=function(o,s,n){var l=new h.l;s.A(l),l.W(n,n),s=o.I();var c=!1;n=[];for(var d=0;d<s;d++)n[d]=!1;var f=new h.h;for(d=0;d<s;d++)o.D(d,f),l.contains(f)&&(c=!0,n[d]=!0);if(!c)return o;for(l=o.Ia(),d=0;d<s;d++)n[d]||l.Fd(o,d,d+1);return l},u.mU=function(o,s,n){var l=o.ub(0),c=o.I(),d=s.D(),f=new h.h,m=!1;s=[];for(var b=0;b<c;b++)s[b]=!1;for(n=(b=n*Math.sqrt(2)*1.00001)*b,b=0;b<c;b++)l.tc(2*b,f),h.h.yc(f,d)<=n&&(m=!0,s[b]=!0);if(!m)return o;for(l=o.Ia(),b=0;b<c;b++)s[b]||l.Fd(o,b,b+1);return l},u.KV=function(o,s,n,l,c){var d=new h.Fh;o.bn(d);var f=new h.l;return s.A(f),d.Zb(f),d.W(.1*d.R(),.1*d.ca()),(f=new h.Da).ad(d,!1),n==1736?f.add(s,!0):f.ad(s,!0),h.Xj.local().V(o,f,l,c)},u.instance=null,u}(h.Je);h.kp=C}(G||(G={})),function(h){var C=function(){function w(u,o,s,n){this.ts=o==null,this.ya=-1,this.Rd=u,this.$z=s,this.wT=o.next(),this.Ub=n}return w.prototype.next=function(){return this.ts?null:(u=this.Rd.next())!=null?(this.ya=this.Rd.La(),h.kp.im(u,this.wT,this.$z,this.Ub)):null;var u},w.prototype.La=function(){return this.ya},w.prototype.qe=function(){},w}();h.qL=C}(G||(G={})),function(h){var C=function(){function u(o){this.nd=o,this.Bj=new h.l,this.Bj.Oa(),this.oh=new h.l,this.oh.Oa()}return u.prototype.Nt=function(){var o=this.Bj.v;this.Bj.v=this.oh.v,this.oh.v=o,o=this.Bj.C,this.Bj.C=this.oh.C,this.oh.C=o,o=this.Bj.G,this.Bj.G=this.oh.G,this.oh.G=o,o=this.Bj.H,this.Bj.H=this.oh.H,this.oh.H=o},u.prototype.eQ=function(o,s){if(this.nd!=null&&!this.nd.progress(-1,-1))throw h.i.fu("user_canceled");var n=!this.Bj.isIntersecting(this.oh);return h.aa.Hc(o.getType())&&h.aa.Hc(s.getType())?o.I()>s.I()?this.gE(o,s,n):(this.Nt(),o=this.gE(s,o,n),this.Nt(),o):o.getType()==550&&h.aa.Hc(s.getType())?(o=this.hE(s,o,n),this.Nt(),o):s.getType()==550&&h.aa.Hc(o.getType())?this.hE(o,s,n):o.getType()==550&&s.getType()==550?o.I()>s.I()?this.iE(o,s):(this.Nt(),o=this.iE(s,o),this.Nt(),o):0},u.prototype.gE=function(o,s,n){var l=o.Ga(),c=s.Ga(),d=new h.l,f=new h.l,m=17976931348623157e292;if(!n&&this.pY(o,s,l,c))return 0;for(;l.$a();)for(;l.Ha();)if((o=l.ha()).A(d),!(d.px(this.oh)>m)){for(;c.$a();)for(;c.Ha();)if((s=c.ha()).A(f),d.px(f)<m&&(s=o.tb(s,n),(s*=s)<m)){if(s==0)return 0;m=s}c.Zi()}return Math.sqrt(m)},u.prototype.hE=function(o,s,n){var l=o.Ga(),c=new h.l,d=17976931348623157e292,f=new h.h,m=s.I();for(n=!n&&o.getType()==1736;l.$a();)for(;l.Ha();){var b=l.ha();if(b.A(c),!(1<m&&c.px(this.oh)>d)){for(var x=0;x<m;x++){if(s.D(x,f),n&&h.hd.Yd(o,f,0)!=0)return 0;var $=b.fe(f,!1);if(f.sub(b.hc($)),($=f.Sk())<d){if($==0)return 0;d=$}}n=!1}}return Math.sqrt(d)},u.prototype.iE=function(o,s){for(var n,l=17976931348623157e292,c=new h.h,d=new h.h,f=o.I(),m=s.I(),b=0;b<f;b++)if(o.D(b,c),!(1<m&&this.oh.iK(c)>l)){for(var x=0;x<m;x++)if(s.D(x,d),(n=h.h.yc(c,d))<l){if(n==0)return 0;l=n}}return Math.sqrt(l)},u.prototype.pY=function(o,s,n,l){if(o.getType()==1736){for(;l.$a();)if(l.Ha()){var c=l.ha();if(h.hd.Yd(o,c.wc(),0)!=0)return!0}l.Zi()}if(s.getType()==1736){for(;n.$a();)if(n.Ha()&&(o=n.ha(),h.hd.Yd(s,o.wc(),0)!=0))return!0;n.Zi()}return!1},u.prototype.gm=function(o,s){return o.B()||s.B()?NaN:(o.A(this.Bj),s.A(this.oh),this.eQ(o,s))},u}(),w=function(u){function o(){return u!==null&&u.apply(this,arguments)||this}return pt(o,u),o.prototype.V=function(s,n,l){if(s==null||n==null)throw h.i.N();if(s.B()||n.B())return NaN;var c=s.getType(),d=n.getType();if(c==33){if(d==33)return h.h.tb(s.D(),n.D());if(d==197)return l=new h.l,n.A(l),l.tb(s.D());(c=new h.de).add(s),s=c}else if(c==197){if(d==197)return d=new h.l,s.A(d),l=new h.l,n.A(l),l.tb(d);(c=new h.Da).ad(s,!1),s=c}return d==33?((d=new h.de).add(n),n=d):d==197&&((d=new h.Da).ad(n,!1),n=d),new C(l).gm(s,n)},o.local=function(){return o.instance===null&&(o.instance=new o),o.instance},o.prototype.getType=function(){return 14},o.instance=null,o}(h.Je);h.rL=w}(G||(G={})),function(h){var C=function(){function w(u,o,s,n){this.zH=u,this.DH=o,this.nd=n,this.$G=s}return w.prototype.next=function(){var u=this.zH.next();return u==null?null:this.zC(u)},w.prototype.La=function(){return this.zH.La()},w.prototype.zC=function(u){var o=u.getType();if(h.aa.Rn(o))return u;if(o==197)return(o=new h.Da(u.description)).ad(u,!1),this.zC(o);if(u.B())return u;if(u==null)throw h.i.Qa();o=u.Ia();for(var s=new h.yb,n=0,l=u.da();n<l;n++)this.TK(u,n,o,s);return o},w.prototype.TK=function(u,o,s,n){if(!(2>u.Ja(o))){var l=u.Ba(o),c=u.Vc(o)-1,d=u.ub(0),f=u.dc(o),m=new h.ia(0);m.Jb(u.Ja(o)+1);var b=new h.ia(0);for(b.Jb(u.Ja(o)+1),m.add(f?l:c),m.add(l),l=new h.h;1<m.size;){var x=m.Fc();m.If();var $=m.Fc();u.D(x,l),n.Dc(l),u.D($,l),n.Qc(l),0<=($=this.SK(n,l,d,x,$,c))?(m.add($),m.add(x)):b.add(x)}if(f||b.add(m.get(0)),b.size==m.size)s.addPath(u,o,!0);else if(2<=b.size&&(!this.$G||b.size!=2||!(f||h.h.tb(u.Na(b.get(0)),u.Na(b.get(1)))<=this.DH))){for(o=new h.Sa,n=0,c=b.size;n<c;n++)u.ve(b.get(n),o),n==0?s.nf(o):s.lineTo(o);f&&(this.$G||b.size!=2||s.lineTo(o),s.Ap())}}},w.prototype.SK=function(u,o,s,n,l,c){var d=l-1;for(l<=n&&(d=c),c=l=-1,n+=1;n<=d;n++){s.tc(2*n,o);var f=o.x,m=o.y;u.hc(u.fe(o,!1),o),o.x-=f,o.y-=m,(f=o.length())>this.DH&&f>c&&(l=n,c=f)}return l},w.prototype.qe=function(){},w}();h.sL=C}(G||(G={})),function(h){var C=function(w){function u(){return w!==null&&w.apply(this,arguments)||this}return pt(u,w),u.prototype.getType=function(){return 29},u.prototype.V=function(o,s,n,l){return o instanceof h.aa?(o=new h.Zc(o),this.V(o,s,n,l).next()):new h.sL(o,s,n,l)},u.local=function(){return u.instance===null&&(u.instance=new u),u.instance},u.instance=null,u}(h.Je);h.EC=C}(G||(G={})),function(h){var C=function(w){function u(){return w!==null&&w.apply(this,arguments)||this}return pt(u,w),u.prototype.getType=function(){return 21},u.local=function(){return u.instance===null&&(u.instance=new u),u.instance},u.prototype.V=function(o,s,n,l,c,d,f,m){return o instanceof h.aa?(m=new h.Zc(o),this.V(m,s,n,[l],c,d,!1,f).next()):f===!0?(n=new h.GC(o,s,n,l,c,!1,!1,m),h.Gh.local().V(n,s,m)):new h.GC(o,s,n,l,c,!1,!1,m)},u.instance=null,u}(h.Je);h.FC=C}(G||(G={})),function(h){var C=function(){function w(u,o,s,n,l,c,d,f){if(c)throw h.i.Ie();if(o==null)throw h.i.N();this.ya=-1,this.Ms=u,this.vg=o,this.ze=s,this.Cs=n,this.$n=l,this.eo=-1,this.Ub=f,this.uT=new h.l,this.uT.Oa()}return w.prototype.next=function(){for(var u;(u=this.Ms.next())!=null;)return this.ya=this.Ms.La(),this.eo+1<this.Cs.length&&this.eo++,this.$Q(u,this.Cs[this.eo]);return null},w.prototype.La=function(){return this.ya},w.prototype.$Q=function(u,o){return h.VK.buffer(u,this.vg,this.ze,o,this.$n,this.Ub)},w.prototype.qe=function(){},w}();h.GC=C}(G||(G={})),function(h){var C=function(w){function u(){return w!==null&&w.apply(this,arguments)||this}return pt(u,w),u.prototype.getType=function(){return 24},u.local=function(){return u.instance===null&&(u.instance=new u),u.instance},u.prototype.V=function(o,s,n){if(s==null)throw h.i.N();if(o.B()||1>o.Db())return 0;if(n==4)throw h.i.Ie();var l=h.cb.sc(s),c=h.cb.vv(l),d=h.cb.ev(l);c*=2-c;var f=l.Hd().ai,m=o.getType();if(m==1736||m==197)var b=o.mg();else h.aa.yd(m)?(b=new h.Ta(o.description)).oc(o,!0):b=o;if(l.Nb(s)==0){if(h.cb.Wc(s)){b=h.Hh.lj(b,s),m==1607&&b==o&&(b=h.aa.jg(o)),o=new h.Nc,h.cb.gh(s).cn(o),m=0;for(var x=b.I();m<x;m++){var $=b.Na(m);$.x=h.Hh.Zm($.x,o),b.Cb(m,$)}}o=b.Ia(),b=h.Hh.WI(s,l,b,o)?o:h.cb.zh(b,s,l)}return this.hQ(b,n,d,c,f)},u.prototype.hQ=function(o,s,n,l,c){var d=new h.ga(0),f=0;for(o=o.Ga();o.$a();)for(;o.Ha();){var m=o.ha(),b=m.ac();m=m.wc(),b.scale(c),m.scale(c),h.kb.wd(n,l,b.x,b.y,m.x,m.y,d,null,null,s),f+=d.u}return f},u.instance=null,u}(h.Je);h.vL=C}(G||(G={})),function(h){var C=function(w){function u(){return w!==null&&w.apply(this,arguments)||this}return pt(u,w),u.prototype.getType=function(){return 18},u.local=function(){return u.instance===null&&(u.instance=new u),u.instance},u.prototype.V=function(o,s,n,l,c){return o instanceof h.aa?(o=new h.Zc(o),this.V(o,s,n,l,c).next()):new h.uL(o,n,l,s,-1,-1,c)},u.instance=null,u}(h.Je);h.tL=C}(G||(G={})),function(h){var C=function(){function w(u,o,s,n,l,c){if(0<c||s!=4&&0<l)throw h.i.Ie();if(o==null)throw h.i.N();this.ya=-1,this.Ms=u,this.vg=o,this.ze=s,this.DT=n,this.CT=l}return w.prototype.next=function(){for(var u;(u=this.Ms.next())!=null;)return this.ya=this.Ms.La(),this.Zy(u);return null},w.prototype.La=function(){return this.ya},w.prototype.Zy=function(u){return h.cj.Qr(u,this.vg,this.ze,this.DT,this.CT,this.Ub)},w.prototype.qe=function(){},w}();h.uL=C}(G||(G={})),function(h){(function(C){C[C.Unknown=0]="Unknown",C[C.Contains=1]="Contains",C[C.Within=2]="Within",C[C.Equals=3]="Equals",C[C.Disjoint=4]="Disjoint",C[C.Touches=8]="Touches",C[C.Crosses=16]="Crosses",C[C.Overlaps=32]="Overlaps",C[C.NoThisRelation=64]="NoThisRelation",C[C.Intersects=1073741824]="Intersects",C[C.IntersectsOrDisjoint=1073741828]="IntersectsOrDisjoint"})(h.cL||(h.cL={})),h.wL=function(){function C(){}return C.nW=function(w,u){var o=w.getType(),s=u.getType();if(h.aa.xj(o)){var n=w.Bb;if(n!=null&&(n=n.Fk)!=null){if(s==33){var l=u.D();n=n.So(l.x,l.y)}else l=new h.l,u.A(l),n=n.Ro(l);if(n==1)return 1;if(n==0)return 4}}if(h.aa.xj(s)&&(n=u.Bb)!=null&&(n=n.Fk)!=null){if(o==33?(w=w.D(),n=n.So(w.x,w.y)):(u=new h.l,w.A(u),n=n.Ro(u)),n==1)return 2;if(n==0)return 4}return 0},C}()}(G||(G={})),function(h){var C=function(w){function u(){return w!==null&&w.apply(this,arguments)||this}return pt(u,w),u.local=function(){return u.instance===null&&(u.instance=new u),u.instance},u.prototype.getType=function(){return 15},u.prototype.V=function(o,s,n,l,c){return o instanceof h.aa?(o=new h.Zc(o),s=new h.Zc(s),this.V(o,s,n,l,c===void 0?-1:c).next()):c===void 0?new h.HC(o,s,n,l,-1):new h.HC(o,s,n,l,c)},u.prototype.wn=function(o,s,n){this.Iu(o)&&(s=h.ta.kj(s,o,!1),o.fj(n)||o.lu(s,n))},u.prototype.Iu=function(o){return h.Nx.zE(o)},u.instance=null,u}(h.Je);h.Xj=C}(G||(G={})),function(h){var C=function(){function w(u,o,s,n,l){if(this.ts=o==null,this.ya=-1,this.Rd=u,this.vg=s,this.Se=o.next(),this.Dj=this.Se.getType(),this.Ub=n,this.Fi=l,this.Fi!=-1&&(0>=this.Fi||7<this.Fi))throw h.i.N("bad dimension mask")}return w.prototype.next=function(){if(this.ts)return null;if(this.zw!=null){var u=this.zw.next();if(u!=null)return u;this.zw=null}for(;(u=this.Rd.next())!=null;)return this.ya=this.Rd.La(),this.Fi==-1?u=this.Ea(u):(this.zw=this.PS(u),u=this.zw.next()),u;return null},w.prototype.La=function(){return this.ya},w.prototype.Ea=function(u){var o=this.zK(u);if(o!=null)return o;o=h.ta.mv(this.Se,u);var s=h.ta.Wd(this.vg,o,!0);o=new h.l,this.Se.A(o);var n=new h.l;return u.A(n),o.W(2*s,2*s),o.Ea(n),o.W(100*s,100*s),s=h.Ud.clip(this.Se,o,0,0),u=h.Ud.clip(u,o,0,0),h.Fg.Av(u,s,this.vg,this.Ub)},w.prototype.QI=function(u,o,s){var n=0;if(1&o)s[0]==null&&(s[0]=new h.de(u)),n++;else for(var l=0;l<s.length-1;l++)s[l]=s[l+1];if(2&o)s[n]==null&&(s[n]=new h.Ta(u)),n++;else for(l=n;l<s.length-1;l++)s[l]=s[l+1];if(4&o)s[n]==null&&(s[n]=new h.Da(u)),n++;else for(l=n;l<s.length-1;l++)s[l]=s[l+1];if(n!=3){for(u=[],l=0;l<n;l++)u[l]=s[l];return new h.Zc(u)}return new h.Zc(s)},w.prototype.PS=function(u){var o=this.zK(u);if(o!=null){var s=[null,null,null];return s[o.Db()]=o,this.QI(u.description,this.Fi,s)}o=h.ta.mv(this.Se,u),s=h.ta.Wd(this.vg,o,!0),o=new h.l,this.Se.A(o),o.W(2*s,2*s);var n=new h.l;return u.A(n),o.Ea(n),o.W(100*s,100*s),s=h.Ud.clip(this.Se,o,0,0),o=h.Ud.clip(u,o,0,0),s=h.Fg.Pz(o,s,this.vg,this.Ub),this.QI(u.description,this.Fi,s)},w.prototype.zK=function(u){var o=h.ta.mv(u,this.Se),s=h.ta.Wd(this.vg,o,!0);o=u.getType();var n=u.B(),l=this.Se.B();if(!(l=n||l)){l=new h.l,u.A(l);var c=new h.l;this.Se.A(c),c.W(2*s,2*s),l=!l.isIntersecting(c)}if(!l)if((c=h.wL.nW(this.Se,u))==4)l=!0;else{if(2&c)return this.Se;if(1&c)return u}if(l)return(s=h.aa.tf(o))<(l=h.aa.tf(this.Dj))?w.HB(u,n):s>l||s==0&&o==550&&this.Dj==33?this.nJ():w.HB(u,n);if((this.Fi==-1||this.Fi==4)&&o==197&&this.Dj==197)return s=this.Se,o=new h.l,u.A(o),n=new h.l,s.A(n),o.Ea(n),s=new h.Fh,u.copyTo(s),s.Xo(o),s;if(o==197&&h.aa.tf(this.Dj)==0||this.Dj==197&&h.aa.tf(o)==0)return n=o==197?u:this.Se,u=o==197?this.Se:u,o=new h.l,n.A(o),h.Ud.clip(u,o,s,0);if(h.aa.tf(o)==0&&0<h.aa.tf(this.Dj)||0<h.aa.tf(o)&&h.aa.tf(this.Dj)==0){if(s=h.ta.kj(this.vg,u,!1),o==550||o==33)return h.Fg.zG(u,this.Se,s);if(this.Dj==550||this.Dj==33)return h.Fg.zG(this.Se,u,s);throw h.i.Qa()}return this.Fi!=-1&&this.Fi!=2||o!=1607||this.Dj!=1736?this.Fi!=-1&&this.Fi!=2||o!=1736||this.Dj!=1607?null:this.wK(this.Se,u):this.wK(u,this.Se)},w.prototype.wK=function(u,o){var s=u,n=o,l=h.ta.kj(this.vg,o,!1),c=new h.l;n.A(c);var d=new h.l;s.A(d),d.W(2*l,2*l),c.Ea(d),c.W(10*l,10*l),s=u=h.Ud.clip(u,c,0,0),d=new h.ia(0);var f=-1,m=n.Bb;if(m!=null){var b=m.Fk;if(b!=null){f=0,d.Jb(s.I()+s.da());for(var x=new h.l,$=s.Ga();$.$a();)for(;$.Ha();){$.ha().A(x);var E=b.Ro(x);E==1?d.add(1):E==0?d.add(0):(d.add(-1),f++)}}}if(5<o.I()&&(m=(n=o=h.Ud.clip(o,c,0,0)).Bb),0>f&&(f=s.yz()),c=s.I()+n.I(),f*n.I()>Math.log(c)*c*4)return null;c=null,f=n.Ga(),m!=null&&m.Fb!=null&&(c=m.Fb),c==null&&20<n.I()&&(c=h.ta.nE(n)),u=u.Ia(),n=null,m=s.Ga(),b=[0,0,0,0,0,0,0,0,0],x=new h.be(0),$=new h.ig,E=-1;for(var O=0,R=0,k=0<d.size,j=-1;m.$a();){j=m.gb;var F=0;for(E=-1,O=0;m.Ha();){var L=k?h.O.truncate(d.get(R)):-1;R++;var V=m.ha();if(0>L){if(c!=null)for(n==null?n=c.vR(V,l):n.Uo(V,l),L=n.next();L!=-1;L=n.next()){f.Vb(c.ja(L)),L=f.ha();var B=V.Ea(L,null,b,null,l);for(L=0;L<B;L++)x.add(b[L])}else for(f.Zi();f.$a();)for(;f.Ha();)for(L=f.ha(),B=V.Ea(L,null,b,null,l),L=0;L<B;L++)x.add(b[L]);if(0<x.size){x.Vd(0,x.size,function(de,ce){return de-ce});var W=0;x.add(1),B=-1,L=0;for(var K=x.size;L<K;L++){var re=x.get(L);if(re!=W){var ae=!1;if(W!=0||re!=1?(V.ah(W,re,$),W=$.get()):(W=V,ae=!0),2<=F){if(u.Dr(s,j,E,O,F==3),this.QD(o,W.ac(),l)!=1&&this.RD(o,W,l)!=1)return null;u.oc(W,!1),F=1,O=0}else switch(B=this.RD(o,W,l),B){case 1:ae?2>F?(E=m.wb()-s.Ba(j),O=1,F=F==0?3:2):O++:(u.oc(W,F==0),F=1);break;case 0:F=0,E=-1,O=0;break;default:return null}W=re}}}else{if(0>(L=this.QD(o,V.ac(),l)))return null;L==1?(2>F&&(E=m.wb()-s.Ba(j),F=F==0?3:2),O++):(E=-1,O=0)}x.clear(!1)}else L!=0&&L==1&&(F==0?(F=3,E=m.wb()-s.Ba(j)):F==1?(F=2,E=m.wb()-s.Ba(j)):O++)}2<=F&&(u.Dr(s,j,E,O,F==3),E=-1)}return u},w.prototype.QD=function(u,o,s){return h.Dg.wm(u,o,s)},w.prototype.RD=function(u,o,s){var n=o.ac();o=o.wc();var l=h.Dg.wm(u,n,s),c=h.Dg.wm(u,o,s);return l==1&&c==0||l==0&&c==1?-1:l==0||c==0?0:l==1||c==1?1:((l=new h.h).add(n,o),l.scale(.5),(u=h.Dg.wm(u,l,s))==0?0:u==1?1:-1)},w.HB=function(u,o){return o?u:u.Ia()},w.prototype.nJ=function(){return this.yH==null&&(this.yH=this.Se.Ia()),this.yH},w.prototype.qe=function(){},w}();h.HC=C}(G||(G={})),function(h){var C=function(w){function u(){return w!==null&&w.apply(this,arguments)||this}return pt(u,w),u.prototype.getType=function(){return 28},u.local=function(){return u.instance===null&&(u.instance=new u),u.instance},u.prototype.V=function(o,s,n,l,c,d,f){return o instanceof h.aa?(o=new h.Zc(o),this.V(o,s,n,l,c,d,f).next()):new h.xL(o,s,n,l,c,d,f)},u.instance=null,u}(h.Je);h.IC=C}(G||(G={})),function(h){var C=function(){function w(u,o,s,n,l,c,d){this.ya=-1,this.Rd=u,this.Mj=o,this.Ka=s,this.Ki=n,this.CA=l,this.uH=c,this.nd=d}return w.prototype.next=function(){var u=this.Rd.next();return u!=null?(this.ya=this.Rd.La(),this.jL(u)):null},w.prototype.La=function(){return this.ya},w.prototype.jL=function(u){var o=0>=this.uH?h.ta.kj(this.Mj,u,!1):this.uH;return h.IK.V(u,this.Ka,this.Ki,this.CA,o,this.nd)},w.prototype.qe=function(){},w}();h.xL=C}(G||(G={})),function(h){var C;(C=h.NK||(h.NK={}))[C.clipToDomainOnly=1]="clipToDomainOnly",C[C.clipWithHorizon=2]="clipWithHorizon",C[C.foldAndClipWithHorizon=3]="foldAndClipWithHorizon";var w=function(u){function o(){return u!==null&&u.apply(this,arguments)||this}return pt(o,u),o.prototype.getType=function(){return 0},o.local=function(){return o.instance===null&&(o.instance=new o),o.instance},o.prototype.V=function(s,n,l){return s instanceof h.aa?(s=new h.Zc(s),this.V(s,n,l).next()):new h.yL(s,n,l)},o.prototype.transform=function(s,n,l,c){return h.bu.transform(s,n,l,c,!0)},o.prototype.Qt=function(s,n,l,c){return h.bu.Qt(s,n,l,c)},o.instance=null,o}(h.Je);h.Hx=w}(G||(G={})),function(h){var C=function(){function w(u,o,s){this.ya=-1,this.Rd=u,this.MT=o,this.nd=s}return w.prototype.next=function(){var u=this.Rd.next();return u!=null?(this.ya=this.Rd.La(),h.bu.zh(u,this.MT,this.nd)):null},w.prototype.La=function(){return this.ya},w.prototype.qe=function(){},w}();h.yL=C}(G||(G={})),function(h){var C=function(){function u(){}return u.prototype.reset=function(){this.ph=this.xk=-1,this.us=this.kq=!1},u.prototype.AQ=function(o,s,n){for(o.Vb(s,n);o.Ha();){var l=o.ha();if((l=l.Qb())!=0)return o.wb()}for(o.Vb(s,n);o.Ez();)if((l=(l=o.li()).Qb())!=0)return o.wb();return-1},u.prototype.BQ=function(o,s){for(o.Vb(s,-1);o.Ez();)if(o.li().Qb()!=0)return o.wb();return-1},u.prototype.zQ=function(o,s){for(o.Vb(s,-1),o.ha();o.Ha();)if(o.ha().Qb()!=0)return o.wb();return-1},u.prototype.yQ=function(o,s,n,l){if(this.xk=this.AQ(s,n,l),this.xk!=-1){s.Vb(this.xk,-1);var c=s.ha(),d=c.hc(c.fe(o,!1));if(n=h.h.yc(d,o),(l=new h.h).L(d),l.sub(c.ac()),(d=new h.h).L(o),d.sub(c.ac()),this.kq=0>l.wi(d),this.ph=this.zQ(s,this.xk),this.ph!=-1){s.Vb(this.ph,-1);var f=(c=s.ha()).fe(o,!1);f=c.hc(f);var m=h.h.yc(f,o);m>n?this.ph=-1:(l.L(f),l.sub(c.ac()),d.L(o),d.sub(c.ac()),this.us=0>l.wi(d))}this.ph==-1&&(this.ph=this.BQ(s,this.xk),this.ph!=-1&&(s.Vb(this.ph,-1),f=(c=s.ha()).fe(o,!1),f=c.hc(f),(m=h.h.yc(f,o))>n?this.ph=-1:(l.L(f),l.sub(c.ac()),d.L(o),d.sub(c.ac()),this.us=0>l.wi(d),o=this.xk,this.xk=this.ph,this.ph=o,o=this.kq,this.kq=this.us,this.us=o)))}},u.prototype.cO=function(o,s,n,l,c){return n=n.Ga(),this.yQ(o,n,l,c),this.xk!=-1&&this.ph==-1?this.kq:this.xk!=-1&&this.ph!=-1?this.kq==this.us?this.kq:(n.Vb(this.xk,-1),o=n.ha().kg(),n.Vb(this.ph,-1),s=n.ha().kg(),0<=o.wi(s)):s},u}(),w=function(u){function o(){return u!==null&&u.apply(this,arguments)||this}return pt(o,u),o.local=function(){return o.instance===null&&(o.instance=new o),o.instance},o.prototype.getType=function(){return 3},o.prototype.nz=function(s,n,l){var c;if(c===void 0&&(c=!1),s.B())return new h.$l;n=n.D();var d=s,f=s.getType();switch(f==197&&((d=new h.Da).ad(s,!1),f=1736),f){case 33:return this.xI(d,n);case 550:return this.jI(d,n);case 1607:case 1736:return this.bU(d,n,l,c);default:throw h.i.fa("not implemented")}},o.prototype.oz=function(s,n){if(s.B())return new h.$l;n=n.D();var l=s,c=s.getType();switch(c==197&&((l=new h.Da).ad(s,!1),c=1736),c){case 33:return this.xI(l,n);case 550:case 1607:case 1736:return this.jI(l,n);default:throw h.i.fa("not implemented")}},o.prototype.pz=function(s,n,l,c){if(0>c)throw h.i.N();if(s.B())return[];n=n.D();var d=s,f=s.getType();switch(f==197&&((d=new h.Da).ad(s,!1),f=1736),f){case 33:return this.TU(d,n,l,c);case 550:case 1607:case 1736:return this.tU(d,n,l,c);default:throw h.i.fa("not implemented")}},o.prototype.bU=function(s,n,l,c){if(s.getType()==1736&&l&&(l=new h.l,s.A(l),l=h.ta.Wd(null,l,!1),(c?h.hd.Yd(s,n,0):h.hd.Yd(s,n,l))!=0)){var d=new h.$l(n,0,0);return c&&d.WJ(!0),d}var f=s.Ga();d=new h.h;for(var m=l=-1,b=17976931348623157e292,x=0;f.$a();)for(;f.Ha();){var $=f.ha();$=$.hc($.fe(n,!1));var E=h.h.yc($,n);E<b?(x=1,d=$,l=f.wb(),m=f.gb,b=E):E==b&&x++}return d=new h.$l(d,l,Math.sqrt(b)),c&&(f.Vb(l,m),$=f.ha(),c=0>h.h.Uq(n,$.ac(),$.wc()),1<x&&((x=new C).reset(),c=x.cO(n,c,s,l,m)),d.WJ(c)),d},o.prototype.xI=function(s,n){return s=s.D(),n=h.h.tb(s,n),new h.$l(s,0,n)},o.prototype.jI=function(s,n){for(var l=s.ub(0),c=s.I(),d=s=0,f=0,m=17976931348623157e292,b=0;b<c;b++){var x=new h.h;l.tc(2*b,x);var $=h.h.yc(x,n);$<m&&(d=x.x,f=x.y,s=b,m=$)}return(n=new h.$l).ey(d,f,s,Math.sqrt(m)),n},o.prototype.TU=function(s,n,l,c){return c==0?[]:(l*=l,s=s.D(),(n=h.h.yc(s,n))<=l?(l=[],(c=new h.$l).ey(s.x,s.y,0,Math.sqrt(n)),l[0]=c):l=[],l)},o.prototype.tU=function(s,n,l,c){if(c==0)return[];var d=s.ub(0),f=s.I();s=[],l*=l;for(var m=0;m<f;m++){var b=d.read(2*m),x=d.read(2*m+1),$=n.x-b,E=n.y-x;($=$*$+E*E)<=l&&((E=new h.$l).ey(b,x,m,Math.sqrt($)),s.push(E))}return n=s.length,s.sort(function(O,R){return O.Ka<R.Ka?-1:O.Ka==R.Ka?0:1}),c>=n||(s.length=c),s.slice(0)},o.instance=null,o}(h.Je);h.Ix=w}(G||(G={})),function(h){var C=function(w){function u(){return w!==null&&w.apply(this,arguments)||this}return pt(u,w),u.prototype.getType=function(){return 4},u.prototype.V=function(o,s,n,l,c){return h.am.yB(o,s,n,l,c)},u.local=function(){return u.instance===null&&(u.instance=new u),u.instance},u.prototype.Iu=function(o){return h.Vt.wy(o)},u.prototype.wn=function(o,s,n){h.Vt.CD(o,s,n)},u.instance=null,u}(h.Je);h.zL=C}(G||(G={})),function(h){var C=function(w){function u(){return w!==null&&w.apply(this,arguments)||this}return pt(u,w),u.prototype.getType=function(){return 33},u.prototype.V=function(o,s,n,l,c){return o===1073741824?!h.ud.zB(s,n,l,4,c):h.ud.zB(s,n,l,o,c)},u.local=function(){return u.instance===null&&(u.instance=new u),u.instance},u.prototype.Iu=function(o){return h.Vt.wy(o)},u.prototype.wn=function(o,s,n){h.Vt.CD(o,s,n)},u.instance=null,u}(h.Je);h.dj=C}(G||(G={})),function(h){var C=function(){function w(u,o,s,n){if(this.nd=n,this.rT=s,this.ya=-1,u==null)throw h.i.N();this.yk=u,this.Mj=o}return w.prototype.next=function(){var u;if((u=this.yk.next())!=null){if(this.ya=this.yk.La(),this.nd!=null&&!this.nd.progress(-1,-1))throw h.i.fu("user_canceled");return this.eC(u)}return null},w.prototype.La=function(){return this.ya},w.prototype.eC=function(u){if(u==null)throw h.i.N();return h.Jx.cK(u,this.Mj,this.rT,this.nd)},w.prototype.qe=function(){},w}();h.AL=C}(G||(G={})),function(h){var C=function(w){function u(){return w!==null&&w.apply(this,arguments)||this}return pt(u,w),u.prototype.getType=function(){return 26},u.prototype.V=function(o,s,n,l){return o instanceof h.aa?(o=new h.Zc(o),this.V(o,s,n,l).next()):new h.AL(o,s,n,l)},u.prototype.rs=function(o,s,n,l,c){return 0<(l!==void 0?h.Jx.rs(o,s,n,l,c):h.Jx.rs(o,s,!1,null,n))},u.local=function(){return u.instance===null&&(u.instance=new u),u.instance},u.instance=null,u}(h.Je);h.Yl=C}(G||(G={})),function(h){var C=function(){function c(){this.yq=0}return c.prototype.nX=function(d){this.yq&=-2,this.yq|=d?1:0},c.prototype.Wp=function(){return!!(1&this.yq)},c.prototype.XF=function(){return this.Wp()?0:1},c}();h.xY=C;var w=function(){},u=function(c,d,f,m){this.x=c,this.y=d,this.Ai=f,this.xm=m},o=function(){function c(d){this.Be=d}return c.prototype.compare=function(d,f,m){return d=d.ja(m),f=this.Be.lf.read(2*f),0>(f-=d=this.Be.lf.read(2*d))?-1:0<f?1:0},c}(),s=function(){function c(d){this.Be=d}return c.prototype.compare=function(d,f,m){f=this.Be.hb[f],d=this.Be.hb[d.ja(m)];var b=f.Wp(),x=d.Wp();m=f.ne.Pe(this.Be.Mo,0);var $=d.ne.Pe(this.Be.Mo,0);return m==$&&((b=.5*((m=Math.min(b?f.ne.na:f.ne.la,x?d.ne.na:d.ne.la))-this.Be.Mo)+this.Be.Mo)==this.Be.Mo&&(b=m),m=f.ne.Pe(b,0),$=d.ne.Pe(b,0)),m<$?-1:m>$?1:0},c}(),n=function(){function c(d,f){this.YI=new h.h,this.parent=d,this.dS=f}return c.prototype.nr=function(d,f,m){var b=this.parent,x=this.dS;m.Vd(d,f,function($,E){return b.Mh($,E,x)})},c.prototype.$p=function(d){return d=this.parent.gi.get(d),this.parent.lf.tc(2*(d>>1),this.YI),this.YI.y+(1&d?this.parent.Oj:-this.parent.Oj)},c}(),l=function(){function c(d,f,m,b,x){this.nH=d.description,this.X=d,this.Qg=f,this.Oj=h.ta.kj(this.Qg,d,!1),this.Bo=h.ta.kj(this.Qg,d,!0),this.xA=m,this.oT=this.nH.Aa,this.hb=[],this.po=[],this.mh=new h.jp,this.fb=new h.Yj,this.ke=new h.Md,this.ZG=this.ql=x}return c.prototype.eT=function(){return this.ZG=!0,(!h.aa.Hc(this.X.getType())||this.GE()&&this.DE(!1))&&this.mO()?h.aa.Hc(this.X.getType())?this.pO()?this.X.getType()==1607?this.rO()?2:0:this.sO()?this.tO():0:0:2:0},c.prototype.kC=function(d,f){var m=this.lf.read(2*d);d=this.lf.read(2*d+1);var b=this.lf.read(2*f);f=this.lf.read(2*f+1);var x=!h.Yt.Cv(m,d,b,f,this.Oj*this.Oj);return x||this.X.Db()!=0&&m==b&&d==f},c.prototype.GE=function(){for(var d=this.X,f=d.xf?3:2,m=0,b=d.da();m<b;m++)if(d.Ja(m)<f)return this.ke=new h.Md(1,m,0),!1;return!0},c.prototype.DE=function(d){var f=this.X,m=f.Ga(),b=f.hasAttribute(1);for(f=b?h.ta.wE(this.Qg,f,!1):0;m.$a();)for(;m.Ha();){var x=m.ha();if(!(x.Qb()>this.Oj)){if(d&&b){var $=x.wv(1,0);if(x=x.wv(1,0),Math.abs(x-$)>f)continue}return this.ke=new h.Md(2,m.wb(),-1),!1}}return!0},c.prototype.mO=function(){var d=this.X,f=null;h.aa.Hc(this.X.getType())&&(f=this.X);var m=(this.ZG||this.ql)&&f!=null,b=d.I();this.lf=d.ub(0),this.gi=new h.ia(0),this.gi.Jb(2*b),this.fi=new h.ia(0),this.fi.Jb(2*b),m&&(this.Fl==null&&(this.Fl=new h.ia(0)),this.Fl.Jb(b));for(var x=d=0;x<b;x++)if(this.gi.add(2*x),this.gi.add(2*x+1),this.fi.add(2*x),this.fi.add(2*x+1),m){for(;x>=f.Vc(d);)d++;this.Fl.add(d)}for(new h.Xt().sort(this.fi,0,2*b,new n(this,m)),this.fb.clear(),this.fb.Vo(new o(this)),this.fb.De(b),f=0,b*=2;f<b;f++)if(m=this.fi.get(f),m=(d=this.gi.get(m))>>1,1&d){if(d=this.fb.search(m,-1),x=this.fb.we(d),$=this.fb.lb(d),this.fb.vd(d,-1),x!=-1&&$!=-1&&!this.kC(this.fb.ja(x),this.fb.ja($)))return this.ke=new h.Md(3,this.fb.ja(x),this.fb.ja($)),!1}else{if(d=this.fb.addElement(m,-1),(x=this.fb.we(d))!=-1&&!this.kC(this.fb.ja(x),m))return this.ke=new h.Md(3,m,this.fb.ja(x)),!1;var $=this.fb.lb(d);if($!=-1&&!this.kC(this.fb.ja($),m))return this.ke=new h.Md(3,m,this.fb.ja($)),!1}return!0},c.prototype.pO=function(){return 10>this.X.I()?this.nO():this.oO()},c.prototype.oO=function(){var d=new h.gd;d.Ib(this.X);var f=new h.Md;return!h.$t.kI(!1,d,this.Oj,f,this.nd)||(f.Jo=d.Ua(f.Jo),f.Ko=d.Ua(f.Ko),this.ke.Wt(f),!1)},c.prototype.nO=function(){var d=this.X,f=d.Ga();for(d=d.Ga();f.$a();)for(;f.Ha();){var m=f.ha();if(!f.Qn()||!f.$S()){d.BW(f);do for(;d.Ha();){var b=d.ha();if((b=m.zr(b,this.Oj,!0))!=0)return this.ke=new h.Md(b==2?5:4,f.wb(),d.wb()),!1}while(d.$a())}}return!0},c.prototype.sO=function(){var d=this.X;this.hb.length=0,this.po.length=0,this.Zf=d.Ga(),this.Zf.JB();var f=new h.ia(0);f.Jb(10);var m=NaN,b=0,x=0;for(d=2*d.I();x<d;x++){var $=this.fi.get(x);if(!(1&($=this.gi.get($)))){$>>=1;var E=this.lf.read(2*$),O=this.lf.read(2*$+1);if(f.size!=0&&(E!=m||O!=b)){if(!this.RI(f))return!1;f!=null&&f.clear(!1)}f.add($),m=E,b=O}}return!!this.RI(f)},c.prototype.rO=function(){for(var d=this.X,f=Array(d.da()),m=0,b=d.da();m<b;m++)f[m]=d.Nn(m);b=new w;var x=new h.h;m=this.fi.get(0);var $=(m=this.gi.get(m))>>1;this.lf.tc(2*$,x);var E=f[m=this.Fl.get($)],O=d.Ba(m),R=d.Vc(m)-1;b.el=$==O||$==R,b.ny=this.ql?!E&&b.el:b.el,b.Ai=m,b.x=x.x,b.y=x.y,b.xm=$;for(var k=new w,j=1,F=this.fi.size;j<F;j++)if(m=this.fi.get(j),!(1&(m=this.gi.get(m)))){$=m>>1,this.lf.tc(2*$,x),(m=this.Fl.get($))!=b.Ai&&(E=f[m],O=d.Ba(m),R=d.Vc(m)-1);var L=$==O||$==R,V=this.ql?!E&&b.el:b.el;if(k.x=x.x,k.y=x.y,k.Ai=m,k.xm=$,k.ny=V,k.el=L,k.x==b.x&&k.y==b.y){if(this.ql){if(!(k.ny&&b.ny||k.Ai==b.Ai&&(k.el||b.el)))return this.ke=new h.Md(8,k.xm,b.xm),!1}else if(!k.el||!b.el)return this.ke=new h.Md(5,k.xm,b.xm),!1}m=b,b=k,k=m}return!0},c.prototype.JE=function(){for(var d=this.X,f=[],m=-1,b=!1,x=0,$=d.da();x<$;x++)d.Ev(x)&&(b=!1,m++,x<$-1&&(d.Ev(x+1)||(b=!0))),f[x]=b?m:-1;b=new h.h,x=this.fi.get(0);var E=(x=this.gi.get(x))>>1;this.lf.tc(2*E,b),x=this.Fl.get(E),m=new u(b.x,b.y,x,E,f[x]),d=[];var O=1;for($=this.fi.size;O<$;O++)if(x=this.fi.get(O),!(1&(x=this.gi.get(x)))){if(E=x>>1,this.lf.tc(2*E,b),x=this.Fl.get(E),(x=new u(b.x,b.y,x,E,f[x])).x==m.x&&x.y==m.y){if(x.Ai==m.Ai)return this.ke=new h.Md(9,x.xm,m.xm),!1;0<=f[x.Ai]&&f[x.Ai]==f[m.Ai]&&(d.length!=0&&d[d.length-1]==m||d.push(m),d.push(x))}m=x}if(d.length==0)return!0;for(x=new h.jp(!0),h.O.$u(f,-1),b=-1,(O=new h.h).Rc(),m=0,$=d.length;m<$;m++){(E=d[m]).x==O.x&&E.y==O.y||(b=x.Ph(0),O.x=E.x,O.y=E.y);var R=f[E.Ai];R==-1&&(R=x.Ph(2),f[E.Ai]=R),x.addElement(R,b),x.addElement(b,R)}for(($=new h.ia(0)).Jb(10),m=x.je;m!=-1;m=x.qz(m))if(!(1&(d=x.PF(m)))&&2&d){for(d=-1,$.add(m),$.add(-1);0<$.size;){if(b=$.Fc(),$.If(),O=$.Fc(),$.If(),1&(E=x.PF(O))){d=2&E?O:b;break}for(x.fX(O,1|E),E=x.rc(O);E!=-1;E=x.lb(E))(R=x.getData(E))!=b&&($.add(R),$.add(O))}if(d!=-1){for(x=-1,m=0,$=f.length;m<$;m++)if(f[m]==d){x=m;break}return this.ke=new h.Md(10,x,-1),!1}}return!0},c.prototype.tO=function(){var d=this.X;if(0>=d.Ke())return this.ke=new h.Md(6,d.da()==1?1:-1,-1),0;if(d.da()==1)return this.ql&&!this.JE()?0:2;this.to=h.ia.qf(d.da(),0),this.JA=h.ia.qf(d.da(),-1);for(var f=-1,m=0,b=0,x=d.da();b<x;b++){var $=d.Ir(b);if(this.to.write(b,0>$?0:256),0<$)f=b,m=$;else{if($==0)return this.ke=new h.Md(6,b,-1),0;if((0>f||m<Math.abs($))&&(this.ke=new h.Md(7,b,-1),this.ql))return 0;this.JA.write(b,f)}}for(this.dt=d.da(),this.Om=new h.ia(0),this.Om.Jb(10),x=d.I(),this.Mo=NaN,(d=new h.ia(0)).Jb(10),this.Qq=h.ia.qf(x,-1),this.Hw=h.ia.qf(x,-1),this.zj!=null?this.zj.clear(!1):this.zj=new h.ia(0),this.zj.Jb(10),this.fb.clear(),this.fb.Vo(new s(this)),f=0,x*=2;0<this.dt&&f<x;f++)if(m=this.fi.get(f),!(1&(m=this.gi.get(m)))){if(m>>=1,(b=this.lf.read(2*m+1))!=this.Mo&&d.size!=0){if(!this.ut(d))return 0;d!=null&&d.clear(!1)}d.add(m),this.Mo=b}return 0<this.dt&&!this.ut(d)?0:this.ql?this.ke.Jj==0&&this.JE()?2:0:this.ke.Jj==0?2:1},c.prototype.RI=function(d){if(d.size==1)return!0;for(var f=0,m=d.size;f<m;f++){var b=d.get(f);this.Zf.Vb(b);var x=this.Zf.li();this.hb.push(this.Su(x,b,this.Zf.gb,!0)),this.Zf.ha(),x=this.Zf.ha(),this.hb.push(this.Su(x,b,this.Zf.gb,!1))}var $=this;for(this.hb.sort(function(R,k){return $.XP(R,k)}),(b=this.mh.je)==-1&&(b=this.mh.Ph(0)),this.mh.fn(this.hb.length),f=0,m=this.hb.length;f<m;f++)this.mh.addElement(b,f);f=!0;for(var E=m=-1;f&&(f=!1,(x=this.mh.rc(b))!=-1);)for(var O=this.mh.lb(x);O!=-1;)if(m=this.mh.getData(x),E=this.mh.getData(O),(m=this.hb[m].Io)!=(E=this.hb[E].Io))x=O,O=this.mh.lb(x);else if(f=!0,this.mh.jd(b,x),x=this.mh.we(O),(O=this.mh.jd(b,O))==-1||x==-1)break;if(f=this.mh.bs(b),this.mh.LE(b),0<f)return this.ke=new h.Md(5,m,E),!1;for(f=0,m=d.size;f<m;f++)this.vB(this.hb[f]);return this.hb.length=0,!0},c.prototype.ut=function(d){for(var f=0,m=d.size;f<m;f++){var b=d.get(f),x=this.Qq.read(b);if(x!=-1){var $=this.fb.ja(x);this.zj.add($),this.fb.vd(x,-1),this.vB(this.hb[$]),this.hb[$]=null,this.Qq.write(b,-1)}(x=this.Hw.read(b))!=-1&&($=this.fb.ja(x),this.zj.add($),this.fb.vd(x,-1),this.vB(this.hb[$]),this.hb[$]=null,this.Hw.write(b,-1))}for(f=0,m=d.size;f<m;f++){if(b=d.get(f),this.Zf.Vb(b),(x=this.Zf.li()).na>x.la){var E=this.Zf.wb(),O=this.Su(x,b,this.Zf.gb,!0);0<this.zj.size?($=this.zj.Fc(),this.zj.If(),this.hb[$]=O):($=this.hb.length,this.hb.push(O)),x=this.fb.addElement($,-1),this.Qq.read(E)==-1?this.Qq.write(E,x):this.Hw.write(E,x),!(3&this.to.read(this.Zf.gb))&&this.Om.add(x)}this.Zf.ha(),(x=this.Zf.ha()).na<x.la&&(E=this.Zf.ik(),O=this.Su(x,b,this.Zf.gb,!1),0<this.zj.size?($=this.zj.Fc(),this.zj.If(),this.hb[$]=O):($=this.hb.length,this.hb.push(O)),x=this.fb.addElement($,-1),this.Qq.read(E)==-1?this.Qq.write(E,x):this.Hw.write(E,x),!(3&this.to.read(this.Zf.gb))&&this.Om.add(x))}for(f=0,m=this.Om.size;f<m&&0<this.dt;f++)if(x=this.Om.get(f),!(3&this.to.read(this.hb[this.fb.ja(x)].IA))){d=-1,b=this.fb.we(x);var R=x;O=null,$=-1;for(var k=0;b!=-1&&($=this.fb.ja(b),$=(O=this.hb[$]).IA,!(3&(k=this.to.read($))));)R=b,b=this.fb.we(b);b==-1?(E=1,b=R):(d=(3&k)==1?$:this.JA.read($),E=O.XF()!=0?0:1,b=this.fb.lb(b));do{if($=this.fb.ja(b),$=(O=this.hb[$]).IA,!(3&(R=this.to.read($)))){if(E!=O.XF())return this.ke=new h.Md(6,$,-1),!1;if(R=252&R|(k=E==0||O.Wp()?2:1),this.to.write($,k),k==2&&this.ke.Jj==0&&this.JA.read($)!=d&&(this.ke=new h.Md(7,$,-1),this.ql))return!1;if(this.dt--,this.dt==0)return!0}(3&R)==1&&(d=$),R=b,b=this.fb.lb(b),E=E!=0?0:1}while(R!=x)}return this.Om!=null?this.Om.clear(!1):this.Om=new h.ia(0),!0},c.prototype.Su=function(d,f,m,b){if(d.getType()!=322)throw h.i.Qa();return(d=this.sP(d)).Io=f,d.IA=m,d.yq=0,d.nX(b),d},c.prototype.sP=function(d){if(0<this.po.length){var f=this.po[this.po.length-1];--this.po.length,d.copyTo(f.ne)}else(f=new C).ne=h.SC.jg(d);return f},c.prototype.vB=function(d){d.ne.getType()==322&&this.po.push(d)},c.prototype.kU=function(){for(var d=this.X.I(),f=new h.ia(0),m=0;m<d;m++)f.add(m);var b=this;for(f.Vd(0,d,function(x,$){return b.Ou(x,$)}),m=1;m<d;m++)if(this.Ou(f.get(m-1),f.get(m))==0)return this.ke=new h.Md(3,f.get(m-1),f.get(m)),0;return 2},c.prototype.JV=function(){return this.GE()&&this.DE(!0)?2:0},c.prototype.oV=function(){return this.eT()},c.prototype.pU=function(){for(var d=this.X.I(),f=new h.ia(0),m=0;m<d;m++)f.add(m);var b=this;f.Vd(0,d,function(R,k){return b.PO(R,k)});var x=Array(d);for(h.O.$u(x,!1),x[f.get(0)]=!0,m=1;m<d;m++){var $=f.get(m-1),E=f.get(m);this.Ou($,E)==0?x[E]=!1:x[E]=!0}f=this.X.Ia(),$=this.X,E=0;var O=1;for(m=0;m<d;m++)x[m]?O=m+1:(E<O&&f.Fd($,E,O),E=m+1);return E<O&&f.Fd($,E,O),f.Ch(2,this.Bo),f},c.prototype.NV=function(){var d=this.X,f=d.Ga(),m=d.Ga(),b=this.X.Ia(),x=this.X,$=d.hasAttribute(1),E=$?h.ta.wE(this.Qg,d,!0):0,O=new h.ia(0),R=new h.ia(0);for(O.Jb(h.O.truncate(d.I()/2+1)),R.Jb(h.O.truncate(d.I()/2+1));f.$a();)if(m.$a(),!(2>d.Ja(f.gb))){m.EW();for(var k,j,F=!0;f.Ha();){var L=f.ha(),V=m.li();if(f.wb()>m.wb())break;F&&(O.add(f.wb()),R.add(m.ik()),F=!1),j=O.Fc();var B=f.ik();if(1<B-j){var W=new h.h;W.uc(d.Na(j),d.Na(B)),k=W.length()}else k=L.Qb();j=R.Fc(),1<(B=m.wb())-j?((W=new h.h).uc(d.Na(j),d.Na(B)),j=W.length()):j=V.Qb(),k>this.Bo?O.add(f.ik()):$&&(k=d.Uc(1,O.Fc(),0),L=L.gv(1,0),Math.abs(L-k)>E&&O.add(f.ik())),j>this.Bo?R.add(m.wb()):$&&(k=d.Uc(1,R.Fc(),0),L=V.gv(1,0),Math.abs(L-k)>E&&R.add(m.wb()))}if(O.Fc()<R.Fc()?O.size>R.size?O.If():R.If():(O.Fc()!=R.Fc()&&R.If(),R.If()),2<=R.size+O.size){for(F=new h.Sa,V=0,L=O.size;V<L;V++)x.ve(O.get(V),F),V==0?b.nf(F):b.lineTo(F);for(V=R.size-1;0<V;V--)x.ve(R.get(V),F),b.lineTo(F);x.dc(f.gb)?b.Ap():0<R.size&&(x.ve(R.get(0),F),b.lineTo(F))}O!=null&&O.clear(!1),R!=null&&R.clear(!1)}return b.Ch(2,this.Bo),b},c.prototype.rV=function(){return this.DX()},c.prototype.DX=function(){return this.X.getType()==1736&&this.X.In()==1?h.Fg.Mk(this.X,this.Bo,!0,!1,this.nd):(this.Hi=new h.gd,this.Hi.Ib(this.X),this.Hi.fd!=0&&(this.xA!=1&&h.Tk.V(this.Hi,this.Bo,this.nd,!0),this.X.getType()==1736&&h.rn.V(this.Hi,this.Hi.ld,this.xA,!1,this.nd)),this.X=this.Hi.Ne(this.Hi.ld),this.X.getType()==1736&&(this.X.fm(),this.X.Yo(0)),this.X.Ch(2,this.Bo),this.X)},c.rs=function(d,f,m,b,x){if(b!=null&&(b.Jj=0,b.Jo=-1,b.Ko=-1),d.B())return 1;var $=d.getType();if($==33)return 1;var E=h.ta.kj(f,d,!1);if($==197)return f=new h.l,d.A(f),f.Bi(E)?(b!=null&&(b.Jj=2,b.Jo=-1,b.Ko=-1),0):1;if(h.aa.yd($))return(E=new h.Ta(d.description)).oc(d,!0),c.rs(E,f,m,b,x);var O=d.om(E);if((m=m?-1:O)!=-1)return m;if(f=new c(d,f,m,x,!1),$==550)m=f.kU();else if($==1607)m=f.JV();else{if($!=1736)throw h.i.Qa();m=f.oV()}return d.Ch(m,E),b!=null&&m==0&&b.Wt(f.ke),m},c.cK=function(d,f,m,b){if(d.B())return d;var x=d.getType();if(x==33)return d;var $=h.ta.kj(f,d,!1);if(x==197)return f=new h.l,d.A(f),f.Bi($)?d.Ia():d;if(h.aa.yd(x))return(x=new h.Ta(d.description)).oc(d,!0),c.cK(x,f,m,b);if($=d.om($),(m=m?-1:$)==2)return d;if(d=new c(d,f,m,b,!1),x==550)d=d.pU();else if(x==1607)d=d.NV();else{if(x!=1736)throw h.i.Qa();d=d.rV()}return d},c.prototype.Mh=function(d,f,m){if(d==f)return 0;d=this.gi.get(d);var b=this.gi.get(f);f=d>>1;var x=b>>1,$=new h.h,E=new h.h;return this.lf.tc(2*f,$),$.y+=1&d?this.Oj:-this.Oj,this.lf.tc(2*x,E),E.y+=1&b?this.Oj:-this.Oj,(d=$.compare(E))==0&&m?0>(m=this.Fl.get(f)-this.Fl.get(x))?-1:0<m?1:0:d},c.prototype.Ou=function(d,f){if(d==f)return 0;var m=this.X,b=m.Na(d),x=m.Na(f);if(b.x<x.x)return-1;if(b.x>x.x)return 1;if(b.y<x.y)return-1;if(b.y>x.y)return 1;for(b=1;b<this.oT;b++){x=this.nH.kd(b);for(var $=h.ra.Va(x),E=0;E<$;E++){var O=m.Uc(x,d,E),R=m.Uc(x,f,E);if(O<R)return-1;if(O>R)return 1}}return 0},c.prototype.PO=function(d,f){var m=this.Ou(d,f);return m==0?d<f?-1:1:m},c.prototype.XP=function(d,f){if(d===f)return 0;var m=d.ne.kg();d.Wp()&&m.Sq(),d=f.ne.kg(),f.Wp()&&d.Sq(),f=m.qu();var b=d.qu();return b==f?(f=m.wi(d),Math.abs(f)<=8881784197001252e-31*(Math.abs(d.x*m.y)+Math.abs(d.y*m.x))&&(f--,f++),0>f?1:0<f?-1:0):f<b?-1:1},c}();h.Jx=l}(G||(G={})),function(h){var C=function(w){function u(){return w!==null&&w.apply(this,arguments)||this}return pt(u,w),u.prototype.getType=function(){return 30},u.local=function(){return u.instance===null&&(u.instance=new u),u.instance},u.prototype.V=function(o,s,n,l){return o instanceof h.aa?(o=new h.Zc(o),s=new h.Zc(s),this.V(o,s,n,l).next()):new h.BL(o,s,n,l)},u.ep=function(o,s,n,l){var c=o.Db(),d=s.Db();if(o.B()&&s.B())return c>d?o:s;if(o.B())return s;if(s.B())return o;var f=new h.l,m=new h.l,b=new h.l;return o.A(f),s.A(m),b.K(f),b.Zb(m),f=h.ta.Wd(n,b,!0),m=o.getType(),b=s.getType(),m==33&&b==33?u.aV(o,s,f):m!=b?0<c||0<d?c>d?o:s:m==550?u.iI(o,s,f):u.iI(s,o,f):h.Fg.ep(o,s,n,l)},u.aV=function(o,s,n){n=n*Math.sqrt(2)*1.00001,n*=n;var l=o.D(),c=s.D(),d=new h.de(o.description);return h.h.yc(l,c)>n&&(d.add(o),d.add(s)),d},u.iI=function(o,s,n){var l=o.ub(0),c=o.I(),d=s.D(),f=o.Ia();n=n*Math.sqrt(2)*1.00001;var m=new h.l;if(o.A(m),m.W(n,n),m.contains(d)){n*=n,m=!1;for(var b=[],x=0;x<c;x++)b[x]=!1;for(x=0;x<c;x++){var $=l.read(2*x),E=l.read(2*x+1);($-=d.x)*$+(E-=d.y)*E<=n&&(m=!0,b[x]=!0)}if(m)for(x=0;x<c;x++)b[x]||f.Fd(o,x,x+1);else f.Fd(o,0,c),f.add(s)}else f.Fd(o,0,c),f.add(s);return f},u.instance=null,u}(h.Je);h.Kx=C}(G||(G={})),function(h){var C=function(){function w(u,o,s,n){this.ts=o==null,this.ya=-1,this.Rd=u,this.vg=s,this.NT=o.next(),this.Ub=n}return w.prototype.next=function(){return this.ts?null:(u=this.Rd.next())!=null?(this.ya=this.Rd.La(),h.Kx.ep(u,this.NT,this.vg,this.Ub)):null;var u},w.prototype.La=function(){return this.ya},w.prototype.qe=function(){},w}();h.BL=C}(G||(G={})),function(h){var C=function(){function o(){}return o.prototype.Fz=function(){this.$y=null,this.Ax=-1,this.AK=!1},o}(),w=function(){function o(){this.Gr=0,this.pj=[]}return o.prototype.pN=function(s){this.Gr+=s.Ax,this.pj.push(s)},o.prototype.TV=function(){this.Gr-=this.pj[this.pj.length-1].Ax,--this.pj.length},o.prototype.my=function(){return this.pj[this.pj.length-1]},o.prototype.Nb=function(s){return s===this},o}(),u=function(){function o(s,n,l){this.ya=-1,this.Ic=!1,this.AH=[!1,!1,!1,!1],this.uq=[0,0,0,0],this.jA=!1,this.zk=-1,this.iq=0,this.bo=-1,this.Do=[],this.Rd=s,this.vg=n,this.Ub=l}return o.dE=function(s){var n=[],l=0;for(s=Object.keys(s);l<s.length;l++)n.push(Number(s[l]));return n.sort(function(c,d){return c-d}),n},o.prototype.fG=function(s){var n=this.Do[s],l=o.dE(n)[0],c=n[l],d=c.my().$y;return c=c.my().AK,delete n[l],c&&(d=h.Yl.local().V(d,this.vg,!1,this.Ub),s==0&&d.getType()==33&&(s=new h.de(d.description),d.B()||s.add(d),d=s)),d},o.prototype.next=function(){if(this.Ic&&this.bo==this.zk)return null;for(;!this.qK(););if(this.zk==-1)return null;if(this.jA){for(this.bo++;;){if(this.bo>this.zk||0>this.bo)throw h.i.Qa();if(this.AH[this.bo])break}return this.ya++,this.fG(this.bo)}return this.ya=0,this.bo=this.zk,this.fG(this.zk)},o.prototype.La=function(){return this.ya},o.prototype.qK=function(){if(this.Ic)return!0;var s=null;if(this.Rd!=null&&(s=this.Rd.next())==null&&(this.Ic=!0,this.Rd=null),h.mp.zp(this.Ub),s!=null){var n=s.Db();this.AH[n]=!0,n>=this.zk&&!this.jA&&(this.ND(n,!1,s),n>this.zk&&!this.jA&&this.zW(n))}if(0<this.iq)for(n=0;n<=this.zk;n++)for(;1<this.uq[n]&&(s=this.FO(n)).length!=0;)s=h.Fg.VP(s,this.vg,this.Ub),this.ND(n,!0,s);return this.Ic},o.prototype.FO=function(s){for(var n=[],l=[],c=this.Do[s],d=o.dE(c),f=0;f<d.length;f++){var m=d[f],b=c[m];if(this.Ic||1e4<b.Gr&&1<b.pj.length){for(this.uq[s]-=b.pj.length,this.iq-=b.pj.length;0<b.pj.length;)n.push(b.my().$y),b.TV();l.push(m)}}for(f=0;f<l.length;f++)delete c[l[f]];return n},o.prototype.zW=function(s){for(var n=0;n<s;n++)this.Do[n]=[],this.iq-=this.uq[n],this.uq[n]=0},o.prototype.ND=function(s,n,l){var c=new C;if(c.Fz(),c.$y=l,l=o.eS(l),c.Ax=l,l=o.cS(l),s+1>this.Do.length)for(var d=0,f=Math.max(2,s+1);d<f;d++)this.Do.push([]);(d=this.Do[s][l])===void 0&&(d=new w,this.Do[s][l]=d),c.AK=n,d.pN(c),this.uq[s]++,this.iq++,this.zk=Math.max(this.zk,s)},o.cS=function(s){return 0<s?h.O.truncate(Math.log(s)/Math.log(4)+.5):0},o.eS=function(s){var n=s.getType();if(h.aa.xj(n))return s.I();if(n==33)return 1;if(n==197)return 4;if(h.aa.yd(n))return 2;throw h.i.Qa()},o.prototype.qe=function(){this.qK()},o}();h.DL=u}(G||(G={})),function(h){var C=function(w){function u(){return w!==null&&w.apply(this,arguments)||this}return pt(u,w),u.prototype.getType=function(){return 1},u.prototype.V=function(o,s,n,l){return l===void 0?new h.DL(o,s,n):this.gQ(o,s,n,l)},u.prototype.gQ=function(o,s,n,l){return o=new h.Zc([o,s]),this.V(o,n,l).next()},u.local=function(){return u.instance===null&&(u.instance=new u),u.instance},u.instance=null,u}(h.Je);h.Gh=C}(G||(G={})),function(h){var C,w;(w=C||(C={}))[w.nextPath=0]="nextPath",w[w.nextSegment=1]="nextSegment",w[w.iterate=2]="iterate",C=function(){function u(o,s,n,l){this.Ts=new h.l,this.GT=o,this.HT=s,this.mq=l,this.uo=-1,this.rl=!1;var c=o.Bb;c!=null&&(c=l?c.zo:c.Fb)!=null&&(this.Ic=!1,this.qa=n,this.Fb=c,this.xw=this.Fb.getIterator(),this.nq=this.rl=!0,this.Xb=0,l?this.uo=s.da():this.sd=s.Ga()),this.rl||(c=s.Bb)!=null&&(c=l?c.zo:c.Fb)!=null&&(this.Ic=!1,this.qa=n,this.Fb=c,this.xw=this.Fb.getIterator(),this.rl=!0,this.nq=!1,this.Xb=0,l?this.uo=o.da():this.sd=o.Ga()),this.rl||(this.ci=l?h.ta.mR(o,s,n,1<=o.om(0),1<=s.om(0)):h.ta.lR(o,s,n))}return u.prototype.next=function(){if(this.rl){if(this.Ic)return!1;for(var o=!0;o;)switch(this.Xb){case 0:o=this.xU();break;case 1:o=this.yU();break;case 2:o=this.Uz();break;default:throw h.i.fa("internal error")}return!this.Ic}return this.ci!=null&&this.ci.next()},u.prototype.nl=function(){return this.rl?this.nq?this.Fb.ja(this.Fs):this.mq?this.uo:this.sd.wb():this.ci.nl(this.ci.Vf)},u.prototype.hl=function(){return this.rl?this.nq?this.mq?this.uo:this.sd.wb():this.Fb.ja(this.Fs):this.ci.hl(this.ci.Af)},u.prototype.uz=function(){if(!this.mq)throw h.i.fa("internal error");return this.rl?this.nq?this.Fb.GF(this.Fs):this.Ts:this.ci.uz(this.ci.Vf)},u.prototype.az=function(){if(!this.mq)throw h.i.fa("internal error");return this.rl?this.nq?this.Ts:this.Fb.GF(this.Fs):this.ci.az(this.ci.Af)},u.prototype.xU=function(){return this.mq?--this.uo==-1?(this.Ic=!0,!1):(this.nq?this.HT.Rj(this.uo,this.Ts):this.GT.Rj(this.uo,this.Ts),this.xw.Xi(this.Ts,this.qa),this.Xb=2,!0):this.sd.$a()?(this.Xb=1,!0):(this.Ic=!0,!1)},u.prototype.yU=function(){if(!this.sd.Ha())return this.Xb=0,!0;var o=this.sd.ha();return this.xw.Uo(o,this.qa),this.Xb=2,!0},u.prototype.Uz=function(){return this.Fs=this.xw.next(),this.Fs==-1&&(this.Xb=this.mq?0:1,!0)},u}(),h.Zl=C}(G||(G={})),function(h){(h=h.OL||(h.OL={}))[h.enumClosed=1]="enumClosed",h[h.enumHasNonlinearSegments=2]="enumHasNonlinearSegments",h[h.enumOGCStartPolygon=4]="enumOGCStartPolygon",h[h.enumCalcMask=4]="enumCalcMask"}(G||(G={})),function(h){h.QC=function(){function C(){}return C.tb=function(w,u,o,s,n,l,c,d,f){var m=[0,0,0],b=[0,0,0],x=[0,0,0],$=[0,0,0,0],E=new h.ga(0),O=new h.ga(0),R=new h.ga(0);if(c!=null||d!=null||f!=null)if(h.s.ti(u))h.Yg.tb(w,o,s,n,l,c,d,f);else{n=h.F.ba(n),o=h.F.ba(o);var k=h.F.ba(n-o);if(h.s.Y(s,l)&&(h.s.Y(o,n)||h.s.Y(h.s.P(s),1.570796326794897)))c!=null&&(c.u=0),d!=null&&(d.u=0),f!=null&&(f.u=0);else{if(h.s.Y(s,-l)){if(h.s.Y(h.s.P(s),1.570796326794897))return c!=null&&(c.u=2*h.F.Ah(w,u)),d!=null&&(d.u=0<s?h.F.ba(3.141592653589793-h.F.ba(n)):h.F.ba(n)),void(f!=null&&(f.u=0<s?h.F.ba(n):h.F.ba(3.141592653589793-h.F.ba(n))));h.s.Y(h.s.P(k),3.141592653589793)&&(c!=null&&(c.u=2*h.F.Ah(w,u)),d!=null&&(d.u=0),f!=null&&(f.u=0))}else if(h.s.Y(h.s.P(s),1.570796326794897)||h.s.Y(h.s.P(l),1.570796326794897)||h.s.Y(o,n)||h.s.Y(h.s.P(k),3.141592653589793)||h.s.Cd(s))return void h.Wk.tb(w,u,o,s,n,l,c,d,f);var j=Math.sqrt(1-u);n=h.F.ba(n-o),o=0,h.F.cl(1,u,s,o,0,E,O,R),m[0]=E.u,m[1]=O.u,m[2]=R.u,h.F.cl(1,u,l,n,0,E,O,R),b[0]=E.u,b[1]=O.u,b[2]=R.u,x[0]=0,x[1]=0,x[2]=-1*u*h.F.n(1,u,s)*Math.sin(s),0>n?h.F.Wq(x,b,m,$,0):h.F.Wq(x,m,b,$,0),O=[0,0,0],R=[0,0,0];var F=[0,0,0];m=[0,0,0],E=[0,0,0];var L=Math.acos($[2]/1),V=1-u,B=Math.tan(L),W=1+B*B/V,K=2*x[2]*B/V;for(V=(-K+(B=Math.sqrt(K*K-4*W*(x[2]*x[2]/V-1))))/(W*=2),K=(-K-B)/W,B=Math.tan(L),L=(V+K)/2,x=((W=B*V+x[2])+(B*K+x[2]))/2,B=h.F.gp(V-L,W-x),V=x/j*1.570796326794897,K=0;100>K&&(W=(W=h.F.w(u,V))*W/Math.cos(V)*(Math.sin(V)-x*W/(1-u)),!h.s.Cd(W));K++)V-=W;x=h.F.n(1,u,V)*Math.cos(V),B=1-B/(x=Math.sqrt((x-L)*(x+L))),B*=2-B,W=h.F.on(O),L=h.F.on(R),V=h.F.on(F);var re=h.F.St(F,O);K=h.F.St(F,R),h.F.zx(F,O,m),h.F.zx(F,R,E),O=Math.acos(re/(V*W)),R=Math.acos(K/(V*L)),R*=h.s.Mb(1,h.F.St(m,E)),(1.570796326794897<=h.s.P(O)&&1.570796326794897<=h.s.P(R)||3.141592653589793<h.s.P(O-R))&&(O=(3.141592653589793-h.s.P(O))*h.s.Mb(1,O),R=(3.141592653589793-h.s.P(R))*h.s.Mb(1,R)),m=h.F.Qj(B,R),E=h.F.q(x,B,h.F.Qj(B,O)),m=h.F.q(x,B,m),m=h.s.P(m-E)*w,O=new h.ga(0),R=new h.ga(0),F=$[1]/1,F*=-h.s.Mb(1,k),E=Math.acos(F)*h.s.Mb(1,k),C.rf(w,u,o,s,m,E,O,R),h.s.Y(n,O.u)&&h.s.Y(l,R.u)||(B=h.F.gp(h.F.ba(n-O.u),l-R.u),C.rf(w,u,o,s,m,h.F.ba(E+3.141592653589793),O,R),(W=h.F.gp(h.F.ba(n-O.u),l-R.u))<B&&(E=h.F.ba(E+3.141592653589793))),O=[0,0,0,0],R=[0,0,0,0],B=[0,0,0],w=[0,0,0],o=[0,0,0],s=[0,0,0],F=[0,0,0],(x=[0,0,0])[0]=0,x[1]=0,x[2]=j,B[0]=0,B[1]=0,B[2]=0,h.F.Wq(B,x,b,O,0),h.s.Cd(l)?(w[0]=b[0],w[1]=b[1],w[2]=1,o[0]=1*Math.cos(n)-1*Math.sin(n),o[1]=1*Math.sin(n)+1*Math.cos(n)):(u=h.F.n(1,u,l)*Math.cos(l),w[0]=0,w[1]=0,b[2]+=Math.tan(1.570796326794897-h.s.P(l))*u*h.s.Mb(1,l),o[0]=u*Math.cos(n)-u*Math.sin(n),o[1]=u*Math.sin(n)+u*Math.cos(n)),o[2]=b[2],h.F.Wq(b,o,w,R,1),h.F.zx(R,O,s),h.F.zx(R,$,F),F=h.F.St(s,F)/(h.F.on(s)*h.F.on(F)),F*=h.s.Mb(1,k),n=Math.acos(F)*-h.s.Mb(1,k),(0<E&&0<n||0>E&&0>n)&&(n=h.F.ba(n+3.141592653589793)),c!=null&&(c.u=m),d!=null&&(d.u=E),f!=null&&(f.u=n)}}},C.rf=function(w,u,o,s,n,l,c,d){var f=[0,0,0],m=[0,0,0],b=[0,0,0],x=[0,0,0],$=[0,0,0],E=[0,0,0],O=[0,0,0],R=[0,0,0,0],k=new h.ga(0),j=new h.ga(0),F=new h.ga(0),L=new h.ga(0),V=new h.ga(0),B=new h.ga(0);if(c!=null&&d!=null)if(h.s.ti(u))h.Yg.rf(w,o,s,n,l,c,d);else if(h.s.Cd(n))c!=null&&(c.u=o),d!=null&&(d.u=s);else if(l=h.F.ba(l),0>n&&(n=h.s.P(n),l=h.F.ba(l+3.141592653589793)),o=h.F.ba(o),s=h.F.ba(s),1.570796326794897<h.s.P(s)&&(o=h.F.ba(o+3.141592653589793),s=h.s.Mb(3.141592653589793,s)-s),h.s.Y(h.s.P(s),1.570796326794897)||h.s.Cd(s)||h.s.Cd(l)||h.s.Y(h.s.P(l),3.141592653589793))h.Wk.rf(w,u,o,s,n,l,c,d);else{var W=Math.sqrt(1-u);for(w=n/w,h.F.cl(1,u,s,0,0,L,V,B),f[0]=L.u,f[1]=V.u,f[2]=V.u,O[0]=0,O[1]=0,O[2]=-1*u*h.F.n(1,u,s)*Math.sin(s),L=h.F.n(1,u,s),V=h.F.ba(1.570796326794897-l),B=Math.sin(V),n=Math.cos(s),s=Math.sin(s),$[0]=L*n-s*B,$[1]=Math.cos(V),$[2]=(1-u)*L*s+n*B,0>l?h.F.Wq(O,$,f,R,0):h.F.Wq(O,f,$,R,0),f=Math.acos(R[2]/1),R=Math.atan2(-R[1],-R[0]),s=1-u,V=1+($=Math.tan(f))*$/s,s=(-(L=2*O[2]*$/s)+($=Math.sqrt(L*L-4*V*(O[2]*O[2]/s-1))))/(V*=2),L=(-L-$)/V,$=Math.tan(f),f=(s+L)/2,O=((V=$*s+O[2])+($*L+O[2]))/2,$=h.F.gp(s-f,V-O),W=O/W*1.570796326794897,s=0;100>s&&(L=(L=h.F.w(u,W))*L/Math.cos(W)*(Math.sin(W)-O*L/(1-u)),!h.s.Cd(L));s++)W-=L;W=h.F.n(1,u,W)*Math.cos(W),O=1-$/(W=Math.sqrt((W-f)*(W+f))),O*=2-O,E=Math.acos(h.F.St(E,m)/(h.F.on(E)*h.F.on(m))),E*=h.s.Mb(1,m[0]),l=(h.F.q(W,O,h.F.Qj(O,E))+w*h.s.Mb(1,l))/h.F.Ah(W,O),l=h.F.ba(1.570796326794897*l),l=h.F.Rq(O,l),h.F.n(W,O,l),$=h.F.ba(R+o),o=Math.cos($),l=Math.sin($),b[0]=x[0]*o+x[1]*-l,b[1]=x[0]*l+x[1]*o,b[2]=x[2],h.F.jO(u,b[0],b[1],b[2],F,j,k),c!=null&&(c.u=j.u),d!=null&&(d.u=F.u)}},C}()}(G||(G={})),function(h){var C=function(){function n(l){this.Ya=null,this.wt=new h.h,this.xt=new h.h,this.g=l}return n.prototype.compare=function(l,c,d){return this.g.Gc(c,this.wt),this.g.Gc(l.ja(d),this.xt),this.wt.compare(this.xt)},n}(),w=function(){function n(l){this.Bf=new h.h,this.Dk=new h.h,this.g=l}return n.prototype.Dh=function(l){this.Bf.L(l)},n.prototype.compare=function(l,c){return this.g.Gc(l.ja(c),this.Dk),this.Bf.compare(this.Dk)},n}(),u=function(n){function l(c){var d=n.call(this,c.g,c.qa,!1)||this;return d.ib=c,d}return pt(l,n),l.prototype.compare=function(c,d,f){if(this.rg)return-1;var m=this.ib.Qd.Jn(this.ib.Rh(d));c=c.ja(f);var b=this.ib.Qd.Jn(this.ib.Rh(c));return this.Dm=f,this.RE(d,m,c,b)},l}(h.UC),o=function(n){function l(c){var d=n.call(this,c.g,c.qa)||this;return d.ib=c,d}return pt(l,n),l.prototype.compare=function(c,d){return this.rg?-1:(c=this.ib.Qd.Jn(this.ib.Rh(c.ja(d))),this.Dm=d,this.SE(d,c))},l}(h.aM),s=function(){function n(){this.Mc=this.df=this.jo=this.Qd=this.lh=this.zd=this.hb=this.g=null,this.Ng=!1,this.vh=this.Nm=this.ie=this.Gk=this.nh=this.Ak=this.Ff=this.$d=null,this.xh=this.Jq=this.UA=this.qa=0,this.Xv=this.Wn=!1,this.yo=new h.h,this.Pi=new h.h,this.hb=new h.$c(8),this.zd=new h.$c(5),this.lh=new h.au,this.Qd=new h.au,this.Ng=!1,this.vh=new h.h,this.vh.ma(0,0),this.qa=0,this.xh=-1,this.Wn=!1,this.g=null,this.df=new h.Yj,this.Mc=new h.Yj,this.nh=new h.ia(0),this.Gk=new h.TC,this.Ff=new h.ia(0),this.Ak=new h.ia(0),this.jo=new h.Sa}return n.prototype.PX=function(l,c){var d=new h.Dd;return d.$B(),l.Oc(d),this.er(l),this.Wn=!1,this.qa=c,this.UA=c*c,c=this.jC(),l.Oc(d),c||(this.qQ(),c||this.jC()),this.xh!=-1&&(this.g.Td(this.xh),this.xh=-1),this.g=null,this.Wn},n.prototype.TX=function(l,c){this.er(l),this.Wn=!1,this.qa=c,this.UA=c*c,this.Ng=!1,this.jC(),this.Ng||(this.Ng=l.Gp(c,!0,!1)==1),this.xh!=-1&&(this.g.Td(this.xh),this.xh=-1),this.g=null},n.prototype.pg=function(l,c){return this.hb.T(l,0+c)},n.prototype.LB=function(l,c,d){this.hb.S(l,0+c,d)},n.prototype.Rh=function(l){return this.hb.T(l,2)},n.prototype.ZW=function(l,c){this.hb.S(l,2,c)},n.prototype.RF=function(l,c){return this.hb.T(l,3+c)},n.prototype.Pp=function(l){return this.hb.T(l,7)},n.prototype.Pl=function(l,c){this.hb.S(l,7,c)},n.prototype.Rp=function(l,c){return this.hb.T(l,3+this.Op(l,c))},n.prototype.fr=function(l,c,d){this.hb.S(l,3+this.Op(l,c),d)},n.prototype.NR=function(l,c){return this.hb.T(l,5+this.Op(l,c))},n.prototype.hr=function(l,c,d){this.hb.S(l,5+this.Op(l,c),d)},n.prototype.Sr=function(l){return this.zd.T(l,0)},n.prototype.UW=function(l,c){this.zd.S(l,0,c)},n.prototype.ez=function(l){return this.zd.T(l,4)},n.prototype.cr=function(l,c){this.zd.S(l,4,c)},n.prototype.il=function(l){return this.zd.T(l,1)},n.prototype.ln=function(l,c){this.zd.S(l,1,c)},n.prototype.dz=function(l){return this.zd.T(l,3)},n.prototype.Et=function(l,c){this.zd.S(l,3,c)},n.prototype.Ym=function(l){var c=this.zd.Ce(),d=this.lh.Ph();return this.UW(c,d),l!=-1?(this.lh.addElement(d,l),this.g.Ra(l,this.xh,c),this.cr(c,this.g.Ua(l))):this.cr(c,-1),c},n.prototype.HP=function(l){this.zd.jd(l)},n.prototype.LD=function(l,c){this.lh.addElement(this.Sr(l),c),this.g.Ra(c,this.xh,l)},n.prototype.nt=function(l){var c=this.hb.Ce(),d=this.Qd.Ph();return this.ZW(c,d),l!=-1&&this.Qd.addElement(d,l),c},n.prototype.MD=function(l,c){this.Qd.addElement(this.Rh(l),c)},n.prototype.Uu=function(l){this.hb.jd(l),0<=(l=this.nh.lF(l))&&this.nh.SV(l)},n.prototype.hj=function(l,c){if(this.pg(l,0)==-1)this.LB(l,0,c);else{if(this.pg(l,1)!=-1)throw h.i.Qa();this.LB(l,1,c)}this.ky(l,c)},n.prototype.ky=function(l,c){var d=this.il(c);if(d!=-1){var f=this.Rp(d,c);this.hr(f,c,l),this.fr(l,c,f),this.fr(d,c,l),this.hr(l,c,d)}else this.hr(l,c,l),this.fr(l,c,l),this.ln(c,l)},n.prototype.Op=function(l,c){return this.pg(l,0)==c?0:1},n.prototype.Xm=function(l,c){var d,f=this.dz(c);if(f!=-1&&(this.df.vd(f,-1),this.Et(c,-1)),(f=this.il(c))!=-1){var m=d=f;do{var b=!1,x=this.Op(d,c),$=this.RF(d,x);if(this.pg(d,x+1&1)==l){if(this.Xu(d),this.Qd.bh(this.Rh(d)),this.Uu(d),d==$){f=-1;break}f==d&&(f=this.il(c),m=$,b=!0)}d=$}while(d!=m||b);if(f!=-1){do x=this.Op(d,c),$=this.RF(d,x),this.LB(d,x,l),d=$;while(d!=m);(d=this.il(l))!=-1?(m=this.Rp(d,l),b=this.Rp(f,l),m==d?(this.ln(l,f),this.ky(d,l),this.ln(l,d)):b==f&&this.ky(f,l),this.fr(f,l,m),this.hr(m,l,f),this.fr(d,l,b),this.hr(b,l,d)):this.ln(l,f)}}for(f=this.Sr(l),d=this.Sr(c),m=this.lh.rc(d);m!=-1;m=this.lh.lb(m))this.g.Ra(this.lh.ja(m),this.xh,l);this.lh.Hy(f,d),this.HP(c)},n.prototype.UT=function(l,c){var d=this.pg(l,0),f=this.pg(l,1),m=this.pg(c,0),b=this.pg(c,1);this.Qd.Hy(this.Rh(l),this.Rh(c)),c==this.il(d)&&this.ln(d,l),c==this.il(f)&&this.ln(f,l),this.Xu(c),this.Uu(c),d==m&&f==b||f==m&&d==b||(this.Hn(d,this.yo),this.Hn(m,this.Pi),this.yo.qb(this.Pi)?(d!=m&&this.Xm(d,m),f!=b&&this.Xm(f,b)):(f!=m&&this.Xm(f,m),d!=b&&this.Xm(d,b)))},n.prototype.Xu=function(l){var c=this.pg(l,1);this.dF(l,this.pg(l,0)),this.dF(l,c)},n.prototype.dF=function(l,c){var d=this.Rp(l,c),f=this.NR(l,c),m=this.il(c);d!=l?(this.fr(f,c,d),this.hr(d,c,f),m==l&&this.ln(c,d)):this.ln(c,-1)},n.prototype.WD=function(l,c,d){var f=this.Qd.rc(l),m=this.Qd.ja(f);l=this.Le(m);var b=this.Le(this.g.U(m));for(this.g.jr(m,c,d,!0),f=this.Qd.lb(f);f!=-1;f=this.Qd.lb(f)){m=this.Qd.ja(f);var x=this.Le(m)==l;this.g.jr(m,c,d,x)}f=c.Vp(d,0).ac(),c=c.Vp(d,c.ol(d)-1).wc(),this.BK(l,f),this.BK(b,c)},n.prototype.ZE=function(l,c,d){var f=this.Rh(l),m=this.pg(l,0),b=this.pg(l,1),x=this.nt(-1);for(this.nh.add(x),this.Pl(x,-3),this.Ff.add(x),this.hj(x,m),l=1,c=c.ol(d);l<c;l++)d=this.Ym(-1),this.Ak.add(d),this.Ff.add(d),this.hj(x,d),x=this.nt(-1),this.nh.add(x),this.Pl(x,-3),this.Ff.add(x),this.hj(x,d);for(this.hj(x,b),f=this.Qd.rc(f);f!=-1;f=this.Qd.lb(f))if(b=this.Qd.ja(f),this.Le(b)==m){l=0;do 0<l&&(x=this.Ff.get(l-1),this.LD(x,b),this.ez(x)==-1&&this.cr(x,this.g.Ua(b))),x=this.Ff.get(l),l+=2,this.MD(x,b),b=this.g.U(b);while(l<this.Ff.size)}else{l=this.Ff.size-1;do l<this.Ff.size-2&&(x=this.Ff.get(l+1),this.LD(x,b),0>this.ez(x)&&this.cr(x,this.g.Ua(b))),x=this.Ff.get(l),l-=2,this.MD(x,b),b=this.g.U(b);while(0<=l)}this.Ff.clear(!1)},n.prototype.Le=function(l){return this.g.Pa(l,this.xh)},n.prototype.TI=function(l,c,d){var f=this.pg(c,0),m=new h.h;this.Hn(f,m);var b=new h.h,x=this.pg(c,1);this.Hn(x,b);var $=d.ol(l),E=d.Vp(l,0),O=new h.h;if(E.Yp(O),!m.qb(O)){if(!this.Ng){var R=m.compare(this.vh);0>R*(O=O.compare(this.vh))&&(this.Ng=!0)}this.vF(f,this.Ff),this.Ak.add(f)}for(!this.Ng&&1<$&&(R=m.compare(b),E=E.wc(),(m.compare(E)!=R||E.compare(b)!=R||0>E.compare(this.vh))&&(this.Ng=!0)),l=(E=d.Vp(l,$-1)).wc(),b.qb(l)||(this.Ng||0>(R=b.compare(this.vh))*(O=l.compare(this.vh))&&(this.Ng=!0),this.vF(x,this.Ff),this.Ak.add(x)),this.Ff.add(c),b=0,x=this.Ff.size;b<x;b++)l=this.Ff.get(b),d=this.Pp(l),h.$c.LG(d)&&(this.Mc.vd(d,-1),this.Pl(l,-1)),l!=c&&this.Pp(l)!=-3&&(this.nh.add(l),this.Pl(l,-3));this.Ff.clear(!1)},n.prototype.lO=function(l,c){this.$d.compare(this.Mc,this.Mc.ja(l),c),this.$d.rg&&(this.$d.Kr(),this.oF(l,c))},n.prototype.oF=function(l,c){this.Wn=!0,l=this.Mc.ja(l),c=this.Mc.ja(c);var d=this.Qd.Jn(this.Rh(l)),f=this.Qd.Jn(this.Rh(c)),m=this.g.bc(d);m==null&&(this.ie==null&&(this.ie=new h.yb),this.g.ed(d,this.ie),m=this.ie),(d=this.g.bc(f))==null&&(this.Nm==null&&(this.Nm=new h.yb),this.g.ed(f,this.Nm),d=this.Nm),this.Gk.Oo(m),this.Gk.Oo(d),this.Gk.Ea(this.qa,!0)&&(this.Ng=!0),this.hK(l,c,-1,this.Gk),this.Gk.clear()},n.prototype.GQ=function(l,c){this.Wn=!0,c=this.Mc.ja(c);var d=this.Qd.Jn(this.Rh(c)),f=this.g.bc(d);f==null&&(this.ie==null&&(this.ie=new h.yb),this.g.ed(d,this.ie),f=this.ie),d=this.BF(l),this.Gk.Oo(f),this.g.Vi(d,this.jo),this.Gk.Kz(this.qa,this.jo,!0),this.hK(c,-1,l,this.Gk),this.Gk.clear()},n.prototype.xS=function(){if(this.nh.size!=0)for(;this.nh.size!=0;){if(this.nh.size>Math.max(100,this.g.fd)){this.nh.clear(!1),this.Ng=!0;break}var l=this.nh.Fc();this.nh.If(),this.Pl(l,-1),this.WS(l)!=-1&&this.wS(l),this.Vn=!1}},n.prototype.wS=function(l){if(this.Vn){var c=this.Mc.zu(this.MH,this.GH,l,!0);this.Vn=!1}else c=this.Mc.KD(l);c==-1?this.UT(this.Mc.ja(this.Mc.FF()),l):(this.Pl(l,c),this.$d.rg&&(this.$d.Kr(),this.oF(this.$d.Dm,c)))},n.prototype.WS=function(l){var c=this.pg(l,0);if(l=this.pg(l,1),this.Hn(c,this.yo),this.Hn(l,this.Pi),h.h.yc(this.yo,this.Pi)<=this.UA)return this.Ng=!0,-1;var d=this.yo.compare(this.vh),f=this.Pi.compare(this.vh);return 0>=d&&0<f?l:0>=f&&0<d?c:-1},n.prototype.oQ=function(){var l=new h.ia(0);l.Jb(this.g.fd);for(var c=this.g.Yq(),d=c.next();d!=-1;d=c.next())this.g.Pa(d,this.xh)!=-1&&l.add(d);this.g.nx(l,l.size),this.pQ(l)},n.prototype.pQ=function(l){this.df.clear(),this.df.De(l.size),this.df.Vo(new C(this.g));var c=new h.h;c.Rc();for(var d=-1,f=new h.h,m=0,b=l.size;m<b;m++){var x=l.get(m);this.g.Gc(x,f),f.qb(c)?(x=this.g.Pa(x,this.xh),this.Xm(d,x)):(d=this.Le(x),this.g.Gc(x,c),x=this.df.xn(x),this.Et(d,x))}},n.prototype.qQ=function(){var l=new h.ia(0);l.Jb(this.g.fd);for(var c=this.df.rc(-1);c!=-1;c=this.df.lb(c))l.add(this.df.ja(c));this.df.clear(),this.g.nx(l,l.size),c=0;for(var d=l.size;c<d;c++){var f=l.get(c),m=this.Le(f);f=this.df.xn(f),this.Et(m,f)}},n.prototype.vF=function(l,c){var d=this.il(l);if(d!=-1){var f=d;do h.$c.LG(this.Pp(f))&&c.add(f),f=this.Rp(f,l);while(f!=d)}},n.prototype.BK=function(l,c){for(l=this.lh.rc(this.Sr(l));l!=-1;l=this.lh.lb(l))this.g.mf(this.lh.ja(l),c)},n.prototype.hK=function(l,c,d,f){this.Xu(l),c!=-1&&this.Xu(c),this.TI(0,l,f),c!=-1&&this.TI(1,c,f),d!=-1&&(f.Bf.D(this.yo),this.Hn(d,this.Pi),this.Pi.qb(this.yo)||this.Ak.add(d)),d=0;for(var m=this.Ak.size;d<m;d++){var b=this.Ak.get(d),x=this.dz(b);x!=-1&&(this.df.vd(x,-1),this.Et(b,-1))}for(d=this.Rh(l),m=c!=-1?this.Rh(c):-1,this.WD(d,f,0),c!=-1&&this.WD(m,f,1),this.ZE(l,f,0),c!=-1&&this.ZE(c,f,1),this.Qd.bh(d),this.Uu(l),c!=-1&&(this.Qd.bh(m),this.Uu(c)),d=0,m=this.Ak.size;d<m;d++)(b=this.Ak.get(d))==this.Jq&&(this.Xv=!0),(x=this.dz(b))==-1&&((x=this.df.KD(this.BF(b)))==-1?(l=this.Le(this.df.ja(this.df.FF())),this.Xm(l,b)):this.Et(b,x));this.Ak.clear(!1)},n.prototype.Hn=function(l,c){this.g.dG(this.ez(l),c)},n.prototype.BF=function(l){return this.lh.Jn(this.Sr(l))},n.prototype.jC=function(){this.Xv=!1,this.Jq=-1,this.$d==null&&(this.Mc.Rv=!1,this.$d=new u(this),this.Mc.Zn=this.$d);var l=new h.ia(0),c=null,d=null;this.GH=this.MH=-1,this.Vn=!1;for(var f=this.df.rc(-1);f!=-1;){this.Vn=!1;var m=this.df.ja(f);this.Jq=this.Le(m),this.g.Gc(m,this.vh),this.$d.$J(this.vh.y,this.vh.x);var b=this.il(this.Jq),x=b==-1;if(!x){m=b;do{var $=this.Pp(m);$==-1?(this.nh.add(m),this.Pl(m,-3)):$!=-3&&l.add($),m=this.Rp(m,this.Jq)}while(m!=b)}if(0<l.size){for(this.Vn=l.size==1&&this.nh.size==1,x=0,b=l.size;x<b;x++)m=this.Mc.ja(l.get(x)),this.Pl(m,-2);var E=-2,O=-2;for(x=0,b=l.size;x<b;x++){if($=l.get(x),E==-2){var R=this.Mc.we($);R!=-1?(m=this.Mc.ja(R),(m=this.Pp(m))!=-2&&(E=R)):E=-1}if(O==-2&&(($=this.Mc.lb($))!=-1?(m=this.Mc.ja($),(m=this.Pp(m))!=-2&&(O=$)):O=-1),E!=-2&&O!=-2)break}for(x=0,b=l.size;x<b;x++)$=l.get(x),m=this.Mc.ja($),this.Mc.vd($,-1),this.Pl(m,-1);l.clear(!1),this.MH=E!=-1?E:-1,this.GH=O!=-1?O:-1,E!=-1&&O!=-1?this.Vn||this.lO(E,O):E==-1&&O==-1&&(this.Vn=!1)}else x&&(c==null&&(c=new o(this)),c.Dh(this.vh),this.Mc.uJ(c),c.rg&&(c.Kr(),this.GQ(this.Jq,c.Dm)));this.xS(),this.Xv?(this.Xv=!1,d==null&&(d=new w(this.g)),d.Dh(this.vh),f=this.df.uJ(d)):f=this.df.lb(f)}return this.Wn},n.prototype.er=function(l){for(this.g=l,this.xh=this.g.Gd(),this.hb.De(l.fd+32),this.zd.De(l.fd),this.lh.At(l.fd),this.lh.fn(l.fd),this.Qd.At(l.fd+32),this.Qd.fn(l.fd+32),l=this.g.ld;l!=-1;l=this.g.ue(l))if(h.aa.Hc(this.g.ic(l)))for($=this.g.Ob(l);$!=-1;$=this.g.Rb($)){var c=this.g.Ja($),d=this.g.Xa($),f=this.Ym(d),m=this.nt(d);for(this.hj(m,f),E=this.g.U(d),d=0,c-=2;d<c;d++){var b=this.g.U(E),x=this.Ym(E);this.hj(m,x),m=this.nt(E),this.hj(m,x),E=b}this.g.dc($)?(x=this.Ym(E),this.hj(m,x),m=this.nt(E),this.hj(m,x),this.hj(m,f)):(x=this.Ym(E),this.hj(m,x))}else for(var $=this.g.Ob(l);$!=-1;$=this.g.Rb($)){var E=this.g.Xa($);for(f=0,c=this.g.Ja($);f<c;f++)this.Ym(E),E=this.g.U(E)}this.oQ()},n}();h.RC=s}(G||(G={})),function(h){var C=function(w){function u(o,s,n){var l=w.call(this)||this;if(o!==void 0)if(n!==void 0){l.description=h.ee.og();var c=new h.Nd;c.K(o,s,n),l.dC(c)}else if(s!==void 0)l.description=h.ee.og(),l.Cb(o,s);else if(o instanceof h.ra)l.description=o;else if(o instanceof h.h)l.description=h.ee.og(),l.Cb(o);else{if(!(o instanceof u))throw h.i.N();l.description=o.description,l.Cb(o.Lg(),o.ih()),o.ka!==null&&(l.ka=o.ka.slice(0))}else l.description=h.ee.og();return l}return pt(u,w),u.prototype.D=function(o){if(o===void 0){if(this.Ac())throw h.i.fa("This operation should not be performed on an empty geometry.");return(o=new h.h).ma(this.ka[0],this.ka[1]),o}if(this.Ac())throw h.i.fa("This operation should not be performed on an empty geometry.");o.ma(this.ka[0],this.ka[1])},u.prototype.Cb=function(o,s){typeof o=="number"?(this.vc(),this.ka==null&&this.un(),this.ka[0]=o,this.ka[1]=s):(this.vc(),this.Cb(o.x,o.y))},u.prototype.Cz=function(){if(this.Ac())throw h.i.fa("This operation should not be performed on an empty geometry.");var o=new h.Nd;return o.x=this.ka[0],o.y=this.ka[1],o.z=this.description.iG()?this.ka[2]:h.ra.se(1),o},u.prototype.dC=function(o){this.vc();var s=this.hasAttribute(1);s||h.ra.DG(1,o.z)||(this.re(1),s=!0),this.ka==null&&this.un(),this.ka[0]=o.x,this.ka[1]=o.y,s&&(this.ka[2]=o.z)},u.prototype.Lg=function(){if(this.Ac())throw h.i.fa("This operation should not be performed on an empty geometry.");return this.ka[0]},u.prototype.cC=function(o){this.setAttribute(0,0,o)},u.prototype.ih=function(){if(this.Ac())throw h.i.fa("This operation should not be performed on an empty geometry.");return this.ka[1]},u.prototype.aK=function(o){this.setAttribute(0,1,o)},u.prototype.bS=function(){return this.Uc(1,0)},u.prototype.wX=function(o){this.setAttribute(1,0,o)},u.prototype.zR=function(){return this.Uc(2,0)},u.prototype.hX=function(o){this.setAttribute(2,0,o)},u.prototype.Ec=function(){return this.yF(3,0)},u.prototype.LJ=function(o){this.setAttribute(3,0,o)},u.prototype.Uc=function(o,s){var n=this.description.Pf(o);return 0<=n?this.ka[this.description.$j(n)+s]:h.ra.se(o)},u.prototype.yF=function(o,s){var n=this.description.Pf(o);return 0<=n?this.ka[this.description.$j(n)+s]:h.ra.se(o)},u.prototype.setAttribute=function(o,s,n){this.vc();var l=this.description.Pf(o);0>l&&(this.re(o),l=this.description.Pf(o)),this.ka==null&&this.un(),this.ka[this.description.$j(l)+s]=n},u.prototype.getType=function(){return 33},u.prototype.Db=function(){return 0},u.prototype.Oa=function(){this.vc(),this.ka!=null&&(this.ka[0]=NaN,this.ka[1]=NaN)},u.prototype.sn=function(o){if(this.ka!=null){for(var s=h.ee.Iw(o,this.description),n=[],l=0,c=0,d=o.Aa;c<d;c++){var f=o.kd(c),m=h.ra.Va(f);if(s[c]==-1){var b=h.ra.se(f);for(f=0;f<m;f++)n[l]=b,l++}else for(b=this.description.$j(s[c]),f=0;f<m;f++)n[l]=this.ka[b],l++,b++}this.ka=n}this.description=o},u.prototype.un=function(){this.lJ(this.description.Ae.length),u.cE(this.description.Ae,this.ka,this.description.Ae.length),this.ka[0]=NaN,this.ka[1]=NaN},u.prototype.Oc=function(o){if(o instanceof h.Dd){if(!this.Ac()){var s=this.D();o.Eh(s,s),this.Cb(s)}}else this.Ac()||(this.re(1),s=this.Cz(),this.dC(o.fp(s)))},u.prototype.copyTo=function(o){if(o.getType()!=33)throw h.i.N();o.vc(),this.ka==null?(o.Oa(),o.ka=null,o.Nf(this.description)):(o.Nf(this.description),o.lJ(this.description.Ae.length),u.cE(this.ka,o.ka,this.description.Ae.length))},u.prototype.Ia=function(){return new u(this.description)},u.prototype.B=function(){return this.Ac()},u.prototype.Ac=function(){return this.ka==null||isNaN(this.ka[0])||isNaN(this.ka[1])},u.prototype.bn=function(o){o.Oa(),this.description!=o.description&&o.Nf(this.description),o.Zb(this)},u.prototype.A=function(o){this.Ac()?o.Oa():(o.v=this.ka[0],o.G=this.ka[1],o.C=this.ka[0],o.H=this.ka[1])},u.prototype.Qo=function(o){if(this.Ac())o.Oa();else{var s=this.Cz();o.v=s.x,o.G=s.y,o.Ye=s.z,o.C=s.x,o.H=s.y,o.Bg=s.z}},u.prototype.Tg=function(o,s){var n=new h.Nc;return this.Ac()?(n.Oa(),n):(o=this.Uc(o,s),n.oa=o,n.va=o,n)},u.prototype.lJ=function(o){if(this.ka==null)this.ka=h.O.lg(o);else if(this.ka.length<o){for(var s=this.ka.slice(0),n=this.ka.length;n<o;n++)s[n]=0;this.ka=s}},u.cE=function(o,s,n){if(0<n)for(n=0;n<o.length;n++)s[n]=o[n]},u.prototype.Nb=function(o){if(o==this)return!0;if(!(o instanceof u)||this.description!=o.description)return!1;if(this.Ac())return!!o.Ac();for(var s=0,n=this.description.Ae.length;s<n;s++)if(this.ka[s]!=o.ka[s])return!1;return!0},u.prototype.cc=function(){var o=this.description.cc();if(!this.Ac())for(var s=0,n=this.description.Ae.length;s<n;s++){var l=this.ka[s];l=h.O.truncate(l^l>>>32),o=h.O.Th(l,o)}return o},u.prototype.mg=function(){return null},u}(h.aa);h.Sa=C}(G||(G={})),function(h){var C=function(){function w(u,o,s){u!==void 0&&(this.x=u,this.y=o,this.z=s)}return w.construct=function(u,o,s){var n=new w;return n.x=u,n.y=o,n.z=s,n},w.prototype.K=function(u,o,s){this.x=u,this.y=o,this.z=s},w.prototype.lx=function(){this.z=this.y=this.x=0},w.prototype.normalize=function(){var u=this.length();u==0&&(this.x/=u,this.y/=u,this.z/=u)},w.prototype.length=function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},w.prototype.sub=function(u){return new w(this.x-u.x,this.y-u.y,this.z-u.z)},w.prototype.Ag=function(u){new w(this.x*u,this.y*u,this.z*u)},w.prototype.Qh=function(u){return this.x*u.x+this.y*u.y+this.z*u.z},w}();h.Nd=C}(G||(G={})),function(h){var C=function(){function w(u,o,s){this.Gw=this.DA=null,this.Xf=o,this.FT=o.y-s,this.ET=o.y+s,this.Ew=0,this.dA=u,this.qa=s,this.RT=s*s,this.eA=s!=0,this.Lv=!1}return w.prototype.result=function(){return this.Ew!=0?1:0},w.prototype.ZM=function(u){return u=u.hc(u.fe(this.Xf,!1)),h.h.yc(u,this.Xf)<=this.RT},w.prototype.fF=function(u){if(!this.eA&&(this.dA&&this.Xf.qb(u.ac())||this.Xf.qb(u.wc())))this.Lv=!0;else if(u.na==this.Xf.y&&u.na==u.la){if(this.dA&&!this.eA){var o=Math.max(u.sa,u.pa);this.Xf.x>Math.min(u.sa,u.pa)&&this.Xf.x<o&&(this.Lv=!0)}}else{var s=!1;if(o=Math.max(u.sa,u.pa),this.Xf.x>o?s=!0:this.Xf.x>=Math.min(u.sa,u.pa)&&(s=0<u.cq(!0,this.Xf.y,this.Gw,null)&&this.Gw[0]<=this.Xf.x),s){if(this.Xf.y==u.ac().y){if(this.Xf.y<u.wc().y)return}else if(this.Xf.y==u.wc().y&&this.Xf.y<u.ac().y)return;this.Ew=this.dA?1^this.Ew:this.Ew+(u.ac().y>u.wc().y?1:-1)}}},w.prototype.SI=function(u){var o=u.Tg(0,1);if(o.oa>this.ET||o.va<this.FT)return!1;if(this.eA&&this.ZM(u))return!0;if(o.oa>this.Xf.y||o.va<this.Xf.y)return!1;if(this.DA==null&&(this.DA=[null,null,null,null,null]),this.Gw==null&&(this.Gw=[0,0,0]),0<(o=u.eG()))for(u=0;u<o;u++){var s=this.DA[u].get();if(this.fF(s),this.Lv)return!0}else if(this.fF(u),this.Lv)return!0;return!1},w.PM=function(u,o,s){for(o=new w(u.In()==0,o,s),u=u.Ga();u.$a();)for(;u.Ha();)if(s=u.ha(),o.SI(s))return-1;return o.result()},w.QM=function(u,o,s,n){var l=new h.l;u.xc(l),l.W(n,n);var c=new w(u.In()==0,s,n);u=u.Ga();var d=new h.l;for(d.K(l),d.C=s.x+n,d.G=s.y-n,d.H=s.y+n,n=(s=o.MF(d,n)).next();n!=-1;n=s.next())if(u.Vb(o.ja(n)),u.Ha()&&(n=u.ha(),c.SI(n)))return-1;return c.result()},w.wm=function(u,o,s){if(u.B())return 0;var n=new h.l;if(u.xc(n),n.W(s,s),!n.contains(o))return 0;if((n=u.Bb)!=null){var l=n.Fk;if(l!=null){if((l=l.So(o.x,o.y))==1)return 1;if(l==0)return 0}if((n=n.Fb)!=null)return w.QM(u,n,o,s)}return w.PM(u,o,s)},w.bT=function(u,o,s){return o.B()?0:w.wm(u,o.D(),s)},w.Ml=function(u,o){return!(16>(u=u.I()))&&2*u+Math.log(u)/Math.log(2)*o<1*u*o},w}();h.Dg=C}(G||(G={})),function(h){var C=function(w){function u(o){return w.call(this,!0,o)||this}return pt(u,w),u.prototype.Ia=function(){return new u(this.description)},u.prototype.Db=function(){return 2},u.prototype.getType=function(){return 1736},u.prototype.xG=function(o,s,n){this.JS(o,s,n)},u.prototype.qR=function(){this.FR()},u}(h.Vk);h.Da=C}(G||(G={})),function(h){(function(C){C[C.PiPOutside=0]="PiPOutside",C[C.PiPInside=1]="PiPInside",C[C.PiPBoundary=2]="PiPBoundary"})(h.RL||(h.RL={})),h.hd=function(){function C(){}return C.KG=function(w,u,o){return(w=h.Dg.bT(w,u,o))==0?0:w==1?1:2},C.Yd=function(w,u,o){return(w=h.Dg.wm(w,u,o))==0?0:w==1?1:2},C.WX=function(w,u,o,s,n){if(u.length<o||n.length<o)throw h.i.N();for(var l=0;l<o;l++)n[l]=C.Yd(w,u[l],s)},C.sK=function(w,u,o,s,n){if(w.getType()==1736)C.WX(w,u,o,s,n);else{if(w.getType()!=197)throw h.i.fa("invalid_call");var l=new h.l;w.A(l),C.$M(l,u,o,s,n)}},C.$M=function(w,u,o,s,n){if(u.length<o||n.length<o)throw h.i.N();if(w.B())for(s=0;s<o;s++)n[s]=0;else for(w.W(.5*-s,.5*-s),w.W(.5*s,.5*s),s=0;s<o;s++)w.contains(u[s])?n[s]=1:w.contains(u[s])?n[s]=2:n[s]=0},C.YX=function(w,u,o,s,n){for(var l=0;l<o;l++)n[l]=w.qs(u[l],s)?2:0},C.XX=function(w,u,o,s,n){var l=w.Bb,c=null;l!=null&&(c=l.Fk),l=o;for(var d=0;d<o;d++)if(n[d]=1,c!=null){var f=u[d];c.So(f.x,f.y)==0&&(n[d]=0,l--)}if(l!=0)for(w=w.Ga();w.$a()&&l!=0;)for(;w.Ha()&&l!=0;)for(c=w.ha(),d=0;d<o&&l!=0;d++)n[d]==1&&c.qs(u[d],s)&&(n[d]=2,l--);for(d=0;d<o;d++)n[d]==1&&(n[d]=0)},C.tK=function(w,u,o,s,n){var l=w.getType();if(l==1607)C.XX(w,u,o,s,n);else{if(!h.aa.yd(l))throw h.i.fa("Invalid call.");C.YX(w,u,o,s,n)}},C}()}(G||(G={})),function(h){var C=function(w){function u(o,s){if(arguments.length==2){var n=w.call(this,!1,o.description)||this;n.nf(o),n.lineTo(s)}else n=w.call(this,!1,o)||this;return n}return pt(u,w),u.prototype.Ia=function(){return new u(this.description)},u.prototype.Db=function(){return 1},u.prototype.getType=function(){return 1607},u.prototype.xG=function(o,s,n){this.KS(o,s,n)},u}(h.Vk);h.Ta=C}(G||(G={})),function(h){var C=function(){function w(){}return w.prototype.progress=function(){return!0},w.zp=function(u){if(u!=null&&!u.progress(-1,-1))throw h.i.WC()},w}();h.mp=C}(G||(G={})),function(h){var C;(C=h.PK||(h.PK={}))[C.clipWithInputHorizon=1]="clipWithInputHorizon",C[C.clipWithOutputHorizon=2]="clipWithOutputHorizon";var w=function(){function s(){this.Kg=3,this.Vu=this.Jr=NaN}return s.prototype.PW=function(n){this.QB(1,n)},s.prototype.QW=function(n){this.QB(2,n)},s.prototype.hS=function(){return this.hs(1)},s.prototype.iS=function(){return this.hs(2)},s.prototype.QB=function(n,l){this.Kg=l?this.Kg|n:this.Kg&~n},s.prototype.hs=function(n){return!!(this.Kg&n)},s.prototype.Of=function(){var n=new s;return n.Jr=this.Jr,n.Vu=this.Vu,n.Kg=this.Kg,n},s}();h.yC=w,function(s){s[s.Dont_Geonomalize_Polygon=2147483648]="Dont_Geonomalize_Polygon",s[s.Dont_Adjust_At_Poles=1073741824]="Dont_Adjust_At_Poles"}(h.QK||(h.QK={}));var u=function(){function s(){this.Kg=0}return s.prototype.QB=function(n,l){this.Kg=l?this.Kg|n:this.Kg&~n},s.prototype.hs=function(n){return!!(this.Kg&n)},s.jg=function(n){var l=new s;return l.Kg=n.Kg,l},s.prototype.mM=function(n){this.Kg=n.Kg},s}();h.AY=u;var o=function(){function s(n,l,c){this.ef=n,this.Yf=l,this.Uf=new h.l,this.Uf.K(c),this.AT=n.cc()+l.cc()+this.Uf.cc().toString()}return s.prototype.cc=function(){return this.AT},s.prototype.Nb=function(n){return this==n||this.ef.Nb(n.ef)&&this.Yf.Nb(n.Yf)&&this.Uf.Nb(n.Uf)},s}();h.FY=o,o=function(){function s(){this.Yf=this.ef=null,this.rH=new w,this.sH=new u,this.ww=this.Wf=null,this.mw=this.Tn=!0}return s.Nr=function(n,l,c,d){var f;d===void 0&&(d=null),f===void 0&&(f=null);var m=new s;return m.qp(n,l,c,d,f),m},s.prototype.qp=function(n,l,c,d,f){if(n==null||l==null)throw h.i.fa("invalidArgument");if(this.ef=n,this.Yf=l,this.mw=this.Tn=!1,d!=null&&(this.rH=d.Of()),f!=null&&this.sH.mM(f),f=!1,l.Sb()==1&&d!=null&&(d=d.Jr,isNaN(d)||d==0||(f=!0)),n==l)this.Tn=!f,this.mw=!0;else{d=n.Sb();var m=l.Sb();if(d==0||m==0){if(c!=null)throw h.i.N();n.Hd()!=null&&l.Hd()!=null&&(this.Tn=n.Hd().Nb(l.Hd()))}else d==3||m==3?this.Tn=n.Nb(l):this.ef.kS(this.Yf)?this.Tn=!f:this.Tn=!1,this.Wf=c,this.Wf!=null&&this.Wf.ix(),this.mw=(this.Wf==null||this.Wf.count()==0)&&this.ef.sc().Nb(this.Yf.sc())}this.oY()},s.prototype.isIdentity=function(){return this.Tn},s.prototype.nR=function(){return this.rH.Of()},s.prototype.Nb=function(n){return n==this||!!(n instanceof s&&this.ef.Nb(n.ef)&&this.Yf.Nb(n.Yf))&&(this.Wf==n.Wf||!(this.Wf==null||n.Wf==null||!this.Wf.Nb(n.Wf)))},s.prototype.oY=function(){this.ww=new h.bu(this)},s}(),h.vr=o}(G||(G={})),function(h){var C=function(){function w(){}return w.Cp=function(u){return u*w.oW},w.mx=function(u,o){return w.gP(o-u)},w.hP=function(u){return-360<=u&&720>u?(0>u?u+=360:360<=u&&(u-=360),u):(0>(u=h.lc.RK(u))&&(u+=360),u)},w.gP=function(u){return 180<(u=w.hP(u))&&(u-=360),u},w.oW=57.29577951308232,w}();h.qr=C,h.Hh=function(){function w(){}return w.lj=function(u,o){var s=new h.l;u.A(s);var n=h.cb.gh(o),l=new h.l;return l.K(n),l.v=s.v,l.C=s.C,l.W(.01*l.ca(),0),o=h.ta.Wd(o,s,!1),l.contains(s)?u:h.Ud.clip(u,l,o,0)},w.ks=function(u,o,s,n,l){if(!h.cb.Wc(o))throw h.i.N();var c=h.ta.kj(o,u,!1),d=h.cb.gh(o),f=h.cb.sc(o),m=f.Hd().ai,b=h.cb.vv(f);f=h.cb.ev(f),b*=2-b;var x=new h.Nc;d.cn(x);var $=[[0,0],[0,0]];if(h.Eg.Sb(o)==2?n?($[0][0]=w.Zm(l,x),$[0][1]=d.Jp(),h.cb.vt(),d=$[0][0]*m):($[0][0]=d.gk(),$[0][1]=l,h.cb.vt(),d=$[0][1]*m):d=l*m,!n&&d!=0)throw h.i.N();var E=new h.ga,O=new h.gd;u=O.Ib(u);for(var R=[0],k=new h.h,j=new h.h,F=new h.h,L=new h.h,V=new h.h,B=new h.h,W=O.Ob(u);W!=-1;W=O.Rb(W)){var K=O.Xa(W);O.D(K,F);for(var re=!1,ae=K=O.U(K);ae!=-1;ae=O.U(ae)){if(ae==K){if(re)break;re=!0}if(O.D(ae,L),n&&c<l-F.x&&L.x-l>c||c<l-L.x&&F.x-l>c||!n&&c<-F.y&&L.y>c||c<-L.y&&F.y>c)do if(!(Math.abs(F.x-L.x)>=.5*x.R())){if(h.Eg.Sb(o)==2?($[0][0]=w.Zm(F.x,x),$[0][1]=F.y,$[1][0]=w.Zm(L.x,x),$[1][1]=L.y,h.cb.dW(),V.x=$[0][0]*m,V.y=$[0][1]*m,B.x=$[1][0]*m,B.y=$[1][1]*m):(V.x=F.x*m,V.y=F.y*m,B.x=L.x*m,B.y=L.y*m),B.x=6.283185307179586*(L.x-F.x)/x.R()+V.x,n){if(j.x=d,j.y=w.Nz(f,b,V,B,d,s),isNaN(j.y))break}else{if(j.x=w.Lz(f,b,V,B,s),isNaN(j.x))break;j.y=0}h.kb.wd(f,b,V.x,V.y,B.x,B.y,E,null,null,s);var de=E.u;h.kb.wd(f,b,V.x,V.y,j.x,j.y,E,null,null,s);var ce=E.u;h.Eg.Sb(o)==2?($[0][0]=j.x/m,$[0][1]=j.y/m,h.cb.bR(),n?(k.y=$[0][1],k.x=l):(k.x=w.os($[0][0],F.x,L.x,x),k.y=l)):n?(k.x=l,k.y=j.y/m):(k.x=w.os(j.x/m,F.x,L.x,x),k.y=l),R[0]=0<de?h.O.Rk(ce/de,0,1):.5,R[0]!=0&&R[0]!=1&&(de=O.Ma(ae),O.Ul(de,R,1),O.Cb(O.U(de),k.x,k.y))}while(!1);F.L(L)}}return O.Ne(u)},w.Fn=function(u,o,s,n,l){if(u.B())return u;var c=h.cb.bf(o);return w.Hp(u,s-180*c,360*c,o,n,l,!0)},w.Nz=function(u,o,s,n,l,c){if(3.141592653589793<=Math.abs(s.x-n.x)||!w.Sn(s.x,n.x,l))return NaN;if(s.x>n.x)var d=n;else d=s,s=n;n=new h.ga(0);var f=new h.ga(0),m=new h.ga(0);h.kb.wd(u,o,d.x,d.y,s.x,s.y,f,n,null,c);var b=f.u,x=0,$=1,E=new h.h;for(E.L(d);b*($-x)>1e-12*u;){var O=.5*(x+$);if(h.kb.oj(u,o,d.x,d.y,b*O,n.u,f,m,c),E.x=f.u,E.y=m.u,E.x==l)break;if(w.Sn(d.x,E.x,l))$=O;else{if(!w.Sn(s.x,E.x,l))return NaN;x=O}}return E.y},w.Sn=function(u,o,s){return u=C.Cp(u),o=C.mx(u,C.Cp(o)),(s=C.mx(u,C.Cp(s)))==0||0<o&&0<s&&s<=o||0>o&&0>s&&s>=o},w.Zm=function(u,o){var s=o.va-o.oa;return o.It(u-Math.floor((u-o.oa)/s)*s)},w.os=function(u,o,s,n){var l=new h.Nc;for(l.K(o,s),s=n.R(),u=Math.floor((u-o)/s)*s+u,l=l.sf();Math.abs(u-l)>Math.abs(u+s-l);)u+=s;return u},w.Lz=function(u,o,s,n,l){if(s.y>n.y)var c=n;else c=s,s=n;if((n=new h.Nc).K(c.y,s.y),!n.contains(0)||3.141592653589793<=Math.abs(c.x-s.x))return NaN;if(c.x==s.x)return c.x;var d=new h.ga(0),f=new h.ga(0),m=new h.ga(0);h.kb.wd(u,o,c.x,c.y,s.x,s.y,f,d,null,l);var b=f.u,x=0,$=1,E=new h.h;for(E.L(c);b*($-x)>1e-12*u;){var O=.5*(x+$);if(h.kb.oj(u,o,c.x,c.y,b*O,d.u,f,m,l),E.x=f.u,E.y=m.u,n.K(c.y,E.y),E.y==0)break;if(n.contains(0))$=O;else{if(n.K(s.y,E.y),!n.contains(0))return NaN;x=O}}return E.x},w.Hp=function(u,o,s,n,l,c,d){var f=new h.l;if(u.A(f),f.B())return u;var m=new h.Nc;f.cn(m);var b=new h.Nc;if(b.K(o,o+s),b.contains(m)&&b.va!=m.va)return u;var x=new h.l;x.K(f);var $=u.getType();if($==33)return((f=(x=l?u:u.Of()).Lg())<b.oa||f>=b.va||d&&f==b.va)&&(f+=Math.ceil((b.oa-f)/s)*s,f=b.It(f),x.cC(f)),x;if($==550){for(n=(x=l?u:u.Of()).ub(0),$=2*x.I(),u=!1,l=0;l<$;l+=2)((f=n.read(l))<b.oa||f>=b.va||d&&f==b.va)&&(u=!0,f+=Math.ceil((b.oa-f)/s)*s,f=b.It(f),n.write(l,f));return u&&x.Pc(1993),x}if(b.contains(m))return u;if($==197)return s=l?u:u.Of(),f.Ea(x),s.Xo(f),s;var E=.1*Math.max(f.ca(),f.R());for(x.W(0,E),d=u,b=n.Xd(0),u=h.Gh.local(),l=new h.Dd;;){var O=Math.floor((m.oa-o)/s),R=Math.ceil((m.va-o)/s);if(!(3<R-O))break;O=Math.floor(.5*(R+O)),x.v=f.v-E,x.C=o+s*O;var k=h.Ud.clip(d,x,b,c);x.v=x.C,x.C=f.C+E;var j=h.Ud.clip(d,x,b,c);l.gg((O-R)*s,0),j.Oc(l),$==1736?d=u.V(k,j,n,null):(d=k).add(j,!1),d.A(f),f.cn(m)}for(x.v=o,x.C=o+s,(o=new h.l).K(x),o.W(b,0),(o=Math.floor((f.v-x.v)/s)*s)!=0?(x.move(o,0),l.gg(-o,0)):l.RB(),o=$==1607?new h.Ta(d.description):new h.Da(d.description),c=new h.l,m=new h.l;f.C>x.v;)(E=h.Ud.clip(d,x,b,0)).A(m),($==1607?!E.B()&&(m.R()>b||m.ca()>b):!E.B()&&($!=1736||m.R()>b))&&(E.Oc(l),E.A(m),o.A(c),c.W(b,b),c.isIntersecting(m)&&$==1736?o=u.V(o,E,n,null):o.add(E,!1)),x.move(s,0),l.shift(-s,0);return o},w.WI=function(u,o,s,n){var l=new h.de(s.description);l.Fd(s,0,-1),l=h.cb.zh(l,u,o);var c=s.I();if(n.Oa(),!h.cb.Wc(u)||c!=l.I())return!1;var d=new h.l;s.A(d);var f=new h.l;if(l.A(f),d=d.R(),f=f.R(),d!=0&&f!=0){if(f/=d,u=h.cb.gh(o).R()/h.cb.gh(u).R(),1e-10<Math.abs(f/u-1))return!1}else if(d!=0||f!=0)return!1;for(n.add(s,!1),s=0;s<c;s++)u=l.Na(s),n.Cb(s,u);return!0},w.Oz=function(){throw h.i.Ie()},w}()}(G||(G={})),function(h){var C,w,u;(w=C=h.si||(h.si={}))[w.Clip=0]="Clip",w[w.DontClip=1]="DontClip",w[w.PannableFold=2]="PannableFold",function(o){o[o.Geodesic=0]="Geodesic",o[o.Loxodrome=1]="Loxodrome",o[o.GreatElliptic=2]="GreatElliptic",o[o.NormalSection=3]="NormalSection",o[o.ShapePreserving=4]="ShapePreserving"}(u=h.WK||(h.WK={})),h.zb=function(){function o(){}return o.xv=function(s,n,l){if(l||0<n){for(s=s.toString(h.Sc.PE_STR_NAME_CANON|h.Sc.PE_STR_AUTH_NONE),n=[],l=0;l<s.length;l++)n[l]="a"<=s[l]&&"z">=s[l]?n[l]=s[l].toUpperCase():s[l];return n.join()}return s.toString(h.Sc.PE_STR_AUTH_TOP)},o.ur=function(s,n,l,c){var d=c.length,f=l.I();if(f!=0){var m=l.ub(0),b=Math.min(f,d),x=0,$=s.eh();isNaN(n)&&(n=0);for(var E=s.Wc(),O=179*(s=E?s.sc().Oe().R():0)/360;0<f;){if(m.uB(x<<1,b,c),h.ej.projToGeogCenter($,b,c,n),E)for(var R=0;R<b;R++){var k=c[R][0]-n,j=h.lc.sign(k),F=m.read(2*(x+R));0>j*h.lc.sign(F)&&Math.abs(k)>O&&(c[R][0]+=-j*s)}m.uC(x<<1,b,c),x+=b,f-=b,b=Math.min(f,d)}l.Pc(1993)}},o.IL=function(s,n,l,c){var d=0,f=s.eh();isNaN(d)&&(d=0);var m=s.Wc(),b=s.bf();s=360*b,b*=179;for(var x=c.length,$=0;$<l;){for(var E=$;E<l&&n[E].isNaN();++E)$++;var O=Math.min(x,l-$);if(0<O){E=1;for(var R=$+1;E<O;++E,++R)if(n[R].isNaN()){O=E;break}if(h.ta.Jy(c,n,$,O),h.ej.projToGeogCenter(f,O,c,d),m)for(E=0,R=$;E<O;++E,++R){var k=n[R].x,j=c[E][0]-d,F=h.lc.sign(j);0>F*h.lc.sign(k)&&Math.abs(j)>b&&(c[E][0]-=F*s)}h.ta.Iy(n,$,c,O),$+=O}}},o.Lx=function(s,n,l){var c=l.length,d=n.I();if(!(1>d)){var f=n.ub(0),m=Math.min(d,c),b=0,x=s.eh(),$=s.Wc(),E=$?s.Oe().R():0,O=179*E/360,R=0;for($&&(R=s.zi());0<d;){if(f.uB(b<<1,m,l),h.ej.geogToProj(x,m,l),$)for(s=0;s<m;s++){var k=l[s][0],j=h.lc.sign(k),F=f.read(2*(b+s))-R;0>j*h.lc.sign(F)&&Math.abs(k)>O&&(l[s][0]+=-j*E)}f.uC(b<<1,m,l),b+=m,d-=m,m=Math.min(d,c)}n.Pc(1993)}},o.HL=function(s,n,l,c){if(l!=0){var d=s.eh(),f=s.Wc(),m=f?s.Oe().R():0,b=179*m/360,x=0;for(f&&(x=s.zi()),s=0;s<l;){for(var $=s;$<l&&n[$].isNaN();++$)s++;var E=Math.min(c.length,l-s);if(0<E){$=1;for(var O=s+1;$<E;++$,++O)if(n[O].isNaN()){E=$;break}if(h.ta.Jy(c,n,s,E),h.ej.geogToProj(d,E,c),f)for($=0,O=s;$<E;$++){var R=c[$][0],k=h.lc.sign(R);0>k*h.lc.sign(n[O].x-x)&&Math.abs(R)>b&&(c[$][0]-=k*m)}h.ta.Iy(n,s,c,E),s+=E}}}},o.tr=function(s,n,l,c){var d=n.I();if(d!=0){var f=n.ub(0),m=s.ef,b=s.Yf,x=m.sc().Qp(),$=b.sc().Qp(),E=m.bf(),O=b.bf();if((s=s.Wf)==null||s.count()==0){for(l=x/$,c=(m.Up()-b.Up())*O,$=-90*E,s=90*E,x=!1,O=1,m=2*d;O<m;)E=f.get(O),(b=h.O.Rk(E,$,s))!=E&&(f.set(O,b),x=!0),O+=2;if(c!=0||l!=1)for(x=!0,$=new h.h,O=0;O<d;O++)f.tc(2*O,$),$.x*=l,$.x+=c,$.y*=l,f.Tt(2*O,$);x&&n.Pc(1993)}else{m=c.length,b=Math.min(d,m);var R=h.O.lg(b),k=null,j=0,F=NaN,L=NaN,V=360*O,B=O/E;l&&(L=90*O,F=89.9*E,k=h.O.lg(b));for(var W=!0,K=0;d!=0;){for(E=!1,f.uB(j<<1,b,c),O=0;O<b;O++)R[O]=c[O][0];if(l)for(O=0;O<b;O++){var re=Math.abs(c[O][1])-F;0<re&&(E=c[O][1],c[O][1]=h.lc.Cn(F,E),k[O]=h.lc.Cn(re,E),E=!0)}for(O=c[0][0],s.transform(c,b,x,$),W&&(K=c[0][0]-B*O,W=!1),O=0;O<b;O++)re=c[O][0]-R[O]*B-K,200<Math.abs(re)&&(c[O][0]=0<re?c[O][0]-V:c[O][0]+V);if(E){for(O=0;O<b;O++)k[O]!=0&&(c[O][1]+=B*k[O],c[O][1]>L?c[O][1]=L:c[O][1]<-L&&(c[O][1]=-L));for(E=0;E<b;E++)k[E]=0}f.uC(j<<1,b,c),j+=b,d-=b,b=Math.min(d,m)}n.Pc(1993)}}},o.GL=function(s,n,l,c){if(s.mw)c=90*s.ef.bf(),h.ta.dK(n,l,-c,c);else{var d=s.Wf,f=s.ef,m=s.Yf;s=f.Xr();var b=m.Xr(),x=f.bf(),$=90*x,E=m.bf();if(d==null||d.count()==0){if(c=s/b,d=(f.Up()-m.Up())*E,h.ta.dK(n,l,-$,$),d!=0||c!=1)for(E=0;E<l;E++)n[E].x*=c,n[E].x+=d,n[E].y*=c}else{f=Math.min(l,c.length),$=h.O.lg(f),m=360*E,x=E/x;for(var O=!0,R=0,k=0;l!=0;){for(E=0;E<f;E++)$[E]=n[E+k].x;for(E=n[0].x,h.ta.Jy(c,n,k,f),d.transform(c,f,s,b),h.ta.Iy(n,k,c,f),O&&(R=n[0].x-x*E,O=!1),E=0;E<f;E++){var j=n[k+E].x-$[E]*x-R;200<Math.abs(j)&&(n[k+E].x=0<j?n[k+E].x-m:n[k+E].x+m)}k+=f,l-=f,f=Math.min(l,c.length)}}}},o.dv=function(s,n){return s=s.gh(),isNaN(n)||s.Ju(n,0),s},o.UQ=function(s,n,l,c,d,f,m,b){for(var x=o.dv(c,d),$=x.R(),E=$/360,O=o.pE*E,R=s.ub(0),k=n.Wc(),j=k?$/n.Oe().R():0,F=!1,L=new h.Da(l.description),V=0,B=l.da();V<B;++V){var W=k,K=new h.Ta(l.description);if(K.addPath(l,V,!0),m!=0){var re=o.PD(!0,K,x.H-b,x.H,m);(F=F||re)&&(W=!1)}var ae=-1;W&&(ae=s.Ba(V));var de=K.ub(0),ce=K.I(),Te=0,le=de.read(0),He=0;re=3*c.Xd(0);var Ue=!1,lt=new h.h;lt.Rc();var Mt=new h.h;Mt.Rc();for(var Qt=!1,It=1;It<ce;++It){var ut=h.h.construct(de.eg(2*It),de.eg(2*It+1)),We=ut.x,Qe=We+Te,Dt=Qe-le;if(ut.x=Qe,Math.abs(Dt)>O){if(W){var Ot=ae+(It+1<ce?It:0),es=R.read(2*(ae+It-1));Ot=(R.read(2*Ot)-es)*j,Math.abs(Dt-Ot)>1*E&&(W=!1)}W||(Qe=We+(Te-=h.lc.Cn($,Qe-le)),++He,Qt=Te!=0,ut.x=Qe)}else Ue||h.ta.AG(Mt,lt,ut,re)&&(Ue=!0);Qt&&de.write(2*It,Qe),le=Qe,Mt.L(lt),lt.L(ut)}0<He&&K.Pc(1993),W=K.Na(0),ce=K.Na(ce-1),K=h.h.tb(W,ce)<re?o.uQ(K,c,d,f,Ue):o.vQ(s,V,K,c,d),L.add(K,!1)}return d=c.Xd(0),l=x.R()/180,o.Jt(L,x,.1*d,!1),L=L!=(d=h.ri.clip(L,x,d,l,f)),s=s.Ke(),m=0,0<(b=d.Ke())&&0>s?m=1:0>=b&&0<s&&(b==0?(b=NaN,n.Sb()==2?b=n.ml().Ke():n.Sb()==1&&(b=n.Oe().wF()),s>.99*b&&(m=-1)):m=-1),m!=0&&((n=new h.Da(d.description)).tp(x),(n=h.Xl.local().V(n,l,f)).add(d,!1),L=!0,d=n),L&&(d=h.Yl.local().V(d,c,!1,f)),d},o.vQ=function(s,n,l,c,d){var f=l.I(),m=l.Na(0),b=l.Na(f-1);d=(c=o.dv(c,d)).R(),m=h.lc.sign(b.x-m.x);var x=new h.l;l.xc(x);var $=c.gk();if(b=$-d,$+=d,0<=m){var E=Math.ceil((b-x.v)/d);for(E*=d;b>x.v+E;)E+=d;for(;b<x.C+E;)E-=d;var O=E;720<x.R()&&($=b+360*Math.ceil(x.R()/360))}else{for(E=Math.ceil(($-x.C)/d),E*=d;$<x.C+E;)E-=d;for(;$>x.v+E;)E+=d;O=E,720<x.R()&&(b=$-360*Math.ceil(x.R()/360))}E=m*d;var R=h.l.construct(x.v,x.G,x.C,x.H);R.move(O,0);var k=new h.Dd;k.gg(O,0),l.Oc(k),(x=new h.Ta(l.description)).add(l,!1),O=l.Na(f-1),d=0;for(var j=x.Na(0).x,F=0;0<m?R.C<$:R.v>b;)1024<=F&&(F=0),R.move(E,0),k.Gb=E,l.Oc(k),j+=E,c.v<=j&&c.C>=j&&(d=x.I()-1),l.Cb(0,O),O=l.Na(f-1),x.Dr(l,0,0,f-1,!1);return l=new h.Da(x.description),f=0<s.Ir(n),l.add(x,!1),s=x.Na(0),b=x.Na(x.I()-1),n=l.da()-1,(0>m?f:!f)?(m=h.h.construct(b.x,c.H),l.Ci(m),m=h.h.construct(c.gk(),c.H),l.Ci(m),c=h.h.construct(s.x,c.H)):(m=h.h.construct(b.x,c.G),l.Ci(m),m=h.h.construct(c.gk(),c.G),l.Ci(m),c=h.h.construct(s.x,c.G)),l.Ci(c),l.xG(0,n,0),l.kO(d),l},o.uQ=function(s,n,l,c,d){var f=new h.Da(s.description);f.add(s,!1),f.DB(0,f.I()-1);var m=new h.l;f.xc(m);var b=(l=o.dv(n,l)).R(),x=Math.ceil((l.v-m.v)/b);for(x*=b;l.v>m.v+x;)x+=b;for(;l.v<m.C+x;)x-=b;if((x+=b)!=0){m.move(x,0);var $=new h.Dd;$.gg(x,0),f.Oc($)}if(l.v<=m.v&&l.C>m.C)return d&&(d=f.Ke(),n=(f=h.Yl.local().V(f,n,!0,c)).Ke(),(n=h.lc.sign(d)!=h.lc.sign(n))&&f.oJ()),f;for((s=new h.Da(s.description)).add(f,!1),d=d||m.R()>b-n.Xd(0);m.v<l.C;)m.move(b,0),($=new h.Dd).gg(b,0),f.Oc($),s.add(f,!1);return d&&(d=s.Ke(),s.Yo(1),n=(s=h.Yl.local().V(s,n,!0,c)).Ke(),(n=h.lc.sign(d)!=h.lc.sign(n))&&s.oJ()),s},o.PD=function(s,n,l,c,d){for(var f=n.ub(0),m=n.I(),b=!1,x=0;x<m;x++){var $=h.h.construct(f.eg(2*x),f.eg(2*x+1));if(1&d&&$.y>=l){b=!0;break}if(2&d&&$.y<=-l){b=!0;break}}if(!b)return!1;f=!1,s&&(f=n.Nn(0)),m=(s=new h.gd).Ib(n),b=s.Ob(m);var E=-1,O=!0,R=new h.h;R.Rc(),x=new h.Sa;for(var k=-1,j=s.Xa(b);j!=-1;j=s.U(j)){$=s.Na(j);var F=1&d&&90<=$.y?1:0;if(F|=2&d&&$.y<=-l?2:0,0<E&&E!=F){if(R.x!=$.x){R.x=$.x,s.Vi(s.Ma(j),x);var L=s.wj(b,j,x);s.mf(L,R)}if(f)for(k=k!=-1?s.U(k):s.Xa(b),L=s.Ma(j);k!=L;)k=s.pd(k,!1);k=-1}0<F&&($.y=h.lc.Cn(c,$.y),s.mf(j,$),O||E==F||($.x!=R.x?(s.Vi(j,x),L=s.wj(b,j,x),s.Cb(L,R.x,$.y),k=L):k=j)),E=F,R=$,O=!1}if(f){if(k!=-1)for(k=s.U(k);k!=-1;)k=s.pd(k,!1);l=s.Xa(b),s.fq(l,s.rj(b))||(s.Vi(l,x),s.wj(b,-1,x))}return s.Ne(m).copyTo(n),!0},o.Mz=function(s,n,l,c){var d=s;if(d.B()||l==C.DontClip)return d;var f=d.getType();if(f==33)return d=[(c=d).D()],o.yG(d,1,n,l),d[0].isNaN()?c.Oa():c.Cb(d[0]),s;var m=(s=n.sc()).bf(),b=90*m,x=180*m,$=360*m,E=n.zi(),O=.5*m,R=new h.l;d.A(R);var k=n.Vr(),j=n.PQ(),F=k.getType()==197;if(n=new h.l,k.A(n),l==C.PannableFold&&(l=s.Oe().R(),n.v=E-.5*l,n.C=n.v+l),R.G<-b||R.H>b){if(new h.l().K(R.v-m,-b,R.C+m,b),(d=h.ri.Nu(d,n,s,NaN,0,c)).B())return d;d.A(R)}if(j&&(n.H<R.G||n.G>R.H))return d.Ia();if(R.R()>$&&(d=o.Hp(d,E-x,$,s,!0,0,!0,c)).A(R),(b=o.eO(R.v,R.C,n.v,n.C,$))!=0&&R.move(b,0),R.C>n.C||R.v<n.v){if(R.C>n.C)for(;R.v>=n.C;)R.move(-$,0),b-=$;for(;R.v<n.C-$;)R.move($,0),b+=$}if(l=h.ta.Hu(s,k),b!=0&&((m=new h.Dd).gg(b,0),d.Oc(m)),j){if(F&&n.contains(R))return d;for(j=[null,null],b=0;2>b;b++){if(F?m=h.aa.Hc(f)?h.ri.clip(d,n,l,O,c):h.ri.clip(d,n,l,0,c):(m=h.Xj.local().V(d,k,s,c))==k&&(m=h.aa.jg(m)),n.v<=R.v&&n.C>=R.C||n.v>=R.v&&n.C<=R.C)return m;j[b]=m,b==0&&(R.move(-$,0),(m=new h.Dd).gg(-$,0),d.Oc(m))}if(f==550)j[0].Fd(j[1],0,-1);else if(h.aa.Hc(f))j[0].add(j[1],!1);else{if(f!=33)throw h.i.fa("intersect_with_GCS_horizon: unexpected geometry type");j[0].B()&&(j[0]=j[1])}return j[0]}if(n.H<R.G||n.G>R.H)return d;for(f=0;!d.B()&&R.C>n.v;)f!=0&&((m=new h.Dd).gg(f,0),d.Oc(m)),h.dj.local().V(4,d,k,s,c)||k==(d=h.kp.local().V(d,k,s,c))&&(d=h.aa.jg(d)),f!=0&&((O=new h.Dd).gg(-f,0),d.Oc(O)),f-=$,R.move(-$,0);return d},o.yG=function(s,n,l,c){if(n!=0&&c!=C.DontClip)if(c==C.PannableFold){c=l.HR();for(var d=n,f=0;f<n;f++)(s[f].y>c.H||s[f].y<c.G)&&(s[f].Rc(),d--);d!=0&&o.av(s,n,c.v,c.R())}else{var m=90*(c=l.bf()),b=180*c;for(c*=360,d=n,f=0;f<n;f++)(s[f].y>m||s[f].y<-m)&&(s[f].Rc(),d--);if(d!=0){(d=new h.l).Zw(s,n),m=l.Vr();var x=l.hv();f=m.getType()==197;var $=new h.l;if(m.A($),!x||!($.H<d.G||$.G>d.H))if(x)if(o.av(s,n,$.gk()-b,c),d=n,f)for(f=0;f<n;f++)$.contains(s[f])||(s[f].Rc(),d--);else for(l=h.ta.Hu(l.sc(),m),f=0;f<n;f++)(b=h.hd.Yd(m,s[f],l)!=0)||(s[f].Rc(),d--);else for(o.av(s,n,-b,c),d=n,l=h.ta.Hu(l.sc(),m),f=0;f<n;f++)(b=s[f]).isNaN()&&d--,x=o.tE(b.x,$.v,$.C,c),b.x+=x,(b=h.hd.Yd(m,b,l)!=0)&&(s[f].Rc(),d--)}}},o.Hp=function(s,n,l,c,d,f,m,b){var x=s.getType(),$=n+l;if(x===33){var E=(c=d?s:s.Of()).Lg();return(E<n||E>=$||m&&E==$)&&(E+=Math.ceil((n-E)/l)*l,E=h.O.Rk(E,n,$),c.cC(E)),c}if(s.B()||(E=new h.l,s.A(E),E.B()))return s;var O=new h.Nc;E.cn(O);var R=new h.Nc;if(R.K(n,$),R.contains(O))return s;if(($=new h.l).K(E),x===550){for(b=(c=d?s:s.Of()).ub(0),x=2*c.I(),$=!1,n=0;n<x;n+=2)((E=b.read(n))<R.oa||E>=R.va||m&&E==R.va)&&($=!0,E+=Math.ceil((R.oa-E)/l)*l,E=R.It(E),b.write(n,E));return $&&c.Pc(1993),c}if(x==197)return l=d?s:s.Of(),E.Ea($),l.Xo(E),l;var k=.1*Math.max(E.ca(),E.R());for($.W(0,k),m=s,R=c.Xd(0),s=h.Gh.local(),d=new h.Dd;;){var j=Math.floor((O.oa-n)/l),F=Math.ceil((O.va-n)/l);if(!(3<F-j))break;j=Math.floor(.5*(F+j)),$.v=E.v-k,$.C=n+l*j;var L=h.ri.clip(m,$,R,f,b);$.v=$.C,$.C=E.C+k;var V=h.ri.clip(m,$,R,f,b);d.gg((j-F)*l,0),V.Oc(d),x==1736?m=s.V(L,V,c,null):(m=L).add(V,!1),m.A(E),E.cn(O)}for($.v=n,$.C=n+l,(n=new h.l).K($),n.W(R,0),(n=Math.floor((E.v-$.v)/l)*l)!=0?($.move(n,0),d.gg(-n,0)):d.RB(),n=x==1607?new h.Ta(m.description):new h.Da(m.description),f=new h.l,O=new h.l;E.C>$.v;)(k=h.ri.clip(m,$,R,0,b)).A(O),(x==1607?!k.B()&&(O.R()>R||O.ca()>R):!k.B()&&(x!=1736||O.R()>R))&&(k.Oc(d),k.A(O),n.A(f),f.W(R,R),f.isIntersecting(O)&&x==1736?n=s.V(n,k,c,null):n.add(k,!1)),$.move(l,0),d.shift(-l,0);return n},o.av=function(s,n,l,c){for(var d=l+c,f=0;f<n;f++){var m=s[f].x;l<=m&&m<d||!(m<l||m>d||m==d)||(m+=Math.ceil((l-m)/c)*c,m=h.O.Rk(m,l,d),s[f].x=m)}},o.Fn=function(s,n,l,c,d,f){if(!n.Wc())throw h.i.fa("fold_into_360_degree_range");if(s.B())return s;if(n.Sb()==2){l=n.pv();var m=n.ov()-l}else{var b=n.bf();m=360*b,l-=180*b}return o.Hp(s,l,m,n,c,d,!0,f)},o.qF=function(s,n,l,c){if(l.Sb()==2)c=l.pv(),l=l.ov()-c;else{var d=l.bf();l=360*d,c-=180*d}o.av(s,n,c,l)},o.lj=function(s,n){var l=n.Oe();if(s.getType()==33){var c=s.ih();return l.G<=c&&c<=l.H?s:s.Ia()}c=new h.l,s.A(c);var d=new h.l;return d.K(l),d.v=c.v,d.C=c.C,d.W(.01*d.ca(),0),l=h.ta.uy(n,c),d.contains(c)?s:h.ri.clip(s,d,l,0,null)},o.ir=function(s,n,l){return s>n.C&&s-n.C<l?n.C:s<n.v&&n.v-s<l?n.v:s},o.FX=function(s,n,l,c){c.x=o.ir(s.x,n,l),c.y=s.y},o.EX=function(s,n,l,c){for(var d=0;d<n;d++)s[d].y<l.G||s[d].y>l.H?s[d].Rc():s[d].x=o.ir(s[d].x,l,c)},o.Jt=function(s,n,l,c){if(!s.B()){var d=s.getType();if(!c||d!=1736)if(h.aa.xj(d)){c=s.ub(0),d=0;for(var f=s.I();d<f;d++){var m=c.read(2*d),b=o.ir(m,n,l);b!=m&&c.write(2*d,b)}s.Pc(1993)}else if(d==197)c=new h.l,s.A(c),c.v=o.ir(c.v,n,l),c.C=o.ir(c.C,n,l),s.Xo(c);else{if(d!=33)throw h.i.fa("internal error");s.cC(o.ir(s.Lg(),n,l))}}},o.uS=function(s,n,l,c){var d=new h.gd,f=d.Ib(s);return s=h.ta.Hu(n,s),o.ks(d,f,n,s,l,!0,c),d.Ne(f)},o.ks=function(s,n,l,c,d,f,m){if(!l.Wc())throw h.i.N("invalid call");var b=l.Oe(),x=l.sc(),$=x.eh().getDatum().getSpheroid();x=x.Hd().ai;var E=$.getFlattening();$=$.getAxis(),E*=2-E;var O=new h.Nc;b.cn(O);var R=null,k=[[0,0],[0,0]];if(l.Sb()==2?(R=l.eh(),f?(k[0][0]=o.Zm(m,O),k[0][1]=b.Jp(),h.ej.projToGeog(R,1,k),b=k[0][0]*x):(k[0][0]=b.gk(),k[0][1]=m,h.ej.projToGeog(R,1,k),b=k[0][1]*x)):b=m*x,!f&&b!=0&&d!=u.GreatElliptic)throw h.i.fa("invalid argument");var j=new h.ga,F=[0],L=new h.h,V=new h.h,B=new h.h,W=[null,null],K=new h.h,re=new h.h,ae=new h.h,de=new h.h;for(n=s.Ob(n);n!=-1;n=s.Rb(n)){var ce=s.Xa(n);s.D(ce,K);for(var Te=!1,le=ce=s.U(ce);le!=-1;le=s.U(le)){if(le==ce){if(Te)break;Te=!0}if(s.D(le,re),f&&(c<m-K.x&&re.x-m>c||c<m-re.x&&K.x-m>c)||!f&&(m!=0||c<-K.y&&re.y>c||c<-re.y&&K.y>c))do if(!(Math.abs(K.x-re.x)>=.5*O.R())){if(l.Sb()==2?(k[0][0]=o.Zm(K.x,O),k[0][1]=K.y,k[1][0]=o.Zm(re.x,O),k[1][1]=re.y,h.ej.projToGeogCenter(R,2,k,0),ae.x=k[0][0]*x,ae.y=k[0][1]*x,de.y=k[1][1]*x):(ae.x=K.x*x,ae.y=K.y*x,de.y=re.y*x),de.x=2*(re.x-K.x)*Math.PI/O.R()+ae.x,f){if(V.x=b,V.y=o.Nz($,E,ae,de,b,d),isNaN(V.y))break;W[0]=V;var He=1}else if(d==u.GreatElliptic){var Ue=[0,0];if((He=h.Ox.Oz(E,ae,de,b,Ue))==0)break;V.x=Ue[0],V.y=b,W[0]=V,He==2&&(B.x=Ue[1],B.y=b,W[1]=B)}else{if(V.x=o.Lz($,E,ae,de,d),isNaN(V.x))break;V.y=0,W[0]=V,He=1}var lt=-1;for(Ue=0;Ue<He;Ue++){h.kb.wd($,E,ae.x,ae.y,de.x,de.y,j,null,null,d);var Mt=j.u;h.kb.wd($,E,ae.x,ae.y,W[Ue].x,W[Ue].y,j,null,null,d);var Qt=j.u;if(l.Sb()==2?(k[0][0]=W[Ue].x/x,k[0][1]=W[Ue].y/x,h.ej.geogToProj(R,1,k),f?(L.y=k[0][1],L.x=m):(L.x=o.os(k[0][0],K.x,re.x,O),L.y=m)):f?(L.x=m,L.y=W[Ue].y/x):(L.x=o.os(W[Ue].x/x,K.x,re.x,O),L.y=m),F[0]=0<Mt?h.O.Rk(Qt/Mt,0,1):.5,F[0]==0||F[0]==1)break;lt>F[0]||(lt=s.Ma(le),s.Ul(lt,F,1),s.Cb(s.U(lt),L.x,L.y),lt=F[0])}}while(!1);K.L(re)}}},o.Zm=function(s,n){var l=n.va-n.oa;return n.It(s-Math.floor((s-n.oa)/l)*l)},o.os=function(s,n,l,c){var d=new h.Nc;for(d.K(n,l),l=c.R(),s=Math.floor((s-n)/l)*l+s,d=d.sf();Math.abs(s-d)>Math.abs(s+l-d);)s+=l;return s},o.Sn=function(s,n,l){return s=h.qr.Cp(s),n=h.qr.mx(s,h.qr.Cp(n)),(l=h.qr.mx(s,h.qr.Cp(l)))==0||0<n&&0<l&&l<=n||0>n&&0>l&&l>=n},o.Nz=function(s,n,l,c,d,f){if(f==u.GreatElliptic)return h.Ox.SS(n,l,c,d);if(Math.abs(l.x-c.x)>=Math.PI||!o.Sn(l.x,c.x,d))return NaN;if(l.x>c.x)var m=c;else m=l,l=c;c=new h.ga;var b=new h.ga,x=new h.ga;h.kb.wd(s,n,m.x,m.y,l.x,l.y,b,c,null,f);var $=b.u,E=0,O=1,R=new h.h;for(R.L(m);$*(O-E)>1e-12*s;){var k=.5*(E+O);if(h.kb.oj(s,n,m.x,m.y,$*k,c.u,b,x,f),R.x=b.u,R.y=x.u,R.x==d)break;if(o.Sn(m.x,R.x,d))O=k;else{if(!o.Sn(l.x,R.x,d))return NaN;E=k}}return R.y},o.Lz=function(s,n,l,c,d){if(d==u.GreatElliptic)return s=[0,0],h.Ox.Oz(n,l,c,0,s),s[0];if(l.y>c.y)var f=c;else f=l,l=c;if((c=new h.Nc).K(f.y,l.y),!c.contains(0)||Math.abs(f.x-l.x)>=Math.PI)return NaN;if(f.x==l.x)return f.x;var m=new h.ga,b=new h.ga,x=new h.ga;h.kb.wd(s,n,f.x,f.y,l.x,l.y,b,m,null,d);var $=b.u,E=0,O=1,R=new h.h;for(R.L(f);$*(O-E)>1e-12*s;){var k=.5*(E+O);if(h.kb.oj(s,n,f.x,f.y,$*k,m.u,b,x,d),R.x=b.u,R.y=x.u,c.K(f.y,R.y),R.y==0)break;if(c.contains(0))O=k;else{if(c.K(l.y,R.y),!c.contains(0))return NaN;E=k}}return R.x},o.WI=function(s,n,l,c){if(!s.ef.Wc())return!1;var d=new h.de(n.description);if(d.Fd(n,0,-1),c=h.Hx.local().V(d,s,c),d=n.I(),l.Oa(),d!=c.I())return!1;var f=new h.l;n.A(f);var m=new h.l;if(c.A(m),f=f.R(),m=m.R(),f!=0&&m!=0){if(m/=f,s=s.Yf.gh().R()/s.ef.gh().R(),1e-10<Math.abs(m/s-1))return!1}else if(f!=0||m!=0)return!1;for(l.add(n,!1),n=new h.h,s=0;s<d;s++)c.D(s,n),l.Cb(s,n);return!0},o.qN=function(s,n){return(s%=360*n)>=180*n&&(s-=360*n),s},o.UI=function(s,n,l,c){if(l==C.Clip){var d=n.ml();d.getType()==197?(l=new h.l,d.A(l),d=h.ta.uy(n,l),s=h.ri.clip(s,l,d,5e4*n.pm(),c)):h.dj.local().V(1,d,s,n,c)||(s=h.Xj.local().V(s,d,n,c))==d&&(s=h.Vk.jg(s))}else n.Wc()&&(c=new h.l,s.xc(c),n.Oe().contains(c)||(o.Jt(s,n.Oe(),n.Xd(0),!0),l==C.PannableFold&&(s=o.lj(s,n)),s=o.Fn(s,n,0,!0,1e5*n.pm(),null)));return s},o.XD=function(s,n,l){var c=n.Wr();if(c==null)return s;var d=(n=n.sc()).Oe().R(),f=new h.l;s.xc(f);var m=new h.Nc;f.cn(m),f=c.Ga(),c=null;for(var b=new h.Dd;f.$a();)for(;f.Ha();){var x=f.ha(),$=x.Tg(0,0),E=new h.Nc;for(E.K($.oa,$.va),$=0;E.va>m.oa;)E.move(-d),--$;for(;E.oa<=m.va;){if(E.isIntersecting(m)){c==null&&(c=new h.Ta);var O=h.yb.cP(x.ac(),x.wc());$!=0&&(b.gg($*d,0),O.Oc(b)),c.oc(O,!0)}E.move(d),++$}}return c!=null?(n=h.ta.gO(n,c),n=h.ta.Er(n),h.$t.lP(s,c,n,l)):s},o.eO=function(s,n,l,c,d){return s>=l&&n<=c?0:o.tE(.5*(n+s),l,c,d)},o.tE=function(s,n,l,c){return h.lc.round((.5*(l+n)-s)/c)*c},o.VQ=function(s,n,l,c,d,f,m,b){var x=o.dv(c,d),$=x.R(),E=$/360,O=o.pE*E,R=s.ub(0),k=n.Wc(),j=k?$/n.Oe().R():0;n=s.Ia();for(var F=0,L=l.da();F<L;++F){var V=k,B=new h.Ta(l.description);B.addPath(l,F,!0);var W=l.dc(F);m!=0&&(W=o.PD(W,B,x.H-b,x.H,m))&&(V=!1);var K=-1;W=B.I();var re=!1;V&&(K=s.Ba(F),re=s.dc(F));var ae=B.ub(0),de=0,ce=ae.read(0),Te=0,le=3*c.Xd(0),He=!1,Ue=new h.h;Ue.Rc();var lt=new h.h;lt.Rc();for(var Mt=!1,Qt=1;Qt<W;++Qt){var It=h.h.construct(ae.eg(2*Qt),ae.eg(2*Qt+1)),ut=It.x,We=ut+de,Qe=We-ce;if(It.x=We,Math.abs(Qe)>O){if(V){var Dt=K+Qt-1,Ot=K;(!re||Qt+1<W)&&(Ot+=Qt),Dt=R.read(2*Dt),Ot=(R.read(2*Ot)-Dt)*j,Math.abs(Qe-Ot)>1*E&&(k=!1)}V||(We=ut+(de-=h.lc.Cn($,We-ce)),++Te,Mt=de!=0,It.x=We)}else He||h.ta.AG(Ue,lt,It,le)&&(He=!0);Mt&&ae.write(2*Qt,We),ce=We,Ue.L(lt),lt.L(It)}Te!=0&&B.Pc(1993),V=B.Na(0),W=B.Na(W-1),h.h.tb(V,W),B=o.wQ(B,c,isNaN(d)?0:d,f),n.add(B,!1)}return s=c.Xd(0),l=x.R()/180,o.Jt(n,x,.1*s,!1),h.ri.clip(n,x,s,l,f)},o.wQ=function(s,n,l,c){return o.Fn(s,n,l,!0,0,c)},o.OS=function(s,n,l,c){var d=s.getType();if(d==1736)for(n=n!=null?n.Xd(0):0,d=0;d<c;d++)h.hd.Yd(s,l[d],n)!=1&&l[d].Rc();else{if(d!=197)throw h.i.N();for(d=0;d<c;d++)s.dP(l[d])||l[d].Rc()}},o.$k=function(s,n,l,c){if(32>l)for(var d=new h.Sa,f=0;f<l;f++)d.Cb(n[f]),s.$k(d,c).D(n[f]);else{var m=new h.de;for(m.re(3),m.HD(n,l),d=m.ub(3),f=0;f<l;f++)d.write(f,f);for(f=s.$k(m,c),s=f.ub(0),d=f.ub(3),c=h.h.construct(NaN,NaN),m=0;m<l;m++)n[m]=c;for(l=f.I(),f=0;f<l;f++)c=d.read(f),s.tc(2*f,n[c])}},o.Zk=function(s,n,l,c){if(32>l)for(var d=new h.Sa,f=0;f<l;f++)d.Cb(n[f]),s.Zk(d,c).D(n[f]);else{var m=new h.de;for(m.re(3),m.HD(n,l),d=m.ub(3),f=0;f<l;f++)d.write(f,f);for(f=s.Zk(m,c),s=f.ub(0),d=f.ub(3),c=h.h.construct(NaN,NaN),m=0;m<l;m++)n[m]=c;for(l=f.I(),f=0;f<l;f++)c=d.read(f),s.tc(2*f,n[c])}},o.pE=210,o}()}(G||(G={})),function(h){var C;(C=h.UL||(h.UL={}))[C.rightSide=1]="rightSide";var w=function(){function u(o,s,n){this.Bs=new h.h,o===void 0?this.Io=-1:(this.Bs.L(o),this.Io=s,this.Ka=n,this.nw=0)}return u.prototype.WJ=function(o){this.nw=o?1|this.nw:-2&this.nw},u.prototype.B=function(){return 0>this.Io},u.prototype.fz=function(){if(this.B())throw h.i.fa("invalid call");return new h.Sa(this.Bs.x,this.Bs.y)},u.prototype.Ua=function(){if(this.B())throw h.i.fa("invalid call");return this.Io},u.prototype.hz=function(){if(this.B())throw h.i.fa("invalid call");return this.Ka},u.prototype.Sz=function(){return!!(1&this.nw)},u.prototype.ey=function(o,s,n,l){this.Bs.x=o,this.Bs.y=s,this.Io=n,this.Ka=l},u}();h.$l=w}(G||(G={})),function(h){var C=function(){function u(){}return u.prototype.Uo=function(o,s){if(this.th.resize(0),this.Ii.length=0,this.tk=-1,o.xc(this.Ek),this.Ek.W(s,s),this.Ek.isIntersecting(this.Fb.Ca)){var n=o.getType();(this.vs=h.aa.yd(n))?(this.TH=o.ac(),this.SH=o.wc(),this.qa=s):this.qa=NaN,this.th.add(this.Fb.kf),this.Ii.push(this.Fb.Ca),this.Qs=this.Fb.Ur(this.Fb.kf)}else this.Qs=-1},u.prototype.Xi=function(o,s){this.th.resize(0),this.Ii.length=0,this.tk=-1,this.Ek.K(o),this.Ek.W(s,s),this.qa=NaN,this.Ek.isIntersecting(this.Fb.Ca)?(this.th.add(this.Fb.kf),this.Ii.push(this.Fb.Ca),this.Qs=this.Fb.Ur(this.Fb.kf),this.vs=!1):this.Qs=-1},u.prototype.next=function(){if(this.th.size==0)return-1;this.tk=this.Qs;var o=null,s=null,n=null,l=null;this.vs&&(o=new h.h,s=new h.h,n=new h.l);for(var c=!1;!c;){for(;this.tk!=-1;){var d=this.Fb.bz(this.Fb.fv(this.tk));if(d.isIntersecting(this.Ek)){if(!this.vs){c=!0;break}if(o.L(this.TH),s.L(this.SH),n.K(d),n.W(this.qa,this.qa),0<n.zy(o,s)){c=!0;break}}this.tk=this.Fb.nv(this.tk)}if(this.tk==-1){d=this.th.Fc();var f=this.Ii[this.Ii.length-1];for(l==null&&((l=[])[0]=new h.l,l[1]=new h.l,l[2]=new h.l,l[3]=new h.l),w.EJ(f,l),this.th.If(),--this.Ii.length,f=0;4>f;f++){var m=this.Fb.Lp(d,f);if(m!=-1&&0<this.Fb.WR(m)&&l[f].isIntersecting(this.Ek))if(this.vs){if(o.L(this.TH),s.L(this.SH),n.K(l[f]),n.W(this.qa,this.qa),0<n.zy(o,s)){var b=new h.l;b.K(l[f]),this.th.add(m),this.Ii.push(b)}}else(b=new h.l).K(l[f]),this.th.add(m),this.Ii.push(b)}if(this.th.size==0)return-1;this.tk=this.Fb.Ur(this.th.get(this.th.size-1))}}return this.Qs=this.Fb.nv(this.tk),this.tk},u.bP=function(o,s,n){var l=new u;return l.Fb=o,l.Ek=new h.l,l.th=new h.ia(0),l.Ii=[],l.Uo(s,n),l},u.aP=function(o,s,n){var l=new u;return l.Fb=o,l.Ek=new h.l,l.th=new h.ia(0),l.Ii=[],l.Xi(s,n),l},u.$O=function(o){var s=new u;return s.Fb=o,s.Ek=new h.l,s.th=new h.ia(0),s.Ii=[],s},u}();h.GY=C;var w=function(){function u(o,s){this.jf=new h.$c(11),this.Zh=new h.$c(5),this.ws=[],this.gw=new h.ia(0),this.Ca=new h.l,this.Nk(o,s)}return u.prototype.reset=function(o,s){this.jf.mj(!1),this.Zh.mj(!1),this.ws.length=0,this.gw.clear(!1),this.Nk(o,s)},u.prototype.vj=function(o,s){return this.zv(o,s,0,this.Ca,this.kf,!1,-1)},u.prototype.Jz=function(o,s,n){n=n==-1?this.kf:this.WF(n);var l=this.ca(n),c=this.oR(n);return this.zv(o,s,l,c,n,!1,-1)},u.prototype.ja=function(o){return this.jR(o)},u.prototype.GF=function(o){return this.bz(this.fv(o))},u.prototype.ca=function(o){return this.jv(o)},u.prototype.oR=function(o){var s=new h.l;s.K(this.Ca);var n=this.jv(o);o=this.QF(o);for(var l=0;l<2*n;l+=2){var c=h.O.truncate(3&o>>l);c==0?(s.v=.5*(s.v+s.C),s.G=.5*(s.G+s.H)):c==1?(s.C=.5*(s.v+s.C),s.G=.5*(s.G+s.H)):(c==2?s.C=.5*(s.v+s.C):s.v=.5*(s.v+s.C),s.H=.5*(s.G+s.H))}return s},u.prototype.WR=function(o){return this.Az(o)},u.prototype.vR=function(o,s){return C.bP(this,o,s)},u.prototype.MF=function(o,s){return C.aP(this,o,s)},u.prototype.getIterator=function(){return C.$O(this)},u.prototype.Nk=function(o,s){if(0>s||32<2*s)throw h.i.N("invalid height");this.BT=s,this.Ca.K(o),this.kf=this.jf.Ce(),this.jx(this.kf,0),this.ax(this.kf,0),this.NJ(this.kf,0),this.KJ(this.kf,0)},u.prototype.zv=function(o,s,n,l,c,d,f){if(!l.contains(s))return n==0?-1:this.zv(o,s,0,this.Ca,this.kf,d,f);if(!d)for(var m=c;m!=-1;m=this.IR(m))this.jx(m,this.Az(m)+1);(m=new h.l).K(l),l=c;var b=[];for(b[0]=new h.l,b[1]=new h.l,b[2]=new h.l,b[3]=new h.l;n<this.BT&&this.iO(l);n++){u.EJ(m,b);for(var x=!1,$=0;4>$;$++)if(b[$].contains(s)){x=!0;var E=this.Lp(l,$);E==-1&&(E=this.rP(l,$)),this.jx(E,this.Az(E)+1),l=E,m.K(b[$]);break}if(!x)break}return this.sS(o,s,n,m,l,d,c,f)},u.prototype.sS=function(o,s,n,l,c,d,f,m){var b=this.NF(c);if(d){if(c==f)return m;this.SP(m),d=m}else d=this.tP(),this.NB(d,o),this.KW(this.fv(d),s);return this.mX(d,c),b!=-1?(this.hx(d,b),this.bx(b,d)):this.GJ(c,d),this.SB(c,d),this.ax(c,this.lv(c)+1),this.hO(c)&&this.MQ(n,l,c),d},u.prototype.SP=function(o){var s=this.WF(o),n=this.NF(s),l=this.OR(o),c=this.nv(o);this.Ur(s)==o?(c!=-1?this.hx(c,-1):this.SB(s,-1),this.GJ(s,c)):n==o?(this.bx(l,-1),this.SB(s,l)):(this.hx(c,l),this.bx(l,c)),this.hx(o,-1),this.bx(o,-1),this.ax(s,this.lv(s)-1)},u.EJ=function(o,s){var n=.5*(o.v+o.C),l=.5*(o.G+o.H);s[0].K(n,l,o.C,o.H),s[1].K(o.v,l,n,o.H),s[2].K(o.v,o.G,n,l),s[3].K(n,o.G,o.C,l)},u.prototype.hO=function(o){return this.lv(o)==8&&!this.gG(o)},u.prototype.MQ=function(o,s,n){var l=this.Ur(n);do{var c=this.fv(l),d=this.Zh.T(l,0);c=this.bz(c),this.zv(d,c,o,s,n,!0,l),l=d=this.nv(l)}while(l!=-1)},u.prototype.iO=function(o){return 8<=this.lv(o)||this.gG(o)},u.prototype.gG=function(o){return this.Lp(o,0)!=-1||this.Lp(o,1)!=-1||this.Lp(o,2)!=-1||this.Lp(o,3)!=-1},u.prototype.rP=function(o,s){var n=this.jf.Ce();return this.OW(o,s,n),this.jx(n,0),this.ax(n,0),this.Pk(n,o),this.KJ(n,this.jv(o)+1),this.NJ(n,s<<2*this.jv(o)|this.QF(o)),n},u.prototype.tP=function(){var o=this.Zh.Ce();if(0<this.gw.size){var s=this.gw.Fc();this.gw.If()}else s=this.ws.length,this.ws.push(new h.l);return this.LW(o,s),o},u.prototype.Lp=function(o,s){return this.jf.T(o,s)},u.prototype.OW=function(o,s,n){this.jf.S(o,s,n)},u.prototype.Ur=function(o){return this.jf.T(o,4)},u.prototype.GJ=function(o,s){this.jf.S(o,4,s)},u.prototype.NF=function(o){return this.jf.T(o,5)},u.prototype.SB=function(o,s){this.jf.S(o,5,s)},u.prototype.QF=function(o){return this.jf.T(o,6)},u.prototype.NJ=function(o,s){this.jf.S(o,6,s)},u.prototype.lv=function(o){return this.jf.T(o,7)},u.prototype.Az=function(o){return this.jf.T(o,8)},u.prototype.ax=function(o,s){this.jf.S(o,7,s)},u.prototype.jx=function(o,s){this.jf.S(o,8,s)},u.prototype.IR=function(o){return this.jf.T(o,9)},u.prototype.Pk=function(o,s){this.jf.S(o,9,s)},u.prototype.jv=function(o){return this.jf.T(o,10)},u.prototype.KJ=function(o,s){this.jf.S(o,10,s)},u.prototype.jR=function(o){return this.Zh.T(o,0)},u.prototype.NB=function(o,s){this.Zh.S(o,0,s)},u.prototype.OR=function(o){return this.Zh.T(o,1)},u.prototype.nv=function(o){return this.Zh.T(o,2)},u.prototype.hx=function(o,s){this.Zh.S(o,1,s)},u.prototype.bx=function(o,s){this.Zh.S(o,2,s)},u.prototype.WF=function(o){return this.Zh.T(o,3)},u.prototype.mX=function(o,s){this.Zh.S(o,3,s)},u.prototype.fv=function(o){return this.Zh.T(o,4)},u.prototype.LW=function(o,s){this.Zh.S(o,4,s)},u.prototype.bz=function(o){return this.ws[o]},u.prototype.KW=function(o,s){this.ws[o].K(s)},u}();h.du=w}(G||(G={})),function(h){var C;(C=h.aL||(h.aL={}))[C.Outside=0]="Outside",C[C.Inside=1]="Inside",C[C.Border=2]="Border";var w=function(){function o(s,n){this.PT=n,this.Vh=s}return o.prototype.setColor=function(s,n){this.iH!=n&&s.flush(),this.iH=n},o.prototype.gF=function(s,n){for(var l=0;l<n;)for(var c=s[l++],d=s[l++],f=s[l++]*this.PT;c<d;c++)this.Vh[f+(c>>4)]|=this.iH<<2*(15&c)},o}();h.HY=w;var u=function(){function o(s,n,l){this.Vh=null,this.SA=this.Ik=this.cI=this.aI=this.Es=this.qH=this.Gf=this.Um=0,this.Ri=this.Jk=this.vl=null,this.Fz(s,n,l)}return o.create=function(s,n,l){if(!o.zE(s))throw h.i.N();return o.wP(s,n,l)},o.pW=function(s){switch(s){case 0:s=1024;break;case 1:s=16384;break;case 2:s=262144;break;default:throw h.i.fa("Internal Error")}return s},o.zE=function(s){return!(s.B()||s.getType()!=1607&&s.getType()!=1736)},o.prototype.rQ=function(s,n){n=n.Ga();for(var l=new h.h,c=new h.h;n.$a();)for(;n.Ha();){var d=n.ha();if(d.getType()!=322)throw h.i.fa("Internal Error");s.Eh(d.ac(),l),s.Eh(d.wc(),c),this.Ri.jy(l.x,l.y,c.x,c.y)}this.Ri.iJ(h.Px.Cx)},o.prototype.sQ=function(){throw h.i.fa("Internal Error")},o.prototype.Ry=function(s,n){for(var l=1;4>l;l++)s.jy(n[l-1].x,n[l-1].y,n[l].x,n[l].y);s.jy(n[3].x,n[3].y,n[0].x,n[0].y),this.Ri.iJ(h.Px.Cx)},o.prototype.rK=function(s,n,l){for(var c=[null,null,null,null],d=0;d<c.length;d++)c[d]=new h.h;n=n.Ga(),l=this.Jk.dY(l)+1.5,d=new h.h;for(var f=new h.h,m=new h.h,b=new h.h,x=new h.h,$=new h.l,E=new h.h;n.$a();){var O=!1,R=!0;for(E.ma(0,0);n.Ha();){var k=n.ha();if(b.x=k.sa,b.y=k.na,x.x=k.pa,x.y=k.la,$.Oa(),$.Zb(b.x,b.y),$.Lk(x.x,x.y),this.vl.HG($)){this.Jk.Eh(x,x),R?(this.Jk.Eh(b,b),E.L(b),R=!1):b.L(E),d.uc(x,b);var j=.5>(k=d.length());k==0?d.ma(1,0):(j||E.L(x),d.scale(l/k),f.ma(-d.y,d.x),m.ma(d.y,-d.x),b.sub(d),x.add(d),c[0].add(b,f),c[1].add(b,m),c[2].add(x,m),c[3].add(x,f),j?O=!0:this.Ry(s,c))}else O&&(this.Ry(s,c),O=!1),R=!0}O&&this.Ry(s,c)}},o.prototype.sC=function(s){return h.O.truncate(s*this.qH+this.aI)},o.prototype.tC=function(s){return h.O.truncate(s*this.Es+this.cI)},o.wP=function(s,n,l){return new o(s,n,l)},o.prototype.Fz=function(s,n,l){this.Gf=Math.max(h.O.truncate(2*Math.sqrt(l)+.5),64),this.Um=h.O.truncate((2*this.Gf+31)/32),this.vl=new h.l,this.Ik=n,l=0;for(var c=this.Gf,d=this.Um;8<=c;)l+=c*d,c=h.O.truncate(c/2),d=h.O.truncate((2*c+31)/32);this.Vh=h.O.lg(l,0),this.Ri=new h.Px,l=new w(this.Vh,this.Um,this),this.Ri.AX(this.Gf,this.Gf,l),s.A(this.vl),this.vl.W(n,n),c=new h.l;var f=n*(d=h.l.construct(1,1,this.Gf-2,this.Gf-2)).R();switch(n*=d.ca(),c.K(this.vl.sf(),Math.max(f,this.vl.R()),Math.max(n,this.vl.ca())),this.SA=this.Ik,this.Jk=new h.Dd,this.Jk.pS(c,d),new h.Dd,s.getType()){case 550:l.setColor(this.Ri,2),this.sQ();break;case 1607:l.setColor(this.Ri,2),this.rK(this.Ri,s,this.SA);break;case 1736:l.setColor(this.Ri,1),this.rQ(this.Jk,s),l.setColor(this.Ri,2),this.rK(this.Ri,s,this.SA)}this.qH=this.Jk.bb,this.Es=this.Jk.ab,this.aI=this.Jk.Gb,this.cI=this.Jk.Lb,this.XN()},o.prototype.XN=function(){this.Ri.flush();for(var s=0,n=this.Gf*this.Um,l=this.Gf,c=h.O.truncate(this.Gf/2),d=this.Um,f=h.O.truncate((2*c+31)/32);8<l;){for(l=0;l<c;l++)for(var m=2*l,b=2*l+1,x=0;x<c;x++){var $=2*x,E=2*x+1,O=$>>4;$=2*(15&$);var R=E>>4;E=2*(15&E);var k=this.Vh[s+d*m+O]>>$&3;k|=this.Vh[s+d*m+R]>>E&3,k|=this.Vh[s+d*b+O]>>$&3,k|=this.Vh[s+d*b+R]>>E&3,this.Vh[n+f*l+(x>>4)]|=k<<2*(15&x)}l=c,d=f,s=n,c=h.O.truncate(l/2),f=h.O.truncate((2*c+31)/32),n=s+d*l}},o.prototype.So=function(s,n){return this.vl.contains(s,n)?(s=this.sC(s),n=this.tC(n),0>s||s>=this.Gf||0>n||n>=this.Gf||(n=this.Vh[this.Um*n+(s>>4)]>>2*(15&s)&3)==0?0:n==1?1:2):0},o.prototype.Ro=function(s){if(!s.Ea(this.vl))return 0;var n=this.sC(s.v),l=this.sC(s.C),c=this.tC(s.G);if(s=this.tC(s.H),0>n&&(n=0),0>c&&(c=0),l>=this.Gf&&(l=this.Gf-1),s>=this.Gf&&(s=this.Gf-1),n>l||c>s)return 0;for(var d=Math.max(l-n,1)*Math.max(s-c,1),f=0,m=this.Um,b=this.Gf,x=0;;){if(32>d||16>b){for(d=c;d<=s;d++)for(var $=n;$<=l;$++)if(1<(x=this.Vh[f+m*d+($>>4)]>>2*(15&$)&3))return 2;if(x==0)return 0;if(x==1)return 1}f+=m*b,b=h.O.truncate(b/2),m=h.O.truncate((2*b+31)/32),n=h.O.truncate(n/2),c=h.O.truncate(c/2),l=h.O.truncate(l/2),s=h.O.truncate(s/2),d=Math.max(l-n,1)*Math.max(s-c,1)}},o.prototype.RR=function(){return this.Gf*this.Um},o}();h.Nx=u}(G||(G={})),function(h){var C;(C=h.VL||(h.VL={}))[C.contains=1]="contains",C[C.within=2]="within",C[C.equals=3]="equals",C[C.disjoint=4]="disjoint",C[C.touches=8]="touches",C[C.crosses=16]="crosses",C[C.overlaps=32]="overlaps",C[C.unknown=0]="unknown",C[C.intersects=1073741824]="intersects";var w=function(){function o(){}return o.construct=function(s,n,l,c,d,f,m,b){var x=new o;return x.pw=s,x.Mm=n,x.Kj=l,x.Si=c,x.BH=d,x.SY=f,x.TY=m,x.UY=b,x},o}();h.Vt=function(){function o(){}return o.CD=function(s,n,l){if(o.wy(s)){var c=h.ta.kj(n,s,!1);n=!1,h.Uk.CE(s)&&(n=n||s.lu(c,l)),(c=s.getType())!=1736&&c!=1607||!h.Uk.AE(s)||l==0||(n=n||s.fj(l)),c!=1736&&c!=1607||!h.Uk.BE(s)||l==0||n||s.hM()}},o.wy=function(s){return h.Uk.CE(s)||h.Uk.AE(s)||h.Uk.BE(s)},o}();var u=function(){function o(){this.rh=[]}return o.zB=function(s,n,l,c,d){var f=s.getType(),m=n.getType();if(f==197){if(m==197)return o.tW(s,n,l,c);if(m==33)return c==2?c=1:c==1&&(c=2),o.hJ(n,s,l,c)}else if(f==33){if(m==197)return o.hJ(s,n,l,c);if(m==33)return o.vW(s,n,l,c)}if(s.B()||n.B())return c==4;var b=new h.l;s.A(b);var x=new h.l;n.A(x);var $=new h.l;if($.K(b),$.Zb(x),l=h.ta.Wd(l,$,!1),o.dk(b,x,l))return c==4;switch(b=!1,h.Vk.yd(f)&&((f=new h.Ta(s.description)).oc(s,!0),s=f,f=1607),h.Vk.yd(m)&&((m=new h.Ta(n.description)).oc(n,!0),n=m,m=1607),f!=197&&m!=197?(s.Db()<n.Db()||f==33&&m==550)&&(c==2?c=1:c==1&&(c=2)):f!=1736&&m!=197&&(c==2?c=1:c==1&&(c=2)),f){case 1736:switch(m){case 1736:b=o.rt(s,n,l,c,d);break;case 1607:b=o.$m(s,n,l,c,d);break;case 33:b=o.qt(s,n,l,c);break;case 550:b=o.pt(s,n,l,c,d);break;case 197:b=o.GI(s,n,l,c,d)}break;case 1607:switch(m){case 1736:b=o.$m(n,s,l,c,d);break;case 1607:b=o.gB(s,n,l,c,d);break;case 33:b=o.tt(s,n,l,c,d);break;case 550:b=o.st(s,n,l,c,d);break;case 197:b=o.MI(s,n,l,c)}break;case 33:switch(m){case 1736:b=o.qt(n,s,l,c);break;case 1607:b=o.tt(n,s,l,c,d);break;case 550:b=o.lt(n,s,l,c)}break;case 550:switch(m){case 1736:b=o.pt(n,s,l,c,d);break;case 1607:b=o.st(n,s,l,c,d);break;case 550:b=o.ZA(s,n,l,c,d);break;case 33:b=o.lt(s,n,l,c);break;case 197:b=o.hI(s,n,l,c)}break;case 197:switch(m){case 1736:b=o.GI(n,s,l,c,d);break;case 1607:b=o.MI(n,s,l,c);break;case 550:b=o.hI(n,s,l,c)}}return b},o.tW=function(s,n,l,c){if(s.B()||n.B())return c==4;var d=new h.l,f=new h.l,m=new h.l;switch(s.A(d),n.A(f),m.K(d),m.Zb(f),s=h.ta.Wd(l,m,!1),c){case 4:return o.dk(d,f,s);case 2:return o.jF(f,d,s);case 1:return o.jF(d,f,s);case 3:return o.ek(d,f,s);case 8:return o.cQ(d,f,s);case 32:return o.bQ(d,f,s);case 16:return o.aQ(d,f,s)}return!1},o.hJ=function(s,n,l,c){if(s.B()||n.B())return c==4;s=s.D();var d=new h.l,f=new h.l;switch(n.A(d),f.K(s),f.Zb(d),n=h.ta.Wd(l,f,!1),c){case 4:return o.Rw(s,d,n);case 2:return o.eB(s,d,n);case 1:return o.RU(s,d,n);case 3:return o.vI(s,d,n);case 8:return o.dB(s,d,n)}return!1},o.vW=function(s,n,l,c){if(s.B()||n.B())return c==4;s=s.D(),n=n.D();var d=new h.l;switch(d.K(s),d.Zb(n),l=h.ta.Wd(l,d,!1),c){case 4:return o.SU(s,n,l);case 2:return o.uI(n,s,l);case 1:return o.uI(s,n,l);case 3:return o.wI(s,n,l)}return!1},o.rt=function(s,n,l,c,d){switch(c){case 4:return o.kV(s,n,l);case 2:return o.Sw(n,s,l,d);case 1:return o.Sw(s,n,l,d);case 3:return o.nV(s,n,l);case 8:return o.vV(s,n,l);case 32:return o.qV(s,n,l,d)}return!1},o.$m=function(s,n,l,c,d){switch(c){case 4:return o.lV(s,n,l);case 1:return o.fB(s,n,l,d);case 8:return o.wV(s,n,l,d);case 16:return o.gV(s,n,l)}return!1},o.qt=function(s,n,l,c){switch(c){case 4:return o.jV(s,n,l);case 1:return o.dV(s,n,l);case 8:return o.uV(s,n,l)}return!1},o.pt=function(s,n,l,c){switch(c){case 4:return o.iV(s,n,l);case 1:return o.cV(s,n,l);case 8:return o.tV(s,n,l);case 16:return o.fV(s,n,l)}return!1},o.GI=function(s,n,l,c,d){if(o.hV(s,n,l))return c==4;if(c==4)return!1;switch(c){case 2:return o.xV(s,n,l);case 1:return o.bV(s,n,l);case 3:return o.mV(s,n,l);case 8:return o.sV(s,n,l,d);case 32:return o.pV(s,n,l,d);case 16:return o.eV(s,n,l,d)}return!1},o.gB=function(s,n,l,c){switch(c){case 4:return o.GV(s,n,l);case 2:return o.KI(n,s,l);case 1:return o.KI(s,n,l);case 3:return o.IV(s,n,l);case 8:return o.NI(s,n,l);case 32:return o.MV(s,n,l);case 16:return o.LI(s,n,l)}return!1},o.tt=function(s,n,l,c){switch(c){case 4:return o.FV(s,n,l);case 1:return o.AV(s,n,l);case 8:return o.QV(s,n,l)}return!1},o.st=function(s,n,l,c){switch(c){case 4:return o.EV(s,n,l);case 1:return o.zV(s,n,l);case 8:return o.PV(s,n,l);case 16:return o.CV(s,n,l)}return!1},o.MI=function(s,n,l,c){if(o.DV(s,n,l))return c==4;if(c==4)return!1;switch(c){case 2:return o.RV(s,n,l);case 1:return o.yV(s,n,l);case 3:return o.HV(s,n,l);case 8:return o.OV(s,n,l);case 32:return o.LV(s,n,l);case 16:return o.BV(s,n,l)}return!1},o.ZA=function(s,n,l,c){switch(c){case 4:return o.gU(s,n,l);case 2:return o.eI(n,s,l);case 1:return o.eI(s,n,l);case 3:return o.iU(s,n,l);case 32:return o.oU(s,n,l)}return!1},o.lt=function(s,n,l,c){switch(c){case 4:return o.fI(s,n,l);case 2:return o.sU(s,n,l);case 1:return o.dU(s,n,l);case 3:return o.Nw(s,n,l)}return!1},o.hI=function(s,n,l,c){switch(c){case 4:return o.fU(s,n,l);case 2:return o.rU(s,n,l);case 1:return o.cU(s,n,l);case 3:return o.hU(s,n,l);case 8:return o.qU(s,n,l);case 16:return o.eU(s,n,l)}return!1},o.nV=function(s,n,l){var c=new h.l,d=new h.l;return s.A(c),n.A(d),!!o.ek(c,d,l)&&(c=o.qc(s,n,!1))!=4&&c!=1&&c!=2&&(!!o.dI(s,n,l)||(c=s.Qb(),d=n.Qb(),!(Math.abs(c-d)>4*Math.max(s.I(),n.I())*l)&&o.Wz(s,n,l,!0)))},o.kV=function(s,n,l){var c=o.qc(s,n,!0);return c==4||c!=1&&c!=2&&c!=1073741824&&o.EI(s,n,l)},o.vV=function(s,n,l){var c=o.qc(s,n,!1);return c!=4&&c!=1&&c!=2&&o.II(s,n,l,null)},o.qV=function(s,n,l,c){var d=o.qc(s,n,!1);return d!=4&&d!=1&&d!=2&&o.FI(s,n,l,c)},o.Sw=function(s,n,l,c){var d=new h.l,f=new h.l;return s.A(d),n.A(f),!!o.zc(d,f,l)&&(d=o.qc(s,n,!1))!=4&&d!=2&&(d==1||o.BI(s,n,l,c))},o.lV=function(s,n,l){var c=o.qc(s,n,!0);return c==4||c!=1&&c!=1073741824&&o.EI(s,n,l)},o.wV=function(s,n,l,c){var d=o.qc(s,n,!1);return d!=4&&d!=1&&o.JI(s,n,l,c)},o.gV=function(s,n,l){var c=o.qc(s,n,!1);return c!=4&&c!=1&&o.DI(s,n,l,null)},o.fB=function(s,n,l,c){var d=new h.l,f=new h.l;return s.A(d),n.A(f),!!o.zc(d,f,l)&&(d=o.qc(s,n,!1))!=4&&(d==1||o.CI(s,n,l,c))},o.jV=function(s,n,l){return h.hd.KG(s,n,l)==0},o.uV=function(s,n,l){return n=n.D(),o.HI(s,n,l)},o.dV=function(s,n,l){return n=n.D(),o.AI(s,n,l)},o.iV=function(s,n,l){var c=o.qc(s,n,!1);if(c==4)return!0;if(c==1)return!1;c=new h.l,s.A(c),c.W(l,l);for(var d=new h.h,f=0;f<n.I();f++)if(n.D(f,d),c.contains(d)){var m=h.hd.Yd(s,d,l);if(m==1||m==2)return!1}return!0},o.tV=function(s,n,l){var c=this.qc(s,n,!1);if(c==4||c==1)return!1;c=new h.l,s.A(c),c.W(l,l);for(var d=!1,f=s,m=!1,b=0;b<n.I();b++){var x=n.Na(b);if(c.contains(x)){if((x=h.hd.Yd(f,x,l))==2)d=!0;else if(x==1)return!1}m||(!h.Dg.Ml(s,n.I()-1)||s.Bb!=null&&s.Bb.Fb!=null?f=s:(f=new h.Da,s.copyTo(f),f.fj(1)),m=!0)}return!!d},o.fV=function(s,n,l){var c=this.qc(s,n,!1);if(c==4||c==1)return!1;var d=new h.l;c=new h.l;var f=new h.l;s.A(d),n.A(f),c.K(d),c.W(l,l),f=d=!1;for(var m=s,b=!1,x=0;x<n.I();x++){var $=n.Na(x);if(c.contains($)?($=h.hd.Yd(m,$,l))==0?f=!0:$==1&&(d=!0):f=!0,d&&f)return!0;b||(!h.Dg.Ml(s,n.I()-1)||s.Bb!=null&&s.Bb.Fb!=null?m=s:(m=new h.Da,s.copyTo(m),m.fj(1)),b=!0)}return!1},o.cV=function(s,n,l){var c=new h.l,d=new h.l;if(s.A(c),n.A(d),!this.zc(c,d,l)||(d=this.qc(s,n,!1))==4)return!1;if(d==1)return!0;d=!1;for(var f=s,m=!1,b=0;b<n.I();b++){var x=n.Na(b);if(!c.contains(x))return!1;if((x=h.hd.Yd(f,x,l))==1)d=!0;else if(x==0)return!1;m||(!h.Dg.Ml(s,n.I()-1)||s.Bb!=null&&s.Bb.Fb!=null?f=s:(f=new h.Da,s.copyTo(f),f.fj(1)),m=!0)}return d},o.mV=function(s,n,l){var c=new h.l,d=new h.l;return s.A(c),n.A(d),!!o.ek(c,d,l)&&((c=new h.Da).ad(n,!1),o.Wz(s,c,l,!0))},o.hV=function(s,n,l){var c=o.qc(s,n,!1);if(c==4)return!0;if(c==1||c==2)return!1;var d=new h.l;if(c=new h.l,s.A(d),n.A(c),o.zc(c,d,l)||(d=new h.h,c.dn(d),(n=h.hd.Yd(s,d,l))!=0)||(c.$I(d),(n=h.hd.Yd(s,d,l))!=0)||(c.en(d),(n=h.hd.Yd(s,d,l))!=0)||(c.cJ(d),(n=h.hd.Yd(s,d,l))!=0))return!1;n=s.ub(0),(d=new h.l).K(c),d.W(l,l);for(var f=0,m=s.I();f<m;f++){var b=n.read(2*f),x=n.read(2*f+1);if(d.contains(b,x))return!1}return!o.TG(s,c,l)},o.sV=function(s,n,l,c){var d=o.qc(s,n,!1);if(d==4||d==1||d==2)return!1;d=new h.l;var f=new h.l;return s.A(d),n.A(f),!o.zc(f,d,l)&&(f.R()<=l&&f.ca()<=l?(n=n.Ip(),o.HI(s,n,l)):f.R()<=l||f.ca()<=l?(d=new h.Ta,f=new h.Sa,n.Hf(0,f),d.nf(f),n.Hf(2,f),d.lineTo(f),o.JI(s,d,l,c)):((d=new h.Da).ad(n,!1),o.II(s,d,l,c)))},o.pV=function(s,n,l,c){var d=o.qc(s,n,!1);if(d==4||d==1||d==2)return!1;d=new h.l;var f=new h.l;return s.A(d),n.A(f),!(o.zc(f,d,l)||f.R()<=l||f.ca()<=l)&&((d=new h.Da).ad(n,!1),o.FI(s,d,l,c))},o.xV=function(s,n,l){var c=new h.l,d=new h.l;return s.A(c),n.A(d),o.zc(d,c,l)},o.bV=function(s,n,l){var c=new h.l,d=new h.l;return s.A(c),n.A(d),!!o.zc(c,d,l)&&(c=o.qc(s,n,!1))!=4&&c!=2&&(c==1||(d.R()<=l&&d.ca()<=l?(n=n.Ip(),o.AI(s,n,l)):d.R()<=l||d.ca()<=l?(d=new h.Ta,c=new h.Sa,n.Hf(0,c),d.nf(c),n.Hf(2,c),d.lineTo(c),o.CI(s,d,l,null)):((d=new h.Da).ad(n,!1),o.BI(s,d,l,null))))},o.eV=function(s,n,l,c){var d=new h.l,f=new h.l;return s.A(d),n.A(f),!(o.zc(f,d,l)||f.ca()>l&&f.R()>l||f.ca()<=l&&f.R()<=l)&&(d=new h.Ta,f=new h.Sa,n.Hf(0,f),d.nf(f),n.Hf(2,f),d.lineTo(f),o.DI(s,d,l,c))},o.IV=function(s,n,l){var c=new h.l,d=new h.l;return s.A(c),n.A(d),!(!o.ek(c,d,l)||o.qc(s,n,!1)==4)&&(!!o.dI(s,n,l)||o.Wz(s,n,l,!1))},o.GV=function(s,n,l){return this.qc(s,n,!1)==4||!!new h.Zl(s,n,l,!0).next()&&!this.UG(s,n,l)},o.NI=function(s,n,l){if(o.qc(s,n,!1)==4)return!1;var c=new h.be(0);if(o.Xz(s,n,l,c)!=0)return!1;for(var d=new h.de,f=0;f<c.size;f+=2){var m=c.read(f),b=c.read(f+1);d.Bu(m,b)}return s=s.mg(),n=n.mg(),s.Fd(n,0,n.I()),o.Mw(s,d,l)},o.LI=function(s,n,l){if(o.qc(s,n,!1)==4)return!1;var c=new h.be(0);if(o.Xz(s,n,l,c)!=0)return!1;for(var d=new h.de,f=0;f<c.size;f+=2){var m=c.read(f),b=c.read(f+1);d.Bu(m,b)}return s=s.mg(),n=n.mg(),s.Fd(n,0,n.I()),!o.Mw(s,d,l)},o.MV=function(s,n,l){return o.qc(s,n,!1)!=4&&o.WG(s,n,l)},o.KI=function(s,n,l){var c=new h.l,d=new h.l;return s.A(c),n.A(d),!(!o.zc(c,d,l)||o.qc(s,n,!1)==4)&&o.ym(n,s,l,!1)},o.FV=function(s,n,l){return o.qc(s,n,!1)==4||(n=n.D(),!o.Yz(s,n,l))},o.QV=function(s,n,l){return o.qc(s,n,!1)!=4&&(n=n.D(),o.Zz(s,n,l))},o.AV=function(s,n,l){return o.qc(s,n,!1)!=4&&(n=n.D(),o.SG(s,n,l))},o.EV=function(s,n,l){return o.qc(s,n,!1)==4||!o.VG(s,n,l,!1)},o.PV=function(s,n,l){if(this.qc(s,n,!1)==4)return!1;var c=s.Ga(),d=new h.l,f=new h.l,m=new h.l;s.A(d),n.A(f),d.W(l,l),f.W(l,l),m.K(d),m.Ea(f),d=null;var b=s.Bb;if(b!=null){var x=b.Fb;d=b.zo,x==null&&(x=b=h.ta.jj(s,m))}else x=b=h.ta.jj(s,m);var $=x.getIterator(),E=null;d!=null&&(E=d.getIterator());var O=new h.h,R=new h.h,k=!1,j=l*l;for(d=new h.pn(n.I()),b=0;b<n.I();b++)d.write(b,0);for(b=0;b<n.I();b++)if(n.D(b,O),m.contains(O)){if(f.K(O.x,O.y,O.x,O.y),E!=null&&(E.Xi(f,l),E.next()==-1))continue;$.Xi(f,l);for(var F=$.next();F!=-1;F=$.next())if(c.Vb(x.ja(F)),(F=c.ha()).hc(F.fe(O,!1),R),h.h.yc(O,R)<=j){d.write(b,1),k=!0;break}}if(!k)return!1;for(s=s.mg(),c=new h.de,f=new h.h,b=0;b<n.I();b++)d.read(b)!=0&&(n.D(b,f),c.Bu(f.x,f.y));return this.Mw(s,c,l)},o.CV=function(s,n,l){if(this.qc(s,n,!1)==4)return!1;var c=s.Ga(),d=new h.l,f=new h.l,m=new h.l;s.A(d),n.A(f),d.W(l,l),f.W(l,l),m.K(d),m.Ea(f),d=null;var b=s.Bb;if(b!=null){var x=b.Fb;d=b.zo,x==null&&(x=b=h.ta.jj(s,m))}else x=b=h.ta.jj(s,m);var $=x.getIterator(),E=null;d!=null&&(E=d.getIterator());var O=new h.h,R=new h.h,k=!1,j=!1,F=l*l;for(d=new h.pn(n.I()),b=0;b<n.I();b++)d.write(b,0);for(b=0;b<n.I();b++)if(n.D(b,O),m.contains(O)){if(f.K(O.x,O.y,O.x,O.y),E!=null&&(E.Xi(f,l),E.next()==-1)){j=!0;continue}$.Xi(f,l);for(var L=!1,V=$.next();V!=-1;V=$.next())if(c.Vb(x.ja(V)),(V=c.ha()).hc(V.fe(O,!1),R),h.h.yc(O,R)<=F){d.write(b,1),L=k=!0;break}L||(j=!0)}else j=!0;if(!k||!j)return!1;for(s=s.mg(),c=new h.de,f=new h.h,b=0;b<n.I();b++)d.read(b)!=0&&(n.D(b,f),c.Bu(f.x,f.y));return!this.Mw(s,c,l)},o.zV=function(s,n,l){var c=new h.l,d=new h.l;return s.A(c),n.A(d),!(!o.zc(c,d,l)||o.qc(s,n,!1)==4||!o.VG(s,n,l,!0))&&(s=s.mg(),!o.gI(s,n,l))},o.HV=function(s,n,l){var c=new h.l,d=new h.l;return s.A(c),n.A(d),!(d.ca()>l&&d.R()>l)&&o.ek(c,d,l)},o.DV=function(s,n,l){var c=new h.l,d=new h.l;return s.A(c),n.A(d),!o.zc(d,c,l)&&!o.TG(s,d,l)},o.OV=function(s,n,l){var c=new h.l,d=new h.l;if(s.A(c),n.A(d),d.ca()<=l&&d.R()<=l)return d=n.Ip(),o.Zz(s,d,l);if(d.ca()<=l||d.R()<=l)return d=new h.Ta,c=new h.Sa,n.Hf(0,c),d.nf(c),n.Hf(2,c),d.lineTo(c),o.NI(s,d,l);s=s.Ga(),n=new h.l,c=new h.l,n.K(d),c.K(d),n.W(-l,-l),c.W(l,l),d=!1;for(var f=new h.l,m=new h.l;s.$a();)for(;s.Ha();){if(s.ha().A(f),m.K(n),m.Ea(f),!m.B()&&(m.ca()>l||m.R()>l))return!1;m.K(c),m.Ea(f),m.B()||(d=!0)}return d},o.LV=function(s,n,l){var c=new h.l,d=new h.l;return s.A(c),n.A(d),!(o.zc(c,d,l)||o.zc(d,c,l)||o.zc(d,c,l)||d.ca()>l&&d.R()>l||d.ca()<=l&&d.R()<=l)&&(c=new h.Ta,d=new h.Sa,n.Hf(0,d),c.nf(d),n.Hf(2,d),c.lineTo(d),o.WG(s,c,l))},o.RV=function(s,n,l){var c=new h.l,d=new h.l;if(s.A(c),n.A(d),!o.zc(d,c,l)||d.ca()<=l&&d.R()<=l)return!1;if(d.ca()<=l||d.R()<=l)return o.zc(d,c,l);s=s.Ga(),(n=new h.l).K(d),n.W(-l,-l),d=!1,c=new h.l;for(var f=new h.l;s.$a();)for(;s.Ha();)s.ha().A(c),n.hm(c)?d=!0:(f.K(n),f.Ea(c),!f.B()&&(f.ca()>l||f.R()>l)&&(d=!0));return d},o.yV=function(s,n,l){var c=new h.l,d=new h.l;return n.A(d),s.A(c),!(!o.zc(c,d,l)||d.ca()>l&&d.R()>l)&&(d.ca()<=l&&d.R()<=l?(n=n.Ip(),o.SG(s,n,l)):(c=new h.Ta,d=new h.Sa,n.Hf(0,d),c.nf(d),n.Hf(2,d),c.lineTo(d),o.ym(c,s,l,!1)))},o.BV=function(s,n,l){var c=new h.l,d=new h.l;if(s.A(c),n.A(d),o.zc(d,c,l)||d.ca()<=l&&d.R()<=l)return!1;if(d.ca()<=l||d.R()<=l)return c=new h.Ta,d=new h.Sa,n.Hf(0,d),c.nf(d),n.Hf(2,d),c.lineTo(d),o.LI(s,c,l);s=s.Ga(),n=new h.l,(c=new h.l).K(d),n.K(d),c.W(-l,-l),n.W(l,l);for(var f=d=!1,m=new h.l,b=new h.l;s.$a();)for(;s.Ha();)if(s.ha().A(m),f||n.contains(m)||(f=!0),d||(b.K(c),b.Ea(m),!b.B()&&(b.ca()>l||b.R()>l)&&(d=!0)),d&&f)return!0;return!1},o.iU=function(s,n,l){var c=new h.l,d=new h.l;return s.A(c),n.A(d),!!o.ek(c,d,l)&&(!!o.jU(s,n,l)||o.YA(s,n,l,!1,!0,!1))},o.gU=function(s,n,l){return!o.gI(s,n,l)},o.oU=function(s,n,l){return o.YA(s,n,l,!1,!1,!0)},o.eI=function(s,n,l){var c=new h.l,d=new h.l;return s.A(c),n.A(d),!!o.zc(c,d,l)&&o.YA(n,s,l,!0,!1,!1)},o.Mw=function(s,n,l){l*=l;for(var c=new h.h,d=new h.h,f=0;f<n.I();f++){n.D(f,d);for(var m=!1,b=0;b<s.I();b++)if(s.D(b,c),h.h.yc(c,d)<=l){m=!0;break}if(!m)return!1}return!0},o.Nw=function(s,n,l){var c=new h.l,d=new h.l;return s.A(c),n.A(d),o.ek(c,d,l)},o.fI=function(s,n,l){return n=n.D(),o.kt(s,n,l)},o.sU=function(s,n,l){return o.Nw(s,n,l)},o.dU=function(s,n,l){return!o.fI(s,n,l)},o.hU=function(s,n,l){var c=new h.l,d=new h.l;return s.A(c),n.A(d),!(d.ca()>l||d.R()>l)&&o.ek(c,d,l)},o.fU=function(s,n,l){var c=new h.l,d=new h.l;if(s.A(c),n.A(d),o.zc(d,c,l))return!1;for((n=new h.l).K(d),n.W(l,l),l=new h.h,d=0;d<s.I();d++)if(s.D(d,l),n.contains(l))return!1;return!0},o.qU=function(s,n,l){var c=new h.l,d=new h.l,f=new h.l;if(n.A(c),c.ca()<=l&&c.R()<=l)return!1;if(c.ca()<=l||c.R()<=l){n=new h.h;var m=!1;d.K(c),f.K(c),d.W(l,l),c.ca()>l?f.W(0,-l):f.W(-l,0);for(var b=0;b<s.I();b++)if(s.D(b,n),d.contains(n)){if(c.ca()>l){if(n.y>f.G&&n.y<f.H)return!1}else if(n.x>f.v&&n.x<f.C)return!1;m=!0}return m}for(d.K(c),f.K(c),d.W(l,l),f.W(-l,-l),n=new h.h,m=!1,b=0;b<s.I();b++)if(s.D(b,n),d.contains(n)){if(f.hm(n))return!1;m=!0}return m},o.rU=function(s,n,l){var c=new h.l,d=new h.l;if(s.A(c),n.A(d),!o.zc(d,c,l))return!1;if(d.ca()<=l&&d.R()<=l)return o.ek(c,d,l);if(d.ca()<=l||d.R()<=l){n=!1,c=new h.l;var f=new h.l;c.K(d),f.K(d),d.ca()>l?c.W(0,-l):c.W(-l,0),f.W(l,l);for(var m=new h.h,b=0;b<s.I();b++){if(s.D(b,m),!f.contains(m))return!1;d.ca()>l?m.y>c.G&&m.y<c.H&&(n=!0):m.x>c.v&&m.x<c.C&&(n=!0)}return n}for(n=!1,c=new h.l,f=new h.l,c.K(d),f.K(d),c.W(-l,-l),f.W(l,l),m=new h.h,b=0;b<s.I();b++){if(s.D(b,m),!f.contains(m))return!1;c.hm(m)&&(n=!0)}return n},o.cU=function(s,n,l){var c=new h.l,d=new h.l;return s.A(c),n.A(d),!(!o.zc(c,d,l)||d.ca()>l||d.R()>l)&&(n=n.Ip(),!o.kt(s,n,l))},o.eU=function(s,n,l){var c=new h.l,d=new h.l;if(s.A(c),n.A(d),o.zc(d,c,l)||d.ca()<=l&&d.R()<=l)return!1;if(d.ca()<=l||d.R()<=l){n=new h.l,c=new h.l,n.K(d),d.ca()>l?n.W(0,-l):n.W(-l,0),c.K(d),c.W(l,l);for(var f=new h.h,m=!1,b=!1,x=0;x<s.I();x++)if(s.D(x,f),m||(d.ca()>l?f.y>n.G&&f.y<n.H&&(m=!0):f.x>n.v&&f.x<n.C&&(m=!0)),b||c.contains(f)||(b=!0),m&&b)return!0;return!1}for(n=new h.l,c=new h.l,n.K(d),n.W(-l,-l),c.K(d),c.W(l,l),f=new h.h,b=m=!1,x=0;x<s.I();x++)if(s.D(x,f),!m&&n.hm(f)&&(m=!0),b||c.contains(f)||(b=!0),m&&b)return!0;return!1},o.wI=function(s,n,l){return h.h.yc(s,n)<=l*l},o.SU=function(s,n,l){return h.h.yc(s,n)>l*l},o.uI=function(s,n,l){return o.wI(s,n,l)},o.vI=function(s,n,l){var c=new h.l;return c.K(s),o.ek(c,n,l)},o.Rw=function(s,n,l){var c=new h.l;return c.K(n),c.W(l,l),!c.contains(s)},o.dB=function(s,n,l){if(n.ca()<=l&&n.R()<=l)return!1;var c=new h.l,d=new h.l;if(c.K(n),c.W(l,l),!c.contains(s))return!1;if(n.ca()<=l||n.R()<=l){if(d.K(n),n.ca()>l?d.W(0,-l):d.W(-l,0),n.ca()>l){if(s.y>d.G&&s.y<d.H)return!1}else if(s.x>d.v&&s.x<d.C)return!1;return!0}return d.K(n),d.W(-l,-l),!d.hm(s)},o.eB=function(s,n,l){if(n.ca()<=l&&n.R()<=l)return!0;if(n.ca()<=l||n.R()<=l){var c=new h.l;c.K(n),n.ca()>l?c.W(0,-l):c.W(-l,0);var d=!1;return n.ca()>l?s.y>c.G&&s.y<c.H&&(d=!0):s.x>c.v&&s.x<c.C&&(d=!0),d}return(c=new h.l).K(n),c.W(-l,-l),c.hm(s)},o.RU=function(s,n,l){return o.vI(s,n,l)},o.ek=function(s,n,l){return o.zc(s,n,l)&&o.zc(n,s,l)},o.dk=function(s,n,l){var c=new h.l;return c.K(n),c.W(l,l),!s.isIntersecting(c)},o.cQ=function(s,n,l){if(s.ca()<=l&&s.R()<=l){var c=s.sf();return o.dB(c,n,l)}if(n.ca()<=l&&n.R()<=l)return c=n.sf(),o.dB(c,s,l);if(s.ca()>l&&s.R()>l&&(n.ca()<=l||n.R()<=l)?c=n:(c=s,s=n),c.ca()<=l||c.R()<=l){if(s.ca()<=l||s.R()<=l){n=new h.yb;var d=new h.yb,f=[0,0],m=[0,0],b=new h.h;return c.dn(b),n.Dc(b),c.en(b),n.Qc(b),s.dn(b),d.Dc(b),s.en(b),d.Qc(b),n.Ea(d,null,f,m,l),n.Ea(d,null,null,null,l)==1&&(f[0]==0||f[1]==1||m[0]==0||m[1]==1)}return n=new h.l,d=new h.l,n.K(s),n.W(-l,-l),d.K(n),d.Ea(c),!(!d.B()&&(d.ca()>l||d.R()>l))}return s.W(l,l),(d=new h.l).K(c),d.Ea(s),!(d.B()||!d.B()&&d.ca()>l&&d.R()>l)},o.bQ=function(s,n,l){if(o.zc(s,n,l)||o.zc(n,s,l)||s.ca()<=l&&s.R()<=l||n.ca()<=l&&n.R()<=l)return!1;if(s.ca()<=l||s.R()<=l){if(n.ca()>l&&n.R()>l)return!1;var c=new h.yb,d=new h.yb,f=[0,0],m=[0,0],b=new h.h;return s.dn(b),c.Dc(b),s.en(b),c.Qc(b),n.dn(b),d.Dc(b),n.en(b),d.Qc(b),c.Ea(d,null,f,m,l),c.Ea(d,null,null,null,l)==2&&(0<f[0]||1>f[1])&&(0<m[0]||1>m[1])}return!(n.ca()<=l||n.R()<=l)&&((c=new h.l).K(s),c.Ea(n),!(c.B()||c.ca()<=l||c.R()<=l))},o.jF=function(s,n,l){if(!o.zc(s,n,l))return!1;if(s.ca()<=l&&s.R()<=l)return s=s.sf(),o.eB(s,n,l);if(n.ca()<=l&&n.R()<=l)return n=n.sf(),o.eB(n,s,l);if(s.ca()<=l||s.R()<=l)return o.zc(s,n,l);if(n.ca()<=l||n.R()<=l){var c=new h.l;return c.K(s),c.W(-l,-l),c.hm(n)?!0:((s=new h.l).K(c),s.Ea(n),!(s.B()||s.ca()<=l&&s.R()<=l))}return o.zc(s,n,l)},o.aQ=function(s,n,l){if(o.zc(s,n,l)||o.zc(n,s,l)||s.ca()<=l&&s.R()<=l||n.ca()<=l&&n.R()<=l||n.ca()>l&&n.R()>l&&s.ca()>l&&s.R()>l)return!1;if(s.ca()>l&&s.R()>l)var c=n;else c=s,s=n;if(s.ca()>l&&s.R()>l){n=new h.l;var d=new h.l;return d.K(s),d.W(-l,-l),n.K(d),n.Ea(c),!(n.B()||n.ca()<=l&&n.R()<=l)}n=new h.yb,d=new h.yb;var f=[0,0],m=[0,0],b=new h.h;return c.dn(b),n.Dc(b),c.en(b),n.Qc(b),s.dn(b),d.Dc(b),s.en(b),d.Qc(b),n.Ea(d,null,f,m,l),n.Ea(d,null,null,null,l)==1&&0<f[0]&&1>f[1]&&0<m[0]&&1>m[1]},o.EI=function(s,n,l){var c=new h.l,d=new h.l,f=new h.Zl(s,n,l,!0);if(!f.next())return!0;if(this.UG(s,n,l))return!1;var m=s,b=null;n.getType()==1736&&(b=n);var x=!1,$=!1;do{var E=f.nl(),O=f.hl();if(O=n.Na(n.Ba(O)),c.K(f.uz()),c.W(l,l),c.contains(O)&&(O=h.hd.Yd(m,O,0))!=0||n.getType()==1736&&(E=s.Na(s.Ba(E)),d.K(f.az()),d.W(l,l),d.contains(E)&&(O=h.hd.Yd(b,E,0))!=0))return!1;x||(!h.Dg.Ml(s,n.da()-1)||s.Bb!=null&&s.Bb.Fb!=null?m=s:(m=new h.Da,s.copyTo(m),m.fj(1)),x=!0),n.getType()!=1736||$||($=n,!h.Dg.Ml($,s.da()-1)||n.Bb!=null&&n.Bb.Fb!=null?b=n:(b=new h.Da,$.copyTo(b),b.fj(1)),$=!0)}while(f.next());return!0},o.zc=function(s,n,l){var c=new h.l;return c.K(s),c.W(l,l),c.contains(n)},o.ls=function(s,n,l){var c=new h.l;return c.K(n),c.W(l,l),n=new h.h,s.dn(n),!c.contains(n)||(s.$I(n),!c.contains(n)||(s.cJ(n),!c.contains(n)||(s.en(n),!c.contains(n))))},o.dI=function(s,n,l){if(s.da()!=n.da()||s.I()!=n.I())return!1;var c=new h.h,d=new h.h,f=!0;l*=l;for(var m=0;m<s.da();m++){if(s.Vc(m)!=n.Vc(m)){f=!1;break}for(var b=s.Ba(m);b<n.Vc(m);b++)if(s.D(b,c),n.D(b,d),h.h.yc(c,d)>l){f=!1;break}if(!f)break}return!!f},o.jU=function(s,n,l){if(s.I()!=n.I())return!1;var c=new h.h,d=new h.h,f=!0;l*=l;for(var m=0;m<s.I();m++)if(s.D(m,c),n.D(m,d),h.h.yc(c,d)>l){f=!1;break}return!!f},o.YA=function(s,n,l,c,d,f){var m=!1;if(s.I()>n.I()){c&&(c=!1,m=!0);var b=n}else b=s,s=n;if(n=null,d||f||m){n=new h.pn(s.I());for(var x=0;x<s.I();x++)n.write(x,0)}x=new h.l;var $=new h.l,E=new h.l;b.A(x),s.A($),x.W(l,l),$.W(l,l),E.K(x),E.Ea($),$=new h.h;for(var O=new h.h,R=!0,k=h.ta.oE(s,E),j=k.getIterator(),F=l*l,L=0;L<b.I();L++)if(b.D(L,$),E.contains($)){var V=!1;x.K($.x,$.y,$.x,$.y),j.Xi(x,l);for(var B=j.next();B!=-1&&(B=k.ja(B),s.D(B,O),!(h.h.yc($,O)<=F&&((d||f||m)&&n.write(B,1),V=!0,c)));B=j.next());if(!V&&(R=!1,d||c))return!1}else{if(d||c)return!1;R=!1}if(f&&R)return!1;if(c)return!0;for(x=0;x<s.I();x++)if(n.read(x)==1){if(f)return!0}else if(d||m)return!1;return!f},o.gI=function(s,n,l){if(s.I()>n.I())var c=n;else c=s,s=n;n=new h.l;var d=new h.l,f=new h.l;c.A(n),s.A(d),n.W(l,l),d.W(l,l),f.K(n),f.Ea(d),d=new h.h;for(var m=new h.h,b=l*l,x=h.ta.oE(s,f),$=x.getIterator(),E=0;E<c.I();E++)if(c.D(E,d),f.contains(d)){n.K(d.x,d.y,d.x,d.y),$.Xi(n,l);for(var O=$.next();O!=-1;O=$.next())if(s.D(x.ja(O),m),h.h.yc(d,m)<=b)return!0}return!1},o.Wz=function(s,n,l,c){return o.ym(s,n,l,c)&&o.ym(n,s,l,c)},o.ym=function(s,n,l,c){function d(Te,le){return O.QE(Te,le)}var f,m=!0,b=[0,0],x=[0,0],$=0,E=new h.ia(0),O=new o,R=new h.l,k=new h.l,j=new h.l;s.A(R),n.A(k),R.W(l,l),k.W(l,l),j.K(R),j.Ea(k),s=s.Ga(),k=n.Ga();var F=null,L=F=null,V=n.Bb;for(V!=null?(F=V.Fb,L=V.zo,F==null&&(F=h.ta.jj(n,j))):F=h.ta.jj(n,j),n=F.getIterator(),V=null,L!=null&&(V=L.getIterator());s.$a();)for(;s.Ha();){var B=!1,W=s.ha();if(W.A(R),!R.isIntersecting(j)||V!=null&&(V.Xi(R,l),V.next()==-1))return!1;for(L=W.Qb(),n.Uo(W,l),f=n.next();f!=-1;f=n.next()){k.Vb(F.ja(f)),f=k.ha();var K=W.Ea(f,null,b,x,l);if(K==2&&(!c||x[0]<=x[1])){K=b[0];var re=b[1],ae=x[0],de=x[1];if(K*L<=l&&(1-re)*L<=l){B=!0,$=0,E.resize(0),O.rh.length=0;var ce=s.wb();for(ae=!0;ae;){if(s.Ha()){if(L=(W=s.ha()).Qb(),(K=W.Ea(f,null,b,x,l))==2&&(!c||x[0]<=x[1])&&(K=b[0],re=b[1],K*L<=l&&(1-re)*L<=l)){ce=s.wb();continue}if(k.Ha()&&(f=k.ha(),(K=W.Ea(f,null,b,x,l))==2&&(!c||x[0]<=x[1])&&(K=b[0],re=b[1],K*L<=l&&(1-re)*L<=l))){ce=s.wb();continue}}ae=!1}ce!=s.wb()&&(s.Vb(ce),s.ha());break}ce=s.wb(),f=w.construct(ce,s.gb,K,re,k.wb(),k.gb,ae,de),O.rh.push(f),E.add(E.size)}}if(!B){if($==O.rh.length)return!1;for(1<E.size-$&&E.Vd($,E.size,d),B=0;$<O.rh.length;$++)if(!((f=O.rh[E.get($)]).Kj<B&&f.Si<B)){if(L*(f.Kj-B)>l)return!1;if(L*(1-(B=f.Si))<=l||B==1)break}if(L*(1-B)>l)return!1;$=0,E.resize(0),O.rh.length=0}}return m},o.WG=function(s,n,l){if(1>o.Xz(s,n,l,null))return!1;var c=new h.l,d=new h.l;s.A(c),n.A(d);var f=o.ls(c,d,l);return c=o.ls(d,c,l),!(!f||!c)||(f&&!c?!o.ym(n,s,l,!1):c&&!f?!o.ym(s,n,l,!1):!o.ym(s,n,l,!1)&&!o.ym(n,s,l,!1))},o.Xz=function(s,n,l,c){function d(lt,Mt){return R.QE(lt,Mt)}if(s.yz()>n.yz())var f=n,m=s;else f=s,m=n;s=f.Ga(),n=m.Ga();var b=[0,0],x=[0,0],$=-1,E=0,O=new h.ia(0),R=new o,k=new h.l,j=new h.l,F=new h.l;f.A(k),m.A(j),k.W(l,l),j.W(l,l),F.K(k),F.Ea(j),f=null,c!=null&&(f=new h.h);var L=j=j=null,V=m.Bb;for(V!=null?(j=V.Fb,L=V.zo,j==null&&(j=h.ta.jj(m,F))):j=h.ta.jj(m,F),m=j.getIterator(),V=null,L!=null&&(V=L.getIterator());s.$a();)for(L=0;s.Ha();){var B=s.ha();if(B.A(k),k.isIntersecting(F)){if(V!=null&&(V.Xi(k,l),V.next()==-1))continue;var W=B.Qb();m.Uo(B,l);for(var K=m.next();K!=-1;K=m.next()){var re=j.ja(K);n.Vb(re);var ae=n.ha(),de=ae.Qb(),ce=B.Ea(ae,null,b,x,l);if(0<ce){K=b[0],$=x[0];var Te=ce==2?b[1]:NaN,le=ce==2?x[1]:NaN;if(ce==2){if(W*(Te-K)>l)return 1;var He=W*(Te-K);if(n.Ha()){if(ae=n.ha(),(ce=B.Ea(ae,null,b,null,l))==2){ce=b[0];var Ue=b[1];if(He+(ce=W*(Ue-ce))>l)return 1}n.Vb(re),n.ha()}if(!n.vm()){if(n.li(),ae=n.li(),(ce=B.Ea(ae,null,b,null,l))==2&&(ce=b[0],He+(ce=W*((Ue=b[1])-ce))>l))return 1;n.Vb(re),n.ha()}if(s.Ha()){if(re=s.wb(),(ce=(B=s.ha()).Ea(ae,null,b,null,l))==2&&(ce=b[0],He+(ce=W*((Ue=b[1])-ce))>l))return 1;s.Vb(re),s.ha()}if(!s.vm()){if(re=s.wb(),s.li(),(ce=(B=s.li()).Ea(ae,null,b,null,l))==2&&(ce=b[0],He+(ce=de*((Ue=b[1])-ce))>l))return 1;s.Vb(re),s.ha()}ae=w.construct(s.wb(),s.gb,K,Te,n.wb(),n.gb,$,le),R.rh.push(ae),O.add(O.size)}$=0,c!=null&&(B.hc(K,f),c.add(f.x),c.add(f.y))}}if(E<R.rh.length){for(O.Vd(E,O.size,d),B=0,K=R.rh[O.get(E)].Mm;E<R.rh.length;E++)if(!((ae=R.rh[O.get(E)]).Kj<B&&ae.Si<B))if(W*(ae.Kj-B)>l)L=W*(ae.Si-ae.Kj),B=ae.Si,K=ae.Mm;else{if(ae.Mm!=K?(L=W*(ae.Si-ae.Kj),K=ae.Mm):L+=W*(ae.Si-ae.Kj),L>l)return 1;if((B=ae.Si)==1)break}W*(1-B)>l&&(L=0),E=0,O.resize(0),R.rh.length=0}}}return $},o.UG=function(s,n,l){var c=s.Ga(),d=n.Ga();for(s=new h.Zl(s,n,l,!1);s.next();){n=s.nl();var f=s.hl();if(c.Vb(n),d.Vb(f),n=c.ha(),0<d.ha().Ea(n,null,null,null,l))return!0}return!1},o.VG=function(s,n,l,c){var d=s.Ga(),f=new h.l,m=new h.l,b=new h.l;s.A(f),n.A(m),f.W(l,l),f.contains(m),m.W(l,l),b.K(f),b.Ea(m),(f=s.Bb)!=null?(f=f.Fb)==null&&(f=h.ta.jj(s,b)):f=h.ta.jj(s,b),s=f.getIterator();for(var x=new h.h,$=new h.h,E=l*l,O=0;O<n.I();O++)if(n.D(O,x),b.contains(x)){m.K(x.x,x.y,x.x,x.y),s.Xi(m,l);for(var R=!1,k=s.next();k!=-1;k=s.next())if(d.Vb(f.ja(k)),(k=d.ha()).hc(k.fe(x,!1),$),h.h.yc($,x)<=E){R=!0;break}if(c){if(!R)return!1}else if(R)return!0}return!!c},o.Yz=function(s,n,l){var c=new h.h,d=l*l,f=s.Ga();if((s=s.Bb)!=null&&(s=s.Fb)!=null){var m=new h.l;for(m.K(n),m=(l=s.MF(m,l)).next();m!=-1;m=l.next())if(f.Vb(s.ja(m)),f.Ha()){var b=(m=f.ha()).fe(n,!1);if(m.hc(b,c),h.h.yc(n,c)<=d)return!0}return!1}for(s=new h.l;f.$a();)for(;f.Ha();)if((m=f.ha()).A(s),s.W(l,l),s.contains(n)&&(b=m.fe(n,!1),m.hc(b,c),h.h.yc(n,c)<=d))return!0;return!1},o.SG=function(s,n,l){return o.Yz(s,n,l)&&!o.Zz(s,n,l)},o.Zz=function(s,n,l){return s=s.mg(),!o.kt(s,n,l)},o.TG=function(s,n,l){if(s.tm()){var c=new h.yb(n.v,n.G,n.v,n.H),d=new h.yb(n.v,n.H,n.C,n.H),f=new h.yb(n.C,n.H,n.C,n.G);for(n=new h.yb(n.C,n.G,n.v,n.G),s=s.Ga();s.$a();)for(;s.Ha();){var m=s.ha();if(m.isIntersecting(c,l)||m.isIntersecting(d,l)||m.isIntersecting(f,l)||m.isIntersecting(n,l))return!0}}else{(c=new h.l).K(n),c.W(l,l),l=s.ub(0),d=new h.h,f=new h.h,n=new h.h,m=new h.h;for(var b=0,x=s.da();b<x;b++)for(var $=!0,E=s.Ba(b),O=s.Vc(b);E<O;E++)if($)l.tc(2*E,f),$=!1;else{if(l.tc(2*E,d),n.L(f),m.L(d),c.zy(n,m)!=0)return!0;f.L(d)}}return!1},o.qc=function(s,n,l){var c=s.getType(),d=n.getType();if(h.aa.xj(c)){var f=s.Bb;if(f!=null&&(f=f.Fk)!=null)if(d==33){var m=n.D();if((m=f.So(m.x,m.y))==1)return 1;if(m==0)return 4}else{if(m=new h.l,n.A(m),(m=f.Ro(m))==1)return 1;if(m==0)return 4;if(l&&h.aa.xj(d)&&o.HE(n,f))return 1073741824}}if(h.aa.xj(d)&&(f=n.Bb)!=null&&(f=f.Fk)!=null)if(c==33){if(s=s.D(),(m=f.So(s.x,s.y))==1)return 2;if(m==0)return 4}else{if(n=new h.l,s.A(n),(m=f.Ro(n))==1)return 2;if(m==0)return 4;if(l&&h.aa.xj(c)&&o.HE(s,f))return 1073741824}return 0},o.HE=function(s,n){for(var l=s.I(),c=new h.h,d=0;d<l;d++)if(s.D(d,c),n.So(c.x,c.y)==1)return!0;return!1},o.II=function(s,n,l,c){for(var d=1<=s.om(0)&&1<=n.om(0),f=s.Ga(),m=n.Ga(),b=[0,0],x=[0,0],$=new h.Zl(s,n,l,!1),E=!1;$.next();){var O=$.nl(),R=$.hl();if(f.Vb(O),m.Vb(R),O=f.ha(),(R=m.ha().Ea(O,null,x,b,l))==2){if(E=b[0],R=b[1],O=O.Qb(),d&&(R-E)*O>l)return!1;E=!0}else if(R!=0){if(E=b[0],O=x[0],0<E&&1>E&&0<O&&1>O)return!1;E=!0}}return!!E&&(f=new h.l,m=new h.l,d=new h.l,s.A(f),n.A(m),f.W(1e3*l,1e3*l),m.W(1e3*l,1e3*l),d.K(f),d.Ea(m),!(10<s.I()&&(s=h.Ud.clip(s,d,l,0),s.B())||10<n.I()&&(n=h.Ud.clip(n,d,l,0),n.B()))&&h.am.rt(s,n,l,"F********",c))},o.FI=function(s,n,l,c){var d=1<=s.om(0)&&1<=n.om(0),f=new h.l,m=new h.l,b=new h.l;s.A(f),n.A(m);for(var x=!1,$=o.ls(f,m,l),E=o.ls(m,f,l),O=s.Ga(),R=n.Ga(),k=[0,0],j=[0,0],F=new h.Zl(s,n,l,!1);F.next();){var L=F.nl(),V=F.hl();if(O.Vb(L),R.Vb(V),V=O.ha(),(L=R.ha().Ea(V,null,j,k,l))==2){L=k[0];var B=k[1];if(V=V.Qb(),d&&(B-L)*V>l&&(x=!0,$&&E))return!0}else if(L!=0&&(L=k[0],V=j[0],0<L&&1>L&&0<V&&1>V))return!0}if(d=new h.l,O=new h.l,d.K(f),d.W(1e3*l,1e3*l),O.K(m),O.W(1e3*l,1e3*l),b.K(d),b.Ea(O),f="",f=x?f+"**":f+"T*",$){if(10<n.I()&&(n=h.Ud.clip(n,b,l,0)).B())return!1;f+="****"}else f+="T***";if(E){if(10<s.I()&&(s=h.Ud.clip(s,b,l,0)).B())return!1;f+="***"}else f+="T**";return h.am.rt(s,n,l,f.toString(),c)},o.BI=function(s,n,l,c){var d=[!1],f=o.zI(s,n,l,d);return d[0]?f:(d=new h.l,n.A(d),d.W(1e3*l,1e3*l),!(10<s.I()&&(s=h.Ud.clip(s,d,l,0),s.B()))&&h.am.Sw(s,n,l,c))},o.zI=function(s,n,l,c){c[0]=!1;for(var d=s.Ga(),f=n.Ga(),m=[0,0],b=[0,0],x=new h.Zl(s,n,l,!1),$=!1;x.next();){var E=x.nl(),O=x.hl();if(d.Vb(E,-1),f.Vb(O,-1),E=d.ha(),(E=f.ha().Ea(E,null,b,m,l))!=0&&($=!0,E==1&&(E=m[0],O=b[0],0<E&&1>E&&0<O&&1>O)))return c[0]=!0,!1}if(!$){for(c[0]=!0,m=new h.l,s.A(m),m.W(l,l),x=s,$=!1,b=new h.l,c=0,d=n.da();c<d;c++)if(0<n.Ja(c)){if(n.Rj(c,b),!m.isIntersecting(b)||(f=n.Na(n.Ba(c)),(f=h.Dg.wm(x,f,0))==0))return!1;$||(!h.Dg.Ml(s,n.da()-1)||s.Bb!=null&&s.Bb.Fb!=null?x=s:(f=new h.Da,s.copyTo(f),f.fj(1),x=f),$=!0)}if(s.da()==1||n.getType()==1607)return!0;for(m=new h.l,n.A(m),m.W(l,l),b=n,x=!1,l=new h.l,c=0,d=s.da();c<d;c++)if(0<s.Ja(c)){if(s.Rj(c,l),m.isIntersecting(l)&&(f=s.Na(s.Ba(c)),(f=h.Dg.wm(b,f,0))==1))return!1;x||(!h.Dg.Ml(n,s.da()-1)||n.Bb!=null&&n.Bb.Fb!=null?b=n:(f=new h.Da,n.copyTo(f),f.fj(1),b=f),x=!0)}return!0}return!1},o.JI=function(s,n,l,c){for(var d=s.Ga(),f=n.Ga(),m=[0,0],b=[0,0],x=new h.Zl(s,n,l,!1),$=!1;x.next();){var E=x.nl(),O=x.hl();if(d.Vb(E),f.Vb(O),E=d.ha(),(E=f.ha().Ea(E,null,b,m,l))==2)$=!0;else if(E!=0){if($=m[0],E=b[0],0<$&&1>$&&0<E&&1>E)return!1;$=!0}}return!!$&&(f=new h.l,m=new h.l,d=new h.l,s.A(f),n.A(m),f.W(1e3*l,1e3*l),m.W(1e3*l,1e3*l),d.K(f),d.Ea(m),!(10<s.I()&&(s=h.Ud.clip(s,d,l,0),s.B())||10<n.I()&&(n=h.Ud.clip(n,d,l,0),n.B()))&&h.am.$m(s,n,l,"F********",c))},o.DI=function(s,n,l,c){for(var d=s.Ga(),f=n.Ga(),m=[0,0],b=[0,0],x=new h.Zl(s,n,l,!1),$=!1;x.next();){var E=x.nl(),O=x.hl();if(d.Vb(E),f.Vb(O),E=d.ha(),(E=f.ha().Ea(E,null,b,m,l))==2)$=!0;else if(E!=0){if($=m[0],E=b[0],0<$&&1>$&&0<E&&1>E)return!0;$=!0}}return!!$&&(f=new h.l,m=new h.l,b=new h.l,x=new h.l,d=new h.l,s.A(f),n.A(m),o.ls(m,f,l)?(b.K(f),b.W(1e3*l,1e3*l),x.K(m),x.W(1e3*l,1e3*l),d.K(b),d.Ea(x),!(10<s.I()&&(s=h.Ud.clip(s,d,l,0),s.B())||10<n.I()&&(n=h.Ud.clip(n,d,l,0),n.B()))&&(l=h.am.$m(s,n,l,"T********",c))):l=h.am.$m(s,n,l,"T*****T**",c))},o.CI=function(s,n,l,c){var d=[!1],f=o.zI(s,n,l,d);return d[0]?f:(d=new h.l,n.A(d),d.W(1e3*l,1e3*l),!(10<s.I()&&(s=h.Ud.clip(s,d,l,0),s.B()))&&h.am.fB(s,n,l,c))},o.AI=function(s,n,l){return h.hd.Yd(s,n,l)==1},o.HI=function(s,n,l){return h.hd.Yd(s,n,l)==2},o.kt=function(s,n,l){var c=new h.h;l*=l;for(var d=0;d<s.I();d++)if(s.D(d,c),h.h.yc(c,n)<=l)return!1;return!0},o.prototype.QE=function(s,n){return s=this.rh[s],n=this.rh[n],s.Mm<n.Mm||s.Mm==n.Mm&&(s.pw<n.pw||s.pw==n.pw&&(s.Kj<n.Kj||s.Kj==n.Kj&&(s.Si<n.Si||s.Si==n.Si&&s.BH<n.BH)))?-1:1},o}();h.ud=u}(G||(G={})),function(h){var C,w,u;(w=C||(C={}))[w.InteriorInterior=0]="InteriorInterior",w[w.InteriorBoundary=1]="InteriorBoundary",w[w.InteriorExterior=2]="InteriorExterior",w[w.BoundaryInterior=3]="BoundaryInterior",w[w.BoundaryBoundary=4]="BoundaryBoundary",w[w.BoundaryExterior=5]="BoundaryExterior",w[w.ExteriorInterior=6]="ExteriorInterior",w[w.ExteriorBoundary=7]="ExteriorBoundary",w[w.ExteriorExterior=8]="ExteriorExterior",function(o){o[o.AreaAreaPredicates=0]="AreaAreaPredicates",o[o.AreaLinePredicates=1]="AreaLinePredicates",o[o.LineLinePredicates=2]="LineLinePredicates",o[o.AreaPointPredicates=3]="AreaPointPredicates",o[o.LinePointPredicates=4]="LinePointPredicates",o[o.PointPointPredicates=5]="PointPointPredicates"}(u||(u={})),C=function(){function o(){this.le=0,this.j=new h.iu,this.J=[0,0,0,0,0,0,0,0,0],this.Za=[0,0,0,0,0,0,0,0,0],this.ea=[!1,!1,!1,!1,!1,!1,!1,!1,!1],this.Sm=this.vw=-1}return o.yB=function(s,n,l,c,d){if(c.length!=9)throw h.i.fa("relation string length has to be 9 characters");for(var f=0;9>f;f++){var m=c.charAt(f);if(m!="*"&&m!="T"&&m!="F"&&m!="0"&&m!="1"&&m!="2")throw h.i.fa("relation string")}if((f=this.MR(c,s.Db(),n.Db()))!=0)return h.ud.zB(s,n,l,f,d);f=new h.l,s.A(f),m=new h.l,n.A(m);var b=new h.l;if(b.K(f),b.Zb(m),l=h.ta.Wd(l,b,!1),s=this.WE(s,l),n=this.WE(n,l),s.B()||n.B())return this.uW(s,n,c);switch(f=s.getType(),m=n.getType(),b=!1,f){case 1736:switch(m){case 1736:b=this.rt(s,n,l,c,d);break;case 1607:b=this.$m(s,n,l,c,d);break;case 33:b=this.qt(s,n,l,c);break;case 550:b=this.pt(s,n,l,c,d)}break;case 1607:switch(m){case 1736:b=this.$m(n,s,l,this.Zp(c),d);break;case 1607:b=this.gB(s,n,l,c,d);break;case 33:b=this.tt(s,n,l,c,d);break;case 550:b=this.st(s,n,l,c,d)}break;case 33:switch(m){case 1736:b=this.qt(n,s,l,this.Zp(c));break;case 1607:b=this.tt(n,s,l,this.Zp(c),d);break;case 33:b=this.$U(s,n,l,c);break;case 550:b=this.lt(n,s,l,this.Zp(c))}break;case 550:switch(m){case 1736:b=this.pt(n,s,l,this.Zp(c),d);break;case 1607:b=this.st(n,s,l,this.Zp(c),d);break;case 550:b=this.ZA(s,n,l,c,d);break;case 33:b=this.lt(s,n,l,c)}break;default:b=!1}return b},o.rt=function(s,n,l,c,d){var f=new o;f.Yi(),f.bj(c),f.xJ();var m=new h.l,b=new h.l;return s.A(m),n.A(b),c=!1,h.ud.dk(m,b,l)&&(f.Cu(s,n),c=!0),c||((m=h.ud.qc(s,n,!1))==4?(f.Cu(s,n),c=!0):m==1?(f.ly(n),c=!0):m==2&&(f.ZD(s),c=!0)),c||(s=(c=new h.gd).Ib(s),n=c.Ib(n),f.Wo(c,l,d),f.Bp(s,n),f.j.Ug()),o.fg(f.J,f.Xc)},o.Sw=function(s,n,l,c){var d=new o;d.Yi(),d.bj("T*****F**"),d.xJ();var f=new h.l,m=new h.l;s.A(f),n.A(m);var b=!1;return h.ud.dk(f,m,l)&&(d.Cu(s,n),b=!0),b||((f=h.ud.qc(s,n,!1))==4?(d.Cu(s,n),b=!0):f==1?(d.ly(n),b=!0):f==2&&(d.ZD(s),b=!0)),b?this.fg(d.J,d.Xc):(s=(b=new h.gd).Ib(s),f=b.Ib(n),h.Tk.V(b,l,c,!1),l=b.Ne(f).mg(),b.Gp(0,!0,!0),h.rn.V(b,s,-1,!1,c),b.I(s)!=0&&(h.rn.V(b,f,-1,!1,c),d.er(b,c),(n=b.I(f)==0)||(d.Bp(s,f),d.j.Ug(),f=this.fg(d.J,d.Xc))?(s=b.Ne(s),s=(b=new h.gd).Ib(s),f=b.Ib(l),d.er(b,c),d.le=0,d.Yi(),d.bj(n?"T*****F**":"******F**"),d.IB(),d.Bp(s,f),d.j.Ug(),this.fg(d.J,d.Xc)):f))},o.$m=function(s,n,l,c,d){var f=new o;f.Yi(),f.bj(c),f.IB();var m=new h.l,b=new h.l;return s.A(m),n.A(b),c=!1,h.ud.dk(m,b,l)&&(f.Du(s,n),c=!0),c||((m=h.ud.qc(s,n,!1))==4?(f.Du(s,n),c=!0):m==1&&(f.$D(n),c=!0)),c||(s=(c=new h.gd).Ib(s),n=c.Ib(n),f.Wo(c,l,d),f.kh=f.j.Dp(),o.Jw(n,f.j,f.kh),f.Bp(s,n),f.j.Ep(f.kh),f.j.Ug()),o.fg(f.J,f.Xc)},o.fB=function(s,n,l,c){var d=new o;d.Yi(),d.bj("T*****F**"),d.IB();var f=new h.l,m=new h.l;s.A(f),n.A(m);var b=!1;return h.ud.dk(f,m,l)&&(d.Du(s,n),b=!0),b||((f=h.ud.qc(s,n,!1))==4?(d.Du(s,n),b=!0):f==1&&(d.$D(n),b=!0)),b?this.fg(d.J,d.Xc):(s=(b=new h.gd).Ib(s),n=b.Ib(n),d.Wo(b,l,c),b.I(s)!=0&&(d.Bp(s,n),d.j.Ug(),this.fg(d.J,d.Xc)))},o.pt=function(s,n,l,c,d){var f=new o;f.Yi(),f.bj(c),f.yJ();var m=new h.l,b=new h.l;return s.A(m),n.A(b),c=!1,h.ud.dk(m,b,l)&&(f.Eu(s),c=!0),c||((m=h.ud.qc(s,n,!1))==4?(f.Eu(s),c=!0):m==1&&(f.zN(),c=!0)),c||(s=(c=new h.gd).Ib(s),n=c.Ib(n),f.Wo(c,l,d),f.Gy(s,n),f.j.Ug()),o.fg(f.J,f.Xc)},o.gB=function(s,n,l,c,d){var f=new o;f.Yi(),f.bj(c),f.eX(),c=new h.l;var m=new h.l;s.A(c),n.A(m);var b=!1;return h.ud.dk(c,m,l)&&(f.PG(s,n),b=!0),b||h.ud.qc(s,n,!1)!=4||(f.PG(s,n),b=!0),b||(s=(c=new h.gd).Ib(s),n=c.Ib(n),f.Wo(c,l,d),f.Yh=f.j.Dp(),f.kh=f.j.Dp(),o.Jw(s,f.j,f.Yh),o.Jw(n,f.j,f.kh),f.Bp(s,n),f.j.Ep(f.Yh),f.j.Ep(f.kh),f.j.Ug()),o.fg(f.J,f.Xc)},o.st=function(s,n,l,c,d){var f=new o;f.Yi(),f.bj(c),f.MJ(),c=new h.l;var m=new h.l;s.A(c),n.A(m);var b=!1;return h.ud.dk(c,m,l)&&(f.Vz(s),b=!0),b||h.ud.qc(s,n,!1)!=4||(f.Vz(s),b=!0),b||(s=(c=new h.gd).Ib(s),n=c.Ib(n),f.Wo(c,l,d),f.Yh=f.j.Dp(),o.Jw(s,f.j,f.Yh),f.Gy(s,n),f.j.Ep(f.Yh),f.j.Ug()),o.fg(f.J,f.Xc)},o.ZA=function(s,n,l,c,d){var f=new o;f.Yi(),f.bj(c),f.RJ(),c=new h.l;var m=new h.l;s.A(c),n.A(m);var b=!1;return h.ud.dk(c,m,l)&&(f.yI(),b=!0),b||(s=(c=new h.gd).Ib(s),n=c.Ib(n),f.Wo(c,l,d),f.Gy(s,n),f.j.Ug()),o.fg(f.J,f.Xc)},o.qt=function(s,n,l,c){var d=new o;d.Yi(),d.bj(c),d.yJ();var f=new h.l;s.A(f),n=n.D();var m=!1;return h.ud.Rw(n,f,l)&&(d.Eu(s),m=!0),m||((l=h.hd.Yd(s,n,l))==1?(d.J[0]=0,d.J[2]=2,d.J[3]=-1,d.J[5]=1,d.J[6]=-1):l==2?(d.J[6]=-1,s.Ke()!=0?(d.J[0]=-1,d.J[3]=0,d.J[2]=2,d.J[5]=1):(d.J[0]=0,d.J[3]=-1,d.J[5]=-1,l=new h.l,s.A(l),d.J[2]=l.ca()==0&&l.R()==0?-1:1)):d.Eu(s)),this.fg(d.J,c)},o.tt=function(s,n,l,c,d){var f=new o;f.Yi(),f.bj(c),f.MJ();var m=new h.l;s.A(m),c=n.D();var b=!1;if(h.ud.Rw(c,m,l)&&(f.Vz(s),b=!0),!b){m=null;var x=b=!1;(f.ea[0]||f.ea[6])&&(h.ud.Yz(s,c,l)?(f.ea[0]&&(m=h.pi.gm(s,d),x=!h.ud.kt(m,c,l),b=!0,f.J[0]=x?-1:0),f.J[6]=-1):(f.J[0]=-1,f.J[6]=0)),f.ea[3]&&(m!=null&&m.B()?f.J[3]=-1:(b||(m==null&&(m=h.pi.gm(s,d)),x=!h.ud.kt(m,c,l),b=!0),f.J[3]=x?0:-1)),f.ea[5]&&(m!=null&&m.B()?f.J[5]=-1:b&&!x?f.J[5]=0:(m==null&&(m=h.pi.gm(s,d)),d=h.ud.Nw(m,n,l),f.J[5]=d?-1:0)),f.ea[2]&&(s.Qb()!=0?f.J[2]=1:((d=new h.de(s.description)).Fd(s,0,s.I()),s=h.ud.Nw(d,n,l),f.J[2]=s?-1:0))}return this.fg(f.J,f.Xc)},o.lt=function(s,n,l,c){var d=new o;d.Yi(),d.bj(c),d.RJ();var f=new h.l;s.A(f),n=n.D();var m=!1;if(h.ud.Rw(n,f,l)&&(d.yI(),m=!0),!m){f=!1,m=!0,l*=l;for(var b=0;b<s.I();b++){var x=s.Na(b);if(h.h.yc(x,n)<=l?f=!0:m=!1,f&&!m)break}f?(d.J[0]=0,d.J[2]=m?-1:0,d.J[6]=-1):(d.J[0]=-1,d.J[2]=0,d.J[6]=0)}return o.fg(d.J,c)},o.$U=function(s,n,l,c){s=s.D(),n=n.D();for(var d=[],f=0;9>f;f++)d[f]=-1;return h.h.yc(s,n)<=l*l?d[0]=0:(d[2]=0,d[6]=0),d[8]=2,o.fg(d,c)},o.fg=function(s,n){for(var l=0;9>l;l++)switch(n.charAt(l)){case"T":if(s[l]==-1)return!1;break;case"F":if(s[l]!=-1)return!1;break;case"0":if(s[l]!=0)return!1;break;case"1":if(s[l]!=1)return!1;break;case"2":if(s[l]!=2)return!1}return!0},o.uW=function(s,n,l){var c=[-1,-1,-1,-1,-1,-1,-1,-1,-1];if(s.B()&&n.B()){for(var d=0;9>d;d++)c[d]=-1;return this.fg(c,l)}return d=!1,s.B()&&(s=n,d=!0),c[0]=-1,c[1]=-1,c[3]=-1,c[4]=-1,c[6]=-1,c[7]=-1,c[8]=2,n=s.getType(),h.aa.Hc(n)?n==1736?s.Ke()!=0?(c[2]=2,c[5]=1):(c[5]=-1,n=new h.l,s.A(n),c[2]=n.ca()==0&&n.R()==0?0:1):(n=s.Qb()!=0,c[2]=n?1:0,c[5]=h.pi.aq(s)?0:-1):(c[2]=0,c[5]=-1),d&&this.vK(c),this.fg(c,l)},o.MR=function(s,n,l){return o.dQ(s)?3:o.UP(s)?4:o.cY(s,n,l)?8:o.CP(s,n,l)?16:o.eP(s)?1:o.EU(s,n,l)?32:0},o.dQ=function(s){return s.charAt(0)=="T"&&s.charAt(1)=="*"&&s.charAt(2)=="F"&&s.charAt(3)=="*"&&s.charAt(4)=="*"&&s.charAt(5)=="F"&&s.charAt(6)=="F"&&s.charAt(7)=="F"&&s.charAt(8)=="*"},o.UP=function(s){return s.charAt(0)=="F"&&s.charAt(1)=="F"&&s.charAt(2)=="*"&&s.charAt(3)=="F"&&s.charAt(4)=="F"&&s.charAt(5)=="*"&&s.charAt(6)=="*"&&s.charAt(7)=="*"&&s.charAt(8)=="*"},o.cY=function(s,n,l){return(n!=0||l!=0)&&((n!=2||l!=2)&&(s.charAt(0)=="F"&&s.charAt(1)=="*"&&s.charAt(2)=="*"&&s.charAt(3)=="T"&&s.charAt(4)=="*"&&s.charAt(5)=="*"&&s.charAt(6)=="*"&&s.charAt(7)=="*"&&s.charAt(8)=="*"||n==1&&l==1&&s.charAt(0)=="F"&&s.charAt(1)=="T"&&s.charAt(2)=="*"&&s.charAt(3)=="*"&&s.charAt(4)=="*"&&s.charAt(5)=="*"&&s.charAt(6)=="*"&&s.charAt(7)=="*"&&s.charAt(8)=="*")||l!=0&&s.charAt(0)=="F"&&s.charAt(1)=="*"&&s.charAt(2)=="*"&&s.charAt(3)=="*"&&s.charAt(4)=="T"&&s.charAt(5)=="*"&&s.charAt(6)=="*"&&s.charAt(7)=="*"&&s.charAt(8)=="*")},o.CP=function(s,n,l){return n>l?s.charAt(0)=="T"&&s.charAt(1)=="*"&&s.charAt(2)=="*"&&s.charAt(3)=="*"&&s.charAt(4)=="*"&&s.charAt(5)=="*"&&s.charAt(6)=="T"&&s.charAt(7)=="*"&&s.charAt(8)=="*":n==1&&l==1&&s.charAt(0)=="0"&&s.charAt(1)=="*"&&s.charAt(2)=="*"&&s.charAt(3)=="*"&&s.charAt(4)=="*"&&s.charAt(5)=="*"&&s.charAt(6)=="*"&&s.charAt(7)=="*"&&s.charAt(8)=="*"},o.eP=function(s){return s.charAt(0)=="T"&&s.charAt(1)=="*"&&s.charAt(2)=="*"&&s.charAt(3)=="*"&&s.charAt(4)=="*"&&s.charAt(5)=="*"&&s.charAt(6)=="F"&&s.charAt(7)=="F"&&s.charAt(8)=="*"},o.EU=function(s,n,l){if(n==l){if(n!=1)return s.charAt(0)=="T"&&s.charAt(1)=="*"&&s.charAt(2)=="T"&&s.charAt(3)=="*"&&s.charAt(4)=="*"&&s.charAt(5)=="*"&&s.charAt(6)=="T"&&s.charAt(7)=="*"&&s.charAt(8)=="*";if(s.charAt(0)=="1"&&s.charAt(1)=="*"&&s.charAt(2)=="T"&&s.charAt(3)=="*"&&s.charAt(4)=="*"&&s.charAt(5)=="*"&&s.charAt(6)=="T"&&s.charAt(7)=="*"&&s.charAt(8)=="*")return!0}return!1},o.Jw=function(s,n,l){s=n.La(s);for(var c=n.Re;c!=-1;c=n.Rf(c))if(n.xd(c)&s){var d=n.Me(c);if(d==-1)n.nn(c,l,0);else{var f=d,m=0;do n.dh(f)&s&&m++,f=n.jc(n.xa(f));while(f!=d);n.nn(c,l,m)}}},o.Zp=function(s){var n=""+s.charAt(0);return n+=s.charAt(3),n+=s.charAt(6),n+=s.charAt(1),n+=s.charAt(4),n+=s.charAt(7),n+=s.charAt(2),(n+=s.charAt(5))+s.charAt(8)},o.prototype.Yi=function(){for(var s=0;9>s;s++)this.J[s]=-2,this.Za[s]=-2},o.vK=function(s){var n=s[1],l=s[2],c=s[5];s[1]=s[3],s[2]=s[6],s[5]=s[7],s[3]=n,s[6]=l,s[7]=c},o.prototype.bj=function(s){for(this.Xc=s,s=0;9>s;s++)this.Xc.charAt(s)!="*"?(this.ea[s]=!0,this.le++):this.ea[s]=!1},o.prototype.UJ=function(){for(var s=0;9>s;s++)this.ea[s]&&this.J[s]==-2&&(this.J[s]=-1,this.ea[s]=!1)},o.prototype.pc=function(s){return this.J[s]!=-2&&(this.J[s]==-1?(this.ea[s]=!1,this.le--,!0):this.Xc.charAt(s)!="T"&&this.Xc.charAt(s)!="F"?!(this.J[s]<this.Za[s])&&(this.ea[s]=!1,this.le--,!0):(this.ea[s]=!1,this.le--,!0))},o.prototype.xJ=function(){this.vw=0,this.Za[0]=2,this.Za[1]=1,this.Za[2]=2,this.Za[3]=1,this.Za[4]=1,this.Za[5]=1,this.Za[6]=2,this.Za[7]=1,this.Za[8]=2,this.ea[8]&&(this.J[8]=2,this.ea[8]=!1,this.le--)},o.prototype.IB=function(){this.vw=1,this.Sm=3,this.Za[0]=1,this.Za[1]=0,this.Za[2]=2,this.Za[3]=1,this.Za[4]=0,this.Za[5]=1,this.Za[6]=1,this.Za[7]=0,this.Za[8]=2,this.ea[8]&&(this.J[8]=2,this.ea[8]=!1,this.le--)},o.prototype.eX=function(){this.vw=2,this.Sm=4,this.Za[0]=1,this.Za[1]=0,this.Za[2]=1,this.Za[3]=0,this.Za[4]=0,this.Za[5]=0,this.Za[6]=1,this.Za[7]=0,this.Za[8]=2,this.ea[8]&&(this.J[8]=2,this.ea[8]=!1,this.le--)},o.prototype.yJ=function(){this.Sm=3,this.Za[0]=0,this.Za[1]=-1,this.Za[2]=2,this.Za[3]=0,this.Za[4]=-1,this.Za[5]=1,this.Za[6]=0,this.Za[7]=-1,this.Za[8]=2,this.ea[1]&&(this.J[1]=-1,this.ea[1]=!1,this.le--),this.ea[4]&&(this.J[4]=-1,this.ea[4]=!1,this.le--),this.ea[7]&&(this.J[7]=-1,this.ea[7]=!1,this.le--),this.ea[8]&&(this.J[8]=2,this.ea[8]=!1,this.le--)},o.prototype.MJ=function(){this.Sm=4,this.Za[0]=0,this.Za[1]=-1,this.Za[2]=1,this.Za[3]=0,this.Za[4]=-1,this.Za[5]=0,this.Za[6]=0,this.Za[7]=-1,this.Za[8]=2,this.ea[1]&&(this.J[1]=-1,this.ea[1]=!1,this.le--),this.ea[4]&&(this.J[4]=-1,this.ea[4]=!1,this.le--),this.ea[7]&&(this.J[7]=-1,this.ea[7]=!1,this.le--),this.ea[8]&&(this.J[8]=2,this.ea[8]=!1,this.le--)},o.prototype.RJ=function(){this.Sm=5,this.Za[0]=0,this.Za[1]=-1,this.Za[2]=0,this.Za[3]=-1,this.Za[4]=-1,this.Za[5]=-1,this.Za[6]=0,this.Za[7]=-1,this.Za[8]=2,this.ea[1]&&(this.J[1]=-1,this.ea[1]=!1,this.le--),this.ea[3]&&(this.J[3]=-1,this.ea[3]=!1,this.le--),this.ea[4]&&(this.J[4]=-1,this.ea[4]=!1,this.le--),this.ea[5]&&(this.J[5]=-1,this.ea[5]=!1,this.le--),this.ea[7]&&(this.J[7]=-1,this.ea[7]=!1,this.le--),this.ea[8]&&(this.J[8]=2,this.ea[8]=!1,this.le--)},o.prototype.xN=function(s,n,l){var c=!0;return this.ea[0]&&(this.CS(s,n,l),c=c&&this.pc(0)),this.ea[1]&&(this.sG(s,n,1),c=c&&this.pc(1)),this.ea[2]&&(this.tG(s,n,l,2),c=c&&this.pc(2)),this.ea[3]&&(this.sG(s,l,3),c=c&&this.pc(3)),this.ea[4]&&(this.BN(s,n,l),c=c&&this.pc(4)),this.ea[5]&&(this.eE(s,l,5),c=c&&this.pc(5)),this.ea[6]&&(this.tG(s,l,n,6),c=c&&this.pc(6)),this.ea[7]&&(this.eE(s,n,7),c=c&&this.pc(7)),c},o.prototype.Cu=function(s,n){this.J[0]=-1,this.J[1]=-1,this.J[3]=-1,this.J[4]=-1,this.Fr(s,this.ea[2]?2:-1,this.Xc.charAt(2),this.ea[5]?5:-1,this.Xc.charAt(5)),this.Fr(n,this.ea[6]?6:-1,this.Xc.charAt(6),this.ea[7]?7:-1,this.Xc.charAt(7))},o.prototype.Fr=function(s,n,l,c,d){n==-1&&c==-1||((l!="T"&&l!="F"&&n!=-1||d!="T"&&d!="F"&&c!=-1)&&s.Ke()==0?(c!=-1&&(this.J[c]=-1),n!=-1&&(l=new h.l,s.A(l),this.J[n]=l.ca()==0&&l.R()==0?0:1)):(n!=-1&&(this.J[n]=2),c!=-1&&(this.J[c]=1)))},o.prototype.ly=function(s){this.J[2]=2,this.J[3]=-1,this.J[4]=-1,this.J[5]=1,this.J[6]=-1,this.J[7]=-1,this.Fr(s,this.ea[0]?0:-1,this.Xc.charAt(0),this.ea[1]?1:-1,this.Xc.charAt(1))},o.prototype.ZD=function(s){this.ly(s),o.vK(this.J)},o.prototype.Du=function(s,n){if(this.J[0]=-1,this.J[1]=-1,this.J[3]=-1,this.J[4]=-1,this.ea[6]){var l=this.Xc.charAt(6);l=l=="T"||l=="F"||n.Qb()!=0,this.J[6]=l?1:0}this.ea[7]&&(n=h.pi.aq(n),this.J[7]=n?0:-1),this.Fr(s,this.ea[2]?2:-1,this.Xc.charAt(2),this.ea[5]?5:-1,this.Xc.charAt(5))},o.prototype.$D=function(s){if(this.ea[0]){var n=this.Xc.charAt(0);n=n=="T"||n=="F"||s.Qb()!=0,this.J[0]=n?1:0}this.ea[1]&&(s=h.pi.aq(s),this.J[1]=s?0:-1),this.J[2]=2,this.J[3]=-1,this.J[4]=-1,this.J[5]=1,this.J[6]=-1,this.J[7]=-1},o.prototype.Eu=function(s){this.J[0]=-1,this.J[3]=-1,this.J[6]=0,this.Fr(s,this.ea[2]?2:-1,this.Xc.charAt(2),this.ea[5]?5:-1,this.Xc.charAt(5))},o.prototype.zN=function(){this.J[0]=0,this.J[2]=2,this.J[3]=-1,this.J[5]=1,this.J[6]=-1},o.prototype.PG=function(s,n){if(this.J[0]=-1,this.J[1]=-1,this.J[3]=-1,this.J[4]=-1,this.ea[2]){var l=this.Xc.charAt(2);l=l=="T"||l=="F"||s.Qb()!=0,this.J[2]=l?1:0}this.ea[5]&&(s=h.pi.aq(s),this.J[5]=s?0:-1),this.ea[6]&&(l=(l=this.Xc.charAt(6))=="T"||l=="F"||n.Qb()!=0,this.J[6]=l?1:0),this.ea[7]&&(n=h.pi.aq(n),this.J[7]=n?0:-1)},o.prototype.Vz=function(s){if(this.J[0]=-1,this.J[3]=-1,this.ea[2]){var n=this.Xc.charAt(2);n=n=="T"||n=="F"||s.Qb()!=0,this.J[2]=n?1:0}this.ea[5]&&(s=h.pi.aq(s),this.J[5]=s?0:-1),this.J[6]=0},o.prototype.yI=function(){this.J[0]=-1,this.J[2]=0,this.J[6]=0},o.prototype.yN=function(s,n,l){var c=!0;return this.ea[0]&&(this.DS(s,n),c=c&&this.pc(0)),this.ea[1]&&(this.zS(s,n,l,this.kh),c=c&&this.pc(1)),this.ea[2]&&(this.AS(s,n),c=c&&this.pc(2)),this.ea[3]&&(this.FN(s,n,l,this.kh),c=c&&this.pc(3)),this.ea[4]&&(this.CN(s,n,l,this.kh),c=c&&this.pc(4)),this.ea[5]&&(this.DN(s,n,l),c=c&&this.pc(5)),this.ea[6]&&(this.lQ(s,n),c=c&&this.pc(6)),this.ea[7]&&(this.kQ(s,n,l,this.kh),c=c&&this.pc(7)),c},o.prototype.mT=function(s,n,l){var c=!0;return this.ea[0]&&(this.GS(s,n,l,this.Yh,this.kh),c=c&&this.pc(0)),this.ea[1]&&(this.uG(s,n,l,this.Yh,this.kh,1),c=c&&this.pc(1)),this.ea[2]&&(this.vG(s,n,l,2),c=c&&this.pc(2)),this.ea[3]&&(this.uG(s,l,n,this.kh,this.Yh,3),c=c&&this.pc(3)),this.ea[4]&&(this.HN(s,n,l,this.Yh,this.kh),c=c&&this.pc(4)),this.ea[5]&&(this.fE(s,l,this.Yh,5),c=c&&this.pc(5)),this.ea[6]&&(this.vG(s,l,n,6),c=c&&this.pc(6)),this.ea[7]&&(this.fE(s,n,this.kh,7),c=c&&this.pc(7)),c},o.prototype.aE=function(s,n,l){var c=!0;return this.ea[0]&&(this.ES(s,n),c=c&&this.pc(0)),this.ea[2]&&(this.BS(s,n),c=c&&this.pc(2)),this.ea[3]&&(this.GN(s,n,l),c=c&&this.pc(3)),this.ea[5]&&(this.EN(s,n),c=c&&this.pc(5)),this.ea[6]&&(this.mQ(s,n),c=c&&this.pc(6)),c},o.prototype.QG=function(s,n,l){var c=!0;return this.ea[0]&&(this.HS(s,n,l,this.Yh),c=c&&this.pc(0)),this.ea[2]&&(this.FS(s,l),c=c&&this.pc(2)),this.ea[3]&&(this.JN(s,n,l,this.Yh),c=c&&this.pc(3)),this.ea[5]&&(this.IN(s,n,l,this.Yh),c=c&&this.pc(5)),this.ea[6]&&(this.nQ(s,n,l),c=c&&this.pc(6)),c},o.prototype.ZU=function(s,n,l){var c=!0;return this.ea[0]&&(this.IS(s,n,l),c=c&&this.pc(0)),this.ea[2]&&(this.wG(s,n,l,2),c=c&&this.pc(2)),this.ea[6]&&(this.wG(s,l,n,6),c=c&&this.pc(6)),c},o.prototype.CS=function(s,n,l){this.J[0]!=2&&(s=this.j.af(s))&n&&s&l&&(this.J[0]=2)},o.prototype.sG=function(s,n,l){if(this.J[l]!=1){var c=this.j.af(this.j.xa(s));this.j.af(s)&n&&c&n&&(this.J[l]=1)}},o.prototype.tG=function(s,n,l,c){this.J[c]!=2&&(s=this.j.af(s))&n&&!(s&l)&&(this.J[c]=2)},o.prototype.BN=function(s,n,l){if(this.J[4]!=1){var c=this.j.dh(s);c&n&&c&l?this.J[4]=1:this.J[4]!=0&&this.j.Ab(this.j.te(this.j.xa(s)),this.Ui)!=1&&(s=this.j.xd(this.j.uf(s)))&n&&s&l&&(this.J[4]=0)}},o.prototype.eE=function(s,n,l){if(this.J[l]!=1){var c=this.j.af(this.j.xa(s));!(this.j.af(s)&n)&&!(c&n)&&(this.J[l]=1)}},o.prototype.DS=function(s,n){if(this.J[0]!=1){var l=this.j.af(this.j.xa(s));this.j.af(s)&n&&l&n&&(this.J[0]=1)}},o.prototype.zS=function(s,n,l,c){if(this.J[1]!=0&&this.j.Ab(this.j.te(this.j.xa(s)),this.Ui)!=1){var d=this.j.uf(s),f=this.j.xd(d);!(f&n)&&this.j.af(s)&n&&(s=this.j.ng(d,c),f&l&&s%2!=0&&(this.J[1]=0))}},o.prototype.AS=function(s,n){this.J[2]!=2&&this.j.dh(s)&n&&(this.J[2]=2)},o.prototype.FN=function(s,n,l,c){if(this.J[3]!=1){var d=this.j.dh(s);d&n&&d&l?this.J[3]=1:this.J[3]!=0&&this.j.Ab(this.j.te(this.j.xa(s)),this.Ui)!=1&&(d=this.j.uf(s),(s=this.j.xd(d))&n&&(n=this.j.ng(d,c),s&l&&n%2==0&&(this.J[3]=0)))}},o.prototype.CN=function(s,n,l,c){if(this.J[4]!=0&&this.j.Ab(this.j.te(this.j.xa(s)),this.Ui)!=1){var d=this.j.uf(s);(s=this.j.xd(d))&n&&(n=this.j.ng(d,c),s&l&&n%2!=0&&(this.J[4]=0))}},o.prototype.DN=function(s,n,l){this.J[5]!=1&&(s=this.j.dh(s))&n&&!(s&l)&&(this.J[5]=1)},o.prototype.lQ=function(s,n){if(this.J[6]!=1){var l=this.j.af(this.j.xa(s));!(this.j.af(s)&n)&&!(l&n)&&(this.J[6]=1)}},o.prototype.kQ=function(s,n,l,c){if(this.J[7]!=0&&this.j.Ab(this.j.te(this.j.xa(s)),this.Ui)!=1){var d=this.j.uf(s),f=this.j.xd(d);!(f&n)&&!(this.j.af(s)&n)&&(s=this.j.ng(d,c),f&l&&s%2!=0&&(this.J[7]=0))}},o.prototype.GS=function(s,n,l,c,d){if(this.J[0]!=1){var f=this.j.dh(s);f&n&&f&l?this.J[0]=1:this.J[0]!=0&&this.j.Ab(this.j.te(this.j.xa(s)),this.Ui)!=1&&(s=this.j.uf(s),(f=this.j.xd(s))&n&&f&l&&(n=this.j.ng(s,c),d=this.j.ng(s,d),n%2==0&&d%2==0&&(this.J[0]=0)))}},o.prototype.uG=function(s,n,l,c,d,f){if(this.J[f]!=0&&this.j.Ab(this.j.te(this.j.xa(s)),this.Ui)!=1){s=this.j.uf(s);var m=this.j.xd(s);m&n&&m&l&&(n=this.j.ng(s,c),d=this.j.ng(s,d),n%2==0&&d%2!=0&&(this.J[f]=0))}},o.prototype.vG=function(s,n,l,c){this.J[c]!=1&&(s=this.j.dh(s))&n&&!(s&l)&&(this.J[c]=1)},o.prototype.HN=function(s,n,l,c,d){if(this.J[4]!=0&&this.j.Ab(this.j.te(this.j.xa(s)),this.Ui)!=1){s=this.j.uf(s);var f=this.j.xd(s);f&n&&f&l&&(n=this.j.ng(s,c),d=this.j.ng(s,d),n%2!=0&&d%2!=0&&(this.J[4]=0))}},o.prototype.fE=function(s,n,l,c){this.J[c]!=0&&this.j.Ab(this.j.te(this.j.xa(s)),this.Ui)!=1&&(s=this.j.uf(s),!(this.j.xd(s)&n)&&this.j.ng(s,l)%2!=0&&(this.J[c]=0))},o.prototype.ES=function(s,n){this.J[0]!=0&&!(this.j.xd(s)&n)&&this.j.hk(this.j.cz(s))&n&&(this.J[0]=0)},o.prototype.BS=function(s,n){this.J[2]!=2&&this.j.xd(s)&n&&(this.J[2]=2)},o.prototype.GN=function(s,n,l){this.J[3]!=0&&(s=this.j.xd(s))&n&&s&l&&(this.J[3]=0)},o.prototype.EN=function(s,n){this.J[5]!=1&&this.j.xd(s)&n&&(this.J[5]=1)},o.prototype.mQ=function(s,n){this.J[6]!=0&&!(this.j.xd(s)&n)&&!(this.j.hk(this.j.cz(s))&n)&&(this.J[6]=0)},o.prototype.HS=function(s,n,l,c){if(this.J[0]!=0){var d=this.j.xd(s);d&n&&d&l&&this.j.ng(s,c)%2==0&&(this.J[0]=0)}},o.prototype.FS=function(s,n){this.J[2]!=1&&(this.j.Me(s)!=-1?this.J[2]=1:this.J[2]!=0&&!(this.j.xd(s)&n)&&(this.J[2]=0))},o.prototype.JN=function(s,n,l,c){if(this.J[3]!=0){var d=this.j.xd(s);d&n&&d&l&&this.j.ng(s,c)%2!=0&&(this.J[3]=0)}},o.prototype.IN=function(s,n,l,c){if(this.J[5]!=0){var d=this.j.xd(s);d&n&&!(d&l)&&this.j.ng(s,c)%2!=0&&(this.J[5]=0)}},o.prototype.nQ=function(s,n,l){this.J[6]!=0&&!((s=this.j.xd(s))&n)&&s&l&&(this.J[6]=0)},o.prototype.IS=function(s,n,l){this.J[0]!=0&&(s=this.j.xd(s))&n&&s&l&&(this.J[0]=0)},o.prototype.wG=function(s,n,l,c){this.J[c]!=0&&(s=this.j.xd(s))&n&&!(s&l)&&(this.J[c]=0)},o.prototype.Bp=function(s,n){var l=!1;s=this.j.La(s),n=this.j.La(n),this.Ui=this.j.$g();for(var c=this.j.Re;c!=-1;c=this.j.Rf(c)){var d=this.j.Me(c);if(d==-1){if(this.Sm!=-1)switch(this.Sm){case 3:l=this.aE(c,s,n);break;case 4:l=this.QG(c,s,n);break;default:throw h.i.fa("internal error")}}else{var f=d;do{var m=f;if(this.j.Ab(m,this.Ui)!=1)do{switch(this.vw){case 0:l=this.xN(m,s,n);break;case 1:l=this.yN(m,s,n);break;case 2:l=this.mT(m,s,n);break;default:throw h.i.fa("internal error")}if(l)break;this.j.Kb(m,this.Ui,1),m=this.j.jc(m)}while(m!=f&&!l);if(l)break;f=this.j.jc(this.j.xa(m))}while(f!=d);if(l)break}}l||this.UJ(),this.j.Jg(this.Ui)},o.prototype.Gy=function(s,n){var l=!1;s=this.j.La(s),n=this.j.La(n);for(var c=this.j.Re;c!=-1;c=this.j.Rf(c)){switch(this.Sm){case 3:l=this.aE(c,s,n);break;case 4:l=this.QG(c,s,n);break;case 5:l=this.ZU(c,s,n);break;default:throw h.i.Qa()}if(l)break}l||this.UJ()},o.prototype.er=function(s,n){this.j.dr(s,n)},o.prototype.Wo=function(s,n,l){this.YP(s,n,l),this.er(s,l)},o.prototype.YP=function(s,n,l){for(h.Tk.V(s,n,l,!1),s.Gp(0,!0,!0),n=s.ld;n!=-1;n=s.ue(n))s.ic(n)==1736&&h.rn.V(s,n,-1,!1,l)},o.WE=function(s,n){var l=s.getType();return h.aa.yd(l)?((n=new h.Ta(s.description)).oc(s,!0),n):l==197?(l=new h.l,s.A(l),l.ca()<=n&&l.R()<=n?(n=new h.Sa(s.description),s.sf(n),n):l.ca()<=n||l.R()<=n?(n=new h.Ta(s.description),l=new h.Sa,s.Hf(0,l),n.nf(l),s.Hf(2,l),n.lineTo(l),n):((n=new h.Da(s.description)).ad(s,!1),n)):s},o}(),h.am=C}(G||(G={})),function(h){var C=function(){function o(s){this.Em=new h.ia(0),this.dw=new h.ia(0),this.wt=new h.h,this.xt=new h.h,this.g=s,this.Hs=-1}return o.prototype.bc=function(s){return this.g.bc(this.zz(s))},o.prototype.Bv=function(s){var n=this.iz(s);if(s=this.HF(s),this.g.Ma(n)==s){var l=n;n=s,s=l}return this.g.Gc(n,this.wt),this.g.Gc(s,this.xt),this.wt.y<this.xt.y},o.prototype.zz=function(s){var n=this.iz(s);return s=this.HF(s),this.g.U(n)==s?n:s},o.prototype.iz=function(s){return this.Em.get(s)},o.prototype.HF=function(s){return this.dw.get(s)},o.prototype.rF=function(s){this.Em.set(s,this.Hs),this.Hs=s},o.prototype.nI=function(s){if(this.Hs!=-1){var n=this.Hs;return this.Hs=this.Em.get(n),this.Em.set(n,s),this.dw.set(n,this.g.U(s)),n}return this.Em==null&&(this.Em=new h.ia(0),this.dw=new h.ia(0)),n=this.Em.size,this.Em.add(s),this.dw.add(this.g.U(s)),n},o.prototype.rz=function(s){return this.g.bd(this.iz(s))},o}();h.yY=C;var w=function(){function o(s){this.Be=s,this.ie=new h.yb,this.Nm=new h.yb,this.CH=0,this.Ao=null,this.yA=-1}return o.prototype.compare=function(s,n,l){l=s.ja(l);var c=this.Be.hb;if(this.yA==n)var d=this.CH;else this.Ao=c.bc(n),this.Ao==null?((s=c.g).ed(c.zz(n),this.ie),this.Ao=this.ie,d=this.ie.Pe(this.Be.yh,0)):d=this.Ao.Pe(this.Be.yh,0),this.CH=d,this.yA=n;if((s=c.bc(l))==null){(s=c.g).ed(c.zz(l),this.Nm),s=this.Nm;var f=this.Nm.Pe(this.Be.yh,0)}else f=s.Pe(this.Be.yh,0);return d==f&&(n=c.Bv(n),l=c.Bv(l),(n=.5*((l=Math.min(n?this.Ao.la:this.Ao.na,l?s.la:s.na))+this.Be.yh))==this.Be.yh&&(n=l),d=this.Ao.Pe(n,0),f=s.Pe(n,0)),d<f?-1:d>f?1:0},o.prototype.reset=function(){this.yA=-1},o}(),u=function(){function o(){this.Wm=this.Gl=null,this.fb=new h.Yj,this.fb.RP(),this.$d=new w(this),this.fb.Vo(this.$d)}return o.prototype.HQ=function(){var s=!1;if(this.fw&&(s=this.IQ()),this.g.da(this.X)==1){var n=this.g.Ob(this.X);return s=this.g.wz(n),this.g.PB(n,!0),0>s&&(s=this.g.Xa(n),this.g.pJ(s),this.g.Wg(n,this.g.Ma(s)),!0)}for(this.El=this.g.Ky(),this.wo=this.g.Ky(),n=this.g.Ob(this.X);n!=-1;n=this.g.Rb(n))this.g.gr(n,this.El,0),this.g.gr(n,this.wo,-1);n=new h.ia(0),this.yh=NaN;var l=new h.h;this.et=this.g.da(this.X),this.ro=this.g.Gd(),this.Rs=this.g.Gd();for(var c=this.Gl.rc(this.Gl.je);c!=-1;c=this.Gl.lb(c)){var d=this.Gl.getData(c);if(this.g.Gc(d,l),l.y!=this.yh&&n.size!=0&&(s=this.ut(n)||s,this.$d.reset(),n.clear(!1)),n.add(d),this.yh=l.y,this.et==0)break}for(0<this.et&&(s=this.ut(n)||s,n.clear(!1)),this.g.Td(this.ro),this.g.Td(this.Rs),n=this.g.Ob(this.X);n!=-1;)if(this.g.sj(n,this.El)==3){for(this.g.PB(n,!0),l=n,n=this.g.sj(n,this.wo);n!=-1;)c=this.g.sj(n,this.wo),this.g.ZT(this.X,this.g.Rb(l),n),l=n,n=c;n=this.g.Rb(l)}else this.g.PB(n,!1),n=this.g.Rb(n);return this.g.CB(this.El),this.g.CB(this.wo),s},o.prototype.ut=function(s){return this.$V(s)},o.prototype.$V=function(s){var n=!1;this.hb==null&&(this.hb=new C(this.g)),this.Wm==null?(this.Wm=new h.ia(0),this.Wm.Jb(16)):this.Wm.clear(!1),this.ZV(s);for(var l=0,c=s.size;l<c;l++){var d=s.get(l);d!=-1&&this.oG(d,-1)}for(l=0;l<this.Wm.size&&0<this.et;l++)if(s=this.Wm.get(l),d=this.hb.rz(this.fb.ja(s)),c=-1,this.g.sj(d,this.El)==0){d=this.fb.we(s);for(var f,m=s;d!=-1;){var b=this.fb.ja(d),x=this.hb.rz(b),$=this.g.sj(x,this.El);if($!=0){c=x;break}m=d,d=this.fb.we(d)}d==-1?(f=!0,d=m):(b=this.fb.ja(d),f=this.hb.Bv(b),d=this.fb.lb(d),f=!f);do{if(b=this.fb.ja(d),x=this.hb.rz(b),($=this.g.sj(x,this.El))==0&&(f!=this.hb.Bv(b)&&(n=this.g.Xa(x),this.g.pJ(n),this.g.Wg(x,this.g.Ma(n)),n=!0),this.g.gr(x,this.El,f?3:2),f||(m=this.g.sj(c,this.wo),this.g.gr(c,this.wo,x),this.g.gr(x,this.wo,m)),this.et--,this.et==0))return n;c=x,m=d,d=this.fb.lb(d),f=!f}while(m!=s)}return n},o.prototype.ZV=function(s){for(var n=0,l=s.size;n<l;n++){var c=s.get(n),d=this.g.Pa(c,this.ro),f=this.g.Pa(c,this.Rs);if(d!=-1){var m=this.fb.ja(d);this.hb.rF(m),this.g.Ra(c,this.ro,-1)}f!=-1&&(m=this.fb.ja(f),this.hb.rF(m),this.g.Ra(c,this.Rs,-1)),m=-1,d!=-1&&f!=-1?(this.fb.vd(d,-1),this.fb.vd(f,-1),s.set(n,-1)):m=d!=-1?d:f,m!=-1&&(this.oG(c,m)||this.fb.vd(m,-1),s.set(n,-1))}},o.prototype.oG=function(s,n){var l=new h.h,c=new h.h;this.g.Gc(s,l);var d=this.g.U(s);this.g.Gc(d,c);var f=!1;if(l.y<c.y){f=!0;var m=this.hb.nI(s);if(n==-1)var b=this.fb.addElement(m,-1);else b=n,this.fb.Sj(b,m);(m=this.g.Pa(d,this.ro))==-1?this.g.Ra(d,this.ro,b):this.g.Ra(d,this.Rs,b),d=this.g.bd(s),this.g.sj(d,this.El)==0&&this.Wm.add(b)}return d=this.g.Ma(s),this.g.Gc(d,c),l.y<c.y&&(f=!0,m=this.hb.nI(d),n==-1?b=this.fb.addElement(m,-1):(b=n,this.fb.Sj(b,m)),(m=this.g.Pa(d,this.ro))==-1?this.g.Ra(d,this.ro,b):this.g.Ra(d,this.Rs,b),d=this.g.bd(s),this.g.sj(d,this.El)==0&&this.Wm.add(b)),f},o.V=function(s,n,l,c){var d=new o;return d.g=s,d.X=n,d.Gl=l,d.fw=c,d.HQ()},o.prototype.IQ=function(){var s=new h.ia(0),n=new h.ia(0),l=-1,c=-1,d=new h.h;d.Rc();for(var f=-1,m=-1,b=-1,x=new h.h,$=this.Gl.rc(this.Gl.je);$!=-1;$=this.Gl.lb($)){var E=this.Gl.getData($);this.g.Gc(E,x);var O=this.g.bd(E);d.qb(x)&&m==O?(c==-1&&(l=this.g.Ky(),c=this.g.Gd()),b==-1&&(b=n.size,this.g.Ra(f,c,b),n.add(1),this.g.sj(O,l)==-1&&(this.g.gr(O,l,f),s.add(O))),this.g.Ra(E,c,b),n.bX(n.Fc()+1)):(b=-1,d.L(x)),f=E,m=O}if(s.size==0)return!1;for(d=new h.ia(0),f=new h.ia(0),m=0,b=s.size;m<b;m++){O=s.get(m);var R=this.g.sj(O,l);for(E=this.g.Pa(R,c),d.clear(!1),f.clear(!1),d.add(R),f.add(E),E=this.g.U(R);E!=R;E=this.g.U(E)){var k=E;if((x=this.g.Pa(k,c))!=-1)if(f.size==0)f.add(x),d.add(k);else if(f.Fc()==x){$=d.Fc();var j=this.g.U($);R=this.g.U(k),this.g.Bc($,R),this.g.Cc(R,$),this.g.Bc(k,j),this.g.Cc(j,k),k=[!1],j=this.g.nG(this.X,j,this.g.Xa(O),k),this.g.Ra(E,c,-1),k[0]&&this.g.Jf(O,R),E=this.g.Ja(O),E-=R=this.g.Ja(j),this.g.Vj(O,E),n.set(x,n.get(x)-1),n.get(x)==1&&(n.set(x,0),f.If(),d.If()),E=R=$}else d.add(E),f.add(x)}}return this.g.CB(l),this.g.Td(c),!0},o}();h.WL=u}(G||(G={})),function(h){var C=function(){function w(){}return w.prototype.ig=function(){this.PA=this.sb=null},w.prototype.get=function(){return this.PA},w.prototype.set=function(u){if(this.PA=u,u!=null)throw u.getType()==322&&(this.sb=u),h.i.Qa()},w.prototype.create=function(u){if(u!=322)throw h.i.fa("Not Implemented");this.Or()},w.prototype.Or=function(){this.sb==null&&(this.sb=new h.yb),this.PA=this.sb},w}();h.ig=C}(G||(G={})),function(h){(h=h.XL||(h.XL={}))[h.enumLineSeg=1]="enumLineSeg",h[h.enumBezierSeg=2]="enumBezierSeg",h[h.enumArcSeg=4]="enumArcSeg",h[h.enumNonlinearSegmentMask=6]="enumNonlinearSegmentMask",h[h.enumSegmentMask=7]="enumSegmentMask",h[h.enumDensified=8]="enumDensified"}(G||(G={})),function(h){var C=function(u){this.$i=u,this.qC=this.rC=1,this.sB=this.rB=this.tB=0},w=function(){function u(){this.Fq=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],this.Bk=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],this.Bf=new h.Sa,this.qa=this.Cw=0,this.mo=[],this.$s=[],this.yw=[],this.Iq=[],this.MA=[]}return u.prototype.wB=function(o){if(o!=null){for(var s=0,n=o.length;s<n;s++)this.rW(o[s]);o.length=0}},u.prototype.rW=function(o){o.$i=null,this.Iq.push(o)},u.prototype.Ow=function(o){if(this.Iq.length===0)var s=new C(o);else(s=this.Iq[this.Iq.length-1]).$i=o,--this.Iq.length;return s},u.prototype.SR=function(o,s){return o==0?this.$s[s]:this.yw[s]},u.prototype.aB=function(){this.Cw>=this.MA.length&&this.MA.push(new h.ig);var o=this.MA[this.Cw];return this.Cw++,o},u.prototype.clear=function(){this.wB(this.mo),this.wB(this.$s),this.wB(this.yw),this.Cw=0},u.prototype.Oo=function(o){this.mo.push(this.Ow(o))},u.prototype.ol=function(o){return o==0?this.$s.length:this.yw.length},u.prototype.Vp=function(o,s){return this.SR(o,s).$i},u.prototype.Ea=function(o,s){if(this.mo.length!=2)throw h.i.Qa();this.qa=o;var n=h.lc.ox(.01*o),l=!1,c=this.mo[0],d=this.mo[1];if(s||5&c.$i.zr(d.$i,o,!0)){if(c.$i.getType()==322){var f=c.$i;if(d.$i.getType()==322){s=d.$i;var m=h.yb.Zx(f,s,null,this.Fq,this.Bk,o);if(m==0)throw h.yb.Zx(f,s,null,this.Fq,this.Bk,o),h.i.Qa();o=Array(9),h.O.$u(o,null);for(var b=0;b<m;b++){var x=this.Fq[b],$=this.Bk[b],E=c.sB,O=1;x==0?(E=c.tB,O=c.rC):x==1&&(E=c.rB,O=c.qC);var R=d.sB,k=1;$==0?(R=d.tB,k=d.rC):$==1&&(R=d.rB,k=d.qC);var j=new h.h;E==R?(E=new h.h,f.hc(x,E),x=new h.h,s.hc($,x),k/=$=O+k,h.lc.OG(E,x,k,j),h.h.yc(j,E)+h.h.yc(j,x)>n&&(l=!0)):E>R?(f.hc(x,j),x=new h.h,s.hc($,x),h.h.yc(j,x)>n&&(l=!0)):(s.hc($,j),E=new h.h,f.hc(x,E),h.h.yc(j,E)>n&&(l=!0)),o[b]=j}for(c=0,d=-1,b=0;b<=m;b++)(k=b<m?this.Fq[b]:1)!=c&&(n=this.aB(),f.ah(c,k,n),d!=-1&&n.get().Dc(o[d]),b!=m&&n.get().Qc(o[b]),c=k,this.$s.push(this.Ow(n.get()))),d=b;for(f=[0,0,0,0,0,0,0,0,0],b=0;b<m;b++)f[b]=b;for(1<m&&this.Bk[0]>this.Bk[1]&&(k=this.Bk[0],this.Bk[0]=this.Bk[1],this.Bk[1]=k,b=f[0],f[0]=f[1],f[1]=b),c=0,d=-1,b=0;b<=m;b++)(k=b<m?this.Bk[b]:1)!=c&&(n=this.aB(),s.ah(c,k,n),d!=-1&&(c=f[d],n.get().Dc(o[c])),b!=m&&(c=f[b],n.get().Qc(o[c])),c=k,this.yw.push(this.Ow(n.get()))),d=b;return l}}throw h.i.Qa()}return!1},u.prototype.Kz=function(o,s,n){if(s.copyTo(this.Bf),this.mo.length!=1)throw h.i.Qa();this.qa=o;var l=this.mo[0];if(n||l.$i.ru(s.D(),o,!0)){if(l.$i.getType()!=322)throw h.i.Qa();var c=(o=l.$i).fe(s.D(),!1);this.Fq[0]=c;var d=l.sB;for(n=1,c==0?(d=l.tB,n=l.rC):c==1&&(d=l.rB,n=l.qC),l=new h.h,d==0?(d=new h.h,o.hc(c,d),s=s.D(),h.lc.OG(d,s,1/(n+1),l)):0<d?(l=new h.h,o.hc(c,l)):l=s.D(),n=0,c=-1,d=0;1>=d;d++){if((s=1>d?this.Fq[d]:1)!=n){var f=this.aB();o.ah(n,s,f),c!=-1&&f.get().Dc(l),d!=1&&f.get().Qc(l),n=s,this.$s.push(this.Ow(f.get()))}c=d}this.Bf.Cb(l)}},u}();h.TC=w}(G||(G={})),function(h){var C=function(){function w(u){this.Ds=this.rk=this.sb=null,this.ag=0,this.zm=!1,this.zf=-1,this.Cl=this.Jd=0,this.gb=-1,this.ib=u,this.ag=this.Wx(this.Cl),this.zm=!1,this.rk=null,this.Ds=new h.h}return w.prototype.BW=function(u){if(this.ib!=u.ib)throw h.i.Hb();this.zf=u.zf,this.Jd=u.Jd,this.gb=u.gb,this.Cl=u.Cl,this.ag=u.ag,this.zm=u.zm,this.rk=null},w.prototype.ha=function(){if(this.zf!=this.Jd&&this.BD(),this.zm)this.Jd=(this.Jd+1)%this.ag;else{if(this.Jd==this.ag)throw h.i.ce();this.Jd++}return this.rk},w.prototype.li=function(){if(this.zm)this.Jd=(this.ag+this.Jd-1)%this.ag;else{if(this.Jd==0)throw h.i.ce();this.Jd--}return this.Jd!=this.zf&&this.BD(),this.rk},w.prototype.DW=function(){this.zf=-1,this.Jd=0},w.prototype.EW=function(){this.Jd=this.ag,this.zf=-1},w.prototype.Vb=function(u,o){if(o===void 0&&(o=-1),0<=this.gb&&this.gb<this.ib.da()){var s=this.IM();if(u>=s&&u<this.ib.Vc(this.gb))return this.zf=-1,void(this.Jd=u-s)}o=0<=o&&o<this.ib.da()&&u>=this.ib.Ba(o)&&u<this.ib.Vc(o)?o:this.ib.sz(u),this.Cl=o+1,this.gb=o,this.zf=-1,this.Jd=u-this.ib.Ba(o),this.ag=this.Wx(o),this.ib.Ba(this.gb),this.ib.dc(this.gb)},w.prototype.$a=function(){return this.gb=this.Cl,!(this.gb>=this.ib.da())&&(this.zf=-1,this.Jd=0,this.ag=this.Wx(this.gb),this.ib.Ba(this.gb),this.ib.dc(this.gb),this.Cl++,!0)},w.prototype.Zi=function(){this.ag=this.Jd=this.zf=-1,this.Cl=0,this.gb=-1},w.prototype.Wx=function(u){if(this.ib.Ac())return 0;var o=1;return this.ib.dc(u)&&(o=0),this.ib.Ja(u)-o},w.prototype.On=function(){return this.zf==this.ag-1&&this.ib.dc(this.gb)},w.prototype.JB=function(){this.zm=!0},w.prototype.wb=function(){return this.ib.nb.o[this.gb]+this.zf},w.prototype.IM=function(){return this.ib.Ba(this.gb)},w.prototype.ik=function(){return this.On()?this.ib.Ba(this.gb):this.wb()+1},w.prototype.vm=function(){return this.zf==0},w.prototype.Qn=function(){return this.zf==this.ag-1},w.prototype.Ha=function(){return this.Jd<this.ag},w.prototype.Ez=function(){return 0<this.Jd},w.prototype.Of=function(){var u=new w(this.ib);return u.zf=this.zf,u.Jd=this.Jd,u.ag=this.ag,u.gb=this.gb,u.Cl=this.Cl,u.ib=this.ib,u.zm=this.zm,u},w.prototype.BD=function(){if(0>this.Jd||this.Jd>=this.ag)throw h.i.ce();this.zf=this.Jd;var u=this.wb();this.ib.mc();var o=this.ib.Ve,s=1;switch(o!=null&&(s=7&o.read(u)),o=this.ib.description,s){case 1:this.sb==null&&(this.sb=new h.yb),this.rk=this.sb;break;case 2:throw h.i.fa("internal error");default:throw h.i.Qa()}this.rk.Nf(o),s=this.ik(),this.ib.Gc(u,this.Ds),this.rk.Dc(this.Ds),this.ib.Gc(s,this.Ds),this.rk.Qc(this.Ds);for(var n=1,l=o.Aa;n<l;n++)for(var c=o.kd(n),d=h.ra.Va(c),f=0;f<d;f++){var m=this.ib.Uc(c,u,f);this.rk.YB(c,f,m),m=this.ib.Uc(c,s,f),this.rk.OB(c,f,m)}},w.prototype.$S=function(){return this.gb==this.ib.da()-1},w.prototype.Pn=function(){var u=this.ib.VR();return u!=null&&(7&u.read(this.zf))!=1},w}();h.YL=C}(G||(G={})),function(h){var C=function(){function w(u){u instanceof h.aa?(this.xH=u,this.ya=-1,this.Ei=1):(this.vT=u.slice(0),this.ya=-1,this.Ei=u.length)}return w.prototype.La=function(){return this.ya},w.prototype.next=function(){return this.ya<this.Ei-1?(this.ya++,this.xH!=null?this.xH:this.vT[this.ya]):null},w.prototype.qe=function(){},w}();h.Zc=C}(G||(G={})),function(h){var C=function(){this.next=null},w=function(){function u(){this.Tq=this.Kw=this.Lw=0,this.kF=!1,this.gK=0,this.gn=this.Kf=this.Wl=this.Jh=null,this.Ol=0,this.vy=null,this.pl=this.oi=-1}return u.prototype.AX=function(o,s,n){this.oi=o,this.pl=s,this.Jh=this.Wl=null,this.Tq=0,this.vy=n,this.gn==null&&(this.gn=h.O.lg(384,0)),this.nK()},u.prototype.R=function(){return this.oi},u.prototype.ca=function(){return this.pl},u.prototype.flush=function(){0<this.Ol&&(this.vy.gF(this.gn,this.Ol),this.Ol=0)},u.prototype.nK=function(){if(0<this.Tq){for(var o=0;o<this.pl;o++){for(var s=this.Wl[o];s!=null;){var n=s;s=s.next,n.next=null}this.Wl[o]=null}this.Jh=null}this.Lw=this.pl,this.Kw=-1,this.Tq=0},u.prototype.iJ=function(o){for(this.kF=o==u.Cx,o=this.Lw;o<=this.Kw;o++)this.sN(),this.lN(o),this.ZP();this.nK()},u.prototype.jy=function(o,s,n,l){if(s!=l){var c=1;if(s>l&&(c=o,o=n,n=c,c=s,s=l,l=c,c=-1),!(0>l||s>=this.pl)){0>o&&0>n?n=o=-1:o>=this.oi&&n>=this.oi&&(n=o=this.oi);var d=(n-o)/(l-s);l>this.pl&&(n=d*((l=this.pl)-s)+o),0>s&&(o=d*(0-s)+o,s=0);var f=Math.max(this.oi+1,8388607);-8388607>o?(s=(0-o)/d+s,o=0):o>f&&(s=(this.oi-o)/d+s,o=this.oi),-8388607>n?l=(0-o)/d+s:n>f&&(l=(this.oi-o)/d+s),(s=h.O.truncate(s))!=(l=h.O.truncate(l))&&((n=new C).x=h.O.truncate(4294967296*o),n.y=s,n.H=l,n.WP=h.O.truncate(4294967296*d),n.dir=c,this.Wl==null&&(this.Wl=h.O.lg(this.pl,null)),n.next=this.Wl[n.y],this.Wl[n.y]=n,n.y<this.Lw&&(this.Lw=n.y),n.H>this.Kw&&(this.Kw=n.H),this.Tq++)}}},u.prototype.sN=function(){if(this.Jh!=null){for(var o=!1,s=null,n=this.Jh;n!=null;)if(n.y++,n.y==n.H){var l=n;n=n.next,s!=null?s.next=n:this.Jh=n,l.next=null}else n.x+=n.WP,s!=null&&s.x>n.x&&(o=!0),s=n,n=n.next;o&&(this.Jh=this.fK(this.Jh))}},u.prototype.lN=function(o){if(!(o>=this.pl)){var s=this.Wl[o];if(s!=null){this.Wl[o]=null,s=this.fK(s),this.Tq-=this.gK,o=this.Jh;for(var n=!0,l=s,c=null;o!=null&&l!=null;)o.x>l.x?(n&&(this.Jh=l),n=l.next,l.next=o,c!=null&&(c.next=l),c=l,l=n):(n=o.next,o.next=l,c!=null&&(c.next=o),c=o,o=n),n=!1;this.Jh==null&&(this.Jh=s)}}},u.eK=function(o,s){return 0>o?0:o>s?s:o},u.prototype.ZP=function(){if(this.Jh!=null){for(var o=0,s=this.Jh,n=h.O.truncate(h.O.XG(s.x)),l=s.next;l!=null;l=l.next)if(o=this.kF?1^o:o+l.dir,l.x>s.x){var c=h.O.truncate(h.O.XG(l.x));o!=0&&(s=u.eK(n,this.oi),(n=u.eK(c,this.oi))>s&&s<this.oi&&(this.gn[this.Ol++]=s,this.gn[this.Ol++]=n,this.gn[this.Ol++]=l.y,this.Ol==this.gn.length&&(this.vy.gF(this.gn,this.Ol),this.Ol=0))),s=l,n=c}}},u.prototype.fK=function(o){for(var s=0,n=o;n!=null;n=n.next)s++;if(this.gK=s,s==1)return o;this.Kf==null?this.Kf=h.O.lg(Math.max(s,16),null):this.Kf.length<s&&(this.Kf=h.O.lg(Math.max(s,2*this.Kf.length),null));var l=0;for(n=o;n!=null;n=n.next)this.Kf[l++]=n;for(s==2?this.Kf[0].x>this.Kf[1].x&&(o=this.Kf[0],this.Kf[0]=this.Kf[1],this.Kf[1]=o):u.AN(this.Kf,s,function(c,d){return c==d?0:c.x<d.x?-1:c.x>d.x?1:0}),o=this.Kf[0],this.Kf[0]=null,n=o,l=1;l<s;l++)n.next=this.Kf[l],n=this.Kf[l],this.Kf[l]=null;return n.next=null,o},u.AN=function(o,s,n){if(s==o.length)o.sort(n);else{var l=o.slice(0,0),c=o.slice(s);s=o.slice(0,s).sort(n),o.length=0,o.push.apply(o,l.concat(s).concat(c))}},u.Cx=0,u}();h.Px=w}(G||(G={})),function(h){var C=function(){function w(){}return w.prototype.ui=function(u,o){var s=this.g.Pa(u,this.Pq);if(this.Dl==s&&(this.Dl=this.oe.lb(this.Dl)),this.ho==s&&(this.ho=this.oe.lb(this.ho)),this.oe.jd(this.RA,s),this.bk(u),o&&(o=this.g.bd(u))!=-1&&this.g.Xa(o)==u){var n=this.g.U(u);if(n!=u){if((s=this.g.bd(n))==o)return void this.g.Jf(o,n);if((n=this.g.Ma(u))!=u&&(s=this.g.bd(n))==o)return void this.g.Jf(o,n)}this.g.Jf(o,-1),this.g.Wg(o,-1)}},w.prototype.pD=function(){for(var u=!1,o=new h.h;;){this.Wh==null?(this.Wh=new h.ia(0),this.zs=new h.ia(0),this.xe=new h.ia(0)):(this.Wh.clear(!1),this.zs.clear(!1),this.xe.clear(!1));for(var s=this.ho,n=0,l=!0;s!=this.Dl;){var c=this.oe.getData(s),d=new h.h;this.g.Gc(c,d),l&&(this.g.Gc(c,o),l=!1),d=this.g.Ma(c);var f=this.g.U(c);this.g.Pa(d,this.zg)!=-559038737&&(this.Wh.add(d),this.g.Ra(d,this.zg,-559038737),this.zs.add(c),this.xe.add(n++)),this.g.Pa(f,this.zg)!=-559038737&&(this.Wh.add(f),this.g.Ra(f,this.zg,-559038737),this.zs.add(c),this.xe.add(n++)),s=this.oe.lb(s)}if(2>this.Wh.size)break;var m=this;for(this.xe.Vd(0,this.xe.size,function(b,x){return m.pM(b,x)}),s=0,n=this.xe.size;s<n;s++)l=this.xe.get(s),l=this.Wh.get(l),this.g.Ra(l,this.zg,s),d=new h.h,this.g.Gc(l,d);for(d=this.TM(o),s=0,n=this.xe.size;s<n;s++)(l=this.xe.get(s))!=-1&&(l=this.Wh.get(l),this.g.Ra(l,this.zg,-1));if(!d)break;u=!0}return u},w.prototype.TM=function(u){for(var o=!1,s=!0;s;){s=!1;var n=0;this.xe.get(n)==-1&&(n=this.cm(n));for(var l=this.cm(n),c=0,d=this.xe.size;c<d&&n!=-1&&l!=-1&&n!=l;c++){var f=this.xe.get(n);l=this.xe.get(l),f=this.Wh.get(f),l=this.Wh.get(l);var m=this.g.U(f);this.g.Dv(m,u)||(m=this.g.Ma(f));var b=this.g.U(l);this.g.Dv(b,u)||(b=this.g.Ma(l));var x=this.pu(m,f),$=this.pu(b,l),E=x?this.g.Ma(m):this.g.U(m),O=$?this.g.Ma(b):this.g.U(b),R=!1;(this.sp(m)||this.sp(b)||this.sp(f)||this.sp(l)||this.sp(E)||this.sp(O))&&(R=!0),!R&&this.g.fq(f,l)&&(R=!0,this.tD(x,$,m,f,b,l)),!R&&this.g.fq(E,O)&&(R=!0,this.tD(!x,!$,m,E,b,O)),R&&(o=!0),s=s||R,n=this.cm(n),l=this.cm(n)}}if(!o)for(n=0,this.xe.get(n)==-1&&(n=this.cm(n)),l=this.cm(n),c=0,d=this.xe.size;c<d&&n!=-1&&l!=-1&&n!=l;c++)f=this.xe.get(n),l=this.xe.get(l),f=this.Wh.get(f),l=this.Wh.get(l),m=this.g.U(f),this.g.Dv(m,u)||(m=this.g.Ma(f)),b=this.g.U(l),this.g.Dv(b,u)||(b=this.g.Ma(l)),x=this.pu(m,f),$=this.pu(b,l),E=x?this.g.Ma(m):this.g.U(m),O=$?this.g.Ma(b):this.g.U(b),this.DM(x,$,f,m,E,l,b,O)&&(o=!0),n=this.cm(n),l=this.cm(n);return o},w.prototype.XM=function(){this.g.ic(this.X)==1736&&this.g.In(this.X)==1&&new h.Fg().MU(this.fw,this.g,this.X,this.nd);var u=!1,o=!0;this.zg=this.Pq=-1;var s=this.g.I(this.X),n=new h.ia(0);n.Jb(s);for(var l=this.g.Ob(this.X);l!=-1;l=this.g.Rb(l))for(var c=this.g.Xa(l),d=0,f=this.g.Ja(l);d<f;d++)n.add(c),c=this.g.U(c);var m=this.g.td.o,b=this.g.td.stride;this.g.vb.mc();var x=this.g.vb.za[0].o;for(n.Vd(0,s,function(E,O){var R=m[b*E],k=m[b*O],j=x[2*R];R=x[2*R+1];var F=x[2*k];return(j=R<(k=x[2*k+1])?-1:R>k?1:j<F?-1:j>F?1:0)==0&&(j=(E=m[b*E+3])<(O=m[b*O+3])?-1:E==O?0:1),j}),this.Pq=this.g.Gd(),this.oe=new h.jp,this.RA=this.oe.Ph(0),this.oe.fn(s),l=0;l<s;l++)c=n.get(l),d=this.oe.addElement(this.RA,c),this.g.Ra(c,this.Pq,d);for(this.zg=this.g.Gd(),this.Dl=-1,this.cD()&&(u=!0);o;){o=!1,s=0,n=!1;do{n=!1,this.ho=-1,f=0,l=new h.h,d=new h.h;for(var $=this.oe.rc(this.RA);$!=-1;)c=this.oe.getData($),this.ho!=-1?(this.g.Gc(c,d),l.qb(d)?f++:(l.L(d),this.Dl=$,0<f&&(c=this.pD())&&(n=!0,this.Dl!=-1&&(c=this.oe.getData(this.Dl),this.g.Gc(c,l))),this.ho=$=this.Dl,f=0)):(this.ho=$,this.g.Gc(this.oe.getData($),l),f=0),$!=-1&&($=this.oe.lb($));if(this.Dl=-1,0<f&&(c=this.pD())&&(n=!0),10<s++)throw h.i.Qa();n&&this.GM(),this.cD()&&(n=!0),o=o||n&&!1,u=u||n}while(n)}return this.g.Td(this.Pq),this.g.Td(this.zg),h.WL.V(this.g,this.X,this.oe,this.fw)||u},w.prototype.pu=function(u,o){return this.g.U(o)!=u},w.prototype.DM=function(u,o,s,n,l,c,d,f){if(n==d)return this.bk(s),this.bk(c),!1;var m=this.g.Pa(s,this.zg),b=this.g.Pa(l,this.zg),x=this.g.Pa(c,this.zg),$=this.g.Pa(f,this.zg),E=[0,0,0,0];for((s=[0,0,0,0,0,0,0,0])[0]=0,E[0]=m,s[1]=0,E[1]=b,s[2]=1,E[2]=x,s[3]=1,E[3]=$,m=1;4>m;m++){for(b=E[m],x=s[m],$=m-1;0<=$&&E[$]>b;)E[$+1]=E[$],s[$+1]=s[$],$--;E[$+1]=b,s[$+1]=x}return E=0,s[0]!=0&&(E|=1),s[1]!=0&&(E|=2),s[2]!=0&&(E|=4),s[3]!=0&&(E|=8),(E==5||E==10)&&(u==o?u?(this.g.Bc(f,n),this.g.Cc(n,f),this.g.Bc(l,d),this.g.Cc(d,l)):(this.g.Cc(f,n),this.g.Bc(n,f),this.g.Cc(l,d),this.g.Bc(d,l)):u?(this.g.Cc(n,c),this.g.Bc(c,n),this.g.Cc(d,l),this.g.Bc(l,d)):(this.g.Bc(n,c),this.g.Cc(c,n),this.g.Bc(d,l),this.g.Cc(l,d)),!0)},w.prototype.tD=function(u,o,s,n,l,c){this.MY?this.VM():this.UM(u,o,s,n,l,c)},w.prototype.VM=function(){throw h.i.fa("not implemented.")},w.prototype.UM=function(u,o,s,n,l,c){if(u!=o)u?(this.g.Bc(s,l),this.g.Cc(l,s),this.g.Bc(c,n),this.g.Cc(n,c),this.vn(l,s),this.ui(l,!0),this.g.mi(l,!0),this.bk(s),this.vn(c,n),this.ui(c,!0),this.g.mi(c,!1)):(this.g.Bc(l,s),this.g.Cc(s,l),this.g.Bc(n,c),this.g.Cc(c,n),this.vn(l,s),this.ui(l,!0),this.g.mi(l,!1),this.bk(s),this.vn(c,n),this.ui(c,!0),this.g.mi(c,!0)),this.bk(n);else{var d=u?s:n,f=o?l:c;for(u=u?n:s,o=o?c:l,l=!1,this.g.Bc(d,f),this.g.Bc(f,d),this.g.Cc(u,o),this.g.Cc(o,u),c=o;c!=f;)s=this.g.Ma(c),n=this.g.U(c),this.g.Cc(c,n),this.g.Bc(c,s),l=l||c==d,c=n;l||(s=this.g.Ma(f),n=this.g.U(f),this.g.Cc(f,n),this.g.Bc(f,s)),this.vn(f,d),this.ui(f,!0),this.g.mi(f,!1),this.bk(d),this.vn(o,u),this.ui(o,!0),this.g.mi(o,!1),this.bk(u)}},w.prototype.cD=function(){for(var u=!1,o=this.g.Ob(this.X);o!=-1;){for(var s=this.g.Xa(o),n=0,l=this.g.Ja(o);n<l&&1<l;){var c=this.g.Ma(s),d=this.g.U(s);this.g.fq(c,d)?(u=!0,this.ui(s,!1),this.g.pd(s,!0),this.ui(d,!1),this.g.pd(d,!0),s=c,n=0,l=this.g.Ja(o)):(s=d,n++)}if(2>this.g.Ja(o)){for(u=this.g.Xa(o),n=0,l=this.g.Ja(o);n<l;n++)this.ui(u,!1),u=this.g.U(u);o=this.g.Zq(o),u=!0}else o=this.g.Rb(o)}return u},w.prototype.sp=function(u){for(var o=!1;;){var s=this.g.U(u),n=this.g.Ma(u);if(s==u)return this.ui(u,!0),this.g.mi(u,!1),!0;if(!this.g.fq(s,n)||(o=!0,this.bk(n),this.bk(s),this.ui(u,!0),this.g.mi(u,!1),this.vn(s,n),this.ui(s,!0),this.g.mi(s,!0),s==n))break;u=n}return o},w.prototype.GM=function(){for(var u=0,o=this.oe.rc(this.oe.je);o!=-1;o=this.oe.lb(o)){var s=this.oe.getData(o);this.g.aj(s,-1)}for(var n=0,l=this.g.Ob(this.X);l!=-1;)if((o=this.g.Xa(l))==-1||this.g.bd(o)!=-1)s=l,l=this.g.Rb(l),this.g.$q(s);else{this.g.aj(o,l);var c=1;for(s=this.g.U(o);s!=o;s=this.g.U(s))this.g.aj(s,l),c++;this.g.cp(l,!1),this.g.Vj(l,c),this.g.Wg(l,this.g.Ma(o)),n+=c,u++,l=this.g.Rb(l)}for(o=this.oe.rc(this.oe.je);o!=-1;o=this.oe.lb(o))s=this.oe.getData(o),this.g.bd(s)==-1&&(l=this.g.nG(this.X,s,s,null),n+=this.g.Ja(l),u++);for(this.g.Rl(this.X,u),this.g.Tj(this.X,n),u=0,n=this.g.ld;n!=-1;n=this.g.ue(n))u+=this.g.I(n);this.g.bC(u)},w.prototype.cm=function(u){for(var o=0,s=this.xe.size-1;o<s;o++)if(u=(u+1)%this.xe.size,this.xe.get(u)!=-1)return u;return-1},w.prototype.vn=function(u,o){var s=this.g.Pa(o,this.Pq),n=this.g.Pa(o,this.zg);this.g.lC(u,o),this.g.Ra(o,this.Pq,s),this.g.Ra(o,this.zg,n)},w.prototype.bk=function(u){var o=this.g.Pa(u,this.zg);o!=-1&&(this.xe.set(o,-1),this.g.Ra(u,this.zg,-1))},w.V=function(u,o,s,n,l){var c=new w;return c.g=u,c.X=o,c.xA=s,c.fw=n,c.nd=l,c.XM()},w.prototype.pM=function(u,o){var s=this.Wh.get(u),n=new h.h;this.g.Gc(s,n),s=new h.h;var l=this.Wh.get(o);return this.g.Gc(l,s),n.qb(s)?0:(l=this.zs.get(u),u=new h.h,this.g.Gc(l,u),l=this.zs.get(o),o=new h.h,this.g.Gc(l,o),(l=new h.h).uc(n,u),(n=new h.h).uc(s,o),h.h.nu(l,n))},w}();h.rn=C}(G||(G={})),function(h){var C;(C=h.$L||(h.$L={}))[C.Local=0]="Local",C[C.Geographic=1]="Geographic",C[C.Projected=2]="Projected",C[C.Image=3]="Image",C[C.Unknown=4]="Unknown",function(u){u[u.Integer32=0]="Integer32",u[u.Integer64=1]="Integer64",u[u.FloatingPoint=2]="FloatingPoint"}(h.TL||(h.TL={}));var w=function(){function u(){this.mA=null,this.pp="",this.su=null,this.dg=0,this.ZH=this.Ho=-1,this.wh=null}return u.prototype.Ec=function(){return this.dg},u.prototype.VF=function(){return 1},u.prototype.VW=function(o){this.mA=o},u.prototype.Xd=function(){if(this.mA!==null)return this.mA;var o=.001;return this.dg!=0?o=h.wr.CQ(this.dg):this.wh!=null&&(o=h.XC.DQ(this.wh)),o},u.prototype.Bz=function(){return this.wh},u.prototype.Hd=function(){return this.dg!=0?h.Tc.Zg(h.wr.Sy(this.dg)):this.wh!=null?h.XC.EQ(this.wh):void 0},u.Sb=function(o){if(o.dg!=0){if(h.wr.ZS(o.dg)===!0)return 1;if(h.wr.aT(o.dg)===!0)return 2}return 4},u.prototype.$r=function(){var o=this.Ec();return this.Ho!=-1?this.Ho:(this.Ho=h.wr.FK(o),this.Ho!=-1?this.Ho:o)},u.create=function(o){if(0>=o)throw h.i.N("Invalid or unsupported wkid: "+o);var s=new u;return s.dg=o,s},u.qP=function(o){if(o==null||o.length==0)throw h.i.N("Cannot create SpatialReference from null or empty text.");var s=new u;return s.wh=o,s},u.prototype.Nb=function(o){return this==o||o!=null&&this.constructor==o.constructor&&this.dg==o.dg&&(this.dg!=0||this.wh===o.wh)},u.prototype.toString=function(){return"[ tol: "+this.Kn()+"; wkid: "+this.Ec()+"; wkt: "+this.Bz()+"]"},u.prototype.cc=function(){if(this.pp!=="")return this.pp;var o=this.toString();if(Array.prototype.reduce)return this.pp="S"+o.split("").reduce(function(l,c){return 0|(l=(l<<5)-l+c.charCodeAt(0))},0);var s=0;if(o.length===0)return"";for(var n=0;n<o.length;n++)s=(s<<5)-s+o.charCodeAt(n),s&=s;return this.pp="S"+s},u.prototype.Kn=function(){return this.Xd(0)},u.prototype.fh=function(){return this.su!==null?this.su:this.su=h.gu.yP(this)},u.ZN=2147483645,u.$N=9007199254740990,u}();h.Eg=w}(G||(G={})),function(h){var C=function(w){function u(){var o=w!==null&&w.apply(this,arguments)||this;return o.Ji=null,o.ST=null,o.Hq=new h.ZL,o.Eo=null,o.jw=null,o}return pt(u,w),u.yP=function(o){var s=new u;if(s.dg=o.dg,s.Ho=o.Ho,s.ZH=o.ZH,s.wh=o.wh,s.wh!==""&&s.wh!==null){o=u.kM(s.wh);var n=u.iM(s.wh);s.Hq.Xx(o,n,h.hu.Integer64),s.by(o),s.gy(n),s.dg=o.$r()}else o=u.jM(s.dg),s.by(o),s.gy(null),s.Hq.Xx(o,null,h.hu.Integer64);return s},u.prototype.Xd=function(o){return this.Hq.Kn(o)},u.iM=function(o){if(0>=o.length)throw h.i.N();var s=null;try{s=h.NC.fromString(o)}catch{s=null}return s==null?null:u.bD(s,!0)},u.prototype.by=function(o){this.Kd=o,this.Eo=this.Kd.Hd()},u.prototype.gy=function(o){this.KH=o,this.ST=this.KH!=null?this.KH.Eo:null},u.prototype.Wc=function(){return this.Sb()!=0&&this.Sb()!=3&&this.Kd.Wc()},u.prototype.IG=function(){return this.Sb()!=0&&(this.Sb()==3?this.Ji.fk().Wc():this.Kd.Wc())},u.prototype.eh=function(){return this.Kd!=null?this.Kd.Ue:null},u.prototype.pm=function(){return this.Kd.pm()},u.prototype.bf=function(){return this.Kd.bf()},u.prototype.hh=function(){return this.Kd!=null?this.Kd.sw:NaN},u.prototype.Up=function(){return this.Kd.Up()},u.prototype.Wr=function(){return this.Kd.Wr()},u.prototype.kk=function(){return this.Kd.kk()},u.prototype.kS=function(o){return h.OC.Py(this.Kd,o.Kd)},u.prototype.ml=function(){return this.Kd.ml()},u.prototype.Vr=function(){return this.Kd.Vr()},u.prototype.zi=function(){return this.Sb()==3?this.Ji.fk().zi():this.Kd.zi()},u.prototype.gh=function(){if(!this.Wc())throw h.i.N("!isPannable()");var o=new h.l;return this.Kd.gh(o),o},u.prototype.Oe=function(){if(!this.Wc())throw h.i.N("!isPannable()");return this.Kd.so},u.prototype.HR=function(){if(!this.Wc())throw h.i.N("!isPannable()");var o=new h.l;return this.Kd.GR(o),o},u.prototype.pv=function(){if(!this.Wc())throw h.i.N("!isPannable()");return this.Kd.pv()},u.prototype.ov=function(){if(!this.Wc())throw h.i.N("!isPannable()");return this.Kd.ov()},u.prototype.Xr=function(){return this.Ji!=null?this.Ji.fk().Xr():this.Kd.Xr()},u.prototype.PQ=function(){return this.Kd.hv()},u.prototype.Qp=function(){return this.Eo.getUnitFactor()},u.prototype.vz=function(o){return this.Hq.vz(o)},u.prototype.sc=function(){var o=this.Sb();if(o==1)return this;if(o==3)return this.Ji.fk().sc();if(o==0||o===4)throw h.i.fa("invalid call");if(this.jw!==null)return this.jw;if((o=this.eh().getGeogcs())==null)throw h.i.Qa();return this.jw=u.bF(o,this.Hq.VF())},u.bF=function(o,s){if(o==null)throw h.i.N("null pointer.");var n=new u;return o=u.mu(o,!0),n.Hq.Xx(o,null,s),n.by(o),n.gy(null),n.dg=o.$r(),n},u.prototype.Sb=function(){var o=this.eh();if(o!=null)switch(o.getType()){case h.Sc.PE_TYPE_GEOGCS:return 1;case h.Sc.PE_TYPE_PROJCS:return 2}return 4},u.prototype.hv=function(){return this.Kd.hv()},u.mu=function(o,s){var n=o.getCode();if(0>=n&&0<(n=h.pf.getCode(o))){if((o=h.pf.coordsys(n))==null)throw h.i.N("Text to wkid mapping had failed: "+n);return u.mu(o,s)}if(s&&0<n&&(s=u.qx[n]))return s;s=h.zb.xv(o,n,!1);var l=u.lK[s];return l||(o=0>=n?o:h.pf.coordsys(n),o=new h.OC(o),u.lK[s]=o,0<n&&(u.qx[n]=o),o)},u.jM=function(o){if(0>=o)throw h.i.N("Invalid or unsupported wkid: "+o);var s=u.qx[o];if(s!=null)return s;if((s=h.pf.coordsys(o))==null)throw h.i.N("Invalid or unsupported wkid: "+o);return(s=u.mu(s,!1)).$r()!=o&&(u.qx[o]=s),s},u.kM=function(o){if(o==null||o===void 0||o.length==0)throw h.i.N("Cannot create SpatialReference from null or empty text.");var s=null;try{s=h.pf.fromString(h.Sc.PE_TYPE_COORDSYS,o)}catch(n){throw h.i.N("Cannot create SpatialReference from text. "+n.message)}if(s===null)throw h.i.N("Cannot create SpatialReference from text. ");return u.mu(s,!0)},u.bD=function(o,s){var n,l=o.getCode();if(0>=l&&0<(l=h.pf.getCode(o))){if((l=h.pf.vertcs(l))===null)throw h.i.N();return u.bD(l,s)}if(s&&0<l&&(s=u.kK[l])||(o=h.zb.xv(o,l,!1),s=u.mK[o]))return s;if(0>=l||(n=h.pf.vertcs(l)),n===null)throw h.i.N();return n=new h.PL(n),u.mK[o]=n,0<l&&(u.kK[l]=n),n},u.sI=function(o,s){if(s===null||s.B())return null;var n=new h.l;if(s!==null&&o.Sb()!=1){var l=o.sc(),c=l.eh();o=h.vr.Nr(o,l,null,null),(s=h.Hx.local().V(s,o,null)).A(n)}else c=o.eh(),s.A(n);return s=c.getPrimem().getLongitude(),c=c.getUnit().getUnitFactor(),new h.LC(n.v,n.G,n.C,n.H,s,c)},u.lD=function(o){var s={name:"",steps:[],_pt:null,_entry:null},n=0;for(o=o.getEntries();n<o.length;n++){var l=o[n],c={LY:!1,ZY:"",YY:-1,geogtran:null};l.getDirection()===0?c.isInverse=!1:c.isInverse=!0;var d=l.getGeogtran().getCode();-1<d?c.wkid=d:c.wkt=l.getGeogtran().toString(),s.steps.push(c)}return s},u.XR=function(o,s,n,l){return n===void 0&&(n=null),n=u.sI(l,n),o=h.lp.getGTlist(o.eh(),s.eh(),2,h.lp.PE_GTLIST_OPTS_COMMON,n,1),s=null,o&&0<o.length&&(s=this.lD(o[0]),h.Mx.destroy(o)),n!==null&&n.destroy(),s},u.YR=function(o,s,n,l){var c;if(n===void 0&&(n=null),l===void 0&&(l=null),c===void 0&&(c=30),n=u.sI(l,n),o=h.lp.getGTlist(o.eh(),s.eh(),2,h.lp.PE_GTLIST_OPTS_COMMON,n,c),s=[],o&&0<o.length){for(c=0;c<o.length;c++)s.push(this.lD(o[c]));h.Mx.destroy(o)}return n!==null&&n.destroy(),s},u.qx={},u.lK={},u.kK={},u.mK={},u}(h.Eg);h.gu=C}(G||(G={})),function(h){var C,w;(w=C=h.hu||(h.hu={}))[w.Integer32=0]="Integer32",w[w.Integer64=1]="Integer64",w[w.FloatingPoint=2]="FloatingPoint";var u=function(){function o(){this.qp()}return o.prototype.assign=function(s){this.Fm=s.Fm,this.Gm=s.Gm,this.Pj=s.Pj,this.sA=s.sA,this.Fo=s.Fo,this.rA=s.rA,this.Ik=s.Ik,this.Mq=s.Mq,this.Lq=s.Lq,this.Rm=s.Rm},o.prototype.VF=function(){return this.Rm},o.prototype.qp=function(){this.Gm=this.Fm=0,this.Pj=1,this.sA=0,this.Fo=1,this.rA=0,this.Lq=this.Mq=this.Ik=2220446049250313e-29,this.Rm=C.FloatingPoint},o.prototype.Xx=function(s,n,l){if(this.qp(),this.Rm=l,l!=C.FloatingPoint){var c=new h.l;s.hR(c),this.Fm=c.v,this.Gm=c.G}else this.Gm=this.Fm=-17976931348623157e292;(c=s.Ue.getType())==h.Sc.PE_TYPE_GEOGCS?(c=(l==C.Integer64?1e-9:1/18e5)*s.bf(),this.Pj=1/c):c==h.Sc.PE_TYPE_PROJCS&&(c=(l==C.Integer64?1e-4:.001)*s.pm(),this.Pj=1/c),n!=null?(c=(l==C.Integer32?.001:1e-4)*n.IH,this.Fo=1/c):this.Fo=1e4,this.YM(),this.Ik=s.sw,this.Mq=n!=null?.001*n.IH:.001,this.Lq=2220446049250313e-29},o.prototype.YM=function(){if(this.Rm!=C.FloatingPoint){var s=this.Rm==C.Integer64?h.Eg.$N:h.Eg.ZN,n=s/this.Pj,l=this.Fm+n,c=h.O.truncate((l-this.Fm)*this.Pj);c>s&&(this.Pj=s/(l-this.Fm)),n=this.Gm+n,(c=h.O.truncate((n-this.Gm)*this.Pj))>s&&(this.Pj=s/(n-this.Gm))}},o.prototype.aC=function(s){switch(s){case 0:this.Ik=void 0;case 1:this.Mq=void 0;case 2:this.Lq=void 0}},o.prototype.Kn=function(s){switch(s){case 0:return this.Ik;case 1:return this.Mq;case 2:return this.Lq}return 0},o.prototype.vz=function(s){if(this.Rm==C.FloatingPoint)return 0;switch(s){case 0:return 1/this.Pj;case 1:case 2:return 1/this.Fo;default:return 0}},o.prototype.toString=function(){var s="SRPD [m_toleranceXY: "+this.Ik.toString();return(s=(s=(s=(s=(s=(s=(s=(s=(s=s+";m_falseX: "+this.Fm.toString())+";m_falseY: "+this.Gm.toString())+";m_unitsXY: "+this.Pj.toString())+";m_falseZ: "+this.sA.toString())+";m_unitsZ: "+this.Fo.toString())+";m_falseM: "+this.rA.toString())+";m_toleranceZ: "+this.Mq.toString())+";m_toleranceM: "+this.Lq.toString())+";m_precision: "+this.Rm.toString())+"] "},o}();h.ZL=u}(G||(G={})),function(h){function C(l,c){return 89.99999<c?c=89.99999:-89.99999>c&&(c=-89.99999),c*=.017453292519943,[111319.49079327169*l,31890685e-1*Math.log((1+Math.sin(c))/(1-Math.sin(c)))]}function w(l,c,d){return l=l/6378137*57.29577951308232,d?[l,57.29577951308232*(1.5707963267948966-2*Math.atan(Math.exp(-1*c/6378137)))]:[l-360*Math.floor((l+180)/360),57.29577951308232*(1.5707963267948966-2*Math.atan(Math.exp(-1*c/6378137)))]}function u(l,c,d){var f=l.Of();if(l.getType()===33)c=c(f.Lg(),f.ih()),f.Cb(c[0],c[1]);else if(l.getType()===197){var m=c(l.es(),l.gs(),d);c=c(l.ds(),l.fs(),d),f.K(m[0],m[1],c[0],c[1])}else for(m=new h.h,l=0;l<f.I();l++){f.D(l,m);var b=c(m.x,m.y,d);m.ma(b[0],b[1]),f.Cb(l,m)}return f}function o(l){return u(l,w,!0)}function s(l){return u(l,C,!0)}var n=Math.PI/180;h.UK=function(){function l(){}return l.vu=function(c){var d=Math.sqrt(.006694379990197414),f=Math.sin(c.y*n);return h.h.construct(6378137*c.x*n,3.1677196636462314e6*(f/(1-.006694379990197414*f*f)-1/(2*d)*Math.log((1-d*f)/(1+d*f))))},l.Vx=function(c,d,f,m){var b=.0033528106647474805,x=Math.sin(f);f=Math.cos(f);var $=(1-b)*Math.tan(c),E=$*(c=1/Math.sqrt(1+$*$)),O=Math.atan2($,f),R=($=c*x)*$,k=1-R,j=27233160610754688e-5*k/4040829998466145e-2,F=1+j/16384*(4096+j*(j*(320-175*j)-768)),L=j/1024*(256+j*(j*(74-47*j)-128));j=m/(635675231424518e-8*F);for(var V,B,W,K=2*Math.PI;1e-12<Math.abs(j-K);)W=Math.cos(2*O+j),K=j,j=m/(635675231424518e-8*F)+L*(V=Math.sin(j))*(W+L/4*((B=Math.cos(j))*(2*W*W-1)-L/6*W*(4*V*V-3)*(4*W*W-3)));return m=E*V-c*B*f,k=b/16*k*(4+b*(4-3*k)),h.h.construct((d+(Math.atan2(V*x,c*B-E*V*f)-(1-k)*b*$*(j+k*V*(W+k*B*(2*W*W-1)))))/n,Math.atan2(E*B+c*V*f,(1-b)*Math.sqrt(R+m*m))/n)},l.MM=function(c,d,f,m){var b=.0033528106647474805,x=m-d,$=Math.atan((1-b)*Math.tan(c)),E=Math.atan((1-b)*Math.tan(f)),O=Math.sin($);$=Math.cos($);var R=Math.sin(E);E=Math.cos(E);var k=x,j=1e3;do{var F=Math.sin(k),L=Math.cos(k),V=Math.sqrt(E*F*E*F+($*R-O*E*L)*($*R-O*E*L));if(V===0)return 0;L=O*R+$*E*L;var B=Math.atan2(V,L),W=$*E*F/V,K=1-W*W;F=L-2*O*R/K,isNaN(F)&&(F=0);var re=b/16*K*(4+b*(4-3*K)),ae=k;k=x+(1-re)*b*W*(B+re*V*(F+re*L*(2*F*F-1)))}while(1e-12<Math.abs(k-ae)&&0<--j);return j===0?(O=m-d,{azimuth:Math.atan2(Math.sin(O)*Math.cos(f),Math.cos(c)*Math.sin(f)-Math.sin(c)*Math.cos(f)*Math.cos(O)),geodesicDistance:6371008771415059e-9*Math.acos(Math.sin(c)*Math.sin(f)+Math.cos(c)*Math.cos(f)*Math.cos(m-d))}):(d=(c=27233160610754688e-5*K/4040829998466145e-2)/1024*(256+c*(c*(74-47*c)-128)),{azimuth:Math.atan2(E*Math.sin(k),$*R-O*E*Math.cos(k)),YQ:635675231424518e-8*(1+c/16384*(4096+c*(c*(320-175*c)-768)))*(B-d*V*(F+d/4*(L*(2*F*F-1)-d/6*F*(4*V*V-3)*(4*F*F-3)))),XY:Math.atan2($*Math.sin(k),$*R*Math.cos(k)-O*E)})},l.jQ=function(c){var d=c.hasAttribute(1),f=c.hasAttribute(2),m=[],b=c.da(),x=null,$=null;d&&(x=c.ub(1)),f&&($=c.ub(2));for(var E=new h.h,O=0;O<b;O++){for(var R=c.Ba(O),k=c.Ja(O),j=0,F=0,L=NaN,V=NaN,B=NaN,W=NaN,K=c.dc(O),re=[],ae=R;ae<R+k;ae++){c.D(ae,E),W=B=NaN;var de=[E.x,E.y];d&&(B=x.get(ae),de.push(B)),f&&(b=$.get(ae),de.push(W)),ae==R&&K&&(j=E.x,F=E.y,L=B,V=W),re.push(de)}!K||j==E.x&&F==E.y&&(!d||isNaN(L)&&isNaN(B)||L==B)&&(!f||isNaN(V)&&isNaN(W)||V==W)||re.push(re[0].slice(0)),m.push(re)}return m},l.Wy=function(c,d){c=l.jQ(c),637.100877141506>d&&(d=637.100877141506);for(var f,m=[],b=0;b<c.length;b++){var x,$,E=c[b];m.push(f=[]),f.push([E[0][0],E[0][1]]);var O=E[0][0]*n,R=E[0][1]*n;for(x=0;x<E.length-1;x++){var k=E[x+1][0]*n,j=E[x+1][1]*n;if(O!==k||R!==j){k=(j=l.MM(R,O,j,k)).azimuth;var F=(j=j.YQ)/d;if(1<F){for($=1;$<=F-1;$++){var L=l.Vx(R,O,k,$*d);f.push([L.x,L.y])}$=l.Vx(R,O,k,(j+Math.floor(F-1)*d)/2),f.push([$.x,$.y])}R=l.Vx(R,O,k,j),f.push([R.x,R.y]),O=R.x*n,R=R.y*n}}}return{qJ:m}},l.XQ=function(c){for(var d=[],f=0;f<c.length;f++){var m=c[f];m=l.Wy(m,1e4),d.push(m)}c=[];for(var b=0;b<d.length;b++){m=d[b];var x=0;for(f=0;f<m.qJ.length;f++){var $,E=m.qJ[f],O=l.vu(h.h.construct(E[0][0],E[0][1])),R=l.vu(h.h.construct(E[E.length-1][0],E[E.length-1][1])),k=R.x*O.y-O.x*R.y;for($=0;$<E.length-1;$++)O=l.vu(h.h.construct(E[$+1][0],E[$+1][1])),k+=(R=l.vu(h.h.construct(E[$][0],E[$][1]))).x*O.y-O.x*R.y;x+=k}x/=1,c.push(x/-2)}return c},l}(),h.cb=function(){function l(){}return l.xB=function(c,d,f,m,b,x,$){l.gD[c.cc()]=d,isNaN(f)==0&&(l.mD[c.cc()]=f),isNaN(m)==0&&(l.zD[c.cc()]=m),isNaN(b)==0&&(l.aD[c.cc()]=b),l.nD[c.cc()]=x,$!==null&&(l.oD[c.cc()]=$)},l.Ww=function(c,d,f){l.sD[c.cc()+"-"+d.cc()]=f},l.sc=function(c){if((c=l.gD[c.cc()])==null)throw h.i.Ie();return c},l.bf=function(c){if((c=l.mD[c.cc()])==null)throw h.i.Ie();return c},l.vv=function(c){if((c=l.zD[c.cc()])==null)throw h.i.Ie();return c},l.ev=function(c){if((c=l.aD[c.cc()])==null)throw h.i.Ie();return c},l.gh=function(c){if((c=l.oD[c.cc()])==null)throw h.i.Ie();return h.l.construct(c[0],c[1],c[2],c[3])},l.Wc=function(c){if((c=l.nD[c.cc()])==null)throw h.i.Ie();return c},l.zh=function(c,d,f){if(d.Nb(f))return c;var m=l.sD[d.cc()+"-"+f.cc()];if(m!==void 0)return m(c,d,f);throw h.i.Ie()},l.vt=function(){throw h.i.Ie()},l.bR=function(){throw h.i.Ie()},l.dW=function(){throw h.i.Ie()},l.ml=function(){throw h.i.Ie()},l.sW=function(){var c=h.Eg.create(102100),d=h.Eg.create(3857),f=h.Eg.create(4326);h.cb.xB(c,f,NaN,NaN,NaN,!1,null),h.cb.xB(f,f,1,.0033528106647474805,6378137,!0,[-180,-90,180,90]),h.cb.xB(d,f,NaN,NaN,NaN,!1,null),h.cb.Ww(c,f,o),h.cb.Ww(f,c,s),h.cb.Ww(d,f,o),h.cb.Ww(f,d,s)},l.gD=[],l.mD=[],l.zD=[],l.aD=[],l.nD=[],l.oD=[],l.sD=[],l}()}(G||(G={})),G.cb.sW(),function(h){var C=function(){function w(u){this.o=new Int32Array(0),this.io=-1,this.Hg=this.size=this.Bl=0,this.stride=u}return w.prototype.jd=function(u){u<this.Bl?(this.o[u*this.stride]=this.io,this.io=u):this.Bl--,this.size--},w.prototype.T=function(u,o){return this.o[u*this.stride+o]},w.prototype.S=function(u,o,s){this.o[u*this.stride+o]=s},w.prototype.Ce=function(){var u=this.io;if(u==-1){if(this.Bl==this.Hg){if(2147483647<(u=this.Hg!=0?h.O.truncate(3*(this.Hg+1)/2):1)&&(u=2147483647),u==this.Hg)throw h.i.ce();this.Dz(u)}u=this.Bl,this.Bl++}else this.io=this.o[u*this.stride];this.size++;for(var o=u*this.stride;o<u*this.stride+this.stride;o++)this.o[o]=-1;return u},w.prototype.Ll=function(u){var o=this.io;if(o==-1){if(this.Bl==this.Hg){if(2147483647<(o=this.Hg!=0?h.O.truncate(3*(this.Hg+1)/2):1)&&(o=2147483647),o==this.Hg)throw h.i.ce();this.Dz(o)}o=this.Bl,this.Bl++}else this.io=this.o[o*this.stride];this.size++;for(var s=o*this.stride,n=0;n<u.length;n++)this.o[s+n]=u[n];return o},w.prototype.mj=function(u){this.io=-1,this.size=this.Bl=0,u&&(this.o=null,this.Hg=0)},w.prototype.De=function(u){u>this.Hg&&this.Dz(u)},w.prototype.tx=function(u,o){u*=this.stride,o*=this.stride;for(var s=0;s<this.stride;s++){var n=this.o[o+s];this.o[o+s]=this.o[u+s],this.o[u+s]=n}},w.prototype.gC=function(u,o,s){var n=this.o[this.stride*o+s];this.o[this.stride*o+s]=this.o[this.stride*u+s],this.o[this.stride*u+s]=n},w.LG=function(u){return 0<=u},w.prototype.Dz=function(u){this.o==null&&(this.o=new Int32Array(0));var o=new Int32Array(this.stride*u);o.set(this.o,0),this.o=o,this.Hg=u},w}();h.$c=C}(G||(G={})),function(h){var C,w;(w=C||(C={}))[w.enumInputModeBuildGraph=0]="enumInputModeBuildGraph",w[w.enumInputModeSimplifyAlternate=4]="enumInputModeSimplifyAlternate",w[w.enumInputModeSimplifyWinding=5]="enumInputModeSimplifyWinding",w[w.enumInputModeIsSimplePolygon=7]="enumInputModeIsSimplePolygon";var u=function(){function s(n){this.Be=n,this.yh=NaN,this.eH=new h.ig,this.fH=new h.ig,this.ms=new h.Nc,this.ns=new h.Nc}return s.prototype.compare=function(n,l,c){if(n=n.ja(c),this.Be.pB(l,this.eH),this.Be.pB(n,this.fH),l=this.eH.get(),n=this.fH.get(),this.ms.K(l.sa,l.pa),this.ns.K(n.sa,n.pa),this.ms.va<this.ns.oa)return-1;if(this.ms.oa>this.ns.va)return 1;c=l.na==l.la;var d=n.na==n.la;if(c||d){if(c&&d)return 0;if(l.na==n.na&&l.sa==n.sa)return c?1:-1;if(l.la==n.la&&l.pa==n.pa)return c?-1:1}return(c=l.Pe(this.yh,this.ms.oa))==(d=n.Pe(this.yh,this.ns.oa))&&((d=.5*((c=Math.min(l.la,n.la))+this.yh))==this.yh&&(d=c),c=l.Pe(d,this.ms.oa),d=n.Pe(d,this.ns.oa)),c<d?-1:c>d?1:0},s.prototype.aK=function(n){this.yh=n},s}(),o=function(){function s(n){this.ib=n,this.WH=new h.ig,this.Bf=new h.h,this.wA=new h.Nc}return s.prototype.kX=function(n){this.Bf.L(n)},s.prototype.compare=function(n,l){return this.ib.pB(n.ja(l),this.WH),n=this.WH.get(),this.wA.K(n.sa,n.pa),this.Bf.x<this.wA.oa?-1:this.Bf.x>this.wA.va?1:(n=n.Pe(this.Bf.y,this.Bf.x),this.Bf.x<n?-1:this.Bf.x>n?1:0)},s}();C=function(){function s(){this.hH=this.Di=this.Gi=this.kA=this.Yn=this.ye=this.Kc=this.jh=this.ge=null,this.Go=this.xg=-1,this.gH=!0,this.pA=!1,this.lA=NaN,this.Ni=new h.Md,this.bO=2147483647,this.aO=h.O.truncate(-2147483648),this.cg=this.ae=this.Hl=this.Cq=this.Cm=this.Bq=this.Os=this.Re=-1,this.wa=0}return s.prototype.yy=function(n){this.lA=n},s.prototype.Ym=function(){this.ge==null&&(this.ge=new h.$c(8));var n=this.ge.Ce();return this.ge.S(n,1,0),n},s.prototype.vU=function(){this.Kc==null&&(this.Kc=new h.$c(8));var n=this.Kc.Ce();this.Kc.S(n,2,0),this.Kc.S(n,3,0);var l=this.Kc.Ce();return this.Kc.S(l,2,0),this.Kc.S(l,3,0),this.JJ(n,l),this.JJ(l,n),n},s.prototype.mI=function(){this.ye==null&&(this.ye=new h.$c(8));var n=this.ye.Ce();return this.ye.S(n,2,0),n},s.prototype.TW=function(n,l){this.ge.S(n,7,l)},s.prototype.mn=function(n,l){this.ge.S(n,2,l)},s.prototype.SW=function(n,l){this.ge.S(n,1,l)},s.prototype.lX=function(n,l){this.ge.S(n,3,l)},s.prototype.iX=function(n,l){this.ge.S(n,4,l)},s.prototype.cr=function(n,l){this.ge.S(n,5,l)},s.prototype.eR=function(n){return this.ge.T(n,5)},s.prototype.RW=function(n,l){this.ge.S(n,6,l)},s.prototype.cN=function(n,l){this.RW(l,n)},s.prototype.IJ=function(n,l){this.Kc.S(n,1,l)},s.prototype.JJ=function(n,l){this.Kc.S(n,4,l)},s.prototype.Tl=function(n,l){this.Kc.S(n,5,l)},s.prototype.Sl=function(n,l){this.Kc.S(n,6,l)},s.prototype.$W=function(n,l){this.Kc.S(n,2,l)},s.prototype.$w=function(n,l){this.Kc.S(n,3,l)},s.prototype.LF=function(n){return this.Kc.T(n,3)},s.prototype.Gt=function(n,l){this.Kc.S(n,7,l)},s.prototype.EK=function(n,l){if(this.mm(n)!=-1)for(l=l?-1:n,n=this.mm(n);n!=-1;n=this.js(n))this.g.Ra(this.tj(n),this.Cq,l)},s.prototype.yx=function(n,l){n!=-1&&(this.EK(n,l),this.EK(this.xa(n),l))},s.prototype.Dt=function(n,l){this.ye.S(n,1,l)},s.prototype.Vg=function(n,l){this.ye.S(n,2,l)},s.prototype.jn=function(n,l){this.ye.S(n,3,l),this.NW(n,this.dR(l)),this.MW(l,n)},s.prototype.MW=function(n,l){this.ye.S(n,4,l)},s.prototype.NW=function(n,l){this.ye.S(n,5,l)},s.prototype.DJ=function(n,l){this.ye.S(n,6,l)},s.prototype.BJ=function(n,l){this.ye.S(n,7,l)},s.prototype.AJ=function(n,l){this.Yn.write(n,l)},s.prototype.CJ=function(n,l){this.kA.write(n,l)},s.prototype.kY=function(n){var l=0,c=0,d=this.AF(n),f=new h.h,m=new h.h,b=new h.h;this.Yr(d,f),m.L(f);var x=d;do this.lm(x,b),c+=h.h.tb(m,b),this.$e(this.xa(x))!=n&&(l+=(b.x-f.x-(m.x-f.x))*(b.y-f.y+(m.y-f.y))*.5),m.L(b),x=this.jc(x);while(x!=d);this.Yn.write(n,l),this.kA.write(n,c)},s.prototype.PU=function(n,l){var c=new u(this),d=new h.Yj;d.De(h.O.truncate(this.wa/2)),d.Vo(c);for(var f=new h.ia(0),m=this.$g(),b=null,x=0,$=new h.h,E=this.Re;E!=-1;E=this.Rf(E)){if(!(255&++x||l==null||l.progress(-1,-1)))throw h.i.WC();var O=this.Me(E);if(O!=-1){if(f.Bh(0),!this.gY(d,m,f,O)){this.D(E,$),c.aK($.y);var R=O;do{var k=this.Ab(R,m);k!=-1&&(d.vd(k,-1),this.Kb(R,m,-2)),R=this.jc(this.xa(R))}while(O!=R);R=O;do(k=this.Ab(R,m))==-1&&(k=d.addElement(R,-1),f.add(k)),R=this.jc(this.xa(R));while(O!=R)}for(O=f.size-1;0<=O;O--)k=f.get(O),R=d.ja(k),this.Kb(this.xa(R),m,k),this.OU(d,k,n)}else this.cz(E)==-1&&(b==null&&(b=new o(this)),this.D(E,$),b.kX($),R=d.IW(b),O=this.Hl,R!=-1&&(k=d.ja(R),this.$e(k)==this.$e(this.xa(k))&&(k=this.OF(d,R)),k!=-1&&(O=this.$e(k))),this.cN(O,E))}this.Jg(m)},s.prototype.OU=function(n,l,c){var d=n.ja(l),f=this.$e(d);if(this.Gn(f)==-1){var m=this.OF(n,l),b=this.xa(d),x=this.$e(b);this.Kp(f),this.Kp(x);var $=this.Gn(f),E=this.Gn(x);if(m==-1&&$==-1&&(x==f?(this.jn(x,this.Hl),$=E=this.Hl):(E==-1&&(this.jn(x,this.Hl),E=this.Hl),this.jn(f,x),$=x)),m!=-1){var O=this.$e(m);E==-1&&(0>=this.Kp(O)?(E=this.Gn(O),this.jn(x,E)):(this.jn(x,O),E=O),x==f&&($=E))}$==-1&&this.hY(f,x),c==0?this.jW(n,l,d,m,f,x):c==5?this.kW(n,l,d,b,f,x):c==4&&this.iW(d,m,f,x)}},s.prototype.jW=function(n,l,c,d,f,m){var b=this.hk(f);if(d!=-1){var x=this.hk(m),$=this.hk(this.$e(d));d=b&x&$,$^=$&this.dh(c),($|=d)!=0&&(this.Vg(m,x|$),this.Vg(f,$|b),b=b||$)}for(l=n.lb(l);l!=-1&&(d=n.ja(l),c=this.$e(this.xa(d)),f=this.hk(c),m=this.dh(d),x=this.$e(d),d=f&($=this.hk(x))&b,b^=b&m,(b|=d)!=0);l=n.lb(l))this.Vg(c,f|b),this.Vg(x,$|b)},s.prototype.kW=function(n,l,c,d,f,m){if(f!=m){c=this.Ab(c,this.cg),c+=this.Ab(d,this.cg),d=0;var b=new h.ia(0),x=new h.ia(0);x.add(0);for(var $=n.rc(-1);$!=l;$=n.lb($)){var E=n.ja($),O=this.xa(E),R=this.$e(E),k=this.$e(O);if(R!=k){if(E=this.Ab(E,this.cg),d+=E+=this.Ab(O,this.cg),O=!1,b.size!=0&&b.Fc()==k&&(x.If(),b.If(),O=!0),this.Gn(k)==-1)throw h.i.Qa();O&&this.Gn(k)==R||(x.add(d),b.add(R))}}d+=c,b.size!=0&&b.Fc()==m&&(x.If(),b.If()),d!=0?x.Fc()==0&&(n=this.g.ld,n=this.La(n),this.Vg(f,n)):x.Fc()!=0&&(n=this.g.ld,n=this.La(n),this.Vg(f,n))}},s.prototype.iW=function(n,l,c,d){var f=this.La(this.g.ld);if(l==-1)this.Vg(d,this.Go),1&(n=this.Ab(n,this.xg))?this.Vg(c,f):this.Vg(c,this.Go);else{var m=this.hk(d);m==0?(m=this.hk(this.$e(l)),this.Vg(d,m),1&(n=this.Ab(n,this.xg))?this.Vg(c,m==f?this.Go:f):this.Vg(c,m)):1&(n=this.Ab(n,this.xg))?this.Vg(c,m==f?this.Go:f):this.Vg(c,m)}},s.prototype.gY=function(n,l,c,d){var f=d,m=-1,b=-1,x=0;do{if(x==2)return!1;var $=this.Ab(f,l);if($!=-1){if(m!=-1)return!1;m=$}else{if(b!=-1)return!1;b=f}x++,f=this.jc(this.xa(f))}while(d!=f);return b!=-1&&m!=-1&&(this.Kb(n.ja(m),l,-2),n.Sj(m,b),c.add(m),!0)},s.prototype.hY=function(n,l){var c=this.Kp(n);if(c!=0){var d=this.Kp(l);0<c&&0>d||0>c&&0<d?this.jn(n,l):(l=this.Gn(l))!=-1&&this.jn(n,l)}},s.prototype.vP=function(n,l){this.Cq=this.g.Gd();for(var c=0,d=l.size;c<d;c++){var f=l.get(c),m=this.g.Pa(f,this.Cm),b=this.g.Qf(this.g.bd(f)),x=this.g.ic(b);if(h.aa.Hc(x)){var $=this.g.U(f);if($!=-1){var E=this.g.Pa($,this.Cm);if(m!=E){var O=this.vU(),R=this.xa(O),k=this.jh.Ce();this.jh.S(k,0,f),this.jh.S(k,1,-1),this.Gt(O,k),this.IJ(O,m),(k=this.Me(m))==-1?(this.mn(m,O),this.Tl(O,R),this.Sl(R,O)):(m=this.te(k),this.Tl(k,R),this.Sl(R,k),this.Sl(m,O),this.Tl(O,m)),this.IJ(R,E),(m=this.Me(E))==-1?(this.mn(E,R),this.Sl(O,R),this.Tl(R,O)):(E=this.te(m),this.Tl(m,O),this.Sl(O,m),this.Sl(E,R),this.Tl(R,E)),b=this.La(b),n==0?(this.Kb(R,this.ae,0),this.Kb(O,this.ae,x==1736?b:0)):n==5?(E=new h.h,this.g.D(f,E),f=new h.h,this.g.D($,f),m=$=0,0>E.compare(f)?$=1:m=-1,this.Kb(R,this.ae,0),this.Kb(O,this.ae,0),this.Kb(O,this.cg,$),this.Kb(R,this.cg,m)):n==7?(this.Kb(R,this.ae,this.Go),this.Kb(O,this.ae,x==1736?b:0)):n==4&&(this.Kb(R,this.ae,0),this.Kb(O,this.ae,0),this.Kb(O,this.xg,1),this.Kb(R,this.xg,1)),x=x==1736?this.aO:0,this.$w(O,b|x),this.$w(R,b|x)}}}}},s.prototype.VT=function(n,l){var c=this.mm(l);if(c!=-1){var d=this.mm(n);this.jh.S(c,1,d),this.Gt(n,c),this.Gt(l,-1)}n=this.xa(n),l=this.xa(l),(c=this.mm(l))!=-1&&(d=this.mm(n),this.jh.S(c,1,d),this.Gt(n,c),this.Gt(l,-1))},s.prototype.IX=function(n){function l(B,W){return d.HO(B,W)}var c=new h.ia(0);c.Jb(10);for(var d=this,f=this.Re;f!=-1;f=this.Rf(f)){c.clear(!1);var m=this.Me(f);if(m!=-1){var b=m;do c.add(b),b=this.jc(this.xa(b));while(b!=m);if(1<c.size){if(b=!0,2<c.size)c.Vd(0,c.size,l),c.add(c.get(0));else if(0<this.GO(c.get(0),c.get(1))){var x=c.get(0);c.set(0,c.get(1)),c.set(1,x)}else b=!1;for(var $=x=c.get(0),E=this.uf($),O=this.xa($),R=-1,k=1,j=c.size;k<j;k++){var F=c.get(k),L=this.xa(F),V=this.jk(L);if(V==E&&F!=$){if(n==0)R=this.LF($)|this.LF(F),this.$w($,R),this.$w(O,R),this.Kb($,this.ae,this.Ab($,this.ae)|this.Ab(F,this.ae)),this.Kb(O,this.ae,this.Ab(O,this.ae)|this.Ab(L,this.ae));else if(this.cg!=-1)R=this.Ab($,this.cg)+this.Ab(F,this.cg),L=this.Ab(O,this.cg)+this.Ab(L,this.cg),this.Kb($,this.cg,R),this.Kb(O,this.cg,L);else{if(n==7)return void(this.Ni=new h.Md(5,f,-1));this.xg!=-1&&(R=this.Ab($,this.xg)+this.Ab(F,this.xg),L=this.Ab(O,this.xg)+this.Ab(L,this.xg),this.Kb($,this.xg,R),this.Kb(O,this.xg,L))}this.VT($,F),this.Ly(F),R=$,c.set(k,-1),F==x&&(c.set(0,-1),x=-1)}else this.yx(R,!1),R=-1,$=F,E=V,O=L}if(this.yx(R,!1),R=-1,b){for(x=-1,k=0,j=c.size;k<j;k++)if((F=c.get(k))!=-1){if(x==-1)$=x=F,E=this.uf($),O=this.xa($);else if(F!=$&&(L=this.xa(F),V=this.jk(L),this.Sl(O,F),this.Tl(F,O),$=F,E=V,O=L,n==7&&(this.Ab(F,this.ae)|this.Ab(this.te(F),this.ae))==(1|this.Go)))return void(this.Ni=new h.Md(5,f,-1))}this.mn(f,x)}else{for(x=-1,k=0,j=c.size;k<j;k++)if((F=c.get(k))!=-1){x=F;break}m!=x&&this.mn(f,x)}}}}},s.prototype.WN=function(){for(var n=-1,l=this.$g(),c=this.Re;c!=-1;c=this.Rf(c)){var d=this.Me(c);if(d!=-1){var f=d;do{if(this.Ab(f,l)!=1){var m=this.mI();this.Dt(m,f),this.BJ(m,n),n!=-1&&this.DJ(n,m),n=m;var b=0,x=f;do b|=this.Ab(x,this.ae),this.$W(x,m),this.Kb(x,l,1),x=this.jc(x);while(x!=f);this.Vg(m,b)}f=this.jc(this.xa(f))}while(f!=d)}}m=this.mI(),this.Dt(m,-1),this.BJ(m,n),n!=-1&&this.DJ(n,m),this.Hl=m,this.Yn=h.be.qf(this.ye.size,NaN),this.kA=h.be.qf(this.ye.size,NaN),this.AJ(this.Hl,1/0),this.CJ(this.Hl,1/0),this.Jg(l)},s.prototype.sR=function(n,l,c){if((l=l!=-1?l:this.Me(n))==-1)return-1;for(n=l;;){if(this.Ab(l,c)!=1)return l;if((l=this.jc(this.xa(l)))==n)return-1}},s.prototype.yW=function(){for(var n=this.$g(),l=this.Re;l!=-1;l=this.Rf(l))for(var c=-1;;){var d=this.sR(l,c,n);if(d==-1)break;c=this.jc(this.xa(d));for(var f=d;;){var m=this.jc(f),b=this.te(f),x=this.xa(f);if(b==x){if(this.IP(f),c!=f&&c!=x||(c=-1),f==d||b==d){if(f==(d=m)||b==d)break;f=m;continue}}else this.Kb(f,n,1);if((f=m)==d)break}}this.Jg(n)},s.prototype.MB=function(n,l,c,d,f){this.Ug(),this.gH=f,this.g=n,this.Bq=this.g.aF(),(n=new h.ia(0)).Jb(c!=null?this.g.I(c.get(0)):this.g.fd);var m=0,b=1,x=c!=null?c.get(0):this.g.ld;for(f=1;x!=-1;){this.g.HJ(x,this.Bq,b),b<<=1;for(var $=this.g.Ob(x);$!=-1;$=this.g.Rb($))for(var E=this.g.Xa($),O=0,R=this.g.Ja($);O<R;O++)n.add(E),E=this.g.U(E);h.aa.Rn(this.g.ic(x))||(m+=this.g.da(x)),c!=null?(x=f<c.size?c.get(f):-1,f++):x=this.g.ue(x)}for(this.Go=b,this.wa=n.size,this.g.nx(n,this.wa),this.jh==null&&(this.jh=new h.$c(2),this.ge=new h.$c(8),this.Kc=new h.$c(8),this.ye=new h.$c(8)),this.jh.De(this.wa),h.mp.zp(d),this.ge.De(this.wa+10),this.Kc.De(2*this.wa+32),this.ye.De(Math.max(32,m)),this.Cm=this.g.Gd(),c=new h.h,f=0,m=new h.h,c.Rc(),b=0;b<=this.wa;b++)if(b<this.wa?(E=n.get(b),this.g.D(E,m)):m.Rc(),!c.qb(m)){if(f<b){for(E=this.Ym(),R=O=-1;f<b;f++)R=n.get(f),this.g.Ra(R,this.Cm,E),x=this.jh.Ce(),this.jh.S(x,0,R),this.jh.S(x,1,O),O=x,$=this.g.bd(R),x=this.g.Qf($),x=this.La(x),this.SW(E,this.xd(E)|x);this.TW(E,O),this.cr(E,this.g.Ua(R)),this.Os!=-1&&this.iX(this.Os,E),this.lX(E,this.Os),this.Os=E,this.Re==-1&&(this.Re=E)}f=b,c.L(m)}h.mp.zp(d),this.ae=this.$g(),l==5&&(this.cg=this.$g()),l==4&&(this.xg=this.$g()),this.vP(l,n),this.Ni.Jj==0&&(this.IX(l),this.Ni.Jj==0&&(isNaN(this.lA)||this.xO()?(this.WN(),this.Ni.Jj==0&&(this.Jg(this.ae),this.ae=-1,this.gH&&this.PU(l,d))):this.pA=!0))},s.prototype.Ly=function(n){var l=this.jc(n),c=this.te(n),d=this.xa(n),f=this.jc(d),m=this.te(d);l!=d&&(this.Sl(m,l),this.Tl(l,m)),c!=d&&(this.Sl(c,f),this.Tl(f,c)),c=this.jk(n),this.Me(c)==n&&(f!=n?this.mn(c,f):this.mn(c,-1)),f=this.jk(d),this.Me(f)==d&&(l!=d?this.mn(f,l):this.mn(f,-1)),this.Kc.jd(n),this.Kc.jd(d)},s.prototype.OF=function(n,l){for(;;){if((l=n.we(l))==-1)return-1;var c=n.ja(l);if(this.$e(c)!=this.$e(this.xa(c)))return c}},s.prototype.dr=function(n,l){var c;c===void 0&&(c=!0),this.MB(n,0,null,l,c)},s.prototype.vJ=function(n,l,c){var d=new h.ia(0);d.add(l),this.MB(n,4,d,c,n.ic(l)==1736)},s.prototype.wJ=function(n,l,c){var d=new h.ia(0);d.add(l),this.MB(n,5,d,c,!0)},s.prototype.Ug=function(){this.g!=null&&(this.Bq!=-1&&(this.g.xW(this.Bq),this.Bq=-1),this.Cm!=-1&&(this.g.Td(this.Cm),this.Cm=-1),this.Cq!=-1&&(this.g.Td(this.Cq),this.Cq=-1),this.ae!=-1&&(this.Jg(this.ae),this.ae=-1),this.cg!=-1&&(this.Jg(this.cg),this.cg=-1),this.xg!=-1&&(this.Jg(this.xg),this.xg=-1),this.g=null,this.ge.mj(!0),this.jh.mj(!0),this.Os=this.Re=-1,this.Kc!=null&&this.Kc.mj(!0),this.Gi!=null&&(this.Gi.length=0),this.Di!=null&&(this.Di.length=0),this.hH!=null&&(this.hH.length=0),this.ye!=null&&this.ye.mj(!0),this.Hl=-1,this.Yn=null)},s.prototype.Me=function(n){return this.ge.T(n,2)},s.prototype.D=function(n,l){this.g.dG(this.eR(n),l)},s.prototype.xd=function(n){return this.ge.T(n,1)},s.prototype.Rf=function(n){return this.ge.T(n,4)},s.prototype.cz=function(n){return this.ge.T(n,6)},s.prototype.km=function(n){return this.ge.T(n,7)},s.prototype.js=function(n){return this.jh.T(n,1)},s.prototype.tj=function(n){return this.jh.T(n,0)},s.prototype.ng=function(n,l){return(l=this.Di[l]).size<=n?-1:l.read(n)},s.prototype.nn=function(n,l,c){(l=this.Di[l]).size<=n&&l.resize(this.ge.size,-1),l.write(n,c)},s.prototype.Dp=function(){this.Di==null&&(this.Di=[]);for(var n=h.ia.qf(this.ge.Hg,-1),l=0,c=this.Di.length;l<c;l++)if(this.Di[l]==null)return this.Di[l]=n,l;return this.Di.push(n),this.Di.length-1},s.prototype.Ep=function(n){this.Di[n]=null},s.prototype.jk=function(n){return this.Kc.T(n,1)},s.prototype.uf=function(n){return this.jk(this.xa(n))},s.prototype.xa=function(n){return this.Kc.T(n,4)},s.prototype.te=function(n){return this.Kc.T(n,5)},s.prototype.jc=function(n){return this.Kc.T(n,6)},s.prototype.$e=function(n){return this.Kc.T(n,2)},s.prototype.af=function(n){return this.hk(this.Kc.T(n,2))},s.prototype.mm=function(n){return this.Kc.T(n,7)},s.prototype.Yr=function(n,l){this.D(this.jk(n),l)},s.prototype.lm=function(n,l){this.D(this.uf(n),l)},s.prototype.dh=function(n){return this.Kc.T(n,3)&this.bO},s.prototype.Ab=function(n,l){return(l=this.Gi[l]).size<=n?-1:l.read(n)},s.prototype.Kb=function(n,l,c){(l=this.Gi[l]).size<=n&&l.resize(this.Kc.size,-1),l.write(n,c)},s.prototype.$g=function(){this.Gi==null&&(this.Gi=[]);for(var n=h.ia.qf(this.Kc.Hg,-1),l=0,c=this.Gi.length;l<c;l++)if(this.Gi[l]==null)return this.Gi[l]=n,l;return this.Gi.push(n),this.Gi.length-1},s.prototype.Jg=function(n){this.Gi[n]=null},s.prototype.IP=function(n){var l=this.$e(n),c=this.xa(n),d=this.jc(n);d==c&&(d=this.jc(d))==n&&(d=-1);var f=this.AF(l);f!==n&&f!=c||this.Dt(l,d),c=this.Yn.read(l),isNaN(c)||(this.AJ(l,NaN),this.CJ(l,NaN)),this.yx(n,!0),this.Ly(n)},s.prototype.JP=function(n){for(var l=0,c=n.size;l<c;l++){var d=n.get(l),f=this.$e(this.xa(d));this.Dt(this.$e(d),-1),this.Dt(f,-1),this.yx(d,!0),this.Ly(d)}},s.prototype.AF=function(n){return this.ye.T(n,1)},s.prototype.hk=function(n){return this.ye.T(n,2)},s.prototype.Gn=function(n){return this.ye.T(n,3)},s.prototype.dR=function(n){return this.ye.T(n,4)},s.prototype.Kp=function(n){var l=this.Yn.read(n);return isNaN(l)&&(this.kY(n),l=this.Yn.read(n)),l},s.prototype.La=function(n){return this.g.KF(n,this.Bq)},s.prototype.Le=function(n){return this.g.Pa(n,this.Cm)},s.prototype.uR=function(n){return this.g.Pa(n,this.Cq)},s.prototype.tR=function(n,l){var c=this.Me(n);if(c==-1)return-1;var d=c,f=-1,m=-1;do{if(this.uf(d)==l)return d;if(f==-1){if((f=this.Me(l))==-1)break;m=f}if(this.uf(m)==n)return this.xa(m);d=this.jc(this.xa(d)),m=this.jc(this.xa(m))}while(d!=c&&m!=f);return-1},s.prototype.pB=function(n,l){l.Or(),l=l.get();var c=new h.h;this.Yr(n,c),l.Dc(c),this.lm(n,c),l.Qc(c)},s.prototype.HO=function(n,l){if(n==l)return 0;var c=new h.h;this.lm(n,c);var d=new h.h;return this.lm(l,d),c.qb(d)?0:(l=new h.h,this.Yr(n,l),(n=new h.h).uc(c,l),(c=new h.h).uc(d,l),h.h.nu(n,c))},s.prototype.GO=function(n,l){if(n==l)return 0;var c=new h.h;this.lm(n,c);var d=new h.h;return this.lm(l,d),c.qb(d)?0:(l=new h.h,this.Yr(n,l),(n=new h.h).uc(c,l),(c=new h.h).uc(d,l),0<=c.y&&0<n.y?h.h.nu(n,c):0)},s.prototype.xO=function(){for(var n=h.lc.ox(this.lA),l=new h.h,c=new h.h,d=new h.h,f=new h.h,m=new h.h,b=this.Re;b!=-1;b=this.Rf(b)){var x=this.Me(b);if(x!=-1){var $=x;this.Yr($,l),this.lm($,c),m.uc(c,l);var E=m.Sk();do{var O=$;if(($=this.jc(this.xa($)))!=O){this.lm($,d),f.uc(d,l),O=f.Sk();var R=f.wi(m);if(R*R/(O*E)*Math.min(O,E)<=n)return!1;m.L(f),E=O,c.L(d)}}while($!=x)}}return!0},s}(),h.iu=C}(G||(G={})),function(h){var C=function(){function w(){this.j=null,this.oH=new h.h,this.pH=new h.h,this.Gj=null,this.Mv=!1,this.tl=-1}return w.prototype.cf=function(u){return u<this.Gj.length&&this.Gj[u]},w.prototype.dl=function(u,o,s,n){var l=h.aa.tf(this.j.g.ic(s));if(h.aa.tf(this.j.g.ic(o))!=2||l!=1)throw h.i.Qa();this.FP(u,o,s,n)},w.prototype.dr=function(u,o){this.j==null&&(this.j=new h.iu),this.j.dr(u,o)},w.prototype.Ft=function(u,o,s){for(h.Tk.V(u,o,s,!0),o=u.ld;o!=-1;o=u.ue(o))u.ic(o)==1736&&h.rn.V(u,o,-1,this.Mv,s);this.dr(u,s)},w.prototype.ME=function(u,o,s,n,l){var c=this.j.g;if(c.ic(u)==1736)for(u=c.Ob(u);u!=-1;u=c.Rb(u)){var d=c.Xa(u);this.j.Le(d),this.j.Le(c.U(d));var f=this.j.uR(d);if(f!=-1){var m=this.j.Ab(f,s);if(m!=1&&m!=2)if(this.cf(this.j.af(f))){this.j.Kb(f,s,1),m=c.vf(o,-1);var b=f,x=this.j.Le(d),$=1;do{var E=this.sm(d,l);c.ij(m,E),n!=-1&&this.j.nn(x,n,1),this.j.Kb(b,s,1),b=this.j.jc(b);do var O=(E=$==1?c.U(d):c.Ma(d))!=-1?this.j.Le(E):-1;while(O==x);var R=this.j.jk(b);if(R!=O){do O=(E=$==1?c.Ma(d):c.U(d))!=-1?this.j.Le(E):-1;while(O==x);R!=O?(O=R,E=this.j.tj(this.j.km(O))):$=-$}x=O,d=E}while(b!=f);c.kn(m,!0)}else this.j.Kb(f,s,2)}}},w.prototype.eF=function(){for(var u=this.j.$g(),o=new h.ia(0),s=this.j.Re;s!=-1;s=this.j.Rf(s)){var n=this.j.Me(s),l=n;if(n!=-1)do{if(this.j.Ab(l,u)!=1){var c=this.j.xa(l);this.j.Kb(c,u,1),this.j.Kb(l,u,1),this.cf(this.j.af(l))&&this.cf(this.j.af(c))&&o.add(l)}l=this.j.jc(this.j.xa(l))}while(l!=n)}this.j.Jg(u),this.j.JP(o)},w.prototype.sm=function(u,o){return o==-1?u:this.aS(u,o)},w.prototype.aS=function(u,o){var s=this.j.g,n=this.j.km(this.j.Le(u));do{var l=this.j.tj(n);if(s.Qf(s.bd(l))==o)return l;n=this.j.js(n)}while(n!=-1);return u},w.prototype.Ot=function(u,o,s){this.eF();var n=this.j.g,l=n.Ig(1736),c=this.j.$g();return this.uK(u,o,l,s,c,-1),this.j.Jg(c),h.rn.V(n,l,1,this.Mv,null),l},w.prototype.uK=function(u,o,s,n,l,c){for(this.ME(u,s,l,c,n),o!=-1&&this.ME(o,s,l,c,n),u=this.j.g,o=this.j.Re;o!=-1;o=this.j.Rf(o)){var d=this.j.Me(o);if(d!=-1){var f=d;do{var m=this.j.Ab(f,l);if(m!=1&&m!=2)if(this.cf(this.j.af(f))){m=u.vf(s,-1);var b=f;do{var x=this.j.mm(b);x!=-1?x=this.j.tj(x):(x=this.j.tj(this.j.mm(this.j.xa(b))),x=this.j.g.U(x)),x=this.sm(x,n),u.ij(m,x),this.j.Kb(b,l,1),c!=-1&&(x=this.j.Le(x),this.j.nn(x,c,1)),b=this.j.jc(b)}while(b!=f);u.kn(m,!0)}else this.j.Kb(f,l,2);f=this.j.jc(this.j.xa(f))}while(f!=d)}}},w.prototype.aY=function(u,o,s){var n=this.j.g,l=n.Ig(1736),c=n.Ig(1607),d=n.Ig(550);this.eF();var f=-1,m=this.j.$g(),b=this.j.Dp();for(this.uK(u,o,l,s,m,b),u=this.j.Re;u!=-1;u=this.j.Rf(u))if((o=this.j.Me(u))!=-1){var x=o;do{var $=this.j.Ab(x,m),E=this.j.Ab(this.j.xa(x),m);if(($|=E)==2)if($=this.j.dh(x),this.cf($)){var O=n.vf(c,-1),R=x;$=this.Yw(u,n),$=this.sm($,s),n.ij(O,$),this.j.nn(u,b,1);do{if($=this.j.uf(R),E=this.Yw($,n),E=this.sm(E,s),n.ij(O,E),this.j.Kb(R,m,1),this.j.Kb(this.j.xa(R),m,1),this.j.nn($,b,1),R=this.j.jc(R),$=this.j.Ab(R,m),($|=E=this.j.Ab(this.j.xa(R),m))!=2)break;if($=this.j.dh(R),!this.cf($)){this.j.Kb(R,m,1),this.j.Kb(this.j.xa(R),m,1);break}}while(R!=x)}else this.j.Kb(x,m,1),this.j.Kb(this.j.xa(x),m,1);x=this.j.jc(this.j.xa(x))}while(x!=o)}for(u=this.j.Re;u!=-1;u=this.j.Rf(u))($=this.j.ng(u,b))!=1&&($=this.j.xd(u),this.cf($)&&(f==-1&&(f=n.vf(d,-1)),(o=this.j.km(u))!=-1&&(o=this.j.tj(o),$=this.sm(o,s),n.ij(f,$))));return this.j.Ep(b),this.j.Jg(m),h.rn.V(n,l,1,this.Mv,null),(s=[])[0]=d,s[1]=c,s[2]=l,s},w.prototype.Yw=function(u,o){var s=-1;for(u=this.j.km(u);u!=-1;u=this.j.js(u)){var n=this.j.tj(u);s==-1&&(s=n);var l=this.j.La(o.Qf(o.bd(n)));if(this.cf(l)){s=n;break}}return s},w.prototype.lB=function(u,o){for(var s=this.jl(o),n=this.j.jk(o),l=this.j.uf(o),c=0,d=0,f=this.j.km(n);f!=-1;f=this.j.js(f)){var m=this.j.tj(f),b=u.bd(m),x=this.j.La(u.Qf(b));b=u.Xa(b),(x=!!(x&s))&&b==m&&(this.tl=o);var $=u.U(m);$!=-1&&this.j.Le($)==l?(c++,x&&(this.tl===-1&&b==$&&(m=this.j.jc(o),this.cf(this.jl(m))&&(this.tl=m)),d++)):(m=u.Ma(m))!=-1&&this.j.Le(m)==l&&(c--,x&&(this.tl===-1&&b===m&&(m=this.j.jc(o),this.cf(this.jl(m))&&(this.tl=m)),d--))}return this.j.D(n,this.oH),this.j.D(l,this.pH),(d!=0?d:c)*(u=h.h.tb(this.oH,this.pH))},w.prototype.jl=function(u){return this.j.dh(u)|this.j.af(u)|this.j.af(this.j.xa(u))},w.prototype.xK=function(u){for(var o=this.j.xa(this.j.te(u)),s=-1;o!=u;){if(this.cf(this.jl(o))){if(s!=-1)return-1;s=o}o=this.j.xa(this.j.te(o))}return s!=-1?this.j.xa(s):-1},w.prototype.yK=function(u){for(var o=this.j.xa(this.j.jc(u)),s=-1;o!=u;){if(this.cf(this.jl(o))){if(s!=-1)return-1;s=o}o=this.j.xa(this.j.jc(o))}return s!=-1?this.j.xa(s):-1},w.prototype.mJ=function(u,o,s,n,l){var c=this.j.g,d=u,f=this.j.xa(d);this.j.Kb(d,s,1),this.j.Kb(f,s,1),this.tl=-1;for(var m=this.lB(c,d),b=d,x=-1,$=!1,E=1;;){var O=this.j.te(d);if(O==f)break;if(f=this.j.jc(f),this.j.xa(O)!=f){if((d=this.xK(d))==-1){$=!0;break}f=this.j.xa(d)}else d=O;if(d==u){x=u;break}if(O=this.jl(d),!this.cf(O))break;this.j.Kb(d,s,1),this.j.Kb(f,s,1),b=d,m+=this.lB(c,d),E++}if(x==-1)for(d=u,f=this.j.xa(d),x=d;(u=this.j.jc(d))!=f;){if(f=this.j.te(f),this.j.xa(u)!=f){if((d=this.yK(d))==-1){$=!0;break}f=this.j.xa(d)}else d=u;if(O=this.jl(d),!this.cf(O))break;this.j.Kb(d,s,1),this.j.Kb(f,s,1),x=d,m+=this.lB(c,d),E++}else if(this.tl!=-1&&(b=this.tl,x=this.j.te(this.tl),this.j.xa(x)!=this.j.jc(this.j.xa(b))&&(x=this.xK(b))==-1))throw h.i.Qa();for(0<=m||(d=x,x=this.j.xa(b),b=this.j.xa(d)),s=c.vf(o,-1),d=b,b=this.j.jk(b),$=this.j.uf(x)==b&&$,m=this.Yw(b,c),m=this.sm(m,l),c.ij(s,m),n!=-1&&this.j.nn(b,n,1),b=0,E=$?h.O.truncate((E+1)/2):-1;u=this.j.uf(d),m=this.Yw(u,c),m=this.sm(m,l),c.ij(s,m),b++,n!=-1&&this.j.nn(u,n,1),$&&b==E&&(s=c.vf(o,-1),c.ij(s,m)),d!=x;)if(u=this.j.jc(d),this.j.te(this.j.xa(d))!=this.j.xa(u)){if((d=this.yK(d))==-1)throw h.i.Qa()}else d=u},w.prototype.Pt=function(u){for(var o=this.j.g.Ig(1607),s=this.j.$g(),n=this.j.Re;n!=-1;n=this.j.Rf(n)){var l=this.j.Me(n),c=l;do this.j.Ab(c,s)!=1&&this.cf(this.jl(c))&&this.mJ(c,o,s,-1,u),c=this.j.jc(this.j.xa(c));while(c!=l)}return this.j.Jg(s),o},w.prototype.bY=function(u){for(var o=this.j.g,s=o.Ig(1607),n=o.Ig(550),l=this.j.$g(),c=this.j.Dp(),d=-1,f=this.j.Re;f!=-1;f=this.j.Rf(f)){var m=this.j.Me(f),b=m;do{var x=this.j.Ab(b,l);x!=1&&(x=this.jl(b),this.cf(x)&&this.mJ(b,s,l,c,u)),b=this.j.jc(this.j.xa(b))}while(b!=m)}for(f=this.j.Re;f!=-1;f=this.j.Rf(f))(x=this.j.ng(f,c))!=1&&(x=this.j.xd(f),this.cf(x)&&(d==-1&&(d=o.vf(n,-1)),(m=this.j.km(f))!=-1&&(m=this.j.tj(m),m=this.sm(m,u),o.ij(d,m))));return this.j.Jg(l),this.j.Ep(c),(u=[])[0]=n,u[1]=s,u},w.prototype.mr=function(){for(var u=this.j.g,o=u.Ig(550),s=u.vf(o,-1),n=this.j.Re;n!=-1;n=this.j.Rf(n))if(this.cf(this.j.xd(n))){for(var l=-1,c=this.j.km(n);c!=-1;c=this.j.js(c)){var d=this.j.tj(c);l==-1&&(l=d);var f=this.j.La(u.Qf(u.bd(d)));if(this.cf(f)){l=d;break}}u.ij(s,l)}return o},w.prototype.bq=function(u){this.Gj=[];for(var o=0;o<u;o++)this.Gj[o]=!1},w.aW=function(u,o,s){var n=u.Ia(),l=Array(1e3);h.O.$u(l,null);var c=h.O.lg(1e3,0),d=u.I(),f=!0,m=o.Db()==2;if(o.Db()!=1&&o.Db()!=2)throw h.i.Qa();for(var b=0;b<d;){var x=h.O.truncate(u.lW(l,b)-b);m?h.hd.sK(o,l,x,s,c):h.hd.tK(o,l,x,s,c);for(var $=0,E=0;E<x;E++)c[E]==0&&(f&&(f=!1,n.Fd(u,0,b)),$!=E&&n.Fd(u,b+$,b+E),$=E+1);f||$==x||n.Fd(u,b+$,b+x),b+=x}return f?u:n},w.zG=function(u,o,s){return u instanceof h.de?w.aW(u,o,s):o instanceof h.Sa?u.B()||o.B()?u.Ia():h.Tk.zU(s,u,o)?h.Tk.CO(u,o):u.Ia():w.bW(u,o,s)},w.Av=function(u,o,s,n){var l=new h.l;u.A(l);var c=new h.l;o.A(c);var d=new h.l;if(d.K(l),d.Zb(c),s=h.ta.Wd(s,d,!0),(d=new h.l).K(c),c=h.ta.Er(s),d.W(c,c),!l.isIntersecting(d)){if(u.Db()<=o.Db())return w.ki(w.Xe(u.Ia()),u,"&");if(u.Db()>o.Db())return w.ki(w.Xe(o.Ia()),u,"&")}return c=new w,d=(l=new h.gd).Ib(w.Xe(u)),o=l.Ib(w.Xe(o)),c.Ft(l,s,n),n=c.Av(d,o),u=w.ki(l.Ne(n),u,"&"),h.aa.Hc(u.getType())&&(u.Ch(2,s),u.getType()==1736&&u.fm()),u},w.bW=function(u,o,s){if(u.B()||o.B())return u.Ia();var n=[null],l=[0],c=o.Db()==2;if(o.Db()!=1&&o.Db()!=2)throw h.i.Qa();return n[0]=u.D(),c?h.hd.sK(o,n,1,s,l):h.hd.tK(o,n,1,s,l),l[0]==0?u.Ia():u},w.prototype.LU=function(u,o,s,n,l){if(u.B())return u;var c=new h.gd;return u=c.Ib(u),this.Mk(c,u,o,s,n,l)},w.prototype.NU=function(u,o,s,n,l,c){if(l&&u.ic(o)!=550){var d=new h.RC;d.TX(u,s),d.Ng?(h.Tk.V(u,s,c,!0),l=!1):this.j.yy(s)}else h.Tk.V(u,s,c,!0),l=!1;if(n&&u.ic(o)!=550?this.j.wJ(u,o,c):this.j.vJ(u,o,c),this.j.pA)return this.j.Ug(),this.j=null,this.Mk(u,o,s,n,!1,c);if(this.j.yy(NaN),c=this.j.La(o),this.bq(c+1),this.Gj[c]=!0,u.ic(o)==1736||n&&u.ic(o)!=550)return u.Yo(o,0),o=this.Ot(o,-1,-1),(u=u.Ne(o)).Yo(0),l?u.Ch(1,0):(u.Ch(2,s),u.fm()),u;if(u.ic(o)==1607)return o=this.Pt(-1),u=u.Ne(o),l||u.Ch(2,s),u;if(u.ic(o)==550)return o=this.mr(),u=u.Ne(o),l||u.Ch(2,s),u;throw h.i.Qa()},w.prototype.Mk=function(u,o,s,n,l,c){this.j=new h.iu;try{return this.NU(u,o,s,n,l,c)}finally{this.j.Ug()}},w.Mk=function(u,o,s,n,l){return new w().LU(u,o,s,n,l)},w.prototype.MU=function(u,o,s,n){this.Mv=u,this.j=new h.iu,u=o.In(s);var l=o.ic(s);if(u!=1||l==550?this.j.vJ(o,s,n):this.j.wJ(o,s,n),!this.j.pA)if(this.j.yy(NaN),n=this.j.La(s),this.bq(n+1),this.Gj[n]=!0,o.ic(s)==1736||u==1&&o.ic(s)!=550)o.Yo(s,0),n=this.Ot(s,-1,-1),o.hC(n,s),o.BB(n);else if(o.ic(s)==1607)n=this.Pt(-1),o.hC(n,s),o.BB(n);else{if(o.ic(s)!=550)throw h.i.fa("internal error");n=this.mr(),o.hC(n,s),o.BB(n)}},w.prototype.im=function(u,o){var s=h.aa.tf(this.j.g.ic(u)),n=h.aa.tf(this.j.g.ic(o));if(s>n)return u;var l=this.j.La(u),c=this.j.La(o);if(this.bq(1+(l|c)),this.Gj[this.j.La(u)]=!0,s==2&&n==2)return this.Ot(u,o,-1);if(s==1&&n==2||s==1&&n==1)return this.Pt(-1);if(s==0)return this.mr();throw h.i.Qa()},w.prototype.Av=function(u,o){var s=h.aa.tf(this.j.g.ic(u)),n=h.aa.tf(this.j.g.ic(o)),l=this.j.La(u),c=this.j.La(o);if(this.bq(1+(l|c)),this.Gj[this.j.La(u)|this.j.La(o)]=!0,l=-1,1<this.j.g.ht.Aa&&(l=u),s==2&&n==2)return this.Ot(u,o,l);if(s==1&&0<n||n==1&&0<s)return this.Pt(l);if(s==0||n==0)return this.mr();throw h.i.Qa()},w.prototype.Pz=function(u,o){var s=h.aa.tf(this.j.g.ic(u)),n=h.aa.tf(this.j.g.ic(o)),l=this.j.La(u),c=this.j.La(o);if(this.bq(1+(l|c)),this.Gj[this.j.La(u)|this.j.La(o)]=!0,l=-1,1<this.j.g.ht.Aa&&(l=u),s==2&&n==2)return this.aY(u,o,l);if(s==1&&0<n||n==1&&0<s)return this.bY(l);if(s==0||n==0)return(u=[])[0]=this.mr(),u;throw h.i.Qa()},w.prototype.ep=function(u,o){var s=h.aa.tf(this.j.g.ic(u)),n=h.aa.tf(this.j.g.ic(o)),l=this.j.La(u),c=this.j.La(o);if(this.bq(1+(l|c)),this.Gj[this.j.La(u)]=!0,this.Gj[this.j.La(o)]=!0,s==2&&n==2)return this.Ot(u,o,-1);if(s==1&&n==1)return this.Pt(-1);if(s==0&&n==0)return this.mr();throw h.i.Qa()},w.Xe=function(u){var o=u.getType();return o==197?(o=new h.Da(u.description),u.B()||o.ad(u,!1),o):o==33?(o=new h.de(u.description),u.B()||o.add(u),o):o==322?(o=new h.Ta(u.description),u.B()||o.oc(u,!0),o):u},w.ki=function(u,o,s){var n=u.getType();return n==197?(o=new h.Da(u.description),u.B()||o.ad(u,!1),o):n!=33||s!="|"&&s!="^"?n==322?(o=new h.Ta(u.description),u.B()||o.oc(u,!0),o):n==33&&s=="-"&&o.getType()==33||n==550&&s=="&"&&o.getType()==33?(o=new h.Sa(u.description),u.B()||u.ve(0,o),o):u:(o=new h.de(u.description),u.B()||o.add(u),o)},w.im=function(u,o,s,n){if(u.B()||o.B()||u.Db()>o.Db())return w.ki(w.Xe(u),u,"-");var l=new h.l;u.A(l);var c=new h.l;if(o.A(c),!l.isIntersecting(c))return w.ki(w.Xe(u),u,"-");var d=new h.l;return d.K(l),d.Zb(c),s=h.ta.Wd(s,d,!0),c=new w,d=(l=new h.gd).Ib(w.Xe(u)),o=l.Ib(w.Xe(o)),c.Ft(l,s,n),n=c.im(d,o),n=l.Ne(n),u=w.ki(n,u,"-"),h.aa.Hc(u.getType())&&(u.Ch(2,s),u.getType()==1736&&u.fm()),u},w.VP=function(u,o,s){if(2>u.length)throw h.i.N("not enough geometries to dissolve");for(var n=0,l=0,c=u.length;l<c;l++)n=Math.max(u[l].Db(),n);var d=new h.l;d.Oa();var f=new h.gd,m=-1,b=0,x=-1;for(l=0,c=u.length;l<c;l++)if(u[l].Db()==n)if(u[l].B())x==-1&&(x=l);else{x=l,m==-1?m=f.Ib(w.Xe(u[l])):f.uN(m,w.Xe(u[l]));var $=new h.l;u[l].xc($),d.Zb($),b++}return 2>b?w.Xe(u[x]):(u=n==2,o=h.ta.Wd(n==0?o:null,d,!0),new w().Mk(f,m,o,u,!0,s))},w.Pz=function(u,o,s,n){var l=[null,null,null],c=new h.l;u.A(c);var d=new h.l;o.A(d);var f=new h.l;if(f.K(c),f.Zb(d),s=h.ta.Wd(s,f,!0),(f=new h.l).K(d),d=h.ta.Er(s),f.W(d,d),!c.isIntersecting(f)){if(u.Db()<=o.Db())return l[(u=w.ki(w.Xe(u.Ia()),u,"&")).Db()]=u,l;if(u.Db()>o.Db())return l[(u=w.ki(w.Xe(o.Ia()),u,"&")).Db()]=u,l}for(d=new w,f=(c=new h.gd).Ib(w.Xe(u)),o=c.Ib(w.Xe(o)),d.Ft(c,s,n),n=d.Pz(f,o),o=0;o<n.length;o++)d=w.ki(c.Ne(n[o]),u,"&"),h.aa.Hc(d.getType())&&(d.Ch(2,s),d.getType()==1736&&d.fm()),l[d.Db()]=d;return l},w.ep=function(u,o,s,n){if(u.Db()>o.Db())return w.ki(w.Xe(u),u,"^");if(u.Db()<o.Db()||u.B())return w.ki(w.Xe(o),u,"^");if(o.B())return w.ki(w.Xe(u),u,"^");var l=new h.l;u.A(l);var c=new h.l;o.A(c);var d=new h.l;return d.K(l),d.Zb(c),s=h.ta.Wd(s,d,!0),c=new w,d=(l=new h.gd).Ib(w.Xe(u)),o=l.Ib(w.Xe(o)),c.Ft(l,s,n),n=c.ep(d,o),u=w.ki(l.Ne(n),u,"^"),h.aa.Hc(u.getType())&&(u.Ch(2,s),u.getType()==1736&&u.fm()),u},w.prototype.LQ=function(u,o){var s=this.j.g;u=s.vf(u,-1);for(var n=o.size,l=0;l<n;l++){var c=o.get(l);s.ij(u,c)}s.kn(u,!0)},w.prototype.aX=function(u,o){for(var s=this.j.g,n=s.ld;n!=-1;n=s.ue(n))if(n==o)for(var l=s.Ob(n);l!=-1;l=s.Rb(l)){var c=s.Xa(l);if(c!=-1)for(var d=s.U(c);d!=-1;){c=this.j.Le(c);var f=this.j.Le(d);(c=this.j.tR(c,f))!=-1&&(f=this.j.xa(c),this.j.Kb(c,u,1),this.j.Kb(f,u,2)),c=d,d=s.U(c)}}},w.prototype.cW=function(u,o,s,n){s=this.j.La(s),n=this.j.La(n);var l=new h.ia(0);l.Jb(256);for(var c=this.j.g,d=this.j.$g(),f=this.j.Re;f!=-1;f=this.j.Rf(f)){var m=this.j.Me(f);if(m!=-1){var b=m;do{if(this.j.Ab(b,d)!=1){var x=b,$=b,E=!1,O=0;do{if(this.j.Kb(x,d,1),!E){var R=this.j.dh(x);R&n&&this.j.af(x)&s&&($=x,E=!0)}E&&(l.add(this.j.tj(this.j.km(this.j.jk(x)))),u!=-1&&(R=this.j.dh(x))&n&&(O|=R=this.j.Ab(x,u))),x=this.j.jc(x)}while(x!=$);E&&0<this.j.Kp(this.j.$e($))&&(x=c.Ig(1736),this.LQ(x,l),o!=-1&&c.HJ(x,o,O)),l.clear(!1)}b=this.j.jc(this.j.xa(b))}while(b!=m)}}this.j.Jg(d)},w.prototype.FP=function(u,o,s,n){this.j.yW();var l=-1;u!=-1&&(l=this.j.$g(),this.aX(l,s)),this.cW(l,u,o,s),l!=-1&&(this.j.Jg(l),l=-1);var c=this.j.g;for(u=0,l=c.ld;l!=-1;l=c.ue(l))l!=o&&l!=s&&(n.add(l),u++);n.Vd(0,u,function(d,f){return(d=c.wz(c.Ob(d)))<(f=c.wz(c.Ob(f)))?-1:d==f?0:1})},w.prototype.Ug=function(){this.j!=null&&(this.j.Ug(),this.j=null)},w}();h.Fg=C}(G||(G={})),function(h){var C=function(){function w(u){u!==void 0?this.setScale(u):this.RB()}return w.prototype.lx=function(){this.Lb=this.Gb=this.jb=this.eb=this.ab=this.bb=0},w.prototype.Nb=function(u){return this==u||u instanceof w&&this.bb==u.bb&&this.eb==u.eb&&this.Gb==u.Gb&&this.jb==u.jb&&this.ab==u.ab&&this.Lb==u.Lb},w.prototype.cc=function(){return h.O.uj(),h.O.uj(),h.O.uj(),h.O.uj(),h.O.uj(),h.O.uj()},w.prototype.Eh=function(u,o){var s=this.jb*u.x+this.ab*u.y+this.Lb;o.x=this.bb*u.x+this.eb*u.y+this.Gb,o.y=s},w.prototype.eY=function(u,o,s){for(var n=0;n<o;n++){var l=u[n].x,c=u[n].y,d=this.bb*l+this.eb*c+this.Gb;l=this.jb*l+this.ab*c+this.Lb,s[n]!=null?s[n].ma(d,l):s[n]=h.h.construct(d,l)}},w.prototype.multiply=function(u){w.multiply(this,u,this)},w.multiply=function(u,o,s){var n=u.bb*o.bb+u.jb*o.eb,l=u.eb*o.bb+u.ab*o.eb,c=u.Gb*o.bb+u.Lb*o.eb+o.Gb,d=u.bb*o.jb+u.jb*o.ab,f=u.eb*o.jb+u.ab*o.ab;u=u.Gb*o.jb+u.Lb*o.ab+o.Lb,s.bb=n,s.eb=l,s.Gb=c,s.jb=d,s.ab=f,s.Lb=u},w.prototype.Of=function(){var u=new w;return u.bb=this.bb,u.eb=this.eb,u.Gb=this.Gb,u.jb=this.jb,u.ab=this.ab,u.Lb=this.Lb,u},w.prototype.mC=function(u){if(!u.B()){for(var o=[],s=0;4>s;s++)o[s]=new h.h;u.nB(o),this.fY(o,o),u.Zw(o,4)}},w.prototype.fY=function(u,o){for(var s=0;s<u.length;s++){var n=new h.h,l=u[s];n.x=this.bb*l.x+this.eb*l.y+this.Gb,n.y=this.jb*l.x+this.ab*l.y+this.Lb,o[s]=n}},w.prototype.pS=function(u,o){u.B()||o.B()||u.R()==0||u.ca()==0?this.lx():(this.eb=this.jb=0,this.bb=o.R()/u.R(),this.ab=o.ca()/u.ca(),this.Gb=o.v-u.v*this.bb,this.Lb=o.G-u.G*this.ab)},w.prototype.dY=function(u){var o=new h.h,s=new h.h;o.ma(this.bb,this.jb),s.ma(this.eb,this.ab),o.sub(o);var n=.5*o.Sk();return o.ma(this.bb,this.jb),s.ma(this.eb,this.ab),o.add(s),u*(n>(o=.5*o.Sk())?Math.sqrt(n):Math.sqrt(o))},w.prototype.RB=function(){this.bb=1,this.jb=this.Gb=this.eb=0,this.ab=1,this.Lb=0},w.prototype.isIdentity=function(u){if(u!==void 0){var o=h.h.construct(0,1);return this.Eh(o,o),o.sub(h.h.construct(0,1)),o.Sk()>u*u?!1:(o.ma(0,0),this.Eh(o,o),!(o.Sk()>u*u)&&(o.ma(1,0),this.Eh(o,o),o.sub(h.h.construct(1,0)),o.Sk()<=u*u))}return this.bb==1&&this.ab==1&&this.eb==0&&this.Gb==0&&this.jb==0&&this.Lb==0},w.prototype.Bi=function(u){return Math.abs(this.bb*this.ab-this.jb*this.eb)<=2*u*(Math.abs(this.bb*this.ab)+Math.abs(this.jb*this.eb))},w.prototype.gg=function(u,o){this.bb=1,this.eb=0,this.Gb=u,this.jb=0,this.ab=1,this.Lb=o},w.prototype.setScale=function(u,o){o!==void 0?(this.bb=u,this.jb=this.Gb=this.eb=0,this.ab=o,this.Lb=0):this.setScale(u,u)},w.prototype.$B=function(){this.bb=0,this.eb=1,this.Gb=0,this.jb=1,this.Lb=this.ab=0},w.prototype.setRotate=function(u){this.pX(Math.cos(u),Math.sin(u))},w.prototype.pX=function(u,o){this.bb=u,this.eb=-o,this.Gb=0,this.jb=o,this.ab=u,this.Lb=0},w.prototype.shift=function(u,o){this.Gb+=u,this.Lb+=o},w.prototype.scale=function(u,o){this.bb*=u,this.eb*=u,this.Gb*=u,this.jb*=o,this.ab*=o,this.Lb*=o},w.prototype.flipX=function(u,o){this.bb=-this.bb,this.eb=-this.eb,this.Gb=u+o-this.Gb},w.prototype.flipY=function(u,o){this.jb=-this.jb,this.ab=-this.ab,this.Lb=u+o-this.Lb},w.prototype.rotate=function(u){var o=new w;o.setRotate(u),this.multiply(o)},w.prototype.inverse=function(u){if(u!==void 0){var o=this.bb*this.ab-this.eb*this.jb;o==0?u.lx():(o=1/o,u.Gb=(this.eb*this.Lb-this.Gb*this.ab)*o,u.Lb=(this.Gb*this.jb-this.bb*this.Lb)*o,u.bb=this.ab*o,u.eb=-this.eb*o,u.jb=-this.jb*o,u.ab=this.bb*o)}else this.inverse(this)},w}();h.Dd=C}(G||(G={})),function(h){var C=function(){function w(){}return w.prototype.lx=function(){this.hg=this.Lb=this.Gb=this.He=this.Fe=this.Ee=this.Ge=this.ab=this.eb=this.Ze=this.jb=this.bb=0},w.prototype.setScale=function(u,o,s){this.bb=u,this.eb=this.Ze=this.jb=0,this.ab=o,this.Fe=this.Ee=this.Ge=0,this.He=s,this.hg=this.Lb=this.Gb=0},w.prototype.setTranslate=function(u,o,s){this.bb=1,this.eb=this.Ze=this.jb=0,this.ab=1,this.Fe=this.Ee=this.Ge=0,this.He=1,this.Gb=u,this.Lb=o,this.hg=s},w.prototype.translate=function(u,o,s){this.Gb+=u,this.Lb+=o,this.hg+=s},w.prototype.mC=function(u){if(!u.B()){for(var o=new h.Nd[8],s=0;8>s;s++)o[s]=new h.Nd;u.nB(o),this.transform(o,8,o),u.Zw(o)}},w.prototype.transform=function(u,o,s){for(var n=0;n<o;n++){var l=new h.Nd,c=u[n];l.x=this.bb*c.x+this.eb*c.y+this.Ee*c.z+this.Gb,l.y=this.jb*c.x+this.ab*c.y+this.Fe*c.z+this.Lb,l.z=this.Ze*c.x+this.Ge*c.y+this.He*c.z+this.hg,s[n]=l}},w.prototype.fp=function(u){var o=new h.Nd;return o.x=this.bb*u.x+this.eb*u.y+this.Ee*u.z+this.Gb,o.y=this.jb*u.x+this.ab*u.y+this.Fe*u.z+this.Lb,o.z=this.Ze*u.x+this.Ge*u.y+this.He*u.z+this.hg,o},w.prototype.Ag=function(u){w.multiply(this,u,this)},w.multiply=function(u,o,s){var n=u.bb*o.bb+u.jb*o.eb+u.Ze*o.Ee,l=u.bb*o.jb+u.jb*o.ab+u.Ze*o.Fe,c=u.bb*o.Ze+u.jb*o.Ge+u.Ze*o.He,d=u.eb*o.bb+u.ab*o.eb+u.Ge*o.Ee,f=u.eb*o.jb+u.ab*o.ab+u.Ge*o.Fe,m=u.eb*o.Ze+u.ab*o.Ge+u.Ge*o.He,b=u.Ee*o.bb+u.Fe*o.eb+u.He*o.Ee,x=u.Ee*o.jb+u.Fe*o.ab+u.He*o.Fe,$=u.Ee*o.Ze+u.Fe*o.Ge+u.He*o.He,E=u.Gb*o.bb+u.Lb*o.eb+u.hg*o.Ee+o.Gb,O=u.Gb*o.jb+u.Lb*o.ab+u.hg*o.Fe+o.Lb;u=u.Gb*o.Ze+u.Lb*o.Ge+u.hg*o.He+o.hg,s.bb=n,s.jb=l,s.Ze=c,s.eb=d,s.ab=f,s.Ge=m,s.Ee=b,s.Fe=x,s.He=$,s.Gb=E,s.Lb=O,s.hg=u},w.inverse=function(u,o){var s=u.bb*(u.ab*u.He-u.Ge*u.Fe)-u.jb*(u.eb*u.He-u.Ge*u.Ee)+u.Ze*(u.eb*u.Fe-u.ab*u.Ee);if(s==0)throw h.i.fa("math singularity");var n=1/s;s=(u.ab*u.He-u.Ge*u.Fe)*n;var l=-(u.eb*u.He-u.Ge*u.Ee)*n,c=(u.eb*u.Fe-u.ab*u.Ee)*n,d=-(u.jb*u.He-u.Fe*u.Ze)*n,f=(u.bb*u.He-u.Ze*u.Ee)*n,m=-(u.bb*u.Fe-u.jb*u.Ee)*n,b=(u.jb*u.Ge-u.Ze*u.ab)*n,x=-(u.bb*u.Ge-u.Ze*u.eb)*n;n*=u.bb*u.ab-u.jb*u.eb;var $=-(u.Gb*s+u.Lb*l+u.hg*c),E=-(u.Gb*d+u.Lb*f+u.hg*m);u=-(u.Gb*b+u.Lb*x+u.hg*n),o.bb=s,o.jb=d,o.Ze=b,o.eb=l,o.ab=f,o.Ge=x,o.Ee=c,o.Fe=m,o.He=n,o.Gb=$,o.Lb=E,o.hg=u},w.prototype.Of=function(){var u=new w;return u.bb=this.bb,u.jb=this.jb,u.Ze=this.Ze,u.eb=this.eb,u.ab=this.ab,u.Ge=this.Ge,u.Ee=this.Ee,u.Fe=this.Fe,u.He=this.He,u.Gb=this.Gb,u.Lb=this.Lb,u.hg=this.hg,u},w}();h.JY=C}(G||(G={})),function(h){var C=function(u){function o(s){if(s!==void 0)s=u.call(this,s.cc(),s)||this;else{(s=u.call(this)||this).bg=[],s.bg[0]=0,s.Aa=1,s.uh=[];for(var n=0;10>n;n++)s.uh[n]=-1;s.uh[s.bg[0]]=0}return s.jq=!0,s}return pt(o,u),o.prototype.re=function(s){this.hasAttribute(s)||(this.uh[s]=0,this.jD())},o.prototype.removeAttribute=function(s){if(s==0)throw h.i.N("Position attribue cannot be removed");this.hasAttribute(s)&&(this.uh[s]=-1,this.jD())},o.prototype.reset=function(){this.bg[0]=0,this.Aa=1;for(var s=0;s<this.uh.length;s++)this.uh[s]=-1;this.uh[this.bg[0]]=0,this.jq=!0},o.prototype.EF=function(){return w.kz().add(this)},o.og=function(){return w.kz().$R()},o.prototype.tM=function(){var s=this.cc();return new h.ra(s,this)},o.prototype.jD=function(){for(var s=this.Aa=0,n=0;10>s;s++)0<=this.uh[s]&&(this.bg[n]=s,this.uh[s]=n,n++,this.Aa++);this.jq=!0},o.prototype.cc=function(){return this.jq&&(this.wl=this.An(),this.jq=!1),this.wl},o.prototype.Nb=function(s){if(s==null)return!1;if(s==this)return!0;if(!(s instanceof o)||s.Aa!=this.Aa)return!1;for(var n=0;n<this.Aa;n++)if(this.bg[n]!=s.bg[n])return!1;return this.jq==s.jq},o.prototype.GG=function(s){if(s.Aa!=this.Aa)return!1;for(var n=0;n<this.Aa;n++)if(this.bg[n]!=s.bg[n])return!1;return!0},o.Iw=function(s,n){for(var l=[],c=0;c<s.Aa;c++)l[c]=-1;c=0;for(var d=s.Aa;c<d;c++)l[c]=n.Pf(s.kd(c));return l},o.BR=function(s,n){return(s=new o(s)).re(n),s.EF()},o.CR=function(s,n){for(var l=null,c=0;10>c;c++)!s.hasAttribute(c)&&n.hasAttribute(c)&&(l==null&&(l=new o(s)),l.re(c));return l!=null?l.EF():s},o}(h.ra);h.ee=C;var w=function(){function u(){this.map=[];var o=new C;this.add(o),(o=new C).re(1),this.add(o)}return u.kz=function(){return u.bL},u.prototype.$R=function(){return u.ft},u.prototype.add=function(o){var s=o.cc();if(u.ft!=null&&u.ft.cc()==s&&o.GG(u.ft))return u.ft;if(u.Dw!=null&&u.Dw.cc()==s&&o.GG(u.Dw))return u.Dw;var n=null;return this.map[s]!==void 0&&(n=this.map[s]),n==null&&((n=o.tM()).Aa==1?u.ft=n:n.Aa==2&&n.kd(1)==1?u.Dw=n:this.map[s]=n),n},u.bL=new u,u}()}(G||(G={}));var X1={feet:9002,kilometers:9036,meters:9001,miles:9093,"nautical-miles":9030,yards:9096},Q1={acres:109402,ares:109463,hectares:109401,"square-feet":109405,"square-kilometers":109414,"square-meters":109404,"square-miles":109439,"square-yards":109442},Oo=new(function(){function h(){this.RM=50,this.np=new Map,this.gj=[]}return h.prototype.clear=function(){this.gj.length=0,this.np.clear()},h.prototype.delete=function(C){return!!this.np.delete(C)&&(this.gj.splice(this.gj.indexOf(C),1),!0)},h.prototype.get=function(C){var w=this.np.get(C);if(w!==void 0)return this.gj[0]!==C&&(this.gj.splice(this.gj.indexOf(C),1),this.gj.unshift(C)),w},h.prototype.has=function(C){return this.np.has(C)},h.prototype.set=function(C,w){return this.get(C)!==void 0&&this.delete(C),this.gj.unshift(C),this.np.set(C,w),this.oM(),this},h.prototype.oM=function(){for(;this.gj.length&&this.gj.length>this.RM;){var C=this.gj.pop();this.np.delete(C)}},h}()),_e=((yi={}).convertJSONToGeometry=function(h){return G.$b.fP(h)},yi.hasM=function(h){return h.hasAttribute(G.Ih.M)},yi.hasZ=function(h){return h.hasAttribute(G.Ih.Z)},yi.getPointX=function(h){return h.Lg()},yi.getPointY=function(h){return h.ih()},yi.getPointZ=function(h){return h.bS()},yi.getPointM=function(h){return h.zR()},yi.getXMin=function(h){return h.es()},yi.getYMin=function(h){return h.gs()},yi.getXMax=function(h){return h.ds()},yi.getYMax=function(h){return h.fs()},yi.getZExtent=function(h){return h.Tg(G.Ih.Z,0)},yi.getMExtent=function(h){return h.Tg(G.Ih.M,0)},yi.exportPaths=function(h){var C=[],w=h.da(),u=null,o=null,s=h.hasAttribute(G.Ih.Z),n=h.hasAttribute(G.Ih.M);s&&(u=h.ub(G.Ih.Z)),n&&(o=h.ub(G.Ih.M));for(var l=new G.h,c=0;c<w;c++){for(var d=h.Ba(c),f=h.Ja(c),m=0,b=0,x=NaN,$=NaN,E=NaN,O=NaN,R=h.dc(c),k=[],j=d;j<d+f;j++){h.D(j,l),O=E=NaN;var F=[l.x,l.y];s&&(E=u.get(j),F.push(E)),n&&(O=o.get(j),F.push(O)),j==d&&R&&(m=l.x,b=l.y,x=E,$=O),k.push(F)}!R||m==l.x&&b==l.y&&(!s||isNaN(x)&&isNaN(E)||x==E)&&(!n||isNaN($)&&isNaN(O)||$==O)||k.push(k[0].slice(0)),C.push(k)}return C},yi.exportPathsFlat=function(){},yi.exportPoints=function(h){var C=h.hasAttribute(G.Ih.Z),w=h.hasAttribute(G.Ih.M),u=null,o=null;C&&(u=h.ub(G.Ih.Z)),w&&(o=h.ub(G.Ih.M));for(var s=new G.h,n=h.I(),l=[],c=0;c<n;c++){h.D(c,s);var d=[s.x,s.y];C&&d.push(u.get(c)),w&&d.push(o.get(c)),l.push(d)}return l},yi.exportPointsFlat=function(){},yi),Na=new Map;return function(){function h(){}return h.buffer=xi,h.clip=A,h.contains=N,h.convexHull=Ee,h.crosses=D,h.cut=P,h.densify=aw,h.difference=Ie,h.disjoint=ie,h.distance=z,h.equals=q,h.extendedSpatialReferenceInfo=I,h.generalize=ow,h.geodesicArea=hw,h.geodesicBuffer=$s,h.geodesicDensify=Z1,h.geodesicLength=cw,h.intersect=je,h.intersects=J,h.isSimple=ge,h.nearestCoordinate=bt,h.nearestVertex=Pr,h.nearestVertices=nw,h.offset=Ve,h.overlaps=oe,h.planarArea=lw,h.planarLength=uw,h.relate=ue,h.simplify=Se,h.symmetricDifference=ke,h.touches=ee,h.union=st,h.within=X,h.rotate=G.Ex.rotate,h.flipHorizontal=G.Ex.JQ,h.flipVertical=G.Ex.KQ,h.intersectLinesToPoints=vw,h.ExtendedParams=G.yC,h.clearDefaultSpatialReferenceTolerance=gw,h.changeDefaultSpatialReferenceTolerance=mw,h._enableProjection=pw,h._project=yw,h._getTransformation=dw,h._getTransformationBySuitability=fw,h}()}var i=t();i!==void 0&&(e.exports=i)}(mA)),mA.exports}var Wz=qme();const it=Gme(Wz),Hme=Bme({__proto__:null,default:it},[Wz]),Wme=Object.freeze(Object.defineProperty({__proto__:null,G:it,g:Hme},Symbol.toStringTag,{value:"Module"})),mt={convertToGEGeometry:Jme,exportPoint:Zme,exportPolygon:Kme,exportPolyline:Yme,exportMultipoint:Xme,exportExtent:Qme};function Jme(e,t){if(t==null)return null;let i="cache"in t?t.cache._geVersion:void 0;return i==null&&(i=e.convertJSONToGeometry(t),"cache"in t&&(t.cache._geVersion=i)),i}function Zme(e,t,i){const r=e.hasZ(t),a=e.hasM(t),p=new Be({x:e.getPointX(t),y:e.getPointY(t),spatialReference:i});return r&&(p.z=e.getPointZ(t)),a&&(p.m=e.getPointM(t)),p.cache._geVersion=t,p}function Kme(e,t,i){const r=new en({rings:e.exportPaths(t),hasZ:e.hasZ(t),hasM:e.hasM(t),spatialReference:i});return r.cache._geVersion=t,r}function Yme(e,t,i){const r=new Js({paths:e.exportPaths(t),hasZ:e.hasZ(t),hasM:e.hasM(t),spatialReference:i});return r.cache._geVersion=t,r}function Xme(e,t,i){const r=new C1({hasZ:e.hasZ(t),hasM:e.hasM(t),points:e.exportPoints(t),spatialReference:i});return r.cache._geVersion=t,r}function Qme(e,t,i){const r=e.hasZ(t),a=e.hasM(t),p=new Ct({xmin:e.getXMin(t),ymin:e.getYMin(t),xmax:e.getXMax(t),ymax:e.getYMax(t),spatialReference:i});if(r){const y=e.getZExtent(t);p.zmin=y.vmin,p.zmax=y.vmax}if(a){const y=e.getMExtent(t);p.mmin=y.vmin,p.mmax=y.vmax}return p.cache._geVersion=t,p}const ege=Object.freeze(Object.defineProperty({__proto__:null,hydratedAdapter:mt},Symbol.toStringTag,{value:"Module"}));function wt(e){const t=Array.isArray(e)?e[0].spatialReference:e.spatialReference;return t?nd(qe,t):qe.WGS84}function tge(e){return it.extendedSpatialReferenceInfo(e)}function ige(e,t){return et(e),it.clip(mt,wt(e),e,t)}function rge(e,t){return et(e),it.cut(mt,wt(e),e,t)}function sge(e,t){return et(e),et(t),it.contains(mt,wt(e),e,t)}function nge(e,t){return et(e),et(t),it.crosses(mt,wt(e),e,t)}function Jz(e,t,i){return et(e),et(t),it.distance(mt,wt(e),e,t,i)}function oge(e,t){return et(e),et(t),it.equals(mt,wt(e),e,t)}function age(e,t){return et(e),et(t),it.intersects(mt,wt(e),e,t)}function lge(e,t){return et(e),et(t),it.touches(mt,wt(e),e,t)}function uge(e,t){return et(e),et(t),it.within(mt,wt(e),e,t)}function hge(e,t){return et(e),et(t),it.disjoint(mt,wt(e),e,t)}function cge(e,t){return et(e),et(t),it.overlaps(mt,wt(e),e,t)}function pge(e,t,i){return et(e),et(t),it.relate(mt,wt(e),e,t,i)}function dge(e){return et(e),it.isSimple(mt,wt(e),e)}function fge(e){return et(e),it.simplify(mt,wt(e),e)}function yge(e,t=!1){return it.convexHull(mt,wt(e),e,t)}function mge(e,t){return et(t),it.difference(mt,wt(e),e,t)}function gge(e,t){return et(t),it.symmetricDifference(mt,wt(e),e,t)}function vge(e,t){return et(t),it.intersect(mt,wt(e),e,t)}function wge(e){return it.union(mt,wt(e),e)}function bge(e,t,i,r,a,p){return it.offset(mt,wt(e),e,t,i,r,a,p)}function _ge(e,t,i,r=!1){return it.buffer(mt,wt(e),e,t,i,r)}function Sge(e,t,i,r,a,p){return it.geodesicBuffer(mt,wt(e),e,t,i,r,a,p)}function xge(e,t,i=!0){return et(e),it.nearestCoordinate(mt,wt(e),e,t,i)}function Tge(e,t){return et(e),it.nearestVertex(mt,wt(e),e,t)}function Mge(e,t,i,r){return et(e),it.nearestVertices(mt,wt(e),e,t,i,r)}function jx(e){var t;return"xmin"in e?"center"in e?e.center:null:"x"in e?e:"extent"in e?((t=e.extent)==null?void 0:t.center)??null:null}function $ge(e,t,i){if(e==null)throw new id;const r=e.spatialReference;if((i=i??jx(e))==null)throw new id;const a=e.constructor.fromJSON(it.rotate(e,t,i));return a.spatialReference=r,a}function Ege(e,t){if(e==null)throw new id;const i=e.spatialReference;if((t=t??jx(e))==null)throw new id;const r=e.constructor.fromJSON(it.flipHorizontal(e,t));return r.spatialReference=i,r}function Ige(e,t){if(e==null)throw new id;const i=e.spatialReference;if((t=t??jx(e))==null)throw new id;const r=e.constructor.fromJSON(it.flipVertical(e,t));return r.spatialReference=i,r}function Age(e,t,i,r){return et(e),it.generalize(mt,wt(e),e,t,i,r)}function Cge(e,t,i){return et(e),it.densify(mt,wt(e),e,t,i)}function Oge(e,t,i,r=0){return et(e),it.geodesicDensify(mt,wt(e),e,t,i,r)}function Pge(e,t){return et(e),it.planarArea(mt,wt(e),e,t)}function kge(e,t){return et(e),it.planarLength(mt,wt(e),e,t)}function Rge(e,t,i){return et(e),it.geodesicArea(mt,wt(e),e,t,i)}function Nge(e,t,i){return et(e),it.geodesicLength(mt,wt(e),e,t,i)}function Lge(e,t){return it.intersectLinesToPoints(mt,wt(e),e,t)}function Dge(e,t){it.changeDefaultSpatialReferenceTolerance(e,t)}function jge(e){it.clearDefaultSpatialReferenceTolerance(e)}let id=class extends Error{constructor(){super("Illegal Argument Exception")}};const _7e=Object.freeze(Object.defineProperty({__proto__:null,buffer:_ge,changeDefaultSpatialReferenceTolerance:Dge,clearDefaultSpatialReferenceTolerance:jge,clip:ige,contains:sge,convexHull:yge,crosses:nge,cut:rge,densify:Cge,difference:mge,disjoint:hge,distance:Jz,equals:oge,extendedSpatialReferenceInfo:tge,flipHorizontal:Ege,flipVertical:Ige,generalize:Age,geodesicArea:Rge,geodesicBuffer:Sge,geodesicDensify:Oge,geodesicLength:Nge,intersect:vge,intersectLinesToPoints:Lge,intersects:age,isSimple:dge,nearestCoordinate:xge,nearestVertex:Tge,nearestVertices:Mge,offset:bge,overlaps:cge,planarArea:Pge,planarLength:kge,relate:pge,rotate:$ge,simplify:fge,symmetricDifference:gge,touches:lge,union:wge,within:uge},Symbol.toStringTag,{value:"Module"})),rw={left:"esri-icon-left",plus:"esri-icon-plus",right:"esri-icon-right",table:"esri-icon-table",trash:"esri-icon-trash",zoomInMagnifyingGlass:"esri-icon-zoom-in-magnifying-glass"},S7e=xe.ofType({key:"type",defaultKeyValue:"button",base:I2,typeMap:{button:L1,toggle:SS}}),x7e=new L1({icon:"magnifying-glass-plus",id:"zoom-to-feature",title:"{messages.zoom}",className:rw.zoomInMagnifyingGlass}),Fge=new L1({icon:"trash",id:"remove-selected-feature",title:"{messages.remove}",className:rw.trash}),T7e=new L1({icon:"magnifying-glass-plus",id:"zoom-to-clustered-features",title:"{messages.zoom}",className:rw.zoomInMagnifyingGlass}),M7e=new SS({icon:"table",id:"browse-clustered-features",title:"{messages.browseClusteredFeatures}",className:rw.table,value:!1});let ch=class extends he{constructor(t){super(t),this.geometries=[],this.outSpatialReference=null,this.transformation=null,this.transformForward=null}toJSON(){const t=this.geometries.map(a=>a.toJSON()),i=this.geometries[0],r={};return r.outSR=Kg(this.outSpatialReference),r.inSR=Kg(i.spatialReference),r.geometries=JSON.stringify({geometryType:O1(i),geometries:t}),this.transformation&&(r.transformation=this.transformation.wkid||JSON.stringify(this.transformation)),this.transformForward!=null&&(r.transformForward=this.transformForward),r}};v([S()],ch.prototype,"geometries",void 0),v([S({type:qe,json:{read:{source:"outSR"}}})],ch.prototype,"outSpatialReference",void 0),v([S()],ch.prototype,"transformation",void 0),v([S()],ch.prototype,"transformForward",void 0),ch=v([H("esri.rest.support.ProjectParameters")],ch);const Zz=ch,zge=di(Zz);async function Uge(e,t,i){t=zge(t);const r=GL(e),a={...r.query,f:"json",...t.toJSON()},p=t.outSpatialReference,y=O1(t.geometries[0]),g=Cse(a,i);return kt(r.path+"/project",g).then(({data:{geometries:_}})=>BL(_,y,p))}const Kz=()=>ye.getLogger("esri.widgets.support.geolocationUtils"),Vge={maximumAge:0,timeout:15e3,enableHighAccuracy:!0};function Gge(){const e=!!ne("esri-geolocation");return e||Kz().warn("geolocation-unsupported","Geolocation unsupported."),e}function Bge(){const e=window.isSecureContext;return e||Kz().warnOnce("insecure-context","Geolocation requires a secure origin."),e}function qge(){return Gge()&&Bge()}function Hge(e){return e??(e=Vge),new Promise((i,r)=>{setTimeout(()=>r(new Y("geolocation:timeout","getting the current geolocation position timed out")),15e3),navigator.geolocation.getCurrentPosition(i,r,e??void 0)})}function Wge(e,t){const{position:i,view:r}=e,a=Jge(i),p=a==null?void 0:a.coords;if(!p)throw new Y("geometry-service:no-coords","Geolocation has no coordinates");return Kge(Zge(p),r,t)}function Jge(e){const t=e&&e.coords||{},i={accuracy:t.accuracy,altitude:t.altitude,altitudeAccuracy:t.altitudeAccuracy,heading:t.heading,latitude:t.latitude,longitude:t.longitude,speed:t.speed,toJSON:()=>({})};return e&&{coords:i,timestamp:e.timestamp,toJSON:()=>({})}}function Zge({longitude:e,latitude:t,altitude:i}){return new Be({longitude:e,latitude:t,z:i||void 0,spatialReference:{wkid:4326}})}function Kge(e,t,i){if(!t)return Promise.resolve(e);const r=t.spatialReference;return r.isWGS84?Promise.resolve(e):r.isWebMercator?Promise.resolve(zl(e)):Yge(i).then(a=>{if(!a)throw new Y("geometry-service:missing-url","Geometry service URL is missing");const p=new Zz({geometries:[e],outSpatialReference:r});return Uge(a,p,i).then(y=>y[0])})}function Yge(e){if(dt.geometryServiceUrl)return Promise.resolve(dt.geometryServiceUrl);const t=er.getDefault();return t.load(e).catch(()=>{}).then(()=>{var i,r;return(r=(i=t.helperServices)==null?void 0:i.geometry)==null?void 0:r.url})}const Xge=2500,Yz={type:"CIMPictureMarker",primitiveName:"headingOverride",enable:!0,anchorPoint:{x:0,y:-.5},anchorPointUnits:"Relative",dominantSizeAxis3D:"Y",size:36,billboardMode3D:"FaceNearPlane",invertBackfaceTexture:!0,scaleX:1,textureFilter:"Picture",url:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAkCAYAAACe0YppAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAYaSURBVHgBvVfNb1VFFD/nzP16xRYJKYREEiJoDLLShQkrSNzoHv8I2QgxwY8FJWHhxoVxISEu2AordWNiQjAxEBeEsKAmhCCwkPDRAn1t33v33jnH37n3Fam0pa8kTjOde+/MnN/5+J0z85jW08yYTpxgfzx0bS+fO0R0YHqyeb9w7YEtLTv+9rSdOH7ciNleJJJX/Do1JQ3AltdlT35fiN6gG8kD8akdmzO+6w/zM7wdw725rUY78DBXtmATA6PZntFgm9Kjm6o/HFJpdi5Xhp+16sDBC+H+gUmZfjIXHKC+35U42ZHZfpe30BZS7okNFnhu8wTRk2ek5LEV2q+N8nEj6yuNVRjHddftrt4ahyJbOxF+Uppi/Rf47NlA05Pp9vkyRNkkD8sqUJHwOGfSpYFQFXhTJryQBaZSeAxbFus+U1K0gJm2oy3QKwuZzqeuSK5kpW6BEsE6+nCsAHDXQWuaOljzU8uP/ToxUW4KcwKg8QzOSdFL6Swm0hurAC7N2qIW7ncwNgYKF4la3/w7RnzrUK29KseXWqmTKXGl45Zrd9CLrsSjr96fcw4kS46mTsJznSTrVBR6VQJQdDbpZTWexxgCYCFz30cquD8oYVQgtUAUzfo8wGtqGoNRFmFZ1KKulJMQu3Vpm/I8Pup3ekvES57GaabXo4lsszEA6zrkhcmAAkBNshi59O9wVsokBLZUCQAxllXVBkyCDRQuTlLLiLSEqw3gfUqU0kVdsKymsnzyPLm8fXZxDxVZgvUhg9QyaKDI7AhpSlRVEaA83JM+/V8pGO0PMTHyZwra9FQVk4i1e0D6dPK9v5agkmXAhc0Bw5MjlAQQE0lSDbUmbBX4kGfsiiQWuSZtdle1S4F73cUKJgviyw4mmmqlVSoR/FAK2d1noWQZ8N79MySw0tgNzhN00jRFaPM6y3IyLWBxXuOdvMfhaIy1MQctmvnEMGrMq2Y/ekC3dHF14I84gmZP2s0pgiJFHVwYhIIrMC1zgT4fQgsS0CG48LWtslAsgeKZK5U1c5Slj+nEvvJZqOWubr5ks8iE3bVqCMQCz4p5aiUqpMrOdHz2qLFTxAMSPLwY8WpmntNwrXIMCWvESGH+7n9hVi6ZJ6/sR5gnycFFQgsCQEEB8T9TbsCGy4PrZrEBjGyIt4EApoGRXWKP6Mt3fnvOvhWBjR4gdjtJEDmGQQkBSCS6Teys5qECABTPWOBwcPWgAPIU+E2+Rq3J8lsrQawMHNPbqAXvRqasWcMB/mK42N3twM6/FsbJTZK2Fru15K7niPVIp6RHn++9vRKErAg8ta+MFq4LBxAJKY1EajpxLj5KUzFzOMTni4btxoUzXPzIIOwLnEPxGVqlyWoTdO/WNRUXJhDmAgNAJVd0eABj8FTCvLbpEnxdOycJlFNXVq6MDvzthwOQ654LaMGGVofQWIWtXhM9xaCQp85QIZFMPXcpuUPH3uquJj6htVonvySD+KY6c2AulPAzHdVaZElvPCGBgvkIRUECr1J4qmV6LdGyJvAnu+94HZMla1Eg1AuGVyQWnNCwzqsUXK5+AIsUyPRc1Rbpi93X1xK9tsXtkj9U7INWSWvU0DaZ6OlVAmUDiqgbrwY2Z3ThRVKFXrgi/R0x9GMplxAyER6ynAtZin1DQoLVznLMU+/mywMf3dlDpbyMlbjLQDhLw/Sh24sm5dhTrlHKgS/T0X2zLw/sLeGr5OlEbg2uHwAFw5reKuKsJj8kcIj0zq9H5PqAj+z6E8y+YRIaUhnAEOrcWgv9m3shQ1H7mz5duVJtDLhZqZcNlrEDwXKwCzncdFg+PJeVf1m3uPUupLR7Hq6tHNyLhw1TCmdGbm0BmaUjr63LzaMBH943D9f+yO5uZ7HfcLktqdwqMU0jtPUDN6vDOfzgKFrXtta6q83vfHU4M5KoURbT4W3zsPIqrgQFO8GozV8ocZGOTN4dRdRowN6CnOLmKkk5t7H1i+HPNGJj2kj7buYajoRXh2+36eOt+2nENrrF3ozODEmFC0D4hjbQNgYc+DSYjd9qqGSJXqL/tZ16/DWdfvw9bbCt41hcpYn9RAEX9Q22fwC74ny5v9iplQAAAABJRU5ErkJggg=="},Qge=new Pa({data:{type:"CIMSymbolReference",symbol:{type:"CIMPointSymbol",symbolLayers:[{type:"CIMVectorMarker",enable:!0,anchorPoint:{x:0,y:0},anchorPointUnits:"Relative",dominantSizeAxis3D:"Y",size:14,billboardMode3D:"FaceNearPlane",frame:{xmin:0,ymin:0,xmax:17,ymax:17},markerGraphics:[{type:"CIMMarkerGraphic",geometry:{rings:[[[8.5,0],[7.02,.13],[5.59,.51],[4.25,1.14],[3.04,1.99],[1.99,3.04],[1.14,4.25],[.51,5.59],[.13,7.02],[0,8.5],[.13,9.98],[.51,11.41],[1.14,12.75],[1.99,13.96],[3.04,15.01],[4.25,15.86],[5.59,16.49],[7.02,16.87],[8.5,17],[9.98,16.87],[11.41,16.49],[12.75,15.86],[13.96,15.01],[15.01,13.96],[15.86,12.75],[16.49,11.41],[16.87,9.98],[17,8.5],[16.87,7.02],[16.49,5.59],[15.86,4.25],[15.01,3.04],[13.96,1.99],[12.75,1.14],[11.41,.51],[9.98,.13],[8.5,0]]]},symbol:{type:"CIMPolygonSymbol",symbolLayers:[{type:"CIMSolidStroke",enable:!0,capStyle:"Round",joinStyle:"Round",lineStyle3D:"Strip",miterLimit:10,width:2,color:[255,255,255,255]},{type:"CIMSolidFill",enable:!0,color:[0,122,194,255]}]}}],scaleSymbolsProportionally:!0,respectFrame:!0},{type:"CIMVectorMarker",enable:!0,anchorPoint:{x:0,y:0},anchorPointUnits:"Relative",dominantSizeAxis3D:"Y",size:16,billboardMode3D:"FaceNearPlane",frame:{xmin:0,ymin:0,xmax:17,ymax:17},markerGraphics:[{type:"CIMMarkerGraphic",geometry:{rings:[[[8.5,0],[7.02,.13],[5.59,.51],[4.25,1.14],[3.04,1.99],[1.99,3.04],[1.14,4.25],[.51,5.59],[.13,7.02],[0,8.5],[.13,9.98],[.51,11.41],[1.14,12.75],[1.99,13.96],[3.04,15.01],[4.25,15.86],[5.59,16.49],[7.02,16.87],[8.5,17],[9.98,16.87],[11.41,16.49],[12.75,15.86],[13.96,15.01],[15.01,13.96],[15.86,12.75],[16.49,11.41],[16.87,9.98],[17,8.5],[16.87,7.02],[16.49,5.59],[15.86,4.25],[15.01,3.04],[13.96,1.99],[12.75,1.14],[11.41,.51],[9.98,.13],[8.5,0]]]},symbol:{type:"CIMPolygonSymbol",symbolLayers:[{type:"CIMSolidStroke",enable:!0,capStyle:"Round",joinStyle:"Round",lineStyle3D:"Strip",miterLimit:10,width:0,color:[255,255,255,255]},{type:"CIMSolidFill",enable:!0,color:[0,0,0,66]}]}}],scaleSymbolsProportionally:!0,respectFrame:!0,offsetX:0,offsetY:-1},Yz],angleAlignment:"Map"},primitiveOverrides:[{type:"CIMPrimitiveOverride",primitiveName:"headingOverride",propertyName:"Rotation",valueExpressionInfo:{type:"CIMExpressionInfo",title:"Rotation override",expression:"360 - $feature.heading",returnType:"Default"}},{type:"CIMPrimitiveOverride",primitiveName:"headingOverride",propertyName:"TintColor",valueExpressionInfo:{type:"CIMExpressionInfo",title:"TintColor override",expression:"IIF(IsEmpty($feature.heading), [255, 255, 255, 0], [255, 255, 255, 1])",returnType:"Default"}}]}});let so=class extends ux(Ss.EventedMixin(Ae)){constructor(){super(...arguments),this._geolocationUsable=!0,this.geolocationOptions=null,this.goToLocationEnabled=!0,this.graphic=new Mo({symbol:Qge}),this.scale=null,this.rotationEnabled=!0,this.view=null}initialize(){qge()||(this._geolocationUsable=!1),this.addHandles([Le(()=>{var t;return(t=this.view)==null?void 0:t.type},()=>this._handleViewTypeChange(),Pi)])}destroy(){this._clearGraphic(),this.view=null}_clearGraphic(){const{view:t,graphic:i}=this;t&&i&&t.graphics.remove(i)}_addGraphic(){const{view:t,graphic:i}=this;t!=null&&t.graphics&&i&&!t.graphics.includes(i)&&t.graphics.push(i)}_handleViewTypeChange(){var t;Yz.enable=((t=this.view)==null?void 0:t.type)==="2d"}_getScaleWithinConstraints(t,i){if(!i)return t;if(i.type==="2d"){const{effectiveMaxScale:r,effectiveMinScale:a}=i.constraints;return Math.min(a,Math.max(r,t))}return t}_getScale(t){const{scale:i}=this,r=typeof i=="number"?i:Xge;return this._getScaleWithinConstraints(r,t)}_getHeading(t,i){var y;const r=i==null?void 0:i.spatialReference,a=(r==null?void 0:r.isWebMercator)||(r==null?void 0:r.isGeographic),p=(y=t.coords)==null?void 0:y.heading;return!a||typeof p!="number"||isNaN(p)||p<0||p>360?null:p}_addHeading(t){const{heading:i,target:r,view:a}=t;a&&i!==null&&(a.type!=="3d"?a.type==="2d"&&(r.rotation=360-i):r.heading=i)}async _animatePoint(t,i,r,a){const{view:p}=this;if(!this.goToLocationEnabled||!p)return;const y={target:t,scale:i};this.rotationEnabled&&this._addHeading({heading:r,target:y,view:p});const g={signal:a.signal};At(g),await this.callGoTo({target:y,options:g})}async updatePosition(t,i){try{const r=this.view,a=await Wge({position:t,view:r},{signal:i.signal}),{graphic:p}=this,{timestamp:y,coords:g}=t,{accuracy:_,altitude:T,altitudeAccuracy:I,latitude:A,longitude:P,speed:N}=g,D=this._getHeading(t,r),z={timestamp:y,accuracy:_,altitude:T,altitudeAccuracy:I,heading:D,latitude:A,longitude:P,speed:N};p&&(p.geometry=a,p.attributes=z);const q=this._getScale(r);await this._animatePoint(a,q,D,i)}catch(r){if(!Si(r))throw new Y("geolocation-positioning:invalid-point","Cannot position invalid point",{error:r})}return t}};v([S()],so.prototype,"_geolocationUsable",void 0),v([S()],so.prototype,"geolocationOptions",void 0),v([S()],so.prototype,"goToLocationEnabled",void 0),v([S({type:Mo,nonNullable:!0})],so.prototype,"graphic",void 0),v([S()],so.prototype,"scale",void 0),v([S()],so.prototype,"rotationEnabled",void 0),v([S()],so.prototype,"view",void 0),so=v([H("esri.widgets.support.GeolocationPositioning")],so);const eve=so;async function tve(){const e=await N6("esri/widgets/Locate/t9n/Locate");return new Jh({title:e.currentLocation,fieldInfos:[{fieldName:"timestamp",label:e.timestamp,format:{dateFormat:"short-date-short-time"}},{fieldName:"latitude",label:e.latitude,format:{places:4,digitSeparator:!0}},{fieldName:"longitude",label:e.longitude,format:{places:4,digitSeparator:!0}},{fieldName:"accuracy",label:e.accuracy,format:{places:0,digitSeparator:!0}},{fieldName:"altitude",label:e.altitude,format:{places:0,digitSeparator:!0}},{fieldName:"altitudeAccuracy",label:e.altitudeAccuracy,format:{places:0,digitSeparator:!0}},{fieldName:"heading",label:e.heading,format:{places:0,digitSeparator:!0}},{fieldName:"speed",label:e.speed,format:{places:0,digitSeparator:!0}}],actions:[Fge.clone()],content:[{type:"fields"}]})}let oa=class extends eve{constructor(t){super(t),this._locateController=null,this.error=void 0,this.popupEnabled=!0,this.locate=this.locate.bind(this)}initialize(){this.addHandles([P6(()=>{var a;const{graphic:t,view:i}=this;if(!t)return;((a=i==null?void 0:i.graphics)==null?void 0:a.includes(t))&&this._updatePopupTemplate(t)})])}destroy(){this.cancelLocate()}get state(){var t;return this._geolocationUsable?(t=this.view)!=null&&t.ready?this._locateController?"locating":this.error!=null?"error":"ready":"disabled":"feature-unsupported"}async locate(){if(this.cancelLocate(),this.state==="disabled")throw new Y("locate:disabled-state","Cannot locate when disabled.");if(this.state==="feature-unsupported")throw new Y("locate:feature-unsupported-state","Cannot locate in unsecure domain.");const t=new AbortController;this._locateController=t,this.error=void 0;try{const i=await Hge(this.geolocationOptions);if(await this.updatePosition(i,t),this._locateController!==t)return null;const{graphic:r}=this;return r&&await this._updatePopupTemplate(r),this._addGraphic(),this.emit("locate",{position:i}),this._locateController=null,i}catch(i){if(Si(i))return null;throw t===this._locateController&&(this._locateController=null),this.error=i,this.emit("locate-error",{error:i}),i}}cancelLocate(){this._clearGraphic(),this._locateController&&this._locateController.abort(),this._locateController=null}async _updatePopupTemplate(t){if(!this.popupEnabled)return;const i=await tve(),r=t!==this.graphic;this.destroyed||r||(t.popupTemplate=i)}};v([S()],oa.prototype,"_locateController",void 0),v([S()],oa.prototype,"error",void 0),v([S()],oa.prototype,"popupEnabled",void 0),v([S({readOnly:!0})],oa.prototype,"state",null),v([S()],oa.prototype,"locate",null),v([S()],oa.prototype,"cancelLocate",null),oa=v([H("esri.widgets.Locate.LocateViewModel")],oa);const Xz=oa;function Qz(e){return t=>{t.hasOwnProperty("_delegatedEventNames")||(t._delegatedEventNames=t._delegatedEventNames?t._delegatedEventNames.slice():[]);const i=t._delegatedEventNames,r=Array.isArray(e)?e:ive(e);i.push(...r)}}function ive(e){return e.split(",").map(t=>t.trim())}const rve={base:"esri-locate"};let Tr=class extends pu{constructor(t,i){super(t,i),this.messages=null,this.messagesCommon=null,this.viewModel=new Xz,this._locate=()=>{const{viewModel:r}=this;r.state==="locating"?r.cancelLocate():r.locate().catch(()=>{})},K4(ye.getLogger(this),"Locate","arcgis-locate",{version:"4.32"})}loadDependencies(){return Yh({button:()=>fe(()=>import("./index-6QQzcgB0.js"),__vite__mapDeps([259,260,261,262,263,264,265,266,267,268,269,270,271])),loader:()=>fe(()=>import("./index-B13UgI8z.js"),__vite__mapDeps([260,261,262])),tooltip:()=>fe(()=>import("./index-FAcl2Gaw.js"),__vite__mapDeps([286,266,287,264,261,288,289,290,291]))})}get geolocationOptions(){return this.viewModel.geolocationOptions}set geolocationOptions(t){this.viewModel.geolocationOptions=t}get goToLocationEnabled(){return this.viewModel.goToLocationEnabled}set goToLocationEnabled(t){this.viewModel.goToLocationEnabled=t}get goToOverride(){return this.viewModel.goToOverride}set goToOverride(t){this.viewModel.goToOverride=t}get graphic(){return this.viewModel.graphic}set graphic(t){this.viewModel.graphic=t}get icon(){return"gps-off"}set icon(t){this._overrideIfSome("icon",t)}get label(){var t;return((t=this.messages)==null?void 0:t.widgetLabel)??""}set label(t){this._overrideIfSome("label",t)}get popupEnabled(){return this.viewModel.popupEnabled}set popupEnabled(t){this.viewModel.popupEnabled=t}get scale(){return this.viewModel.scale}set scale(t){this.viewModel.scale=t}get view(){return this.viewModel.view}set view(t){this.viewModel.view=t}cancelLocate(){this.viewModel.cancelLocate()}locate(){return this.viewModel.locate()}render(){var _;const{viewModel:t,icon:i}=this,{state:r}=t,a=r==="locating",p=a?this.messagesCommon.cancel:this.messages.title,y=r==="feature-unsupported",g=this._localizeError((_=this.viewModel)==null?void 0:_.error);return Ge("div",{class:this.classes(rve.base,ii.widget)},!y&&Ge("calcite-button",{class:ii.widgetButton,disabled:r==="disabled",iconStart:a?void 0:i,kind:"neutral",label:p,onclick:this._locate,title:p},a?Ge("calcite-loader",{inline:!0,label:""}):null),g?Ge("calcite-tooltip",{open:!0,overlayPositioning:"fixed",placement:this._getPlacement(),referenceElement:this.container},g):null)}_getPlacement(){const{container:t,view:i}=this,r=t&&i?i.ui.getPosition(t):null;if(!r||r==="manual")return"auto";const[a,p]=r.split("-");return`${p==="right"?"left":"right"}-${a==="bottom"?"end":"start"}`}_localizeError(t){var i,r,a;return t instanceof GeolocationPositionError?t.code===GeolocationPositionError.PERMISSION_DENIED?(i=this.messages)==null?void 0:i.permissionError:t.code===GeolocationPositionError.TIMEOUT?(r=this.messages)==null?void 0:r.timeoutError:(a=this.messages)==null?void 0:a.positionUnavailable:t instanceof Error?t.message:void 0}};v([S()],Tr.prototype,"geolocationOptions",null),v([S()],Tr.prototype,"goToLocationEnabled",null),v([S()],Tr.prototype,"goToOverride",null),v([S()],Tr.prototype,"graphic",null),v([S()],Tr.prototype,"icon",null),v([S()],Tr.prototype,"label",null),v([S(),jn("esri/widgets/Locate/t9n/Locate")],Tr.prototype,"messages",void 0),v([S(),jn("esri/t9n/common")],Tr.prototype,"messagesCommon",void 0),v([S()],Tr.prototype,"popupEnabled",null),v([S()],Tr.prototype,"scale",null),v([S()],Tr.prototype,"view",null),v([S({type:Xz}),Qz(["locate","locate-error"])],Tr.prototype,"viewModel",void 0),Tr=v([H("esri.widgets.Locate")],Tr);const sve=Tr;let aa=class extends ux(Ss.EventedAccessor){constructor(e){super(e),this._initialViewpoint=null,this._goingHomeController=null,this.go=this.go.bind(this)}destroy(){this._cancelGo(),this.view=null}get state(){var e;return(e=this.view)!=null&&e.ready?this._goingHomeController?"going-home":"ready":"disabled"}set view(e){this._initialViewpoint=null,this._set("view",e),e&&e.when().then(()=>{this.view===e&&(this._initialViewpoint=e.viewpoint.clone(),this.notifyChange("viewpoint"))})}get viewpoint(){return this._get("viewpoint")||this._initialViewpoint}set viewpoint(e){this._set("viewpoint",e)}async go(){var t,i;if(!((t=this.view)!=null&&t.ready))throw new Y("home:disabled-state","Cannot go when disabled.");this._cancelGo(),this.emit("go");const e=new AbortController;this._goingHomeController=e;try{await((i=this.view)==null?void 0:i.when()),await this.callGoTo({target:this.viewpoint,options:{signal:e.signal}})}catch{}this._goingHomeController=null}cancelGo(){this._cancelGo()}_cancelGo(){const{_goingHomeController:e}=this;e&&e.abort(),this._goingHomeController=null}};v([S()],aa.prototype,"_goingHomeController",void 0),v([S({readOnly:!0})],aa.prototype,"state",null),v([S()],aa.prototype,"view",null),v([S({type:Kr})],aa.prototype,"viewpoint",null),v([S()],aa.prototype,"go",null),v([S()],aa.prototype,"cancelGo",null),aa=v([H("esri.widgets.Home.HomeViewModel")],aa);const eU=aa,nve={base:"esri-home"};let Ds=class extends pu{constructor(t,i){super(t,i),this.messages=null,this.messagesCommon=null,this.uiStrings=void 0,this.viewModel=new eU,this._go=()=>{const{viewModel:r}=this;r.state==="going-home"?r.cancelGo():r.go()},K4(ye.getLogger(this),"Home","arcgis-home",{version:"4.32"})}loadDependencies(){return Yh({button:()=>fe(()=>import("./index-6QQzcgB0.js"),__vite__mapDeps([259,260,261,262,263,264,265,266,267,268,269,270,271])),loader:()=>fe(()=>import("./index-B13UgI8z.js"),__vite__mapDeps([260,261,262]))})}get goToOverride(){return this.viewModel.goToOverride}set goToOverride(t){this.viewModel.goToOverride=t}get icon(){return"home"}set icon(t){this._overrideIfSome("icon",t)}get label(){var t;return((t=this.messages)==null?void 0:t.widgetLabel)??""}set label(t){this._overrideIfSome("label",t)}get view(){return this.viewModel.view}set view(t){this.viewModel.view=t}get viewpoint(){return this.viewModel.viewpoint}set viewpoint(t){this.viewModel.viewpoint=t}cancelGo(){this.viewModel.cancelGo()}go(){return this.viewModel.go()}render(){var y;const{messagesCommon:t,messages:i,icon:r}=this,a=(y=this.viewModel)==null?void 0:y.state,p=a==="going-home";return Ge("div",{class:this.classes(nve.base,ii.widget)},Ge("calcite-button",{class:ii.widgetButton,disabled:a==="disabled",iconStart:p?void 0:r,kind:"neutral",label:i.widgetLabel,onclick:this._go,scale:p?"s":"m",title:a==="going-home"?t.cancel:i.title},p?Ge("calcite-loader",{inline:!0,label:""}):null))}};v([S()],Ds.prototype,"goToOverride",null),v([S()],Ds.prototype,"icon",null),v([S()],Ds.prototype,"label",null),v([S(),jn("esri/widgets/Home/t9n/Home")],Ds.prototype,"messages",void 0),v([S(),jn("esri/t9n/common")],Ds.prototype,"messagesCommon",void 0),v([S()],Ds.prototype,"uiStrings",void 0),v([S()],Ds.prototype,"view",null),v([S({type:eU}),Qz("go")],Ds.prototype,"viewModel",void 0),v([S({type:Kr})],Ds.prototype,"viewpoint",null),Ds=v([H("esri.widgets.Home")],Ds);const ove=Ds;function ave(e){return e!=null&&typeof e=="object"&&e.type==="2d"&&e.view2dType==="linkchart"}var yo;(function(e){e[e.NORTH=0]="NORTH",e[e.NORTH_EAST=1]="NORTH_EAST",e[e.EAST=2]="EAST",e[e.SOUTH_EAST=3]="SOUTH_EAST",e[e.SOUTH=4]="SOUTH",e[e.SOUTH_WEST=5]="SOUTH_WEST",e[e.WEST=6]="WEST",e[e.NORTH_WEST=7]="NORTH_WEST"})(yo||(yo={}));function lve(e){return tU(e)||T6(e)||M6(e)}function tU(e){return Jl(e)||V3(e)}const uve=12;let _a=class Vr{constructor(t){const i=Vr.checkUnsupported(t);if(i!=null)throw i;const r=t;this.spatialReference=r.spatialReference,this._isWebMercator=this.spatialReference.isWebMercator,this._isGCS=Gh(this.spatialReference),this.origin=[r.origin.x,r.origin.y],this.pixelSize=r.size[0],this.dpi=r.dpi;const a=r.lods.reduce((T,I)=>(I.level<T.minLod.level&&(T.minLod=I),T.max=Math.max(T.max,I.level),T),{minLod:r.lods[0],max:-1/0}),p=a.minLod,y=2**p.level;let g=p.resolution*y,_=p.scale*y;this.levels=new Array(a.max+1);for(let T=0;T<this.levels.length;T++)this.levels[T]={resolution:g,scale:_,tileSize:[g*r.size[0],g*r.size[1]]},g/=2,_/=2}clone(){return new Vr(this.toTileInfo())}toTileInfo(){return new S0({dpi:this.dpi,origin:new Be({x:this.origin[0],y:this.origin[1],spatialReference:this.spatialReference}),size:[this.pixelSize,this.pixelSize],spatialReference:this.spatialReference,lods:this.levels.map((t,i)=>new Vs({level:i,scale:t.scale,resolution:t.resolution}))})}getExtent(t,i,r,a){const p=this.levels[t],y=p.tileSize[0],g=p.tileSize[1];a[0]=this.origin[0]+r*y,a[2]=this.origin[0]+(r+1)*y,a[3]=this.origin[1]-i*g,a[1]=this.origin[1]-(i+1)*g}convertExtentToRadians(t,i){this._isWebMercator?(i[0]=R7(t[0]),i[1]=N7(t[1]),i[2]=R7(t[2]),i[3]=N7(t[3])):this._isGCS&&(i[0]=kl(t[0]),i[1]=kl(t[1]),i[2]=kl(t[2]),i[3]=kl(t[3]))}getExtentGeometry(t,i,r,a=new Ct){return this.getExtent(t,i,r,Un),a.spatialReference=this.spatialReference,a.xmin=Un[0],a.ymin=Un[1],a.xmax=Un[2],a.ymax=Un[3],a.zmin=void 0,a.zmax=void 0,a}ensureMaxLod(t){if(t==null)return!1;let i=!1;for(;this.levels.length<=t;){const{resolution:r,scale:a}=this.levels[this.levels.length-1],p=r/2*this.pixelSize;this.levels.push({resolution:r/2,scale:a/2,tileSize:[p,p]}),i=!0}return i}capMaxLod(t){this.levels.length>t+1&&(this.levels.length=t+1)}getMaxLod(){return this.levels.length-1}scaleAtLevel(t){return this.levels[0].scale/2**t}levelAtScale(t){const i=this.levels[0].scale;return t>=i?0:Math.log(i/t)*Math.LOG2E}resolutionAtLevel(t){return this.levels[0].resolution/2**t}compatibleWith(t,i=1/0){if(Vr.checkUnsupported(t))return!1;const r=new Vr(t);if(!r.spatialReference.equals(this.spatialReference)||r.pixelSize!==this.pixelSize)return!1;const a=Math.min(this.levels.length-1,r.levels.length-1,i),p=this.levels[a].resolution;let y=.5*p;return!Zr(r.origin[0],this.origin[0],y)||!Zr(r.origin[1],this.origin[1],y)?!1:(y=.5*p/2**a/this.pixelSize*uve,Zr(p,r.levels[a].resolution,y))}rootTilesInExtent(t,i=null,r=1/0){const a=new Array,p=this.levels[0].tileSize;if(t==null||p[0]===0||p[1]===0)return a;Vr.computeRowColExtent(t,p,this.origin,Un);let y=Un[1],g=Un[3],_=Un[0],T=Un[2];const I=T-_,A=g-y;if(I*A>r){const P=Math.floor(Math.sqrt(r));A>P&&(y=y+Math.floor(.5*A)-Math.floor(.5*P),g=y+P),I>P&&(_=_+Math.floor(.5*I)-Math.floor(.5*P),T=_+P)}for(let P=y;P<g;P++)for(let N=_;N<T;N++)a.push([0,P,N]);return i!=null&&(i[0]=this.origin[0]+_*p[0],i[1]=this.origin[1]-g*p[1],i[2]=this.origin[0]+T*p[0],i[3]=this.origin[1]-y*p[1]),a}static computeRowColExtent(t,i,r,a){const p=.001*(t[2]-t[0]+(t[3]-t[1]));a[0]=Math.max(0,Math.floor((t[0]+p-r[0])/i[0])),a[2]=Math.max(0,Math.ceil((t[2]-p-r[0])/i[0])),a[1]=Math.max(0,Math.floor((r[1]-t[3]+p)/i[1])),a[3]=Math.max(0,Math.ceil((r[1]-t[1]-p)/i[1]))}static isPowerOfTwo(t){const i=t.lods,r=i[0].resolution*2**i[0].level;return!i.some(a=>!XJ(a.resolution,r/2**a.level))}static hasGapInLevels(t){const i=t.lods.map(r=>r.level);i.sort((r,a)=>r-a);for(let r=1;r<i.length;r++)if(i[r]!==i[0]+r)return!0;return!1}static tileSizeSupported(t){const i=t.size[1];return i===t.size[0]&&!(i&i-1)&&i>=128&&i<=512}static hasOriginPerLODs(t){const i=t.origin;return t.lods.some(r=>r.origin!=null&&(r.origin[0]!==i.x||r.origin[1]!==i.y))}static getMissingTileInfoError(){return new Y("tilingscheme:tile-info-missing","Tiling scheme must have tiling information")}static checkUnsupported(t){return t==null?Fx():t.lods.length<1?new Y("tilingscheme:generic","Tiling scheme must have at least one level"):Vr.isPowerOfTwo(t)?Vr.hasGapInLevels(t)?new Y("tilingscheme:gaps","Tiling scheme levels must not have gaps between min and max level"):Vr.tileSizeSupported(t)?Vr.hasOriginPerLODs(t)?new Y("tilingscheme:multiple-origin","Tiling scheme levels must not have their own origin"):null:new Y("tilingscheme:tile-size","Tiles must be square and size must be one of [128, 256, 512]"):new Y("tilingscheme:power-of-two","Tiling scheme must be power of two")}static fromExtent(t,i){const r=t[2]-t[0],a=t[3]-t[1],p=Ts(i),y=1.2*Math.max(r,a),g=256,_=y/g,T=_*p*(96/.0254),I=new Vr(new S0({size:[g,g],origin:new Be({x:t[0]-.5*(y-r),y:t[3]+.5*(y-a)}),lods:[new Vs({level:0,resolution:_,scale:T})],spatialReference:i}));return I.ensureMaxLod(20),I}static makeWebMercatorAuxiliarySphere(t){const i=new Vr(Vr.WebMercatorAuxiliarySphereTileInfo);return i.ensureMaxLod(t),i}static makeGCSWithTileSize(t,i=256,r=16){const a=256/i,p=new Vr(new S0({size:[i,i],origin:new Be({x:-180,y:90,spatialReference:t}),spatialReference:t,lods:[new Vs({level:0,resolution:.703125*a,scale:295497598570834e-6*a})]}));return p.ensureMaxLod(r),p}get test(){}};function Fx(){return new Y("tilingscheme:tile-info-missing","Tiling scheme must have tiling information")}_a.WebMercatorAuxiliarySphereTileInfo=new S0({size:[256,256],origin:new Be({x:-20037508342787e-6,y:20037508342787e-6,spatialReference:qe.WebMercator}),spatialReference:qe.WebMercator,lods:[new Vs({level:0,resolution:156543.03392800014,scale:591657527591555e-6})]}),_a.WebMercatorAuxiliarySphere=_a.makeWebMercatorAuxiliarySphere(19);const Un=Oi(),gA=64;QJ(a5/10);const hve=Oi();_a.WebMercatorAuxiliarySphere.getExtent(0,0,0,hve);Oi([-180,-90,180,90]);function cve(e,t,i,r){if(e==null)return Fx();const a=e.spatialReference;if(a.isGeographic&&!tU(a))return new Y("tilingscheme:local-unsupported-spatial-reference","The tiling scheme spatial reference is not supported in local scenes");const p=_a.checkUnsupported(e);return p??(i==null?new Y("tilingscheme:extent-not-exist","The layer does not provide a layer extent."):pve(e,i)||(t==null||a.equals(t)||t.isWGS84&&a.isWebMercator?null:new Y("tilingscheme:spatial-reference-mismatch","The tiling scheme does not match the spatial reference of the local scene")))}function pve(e,t){const i=e.lods,r=i[0].resolution*2**i[0].level,a=[r*e.size[0],r*e.size[1]],p=[e.origin.x,e.origin.y],y=hY(t),g=Oi();_a.computeRowColExtent(y,a,p,g);const _=(g[2]-g[0])*(g[3]-g[1]);if(_>gA){const T=i[0].scale*2**i[0].level;let I=Math.max((y[3]-y[1])/e.size[1],(y[2]-y[0])/e.size[0])*T/r;const A=Math.floor(Math.log(I)/Math.log(10));return I=Math.ceil(I/10**A)*10**A,new Y("tilingscheme:too-many-root-tiles","Scale of level 0 of the tiling scheme (1:"+Math.floor(T).toLocaleString()+") is too large for the layer's extent. Suggested scale: 1:"+I.toLocaleString()+".",{level0Scale:T,suggestedLevel0Scale:I,requiredNumRootTiles:_,allowedNumRootTiles:gA})}return null}const dve=Object.freeze(Object.defineProperty({__proto__:null,checkIfTileInfoSupportedForViewSR:cve},Symbol.toStringTag,{value:"Module"}));function fve(e,t,i,r){if(e==null)return Fx();const a=(e==null?void 0:e.lods.length)-1,p=e.spatialReference;if(p.isWebMercator){if(!_a.makeWebMercatorAuxiliarySphere(a).compatibleWith(e,r))return new Y("tilingscheme:incompatible-global-web-mercator","The tiling scheme is not compatible with the ArcGIS Online Web Mercator tiling scheme")}else{if(!lve(p))return new Y("tilingscheme:global-unsupported-spatial-reference","The tiling scheme spatial reference is not supported in global scenes");if(!_a.makeGCSWithTileSize(e.spatialReference,e.size[0],a).compatibleWith(e,r))return e.spatialReference.isWGS84?new Y("tilingscheme:incompatible-global-wgs84","The tiling scheme is not compatible with the ArcGIS Online WGS84 tiling scheme"):new Y("tilingscheme:incompatible-global","The tiling scheme is not compatible with the ArcGIS Online tiling scheme")}return t==null||e.spatialReference.equals(t)?null:new Y("tilingscheme:spatial-reference-mismatch","The tiling scheme does not match the spatial reference of the global scene")}const yve=Object.freeze(Object.defineProperty({__proto__:null,checkIfTileInfoSupportedForViewSR:fve},Symbol.toStringTag,{value:"Module"})),mve={[Ea.Global]:yve,[Ea.Local]:dve};function G4(e,t,i,r,a){return mve[r].checkIfTileInfoSupportedForViewSR(e,i,t,a)}function gve(e,t,i){const r=PJ(e);if(r!=null){if(!xe.isCollection(r))return{tileInfo:r.tileInfo,fullExtent:r.fullExtent};{const a=r.find(p=>G4(p.tileInfo,p.fullExtent,t,i)==null);if(a)return{tileInfo:a.tileInfo,fullExtent:a.fullExtent}}}return{tileInfo:null,fullExtent:null}}yo.NORTH,yo.EAST,yo.SOUTH,yo.WEST;yo.NORTH_EAST,yo.SOUTH_EAST,yo.SOUTH_WEST,yo.NORTH_WEST;function vve(e,t){return e!=null&&(t==null||(t===Ea.Local?!e.isGeographic||e.isWGS84||e.wkid===Bs.CGCS2000:e.isWebMercator||e.isWGS84||e.wkid===Bs.CGCS2000||e.wkid===Bs.GCSMARS2000||e.wkid===Bs.GCSMARS2000_SPHERE||e.wkid===Bs.GCSMOON2000))}async function wve(e,t={}){const{basemap:i,view:r}=e;await i.load(t),_ve(i),await xve(i,r,t),At(t)}async function bve(e,t={}){var g,_;const{basemap:i,view:r}=e;At(t);const a=(g=i.baseLayers.find(T=>T.type==="unknown"))==null?void 0:g.loadError;if(a!=null)throw a;if(!r||"spatialReferenceLocked"in r&&!r.spatialReferenceLocked||(await i.load(t),At(t),i.baseLayers.length===0))return;const p=i.baseLayers.at(0);if(!OJ(p))return;if(i.spatialReference){if(r.spatialReference.equals(i.spatialReference))return;vA()}await p.load(t),At(t);const y=(("supportedSpatialReferences"in p?p.supportedSpatialReferences:null)||["tileInfo"in p?(_=p.tileInfo)==null?void 0:_.spatialReference:null]).filter(Sa);y.length!==0&&y.every(T=>!r.spatialReference.equals(T))&&vA()}function vA(){throw new Y("basemap-compatibility:incompatible-spatial-reference","Basemap spatial reference is not compatible with the view")}function _ve(e){if(e.baseLayers.length===0&&e.referenceLayers.length===0)return;const t=e.baseLayers.concat(e.referenceLayers).toArray().filter(i=>!IJ(i)).map(i=>Sve(i));if(t.length)throw t[0]}function Sve(e){return new Y("basemap-compatibility:unsupported-basemap-layer-type","Unsupported basemap layer type ${operationalLayerType}",{layer:e,operationalLayerType:e.operationalLayerType||"unknown"})}async function xve(e,t,i){if(e.baseLayers.length===0)return;const r=e.baseLayers.at(0);if(XP(r)){try{await r.load(i)}catch(a){const p="basemap-compatibility:unknown-error",y="Unknown basemap compatibility error",{name:g=p,message:_=y,details:T}=a;throw new Y(g,_,T)}Tve(r,t)}}function Tve(e,t){var g;const i=t.state.viewingMode;if(!i)return;let r,a;if((e==null?void 0:e.type)==="wmts"){const _=gve(e,t.spatialReference,i);if(_.tileInfo==null)throw new Y("basemapgalleryitem:tiling-scheme-incompatible","Basemap tiling scheme is incompatible with the view");r=_.tileInfo,a=_.fullExtent}else r=e.tileInfo,a=e.fullExtent;if(r==null)return;if(!vve(r.spatialReference,i))throw new Y(`basemapgalleryitem:spatial-reference-unsupported-${Y8(i)}`,`Basemap spatial reference is unsupported in ${Y8(i)} mode`);const p=(e==null?void 0:e.type)==="vector-tile"?r.getCompatibleForVTL(256):null;if(i===Ea.Global){let _=G4(r,a,null,i);if(_&&(e==null?void 0:e.type)==="vector-tile"&&a!=null&&p&&!G4(p,a,null,i)&&(_=null),_){const T=r.spatialReference.isWebMercator?"web-mercator":"wgs84";throw new Y(`basemapgalleryitem:tiling-scheme-unsupported-${T}-global`,"Basemap tiling scheme is unsupported in global mode",{error:_})}}else if(_a.checkUnsupported(r))throw new Y("basemapgalleryitem:tiling-scheme-unsupported-local","Basemap tiling scheme is unsupported in local mode");const y=(g=t.basemapTerrain)==null?void 0:g.tilingScheme;if(y&&!y.compatibleWith(r)&&((e==null?void 0:e.type)!=="vector-tile"||!p||!y.compatibleWith(p)))throw new Y("basemapgalleryitem:tiling-scheme-incompatible","Basemap tiling scheme is incompatible with the view")}let no=class extends md.IdentifiableMixin(Ae){constructor(t){super(t),this.compatibilityFunction=null,this.error=null,this.state="loading",this.view=null}initialize(){const t=()=>this.refresh();this.addHandles([Le(()=>{var i;return(i=this.basemap)==null?void 0:i.loadStatus},t),Le(()=>this.compatibilityFunction,t),Le(()=>{var i;return this.view&&"basemapTerrain"in this.view&&((i=this.view.basemapTerrain)==null?void 0:i.tilingScheme)},t),Le(()=>{var i;return(i=this.view)==null?void 0:i.ready},t),Le(()=>{var i;return(i=this.view)==null?void 0:i.spatialReference},t)]),this.refresh()}destroy(){this._cancelRefresh(),this.basemap=null,this.compatibilityFunction=null,this.view=null}get _spatialReferenceTask(){return AK(this.view,this.basemap)}set basemap(t){t&&t.load().catch(()=>{}),this._set("basemap",t)}get spatialReference(){return this._spatialReferenceTask.spatialReference}refresh(){var a;this._cancelRefresh(),this._set("state","loading");const t=(a=this.basemap)==null?void 0:a.loadStatus;if(t!=="loaded"&&t!=="failed")return;if(!this.compatibilityFunction)return void(t==="loaded"?(this._set("state","ready"),this._set("error",null)):(this._set("state","error"),this._set("error",this.basemap.loadError)));const i=new AbortController,{signal:r}=i;this.compatibilityFunction(this,{signal:r}).then(()=>y2(()=>!this._spatialReferenceTask.updating,r)).then(()=>{this._set("state","ready"),this._set("error",null)}).catch(p=>{Si(p)||(this._set("state","error"),this._set("error",p))}),this._refreshController=i}_cancelRefresh(){this._refreshController&&(this._refreshController.abort(),this._refreshController=null)}};v([S({readOnly:!0})],no.prototype,"_spatialReferenceTask",null),v([S()],no.prototype,"basemap",null),v([S()],no.prototype,"compatibilityFunction",void 0),v([S({readOnly:!0})],no.prototype,"error",void 0),v([S({readOnly:!0})],no.prototype,"spatialReference",null),v([S({readOnly:!0})],no.prototype,"state",void 0),v([S()],no.prototype,"view",void 0),no=v([H("esri.widgets.BasemapGallery.support.BasemapGalleryItem")],no);const iU=no,rU=xe.ofType(Vl);let u0=class extends Ae{constructor(e){super(e),this.basemaps=new rU}destroy(){this.basemaps.forEach(e=>e.destroy())}get state(){return"ready"}refresh(){}};v([S({type:rU})],u0.prototype,"basemaps",void 0),v([S({readOnly:!0})],u0.prototype,"state",null),u0=v([H("esri.widgets.BasemapGallery.support.LocalBasemapsSource")],u0);const sU=u0,nU=xe.ofType(Vl);let oo=class extends Xs.LoadableMixin(hd.EsriPromiseMixin(sU)){constructor(e){super(e),this._lastPortalBasemapFetchController=null,this.basemaps=new nU,this.filterFunction=null,this.portal=er.getDefault(),this.query=null,this.updateBasemapsCallback=null,this.viewType=null}initialize(){this.addHandles(Le(()=>{var e,t,i;return[this.filterFunction,this.loadStatus,(e=this.portal)==null?void 0:e.basemapGalleryGroupQuery,(t=this.portal)==null?void 0:t.basemapGalleryGroupQuery3D,(i=this.portal)==null?void 0:i.user,this.query,this.updateBasemapsCallback]},()=>this.refresh(),Pi))}destroy(){this.filterFunction=null,this.portal=null,this.basemaps.forEach(e=>e.destroy())}get state(){return this.loadStatus==="not-loaded"?"not-loaded":this.loadStatus==="loading"||this._lastPortalBasemapFetchController?"loading":"ready"}load(e){return this.addResolvingPromise(this.portal.load(e)),Promise.resolve(this)}async refresh(){if(this.loadStatus!=="loaded")return;this._lastPortalBasemapFetchController&&(this._lastPortalBasemapFetchController.abort(),this._lastPortalBasemapFetchController=null);const e=this.portal,t=new AbortController;this._lastPortalBasemapFetchController=t,this.notifyChange("state");try{const i=await e.fetchBasemaps(this._toQueryString(this.query),{signal:t.signal,include3d:this.viewType==="3d"||void 0});await this._updateBasemaps(i)}catch(i){if(Si(i))throw i;ye.getLogger(this).warn(new Y("basemap-source:fetch-basemaps-error","Could not fetch basemaps from portal.",{error:i})),await this._updateBasemaps()}this._lastPortalBasemapFetchController=null,this.notifyChange("state")}_toQueryString(e){return e&&typeof e!="string"?Object.keys(e).map(t=>`${t}:${e[t]}`).join(" AND "):e}async _updateBasemaps(e=[]){let t=await this._filterBasemaps(e);t=this.updateBasemapsCallback?await this.updateBasemapsCallback(t):t,this.basemaps.removeAll(),this.basemaps.addMany(t)}async _filterBasemaps(e){if(!this.filterFunction)return e;const t=e.map(this.filterFunction),i=await Promise.all(t);return e.filter((r,a)=>i[a])}};v([S({readOnly:!0,type:nU})],oo.prototype,"basemaps",void 0),v([S()],oo.prototype,"filterFunction",void 0),v([S({type:er})],oo.prototype,"portal",void 0),v([S()],oo.prototype,"query",void 0),v([S({readOnly:!0})],oo.prototype,"state",null),v([S()],oo.prototype,"updateBasemapsCallback",void 0),v([S()],oo.prototype,"viewType",void 0),oo=v([H("esri.widgets.BasemapGallery.support.PortalBasemapsSource")],oo);const h0=oo,oU=xe.ofType(iU);function Mve(e){return e&&e.declaredClass==="esri.portal.Portal"}function $ve(e){return e&&!(e instanceof h0)&&(!!e.portal||!!e.query)}function Eve(e){return e&&"basemaps"in e&&"state"in e&&"refresh"in e}let ps=class extends Xs{constructor(e){super(e),this._loadingProjectionEngine=!1,this.items=new oU,this.source=new h0,this.view=null}initialize(){const e=()=>this._recreateItems();this.addHandles([Le(()=>this.state==="ready"?this.compatibilityFunction:null,()=>this._updateItems()),_o(()=>{var t;return(t=this.source)==null?void 0:t.basemaps},"change",e,{onListenerAdd:e}),gr(()=>this.view,()=>{var t;this.source instanceof h0&&(this.source.viewType=(t=this.view)==null?void 0:t.type)},{once:!0})])}destroy(){var t;const e=this.source.basemaps.find(i=>i===this.activeBasemap);e&&this.source.basemaps.remove(e),(t=this.source)==null||t.destroy()}get activeBasemap(){var e,t;return((t=(e=this.view)==null?void 0:e.map)==null?void 0:t.basemap)??null}set activeBasemap(e){var r,a;const t=this.view;if(!(t!=null&&t.map))return;if(!e||!t.ready)return t.map.basemap=e,void this._clearOverride("activeBasemap");const i=e.spatialReference||((a=(r=this.items)==null?void 0:r.find(p=>this.basemapEquals(e,p.basemap)))==null?void 0:a.spatialReference);if(i&&"spatialReferenceLocked"in t&&!t.spatialReferenceLocked){const p=t.spatialReference;if(i!=null&&!fi(p,i)&&!Dn(t.spatialReference,i)&&!Aa())return this._override("activeBasemap",e),this._loadingProjectionEngine=!0,void xo().then(()=>{this._get("activeBasemap")===e&&(t.map.basemap=e,t.spatialReference=i,this._clearOverride("activeBasemap"))},()=>{}).then(()=>{this._loadingProjectionEngine=!1});t.map.basemap=e,this._clearOverride("activeBasemap"),i==null||fi(t.spatialReference,i)||(t.spatialReference=i)}else t.map.basemap=e,this._clearOverride("activeBasemap")}castActiveBasemap(e){return Lk(e)}get activeBasemapIndex(){const{state:e,activeBasemap:t}=this;return e!=="ready"?-1:this._findBasemapIndex(t)}get compatibilityFunction(){var e;return((e=this.view)==null?void 0:e.type)==="3d"?wve:bve}set compatibilityFunction(e){this._overrideIfSome("compatibilityFunction",e)}castSource(e){return Array.isArray(e)||xe.isCollection(e)?new sU({basemaps:Array.isArray(e)?new xe(e):e}):Mve(e)?new h0({portal:e}):$ve(e)?new h0(e):Eve(e)?e:null}get state(){var e;return(e=this.view)!=null&&e.ready&&this.source?ave(this.view)&&!this.view.inGeographicLayout?"unsupported":this._loadingProjectionEngine?"loading":"ready":"disabled"}basemapEquals(e,t){return IK(e,t)}refresh(){this._recreateItems()}load(){return this.loadSource()}loadSource(e){return this.addResolvingPromise(Xs.isLoadable(this.source)?this.source.load(e):null),Promise.resolve(this)}_findBasemapIndex(e){const{items:t}=this,i=t.findIndex(r=>r.basemap===e);return i===-1?t.findIndex(r=>this.basemapEquals(r.basemap,e)):i}_recreateItems(){var p;const e=((p=this.source)==null?void 0:p.basemaps)??[],{view:t,compatibilityFunction:i}=this,r=new Map(this.items.map(y=>[y.basemap,y])),a=e.map(y=>{const g=r.get(y);return g?(r.delete(y),g):new iU({basemap:y,compatibilityFunction:i,view:t})});this.items.removeAll(),this.items.addMany(a),r.forEach(y=>y.destroy())}_updateItems(){for(const e of this.items)e.compatibilityFunction=this.compatibilityFunction,e.view=this.view}};v([S()],ps.prototype,"_loadingProjectionEngine",void 0),v([S({type:Vl})],ps.prototype,"activeBasemap",null),v([ct("activeBasemap")],ps.prototype,"castActiveBasemap",null),v([S({readOnly:!0})],ps.prototype,"activeBasemapIndex",null),v([S()],ps.prototype,"compatibilityFunction",null),v([S({readOnly:!0,type:oU})],ps.prototype,"items",void 0),v([S()],ps.prototype,"source",void 0),v([ct("source")],ps.prototype,"castSource",null),v([S({readOnly:!0})],ps.prototype,"state",null),v([S()],ps.prototype,"view",void 0),ps=v([H("esri.widgets.BasemapGallery.BasemapGalleryViewModel")],ps);const Ive=ps,cn="esri-basemap-gallery",pn={base:cn,sourceLoading:`${cn}--source-loading`,loader:`${cn}__loader`,item:`${cn}__item`,itemContainer:`${cn}__item-container`,itemContent:`${cn}__item-content`,itemTitle:`${cn}__item-title`,itemTagsContainer:`${cn}__item-tags-container`,itemThumbnail:`${cn}__item-thumbnail`,selectedItem:`${cn}__item--selected`,itemError:`${cn}__item--error`};function wA({level:e,class:t,...i},r){const a=Ave(e);return Ge(`h${a}`,{...i,"aria-level":String(a),class:HR(ii.heading,t),role:"heading"},r)}function Ave(e){return xs(Math.ceil(e),1,6)}let Gr=class extends pu{constructor(t,i){super(t,i),this.disabled=!1,this.headingLevel=2,this.messages=null,this.viewModel=new Ive,this._focusBasemapItemEnabled=!1,K4(ye.getLogger(this),"Basemap Gallery","arcgis-basemap-gallery",{version:"4.32"})}initialize(){this.addHandles(gr(()=>this.source,()=>this.viewModel.loadSource(),{sync:!0,initial:!0}))}loadDependencies(){return Yh({scrim:()=>fe(()=>import("./index-CAMexMjX.js"),__vite__mapDeps([292,260,261,262,266,265,264])),chip:()=>fe(()=>import("./index-xEr6MRTq.js"),__vite__mapDeps([293,263,264,261,265,266,271,269,294,262]))})}get activeBasemap(){return this.viewModel.activeBasemap}set activeBasemap(t){this.viewModel.activeBasemap=t}get icon(){return"basemap"}set icon(t){this._overrideIfSome("icon",t)}get label(){var t;return((t=this.messages)==null?void 0:t.widgetLabel)??""}set label(t){this._overrideIfSome("label",t)}get source(){return this.viewModel.source}set source(t){this.viewModel.source=t}get view(){return this.viewModel.view}set view(t){this.viewModel.view=t}render(){const t=this.source.state==="loading",i=this.disabled||this.viewModel.state==="disabled",r={[pn.sourceLoading]:t,[ii.disabled]:i};return Ge("div",{class:this.classes(pn.base,ii.widget,ii.panel,r),key:"container"},this._getContext())}_getContext(){if(this.viewModel.state==="unsupported")return Ge("div",{class:ii.empty,key:"empty-message"},Ge(wA,{level:this.headingLevel},this.messages.unsupported));if(this.source.state==="loading")return Ge("div",{class:pn.loader,key:"loader"});const t=this.viewModel.items;return t.length>0?Ge("ul",{"aria-disabled":this.disabled,"aria-label":this.label,bind:this,class:pn.itemContainer,key:"item-container",onkeydown:this._handleKeyDown,role:"radiogroup"},t.map((i,r)=>this._renderBasemapGalleryItem(i,r)).toArray()):Ge("div",{class:ii.empty,key:"empty-message"},Ge(wA,{level:this.headingLevel},this.messages.noBasemaps))}_getRoundRobinIndex(t,i){return(t+i)%i}_handleKeyDown(t){const{key:i}=t;if(!["ArrowUp","ArrowDown","ArrowRight","ArrowLeft"].includes(i))return;t.preventDefault();const{items:r,activeBasemapIndex:a}=this.viewModel,p=i==="ArrowUp"||i==="ArrowLeft"?this._getRoundRobinIndex(Math.max(a-1,-1),r.length):this._getRoundRobinIndex(a+1,r.length),y=r.at(p);(y==null?void 0:y.state)==="ready"&&(this.viewModel.activeBasemap=y.basemap),this._focusBasemapItemEnabled=!0}_focusBasemapItem(t){this._focusBasemapItemEnabled&&t.tabIndex===0&&(t.focus(),this._focusBasemapItemEnabled=!1)}_handleClick(t){const i=t.currentTarget["data-item"];i.state==="ready"&&(this.viewModel.activeBasemap=i.basemap)}_renderBasemapGalleryItem(t,i){var z,q;const r=kK(t.basemap)||ti("esri/themes/base/images/basemap-toggle-64.svg"),a=t.basemap.title,p=(z=t.basemap.portalItem)==null?void 0:z.snippet,y=((q=t.error)==null?void 0:q.message)||p||a,{viewModel:{state:g,activeBasemapIndex:_}}=this,T=this.disabled||g==="disabled",I=_===i,A=I||_===-1&&i===0?0:-1,P=g==="loading",N={[pn.selectedItem]:I,[pn.itemError]:t.state==="error"},D=`basemapgallery-item-${t.uid}`;return Ge("li",{afterUpdate:this._focusBasemapItem,"aria-checked":I.toString(),"aria-disabled":T.toString(),"aria-labelledby":D,bind:this,class:this.classes(pn.item,N),"data-item":t,key:t.uid,onclick:this._handleClick,onkeydown:this._handleClick,role:"radio",tabIndex:A,title:y},Ge("img",{alt:"",class:pn.itemThumbnail,src:r}),Ge("div",{class:pn.itemContent,key:"content"},Ge("div",{class:pn.itemTitle,key:"title"},Ge("span",{id:D},a)),MK(t.basemap)?this._renderTags(t.basemap):null),t.state==="loading"||I&&P?Ge("calcite-scrim",null,Ge("span",{"aria-hidden":"true",class:ii.loaderAnimation,key:"loader",role:"presentation"})):null)}_renderTags(t){return Ge("div",{class:pn.itemTagsContainer,key:"tag"},this._render3DTag(),$K(t)?this._renderBetaTag():null)}_render3DTag(){const{messages:t}=this;return Ge("calcite-chip",{key:"tag-3d",label:t.tag3D,scale:"s"},this.messages.tag3D)}_renderBetaTag(){const{messages:t}=this;return Ge("calcite-chip",{appearance:"outline-fill",key:"tag-beta",label:t.tagBeta,scale:"s"},this.messages.tagBeta)}};v([S()],Gr.prototype,"activeBasemap",null),v([S()],Gr.prototype,"disabled",void 0),v([S()],Gr.prototype,"headingLevel",void 0),v([S()],Gr.prototype,"icon",null),v([S()],Gr.prototype,"label",null),v([S(),jn("esri/widgets/BasemapGallery/t9n/BasemapGallery")],Gr.prototype,"messages",void 0),v([S()],Gr.prototype,"source",null),v([S()],Gr.prototype,"view",null),v([S()],Gr.prototype,"viewModel",void 0),v([S()],Gr.prototype,"_focusBasemapItemEnabled",void 0),v([Hj()],Gr.prototype,"_handleClick",null),Gr=v([H("esri.widgets.BasemapGallery")],Gr);const Cve=Gr;let _l=class extends Ae{constructor(e){super(e),this._viewpointHandle=null,this.group=null}initialize(){this.addHandles(_o(()=>{var e;return(e=this.view)==null?void 0:e.ui},"expand",e=>{const{target:t}=e;t&&t!==this&&t.expanded&&t.group&&t.group===this.group&&this._collapse()}))}destroy(){this._viewpointHandle=null,this.view=null}set autoCollapse(e){this._set("autoCollapse",e),this._watchViewpoint()}set expanded(e){var r;const t=!!e;this._set("expanded",t);const i=(r=this.view)==null?void 0:r.ui;i&&i.emit("expand",{target:this}),this._viewpointHandleChange(t)}get state(){var e;return(e=this.view)!=null&&e.ready?"ready":"disabled"}set view(e){this._get("view")!==e&&(this._set("view",e),e&&gr(()=>e.ready,()=>{this.view===e&&this._watchViewpoint()},{once:!0,initial:!0}))}_viewpointHandleChange(e){this._viewpointHandle&&(e?gr(()=>{var t;return(t=this.view)==null?void 0:t.stationary},()=>{var t;return(t=this._viewpointHandle)==null?void 0:t.resume()},{once:!0,initial:!0}):this._viewpointHandle.pause())}_watchViewpoint(){const e="viewpoint";this.removeHandles(e),this._viewpointHandle=null;const{autoCollapse:t,view:i}=this;if(!i||!t)return;const r=rZ(()=>i.type==="3d"?i.camera:i.viewpoint,()=>this._collapse());this.addHandles(r,e),this._viewpointHandle=r}_collapse(){this.expanded=!1}};v([S({value:!1})],_l.prototype,"autoCollapse",null),v([S({value:!1})],_l.prototype,"expanded",null),v([S()],_l.prototype,"group",void 0),v([S({readOnly:!0})],_l.prototype,"state",null),v([S({value:null})],_l.prototype,"view",null),_l=v([H("esri.widgets.Expand.ExpandViewModel")],_l);const aU=_l;function o3(e){return e&&typeof e.render=="function"}function Ove(e){return e&&typeof e.postMixInProperties=="function"&&typeof e.buildRendering=="function"&&typeof e.postCreate=="function"&&typeof e.startup=="function"}const Wa="esri-expand",is={base:Wa,toggle:`${Wa}__toggle`,popoverContent:`${Wa}__popover-content`,panel:`${Wa}__panel`,panelContent:`${Wa}__panel-content`,sheet:`${Wa}__sheet`,contentContainer:`${Wa}__content-container`,icon:"esri-collapse__icon",iconFlip:"esri-collapse__icon-flip",iconNumber:`${Wa}__icon-number`},bA="chevrons-left",_A="chevrons-right";let Gt=class extends pu{constructor(e,t){super(e,t),this.closeOnEsc=!0,this.collapseTooltip="",this.content="",this.expandTooltip="",this.focusTrapDisabled=!1,this.iconNumber=0,this.messages=null,this.messagesCommon=null,this.mode="auto",this.placement=null,this.viewModel=new aU,this.toggle=()=>{this.viewModel.expanded=!this.viewModel.expanded},this._handlePopoverClose=i=>{i.target===this._popoverEl&&(this.viewModel.expanded=i.currentTarget.open)},this._handleSheetClose=i=>{this.viewModel.expanded=i.currentTarget.open},this._handlePanelClose=i=>{this.viewModel.expanded=!i.currentTarget.closed},this._handleKeyDown=i=>{this.viewModel.expanded&&i.key==="Escape"&&!this._willCloseOnEsc(i)&&i.preventDefault()},this._storeToggleActionEl=i=>{this._toggleActionEl=i},this._storePopoverEl=i=>{this._popoverEl=i}}initialize(){this.addHandles(Le(()=>{var e,t;return(t=(e=this.viewModel)==null?void 0:e.view)==null?void 0:t.size},()=>{var e;return(e=this._popoverEl)==null?void 0:e.reposition()},Pi))}loadDependencies(){return Yh({action:()=>fe(()=>import("./index-DjFjT8aR.js"),__vite__mapDeps([295,260,261,262,263,264,265,291,266,269,271])),icon:()=>fe(()=>import("./index-DQzuOjKz.js").then(e=>e.i),__vite__mapDeps([263,264,261,265])),panel:()=>fe(()=>import("./index-CTLwDD7A.js").then(e=>e.i),__vite__mapDeps([296,260,261,262,263,264,265,295,291,266,269,271,297,287,288,289,267,290,298,294,299,292])),popover:()=>fe(()=>import("./index-CW1OuYt6.js").then(e=>e.i),__vite__mapDeps([297,260,261,262,263,264,265,295,291,266,269,271,287,288,289,267,290,298,294])),sheet:()=>fe(()=>import("./index-BqwqN2_e.js"),__vite__mapDeps([300,260,261,262,292,266,265,264,263,291,301,271,289,302,298]))})}get expandTitle(){const{expanded:e,messagesCommon:t,collapseTooltip:i,expandTooltip:r}=this;return(e?i||(t==null?void 0:t.collapse):r||(t==null?void 0:t.expand))??""}get _displaySheet(){var e;switch(this.mode){case"drawer":return!0;case"auto":return((e=this.viewModel.view)==null?void 0:e.widthBreakpoint)==="xsmall";default:return!1}}get autoCollapse(){return this.viewModel.autoCollapse}set autoCollapse(e){this.viewModel.autoCollapse=e}get collapseIcon(){return _A}set collapseIcon(e){this._overrideIfSome("collapseIcon",e)}get expanded(){return this.viewModel.expanded}set expanded(e){this.viewModel.expanded=e}get expandIcon(){return o3(this.content)?this.content.icon:bA}set expandIcon(e){this._overrideIfSome("expandIcon",e)}get group(){return this.viewModel.group}set group(e){this.viewModel.group=e}get icon(){return null}get label(){var e;return(o3(this.content)?this.content.label:null)??((e=this.messages)==null?void 0:e.widgetLabel)??""}set label(e){this._overrideIfSome("label",e)}get view(){return this.viewModel.view}set view(e){this.viewModel.view=e}expand(){this.viewModel.expanded=!0}collapse(){this.viewModel.expanded=!1}render(){const{_displaySheet:e,_toggleActionEl:t,viewModel:{expanded:i},label:r,placement:a}=this;return Ge("div",{class:this.classes(is.base,ii.widget)},this._renderToggle(),e?Ge("calcite-sheet",{class:is.sheet,heightScale:"l",label:r,onkeydown:this._handleKeyDown,open:i,position:"block-end",onCalciteSheetClose:this._handleSheetClose},Ge("calcite-panel",{class:is.panel,closable:!0,closed:!i,heading:r,onkeydown:this._handleKeyDown,onCalcitePanelClose:this._handlePanelClose},Ge("div",{class:is.panelContent},this._renderContent()))):t?Ge("calcite-popover",{afterCreate:this._storePopoverEl,afterUpdate:this._storePopoverEl,focusTrapDisabled:this.focusTrapDisabled,label:r,onkeydown:this._handleKeyDown,open:i,overlayPositioning:"fixed",placement:a??this._getPlacement(),referenceElement:t,onCalcitePopoverClose:this._handlePopoverClose},Ge("div",{class:is.popoverContent},this._renderContent())):null)}_getPlacement(){const{container:e,view:t}=this,i=e&&t?t.ui.getPosition(e):null;if(!i||i==="manual")return"auto";const[r,a]=i.split("-");return`${a==="right"?"left":"right"}-${r==="bottom"?"end":"start"}`}_willCloseOnEsc(e){const{closeOnEsc:t}=this;return typeof t=="function"?t(e):t}_renderBadgeNumber(){const{expanded:e,iconNumber:t}=this;return t&&!e?Ge("span",{class:is.iconNumber,key:"expand__icon-number"},t):null}_renderToggleButton(){const{expanded:e,expandTitle:t,expandIcon:i,collapseIcon:r}=this,a=e?r:i,p=a===bA||a===_A;return Ge("calcite-action",{afterCreate:this._storeToggleActionEl,afterUpdate:this._storeToggleActionEl,class:ii.widgetButton,onclick:this.toggle,scale:"s",text:t,title:t},a?Ge("calcite-icon",{class:this.classes(is.icon,p&&is.iconFlip),icon:a,scale:"s"}):null)}_renderToggle(){return Ge("div",{class:is.toggle},this._renderToggleButton(),this._renderBadgeNumber())}_renderContent(){const{content:e}=this;return typeof e=="string"?Ge("div",{class:is.contentContainer,innerHTML:e,key:"content__string"}):o3(e)?Ge("div",{class:is.contentContainer,key:"content__widget"},e.render()):e instanceof HTMLElement?Ge("div",{afterCreate:this._attachToNode,bind:e,class:is.contentContainer,key:"content__html-element"}):Ove(e)?Ge("div",{afterCreate:this._attachToNode,bind:e.domNode,class:is.contentContainer,key:"content__node"}):null}_attachToNode(e){const t=this;e.appendChild(t)}};v([S({readOnly:!0})],Gt.prototype,"expandTitle",null),v([S()],Gt.prototype,"_toggleActionEl",void 0),v([S()],Gt.prototype,"_displaySheet",null),v([S()],Gt.prototype,"autoCollapse",null),v([S()],Gt.prototype,"closeOnEsc",void 0),v([S()],Gt.prototype,"collapseIcon",null),v([S()],Gt.prototype,"collapseTooltip",void 0),v([S()],Gt.prototype,"content",void 0),v([S()],Gt.prototype,"expanded",null),v([S()],Gt.prototype,"expandIcon",null),v([S()],Gt.prototype,"expandTooltip",void 0),v([S()],Gt.prototype,"focusTrapDisabled",void 0),v([S()],Gt.prototype,"group",null),v([S()],Gt.prototype,"icon",null),v([S()],Gt.prototype,"iconNumber",void 0),v([S()],Gt.prototype,"label",null),v([S(),jn("esri/widgets/Expand/t9n/Expand")],Gt.prototype,"messages",void 0),v([S(),jn("esri/t9n/common")],Gt.prototype,"messagesCommon",void 0),v([S()],Gt.prototype,"mode",void 0),v([S()],Gt.prototype,"placement",void 0),v([S()],Gt.prototype,"view",null),v([S({type:aU})],Gt.prototype,"viewModel",void 0),Gt=v([H("esri.widgets.Expand")],Gt);const Pve=Gt,sw=55e4,lU=new Td({labelExpressionInfo:{expression:"$feature.name"},symbol:{type:"text",color:"black",haloColor:"white",haloSize:1,font:{family:"sans-serif",size:12,weight:"bold"}},labelPlacement:"always-horizontal"}),Qh=new Uk({basemap:"topo-vector"}),ds=new cpe({container:"viewDiv",map:Qh,center:[-1.65,53.86],zoom:6}),kve=new cu({color:[0,120,255,.2],outline:{color:[0,120,255,1],width:2}}),B4=new Xh({url:"https://services.arcgis.com/HRPe58bUyBqyyiCt/arcgis/rest/services/MachLoop_Area/FeatureServer/0",renderer:new Or({symbol:kve}),outFields:["*"],labelingInfo:[lU],labelsVisible:!0,popupTemplate:{title:"Mach Loop Area",content:"This is the designated low-flying military training area."},maxScale:2e5});Qh.add(B4);const Rve=new Or({symbol:new Io({url:"/machloop/camping.svg",width:"24px",height:"24px"})}),Nve=new Xh({url:"https://services.arcgis.com/HRPe58bUyBqyyiCt/arcgis/rest/services/CampingLocations/FeatureServer/0",minScale:sw,renderer:Rve,outFields:["*"],popupTemplate:{title:"{name}",content:"{facilities}"}});Qh.add(Nve);const Lve=new Or({symbol:new Io({url:"/machloop/parking.svg",width:"24px",height:"24px"})}),Dve=new Xh({url:"https://services.arcgis.com/HRPe58bUyBqyyiCt/arcgis/rest/services/ParkingLocations/FeatureServer/0",minScale:sw,renderer:Lve,outFields:["*"],popupTemplate:{title:"{name}",content:"{spots}"}});Qh.add(Dve);const jve=new Or({symbol:new Io({url:"/machloop/view.svg",width:"24px",height:"24px"})}),uU=new Xh({url:"https://services.arcgis.com/HRPe58bUyBqyyiCt/arcgis/rest/services/ViewingLocations/FeatureServer/0",minScale:sw,renderer:jve,outFields:["*"],popupTemplate:{title:"  Site Name: {name}",content:e=>{const t=e.graphic.attributes,i=t.Nearest_Town||"Unknown",r=t.site_info||"No additional information provided.",a=t.What3Words,p=a?a.replace(/^\/+/,""):null,y=p?`<a href="https://what3words.com/${p}" target="_blank" style="color:#005e95;">
             ${a}
           </a>`:"<em>Not available</em>";return`
        <div style="font-size: 14px; line-height: 1.6;">
          <strong>Nearest Town:</strong> ${i}<br>
          <strong>Site Info:</strong><br>
          <div style="margin: 4px 0 10px;">${r}</div>
          <strong>What3Words:</strong> ${y}
        </div>
      `}}});Qh.add(uU);const Fve=new Or({symbol:new Io({url:"/machloop/plane.svg",width:"24px",height:"24px"})}),zve=new Xh({url:"https://services.arcgis.com/HRPe58bUyBqyyiCt/arcgis/rest/services/MachLoop_Image_Collector_3_view/FeatureServer/0",minScale:sw,renderer:Fve,outFields:["*"],popupTemplate:{title:"📷 Aircraft Sighting",content:async e=>{var y,g;const t=e.graphic.layer,i=e.graphic.attributes.objectid,a=(g=(y=(await t.queryAttachments({objectIds:[i]}))[i])==null?void 0:y[0])==null?void 0:g.url,p=e.graphic.attributes;return`
        <div style="font-size: 14px; line-height: 1.6; max-width: 300px;">
          ${a?`<img src="${a}" alt="Aircraft Photo" style="width: 100%; border-radius: 6px; margin-bottom: 8px;" />`:"<em>No image available</em>"}
  
          <strong>Date Taken:</strong> ${p.when_was_this_image_taken?new Date(p.when_was_this_image_taken).toLocaleDateString():"Unknown"}<br>
          <strong>Aircraft:</strong> ${p.please_identify_the_aircraft_in||"Unknown"}<br>
          <strong>Category:</strong> ${p.what_is_the_general_category_of||"Not specified"}<br>
          ${p.what_is_the_general_categ_other?`<strong>Other Category:</strong> ${p.what_is_the_general_categ_other}<br>`:""}
  
          <hr style="margin: 10px 0;">
          <div style="font-size: 12px; color: #666;">
            Uploaded by ${p.Creator||"anonymous"} on ${p.CreationDate?new Date(p.CreationDate).toLocaleDateString():"Unknown"}
          </div>
        </div>
      `}}});Qh.add(zve);const Uve=new Or({symbol:new Io({url:"/machloop/fighter-jet.svg",width:"24px",height:"24px"})}),Vve=new Xh({url:"https://services.arcgis.com/HRPe58bUyBqyyiCt/arcgis/rest/services/RAF_Bases/FeatureServer/0",renderer:Uve,labelingInfo:[lU],labelsVisible:!1,outFields:["*"],popupTemplate:{title:"Royal Air Force Base: {name}",content:e=>{var r,a;const t=e.graphic.attributes,i=e.graphic.geometry;return(r=i.latitude)==null||r.toFixed(6),(a=i.longitude)==null||a.toFixed(6),`
        <div style="display: flex; gap: 12px;">
          <img src="${t.image_URL}" alt=" RAF Base Image" style="width: 100px; height: auto; border-radius: 6px; object-fit: cover;" />
          <div style="font-size: 14px; line-height: 1.5;">
            <ul style="padding-left: 18px; margin: 0;">
              <li><strong>ICAO Code:</strong> ${t.ICAO_Code||"N/A"}</li>
              <li><strong>IATA Code:</strong> ${t.IATA_Code||"N/A"}</li>
              <li><strong>Elevation:</strong> ${t.elevation||"N/A"}</li>
              <li><strong>Runway:</strong> ${t.runway||"N/A"}</li>
            </ul>
          </div>
        </div>
  
        <div style="margin-top: 16px; font-size: 14px; line-height: 1.6;">
          ${t.description||""}
        </div>
      `}}});Qh.add(Vve);const Gve=new sve({view:ds,useHeadingEnabled:!1,goToOverride:(e,t)=>(t.target.scale=1500,e.goTo(t.target))});ds.ui.add(Gve,"top-left");ds.when(()=>{const e=new Cve({view:ds}),t=new Pve({view:ds,content:e,expandIconClass:"esri-icon-basemap",expandTooltip:"Choose a basemap",group:"top-left"});ds.ui.add(t,"top-left");const i=new Zj({view:ds});ds.ui.add(i,"top-left"),B4.when(()=>{B4.queryExtent().then(p=>{const y=p.extent,g=new ove({view:ds,viewpoint:{targetGeometry:y}});ds.ui.add(g,"top-left")})}),document.getElementById("nearestBtn").addEventListener("click",async()=>{if(!navigator.geolocation){alert("Geolocation is not supported by your browser.");return}navigator.geolocation.getCurrentPosition(async p=>{await xo();const y=new Be({longitude:p.coords.longitude,latitude:p.coords.latitude,spatialReference:{wkid:4326}}),g=Ca(y,ds.spatialReference),_=await uU.queryFeatures({where:"1=1",outFields:["*"],returnGeometry:!0});if(!_.features.length){alert("No viewing locations found.");return}let T=null,I=1/0;_.features.forEach(A=>{const P=Jz(g,A.geometry,"meters");P<I&&(I=P,T=A)}),T&&(ds.goTo({target:T.geometry,zoom:15}),ds.openPopup({features:[T],location:T.geometry}))},p=>{alert("Failed to get your location."),console.error(p)})});const r=document.getElementById("infoModal");document.getElementById("closeInfo").addEventListener("click",()=>{r.style.display="none"})});const Bve="https://arcg.is/0GXX1v2";surveyBtn.addEventListener("click",()=>{window.open(Bve,"_blank")});export{aK as $,At as A,j0e as B,er as C,ew as D,lme as E,Ofe as F,Sa as G,Loe as H,mr as I,Pfe as J,kfe as K,lbe as L,ne as M,te as N,vF as O,kt as P,GL as Q,$a as R,L6e as S,he as T,ou as U,yZ as V,yd as W,Z6 as X,WZ as Y,vk as Z,fe as _,ame as a,Vie as a$,v as a0,S as a1,H as a2,MSe as a3,TSe as a4,_s as a5,xe as a6,zse as a7,Mo as a8,NJ as a9,g2 as aA,loe as aB,rk as aC,kl as aD,HZ as aE,wZ as aF,bZ as aG,_Z as aH,Roe as aI,cR as aJ,Mh as aK,nS as aL,hR as aM,k8 as aN,t9e as aO,Kbe as aP,KA as aQ,Uh as aR,gU as aS,at as aT,vJ as aU,rt as aV,Re as aW,qe as aX,Dh as aY,P1 as aZ,Gie as a_,kJ as aa,ye as ab,u6e as ac,zp as ad,uxe as ae,f5e as af,Gh as ag,fi as ah,Jl as ai,wo as aj,Ar as ak,W1e as al,hye as am,ED as an,sye as ao,Soe as ap,Boe as aq,u_ as ar,Iz as as,eye as at,Az as au,Ez as av,cye as aw,nye as ax,q1e as ay,J1e as az,Vv as b,Zwe as b$,Ma as b0,di as b1,p6e as b2,D6e as b3,Ci as b4,g6e as b5,kj as b6,Rj as b7,po as b8,Ze as b9,_3e as bA,nd as bB,Js as bC,en as bD,xs as bE,r6e as bF,lo as bG,zM as bH,NM as bI,WA as bJ,Ir as bK,Oy as bL,h3e as bM,VL as bN,Oi as bO,_h as bP,XK as bQ,GE as bR,VE as bS,yt as bT,A4 as bU,k2e as bV,Hv as bW,qv as bX,tbe as bY,B6 as bZ,M1e as b_,e$ as ba,Iv as bb,e6e as bc,De as bd,Md as be,r2e as bf,RA as bg,uR as bh,w4e as bi,Ule as bj,FM as bk,jM as bl,DM as bm,LM as bn,Wm as bo,Kp as bp,uv as bq,Wt as br,Zs as bs,X4 as bt,Lt as bu,b1 as bv,$o as bw,hi as bx,S3e as by,b3e as bz,Ux as c,Dn as c$,Kwe as c0,$te as c1,ebe as c2,Tte as c3,mte as c4,Ql as c5,Qwe as c6,Xwe as c7,Ywe as c8,yte as c9,Rwe as cA,Nwe as cB,G3 as cC,C0 as cD,$le as cE,z_e as cF,Xe as cG,V_e as cH,t6e as cI,vL as cJ,tu as cK,_o as cL,l5e as cM,T2 as cN,tt as cO,ti as cP,Le as cQ,Pi as cR,Jh as cS,s7e as cT,Or as cU,gr as cV,Ht as cW,Ca as cX,Aa as cY,xo as cZ,Ct as c_,p5e as ca,d5e as cb,Kl as cc,me as cd,S0 as ce,a7 as cf,Si as cg,tX as ch,NA as ci,Fp as cj,owe as ck,T1 as cl,ze as cm,Mxe as cn,Exe as co,$xe as cp,N1e as cq,R1e as cr,PS as cs,Ne as ct,Iy as cu,HK as cv,Cwe as cw,Pwe as cx,Owe as cy,kwe as cz,ud as d,Ss as d$,Ts as d0,k3 as d1,qt as d2,Zg as d3,P3 as d4,N3 as d5,TR as d6,HD as d7,Pe as d8,o1 as d9,PA as dA,fde as dB,wme as dC,X6 as dD,jde as dE,b8 as dF,Cse as dG,Ose as dH,Jr as dI,u2e as dJ,ld as dK,YG as dL,i0e as dM,YSe as dN,qSe as dO,rL as dP,A0 as dQ,_9 as dR,t0e as dS,XSe as dT,QSe as dU,iq as dV,t7e as dW,kT as dX,e7e as dY,uZ as dZ,w1 as d_,Ii as da,$v as db,f_ as dc,use as dd,Ft as de,qM as df,xw as dg,dt as dh,D1 as di,o9 as dj,p3e as dk,D5e as dl,r9e as dm,Ta as dn,gO as dp,Ae as dq,vee as dr,gSe as ds,Z0 as dt,qr as du,qi as dv,xh as dw,a3 as dx,Kve as dy,Cle as dz,Tce as e,ct as e$,e9e as e0,l3e as e1,hbe as e2,zA as e3,nq as e4,r2 as e5,s2 as e6,E6 as e7,I6 as e8,sq as e9,hoe as eA,xD as eB,MD as eC,H4 as eD,W4 as eE,S8 as eF,Ys as eG,CU as eH,f2e as eI,HG as eJ,jp as eK,f6 as eL,cwe as eM,CY as eN,wD as eO,lu as eP,Ioe as eQ,jZ as eR,uoe as eS,TD as eT,joe as eU,fbe as eV,lv as eW,Gv as eX,Bv as eY,Zz as eZ,Uge as e_,k1 as ea,X0 as eb,hS as ec,ube as ed,EO as ee,gz as ef,Die as eg,ste as eh,c5e as ei,M1 as ej,O1 as ek,Bee as el,gN as em,gte as en,m5e as eo,ys as ep,y5e as eq,vN as er,QJ as es,_O as et,x6 as eu,YB as ev,Gs as ew,n2 as ex,bD as ey,$D as ez,c6e as f,Gg as f$,lxe as f0,_1 as f1,ewe as f2,uwe as f3,tE as f4,Kg as f5,jwe as f6,ESe as f7,U2 as f8,O2e as f9,Pl as fA,vs as fB,oB as fC,e2 as fD,m6 as fE,aB as fF,zz as fG,iwe as fH,So as fI,Ig as fJ,be as fK,Sme as fL,ySe as fM,bO as fN,Pme as fO,sv as fP,ft as fQ,wd as fR,Xh as fS,Xbe as fT,MX as fU,cY as fV,u3e as fW,Bi as fX,jT as fY,Vs as fZ,G0 as f_,Q4 as fa,md as fb,vme as fc,eme as fd,hme as fe,hF as ff,Hde as fg,Gde as fh,Ms as fi,tr as fj,Ao as fk,Io as fl,cu as fm,Vde as fn,Vpe as fo,yde as fp,Upe as fq,yoe as fr,moe as fs,Foe as ft,Bde as fu,AC as fv,hwe as fw,Wv as fx,x1 as fy,B0 as fz,O6e as g,LA as g$,Hve as g0,B5e as g1,n9e as g2,Np as g3,Eh as g4,e6 as g5,kU as g6,Gl as g7,b2e as g8,xee as g9,dC as gA,oV as gB,yU as gC,Gxe as gD,P6e as gE,CX as gF,$m as gG,Lwe as gH,awe as gI,Xs as gJ,$0e as gK,Dpe as gL,xSe as gM,Ide as gN,SSe as gO,Ede as gP,fC as gQ,pxe as gR,hm as gS,_5 as gT,op as gU,o2 as gV,d3e as gW,Bh as gX,c_ as gY,Ev as gZ,dc as g_,N1 as ga,W3e as gb,Ia as gc,J3e as gd,ap as ge,Z3e as gf,zl as gg,C1 as gh,Wve as gi,Jve as gj,$we as gk,Ewe as gl,w7e as gm,r1 as gn,ri as go,kL as gp,Pa as gq,Qs as gr,EI as gs,xI as gt,zbe as gu,Wp as gv,SR as gw,FS as gx,mSe as gy,koe as gz,E6e as h,Hk as h$,jA as h0,FA as h1,e2e as h2,m2e as h3,G4e as h4,qxe as h5,Jxe as h6,Wxe as h7,Uxe as h8,e5e as h9,mbe as hA,une as hB,V3 as hC,T6 as hD,M6 as hE,Xt as hF,ybe as hG,OZ as hH,gk as hI,boe as hJ,wk as hK,eq as hL,sX as hM,se as hN,LZ as hO,rX as hP,v2 as hQ,bR as hR,Zve as hS,am as hT,n2e as hU,Coe as hV,woe as hW,Xg as hX,k5e as hY,P5e as hZ,Kte as h_,Sxe as ha,xxe as hb,Nx as hc,jse as hd,Ube as he,c4e as hf,O4 as hg,cbe as hh,x4e as hi,X5e as hj,z5e as hk,Qbe as hl,v9e as hm,ms as hn,bwe as ho,vZ as hp,qw as hq,y1 as hr,F0 as hs,Pde as ht,rd as hu,v1 as hv,Gi as hw,Aoe as hx,N7 as hy,xne as hz,f6e as i,Jle as i$,$x as i0,LX as i1,R1 as i2,cB as i3,v6 as i4,dB as i5,fB as i6,Oh as i7,sme as i8,Tde as i9,h2e as iA,zT as iB,Hz as iC,vp as iD,XG as iE,vo as iF,Ks as iG,d1 as iH,Ix as iI,Jde as iJ,Wde as iK,qde as iL,vq as iM,hq as iN,LO as iO,k6e as iP,zSe as iQ,$be as iR,bv as iS,_be as iT,Nge as iU,CJ as iV,nbe as iW,vbe as iX,Pj as iY,h6e as iZ,R6e as i_,Xye as ia,Nde as ib,Tme as ic,$8 as id,uN as ie,Rme as ig,Zde as ih,Mme as ii,J2 as ij,r3 as ik,Td as il,Y_ as im,W2 as io,Rye as ip,J1 as iq,Ude as ir,Dx as is,qK as it,GK as iu,DK as iv,MT as iw,yp as ix,Xr as iy,y2 as iz,$6e as j,RX as j$,d_ as j0,GM as j1,U4e as j2,VM as j3,qs as j4,qD as j5,ua as j6,Ym as j7,W9e as j8,nD as j9,gZ as jA,fZ as jB,doe as jC,Goe as jD,qoe as jE,_ne as jF,tw as jG,aye as jH,vR as jI,tq as jJ,lq as jK,Ea as jL,foe as jM,_D as jN,hv as jO,Toe as jP,Fi as jQ,Uz as jR,DV as jS,Lpe as jT,n1e as jU,Ode as jV,u0e as jW,rz as jX,w0e as jY,WC as jZ,QC as j_,BS as ja,t_ as jb,Qp as jc,yne as jd,oD as je,n$ as jf,RM as jg,mu as jh,Vi as ji,g2e as jj,yV as jk,bs as jl,J2e as jm,Lp as jn,u6 as jo,sB as jp,hY as jq,zi as jr,cne as js,dne as jt,sD as ju,qve as jv,P0 as jw,p_ as jx,XL as jy,Y6 as jz,C6e as k,t4e as k$,eF as k0,n7e as k1,hz as k2,r6 as k3,Oc as k4,o0e as k5,y7e as k6,N0e as k7,tme as k8,L0e as k9,dxe as kA,OU as kB,Er as kC,xR as kD,j$ as kE,pwe as kF,MG as kG,a2e as kH,l2e as kI,o2e as kJ,BG as kK,Vh as kL,i2 as kM,Qn as kN,rZ as kO,Bbe as kP,qk as kQ,pY as kR,dY as kS,z0e as kT,wF as kU,_K as kV,SK as kW,kM as kX,s4e as kY,r4e as kZ,i4e as k_,In as ka,od as kb,mz as kc,Mx as kd,Ra as ke,Ome as kf,b0e as kg,T0e as kh,WF as ki,_x as kj,Lv as kk,zde as kl,Jt as km,A0e as kn,a0e as ko,l0e as kp,c0e as kq,p0e as kr,x0e as ks,d0e as kt,f0e as ku,y0e as kv,m0e as kw,g0e as kx,v0e as ky,qz as kz,a7e as l,iY as l$,o4e as l0,n4e as l1,e4e as l2,Q_e as l3,O6 as l4,Gq as l5,U as l6,Og as l7,JJ as l8,lV as l9,z2e as lA,F2e as lB,ehe as lC,_V as lD,bV as lE,t3e as lF,_ye as lG,Qve as lH,i6e as lI,ht as lJ,Mwe as lK,pu as lL,Yh as lM,Ge as lN,jn as lO,z6e as lP,ii as lQ,g7e as lR,Hue as lS,jQ as lT,vU as lU,twe as lV,AG as lW,Qv as lX,lwe as lY,rm as lZ,aR as l_,R2e as la,cxe as lb,hxe as lc,oz as ld,sz as le,pB as lf,MS as lg,F5e as lh,L5e as li,zne as lj,Une as lk,SD as ll,hse as lm,UM as ln,V4e as lo,zq as lp,Wq as lq,$1 as lr,Gwe as ls,jh as lt,mne as lu,o7 as lv,X_e as lw,HB as lx,n3e as ly,i6 as lz,Oce as m,fo as m$,Wbe as m0,RN as m1,fD as m2,dwe as m3,IU as m4,H3e as m5,N2 as m6,Dbe as m7,Lbe as m8,PL as m9,Hle as mA,Nte as mB,f1 as mC,S0e as mD,t5e as mE,O0e as mF,axe as mG,oxe as mH,sA as mI,Hl as mJ,J0 as mK,_me as mL,FZ as mM,CZ as mN,PZ as mO,af as mP,ma as mQ,BN as mR,CS as mS,vd as mT,gie as mU,Wne as mV,T4e as mW,q2e as mX,FL as mY,iD as mZ,s1 as m_,CL as ma,zre as mb,Vre as mc,exe as md,Bl as me,due as mf,yue as mg,mue as mh,ave as mi,hd as mj,PM as mk,rY as ml,fne as mm,Zr as mn,eS as mo,tS as mp,Mv as mq,Zk as mr,f4e as ms,p4e as mt,d4e as mu,zle as mv,VSe as mw,GSe as mx,USe as my,lD as mz,A6e as n,Wle as n$,NS as n0,Q9 as n1,EL as n2,B1 as n3,Q3e as n4,DA as n5,tO as n6,Q2e as n7,IO as n8,w7 as n9,eie as nA,pne as nB,q1 as nC,Wre as nD,pbe as nE,rwe as nF,pC as nG,eee as nH,cse as nI,Tx as nJ,lfe as nK,Bwe as nL,Twe as nM,tN as nN,pz as nO,Yl as nP,pde as nQ,Mde as nR,$de as nS,dde as nT,Rde as nU,zye as nV,rme as nW,wc as nX,BM as nY,Lue as nZ,z4e as n_,oO as na,Due as nb,X3e as nc,Hh as nd,Cn as ne,Lee as nf,gbe as ng,Dl as nh,OX as ni,Gbe as nj,Vbe as nk,j1 as nl,F1 as nm,z1 as nn,wye as no,Tye as np,NZ as nq,kZ as nr,RZ as ns,N5e as nt,R5e as nu,p6 as nv,JZ as nw,qZ as nx,_oe as ny,BZ as nz,hB as o,_v as o$,ZM as o0,JM as o1,gne as o2,Ud as o3,$r as o4,KZ as o5,lK as o6,Ip as o7,Kre as o8,$z as o9,P2e as oA,hL as oB,i2e as oC,YL as oD,w9e as oE,b9e as oF,_9e as oG,mo as oH,h4e as oI,t$ as oJ,Z_e as oK,epe as oL,Kr as oM,j2 as oN,KL as oO,QL as oP,qse as oQ,J9e as oR,ene as oS,Z9e as oT,MZ as oU,Abe as oV,Q6 as oW,Jre as oX,pse as oY,Nb as oZ,Cbe as o_,Sbe as oa,eK as ob,bye as oc,xye as od,ASe as oe,WB as of,IN as og,CSe as oh,xd as oi,gx as oj,sfe as ok,rfe as ol,X2 as om,jF as on,xfe as oo,BF as op,zv as oq,NF as or,D0 as os,n1 as ot,Nne as ou,Kfe as ov,Zfe as ow,bh as ox,P2 as oy,q6 as oz,obe as p,HR as p$,Doe as p0,V1 as p1,Zh as p2,abe as p3,v2e as p4,i3e as p5,s9e as p6,au as p7,K3e as p8,h1e as p9,C4e as pA,O4e as pB,P4e as pC,m4e as pD,v4e as pE,g4e as pF,fue as pG,gq as pH,va as pI,$se as pJ,LS as pK,eY as pL,Jz as pM,qbe as pN,fge as pO,Dwe as pP,i1 as pQ,_C as pR,uM as pS,Dre as pT,jre as pU,j3 as pV,ibe as pW,zwe as pX,Awe as pY,Iwe as pZ,mq as p_,bo as pa,Lh as pb,k4e as pc,GD as pd,Fbe as pe,Uv as pf,Bxe as pg,N4e as ph,R4e as pi,W_e as pj,J_e as pk,BE as pl,fse as pm,L2 as pn,jO as po,Fwe as pp,Rge as pq,ase as pr,Yre as ps,Xre as pt,Hbe as pu,yse as pv,jL as pw,o$ as px,YD as py,A4e as pz,swe as q,j4e as q$,wL as q0,gV as q1,mV as q2,kQ as q3,Wue as q4,bbe as q5,Yg as q6,Q4e as q7,Ai as q8,H2 as q9,Axe as qA,D1e as qB,Oxe as qC,YI as qD,ZI as qE,KI as qF,jxe as qG,Dxe as qH,zxe as qI,Fxe as qJ,S4e as qK,L1e as qL,M4e as qM,DS as qN,F1e as qO,_4e as qP,Txe as qQ,tue as qR,b4e as qS,r$ as qT,K_e as qU,Y_e as qV,$4e as qW,E4e as qX,L4e as qY,D4e as qZ,a4e as q_,Qxe as qa,H_e as qb,HE as qc,kde as qd,wSe as qe,ixe as qf,h5e as qg,r5e as qh,o5e as qi,s5e as qj,a5e as qk,n5e as ql,u5e as qm,Cr as qn,wee as qo,q3e as qp,X4e as qq,rxe as qr,Bx as qs,i5e as qt,Zxe as qu,C4 as qv,Cxe as qw,Hxe as qx,_xe as qy,Pxe as qz,Vz as r,wA as r$,F4e as r0,Fle as r1,Gle as r2,y4e as r3,uj as r4,Dp as r5,I4e as r6,nwe as r7,vne as r8,Mq as r9,r3e as rA,Lxe as rB,Nxe as rC,GI as rD,rI as rE,qI as rF,VI as rG,yI as rH,KE as rI,ZE as rJ,JE as rK,iI as rL,A2 as rM,kxe as rN,Rxe as rO,a3e as rP,L9e as rQ,OL as rR,dk as rS,vC as rT,QZ as rU,aX as rV,ise as rW,Ete as rX,I3e as rY,A3e as rZ,rw as r_,Tq as ra,Uwe as rb,UV as rc,cI as rd,oI as re,ZK as rf,aI as rg,TI as rh,lI as ri,c3e as rj,fI as rk,PI as rl,kI as rm,RI as rn,yY as ro,Jbe as rp,YK as rq,q3 as rr,NI as rs,Zbe as rt,u9e as ru,lne as rv,Ixe as rw,Vxe as rx,Ybe as ry,Kxe as rz,Y as s,W5e as s$,o3 as s0,vS as s1,xg as s2,Cte as s3,que as s4,Q0 as s5,t1 as s6,Xp as s7,Ate as s8,c2e as s9,u4e as sA,l4e as sB,lue as sC,Y4e as sD,q_e as sE,See as sF,pk as sG,Sne as sH,gB as sI,K5e as sJ,Y5e as sK,hK as sL,uK as sM,Voe as sN,I6e as sO,N6e as sP,it as sQ,iu as sR,$Se as sS,Ere as sT,G9e as sU,Sfe as sV,gc as sW,qfe as sX,l9e as sY,i9e as sZ,G5e as s_,Au as sa,Ove as sb,x7e as sc,m8 as sd,T7e as se,M7e as sf,Fge as sg,ux as sh,S7e as si,Qz as sj,L1 as sk,a5 as sl,y3e as sm,Nle as sn,AO as so,o3e as sp,bSe as sq,UY as sr,WSe as ss,HSe as st,OM as su,K4e as sv,Z4e as sw,J4e as sx,cue as sy,KD as sz,kme as t,q5e as t0,p2e as t1,f9e as t2,d9e as t3,s2e as t4,U5e as t5,e3e as t6,Q5e as t7,uee as t8,Hne as t9,N2e as tA,P6 as tB,N6 as tC,Mbe as tD,J5e as tE,Tbe as tF,q8 as tG,xbe as tH,s3e as tI,B8 as tJ,lS as tK,QA as tL,w2e as tM,Z5e as tN,UZ as tO,DZ as tP,G8 as tQ,ZZ as tR,x3e as tS,M3e as tT,s6e as tU,jSe as tV,txe as tW,v7e as tX,_7e as tY,dD as ta,B2e as tb,Zy as tc,n8 as td,Ebe as te,C2 as tf,BSe as tg,eu as th,I4 as ti,Xve as tj,fU as tk,Yve as tl,V5e as tm,B4e as tn,goe as to,H5e as tp,EZ as tq,j5e as tr,bxe as ts,up as tt,o9e as tu,Xte as tv,nse as tw,dbe as tx,Bre as ty,Yte as tz,o7e as u,Gme as v,m0 as w,m6e as x,ome as y,Be as z};
