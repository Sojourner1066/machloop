const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/IdentityManager-DrHJBn86.js","assets/substitute-BRrVD1Ye.js","assets/pe-wasm-Co3DzcyP.js","assets/_commonjsHelpers-DCkdB7M8.js","assets/ElevationLayer-CGmkqeXr.js","assets/MultiOriginJSONSupport-DTjGkcWT.js","assets/ArcGISCachedService-CfPFsmfZ.js","assets/TileInfoTilemapCache-BtCd4Frj.js","assets/TilemapCache-BrKqCO-j.js","assets/ByteSizeUnit-BsxeN7wM.js","assets/LRUCache-CVkPrTgN.js","assets/MemCache-C-Nfx2no.js","assets/memoryEstimations-CgKxTfPy.js","assets/ArcGISService-CMMnHQ8n.js","assets/OperationalLayer-B595cCIl.js","assets/layerContainerType-C5CzMsLd.js","assets/commonProperties-Dje_VWi3.js","assets/ElevationInfo-_zkowxr5.js","assets/lengthUtils-BULRlDy9.js","assets/PortalLayer-Ctz1GNPW.js","assets/portalItemUtils-BChta--g.js","assets/WorkerHandle-CAuoPZz3.js","assets/layersCreator-D0FCnAEq.js","assets/loadUtils-CmbJCXMV.js","assets/fetchService-GvNrh_p3.js","assets/associatedFeatureServiceUtils-D2DkM_Vz.js","assets/lazyLayerLoader-BRx5jHjD.js","assets/portalLayers-C8omzfVn.js","assets/styleUtils-D5W1z39h.js","assets/arcgisLayers-DICQgynO.js","assets/statsWorker-DZy4w7dY.js","assets/utils-BrCcQfny.js","assets/quantizationUtils-BIxUeD3r.js","assets/heatmapUtils-CtONkQbG.js","assets/vec42-r_rjmetX.js","assets/vec4f64-o2zAXfmz.js","assets/utils-BRTuCz6Z.js","assets/utils-B_zU764D.js","assets/ClassBreaksDefinition-BpDSQ-DZ.js","assets/geometryEngineWorker-CA-tZxOm.js","assets/geometryEngineJSON-Bvf5zUh7.js","assets/geometryEngineBase-B0ZyeKAX.js","assets/json-Wa8cmqdu.js","assets/CSVSourceWorker-1_0-5O51.js","assets/date-Ctp1FiBW.js","assets/OptimizedFeature-C6mq9JTm.js","assets/executeQueryForSnapping-liJQ_Q3r.js","assets/queryUtils-BbXXCFfE.js","assets/QueryEngine-BzlhqoCr.js","assets/featureConversionUtils-CmFMXzn8.js","assets/OptimizedFeatureSet-Blu9Ckm7.js","assets/WhereClauseCache-Dgrdb1iY.js","assets/WhereClause-DxC4tFtf.js","assets/TimeOnly-CK6o1IbC.js","assets/timeSupport-CCVo9mx-.js","assets/QueryEngineCapabilities-B_pTbIiR.js","assets/SnappingCandidate-DGkpYqI6.js","assets/FixedIntervalBinParameters-DGm8_bSu.js","assets/NormalizationBinParametersMixin-DSi88dGc.js","assets/FieldsIndex-BUP-kEKc.js","assets/FeatureStore-3F4g1OWe.js","assets/BoundsStore-BNTaLKxL.js","assets/PooledRBush-CPIS6Hd_.js","assets/optimizedFeatureQueryEngineAdapter-GcjfMA_3.js","assets/number-Don7DT-b.js","assets/clientSideDefaults-BWGkYSyZ.js","assets/defaultsJSON-GKolV7NZ.js","assets/EdgeProcessingWorker-DSVp5f8J.js","assets/workerHelper-BpcbzxOa.js","assets/InterleavedLayout-SNLQT-tB.js","assets/BufferView-BXNog7-H.js","assets/types-D0PSWh4d.js","assets/edgeProcessing-Dlb0QtSe.js","assets/deduplicate-DJGeTnP9.js","assets/Indices-C4Sjcx3e.js","assets/VertexAttribute-Cq4MnHjR.js","assets/glUtil-CLEG9xzX.js","assets/VertexElementDescriptor-BLyltQyJ.js","assets/Normals-BRHKyVWl.js","assets/ElevationSamplerWorker-CEAenzmf.js","assets/MeshLocalVertexSpace-BuDS7EV5.js","assets/vertexSpaceConversion-CcTEO-jT.js","assets/mat3f64-q3fE-ZOt.js","assets/mat4f64-Dk4dwAN8.js","assets/spatialReferenceEllipsoidUtils-uqn0M62i.js","assets/computeTranslationToOriginAndRotation-GwsoNcyy.js","assets/projectPointToVector-BZZzI2ev.js","assets/meshVertexSpaceUtils-Cn0NFlMx.js","assets/vec3-DwtEbRBU.js","assets/vec4-Cqh_C2p8.js","assets/FeatureServiceSnappingSourceWorker-CD_tfSmU.js","assets/symbologySnappingCandidates-C_8j3odi.js","assets/pbfQueryUtils-B-aOvyq_.js","assets/pbf-BH4GZv32.js","assets/query-BO9TePHk.js","assets/queryZScale-DXxr31Yj.js","assets/GeoJSONSourceWorker-CiHdtG-6.js","assets/geojson-DuBW7e8H.js","assets/sourceUtils-DbXHQn1b.js","assets/MemorySourceWorker-Xd1hIVF-.js","assets/objectIdUtils-4dd1rf9p.js","assets/PBFDecoderWorker-Dc9ev5FS.js","assets/dehydratedFeatures-CdriJ-WO.js","assets/FeaturePipelineWorker-DeVKkpo9.js","assets/defaultCIMValues-ubRuA6gU.js","assets/enums-BQDXKJnw.js","assets/AttributeStore-QwId8Gs8.js","assets/Utils-CwZGvqKY.js","assets/UpdateTracking2D-BocAtZm_.js","assets/BidiEngine-QXap_35O.js","assets/GeometryUtils-Vw9gX6Pp.js","assets/utils-DczMxsh3.js","assets/rasterizingUtils-Dadu4Kyy.js","assets/floatRGBA-BYnPkR9j.js","assets/Rect-CUzevAry.js","assets/defaults-Bcfj-Otq.js","assets/labelUtils-amu_CKvT.js","assets/streamLayerUtils-CKwt2uXH.js","assets/MeshWriterRegistry-DF1F5IVH.js","assets/TechniqueType-uMFRS8dR.js","assets/PieChartMeshWriter-B9AOJRRO.js","assets/TurboLine-BCjNw_HE.js","assets/utils-Cnq3Yhqb.js","assets/earcut-D9gy186-.js","assets/grouping-B_P5Hfin.js","assets/QueueProcessor-DoOk1BYJ.js","assets/operatorGeodeticDensify-BuSNRl5w.js","assets/SimpleGeometryCursor-B92kdZ15.js","assets/geodeticCurveType-CirnHLSB.js","assets/normalizeUtilsSync-FUk63VAw.js","assets/displayFilterUtils-hnpDiIlV.js","assets/ogcFeatureUtils-BaZWbu-Z.js","assets/parquet-BR2pBpHW.js","assets/CircularArray-CujHzHWW.js","assets/createConnection-BH6FdEwz.js","assets/PointCloudWorker-7nXkkrWs.js","assets/quat-CxtreLcX.js","assets/quatf64-aQ5IuZRd.js","assets/vec3f32-nZdmKIgz.js","assets/PointCloudUniqueValueRenderer-EFcn7k4D.js","assets/RendererLegendOptions-FePfC4i6.js","assets/ColorStop-DKLIbh6w.js","assets/I3SBinaryReader-e0sga9IQ.js","assets/orientedBoundingBox-BYGws-m9.js","assets/plane-DcF-Evox.js","assets/RasterWorker-BDsGdmZ4.js","assets/dataUtils-BcEfiAhZ.js","assets/RasterSymbolizer-HT0aqMB3.js","assets/colorUtils--t-SBskD.js","assets/rasterFunctionHelper-QanPYr0N.js","assets/rasterProjectionHelper-BaZdaZNS.js","assets/colorRamps-BtHD6lRq.js","assets/PolynomialTransform-CMNTBOc9.js","assets/SceneLayerSnappingSourceWorker-BsIdEEYq.js","assets/lineSegment-S1HXq0jb.js","assets/sphere-BTPZNzb3.js","assets/Octree-h2pAYJ7n.js","assets/SceneLayerWorker-CzgW0U9C.js","assets/projectVectorToVector-BXj0X49u.js","assets/I3SUtil-5FHcyXmx.js","assets/edgeUtils-D0sXCwEL.js","assets/NormalAttribute.glsl-CUQS_7X0.js","assets/glsl-BH37Aalp.js","assets/ShaderOutput-DnYY5J1_.js","assets/BindType-BBwFZqyN.js","assets/WFSSourceWorker-DoZK4qm1.js","assets/wfsUtils-CKg7ufUL.js","assets/xmlUtils-CtUoQO7q.js","assets/WorkerTileHandler-BeBl21Ab.js","assets/enums-BRzLM11V.js","assets/config-BOD8--da.js","assets/StyleDefinition-DBsc2ck4.js","assets/SourceLayerData-BiAcI5hz.js","assets/StyleRepository-BPh5uGCd.js","assets/Feature3DPipelineWorker-BjQCw2qy.js","assets/HUDMaterial.glsl-DgD6B1jy.js","assets/Geometry-BS7CUHw1.js","assets/renderState-CdSBNA8v.js","assets/basicInterfaces-CZwQPxTp.js","assets/boundedPlane-BDo8xZqW.js","assets/requestImageUtils-BlS_WBXC.js","assets/TextureFormat-1mYWTFa-.js","assets/triangle-DJTv0HpV.js","assets/HUDMaterial-DuUnbBq8.js","assets/VertexArrayObject-BhC6g2kH.js","assets/dehydratedFeatureUtils-841S8PD4.js","assets/doublePrecisionUtils-B0owpBza.js","assets/hydratedFeatures-BsG9PYfC.js","assets/ShaderBuilder-C6fczrW1.js","assets/IntersectorInterfaces-CmNINbyF.js","assets/DefaultMaterial-BCPyFo4W.js","assets/LodResources-BewbetzP.js","assets/TextureCompressionWorker-BznTc5Jv.js","assets/Popup-CRxVPPyt.js","assets/unitFormatUtils-BqOVwJi6.js","assets/quantityUtils-BAvlU0cg.js","assets/AttachmentInfo-nJZYOgkB.js","assets/labelingInfo-BY_2bmzW.js","assets/SimpleRenderer--05LNEAo.js","assets/commonProperties-BtmAPvhe.js","assets/visualVariableUtils-CsmTuDyq.js","assets/jsonUtils-Du5tZPpz.js","assets/UniqueValueRenderer-C2h8zTjm.js","assets/styleUtils-CWAJkKJj.js","assets/featureUtils-DpqHIa03.js","assets/utils-NtYZAcLN.js","assets/parser-BqlCI5FX.js","assets/cimSymbolUtils-raYAw_M7.js","assets/typeUtils-HA9kMi7L.js","assets/ClassBreaksRenderer-ZZL7GgAC.js","assets/executeQueryJSON-BlV9oJL9.js","assets/FeatureSet-BGraDqhW.js","assets/shared-c6xu1-42.js","assets/FeatureLayer-jbcxX93h.js","assets/FeatureLayerBase-DQLxx273.js","assets/LayerFloorInfo-vlLwnEHX.js","assets/Relationship-gCjArXij.js","assets/serviceCapabilitiesUtils-cI46m0Y5.js","assets/infoFor3D-dHKPbXlj.js","assets/editsZScale-wYnz90cd.js","assets/APIKeyMixin-BxzIIPew.js","assets/BlendLayer-CcS0AiVd.js","assets/jsonUtils-DNdrYfyn.js","assets/CustomParametersMixin-e-oMFTfY.js","assets/DisplayFilteredLayer-BQZage4a.js","assets/scaleUtils-DL6nepZp.js","assets/EditBusLayer-DIxXGlvC.js","assets/FeatureEffectLayer-C9YgMvQu.js","assets/FeatureEffect-3gHnhEZH.js","assets/FeatureFilter-CZGWb4v1.js","assets/FeatureReductionLayer-DCl2zl7J.js","assets/FeatureReductionSelection-B6b-D11G.js","assets/jsonUtils-BCKNeL17.js","assets/MD5-C9MwAd2G.js","assets/OrderedLayer-BC8cCfv9.js","assets/OrderByInfo-CijLf-Rk.js","assets/RefreshableLayer-CjIMOkuB.js","assets/ScaleRangeLayer-BfQg43Dx.js","assets/TemporalLayer-BMzjlo9V.js","assets/TimeInfo-iD1UOhx1.js","assets/TrackableLayer-D1bNGlxe.js","assets/FeatureTemplate-BW4OCTA_.js","assets/FeatureType-Dfb1gMNl.js","assets/fieldProperties-CTAjBfbg.js","assets/TitleCreator-BI4s2sLB.js","assets/versionUtils-BLqwfjHu.js","assets/popupUtils-ayqQpIwT.js","assets/interfaces-CL2NbQte.js","assets/NetworkElement-BLKLz3mW.js","assets/ReactiveSet-DbYQn8Lu.js","assets/layerViewUtils-DwHC8Zgz.js","assets/arcadeUtils-_L3XJUXO.js","assets/arcade-CzYbTlOy.js","assets/unitConversion-DZ57ZWX2.js","assets/ImmutableArray-BPVd6ESQ.js","assets/webStyleSymbolUtils-DemRtiVw.js","assets/devEnvironmentUtils-CnNDiFMM.js","assets/webStyleAcceptedFormats-CG7ZQ6BV.js","assets/geometryServiceUtils-DRH5OG4r.js","assets/project-BRCSC7Dc.js","assets/webglDeps-D_JMAzNr.js","assets/FramebufferObject-CX_IyiiU.js","assets/ProgramTemplate-CyWXC9UE.js","assets/NestedMap-GuqgquCN.js","assets/mapViewDeps-CP3NTMHm.js","assets/FeatureCommandQueue-B2wPlNM-.js","assets/GraphShaderModule-B6-1zM00.js","assets/WGLContainer-DCGW9hid.js","assets/Container-C2SQtOlE.js","assets/SDFHelper-ij-_RdLf.js","assets/OverrideHelper-CWlvPASQ.js","assets/GridShader-Dq1PJn-n.js","assets/testSVGPremultipliedAlpha-D0hSeDyp.js","assets/RenderingContext-BhSjyknS.js","assets/CIMResourceManager-CNuU8KWf.js","assets/utils-CPCLr71P.js","assets/VertexStream-Dj7pmMwo.js","assets/utils-ehcGqGxa.js","assets/GraphicsView2D-1QJNLsGO.js","assets/GraphicContainer-tXvWz_OG.js","assets/AGraphicContainer-DA-jJ3hy.js","assets/TechniqueInstance-D-yVODoe.js","assets/TileContainer-DNj6IDzv.js","assets/gridUtils-DGRUgwyM.js","assets/geodesicUtils-CVeTbCxa.js","assets/TileLayerView2D-DAiVPMIT.js","assets/imageUtils-DkJZ2mLW.js","assets/BitmapTechnique-EXmWbHEu.js","assets/LayerView-D3Nuu3Vz.js","assets/HighlightGraphicContainer-BzBo_Dar.js","assets/RefreshableLayerView-D8fxLeo3.js","assets/MapServiceLayerViewHelper-BMahRVF-.js","assets/floorFilterUtils-DZ5C6FQv.js","assets/drapedUtils-Bkd3EJbR.js","assets/sublayerUtils-RCu1hqFT.js","assets/popupUtils-B9O06s89.js","assets/FeatureLayerView2D-DNmpzPeV.js","assets/timeSupport-CjEaSf5f.js","assets/AttributeBinsFeatureSet-baNNkHWn.js","assets/AttributeBinsQuery-DWubHxdm.js","assets/constants-B4mRqufT.js","assets/BaseDynamicLayerView2D-CKZP024Q.js","assets/BitmapContainer-BVdlsdq7.js","assets/ExportStrategy-Dhermvkf.js","assets/CatalogLayerView2D-DSdhu95h.js","assets/CatalogDynamicGroupLayerView2D-D9X0IjZJ.js","assets/CatalogFootprintLayerView2D-DG_i_BQl.js","assets/GeoRSSLayerView2D-DDZDnaUi.js","assets/GraphicsLayerView2D-9EnjDsE6.js","assets/GroupLayerView2D-BVDkl9GV.js","assets/ImageryLayerView2D-B41SpctJ.js","assets/RasterVFDisplayObject-Bm-mBIhF.js","assets/ImageryTileLayerView2D-DabtrhI_.js","assets/rasterFieldUtils-DJMHk6_2.js","assets/rasterUtils-CvSs96lA.js","assets/RawBlockCache-C0WnJJIz.js","assets/KMLLayerView2D-D7C4b_t9.js","assets/kmlUtils-CWur3u36.js","assets/KnowledgeGraphLayerView2D-BPQbnZSM.js","assets/MapImageLayerView2D-8rvo74bD.js","assets/ExportImageParameters-BDgmjrwM.js","assets/MapNotesLayerView2D-DLojp-_h.js","assets/MediaLayerView2D-BlA7xZbm.js","assets/mediaLayerUtils-Cm5hPkqu.js","assets/OverlayContainer-BXw1DBpw.js","assets/OGCFeatureLayerView2D-_Xd9gRoC.js","assets/RouteLayerView2D-D1ta_9Xm.js","assets/Stop-C39vEtn3.js","assets/networkEnums-CIaSZyPw.js","assets/StreamLayerView2D-CEvTtUz_.js","assets/SubtypeGroupLayerView2D-CChF4egr.js","assets/VectorTileLayerView2D-CWPeU--O.js","assets/VideoLayerView2D-AXrtEhcG.js","assets/GraphicsLayer-CpYcu9kc.js","assets/TelemetryDisplay-Bd28rjPo.js","assets/WMSLayerView2D-BMJ7u8tC.js","assets/ExportWMSImageParameters-Bn04JqNV.js","assets/WMTSLayerView2D-c9wu1IIj.js","assets/apng-DPWoa7ze.js","assets/index-BO6_jQ7D.js","assets/index-Bn-BQXqy.js","assets/guid-BDWAkmkV.js","assets/useT9n-Bwy-1Vja.js","assets/index-DXVE56wj.js","assets/dom-DgMc_yR8.js","assets/observers-Cu0OQr9g.js","assets/ref-GcYFikU_.js","assets/static-BRWQe8Fm.js","assets/form-C8GHDjXW.js","assets/interactive-2Ww5Nmez.js","assets/label-C_R6zyFV.js","assets/component-Ca-Rv8Bt.js"])))=>i.map(i=>d[i]);
(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const n of s)if(n.type==="childList")for(const o of n.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function r(s){const n={};return s.integrity&&(n.integrity=s.integrity),s.referrerPolicy&&(n.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?n.credentials="include":s.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function i(s){if(s.ep)return;s.ep=!0;const n=r(s);fetch(s.href,n)}})();function c(e,t,r,i){var s,n=arguments.length,o=n<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,r):i;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(e,t,r,i);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(n<3?s(o):n>3?s(t,r,o):s(t,r))||o);return n>3&&o&&Object.defineProperty(t,r,o),o}function HY(e,t){return function(r,i){t(r,i,e)}}function qY(e,t,r,i){function s(n){return n instanceof r?n:new r(function(o){o(n)})}return new(r||(r=Promise))(function(n,o){function a(p){try{h(i.next(p))}catch(f){o(f)}}function l(p){try{h(i.throw(p))}catch(f){o(f)}}function h(p){p.done?n(p.value):s(p.value).then(a,l)}h((i=i.apply(e,[])).next())})}function WY(e,t,r){if(t!=null){if(typeof t!="object"&&typeof t!="function")throw new TypeError("Object expected.");var i,s;if(i===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");i=t[Symbol.dispose]}if(typeof i!="function")throw new TypeError("Object not disposable.");s&&(i=function(){try{s.call(this)}catch(n){return Promise.reject(n)}}),e.stack.push({value:t,dispose:i,async:r})}return t}var yI=typeof SuppressedError=="function"?SuppressedError:function(e,t,r){var i=new Error(r);return i.name="SuppressedError",i.error=e,i.suppressed=t,i};function ZY(e){function t(n){e.error=e.hasError?new yI(n,e.error,"An error was suppressed during disposal."):n,e.hasError=!0}var r,i=0;function s(){for(;r=e.stack.pop();)try{if(!r.async&&i===1)return i=0,e.stack.push(r),Promise.resolve().then(s);if(r.dispose){var n=r.dispose.call(r.value);if(r.async)return i|=2,Promise.resolve(n).then(s,function(o){return t(o),s()})}else i|=1}catch(o){t(o)}if(i===1)return e.hasError?Promise.reject(e.error):Promise.resolve();if(e.hasError)throw e.error}return s()}const gI="modulepreload",_I=function(e){return"/machloop/"+e},fw={},N=function(t,r,i){let s=Promise.resolve();if(r&&r.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),a=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));s=Promise.allSettled(r.map(l=>{if(l=_I(l),l in fw)return;fw[l]=!0;const h=l.endsWith(".css"),p=h?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${p}`))return;const f=document.createElement("link");if(f.rel=h?"stylesheet":gI,h||(f.as="script"),f.crossOrigin="",f.href=l,a&&f.setAttribute("nonce",a),document.head.appendChild(f),h)return new Promise((m,y)=>{f.addEventListener("load",m),f.addEventListener("error",()=>y(new Error(`Unable to preload CSS for ${l}`)))})}))}function n(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return s.then(o=>{for(const a of o||[])a.status==="rejected"&&n(a.reason);return t().catch(n)})};let sn;function A(e){return typeof sn[e]=="function"?sn[e]=sn[e](globalThis):sn[e]}var r$,i$,s$,n$;sn=(r$=globalThis.dojoConfig)!=null&&r$.has||(i$=globalThis.esriConfig)!=null&&i$.has?{...(s$=globalThis.dojoConfig)==null?void 0:s$.has,...(n$=globalThis.esriConfig)==null?void 0:n$.has}:{},A.add=(e,t,r,i)=>{(i||sn[e]===void 0)&&(sn[e]=t),r&&A(e)},A.cache=sn,A.add("big-integer-warning-enabled",!0),A.add("esri-deprecation-warnings",!0),A.add("esri-tests-disable-screenshots",!1),A.add("esri-tests-use-full-window",!1),A.add("esri-tests-post-to-influx",!0),A.add("esri-cim-animations-enable-status","enabled"),A.add("esri-cim-animations-spotlight",!1),A.add("esri-cim-animations-freeze-time",!1),A.add("enable-feature:multiple-highlights",!0),(()=>{var t;A.add("host-webworker",globalThis.WorkerGlobalScope!==void 0&&self instanceof globalThis.WorkerGlobalScope);const e=typeof window<"u"&&typeof location<"u"&&typeof document<"u"&&window.location===location&&window.document===document;if(A.add("host-browser",e),A.add("host-node",typeof globalThis.process=="object"&&((t=globalThis.process.versions)==null?void 0:t.node)&&globalThis.process.versions.v8),A.add("dom",e),A("host-browser")){const r=navigator,i=r.userAgent,s=r.appVersion,n=parseFloat(s);if(A.add("wp",parseFloat(i.split("Windows Phone")[1])||void 0),A.add("msapp",parseFloat(i.split("MSAppHost/")[1])||void 0),A.add("khtml",s.includes("Konqueror")?n:void 0),A.add("edge",parseFloat(i.split("Edge/")[1])||void 0),A.add("opr",parseFloat(i.split("OPR/")[1])||void 0),A.add("webkit",!A("wp")&&!A("edge")&&parseFloat(i.split("WebKit/")[1])||void 0),A.add("chrome",!A("edge")&&!A("opr")&&parseFloat(i.split("Chrome/")[1])||void 0),A.add("android",!A("wp")&&parseFloat(i.split("Android ")[1])||void 0),A.add("safari",!s.includes("Safari")||A("wp")||A("chrome")||A("android")||A("edge")||A("opr")?void 0:parseFloat(s.split("Version/")[1])),A.add("mac",s.includes("Macintosh")),!A("wp")&&/(iPhone|iPod|iPad)/.test(i)){const o=RegExp.$1.replace(/P/,"p"),a=/OS ([\d_]+)/.test(i)?RegExp.$1:"1",l=parseFloat(a.replace(/_/,".").replaceAll("_",""));A.add(o,l),A.add("ios",l)}A("webkit")||(!i.includes("Gecko")||A("wp")||A("khtml")||A("edge")||A.add("mozilla",n),A("mozilla")&&A.add("ff",parseFloat(i.split("Firefox/")[1]||i.split("Minefield/")[1])||void 0))}})(),(()=>{if(globalThis.navigator){const e=navigator.userAgent,t=/Android|webOS|iPhone|iPad|iPod|BlackBerry|Opera Mini|IEMobile/i.test(e),r=/iPhone/i.test(e);t&&A.add("esri-mobile",t),r&&A.add("esri-iPhone",r),A.add("esri-geolocation",!!navigator.geolocation)}A.add("esri-wasm","WebAssembly"in globalThis),A.add("esri-performance-mode-frames-between-render",20),A.add("esri-force-performance-mode",!1),A.add("esri-shared-array-buffer",()=>{const e="SharedArrayBuffer"in globalThis,t=globalThis.crossOriginIsolated===!1;return e&&!t}),A.add("wasm-simd",()=>{const e=[0,97,115,109,1,0,0,0,1,5,1,96,0,1,123,3,2,1,0,10,10,1,8,0,65,0,253,15,253,98,11];return WebAssembly.validate(new Uint8Array(e))}),A.add("esri-atomics","Atomics"in globalThis),A.add("esri-workers","Worker"in globalThis),A.add("web-feat:cache","caches"in globalThis),A.add("esri-workers-arraybuffer-transfer",!A("safari")||Number(A("safari"))>=12),A.add("workers-pool-size",8),A.add("featurelayer-simplify-thresholds",[.5,.5,.5,.5]),A.add("featurelayer-simplify-payload-size-factors",[1,1,4]),A.add("featurelayer-fast-triangulation-enabled",!0),A.add("featurelayer-animation-enabled",!0),A.add("featurelayer-snapshot-enabled",!0),A.add("featurelayer-snapshot-point-min-threshold",8e4),A.add("featurelayer-snapshot-point-max-threshold",4e5),A.add("featurelayer-snapshot-point-coverage",.1),A.add("featurelayer-query-max-depth",4),A.add("featurelayer-query-pausing-enabled",!1),A.add("featurelayer-advanced-symbols",!1),A.add("featurelayer-pbf",!0),A.add("featurelayer-pbf-statistics",!1),A.add("feature-layers-workers",!0),A.add("feature-polyline-generalization-factor",1),A.add("mapview-transitions-duration",200),A.add("mapview-essential-goto-duration",200),A.add("mapview-srswitch-adjust-rotation-scale-threshold",24e6),A.add("mapserver-pbf-version-support",10.81),A.add("mapservice-popup-identify-max-tolerance",20),A.add("request-queue-concurrency-hosted",16),A.add("request-queue-concurrency-non-hosted",4),A.add("curve-densification-coarse-segments",128),A.add("curve-densification-max-segments",2e3),A.add("curve-densification-min-segments",3),A.add("curve-densification-pixels-per-segment",16),A.add("view-readyState-waiting-delay",1e3),A.add("gradient-depth-bias",.01),A.add("gradient-depth-epsilon",1e-8),A("host-webworker")||A("host-browser")&&(A.add("esri-csp-restrictions",()=>{try{new Function}catch{return!0}return!1}),A.add("esri-image-decode",()=>{if("decode"in new Image){const e=new Image;return e.src='data:image/svg+xml;charset=UTF-8,<svg version="1.1" xmlns="http://www.w3.org/2000/svg"></svg>',void e.decode().then(()=>{A.add("esri-image-decode",!0,!0,!0)}).catch(()=>{A.add("esri-image-decode",!1,!0,!0)})}return!1}),A.add("esri-url-encodes-apostrophe",()=>{const e=window.document.createElement("a");return e.href="?'",e.href.includes("?%27")}))})();function JY(e){}function vI(e){return()=>e}function YY(e){return e}let ad=class Fn{constructor(t=1){this._seed=t}set seed(t){this._seed=t??Math.random()*Fn._m}getInt(){return this._seed=(Fn._a*this._seed+Fn._c)%Fn._m,this._seed}getFloat(){return this.getInt()/(Fn._m-1)}getIntRange(t,r){return Math.round(this.getFloatRange(t,r))}getFloatRange(t,r){const i=r-t;return t+this.getInt()/Fn._m*i}};ad._m=2147483647,ad._a=48271,ad._c=0;const wI=1.5,KY=1/wI,XY=.5;function QY(e,t){return t?e.filter((r,i,s)=>s.findIndex(t.bind(null,r))===i):Array.from(new Set(e))}function yf(e,t,r){if(e==null&&t==null)return!0;if(e==null||t==null||e.length!==t.length)return!1;if(r){for(let i=0;i<e.length;i++)if(!r(e[i],t[i]))return!1}else for(let i=0;i<e.length;i++)if(e[i]!==t[i])return!1;return!0}function mw(e,t,r){let i,s;return r?(i=t.filter(n=>!e.some(o=>r(o,n))),s=e.filter(n=>!t.some(o=>r(o,n)))):(i=t.filter(n=>!e.includes(n)),s=e.filter(n=>!t.includes(n))),{added:i,removed:s}}function eK(e){return e&&typeof e.length=="number"}let d$=class{constructor(){this.last=0}};const p$=new d$;function jy(e,t,r,i){i=i||p$;const s=Math.max(0,i.last-10);for(let o=s;o<r;++o)if(e[o]===t)return i.last=o,o;const n=Math.min(s,r);for(let o=0;o<n;++o)if(e[o]===t)return i.last=o,o;return-1}function bI(e,t,r,i){const s=e.length,n=jy(e,t,s,i);if(n!==-1)return e[n]=e[s-1],e.pop(),t}const Rr=new Set;function SI(e,t,r=e.length,i=t.length,s,n){if(i===0||r===0)return r;Rr.clear();for(let a=0;a<i;++a)Rr.add(t[a]);s=s||p$;const o=Math.max(0,s.last-10);for(let a=o;a<r;++a)if(Rr.has(e[a])&&(n==null||n.push(e[a]),Rr.delete(e[a]),e[a]=e[r-1],--r,--a,Rr.size===0||r===0))return Rr.clear(),r;for(let a=0;a<o;++a)if(Rr.has(e[a])&&(n==null||n.push(e[a]),Rr.delete(e[a]),e[a]=e[r-1],--r,--a,Rr.size===0||r===0))return Rr.clear(),r;return Rr.clear(),r}function rK(e,t,r){const i=e.length;if(t>=i)return e.slice();const s=f$(r),n=new Set,o=[];for(;o.length<t;){const a=Math.floor(s()*i);n.has(a)||(n.add(a),o.push(e[a]))}return o}function f$(e){return e?(yw.seed=e,()=>yw.getFloat()):Math.random}const yw=new ad;function iK(e,t){const r=f$(t);for(let i=e.length-1;i>0;i--){const s=Math.floor(r()*(i+1)),n=e[i];e[i]=e[s],e[s]=n}return e}function TI(e,t){const r=e.indexOf(t);return r!==-1?(e.splice(r,1),t):null}function el(e,t){return e!=null}const sK=[];function nK(e){return e instanceof ArrayBuffer}function K1(e){var t;return((t=e==null?void 0:e.constructor)==null?void 0:t.name)==="Int8Array"}function m$(e){var t;return((t=e==null?void 0:e.constructor)==null?void 0:t.name)==="Uint8Array"}function y$(e){var t;return((t=e==null?void 0:e.constructor)==null?void 0:t.name)==="Uint8ClampedArray"}function X1(e){var t;return((t=e==null?void 0:e.constructor)==null?void 0:t.name)==="Int16Array"}function g$(e){var t;return((t=e==null?void 0:e.constructor)==null?void 0:t.name)==="Uint16Array"}function Q1(e){var t;return((t=e==null?void 0:e.constructor)==null?void 0:t.name)==="Int32Array"}function _$(e){var t;return((t=e==null?void 0:e.constructor)==null?void 0:t.name)==="Uint32Array"}function gf(e){var t;return((t=e==null?void 0:e.constructor)==null?void 0:t.name)==="Float32Array"}function _f(e){var t;return((t=e==null?void 0:e.constructor)==null?void 0:t.name)==="Float64Array"}function $I(e){return"buffer"in e}const v$=1024;function oK(e){return _f(e)||gf(e)||Q1(e)||X1(e)||K1(e)}function aK(e){return _f(e)||gf(e)}function lK(e){return _f(e)?179769e303:gf(e)?3402823e32:_$(e)?4294967295:g$(e)?65535:m$(e)||y$(e)?255:Q1(e)?2147483647:X1(e)?32767:K1(e)?127:256}function EI(e,t){let r;for(r in e)e.hasOwnProperty(r)&&e[r]===void 0&&delete e[r];return e}function C(e){if(!e||typeof e!="object"||typeof e=="function")return e;const t=S$(e);if(t!=null)return t;if(up(e))return e.clone();if(w$(e))return e.map(C);if(b$(e))throw new Error("Trying to clone an unclonable Accessor instance");const r={};for(const i of Object.getOwnPropertyNames(e))r[i]=C(e[i]);return r}function Gy(e){if(!e||typeof e!="object"||typeof e=="function"||"HTMLElement"in globalThis&&e instanceof HTMLElement)return e;const t=S$(e);if(t!=null)return t;if(w$(e)){let i=!0;const s=e.map(n=>{const o=Gy(n);return n!=null&&o==null&&(i=!1),o});return i?s:null}if(up(e))return e.clone();if(e instanceof File||e instanceof Blob)return e;if(b$(e))return null;const r=new(Object.getPrototypeOf(e)).constructor;for(const i of Object.getOwnPropertyNames(e)){const s=e[i],n=Gy(s);if(s!=null&&n==null)return null;r[i]=n}return r}function up(e){return typeof e.clone=="function"}function w$(e){return typeof e.map=="function"&&typeof e.forEach=="function"}function b$(e){return typeof e.notifyChange=="function"&&typeof e.watch=="function"}function gw(e){if(Object.prototype.toString.call(e)!=="[object Object]")return!1;const t=Object.getPrototypeOf(e);return t===null||t===Object.prototype}function S$(e){if(K1(e)||m$(e)||y$(e)||X1(e)||g$(e)||Q1(e)||_$(e)||gf(e)||_f(e))return e.slice();if(e instanceof Date)return new Date(e.getTime());if(e instanceof ArrayBuffer)return e.slice(0,e.byteLength);if(e instanceof Map){const t=new Map;for(const[r,i]of e)t.set(r,C(i));return t}if(e instanceof Set){const t=new Set;for(const r of e)t.add(C(r));return t}return null}function e_(e,t){return e===t||typeof e=="number"&&isNaN(e)&&typeof t=="number"&&isNaN(t)||typeof(e==null?void 0:e.getTime)=="function"&&typeof(t==null?void 0:t.getTime)=="function"&&e.getTime()===t.getTime()||!1}function T$(e,t){return e===t||(e==null||typeof e=="string"?e===t:typeof e=="number"?e===t||typeof t=="number"&&isNaN(e)&&isNaN(t):e instanceof Date?t instanceof Date&&e.getTime()===t.getTime():Array.isArray(e)?Array.isArray(t)&&yf(e,t):e instanceof Set?t instanceof Set&&xI(e,t):e instanceof Map?t instanceof Map&&AI(e,t):!!gw(e)&&gw(t)&&MI(e,t))}function MI(e,t){if(e===null||t===null)return!1;const r=Object.keys(e);if(t===null||Object.keys(t).length!==r.length)return!1;for(const i of r)if(e[i]!==t[i]||!Object.prototype.hasOwnProperty.call(t,i))return!1;return!0}function xI(e,t){if(e.size!==t.size)return!1;for(const r of e)if(!t.has(r))return!1;return!0}function AI(e,t){if(e.size!==t.size)return!1;for(const[r,i]of e){const s=t.get(r);if(s!==i||s===void 0&&!t.has(r))return!1}return!0}function PI(e,t,r=!1){return E$(e,t,r)}function vf(e,t){if(t!=null)return t[e]||$$(e.split("."),!1,t)}function vl(e,t,r){const i=e.split("."),s=i.pop(),n=$$(i,!0,r);n&&s&&(n[s]=t)}function _w(e,t){if(e==null&&t==null)return!1;if(e==null||t==null)return!0;if(typeof e=="object"){if(Array.isArray(e)){const r=t;if(e.length!==r.length)return!0;for(let i=0;i<e.length;i++)if(_w(e[i],r[i]))return!0;return!1}if(Object.keys(e).length!==Object.keys(t).length)return!0;for(const r in e)if(_w(e[r],t[r]))return!0;return!1}return e!==t}function $$(e,t,r){let i=r;for(const s of e){if(i==null)return;if(!(s in i)){if(!t)return;i[s]={}}i=i[s]}return i}function E$(e,t,r){return t?Object.keys(t).reduce((i,s)=>{let n=i[s],o=t[s];return n===o?i:n===void 0?(i[s]=C(o),i):(Array.isArray(o)||Array.isArray(i)?(n=n?Array.isArray(n)?i[s]=n.slice():i[s]=[n]:i[s]=[],o&&(Array.isArray(o)||(o=[o]),r?o.forEach(a=>{n.includes(a)||n.push(a)}):i[s]=o.slice())):o&&typeof o=="object"?i[s]=E$(n,o,r):i.hasOwnProperty(s)&&!t.hasOwnProperty(s)||(i[s]=o),i)},e||{}):e}var o$;const me={apiKey:void 0,applicationName:"",applicationUrl:(o$=globalThis.location)==null?void 0:o$.href,assetsPath:"",fontsUrl:"https://static.arcgis.com/fonts",geometryServiceUrl:"https://utility.arcgisonline.com/arcgis/rest/services/Geometry/GeometryServer",geoRSSServiceUrl:"https://utility.arcgis.com/sharing/rss",kmlServiceUrl:"https://utility.arcgis.com/sharing/kml",userPrivilegesApplied:!0,portalUrl:"https://www.arcgis.com",respectPrefersReducedMotion:!0,routeServiceUrl:"https://route-api.arcgis.com/arcgis/rest/services/World/Route/NAServer/Route_World",workers:{loaderConfig:{has:{},paths:{},map:{},packages:[]}},request:{crossOriginNoCorsDomains:null,httpsDomains:["arcgis.com","arcgisonline.com","esrikr.com","premiumservices.blackbridge.com","esripremium.accuweather.com","gbm.digitalglobe.com","firstlook.digitalglobe.com","msi.digitalglobe.com"],interceptors:[],internalInterceptors:[],maxUrlLength:2e3,priority:"high",proxyRules:[],proxyUrl:null,timeout:62e3,trustedServers:[],useIdentity:!0},log:{interceptors:[],level:null}};if(globalThis.esriConfig&&(PI(me,globalThis.esriConfig,!0),delete me.has),!me.assetsPath){{const e="4.32";me.assetsPath=`https://js.arcgis.com/${e}/@arcgis/core/assets`}me.defaultAssetsPath=me.assetsPath}const OI=/\{([^}]+)\}/g;function vw(e){return e??""}function t_(e,t){return t?e.replaceAll(OI,typeof t=="object"?(r,i)=>vw(vf(i,t)):(r,i)=>vw(t(i))):e}function uK(e,t){return e.replaceAll(/([.$?*|{}()[\]\\/+\-^])/g,r=>t!=null&&t.includes(r)?r:`\\${r}`)}function M$(e){let t=0;for(let r=0;r<e.length;r++)t=(t<<5)-t+e.charCodeAt(r),t|=0;return t}let ww;function cK(e){return ww??(ww=new DOMParser),ww.parseFromString(e||"","text/html").body.innerText||""}function hK(e,t){return new RegExp(`{${t}}`,"ig").test(e)}function dK(e,...t){let r=e[0];for(let i=0;i<t.length;++i)r+=t[i]+e[i+1];return r}const bw={info:0,warn:1,error:2,none:3};let F=class Jt{constructor(t){this.level=null,this._module="",this._parent=null,this.writer=null,this._loggedMessages={error:new Map,warn:new Map,info:new Map},t.level!=null&&(this.level=t.level),t.writer!=null&&(this.writer=t.writer),this._module=t.module,Jt._loggers.set(this.module,this);const r=this.module.lastIndexOf(".");r!==-1&&(this._parent=Jt.getLogger(this.module.slice(0,r)))}get module(){return this._module}get parent(){return this._parent}error(...t){this._log("error","always",...t)}warn(...t){this._log("warn","always",...t)}info(...t){this._log("info","always",...t)}errorOnce(...t){this._log("error","once",...t)}warnOnce(...t){this._log("warn","once",...t)}infoOnce(...t){this._log("info","once",...t)}errorOncePerTick(...t){this._log("error","oncePerTick",...t)}warnOncePerTick(...t){this._log("warn","oncePerTick",...t)}infoOncePerTick(...t){this._log("info","oncePerTick",...t)}get test(){}static get test(){}static getLogger(t){return t=typeof t!="string"?t.declaredClass:t,Jt._loggers.get(t)||new Jt({module:t})}_log(t,r,...i){if(this._matchLevel(t)){if(r!=="always"&&!Jt._throttlingDisabled){const s=II(i),n=this._loggedMessages[t].get(s);if(r==="once"&&n!=null||r==="oncePerTick"&&n&&n>=Jt._tickCounter)return;this._loggedMessages[t].set(s,Jt._tickCounter),Jt._scheduleTickCounterIncrement()}for(const s of me.log.interceptors)if(s(t,this.module,...i))return;this._inheritedWriter()(t,this.module,...i)}}_parentWithMember(t,r){let i=this;for(;i!=null;){const s=i[t];if(s!=null)return s;i=i.parent}return r}_inheritedWriter(){return this._parentWithMember("writer",CI)}_matchLevel(t){const r=me.log.level||"warn";return bw[this._parentWithMember("level",r)]<=bw[t]}static _scheduleTickCounterIncrement(){Jt._tickCounterScheduled||(Jt._tickCounterScheduled=!0,Promise.resolve().then(()=>{Jt._tickCounter++,Jt._tickCounterScheduled=!1}))}};function CI(e,t,...r){console[e](`[${t}]`,...r)}function II(...e){return M$(JSON.stringify(e,(r,i)=>typeof i!="object"||Array.isArray(i)?i:"[Object]"))}F._loggers=new Map,F._tickCounter=0,F._tickCounterScheduled=!1,F._throttlingDisabled=!1;function RI(e,t){return e.replaceAll(/\$\{([^\s:}]*)(?::([^\s:}]+))?\}/g,(r,i)=>i===""?"$":(vf(i,t)??"").toString())}let x$=class{constructor(t,r,i=void 0){this.name=t,this.details=i,this.message=(r&&RI(r,i))??""}toString(){return"["+this.name+"]: "+this.message}},I=class A$ extends x${constructor(t,r,i){super(t,r,i)}toJSON(){if(this.details!=null)try{return{name:this.name,message:this.message,details:JSON.parse(JSON.stringify(this.details,(t,r)=>{if(r&&typeof r=="object"&&typeof r.toJSON=="function")return r;try{return C(r)}catch{return"[object]"}}))}}catch(t){throw F.getLogger("esri.core.Error").error(t),t}return{name:this.name,message:this.message,details:this.details}}static fromJSON(t){return new A$(t.name,t.message,t.details)}};I.prototype.type="error";const Sw=new WeakMap;function kI(e,t,r=!1){const i=`ðŸ›‘ DEPRECATED - ${t}`;if(!r)return void e.warn(i);let s=Sw.get(e);s||(s=new Set,Sw.set(e,s)),s.has(t)||(s.add(t),e.warn(i))}function NI(e,t,r={}){if(A("esri-deprecation-warnings")){const{moduleName:i}=r;_c(e,`Function: ${(i?i+"::":"")+t+"()"}`,r)}}function LI(e,t,r={}){if(A("esri-deprecation-warnings")){const{moduleName:i}=r;_c(e,`Property: ${(i?i+"::":"")+t}`,r)}}function DI(e,t,r={}){A("esri-deprecation-warnings")&&_c(e,`Multiple argument constructor: ${t}`,{warnOnce:!0,replacement:`new ${t}({ <your properties here> })`,...r})}function _c(e,t,r={}){if(A("esri-deprecation-warnings")){const{replacement:i,version:s,see:n,warnOnce:o}=r;let a=t;if(i&&(a+=`
	ðŸ› ï¸ Replacement: ${i}`),s&&(a+=`
	âš™ï¸ Version: ${s}`),n)if(Array.isArray(n)){a+=`
	ðŸ”— See for more details:`;for(const l of n)a+=`
		${l}`}else a+=`
	ðŸ”— See ${n} for more details.`;kI(e,a,o)}}function fK(e){const t=[];return function*(){yield*t;for(const r of e)t.push(r),yield r}}function FI(e,t){for(const r of e)if(r!=null&&t(r))return r}function cp(e){return e!=null&&typeof e[Symbol.iterator]=="function"}let wl=class{constructor(){this._groups=new Map}destroy(){this.removeAll()}get size(){let t=0;return this._groups.forEach(r=>{t+=r.length}),t}add(t,r){if(cp(t)){const i=this._getOrCreateGroup(r);for(const s of t)$w(s)&&i.push(s)}else $w(t)&&this._getOrCreateGroup(r).push(t);return this}forEach(t,r){if(typeof t=="function")this._groups.forEach(i=>i.forEach(t));else{const i=this._getGroup(t);i&&r&&i.forEach(r)}}has(t){return this._groups.has(_h(t))}remove(t){if(typeof t!="string"&&cp(t)){for(const r of t)this.remove(r);return this}return this.has(t)?(Tw(this._getGroup(t)),this._groups.delete(_h(t)),this):this}removeAll(){return this._groups.forEach(Tw),this._groups.clear(),this}removeReference(t){return this._groups.delete(t),this}_getOrCreateGroup(t){if(this.has(t))return this._getGroup(t);const r=[];return this._groups.set(_h(t),r),r}_getGroup(t){return this._groups.get(_h(t))}};function _h(e){return e||"_default_"}function Tw(e){for(const t of e)t instanceof wl?t.removeAll():t.remove()}function $w(e){return e!=null&&(!!e.remove||e instanceof wl)}function P$(e,t){if(e==null)throw new Error(t??"value is None")}function ke(e){return e==null||e.destroy(),null}function yK(e){return e==null||e.dispose(),null}function Ce(e){return e==null||e.remove(),null}function tl(e){return e==null||e.abort(),null}function gK(e){return e==null||e.release(),null}function _K(e,t,r){return e!=null&&t!=null?r!=null?r(e,t):e.equals(t):e===t}function UI(e,t){let r;return e.some((i,s)=>(r=t(i,s),r!=null)),r??void 0}const O$=Symbol("Accessor-beforeDestroy"),jI={remove:()=>{}};function ue(e){return e?{remove(){e&&(e(),e=void 0)}}:jI}function C$(e){e.forEach(t=>t==null?void 0:t.remove())}function vK(e){C$(e),e.length=0}function qc(e){return ue(()=>C$(e))}function wK(e){return ue(()=>{var t;return(t=e())==null?void 0:t.remove()})}function bK(e){return ue(()=>e==null?void 0:e.abort())}function GI(e){return ue(e!=null?()=>e.destroy():void 0)}function pn(e){return e.__accessor__??null}function zI(e,t){var r;return((r=e==null?void 0:e.metadata)==null?void 0:r[t])!=null}function ld(e,t,r){return r?hp(e,t,{policy:r,path:""}):hp(e,t,null)}function hp(e,t,r){return t?Object.keys(t).reduce((i,s)=>{const n=s;let o=null,a="merge";if(r&&(o=r.path?`${r.path}.${s}`:s,a=r.policy(o)),a==="replace"||a==="replace-arrays"&&Array.isArray(i[n]))return i[n]=t[n],i;if(i[n]===void 0)return i[n]=C(t[n]),i;let l=i[n],h=t[n];if(l===h)return i;if(Array.isArray(h)||Array.isArray(i))l=l?Array.isArray(l)?i[n]=l.slice():i[n]=[l]:i[n]=[],h&&(Array.isArray(h)||(h=[h]),h.forEach(p=>{l.includes(p)||l.push(p)}));else if(h&&typeof h=="object")if(r){const p=r.path;r.path=o,i[n]=hp(l,h,r),r.path=p}else i[n]=hp(l,h,null);else i.hasOwnProperty(s)&&!t.hasOwnProperty(s)||(i[n]=h);return i},e||{}):e}function I$(e){return Array.isArray(e)?e:e.split(".")}function Ew(e){return e.includes(",")?e.split(",").map(t=>t.trim()):[e.trim()]}function VI(e){if(Array.isArray(e)){const t=[];for(const r of e)t.push(...Ew(r));return t}return Ew(e)}function R$(e,t,r,i){const s=VI(t);if(s.length!==1){const n=s.map(o=>i(e,o,r));return qc(n)}return i(e,s[0],r)}function k$(e,t){const r=e[e.length-1]==="?"?e.slice(0,-1):e;if(t.getItemAt!=null||Array.isArray(t)){const s=parseInt(r,10);if(!isNaN(s))return Array.isArray(t)?t[s]:t.at(s)}const i=pn(t);return zI(i,r)?i.get(r):t[r]}function N$(e,t,r){if(e==null)return e;const i=k$(t[r],e);return!i&&r<t.length-1?void 0:r===t.length-1?i:N$(i,t,r+1)}function Wc(e,t,r=0){return typeof t!="string"||t.includes(".")?N$(e,I$(t),r):k$(t,e)}function us(e,t){return Wc(e,t)}function Mw(e,t){return Wc(t,e)!==void 0}var Gt;(function(e){e[e.INITIALIZING=0]="INITIALIZING",e[e.CONSTRUCTING=1]="CONSTRUCTING",e[e.CONSTRUCTED=2]="CONSTRUCTED",e[e.DESTROYED=3]="DESTROYED"})(Gt||(Gt={}));function Zc(e){let t=e.constructor.__accessorMetadata__;const r=Object.prototype.hasOwnProperty.call(e.constructor,"__accessorMetadata__");if(t){if(!r){t=Object.create(t);for(const i in t)t[i]=C(t[i]);Object.defineProperty(e.constructor,"__accessorMetadata__",{value:t,enumerable:!1,configurable:!0,writable:!0})}}else t={},Object.defineProperty(e.constructor,"__accessorMetadata__",{value:t,enumerable:!1,configurable:!0,writable:!0});return e.constructor.__accessorMetadata__}function wf(e,t){const r=Zc(e);let i=r[t];return i||(i=r[t]={}),i}function BI(e,t){return ld(e,t,qI)}const HI=/^(?:[^.]+\.)?(?:value|type|(?:json\.type|json\.origins\.[^.]\.type))$/;function qI(e){return HI.test(e)?"replace":"merge"}function WI(e){return(e==null?void 0:e.release)&&typeof e.release=="function"}function ZI(e){return(e==null?void 0:e.acquire)&&typeof e.acquire=="function"}let Fo=class zy{constructor(t,r,i,s=1,n=0){this._ctor=t,this._acquireFunction=r,this._releaseFunction=i,this.allocationSize=s,this._pool=new Array(n),this._initialSize=n;for(let o=0;o<n;o++)this._pool[o]=new this._ctor;this.allocationSize=Math.max(s,1)}destroy(){this.prune(0)}acquire(...t){let r;if(zy.test.disabled)r=new this._ctor;else{if(this._pool.length===0){const i=this.allocationSize;for(let s=0;s<i;s++)this._pool[s]=new this._ctor}r=this._pool.pop()}return this._acquireFunction?this._acquireFunction(r,...t):ZI(r)&&r.acquire(...t),r}release(t){t&&!zy.test.disabled&&(this._releaseFunction?this._releaseFunction(t):WI(t)&&t.release(),this._pool.push(t))}prune(t=this._initialSize){if(!(t>=this._pool.length)){for(let r=t;r<this._pool.length;++r){const i=this._pool[r];this._dispose(i)}this._pool.length=t}}_dispose(t){t.dispose&&typeof t.dispose=="function"&&t.dispose()}};Fo.test={disabled:!1};let JI=class{constructor(t,r){this._observers=t,this._observer=r}remove(){TI(this._observers,this._observer)}},L$=class{constructor(){this._observers=null,this.destroyed=!1}observe(t){if(this.destroyed||t.destroyed)return YI;this._observers==null&&(this._observers=[]);const r=this._observers;let i=!1,s=!1;const n=r.length;for(let o=0;o<n;++o){const a=r[o];if(a.destroyed)s=!0;else if(a===t){i=!0;break}}return i||(r.push(t),s&&this._removeDestroyedObservers()),new JI(r,t)}_removeDestroyedObservers(){const t=this._observers;if(!t||t.length===0)return;const r=t.length;let i=0;for(let s=0;s<r;++s){for(;s+i<r&&t[s+i].destroyed;)++i;if(i>0){if(!(s+i<r))break;t[s]=t[s+i]}}t.length=r-i}destroy(){if(this.destroyed)return;this.destroyed=!0;const t=this._observers;if(t!=null){for(const r of t)r.onCommitted();this._observers=null}}};const YI=ue();var le;(function(e){e[e.DEFAULTS=0]="DEFAULTS",e[e.COMPUTED=1]="COMPUTED",e[e.SERVICE=2]="SERVICE",e[e.PORTAL_ITEM=3]="PORTAL_ITEM",e[e.WEB_SCENE=4]="WEB_SCENE",e[e.WEB_MAP=5]="WEB_MAP",e[e.LINK_CHART=6]="LINK_CHART",e[e.USER=7]="USER"})(le||(le={}));const $K=le.USER+1;function D$(e){switch(e){case"defaults":return le.DEFAULTS;case"service":return le.SERVICE;case"portal-item":return le.PORTAL_ITEM;case"web-scene":return le.WEB_SCENE;case"web-map":return le.WEB_MAP;case"link-chart":return le.LINK_CHART;case"user":return le.USER;default:return null}}function Vy(e){switch(e){case le.DEFAULTS:return"defaults";case le.SERVICE:return"service";case le.PORTAL_ITEM:return"portal-item";case le.WEB_SCENE:return"web-scene";case le.WEB_MAP:return"web-map";case le.LINK_CHART:return"link-chart";case le.USER:return"user"}}function KI(e){return Vy(e)}var fe;(function(e){e[e.Dirty=1]="Dirty",e[e.Overridden=2]="Overridden",e[e.Computing=4]="Computing",e[e.NonNullable=8]="NonNullable",e[e.HasDefaultValue=16]="HasDefaultValue",e[e.DepTrackingInitialized=32]="DepTrackingInitialized",e[e.AutoTracked=64]="AutoTracked",e[e.ExplicitlyTracking=128]="ExplicitlyTracking"})(fe||(fe={}));let bf=class{constructor(t){this.accessed=void 0,this._handles=void 0,this._observer=t}destroy(){var t;(t=this.accessed)==null||t.clear(),this.clear()}onAccessed(t){this._observer!=null&&t!==this._observer&&(this.accessed==null&&(this.accessed=new Set),this.accessed.add(t))}onTrackingEnd(){this._observer!=null&&(this.clear(),this.accessed!=null&&(this._handles==null&&(this._handles=[]),this.accessed.forEach(t=>{this._handles.push(t.observe(this._observer))}),this.accessed.clear()))}clear(){if(this._handles!=null){for(let t=0;t<this._handles.length;++t)this._handles[t].remove();this._handles.length=0}}};const dp=new bf,eu=[];let Ju=dp;function Z(e){Ju.onAccessed(e)}let ud=!1,cd=!1;function ps(e,t,r){if(ud)return r_(e,t,r);let i=null;return F$(e),i=t.call(r),U$(),i}function XI(e,t){return ps(dp,e,t)}function r_(e,t,r){const i=ud;ud=!0,F$(e);let s=null;try{s=t.call(r)}catch(n){cd&&F.getLogger("esri.core.accessorSupport.tracking").error(n)}return U$(),ud=i,s}function F$(e){Ju=e,eu.push(e)}function U$(){const e=eu.length;if(e>1){const t=eu.pop();Ju=eu[e-2],t.onTrackingEnd()}else if(e===1){const t=eu.pop();Ju=dp,t.onTrackingEnd()}else Ju=dp}function j$(e,t){if(t.flags&fe.DepTrackingInitialized)return;t.flags|=fe.DepTrackingInitialized;const r=cd;cd=!1,t.flags&fe.AutoTracked?r_(t.trackingTarget,t.metadata.get,e):G$(e,t),cd=r}const QI=[];function G$(e,t){t.flags&fe.ExplicitlyTracking||(t.flags|=fe.ExplicitlyTracking,r_(t.trackingTarget,()=>{const r=t.metadata.dependsOn||QI;for(const i of r)if(typeof i!="string"||i.includes(".")){const s=I$(i);for(let n=0,o=e;n<s.length&&o!=null&&typeof o=="object";++n)o=xw(o,s[n],n!==s.length-1)}else xw(e,i,!1)}),t.flags&=~fe.ExplicitlyTracking)}function xw(e,t,r){const i=t[t.length-1]==="?"?t.slice(0,-1):t;if(e.getItemAt!=null||Array.isArray(e)){const n=parseInt(i,10);if(!isNaN(n))return Array.isArray(e)?e[n]:e.at(n)}const s=pn(e);if(s){const n=s.propertiesByName.get(i);n&&(Z(n),j$(e,n))}return r?e[i]:void 0}let Aw=class extends L${constructor(t,r){super(),this.propertyName=t,this.metadata=r,this.trackingTarget=new bf(this),this.flags=0,this.flags=fe.Dirty|(r.nonNullable?fe.NonNullable:0)|(r.hasOwnProperty("value")?fe.HasDefaultValue:0)|(r.get===void 0?fe.DepTrackingInitialized:0)|(r.dependsOn===void 0?fe.AutoTracked:0)}destroy(){this.flags&fe.Dirty&&this.onCommitted(),super.destroy(),this.trackingTarget.destroy()}getComputed(t){t.mutable&&Z(this);const r=t.store,i=this.propertyName,s=this.flags,n=r.get(i);if(s&fe.Computing||~s&fe.Dirty&&r.has(i))return n;this.flags|=fe.Computing;const o=t.host;let a;s&fe.AutoTracked?a=ps(this.trackingTarget,this.metadata.get,o):(G$(o,this),a=this.metadata.get.call(o)),this.flags|=fe.DepTrackingInitialized,r.set(i,a,le.COMPUTED);const l=r.get(i);return l===n?this.flags&=~fe.Dirty:XI(this.commit,this),this.flags&=~fe.Computing,l}notifyChange(){this.onInvalidated(),this.onCommitted()}invalidate(){this.onInvalidated()}commit(){this.flags&=~fe.Dirty,this.onCommitted()}onInvalidated(){~this.flags&fe.Overridden&&(this.flags|=fe.Dirty);const t=this._observers;if(t&&t.length>0)for(const r of t)r.onInvalidated()}onCommitted(){const t=this._observers;if(t&&t.length>0){const r=t.slice();for(const i of r)i.onCommitted()}}},eR=class z${constructor(){this._values=new Map,this.multipleOriginsSupported=!1}clone(t){const r=new z$;return this._values.forEach((i,s)=>{t&&t.has(s)||r.set(s,C(i))}),r}get(t){return this._values.get(t)}originOf(){return le.USER}keys(){return[...this._values.keys()]}set(t,r){this._values.set(t,r)}delete(t){this._values.delete(t)}has(t){return this._values.has(t)}forEach(t){this._values.forEach(t)}};function vh(e,t,r){return e!==void 0}function Pw(e,t,r,i){return e!==void 0&&(!(r==null&&e.flags&fe.NonNullable)||(i.lifecycle,Gt.INITIALIZING,!1))}let tR=class{constructor(t){this.host=t,this.propertiesByName=new Map,this.ctorArgs=null,this.lifecycle=Gt.INITIALIZING,this.store=new eR,this.mutable=!0,this._origin=le.USER;const r=this.host.constructor.__accessorMetadata__;for(const i in r){const s=new Aw(i,r[i]);this.propertiesByName.set(i,s)}this.metadata=r}initialize(){this.lifecycle=Gt.CONSTRUCTING}constructed(){this.lifecycle=Gt.CONSTRUCTED}destroy(){this.lifecycle=Gt.DESTROYED,this.propertiesByName.forEach(t=>t.destroy())}get initialized(){return this.lifecycle!==Gt.INITIALIZING}get(t){const r=this.propertiesByName.get(t);if(r.metadata.get)return r.getComputed(this);this.mutable&&Z(r);const i=this.store;return i.has(t)?i.get(t):r.metadata.value}originOf(t){const r=this.store.originOf(t);if(r===void 0){const i=this.propertiesByName.get(t);if(i!==void 0&&i.flags&fe.HasDefaultValue)return"defaults"}return Vy(r)}has(t){return this.propertiesByName.has(t)&&this.store.has(t)}keys(){return[...this.propertiesByName.keys()]}internalGet(t){const r=this.propertiesByName.get(t);if(vh(r))return this.store.has(t)?this.store.get(t):r.metadata.value}internalSet(t,r){const i=this.propertiesByName.get(t);vh(i)&&this._internalSet(i,r)}getDependsInfo(t,r,i){const s=this.propertiesByName.get(r);if(!vh(s))return"";const n=new bf,o=ps(n,()=>{var h;return(h=s.metadata.get)==null?void 0:h.call(t)});let a=`${i}${t.declaredClass.split(".").pop()}.${r}: ${o}
`;const l=n.accessed??new Set;if(l.size===0)return a;i+="  ";for(const h of l)h instanceof Aw&&(a+=`${i}${h.propertyName}: undefined
`);return a}setAtOrigin(t,r,i){const s=this.propertiesByName.get(t);if(vh(s))return this._setAtOrigin(s,r,i)}isOverridden(t){const r=this.propertiesByName.get(t);return r!==void 0&&!!(r.flags&fe.Overridden)}clearOverride(t){const r=this.propertiesByName.get(t);r&&r.flags&fe.Overridden&&(r.flags&=~fe.Overridden,r.notifyChange())}override(t,r){const i=this.propertiesByName.get(t);if(!Pw(i,t,r,this))return;const s=i.metadata.cast;if(s){const n=this._cast(s,r),{valid:o,value:a}=n;if(Tm.release(n),!o)return;r=a}i.flags|=fe.Overridden,this._internalSet(i,r)}set(t,r){const i=this.propertiesByName.get(t);if(!Pw(i,t,r,this))return;const s=i.metadata.cast;if(s){const o=this._cast(s,r),{valid:a,value:l}=o;if(Tm.release(o),!a)return;r=l}const n=i.metadata.set;n?n.call(this.host,r):this._internalSet(i,r)}setDefaultOrigin(t){this._origin=D$(t)}getDefaultOrigin(){return Vy(this._origin)}notifyChange(t){const r=this.propertiesByName.get(t);r!==void 0&&r.notifyChange()}invalidate(t){const r=this.propertiesByName.get(t);r!==void 0&&r.invalidate()}commit(t){const r=this.propertiesByName.get(t);r!==void 0&&r.commit()}_internalSet(t,r){const i=this.lifecycle!==Gt.INITIALIZING?this._origin:le.DEFAULTS;this._setAtOrigin(t,r,i)}_setAtOrigin(t,r,i){const s=this.store,n=t.propertyName;s.has(n,i)&&e_(r,s.get(n))&&~t.flags&fe.Overridden&&i===s.originOf(n)||(t.invalidate(),s.set(n,r,i),t.commit(),j$(this.host,t))}_cast(t,r){const i=Tm.acquire();return i.valid=!0,i.value=r,t&&(i.value=t.call(this.host,r,i)),i}},rR=class{constructor(){this.value=null,this.valid=!0}acquire(){this.valid=!0}release(){this.value=null}};const Tm=new Fo(rR);function pp(e,t,r){if(e&&t)if(typeof t=="object")for(const i of Object.getOwnPropertyNames(t))pp(e,i,t[i]);else{if(t.includes(".")){const s=t.split("."),n=s.splice(-1,1)[0];return void pp(us(e,s),n,r)}const i=e.__accessor__;i!=null&&iR(t,i),e[t]=r}}function iR(e,t){if(A("esri-unknown-property-errors")&&!sR(e,t))throw new I("set:unknown-property",nR(e,t))}function sR(e,t){return t.metadata[e]!=null}function nR(e,t){return"setting unknown property '"+e+"' on instance of "+t.host.declaredClass}let oR;function aR(){return oR}var Ow;(function(e){e[e.Ignore=0]="Ignore",e[e.Destroy=1]="Destroy",e[e.ThrowError=2]="ThrowError"})(Ow||(Ow={}));function lR(e){e.length=0}let Ot=class{constructor(t=50,r=50){this._pool=new Fo(Array,void 0,lR,r,t)}acquire(){return this._pool.acquire()}release(t){this._pool.release(t)}prune(){this._pool.prune(0)}static acquire(){return $m.acquire()}static release(t){return $m.release(t)}static prune(){$m.prune()}};const $m=new Ot(100);let V$=class extends Fo{constructor(){super(...arguments),this._set=new Set}destroy(){super.destroy(),this._set=null}acquire(...t){const r=super.acquire(...t);return this._set.delete(r),r}release(t){t&&!this._set.has(t)&&(super.release(t),this._set.add(t))}_dispose(t){this._set.delete(t),super._dispose(t)}};const wh=[];function fp(e){wh.push(e),wh.length===1&&queueMicrotask(()=>{const t=wh.slice();wh.length=0;for(const r of t)r()})}let Yu=class{constructor(t,r=30){this.name=t,this._counter=0,this._samples=new Array(r)}push(t){t!=null&&(this._samples[++this._counter%this._samples.length]=t)}set(t){t!=null&&(this._samples[this._counter%this._samples.length]=t)}get median(){return this._samples.slice().sort((t,r)=>t-r)[Math.floor(this._samples.length/2)]}get average(){return this._samples.reduce((t,r)=>t+r,0)/this._samples.length}get last(){return this._samples[this._counter%this._samples.length]}};var By;(function(e){const t=(n,o,a,l)=>{let h=o,p=o;const f=a>>>1,m=n[h-1];for(;p<=f;){p=h<<1,p<a&&l(n[p-1],n[p])<0&&++p;const y=n[p-1];if(l(y,m)<=0)break;n[h-1]=y,h=p}n[h-1]=m},r=(n,o)=>n<o?-1:n>o?1:0;function i(n,o,a,l){o===void 0&&(o=0),a===void 0&&(a=n.length),l===void 0&&(l=r);for(let p=a>>>1;p>o;p--)t(n,p,a,l);const h=o+1;for(let p=a-1;p>o;p--){const f=n[o];n[o]=n[p],n[p]=f,t(n,h,p,l)}}function*s(n,o,a,l){o===void 0&&(o=0),a===void 0&&(a=n.length),l===void 0&&(l=r);for(let p=a>>>1;p>o;p--)t(n,p,a,l),yield;const h=o+1;for(let p=a-1;p>o;p--){const f=n[o];n[o]=n[p],n[p]=f,t(n,h,p,l),yield}}e.sort=i,e.iterableSort=s})(By||(By={}));const Cw=By,uR=1.5,cR=1.1;let Ku=class{constructor(t){this.data=[],this._length=0,this._allocator=void 0,this._deallocator=()=>null,this._shrink=()=>{},this._hint=new d$,t&&(t.initialSize&&(this.data=new Array(t.initialSize)),t.allocator&&(this._allocator=t.allocator),t.deallocator!==void 0&&(this._deallocator=t.deallocator),t.shrink&&(this._shrink=()=>Iw(this)))}toArray(){return this.data.slice(0,this.length)}filter(t){const r=new Array;for(let i=0;i<this._length;i++){const s=this.data[i];t(s)&&r.push(s)}return r}at(t){if((t=Math.trunc(t)||0)<0&&(t+=this._length),!(t<0||t>=this._length))return this.data[t]}includes(t,r){const i=this.data.indexOf(t,r);return i!==-1&&i<this.length}get length(){return this._length}set length(t){if(t>this._length){if(this._allocator){for(;this._length<t;)this.data[this._length++]=this._allocator(this.data[this._length]);return}this._length=t}else{if(this._deallocator)for(let r=t;r<this._length;++r)this.data[r]=this._deallocator(this.data[r]);this._length=t,this._shrink()}}clear(){this.length=0}prune(){this.clear(),this.data=[]}push(t){this.data[this._length++]=t}pushArray(t,r=t.length){for(let i=0;i<r;i++)this.data[this._length++]=t[i]}fill(t,r){for(let i=0;i<r;i++)this.data[this._length++]=t}pushNew(){this._allocator&&(this.data[this.length]=this._allocator(this.data[this.length]));const t=this.data[this._length];return++this._length,t}unshift(t){this.data.unshift(t),this._length++,Iw(this)}pop(){if(this.length===0)return;const t=this.data[this.length-1];return this.length=this.length-1,this._shrink(),t}remove(t){const r=jy(this.data,t,this.length,this._hint);if(r!==-1)return this.data.splice(r,1),this.length=this.length-1,t}removeUnordered(t){return this.removeUnorderedIndex(jy(this.data,t,this.length,this._hint))}removeUnorderedIndex(t){if(!(t>=this.length||t<0))return this.swapElements(t,this.length-1),this.pop()}removeUnorderedMany(t,r=t.length,i){this.length=SI(this.data,t,this.length,r,this._hint,i),this._shrink()}front(){if(this.length!==0)return this.data[0]}back(){if(this.length!==0)return this.data[this.length-1]}swapElements(t,r){if(t>=this.length||r>=this.length||t===r)return;const i=this.data[t];this.data[t]=this.data[r],this.data[r]=i}sort(t){Cw.sort(this.data,0,this.length,t)}iterableSort(t){return Cw.iterableSort(this.data,0,this.length,t)}some(t,r){for(let i=0;i<this.length;++i)if(t.call(r,this.data[i],i,this.data))return!0;return!1}find(t,r){const{data:i,length:s}=this;for(let n=0;n<s;++n)if(t.call(r,i[n]))return i[n]}filterInPlace(t,r){let i=0;for(let s=0;s<this._length;++s){const n=this.data[s];t.call(r,n,s,this.data)&&(this.data[s]=this.data[i],this.data[i]=n,i++)}if(this._deallocator)for(let s=i;s<this._length;s++)this.data[s]=this._deallocator(this.data[s]);return this._length=i,this._shrink(),this}forAll(t,r){const{data:i,length:s}=this;for(let n=0;n<s;++n)t.call(r,i[n],n,i)}forEach(t,r){this.data.slice(0,this.length).forEach(t,r)}map(t,r){const i=new Array(this.length);for(let s=0;s<this.length;++s)i[s]=t.call(r,this.data[s],s,this.data);return i}reduce(t,r){let i=r;for(let s=0;s<this.length;++s)i=t(i,this.data[s],s,this.data);return i}has(t){const r=this.length,i=this.data;for(let s=0;s<r;++s)if(i[s]===t)return!0;return!1}*[Symbol.iterator](){for(let t=0;t<this.length;t++)yield this.data[t]}};function Iw(e){e.data.length>uR*e.length&&(e.data.length=Math.floor(e.length*cR))}function hR(e){return{setTimeout:(t,r)=>{const i=e.setTimeout(t,r);return ue(()=>e.clearTimeout(i))}}}const bl=hR(globalThis);function Sf(e){return dR(e)||B$(e)}function dR(e){return e!=null&&typeof e=="object"&&"on"in e&&typeof e.on=="function"}function B$(e){return e!=null&&typeof e=="object"&&"addEventListener"in e&&typeof e.addEventListener=="function"}function Jc(e,t,r){if(!Sf(e))throw new TypeError("target is not a Evented or EventTarget object");return B$(e)?pR(e,t,r):e.on(t,r)}function pR(e,t,r,i){if(Array.isArray(t)){const s=t.slice();for(const n of s)e.addEventListener(n,r,i);return ue(()=>{for(const n of s)e.removeEventListener(n,r,i)})}return e.addEventListener(t,r,i),ue(()=>e.removeEventListener(t,r,i))}function H$(e,t,r){if(!Sf(e))throw new TypeError("target is not a Evented or EventTarget object");if("once"in e)return e.once(t,r);const i=Jc(e,t,s=>{i.remove(),r.call(e,s)});return i}function $e(e="Aborted"){return new I("AbortError",e)}function Ve(e,t="Aborted"){if(lr(e))throw $e(t)}function Yc(e){return e instanceof AbortSignal?e:(e==null?void 0:e.signal)??void 0}function lr(e){const t=Yc(e);return t!=null&&t.aborted}function q$(e){if(Ht(e))throw e}function Rw(e){if(!Ht(e))throw e}function xr(e,t){const r=Yc(e);if(r!=null){if(!r.aborted)return H$(r,"abort",()=>t());t()}}function i_(e,t){const r=Yc(e);if(r!=null)return Ve(r),H$(r,"abort",()=>t($e()))}function fR(e,t){return Yc(t)==null?e:new Promise((r,i)=>{let s=xr(t,()=>i($e()));const n=()=>{s=Ce(s)};e.then(n,n),e.then(r,i)})}function Ht(e){return(e==null?void 0:e.name)==="AbortError"}async function mp(e){try{return await e}catch(t){if(!Ht(t))throw t;return}}async function s_(e){if(!e)return;if(typeof e.forEach!="function"){const r=Object.keys(e),i=r.map(o=>e[o]),s=await s_(i),n={};return r.map((o,a)=>n[o]=s[a]),n}const t=e;return Promise.allSettled(t).then(r=>Array.from(t,(i,s)=>{const n=r[s];return n.status==="fulfilled"?{promise:i,value:n.value}:{promise:i,error:n.reason}}))}async function mR(e){return(await Promise.allSettled(e)).filter(t=>t.status==="fulfilled").map(t=>t.value)}async function RK(e){return(await Promise.allSettled(e)).filter(t=>t.status==="rejected").map(t=>t.reason)}function W$(e,t=void 0,r){const i=new AbortController;return xr(r,()=>i.abort()),new Promise((s,n)=>{let o=setTimeout(()=>{o=0,s(t)},e);xr(i,()=>{o&&(clearTimeout(o),n($e()))})})}function kK(e,t,r,i){const s=r&&"abort"in r?r:null;i!=null||s||(i=r);let n=setTimeout(()=>{n=0,s==null||s.abort()},t);const o=()=>i||new I("promiseUtils:timeout","The wrapped promise did not resolve within "+t+" ms");return e.then(a=>{if(n===0)throw o();return clearTimeout(n),a},a=>{throw clearTimeout(n),n===0?o():a})}function yR(e,t){const r=new AbortController,i=setTimeout(()=>r.abort(),t);return xr(e,()=>{r.abort(),clearTimeout(i)}),{...e,signal:r.signal}}function Ri(e){return e&&typeof e.then=="function"}function Hy(e){return Ri(e)?e:Promise.resolve(e)}function gR(e,t=-1){let r,i,s,n,o=null;const a=(...l)=>{if(r){i=l,n&&n.reject($e()),n=Pr();const m=n.promise;if(o){const y=o;o=null,y.abort()}return m}if(s=n||Pr(),n=null,t>0){const m=new AbortController;r=Hy(e(...l,m.signal));const y=r;W$(t).then(()=>{r===y&&(n?m.abort():o=m)})}else r=1,r=Hy(e(...l));const h=()=>{const m=i;i=s=r=o=null,m!=null&&a(...m)},p=r,f=s;return p.then(h,h),p.then(f.resolve,f.reject),f.promise};return a}function Pr(){let e,t;const r=new Promise((s,n)=>{e=s,t=n}),i=s=>{e(s)};return i.resolve=s=>e(s),i.reject=s=>t(s),i.timeout=(s,n)=>bl.setTimeout(()=>i.reject(n),s),i.promise=r,i}async function kw(e){await Promise.resolve(),Ve(e)}function NK(e){return e}function _R(e){return 1e3*e}function LK(e){return e}function DK(e){return .001*e}let vR=class{constructor(t){this.phases=t,this.paused=!1,this.ticks=-1,this.removed=!1}},wR=class{constructor(t){this.callback=t,this.isActive=!0}remove(){this.isActive=!1}},qy=0;const Cl={time:0,deltaTime:0,elapsedFrameTime:0,frameDuration:0},Wy=["prepare","preRender","render","postRender","update","finish"],Zy=[],xo=new Ku;let bR=class{constructor(t){this._task=t}remove(){this._task.removed=!0}pause(){this._task.paused=!0}resume(){this._task.paused=!1,Z$()}};function SR(){bo!=null&&(cancelAnimationFrame(bo),bo=requestAnimationFrame(n_))}function Z$(){bo==null&&(qy=performance.now(),bo=requestAnimationFrame(n_))}const yp={frameTasks:xo,willDispatch:!1,clearFrameTasks:TR,dispatch:Y$,executeFrameTasks:$R,reschedule:SR};function Kc(e){const t=new wR(e);return Zy.push(t),yp.willDispatch||(yp.willDispatch=!0,fp(Y$)),t}function rl(e){const t=new vR(e);return xo.push(t),Z$(),new bR(t)}let bo=null;function TR(e=!1){xo.forAll(t=>{t.removed=!0}),e&&J$()}function n_(){const e=performance.now();bo=null,bo=xo.some(r=>!r.paused&&!r.removed)?requestAnimationFrame(n_):null,yp.executeFrameTasks(e)}function $R(e){const t=e-qy;qy=e;const r=1e3/60,i=Math.max(0,t-r);Cl.time=e,Cl.frameDuration=r-i;for(let s=0;s<Wy.length;s++){const n=performance.now(),o=Wy[s];xo.forAll(a=>{var l;a.paused||a.removed||(s===0&&a.ticks++,a.phases[o]&&(Cl.elapsedFrameTime=performance.now()-e,Cl.deltaTime=a.ticks===0?0:t,(l=a.phases[o])==null||l.call(a,Cl)))}),AR[s].push(performance.now()-n)}J$(),PR.push(performance.now()-e)}const bh=new Ku;function J$(){xo.forAll(e=>{e.removed&&bh.push(e)}),xo.removeUnorderedMany(bh.data,bh.length),bh.clear()}function Y$(){for(;Zy.length;){const e=Zy.shift();e.isActive&&e.callback()}yp.willDispatch=!1}function ER(e=1,t){const r=Pr(),i=()=>{lr(t)?r.reject($e()):e===0?r():(--e,fp(()=>i()))};return i(),r.promise}function MR(e){return ER(1,e)}async function xR(e){await MR(e),await new Promise(t=>requestAnimationFrame(()=>{e!=null&&e.aborted||t()}))}const AR=Wy.map(e=>new Yu(e)),PR=new Yu("total");function K$(e,t){for(const r of e.values())if(t(r))return!0;return!1}function Nw(e,t){if(!t)return e;for(const r of t)r!=null&&e.add(r);return e}function GK(e,t){return t!=null&&e.add(t),e}function o_(e,t){const r=new Set;return Nw(r,e),Nw(r,t),r}function OR(e,t){const r=new Set;for(const i of t)e.has(i)&&r.add(i);return r}function zK(e,t){if(!e||!t)return!1;if(e===t)return!0;for(const r of e)if(!t.has(r))return!1;return!0}function VK(e,t){if(e==null&&t==null)return!0;if(e==null||t==null||e.size!==t.size)return!1;for(const r of e)if(!t.has(r))return!1;return!0}function CR(e,t){const r=new Set(e);for(const i of t)r.delete(i);return r}function IR(e,t){return CR(o_(e,t),OR(e,t))}let RR=0;function hd(){return++RR}let Tf=class extends bf{constructor(t){super(new kR(t)),this._observer&&Lw.register(this,new WeakRef(this._observer),this)}destroy(){var t,r;this._observer&&Lw.unregister(this._observer),(t=this.accessed)==null||t.clear(),this.clear(),(r=this._observer)==null||r.destroy()}},kR=class{constructor(t){this._notify=t,this._invalidCount=0,this.destroyed=!1}onInvalidated(){this._invalidCount++}onCommitted(){if(this.destroyed)return;const t=this._invalidCount;if(t===1)return this._invalidCount=0,void this._notify();this._invalidCount=t>0?t-1:0}destroy(){this.destroyed=!0,this._notify=NR}};const Lw=new FinalizationRegistry(e=>{var t;(t=e.deref())==null||t.destroy()});function NR(){}let Fa=!1;const gp=[];function X$(e,t){let r=new Tf(n),i=null,s=!1;function n(){if(!r||s)return;if(Fa)return void eE(n);const a=i;r.clear(),Fa=!0,s=!0,i=ps(r,e),s=!1,Fa=!1,t(i,a),tE()}function o(){r&&(r.destroy(),r=null,i=null)}return s=!0,i=ps(r,e),s=!1,ue(o)}function Q$(e,t){let r=new Tf(s),i=null;function s(){t(i,o)}function n(){r&&(r.destroy(),r=null),i=null}function o(){return r?(r.clear(),i=ps(r,e),i):null}return o(),ue(n)}function LR(e,t){let r=!1,i=!1;const s=!!(t!=null&&t.sync);let n=new Tf(()=>{r||i||(i=!0,s?o():queueMicrotask(o))});function o(){i=!1,n&&!r&&(Fa?eE(o):(n.clear(),Fa=!0,r=!0,ps(n,e),r=!1,Fa=!1,tE()))}function a(){n&&(n.destroy(),n=null)}return r=!0,ps(n,e),r=!1,ue(a)}function eE(e){gp.includes(e)||gp.unshift(e)}function tE(){for(;gp.length;)gp.pop()()}var Xu;(function(e){e[e.Untracked=0]="Untracked",e[e.Tracked=1]="Tracked"})(Xu||(Xu={}));let vc=class{constructor(){this.uid=hd(),this.removed=!1,this.type=null,this.oldValue=null,this.callback=null,this.getValue=null,this.target=null,this.path=null,this.equals=null}static acquireUntracked(t,r,i,s,n){return this.pool.acquire(Xu.Untracked,t,r,i,s,n,e_)}static acquireTracked(t,r,i,s){return this.pool.acquire(Xu.Tracked,t,r,i,null,null,s)}notify(t,r){this.type===Xu.Untracked?this.callback.call(this.target,t,r,this.path,this.target):this.callback.call(null,t,r,void 0,void 0)}acquire(t,r,i,s,n,o,a){this.uid=hd(),this.removed=!1,this.type=t,this.oldValue=r,this.callback=i,this.getValue=s,this.target=n,this.path=o,this.equals=a}release(){this.target=this.path=this.oldValue=this.callback=this.getValue=null,this.uid=hd(),this.removed=!0}};vc.pool=new V$(vc);const dd=new Ot,cs=new Set;let _p;function vp(e){cs.delete(e),cs.add(e),_p||(_p=Kc(UR))}function DR(e){if(e.removed)return;const t=e.oldValue,r=e.getValue();e.equals(t,r)||(e.oldValue=r,e.notify(r,t))}function FR(e){for(const t of cs.values())t.target===e&&(t.removed=!0)}function UR(){let e=10;for(;_p&&e--;){_p=null;const t=jR(),r=dd.acquire();for(const i of t){const s=i.uid;DR(i),s===i.uid&&i.removed&&r.push(i)}for(const i of cs)i.removed&&(r.push(i),cs.delete(i));for(const i of r)vc.pool.release(i);dd.release(r),dd.release(t),Jy.forEach(i=>i())}}function jR(){const e=dd.acquire();e.length=cs.size;let t=0;for(const r of cs)e[t]=r,++t;return cs.clear(),e}const Jy=new Set;function GR(e){return Jy.add(e),ue(()=>Jy.delete(e))}function zR(e,t,r){let i=R$(e,t,r,(s,n,o)=>{let a,l,h=Q$(()=>Wc(s,n),(p,f)=>{var m;((m=s.__accessor__)==null?void 0:m.lifecycle)===Gt.DESTROYED||a&&a.uid!==l?i.remove():(a||(a=vc.acquireUntracked(p,o,f,s,n),l=a.uid),vp(a))});return ue(()=>{h.remove(),a&&(a.uid!==l||a.removed||(a.removed=!0,vp(a)),a=null),i=h=null})});return i}function VR(e,t,r){const i=R$(e,t,r,(s,n,o)=>{let a=!1;return X$(()=>Wc(s,n),(l,h)=>{s.__accessor__.lifecycle!==Gt.DESTROYED?a||(a=!0,e_(h,l)||o.call(s,l,h,n,s),a=!1):i.remove()})});return i}function BR(e,t,r,i=!1){return e.__accessor__&&e.__accessor__.lifecycle!==Gt.DESTROYED?i?VR(e,t,r):zR(e,t,r):ue()}function HR(e,t,r){let i,s,n=Q$(e,(o,a)=>{i&&i.uid!==s?n.remove():(i||(i=vc.acquireTracked(o,t,a,r),s=i.uid),vp(i))});return ue(()=>{n.remove(),i&&(i.uid!==s||i.removed||(i.removed=!0,vp(i)),i=null),n=null})}function qR(e,t,r){let i=!1;return X$(e,(s,n)=>{i||(i=!0,r(n,s)||t(s,n),i=!1)})}function WR(e,t,r=!1,i=T$){return r?qR(e,t,i):HR(e,t,i)}function Dw(e){return K$(cs,t=>t.oldValue===e)}function ZR(e,t){for(const r of e.values())if(t(r))return!0;return!1}function WK(e,t){for(const r of e.values())if(t(r))return r;return null}function $f(e,t,r){const i=e.get(t);if(i!==void 0)return i;const s=r();return e.set(t,s),s}function ZK(e){const t=new Map;return r=>(t.has(r)||t.set(r,e(r)),t.get(r))}const Ua=()=>F.getLogger("esri.core.accessorSupport.ensureTypes");function JR(e){return e==null?e:new Date(e)}function YR(e){return e==null?e:!!e}function KR(e){return e==null?e:e.toString()}function rr(e,t=0){return e==null?e:(e=parseFloat(e),isNaN(e)?t:e)}function a_(e){return e==null?e:Math.round(parseFloat(e))}function XR(e){return null}function QR(e,t){return r=>{let i=e(r);return t.step!=null&&(i=Math.round(i/t.step)*t.step),t.min!=null&&(i=Math.max(t.min,i)),t.max!=null&&(i=Math.min(t.max,i)),i}}function rE(e){return(e==null?void 0:e.constructor)&&e.constructor.__accessorMetadata__!==void 0}function wp(e,t){return t!=null&&e&&!(t instanceof e)}function iE(e){return e&&"isCollection"in e}function Fw(e){return e!=null&&e.Type?typeof e.Type=="function"?e.Type:e.Type.base:null}function ek(e,t){if(!(t!=null&&t.constructor)||!iE(t.constructor))return Yy(e,t)?t:new e(t);const r=Fw(e.prototype.itemType),i=Fw(t.constructor.prototype.itemType);return r?i?r===i?t:r.prototype.isPrototypeOf(i.prototype)?new e(t):(Yy(e,t),t):new e(t):t}function Yy(e,t){return!!rE(t)&&(Ua().error("Accessor#set","Assigning an instance of '"+(t.declaredClass||"unknown")+"' which is not a subclass of '"+Mf(e)+"'"),!0)}function Ef(e,t){return t==null?t:iE(e)?ek(e,t):wp(e,t)?Yy(e,t)?t:new e(t):t}function Mf(e){var t;return((t=e==null?void 0:e.prototype)==null?void 0:t.declaredClass)||"unknown"}const tk=new WeakMap;function rk(e){switch(e){case Number:return t=>rr(t);case Te:return a_;case Boolean:return YR;case String:return KR;case Date:return JR;case l_:return XR;default:return $f(tk,e,()=>Ef.bind(null,e))}}function Rt(e,t){const r=rk(e);return arguments.length===1?r:r(t)}function wc(e,t,r){return arguments.length===1?wc.bind(null,e):t&&(Array.isArray(t)?t.map(i=>e(i,r)):[e(t,r)])}function ik(e,t){return arguments.length===1?wc(r=>Rt(e,r)):wc(r=>Rt(e,r),t)}function sE(e,t,r){return t!==0&&Array.isArray(r)?r.map(i=>sE(e,t-1,i)):e(r)}function bp(e,t,r){if(arguments.length===2)return n=>bp(e,t,n);if(!r)return r;r=sE(e,t,r);let i=t,s=r;for(;i>0&&Array.isArray(s);)i--,s=s[0];if(s!==void 0)for(let n=0;n<i;n++)r=[r];return r}function sk(e,t,r){return arguments.length===2?bp(i=>Rt(e,i),t):bp(i=>Rt(e,i),t,r)}function nE(e){return!!Array.isArray(e)&&!e.some(t=>{const r=typeof t;return!(r==="string"||r==="number"||r==="function"&&e.length>1)})}function Ky(e,t){if(arguments.length===2)return Ky(e).call(null,t);const r=new Set,i=e.filter(a=>typeof a!="function"),s=e.filter(a=>typeof a=="function");for(const a of e)typeof a!="string"&&typeof a!="number"||r.add(a);let n=null,o=null;return(a,l)=>{if(a==null)return a;const h=typeof a,p=h==="string"||h==="number";return p&&(r.has(a)||s.some(f=>h==="string"&&f===String||h==="number"&&f===Number))||h==="object"&&s.some(f=>!wp(a,f))?a:(p&&i.length?(n||(n=i.map(f=>typeof f=="string"?`'${f}'`:`${f}`).join(", ")),Ua().error("Accessor#set",`'${a}' is not a valid value for this property, only the following values are valid: ${n}`)):typeof a=="object"&&s.length?(o||(o=s.map(f=>Mf(f)).join(", ")),Ua().error("Accessor#set",`'${a}' is not a valid value for this property, value must be one of ${o}`)):Ua().error("Accessor#set",`'${a}' is not a valid value for this property`),l&&(l.valid=!1),null)}}function fn(e,t){if(arguments.length===2)return fn(e).call(null,t);const r={},i=[],s=[];for(const l in e.typeMap){const h=e.typeMap[l];r[l]=Rt(h),i.push(Mf(h)),s.push(l)}const n=()=>`'${i.join("', '")}'`,o=()=>`'${s.join("', '")}'`,a=typeof e.key=="string"?l=>l[e.key]:e.key;return l=>{if(e.base&&!wp(e.base,l)||l==null)return l;const h=a(l)||e.defaultKeyValue,p=r[h];if(!p)return Ua().error("Accessor#set",`Invalid property value, value needs to be one of ${n()}, or a plain object that can autocast (having .type = ${o()})`),null;if(!wp(e.typeMap[h],l))return l;if(typeof e.key=="string"&&!rE(l)){const f={};for(const m in l)m!==e.key&&(f[m]=l[m]);return p(f)}return p(l)}}let Te=class{},l_=class{};const KK={native:e=>({type:"native",value:e}),array:e=>({type:"array",value:e}),oneOf:e=>({type:"one-of",values:e})};function nk(e){if(!e||!("type"in e))return!1;switch(e.type){case"native":case"array":case"one-of":return!0}return!1}function oE(e){switch(e.type){case"native":return Rt(e.value);case"array":return wc(oE(e.value));case"one-of":return ok(e);default:return null}}function ok(e){let t=null;return(r,i)=>Qy(r,e)?r:(t==null&&(t=Xy(e)),Ua().error("Accessor#set",`Invalid property value, value needs to be of type ${t}`),i&&(i.valid=!1),null)}function Xy(e){switch(e.type){case"native":switch(e.value){case Number:return"number";case String:return"string";case Boolean:return"boolean";case Te:return"integer";case Date:return"date";case l_:return"null";default:return Mf(e.value)}case"array":return`array of ${Xy(e.value)}`;case"one-of":{const t=e.values.map(r=>Xy(r));return`one of ${t.slice(0,-1)} or ${t[t.length-1]}`}}return"unknown"}function Qy(e,t){if(e==null)return!0;switch(t.type){case"native":switch(t.value){case Number:case Te:return typeof e=="number";case Boolean:return typeof e=="boolean";case String:return typeof e=="string";case l_:return e===null}return e instanceof t.value;case"array":return!!Array.isArray(e)&&!e.some(r=>!Qy(r,t.value));case"one-of":return t.values.some(r=>Qy(e,r))}}function d(e={}){return(t,r)=>{if(t===Function.prototype)throw new Error(`Inappropriate use of @property() on a static field: ${t.name}.${r}. Accessor does not support static properties.`);const i=Object.getOwnPropertyDescriptor(t,r),s=wf(t,r);i&&(i.get||i.set?(s.get=i.get||s.get,s.set=i.set||s.set):"value"in i&&("value"in e&&F.getLogger("esri.core.accessorSupport.decorators.property").warn(`@property() will redefine the value of "${r}" on "${t.constructor.name}" already defined in the metadata`,e),s.value=e.value=i.value)),e.readOnly!=null&&(s.readOnly=e.readOnly);const n=e.aliasOf;if(n){const l=typeof n=="string"?n:n.source,h=typeof n=="string"?null:n.overridable===!0;let p;s.dependsOn=[l],s.get=function(){let f=us(this,l);if(typeof f=="function"){p||(p=l.split(".").slice(0,-1).join("."));const m=us(this,p);m&&(f=f.bind(m))}return f},s.readOnly||(s.set=h?function(f){this._override(r,f)}:function(f){pp(this,l,f)})}const o=e.type,a=e.types;if(!s.cast){let l;o?l=ak(o):a&&(l=Array.isArray(a)?wc(fn(a[0])):fn(a)),e.cast=lk(e.cast,l)}BI(s,e),e.range&&(s.cast=QR(s.cast,e.range))}}function aE(e,t,r){const i=wf(e,r);i.json||(i.json={});let s=i.json;return t!==void 0&&(s.origins||(s.origins={}),s.origins[t]||(s.origins[t]={}),s=s.origins[t]),s}function ak(e){let t=0,r=e;if(nk(e))return oE(e);for(;Array.isArray(r)&&r.length===1&&typeof r[0]!="string"&&typeof r[0]!="number";)r=r[0],t++;const i=r;if(nE(i))return t===0?Ky(i):bp(Ky(i),t);if(t===1)return ik(i);if(t>1)return sk(i,t);const s=e;return s.from?s.from:Rt(s)}function lk(e,t){if(e||t)return e?t?(r,i)=>t(e(r,i),i):e:t}function uk(e){if(e.json&&e.json.origins){const t=e.json.origins,r={"web-document":["web-scene","web-map"]};for(const i in r)if(t[i]){const s=t[i];r[i].forEach(n=>{t[n]=s}),delete t[i]}}}let fs=class extends x${constructor(t,r,i){super(t,r,i)}};fs.prototype.type="warning";function lE(e){var t;return!!e&&((t=e.prototype)==null?void 0:t.declaredClass)&&e.prototype.declaredClass.indexOf("esri.core.Collection")===0}const eg=()=>F.getLogger("esri.core.accessorSupport.extensions.serializableProperty.reader");function Uw(e,t,r){var i,s;e&&(!r&&!t.read||(i=t.read)!=null&&i.reader||((s=t.read)==null?void 0:s.enabled)===!1||dk(e)&&vl("read.reader",u_(e),t))}function u_(e){var r,i;const t=e.ndimArray??0;if(t>1)return hk(e);if(t===1)return jw(e);if("type"in e&&cE(e.type)){const s=(i=(r=e.type.prototype)==null?void 0:r.itemType)==null?void 0:i.Type,n=jw(typeof s=="function"?{type:s}:{types:s});return(o,a,l)=>{const h=n(o,a,l);return h&&new e.type(h)}}return c_(e)}function c_(e){return"type"in e?ck(e.type):pk(e.types)}function ck(e){return e.prototype.read?(t,r,i)=>{if(t==null)return t;const s=typeof t;if(s!=="object")return void eg().error(`Expected JSON value of type 'object' to deserialize type '${e.prototype.declaredClass}', but got '${s}'`);const n=new e;return n.read(t,i),n}:e.fromJSON}function uE(e,t,r,i){return i!==0&&Array.isArray(t)?t.map(s=>uE(e,s,r,i-1)):e(t,void 0,r)}function hk(e){const t=c_(e),r=uE.bind(null,t),i=e.ndimArray??0;return(s,n,o)=>{if(s==null)return s;s=r(s,o,i);let a=i,l=s;for(;a>0&&Array.isArray(l);)a--,l=l[0];if(l!==void 0)for(let h=0;h<a;h++)s=[s];return s}}function jw(e){const t=c_(e);return(r,i,s)=>{if(r==null)return r;if(Array.isArray(r)){const o=[];for(const a of r){const l=t(a,void 0,s);l!==void 0&&o.push(l)}return o}const n=t(r,void 0,s);return n!==void 0?[n]:void 0}}function cE(e){if(!lE(e))return!1;const t=e.prototype.itemType;return!(!t||!t.Type)&&(typeof t.Type=="function"?h_(t.Type):hE(t.Type))}function dk(e){return"types"in e?hE(e.types):h_(e.type)}function h_(e){return!Array.isArray(e)&&!!e&&e.prototype&&("read"in e.prototype||"fromJSON"in e||cE(e))}function hE(e){for(const t in e.typeMap)if(!h_(e.typeMap[t]))return!1;return!0}function pk(e){let t=null;const r=e.errorContext??"type",i=e.validate;return(s,n,o)=>{if(s==null)return s;const a=typeof s;if(a!=="object")return void eg().error(`Expected JSON value of type 'object' to deserialize, but got '${a}'`);t||(t=fk(e));const l=e.key;if(typeof l!="string")return;const h=s[l],p=h?t[h]:e.defaultKeyValue?e.typeMap[e.defaultKeyValue]:void 0;if(!p){const m=`Type '${h||"unknown"}' is not supported`;return o!=null&&o.messages&&s&&o.messages.push(new fs(`${r}:unsupported`,m,{definition:s,context:o})),void eg().error(m)}const f=new p;return f.read(s,o),i?i(f):f}}function fk(e){var r,i;const t={};for(const s in e.typeMap){const n=e.typeMap[s],o=Zc(n.prototype);if(typeof e.key=="function")continue;const a=o[e.key];if(!a)continue;if((r=a.json)!=null&&r.type&&Array.isArray(a.json.type)&&a.json.type.length===1&&typeof a.json.type[0]=="string"){t[a.json.type[0]]=n;continue}const l=(i=a.json)==null?void 0:i.write;if(!(l!=null&&l.writer)){t[s]=n;continue}const h=l.target,p=typeof h=="string"?h:e.key,f={};l.writer(s,f,p),f[p]&&(t[f[p]]=n)}return t}function mk(e){if(e.json||(e.json={}),zw(e.json),Vw(e.json),Gw(e.json),e.json.origins)for(const t in e.json.origins)zw(e.json.origins[t]),Vw(e.json.origins[t]),Gw(e.json.origins[t]);return!0}function Gw(e){e.name&&(e.read&&typeof e.read=="object"?e.read.source===void 0&&(e.read.source=e.name):e.read={source:e.name},e.write&&typeof e.write=="object"?e.write.target===void 0&&(e.write.target=e.name):e.write={target:e.name})}function zw(e){typeof e.read=="boolean"?e.read={enabled:e.read}:typeof e.read=="function"?e.read={enabled:!0,reader:e.read}:e.read&&typeof e.read=="object"&&e.read.enabled===void 0&&(e.read.enabled=!0)}function Vw(e){typeof e.write=="boolean"?e.write={enabled:e.write}:typeof e.write=="function"?e.write={enabled:!0,writer:e.write}:e.write&&typeof e.write=="object"&&e.write.enabled===void 0&&(e.write.enabled=!0)}function Bw(e,t){if(!t.write||t.write.writer||t.write.enabled===!1&&!t.write.overridePolicy)return;const r=(e==null?void 0:e.ndimArray)??0;e&&(r===1||"type"in e&&lE(e.type))?t.write.writer=_k:r>1?t.write.writer=vk(r):t.types?Array.isArray(t.types)?t.write.writer=gk(t.types[0]):t.write.writer=yk(t.types):t.write.writer=bc}function yk(e){return(t,r,i,s)=>t?dE(t,e,s)?bc(t,r,i,s):void 0:bc(t,r,i,s)}function dE(e,t,r){for(const i in t.typeMap)if(e instanceof t.typeMap[i])return!0;if(r!=null&&r.messages){const i=t.errorContext??"type",s=`Values of type '${(typeof t.key!="function"?e[t.key]:e.declaredClass)??"Unknown"}' cannot be written`;r&&r.messages&&e&&r.messages.push(new I(`${i}:unsupported`,s,{definition:e,context:r})),F.getLogger("esri.core.accessorSupport.extensions.serializableProperty.writer").error(s)}return!1}function gk(e){return(t,r,i,s)=>!t||!Array.isArray(t)?bc(t,r,i,s):bc(t.filter(n=>dE(n,e,s)),r,i,s)}function bc(e,t,r,i){vl(r,Sp(e,i),t)}function Sp(e,t){return e&&typeof e.write=="function"?e.write({},t):e&&typeof e.toJSON=="function"?e.toJSON():typeof e=="number"?Tp(e):e}function Tp(e){return e===-1/0?-Number.MAX_VALUE:e===1/0?Number.MAX_VALUE:isNaN(e)?null:e}function _k(e,t,r,i){let s;e===null?s=null:e&&typeof e.map=="function"?(s=e.map(n=>Sp(n,i)),typeof s.toArray=="function"&&(s=s.toArray())):s=[Sp(e,i)],vl(r,s,t)}function pE(e,t,r){return r!==0&&Array.isArray(e)?e.map(i=>pE(i,t,r-1)):Sp(e,t)}function vk(e){return(t,r,i,s)=>{let n;if(t===null)n=null;else{n=pE(t,s,e);let o=e,a=n;for(;o>0&&Array.isArray(a);)o--,a=a[0];if(a!==void 0)for(let l=0;l<o;l++)n=[n]}vl(i,n,r)}}function wk(e,t){return d_(e,"any",t==null?void 0:t.origin)}function tg(e,t){return d_(e,"read",t==null?void 0:t.origin)}function fE(e,t){return d_(e,"write",t==null?void 0:t.origin)}function d_(e,t,r){let i=e==null?void 0:e.json;if(i!=null&&i.origins&&r){let s;s=r==="link-chart"?i.origins[r]&&(t==="any"||t in i.origins[r])?i.origins[r]:i.origins["web-map"]:i.origins[r],s&&(t==="any"||t in s)&&(i=s)}return i}function bk(e){var r;const t=Sk(e);if(e.json.origins)for(const i in e.json.origins){const s=e.json.origins[i],n=s.types?Tk(s):t;Uw(n,s,!1),s.types&&!s.write&&((r=e.json.write)!=null&&r.enabled)&&(s.write={...e.json.write}),Bw(n,s)}Uw(t,e.json,!0),Bw(t,e.json)}function Sk(e){return e.json.types?rg(e.json):e.type?mE(e):rg(e)}function Tk(e){return e.type?mE(e):rg(e)}function mE(e){if(!e.type)return;let t=0,r=e.type;for(;Array.isArray(r)&&!nE(r);)r=r[0],t++;return{type:r,ndimArray:t}}function rg(e){if(!e.types)return;let t=0,r=e.types;for(;Array.isArray(r);)r=r[0],t++;return{types:r,ndimArray:t}}function $k(e){mk(e)&&(uk(e),bk(e))}const Em=new Set,Mm=new Set;function S(e){return t=>{e??(e="esri.core.Accessor"),t.prototype.declaredClass=e,Mk(t);const r=[],i=[];let s=t.prototype;for(;s;)s.hasOwnProperty("initialize")&&!Em.has(s.initialize)&&(Em.add(s.initialize),r.push(s.initialize)),s.hasOwnProperty("destroy")&&!Mm.has(s.destroy)&&(Mm.add(s.destroy),i.push(s.destroy)),s=Object.getPrototypeOf(s);Em.clear(),Mm.clear();const n=class extends t{constructor(...a){if(super(...a),this.constructor===n&&typeof this.postscript=="function"){if(r.length&&Object.defineProperty(this,"initialize",{enumerable:!1,configurable:!0,value(){for(let l=r.length-1;l>=0;l--)r[l].call(this)}}),i.length){let l=!1;const h=this[O$];Object.defineProperty(this,"destroy",{enumerable:!1,configurable:!0,value(){if(!l){l=!0,h.call(this);for(let p=0;p<i.length;p++)i[p].call(this)}}})}Object.defineProperty(this,Symbol.dispose,{enumerable:!1,configurable:!0,value(){this.destroy()}}),this.postscript()}}};n.__accessorMetadata__=Zc(t.prototype),n.prototype.declaredClass=e;const o=(e||"AccessorSubclass").split(".").slice(-1)[0];return Object.defineProperty(n,"name",{value:o,configurable:!0}),n}}function Ek(e,t){return t.get==null?function(){const r=this.__accessor__,i=r.propertiesByName.get(e);if(i===void 0)return;r.mutable&&Z(i);const s=r.store;return s.has(e)?s.get(e):i.metadata.value}:function(){const r=this.__accessor__,i=r.propertiesByName.get(e);if(i!==void 0)return i.getComputed(r)}}function Mk(e){const t=e.prototype,r=Zc(t),i={};for(const s of Object.getOwnPropertyNames(r)){const n=r[s];$k(n),i[s]={enumerable:!0,configurable:!0,get:Ek(s,n),set(o){const a=this.__accessor__;if(a!==void 0){if(a.mutable)return a.initialized&&n.readOnly?Hw("read-only",s):a.lifecycle===Gt.CONSTRUCTED&&n.constructOnly?Hw("construct-only",s):void a.set(s,o)}else Object.defineProperty(this,s,{enumerable:!0,configurable:!0,writable:!0,value:o})}}}Object.defineProperties(e.prototype,i)}const Hw=(e,t)=>{F.getLogger("esri.core.Accessor").error(`cannot assign to ${e} property '${t}'`)};var yE,gE;function xk(e){var t;if(e==null)return{value:e};if(Array.isArray(e))return{type:[e[0]],value:null};switch(typeof e){case"object":return(t=e.constructor)!=null&&t.__accessorMetadata__||e instanceof Date?{type:e.constructor,value:e}:e;case"boolean":return{type:Boolean,value:e};case"string":return{type:String,value:e};case"number":return{type:Number,value:e};case"function":return{type:e,value:null};default:return}}const ni=Symbol("Accessor-Handles"),ig=Symbol("Accessor-Initialized");let q=class pd{static createSubclass(t={}){if(Array.isArray(t))throw new Error("Multi-inheritance unsupported since 4.16");const{properties:r,declaredClass:i,constructor:s}=t;delete t.declaredClass,delete t.properties,delete t.constructor;const n=this;class o extends n{constructor(...l){super(...l),this.inherited=null,s&&s.apply(this,l)}}Zc(o.prototype);for(const a in t){const l=t[a];o.prototype[a]=typeof l=="function"?function(...h){const p=this.inherited;let f;this.inherited=function(...m){if(n.prototype[a])return n.prototype[a].apply(this,m)};try{f=l.apply(this,h)}catch(m){throw this.inherited=p,m}return this.inherited=p,f}:t[a]}for(const a in r){const l=xk(r[a]);d(l)(o.prototype,a)}return S(i)(o)}static freeze(t){return t instanceof pd?t.__accessor__.mutable=!1:Object.freeze(t),t}static isFrozen(t){return t instanceof pd?!t.__accessor__.mutable:Object.isFrozen(t)}constructor(...t){var i;if(this[yE]=null,this[gE]=!1,this.constructor===pd)throw new Error("[accessor] cannot instantiate Accessor. This can be fixed by creating a subclass of Accessor");const r=new tR(this);Object.defineProperty(this,"__accessor__",{enumerable:!1,value:r}),t.length>0&&(r.ctorArgs=((i=this.normalizeCtorArgs)==null?void 0:i.apply(this,t))??t[0])}postscript(){const t=this.__accessor__,r=t.ctorArgs;t.initialize(),r&&(this.set(r),t.ctorArgs=null),t.constructed(),this.initialize(),this[ig]=!0}initialize(){}[O$](){this[ni]=ke(this[ni])}destroy(){var t;this.destroyed||(FR(this),this.__accessor__.destroy(),(t=aR())==null||t.onInstanceDestroy(this))}[Symbol.dispose](){this.destroy()}get constructed(){return this.__accessor__&&this.__accessor__.initialized||!1}get initialized(){return this[ig]}get destroyed(){var t;return((t=this.__accessor__)==null?void 0:t.lifecycle)===Gt.DESTROYED||!1}commitProperty(t){us(this,t)}hasOwnProperty(t){return this.__accessor__?this.__accessor__.has(t):Object.prototype.hasOwnProperty.call(this,t)}keys(){return this.__accessor__?this.__accessor__.keys():[]}set(t,r){return pp(this,t,r),this}watch(t,r,i){return NI(F.getLogger(this),"`watch` is deprecated in favor of reactiveUtils.watch",{replacement:"reactiveUtils.watch",version:"4.32",see:"https://developers.arcgis.com/javascript/latest/api-reference/esri-core-reactiveUtils.html#watch",warnOnce:!0}),BR(this,t,r,i)}addHandles(t,r){if(this.destroyed){const i=Array.isArray(t)?t:[t];for(const s of i)s.remove();return}(this[ni]??(this[ni]=new wl)).add(t,r)}removeHandles(t){var r;(r=this[ni])==null||r.remove(t)}removeAllHandles(){var t;(t=this[ni])==null||t.removeAll()}removeHandlesReference(t){var r;(r=this[ni])==null||r.removeReference(t)}hasHandles(t){var r;return((r=this[ni])==null?void 0:r.has(t))===!0}_override(t,r){r===void 0?this.__accessor__.clearOverride(t):this.__accessor__.override(t,r)}_clearOverride(t){return this.__accessor__.clearOverride(t)}_overrideIfSome(t,r){r==null?this.__accessor__.clearOverride(t):this.__accessor__.override(t,r)}_isOverridden(t){return this.__accessor__.isOverridden(t)}notifyChange(t){this.__accessor__.notifyChange(t)}_get(t){return this.__accessor__.internalGet(t)}_set(t,r){return this.__accessor__.internalSet(t,r),this}};yE=ni,gE=ig;let Ak=class _E{constructor(){this._values=new Map,this.multipleOriginsSupported=!1}clone(t){const r=new _E;return this._values.forEach((i,s)=>{t&&t.has(s)||r.set(s,C(i.value),i.origin)}),r}get(t,r){r=this._normalizeOrigin(r);const i=this._values.get(t);return r==null||(i==null?void 0:i.origin)===r?i==null?void 0:i.value:void 0}originOf(t){var r;return((r=this._values.get(t))==null?void 0:r.origin)??le.USER}keys(t){t=this._normalizeOrigin(t);const r=[...this._values.keys()];return t==null?r:r.filter(i=>{var s;return((s=this._values.get(i))==null?void 0:s.origin)===t})}set(t,r,i){if((i=this._normalizeOrigin(i))===le.DEFAULTS){const s=this._values.get(t);if((s==null?void 0:s.origin)!=null&&s.origin>i)return}this._values.set(t,new Pk(r,i))}delete(t,r){var i;(r=this._normalizeOrigin(r))!=null&&((i=this._values.get(t))==null?void 0:i.origin)!==r||this._values.delete(t)}has(t,r){var i;return(r=this._normalizeOrigin(r))!=null?((i=this._values.get(t))==null?void 0:i.origin)===r:this._values.has(t)}forEach(t){this._values.forEach(({value:r},i)=>t(r,i))}_normalizeOrigin(t){if(t!=null)return t===le.DEFAULTS?t:le.USER}},Pk=class{constructor(t,r){this.value=t,this.origin=r}};function Ok(e,t,r){t.keys().forEach(s=>{r.set(s,t.get(s),le.DEFAULTS)});const i=e.metadata;Object.keys(i).forEach(s=>{e.internalGet(s)&&r.set(s,e.internalGet(s),le.DEFAULTS)})}function Ck(e,t,r){if(!(e!=null&&e.read)||e.read.enabled===!1||!e.read.source)return!1;const i=e.read.source;if(typeof i=="string"){if(i===t||i.includes(".")&&i.indexOf(t)===0&&Mw(i,r))return!0}else for(const s of i)if(s===t||s.includes(".")&&s.indexOf(t)===0&&Mw(s,r))return!0;return!1}function Ik(e){return e&&(!e.read||e.read.enabled!==!1&&!e.read.source)}function Rk(e,t,r,i,s){let n=tg(t[r],s);Ik(n)&&(e[r]=!0);for(const o of Object.getOwnPropertyNames(t))n=tg(t[o],s),Ck(n,r,i)&&(e[o]=!0)}function kk(e,t,r,i){const s=r.metadata,n=wk(s[t],i),o=n==null?void 0:n.default;if(o===void 0)return;const a=typeof o=="function"?o.call(e,t,i):o;a!==void 0&&r.set(t,a)}const vE={origin:"service"};function Nk(e,t,r=vE){if(!t||typeof t!="object")return;const i=pn(e),s=i.metadata,n={};for(const o of Object.getOwnPropertyNames(t))Rk(n,s,o,t,r);i.setDefaultOrigin(r.origin);for(const o of Object.getOwnPropertyNames(n)){const a=tg(s[o],r).read,l=a==null?void 0:a.source;let h;h=l&&typeof l=="string"?Wc(t,l):t[o],a!=null&&a.reader&&(h=a.reader.call(e,h,t,r)),h!==void 0&&i.set(o,h)}if(!r||!r.ignoreDefaults){i.setDefaultOrigin("defaults");for(const o of Object.getOwnPropertyNames(s))n[o]||kk(e,o,i,r)}i.setDefaultOrigin("user")}function eX(e,t,r,i=vE){var n;const s={...i,messages:[]};r(s),(n=s.messages)==null||n.forEach(o=>{o.type!=="warning"||e.loaded?i!=null&&i.messages&&i.messages.push(o):e.loadWarnings.push(o)})}function Lk(e,t,r,i,s){var o,a;const n={};return(a=(o=t.write)==null?void 0:o.writer)==null||a.call(e,i,n,r,s),n}function wE(e,t,r,i,s,n){if(!(i!=null&&i.write))return!1;const o=us(e,r);if(!s&&i.write.overridePolicy){const a=i.write.overridePolicy.call(e,o,r,n??void 0);a!==void 0&&(s=a)}if(s||(s=i.write),!s||s.enabled===!1||s.layerContainerTypes&&(n!=null&&n.layerContainerType)&&!s.layerContainerTypes.includes(n.layerContainerType))return!1;if((o===null&&!s.allowNull&&!s.writerEnsuresNonNull||o===void 0)&&s.isRequired){const a=new I("web-document-write:property-required",`Missing value for required property '${r}' on '${e.declaredClass}'`,{propertyName:r,target:e});return a&&(n!=null&&n.messages)?n.messages.push(a):a&&!n&&F.getLogger("esri.core.accessorSupport.write").error(a.name,a.message),!1}return!(o===void 0||o===null&&!s.allowNull&&!s.writerEnsuresNonNull||!s.alwaysWriteDefaults&&(!t.store.multipleOriginsSupported||t.store.originOf(r)===le.DEFAULTS)&&Dk(e,r,n,i,o)||!s.ignoreOrigin&&(n!=null&&n.origin)&&t.store.multipleOriginsSupported&&t.store.originOf(r)<D$(n.origin))}function Dk(e,t,r,i,s){const n=i.default;if(n===void 0)return!1;if(i.defaultEquals!=null)return i.defaultEquals(s);if(typeof n=="function"){if(Array.isArray(s)){const o=n.call(e,t,r??void 0);return yf(o,s)}return!1}return n===s}function tX(e,t,r,i){const s=pn(e),n=s.metadata,o=fE(n[t],i);return!!o&&wE(e,s,t,o,r,i)}function Fk(e,t,r){var n,o;if(e&&typeof e.toJSON=="function"&&(!e.toJSON.isDefaultToJSON||!e.write))return ld(t,e.toJSON(r));const i=pn(e),s=i.metadata;for(const a in s){const l=fE(s[a],r);if(!wE(e,i,a,l,void 0,r))continue;const h=us(e,a),p=Lk(e,l,l.write&&typeof l.write.target=="string"?l.write.target:a,h,r);Object.keys(p).length>0&&(t=ld(t,p),(o=(n=r==null?void 0:r.resources)==null?void 0:n.pendingOperations)!=null&&o.length&&r.resources.pendingOperations.push(Promise.all(r.resources.pendingOperations).then(()=>ld(t,p,()=>"replace-arrays"))),r!=null&&r.writtenProperties&&r.writtenProperties.push({target:e,propName:a,oldOrigin:KI(i.store.originOf(a)),newOrigin:r.origin}))}return t}const bE=e=>{let t=class extends e{constructor(...r){super(...r);const i=pn(this),s=i.store,n=new Ak;i.store=n,Ok(i,s,n)}read(r,i){Nk(this,r,i)}write(r,i){return Fk(this,r??{},i)}toJSON(r){return this.write({},r)}static fromJSON(r,i){return Uk.call(this,r,i)}};return t=c([S("esri.core.JSONSupport")],t),t.prototype.toJSON.isDefaultToJSON=!0,t};function Uk(e,t){if(!e)return null;if(e.declaredClass)throw new Error("JSON object is already hydrated");const r=new this;return r.read(e,t),r}let tu=class extends bE(q){};tu=c([S("esri.core.JSONSupport")],tu),function(e){function t(r){return r&&typeof r=="object"&&"toJSON"in r&&typeof r.toJSON=="function"}e.JSONSupportMixin=bE,e.isSerializable=t}(tu||(tu={}));const j=tu,jk=/^https:\/\/([a-z\d-]+)(\.maps([^.]*))?\.arcgis\.com/i,Gk={devext:{customBaseUrl:"mapsdevext.arcgis.com",portalHostname:"devext.arcgis.com"},qaext:{customBaseUrl:"mapsqa.arcgis.com",portalHostname:"qaext.arcgis.com"},www:{customBaseUrl:"maps.arcgis.com",portalHostname:"www.arcgis.com"}};function qw(e){const t=e==null?void 0:e.match(jk);if(!t)return null;const[,r,i,s]=t;if(!r)return null;let n=null,o=null,a=null;const{devext:l,qaext:h,www:p}=Gk;if(i)if(n=r,s)switch(s.toLowerCase()){case"devext":({customBaseUrl:o,portalHostname:a}=l);break;case"qa":({customBaseUrl:o,portalHostname:a}=h);break;default:return null}else({customBaseUrl:o,portalHostname:a}=p);else switch(r.toLowerCase()){case"devext":({customBaseUrl:o,portalHostname:a}=l);break;case"qaext":({customBaseUrl:o,portalHostname:a}=h);break;case"www":({customBaseUrl:o,portalHostname:a}=p);break;default:return null}return{customBaseUrl:o,isPortal:!1,portalHostname:a,urlKey:n}}function zk(e){return/\/(sharing|usrsvcs)\/(appservices|servers)\//i.test(e)}function SE(e){const t=/^https?:\/\/(?:cdn|[a-z\d-]+\.maps)\.arcgis\.com/i,r=/^https?:\/\/(?:cdndev|[a-z\d-]+\.mapsdevext)\.arcgis\.com/i,i=/^https?:\/\/(?:cdnqa|[a-z\d-]+\.mapsqa)\.arcgis\.com/i;return t.test(e)?e=e.replace(t,"https://www.arcgis.com"):r.test(e)?e=e.replace(r,"https://devext.arcgis.com"):i.test(e)&&(e=e.replace(i,"https://qaext.arcgis.com")),e}function TE(e){const t=atob(e),r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r.buffer}function Vk(e){const t=new Uint8Array(e);let r="";for(let i=0;i<t.length;i++)r+=String.fromCharCode(t[i]);return btoa(r)}const Bk=()=>F.getLogger("esri.core.urlUtils"),Sl=me.request,Ww="esri/config: esriConfig.request.proxyUrl is not set.",$E=/^\s*[a-z][a-z0-9-+.]*:(?![0-9])/i,EE=/^\s*http:/i,Hk=/^\s*https:/i,qk=/^\s*file:/i,Wk=/:\d+$/,Zk=/^https?:\/\/[^/]+\.arcgis.com\/sharing(\/|$)/i,Jk=new RegExp("^(([^:/?#]+):)?(//([^/?#]*))?([^?#]*)(\\?([^#]*))?(#(.*))?$"),Yk=new RegExp("^((([^[:]+):)?([^@]+)@)?(\\[([^\\]]+)\\]|([^[:]*))(:([0-9]+))?$");let ja=class{constructor(t=""){this.uri=t,this.scheme=null,this.authority=null,this.path=null,this.query=null,this.fragment=null,this.user=null,this.password=null,this.host=null,this.port=null;let r=this.uri.match(Jk);this.scheme=r[2]||(r[1]?"":null),this.authority=r[4]||(r[3]?"":null),this.path=r[5],this.query=r[7]||(r[6]?"":null),this.fragment=r[9]||(r[8]?"":null),this.authority!=null&&(r=this.authority.match(Yk),this.user=r[3]||null,this.password=r[4]||null,this.host=r[6]||r[7],this.port=r[9]||null)}toString(){return this.uri}};const Sh={},Kk=new ja(me.applicationUrl);let vt=Kk;const Xk=Qk();let p_=Xk;const f_=()=>vt,sX=()=>p_;function Qk(){const e=vt.path,t=e.slice(0,e.lastIndexOf("/")+1);return`${`${vt.scheme}://${vt.host}${vt.port!=null?`:${vt.port}`:""}`}${t}`}function kt(e){if(!e)return null;const t={path:null,query:null},r=new ja(e),i=e.indexOf("?");return r.query===null?t.path=e:(t.path=e.slice(0,i),t.query=m_(r.query)),r.fragment&&(t.hash=r.fragment,r.query===null&&(t.path=t.path.slice(0,t.path.length-(r.fragment.length+1)))),t}function m_(e){const t=e.split("&"),r={};for(const i of t){if(!i)continue;const s=i.indexOf("=");let n,o;s<0?(n=decodeURIComponent(i),o=""):(n=decodeURIComponent(i.slice(0,s)),o=decodeURIComponent(i.slice(s+1)));let a=r[n];typeof a=="string"&&(a=r[n]=[a]),Array.isArray(a)?a.push(o):r[n]=o}return r}function Sc(e,t){return e?Object.keys(e).map(r=>{const i=e[r];if(i==null)return"";const s=encodeURIComponent(r)+"=",n=t==null?void 0:t[r];return n?s+encodeURIComponent(n(i)):Array.isArray(i)?i.map(o=>j.isSerializable(o)?s+encodeURIComponent(JSON.stringify(o)):s+encodeURIComponent(o)).join("&"):j.isSerializable(i)?s+encodeURIComponent(JSON.stringify(i)):s+encodeURIComponent(i)}).filter(r=>r).join("&"):""}function ME(e=!1){let t,r=Sl.proxyUrl;if(typeof e=="string"){t=nN(e);const i=xf(e);i&&(r=i.proxyUrl)}else t=!!e;if(!r)throw Bk().warn(Ww),new I("urlUtils:proxy-not-set",Ww);return t&&ng()&&(r=b_(r)),kt(r)}function nX(e,t=!1){const r=xf(e);let i,s;if(r){const n=y_(r.proxyUrl);i=n.path,s=n.query?m_(n.query):null}else if(t){const n=ME(e);i=n.path,s=n.query}if(i){const n=kt(e);e=i+"?"+n.path;const o=Sc({...s,...n.query});o&&(e=`${e}?${o}`)}return e}const Il={path:"",query:""};function y_(e){const t=e.indexOf("?");return t!==-1?(Il.path=e.slice(0,t),Il.query=e.slice(t+1)):(Il.path=e,Il.query=null),Il}function xE(e){return e=(e=Ep(e=cN(e=y_(e).path),!0)).toLowerCase()}function eN(e){const t={proxyUrl:e.proxyUrl,urlPrefix:xE(e.urlPrefix)},r=Sl.proxyRules,i=t.urlPrefix;let s=r.length;for(let n=0;n<r.length;n++){const o=r[n].urlPrefix;if(i.indexOf(o)===0){if(i.length===o.length)return-1;s=n;break}o.indexOf(i)===0&&(s=n+1)}return r.splice(s,0,t),s}function xf(e){const t=Sl.proxyRules,r=xE(e);for(let i=0;i<t.length;i++)if(r.indexOf(t[i].urlPrefix)===0)return t[i]}function oX(e,t){if(!e||!t)return!1;e=$p(e),t=$p(t);const r=qw(e),i=qw(t);return r!=null&&i!=null?r.portalHostname===i.portalHostname:r==null&&i==null&&il(e,t,!0)}function tN(e,t){return e=$p(e),t=$p(t),Ep(e)===Ep(t)}function $p(e){const t=(e=ln(e)).indexOf("/sharing");return t>0?e.slice(0,t):e.replace(/\/+$/,"")}function sg(e,t=Sl.interceptors){const r=i=>i==null||i instanceof RegExp&&i.test(e)||typeof i=="string"&&e.startsWith(i);if(t){for(const i of t)if(Array.isArray(i.urls)){if(i.urls.some(r))return i}else if(r(i.urls))return i}return null}function il(e,t,r=!1){if(!e||!t)return!1;const i=ag(e),s=ag(t);return!(!r&&i.scheme!==s.scheme)&&i.host!=null&&s.host!=null&&i.host.toLowerCase()===s.host.toLowerCase()&&i.port===s.port}function g_(e){if(typeof e=="string"){if(!or(e))return!0;e=ag(e)}if(il(e,vt))return!0;const t=Sl.trustedServers||[];for(let r=0;r<t.length;r++){const i=rN(t[r]);for(let s=0;s<i.length;s++)if(il(e,i[s]))return!0}return!1}function rN(e){return Sh[e]||(w_(e)||Mi(e)?Sh[e]=[new ja(Tr(e))]:Sh[e]=[new ja(`http://${e}`),new ja(`https://${e}`)]),Sh[e]}function Tr(e,t=p_,r){return Mi(e)?r!=null&&r.preserveProtocolRelative?e:vt.scheme==="http"&&vt.authority===nr(e).slice(2)?`http:${e}`:`https:${e}`:w_(e)?e:Af(e[0]==="/"?uN(t):t,e)}function __(e,t=p_,r){if(e==null||!or(e))return e;const i=ln(e),s=i.toLowerCase(),n=ln(t).toLowerCase().replace(/\/+$/,""),o=r?ln(r).toLowerCase().replace(/\/+$/,""):null;if(o&&n.indexOf(o)!==0)return e;const a=(f,m,y)=>(y=f.indexOf(m,y))===-1?f.length:y;let l=a(s,"/",s.indexOf("//")+2),h=-1;for(;s.slice(0,l+1)===n.slice(0,l)+"/"&&(h=l+1,l!==s.length);)l=a(s,"/",l+1);if(h===-1||o&&h<o.length)return e;e=i.slice(h);const p=n.slice(h-1).replaceAll(/[^/]+/g,"").length;if(p>0)for(let f=0;f<p;f++)e=`../${e}`;else e=`./${e}`;return e}function ln(e){return e=pN(e=dN(e=hN(e=Tr(e=e.trim()))))}function Af(...e){const t=e.filter(el);if(!(t!=null&&t.length))return;const r=[];if(or(t[0])){const s=t[0],n=s.indexOf("//");n!==-1&&(r.push(s.slice(0,n+1)),aN(t[0])&&(r[0]+="/"),t[0]=s.slice(n+2))}else t[0][0]==="/"&&r.push("");const i=t.reduce((s,n)=>n?s.concat(n.split("/")):s,[]);for(let s=0;s<i.length;s++){const n=i[s];n===".."&&r.length>0&&r[r.length-1]!==".."?r.pop():(!n&&s===i.length-1||n&&(n!=="."||r.length===0))&&r.push(n)}return r.join("/")}function nr(e,t=!1){if(e==null||v_(e)||Uo(e))return null;let r=e.indexOf("://");if(r===-1&&Mi(e))r=2;else{if(r===-1)return null;r+=3}const i=e.indexOf("/",r);return i!==-1&&(e=e.slice(0,i)),t&&(e=Ep(e,!0)),e}function or(e){return Mi(e)||w_(e)}function v_(e){return e!=null&&e.slice(0,5)==="blob:"}function Uo(e){return e!=null&&e.slice(0,5)==="data:"}function iN(e){const t=sl(e);return t!=null&&t.isBase64?TE(t.data):null}function aX(e){return Vk(e).replaceAll("+","-").replaceAll("/","_").replace(/=+$/,"")}const sN=/^data:(.*?)(;base64)?,(.*)$/;function sl(e){const t=e.match(sN);if(!t)return null;const[,r,i,s]=t;return{mediaType:r,isBase64:!!i,data:s}}function AE(e){return e.isBase64?`data:${e.mediaType};base64,${e.data}`:`data:${e.mediaType},${e.data}`}async function lX(e){return(await fetch(e)).blob()}function uX(e){const t=iN(e);if(!t)return null;const r=sl(e);return new Blob([t],{type:r.mediaType})}function Mi(e){return e!=null&&e[0]==="/"&&e[1]==="/"}function w_(e){return e!=null&&$E.test(e)}function nN(e){return e!=null&&Hk.test(e)||vt.scheme==="https"&&Mi(e)}function oN(e){return e!=null&&EE.test(e)||vt.scheme==="http"&&Mi(e)}function aN(e){return e!=null&&qk.test(e)}function b_(e){return Mi(e)?`https:${e}`:e.replace(EE,"https:")}function lN(){return vt.scheme==="http"}function ng(){return vt.scheme==="https"}function Ep(e,t=!1){return Mi(e)?e.slice(2):(e=e.replace($E,""),t&&e.length>1&&e[0]==="/"&&e[1]==="/"&&(e=e.slice(2)),e)}function uN(e){const t=e.indexOf("//"),r=e.indexOf("/",t+2);return r===-1?e:e.slice(0,r)}function cX(e){let t=0;if(or(e)){const i=e.indexOf("//");i!==-1&&(t=i+2)}const r=e.lastIndexOf("/");return r<t?e:e.slice(0,r+1)}function hX(e,t){if(!e)return"";const r=kt(e).path.replace(/\/+$/,""),i=r.slice(r.lastIndexOf("/")+1);if(!(t!=null&&t.length))return i;const s=new RegExp(`\\.(${t.join("|")})$`,"i");return i.replace(s,"")}function cN(e){return e.endsWith("/")?e:`${e}/`}function PE(e){return e.replace(/\/+$/,"")}function hN(e){if(/^https?:\/\//i.test(e)){const t=y_(e);e=(e=t.path.replaceAll(/\/{2,}/g,"/")).replace("/","//"),t.query&&(e+=`?${t.query}`)}return e}function dN(e){return e.replace(/^(https?:\/\/)(arcgis\.com)/i,"$1www.$2")}function pN(e){const t=Sl.httpsDomains;if(!oN(e))return e;const r=e.indexOf("/",7);let i;if(i=r===-1?e:e.slice(0,r),i=i.toLowerCase().slice(7),Wk.test(i)){if(!i.endsWith(":80"))return e;i=i.slice(0,-3),e=e.replace(":80","")}return lN()&&i===vt.authority&&!Zk.test(e)||(ng()&&i===vt.authority||t&&t.some(s=>i===s||i.endsWith(`.${s}`))||ng()&&!xf(e))&&(e=b_(e)),e}function og(e,t,r){if(!(t&&r&&e&&or(e)))return e;const i=e.indexOf("//"),s=e.indexOf("/",i+2),n=e.indexOf(":",i+2),o=Math.min(s<0?e.length:s,n<0?e.length:n);return e.slice(i+2,o).toLowerCase()!==t.toLowerCase()?e:`${e.slice(0,i+2)}${r}${e.slice(o)}`}function ag(e){return typeof e=="string"?new ja(Tr(e)):(e.scheme||(e.scheme=vt.scheme),e)}function dX(e){return mN.test(e)}function OE(e,t){const r=kt(e),i=Object.keys(r.query||{});return i.length>0&&t&&t.warn("removeQueryParameters()",`Url query parameters are not supported, the following parameters have been removed: ${i.join(", ")}.`),r.path}function fN(e,t,r){const i=kt(e),s=i.query||{};return s[t]=String(r),`${i.path}?${Sc(s)}`}function xm(e,t){if(!t)return e;const r=kt(e),i=r.query||{};for(const[n,o]of Object.entries(t))o!=null&&(i[n]=o);const s=Sc(i);return s?`${r.path}?${s}`:r.path}function pX(e){if(e==null)return null;const t=e.match(CE);return t?t[2]:null}function Zw(e){if(e==null)return null;const t=e.match(CE);return t?{path:t[1],extension:t[2]}:{path:e,extension:null}}async function fX(e){return typeof e=="string"?sl(e)??{data:e}:new Promise((t,r)=>{const i=new FileReader;i.readAsDataURL(e),i.onload=()=>t(sl(i.result)),i.onerror=s=>r(s)})}const CE=/([^.]*)\.([^/]*)$/,mN=/(^data:image\/svg|\.svg$)/i,IE="20250318",RE="878eb8750809e56d2a9ea9f1475c9e4e58226dad";Symbol.dispose??(Symbol.dispose=Symbol("Symbol.dispose")),Symbol.asyncDispose??(Symbol.asyncDispose=Symbol("Symbol.asyncDispose"));const yN="4.32";let _e,S_=yN;S_="4.32.9";function mX(e){_e=e}function yX(e){const t=_e==null?void 0:_e.findCredential(e);return t!=null&&t.token?fN(e,"token",t.token):e}A("host-webworker")||globalThis.$arcgis||Object.defineProperty(globalThis,"$arcgis",{configurable:!1,enumerable:!0,writable:!1,value:{}}),A("host-webworker");function Xc(e,t){var i;const r=(i=t==null?void 0:t.url)==null?void 0:i.path;if(e&&r&&(e=Tr(e,r,{preserveProtocolRelative:!0}),t.portalItem&&t.readResourcePaths)){const s=__(e,t.portalItem.itemUrl);s!=null&&gN.test(s)&&t.readResourcePaths.push(t.portalItem.resourceFromPath(s).path)}return(e=lg(e,t==null?void 0:t.portal))&&Of.test(e)?$_(e):e}function Pf(e,t,r=Tc.YES){var s,n;if((e=e&&Of.test(e)?NE(e):e)==null)return e;!or(e)&&(t!=null&&t.blockedRelativeUrls)&&t.blockedRelativeUrls.push(e);let i=Tr(e);if(t){const o=((s=t.verifyItemRelativeUrls)==null?void 0:s.rootPath)||((n=t.url)==null?void 0:n.path);if(o){const a=lg(o,t.portal),l=lg(i,t.portal);i=__(l,a,a),i!=null&&i!==l&&i!==e&&t.verifyItemRelativeUrls&&t.verifyItemRelativeUrls.writtenUrls.push(i)}}return i=kE(i,t==null?void 0:t.portal),or(i)&&(i=ln(i)),t!=null&&t.resources&&(t!=null&&t.portalItem)&&!or(i)&&!Uo(i)&&r===Tc.YES&&t.resources.toKeep.push({resource:t.portalItem.resourceFromPath(i),compress:!1}),i}function T_(e,t,r){return Xc(e,r)}function nl(e,t,r,i){const s=Pf(e,i);s!==void 0&&(t[r]=s)}const Of=/\/items\/([^/]+)\/resources\/(.*)/,gN=/^\.\/resources\//;function _N(e){const t=(e==null?void 0:e.match(Of))??null;return(t==null?void 0:t[1])??null}function vN(e){const t=(e==null?void 0:e.match(Of))??null;if(t==null)return null;const r=t[2],i=r.lastIndexOf("/");if(i===-1){const{path:o,extension:a}=Zw(r);return{prefix:null,filename:o,extension:a}}const{path:s,extension:n}=Zw(r.slice(i+1));return{prefix:r.slice(0,i),filename:s,extension:n}}function kE(e,t){return t&&!t.isPortal&&t.urlKey&&t.customBaseUrl?og(e,`${t.urlKey}.${t.customBaseUrl}`,t.portalHostname):e}function lg(e,t){if(!t||t.isPortal||!t.urlKey||!t.customBaseUrl)return e;const r=`${t.urlKey}.${t.customBaseUrl}`,i=f_();return il(i,`${i.scheme}://${r}`)?og(e,t.portalHostname,r):og(e,r,t.portalHostname)}function $_(e){if(!e)return e||null;let t=e;return t&&_e&&!_e.findCredential(t)&&(t=SE(t),t=t.replace(/^https?:\/\/www\.arcgis\.com/,"https://cdn.arcgis.com"),t=t.replace(/^https?:\/\/devext\.arcgis\.com/,"https://cdndev.arcgis.com"),t=t.replace(/^https?:\/\/qaext\.arcgis\.com/,"https://cdnqa.arcgis.com")),t}function NE(e){if(!e)return e||null;let t=e;return t=t.replace(/^https?:\/\/cdn\.arcgis\.com/,"https://www.arcgis.com"),t=t.replace(/^https?:\/\/cdndev\.arcgis\.com/,"https://devext.arcgis.com"),t=t.replace(/^https?:\/\/cdnqa\.arcgis\.com/,"https://qaext.arcgis.com"),t&&_e&&!_e.findCredential(t)&&(t=SE(t)),t}var Tc;(function(e){e[e.YES=0]="YES",e[e.NO=1]="NO"})(Tc||(Tc={}));const gX=Object.freeze(Object.defineProperty({__proto__:null,get MarkKeep(){return Tc},ensureMainOnlineDomain:kE,fromCDNUrl:NE,fromJSON:Xc,itemIdFromResourceUrl:_N,prefixAndFilenameFromResourceUrl:vN,read:T_,toCDNUrl:$_,toJSON:Pf,write:nl},Symbol.toStringTag,{value:"Module"})),LE={mapserver:"MapServer",imageserver:"ImageServer",featureserver:"FeatureServer",knowledgegraphserver:"KnowledgeGraphServer",sceneserver:"SceneServer",streamserver:"StreamServer",vectortileserver:"VectorTileServer","3dtilesserver":"3DTilesServer",videoserver:"VideoServer"},DE=Object.values(LE),FE=new RegExp(`^((?:https?:)?\\/\\/\\S+?\\/rest\\/services\\/(.+?)\\/(${DE.join("|")}))(?:\\/(?:layers\\/)?(\\d+))?`,"i"),wN=new RegExp(`^((?:https?:)?\\/\\/\\S+?\\/([^/\\n]+)\\/(${DE.join("|")}))(?:\\/(?:layers\\/)?(\\d+))?`,"i"),bN=/(.*?)\/(?:layers\/)?(\d+)\/?$/i;function _X(e){return FE.test(e)}function E_(e){if(e==null)return null;const t=kt(e),r=(t==null?void 0:t.path.match(FE))||(t==null?void 0:t.path.match(wN));if(!r)return null;const[,i,s,n,o]=r,a=s.indexOf("/");return{title:UE(a!==-1?s.slice(a+1):s),serverType:LE[n.toLowerCase()],sublayer:o!=null&&o!==""?parseInt(o,10):null,url:{path:i}}}function SN(e){const t=kt(e).path.match(bN);return t?{serviceUrl:t[1],sublayerId:Number(t[2])}:null}function UE(e){return(e=e.replaceAll(/\s*[/_]+\s*/g," "))[0].toUpperCase()+e.slice(1)}function vX(e,t){const r=[];if(e){const i=E_(e);i!=null&&i.title&&r.push(i.title)}if(t){const i=UE(t);r.push(i)}if(r.length===2){if(r[0].toLowerCase().includes(r[1].toLowerCase()))return r[0];if(r[1].toLowerCase().includes(r[0].toLowerCase()))return r[1]}return r.join(" - ")}function Jw(e){let t=nr(e,!0);return!!t&&(t=t.toLowerCase(),t.endsWith(".arcgis.com")&&(t.startsWith("services")||t.startsWith("tiles")||t.startsWith("features")))}function wX(e,t){return e&&PE(OE(e,t))}function bX(e){let{url:t}=e;if(!t)return{url:t};t=OE(t,e.logger);const r=kt(t),i=E_(r.path);let s;if(i!=null)i.sublayer!=null&&e.layer.layerId==null&&(s=i.sublayer),t=i.url.path;else if(e.nonStandardUrlAllowed){const n=SN(r.path);n!=null&&(t=n.serviceUrl,s=n.sublayerId)}return{url:PE(t),layerId:s}}function SX(e,t,r,i,s){nl(t,i,"url",s),i.url&&e.layerId!=null&&(i.url=Af(i.url,r,e.layerId.toString()))}function TX(e){if(!e)return!1;const t=e.toLowerCase(),r=t.includes("/services/"),i=t.includes("/mapserver/wmsserver"),s=t.includes("/imageserver/wmsserver"),n=t.includes("/wmsserver");return r&&(i||s||n)}const TN=new Set(["elevation3d.arcgis.com","js.arcgis.com","jsdev.arcgis.com","jsqa.arcgis.com","static.arcgis.com"]);function $N(e){const t=nr(e,!0);return!!t&&t.endsWith(".arcgis.com")&&!TN.has(t)&&!e.endsWith("/sharing/rest/generateToken")}function jE(e,t){return!(!me.apiKey||!$N(e))}function EN(e,t,r=!1,i){return new Promise((s,n)=>{if(lr(i))return void n(Yw());let o=()=>{h(),n(new Error(`Unable to load ${t}`))},a=()=>{const p=e;h(),s(p)},l=()=>{if(!e)return;const p=e;h(),p.src="",n(Yw())};const h=()=>{A("esri-image-decode")||(e.removeEventListener("error",o),e.removeEventListener("load",a)),o=null,a=null,e=null,i!=null&&i.removeEventListener("abort",l),l=null,r&&URL.revokeObjectURL(t)};i!=null&&i.addEventListener("abort",l),A("esri-image-decode")?e.decode().then(a,o):(e.addEventListener("error",o),e.addEventListener("load",a))})}function Yw(){try{return new DOMException("Aborted","AbortError")}catch{const e=new Error;return e.name="AbortError",e}}const GE="Timeout exceeded";function MN(){return new Error(GE)}function $X(e){return typeof e=="object"&&!!e&&"message"in e&&e.message===GE}function xN(e){me.request.crossOriginNoCorsDomains||(me.request.crossOriginNoCorsDomains={});const t=me.request.crossOriginNoCorsDomains;for(let r of e)r=r.toLowerCase(),/^https?:\/\//.test(r)?t[nr(r)??""]=0:(t[nr("http://"+r)??""]=0,t[nr("https://"+r)??""]=0)}function AN(e){const t=me.request.crossOriginNoCorsDomains;if(t){let r=nr(e);if(r)return r=r.toLowerCase(),!il(r,f_())&&t[r]<Date.now()-36e5}return!1}async function PN(e){var s;const t=kt(e);e=t.path,((s=t.query)==null?void 0:s.f)==="json"&&(e+="?f=json");try{await fetch(e,{mode:"no-cors",credentials:"include"})}catch{}const r=me.request.crossOriginNoCorsDomains,i=nr(e);r&&i&&(r[i.toLowerCase()]=Date.now())}async function qe(e,t){var y;e instanceof URL&&(e=e.toString()),(t==null?void 0:t.query)instanceof URLSearchParams&&(t.query=m_(t.query.toString().replaceAll("+"," ")));const r=Uo(e),i=v_(e);i||r||(e=ln(e));const s={url:e,requestOptions:{...t}},n=_=>({data:_,getAllHeaders:ol,getHeader:ol,httpStatus:200,requestOptions:s.requestOptions,url:s.url}),o=sg(e,Sr.internalInterceptors);if(o){const _=await Xw(o,s);if(_!=null)return n(_)}let a=sg(e);if(a){const _=await Xw(a,s);if(_!=null)return n(_);a.after||a.error||(a=null)}if(e=s.url,(t=s.requestOptions).responseType==="image"&&(A("host-webworker")||A("host-node")))throw Qr("request:invalid-parameters",new Error("responseType 'image' is not supported in Web Workers or Node environment"),s);if(t.method==="head"){if(t.body)throw Qr("request:invalid-parameters",new Error("body parameter cannot be set when method is 'head'"),s);if(r||i)throw Qr("request:invalid-parameters",new Error("data and blob URLs are not supported for method 'head'"),s)}if(await kN(),Mp)return Mp.execute(e,t);const l=new AbortController,h=xr(t,()=>l.abort()),p={controller:l,credential:void 0,credentialToken:void 0,fetchOptions:void 0,hasToken:!1,interceptor:a,params:s,redoRequest:!1,useIdentity:Sr.useIdentity,useProxy:!1,useSSL:!1,withCredentials:!1},f=t.useRequestQueue?UN(p):cg(p),m=await f.finally(()=>h==null?void 0:h.remove());return(y=a==null?void 0:a.after)==null||y.call(a,m),m}let Mp;const Sr=me.request,zE="FormData"in globalThis,ON=new Set([499,498,403,401]),CN=new Set(["COM_0056","COM_0057","SB_0008"]),IN=[/\/arcgis\/tokens/i,/\/sharing(\/rest)?\/generatetoken/i,/\/rest\/info/i],ol=()=>null,xp=Symbol();function RN(e){const t=nr(e);t&&!qe._corsServers.includes(t)&&qe._corsServers.push(t)}function Kw(e){const t=nr(e);return!t||t.endsWith(".arcgis.com")||qe._corsServers.includes(t)||g_(t)}function Qr(e,t,r,i){let s="Error";const n={url:r.url,requestOptions:r.requestOptions,getAllHeaders:ol,getHeader:ol,ssl:!1};if(t instanceof I)return t.details?(t.details=C(t.details),t.details.url=r.url,t.details.requestOptions=r.requestOptions):t.details=n,t;if(t){const o=i&&(()=>Array.from(i.headers)),a=i&&(p=>i.headers.get(p)),l=i==null?void 0:i.status,h=t.message;h&&(s=h),o&&a&&(n.getAllHeaders=o,n.getHeader=a),n.httpStatus=(t.httpCode!=null?t.httpCode:t.code)||l||0,n.subCode=t.subcode,n.messageCode=t.messageCode,typeof t.details=="string"?n.messages=[t.details]:n.messages=t.details,n.raw=xp in t?t[xp]:t}return Ht(t)?$e():new I(e,s,n)}async function kN(){A("host-webworker")&&!Mp&&(Mp=await N(()=>import("./request-CSKEe299.js"),[]))}async function ug(){_e||await N(()=>import("./IdentityManager-DrHJBn86.js"),__vite__mapDeps([0,1]))}async function NN(e){var a;const t=e.params.url,r=e.params.requestOptions,i=e.controller.signal,s=r.body;let n=null,o=null;if(zE&&"HTMLFormElement"in globalThis&&(s instanceof FormData?n=s:s instanceof HTMLFormElement&&(n=new FormData(s))),typeof s=="string"&&(o=s),e.fetchOptions={cache:r.cacheBust?"no-cache":"default",credentials:"same-origin",headers:r.headers||{},method:r.method==="head"?"HEAD":"GET",mode:"cors",priority:Sr.priority,redirect:"follow",signal:i},(n||o)&&(e.fetchOptions.body=n||o),r.authMode==="anonymous"&&(e.useIdentity=!1),e.hasToken=!!(/token=/i.test(t)||(a=r.query)!=null&&a.token||n!=null&&n.get("token")),!e.hasToken&&jE(t)&&(r.query||(r.query={}),r.query.token=me.apiKey,e.hasToken=!0),e.useIdentity&&!e.hasToken&&!e.credentialToken&&!VE(t)&&!lr(i)){let l;r.authMode==="immediate"?(await ug(),l=await _e.getCredential(t,{signal:i}),e.credential=l):r.authMode==="no-prompt"?(await ug(),l=await _e.getCredential(t,{prompt:!1,signal:i}).catch(()=>{}),e.credential=l):_e&&(l=_e.findCredential(t)),l&&(e.credentialToken=l.token,e.useSSL=!!l.ssl)}}function VE(e){return IN.some(t=>t.test(e))}async function LN(e){let t=e.params.url;const r=e.params.requestOptions,i=e.fetchOptions??{},s=v_(t)||Uo(t),n=r.responseType||"json",o=s?0:r.timeout!=null?r.timeout:Sr.timeout;let a=!1;if(!s){e.useSSL&&(t=b_(t));let m={...r.query};e.credentialToken&&(m.token=e.credentialToken);let y=Sc(m);A("esri-url-encodes-apostrophe")&&(y=y.replaceAll("'","%27"));const _=t.length+1+y.length;let v;a=r.method==="delete"||r.method==="post"||r.method==="put"||!!r.body||_>Sr.maxUrlLength;const w=r.useProxy||!!xf(t);if(w){const b=ME(t);v=b.path,!a&&v.length+1+_>Sr.maxUrlLength&&(a=!0),b.query&&(m={...b.query,...m})}if(i.method==="HEAD"&&(a||w)){if(a)throw _>Sr.maxUrlLength?Qr("request:invalid-parameters",new Error("URL exceeds maximum length"),e.params):Qr("request:invalid-parameters",new Error("cannot use POST request when method is 'head'"),e.params);if(w)throw Qr("request:invalid-parameters",new Error("cannot use proxy when method is 'head'"),e.params)}if(a?(i.method=r.method==="delete"?"DELETE":r.method==="put"?"PUT":"POST",r.body?t=xm(t,m):(i.body=Sc(m),i.headers||(i.headers={}),i.headers["Content-Type"]="application/x-www-form-urlencoded")):t=xm(t,m),w&&(e.useProxy=!0,t=`${v}?${t}`),m.token&&zE&&i.body instanceof FormData&&!zk(t)&&i.body.set("token",m.token),r.hasOwnProperty("withCredentials"))e.withCredentials=r.withCredentials;else if(!il(t,f_())){if(g_(t))e.withCredentials=!0;else if(_e){const b=_e.findServerInfo(t);b!=null&&b.webTierAuth&&(e.withCredentials=!0)}}e.withCredentials&&(i.credentials="include",AN(t)&&await PN(a?xm(t,m):t))}let l,h,p=0,f=!1;o>0&&(p=setTimeout(()=>{f=!0,e.controller.abort()},o));try{if(r.responseType==="native-request-init")h=i,h.url=t,r.signal?h.signal=r.signal:delete h.signal;else if(r.responseType!=="image"||i.cache!=="default"||i.method!=="GET"||a||DN(r.headers)||!s&&!e.useProxy&&Sr.proxyUrl&&!Kw(t)){if(qe._beforeFetch&&await qe._beforeFetch(t,i),l=await fetch(t,i),qe._afterFetch&&await qe._afterFetch(l),e.useProxy||RN(t),r.responseType==="native")h=l;else if(i.method!=="HEAD")if(l.ok){switch(n){case"array-buffer":h=await l.arrayBuffer();break;case"blob":case"image":h=await l.blob();break;default:h=await l.text()}if(p&&(clearTimeout(p),p=0),n==="json"||n==="xml"||n==="document")if(h)switch(n){case"json":h=JSON.parse(h);break;case"xml":h=Qw(h,"application/xml");break;case"document":h=Qw(h,"text/html")}else h=null;if(h){if(n==="array-buffer"||n==="blob"){const m=l.headers.get("Content-Type");if(m&&/application\/json|text\/plain/i.test(m)&&h[n==="blob"?"size":"byteLength"]<=750)try{const y=await new Response(h).json();y.error&&(h=y)}catch{}}n==="image"&&h instanceof Blob&&(h=await eb(URL.createObjectURL(h),e,!0))}}else{h=await l.text();try{h=JSON.parse(h)}catch{}}}else h=await eb(t,e)}catch(m){if(m.name==="AbortError")throw f?MN():$e("Request canceled");if(!(!l&&m instanceof TypeError&&Sr.proxyUrl)||r.body||r.method==="delete"||r.method==="head"||r.method==="post"||r.method==="put"||e.useProxy||Kw(t))throw m;e.redoRequest=!0,eN({proxyUrl:Sr.proxyUrl,urlPrefix:nr(t)??""})}finally{p&&clearTimeout(p)}return[l,h]}async function Xw(e,t){if(e.responseData!=null)return e.responseData;if(e.headers&&(t.requestOptions.headers={...t.requestOptions.headers,...e.headers}),e.query&&(t.requestOptions.query={...t.requestOptions.query,...e.query}),e.before){let r,i;try{i=await e.before(t)}catch(s){r=Qr("request:interceptor",s,t)}if((i instanceof Error||i instanceof I)&&(r=Qr("request:interceptor",i,t)),r)throw e.error&&e.error(r),r;return i}}function DN(e){if(e){for(const t of Object.getOwnPropertyNames(e))if(e[t])return!0}return!1}function Qw(e,t){let r;try{r=new DOMParser().parseFromString(e,t)}catch{}if(!r||r.getElementsByTagName("parsererror").length)throw new SyntaxError("XML Parse error");return r}qe._corsServers=["https://server.arcgisonline.com","https://services.arcgisonline.com"],qe._beforeFetch=void 0,qe._afterFetch=void 0;const FN=new Map;async function UN(e){const t=GN(e.params.url);if(!t)return cg(e);const{QueueProcessor:r}=await N(()=>import("./QueueProcessor-DoOk1BYJ.js"),[]);return $f(FN,t.origin,()=>{const s=t.isHosted?A("request-queue-concurrency-hosted"):A("request-queue-concurrency-non-hosted");return new r({concurrency:s,process:n=>{if(lr(n.params.requestOptions))throw Qr("",$e("Request canceled"),n.params);return cg(n)}})}).push(e)}async function cg(e){var n,o;let t,r;await NN(e);try{do[t,r]=await LN(e);while(!await jN(e,t,r))}catch(a){const l=Qr("request:server",a,e.params,t);throw l.details.ssl=e.useSSL,(n=e.interceptor)!=null&&n.error&&e.interceptor.error(l),l}const i=e.params.url;if(r&&/\/sharing\/rest\/(accounts|portals)\/self/i.test(i)){if(!e.hasToken&&!e.credentialToken&&((o=r.user)!=null&&o.username)&&!g_(i)){const a=nr(i,!0);a&&Sr.trustedServers.push(a)}Array.isArray(r.authorizedCrossOriginNoCorsDomains)&&xN(r.authorizedCrossOriginNoCorsDomains)}const s=e.credential;if(s&&_e){const a=_e.findServerInfo(s.server);let l=a==null?void 0:a.owningSystemUrl;if(l){l=l.replace(/\/?$/,"/sharing");const h=_e.findCredential(l,s.userId);h&&_e._getIdenticalSvcIdx(l,h)===-1&&h.resources.unshift(l)}}return{data:r,getAllHeaders:t?()=>Array.from(t.headers):ol,getHeader:t?a=>t.headers.get(a):ol,httpStatus:(t==null?void 0:t.status)??200,requestOptions:e.params.requestOptions,ssl:e.useSSL,url:e.params.url}}async function jN(e,t,r){var h;if(e.redoRequest)return e.redoRequest=!1,!1;const i=e.params.requestOptions;if(!t||i.responseType==="native"||i.responseType==="native-request-init")return!0;let s,n;if(r&&(r.error&&typeof r.error=="object"?s=r.error:r.status==="error"&&Array.isArray(r.messages)&&(s={...r},s[xp]=r,s.details=r.messages)),!s&&!t.ok)throw s=new Error(`Unable to load ${t.url} status: ${t.status}`),s[xp]=r,s;let o,a=null;s&&(n=Number(s.code),a=s.hasOwnProperty("subcode")?Number(s.subcode):null,o=s.messageCode,o=o==null?void 0:o.toUpperCase());const l=i.authMode;if(n===403&&(a===4||(h=s.message)!=null&&h.toLowerCase().includes("ssl")&&!s.message.toLowerCase().includes("permission"))){if(!e.useSSL)return e.useSSL=!0,!1}else if(!e.hasToken&&e.useIdentity&&(l!=="no-prompt"||n===498)&&n!==void 0&&ON.has(n)&&!VE(e.params.url)&&(n!==403||(!o||!CN.has(o))&&(a==null||a===2&&e.credentialToken))){await ug();try{const p=await _e.getCredential(e.params.url,{error:Qr("request:server",s,e.params),prompt:l!=="no-prompt",signal:e.controller.signal,token:e.credentialToken});return e.credential=p,e.credentialToken=p.token,e.useSSL=e.useSSL||p.ssl,!1}catch(p){if(l==="no-prompt")return e.credential=void 0,e.credentialToken=void 0,!1;s=p}}if(s)throw s;return!0}function eb(e,t,r=!1){const i=t.controller.signal,s=new Image;return t.withCredentials?s.crossOrigin="use-credentials":s.crossOrigin="anonymous",s.alt="",s.fetchPriority=Sr.priority,s.src=e,EN(s,e,r,i)}function GN(e){let t,r;return typeof e=="string"?(t=nr(e,!0),r=Jw(e)):(t=e.origin,r=Jw(e.toString())),t==null?null:{origin:t,isHosted:r}}let xi=class BE{constructor(){this._emitter=new BE.EventEmitter(this)}emit(t,r){return this._emitter.emit(t,r)}on(t,r){return this._emitter.on(t,r)}once(t,r){return this._emitter.once(t,r)}hasEventListener(t){return this._emitter.hasEventListener(t)}};(function(e){class t{constructor(s=null){this._target=s,this._listenersMap=null}clear(){var s;(s=this._listenersMap)==null||s.clear(),this._listenersMap=null}destroy(){this.clear()}emit(s,n){var h;let o=(h=this._listenersMap)==null?void 0:h.get(s);if(!o)return!1;const a=this._target||this;let l=!1;for(const p of o.slice()){const f="deref"in p?p.deref():p;f?f==null||f.call(a,n):l=!0}return l&&(o=o.filter(p=>!("deref"in p)||p.deref()!=null),this._listenersMap.set(s,o)),o.length>0}on(s,n){if(Array.isArray(s)){const a=s.map(l=>this.on(l,n));return qc(a)}if(s.includes(","))throw new TypeError("Evented.on() with a comma delimited string of event types is not supported");this._listenersMap??(this._listenersMap=new Map);const o=this._listenersMap.get(s)||[];return o.push(n),this._listenersMap.set(s,o),ue(()=>{var h;const a=(h=this._listenersMap)==null?void 0:h.get(s),l=(a==null?void 0:a.indexOf(n))??-1;l>=0&&a.splice(l,1)})}once(s,n){const o=this.on(s,a=>{o.remove();const l="deref"in n?n.deref():n;l==null||l.call(null,a)});return o}hasEventListener(s){var o;const n=(o=this._listenersMap)==null?void 0:o.get(s);return n!=null&&n.length>0}}e.EventEmitter=t,e.EventedMixin=i=>{let s=class extends i{constructor(){super(...arguments),this._emitter=new t}destroy(){this._emitter.clear()}emit(n,o){return this._emitter.emit(n,o)}on(n,o){return this._emitter.on(n,o)}once(n,o){return this._emitter.once(n,o)}hasEventListener(n){return this._emitter.hasEventListener(n)}};return s=c([S("esri.core.Evented")],s),s};let r=class extends q{constructor(){super(...arguments),this._emitter=new xi.EventEmitter(this)}destroy(){this._emitter.clear()}emit(i,s){return this._emitter.emit(i,s)}on(i,s){return this._emitter.on(i,s)}once(i,s){return this._emitter.once(i,s)}hasEventListener(i){return this._emitter.hasEventListener(i)}};r=c([S("esri.core.Evented.EventedAccessor")],r),e.EventedAccessor=r})(xi);var he;(function(e){e[e.ADD=1]="ADD",e[e.REMOVE=2]="REMOVE",e[e.MOVE=4]="MOVE"})(he||(he={}));function HE(e){return(t,r)=>{t[r]=e}}let Qc=class extends L${notify(){const t=this._observers;if(t&&t.length>0){const r=t.slice();for(const i of r)i.onInvalidated(),i.onCommitted()}}};var os;let zN=class{constructor(){this.target=null,this.cancellable=!1,this.defaultPrevented=!1,this.item=void 0,this.type=void 0}preventDefault(){this.cancellable&&(this.defaultPrevented=!0)}reset(t){this.defaultPrevented=!1,this.item=t}},VN=class{constructor(t,r,i,s,n){this.target=t,this.added=r,this.removed=i,this.start=s,this.deleteCount=n}};const hr=new Fo(zN,void 0,e=>{e.item=null,e.target=null,e.defaultPrevented=!1,e.cancellable=!1});function tb(e){e&&typeof e=="object"&&"destroy"in e&&typeof e.destroy=="function"&&e.destroy()}function Am(e){return e?e instanceof is?e.toArray():e.length?Array.prototype.slice.apply(e):[]:[]}function Pm(e){if(e!=null&&e.length)return e[0]}function BN(e,t,r,i){const s=Math.min(e.length-r,t.length-i);let n=0;for(;n<s&&e[r+n]===t[i+n];)n++;return n}function qE(e,t,r,i){t&&t.forEach((s,n,o)=>{e.push(s),qE(e,r.call(i,s,n,o),r,i)})}const vs=new Set,ws=new Set,bs=new Set,Om=new Map;let HN=0,is=os=class extends xi.EventedAccessor{static isCollection(e){return e!=null&&e instanceof os}constructor(e){super(e),this._chgListeners=[],this._notifications=null,this._updating=!1,this._timer=null,this._observable=new Qc,this.length=0,this._items=[],Object.defineProperty(this,"uid",{value:HN++})}normalizeCtorArgs(e){return e?Array.isArray(e)||e instanceof os?{items:e}:e:{}}destroy(){this._removeAllRaw(),this._timer&&this._timer.remove(),this._emitter.destroy(),this._notifications=null}*[Symbol.iterator](){yield*this.items}get items(){return Z(this._observable),this._items}set items(e){this._emitBeforeChanges(he.ADD)||(this._splice(0,this.length,Am(e)),this._emitAfterChanges(he.ADD))}hasEventListener(e){return!this.destroyed&&(e==="change"?this._chgListeners.length>0:this._emitter.hasEventListener(e))}on(e,t){if(this.destroyed)return ue();if(e==="change"){const r=this._chgListeners,i={removed:!1,callback:t};return r.push(i),this._notifications&&this._notifications.push({listeners:r.slice(),items:this._items.slice(),changes:[]}),ue(()=>{i.removed=!0,r.splice(r.indexOf(i),1)})}return this._emitter.on(e,t)}once(e,t){const r="deref"in t?()=>t.deref():()=>t,i=this.on(e,s=>{var n;(n=r())==null||n.call(null,s),i.remove()});return i}add(e,t){if(Z(this._observable),this._emitBeforeChanges(he.ADD))return this;const r=this.getNextIndex(t??null);return this._splice(r,0,[e]),this._emitAfterChanges(he.ADD),this}addMany(e,t=this._items.length){if(Z(this._observable),!(e!=null&&e.length))return this;if(this._emitBeforeChanges(he.ADD))return this;const r=this.getNextIndex(t);return this._splice(r,0,Am(e)),this._emitAfterChanges(he.ADD),this}at(e){if(Z(this._observable),(e=Math.trunc(e)||0)<0&&(e+=this.length),!(e<0||e>=this.length))return this._items[e]}removeAll(){if(Z(this._observable),!this.length||this._emitBeforeChanges(he.REMOVE))return[];const e=this._removeAllRaw();return this._emitAfterChanges(he.REMOVE),e}_removeAllRaw(){return this.length===0?[]:this._splice(0,this.length)||[]}clone(){return Z(this._observable),this._createNewInstance({items:this._items.map(C)})}concat(...e){Z(this._observable);const t=e.map(Am);return this._createNewInstance({items:this._items.concat(...t)})}drain(e,t){if(Z(this._observable),!this.length||this._emitBeforeChanges(he.REMOVE))return;const r=this._splice(0,this.length),i=r.length;for(let s=0;s<i;s++)e.call(t,r[s],s,r);this._emitAfterChanges(he.REMOVE)}destroyAll(){this.drain(tb)}destroyMany(e){const t=this.removeMany(e);return t.forEach(tb),t}every(e,t){return Z(this._observable),this._items.every(e,t)}filter(e,t){Z(this._observable);const r=arguments.length===2?this._items.filter(e,t):this._items.filter(e);return this._createNewInstance({items:r})}find(e,t){return Z(this._observable),this._items.find(e,t)}findIndex(e,t){return Z(this._observable),this._items.findIndex(e,t)}flatten(e,t){Z(this._observable);const r=[];return qE(r,this,e,t),new os(r)}forEach(e,t){return Z(this._observable),this._items.forEach(e,t)}getItemAt(e){return Z(this._observable),this._items[e]}getNextIndex(e){Z(this._observable);const t=this.length;return(e=e??t)<0?e=0:e>t&&(e=t),e}includes(e,t=0){return Z(this._observable),this._items.includes(e,t)}indexOf(e,t=0){return Z(this._observable),this._items.indexOf(e,t)}join(e=","){return Z(this._observable),this._items.join(e)}lastIndexOf(e,t=this.length-1){return Z(this._observable),this._items.lastIndexOf(e,t)}map(e,t){Z(this._observable);const r=this._items.map(e,t);return new os({items:r})}reorder(e,t=this.length-1){Z(this._observable);const r=this.indexOf(e);if(r!==-1){if(t<0?t=0:t>=this.length&&(t=this.length-1),r!==t){if(this._emitBeforeChanges(he.MOVE))return e;this._splice(r,1),this._splice(t,0,[e]),this._emitAfterChanges(he.MOVE)}return e}}pop(){if(Z(this._observable),!this.length||this._emitBeforeChanges(he.REMOVE))return;const e=Pm(this._splice(this.length-1,1));return this._emitAfterChanges(he.REMOVE),e}push(...e){return Z(this._observable),this._emitBeforeChanges(he.ADD)||(this._splice(this.length,0,e),this._emitAfterChanges(he.ADD)),this.length}reduce(e,t){Z(this._observable);const r=this._items;return arguments.length===2?r.reduce(e,t):r.reduce(e)}reduceRight(e,t){Z(this._observable);const r=this._items;return arguments.length===2?r.reduceRight(e,t):r.reduceRight(e)}remove(e){return Z(this._observable),this.removeAt(this.indexOf(e))}removeAt(e){if(Z(this._observable),e<0||e>=this.length||this._emitBeforeChanges(he.REMOVE))return;const t=Pm(this._splice(e,1));return this._emitAfterChanges(he.REMOVE),t}removeMany(e){if(Z(this._observable),!(e!=null&&e.length)||this._emitBeforeChanges(he.REMOVE))return[];const t=e instanceof os?e.toArray():e,r=this._items,i=[],s=t.length;for(let n=0;n<s;n++){const o=t[n],a=r.indexOf(o);if(a>-1){const l=1+BN(t,r,n+1,a+1),h=this._splice(a,l);h&&h.length>0&&i.push.apply(i,h),n+=l-1}}return this._emitAfterChanges(he.REMOVE),i}reverse(){if(Z(this._observable),this._emitBeforeChanges(he.MOVE))return this;const e=this._splice(0,this.length);return e&&(e.reverse(),this._splice(0,0,e)),this._emitAfterChanges(he.MOVE),this}shift(){if(Z(this._observable),!this.length||this._emitBeforeChanges(he.REMOVE))return;const e=Pm(this._splice(0,1));return this._emitAfterChanges(he.REMOVE),e}slice(e=0,t=this.length){return Z(this._observable),this._createNewInstance({items:this._items.slice(e,t)})}some(e,t){return Z(this._observable),this._items.some(e,t)}sort(e){if(Z(this._observable),!this.length||this._emitBeforeChanges(he.MOVE)||!this._requiresSort(e))return this;const t=this._splice(0,this.length);return arguments.length?t.sort(e):t.sort(),this._splice(0,0,t),this._emitAfterChanges(he.MOVE),this}_requiresSort(e=(t,r)=>t===r?0:t<r?-1:1){const t=this.length-1;for(let r=0;r<t;r++)if(e(this.items[r],this.items[r+1])>0)return!0;return!1}splice(e,t,...r){Z(this._observable);const i=(t?he.REMOVE:0)|(r.length?he.ADD:0);if(this._emitBeforeChanges(i))return[];const s=this._splice(e,t,r)||[];return this._emitAfterChanges(i),s}toArray(){return Z(this._observable),this._items.slice()}toJSON(){return Z(this._observable),this.toArray()}toLocaleString(){return Z(this._observable),this._items.toLocaleString()}toString(){return Z(this._observable),this._items.toString()}unshift(...e){return Z(this._observable),!e.length||this._emitBeforeChanges(he.ADD)||(this._splice(0,0,e),this._emitAfterChanges(he.ADD)),this.length}_createNewInstance(e){return new this.constructor(e)}_splice(e,t,r){const i=this._items,s=this.itemType;let n,o;if(!this._notifications&&this.hasEventListener("change")&&(this._notifications=[{listeners:this._chgListeners.slice(),items:this._items.slice(),changes:[]}],this._timer&&this._timer.remove(),this._updating=!0,this._timer=Kc(()=>this._dispatchChange())),e<0&&(e+=this.length),t){if(o=i.splice(e,t),this.hasEventListener("before-remove")){const a=hr.acquire();a.target=this,a.cancellable=!0;for(let l=0,h=o.length;l<h;l++)n=o[l],a.reset(n),this.emit("before-remove",a),a.defaultPrevented&&(o.splice(l,1),i.splice(e,0,n),e+=1,l-=1,h-=1);hr.release(a)}if(this.length=this._items.length,this.hasEventListener("after-remove")){const a=hr.acquire();a.target=this,a.cancellable=!1;const l=o.length;for(let h=0;h<l;h++)a.reset(o[h]),this.emit("after-remove",a);hr.release(a)}}if(r!=null&&r.length){if(s){const p=[];for(const f of r){const m=s.ensureType(f);m==null&&f!=null||p.push(m)}r=p}const a=this.hasEventListener("before-add"),l=this.hasEventListener("after-add"),h=e===this.length;if(a||l){const p=hr.acquire();p.target=this,p.cancellable=!0;const f=hr.acquire();f.target=this,f.cancellable=!1;for(const m of r)a?(p.reset(m),this.emit("before-add",p),p.defaultPrevented||(h?i.push(m):i.splice(e++,0,m),this._set("length",i.length),l&&(f.reset(m),this.emit("after-add",f)))):(h?i.push(m):i.splice(e++,0,m),this._set("length",i.length),f.reset(m),this.emit("after-add",f));hr.release(f),hr.release(p)}else{if(h)for(const p of r)i.push(p);else i.splice(e,0,...r);this._set("length",i.length)}}if((r!=null&&r.length||o!=null&&o.length)&&this._notifyChangeEvent(r,o),this.hasEventListener("after-splice")){const a=new VN(this,r,o,e,t);this.emit("after-splice",a)}return o}_emitBeforeChanges(e){let t=!1;if(this.hasEventListener("before-changes")){const r=hr.acquire();r.target=this,r.cancellable=!0,r.type=e,this.emit("before-changes",r),t=r.defaultPrevented,hr.release(r)}return t}_emitAfterChanges(e){if(this.hasEventListener("after-changes")){const t=hr.acquire();t.target=this,t.cancellable=!1,t.type=e,this.emit("after-changes",t),hr.release(t)}this._observable.notify()}_notifyChangeEvent(e,t){this.hasEventListener("change")&&this._notifications&&this._notifications[this._notifications.length-1].changes.push({added:e,removed:t})}get updating(){return this._updating}_dispatchChange(){if(this._timer&&(this._timer.remove(),this._timer=null),this._updating=!1,!this._notifications)return;const e=this._notifications;this._notifications=null;for(const t of e){const r=t.changes;vs.clear(),ws.clear(),bs.clear();for(const{added:l,removed:h}of r){if(l)if(bs.size===0&&ws.size===0)for(const p of l)vs.add(p);else for(const p of l)ws.has(p)?(bs.add(p),ws.delete(p)):bs.has(p)||vs.add(p);if(h)if(bs.size===0&&vs.size===0)for(const p of h)ws.add(p);else for(const p of h)vs.has(p)?vs.delete(p):(bs.delete(p),ws.add(p))}const i=Ot.acquire();vs.forEach(l=>{i.push(l)});const s=Ot.acquire();ws.forEach(l=>{s.push(l)});const n=this._items,o=t.items,a=Ot.acquire();if(bs.forEach(l=>{o.indexOf(l)!==n.indexOf(l)&&a.push(l)}),t.listeners&&(i.length||s.length||a.length)){const l={target:this,added:i,removed:s,moved:a},h=t.listeners.length;for(let p=0;p<h;p++){const f=t.listeners[p];f.removed||f.callback.call(this,l)}}Ot.release(i),Ot.release(s),Ot.release(a)}vs.clear(),ws.clear(),bs.clear()}};is.ofType=e=>{if(!e)return os;if(Om.has(e))return Om.get(e);let t=null;if(typeof e=="function")t=e.prototype.declaredClass;else if(e.base)t=e.base.prototype.declaredClass;else for(const i in e.typeMap){const s=e.typeMap[i].prototype.declaredClass;t?t+=` | ${s}`:t=s}let r=class extends os{};return c([HE({Type:e,ensureType:typeof e=="function"?Rt(e):fn(e)})],r.prototype,"itemType",void 0),r=c([S(`esri.core.Collection<${t}>`)],r),Om.set(e,r),r},c([d()],is.prototype,"_updating",void 0),c([d()],is.prototype,"length",void 0),c([d()],is.prototype,"items",null),c([d({readOnly:!0})],is.prototype,"updating",null),is=os=c([S("esri.core.Collection")],is);const B=is;function ms(e,t,r=B){return t||(t=new r),t===e||(t.removeAll(),qN(e)?t.addMany(e):e&&t.add(e)),t}function WE(e){return e}function qN(e){return e&&(Array.isArray(e)||"items"in e&&Array.isArray(e.items))}var Zs;(function(e){e[e.PENDING=0]="PENDING",e[e.RESOLVED=1]="RESOLVED",e[e.REJECTED=2]="REJECTED"})(Zs||(Zs={}));let WN=class{constructor(){this._resolver=Pr(),this._status=Zs.PENDING,this._resolvingPromises=[],this._resolver.promise.then(()=>{this._status=Zs.RESOLVED,this._cleanUp()},()=>{this._status=Zs.REJECTED,this._cleanUp()}),this.promise=this._resolver.promise}destroy(){this._cleanUp()}addResolvingPromise(t){this._resolvingPromises.push(t),this._tryResolve()}isResolved(){return this._status===Zs.RESOLVED}isRejected(){return this._status===Zs.REJECTED}isFulfilled(){return this._status!==Zs.PENDING}abort(){this._resolver.reject($e())}_cleanUp(){this._allPromise=null,this._resolvingPromises=null}_tryResolve(){if(this.isFulfilled())return;const t=Pr(),r=[...this._resolvingPromises,t.promise],i=this._allPromise=Promise.all(r);i.then(()=>{this.isFulfilled()||this._allPromise!==i||this._resolver.resolve()},s=>{this.isFulfilled()||this._allPromise!==i||Ht(s)||this._resolver.reject(s)}),t.resolve()}};const ZE=e=>{let t=class extends e{constructor(...r){super(...r),this._promiseProps=new WN,this.addResolvingPromise(Promise.resolve())}destroy(){this._promiseProps.destroy()}isResolved(){return this._promiseProps.isResolved()}isRejected(){return this._promiseProps.isRejected()}isFulfilled(){return this._promiseProps.isFulfilled()}when(r,i){return this._promiseProps.promise.then(()=>this).then(r,i)}catch(r){return this.when(null,r)}addResolvingPromise(r){r&&!this._promiseProps.isFulfilled()&&this._promiseProps.addResolvingPromise("_promiseProps"in r?r.when():r)}};return t=c([S("esri.core.Promise")],t),t};let ru=class extends ZE(q){};ru=c([S("esri.core.Promise")],ru),function(e){e.EsriPromiseMixin=ZE}(ru||(ru={}));const Cf=ru,ZN="not-loaded",JN="loading",YN="failed",rb="loaded",JE=e=>{let t=class extends e{constructor(...r){super(...r),this._loadController=null,this.loadError=null,this.loadStatus="not-loaded",this._set("loadWarnings",[]),this.addResolvingPromise(new Promise(i=>{const s=this.load.bind(this);this.load=n=>{const o=new Promise((a,l)=>{const h=i_(n,l);this.destroyed&&l(new I("load:instance-destroyed",`Instance of '${this.declaredClass||this.constructor.name}' is already destroyed`,{instance:this})),this.when(a,l).finally(()=>{h&&h.remove()})});if(this.loadStatus===ZN){this._set("loadStatus",JN);const a=this._loadController=new AbortController;s({signal:a.signal})}return i(),o}})),this.when(()=>{this._set("loadStatus",rb),this._loadController=null},i=>{this._set("loadStatus",YN),this._set("loadError",i),this._loadController=null})}destroy(){this._loadController&&(this._loadController=tl(this._loadController),this._promiseProps.abort()),this._set("loadError",null),this._set("loadWarnings",[])}get loaded(){return this.loadStatus===rb}get loadWarnings(){return this._get("loadWarnings")}load(){return null}cancelLoad(){var r;return this.isFulfilled()||(this._set("loadError",new I("load:cancelled","Cancelled")),(r=this._loadController)==null||r.abort(),this._promiseProps.abort()),this}};return c([d({readOnly:!0})],t.prototype,"loaded",null),c([d({readOnly:!0})],t.prototype,"loadError",void 0),c([d({clonable:!1})],t.prototype,"loadStatus",void 0),c([d({type:[fs],readOnly:!0})],t.prototype,"loadWarnings",null),t=c([S("esri.core.Loadable")],t),t};let iu=class extends JE(Cf){};iu=c([S("esri.core.Loadable")],iu),function(e){function t(r){return!(!r||!r.load)}e.LoadableMixin=JE,e.isLoadable=t}(iu||(iu={}));const mn=iu;function CX(e,t,r){return s_(e.map((i,s)=>t.apply(r,[i,s])))}async function KN(e,t,r){return(await s_(e.map((i,s)=>t.apply(r,[i,s])))).map(i=>i.value)}function M_(e){return{ok:!0,value:e}}function x_(e){return{ok:!1,error:e}}function XN(e){return e!=null&&e.ok===!0?e.value:null}function QN(e){return e!=null&&e.ok===!1?e.error:null}async function YE(e){if(e==null)return{ok:!1,error:new Error("no promise provided")};try{return M_(await e)}catch(t){return x_(t)}}async function IX(e){try{return M_(await e)}catch(t){return q$(t),x_(t)}}function If(e,t){return new Ps(e,t)}let Ps=class extends q{get value(){return XN(this._result)}get error(){return QN(this._result)}get finished(){return this._result!=null}constructor(t,r){super({}),this._result=null,this._abortHandle=null,this.abort=()=>{this._abortController=tl(this._abortController)},this.remove=this.abort,this._abortController=new AbortController;const{signal:i}=this._abortController;this.promise=t(i),this.promise.then(s=>{this._result=M_(s),this._cleanup()},s=>{this._result=x_(s),this._cleanup()}),this._abortHandle=xr(r,this.abort)}normalizeCtorArgs(){return{}}destroy(){this.abort()}_cleanup(){this._abortHandle=Ce(this._abortHandle),this._abortController=null}};c([d()],Ps.prototype,"value",null),c([d()],Ps.prototype,"error",null),c([d()],Ps.prototype,"finished",null),c([d()],Ps.prototype,"promise",void 0),c([d()],Ps.prototype,"_result",void 0),Ps=c([S("esri.core.asyncUtils.ReactiveTask")],Ps);async function KE(e,t){return await e.load(),eL(e,t)}async function eL(e,t){const r=[],i=(...n)=>{for(const o of n)o!=null&&(Array.isArray(o)?i(...o):B.isCollection(o)?o.forEach(a=>i(a)):mn.isLoadable(o)&&r.push(o))};t(i);let s=null;if(await KN(r,async n=>{const o=await YE(tL(n)?n.loadAll():n.load());o.ok!==!1||s||(s=o)}),s)throw s.error;return e}function tL(e){return"loadAll"in e&&typeof e.loadAll=="function"}function oe(e,t,r){let i,s;return t===void 0?(s=e,i=[void 0]):typeof t!="string"?(s=e,i=[void 0],r=t):(s=t,i=Array.isArray(e)?e:[e]),(n,o)=>{const a=n.constructor.prototype;for(const l of i){const h=aE(n,l,s);h.write&&typeof h.write=="object"||(h.write={}),r&&(h.write.target=r),h.write.writer=a[o]}}}let rt=class{constructor(t,r={ignoreUnknown:!1,useNumericKeys:!1}){this._jsonToAPI=t,this._options=r,this.apiValues=[],this.jsonValues=[],this._apiToJSON=rL(t),this.apiValues=ib(this._apiToJSON),this.jsonValues=ib(this._jsonToAPI),this.read=i=>this.fromJSON(i),this.write=(i,s,n)=>{const o=this.toJSON(i);o!==void 0&&vl(n,o,s)},this.write.isJSONMapWriter=!0}toJSON(t){if(t==null)return null;if(this._apiToJSON.hasOwnProperty(t)){const r=this._apiToJSON[t];return this._options.useNumericKeys?+r:r}return this._options.ignoreUnknown?null:t}fromJSON(t){return t!=null&&this._jsonToAPI.hasOwnProperty(t)?this._jsonToAPI[t]:this._options.ignoreUnknown?void 0:t}};function rL(e){const t={};for(const r in e)t[e[r]]=r;return t}function ib(e){const t=[];for(const r in e)t.push(r);return t.sort(),t}function qt(){return function(e,t){return new rt(e,{ignoreUnknown:!0,...t})}}let A_=class{constructor(t,r,i,s,n,o){this.semiMajorAxis=t,this.flattening=r,this.outerAtmosphereRimWidth=i,this.atmosphereHeight=s,this.scaleHeight=n;const a=1-this.flattening;this.semiMinorAxis=this.semiMajorAxis*a,this.halfSemiMajorAxis=this.semiMajorAxis/2,this.halfCircumference=Math.PI*this.semiMajorAxis,this.metersPerDegree=this.halfCircumference/180,this.inverseFlattening=1/(1-this.flattening)-1,this.eccentricitySquared=o||2*this.flattening-this.flattening*this.flattening,this.meanRadiusSemiAxes=(2*this.semiMajorAxis+this.semiMinorAxis)/3}get radius(){return this.semiMajorAxis}};const Be=new A_(6378137,1/298.257223563,3e5,1e5,.085,.006694379990137799),$i=new A_(3396190,1/169.8944472236118,23e4,6e4,.111),yn=new A_(1737400,0,0,0,0);function je(e){if(!me.assetsPath)throw F.getLogger("esri.assets").errorOnce("The API assets location needs to be set using config.assetsPath. More information: https://arcg.is/1OzLe50"),new I("assets:path-not-set","config.assetsPath is not set");return Af(me.assetsPath,e)}let Cm,T=null;function P_(){return!!T}function iL(){return!!A("esri-wasm")}function XE(){return Cm||(Cm=N(()=>import("./pe-wasm-Co3DzcyP.js"),__vite__mapDeps([2,3])).then(e=>e.p).then(({default:e})=>e({locateFile:t=>je(`esri/geometry/support/${t}`)})).then(e=>{t3(e)}),Cm)}var hg,Oe;(function(e){function t(n,o,a){T.ensureCache.prepare();const l=po(a),h=a===l,p=T.ensureFloat64(l),f=T._pe_geog_to_proj(T.getPointer(n),o,p);return f&&en(a,o,p,h),f}function r(n,o,a,l){switch(l){case Oe.PE_TRANSFORM_P_TO_G:return i(n,o,a);case Oe.PE_TRANSFORM_G_TO_P:return t(n,o,a)}return 0}function i(n,o,a){return s(n,o,a,0)}function s(n,o,a,l){T.ensureCache.prepare();const h=po(a),p=a===h,f=T.ensureFloat64(h),m=T._pe_proj_to_geog_center(T.getPointer(n),o,f,l);return m&&en(a,o,f,p),m}e.geogToProj=t,e.projGeog=r,e.projToGeog=i,e.projToGeogCenter=s})(hg||(hg={})),function(e){function t(){e.PE_BUFFER_MAX=T.PeDefs.prototype.PE_BUFFER_MAX,e.PE_NAME_MAX=T.PeDefs.prototype.PE_NAME_MAX,e.PE_MGRS_MAX=T.PeDefs.prototype.PE_MGRS_MAX,e.PE_USNG_MAX=T.PeDefs.prototype.PE_USNG_MAX,e.PE_DD_MAX=T.PeDefs.prototype.PE_DD_MAX,e.PE_DDM_MAX=T.PeDefs.prototype.PE_DDM_MAX,e.PE_DMS_MAX=T.PeDefs.prototype.PE_DMS_MAX,e.PE_UTM_MAX=T.PeDefs.prototype.PE_UTM_MAX,e.PE_PARM_MAX=T.PeDefs.prototype.PE_PARM_MAX,e.PE_TYPE_NONE=T.PeDefs.prototype.PE_TYPE_NONE,e.PE_TYPE_GEOGCS=T.PeDefs.prototype.PE_TYPE_GEOGCS,e.PE_TYPE_PROJCS=T.PeDefs.prototype.PE_TYPE_PROJCS,e.PE_TYPE_GEOGTRAN=T.PeDefs.prototype.PE_TYPE_GEOGTRAN,e.PE_TYPE_COORDSYS=T.PeDefs.prototype.PE_TYPE_COORDSYS,e.PE_TYPE_UNIT=T.PeDefs.prototype.PE_TYPE_UNIT,e.PE_TYPE_LINUNIT=T.PeDefs.prototype.PE_TYPE_LINUNIT,e.PE_STR_OPTS_NONE=T.PeDefs.prototype.PE_STR_OPTS_NONE,e.PE_STR_AUTH_NONE=T.PeDefs.prototype.PE_STR_AUTH_NONE,e.PE_STR_AUTH_TOP=T.PeDefs.prototype.PE_STR_AUTH_TOP,e.PE_STR_NAME_CANON=T.PeDefs.prototype.PE_STR_NAME_CANON,e.PE_STR_FMT_WKT=T.PeDefs.prototype.PE_STR_FMT_WKT,e.PE_STR_FMT_WKT2=T.PeDefs.prototype.PE_STR_FMT_WKT2,e.PE_PARM_X0=T.PeDefs.prototype.PE_PARM_X0,e.PE_PARM_ND=T.PeDefs.prototype.PE_PARM_ND,e.PE_TRANSFORM_1_TO_2=T.PeDefs.prototype.PE_TRANSFORM_1_TO_2,e.PE_TRANSFORM_2_TO_1=T.PeDefs.prototype.PE_TRANSFORM_2_TO_1,e.PE_TRANSFORM_P_TO_G=T.PeDefs.prototype.PE_TRANSFORM_P_TO_G,e.PE_TRANSFORM_G_TO_P=T.PeDefs.prototype.PE_TRANSFORM_G_TO_P,e.PE_HORIZON_RECT=T.PeDefs.prototype.PE_HORIZON_RECT,e.PE_HORIZON_POLY=T.PeDefs.prototype.PE_HORIZON_POLY,e.PE_HORIZON_LINE=T.PeDefs.prototype.PE_HORIZON_LINE,e.PE_HORIZON_DELTA=T.PeDefs.prototype.PE_HORIZON_DELTA}e.init=t}(Oe||(Oe={}));let QE=null;var dg;(function(e){const t={},r={},i=y=>{const _=y.getType();switch(_){case Oe.PE_TYPE_GEOGCS:y=T.castObject(y,T.PeGeogcs);break;case Oe.PE_TYPE_PROJCS:y=T.castObject(y,T.PeProjcs);break;case Oe.PE_TYPE_GEOGTRAN:y=T.castObject(y,T.PeGeogtran);break;default:_&Oe.PE_TYPE_UNIT&&(y=T.castObject(y,T.PeUnit))}return y};function s(){T.PeFactory.prototype.initialize(null)}function n(y){return o(Oe.PE_TYPE_COORDSYS,y)}function o(y,_){let v=null,w=t[y];if(w||(w={},t[y]=w),w.hasOwnProperty(String(_))&&(v=w[_],T.compare(v,T.NULL)&&(v=null)),!v){const b=T.PeFactory.prototype.factoryByType(y,_);T.compare(b,T.NULL)||(v=i(b),w[_]=v)}return v}function a(y,_){let v=null,w=r[y];if(w||(w={},r[y]=w),w.hasOwnProperty(_)&&(v=w[_],T.compare(v,T.NULL)&&(v=null)),!v){const b=T.PeFactory.prototype.fromString(y,_);T.compare(b,T.NULL)||(v=i(b),w[_]=v)}return v}function l(y){return o(Oe.PE_TYPE_GEOGCS,y)}function h(y){return o(Oe.PE_TYPE_GEOGTRAN,y)}function p(y){return T.PeFactory.prototype.getCode(y)}function f(y){return o(Oe.PE_TYPE_PROJCS,y)}function m(y){return o(Oe.PE_TYPE_UNIT,y)}e.initialize=s,e.coordsys=n,e.factoryByType=o,e.fromString=a,e.geogcs=l,e.geogtran=h,e.getCode=p,e.projcs=f,e.unit=m})(dg||(dg={}));let e3=null;var Ap,pg,fg,mg,yg,gg,Pp,_g,Op,Cp,vg;function t3(e){function t(n,o,a){n[o]=a(n[o])}T=e,Oe.init(),Ap.init(),Pp.init(),Op.init(),Cp.init(),QE=class extends T.PeDouble{constructor(n=NaN){super(n)}destroy(){T.destroy(this)}[Symbol.dispose](){this.destroy()}},e3=class extends T.PeGCSExtent{destroy(){T.destroy(this)}[Symbol.dispose](){this.destroy()}};const r=[T.PeAngunit,T.PeDatum,T.PeGeogcs,T.PeGeogtran,T.PeObject,T.PeParameter,T.PePrimem,T.PeProjcs,T.PeSpheroid,T.PeUnit];for(const n of r)t(n.prototype,"getName",o=>function(){return o.call(this,new Array(Oe.PE_NAME_MAX))});for(const n of[T.PeGeogtran,T.PeProjcs])t(n.prototype,"getParameters",o=>function(){const a=new Array(Oe.PE_PARM_MAX);let l=o.call(this);for(let h=0;h<a.length;h++){const p=T.getValue(l,"*");a[h]=p?T.wrapPointer(p,T.PeParameter):null,l+=Int32Array.BYTES_PER_ELEMENT}return a});t(T.PeHorizon.prototype,"getCoord",n=>function(o=!1){const a=this.getSize();if(!a)return null;const l=[];return en(l,a,n.call(this),o),l}),t(T.PeGTlistExtendedEntry.prototype,"getEntries",n=>{const o=T._pe_getPeGTlistExtendedGTsSize();return function(){let a=null;const l=n.call(this);if(!T.compare(l,T.NULL)){a=[l];const h=this.getSteps();if(h>1){const p=T.getPointer(l);for(let f=1;f<h;f++)a.push(T.wrapPointer(p+o*f,T.PeGTlistExtendedGTs))}}return a}});const i=T._pe_getPeHorizonSize(),s=n=>function(){let o=this._cache;if(o||(o=new Map,this._cache=o),o.has(n))return o.get(n);let a=null;const l=n.call(this);if(!T.compare(l,T.NULL)){a=[l];const h=l.getNump();if(h>1){const p=T.getPointer(l);for(let f=1;f<h;f++)a.push(T.wrapPointer(p+i*f,T.PeHorizon))}}return o.set(n,a),a};t(T.PeProjcs.prototype,"horizonGcsGenerate",s),t(T.PeProjcs.prototype,"horizonPcsGenerate",s),T.PeObject.prototype.toString=function(n=Oe.PE_STR_OPTS_NONE){T.ensureCache.prepare();const o=T.getPointer(this),a=T.ensureInt8(new Array(Oe.PE_BUFFER_MAX));return T.UTF8ToString(T._pe_object_to_string_ext(o,n,a))},T.PeGeogcs.prototype.destroy=function(){this.Delete(),Jr(this),this.ptr=0},T.PeGeogcs.prototype[Symbol.dispose]=function(){this.destroy()},T.PeProjcs.prototype.destroy=function(){this.Delete(),Jr(this),this.ptr=0},T.PeProjcs.prototype[Symbol.dispose]=function(){this.destroy()}}function Jr(e){if(!e)return;const t=T.getClass(e);if(!t)return;const r=T.getCache(t);if(!r)return;const i=T.getPointer(e);i&&delete r[i]}function Th(e,t){const r=[],i=new Array(t);for(let s=0;s<e;s++)r.push(T.ensureInt8(i));return r}function po(e){return ArrayBuffer.isView(e)?e:Array.isArray(e[0])?e.flat():e}function en(e,t,r,i=!1){if(i)for(let s=0;s<2*t;s++)e[s]=T.getValue(r+s*Float64Array.BYTES_PER_ELEMENT,"double");else{const s=e.length===0;for(let n=0;n<t;n++)s&&(e[n]=new Array(2)),e[n][0]=T.getValue(r,"double"),e[n][1]=T.getValue(r+Float64Array.BYTES_PER_ELEMENT,"double"),r+=2*Float64Array.BYTES_PER_ELEMENT}}(function(e){let t;function r(){e.PE_GTLIST_OPTS_COMMON=T.PeGTlistExtended.prototype.PE_GTLIST_OPTS_COMMON,t=T._pe_getPeGTlistExtendedEntrySize()}function i(s,n,o,a,l,h){let p=null;const f=new T.PeInteger(h);try{const m=T.PeGTlistExtended.prototype.getGTlist(s,n,o,a,l,f);if((h=f.val)&&(p=[m],h>1)){const y=T.getPointer(m);for(let _=1;_<h;_++)p.push(T.wrapPointer(y+t*_,T.PeGTlistExtendedEntry))}}finally{T.destroy(f)}return p}e.init=r,e.getGTlist=i})(Ap||(Ap={})),function(e){function t(r){if(r!=null&&r.length){for(const i of r)Jr(i),i.getEntries().forEach(s=>{Jr(s);const n=s.getGeogtran();Jr(n),n.getParameters().forEach(Jr),[n.getGeogcs1(),n.getGeogcs2()].forEach(o=>{Jr(o);const a=o.getDatum();Jr(a),Jr(a.getSpheroid()),Jr(o.getPrimem()),Jr(o.getUnit())})});T.PeGTlistExtendedEntry.prototype.Delete(r[0])}}e.destroy=t}(pg||(pg={})),function(e){function t(r,i,s,n,o){T.ensureCache.prepare();const a=po(s),l=s===a,h=T.ensureFloat64(a);let p=0;n&&(p=T.ensureFloat64(n));const f=T._pe_geog_to_geog(T.getPointer(r),i,h,p,o);return f&&en(s,i,h,l),f}e.geogToGeog=t}(fg||(fg={})),function(e){function t(n,o,a,l,h,p,f,m){T.PeLineType.prototype.geodesic_coordinate(n,o,a,l,h,p,f,m)}function r(n,o,a,l,h,p,f,m,y){T.PeLineType.prototype.geodetic_coordinate(n,o,a,l,h,p,f,m,y)}function i(n,o,a,l,h,p,f,m,y,_){T.PeLineType.prototype.geodetic_distance(n,o,a,l,h,p,f,m,y,_)}function s(n,o,a,l,h,p,f,m,y){T.PeLineType.prototype.great_elliptic_distance(n,o,a,l,h,p,f,m,y)}e.geodesicCoordinate=t,e.geodeticCoordinate=r,e.geodeticDistance=i,e.greatEllipticDistance=s}(mg||(mg={})),function(e){function t(o,a){return T.PeMath.prototype.phi_to_eta(o,a)}function r(o,a){return T.PeMath.prototype.eta_to_phi(o,a)}function i(o,a){return T.PeMath.prototype.phi_to_phig(o,a)}function s(o,a,l){return T.PeMath.prototype.q(o,a,l)}function n(o,a){return T.PeMath.prototype.q90(o,a)}e.phiToEta=t,e.etaToPhi=r,e.phiToPhig=i,e.q=s,e.q90=n}(yg||(yg={})),function(e){const t=(h,p,f,m,y,_)=>{let v,w;switch(T.ensureCache.prepare(),h){case"dd":v=T._pe_geog_to_dd,w=Oe.PE_DD_MAX;break;case"ddm":v=T._pe_geog_to_ddm,w=Oe.PE_DDM_MAX;break;case"dms":v=T._pe_geog_to_dms,w=Oe.PE_DMS_MAX}let b=0;p&&(b=T.getPointer(p));const M=po(m),$=T.ensureFloat64(M),E=Th(f,w),P=v(b,f,$,y,T.ensureInt32(E));if(P)for(let O=0;O<f;O++)_[O]=T.UTF8ToString(E[O]);return P},r=(h,p,f,m,y)=>{let _;switch(T.ensureCache.prepare(),h){case"dd":_=T._pe_dd_to_geog;break;case"ddm":_=T._pe_ddm_to_geog;break;case"dms":_=T._pe_dms_to_geog}let v=0;p&&(v=T.getPointer(p));const w=m.map(E=>T.ensureString(E)),b=T.ensureInt32(w),M=T.ensureFloat64(new Array(2*f)),$=_(v,f,b,M);return $&&en(y,f,M),$};function i(h,p,f,m,y){return t("dms",h,p,f,m,y)}function s(h,p,f,m){return r("dms",h,p,f,m)}function n(h,p,f,m,y){return t("ddm",h,p,f,m,y)}function o(h,p,f,m){return r("ddm",h,p,f,m)}function a(h,p,f,m,y){return t("dd",h,p,f,m,y)}function l(h,p,f,m){return r("dd",h,p,f,m)}e.geogToDms=i,e.dmsToGeog=s,e.geogToDdm=n,e.ddmToGeog=o,e.geogToDd=a,e.ddToGeog=l}(gg||(gg={})),function(e){function t(){e.PE_MGRS_STYLE_NEW=T.PeNotationMgrs.prototype.PE_MGRS_STYLE_NEW,e.PE_MGRS_STYLE_OLD=T.PeNotationMgrs.prototype.PE_MGRS_STYLE_OLD,e.PE_MGRS_STYLE_AUTO=T.PeNotationMgrs.prototype.PE_MGRS_STYLE_AUTO,e.PE_MGRS_180_ZONE_1_PLUS=T.PeNotationMgrs.prototype.PE_MGRS_180_ZONE_1_PLUS,e.PE_MGRS_ADD_SPACES=T.PeNotationMgrs.prototype.PE_MGRS_ADD_SPACES}function r(s,n,o,a,l,h,p){T.ensureCache.prepare();let f=0;s&&(f=T.getPointer(s));const m=po(o),y=T.ensureFloat64(m),_=Th(n,Oe.PE_MGRS_MAX),v=T.ensureInt32(_),w=T._pe_geog_to_mgrs_extended(f,n,y,a,l,h,v);if(w)for(let b=0;b<n;b++)p[b]=T.UTF8ToString(_[b]);return w}function i(s,n,o,a,l){T.ensureCache.prepare();let h=0;s&&(h=T.getPointer(s));const p=o.map(_=>T.ensureString(_)),f=T.ensureInt32(p),m=T.ensureFloat64(new Array(2*n)),y=T._pe_mgrs_to_geog_extended(h,n,f,a,m);return y&&en(l,n,m),y}e.init=t,e.geogToMgrsExtended=r,e.mgrsToGeogExtended=i}(Pp||(Pp={})),function(e){function t(i,s,n,o,a,l,h){T.ensureCache.prepare();let p=0;i&&(p=T.getPointer(i));const f=po(n),m=T.ensureFloat64(f),y=Th(s,Oe.PE_MGRS_MAX),_=T.ensureInt32(y),v=T._pe_geog_to_usng(p,s,m,o,a,l,_);if(v)for(let w=0;w<s;w++)h[w]=T.UTF8ToString(y[w]);return v}function r(i,s,n,o){T.ensureCache.prepare();let a=0;i&&(a=T.getPointer(i));const l=n.map(m=>T.ensureString(m)),h=T.ensureInt32(l),p=T.ensureFloat64(new Array(2*s)),f=T._pe_usng_to_geog(a,s,h,p);return f&&en(o,s,p),f}e.geogToUsng=t,e.usngToGeog=r}(_g||(_g={})),function(e){function t(){e.PE_UTM_OPTS_NONE=T.PeNotationUtm.prototype.PE_UTM_OPTS_NONE,e.PE_UTM_OPTS_ADD_SPACES=T.PeNotationUtm.prototype.PE_UTM_OPTS_ADD_SPACES,e.PE_UTM_OPTS_NS=T.PeNotationUtm.prototype.PE_UTM_OPTS_NS}function r(s,n,o,a,l){T.ensureCache.prepare();let h=0;s&&(h=T.getPointer(s));const p=po(o),f=T.ensureFloat64(p),m=Th(n,Oe.PE_UTM_MAX),y=T.ensureInt32(m),_=T._pe_geog_to_utm(h,n,f,a,y);if(_)for(let v=0;v<n;v++)l[v]=T.UTF8ToString(m[v]);return _}function i(s,n,o,a,l){T.ensureCache.prepare();let h=0;s&&(h=T.getPointer(s));const p=o.map(_=>T.ensureString(_)),f=T.ensureInt32(p),m=T.ensureFloat64(new Array(2*n)),y=T._pe_utm_to_geog(h,n,f,a,m);return y&&en(l,n,m),y}e.init=t,e.geogToUtm=r,e.utmToGeog=i}(Op||(Op={})),function(e){const t=new Map;function r(){e.PE_PCSINFO_OPTION_NONE=T.PePCSInfo.prototype.PE_PCSINFO_OPTION_NONE,e.PE_PCSINFO_OPTION_DOMAIN=T.PePCSInfo.prototype.PE_PCSINFO_OPTION_DOMAIN,e.PE_POLE_OUTSIDE_BOUNDARY=T.PePCSInfo.prototype.PE_POLE_OUTSIDE_BOUNDARY,e.PE_POLE_POINT=T.PePCSInfo.prototype.PE_POLE_POINT}function i(s,n=e.PE_PCSINFO_OPTION_DOMAIN){let o=null,a=null;return t.has(s)&&(a=t.get(s),a[n]&&(o=a[n])),o||(o=T.PePCSInfo.prototype.generate(s,n),a||(a=[],t.set(s,a)),a[n]=o),o}e.init=r,e.generate=i}(Cp||(Cp={})),function(e){function t(){return T.PeVersion.prototype.version_string()}e.versionString=t}(vg||(vg={}));const sL=Object.freeze(Object.defineProperty({__proto__:null,get PeCSTransformations(){return hg},get PeDefs(){return Oe},get PeDouble(){return QE},get PeFactory(){return dg},get PeGCSExtent(){return e3},get PeGTTransformations(){return fg},get PeGTlistExtended(){return Ap},get PeGTlistExtendedEntry(){return pg},get PeLineType(){return mg},get PeMath(){return yg},get PeNotationDms(){return gg},get PeNotationMgrs(){return Pp},get PeNotationUsng(){return _g},get PeNotationUtm(){return Op},get PePCSInfo(){return Cp},get PeVersion(){return vg},_init:t3,get _pe(){return T},isLoaded:P_,isSupported:iL,load:XE},Symbol.toStringTag,{value:"Module"}));var Ao;(function(e){e[e.CGCS2000=4490]="CGCS2000",e[e.GCSMARS2000=104971]="GCSMARS2000",e[e.GCSMARS2000_SPHERE=104905]="GCSMARS2000_SPHERE",e[e.GCSMOON2000=104903]="GCSMOON2000"})(Ao||(Ao={}));let u;const g={values:[1,.3048,.3048006096012192,.3047972654,.9143917962,.201166195164,.9143984146160287,.3047994715386762,20.11676512155263,20.11678249437587,.9143985307444408,.91439523,.3047997101815088,20.1168,20.116756,5e4,15e4],units:["Meter","Foot","Foot_US","Foot_Clarke","Yard_Clarke","Link_Clarke","Yard_Sears","Foot_Sears","Chain_Sears","Chain_Benoit_1895_B","Yard_Indian","Yard_Indian_1937","Foot_Gold_Coast","Chain","Chain_Sears_1922_Truncated","50_Kilometers","150_Kilometers"],2066:5,2136:12,2155:2,2157:0,2158:0,2159:12,2160:12,2204:2,2219:0,2220:0,2254:2,2255:2,2256:1,2265:1,2266:1,2267:2,2268:2,2269:1,2270:1,2271:2,2272:2,2273:1,2294:0,2295:0,2314:3,2899:2,2900:2,2901:1,2909:1,2910:1,2911:2,2912:2,2913:1,2914:1,2992:1,2993:0,2994:1,3080:1,3089:2,3090:0,3091:2,3102:2,3141:0,3142:0,3167:14,3359:2,3360:0,3361:1,3362:0,3363:2,3364:0,3365:2,3366:3,3404:2,3405:0,3406:0,3407:3,3439:0,3440:0,3479:1,3480:0,3481:1,3482:0,3483:1,3484:0,3485:2,3486:0,3487:2,3488:0,3489:0,3490:2,3491:0,3492:2,3493:0,3494:2,3495:0,3496:2,3497:0,3498:2,3499:0,3500:2,3501:0,3502:2,3503:0,3504:2,3505:0,3506:2,3507:0,3508:2,3509:0,3510:2,3511:0,3512:2,3513:0,3514:0,3515:2,3516:0,3517:2,3518:0,3519:2,3520:0,3521:2,3522:0,3523:2,3524:0,3525:2,3526:0,3527:2,3528:0,3529:2,3530:0,3531:2,3532:0,3533:2,3534:0,3535:2,3536:0,3537:2,3538:0,3539:2,3540:0,3541:2,3542:0,3543:2,3544:0,3545:2,3546:0,3547:2,3548:0,3549:2,3550:0,3551:2,3552:0,3553:2,3582:2,3583:0,3584:2,3585:0,3586:2,3587:0,3588:1,3589:0,3590:1,3591:0,3592:0,3593:1,3598:2,3599:0,3600:2,3605:1,3606:0,3607:0,3608:2,3609:0,3610:2,3611:0,3612:2,3613:0,3614:2,3615:0,3616:2,3617:0,3618:2,3619:0,3620:2,3621:0,3622:2,3623:0,3624:2,3625:0,3626:2,3627:0,3628:2,3629:0,3630:2,3631:0,3632:2,3633:0,3634:1,3635:0,3636:1,3640:2,3641:0,3642:2,3643:0,3644:1,3645:0,3646:1,3647:0,3648:1,3649:0,3650:2,3651:0,3652:2,3653:0,3654:2,3655:0,3656:1,3657:0,3658:2,3659:0,3660:2,3661:0,3662:2,3663:0,3664:2,3668:2,3669:0,3670:2,3671:0,3672:2,3673:0,3674:2,3675:0,3676:1,3677:2,3678:0,3679:1,3680:2,3681:0,3682:1,3683:2,3684:0,3685:0,3686:2,3687:0,3688:2,3689:0,3690:2,3691:0,3692:2,3696:2,3697:0,3698:2,3699:0,3700:2,3793:0,3794:0,3812:0,3854:0,3857:0,3920:0,3978:0,3979:0,3991:2,3992:2,4026:0,4037:0,4038:0,4071:0,4082:0,4083:0,4087:0,4088:0,4217:2,4414:0,4415:0,4417:0,4434:0,4437:0,4438:2,4439:2,4462:0,4467:0,4471:0,4474:0,4559:0,4647:0,4822:0,4826:0,4839:0,5018:0,5041:0,5042:0,5048:0,5221:0,5223:0,5234:0,5235:0,5243:0,5247:0,5266:0,5316:0,5320:0,5321:0,5325:0,5337:0,5361:0,5362:0,5367:0,5382:0,5383:0,5396:0,5456:0,5457:0,5469:0,5472:4,5490:0,5513:0,5514:0,5523:0,5559:0,5588:1,5589:3,5596:0,5627:0,5629:0,5641:0,5643:0,5644:0,5646:2,5654:2,5655:2,5659:0,5700:0,5825:0,5836:0,5837:0,5839:0,5842:0,5844:0,5858:0,5879:0,5880:0,5887:0,5890:0,6128:1,6129:1,6141:1,6204:0,6210:0,6211:0,6307:0,6312:0,6316:0,6362:0,6391:1,6405:1,6406:0,6407:1,6408:0,6409:1,6410:0,6411:2,6412:0,6413:2,6414:0,6415:0,6416:2,6417:0,6418:2,6419:0,6420:2,6421:0,6422:2,6423:0,6424:2,6425:0,6426:2,6427:0,6428:2,6429:0,6430:2,6431:0,6432:2,6433:0,6434:2,6435:0,6436:2,6437:0,6438:2,6439:0,6440:0,6441:2,6442:0,6443:2,6444:0,6445:2,6446:0,6447:2,6448:0,6449:2,6450:0,6451:2,6452:0,6453:2,6454:0,6455:2,6456:0,6457:2,6458:0,6459:2,6460:0,6461:2,6462:0,6463:2,6464:0,6465:2,6466:0,6467:2,6468:0,6469:2,6470:0,6471:2,6472:0,6473:2,6474:0,6475:2,6476:0,6477:2,6478:0,6479:2,6484:2,6485:0,6486:2,6487:0,6488:2,6489:0,6490:2,6491:0,6492:2,6493:0,6494:1,6495:0,6496:1,6497:0,6498:0,6499:1,6500:0,6501:2,6502:0,6503:2,6504:0,6505:2,6506:0,6507:2,6508:0,6509:0,6510:2,6515:1,6516:0,6518:0,6519:2,6520:0,6521:2,6522:0,6523:2,6524:0,6525:2,6526:0,6527:2,6528:0,6529:2,6530:0,6531:2,6532:0,6533:2,6534:0,6535:2,6536:0,6537:2,6538:0,6539:2,6540:0,6541:2,6542:0,6543:2,6544:0,6545:1,6546:0,6547:1,6548:0,6549:2,6550:0,6551:2,6552:0,6553:2,6554:0,6555:2,6556:0,6557:1,6558:0,6559:1,6560:0,6561:1,6562:0,6563:2,6564:0,6565:2,6566:0,6567:0,6568:2,6569:0,6570:1,6571:0,6572:2,6573:0,6574:2,6575:0,6576:2,6577:0,6578:2,6582:2,6583:0,6584:2,6585:0,6586:2,6587:0,6588:2,6589:0,6590:2,6591:0,6592:0,6593:2,6594:0,6595:2,6596:0,6597:2,6598:0,6599:2,6600:0,6601:2,6602:0,6603:2,6605:2,6606:0,6607:2,6608:0,6609:2,6610:0,6611:0,6612:2,6613:0,6614:2,6615:0,6616:2,6617:0,6618:2,6633:2,6646:0,6703:0,6784:0,6785:1,6786:0,6787:1,6788:0,6789:1,6790:0,6791:1,6792:0,6793:1,6794:0,6795:1,6796:0,6797:1,6798:0,6799:1,6800:0,6801:1,6802:0,6803:1,6804:0,6805:1,6806:0,6807:1,6808:0,6809:1,6810:0,6811:1,6812:0,6813:1,6814:0,6815:1,6816:0,6817:1,6818:0,6819:1,6820:0,6821:1,6822:0,6823:1,6824:0,6825:1,6826:0,6827:1,6828:0,6829:1,6830:0,6831:1,6832:0,6833:1,6834:0,6835:1,6836:0,6837:1,6838:0,6839:1,6840:0,6841:1,6842:0,6843:1,6844:0,6845:1,6846:0,6847:1,6848:0,6849:1,6850:0,6851:1,6852:0,6853:1,6854:0,6855:1,6856:0,6857:1,6858:0,6859:1,6860:0,6861:1,6862:0,6863:1,6867:0,6868:1,6870:0,6875:0,6876:0,6879:0,6880:2,6884:0,6885:1,6886:0,6887:1,6915:0,6922:0,6923:2,6924:0,6925:2,6962:0,6984:0,6991:0,7128:2,7131:0,7132:2,7142:0,7257:0,7258:2,7259:0,7260:2,7261:0,7262:2,7263:0,7264:2,7265:0,7266:2,7267:0,7268:2,7269:0,7270:2,7271:0,7272:2,7273:0,7274:2,7275:0,7276:2,7277:0,7278:2,7279:0,7280:2,7281:0,7282:2,7283:0,7284:2,7285:0,7286:2,7287:0,7288:2,7289:0,7290:2,7291:0,7292:2,7293:0,7294:2,7295:0,7296:2,7297:0,7298:2,7299:0,7300:2,7301:0,7302:2,7303:0,7304:2,7305:0,7306:2,7307:0,7308:2,7309:0,7310:2,7311:0,7312:2,7313:0,7314:2,7315:0,7316:2,7317:0,7318:2,7319:0,7320:2,7321:0,7322:2,7323:0,7324:2,7325:0,7326:2,7327:0,7328:2,7329:0,7330:2,7331:0,7332:2,7333:0,7334:2,7335:0,7336:2,7337:0,7338:2,7339:0,7340:2,7341:0,7342:2,7343:0,7344:2,7345:0,7346:2,7347:0,7348:2,7349:0,7350:2,7351:0,7352:2,7353:0,7354:2,7355:0,7356:2,7357:0,7358:2,7359:0,7360:2,7361:0,7362:2,7363:0,7364:2,7365:0,7366:2,7367:0,7368:2,7369:0,7370:2,7877:0,7878:0,7882:0,7883:0,7887:0,7899:0,7991:0,7992:0,8035:2,8036:2,8058:0,8059:0,8082:0,8083:0,8088:0,8090:0,8091:2,8092:0,8093:2,8095:0,8096:2,8097:0,8098:2,8099:0,8100:2,8101:0,8102:2,8103:0,8104:2,8105:0,8106:2,8107:0,8108:2,8109:0,8110:2,8111:0,8112:2,8113:0,8114:2,8115:0,8116:2,8117:0,8118:2,8119:0,8120:2,8121:0,8122:2,8123:0,8124:2,8125:0,8126:2,8127:0,8128:2,8129:0,8130:2,8131:0,8132:2,8133:0,8134:2,8135:0,8136:2,8137:0,8138:2,8139:0,8140:2,8141:0,8142:2,8143:0,8144:2,8145:0,8146:2,8147:0,8148:2,8149:0,8150:2,8151:0,8152:2,8153:0,8154:2,8155:0,8156:2,8157:0,8158:2,8159:0,8160:2,8161:0,8162:2,8163:0,8164:2,8165:0,8166:2,8167:0,8168:2,8169:0,8170:2,8171:0,8172:2,8173:0,8177:2,8179:0,8180:2,8181:0,8182:2,8184:0,8185:2,8187:0,8189:2,8191:0,8193:2,8196:0,8197:2,8198:0,8200:2,8201:0,8202:2,8203:0,8204:2,8205:0,8206:2,8207:0,8208:2,8209:0,8210:2,8212:0,8213:2,8214:0,8216:2,8218:0,8220:2,8222:0,8224:2,8225:0,8226:2,8311:0,8312:1,8313:0,8314:1,8315:0,8316:1,8317:0,8318:1,8319:0,8320:1,8321:0,8322:1,8323:0,8324:1,8325:0,8326:1,8327:0,8328:1,8329:0,8330:1,8331:0,8332:1,8333:0,8334:1,8335:0,8336:1,8337:0,8338:1,8339:0,8340:1,8341:0,8342:1,8343:0,8344:1,8345:0,8346:1,8347:0,8348:1,8352:0,8353:0,8379:0,8380:2,8381:0,8382:2,8383:0,8384:2,8385:0,8387:2,8391:0,8395:0,8433:0,8441:0,8455:0,8456:0,8531:2,8682:0,8686:0,8687:0,8692:0,8693:0,8826:0,8903:0,8950:0,8951:0,9039:0,9040:0,9141:0,9149:0,9150:0,9191:0,9221:0,9222:0,9249:0,9250:0,9252:0,9254:0,9265:0,9284:0,9285:0,9300:0,9354:0,9367:0,9373:0,9377:0,9387:0,9391:0,9456:0,9473:0,9498:0,9674:0,9678:0,9680:0,9709:0,9712:0,9713:0,9716:0,9741:0,9748:2,9749:2,9761:0,9766:0,9793:0,9794:0,9869:0,9874:0,9875:0,9880:0,9895:0,9943:0,9945:0,9947:0,9967:0,9972:0,9977:0,10160:0,10183:0,10188:0,10194:0,10199:0,10207:0,10212:0,10217:0,10222:0,10227:0,10235:0,10240:0,10250:0,10254:0,10270:0,10275:0,10280:0,10306:0,10329:0,10471:0,10477:0,10481:2,10516:2,10592:0,10594:0,10596:0,10598:0,10601:0,10603:0,10626:0,10632:0,10665:0,20002:0,20042:0,20050:1,20499:0,20538:0,20539:0,20790:0,20791:0,21291:0,21292:0,21500:0,21817:0,21818:0,22032:0,22033:0,22091:0,22092:0,22239:0,22240:0,22332:0,22337:0,22338:0,22391:0,22392:0,22639:0,22700:0,22739:0,22770:0,22780:0,22832:0,23090:0,23095:0,23239:0,23240:0,23433:0,23700:0,24047:0,24048:0,24100:3,24200:0,24305:0,24306:0,24382:10,24383:0,24500:0,24547:0,24548:0,24571:9,24600:0,25e3:0,25231:0,25884:0,25932:0,26237:0,26331:0,26332:0,26432:0,26591:0,26592:0,26632:0,26692:0,27120:0,27200:0,27291:6,27292:6,27429:0,27492:0,27493:0,27500:0,28232:0,28600:0,28991:0,28992:0,29100:0,29101:0,29220:0,29221:0,29333:0,29635:0,29636:0,29701:0,29738:0,29739:0,29849:0,29850:0,29871:8,29872:7,29873:0,29874:0,30200:5,30339:0,30340:0,30591:0,30592:0,30791:0,30792:0,30800:0,31028:0,31121:0,31154:0,31170:0,31171:0,31370:0,31528:0,31529:0,31600:0,31700:0,31838:0,31839:0,31900:0,31901:0,32061:0,32062:0,32098:0,32099:2,32100:0,32104:0,32161:0,32766:0,53048:0,53049:0,54090:0,54091:0,65061:2,65062:2,65161:0,65163:0,102041:2,102064:11,102068:15,102069:16,102118:2,102119:1,102120:2,102121:2,102217:2,102218:0,102219:2,102220:2,102378:1,102379:1,102380:0,102381:1,102589:2,102599:2,102600:2,102604:2,102647:0,102704:2,102705:2,102706:0,102731:0,102732:0,102759:1,102760:1,102761:2,102762:0,102763:2,102764:0,102765:0,102766:2,102970:1,102974:2,102993:0,102994:0,102995:2,102996:2,103015:0,103016:2,103017:0,103018:2,103025:0,103026:0,103027:2,103028:2,103035:0,103036:0,103037:2,103038:2,103039:0,103040:0,103041:2,103042:2,103043:0,103044:0,103045:2,103046:2,103047:0,103048:0,103049:2,103050:2,103051:0,103052:2,103053:0,103054:2,103055:0,103056:2,103057:0,103058:0,103059:2,103060:2,103061:0,103062:0,103063:2,103064:2,103069:2,103070:0,103071:0,103072:2,103073:2,103086:0,103087:0,103088:2,103089:2,103094:1,103095:0,103096:2,103103:0,103104:2,103105:0,103106:2,103121:0,103122:2,103123:0,103124:0,103125:1,103126:1,103127:0,103128:0,103129:2,103130:2,103131:0,103132:0,103133:2,103134:2,103135:0,103136:0,103137:1,103138:1,103139:0,103140:2,103141:0,103142:2,103143:0,103144:2,103145:0,103146:1,103147:0,103148:0,103149:2,103150:2,103151:0,103152:2,103172:0,103173:2,103174:0,103175:0,103176:2,103177:2,103178:0,103179:0,103180:2,103181:2,103182:0,103183:0,103184:2,103185:2,103228:0,103229:0,103230:2,103231:2,103250:0,103251:2,103252:0,103253:2,103260:0,103261:0,103262:2,103263:2,103270:0,103271:0,103272:2,103273:2,103274:0,103275:0,103276:2,103277:2,103278:0,103279:0,103280:2,103281:2,103282:0,103283:0,103284:2,103285:2,103286:0,103287:2,103288:0,103289:2,103290:0,103291:2,103292:0,103293:0,103294:2,103295:2,103296:0,103297:0,103298:2,103299:2,103376:2,103377:0,103378:0,103379:2,103380:2,103393:0,103394:0,103395:2,103396:2,103472:0,103473:1,103474:0,103475:2,103482:0,103483:2,103484:0,103485:2,103500:0,103501:2,103502:0,103503:0,103504:1,103505:1,103506:0,103507:0,103508:2,103509:2,103510:0,103511:0,103512:2,103513:2,103514:0,103515:2,103516:0,103517:2,103518:0,103519:2,103520:0,103521:1,103522:0,103523:0,103524:2,103525:2,103526:0,103527:2,103561:2,103562:2,103563:0,103564:0,103565:2,103566:2,103567:0,103568:0,103569:2,103570:2,103584:0,103585:2,103586:0,103587:2,103588:1,103589:0,103590:2,103591:1,103592:0,103593:2,103594:1,103695:2,103897:1,103978:2,103979:0,103980:2,103981:0};for(u=2e3;u<=2045;u++)g[u]=0;for(u=2056;u<=2065;u++)g[u]=0;for(u=2067;u<=2135;u++)g[u]=0;for(u=2137;u<=2154;u++)g[u]=0;for(u=2161;u<=2170;u++)g[u]=0;for(u=2172;u<=2193;u++)g[u]=0;for(u=2195;u<=2198;u++)g[u]=0;for(u=2200;u<=2203;u++)g[u]=0;for(u=2205;u<=2217;u++)g[u]=0;for(u=2222;u<=2224;u++)g[u]=1;for(u=2225;u<=2250;u++)g[u]=2;for(u=2251;u<=2253;u++)g[u]=1;for(u=2257;u<=2264;u++)g[u]=2;for(u=2274;u<=2279;u++)g[u]=2;for(u=2280;u<=2282;u++)g[u]=1;for(u=2283;u<=2289;u++)g[u]=2;for(u=2290;u<=2292;u++)g[u]=0;for(u=2308;u<=2313;u++)g[u]=0;for(u=2315;u<=2491;u++)g[u]=0;for(u=2494;u<=2866;u++)g[u]=0;for(u=2867;u<=2869;u++)g[u]=1;for(u=2870;u<=2888;u++)g[u]=2;for(u=2891;u<=2895;u++)g[u]=2;for(u=2896;u<=2898;u++)g[u]=1;for(u=2902;u<=2908;u++)g[u]=2;for(u=2915;u<=2920;u++)g[u]=2;for(u=2921;u<=2923;u++)g[u]=1;for(u=2924;u<=2930;u++)g[u]=2;for(u=2931;u<=2962;u++)g[u]=0;for(u=2964;u<=2968;u++)g[u]=2;for(u=2969;u<=2973;u++)g[u]=0;for(u=2975;u<=2991;u++)g[u]=0;for(u=2995;u<=3051;u++)g[u]=0;for(u=3054;u<=3079;u++)g[u]=0;for(u=3081;u<=3088;u++)g[u]=0;for(u=3092;u<=3101;u++)g[u]=0;for(u=3106;u<=3138;u++)g[u]=0;for(u=3146;u<=3151;u++)g[u]=0;for(u=3153;u<=3166;u++)g[u]=0;for(u=3168;u<=3172;u++)g[u]=0;for(u=3174;u<=3203;u++)g[u]=0;for(u=3294;u<=3358;u++)g[u]=0;for(u=3367;u<=3403;u++)g[u]=0;for(u=3408;u<=3416;u++)g[u]=0;for(u=3417;u<=3438;u++)g[u]=2;for(u=3441;u<=3446;u++)g[u]=2;for(u=3447;u<=3450;u++)g[u]=0;for(u=3451;u<=3459;u++)g[u]=2;for(u=3460;u<=3478;u++)g[u]=0;for(u=3554;u<=3559;u++)g[u]=0;for(u=3560;u<=3570;u++)g[u]=2;for(u=3571;u<=3581;u++)g[u]=0;for(u=3594;u<=3597;u++)g[u]=0;for(u=3601;u<=3604;u++)g[u]=0;for(u=3637;u<=3639;u++)g[u]=0;for(u=3665;u<=3667;u++)g[u]=0;for(u=3693;u<=3695;u++)g[u]=0;for(u=3701;u<=3727;u++)g[u]=0;for(u=3728;u<=3739;u++)g[u]=2;for(u=3740;u<=3751;u++)g[u]=0;for(u=3753;u<=3760;u++)g[u]=2;for(u=3761;u<=3773;u++)g[u]=0;for(u=3775;u<=3777;u++)g[u]=0;for(u=3779;u<=3781;u++)g[u]=0;for(u=3783;u<=3785;u++)g[u]=0;for(u=3788;u<=3791;u++)g[u]=0;for(u=3797;u<=3802;u++)g[u]=0;for(u=3814;u<=3816;u++)g[u]=0;for(u=3825;u<=3829;u++)g[u]=0;for(u=3832;u<=3841;u++)g[u]=0;for(u=3844;u<=3852;u++)g[u]=0;for(u=3873;u<=3885;u++)g[u]=0;for(u=3890;u<=3893;u++)g[u]=0;for(u=3907;u<=3912;u++)g[u]=0;for(u=3942;u<=3950;u++)g[u]=0;for(u=3968;u<=3970;u++)g[u]=0;for(u=3973;u<=3976;u++)g[u]=0;for(u=3986;u<=3989;u++)g[u]=0;for(u=3994;u<=3997;u++)g[u]=0;for(u=4048;u<=4051;u++)g[u]=0;for(u=4056;u<=4063;u++)g[u]=0;for(u=4093;u<=4096;u++)g[u]=0;for(u=4390;u<=4398;u++)g[u]=0;for(u=4399;u<=4413;u++)g[u]=2;for(u=4418;u<=4433;u++)g[u]=2;for(u=4455;u<=4457;u++)g[u]=2;for(u=4484;u<=4489;u++)g[u]=0;for(u=4491;u<=4554;u++)g[u]=0;for(u=4568;u<=4589;u++)g[u]=0;for(u=4652;u<=4656;u++)g[u]=0;for(u=4766;u<=4800;u++)g[u]=0;for(u=5014;u<=5016;u++)g[u]=0;for(u=5069;u<=5072;u++)g[u]=0;for(u=5105;u<=5130;u++)g[u]=0;for(u=5167;u<=5188;u++)g[u]=0;for(u=5253;u<=5259;u++)g[u]=0;for(u=5269;u<=5275;u++)g[u]=0;for(u=5292;u<=5311;u++)g[u]=0;for(u=5329;u<=5331;u++)g[u]=0;for(u=5343;u<=5349;u++)g[u]=0;for(u=5355;u<=5357;u++)g[u]=0;for(u=5387;u<=5389;u++)g[u]=0;for(u=5459;u<=5463;u++)g[u]=0;for(u=5479;u<=5482;u++)g[u]=0;for(u=5518;u<=5520;u++)g[u]=0;for(u=5530;u<=5539;u++)g[u]=0;for(u=5550;u<=5552;u++)g[u]=0;for(u=5562;u<=5583;u++)g[u]=0;for(u=5623;u<=5625;u++)g[u]=2;for(u=5631;u<=5639;u++)g[u]=0;for(u=5649;u<=5653;u++)g[u]=0;for(u=5663;u<=5680;u++)g[u]=0;for(u=5682;u<=5685;u++)g[u]=0;for(u=5875;u<=5877;u++)g[u]=0;for(u=5896;u<=5899;u++)g[u]=0;for(u=5921;u<=5940;u++)g[u]=0;for(u=6050;u<=6125;u++)g[u]=0;for(u=6244;u<=6275;u++)g[u]=0;for(u=6328;u<=6348;u++)g[u]=0;for(u=6350;u<=6356;u++)g[u]=0;for(u=6366;u<=6372;u++)g[u]=0;for(u=6381;u<=6387;u++)g[u]=0;for(u=6393;u<=6404;u++)g[u]=0;for(u=6480;u<=6483;u++)g[u]=0;for(u=6511;u<=6514;u++)g[u]=0;for(u=6579;u<=6581;u++)g[u]=0;for(u=6619;u<=6624;u++)g[u]=0;for(u=6625;u<=6627;u++)g[u]=2;for(u=6628;u<=6632;u++)g[u]=0;for(u=6634;u<=6637;u++)g[u]=0;for(u=6669;u<=6692;u++)g[u]=0;for(u=6707;u<=6709;u++)g[u]=0;for(u=6720;u<=6723;u++)g[u]=0;for(u=6732;u<=6738;u++)g[u]=0;for(u=6931;u<=6933;u++)g[u]=0;for(u=6956;u<=6959;u++)g[u]=0;for(u=7005;u<=7007;u++)g[u]=0;for(u=7057;u<=7070;u++)g[u]=2;for(u=7074;u<=7082;u++)g[u]=0;for(u=7109;u<=7118;u++)g[u]=0;for(u=7119;u<=7127;u++)g[u]=1;for(u=7374;u<=7376;u++)g[u]=0;for(u=7528;u<=7586;u++)g[u]=0;for(u=7587;u<=7645;u++)g[u]=2;for(u=7692;u<=7696;u++)g[u]=0;for(u=7755;u<=7787;u++)g[u]=0;for(u=7791;u<=7795;u++)g[u]=0;for(u=7799;u<=7801;u++)g[u]=0;for(u=7803;u<=7805;u++)g[u]=0;for(u=7825;u<=7831;u++)g[u]=0;for(u=7845;u<=7859;u++)g[u]=0;for(u=8013;u<=8032;u++)g[u]=0;for(u=8065;u<=8068;u++)g[u]=1;for(u=8518;u<=8529;u++)g[u]=2;for(u=8533;u<=8536;u++)g[u]=2;for(u=8538;u<=8540;u++)g[u]=2;for(u=8677;u<=8679;u++)g[u]=0;for(u=8836;u<=8840;u++)g[u]=0;for(u=8857;u<=8859;u++)g[u]=0;for(u=8908;u<=8910;u++)g[u]=0;for(u=9154;u<=9159;u++)g[u]=0;for(u=9205;u<=9218;u++)g[u]=0;for(u=9271;u<=9273;u++)g[u]=0;for(u=9295;u<=9297;u++)g[u]=0;for(u=9356;u<=9360;u++)g[u]=0;for(u=9404;u<=9407;u++)g[u]=0;for(u=9476;u<=9482;u++)g[u]=0;for(u=9487;u<=9494;u++)g[u]=0;for(u=9697;u<=9699;u++)g[u]=0;for(u=9821;u<=9865;u++)g[u]=0;for(u=10285;u<=10291;u++)g[u]=0;for(u=10314;u<=10317;u++)g[u]=0;for(u=10448;u<=10465;u++)g[u]=0;for(u=10731;u<=10733;u++)g[u]=0;for(u=11114;u<=11118;u++)g[u]=0;for(u=20004;u<=20032;u++)g[u]=0;for(u=20047;u<=20049;u++)g[u]=0;for(u=20062;u<=20092;u++)g[u]=0;for(u=20135;u<=20138;u++)g[u]=0;for(u=20248;u<=20258;u++)g[u]=0;for(u=20348;u<=20358;u++)g[u]=0;for(u=20436;u<=20440;u++)g[u]=0;for(u=20822;u<=20824;u++)g[u]=0;for(u=20904;u<=20932;u++)g[u]=0;for(u=20934;u<=20936;u++)g[u]=0;for(u=21004;u<=21032;u++)g[u]=0;for(u=21035;u<=21037;u++)g[u]=0;for(u=21095;u<=21097;u++)g[u]=0;for(u=21148;u<=21150;u++)g[u]=0;for(u=21207;u<=21264;u++)g[u]=0;for(u=21307;u<=21364;u++)g[u]=0;for(u=21413;u<=21423;u++)g[u]=0;for(u=21453;u<=21463;u++)g[u]=0;for(u=21473;u<=21483;u++)g[u]=0;for(u=21780;u<=21782;u++)g[u]=0;for(u=21891;u<=21894;u++)g[u]=0;for(u=21896;u<=21899;u++)g[u]=0;for(u=22171;u<=22177;u++)g[u]=0;for(u=22181;u<=22187;u++)g[u]=0;for(u=22191;u<=22197;u++)g[u]=0;for(u=22207;u<=22222;u++)g[u]=0;for(u=22229;u<=22232;u++)g[u]=0;for(u=22234;u<=22236;u++)g[u]=0;for(u=22243;u<=22250;u++)g[u]=0;for(u=22262;u<=22265;u++)g[u]=0;for(u=22307;u<=22322;u++)g[u]=0;for(u=22348;u<=22357;u++)g[u]=0;for(u=22407;u<=22422;u++)g[u]=0;for(u=22462;u<=22465;u++)g[u]=0;for(u=22521;u<=22525;u++)g[u]=0;for(u=22607;u<=22622;u++)g[u]=0;for(u=22641;u<=22646;u++)g[u]=0;for(u=22648;u<=22657;u++)g[u]=0;for(u=22707;u<=22722;u++)g[u]=0;for(u=22762;u<=22765;u++)g[u]=0;for(u=22807;u<=22822;u++)g[u]=0;for(u=22991;u<=22994;u++)g[u]=0;for(u=23028;u<=23038;u++)g[u]=0;for(u=23301;u<=23333;u++)g[u]=2;for(u=23830;u<=23853;u++)g[u]=0;for(u=23866;u<=23872;u++)g[u]=0;for(u=23877;u<=23884;u++)g[u]=0;for(u=23886;u<=23894;u++)g[u]=0;for(u=23946;u<=23948;u++)g[u]=0;for(u=24311;u<=24313;u++)g[u]=0;for(u=24342;u<=24347;u++)g[u]=0;for(u=24370;u<=24374;u++)g[u]=10;for(u=24375;u<=24381;u++)g[u]=0;for(u=24718;u<=24721;u++)g[u]=0;for(u=24817;u<=24821;u++)g[u]=0;for(u=24877;u<=24882;u++)g[u]=0;for(u=24891;u<=24893;u++)g[u]=0;for(u=25391;u<=25395;u++)g[u]=0;for(u=25828;u<=25838;u++)g[u]=0;for(u=26191;u<=26195;u++)g[u]=0;for(u=26391;u<=26393;u++)g[u]=0;for(u=26701;u<=26722;u++)g[u]=0;for(u=26729;u<=26799;u++)g[u]=2;for(u=26801;u<=26803;u++)g[u]=2;for(u=26811;u<=26813;u++)g[u]=2;for(u=26847;u<=26870;u++)g[u]=2;for(u=26891;u<=26899;u++)g[u]=0;for(u=26901;u<=26923;u++)g[u]=0;for(u=26929;u<=26946;u++)g[u]=0;for(u=26948;u<=26998;u++)g[u]=0;for(u=27037;u<=27040;u++)g[u]=0;for(u=27205;u<=27232;u++)g[u]=0;for(u=27258;u<=27260;u++)g[u]=0;for(u=27391;u<=27398;u++)g[u]=0;for(u=27561;u<=27564;u++)g[u]=0;for(u=27571;u<=27574;u++)g[u]=0;for(u=27581;u<=27584;u++)g[u]=0;for(u=27591;u<=27594;u++)g[u]=0;for(u=27700;u<=27707;u++)g[u]=0;for(u=28191;u<=28193;u++)g[u]=0;for(u=28348;u<=28358;u++)g[u]=0;for(u=28402;u<=28432;u++)g[u]=0;for(u=28462;u<=28492;u++)g[u]=0;for(u=29118;u<=29122;u++)g[u]=0;for(u=29168;u<=29172;u++)g[u]=0;for(u=29177;u<=29185;u++)g[u]=0;for(u=29187;u<=29195;u++)g[u]=0;for(u=29900;u<=29903;u++)g[u]=0;for(u=30161;u<=30179;u++)g[u]=0;for(u=30491;u<=30494;u++)g[u]=0;for(u=30729;u<=30732;u++)g[u]=0;for(u=31251;u<=31259;u++)g[u]=0;for(u=31265;u<=31268;u++)g[u]=0;for(u=31275;u<=31279;u++)g[u]=0;for(u=31281;u<=31297;u++)g[u]=0;for(u=31461;u<=31469;u++)g[u]=0;for(u=31491;u<=31495;u++)g[u]=0;for(u=31917;u<=31922;u++)g[u]=0;for(u=31965;u<=32e3;u++)g[u]=0;for(u=32001;u<=32003;u++)g[u]=2;for(u=32005;u<=32031;u++)g[u]=2;for(u=32033;u<=32060;u++)g[u]=2;for(u=32064;u<=32067;u++)g[u]=2;for(u=32074;u<=32077;u++)g[u]=2;for(u=32081;u<=32086;u++)g[u]=0;for(u=32107;u<=32130;u++)g[u]=0;for(u=32133;u<=32159;u++)g[u]=0;for(u=32164;u<=32167;u++)g[u]=2;for(u=32180;u<=32199;u++)g[u]=0;for(u=32201;u<=32260;u++)g[u]=0;for(u=32301;u<=32360;u++)g[u]=0;for(u=32401;u<=32460;u++)g[u]=0;for(u=32501;u<=32560;u++)g[u]=0;for(u=32601;u<=32662;u++)g[u]=0;for(u=32664;u<=32667;u++)g[u]=2;for(u=32701;u<=32761;u++)g[u]=0;for(u=53001;u<=53004;u++)g[u]=0;for(u=53008;u<=53019;u++)g[u]=0;for(u=53021;u<=53032;u++)g[u]=0;for(u=53034;u<=53037;u++)g[u]=0;for(u=53042;u<=53046;u++)g[u]=0;for(u=53074;u<=53080;u++)g[u]=0;for(u=54001;u<=54004;u++)g[u]=0;for(u=54008;u<=54019;u++)g[u]=0;for(u=54021;u<=54032;u++)g[u]=0;for(u=54034;u<=54037;u++)g[u]=0;for(u=54042;u<=54046;u++)g[u]=0;for(u=54048;u<=54053;u++)g[u]=0;for(u=54074;u<=54080;u++)g[u]=0;for(u=54098;u<=54101;u++)g[u]=0;for(u=102001;u<=102040;u++)g[u]=0;for(u=102042;u<=102063;u++)g[u]=0;for(u=102065;u<=102067;u++)g[u]=0;for(u=102070;u<=102117;u++)g[u]=0;for(u=102122;u<=102216;u++)g[u]=0;for(u=102221;u<=102377;u++)g[u]=0;for(u=102382;u<=102388;u++)g[u]=0;for(u=102389;u<=102398;u++)g[u]=2;for(u=102399;u<=102444;u++)g[u]=0;for(u=102445;u<=102447;u++)g[u]=2;for(u=102448;u<=102458;u++)g[u]=0;for(u=102459;u<=102468;u++)g[u]=2;for(u=102469;u<=102499;u++)g[u]=0;for(u=102500;u<=102519;u++)g[u]=1;for(u=102520;u<=102524;u++)g[u]=0;for(u=102525;u<=102529;u++)g[u]=2;for(u=102530;u<=102588;u++)g[u]=0;for(u=102590;u<=102598;u++)g[u]=0;for(u=102601;u<=102603;u++)g[u]=0;for(u=102605;u<=102628;u++)g[u]=0;for(u=102629;u<=102646;u++)g[u]=2;for(u=102648;u<=102700;u++)g[u]=2;for(u=102701;u<=102703;u++)g[u]=0;for(u=102707;u<=102730;u++)g[u]=2;for(u=102733;u<=102758;u++)g[u]=2;for(u=102767;u<=102900;u++)g[u]=0;for(u=102901;u<=102933;u++)g[u]=2;for(u=102934;u<=102950;u++)g[u]=13;for(u=102951;u<=102963;u++)g[u]=0;for(u=102965;u<=102969;u++)g[u]=0;for(u=102971;u<=102973;u++)g[u]=0;for(u=102975;u<=102989;u++)g[u]=0;for(u=102990;u<=102992;u++)g[u]=1;for(u=102997;u<=103002;u++)g[u]=0;for(u=103003;u<=103008;u++)g[u]=2;for(u=103009;u<=103011;u++)g[u]=0;for(u=103012;u<=103014;u++)g[u]=2;for(u=103019;u<=103021;u++)g[u]=0;for(u=103022;u<=103024;u++)g[u]=2;for(u=103029;u<=103031;u++)g[u]=0;for(u=103032;u<=103034;u++)g[u]=2;for(u=103065;u<=103068;u++)g[u]=0;for(u=103074;u<=103076;u++)g[u]=0;for(u=103077;u<=103079;u++)g[u]=1;for(u=103080;u<=103082;u++)g[u]=0;for(u=103083;u<=103085;u++)g[u]=2;for(u=103090;u<=103093;u++)g[u]=0;for(u=103097;u<=103099;u++)g[u]=0;for(u=103100;u<=103102;u++)g[u]=2;for(u=103107;u<=103109;u++)g[u]=0;for(u=103110;u<=103112;u++)g[u]=2;for(u=103113;u<=103116;u++)g[u]=0;for(u=103117;u<=103120;u++)g[u]=2;for(u=103153;u<=103157;u++)g[u]=0;for(u=103158;u<=103162;u++)g[u]=2;for(u=103163;u<=103165;u++)g[u]=0;for(u=103166;u<=103168;u++)g[u]=1;for(u=103169;u<=103171;u++)g[u]=2;for(u=103186;u<=103188;u++)g[u]=0;for(u=103189;u<=103191;u++)g[u]=2;for(u=103192;u<=103195;u++)g[u]=0;for(u=103196;u<=103199;u++)g[u]=2;for(u=103200;u<=103224;u++)g[u]=0;for(u=103225;u<=103227;u++)g[u]=1;for(u=103232;u<=103237;u++)g[u]=0;for(u=103238;u<=103243;u++)g[u]=2;for(u=103244;u<=103246;u++)g[u]=0;for(u=103247;u<=103249;u++)g[u]=2;for(u=103254;u<=103256;u++)g[u]=0;for(u=103257;u<=103259;u++)g[u]=2;for(u=103264;u<=103266;u++)g[u]=0;for(u=103267;u<=103269;u++)g[u]=2;for(u=103300;u<=103375;u++)g[u]=0;for(u=103381;u<=103383;u++)g[u]=0;for(u=103384;u<=103386;u++)g[u]=1;for(u=103387;u<=103389;u++)g[u]=0;for(u=103390;u<=103392;u++)g[u]=2;for(u=103397;u<=103399;u++)g[u]=0;for(u=103400;u<=103471;u++)g[u]=2;for(u=103476;u<=103478;u++)g[u]=0;for(u=103479;u<=103481;u++)g[u]=2;for(u=103486;u<=103488;u++)g[u]=0;for(u=103489;u<=103491;u++)g[u]=2;for(u=103492;u<=103495;u++)g[u]=0;for(u=103496;u<=103499;u++)g[u]=2;for(u=103528;u<=103543;u++)g[u]=0;for(u=103544;u<=103548;u++)g[u]=2;for(u=103549;u<=103551;u++)g[u]=0;for(u=103552;u<=103554;u++)g[u]=1;for(u=103555;u<=103557;u++)g[u]=2;for(u=103558;u<=103560;u++)g[u]=0;for(u=103571;u<=103573;u++)g[u]=0;for(u=103574;u<=103576;u++)g[u]=2;for(u=103577;u<=103580;u++)g[u]=0;for(u=103581;u<=103583;u++)g[u]=2;for(u=103595;u<=103694;u++)g[u]=0;for(u=103696;u<=103699;u++)g[u]=0;for(u=103700;u<=103793;u++)g[u]=2;for(u=103794;u<=103890;u++)g[u]=0;for(u=103891;u<=103896;u++)g[u]=2;for(u=103900;u<=103971;u++)g[u]=2;for(u=103972;u<=103977;u++)g[u]=0;for(u=112e3;u<=112101;u++)g[u]=0;const r3=[102100,102113,3857,3785,900913],nL=[104905,104971],oL=[4326,...r3,...nL],$c=[-20037508342788905e-9,20037508342788905e-9],wg=[-20037508342787e-6,20037508342787e-6],Im={wkTemplate:'PROJCS["WGS_1984_Web_Mercator_Auxiliary_Sphere",GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator_Auxiliary_Sphere"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],PARAMETER["Auxiliary_Sphere_Type",0.0],UNIT["Meter",1.0]]',valid:$c,origin:wg,dx:1e-5},i3={102113:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator",GEOGCS["GCS_WGS_1984_Major_Auxiliary_Sphere",DATUM["D_WGS_1984_Major_Auxiliary_Sphere",SPHEROID["WGS_1984_Major_Auxiliary_Sphere",6378137.0,0.0]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],UNIT["Meter",1.0]]',valid:$c,origin:wg,dx:1e-5},102100:Im,3785:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator",GEOGCS["GCS_WGS_1984_Major_Auxiliary_Sphere",DATUM["D_WGS_1984_Major_Auxiliary_Sphere",SPHEROID["WGS_1984_Major_Auxiliary_Sphere",6378137.0,0.0]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],UNIT["Meter",1.0]]',valid:$c,origin:wg,dx:1e-5},3857:Im,4326:{wkTemplate:'GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",{Central_Meridian}],UNIT["Degree",0.0174532925199433]]',altTemplate:'PROJCS["WGS_1984_Plate_Carree",GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Plate_Carree"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],UNIT["Degrees",111319.491]]',valid:[-180,180],origin:[-180,90],dx:1e-5},104971:{wkTemplate:'GEOGCS["Mars_2000_(Sphere)",DATUM["Mars_2000_(Sphere)",SPHEROID["Mars_2000_(Sphere)",3396190.0,0.0]],PRIMEM["Reference_Meridian",0.0],UNIT["Degree",0.0174532925199433]]',valid:[-180,180],origin:[-180,90],dx:1e-5},104905:{wkTemplate:'GEOGCS["GCS_Mars_2000",DATUM["D_Mars_2000",SPHEROID["Mars_2000_IAU_IAG",3396190.0,169.8944472236118]],PRIMEM["Reference_Meridian",0.0],UNIT["Degree",0.0174532925199433]]',valid:[-180,180],origin:[-180,90],dx:1e-5},900913:Im};function ut(e,t){if(e===t)return!0;if(e==null||t==null)return!1;const r=e.wkid,i=t.wkid;if(r!=null||i!=null){if(r===i||Ai(e)&&Ai(t))return!0;const o=e.latestWkid;if(o!=null&&i===o)return!0;const a=t.latestWkid;return a!=null&&r===a}let s,n;return e.wkt2&&t.wkt2?(s=e.wkt2,n=t.wkt2):e.wkt&&t.wkt&&(s=e.wkt,n=t.wkt),!(!s||!n)&&s.toUpperCase()===n.toUpperCase()}function It(e){const t=e==null?void 0:e.wkid;return t!=null&&t>=2e3&&i3[t]||null}function s3(e){if(!e)return;const{wkid:t,vcsWkid:r}=e;if(t)return r?JSON.stringify({wkid:t,vcsWkid:r}):String(t);const i=e.wkt||e.wkt2;return JSON.stringify(i?r?{wkt:i,vcsWkid:r}:{wkt:i}:{})}function Tl(e){if(!ir(e))return!1;const{wkid:t}=e;if(t)return g[t]==null;const r=e.wkt2||e.wkt;return!!r&&/^\s*(?:GEOGCS|GEOGCRS|GEOGRAPHICCRS)/i.test(r)}function aL(e){return!(n3(e)||o3(e))}function Po(e){return(e==null?void 0:e.wkid)===4326}function LX(e){return/^\s*(?:GEOD|GEODETIC|GEOG|GEOGRAPHIC|PROJ|PROJECTED|VERT|VERTICAL|ENG|ENGINEERING|PARAMETRIC|TIME|DERIVEDPROJ|COMPOUND|BOUND)CRS/i.test(e)}function sb(e){return(e==null?void 0:e.wkid)===Ao.CGCS2000}function Ai(e){const t=e==null?void 0:e.wkid;return t!=null&&t>=2e3&&r3.includes(t)}function lL(e){return(e==null?void 0:e.wkid)===32662}function Rf(e){return e===Ao.GCSMARS2000||e===Ao.GCSMARS2000_SPHERE}function n3(e){return Rf(e==null?void 0:e.wkid)}function kf(e){return e===Ao.GCSMOON2000}function o3(e){return kf(e==null?void 0:e.wkid)}function uL(e){const t=e==null?void 0:e.wkid;return t!=null&&t>=2e3&&oL.includes(t)}function ir(e){if(e==null)return!1;const t=e.wkid;return t!=null&&t>=2e3||e.wkt2!=null||e.wkt!=null}const a3={wkid:4326,wkt:t_(i3[4326].wkTemplate,{Central_Meridian:"0.0"})},l3={wkid:102100,latestWkid:3857},cL={wkid:32662};function O_(e){return{wkt:`GEOCCS["Spherical geocentric",
    DATUM["Not specified",
      SPHEROID["Sphere",${e.radius},0]],
    PRIMEM["Greenwich",0.0,
      AUTHORITY["EPSG","8901"]],
    UNIT["m",1.0],
    AXIS["Geocentric X",OTHER],
    AXIS["Geocentric Y",EAST],
    AXIS["Geocentric Z",NORTH]
  ]`}}const hL=O_(Be),C_=O_($i),I_=O_(yn),dL={wkt:`GEOCCS["WGS 84",
  DATUM["WGS_1984",
    SPHEROID["WGS 84",${Be.radius},298.257223563,
      AUTHORITY["EPSG","7030"]],
    AUTHORITY["EPSG","6326"]],
  PRIMEM["Greenwich",0,
    AUTHORITY["EPSG","8901"]],
  UNIT["m",1.0,
    AUTHORITY["EPSG","9001"]],
  AXIS["Geocentric X",OTHER],
  AXIS["Geocentric Y",OTHER],
  AXIS["Geocentric Z",NORTH],
  AUTHORITY["EPSG","4978"]
]`},pL=C_.wkt.toUpperCase(),fL=I_.wkt.toUpperCase();function mL(e){if(e!=null&&ir(e)){const t=e.wkid,r=e.wkt2??e.wkt;if(Rf(t))return $i;const i=r==null?void 0:r.toUpperCase();if(r&&i===pL)return $i;if(kf(t)||i&&i===fL)return yn}return Be}function DX(e){return Rf(e)?$i:kf(e)?yn:Be}function Ip(e){return ut(e,hL)}function gn(e){return Ip(e)||ut(e,C_)||ut(e,I_)}const FX=39.37,yL=Be.radius*Math.PI/200,u3=/(?:LENGTH)?UNIT\[([^\]]+)]]$/i,al=g,c3=/UNIT\[([^\]]+)]/i,gL=new Set([4305,4807,4810,4811,4812,4816,4819,4821,4901,4902,37225,104025,104026,104139,104140]),_L=qt()({millimeter:"millimeters",centimeter:"centimeters",meter:"meters",meter_german:"german-meters",kilometer:"kilometers",decimeter:"decimeters",micrometer:"micrometers",nanometer:"nanometers","50_kilometers":"50-kilometers","150_kilometers":"150-kilometers",foot:"feet",foot_us:"us-feet",foot_clarke:"clarke-feet",fathom:"fathoms",nautical_mile:"nautical-miles",chain_us:"us-chains",link_us:"us-links",mile_us:"us-miles",yard_clarke:"clarke-yards",chain_clarke:"clarke-chains",link_clarke:"clarke-links",yard_sears:"sears-yards",foot_sears:"sears-feet",chain_sears:"sears-chains",link_sears:"sears-links",yard_benoit_1895_a:"benoit-1895-a-yards",foot_benoit_1895_a:"benoit-1895-a-feet",chain_benoit_1895_a:"benoit-1895-a-chains",link_benoit_1895_a:"benoit-1895-a-links",yard_benoit_1895_b:"benoit-1895-b-yards",foot_benoit_1895_b:"benoit-1895-b-feet",chain_benoit_1895_b:"benoit-1895-b-chains",link_benoit_1895_b:"benoit-1895-b-links",foot_1865:"1865-feet",foot_indian:"indian-feet",foot_indian_1937:"indian-1937-feet",foot_indian_1962:"indian-1962-feet",foot_indian_1975:"indian-1975-feet",yard_indian:"indian-yards",yard_indian_1937:"indian-1937-yards",yard_indian_1962:"indian-1962-yards",yard_indian_1975:"indian-1975-yards",statute_mile:"statute-miles",foot_gold_coast:"gold-coast-feet",foot_british_1936:"british-1936-feet",yard:"yards",chain:"chains",link:"links",yard_sears_1922_truncated:"sears-1922-truncated-yards",foot_sears_1922_truncated:"sears-1922-truncated-feet",chain_sears_1922_truncated:"sears-1922-truncated-chains",link_sears_1922_truncated:"sears-1922-truncated-links",yard_us:"us-yards",inch:"inches",inch_us:"us-inches",rod:"rods",rod_us:"us-rods",nautical_mile_us:"us-nautical-miles",nautical_mile_uk:"uk-nautical-miles",smoot:"smoots",vara_tx:"tx-vara",point:"points"}),kr=e=>e*e,Ss=e=>e*e*e,Ec={length:{baseUnit:"meters",units:{millimeters:{inBaseUnits:.001},centimeters:{inBaseUnits:.01},meters:{inBaseUnits:1},feet:{inBaseUnits:.3048},"us-feet":{inBaseUnits:.3048006096012192},"clarke-feet":{inBaseUnits:.3047972654},fathoms:{inBaseUnits:1.8288},"nautical-miles":{inBaseUnits:1852},"german-meters":{inBaseUnits:1.0000135965},"us-chains":{inBaseUnits:20.11684023368047},"us-links":{inBaseUnits:.2011684023368047},"us-miles":{inBaseUnits:1609.347218694438},kilometers:{inBaseUnits:1e3},"clarke-yards":{inBaseUnits:.9143917962},"clarke-chains":{inBaseUnits:20.1166195164},"clarke-links":{inBaseUnits:.201166195164},"sears-yards":{inBaseUnits:.9143984146160287},"sears-feet":{inBaseUnits:.3047994715386762},"sears-chains":{inBaseUnits:20.11676512155263},"sears-links":{inBaseUnits:.2011676512155263},"benoit-1895-a-yards":{inBaseUnits:.9143992},"benoit-1895-a-feet":{inBaseUnits:.3047997333333333},"benoit-1895-a-chains":{inBaseUnits:20.1167824},"benoit-1895-a-links":{inBaseUnits:.201167824},"benoit-1895-b-yards":{inBaseUnits:.9143992042898124},"benoit-1895-b-feet":{inBaseUnits:.3047997347632708},"benoit-1895-b-chains":{inBaseUnits:20.11678249437587},"benoit-1895-b-links":{inBaseUnits:.2011678249437587},"1865-feet":{inBaseUnits:.3048008333333334},"indian-feet":{inBaseUnits:.3047995102481469},"indian-1937-feet":{inBaseUnits:.30479841},"indian-1962-feet":{inBaseUnits:.3047996},"indian-1975-feet":{inBaseUnits:.3047995},"indian-yards":{inBaseUnits:.9143985307444408},"indian-1937-yards":{inBaseUnits:.91439523},"indian-1962-yards":{inBaseUnits:.9143988},"indian-1975-yards":{inBaseUnits:.9143985},miles:{inBaseUnits:1609.344},"statute-miles":{inBaseUnits:1609.344},"gold-coast-feet":{inBaseUnits:.3047997101815088},"british-1936-feet":{inBaseUnits:.3048007491},yards:{inBaseUnits:.9144},chains:{inBaseUnits:20.1168},links:{inBaseUnits:.201168},"sears-1922-truncated-yards":{inBaseUnits:.914398},"sears-1922-truncated-feet":{inBaseUnits:.3047993333333334},"sears-1922-truncated-chains":{inBaseUnits:20.116756},"sears-1922-truncated-links":{inBaseUnits:.20116756},"us-yards":{inBaseUnits:.9144018288036576},decimeters:{inBaseUnits:.1},inches:{inBaseUnits:.0254},"us-inches":{inBaseUnits:.0254000508001016},rods:{inBaseUnits:5.0292},"us-rods":{inBaseUnits:5.029210058420118},"us-nautical-miles":{inBaseUnits:1853.248},"uk-nautical-miles":{inBaseUnits:1853.184},smoots:{inBaseUnits:1.7018},"tx-vara":{inBaseUnits:.8466683600033867},points:{inBaseUnits:.0003527777777777778},micrometers:{inBaseUnits:1e-6},nanometers:{inBaseUnits:1e-9},"50-kilometers":{inBaseUnits:5e4},"150-kilometers":{inBaseUnits:15e4}}},area:{baseUnit:"square-meters",units:{"square-millimeters":{inBaseUnits:kr(.001)},"square-centimeters":{inBaseUnits:kr(.01)},"square-decimeters":{inBaseUnits:kr(.1)},"square-meters":{inBaseUnits:1},"square-kilometers":{inBaseUnits:kr(1e3)},"square-inches":{inBaseUnits:kr(.0254)},"square-feet":{inBaseUnits:kr(.3048)},"square-yards":{inBaseUnits:kr(.9144)},"square-miles":{inBaseUnits:kr(1609.344)},"square-nautical-miles":{inBaseUnits:kr(1852)},"square-us-feet":{inBaseUnits:kr(1200/3937)},acres:{inBaseUnits:.0015625*kr(1609.344)},ares:{inBaseUnits:100},hectares:{inBaseUnits:1e4}}},volume:{baseUnit:"liters",units:{liters:{inBaseUnits:1},"cubic-millimeters":{inBaseUnits:1e3*Ss(.001)},"cubic-centimeters":{inBaseUnits:1e3*Ss(.01)},"cubic-decimeters":{inBaseUnits:1e3*Ss(.1)},"cubic-meters":{inBaseUnits:1e3},"cubic-kilometers":{inBaseUnits:1e3*Ss(1e3)},"cubic-inches":{inBaseUnits:1e3*Ss(.0254)},"cubic-feet":{inBaseUnits:1e3*Ss(.3048)},"cubic-yards":{inBaseUnits:1e3*Ss(.9144)},"cubic-miles":{inBaseUnits:1e3*Ss(1609.344)}}},angle:{baseUnit:"radians",units:{radians:{inBaseUnits:1},degrees:{inBaseUnits:Math.PI/180}}}},vL=(()=>{const e={};for(const t in Ec)for(const r in Ec[t].units)e[r]=t;return e})();function wL(e,t,r){return e*Ec[r].units[t].inBaseUnits}function bL(e,t,r){return e/Ec[r].units[t].inBaseUnits}const h3=["metric","imperial","inches","feet","yards","miles","nautical-miles","us-feet","meters","kilometers"],SL=new Map([["meters","square-meters"],["feet","square-feet"],["us-feet","square-us-feet"]]);function bg(e){const t=vL[e];if(!t)throw new Error("unknown type");return t}function nb(e,t=null){return t=t||bg(e),Ec[t].baseUnit===e}function ti(e,t,r){if(t===r)return e;const i=bg(t);if(i!==bg(r))throw new Error("incompatible units");const s=nb(t,i)?e:wL(e,t,i);return nb(r,i)?s:bL(s,r,i)}function UX(e,t,r,i=!1){if(!i&&Tl(t))throw new Error("Unable to convert from an angular unit to a linear unit.");const s=jo(t);return s!==r&&(e=s?ti(e,s,r):ti(e*=ki(t),"meters",r)),e}function jX(e,t,r,i=!1){if(!i&&Tl(r))throw new Error("Unable to convert from a linear unit to an angular unit.");const s=jo(r);return t!==s&&(e=s?ti(e,t,s):ti(e,t,"meters")/ki(r)),e}function TL(e){switch(e){case"metric":return"meters";case"imperial":return"feet";default:return e}}function GX(e){return TL(e)}function zX(e){switch(e){case"metric":return"square-meters";case"imperial":return"square-feet";default:return e}}function VX(e,t){const r=ti(e,t,"meters");return Math.abs(r)<3e3?"meters":"kilometers"}function BX(e,t){const r=ti(e,t,"meters");return Math.abs(r)<1e5?"meters":"kilometers"}function HX(e,t){const r=ti(e,t,"feet");return Math.abs(r)<1e3?"feet":"miles"}function qX(e,t){const r=ti(e,t,"feet");return Math.abs(r)<1e5?"feet":"miles"}function WX(e,t){const r=ti(e,t,"square-meters");return Math.abs(r)<3e6?"square-meters":"square-kilometers"}function ZX(e,t){const r=ti(e,t,"square-feet");return Math.abs(r)<1e6?"square-feet":"square-miles"}function JX(e,t,r){return ti(e,t,"meters")/(r*Math.PI/180)}function R_(e){return _L.fromJSON(e.toLowerCase())||null}function ob(e){if(e!=null&&!aL(e))return 1;const t=ki(e);return t>1e5?1:t}function d3(e){return ki(e)>=mL(e).metersPerDegree?"meters":jo(e)}function ki(e,t=Be.metersPerDegree){return $L(e,!0)??t}function $L(e,t=!1){const r=(e==null?void 0:e.wkid)??null,i=(e==null?void 0:e.wkt2)??(e==null?void 0:e.wkt)??null;let s=null;if(r){if(Rf(r))return $i.metersPerDegree;if(kf(r))return yn.metersPerDegree;s=al.values[al[r]],!s&&t&&gL.has(r)&&(s=yL)}else i&&(m3(i)?s=ab(u3.exec(i),s):f3(i)&&(s=ab(c3.exec(i),s)));return s}function YX(e){return Tl(e)?1:ki(e)}function ab(e,t){return e!=null&&e[1]?p3(e[1]):t}function p3(e){return parseFloat(e.split(",")[1])}function jo(e){const t=(e==null?void 0:e.wkid)??null,r=(e==null?void 0:e.wkt2)??(e==null?void 0:e.wkt)??null;let i=null;if(t)i=al.units[al[t]];else if(r){const s=m3(r)?u3:f3(r)?c3:null;if(s){const n=s.exec(r);n!=null&&n[1]&&(i=ML(n[1]))}}return i!=null?R_(i):null}function KX(e){const t=jo(e);return t!=null&&h3.includes(t)?t:null}function XX(e){const t=d3(e);return t!=null&&h3.includes(t)?t:null}function QX(e){const t=jo(e);return t==null?null:SL.get(t)}function f3(e){return/^GEOCCS/i.test(e)}function m3(e){return/^\s*(?:PROJCS|PROJCRS|PROJECTEDCRS)/i.test(e)}const EL=1e-7;function ML(e){const t=/[\\"']{1}([^\\"']+)/.exec(e);let r=t==null?void 0:t[1];if(!r||!R_(r)){const i=p3(e);r=null;const s=al.values;for(let n=0;n<s.length;++n)if(Math.abs(i-s[n])<EL){r=al.units[n];break}}return r}function eQ(e){const t=jo(e);if(t==null)return null;switch(t){case"feet":case"us-feet":case"clarke-feet":case"fathoms":case"nautical-miles":case"us-chains":case"us-links":case"us-miles":case"clarke-yards":case"clarke-chains":case"clarke-links":case"sears-yards":case"sears-feet":case"sears-chains":case"sears-links":case"benoit-1895-a-yards":case"benoit-1895-a-feet":case"benoit-1895-a-chains":case"benoit-1895-a-links":case"benoit-1895-b-yards":case"benoit-1895-b-feet":case"benoit-1895-b-chains":case"benoit-1895-b-links":case"1865-feet":case"indian-feet":case"indian-1937-feet":case"indian-1962-feet":case"indian-1975-feet":case"indian-yards":case"indian-1937-yards":case"indian-1962-yards":case"indian-1975-yards":case"statute-miles":case"gold-coast-feet":case"british-1936-feet":case"yards":case"chains":case"links":case"sears-1922-truncated-yards":case"sears-1922-truncated-feet":case"sears-1922-truncated-chains":case"sears-1922-truncated-links":case"us-yards":case"inches":case"us-inches":case"rods":case"us-rods":case"us-nautical-miles":case"uk-nautical-miles":case"smoots":case"tx-vara":case"points":return"imperial";case"millimeters":case"centimeters":case"meters":case"german-meters":case"kilometers":case"decimeters":case"micrometers":case"nanometers":case"50-kilometers":case"150-kilometers":return"metric"}return null}const xL={esriAcres:"acres",esriAres:"ares",esriHectares:"hectares",esriSquareCentimeters:"square-centimeters",esriSquareDecimeters:"square-decimeters",esriSquareFeet:"square-feet",esriSquareInches:"square-inches",esriSquareKilometers:"square-kilometers",esriSquareMeters:"square-meters",esriSquareMiles:"square-miles",esriSquareMillimeters:"square-millimeters",esriSquareUsFeet:"square-us-feet",esriSquareYards:"square-yards"},AL={esriCentimeters:"centimeters",esriDecimeters:"decimeters",esriFeet:"feet",esriInches:"inches",esriKilometers:"kilometers",esriMeters:"meters",esriMiles:"miles",esriMillimeters:"millimeters",esriNauticalMiles:"nautical-miles",esriYards:"yards"},PL={esriDUDecimalDegrees:"degrees",esriDURadians:"radians"},tQ=qt()(xL),rQ=qt()(AL),iQ=qt()(PL);var oi;let ye=oi=class extends j{static fromJSON(e){if(!e)return null;if((e==null?void 0:e.wkid)===102100)return oi.WebMercator;if((e==null?void 0:e.wkid)===4326)return oi.WGS84;const t=new oi;return t.read(e),t}constructor(e){super(e),this.latestWkid=null,this.wkid=null,this.wkt=null,this.wkt2=null,this.vcsWkid=null,this.latestVcsWkid=null,this.imageCoordinateSystem=null}normalizeCtorArgs(e){return e&&typeof e=="object"?e:{[typeof e=="string"?"wkt":"wkid"]:e}}get isWGS84(){return Po(this)}get isWebMercator(){return Ai(this)}get isGeographic(){return Tl(this)}get isWrappable(){return uL(this)}get metersPerUnit(){return ki(this)}get unit(){return jo(this)||(this.isGeographic?"degrees":null)}writeWkt(e,t){this.wkid||(t.wkt=e)}clone(){if(this===oi.WGS84)return new oi(a3);if(this===oi.WebMercator)return new oi(l3);const e=new oi;return this.wkid!=null?(e.wkid=this.wkid,this.latestWkid!=null&&(e.latestWkid=this.latestWkid),this.vcsWkid!=null&&(e.vcsWkid=this.vcsWkid),this.latestVcsWkid!=null&&(e.latestVcsWkid=this.latestVcsWkid)):(this.wkt!=null&&(e.wkt=this.wkt),this.wkt2!=null&&(e.wkt2=this.wkt2)),this.imageCoordinateSystem&&(e.imageCoordinateSystem=C(this.imageCoordinateSystem)),e}equals(e){if(e==null)return!1;if(this.imageCoordinateSystem||e.imageCoordinateSystem){if(this.imageCoordinateSystem==null||e.imageCoordinateSystem==null)return!1;const{id:t,referenceServiceName:r}=e.imageCoordinateSystem,{geodataXform:i}=e.imageCoordinateSystem,s=this.imageCoordinateSystem;return t==null||i?JSON.stringify(s)===JSON.stringify(e.imageCoordinateSystem):r?s.id===t&&s.referenceServiceName===r:s.id===t}return ut(this,e)}toJSON(e){return this.write(void 0,e)}};ye.GCS_NAD_1927=null,ye.WGS84=null,ye.WebMercator=null,ye.PlateCarree=null,c([d({readOnly:!0})],ye.prototype,"isWGS84",null),c([d({readOnly:!0})],ye.prototype,"isWebMercator",null),c([d({readOnly:!0})],ye.prototype,"isGeographic",null),c([d({readOnly:!0})],ye.prototype,"isWrappable",null),c([d({type:Te,json:{write:!0}})],ye.prototype,"latestWkid",void 0),c([d({readOnly:!0})],ye.prototype,"metersPerUnit",null),c([d({readOnly:!0})],ye.prototype,"unit",null),c([d({type:Te,json:{write:!0,origins:{"web-scene":{write:{overridePolicy(){return{isRequired:this.wkt==null}}}}}}})],ye.prototype,"wkid",void 0),c([d({type:String,json:{origins:{"web-scene":{write:{overridePolicy(){return{isRequired:this.wkid==null}}}}}}})],ye.prototype,"wkt",void 0),c([oe("wkt"),oe("web-scene","wkt")],ye.prototype,"writeWkt",null),c([d({type:String,json:{write:!1}})],ye.prototype,"wkt2",void 0),c([d({type:Te,json:{write:!0}})],ye.prototype,"vcsWkid",void 0),c([d({type:Te,json:{write:!0}})],ye.prototype,"latestVcsWkid",void 0),c([d()],ye.prototype,"imageCoordinateSystem",void 0),ye=oi=c([S("esri.geometry.SpatialReference")],ye),ye.prototype.toJSON.isDefaultToJSON=!0,ye.GCS_NAD_1927=q.freeze(new ye({wkid:4267,wkt:'GEOGCS["GCS_North_American_1927",DATUM["D_North_American_1927",SPHEROID["Clarke_1866",6378206.4,294.9786982]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]]'})),ye.WGS84=q.freeze(new ye(a3)),ye.WebMercator=q.freeze(new ye(l3)),ye.PlateCarree=q.freeze(new ye(cL));const ae=ye;function de(e,t,r){let i,s;return t===void 0||Array.isArray(t)?(s=e,r=t,i=[void 0]):(s=t,i=Array.isArray(e)?e:[e]),(n,o)=>{const a=n.constructor.prototype;i.forEach(l=>{const h=aE(n,l,s);h.read&&typeof h.read=="object"||(h.read={}),h.read.reader=a[o],r&&(h.read.source=(h.read.source||[]).concat(r))})}}let ai=class extends j{constructor(...t){super(...t),this.type=null,this.hasM=!1,this.hasZ=!1,this.spatialReference=ae.WGS84}get cache(){return this.commitProperty("spatialReference"),{}}get extent(){return null}readSpatialReference(t,r){if(t instanceof ae)return t;if(t!=null){const i=new ae;return i.read(t,r),i}return t}clone(){return console.warn(".clone() is not implemented for "+this.declaredClass),null}clearCache(){this.notifyChange("cache")}getCacheValue(t){return this.cache[t]}setCacheValue(t,r){this.cache[t]=r}};c([d()],ai.prototype,"type",void 0),c([d({readOnly:!0})],ai.prototype,"cache",null),c([d({readOnly:!0})],ai.prototype,"extent",null),c([d({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],ai.prototype,"hasM",void 0),c([d({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],ai.prototype,"hasZ",void 0),c([d({type:ae,json:{write:!0},value:ae.WGS84})],ai.prototype,"spatialReference",void 0),c([de("spatialReference")],ai.prototype,"readSpatialReference",null),ai=c([S("esri.geometry.Geometry")],ai);const ys=ai,OL=Object.prototype.toString;function CL(e){const t="__accessorMetadata__"in e?Rt(e):e;return function(...r){if(r.push(t),typeof r[2]=="number")throw new Error("Using @cast has parameter decorator is not supported since 4.16");return IL.apply(this,r)}}function IL(e,t,r,i){wf(e,t).cast=i}function RL(e){return(t,r)=>{wf(t,e).cast=t[r]}}function tt(...e){if(e.length!==3||typeof e[1]!="string")return e.length===1&&OL.call(e[0])==="[object Function]"?CL(e[0]):e.length===1&&typeof e[0]=="string"?RL(e[0]):void 0}function ll(e){if(e&&typeof e=="object"&&"type"in e&&e.type==="mesh")throw new I("Mesh geometries are not supported for this operation")}function kL(e){e.forEach(ll)}const NL=57.29577951308232,LL=.017453292519943;function lb(e){return e*NL}function ub(e){return e*LL}function nQ(e){return Math.PI/2-2*Math.atan(Math.exp(-e/Be.radius))}function Sg(e){return e.wkid!=null||e.wkt!=null}const Rm=[0,0];function Rp(e,t,r,i,s){const n=e,o=s;if(o.spatialReference=r,"x"in n&&"x"in o)[o.x,o.y]=t(n.x,n.y,Rm,i);else if("xmin"in n&&"xmin"in o)[o.xmin,o.ymin]=t(n.xmin,n.ymin,Rm,i),[o.xmax,o.ymax]=t(n.xmax,n.ymax,Rm,i);else if("paths"in n&&"paths"in o||"rings"in n&&"rings"in o){const a="paths"in n?n.paths:n.rings,l=[];let h;for(let p=0;p<a.length;p++){const f=a[p];h=[],l.push(h);for(let m=0;m<f.length;m++)h.push(t(f[m][0],f[m][1],[0,0],i)),f[m].length>2&&h[m].push(f[m][2]),f[m].length>3&&h[m].push(f[m][3])}"paths"in o?o.paths=l:o.rings=l}else if("points"in n&&"points"in o){const a=n.points,l=[];for(let h=0;h<a.length;h++)l[h]=t(a[h][0],a[h][1],[0,0],i),a[h].length>2&&l[h].push(a[h][2]),a[h].length>3&&l[h].push(a[h][3]);o.points=l}return s}function fd(e,t){const r=e&&(Sg(e)?e:e.spatialReference),i=t&&(Sg(t)?t:t.spatialReference);return!(e&&"type"in e&&e.type==="mesh"||t&&"type"in t&&t.type==="mesh"||!r||!i)&&(!!ut(i,r)||Ai(i)&&Po(r)||Ai(r)&&Po(i))}function Nf(e,t){if(e==null)return null;const r=e.spatialReference,i=t&&(Sg(t)?t:t.spatialReference);return fd(r,i)?ut(r,i)?C(e):Ai(i)?Rp(e,Ca,ae.WebMercator,!1,C(e)):Po(i)?Rp(e,Lf,ae.WGS84,!1,C(e)):null:null}function Ca(e,t,r=[0,0]){t>89.99999?t=89.99999:t<-89.99999&&(t=-89.99999);const i=ub(t);return r[0]=ub(e)*Be.radius,r[1]=Be.halfSemiMajorAxis*Math.log((1+Math.sin(i))/(1-Math.sin(i))),r}function Lf(e,t,r=[0,0],i=!1){if(e===$c[0])r[0]=-180;else if(e===$c[1])r[0]=180;else{const s=lb(e/Be.radius);r[0]=i?s:s-360*Math.floor((s+180)/360)}return r[1]=lb(Math.PI/2-2*Math.atan(Math.exp(-t/Be.radius))),r}function So(e,t=!1,r=C(e)){return ll(e),ll(r),Rp(e,Ca,ae.WebMercator,t,r)}function su(e,t=!1,r=C(e)){return ll(e),ll(r),Rp(e,Lf,ae.WGS84,t,r)}function y3(e,t){const r=e.x-t.x,i=e.y-t.y,s=e.z!=null&&t.z!=null?e.z-t.z:0;return Math.sqrt(r*r+i*i+s*s)}function DL(e){var t;return((t=g3(e,_3))==null?void 0:t[0])??null}function FL(e){var t;return((t=g3(e,_3))==null?void 0:t[1])??null}function g3({x:e,y:t,spatialReference:r},i=[0,0]){if(r){if(Ai(r))return Lf(e,t,i);if(Tl(r))return i[0]=e,i[1]=t,i}return null}const _3=[0,0];var md;const km=[0,0];function cb(e){return e&&(e.declaredClass==="esri.geometry.SpatialReference"||e.wkid!=null)}let Et=md=class extends ys{static copy(e,t){t._set("x",e._get("x")),t._set("y",e._get("y")),t._set("z",e._get("z")),t._set("m",e._get("m"));const r=e._get("spatialReference");t._set("spatialReference",q.isFrozen(r)?r:r.clone())}constructor(...e){super(...e),this.x=0,this.y=0,this.z=void 0,this.m=void 0,this.type="point"}normalizeCtorArgs(e,t,r,i,s){let n;if(Array.isArray(e))n=e,s=t,e=n[0],t=n[1],r=n[2],i=n[3];else if(e&&typeof e=="object"){if(n=e,e=n.x!=null?n.x:n.longitude,t=n.y!=null?n.y:n.latitude,r=n.z,i=n.m,(s=n.spatialReference)&&s.declaredClass!=="esri.geometry.SpatialReference"&&(s=new ae(s)),n.longitude!=null||n.latitude!=null){if(n.longitude==null)F.getLogger(this).warn(".longitude=","Latitude was defined without longitude");else if(n.latitude==null)F.getLogger(this).warn(".latitude=","Longitude was defined without latitude");else if(!n.declaredClass&&(s!=null&&s.isWebMercator)){const a=Ca(n.longitude,n.latitude,km);e=a[0],t=a[1]}}}else cb(r)?(s=r,r=null):cb(i)&&(s=i,i=null);const o={x:e,y:t};return o.x==null&&o.y!=null?F.getLogger(this).warn(".y=","Y coordinate was defined without an X coordinate"):o.y==null&&o.x!=null&&F.getLogger(this).warn(".x=","X coordinate was defined without a Y coordinate"),s!=null&&(o.spatialReference=s),r!=null&&(o.z=r),i!=null&&(o.m=i),o}get cache(){return this.commitProperty("x"),this.commitProperty("y"),this.commitProperty("z"),this.commitProperty("m"),this.commitProperty("spatialReference"),{}}get hasM(){return this.m!==void 0}set hasM(e){e!==(this._get("m")!==void 0)&&(this._set("m",e?0:void 0),this._set("hasM",e))}get hasZ(){return this.z!==void 0}set hasZ(e){e!==(this._get("z")!==void 0)&&(this._set("z",e?0:void 0),this._set("hasZ",e))}get latitude(){return FL(this)}set latitude(e){const{spatialReference:t,x:r}=this;e!=null&&t&&(t.isWebMercator?this._set("y",Ca(r,e,km)[1]):t.isGeographic&&this._set("y",e),this._set("latitude",e))}get longitude(){return DL(this)}set longitude(e){const{y:t,spatialReference:r}=this;e!=null&&r&&(r.isWebMercator?this._set("x",Ca(e,t,km)[0]):r.isGeographic&&this._set("x",e),this._set("longitude",e))}writeX(e,t,r){t[r]=isNaN(e)?"NaN":e}readX(e){return typeof e=="string"?NaN:e}clone(){const e=new md;return e.x=this.x,e.y=this.y,e.z=this.z,e.m=this.m,e.spatialReference=this.spatialReference,e}copy(e){return md.copy(e,this),this}equals(e){if(e==null)return!1;const{x:t,y:r,z:i,m:s,spatialReference:n}=this,{z:o,m:a}=e;let{x:l,y:h,spatialReference:p}=e;if(!n.equals(p))if(n.isWebMercator&&p.isWGS84)[l,h]=Ca(l,h),p=n;else{if(!n.isWGS84||!p.isWebMercator)return!1;[l,h]=Lf(l,h),p=n}return t===l&&r===h&&i===o&&s===a&&n.wkid===p.wkid}offset(e,t,r){return this.x+=e,this.y+=t,r!=null&&(this.z=(this.z??0)+r),this}normalize(){if(!this.spatialReference)return this;const e=It(this.spatialReference);if(!e)return this;let t=this.x;const[r,i]=e.valid,s=2*i;let n;return t>i?(n=Math.ceil(Math.abs(t-i)/s),t-=n*s):t<r&&(n=Math.ceil(Math.abs(t-r)/s),t+=n*s),this._set("x",t),this}distance(e){return y3(this,e)}toArray(){const e=this.hasZ,t=this.hasM;return e&&t?[this.x,this.y,this.z,this.m]:e?[this.x,this.y,this.z]:t?[this.x,this.y,this.m]:[this.x,this.y]}toJSON(e){return this.write({},e)}};c([d({readOnly:!0})],Et.prototype,"cache",null),c([d({type:Boolean,json:{read:!1,write:{enabled:!1,overridePolicy:null}}})],Et.prototype,"hasM",null),c([d({type:Boolean,json:{read:!1,write:{enabled:!1,overridePolicy:null}}})],Et.prototype,"hasZ",null),c([d({type:Number})],Et.prototype,"latitude",null),c([d({type:Number})],Et.prototype,"longitude",null),c([d({type:Number,json:{type:[Number,String],write:{isRequired:!0,allowNull:!0}}}),tt(e=>isNaN(e)?e:rr(e))],Et.prototype,"x",void 0),c([oe("x")],Et.prototype,"writeX",null),c([de("x")],Et.prototype,"readX",null),c([d({type:Number,json:{write:!0}})],Et.prototype,"y",void 0),c([d({type:Number,json:{write:{overridePolicy(){return{enabled:this.hasZ}}}}})],Et.prototype,"z",void 0),c([d({type:Number,json:{write:{overridePolicy(){return{enabled:this.hasM}}}}})],Et.prototype,"m",void 0),Et=md=c([S("esri.geometry.Point")],Et),Et.prototype.toJSON.isDefaultToJSON=!0;const te=Et,Nm=[0,0];function eh(e,t){return t!=null&&Pt(e,t.x,t.y,t.z)}function oQ(e,t){var r;if(!((r=t.points)!=null&&r.length))return!1;for(const i of t.points)if(!ul(e,i))return!1;return!0}function UL(e,t){const{xmin:r,ymin:i,zmin:s,xmax:n,ymax:o,zmax:a}=t;return e.hasZ&&t.hasZ?Pt(e,r,i,s)&&Pt(e,r,o,s)&&Pt(e,n,o,s)&&Pt(e,n,i,s)&&Pt(e,r,i,a)&&Pt(e,r,o,a)&&Pt(e,n,o,a)&&Pt(e,n,i,a):Pt(e,r,i)&&Pt(e,r,o)&&Pt(e,n,o)&&Pt(e,n,i)}function ul(e,t){return Pt(e,t[0],t[1])}function jL(e,t){return Pt(e,t[0],t[1],t[2])}function Pt(e,t,r,i){return t>=e.xmin&&t<=e.xmax&&r>=e.ymin&&r<=e.ymax&&(i==null||!e.hasZ||i>=e.zmin&&i<=e.zmax)}function k_(e,t){return Nm[1]=t.y,Nm[0]=t.x,GL(e,Nm)}function GL(e,t){return N_(e.rings,t)}function N_(e,t){if(!e)return!1;if(zL(e))return hb(!1,e,t);let r=!1;for(let i=0,s=e.length;i<s;i++)r=hb(r,e[i],t);return r}function zL(e){return!Array.isArray(e[0][0])}function hb(e,t,r){const[i,s]=r;let n=e,o=0;for(let a=0,l=t.length;a<l;a++){o++,o===l&&(o=0);const[h,p]=t[a],[f,m]=t[o];(p<s&&m>=s||m<s&&p>=s)&&h+(s-p)/(m-p)*(f-h)<i&&(n=!n)}return n}function VL(e,t){return eh(e,t)}function BL(e,t){const r=e.hasZ&&t.hasZ;let i,s,n;if(e.xmin<=t.xmin){if(i=t.xmin,e.xmax<i)return!1}else if(i=e.xmin,t.xmax<i)return!1;if(e.ymin<=t.ymin){if(s=t.ymin,e.ymax<s)return!1}else if(s=e.ymin,t.ymax<s)return!1;if(r&&t.hasZ){if(e.zmin<=t.zmin){if(n=t.zmin,e.zmax<n)return!1}else if(n=e.zmin,t.zmax<n)return!1}return!0}function HL(e,t){const{points:r,hasZ:i}=t,s=i?jL:ul;for(const n of r)if(s(e,n))return!0;return!1}const Oo=[0,0],Co=[0,0],Io=[0,0],Ro=[0,0],qL=[Oo,Co,Io,Ro],v3=[[Io,Oo],[Oo,Co],[Co,Ro],[Ro,Io]];function WL(e,t){return ZL(e,t.rings)}function ZL(e,t){Oo[0]=e.xmin,Oo[1]=e.ymax,Co[0]=e.xmax,Co[1]=e.ymax,Io[0]=e.xmin,Io[1]=e.ymin,Ro[0]=e.xmax,Ro[1]=e.ymin;for(const r of qL)if(N_(t,r))return!0;for(const r of t){if(!r.length)continue;let i=r[0];if(ul(e,i))return!0;for(let s=1;s<r.length;s++){const n=r[s];if(ul(e,n)||w3(i,n,v3))return!0;i=n}}return!1}function JL(e,t){Oo[0]=e.xmin,Oo[1]=e.ymax,Co[0]=e.xmax,Co[1]=e.ymax,Io[0]=e.xmin,Io[1]=e.ymin,Ro[0]=e.xmax,Ro[1]=e.ymin;const r=t.paths;for(const i of r){if(!r.length)continue;let s=i[0];if(ul(e,s))return!0;for(let n=1;n<i.length;n++){const o=i[n];if(ul(e,o)||w3(s,o,v3))return!0;s=o}}return!1}const st=[0,0];function YL(e){for(let t=0;t<e.length;t++){const r=e[t];for(let s=0;s<r.length-1;s++){const n=r[s],o=r[s+1];for(let a=t+1;a<e.length;a++)for(let l=0;l<e[a].length-1;l++){const h=e[a][l],p=e[a][l+1];if(Tg(n,o,h,p,st)&&!(st[0]===n[0]&&st[1]===n[1]||st[0]===h[0]&&st[1]===h[1]||st[0]===o[0]&&st[1]===o[1]||st[0]===p[0]&&st[1]===p[1]))return!0}}const i=r.length;if(!(i<=4))for(let s=0;s<i-3;s++){let n=i-1;s===0&&(n=i-2);const o=r[s],a=r[s+1];for(let l=s+2;l<n;l++){const h=r[l],p=r[l+1];if(Tg(o,a,h,p,st)&&!(st[0]===o[0]&&st[1]===o[1]||st[0]===h[0]&&st[1]===h[1]||st[0]===a[0]&&st[1]===a[1]||st[0]===p[0]&&st[1]===p[1]))return!0}}}return!1}function w3(e,t,r){for(let i=0;i<r.length;i++)if(Tg(e,t,r[i][0],r[i][1]))return!0;return!1}function Tg(e,t,r,i,s){const[n,o]=e,[a,l]=t,[h,p]=r,[f,m]=i,y=f-h,_=n-h,v=a-n,w=m-p,b=o-p,M=l-o,$=w*v-y*M;if($===0)return!1;const E=(y*b-w*_)/$,P=(v*b-M*_)/$;return E>=0&&E<=1&&P>=0&&P<=1&&(s&&(s[0]=n+E*(a-n),s[1]=o+E*(l-o)),!0)}function KL(e){switch(e){case"esriGeometryEnvelope":case"extent":return BL;case"esriGeometryMultipoint":case"multipoint":return HL;case"esriGeometryPoint":case"point":return VL;case"esriGeometryMultiPatch":case"multipatch":case"esriGeometryPolygon":case"polygon":return WL;case"esriGeometryPolyline":case"polyline":return JL}}var jr;function XL(e){return e&&(e.declaredClass==="esri.geometry.SpatialReference"||e.wkid!=null)}function Ts(e,t,r){return t==null?r:r==null?t:e(t,r)}let Ke=jr=class extends ys{constructor(...e){super(...e),this.type="extent",this.xmin=0,this.ymin=0,this.mmin=void 0,this.zmin=void 0,this.xmax=0,this.ymax=0,this.mmax=void 0,this.zmax=void 0}normalizeCtorArgs(e,t,r,i,s){return XL(e)?{spatialReference:e,xmin:0,ymin:0,xmax:0,ymax:0}:typeof e=="object"?(e.spatialReference=e.spatialReference==null?ae.WGS84:e.spatialReference,e):{xmin:e,ymin:t,xmax:r,ymax:i,spatialReference:s??ae.WGS84}}static fromPoint(e){return new jr({xmin:e.x,ymin:e.y,zmin:e.z,xmax:e.x,ymax:e.y,zmax:e.z,spatialReference:e.spatialReference})}get cache(){return this.commitProperty("xmin"),this.commitProperty("ymin"),this.commitProperty("zmin"),this.commitProperty("mmin"),this.commitProperty("xmax"),this.commitProperty("ymax"),this.commitProperty("zmax"),this.commitProperty("mmax"),this.commitProperty("spatialReference"),{}}get center(){const e=new te({x:.5*(this.xmin+this.xmax),y:.5*(this.ymin+this.ymax),spatialReference:this.spatialReference});return this.hasZ&&(e.z=.5*(this.zmin+this.zmax)),this.hasM&&(e.m=.5*(this.mmin+this.mmax)),e}get extent(){return this.clone()}get hasM(){return this.mmin!=null&&this.mmax!=null}get hasZ(){return this.zmin!=null&&this.zmax!=null}get height(){return Math.abs(this.ymax-this.ymin)}get width(){return Math.abs(this.xmax-this.xmin)}centerAt(e){const t=this.center;return e.z!=null&&this.hasZ?this.offset(e.x-t.x,e.y-t.y,e.z-t.z):this.offset(e.x-t.x,e.y-t.y)}clone(){const e=new jr;return e.xmin=this.xmin,e.ymin=this.ymin,e.xmax=this.xmax,e.ymax=this.ymax,e.spatialReference=this.spatialReference,this.zmin!=null&&(e.zmin=this.zmin,e.zmax=this.zmax),this.mmin!=null&&(e.mmin=this.mmin,e.mmax=this.mmax),e}contains(e){if(!e)return!1;const t=this.spatialReference,r=e.spatialReference;return t&&r&&!t.equals(r)&&fd(t,r)&&(e=t.isWebMercator?So(e):su(e,!0)),e.type==="point"?eh(this,e):e.type==="extent"&&UL(this,e)}equals(e){if(this===e)return!0;if(e==null)return!1;const t=this.spatialReference,r=e.spatialReference;return t&&r&&!t.equals(r)&&fd(t,r)&&(e=t.isWebMercator?So(e):su(e,!0)),this.xmin===e.xmin&&this.ymin===e.ymin&&this.zmin===e.zmin&&this.mmin===e.mmin&&this.xmax===e.xmax&&this.ymax===e.ymax&&this.zmax===e.zmax&&this.mmax===e.mmax}expand(e){const t=.5*(1-e),r=this.width*t,i=this.height*t;if(this.xmin+=r,this.ymin+=i,this.xmax-=r,this.ymax-=i,this.hasZ){const s=(this.zmax-this.zmin)*t;this.zmin+=s,this.zmax-=s}if(this.hasM){const s=(this.mmax-this.mmin)*t;this.mmin+=s,this.mmax-=s}return this}intersects(e){if(e==null)return!1;e.type==="mesh"&&(e=e.extent);const t=this.spatialReference,r=e.spatialReference;return t&&r&&!ut(t,r)&&fd(t,r)&&(e=t.isWebMercator?So(e):su(e,!0)),KL(e.type)(this,e)}normalize(){const e=this._normalize(!1,!0);return Array.isArray(e)?e:[e]}offset(e,t,r){return this.xmin+=e,this.ymin+=t,this.xmax+=e,this.ymax+=t,r!=null&&(this.zmin+=r,this.zmax+=r),this}shiftCentralMeridian(){return this._normalize(!0)}union(e){return this===e||(this.xmin=Math.min(this.xmin,e.xmin),this.ymin=Math.min(this.ymin,e.ymin),this.xmax=Math.max(this.xmax,e.xmax),this.ymax=Math.max(this.ymax,e.ymax),(this.hasZ||e.hasZ)&&(this.zmin=Ts(Math.min,this.zmin,e.zmin),this.zmax=Ts(Math.max,this.zmax,e.zmax)),(this.hasM||e.hasM)&&(this.mmin=Ts(Math.min,this.mmin,e.mmin),this.mmax=Ts(Math.max,this.mmax,e.mmax))),this}intersection(e){return this===e?this:e!=null&&this.intersects(e)?(this.xmin=Math.max(this.xmin,e.xmin),this.ymin=Math.max(this.ymin,e.ymin),this.xmax=Math.min(this.xmax,e.xmax),this.ymax=Math.min(this.ymax,e.ymax),(this.hasZ||e.hasZ)&&(this.zmin=Ts(Math.max,this.zmin,e.zmin),this.zmax=Ts(Math.min,this.zmax,e.zmax)),(this.hasM||e.hasM)&&(this.mmin=Ts(Math.max,this.mmin,e.mmin),this.mmax=Ts(Math.min,this.mmax,e.mmax)),this):null}toJSON(e){return this.write({},e)}_shiftCM(e=It(this.spatialReference)){if(!e||!this.spatialReference)return this;const t=this.spatialReference,r=this._getCM(e);if(r){const i=t.isWebMercator?su(r):r;this.xmin-=r.x,this.xmax-=r.x,t.isWebMercator||(i.x=Lm(i.x,e).x),this.spatialReference=new ae(t_((t.isWGS84?e.altTemplate:null)??e.wkTemplate,{Central_Meridian:i.x}))}return this}_getCM(e){let t=null;const[r,i]=e.valid,s=this.xmin,n=this.xmax;return s>=r&&s<=i&&n>=r&&n<=i||(t=this.center),t}_normalize(e,t,r){const i=this.spatialReference;if(!i)return this;const s=r??It(i);if(s==null)return this;const n=this._getParts(s).map(l=>l.extent);if(n.length<2)return n[0]||this;if(n.length>2)return e?this._shiftCM(s):this.set({xmin:s.valid[0],xmax:s.valid[1]});if(e)return this._shiftCM(s);if(t)return n;let o=!0,a=!0;return n.forEach(l=>{l.hasZ||(o=!1),l.hasM||(a=!1)}),{rings:n.map(l=>{const h=[[l.xmin,l.ymin],[l.xmin,l.ymax],[l.xmax,l.ymax],[l.xmax,l.ymin],[l.xmin,l.ymin]];if(o){const p=(l.zmax-l.zmin)/2;for(let f=0;f<h.length;f++)h[f].push(p)}if(a){const p=(l.mmax-l.mmin)/2;for(let f=0;f<h.length;f++)h[f].push(p)}return h}),hasZ:o,hasM:a,spatialReference:i}}_getParts(e){let t=this.cache._parts;if(!t){t=[];const{ymin:s,ymax:n,spatialReference:o}=this,a=this.width,l=this.xmin,h=this.xmax;let p;e=e||It(o);const[f,m]=e.valid;p=Lm(this.xmin,e);const y=p.x,_=p.frameId;p=Lm(this.xmax,e);const v=p.x,w=p.frameId,b=y===v&&a>0;if(a>2*m){const M=new jr(l<h?y:v,s,m,n,o),$=new jr(f,s,l<h?v:y,n,o),E=new jr(0,s,m,n,o),P=new jr(f,s,0,n,o),O=[],L=[];M.contains(E)&&O.push(_),M.contains(P)&&L.push(_),$.contains(E)&&O.push(w),$.contains(P)&&L.push(w);for(let k=_+1;k<w;k++)O.push(k),L.push(k);t.push({extent:M,frameIds:[_]},{extent:$,frameIds:[w]},{extent:E,frameIds:O},{extent:P,frameIds:L})}else y>v||b?t.push({extent:new jr(y,s,m,n,o),frameIds:[_]},{extent:new jr(f,s,v,n,o),frameIds:[w]}):t.push({extent:new jr(y,s,v,n,o),frameIds:[_]});this.cache._parts=t}const r=this.hasZ,i=this.hasM;if(r||i){const s={};r&&(s.zmin=this.zmin,s.zmax=this.zmax),i&&(s.mmin=this.mmin,s.mmax=this.mmax);for(let n=0;n<t.length;n++)t[n].extent.set(s)}return t}};function Lm(e,t){const[r,i]=t.valid,s=2*i;let n,o=0;return e>i?(n=Math.ceil(Math.abs(e-i)/s),e-=n*s,o=n):e<r&&(n=Math.ceil(Math.abs(e-r)/s),e+=n*s,o=-n),{x:e,frameId:o}}c([d({readOnly:!0})],Ke.prototype,"cache",null),c([d({readOnly:!0})],Ke.prototype,"center",null),c([d({readOnly:!0})],Ke.prototype,"extent",null),c([d({readOnly:!0,json:{write:{enabled:!1,overridePolicy:null}}})],Ke.prototype,"hasM",null),c([d({readOnly:!0,json:{write:{enabled:!1,overridePolicy:null}}})],Ke.prototype,"hasZ",null),c([d({readOnly:!0})],Ke.prototype,"height",null),c([d({readOnly:!0})],Ke.prototype,"width",null),c([d({type:Number,json:{type:[Number,String],write:{enabled:!0,allowNull:!0}}})],Ke.prototype,"xmin",void 0),c([d({type:Number,json:{write:!0}})],Ke.prototype,"ymin",void 0),c([d({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy(){return{enabled:this.hasM}}}}})],Ke.prototype,"mmin",void 0),c([d({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy(){return{enabled:this.hasZ}}}}})],Ke.prototype,"zmin",void 0),c([d({type:Number,json:{write:!0}})],Ke.prototype,"xmax",void 0),c([d({type:Number,json:{write:!0}})],Ke.prototype,"ymax",void 0),c([d({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy(){return{enabled:this.hasM}}}}})],Ke.prototype,"mmax",void 0),c([d({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy(){return{enabled:this.hasZ}}}}})],Ke.prototype,"zmax",void 0),Ke=jr=c([S("esri.geometry.Extent")],Ke),Ke.prototype.toJSON.isDefaultToJSON=!0;const Le=Ke;let Qu;var a$,l$;const QL=((a$=globalThis.esriConfig)==null?void 0:a$.locale)??((l$=globalThis.dojoConfig)==null?void 0:l$.locale);var u$;const ec=(u$=globalThis.document)==null?void 0:u$.documentElement;function b3(){var r;const e=ec==null?void 0:ec.getAttribute("lang"),t=(r=globalThis.navigator)==null?void 0:r.language;return QL??e??t??"en"}function Vt(){return Qu===void 0&&(Qu=b3()),Qu}function aQ(e=Vt()){const t=/^([a-zA-Z]{2,3})(?:[_-][a-zA-Z0-9]+)*$/.exec(e);return t==null?void 0:t[1].toLowerCase()}const yd=[];function S3(e){return yd.push(e),ue(()=>yd.splice(yd.indexOf(e),1))}const gd=[];function L_(e){return gd.push(e),ue(()=>gd.splice(gd.indexOf(e),1))}function db(){const e=b3();Qu!==e&&([...gd].forEach(t=>t(e)),Qu=e,[...yd].forEach(t=>t(e)))}var c$;(c$=globalThis.addEventListener)==null||c$.call(globalThis,"languagechange",db),ec&&new MutationObserver(()=>{db()}).observe(ec,{attributeFilter:["lang"]});let $h;function e5(e){return $h&&!$h.destroyed||($h=e()),$h}var $g;const t5=new rt({avgRating:"avg-rating",numRatings:"num-ratings",numComments:"num-comments",numViews:"num-views"});let pr=$g=class extends q{constructor(e){super(e),this.categories=null,this.disableExtraQuery=!1,this.extent=null,this.filter=null,this.num=10,this.query=null,this.sortField=null,this.start=1}get sortOrder(){return this._get("sortOrder")||"asc"}set sortOrder(e){e!=="asc"&&e!=="desc"||this._set("sortOrder",e)}clone(){return new $g({categories:this.categories?C(this.categories):null,disableExtraQuery:this.disableExtraQuery,extent:this.extent?this.extent.clone():null,filter:this.filter,num:this.num,query:this.query,sortField:this.sortField,sortOrder:this.sortOrder,start:this.start})}toRequestOptions(e,t){let r=[];this.categories&&(r=this.categories.map(o=>Array.isArray(o)?JSON.stringify(o):o));let i="";if(this.extent){const o=Nf(this.extent,ae.WGS84);o!=null&&(i=`${o.xmin},${o.ymin},${o.xmax},${o.ymax}`)}let s=this.query;!this.disableExtraQuery&&e.extraQuery&&(s="("+s+")"+e.extraQuery);const n={categories:r,bbox:i,q:s,filter:this.filter,num:this.num,sortField:null,sortOrder:null,start:this.start};return this.sortField&&(n.sortField=this.sortField.split(",").map(o=>t5.toJSON(o.trim())).join(","),n.sortOrder=this.sortOrder),{query:{...t,...n}}}};c([d()],pr.prototype,"categories",void 0),c([d()],pr.prototype,"disableExtraQuery",void 0),c([d({type:Le})],pr.prototype,"extent",void 0),c([d()],pr.prototype,"filter",void 0),c([d()],pr.prototype,"num",void 0),c([d()],pr.prototype,"query",void 0),c([d()],pr.prototype,"sortField",void 0),c([d()],pr.prototype,"sortOrder",null),c([d()],pr.prototype,"start",void 0),pr=$g=c([S("esri.portal.PortalQueryParams")],pr);const Ti=pr;var Eg;let We=Eg=class extends j{constructor(e){super(e),this.access=null,this.created=null,this.description=null,this.id=null,this.isInvitationOnly=!1,this.modified=null,this.owner=null,this.portal=null,this.snippet=null,this.sortField=null,this.sortOrder=null,this.sourceJSON=null,this.tags=null,this.title=null}get thumbnailUrl(){var r;const e=this.url,t=this.thumbnail;return e&&t&&this.portal?(r=this.portal)==null?void 0:r.normalizeUrl(`${e}/info/${t}?f=json`):null}get url(){var t;const e=(t=this.portal)==null?void 0:t.restUrl;return e?e+"/community/groups/"+this.id:null}fetchCategorySchema(e){return this.portal.request(this.url+"/categorySchema",e).then(t=>{const r=t.categorySchema||[];return r.some(i=>i.source==="contentCategorySetsGroupQuery.LivingAtlas")?this._fetchCategorySchemaSet("LivingAtlas",e):r})}fetchMembers(e){return this.portal.request(this.url+"/users",e)}getThumbnailUrl(e){let t=this.thumbnailUrl;return t&&e&&(t+=`&w=${e}`),t}toJSON(){throw new I("internal:not-yet-implemented","PortalGroup.toJSON is not yet implemented")}static fromJSON(e){if(!e)return null;if(e.declaredClass)throw new Error("JSON object is already hydrated");const t=new Eg({sourceJSON:e});return t.read(e),t}queryItems(e,t){let r=Rt(Ti,e);const i=this.portal;return parseFloat(i.currentVersion)>5?(r=r||new Ti,i.queryPortal(`/content/groups/${this.id}/search`,r,"PortalItem",t)):(r=r?r.clone():new Ti,r.query="group:"+this.id+(r.query?" "+r.query:""),i.queryItems(r,t))}_fetchCategorySchemaSet(e,t){const r=this.portal;return r.fetchSelf(r.authMode,!0,t).then(i=>{const s=i.contentCategorySetsGroupQuery;if(s){const n=new Ti({disableExtraQuery:!0,num:1,query:s});return r.queryGroups(n,t)}throw new I("portal-group:fetchCategorySchema","contentCategorySetsGroupQuery value not found")}).then(i=>{if(i.total){const s=i.results[0],n=new Ti({num:1,query:`typekeywords:"${e}"`});return s.queryItems(n,t)}throw new I("portal-group:fetchCategorySchema","contentCategorySetsGroupQuery group not found")}).then(i=>i.total?i.results[0].fetchData("json",t).then(s=>{const n=s==null?void 0:s.categorySchema;return n!=null&&n.length?n:[]}):[])}};c([d()],We.prototype,"access",void 0),c([d({type:Date})],We.prototype,"created",void 0),c([d()],We.prototype,"description",void 0),c([d()],We.prototype,"id",void 0),c([d()],We.prototype,"isInvitationOnly",void 0),c([d({type:Date})],We.prototype,"modified",void 0),c([d()],We.prototype,"owner",void 0),c([d()],We.prototype,"portal",void 0),c([d()],We.prototype,"snippet",void 0),c([d()],We.prototype,"sortField",void 0),c([d()],We.prototype,"sortOrder",void 0),c([d()],We.prototype,"sourceJSON",void 0),c([d()],We.prototype,"tags",void 0),c([d()],We.prototype,"thumbnail",void 0),c([d({readOnly:!0})],We.prototype,"thumbnailUrl",null),c([d()],We.prototype,"title",void 0),c([d({readOnly:!0})],We.prototype,"url",null),We=Eg=c([S("esri.portal.PortalGroup")],We);const Mg=We;let Un=class extends q{constructor(t){super(t),this.nextQueryParams=null,this.queryParams=null,this.results=null,this.total=null}};c([d()],Un.prototype,"nextQueryParams",void 0),c([d()],Un.prototype,"queryParams",void 0),c([d()],Un.prototype,"results",void 0),c([d()],Un.prototype,"total",void 0),Un=c([S("esri.portal.PortalQueryResult")],Un);const r5=Un;let zi=class extends j{constructor(t){super(t),this.created=null,this.id=null,this.portal=null,this.title=null,this.username=null}get url(){var r;const t=(r=this.portal)==null?void 0:r.restUrl;return t?`${t}/content/users/${this.username}/${this.id}`:null}toJSON(){throw new I("internal:not-yet-implemented","PortalFolder.toJSON is not yet implemented")}};c([d({type:Date})],zi.prototype,"created",void 0),c([d()],zi.prototype,"id",void 0),c([d()],zi.prototype,"portal",void 0),c([d()],zi.prototype,"title",void 0),c([d({readOnly:!0})],zi.prototype,"url",null),c([d()],zi.prototype,"username",void 0),zi=c([S("esri.portal.PortalFolder")],zi);const i5=zi;var xg;let Se=xg=class extends j{constructor(e){super(e),this.access=null,this.created=null,this.culture=null,this.description=null,this.email=null,this.fullName=null,this.modified=null,this.orgId=null,this.portal=null,this.preferredView=null,this.privileges=null,this.region=null,this.role=null,this.roleId=null,this.sourceJSON=null,this.units=null,this.username=null,this.userLicenseTypeId=null,this.userType=null}get thumbnailUrl(){const e=this.url,t=this.thumbnail;return e&&t?this.portal.normalizeUrl(`${e}/info/${t}?f=json`):null}get userContentUrl(){var t;const e=(t=this.portal)==null?void 0:t.restUrl;return e?`${e}/content/users/${this.username}`:null}get url(){var t;const e=(t=this.portal)==null?void 0:t.restUrl;return e?`${e}/community/users/${this.username}`:null}addItem(e){const t=e&&e.item,r=e==null?void 0:e.data,i=e==null?void 0:e.folder,s={method:"post"};t&&(s.query=t.createPostQuery(),r!=null&&(typeof r=="string"?s.query.text=r:typeof r=="object"&&(s.query.text=JSON.stringify(r))));let n=this.userContentUrl;return i&&(n+="/"+(typeof i=="string"?i:i.id)),this.portal.request(n+"/addItem",s).then(o=>(t.id=o.id,t.portal=this.portal,t.loaded?t.reload():t.load()))}async deleteItem(e,t=!1){let r=this.userContentUrl;e.ownerFolder&&(r+="/"+e.ownerFolder);const i=t?{permanentDelete:!0}:{};await this.portal.request(r+`/items/${e.id}/delete`,{method:"post",query:i}),e.id=null,e.portal=null}async deleteItems(e,t=!1){e=e.slice();const r=this.userContentUrl+"/deleteItems",i=[],s=e.map(n=>n.id);if(s.length){const n={method:"post",query:{items:s.join(","),permanentDelete:t}},o=await this.portal.request(r,n);for(const a of o.results){const l=e.find(f=>a.itemId===f.id),h=a.success;let p=null;h?(l.id=null,l.portal=null):a.error&&(p=new I("portal:delete-item-failed",a.error.message,a.error)),i.push({item:l,success:h,error:p})}}return i}fetchFolders(){const e={query:{num:1}};return this.portal.request(this.userContentUrl??"",e).then(t=>{let r;return r=t&&t.folders?t.folders.map(i=>{const s=i5.fromJSON(i);return s.portal=this.portal,s}):[],r})}fetchGroups(){return this.portal.request(this.url??"").then(e=>{let t;return t=e&&e.groups?e.groups.map(r=>{const i=Mg.fromJSON(r);return i.portal=this.portal,i}):[],t})}async fetchItems(e){e??(e={});let t=this.userContentUrl??"";e.folder&&(t+="/"+e.folder.id);const{default:r}=await N(()=>Promise.resolve().then(()=>E3),void 0),i={folders:!1,inRecycleBin:!!e.inRecycleBin||null,foldersContent:!(e.folder||!e.includeSubfolderItems)||null,num:e.num||10,start:e.start||1,sortField:e.sortField||"created",sortOrder:e.sortOrder||"asc"},s=await this.portal.request(t,{query:i});let n;return s!=null&&s.items?(n=s.items.map(o=>{const a=r.fromJSON(o);return a.portal=this.portal,a}),await Promise.all(n.map(o=>o.load())),{items:n,nextStart:s.nextStart,total:s.total}):{items:[],nextStart:-1,total:0}}fetchTags(){return this.portal.request(this.url+"/tags").then(e=>e.tags)}getThumbnailUrl(e){let t=this.thumbnailUrl;return t&&e&&(t+=`&w=${e}`),t}queryFavorites(e){return this.favGroupId?(this._favGroup||(this._favGroup=new Mg({id:this.favGroupId,portal:this.portal})),this._favGroup.queryItems(e)):Promise.reject(new I("internal:unknown","Unknown internal error",{internalError:"Unknown favGroupId"}))}async restoreItem(e,t){const r=this.userContentUrl,i=t?{folderID:typeof t=="string"?t:t.id}:null;await this.portal.request(r+`/items/${e.id}/restore`,{method:"post",query:i})}toJSON(){throw new I("internal:not-yet-implemented","PortalUser.toJSON is not yet implemented")}static fromJSON(e){if(!e)return null;if(e.declaredClass)throw new Error("JSON object is already hydrated");const t=new xg({sourceJSON:e});return t.read(e),t}};c([d()],Se.prototype,"access",void 0),c([d({type:Date})],Se.prototype,"created",void 0),c([d()],Se.prototype,"culture",void 0),c([d()],Se.prototype,"description",void 0),c([d()],Se.prototype,"email",void 0),c([d()],Se.prototype,"favGroupId",void 0),c([d()],Se.prototype,"fullName",void 0),c([d({type:Date})],Se.prototype,"modified",void 0),c([d()],Se.prototype,"orgId",void 0),c([d()],Se.prototype,"portal",void 0),c([d()],Se.prototype,"preferredView",void 0),c([d()],Se.prototype,"privileges",void 0),c([d()],Se.prototype,"region",void 0),c([d()],Se.prototype,"role",void 0),c([d()],Se.prototype,"roleId",void 0),c([d()],Se.prototype,"sourceJSON",void 0),c([d()],Se.prototype,"thumbnail",void 0),c([d({readOnly:!0})],Se.prototype,"thumbnailUrl",null),c([d()],Se.prototype,"units",void 0),c([d({readOnly:!0})],Se.prototype,"userContentUrl",null),c([d({readOnly:!0})],Se.prototype,"url",null),c([d()],Se.prototype,"username",void 0),c([d()],Se.prototype,"userLicenseTypeId",void 0),c([d()],Se.prototype,"userType",void 0),Se=xg=c([S("esri.portal.PortalUser")],Se);const T3=Se;var Yt;let Rl;const pb={PortalGroup:()=>Promise.resolve({default:Mg}),PortalItem:()=>N(()=>Promise.resolve().then(()=>E3),void 0),PortalUser:()=>Promise.resolve({default:T3})};let R=Yt=class extends j.JSONSupportMixin(mn){constructor(e){super(e),this._esriIdCredentialCreateHandle=null,this.access=null,this.allSSL=!1,this.authMode="auto",this.authorizedCrossOriginDomains=null,this.basemapGalleryGroupQuery=null,this.basemapGalleryGroupQuery3D=null,this.bingKey=null,this.canListApps=!1,this.canListData=!1,this.canListPreProvisionedItems=!1,this.canProvisionDirectPurchase=!1,this.canSearchPublic=!0,this.canShareBingPublic=!1,this.canSharePublic=!1,this.canSignInArcGIS=!1,this.canSignInIDP=!1,this.colorSetsGroupQuery=null,this.commentsEnabled=!1,this.created=null,this.culture=null,this.customBaseUrl=null,this.default3DBasemapQuery=null,this.defaultBasemap=null,this.defaultDevBasemap=null,this.defaultExtent=null,this.defaultVectorBasemap=null,this.description=null,this.devBasemapGalleryGroupQuery=null,this.eueiEnabled=null,this.featuredGroups=null,this.featuredItemsGroupQuery=null,this.galleryTemplatesGroupQuery=null,this.layoutGroupQuery=null,this.livingAtlasGroupQuery=null,this.hasCategorySchema=!1,this.hasClassificationSchema=!1,this.helperServices=null,this.homePageFeaturedContent=null,this.homePageFeaturedContentCount=null,this.httpPort=null,this.httpsPort=null,this.id=null,this.ipCntryCode=null,this.isPortal=!1,this.isReadOnly=!1,this.layerTemplatesGroupQuery=null,this.maxTokenExpirationMinutes=null,this.modified=null,this.name=null,this.portalHostname=null,this.portalMode=null,this.portalProperties=null,this.region=null,this.recycleBinEnabled=!1,this.rotatorPanels=null,this.showHomePageDescription=!1,this.sourceJSON=null,this.supportsHostedServices=!1,this.symbolSetsGroupQuery=null,this.templatesGroupQuery=null,this.units=null,this.url=me.portalUrl,this.urlKey=null,this.user=null,this.use3dBasemaps=!0,this.useDefault3dBasemap=!1,this.useStandardizedQuery=!1,this.useVectorBasemaps=!1,this.vectorBasemapGalleryGroupQuery=null}normalizeCtorArgs(e){return typeof e=="string"?{url:e}:e}destroy(){fb.unregister(this),this.defaultBasemap=ke(this.defaultBasemap),this.defaultDevBasemap=ke(this.defaultDevBasemap),this.defaultVectorBasemap=ke(this.defaultVectorBasemap),this._esriIdCredentialCreateHandle=Ce(this._esriIdCredentialCreateHandle)}readAuthorizedCrossOriginDomains(e){if(e)for(const t of e)me.request.trustedServers.includes(t)||me.request.trustedServers.push(t);return e}readDefaultBasemap(e){return this._readBasemap(e)}readDefaultDevBasemap(e){return this._readBasemap(e)}readDefaultVectorBasemap(e){return this._readBasemap(e)}get extraQuery(){var r;const e=(r=this.user)==null?void 0:r.orgId,t=!e||this.canSearchPublic;return this.id&&!t?` AND orgid:${this.id}`:null}get hasAPIKey(){return jE(this.url)}get isOrganization(){return!!this.access}get itemPageUrl(){return this.url?`${this.url}/home/item.html`:null}get restUrl(){let e=this.url;if(e){const t=e.indexOf("/sharing");e=t>0?e.slice(0,t):this.url.replace(/\/+$/,""),e+="/sharing/rest"}return e}get thumbnailUrl(){const e=this.restUrl,t=this.thumbnail;return e&&t?this._normalizeSSL(e+"/portals/self/resources/"+t):null}readUrlKey(e){return e&&e.toLowerCase()}readUser(e){let t=null;return e&&(t=T3.fromJSON(e),t.portal=this),t}load(e){const t=N(()=>Promise.resolve().then(()=>WD),void 0).then(({default:r})=>{Ve(e),Rl=r}).then(()=>this.sourceJSON?this.sourceJSON:this.fetchSelf(this.authMode,!1,e)).then(r=>{var i;if(!this.hasAPIKey&&_e){const s=_e;this.credential=s.findCredential(this.restUrl),this.credential||this.authMode!==Yt.AUTH_MODE_AUTO&&this.authMode!==Yt.AUTH_MODE_NO_PROMPT||((i=this._esriIdCredentialCreateHandle)==null||i.remove(),this._esriIdCredentialCreateHandle=s.on("credential-create",s5(new WeakRef(this))),fb.register(this,this._esriIdCredentialCreateHandle,this))}this.sourceJSON=r,this.read(r)});return this.addResolvingPromise(t),Promise.resolve(this)}async createElevationLayers(){await this.load();const e=this._getHelperService("defaultElevationLayers"),t=(await N(async()=>{const{default:r}=await import("./ElevationLayer-CGmkqeXr.js");return{default:r}},__vite__mapDeps([4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21]))).default;return e?e.map(r=>new t({id:r.id,url:r.url})):[]}async fetchBasemaps(e,t){const r=await this._fetchBasemaps(e,t);if((t==null?void 0:t.include3d)===!0&&this.use3dBasemaps!==!1){const i=await this._fetchBasemaps3D(e,t);r.unshift(...i)}return r}async fetchDefault3DBasemap(e){if(!this.useDefault3dBasemap||!this.default3DBasemapQuery||this.default3DBasemapQuery==="none")return null;const t=new Ti;t.query=this.default3DBasemapQuery,t.disableExtraQuery=!0;const r=(await this.queryItems(t,e)).results.find(i=>i.type==="Web Scene");return r?new Rl({portalItem:r}):null}fetchCategorySchema(e){return this.hasCategorySchema?this.request(this.restUrl+"/portals/self/categorySchema",e).then(t=>t.categorySchema):lr(e)?Promise.reject($e()):Promise.resolve([])}async fetchClassificationSchema(e){return this.hasClassificationSchema?this.request(this.restUrl+"/portals/self/classification/classificationSchema",e).then(t=>t.classificationSchema):null}fetchFeaturedGroups(e){const t=this.featuredGroups,r=new Ti({num:100,sortField:"title"});if(t!=null&&t.length){const i=[];for(const s of t)i.push(`(title:"${s.title}" AND owner:${s.owner})`);return r.query=i.join(" OR "),this.queryGroups(r,e).then(s=>s.results)}return lr(e)?Promise.reject($e()):Promise.resolve([])}fetchRegions(e){var r;const t=((r=this.user)==null?void 0:r.culture)||this.culture||Vt();return this.request(this.restUrl+"/portals/regions",{...e,query:{culture:t}})}fetchSettings(e){var r;const t=((r=this.user)==null?void 0:r.culture)||this.culture||Vt();return this.request(this.restUrl+"/portals/self/settings",{...e,query:{culture:t}})}static getDefault(){return e5(()=>new Yt)}queryGroups(e,t){return this.queryPortal("/community/groups",e,"PortalGroup",t)}queryItems(e,t){return this.queryPortal("/search",e,"PortalItem",t)}queryUsers(e,t){return e.sortField||(e.sortField="username"),this.queryPortal("/community/users",e,"PortalUser",t)}fetchSelf(e=this.authMode,t=!1,r){const i=this.restUrl+"/portals/self",s={authMode:e,query:{culture:Vt().toLowerCase()},withCredentials:!0,...r};return s.authMode==="auto"&&(s.authMode="no-prompt"),t&&(s.query.default=!0),this.request(i,s)}queryPortal(e,t,r,i){const s=Rt(Ti,t),n=o=>this.request(this.restUrl+e,{...s.toRequestOptions(this),...i}).then(a=>{const l=s.clone();return l.start=a.nextStart,new r5({nextQueryParams:l,queryParams:s,total:a.total,results:Yt._resultsToTypedArray(o,{portal:this},a,i)})}).then(a=>Promise.all(a.results.map(l=>typeof l.when=="function"?l.when():a)).then(()=>a,l=>(q$(l),a)));return r&&pb[r]?pb[r]().then(({default:o})=>(Ve(i),n(o))):n()}signIn(){if(this.hasAPIKey)return this.load().then(()=>{if(!this.user)throw new I("portal:not-authenticated","Unable to authenticate user. Portal.user is missing")});if(this.authMode===Yt.AUTH_MODE_ANONYMOUS||this.authMode===Yt.AUTH_MODE_NO_PROMPT&&!_e)return Promise.reject(new I("portal:invalid-auth-mode",`Current "authMode"' is "${this.authMode}"`));if(this.loadStatus==="failed")return Promise.reject(this.loadError);const e=t=>Promise.resolve().then(()=>this.loadStatus==="not-loaded"?(t||(this.authMode="immediate"),this.load().then(()=>null)):this.loadStatus==="loading"?this.load().then(()=>this.credential?null:(this.credential=t,this.fetchSelf("immediate"))):this.user&&this.credential===t?null:(this.credential=t,this.fetchSelf("immediate"))).then(r=>{r&&(this.sourceJSON=r,this.read(r))});return _e?_e.getCredential(this.restUrl,{prompt:this.authMode!==Yt.AUTH_MODE_NO_PROMPT}).then(t=>e(t)):e(this.credential)}normalizeUrl(e){var r;const t=(r=this.credential)==null?void 0:r.token;return this._normalizeSSL(t?e+(e.includes("?")?"&":"?")+"token="+t:e)}requestToTypedArray(e,t,r){return this.request(e,t).then(i=>{const s=Yt._resultsToTypedArray(r,{portal:this},i);return Promise.all(s.map(n=>typeof n.when=="function"?n.when():i)).then(()=>s,()=>s)})}request(e,t={}){const r={f:"json",...t.query},{authMode:i=this.authMode===Yt.AUTH_MODE_ANONYMOUS||this.authMode===Yt.AUTH_MODE_NO_PROMPT?this.authMode:"auto",body:s=null,cacheBust:n=!1,method:o="auto",responseType:a="json",signal:l}=t,h={authMode:i,body:s,cacheBust:n,method:o,query:r,responseType:a,timeout:0,signal:l};return t.withCredentials&&(h.withCredentials=!0),qe(this._normalizeSSL(e),h).then(p=>p.data)}toJSON(){throw new I("internal:not-yet-implemented","Portal.toJSON is not yet implemented")}static fromJSON(e){if(!e)return null;if(e.declaredClass)throw new Error("JSON object is already hydrated");return new Yt({sourceJSON:e})}_getHelperService(e){const t=this.helperServices&&this.helperServices[e];if(!t)throw new I("portal:service-not-found",`The \`helperServices\` do not include an entry named "${e}"`);return t}async _fetchBasemaps(e,t){const r=new Ti;r.query=e||(this.hasAPIKey?this.devBasemapGalleryGroupQuery:this.useVectorBasemaps?this.vectorBasemapGalleryGroupQuery:this.basemapGalleryGroupQuery),r.disableExtraQuery=!0;const i=await this.queryGroups(r,t);if(!i.total)return[];const s=i.results[0];r.num=100,r.query='type:"Web Map" -type:"Web Application"',r.sortField=s.sortField||"name",r.sortOrder=s.sortOrder||"desc";const n=await s.queryItems(r,t);return n.total?n.results.filter(o=>o.type==="Web Map").map(o=>new Rl({portalItem:o})):[]}async _fetchBasemaps3D(e,t){const r=e||this.basemapGalleryGroupQuery3D;if(!r)return[];if(this.hasAPIKey)return[];const i=new Ti({query:r,disableExtraQuery:!0}),s=await this.queryGroups(i,t);if(!s.total)return[];const n=s.results[0];i.num=100,i.query='type:"Web Scene"',i.sortField=n.sortField||"name",i.sortOrder=n.sortOrder||"desc";const o=await n.queryItems(i,t);return o.total?o.results.filter(a=>a.type==="Web Scene").map(a=>new Rl({portalItem:a})):[]}_normalizeSSL(e){return e.replace(/^http:/i,"https:").replace(":7080",":7443")}_readBasemap(e){if(e){const t=Rl.fromJSON(e);return t.portalItem={portal:this},t}return null}static _resultsToTypedArray(e,t,r,i){let s;if(r){const n=i!=null?i.signal:null;s=r.listings||r.notifications||r.userInvitations||r.tags||r.items||r.groups||r.comments||r.provisions||r.results||r.relatedItems||r,(e||t)&&(s=s.map(o=>{const a=Object.assign(e?e.fromJSON(o):o,t);return typeof a.load=="function"&&a.load(n),a}))}else s=[];return s}};R.AUTH_MODE_ANONYMOUS="anonymous",R.AUTH_MODE_AUTO="auto",R.AUTH_MODE_IMMEDIATE="immediate",R.AUTH_MODE_NO_PROMPT="no-prompt",c([d()],R.prototype,"access",void 0),c([d()],R.prototype,"allSSL",void 0),c([d()],R.prototype,"authMode",void 0),c([d()],R.prototype,"authorizedCrossOriginDomains",void 0),c([de("authorizedCrossOriginDomains")],R.prototype,"readAuthorizedCrossOriginDomains",null),c([d()],R.prototype,"basemapGalleryGroupQuery",void 0),c([d({json:{name:"3DBasemapGalleryGroupQuery"}})],R.prototype,"basemapGalleryGroupQuery3D",void 0),c([d()],R.prototype,"bingKey",void 0),c([d()],R.prototype,"canListApps",void 0),c([d()],R.prototype,"canListData",void 0),c([d()],R.prototype,"canListPreProvisionedItems",void 0),c([d()],R.prototype,"canProvisionDirectPurchase",void 0),c([d()],R.prototype,"canSearchPublic",void 0),c([d()],R.prototype,"canShareBingPublic",void 0),c([d()],R.prototype,"canSharePublic",void 0),c([d()],R.prototype,"canSignInArcGIS",void 0),c([d()],R.prototype,"canSignInIDP",void 0),c([d()],R.prototype,"colorSetsGroupQuery",void 0),c([d()],R.prototype,"commentsEnabled",void 0),c([d({type:Date})],R.prototype,"created",void 0),c([d()],R.prototype,"credential",void 0),c([d()],R.prototype,"culture",void 0),c([d()],R.prototype,"currentVersion",void 0),c([d()],R.prototype,"customBaseUrl",void 0),c([d()],R.prototype,"default3DBasemapQuery",void 0),c([d()],R.prototype,"defaultBasemap",void 0),c([de("defaultBasemap")],R.prototype,"readDefaultBasemap",null),c([d()],R.prototype,"defaultDevBasemap",void 0),c([de("defaultDevBasemap")],R.prototype,"readDefaultDevBasemap",null),c([d({type:Le})],R.prototype,"defaultExtent",void 0),c([d()],R.prototype,"defaultVectorBasemap",void 0),c([de("defaultVectorBasemap")],R.prototype,"readDefaultVectorBasemap",null),c([d()],R.prototype,"description",void 0),c([d()],R.prototype,"devBasemapGalleryGroupQuery",void 0),c([d()],R.prototype,"eueiEnabled",void 0),c([d({readOnly:!0})],R.prototype,"extraQuery",null),c([d()],R.prototype,"featuredGroups",void 0),c([d()],R.prototype,"featuredItemsGroupQuery",void 0),c([d()],R.prototype,"galleryTemplatesGroupQuery",void 0),c([d()],R.prototype,"layoutGroupQuery",void 0),c([d()],R.prototype,"livingAtlasGroupQuery",void 0),c([d({readOnly:!0})],R.prototype,"hasAPIKey",null),c([d()],R.prototype,"hasCategorySchema",void 0),c([d()],R.prototype,"hasClassificationSchema",void 0),c([d()],R.prototype,"helpBase",void 0),c([d()],R.prototype,"helperServices",void 0),c([d()],R.prototype,"helpMap",void 0),c([d()],R.prototype,"homePageFeaturedContent",void 0),c([d()],R.prototype,"homePageFeaturedContentCount",void 0),c([d()],R.prototype,"httpPort",void 0),c([d()],R.prototype,"httpsPort",void 0),c([d()],R.prototype,"id",void 0),c([d()],R.prototype,"ipCntryCode",void 0),c([d({readOnly:!0})],R.prototype,"isOrganization",null),c([d()],R.prototype,"isPortal",void 0),c([d()],R.prototype,"isReadOnly",void 0),c([d({readOnly:!0})],R.prototype,"itemPageUrl",null),c([d()],R.prototype,"layerTemplatesGroupQuery",void 0),c([d()],R.prototype,"maxTokenExpirationMinutes",void 0),c([d({type:Date})],R.prototype,"modified",void 0),c([d()],R.prototype,"name",void 0),c([d()],R.prototype,"portalHostname",void 0),c([d()],R.prototype,"portalMode",void 0),c([d()],R.prototype,"portalProperties",void 0),c([d()],R.prototype,"region",void 0),c([d()],R.prototype,"recycleBinEnabled",void 0),c([d({readOnly:!0})],R.prototype,"restUrl",null),c([d()],R.prototype,"rotatorPanels",void 0),c([d()],R.prototype,"showHomePageDescription",void 0),c([d()],R.prototype,"sourceJSON",void 0),c([d()],R.prototype,"staticImagesUrl",void 0),c([d({json:{name:"2DStylesGroupQuery"}})],R.prototype,"stylesGroupQuery2d",void 0),c([d({json:{name:"stylesGroupQuery"}})],R.prototype,"stylesGroupQuery3d",void 0),c([d()],R.prototype,"supportsHostedServices",void 0),c([d()],R.prototype,"symbolSetsGroupQuery",void 0),c([d()],R.prototype,"templatesGroupQuery",void 0),c([d()],R.prototype,"thumbnail",void 0),c([d({readOnly:!0})],R.prototype,"thumbnailUrl",null),c([d()],R.prototype,"units",void 0),c([d()],R.prototype,"url",void 0),c([d()],R.prototype,"urlKey",void 0),c([de("urlKey")],R.prototype,"readUrlKey",null),c([d()],R.prototype,"user",void 0),c([de("user")],R.prototype,"readUser",null),c([d()],R.prototype,"use3dBasemaps",void 0),c([d()],R.prototype,"useDefault3dBasemap",void 0),c([d()],R.prototype,"useStandardizedQuery",void 0),c([d()],R.prototype,"useVectorBasemaps",void 0),c([d()],R.prototype,"vectorBasemapGalleryGroupQuery",void 0),R=Yt=c([S("esri.portal.Portal")],R);const _n=R,fb=new FinalizationRegistry(e=>{e.remove()});function s5(e){const t=_e;return()=>{const r=e.deref();r&&t.findCredential(r.restUrl)&&r.signIn().catch(()=>{})}}let Vi=class extends q{constructor(t){super(t),this.portalItem=null}normalizeCtorArgs(t){return t!=null&&t.portalItem&&t.path?{...t,path:mb(t.path,t.portalItem)}:t}set path(t){t!=null&&or(t)?F.getLogger(this).error("portalitemresource:invalid-path","A portal item resource path must be relative"):this._set("path",t)}_castPath(t){return mb(t,this.portalItem)}get url(){return this.portalItem&&this.path?`${this.portalItem.itemUrl}/resources/${this.path}`:null}get cdnUrl(){return this.portalItem&&this.path?`${this.portalItem.itemCdnUrl}/resources/${this.path}`:null}get itemRelativeUrl(){return this.portalItem&&this.path?`./resources/${this.path}`:null}fetch(t="json",r){const i=this.cdnUrl;if(i==null)throw new I("portal-item-resource:fetch","Portal item resource does not refer to a valid item or path");return this.portalItem.portal.request(i,{responseType:t,query:{token:this.portalItem.apiKey,_ts:r!=null&&r.cacheBust?Date.now():null},signal:r==null?void 0:r.signal})}async update(t,r){const{addOrUpdateResources:i}=await N(()=>import("./resourceUtils-BwavywHQ.js"),[]);return await i(this.portalItem,[{resource:this,content:t,compress:r==null?void 0:r.compress,access:r==null?void 0:r.access}],"update",r),this}hasPath(){return this.path!=null}};function mb(e,t){return e==null?e:(e=e.replace(/^\/+/,""),t!=null&&or(e)&&(e=__(e,t.itemUrl)),e==null?void 0:e.replace(/^\/+/,"").replace(/^(\.\/)?resources\//,""))}c([d()],Vi.prototype,"portalItem",void 0),c([d({type:String,value:null})],Vi.prototype,"path",null),c([tt("path")],Vi.prototype,"_castPath",null),c([d({type:String,readOnly:!0})],Vi.prototype,"url",null),c([d({type:String,readOnly:!0})],Vi.prototype,"cdnUrl",null),c([d({type:String,readOnly:!0})],Vi.prototype,"itemRelativeUrl",null),Vi=c([S("esri.portal.PortalItemResource")],Vi);const n5=Vi;let nu=class extends q{constructor(t){super(t),this.created=null,this.rating=null}};c([d({type:Date})],nu.prototype,"created",void 0),c([d()],nu.prototype,"rating",void 0),nu=c([S("esri.portal.PortalRating")],nu);const Dm=nu;var jn;const o5=new Set(["3DTiles Service","CSV","Feature Collection","Feature Service","Feed","GeoJson","Group Layer","Image Service","KML","Map Service","Media Layer","Scene Service","Stream Service","Vector Tile Service","WFS","WMS","WMTS"]),a5=new Set(["KML","GeoJson","CSV"]);let Q=jn=class extends j.JSONSupportMixin(mn){static from(e){return Ef(jn,e)}constructor(e){super(e),this.access=null,this.accessInformation=null,this.apiKey=null,this.applicationProxies=null,this.avgRating=null,this.categories=null,this.classification=null,this.created=null,this.culture=null,this.description=null,this.extent=null,this.groupCategories=null,this.id=null,this.isOrgItem=!1,this.itemControl=null,this.licenseInfo=null,this.modified=null,this.name=null,this.numComments=null,this.numRatings=null,this.numViews=null,this.owner=null,this.ownerFolder=null,this.portal=null,this.screenshots=null,this.size=null,this.snippet=null,this.sourceJSON=null,this.sourceUrl=null,this.spatialReference=null,this.tags=null,this.title=null,this.type=null,this.typeKeywords=null,this.url=null}destroy(){this.portal=null}get displayName(){const e=this.type,t=this.typeKeywords||[];let r=e;return e==="Feature Service"||e==="Feature Collection"?r=t.includes("Table")?"Table":t.includes("Route Layer")?"Route Layer":t.includes("Markup")?"Markup":"Feature Layer":e==="Image Service"?r=t.includes("Elevation 3D Layer")?"Elevation Layer":t.includes("Tiled Imagery")?"Tiled Imagery Layer":"Imagery Layer":e==="Scene Service"?r="Scene Layer":e==="Video Service"?r="Video Layer":e==="Scene Package"?r="Scene Layer Package":e==="Stream Service"?r="Feature Layer":e==="Geoprocessing Service"?r=t.includes("Web Tool")?"Tool":"Geoprocessing Service":e==="Geoenrichment Service"?r="GeoEnrichment Service":e==="Geocoding Service"?r="Locator":e==="Microsoft Powerpoint"?r="Microsoft PowerPoint":e==="GeoJson"?r="GeoJSON":e==="Globe Service"?r="Globe Layer":e==="Vector Tile Service"?r="Tile Layer":e==="netCDF"?r="NetCDF":e==="Map Service"?r=t.includes("Spatiotemporal")||!t.includes("Hosted Service")&&!t.includes("Tiled")||t.includes("Relational")?"Map Image Layer":"Tile Layer":e!=null&&e.toLowerCase().includes("add in")?r=e.replaceAll(/(add in)/gi,"Add-In"):e==="datastore catalog service"?r="Big Data File Share":e==="Compact Tile Package"?r="Tile Package (tpkx)":e==="Raster function template"?r="Raster Function Template":e==="OGCFeatureServer"?r="OGC Feature Layer":e==="web mapping application"&&t.includes("configurableApp")?r="Instant App":e==="Insights Page"?r="Insights Report":e==="Excalibur Imagery Project"?r="Excalibur Project":e==="3DTiles Service"?r="3D tiles layer":e==="3DTiles Package"&&(r="3D tiles package"),r}readExtent(e){return e&&e.length?new Le(e[0][0],e[0][1],e[1][0],e[1][1]):null}get iconUrl(){var y;const e=((y=this.type)==null?void 0:y.toLowerCase())||"",t=this.typeKeywords||[],r="esri/images/portal/",i="16";let s,n=!1,o=!1,a=!1,l=!1,h=!1,p=!1,f=!1,m=!1;return e.indexOf("service")>0||e==="feature collection"||e==="kml"||e==="wms"||e==="wmts"||e==="wfs"?(n=t.includes("Hosted Service"),e==="feature service"||e==="feature collection"||e==="kml"||e==="wfs"?(o=t.includes("Table"),a=t.includes("Route Layer"),l=t.includes("Markup"),h=t.includes("Spatiotemporal"),p=t.includes("UtilityNetwork"),s=h&&o?"spatiotemporaltable":o?"table":a?"routelayer":l?"markup":h?"spatiotemporal":p?"utilitynetwork":n?"featureshosted":"features"):e==="map service"||e==="wms"||e==="wmts"?(h=t.includes("Spatiotemporal"),f=t.includes("Relational"),s=h||f?"mapimages":n||t.includes("Tiled")||e==="wmts"?"maptiles":"mapimages"):s=e==="scene service"?t.includes("Line")?"sceneweblayerline":t.includes("3DObject")?"sceneweblayermultipatch":t.includes("Point")?"sceneweblayerpoint":t.includes("IntegratedMesh")?"sceneweblayermesh":t.includes("PointCloud")?"sceneweblayerpointcloud":t.includes("Polygon")?"sceneweblayerpolygon":t.includes("Building")?"sceneweblayerbuilding":t.includes("Voxel")?"sceneweblayervoxel":"sceneweblayer":e==="image service"?t.includes("Elevation 3D Layer")?"elevationlayer":t.includes("Tiled Imagery")?"tiledimagerylayer":"imagery":e==="stream service"?"streamlayer":e==="vector tile service"?"vectortile":e==="datastore catalog service"?"datastorecollection":e==="geocoding service"?"geocodeservice":e==="video service"?t.includes("Live Stream")?"livestreamvideolayer":"videolayer":e==="geoprocessing service"?t.includes("Web Tool")?"tool":"layers":e==="geodata service"?"geodataservice":e==="3dtiles service"?t.includes("3DObject")?"3dobjecttileslayer":t.includes("IntegratedMesh")?"integratedmeshtileslayer":"3dtileslayer":"layers"):e==="web map"||e==="cityengine web scene"?s="maps":e==="web scene"?s=t.includes("ViewingMode-Local")?"webscenelocal":"websceneglobal":e==="web mapping application"&&t.includes("configurableApp")?s="instantapps":e==="web mapping application"||e==="mobile application"||e==="application"||e==="operation view"||e==="desktop application"?s="apps":e==="map document"||e==="map package"||e==="published map"||e==="scene document"||e==="globe document"||e==="basemap package"||e==="mobile basemap package"||e==="mobile map package"||e==="project package"||e==="project template"||e==="pro map"||e==="layout"||e==="layer"&&t.includes("ArcGIS Pro")||e==="explorer map"&&t.indexOf("Explorer Document")?s="mapsgray":e==="service definition"||e==="shapefile"||e==="cad drawing"||e==="geojson"||e==="netcdf"||e==="administrative report"?s="datafiles":e==="360 vr experience"?s="360vr":e==="explorer add in"||e==="desktop add in"||e==="windows viewer add in"||e==="windows viewer configuration"?s="appsgray":e==="arcgis pro add in"||e==="arcgis pro configuration"?s="addindesktop":e==="pdf"?s="pdf":e==="microsoft word"?s="word":e==="microsoft excel"?s="excel":e==="microsoft powerpoint"?s="ppt":e==="rule package"||e==="file geodatabase"||e==="sqlite geodatabase"||e==="csv collection"||e==="kml collection"||e==="windows mobile package"||e==="map template"||e==="desktop application template"||e==="gml"||e==="arcpad package"||e==="code sample"||e==="document link"||e==="earth configuration"||e==="operations dashboard add in"||e==="rules package"||e==="workflow manager package"||e==="explorer map"&&t.includes("Explorer Mapping Application")||t.includes("Document")?s="datafilesgray":e==="network analysis service"||e==="geoprocessing service"||e==="geodata service"||e==="geometry service"||e==="geoprocessing package"||e==="locator package"||e==="geoprocessing sample"||e==="workflow manager service"?s="toolsgray":e==="layer"||e==="layer package"||e==="explorer layer"?s="layersgray":e==="analysis model"?s="analysismodel":e==="scene package"?s="scenepackage":e==="3dtiles package"?s="3dtileslayerpackage":e==="3dtiles service"?s="3dtileslayer":e==="mobile scene package"?s="mobilescenepackage":e==="tile package"||e==="compact tile package"?s="tilepackage":e==="task file"?s="taskfile":e==="report template"?s="report-template":e==="statistical data collection"?s="statisticaldatacollection":e==="insights workbook"?s="workbook":e==="insights model"?s="insightsmodel":e==="insights page"?s="insightspage":e==="insights theme"?s="insightstheme":e==="hub initiative"?s="hubinitiative":e==="hub page"?s="hubpage":e==="hub site application"?s="hubsite":e==="hub event"?s="hubevent":e==="hub project"?s="hubproject":e==="relational database connection"?s="relationaldatabaseconnection":e==="big data file share"?s="datastorecollection":e==="image collection"?s="imagecollection":e==="desktop style"?s="desktopstyle":e==="style"?s=t.includes("Dictionary")?"dictionarystyle":"style":e==="dashboard"?s="dashboard":e==="raster function template"?s="rasterprocessingtemplate":e==="vector tile package"?s="vectortilepackage":e==="ortho mapping project"?s="orthomappingproject":e==="ortho mapping template"?s="orthomappingtemplate":e==="solution"?s="solutions":e==="geopackage"?s="geopackage":e==="deep learning package"?s="deeplearningpackage":e==="real time analytic"?s="realtimeanalytics":e==="reality mapping project"?s="realitymappingproject":e==="big data analytic"?s="bigdataanalytics":e==="feed"?s="feed":e==="excalibur imagery project"?s="excaliburimageryproject":e==="notebook"?s="notebook":e==="storymap"?s="storymap":e==="survey123 add in"?s="survey123addin":e==="mission"?s="mission":e==="mission report"?s="missionreport":e==="mission template"?s="missiontemplate":e==="quickcapture project"?s="quickcaptureproject":e==="pro report"?s="proreport":e==="pro report template"?s="proreporttemplate":e==="urban model"?s="urbanmodel":e==="urban project"?s="urbanproject":e==="web experience"?s="experiencebuilder":e==="web experience template"?s="webexperiencetemplate":e==="experience builder widget"?s="experiencebuilderwidget":e==="experience builder widget package"?s="experiencebuilderwidgetpackage":e==="workflow"?s="workflow":e==="kernel gateway connection"?s="kernelgatewayconnection":e==="insights script"?s="insightsscript":e==="hub initiative template"?s="hubinitiativetemplate":e==="storymap theme"?s="storymaptheme":e==="knowledge graph"?s="knowledgegraph":e==="knowledge graph layer"?s="knowledgegraphlayer":e==="knowledge studio project"?s="knowledgestudio":e==="native application"?s="nativeapp":e==="native application installer"?s="nativeappinstaller":e==="web link chart"?s="linkchart":e==="knowledge graph web investigation"?s="investigation":e==="ogcfeatureserver"?s="features":e==="pro presentation"?s="propresentation":e==="pro project"?s="proproject":e==="insights workbook package"?s="insightsworkbookpackage":e==="apache parquet"?s="apacheparquet":e==="notebook code snippet library"?s="notebookcodesnippets":e==="suitability model"?s="suitabilitymodel":e==="esri classifier definition"?s="classifierdefinition":e==="esri classification schema"?s="classificationschema":e==="insights data engineering workbook"?s="dataengineeringworkbook":e==="insights data engineering model"?s="dataengineeringmodel":e==="deep learning studio project"?s="deeplearningproject":e==="discussion"?s="discussion":e==="allsource project"?s="allsourceproject":e==="api key"?s="apikey":e==="data pipeline"?s="datapipelines":e==="group layer"?(m=t.includes("Map"),s=m?"layergroup2d":"layergroup"):s=e==="media layer"?"onlinemedialayer":e==="form"?t.includes("Survey123")?"survey":"datafilesgray":e==="csv"?"csv":e==="image"?"image":"maps",s?je(r+s+i+".png"):null}get isLayer(){return this.type!=null&&o5.has(this.type)}get itemCdnUrl(){return $_(this.itemUrl)}get itemPageUrl(){var t;const e=(t=this.portal)==null?void 0:t.itemPageUrl;return e&&this.id?`${e}?id=${this.id}`:null}get itemUrl(){var t;const e=(t=this.portal)==null?void 0:t.restUrl;return e&&this.id?`${e}/content/items/${this.id}`:null}get thumbnailUrl(){var r;const e=this.itemUrl,t=this.thumbnail;return e&&t?((r=this.portal)==null?void 0:r.normalizeUrl(`${e}/info/${t}?f=json`))??null:null}get userItemUrl(){var r,i,s;const e=(r=this.portal)==null?void 0:r.restUrl;if(!e)return null;const t=this.owner||((s=(i=this.portal)==null?void 0:i.user)==null?void 0:s.username);return t?`${e}/content/users/${this.ownerFolder?`${t}/${this.ownerFolder}`:t}/items/${this.id}`:null}load(e){const t=this.portal??(this.portal=_n.getDefault()),r=t.load(e).then(()=>this.sourceJSON?this.sourceJSON:this.id&&this.itemUrl?t.request(this.itemUrl,{signal:e!=null?e.signal:null,query:{token:this.apiKey}}):{}).then(i=>{this.sourceJSON=i,this.read(i)});return this.addResolvingPromise(r),Promise.resolve(this)}async addRating(e){const t={method:"post",query:{}},r=e instanceof Dm?e.rating:e;return r==null||isNaN(r)||typeof e!="number"||(t.query.rating=r),this.portal?(await this.portal.request(this.itemUrl+"/addRating",t),new Dm({rating:r,created:new Date})):null}clone(){const e={access:this.access,accessInformation:this.accessInformation,applicationProxies:C(this.applicationProxies),avgRating:this.avgRating,categories:C(this.categories),classification:C(this.classification),created:C(this.created),culture:this.culture,description:this.description,extent:C(this.extent),groupCategories:C(this.groupCategories),id:this.id,itemControl:this.itemControl,licenseInfo:this.licenseInfo,modified:C(this.modified),name:this.name,numComments:this.numComments,numRatings:this.numRatings,numViews:this.numViews,owner:this.owner,ownerFolder:this.ownerFolder,portal:this.portal,screenshots:C(this.screenshots),size:this.size,snippet:this.snippet,sourceUrl:this.sourceUrl,spatialReference:this.spatialReference,tags:C(this.tags),thumbnail:this.thumbnail,title:this.title,type:this.type,typeKeywords:C(this.typeKeywords),url:this.url};this.loaded&&(e.loadStatus="loaded");const t=new jn({sourceJSON:this.sourceJSON}).set(e);return t._set("isOrgItem",this.isOrgItem),t}createPostQuery(){var t;const e=this.toJSON();for(const r of["tags","typeKeywords","categories"])e[r]=(t=e[r])==null?void 0:t.join(", ");for(const r of["extent","classification"]){const i=e[r];i&&(e[r]=JSON.stringify(i))}return e}async deleteRating(){await this.portal.request(this.itemUrl+"/deleteRating",{method:"post"})}fetchData(e="json",t){return this.portal.request(this.itemUrl+"/data",{responseType:e,...t,query:{token:this.apiKey}})}async fetchRating(e){const t=await this.portal.request(this.itemUrl+"/rating",{query:{token:this.apiKey},...e});return t.rating!=null?(t.created=new Date(t.created),new Dm(t)):null}fetchRelatedItems(e,t){return this.portal.requestToTypedArray(this.itemUrl+"/relatedItems",{query:{...e,token:this.apiKey},...t},jn)}getThumbnailUrl(e){let t=this.thumbnailUrl;return t&&e&&(t+=`&w=${e}`),t}reload(){return this.portal.request(this.itemUrl??"",{cacheBust:!0,query:{token:this.apiKey}}).then(e=>(this.applicationProxies&&!Object.hasOwn(e,"appProxies")&&(this.applicationProxies=null),this.sourceJSON=e,this.read(e),this))}update(e){return this.id?this.load().then(()=>this.portal.signIn()).then(()=>{const t=e==null?void 0:e.data,r={method:"post"};r.query=this.createPostQuery();for(const i in r.query)r.query[i]===null&&(r.query[i]="");return r.query.clearEmptyFields=!0,t!=null&&(typeof t=="string"?r.query.text=t:typeof t=="object"&&(r.query.text=JSON.stringify(t))),this.portal.request(`${this.userItemUrl}/update`,r).then(()=>this.reload())}):Promise.reject(new I("portal:item-does-not-exist","The item does not exist yet and cannot be updated"))}async copy(e){if(!this.id)throw new I("portal:item-does-not-exist","The item does not exist yet");await this.load();const{portal:t,itemUrl:r}=this;await t.signIn();const{copyResources:i,folder:s,tags:n,title:o}=e||{},a={method:"post",query:{copyPrivateResources:i==="all",folder:typeof s=="string"?s:s==null?void 0:s.id,includeResources:!!i,tags:n==null?void 0:n.join(","),title:o}},{itemId:l}=await t.request(`${r}/copy`,a);return new jn({id:l,portal:t})}updateThumbnail(e){return this.id?this.load().then(()=>this.portal.signIn()).then(()=>{const t=e.thumbnail,r=e.filename,i={method:"post"};if(typeof t=="string")Uo(t)?i.query={data:t}:i.query={url:Tr(t)},r!=null&&(i.query.filename=r);else{const s=new FormData;r!=null?s.append("file",t,r):s.append("file",t),i.body=s}return this.portal.request(`${this.userItemUrl}/updateThumbnail`,i).then(()=>this.reload())}):Promise.reject(new I("portal:item-does-not-exist","The item does not exist yet and cannot be updated"))}async fetchResources(e={},t){const{fetchResources:r}=await N(()=>import("./resourceUtils-BwavywHQ.js"),[]);return r(this,e,t)}async addResource(e,t,r){const{addOrUpdateResources:i}=await N(()=>import("./resourceUtils-BwavywHQ.js"),[]);return e.portalItem=this,await i(this,[{resource:e,content:t,compress:r==null?void 0:r.compress,access:r==null?void 0:r.access}],"add",r),e}async removeResource(e,t){const{removeResource:r}=await N(()=>import("./resourceUtils-BwavywHQ.js"),[]);if(e.portalItem&&e.portalItem.itemUrl!==this.itemUrl)throw new I("removeresource:portal-item-mismatch","The portal item associated with the provided resource does not match the item");return r(this,e,t)}async removeAllResources(e){const{removeAllResources:t}=await N(()=>import("./resourceUtils-BwavywHQ.js"),[]);return t(this,e)}resourceFromPath(e){return new n5({portalItem:this,path:e})}toJSON(){var r,i;const e=this.extent,t={accessInformation:this.accessInformation,categories:C(this.categories),classification:C(this.classification),created:(r=this.created)==null?void 0:r.getTime(),description:this.description,extent:e&&[[e.xmin,e.ymin],[e.xmax,e.ymax]],id:this.id,isOrgItem:this.isOrgItem,licenseInfo:this.licenseInfo,modified:(i=this.modified)==null?void 0:i.getTime(),name:this.name,owner:this.owner,ownerFolder:this.ownerFolder,snippet:this.snippet,sourceUrl:this.sourceUrl,spatialReference:this.spatialReference,tags:C(this.tags),thumbnail:this.thumbnail,title:this.title,type:this.type,typeKeywords:C(this.typeKeywords),url:this.url};return EI(t)}static fromJSON(e){if(!e)return null;if(e.declaredClass)throw new Error("JSON object is already hydrated");return new jn({sourceJSON:e})}_getPostQuery(){const e=this.toJSON();for(const t in e)t==="tags"&&e[t]!==null&&(e[t]=e[t].join(", ")),t==="typeKeywords"&&e[t]!==null&&(e[t]=e[t].join(", ")),t==="extent"&&e[t]&&(e[t]=JSON.stringify(e[t]));return e}};c([d({type:["private","shared","org","public"]})],Q.prototype,"access",void 0),c([d()],Q.prototype,"accessInformation",void 0),c([d({type:String})],Q.prototype,"apiKey",void 0),c([d({json:{read:{source:"appProxies"}}})],Q.prototype,"applicationProxies",void 0),c([d()],Q.prototype,"avgRating",void 0),c([d()],Q.prototype,"categories",void 0),c([d()],Q.prototype,"classification",void 0),c([d({type:Date})],Q.prototype,"created",void 0),c([d()],Q.prototype,"culture",void 0),c([d()],Q.prototype,"description",void 0),c([d({readOnly:!0})],Q.prototype,"displayName",null),c([d({type:Le})],Q.prototype,"extent",void 0),c([de("extent")],Q.prototype,"readExtent",null),c([d()],Q.prototype,"groupCategories",void 0),c([d({readOnly:!0})],Q.prototype,"iconUrl",null),c([d()],Q.prototype,"id",void 0),c([d({readOnly:!0})],Q.prototype,"isLayer",null),c([d({type:Boolean,readOnly:!0})],Q.prototype,"isOrgItem",void 0),c([d()],Q.prototype,"itemControl",void 0),c([d({readOnly:!0})],Q.prototype,"itemPageUrl",null),c([d({readOnly:!0})],Q.prototype,"itemUrl",null),c([d()],Q.prototype,"licenseInfo",void 0),c([d({type:Date})],Q.prototype,"modified",void 0),c([d()],Q.prototype,"name",void 0),c([d()],Q.prototype,"numComments",void 0),c([d()],Q.prototype,"numRatings",void 0),c([d()],Q.prototype,"numViews",void 0),c([d()],Q.prototype,"owner",void 0),c([d()],Q.prototype,"ownerFolder",void 0),c([d({type:_n})],Q.prototype,"portal",void 0),c([d()],Q.prototype,"screenshots",void 0),c([d()],Q.prototype,"size",void 0),c([d()],Q.prototype,"snippet",void 0),c([d()],Q.prototype,"sourceJSON",void 0),c([d({type:String})],Q.prototype,"sourceUrl",void 0),c([d({type:String})],Q.prototype,"spatialReference",void 0),c([d()],Q.prototype,"tags",void 0),c([d()],Q.prototype,"thumbnail",void 0),c([d({readOnly:!0})],Q.prototype,"thumbnailUrl",null),c([d()],Q.prototype,"title",void 0),c([d()],Q.prototype,"type",void 0),c([d()],Q.prototype,"typeKeywords",void 0),c([d({type:String,json:{read(e,t){var r;if(a5.has(t.type)){const i=(r=this.portal)==null?void 0:r.restUrl;e||(e=i&&this.id?`${i}/content/items/${this.id}/data`:null)}return e}}})],Q.prototype,"url",void 0),c([d({readOnly:!0})],Q.prototype,"userItemUrl",null),Q=jn=c([S("esri.portal.PortalItem")],Q);const $3=Q,E3=Object.freeze(Object.defineProperty({__proto__:null,default:$3},Symbol.toStringTag,{value:"Module"})),yb=/^([a-z]{2})(?:[-_]([A-Za-z]{2}))?$/,M3={ar:!0,bg:!0,bs:!0,ca:!0,cs:!0,da:!0,de:!0,el:!0,en:!0,es:!0,et:!0,fi:!0,fr:!0,he:!0,hr:!0,hu:!0,id:!0,it:!0,ja:!0,ko:!0,lt:!0,lv:!0,nb:"no",nl:!0,no:!0,pl:!0,pt:"pt-BR","pt-BR":!0,"pt-PT":!0,ro:!0,ru:!0,sk:!0,sl:!0,sr:!0,sv:!0,th:!0,tr:!0,uk:!0,vi:!0,zh:"zh-CN","zh-CN":!0,"zh-HK":!0,"zh-TW":!0};function l5(e){return e in M3}function gb(e){if(l5(e)){const t=M3[e];return t===!0?e:t}return null}const ou=[],Ga=new Map;function _b(e){for(const t of Ga.keys())P3(e.pattern,t)&&Ga.delete(t)}function u5(e){return ou.includes(e)||(_b(e),ou.unshift(e)),ue(()=>{const t=ou.indexOf(e);t>-1&&(ou.splice(t,1),_b(e))})}async function x3(e){const t=Vt();Ga.has(e)||Ga.set(e,c5(e,t));const r=Ga.get(e);return r&&await h5.add(r),r}function A3(e){if(!yb.test(e))return null;const t=yb.exec(e);if(t===null)return null;const[,r,i]=t;return gb(r+(i?"-"+i.toUpperCase():""))??gb(r)}async function c5(e,t){const r=[];for(const i of ou)if(P3(i.pattern,e))try{return await i.fetchMessageBundle(e,t)}catch(s){r.push(s)}throw r.length?new I("intl:message-bundle-error",`Errors occurred while loading "${e}"`,{errors:r}):new I("intl:no-message-bundle-loader",`No loader found for message bundle "${e}"`)}function P3(e,t){return typeof e=="string"?t.startsWith(e):e.test(t)}L_(()=>{Ga.clear()});const h5=new class{constructor(){this._numLoading=0,this._dfd=null}async waitForAll(){this._dfd&&await this._dfd.promise}add(e){return this._increase(),e.then(()=>this._decrease(),()=>this._decrease()),this.waitForAll()}_increase(){this._numLoading++,this._dfd||(this._dfd=Pr())}_decrease(){this._numLoading=Math.max(this._numLoading-1,0),this._dfd&&this._numLoading===0&&(this._dfd.resolve(),this._dfd=null)}};async function d5(e){if(!e)return;const t=e.includes("-vector")?e.slice(0,e.indexOf("-vector")):e.includes("-3d")?e.slice(0,e.indexOf("-3d")):e,r=await x3("esri/t9n/basemaps");return r[e]||r[t]}const Ag={satellite:{id:"satellite",classic:!0,get thumbnailUrl(){return je("esri/images/basemap/satellite.jpg")},baseMapLayers:[{id:"satellite-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Imagery",showLegend:!1,visibility:!0,opacity:1}]},hybrid:{id:"hybrid",classic:!0,get thumbnailUrl(){return je("esri/images/basemap/hybrid.jpg")},baseMapLayers:[{id:"hybrid-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Imagery",showLegend:!1,visibility:!0,opacity:1},{id:"hybrid-reference-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/30d6b8271e1849cd9c3042060001f425/resources/styles/root.json",layerType:"VectorTileLayer",title:"Hybrid Reference Layer",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},terrain:{id:"terrain",classic:!0,get thumbnailUrl(){return je("esri/images/basemap/terrain.jpg")},baseMapLayers:[{id:"terrain-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Terrain_Base/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Terrain Base",showLegend:!1,visibility:!0,opacity:1},{id:"terrain-reference-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/Reference/World_Reference_Overlay/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Reference Overlay",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},oceans:{id:"oceans",classic:!0,get thumbnailUrl(){return je("esri/images/basemap/oceans.jpg")},baseMapLayers:[{id:"oceans-base-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Ocean/World_Ocean_Base/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Ocean Base",showLegend:!1,visibility:!0,opacity:1},{id:"oceans-reference-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Ocean/World_Ocean_Reference/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Ocean Reference",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},osm:{id:"osm",classic:!0,get thumbnailUrl(){return je("esri/images/basemap/osm.jpg")},baseMapLayers:[{id:"osm-base-layer",layerType:"OpenStreetMap",title:"Open Street Map",showLegend:!1,visibility:!0,opacity:1}]},"dark-gray-vector":{id:"dark-gray-vector",classic:!0,get thumbnailUrl(){return je("esri/images/basemap/dark-gray-vector.jpg")},baseMapLayers:[{id:"dark-gray-base-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/5e9b3685f4c24d8781073dd928ebda50/resources/styles/root.json",layerType:"VectorTileLayer",title:"Dark Gray Base",visibility:!0,opacity:1},{id:"dark-gray-reference-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/747cb7a5329c478cbe6981076cc879c5/resources/styles/root.json",layerType:"VectorTileLayer",title:"Dark Gray Reference",isReference:!0,visibility:!0,opacity:1}]},get"dark-gray"(){return{...this["dark-gray-vector"],id:"dark-gray"}},"gray-vector":{id:"gray-vector",classic:!0,get thumbnailUrl(){return je("esri/images/basemap/gray-vector.jpg")},baseMapLayers:[{id:"gray-base-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/291da5eab3a0412593b66d384379f89f/resources/styles/root.json",layerType:"VectorTileLayer",title:"Light Gray Base",visibility:!0,opacity:1},{id:"gray-reference-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/1768e8369a214dfab4e2167d5c5f2454/resources/styles/root.json",layerType:"VectorTileLayer",title:"Light Gray Reference",isReference:!0,visibility:!0,opacity:1}]},get gray(){return{...this["gray-vector"],id:"gray"}},"streets-vector":{id:"streets-vector",classic:!0,get thumbnailUrl(){return je("esri/images/basemap/streets-vector.jpg")},baseMapLayers:[{id:"streets-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/de26a3cf4cc9451298ea173c4b324736/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Streets",visibility:!0,opacity:1}]},get streets(){return{...this["streets-vector"],id:"streets"}},"topo-vector":{id:"topo-vector",classic:!0,get thumbnailUrl(){return je("esri/images/basemap/topo-vector.jpg")},baseMapLayers:[{id:"world-hillshade-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Hillshade",showLegend:!1,visibility:!0,opacity:1},{id:"topo-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/7dc6cea0b1764a1f9af2e679f642f0f5/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Topo",visibility:!0,opacity:1}]},get topo(){return{...this["topo-vector"],id:"topo"}},"streets-night-vector":{id:"streets-night-vector",classic:!0,get thumbnailUrl(){return je("esri/images/basemap/streets-night.jpg")},baseMapLayers:[{id:"streets-night-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/86f556a2d1fd468181855a35e344567f/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Streets Night",visibility:!0,opacity:1}]},"streets-relief-vector":{id:"streets-relief-vector",classic:!0,get thumbnailUrl(){return je("esri/images/basemap/streets-relief.jpg")},baseMapLayers:[{id:"world-hillshade-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Hillshade",showLegend:!1,visibility:!0,opacity:1},{id:"streets-relief-vector-base-layer",styleUrl:"//www.arcgis.com/sharing/rest/content/items/b266e6d17fc345b498345613930fbd76/resources/styles/root.json",title:"World Streets Relief",layerType:"VectorTileLayer",visibility:!0,opacity:1}]},"streets-navigation-vector":{id:"streets-navigation-vector",classic:!0,get thumbnailUrl(){return je("esri/images/basemap/streets-navigation.jpg")},baseMapLayers:[{id:"streets-navigation-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/63c47b7177f946b49902c24129b87252/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Streets Navigation",visibility:!0,opacity:1}]},"topo-3d":{id:"topo-3d",is3d:!0,get thumbnailUrl(){return je("esri/images/basemap/topo-3d.png")},baseMapLayers:[{id:"topo-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/1e7d1784d1ef4b79ba6764d0bd6c3150/resources/styles/root.json",layerType:"VectorTileLayer",title:"Topographic",visibility:!0,opacity:1},{id:"topo-3d-trees",title:"Trees",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Trees_Thematic_v1/SceneServer",itemId:"f75fef56b2d944fe92ef9f7737b4f953",layerType:"ArcGISSceneServiceLayer"},{id:"topo-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_DarkLabels_v1/SceneServer",itemId:"a84404ad39c64c328d0596e361ec459b",layerType:"ArcGISSceneServiceLayer"},{id:"topo-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Buildings_v1/SceneServer",itemId:"ca0470dbbddb4db28bad74ed39949e25",layerType:"ArcGISSceneServiceLayer"}]},"navigation-3d":{id:"navigation-3d",is3d:!0,get thumbnailUrl(){return je("esri/images/basemap/navigation-3d.jpg")},baseMapLayers:[{id:"navigation-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/ccc904ff872b4144b94934e55e32784b/resources/styles/root.json",layerType:"VectorTileLayer",title:"Navigation",visibility:!0,opacity:1},{id:"navigation-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_DarkLabels_v1/SceneServer",itemId:"a84404ad39c64c328d0596e361ec459b",layerType:"ArcGISSceneServiceLayer"},{id:"navigation-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Buildings_v1/SceneServer",itemId:"ca0470dbbddb4db28bad74ed39949e25",layerType:"ArcGISSceneServiceLayer"}]},"streets-3d":{id:"streets-3d",is3d:!0,get thumbnailUrl(){return je("esri/images/basemap/streets-3d.png")},baseMapLayers:[{id:"streets-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/198298c4c64c4cb19de5b46aa00c198d/resources/styles/root.json",layerType:"VectorTileLayer",title:"Streets",visibility:!0,opacity:1},{id:"streets-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_DarkLabels_v1/SceneServer",itemId:"a84404ad39c64c328d0596e361ec459b",layerType:"ArcGISSceneServiceLayer"},{id:"streets-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Buildings_v1/SceneServer",itemId:"ca0470dbbddb4db28bad74ed39949e25",layerType:"ArcGISSceneServiceLayer"}]},"osm-3d":{id:"osm-3d",is3d:!0,get thumbnailUrl(){return je("esri/images/basemap/osm-3d.png")},baseMapLayers:[{id:"osm-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/8628d259c9d14bdc848771c23c513940/resources/styles/root.json",layerType:"VectorTileLayer",title:"OpenStreetMap",visibility:!0,opacity:1},{id:"osm-3d-trees",title:"Trees",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Trees_Thematic_v1/SceneServer",itemId:"f75fef56b2d944fe92ef9f7737b4f953",layerType:"ArcGISSceneServiceLayer"},{id:"osm-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_DarkLabels_v1/SceneServer",itemId:"a84404ad39c64c328d0596e361ec459b",layerType:"ArcGISSceneServiceLayer"},{id:"osm-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Buildings_v1/SceneServer",itemId:"ca0470dbbddb4db28bad74ed39949e25",layerType:"ArcGISSceneServiceLayer"}]},"gray-3d":{id:"gray-3d",is3d:!0,get thumbnailUrl(){return je("esri/images/basemap/gray-3d.png")},baseMapLayers:[{id:"gray-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/01a14b466345455ba4176d2e6390db92/resources/styles/root.json",layerType:"VectorTileLayer",title:"Streets",visibility:!0,opacity:1},{id:"gray-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_DarkLabels_v1/SceneServer",itemId:"a84404ad39c64c328d0596e361ec459b",layerType:"ArcGISSceneServiceLayer"},{id:"gray-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Buildings_v1/SceneServer",itemId:"ca0470dbbddb4db28bad74ed39949e25",layerType:"ArcGISSceneServiceLayer"}]},"navigation-dark-3d":{id:"navigation-dark-3d",itemId:"5a1365328b4943f09a54cf5fd1205707",is3d:!0,baseMapLayers:[{id:"navigation-dark-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/451a1777ab3f4bf095fae24a117439d9/resources/styles/root.json",layerType:"VectorTileLayer",title:"Navigation Dark"},{id:"navigation-dark-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_LightLabels_v1/SceneServer/layers/0",itemId:"f364b70b012a4da5a4b5921e193eac4a",layerType:"ArcGISSceneServiceLayer"},{id:"navigation-dark-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Buildings_v1/SceneServer",itemId:"ca0470dbbddb4db28bad74ed39949e25",layerType:"ArcGISSceneServiceLayer"}]},"streets-dark-3d":{id:"streets-dark-3d",itemId:"8a4efa2c20484ec9b4557895e65736ff",is3d:!0,baseMapLayers:[{id:"streets-dark-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/bc599b6d741a4ac084b7eea7bf8c5938/resources/styles/root.json",layerType:"VectorTileLayer",title:"OpenStreetMap Streets Night (for 3D)"},{id:"streets-dark-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_LightLabels_v1/SceneServer",itemId:"f364b70b012a4da5a4b5921e193eac4a",layerType:"ArcGISSceneServiceLayer"},{id:"streets-dark-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Buildings_v1/SceneServer",itemId:"ca0470dbbddb4db28bad74ed39949e25",layerType:"ArcGISSceneServiceLayer"}]},"dark-gray-3d":{id:"dark-gray-3d",itemId:"a8b7322a5fe94002bb0f5e0eeb0c5c18",is3d:!0,baseMapLayers:[{id:"dark-gray-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/4178f71acb934fb89f169e7d667c20c6/resources/styles/root.json",layerType:"VectorTileLayer",title:"OpenStreetMap Dark Gray Canvas (for 3D)"},{id:"dark-gray-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_LightLabels_v1/SceneServer/layers/0",itemId:"f364b70b012a4da5a4b5921e193eac4a",layerType:"ArcGISSceneServiceLayer"},{id:"dark-gray-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Buildings_v1/SceneServer",itemId:"ca0470dbbddb4db28bad74ed39949e25",layerType:"ArcGISSceneServiceLayer"}]}},Pi="system",D_="unknown",Mc="UTC",p5=Intl.DateTimeFormat().resolvedOptions().timeZone,vb=new Map([["AUS Central Standard Time","Australia/Darwin"],["AUS Eastern Standard Time","Australia/Sydney"],["Afghanistan Standard Time","Asia/Kabul"],["Alaskan Standard Time","America/Anchorage"],["Aleutian Standard Time","America/Adak"],["Altai Standard Time","Asia/Barnaul"],["Arab Standard Time","Asia/Riyadh"],["Arabian Standard Time","Asia/Dubai"],["Arabic Standard Time","Asia/Baghdad"],["Argentina Standard Time","America/Buenos_Aires"],["Astrakhan Standard Time","Europe/Astrakhan"],["Atlantic Standard Time","America/Halifax"],["Aus Central W. Standard Time","Australia/Eucla"],["Azerbaijan Standard Time","Asia/Baku"],["Azores Standard Time","Atlantic/Azores"],["Bahia Standard Time","America/Bahia"],["Bangladesh Standard Time","Asia/Dhaka"],["Belarus Standard Time","Europe/Minsk"],["Bougainville Standard Time","Pacific/Bougainville"],["Canada Central Standard Time","America/Regina"],["Cape Verde Standard Time","Atlantic/Cape_Verde"],["Caucasus Standard Time","Asia/Yerevan"],["Cen. Australia Standard Time","Australia/Adelaide"],["Central America Standard Time","America/Guatemala"],["Central Asia Standard Time","Asia/Bishkek"],["Central Brazilian Standard Time","America/Cuiaba"],["Central Europe Standard Time","Europe/Budapest"],["Central European Standard Time","Europe/Warsaw"],["Central Pacific Standard Time","Pacific/Guadalcanal"],["Central Standard Time","America/Chicago"],["Central Standard Time (Mexico)","America/Mexico_City"],["Chatham Islands Standard Time","Pacific/Chatham"],["China Standard Time","Asia/Shanghai"],["Cuba Standard Time","America/Havana"],["Dateline Standard Time","Etc/GMT+12"],["E. Africa Standard Time","Africa/Nairobi"],["E. Australia Standard Time","Australia/Brisbane"],["E. Europe Standard Time","Europe/Chisinau"],["E. South America Standard Time","America/Sao_Paulo"],["Easter Island Standard Time","Pacific/Easter"],["Eastern Standard Time","America/New_York"],["Eastern Standard Time (Mexico)","America/Cancun"],["Egypt Standard Time","Africa/Cairo"],["Ekaterinburg Standard Time","Asia/Yekaterinburg"],["FLE Standard Time","Europe/Kiev"],["Fiji Standard Time","Pacific/Fiji"],["GMT Standard Time","Europe/London"],["GTB Standard Time","Europe/Bucharest"],["Georgian Standard Time","Asia/Tbilisi"],["Greenland Standard Time","America/Godthab"],["Greenwich Standard Time","Atlantic/Reykjavik"],["Haiti Standard Time","America/Port-au-Prince"],["Hawaiian Standard Time","Pacific/Honolulu"],["India Standard Time","Asia/Calcutta"],["Iran Standard Time","Asia/Tehran"],["Israel Standard Time","Asia/Jerusalem"],["Jordan Standard Time","Asia/Amman"],["Kaliningrad Standard Time","Europe/Kaliningrad"],["Korea Standard Time","Asia/Seoul"],["Libya Standard Time","Africa/Tripoli"],["Line Islands Standard Time","Pacific/Kiritimati"],["Lord Howe Standard Time","Australia/Lord_Howe"],["Magadan Standard Time","Asia/Magadan"],["Magallanes Standard Time","America/Punta_Arenas"],["Marquesas Standard Time","Pacific/Marquesas"],["Mauritius Standard Time","Indian/Mauritius"],["Middle East Standard Time","Asia/Beirut"],["Montevideo Standard Time","America/Montevideo"],["Morocco Standard Time","Africa/Casablanca"],["Mountain Standard Time","America/Denver"],["Mountain Standard Time (Mexico)","America/Mazatlan"],["Myanmar Standard Time","Asia/Rangoon"],["N. Central Asia Standard Time","Asia/Novosibirsk"],["Namibia Standard Time","Africa/Windhoek"],["Nepal Standard Time","Asia/Katmandu"],["New Zealand Standard Time","Pacific/Auckland"],["Newfoundland Standard Time","America/St_Johns"],["Norfolk Standard Time","Pacific/Norfolk"],["North Asia East Standard Time","Asia/Irkutsk"],["North Asia Standard Time","Asia/Krasnoyarsk"],["North Korea Standard Time","Asia/Pyongyang"],["Omsk Standard Time","Asia/Omsk"],["Pacific SA Standard Time","America/Santiago"],["Pacific Standard Time","America/Los_Angeles"],["Pacific Standard Time (Mexico)","America/Tijuana"],["Pakistan Standard Time","Asia/Karachi"],["Paraguay Standard Time","America/Asuncion"],["Qyzylorda Standard Time","Asia/Qyzylorda"],["Romance Standard Time","Europe/Paris"],["Russia Time Zone 10","Asia/Srednekolymsk"],["Russia Time Zone 11","Asia/Kamchatka"],["Russia Time Zone 3","Europe/Samara"],["Russian Standard Time","Europe/Moscow"],["SA Eastern Standard Time","America/Cayenne"],["SA Pacific Standard Time","America/Bogota"],["SA Western Standard Time","America/La_Paz"],["SE Asia Standard Time","Asia/Bangkok"],["Saint Pierre Standard Time","America/Miquelon"],["Sakhalin Standard Time","Asia/Sakhalin"],["Samoa Standard Time","Pacific/Apia"],["Sao Tome Standard Time","Africa/Sao_Tome"],["Saratov Standard Time","Europe/Saratov"],["Singapore Standard Time","Asia/Singapore"],["South Africa Standard Time","Africa/Johannesburg"],["South Sudan Standard Time","Africa/Juba"],["Sri Lanka Standard Time","Asia/Colombo"],["Sudan Standard Time","Africa/Khartoum"],["Syria Standard Time","Asia/Damascus"],["Taipei Standard Time","Asia/Taipei"],["Tasmania Standard Time","Australia/Hobart"],["Tocantins Standard Time","America/Araguaina"],["Tokyo Standard Time","Asia/Tokyo"],["Tomsk Standard Time","Asia/Tomsk"],["Tonga Standard Time","Pacific/Tongatapu"],["Transbaikal Standard Time","Asia/Chita"],["Turkey Standard Time","Europe/Istanbul"],["Turks And Caicos Standard Time","America/Grand_Turk"],["US Eastern Standard Time","America/Indianapolis"],["US Mountain Standard Time","America/Phoenix"],["UTC","Etc/GMT"],["UTC+01","Etc/GMT-1"],["UTC+02","Etc/GMT-2"],["UTC+03","Etc/GMT-3"],["UTC+04","Etc/GMT-4"],["UTC+05","Etc/GMT-5"],["UTC+06","Etc/GMT-6"],["UTC+07","Etc/GMT-7"],["UTC+08","Etc/GMT-8"],["UTC+09","Etc/GMT-9"],["UTC+10","Etc/GMT-10"],["UTC+11","Etc/GMT-11"],["UTC+12","Etc/GMT-12"],["UTC+13","Etc/GMT-13"],["UTC+14","Etc/GMT-14"],["UTC-01","Etc/GMT+1"],["UTC-02","Etc/GMT+2"],["UTC-03","Etc/GMT+3"],["UTC-04","Etc/GMT+4"],["UTC-05","Etc/GMT+5"],["UTC-06","Etc/GMT+6"],["UTC-07","Etc/GMT+7"],["UTC-08","Etc/GMT+8"],["UTC-09","Etc/GMT+9"],["UTC-10","Etc/GMT+10"],["UTC-11","Etc/GMT+11"],["UTC-12","Etc/GMT+12"],["Ulaanbaatar Standard Time","Asia/Ulaanbaatar"],["Venezuela Standard Time","America/Caracas"],["Vladivostok Standard Time","Asia/Vladivostok"],["Volgograd Standard Time","Europe/Volgograd"],["W. Australia Standard Time","Australia/Perth"],["W. Central Africa Standard Time","Africa/Lagos"],["W. Europe Standard Time","Europe/Berlin"],["W. Mongolia Standard Time","Asia/Hovd"],["West Asia Standard Time","Asia/Tashkent"],["West Bank Standard Time","Asia/Hebron"],["West Pacific Standard Time","Pacific/Port_Moresby"],["Yakutsk Standard Time","Asia/Yakutsk"],["Yukon Standard Time","America/Whitehorse"]]);class Go extends Error{}class f5 extends Go{constructor(t){super(`Invalid DateTime: ${t.toMessage()}`)}}class m5 extends Go{constructor(t){super(`Invalid Interval: ${t.toMessage()}`)}}class y5 extends Go{constructor(t){super(`Invalid Duration: ${t.toMessage()}`)}}class Ia extends Go{}class O3 extends Go{constructor(t){super(`Invalid unit ${t}`)}}class gt extends Go{}class $s extends Go{constructor(){super("Zone is an abstract class")}}const D="numeric",ri="short",ar="long",kp={year:D,month:D,day:D},C3={year:D,month:ri,day:D},g5={year:D,month:ri,day:D,weekday:ri},I3={year:D,month:ar,day:D},R3={year:D,month:ar,day:D,weekday:ar},k3={hour:D,minute:D},N3={hour:D,minute:D,second:D},L3={hour:D,minute:D,second:D,timeZoneName:ri},D3={hour:D,minute:D,second:D,timeZoneName:ar},F3={hour:D,minute:D,hourCycle:"h23"},U3={hour:D,minute:D,second:D,hourCycle:"h23"},j3={hour:D,minute:D,second:D,hourCycle:"h23",timeZoneName:ri},G3={hour:D,minute:D,second:D,hourCycle:"h23",timeZoneName:ar},z3={year:D,month:D,day:D,hour:D,minute:D},V3={year:D,month:D,day:D,hour:D,minute:D,second:D},B3={year:D,month:ri,day:D,hour:D,minute:D},H3={year:D,month:ri,day:D,hour:D,minute:D,second:D},_5={year:D,month:ri,day:D,weekday:ri,hour:D,minute:D},q3={year:D,month:ar,day:D,hour:D,minute:D,timeZoneName:ri},W3={year:D,month:ar,day:D,hour:D,minute:D,second:D,timeZoneName:ri},Z3={year:D,month:ar,day:D,weekday:ar,hour:D,minute:D,timeZoneName:ar},J3={year:D,month:ar,day:D,weekday:ar,hour:D,minute:D,second:D,timeZoneName:ar};class zo{get type(){throw new $s}get name(){throw new $s}get ianaName(){return this.name}get isUniversal(){throw new $s}offsetName(t,r){throw new $s}formatOffset(t,r){throw new $s}offset(t){throw new $s}equals(t){throw new $s}get isValid(){throw new $s}}let Fm=null;class Df extends zo{static get instance(){return Fm===null&&(Fm=new Df),Fm}get type(){return"system"}get name(){return new Intl.DateTimeFormat().resolvedOptions().timeZone}get isUniversal(){return!1}offsetName(t,{format:r,locale:i}){return sM(t,r,i)}formatOffset(t,r){return tc(this.offset(t),r)}offset(t){return-new Date(t).getTimezoneOffset()}equals(t){return t.type==="system"}get isValid(){return!0}}let _d={};function v5(e){return _d[e]||(_d[e]=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:e,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",era:"short"})),_d[e]}const w5={year:0,month:1,day:2,era:3,hour:4,minute:5,second:6};function b5(e,t){const r=e.format(t).replace(/\u200E/g,""),i=/(\d+)\/(\d+)\/(\d+) (AD|BC),? (\d+):(\d+):(\d+)/.exec(r),[,s,n,o,a,l,h,p]=i;return[o,s,n,a,l,h,p]}function S5(e,t){const r=e.formatToParts(t),i=[];for(let s=0;s<r.length;s++){const{type:n,value:o}=r[s],a=w5[n];n==="era"?i[a]=o:ee(a)||(i[a]=parseInt(o,10))}return i}let Eh={};class ur extends zo{static create(t){return Eh[t]||(Eh[t]=new ur(t)),Eh[t]}static resetCache(){Eh={},_d={}}static isValidSpecifier(t){return this.isValidZone(t)}static isValidZone(t){if(!t)return!1;try{return new Intl.DateTimeFormat("en-US",{timeZone:t}).format(),!0}catch{return!1}}constructor(t){super(),this.zoneName=t,this.valid=ur.isValidZone(t)}get type(){return"iana"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(t,{format:r,locale:i}){return sM(t,r,i,this.name)}formatOffset(t,r){return tc(this.offset(t),r)}offset(t){const r=new Date(t);if(isNaN(r))return NaN;const i=v5(this.name);let[s,n,o,a,l,h,p]=i.formatToParts?S5(i,r):b5(i,r);a==="BC"&&(s=-Math.abs(s)+1);const m=Uf({year:s,month:n,day:o,hour:l===24?0:l,minute:h,second:p,millisecond:0});let y=+r;const _=y%1e3;return y-=_>=0?_:1e3+_,(m-y)/(60*1e3)}equals(t){return t.type==="iana"&&t.name===this.name}get isValid(){return this.valid}}let wb={};function T5(e,t={}){const r=JSON.stringify([e,t]);let i=wb[r];return i||(i=new Intl.ListFormat(e,t),wb[r]=i),i}let Pg={};function Og(e,t={}){const r=JSON.stringify([e,t]);let i=Pg[r];return i||(i=new Intl.DateTimeFormat(e,t),Pg[r]=i),i}let Cg={};function $5(e,t={}){const r=JSON.stringify([e,t]);let i=Cg[r];return i||(i=new Intl.NumberFormat(e,t),Cg[r]=i),i}let Ig={};function E5(e,t={}){const{base:r,...i}=t,s=JSON.stringify([e,i]);let n=Ig[s];return n||(n=new Intl.RelativeTimeFormat(e,t),Ig[s]=n),n}let au=null;function M5(){return au||(au=new Intl.DateTimeFormat().resolvedOptions().locale,au)}let bb={};function x5(e){let t=bb[e];if(!t){const r=new Intl.Locale(e);t="getWeekInfo"in r?r.getWeekInfo():r.weekInfo,bb[e]=t}return t}function A5(e){const t=e.indexOf("-x-");t!==-1&&(e=e.substring(0,t));const r=e.indexOf("-u-");if(r===-1)return[e];{let i,s;try{i=Og(e).resolvedOptions(),s=e}catch{const l=e.substring(0,r);i=Og(l).resolvedOptions(),s=l}const{numberingSystem:n,calendar:o}=i;return[s,n,o]}}function P5(e,t,r){return(r||t)&&(e.includes("-u-")||(e+="-u"),r&&(e+=`-ca-${r}`),t&&(e+=`-nu-${t}`)),e}function O5(e){const t=[];for(let r=1;r<=12;r++){const i=H.utc(2009,r,1);t.push(e(i))}return t}function C5(e){const t=[];for(let r=1;r<=7;r++){const i=H.utc(2016,11,13+r);t.push(e(i))}return t}function Mh(e,t,r,i){const s=e.listingMode();return s==="error"?null:s==="en"?r(t):i(t)}function I5(e){return e.numberingSystem&&e.numberingSystem!=="latn"?!1:e.numberingSystem==="latn"||!e.locale||e.locale.startsWith("en")||new Intl.DateTimeFormat(e.intl).resolvedOptions().numberingSystem==="latn"}class R5{constructor(t,r,i){this.padTo=i.padTo||0,this.floor=i.floor||!1;const{padTo:s,floor:n,...o}=i;if(!r||Object.keys(o).length>0){const a={useGrouping:!1,...i};i.padTo>0&&(a.minimumIntegerDigits=i.padTo),this.inf=$5(t,a)}}format(t){if(this.inf){const r=this.floor?Math.floor(t):t;return this.inf.format(r)}else{const r=this.floor?Math.floor(t):z_(t,3);return Ye(r,this.padTo)}}}class k5{constructor(t,r,i){this.opts=i,this.originalZone=void 0;let s;if(this.opts.timeZone)this.dt=t;else if(t.zone.type==="fixed"){const o=-1*(t.offset/60),a=o>=0?`Etc/GMT+${o}`:`Etc/GMT${o}`;t.offset!==0&&ur.create(a).valid?(s=a,this.dt=t):(s="UTC",this.dt=t.offset===0?t:t.setZone("UTC").plus({minutes:t.offset}),this.originalZone=t.zone)}else t.zone.type==="system"?this.dt=t:t.zone.type==="iana"?(this.dt=t,s=t.zone.name):(s="UTC",this.dt=t.setZone("UTC").plus({minutes:t.offset}),this.originalZone=t.zone);const n={...this.opts};n.timeZone=n.timeZone||s,this.dtf=Og(r,n)}format(){return this.originalZone?this.formatToParts().map(({value:t})=>t).join(""):this.dtf.format(this.dt.toJSDate())}formatToParts(){const t=this.dtf.formatToParts(this.dt.toJSDate());return this.originalZone?t.map(r=>{if(r.type==="timeZoneName"){const i=this.originalZone.offsetName(this.dt.ts,{locale:this.dt.locale,format:this.opts.timeZoneName});return{...r,value:i}}else return r}):t}resolvedOptions(){return this.dtf.resolvedOptions()}}class N5{constructor(t,r,i){this.opts={style:"long",...i},!r&&rM()&&(this.rtf=E5(t,i))}format(t,r){return this.rtf?this.rtf.format(t,r):s4(r,t,this.opts.numeric,this.opts.style!=="long")}formatToParts(t,r){return this.rtf?this.rtf.formatToParts(t,r):[]}}const L5={firstDay:1,minimalDays:4,weekend:[6,7]};class ge{static fromOpts(t){return ge.create(t.locale,t.numberingSystem,t.outputCalendar,t.weekSettings,t.defaultToEN)}static create(t,r,i,s,n=!1){const o=t||ze.defaultLocale,a=o||(n?"en-US":M5()),l=r||ze.defaultNumberingSystem,h=i||ze.defaultOutputCalendar,p=Rg(s)||ze.defaultWeekSettings;return new ge(a,l,h,p,o)}static resetCache(){au=null,Pg={},Cg={},Ig={}}static fromObject({locale:t,numberingSystem:r,outputCalendar:i,weekSettings:s}={}){return ge.create(t,r,i,s)}constructor(t,r,i,s,n){const[o,a,l]=A5(t);this.locale=o,this.numberingSystem=r||a||null,this.outputCalendar=i||l||null,this.weekSettings=s,this.intl=P5(this.locale,this.numberingSystem,this.outputCalendar),this.weekdaysCache={format:{},standalone:{}},this.monthsCache={format:{},standalone:{}},this.meridiemCache=null,this.eraCache={},this.specifiedLocale=n,this.fastNumbersCached=null}get fastNumbers(){return this.fastNumbersCached==null&&(this.fastNumbersCached=I5(this)),this.fastNumbersCached}listingMode(){const t=this.isEnglish(),r=(this.numberingSystem===null||this.numberingSystem==="latn")&&(this.outputCalendar===null||this.outputCalendar==="gregory");return t&&r?"en":"intl"}clone(t){return!t||Object.getOwnPropertyNames(t).length===0?this:ge.create(t.locale||this.specifiedLocale,t.numberingSystem||this.numberingSystem,t.outputCalendar||this.outputCalendar,Rg(t.weekSettings)||this.weekSettings,t.defaultToEN||!1)}redefaultToEN(t={}){return this.clone({...t,defaultToEN:!0})}redefaultToSystem(t={}){return this.clone({...t,defaultToEN:!1})}months(t,r=!1){return Mh(this,t,aM,()=>{const i=r?{month:t,day:"numeric"}:{month:t},s=r?"format":"standalone";return this.monthsCache[s][t]||(this.monthsCache[s][t]=O5(n=>this.extract(n,i,"month"))),this.monthsCache[s][t]})}weekdays(t,r=!1){return Mh(this,t,cM,()=>{const i=r?{weekday:t,year:"numeric",month:"long",day:"numeric"}:{weekday:t},s=r?"format":"standalone";return this.weekdaysCache[s][t]||(this.weekdaysCache[s][t]=C5(n=>this.extract(n,i,"weekday"))),this.weekdaysCache[s][t]})}meridiems(){return Mh(this,void 0,()=>hM,()=>{if(!this.meridiemCache){const t={hour:"numeric",hourCycle:"h12"};this.meridiemCache=[H.utc(2016,11,13,9),H.utc(2016,11,13,19)].map(r=>this.extract(r,t,"dayperiod"))}return this.meridiemCache})}eras(t){return Mh(this,t,dM,()=>{const r={era:t};return this.eraCache[t]||(this.eraCache[t]=[H.utc(-40,1,1),H.utc(2017,1,1)].map(i=>this.extract(i,r,"era"))),this.eraCache[t]})}extract(t,r,i){const s=this.dtFormatter(t,r),n=s.formatToParts(),o=n.find(a=>a.type.toLowerCase()===i);return o?o.value:null}numberFormatter(t={}){return new R5(this.intl,t.forceSimple||this.fastNumbers,t)}dtFormatter(t,r={}){return new k5(t,this.intl,r)}relFormatter(t={}){return new N5(this.intl,this.isEnglish(),t)}listFormatter(t={}){return T5(this.intl,t)}isEnglish(){return this.locale==="en"||this.locale.toLowerCase()==="en-us"||new Intl.DateTimeFormat(this.intl).resolvedOptions().locale.startsWith("en-us")}getWeekSettings(){return this.weekSettings?this.weekSettings:iM()?x5(this.locale):L5}getStartOfWeek(){return this.getWeekSettings().firstDay}getMinDaysInFirstWeek(){return this.getWeekSettings().minimalDays}getWeekendDays(){return this.getWeekSettings().weekend}equals(t){return this.locale===t.locale&&this.numberingSystem===t.numberingSystem&&this.outputCalendar===t.outputCalendar}toString(){return`Locale(${this.locale}, ${this.numberingSystem}, ${this.outputCalendar})`}}let Um=null;class pt extends zo{static get utcInstance(){return Um===null&&(Um=new pt(0)),Um}static instance(t){return t===0?pt.utcInstance:new pt(t)}static parseSpecifier(t){if(t){const r=t.match(/^utc(?:([+-]\d{1,2})(?::(\d{2}))?)?$/i);if(r)return new pt(jf(r[1],r[2]))}return null}constructor(t){super(),this.fixed=t}get type(){return"fixed"}get name(){return this.fixed===0?"UTC":`UTC${tc(this.fixed,"narrow")}`}get ianaName(){return this.fixed===0?"Etc/UTC":`Etc/GMT${tc(-this.fixed,"narrow")}`}offsetName(){return this.name}formatOffset(t,r){return tc(this.fixed,r)}get isUniversal(){return!0}offset(){return this.fixed}equals(t){return t.type==="fixed"&&t.fixed===this.fixed}get isValid(){return!0}}class D5 extends zo{constructor(t){super(),this.zoneName=t}get type(){return"invalid"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(){return null}formatOffset(){return""}offset(){return NaN}equals(){return!1}get isValid(){return!1}}function tn(e,t){if(ee(e)||e===null)return t;if(e instanceof zo)return e;if(V5(e)){const r=e.toLowerCase();return r==="default"?t:r==="local"||r==="system"?Df.instance:r==="utc"||r==="gmt"?pt.utcInstance:pt.parseSpecifier(r)||ur.create(e)}else return un(e)?pt.instance(e):typeof e=="object"&&"offset"in e&&typeof e.offset=="function"?e:new D5(e)}const F_={arab:"[Ù -Ù©]",arabext:"[Û°-Û¹]",bali:"[á­-á­™]",beng:"[à§¦-à§¯]",deva:"[à¥¦-à¥¯]",fullwide:"[ï¼-ï¼™]",gujr:"[à«¦-à«¯]",hanidec:"[ã€‡|ä¸€|äºŒ|ä¸‰|å››|äº”|å…­|ä¸ƒ|å…«|ä¹]",khmr:"[áŸ -áŸ©]",knda:"[à³¦-à³¯]",laoo:"[à»-à»™]",limb:"[á¥†-á¥]",mlym:"[àµ¦-àµ¯]",mong:"[á -á ™]",mymr:"[á€-á‰]",orya:"[à­¦-à­¯]",tamldec:"[à¯¦-à¯¯]",telu:"[à±¦-à±¯]",thai:"[à¹-à¹™]",tibt:"[à¼ -à¼©]",latn:"\\d"},Sb={arab:[1632,1641],arabext:[1776,1785],bali:[6992,7001],beng:[2534,2543],deva:[2406,2415],fullwide:[65296,65303],gujr:[2790,2799],khmr:[6112,6121],knda:[3302,3311],laoo:[3792,3801],limb:[6470,6479],mlym:[3430,3439],mong:[6160,6169],mymr:[4160,4169],orya:[2918,2927],tamldec:[3046,3055],telu:[3174,3183],thai:[3664,3673],tibt:[3872,3881]},F5=F_.hanidec.replace(/[\[|\]]/g,"").split("");function U5(e){let t=parseInt(e,10);if(isNaN(t)){t="";for(let r=0;r<e.length;r++){const i=e.charCodeAt(r);if(e[r].search(F_.hanidec)!==-1)t+=F5.indexOf(e[r]);else for(const s in Sb){const[n,o]=Sb[s];i>=n&&i<=o&&(t+=i-n)}}return parseInt(t,10)}else return t}let la={};function j5(){la={}}function Nr({numberingSystem:e},t=""){const r=e||"latn";return la[r]||(la[r]={}),la[r][t]||(la[r][t]=new RegExp(`${F_[r]}${t}`)),la[r][t]}let Tb=()=>Date.now(),$b="system",Eb=null,Mb=null,xb=null,Ab=60,Pb,Ob=null;class ze{static get now(){return Tb}static set now(t){Tb=t}static set defaultZone(t){$b=t}static get defaultZone(){return tn($b,Df.instance)}static get defaultLocale(){return Eb}static set defaultLocale(t){Eb=t}static get defaultNumberingSystem(){return Mb}static set defaultNumberingSystem(t){Mb=t}static get defaultOutputCalendar(){return xb}static set defaultOutputCalendar(t){xb=t}static get defaultWeekSettings(){return Ob}static set defaultWeekSettings(t){Ob=Rg(t)}static get twoDigitCutoffYear(){return Ab}static set twoDigitCutoffYear(t){Ab=t%100}static get throwOnInvalid(){return Pb}static set throwOnInvalid(t){Pb=t}static resetCaches(){ge.resetCache(),ur.resetCache(),H.resetCache(),j5()}}class Kr{constructor(t,r){this.reason=t,this.explanation=r}toMessage(){return this.explanation?`${this.reason}: ${this.explanation}`:this.reason}}const Y3=[0,31,59,90,120,151,181,212,243,273,304,334],K3=[0,31,60,91,121,152,182,213,244,274,305,335];function Er(e,t){return new Kr("unit out of range",`you specified ${t} (of type ${typeof t}) as a ${e}, which is invalid`)}function U_(e,t,r){const i=new Date(Date.UTC(e,t-1,r));e<100&&e>=0&&i.setUTCFullYear(i.getUTCFullYear()-1900);const s=i.getUTCDay();return s===0?7:s}function X3(e,t,r){return r+(th(e)?K3:Y3)[t-1]}function Q3(e,t){const r=th(e)?K3:Y3,i=r.findIndex(n=>n<t),s=t-r[i];return{month:i+1,day:s}}function j_(e,t){return(e-t+7)%7+1}function Np(e,t=4,r=1){const{year:i,month:s,day:n}=e,o=X3(i,s,n),a=j_(U_(i,s,n),r);let l=Math.floor((o-a+14-t)/7),h;return l<1?(h=i-1,l=xc(h,t,r)):l>xc(i,t,r)?(h=i+1,l=1):h=i,{weekYear:h,weekNumber:l,weekday:a,...Gf(e)}}function Cb(e,t=4,r=1){const{weekYear:i,weekNumber:s,weekday:n}=e,o=j_(U_(i,1,t),r),a=za(i);let l=s*7+n-o-7+t,h;l<1?(h=i-1,l+=za(h)):l>a?(h=i+1,l-=za(i)):h=i;const{month:p,day:f}=Q3(h,l);return{year:h,month:p,day:f,...Gf(e)}}function jm(e){const{year:t,month:r,day:i}=e,s=X3(t,r,i);return{year:t,ordinal:s,...Gf(e)}}function Ib(e){const{year:t,ordinal:r}=e,{month:i,day:s}=Q3(t,r);return{year:t,month:i,day:s,...Gf(e)}}function Rb(e,t){if(!ee(e.localWeekday)||!ee(e.localWeekNumber)||!ee(e.localWeekYear)){if(!ee(e.weekday)||!ee(e.weekNumber)||!ee(e.weekYear))throw new Ia("Cannot mix locale-based week fields with ISO-based week fields");return ee(e.localWeekday)||(e.weekday=e.localWeekday),ee(e.localWeekNumber)||(e.weekNumber=e.localWeekNumber),ee(e.localWeekYear)||(e.weekYear=e.localWeekYear),delete e.localWeekday,delete e.localWeekNumber,delete e.localWeekYear,{minDaysInFirstWeek:t.getMinDaysInFirstWeek(),startOfWeek:t.getStartOfWeek()}}else return{minDaysInFirstWeek:4,startOfWeek:1}}function G5(e,t=4,r=1){const i=Ff(e.weekYear),s=Mr(e.weekNumber,1,xc(e.weekYear,t,r)),n=Mr(e.weekday,1,7);return i?s?n?!1:Er("weekday",e.weekday):Er("week",e.weekNumber):Er("weekYear",e.weekYear)}function z5(e){const t=Ff(e.year),r=Mr(e.ordinal,1,za(e.year));return t?r?!1:Er("ordinal",e.ordinal):Er("year",e.year)}function eM(e){const t=Ff(e.year),r=Mr(e.month,1,12),i=Mr(e.day,1,Lp(e.year,e.month));return t?r?i?!1:Er("day",e.day):Er("month",e.month):Er("year",e.year)}function tM(e){const{hour:t,minute:r,second:i,millisecond:s}=e,n=Mr(t,0,23)||t===24&&r===0&&i===0&&s===0,o=Mr(r,0,59),a=Mr(i,0,59),l=Mr(s,0,999);return n?o?a?l?!1:Er("millisecond",s):Er("second",i):Er("minute",r):Er("hour",t)}function ee(e){return typeof e>"u"}function un(e){return typeof e=="number"}function Ff(e){return typeof e=="number"&&e%1===0}function V5(e){return typeof e=="string"}function B5(e){return Object.prototype.toString.call(e)==="[object Date]"}function rM(){try{return typeof Intl<"u"&&!!Intl.RelativeTimeFormat}catch{return!1}}function iM(){try{return typeof Intl<"u"&&!!Intl.Locale&&("weekInfo"in Intl.Locale.prototype||"getWeekInfo"in Intl.Locale.prototype)}catch{return!1}}function H5(e){return Array.isArray(e)?e:[e]}function kb(e,t,r){if(e.length!==0)return e.reduce((i,s)=>{const n=[t(s),s];return i&&r(i[0],n[0])===i[0]?i:n},null)[1]}function q5(e,t){return t.reduce((r,i)=>(r[i]=e[i],r),{})}function cl(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function Rg(e){if(e==null)return null;if(typeof e!="object")throw new gt("Week settings must be an object");if(!Mr(e.firstDay,1,7)||!Mr(e.minimalDays,1,7)||!Array.isArray(e.weekend)||e.weekend.some(t=>!Mr(t,1,7)))throw new gt("Invalid week settings");return{firstDay:e.firstDay,minimalDays:e.minimalDays,weekend:Array.from(e.weekend)}}function Mr(e,t,r){return Ff(e)&&e>=t&&e<=r}function W5(e,t){return e-t*Math.floor(e/t)}function Ye(e,t=2){const r=e<0;let i;return r?i="-"+(""+-e).padStart(t,"0"):i=(""+e).padStart(t,"0"),i}function Js(e){if(!(ee(e)||e===null||e===""))return parseInt(e,10)}function Pn(e){if(!(ee(e)||e===null||e===""))return parseFloat(e)}function G_(e){if(!(ee(e)||e===null||e==="")){const t=parseFloat("0."+e)*1e3;return Math.floor(t)}}function z_(e,t,r=!1){const i=10**t;return(r?Math.trunc:Math.round)(e*i)/i}function th(e){return e%4===0&&(e%100!==0||e%400===0)}function za(e){return th(e)?366:365}function Lp(e,t){const r=W5(t-1,12)+1,i=e+(t-r)/12;return r===2?th(i)?29:28:[31,null,31,30,31,30,31,31,30,31,30,31][r-1]}function Uf(e){let t=Date.UTC(e.year,e.month-1,e.day,e.hour,e.minute,e.second,e.millisecond);return e.year<100&&e.year>=0&&(t=new Date(t),t.setUTCFullYear(e.year,e.month-1,e.day)),+t}function Nb(e,t,r){return-j_(U_(e,1,t),r)+t-1}function xc(e,t=4,r=1){const i=Nb(e,t,r),s=Nb(e+1,t,r);return(za(e)-i+s)/7}function kg(e){return e>99?e:e>ze.twoDigitCutoffYear?1900+e:2e3+e}function sM(e,t,r,i=null){const s=new Date(e),n={hourCycle:"h23",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"};i&&(n.timeZone=i);const o={timeZoneName:t,...n},a=new Intl.DateTimeFormat(r,o).formatToParts(s).find(l=>l.type.toLowerCase()==="timezonename");return a?a.value:null}function jf(e,t){let r=parseInt(e,10);Number.isNaN(r)&&(r=0);const i=parseInt(t,10)||0,s=r<0||Object.is(r,-0)?-i:i;return r*60+s}function nM(e){const t=Number(e);if(typeof e=="boolean"||e===""||Number.isNaN(t))throw new gt(`Invalid unit value ${e}`);return t}function Dp(e,t){const r={};for(const i in e)if(cl(e,i)){const s=e[i];if(s==null)continue;r[t(i)]=nM(s)}return r}function tc(e,t){const r=Math.trunc(Math.abs(e/60)),i=Math.trunc(Math.abs(e%60)),s=e>=0?"+":"-";switch(t){case"short":return`${s}${Ye(r,2)}:${Ye(i,2)}`;case"narrow":return`${s}${r}${i>0?`:${i}`:""}`;case"techie":return`${s}${Ye(r,2)}${Ye(i,2)}`;default:throw new RangeError(`Value format ${t} is out of range for property format`)}}function Gf(e){return q5(e,["hour","minute","second","millisecond"])}const Z5=["January","February","March","April","May","June","July","August","September","October","November","December"],oM=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],J5=["J","F","M","A","M","J","J","A","S","O","N","D"];function aM(e){switch(e){case"narrow":return[...J5];case"short":return[...oM];case"long":return[...Z5];case"numeric":return["1","2","3","4","5","6","7","8","9","10","11","12"];case"2-digit":return["01","02","03","04","05","06","07","08","09","10","11","12"];default:return null}}const lM=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],uM=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],Y5=["M","T","W","T","F","S","S"];function cM(e){switch(e){case"narrow":return[...Y5];case"short":return[...uM];case"long":return[...lM];case"numeric":return["1","2","3","4","5","6","7"];default:return null}}const hM=["AM","PM"],K5=["Before Christ","Anno Domini"],X5=["BC","AD"],Q5=["B","A"];function dM(e){switch(e){case"narrow":return[...Q5];case"short":return[...X5];case"long":return[...K5];default:return null}}function e4(e){return hM[e.hour<12?0:1]}function t4(e,t){return cM(t)[e.weekday-1]}function r4(e,t){return aM(t)[e.month-1]}function i4(e,t){return dM(t)[e.year<0?0:1]}function s4(e,t,r="always",i=!1){const s={years:["year","yr."],quarters:["quarter","qtr."],months:["month","mo."],weeks:["week","wk."],days:["day","day","days"],hours:["hour","hr."],minutes:["minute","min."],seconds:["second","sec."]},n=["hours","minutes","seconds"].indexOf(e)===-1;if(r==="auto"&&n){const f=e==="days";switch(t){case 1:return f?"tomorrow":`next ${s[e][0]}`;case-1:return f?"yesterday":`last ${s[e][0]}`;case 0:return f?"today":`this ${s[e][0]}`}}const o=Object.is(t,-0)||t<0,a=Math.abs(t),l=a===1,h=s[e],p=i?l?h[1]:h[2]||h[1]:l?s[e][0]:e;return o?`${a} ${p} ago`:`in ${a} ${p}`}function Lb(e,t){let r="";for(const i of e)i.literal?r+=i.val:r+=t(i.val);return r}const n4={D:kp,DD:C3,DDD:I3,DDDD:R3,t:k3,tt:N3,ttt:L3,tttt:D3,T:F3,TT:U3,TTT:j3,TTTT:G3,f:z3,ff:B3,fff:q3,ffff:Z3,F:V3,FF:H3,FFF:W3,FFFF:J3};class wt{static create(t,r={}){return new wt(t,r)}static parseFormat(t){let r=null,i="",s=!1;const n=[];for(let o=0;o<t.length;o++){const a=t.charAt(o);a==="'"?(i.length>0&&n.push({literal:s||/^\s+$/.test(i),val:i}),r=null,i="",s=!s):s||a===r?i+=a:(i.length>0&&n.push({literal:/^\s+$/.test(i),val:i}),i=a,r=a)}return i.length>0&&n.push({literal:s||/^\s+$/.test(i),val:i}),n}static macroTokenToFormatOpts(t){return n4[t]}constructor(t,r){this.opts=r,this.loc=t,this.systemLoc=null}formatWithSystemDefault(t,r){return this.systemLoc===null&&(this.systemLoc=this.loc.redefaultToSystem()),this.systemLoc.dtFormatter(t,{...this.opts,...r}).format()}dtFormatter(t,r={}){return this.loc.dtFormatter(t,{...this.opts,...r})}formatDateTime(t,r){return this.dtFormatter(t,r).format()}formatDateTimeParts(t,r){return this.dtFormatter(t,r).formatToParts()}formatInterval(t,r){return this.dtFormatter(t.start,r).dtf.formatRange(t.start.toJSDate(),t.end.toJSDate())}resolvedOptions(t,r){return this.dtFormatter(t,r).resolvedOptions()}num(t,r=0){if(this.opts.forceSimple)return Ye(t,r);const i={...this.opts};return r>0&&(i.padTo=r),this.loc.numberFormatter(i).format(t)}formatDateTimeFromString(t,r){const i=this.loc.listingMode()==="en",s=this.loc.outputCalendar&&this.loc.outputCalendar!=="gregory",n=(y,_)=>this.loc.extract(t,y,_),o=y=>t.isOffsetFixed&&t.offset===0&&y.allowZ?"Z":t.isValid?t.zone.formatOffset(t.ts,y.format):"",a=()=>i?e4(t):n({hour:"numeric",hourCycle:"h12"},"dayperiod"),l=(y,_)=>i?r4(t,y):n(_?{month:y}:{month:y,day:"numeric"},"month"),h=(y,_)=>i?t4(t,y):n(_?{weekday:y}:{weekday:y,month:"long",day:"numeric"},"weekday"),p=y=>{const _=wt.macroTokenToFormatOpts(y);return _?this.formatWithSystemDefault(t,_):y},f=y=>i?i4(t,y):n({era:y},"era"),m=y=>{switch(y){case"S":return this.num(t.millisecond);case"u":case"SSS":return this.num(t.millisecond,3);case"s":return this.num(t.second);case"ss":return this.num(t.second,2);case"uu":return this.num(Math.floor(t.millisecond/10),2);case"uuu":return this.num(Math.floor(t.millisecond/100));case"m":return this.num(t.minute);case"mm":return this.num(t.minute,2);case"h":return this.num(t.hour%12===0?12:t.hour%12);case"hh":return this.num(t.hour%12===0?12:t.hour%12,2);case"H":return this.num(t.hour);case"HH":return this.num(t.hour,2);case"Z":return o({format:"narrow",allowZ:this.opts.allowZ});case"ZZ":return o({format:"short",allowZ:this.opts.allowZ});case"ZZZ":return o({format:"techie",allowZ:this.opts.allowZ});case"ZZZZ":return t.zone.offsetName(t.ts,{format:"short",locale:this.loc.locale});case"ZZZZZ":return t.zone.offsetName(t.ts,{format:"long",locale:this.loc.locale});case"z":return t.zoneName;case"a":return a();case"d":return s?n({day:"numeric"},"day"):this.num(t.day);case"dd":return s?n({day:"2-digit"},"day"):this.num(t.day,2);case"c":return this.num(t.weekday);case"ccc":return h("short",!0);case"cccc":return h("long",!0);case"ccccc":return h("narrow",!0);case"E":return this.num(t.weekday);case"EEE":return h("short",!1);case"EEEE":return h("long",!1);case"EEEEE":return h("narrow",!1);case"L":return s?n({month:"numeric",day:"numeric"},"month"):this.num(t.month);case"LL":return s?n({month:"2-digit",day:"numeric"},"month"):this.num(t.month,2);case"LLL":return l("short",!0);case"LLLL":return l("long",!0);case"LLLLL":return l("narrow",!0);case"M":return s?n({month:"numeric"},"month"):this.num(t.month);case"MM":return s?n({month:"2-digit"},"month"):this.num(t.month,2);case"MMM":return l("short",!1);case"MMMM":return l("long",!1);case"MMMMM":return l("narrow",!1);case"y":return s?n({year:"numeric"},"year"):this.num(t.year);case"yy":return s?n({year:"2-digit"},"year"):this.num(t.year.toString().slice(-2),2);case"yyyy":return s?n({year:"numeric"},"year"):this.num(t.year,4);case"yyyyyy":return s?n({year:"numeric"},"year"):this.num(t.year,6);case"G":return f("short");case"GG":return f("long");case"GGGGG":return f("narrow");case"kk":return this.num(t.weekYear.toString().slice(-2),2);case"kkkk":return this.num(t.weekYear,4);case"W":return this.num(t.weekNumber);case"WW":return this.num(t.weekNumber,2);case"n":return this.num(t.localWeekNumber);case"nn":return this.num(t.localWeekNumber,2);case"ii":return this.num(t.localWeekYear.toString().slice(-2),2);case"iiii":return this.num(t.localWeekYear,4);case"o":return this.num(t.ordinal);case"ooo":return this.num(t.ordinal,3);case"q":return this.num(t.quarter);case"qq":return this.num(t.quarter,2);case"X":return this.num(Math.floor(t.ts/1e3));case"x":return this.num(t.ts);default:return p(y)}};return Lb(wt.parseFormat(r),m)}formatDurationFromString(t,r){const i=l=>{switch(l[0]){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":return"hour";case"d":return"day";case"w":return"week";case"M":return"month";case"y":return"year";default:return null}},s=l=>h=>{const p=i(h);return p?this.num(l.get(p),h.length):h},n=wt.parseFormat(r),o=n.reduce((l,{literal:h,val:p})=>h?l:l.concat(p),[]),a=t.shiftTo(...o.map(i).filter(l=>l));return Lb(n,s(a))}}const pM=/[A-Za-z_+-]{1,256}(?::?\/[A-Za-z0-9_+-]{1,256}(?:\/[A-Za-z0-9_+-]{1,256})?)?/;function $l(...e){const t=e.reduce((r,i)=>r+i.source,"");return RegExp(`^${t}$`)}function El(...e){return t=>e.reduce(([r,i,s],n)=>{const[o,a,l]=n(t,s);return[{...r,...o},a||i,l]},[{},null,1]).slice(0,2)}function Ml(e,...t){if(e==null)return[null,null];for(const[r,i]of t){const s=r.exec(e);if(s)return i(s)}return[null,null]}function fM(...e){return(t,r)=>{const i={};let s;for(s=0;s<e.length;s++)i[e[s]]=Js(t[r+s]);return[i,null,r+s]}}const mM=/(?:(Z)|([+-]\d\d)(?::?(\d\d))?)/,o4=`(?:${mM.source}?(?:\\[(${pM.source})\\])?)?`,V_=/(\d\d)(?::?(\d\d)(?::?(\d\d)(?:[.,](\d{1,30}))?)?)?/,yM=RegExp(`${V_.source}${o4}`),B_=RegExp(`(?:T${yM.source})?`),a4=/([+-]\d{6}|\d{4})(?:-?(\d\d)(?:-?(\d\d))?)?/,l4=/(\d{4})-?W(\d\d)(?:-?(\d))?/,u4=/(\d{4})-?(\d{3})/,c4=fM("weekYear","weekNumber","weekDay"),h4=fM("year","ordinal"),d4=/(\d{4})-(\d\d)-(\d\d)/,gM=RegExp(`${V_.source} ?(?:${mM.source}|(${pM.source}))?`),p4=RegExp(`(?: ${gM.source})?`);function Va(e,t,r){const i=e[t];return ee(i)?r:Js(i)}function f4(e,t){return[{year:Va(e,t),month:Va(e,t+1,1),day:Va(e,t+2,1)},null,t+3]}function xl(e,t){return[{hours:Va(e,t,0),minutes:Va(e,t+1,0),seconds:Va(e,t+2,0),milliseconds:G_(e[t+3])},null,t+4]}function rh(e,t){const r=!e[t]&&!e[t+1],i=jf(e[t+1],e[t+2]),s=r?null:pt.instance(i);return[{},s,t+3]}function ih(e,t){const r=e[t]?ur.create(e[t]):null;return[{},r,t+1]}const m4=RegExp(`^T?${V_.source}$`),y4=/^-?P(?:(?:(-?\d{1,20}(?:\.\d{1,20})?)Y)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20}(?:\.\d{1,20})?)W)?(?:(-?\d{1,20}(?:\.\d{1,20})?)D)?(?:T(?:(-?\d{1,20}(?:\.\d{1,20})?)H)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20})(?:[.,](-?\d{1,20}))?S)?)?)$/;function g4(e){const[t,r,i,s,n,o,a,l,h]=e,p=t[0]==="-",f=l&&l[0]==="-",m=(y,_=!1)=>y!==void 0&&(_||y&&p)?-y:y;return[{years:m(Pn(r)),months:m(Pn(i)),weeks:m(Pn(s)),days:m(Pn(n)),hours:m(Pn(o)),minutes:m(Pn(a)),seconds:m(Pn(l),l==="-0"),milliseconds:m(G_(h),f)}]}const _4={GMT:0,EDT:-4*60,EST:-5*60,CDT:-5*60,CST:-6*60,MDT:-6*60,MST:-7*60,PDT:-7*60,PST:-8*60};function H_(e,t,r,i,s,n,o){const a={year:t.length===2?kg(Js(t)):Js(t),month:oM.indexOf(r)+1,day:Js(i),hour:Js(s),minute:Js(n)};return o&&(a.second=Js(o)),e&&(a.weekday=e.length>3?lM.indexOf(e)+1:uM.indexOf(e)+1),a}const v4=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|(?:([+-]\d\d)(\d\d)))$/;function w4(e){const[,t,r,i,s,n,o,a,l,h,p,f]=e,m=H_(t,s,i,r,n,o,a);let y;return l?y=_4[l]:h?y=0:y=jf(p,f),[m,new pt(y)]}function b4(e){return e.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").trim()}const S4=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun), (\d\d) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) (\d{4}) (\d\d):(\d\d):(\d\d) GMT$/,T4=/^(Monday|Tuesday|Wednesday|Thursday|Friday|Saturday|Sunday), (\d\d)-(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)-(\d\d) (\d\d):(\d\d):(\d\d) GMT$/,$4=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) ( \d|\d\d) (\d\d):(\d\d):(\d\d) (\d{4})$/;function Db(e){const[,t,r,i,s,n,o,a]=e;return[H_(t,s,i,r,n,o,a),pt.utcInstance]}function E4(e){const[,t,r,i,s,n,o,a]=e;return[H_(t,a,r,i,s,n,o),pt.utcInstance]}const M4=$l(a4,B_),x4=$l(l4,B_),A4=$l(u4,B_),P4=$l(yM),_M=El(f4,xl,rh,ih),O4=El(c4,xl,rh,ih),C4=El(h4,xl,rh,ih),I4=El(xl,rh,ih);function R4(e){return Ml(e,[M4,_M],[x4,O4],[A4,C4],[P4,I4])}function k4(e){return Ml(b4(e),[v4,w4])}function N4(e){return Ml(e,[S4,Db],[T4,Db],[$4,E4])}function L4(e){return Ml(e,[y4,g4])}const D4=El(xl);function F4(e){return Ml(e,[m4,D4])}const U4=$l(d4,p4),j4=$l(gM),G4=El(xl,rh,ih);function z4(e){return Ml(e,[U4,_M],[j4,G4])}const Fb="Invalid Duration",vM={weeks:{days:7,hours:7*24,minutes:7*24*60,seconds:7*24*60*60,milliseconds:7*24*60*60*1e3},days:{hours:24,minutes:24*60,seconds:24*60*60,milliseconds:24*60*60*1e3},hours:{minutes:60,seconds:60*60,milliseconds:60*60*1e3},minutes:{seconds:60,milliseconds:60*1e3},seconds:{milliseconds:1e3}},V4={years:{quarters:4,months:12,weeks:52,days:365,hours:365*24,minutes:365*24*60,seconds:365*24*60*60,milliseconds:365*24*60*60*1e3},quarters:{months:3,weeks:13,days:91,hours:91*24,minutes:91*24*60,seconds:91*24*60*60,milliseconds:91*24*60*60*1e3},months:{weeks:4,days:30,hours:30*24,minutes:30*24*60,seconds:30*24*60*60,milliseconds:30*24*60*60*1e3},...vM},dr=146097/400,Wo=146097/4800,B4={years:{quarters:4,months:12,weeks:dr/7,days:dr,hours:dr*24,minutes:dr*24*60,seconds:dr*24*60*60,milliseconds:dr*24*60*60*1e3},quarters:{months:3,weeks:dr/28,days:dr/4,hours:dr*24/4,minutes:dr*24*60/4,seconds:dr*24*60*60/4,milliseconds:dr*24*60*60*1e3/4},months:{weeks:Wo/7,days:Wo,hours:Wo*24,minutes:Wo*24*60,seconds:Wo*24*60*60,milliseconds:Wo*24*60*60*1e3},...vM},yo=["years","quarters","months","weeks","days","hours","minutes","seconds","milliseconds"],H4=yo.slice(0).reverse();function Es(e,t,r=!1){const i={values:r?t.values:{...e.values,...t.values||{}},loc:e.loc.clone(t.loc),conversionAccuracy:t.conversionAccuracy||e.conversionAccuracy,matrix:t.matrix||e.matrix};return new ce(i)}function wM(e,t){let r=t.milliseconds??0;for(const i of H4.slice(1))t[i]&&(r+=t[i]*e[i].milliseconds);return r}function Ub(e,t){const r=wM(e,t)<0?-1:1;yo.reduceRight((i,s)=>{if(ee(t[s]))return i;if(i){const n=t[i]*r,o=e[s][i],a=Math.floor(n/o);t[s]+=a*r,t[i]-=a*o*r}return s},null),yo.reduce((i,s)=>{if(ee(t[s]))return i;if(i){const n=t[i]%1;t[i]-=n,t[s]+=n*e[i][s]}return s},null)}function q4(e){const t={};for(const[r,i]of Object.entries(e))i!==0&&(t[r]=i);return t}class ce{constructor(t){const r=t.conversionAccuracy==="longterm"||!1;let i=r?B4:V4;t.matrix&&(i=t.matrix),this.values=t.values,this.loc=t.loc||ge.create(),this.conversionAccuracy=r?"longterm":"casual",this.invalid=t.invalid||null,this.matrix=i,this.isLuxonDuration=!0}static fromMillis(t,r){return ce.fromObject({milliseconds:t},r)}static fromObject(t,r={}){if(t==null||typeof t!="object")throw new gt(`Duration.fromObject: argument expected to be an object, got ${t===null?"null":typeof t}`);return new ce({values:Dp(t,ce.normalizeUnit),loc:ge.fromObject(r),conversionAccuracy:r.conversionAccuracy,matrix:r.matrix})}static fromDurationLike(t){if(un(t))return ce.fromMillis(t);if(ce.isDuration(t))return t;if(typeof t=="object")return ce.fromObject(t);throw new gt(`Unknown duration argument ${t} of type ${typeof t}`)}static fromISO(t,r){const[i]=L4(t);return i?ce.fromObject(i,r):ce.invalid("unparsable",`the input "${t}" can't be parsed as ISO 8601`)}static fromISOTime(t,r){const[i]=F4(t);return i?ce.fromObject(i,r):ce.invalid("unparsable",`the input "${t}" can't be parsed as ISO 8601`)}static invalid(t,r=null){if(!t)throw new gt("need to specify a reason the Duration is invalid");const i=t instanceof Kr?t:new Kr(t,r);if(ze.throwOnInvalid)throw new y5(i);return new ce({invalid:i})}static normalizeUnit(t){const r={year:"years",years:"years",quarter:"quarters",quarters:"quarters",month:"months",months:"months",week:"weeks",weeks:"weeks",day:"days",days:"days",hour:"hours",hours:"hours",minute:"minutes",minutes:"minutes",second:"seconds",seconds:"seconds",millisecond:"milliseconds",milliseconds:"milliseconds"}[t&&t.toLowerCase()];if(!r)throw new O3(t);return r}static isDuration(t){return t&&t.isLuxonDuration||!1}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}toFormat(t,r={}){const i={...r,floor:r.round!==!1&&r.floor!==!1};return this.isValid?wt.create(this.loc,i).formatDurationFromString(this,t):Fb}toHuman(t={}){if(!this.isValid)return Fb;const r=yo.map(i=>{const s=this.values[i];return ee(s)?null:this.loc.numberFormatter({style:"unit",unitDisplay:"long",...t,unit:i.slice(0,-1)}).format(s)}).filter(i=>i);return this.loc.listFormatter({type:"conjunction",style:t.listStyle||"narrow",...t}).format(r)}toObject(){return this.isValid?{...this.values}:{}}toISO(){if(!this.isValid)return null;let t="P";return this.years!==0&&(t+=this.years+"Y"),(this.months!==0||this.quarters!==0)&&(t+=this.months+this.quarters*3+"M"),this.weeks!==0&&(t+=this.weeks+"W"),this.days!==0&&(t+=this.days+"D"),(this.hours!==0||this.minutes!==0||this.seconds!==0||this.milliseconds!==0)&&(t+="T"),this.hours!==0&&(t+=this.hours+"H"),this.minutes!==0&&(t+=this.minutes+"M"),(this.seconds!==0||this.milliseconds!==0)&&(t+=z_(this.seconds+this.milliseconds/1e3,3)+"S"),t==="P"&&(t+="T0S"),t}toISOTime(t={}){if(!this.isValid)return null;const r=this.toMillis();return r<0||r>=864e5?null:(t={suppressMilliseconds:!1,suppressSeconds:!1,includePrefix:!1,format:"extended",...t,includeOffset:!1},H.fromMillis(r,{zone:"UTC"}).toISOTime(t))}toJSON(){return this.toISO()}toString(){return this.toISO()}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`Duration { values: ${JSON.stringify(this.values)} }`:`Duration { Invalid, reason: ${this.invalidReason} }`}toMillis(){return this.isValid?wM(this.matrix,this.values):NaN}valueOf(){return this.toMillis()}plus(t){if(!this.isValid)return this;const r=ce.fromDurationLike(t),i={};for(const s of yo)(cl(r.values,s)||cl(this.values,s))&&(i[s]=r.get(s)+this.get(s));return Es(this,{values:i},!0)}minus(t){if(!this.isValid)return this;const r=ce.fromDurationLike(t);return this.plus(r.negate())}mapUnits(t){if(!this.isValid)return this;const r={};for(const i of Object.keys(this.values))r[i]=nM(t(this.values[i],i));return Es(this,{values:r},!0)}get(t){return this[ce.normalizeUnit(t)]}set(t){if(!this.isValid)return this;const r={...this.values,...Dp(t,ce.normalizeUnit)};return Es(this,{values:r})}reconfigure({locale:t,numberingSystem:r,conversionAccuracy:i,matrix:s}={}){const o={loc:this.loc.clone({locale:t,numberingSystem:r}),matrix:s,conversionAccuracy:i};return Es(this,o)}as(t){return this.isValid?this.shiftTo(t).get(t):NaN}normalize(){if(!this.isValid)return this;const t=this.toObject();return Ub(this.matrix,t),Es(this,{values:t},!0)}rescale(){if(!this.isValid)return this;const t=q4(this.normalize().shiftToAll().toObject());return Es(this,{values:t},!0)}shiftTo(...t){if(!this.isValid)return this;if(t.length===0)return this;t=t.map(o=>ce.normalizeUnit(o));const r={},i={},s=this.toObject();let n;for(const o of yo)if(t.indexOf(o)>=0){n=o;let a=0;for(const h in i)a+=this.matrix[h][o]*i[h],i[h]=0;un(s[o])&&(a+=s[o]);const l=Math.trunc(a);r[o]=l,i[o]=(a*1e3-l*1e3)/1e3}else un(s[o])&&(i[o]=s[o]);for(const o in i)i[o]!==0&&(r[n]+=o===n?i[o]:i[o]/this.matrix[n][o]);return Ub(this.matrix,r),Es(this,{values:r},!0)}shiftToAll(){return this.isValid?this.shiftTo("years","months","weeks","days","hours","minutes","seconds","milliseconds"):this}negate(){if(!this.isValid)return this;const t={};for(const r of Object.keys(this.values))t[r]=this.values[r]===0?0:-this.values[r];return Es(this,{values:t},!0)}get years(){return this.isValid?this.values.years||0:NaN}get quarters(){return this.isValid?this.values.quarters||0:NaN}get months(){return this.isValid?this.values.months||0:NaN}get weeks(){return this.isValid?this.values.weeks||0:NaN}get days(){return this.isValid?this.values.days||0:NaN}get hours(){return this.isValid?this.values.hours||0:NaN}get minutes(){return this.isValid?this.values.minutes||0:NaN}get seconds(){return this.isValid?this.values.seconds||0:NaN}get milliseconds(){return this.isValid?this.values.milliseconds||0:NaN}get isValid(){return this.invalid===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}equals(t){if(!this.isValid||!t.isValid||!this.loc.equals(t.loc))return!1;function r(i,s){return i===void 0||i===0?s===void 0||s===0:i===s}for(const i of yo)if(!r(this.values[i],t.values[i]))return!1;return!0}}const Zo="Invalid Interval";function W4(e,t){return!e||!e.isValid?Ge.invalid("missing or invalid start"):!t||!t.isValid?Ge.invalid("missing or invalid end"):t<e?Ge.invalid("end before start",`The end of an interval must be after its start, but you had start=${e.toISO()} and end=${t.toISO()}`):null}class Ge{constructor(t){this.s=t.start,this.e=t.end,this.invalid=t.invalid||null,this.isLuxonInterval=!0}static invalid(t,r=null){if(!t)throw new gt("need to specify a reason the Interval is invalid");const i=t instanceof Kr?t:new Kr(t,r);if(ze.throwOnInvalid)throw new m5(i);return new Ge({invalid:i})}static fromDateTimes(t,r){const i=kl(t),s=kl(r),n=W4(i,s);return n??new Ge({start:i,end:s})}static after(t,r){const i=ce.fromDurationLike(r),s=kl(t);return Ge.fromDateTimes(s,s.plus(i))}static before(t,r){const i=ce.fromDurationLike(r),s=kl(t);return Ge.fromDateTimes(s.minus(i),s)}static fromISO(t,r){const[i,s]=(t||"").split("/",2);if(i&&s){let n,o;try{n=H.fromISO(i,r),o=n.isValid}catch{o=!1}let a,l;try{a=H.fromISO(s,r),l=a.isValid}catch{l=!1}if(o&&l)return Ge.fromDateTimes(n,a);if(o){const h=ce.fromISO(s,r);if(h.isValid)return Ge.after(n,h)}else if(l){const h=ce.fromISO(i,r);if(h.isValid)return Ge.before(a,h)}}return Ge.invalid("unparsable",`the input "${t}" can't be parsed as ISO 8601`)}static isInterval(t){return t&&t.isLuxonInterval||!1}get start(){return this.isValid?this.s:null}get end(){return this.isValid?this.e:null}get isValid(){return this.invalidReason===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}length(t="milliseconds"){return this.isValid?this.toDuration(t).get(t):NaN}count(t="milliseconds",r){if(!this.isValid)return NaN;const i=this.start.startOf(t,r);let s;return r!=null&&r.useLocaleWeeks?s=this.end.reconfigure({locale:i.locale}):s=this.end,s=s.startOf(t,r),Math.floor(s.diff(i,t).get(t))+(s.valueOf()!==this.end.valueOf())}hasSame(t){return this.isValid?this.isEmpty()||this.e.minus(1).hasSame(this.s,t):!1}isEmpty(){return this.s.valueOf()===this.e.valueOf()}isAfter(t){return this.isValid?this.s>t:!1}isBefore(t){return this.isValid?this.e<=t:!1}contains(t){return this.isValid?this.s<=t&&this.e>t:!1}set({start:t,end:r}={}){return this.isValid?Ge.fromDateTimes(t||this.s,r||this.e):this}splitAt(...t){if(!this.isValid)return[];const r=t.map(kl).filter(o=>this.contains(o)).sort((o,a)=>o.toMillis()-a.toMillis()),i=[];let{s}=this,n=0;for(;s<this.e;){const o=r[n]||this.e,a=+o>+this.e?this.e:o;i.push(Ge.fromDateTimes(s,a)),s=a,n+=1}return i}splitBy(t){const r=ce.fromDurationLike(t);if(!this.isValid||!r.isValid||r.as("milliseconds")===0)return[];let{s:i}=this,s=1,n;const o=[];for(;i<this.e;){const a=this.start.plus(r.mapUnits(l=>l*s));n=+a>+this.e?this.e:a,o.push(Ge.fromDateTimes(i,n)),i=n,s+=1}return o}divideEqually(t){return this.isValid?this.splitBy(this.length()/t).slice(0,t):[]}overlaps(t){return this.e>t.s&&this.s<t.e}abutsStart(t){return this.isValid?+this.e==+t.s:!1}abutsEnd(t){return this.isValid?+t.e==+this.s:!1}engulfs(t){return this.isValid?this.s<=t.s&&this.e>=t.e:!1}equals(t){return!this.isValid||!t.isValid?!1:this.s.equals(t.s)&&this.e.equals(t.e)}intersection(t){if(!this.isValid)return this;const r=this.s>t.s?this.s:t.s,i=this.e<t.e?this.e:t.e;return r>=i?null:Ge.fromDateTimes(r,i)}union(t){if(!this.isValid)return this;const r=this.s<t.s?this.s:t.s,i=this.e>t.e?this.e:t.e;return Ge.fromDateTimes(r,i)}static merge(t){const[r,i]=t.sort((s,n)=>s.s-n.s).reduce(([s,n],o)=>n?n.overlaps(o)||n.abutsStart(o)?[s,n.union(o)]:[s.concat([n]),o]:[s,o],[[],null]);return i&&r.push(i),r}static xor(t){let r=null,i=0;const s=[],n=t.map(l=>[{time:l.s,type:"s"},{time:l.e,type:"e"}]),o=Array.prototype.concat(...n),a=o.sort((l,h)=>l.time-h.time);for(const l of a)i+=l.type==="s"?1:-1,i===1?r=l.time:(r&&+r!=+l.time&&s.push(Ge.fromDateTimes(r,l.time)),r=null);return Ge.merge(s)}difference(...t){return Ge.xor([this].concat(t)).map(r=>this.intersection(r)).filter(r=>r&&!r.isEmpty())}toString(){return this.isValid?`[${this.s.toISO()} â€“ ${this.e.toISO()})`:Zo}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`Interval { start: ${this.s.toISO()}, end: ${this.e.toISO()} }`:`Interval { Invalid, reason: ${this.invalidReason} }`}toLocaleString(t=kp,r={}){return this.isValid?wt.create(this.s.loc.clone(r),t).formatInterval(this):Zo}toISO(t){return this.isValid?`${this.s.toISO(t)}/${this.e.toISO(t)}`:Zo}toISODate(){return this.isValid?`${this.s.toISODate()}/${this.e.toISODate()}`:Zo}toISOTime(t){return this.isValid?`${this.s.toISOTime(t)}/${this.e.toISOTime(t)}`:Zo}toFormat(t,{separator:r=" â€“ "}={}){return this.isValid?`${this.s.toFormat(t)}${r}${this.e.toFormat(t)}`:Zo}toDuration(t,r){return this.isValid?this.e.diff(this.s,t,r):ce.invalid(this.invalidReason)}mapEndpoints(t){return Ge.fromDateTimes(t(this.s),t(this.e))}}class xh{static hasDST(t=ze.defaultZone){const r=H.now().setZone(t).set({month:12});return!t.isUniversal&&r.offset!==r.set({month:6}).offset}static isValidIANAZone(t){return ur.isValidZone(t)}static normalizeZone(t){return tn(t,ze.defaultZone)}static getStartOfWeek({locale:t=null,locObj:r=null}={}){return(r||ge.create(t)).getStartOfWeek()}static getMinimumDaysInFirstWeek({locale:t=null,locObj:r=null}={}){return(r||ge.create(t)).getMinDaysInFirstWeek()}static getWeekendWeekdays({locale:t=null,locObj:r=null}={}){return(r||ge.create(t)).getWeekendDays().slice()}static months(t="long",{locale:r=null,numberingSystem:i=null,locObj:s=null,outputCalendar:n="gregory"}={}){return(s||ge.create(r,i,n)).months(t)}static monthsFormat(t="long",{locale:r=null,numberingSystem:i=null,locObj:s=null,outputCalendar:n="gregory"}={}){return(s||ge.create(r,i,n)).months(t,!0)}static weekdays(t="long",{locale:r=null,numberingSystem:i=null,locObj:s=null}={}){return(s||ge.create(r,i,null)).weekdays(t)}static weekdaysFormat(t="long",{locale:r=null,numberingSystem:i=null,locObj:s=null}={}){return(s||ge.create(r,i,null)).weekdays(t,!0)}static meridiems({locale:t=null}={}){return ge.create(t).meridiems()}static eras(t="short",{locale:r=null}={}){return ge.create(r,null,"gregory").eras(t)}static features(){return{relative:rM(),localeWeek:iM()}}}function jb(e,t){const r=s=>s.toUTC(0,{keepLocalTime:!0}).startOf("day").valueOf(),i=r(t)-r(e);return Math.floor(ce.fromMillis(i).as("days"))}function Z4(e,t,r){const i=[["years",(l,h)=>h.year-l.year],["quarters",(l,h)=>h.quarter-l.quarter+(h.year-l.year)*4],["months",(l,h)=>h.month-l.month+(h.year-l.year)*12],["weeks",(l,h)=>{const p=jb(l,h);return(p-p%7)/7}],["days",jb]],s={},n=e;let o,a;for(const[l,h]of i)r.indexOf(l)>=0&&(o=l,s[l]=h(e,t),a=n.plus(s),a>t?(s[l]--,e=n.plus(s),e>t&&(a=e,s[l]--,e=n.plus(s))):e=a);return[e,s,a,o]}function J4(e,t,r,i){let[s,n,o,a]=Z4(e,t,r);const l=t-s,h=r.filter(f=>["hours","minutes","seconds","milliseconds"].indexOf(f)>=0);h.length===0&&(o<t&&(o=s.plus({[a]:1})),o!==s&&(n[a]=(n[a]||0)+l/(o-s)));const p=ce.fromObject(n,i);return h.length>0?ce.fromMillis(l,i).shiftTo(...h).plus(p):p}const Y4="missing Intl.DateTimeFormat.formatToParts support";function pe(e,t=r=>r){return{regex:e,deser:([r])=>t(U5(r))}}const K4="Â ",bM=`[ ${K4}]`,SM=new RegExp(bM,"g");function X4(e){return e.replace(/\./g,"\\.?").replace(SM,bM)}function Gb(e){return e.replace(/\./g,"").replace(SM," ").toLowerCase()}function Lr(e,t){return e===null?null:{regex:RegExp(e.map(X4).join("|")),deser:([r])=>e.findIndex(i=>Gb(r)===Gb(i))+t}}function zb(e,t){return{regex:e,deser:([,r,i])=>jf(r,i),groups:t}}function Ah(e){return{regex:e,deser:([t])=>t}}function Q4(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function eD(e,t){const r=Nr(t),i=Nr(t,"{2}"),s=Nr(t,"{3}"),n=Nr(t,"{4}"),o=Nr(t,"{6}"),a=Nr(t,"{1,2}"),l=Nr(t,"{1,3}"),h=Nr(t,"{1,6}"),p=Nr(t,"{1,9}"),f=Nr(t,"{2,4}"),m=Nr(t,"{4,6}"),y=w=>({regex:RegExp(Q4(w.val)),deser:([b])=>b,literal:!0}),v=(w=>{if(e.literal)return y(w);switch(w.val){case"G":return Lr(t.eras("short"),0);case"GG":return Lr(t.eras("long"),0);case"y":return pe(h);case"yy":return pe(f,kg);case"yyyy":return pe(n);case"yyyyy":return pe(m);case"yyyyyy":return pe(o);case"M":return pe(a);case"MM":return pe(i);case"MMM":return Lr(t.months("short",!0),1);case"MMMM":return Lr(t.months("long",!0),1);case"L":return pe(a);case"LL":return pe(i);case"LLL":return Lr(t.months("short",!1),1);case"LLLL":return Lr(t.months("long",!1),1);case"d":return pe(a);case"dd":return pe(i);case"o":return pe(l);case"ooo":return pe(s);case"HH":return pe(i);case"H":return pe(a);case"hh":return pe(i);case"h":return pe(a);case"mm":return pe(i);case"m":return pe(a);case"q":return pe(a);case"qq":return pe(i);case"s":return pe(a);case"ss":return pe(i);case"S":return pe(l);case"SSS":return pe(s);case"u":return Ah(p);case"uu":return Ah(a);case"uuu":return pe(r);case"a":return Lr(t.meridiems(),0);case"kkkk":return pe(n);case"kk":return pe(f,kg);case"W":return pe(a);case"WW":return pe(i);case"E":case"c":return pe(r);case"EEE":return Lr(t.weekdays("short",!1),1);case"EEEE":return Lr(t.weekdays("long",!1),1);case"ccc":return Lr(t.weekdays("short",!0),1);case"cccc":return Lr(t.weekdays("long",!0),1);case"Z":case"ZZ":return zb(new RegExp(`([+-]${a.source})(?::(${i.source}))?`),2);case"ZZZ":return zb(new RegExp(`([+-]${a.source})(${i.source})?`),2);case"z":return Ah(/[a-z_+-/]{1,256}?/i);case" ":return Ah(/[^\S\n\r]/);default:return y(w)}})(e)||{invalidReason:Y4};return v.token=e,v}const tD={year:{"2-digit":"yy",numeric:"yyyyy"},month:{numeric:"M","2-digit":"MM",short:"MMM",long:"MMMM"},day:{numeric:"d","2-digit":"dd"},weekday:{short:"EEE",long:"EEEE"},dayperiod:"a",dayPeriod:"a",hour12:{numeric:"h","2-digit":"hh"},hour24:{numeric:"H","2-digit":"HH"},minute:{numeric:"m","2-digit":"mm"},second:{numeric:"s","2-digit":"ss"},timeZoneName:{long:"ZZZZZ",short:"ZZZ"}};function rD(e,t,r){const{type:i,value:s}=e;if(i==="literal"){const l=/^\s+$/.test(s);return{literal:!l,val:l?" ":s}}const n=t[i];let o=i;i==="hour"&&(t.hour12!=null?o=t.hour12?"hour12":"hour24":t.hourCycle!=null?t.hourCycle==="h11"||t.hourCycle==="h12"?o="hour12":o="hour24":o=r.hour12?"hour12":"hour24");let a=tD[o];if(typeof a=="object"&&(a=a[n]),a)return{literal:!1,val:a}}function iD(e){return[`^${e.map(r=>r.regex).reduce((r,i)=>`${r}(${i.source})`,"")}$`,e]}function sD(e,t,r){const i=e.match(t);if(i){const s={};let n=1;for(const o in r)if(cl(r,o)){const a=r[o],l=a.groups?a.groups+1:1;!a.literal&&a.token&&(s[a.token.val[0]]=a.deser(i.slice(n,n+l))),n+=l}return[i,s]}else return[i,{}]}function nD(e){const t=n=>{switch(n){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":case"H":return"hour";case"d":return"day";case"o":return"ordinal";case"L":case"M":return"month";case"y":return"year";case"E":case"c":return"weekday";case"W":return"weekNumber";case"k":return"weekYear";case"q":return"quarter";default:return null}};let r=null,i;return ee(e.z)||(r=ur.create(e.z)),ee(e.Z)||(r||(r=new pt(e.Z)),i=e.Z),ee(e.q)||(e.M=(e.q-1)*3+1),ee(e.h)||(e.h<12&&e.a===1?e.h+=12:e.h===12&&e.a===0&&(e.h=0)),e.G===0&&e.y&&(e.y=-e.y),ee(e.u)||(e.S=G_(e.u)),[Object.keys(e).reduce((n,o)=>{const a=t(o);return a&&(n[a]=e[o]),n},{}),r,i]}let Gm=null;function oD(){return Gm||(Gm=H.fromMillis(1555555555555)),Gm}function aD(e,t){if(e.literal)return e;const r=wt.macroTokenToFormatOpts(e.val),i=MM(r,t);return i==null||i.includes(void 0)?e:i}function TM(e,t){return Array.prototype.concat(...e.map(r=>aD(r,t)))}class $M{constructor(t,r){if(this.locale=t,this.format=r,this.tokens=TM(wt.parseFormat(r),t),this.units=this.tokens.map(i=>eD(i,t)),this.disqualifyingUnit=this.units.find(i=>i.invalidReason),!this.disqualifyingUnit){const[i,s]=iD(this.units);this.regex=RegExp(i,"i"),this.handlers=s}}explainFromTokens(t){if(this.isValid){const[r,i]=sD(t,this.regex,this.handlers),[s,n,o]=i?nD(i):[null,null,void 0];if(cl(i,"a")&&cl(i,"H"))throw new Ia("Can't include meridiem when specifying 24-hour format");return{input:t,tokens:this.tokens,regex:this.regex,rawMatches:r,matches:i,result:s,zone:n,specificOffset:o}}else return{input:t,tokens:this.tokens,invalidReason:this.invalidReason}}get isValid(){return!this.disqualifyingUnit}get invalidReason(){return this.disqualifyingUnit?this.disqualifyingUnit.invalidReason:null}}function EM(e,t,r){return new $M(e,r).explainFromTokens(t)}function lD(e,t,r){const{result:i,zone:s,specificOffset:n,invalidReason:o}=EM(e,t,r);return[i,s,n,o]}function MM(e,t){if(!e)return null;const i=wt.create(t,e).dtFormatter(oD()),s=i.formatToParts(),n=i.resolvedOptions();return s.map(o=>rD(o,e,n))}const zm="Invalid DateTime",uD=864e13;function lu(e){return new Kr("unsupported zone",`the zone "${e.name}" is not supported`)}function Vm(e){return e.weekData===null&&(e.weekData=Np(e.c)),e.weekData}function Bm(e){return e.localWeekData===null&&(e.localWeekData=Np(e.c,e.loc.getMinDaysInFirstWeek(),e.loc.getStartOfWeek())),e.localWeekData}function On(e,t){const r={ts:e.ts,zone:e.zone,c:e.c,o:e.o,loc:e.loc,invalid:e.invalid};return new H({...r,...t,old:r})}function xM(e,t,r){let i=e-t*60*1e3;const s=r.offset(i);if(t===s)return[i,t];i-=(s-t)*60*1e3;const n=r.offset(i);return s===n?[i,s]:[e-Math.min(s,n)*60*1e3,Math.max(s,n)]}function Ph(e,t){e+=t*60*1e3;const r=new Date(e);return{year:r.getUTCFullYear(),month:r.getUTCMonth()+1,day:r.getUTCDate(),hour:r.getUTCHours(),minute:r.getUTCMinutes(),second:r.getUTCSeconds(),millisecond:r.getUTCMilliseconds()}}function vd(e,t,r){return xM(Uf(e),t,r)}function Vb(e,t){const r=e.o,i=e.c.year+Math.trunc(t.years),s=e.c.month+Math.trunc(t.months)+Math.trunc(t.quarters)*3,n={...e.c,year:i,month:s,day:Math.min(e.c.day,Lp(i,s))+Math.trunc(t.days)+Math.trunc(t.weeks)*7},o=ce.fromObject({years:t.years-Math.trunc(t.years),quarters:t.quarters-Math.trunc(t.quarters),months:t.months-Math.trunc(t.months),weeks:t.weeks-Math.trunc(t.weeks),days:t.days-Math.trunc(t.days),hours:t.hours,minutes:t.minutes,seconds:t.seconds,milliseconds:t.milliseconds}).as("milliseconds"),a=Uf(n);let[l,h]=xM(a,r,e.zone);return o!==0&&(l+=o,h=e.zone.offset(l)),{ts:l,o:h}}function Jo(e,t,r,i,s,n){const{setZone:o,zone:a}=r;if(e&&Object.keys(e).length!==0||t){const l=t||a,h=H.fromObject(e,{...r,zone:l,specificOffset:n});return o?h:h.setZone(a)}else return H.invalid(new Kr("unparsable",`the input "${s}" can't be parsed as ${i}`))}function Oh(e,t,r=!0){return e.isValid?wt.create(ge.create("en-US"),{allowZ:r,forceSimple:!0}).formatDateTimeFromString(e,t):null}function Hm(e,t){const r=e.c.year>9999||e.c.year<0;let i="";return r&&e.c.year>=0&&(i+="+"),i+=Ye(e.c.year,r?6:4),t?(i+="-",i+=Ye(e.c.month),i+="-",i+=Ye(e.c.day)):(i+=Ye(e.c.month),i+=Ye(e.c.day)),i}function Bb(e,t,r,i,s,n){let o=Ye(e.c.hour);return t?(o+=":",o+=Ye(e.c.minute),(e.c.millisecond!==0||e.c.second!==0||!r)&&(o+=":")):o+=Ye(e.c.minute),(e.c.millisecond!==0||e.c.second!==0||!r)&&(o+=Ye(e.c.second),(e.c.millisecond!==0||!i)&&(o+=".",o+=Ye(e.c.millisecond,3))),s&&(e.isOffsetFixed&&e.offset===0&&!n?o+="Z":e.o<0?(o+="-",o+=Ye(Math.trunc(-e.o/60)),o+=":",o+=Ye(Math.trunc(-e.o%60))):(o+="+",o+=Ye(Math.trunc(e.o/60)),o+=":",o+=Ye(Math.trunc(e.o%60)))),n&&(o+="["+e.zone.ianaName+"]"),o}const AM={month:1,day:1,hour:0,minute:0,second:0,millisecond:0},cD={weekNumber:1,weekday:1,hour:0,minute:0,second:0,millisecond:0},hD={ordinal:1,hour:0,minute:0,second:0,millisecond:0},PM=["year","month","day","hour","minute","second","millisecond"],dD=["weekYear","weekNumber","weekday","hour","minute","second","millisecond"],pD=["year","ordinal","hour","minute","second","millisecond"];function fD(e){const t={year:"year",years:"year",month:"month",months:"month",day:"day",days:"day",hour:"hour",hours:"hour",minute:"minute",minutes:"minute",quarter:"quarter",quarters:"quarter",second:"second",seconds:"second",millisecond:"millisecond",milliseconds:"millisecond",weekday:"weekday",weekdays:"weekday",weeknumber:"weekNumber",weeksnumber:"weekNumber",weeknumbers:"weekNumber",weekyear:"weekYear",weekyears:"weekYear",ordinal:"ordinal"}[e.toLowerCase()];if(!t)throw new O3(e);return t}function Hb(e){switch(e.toLowerCase()){case"localweekday":case"localweekdays":return"localWeekday";case"localweeknumber":case"localweeknumbers":return"localWeekNumber";case"localweekyear":case"localweekyears":return"localWeekYear";default:return fD(e)}}function mD(e){return bd[e]||(wd===void 0&&(wd=ze.now()),bd[e]=e.offset(wd)),bd[e]}function qb(e,t){const r=tn(t.zone,ze.defaultZone);if(!r.isValid)return H.invalid(lu(r));const i=ge.fromObject(t);let s,n;if(ee(e.year))s=ze.now();else{for(const l of PM)ee(e[l])&&(e[l]=AM[l]);const o=eM(e)||tM(e);if(o)return H.invalid(o);const a=mD(r);[s,n]=vd(e,a,r)}return new H({ts:s,zone:r,loc:i,o:n})}function Wb(e,t,r){const i=ee(r.round)?!0:r.round,s=(o,a)=>(o=z_(o,i||r.calendary?0:2,!0),t.loc.clone(r).relFormatter(r).format(o,a)),n=o=>r.calendary?t.hasSame(e,o)?0:t.startOf(o).diff(e.startOf(o),o).get(o):t.diff(e,o).get(o);if(r.unit)return s(n(r.unit),r.unit);for(const o of r.units){const a=n(o);if(Math.abs(a)>=1)return s(a,o)}return s(e>t?-0:0,r.units[r.units.length-1])}function Zb(e){let t={},r;return e.length>0&&typeof e[e.length-1]=="object"?(t=e[e.length-1],r=Array.from(e).slice(0,e.length-1)):r=Array.from(e),[t,r]}let wd,bd={};class H{constructor(t){const r=t.zone||ze.defaultZone;let i=t.invalid||(Number.isNaN(t.ts)?new Kr("invalid input"):null)||(r.isValid?null:lu(r));this.ts=ee(t.ts)?ze.now():t.ts;let s=null,n=null;if(!i)if(t.old&&t.old.ts===this.ts&&t.old.zone.equals(r))[s,n]=[t.old.c,t.old.o];else{const a=un(t.o)&&!t.old?t.o:r.offset(this.ts);s=Ph(this.ts,a),i=Number.isNaN(s.year)?new Kr("invalid input"):null,s=i?null:s,n=i?null:a}this._zone=r,this.loc=t.loc||ge.create(),this.invalid=i,this.weekData=null,this.localWeekData=null,this.c=s,this.o=n,this.isLuxonDateTime=!0}static now(){return new H({})}static local(){const[t,r]=Zb(arguments),[i,s,n,o,a,l,h]=r;return qb({year:i,month:s,day:n,hour:o,minute:a,second:l,millisecond:h},t)}static utc(){const[t,r]=Zb(arguments),[i,s,n,o,a,l,h]=r;return t.zone=pt.utcInstance,qb({year:i,month:s,day:n,hour:o,minute:a,second:l,millisecond:h},t)}static fromJSDate(t,r={}){const i=B5(t)?t.valueOf():NaN;if(Number.isNaN(i))return H.invalid("invalid input");const s=tn(r.zone,ze.defaultZone);return s.isValid?new H({ts:i,zone:s,loc:ge.fromObject(r)}):H.invalid(lu(s))}static fromMillis(t,r={}){if(un(t))return t<-864e13||t>uD?H.invalid("Timestamp out of range"):new H({ts:t,zone:tn(r.zone,ze.defaultZone),loc:ge.fromObject(r)});throw new gt(`fromMillis requires a numerical input, but received a ${typeof t} with value ${t}`)}static fromSeconds(t,r={}){if(un(t))return new H({ts:t*1e3,zone:tn(r.zone,ze.defaultZone),loc:ge.fromObject(r)});throw new gt("fromSeconds requires a numerical input")}static fromObject(t,r={}){t=t||{};const i=tn(r.zone,ze.defaultZone);if(!i.isValid)return H.invalid(lu(i));const s=ge.fromObject(r),n=Dp(t,Hb),{minDaysInFirstWeek:o,startOfWeek:a}=Rb(n,s),l=ze.now(),h=ee(r.specificOffset)?i.offset(l):r.specificOffset,p=!ee(n.ordinal),f=!ee(n.year),m=!ee(n.month)||!ee(n.day),y=f||m,_=n.weekYear||n.weekNumber;if((y||p)&&_)throw new Ia("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(m&&p)throw new Ia("Can't mix ordinal dates with month/day");const v=_||n.weekday&&!y;let w,b,M=Ph(l,h);v?(w=dD,b=cD,M=Np(M,o,a)):p?(w=pD,b=hD,M=jm(M)):(w=PM,b=AM);let $=!1;for(const V of w){const Y=n[V];ee(Y)?$?n[V]=b[V]:n[V]=M[V]:$=!0}const E=v?G5(n,o,a):p?z5(n):eM(n),P=E||tM(n);if(P)return H.invalid(P);const O=v?Cb(n,o,a):p?Ib(n):n,[L,k]=vd(O,h,i),G=new H({ts:L,zone:i,o:k,loc:s});return n.weekday&&y&&t.weekday!==G.weekday?H.invalid("mismatched weekday",`you can't specify both a weekday of ${n.weekday} and a date of ${G.toISO()}`):G.isValid?G:H.invalid(G.invalid)}static fromISO(t,r={}){const[i,s]=R4(t);return Jo(i,s,r,"ISO 8601",t)}static fromRFC2822(t,r={}){const[i,s]=k4(t);return Jo(i,s,r,"RFC 2822",t)}static fromHTTP(t,r={}){const[i,s]=N4(t);return Jo(i,s,r,"HTTP",r)}static fromFormat(t,r,i={}){if(ee(t)||ee(r))throw new gt("fromFormat requires an input string and a format");const{locale:s=null,numberingSystem:n=null}=i,o=ge.fromOpts({locale:s,numberingSystem:n,defaultToEN:!0}),[a,l,h,p]=lD(o,t,r);return p?H.invalid(p):Jo(a,l,i,`format ${r}`,t,h)}static fromString(t,r,i={}){return H.fromFormat(t,r,i)}static fromSQL(t,r={}){const[i,s]=z4(t);return Jo(i,s,r,"SQL",t)}static invalid(t,r=null){if(!t)throw new gt("need to specify a reason the DateTime is invalid");const i=t instanceof Kr?t:new Kr(t,r);if(ze.throwOnInvalid)throw new f5(i);return new H({invalid:i})}static isDateTime(t){return t&&t.isLuxonDateTime||!1}static parseFormatForOpts(t,r={}){const i=MM(t,ge.fromObject(r));return i?i.map(s=>s?s.val:null).join(""):null}static expandFormat(t,r={}){return TM(wt.parseFormat(t),ge.fromObject(r)).map(s=>s.val).join("")}static resetCache(){wd=void 0,bd={}}get(t){return this[t]}get isValid(){return this.invalid===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}get outputCalendar(){return this.isValid?this.loc.outputCalendar:null}get zone(){return this._zone}get zoneName(){return this.isValid?this.zone.name:null}get year(){return this.isValid?this.c.year:NaN}get quarter(){return this.isValid?Math.ceil(this.c.month/3):NaN}get month(){return this.isValid?this.c.month:NaN}get day(){return this.isValid?this.c.day:NaN}get hour(){return this.isValid?this.c.hour:NaN}get minute(){return this.isValid?this.c.minute:NaN}get second(){return this.isValid?this.c.second:NaN}get millisecond(){return this.isValid?this.c.millisecond:NaN}get weekYear(){return this.isValid?Vm(this).weekYear:NaN}get weekNumber(){return this.isValid?Vm(this).weekNumber:NaN}get weekday(){return this.isValid?Vm(this).weekday:NaN}get isWeekend(){return this.isValid&&this.loc.getWeekendDays().includes(this.weekday)}get localWeekday(){return this.isValid?Bm(this).weekday:NaN}get localWeekNumber(){return this.isValid?Bm(this).weekNumber:NaN}get localWeekYear(){return this.isValid?Bm(this).weekYear:NaN}get ordinal(){return this.isValid?jm(this.c).ordinal:NaN}get monthShort(){return this.isValid?xh.months("short",{locObj:this.loc})[this.month-1]:null}get monthLong(){return this.isValid?xh.months("long",{locObj:this.loc})[this.month-1]:null}get weekdayShort(){return this.isValid?xh.weekdays("short",{locObj:this.loc})[this.weekday-1]:null}get weekdayLong(){return this.isValid?xh.weekdays("long",{locObj:this.loc})[this.weekday-1]:null}get offset(){return this.isValid?+this.o:NaN}get offsetNameShort(){return this.isValid?this.zone.offsetName(this.ts,{format:"short",locale:this.locale}):null}get offsetNameLong(){return this.isValid?this.zone.offsetName(this.ts,{format:"long",locale:this.locale}):null}get isOffsetFixed(){return this.isValid?this.zone.isUniversal:null}get isInDST(){return this.isOffsetFixed?!1:this.offset>this.set({month:1,day:1}).offset||this.offset>this.set({month:5}).offset}getPossibleOffsets(){if(!this.isValid||this.isOffsetFixed)return[this];const t=864e5,r=6e4,i=Uf(this.c),s=this.zone.offset(i-t),n=this.zone.offset(i+t),o=this.zone.offset(i-s*r),a=this.zone.offset(i-n*r);if(o===a)return[this];const l=i-o*r,h=i-a*r,p=Ph(l,o),f=Ph(h,a);return p.hour===f.hour&&p.minute===f.minute&&p.second===f.second&&p.millisecond===f.millisecond?[On(this,{ts:l}),On(this,{ts:h})]:[this]}get isInLeapYear(){return th(this.year)}get daysInMonth(){return Lp(this.year,this.month)}get daysInYear(){return this.isValid?za(this.year):NaN}get weeksInWeekYear(){return this.isValid?xc(this.weekYear):NaN}get weeksInLocalWeekYear(){return this.isValid?xc(this.localWeekYear,this.loc.getMinDaysInFirstWeek(),this.loc.getStartOfWeek()):NaN}resolvedLocaleOptions(t={}){const{locale:r,numberingSystem:i,calendar:s}=wt.create(this.loc.clone(t),t).resolvedOptions(this);return{locale:r,numberingSystem:i,outputCalendar:s}}toUTC(t=0,r={}){return this.setZone(pt.instance(t),r)}toLocal(){return this.setZone(ze.defaultZone)}setZone(t,{keepLocalTime:r=!1,keepCalendarTime:i=!1}={}){if(t=tn(t,ze.defaultZone),t.equals(this.zone))return this;if(t.isValid){let s=this.ts;if(r||i){const n=t.offset(this.ts),o=this.toObject();[s]=vd(o,n,t)}return On(this,{ts:s,zone:t})}else return H.invalid(lu(t))}reconfigure({locale:t,numberingSystem:r,outputCalendar:i}={}){const s=this.loc.clone({locale:t,numberingSystem:r,outputCalendar:i});return On(this,{loc:s})}setLocale(t){return this.reconfigure({locale:t})}set(t){if(!this.isValid)return this;const r=Dp(t,Hb),{minDaysInFirstWeek:i,startOfWeek:s}=Rb(r,this.loc),n=!ee(r.weekYear)||!ee(r.weekNumber)||!ee(r.weekday),o=!ee(r.ordinal),a=!ee(r.year),l=!ee(r.month)||!ee(r.day),h=a||l,p=r.weekYear||r.weekNumber;if((h||o)&&p)throw new Ia("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(l&&o)throw new Ia("Can't mix ordinal dates with month/day");let f;n?f=Cb({...Np(this.c,i,s),...r},i,s):ee(r.ordinal)?(f={...this.toObject(),...r},ee(r.day)&&(f.day=Math.min(Lp(f.year,f.month),f.day))):f=Ib({...jm(this.c),...r});const[m,y]=vd(f,this.o,this.zone);return On(this,{ts:m,o:y})}plus(t){if(!this.isValid)return this;const r=ce.fromDurationLike(t);return On(this,Vb(this,r))}minus(t){if(!this.isValid)return this;const r=ce.fromDurationLike(t).negate();return On(this,Vb(this,r))}startOf(t,{useLocaleWeeks:r=!1}={}){if(!this.isValid)return this;const i={},s=ce.normalizeUnit(t);switch(s){case"years":i.month=1;case"quarters":case"months":i.day=1;case"weeks":case"days":i.hour=0;case"hours":i.minute=0;case"minutes":i.second=0;case"seconds":i.millisecond=0;break}if(s==="weeks")if(r){const n=this.loc.getStartOfWeek(),{weekday:o}=this;o<n&&(i.weekNumber=this.weekNumber-1),i.weekday=n}else i.weekday=1;if(s==="quarters"){const n=Math.ceil(this.month/3);i.month=(n-1)*3+1}return this.set(i)}endOf(t,r){return this.isValid?this.plus({[t]:1}).startOf(t,r).minus(1):this}toFormat(t,r={}){return this.isValid?wt.create(this.loc.redefaultToEN(r)).formatDateTimeFromString(this,t):zm}toLocaleString(t=kp,r={}){return this.isValid?wt.create(this.loc.clone(r),t).formatDateTime(this):zm}toLocaleParts(t={}){return this.isValid?wt.create(this.loc.clone(t),t).formatDateTimeParts(this):[]}toISO({format:t="extended",suppressSeconds:r=!1,suppressMilliseconds:i=!1,includeOffset:s=!0,extendedZone:n=!1}={}){if(!this.isValid)return null;const o=t==="extended";let a=Hm(this,o);return a+="T",a+=Bb(this,o,r,i,s,n),a}toISODate({format:t="extended"}={}){return this.isValid?Hm(this,t==="extended"):null}toISOWeekDate(){return Oh(this,"kkkk-'W'WW-c")}toISOTime({suppressMilliseconds:t=!1,suppressSeconds:r=!1,includeOffset:i=!0,includePrefix:s=!1,extendedZone:n=!1,format:o="extended"}={}){return this.isValid?(s?"T":"")+Bb(this,o==="extended",r,t,i,n):null}toRFC2822(){return Oh(this,"EEE, dd LLL yyyy HH:mm:ss ZZZ",!1)}toHTTP(){return Oh(this.toUTC(),"EEE, dd LLL yyyy HH:mm:ss 'GMT'")}toSQLDate(){return this.isValid?Hm(this,!0):null}toSQLTime({includeOffset:t=!0,includeZone:r=!1,includeOffsetSpace:i=!0}={}){let s="HH:mm:ss.SSS";return(r||t)&&(i&&(s+=" "),r?s+="z":t&&(s+="ZZ")),Oh(this,s,!0)}toSQL(t={}){return this.isValid?`${this.toSQLDate()} ${this.toSQLTime(t)}`:null}toString(){return this.isValid?this.toISO():zm}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`DateTime { ts: ${this.toISO()}, zone: ${this.zone.name}, locale: ${this.locale} }`:`DateTime { Invalid, reason: ${this.invalidReason} }`}valueOf(){return this.toMillis()}toMillis(){return this.isValid?this.ts:NaN}toSeconds(){return this.isValid?this.ts/1e3:NaN}toUnixInteger(){return this.isValid?Math.floor(this.ts/1e3):NaN}toJSON(){return this.toISO()}toBSON(){return this.toJSDate()}toObject(t={}){if(!this.isValid)return{};const r={...this.c};return t.includeConfig&&(r.outputCalendar=this.outputCalendar,r.numberingSystem=this.loc.numberingSystem,r.locale=this.loc.locale),r}toJSDate(){return new Date(this.isValid?this.ts:NaN)}diff(t,r="milliseconds",i={}){if(!this.isValid||!t.isValid)return ce.invalid("created by diffing an invalid DateTime");const s={locale:this.locale,numberingSystem:this.numberingSystem,...i},n=H5(r).map(ce.normalizeUnit),o=t.valueOf()>this.valueOf(),a=o?this:t,l=o?t:this,h=J4(a,l,n,s);return o?h.negate():h}diffNow(t="milliseconds",r={}){return this.diff(H.now(),t,r)}until(t){return this.isValid?Ge.fromDateTimes(this,t):this}hasSame(t,r,i){if(!this.isValid)return!1;const s=t.valueOf(),n=this.setZone(t.zone,{keepLocalTime:!0});return n.startOf(r,i)<=s&&s<=n.endOf(r,i)}equals(t){return this.isValid&&t.isValid&&this.valueOf()===t.valueOf()&&this.zone.equals(t.zone)&&this.loc.equals(t.loc)}toRelative(t={}){if(!this.isValid)return null;const r=t.base||H.fromObject({},{zone:this.zone}),i=t.padding?this<r?-t.padding:t.padding:0;let s=["years","months","days","hours","minutes","seconds"],n=t.unit;return Array.isArray(t.unit)&&(s=t.unit,n=void 0),Wb(r,this.plus(i),{...t,numeric:"always",units:s,unit:n})}toRelativeCalendar(t={}){return this.isValid?Wb(t.base||H.fromObject({},{zone:this.zone}),this,{...t,numeric:"auto",units:["years","months","days"],calendary:!0}):null}static min(...t){if(!t.every(H.isDateTime))throw new gt("min requires all arguments be DateTimes");return kb(t,r=>r.valueOf(),Math.min)}static max(...t){if(!t.every(H.isDateTime))throw new gt("max requires all arguments be DateTimes");return kb(t,r=>r.valueOf(),Math.max)}static fromFormatExplain(t,r,i={}){const{locale:s=null,numberingSystem:n=null}=i,o=ge.fromOpts({locale:s,numberingSystem:n,defaultToEN:!0});return EM(o,t,r)}static fromStringExplain(t,r,i={}){return H.fromFormatExplain(t,r,i)}static buildFormatParser(t,r={}){const{locale:i=null,numberingSystem:s=null}=r,n=ge.fromOpts({locale:i,numberingSystem:s,defaultToEN:!0});return new $M(n,t)}static fromFormatParser(t,r,i={}){if(ee(t)||ee(r))throw new gt("fromFormatParser requires an input string and a format parser");const{locale:s=null,numberingSystem:n=null}=i,o=ge.fromOpts({locale:s,numberingSystem:n,defaultToEN:!0});if(!o.equals(r.locale))throw new gt(`fromFormatParser called with a locale of ${o}, but the format parser was created for ${r.locale}`);const{result:a,zone:l,specificOffset:h,invalidReason:p}=r.explainFromTokens(t);return p?H.invalid(p):Jo(a,l,i,`format ${r.format}`,t,h)}static get DATE_SHORT(){return kp}static get DATE_MED(){return C3}static get DATE_MED_WITH_WEEKDAY(){return g5}static get DATE_FULL(){return I3}static get DATE_HUGE(){return R3}static get TIME_SIMPLE(){return k3}static get TIME_WITH_SECONDS(){return N3}static get TIME_WITH_SHORT_OFFSET(){return L3}static get TIME_WITH_LONG_OFFSET(){return D3}static get TIME_24_SIMPLE(){return F3}static get TIME_24_WITH_SECONDS(){return U3}static get TIME_24_WITH_SHORT_OFFSET(){return j3}static get TIME_24_WITH_LONG_OFFSET(){return G3}static get DATETIME_SHORT(){return z3}static get DATETIME_SHORT_WITH_SECONDS(){return V3}static get DATETIME_MED(){return B3}static get DATETIME_MED_WITH_SECONDS(){return H3}static get DATETIME_MED_WITH_WEEKDAY(){return _5}static get DATETIME_FULL(){return q3}static get DATETIME_FULL_WITH_SECONDS(){return W3}static get DATETIME_HUGE(){return Z3}static get DATETIME_HUGE_WITH_SECONDS(){return J3}}function kl(e){if(H.isDateTime(e))return e;if(e&&e.valueOf&&un(e.valueOf()))return H.fromJSDate(e);if(e&&typeof e=="object")return H.fromObject(e);throw new gt(`Unknown datetime argument: ${e}, of type ${typeof e}`)}const yD="shortOffset";function gD(e){return"timeZoneIANA"in e}function _D(e){return e.startsWith("UTC")}function dQ(e,t=!1){return{json:{read:{source:e,reader:(r,i)=>i[e]?vD(i[e]):null},write:!!t&&{allowNull:!0,writer(r,i){i[e]=r?wD(r):null}}}}}function vD(e,t=Pi){return e?gD(e)?e.timeZoneIANA:bD(e,t):t}function wD(e){return{timeZoneIANA:e}}function bD(e,t=Pi){if(!e||!vb.has(e.timeZone))return t;const r=vb.get(e.timeZone);return _D(e.timeZone)||e.respectsDaylightSaving?r:SD(r)}function SD(e){const t=H.local().setZone(e),r=Math.min(t.set({month:1,day:1}).offset,t.set({month:5}).offset);return r===0?"Etc/UTC":`Etc/GMT${pt.instance(-r).formatOffset(0,"narrow")}`}function pQ(e,t,r,i,s){if(t&&s==="date")return{timeZone:Mc,timeZoneName:void 0};const n=i.timeStyle||i.hour,o=r===D_;return{timeZone:o?s==="timestamp-offset"?void 0:e??Mc:r,timeZoneName:o&&n?yD:void 0}}function TD(e){const t=new Set(["etc/utc","etc/gmt","gmt"]),r=new Set(Intl.supportedValuesOf("timeZone").map(i=>i.toLowerCase()));return e===Pi||e===D_||t.has(e.toLowerCase())||r.has(e.toLowerCase())}const $D={year:void 0,month:void 0,day:void 0,weekday:void 0},ED={hour:void 0,minute:void 0,second:void 0},OM={timeZone:Mc},si={year:"numeric",month:"numeric",day:"numeric"},Nl={year:"numeric",month:"long",day:"numeric"},Ll={year:"numeric",month:"short",day:"numeric"},Dl={year:"numeric",month:"long",weekday:"long",day:"numeric"},Ys={hour:"numeric",minute:"numeric"},Gn={...Ys,second:"numeric"},CM={hourCycle:"h23"},Fl={...Ys,...CM},Ul={...Gn,...CM},IM={"short-date":si,"short-date-short-time":{...si,...Ys},"short-date-short-time-24":{...si,...Fl},"short-date-long-time":{...si,...Gn},"short-date-long-time-24":{...si,...Ul},"short-date-le":si,"short-date-le-short-time":{...si,...Ys},"short-date-le-short-time-24":{...si,...Fl},"short-date-le-long-time":{...si,...Gn},"short-date-le-long-time-24":{...si,...Ul},"long-month-day-year":Nl,"long-month-day-year-short-time":{...Nl,...Ys},"long-month-day-year-short-time-24":{...Nl,...Fl},"long-month-day-year-long-time":{...Nl,...Gn},"long-month-day-year-long-time-24":{...Nl,...Ul},"day-short-month-year":Ll,"day-short-month-year-short-time":{...Ll,...Ys},"day-short-month-year-short-time-24":{...Ll,...Fl},"day-short-month-year-long-time":{...Ll,...Gn},"day-short-month-year-long-time-24":{...Ll,...Ul},"long-date":Dl,"long-date-short-time":{...Dl,...Ys},"long-date-short-time-24":{...Dl,...Fl},"long-date-long-time":{...Dl,...Gn},"long-date-long-time-24":{...Dl,...Ul},"long-month-year":{month:"long",year:"numeric"},"short-month-year":{month:"short",year:"numeric"},year:{year:"numeric"},"short-time":Ys,"long-time":Gn},MD=qt()({shortDate:"short-date",shortDateShortTime:"short-date-short-time",shortDateShortTime24:"short-date-short-time-24",shortDateLongTime:"short-date-long-time",shortDateLongTime24:"short-date-long-time-24",shortDateLE:"short-date-le",shortDateLEShortTime:"short-date-le-short-time",shortDateLEShortTime24:"short-date-le-short-time-24",shortDateLELongTime:"short-date-le-long-time",shortDateLELongTime24:"short-date-le-long-time-24",longMonthDayYear:"long-month-day-year",longMonthDayYearShortTime:"long-month-day-year-short-time",longMonthDayYearShortTime24:"long-month-day-year-short-time-24",longMonthDayYearLongTime:"long-month-day-year-long-time",longMonthDayYearLongTime24:"long-month-day-year-long-time-24",dayShortMonthYear:"day-short-month-year",dayShortMonthYearShortTime:"day-short-month-year-short-time",dayShortMonthYearShortTime24:"day-short-month-year-short-time-24",dayShortMonthYearLongTime:"day-short-month-year-long-time",dayShortMonthYearLongTime24:"day-short-month-year-long-time-24",longDate:"long-date",longDateShortTime:"long-date-short-time",longDateShortTime24:"long-date-short-time-24",longDateLongTime:"long-date-long-time",longDateLongTime24:"long-date-long-time-24",longMonthYear:"long-month-year",shortMonthYear:"short-month-year",year:"year"}),RM={ar:"ar-u-nu-latn-ca-gregory"};let Ng=new WeakMap;const zf=IM["short-date-short-time"];function xD(e){let t=Ng.get(e);if(!t){const r=Vt(),i=RM[r]||r,s=W_(e.timeZone??Pi),n={...e,timeZone:s};t=new Intl.DateTimeFormat(i,n),Ng.set(e,t)}return t}function fQ(e){return IM[e]}function q_(e,t=zf){return xD(t).format(e)}function mQ(e,t=zf){return q_(new Date(e),{...t,...OM,...ED})}function yQ(e,t=zf){return q_(new Date(`1970-01-01T${e}Z`),{...t,...OM,...$D})}function gQ(e,t=zf){if(t.timeZone)return q_(new Date(e),t);const r=H.fromISO(e,{setZone:!0}),i=Vt(),s=RM[i]??i,n=r.offset===0?Mc:t.timeZone,o={...t,timeZone:n};return r.toLocaleString(o,{locale:s})}function W_(e){switch(e){case Pi:return p5;case D_:return Mc;default:return e}}L_(()=>{Ng=new WeakMap});const AD={ar:"ar-u-nu-latn"};let Sd=new WeakMap,kM={};function Lg(e){const t=e||kM;if(!Sd.has(t)){const r=Vt(),i=AD[Vt()]||r;Sd.set(t,new Intl.NumberFormat(i,e))}return Sd.get(t)}function _Q(e={}){const t={};return e.digitSeparator!=null&&(t.useGrouping=e.digitSeparator),e.places!=null&&(t.minimumFractionDigits=t.maximumFractionDigits=e.places),t}function vQ(e,t){return Object.is(e,-0)&&(e=0),Lg(t).format(e)}function wQ(e,t=Vt()){var i,s;if(!e)return null;let r=Jb.get(t);if(!r){const n=Lg().formatToParts(12345.6),o=[...Lg({useGrouping:!1}).format(9876543210)].reverse(),a=new Map(o.map((y,_)=>[y,_])),l=new RegExp(`[${(i=n.find(y=>y.type==="group"))==null?void 0:i.value}]`,"g"),h=new RegExp(`[${(s=n.find(y=>y.type==="decimal"))==null?void 0:s.value}]`),p=new RegExp(`[${o.join("")}]`,"g"),f=/[\u200E\u200F\u202A\u202B\u202C\u202D\u202E\u2066\u2067\u2068\u2069\u061C]/g,m=/[-\u2212\u2013\u2014\u2015]/g;r=y=>{if((y=y.trim().replaceAll(l,"").replace(h,".").replace(p,v=>String(a.get(v))).replaceAll(f,"").replaceAll(m,"-"))==="")return null;const _=Number(y);return isNaN(_)?null:_},Jb.set(t,r)}return r(e)}L_(()=>{Sd=new WeakMap,kM={}});const Jb=new Map;async function PD(e,t,r,i){const s=t.exec(r);if(!s)throw new I("esri-intl:invalid-bundle",`Bundle id "${r}" is not compatible with the pattern "${t}"`);const n=s[1]?`${s[1]}/`:"",o=s[2],a=A3(i),l=`${n}${o}.json`,h=a?`${n}${o}_${a}.json`:l;let p;try{p=await Yb(e(h))}catch(f){if(h===l)throw new I("intl:unknown-bundle",`Bundle "${r}" cannot be loaded`,{error:f});try{p=await Yb(e(l))}catch(m){throw new I("intl:unknown-bundle",`Bundle "${r}" cannot be loaded`,{error:m})}}return p}async function Yb(e){if(Kb.fetchBundleAsset!=null)return Kb.fetchBundleAsset(e);const t=await qe(e,{responseType:"text"});return JSON.parse(t.data)}let OD=class{constructor({base:t="",pattern:r,location:i=new URL(window.location.href)}){let s;s=typeof i=="string"?n=>new URL(n,new URL(i,window.location.href)).href:i instanceof URL?n=>new URL(n,i).href:i,this.pattern=typeof r=="string"?new RegExp(`^${r}`):r,this.getAssetUrl=s,t=t?t.endsWith("/")?t:t+"/":"",this.matcher=new RegExp(`^${t}(?:(.*)\\/)?(.*)$`)}fetchMessageBundle(t,r){return PD(this.getAssetUrl,this.matcher,t,r)}};function CD(e){return new OD(e)}const Kb={};u5(CD({pattern:"esri/",location:je}));let Bi=class extends q{constructor(t){super(t),this.apiKey=null,this.id=null,this.language=null,this.places=null,this.serviceUrl="https://basemapstyles-api.arcgis.com/arcgis/rest/services/styles/v2",this.worldview=null}get languageParameter(){const t=this.language;let r=t==="local"||t==="global"?t:A3(t??Vt())??"global";return r=r==="no"?"nb":r,r}};c([d()],Bi.prototype,"apiKey",void 0),c([d()],Bi.prototype,"id",void 0),c([d()],Bi.prototype,"language",void 0),c([d()],Bi.prototype,"places",void 0),c([d()],Bi.prototype,"serviceUrl",void 0),c([d()],Bi.prototype,"worldview",void 0),Bi=c([S("esri.support.BasemapStyle")],Bi);const ID=Bi;function TQ(e){return e!=null&&typeof e=="object"&&"type"in e&&e.type==="feature"}function RD(e){return e!=null&&typeof e=="object"&&"type"in e&&e.type==="subtype-group"&&"sublayers"in e}function zn(e){return(e==null?void 0:e.type)==="subtype-sublayer"}const $Q={Point:"SceneLayer","3DObject":"SceneLayer",IntegratedMesh:"IntegratedMeshLayer",PointCloud:"PointCloudLayer",Building:"BuildingSceneLayer"};function EQ(e){const t=e==null?void 0:e.type;return t==="building-scene"||t==="integrated-mesh"||t==="point-cloud"||t==="scene"}function MQ(e){return e==="integrated-mesh"||e==="integrated-mesh-3dtiles"}function Vf(e){var t;return(e==null?void 0:e.type)==="feature"&&!e.url&&((t=e.source)==null?void 0:t.type)==="memory"}function xQ(e){var r;const t=e==null?void 0:e.type;return(t==="feature"||t==="subtype-group"||t==="oriented-imagery")&&((r=e==null?void 0:e.source)==null?void 0:r.type)==="feature-layer"}async function AQ(e,t){const r=_e==null?void 0:_e.findServerInfo(e);if((r==null?void 0:r.currentVersion)!=null)return r.owningSystemUrl||null;const i=e.toLowerCase().indexOf("/rest/services");if(i===-1)return null;const s=`${e.slice(0,i)}/rest/info`,n=t!=null?t.signal:null,{data:o}=await qe(s,{query:{f:"json"},responseType:"json",signal:n});return(o==null?void 0:o.owningSystemUrl)||null}function kD(e){if(!("capabilities"in e))return!1;switch(e.type){case"catalog":case"catalog-footprint":case"csv":case"feature":case"geojson":case"imagery":case"knowledge-graph-sublayer":case"ogc-feature":case"oriented-imagery":case"scene":case"sublayer":case"subtype-group":case"subtype-sublayer":case"wfs":return!0;default:return!1}}function ND(e){return kD(e)?"effectiveCapabilities"in e?e.effectiveCapabilities:e.capabilities:null}function LD(e){if(!("editingEnabled"in e))return!1;switch(e.type){case"csv":case"feature":case"geojson":case"oriented-imagery":case"scene":case"subtype-group":case"subtype-sublayer":return!0;default:return!1}}function DD(e){return!!LD(e)&&("effectiveEditingEnabled"in e?e.effectiveEditingEnabled:e.editingEnabled)}const FD=new Set(["bing-maps","imagery","imagery-tile","map-image","open-street-map","tile","unknown","unsupported","vector-tile","web-tile","wcs","wms","wmts"]),NM=new Set(["catalog","csv","feature","geo-rss","geojson","group","imagery","imagery-tile","kml","knowledge-graph","map-image","map-notes","media","ogc-feature","oriented-imagery","route","stream","subtype-group","tile","unknown","unsupported","vector-tile","web-tile","wcs","wfs","wms","wmts"]),UD=new Set([...NM,"link-chart"]);function jD(e){switch(e.layerContainerType){case"basemap":return FD;case"operational-layers":return e.origin==="link-chart"?UD:NM;default:return null}}function GD(e,t){if(t.restrictedWebMapWriting){const r=jD(t);return r==null||r.has(e.type)&&!Vf(e)}return!0}function zD(e,t){var r;if(t)if(Vf(e)){const i=vf("featureCollection.layers",t),s=(r=i==null?void 0:i[0])==null?void 0:r.layerDefinition;s&&Xb(e,s)}else e.type!=="group"&&Xb(e,t)}function Xb(e,t){"maxScale"in e&&(t.maxScale=Tp(e.maxScale)??void 0),"minScale"in e&&(t.minScale=Tp(e.minScale)??void 0)}function VD(e,t){if(zD(e,t),t&&(t.id=e.id,"blendMode"in e&&(t.blendMode=e.blendMode,t.blendMode==="normal"&&delete t.blendMode),t.opacity=Tp(e.opacity)??void 0,t.title=e.title||"Layer",t.visibility=e.visible,"legendEnabled"in e&&e.type!=="wmts"))if(Vf(e)){const r=t.featureCollection;r&&(r.showLegend=e.legendEnabled)}else t.showLegend=e.legendEnabled}function Qb(e,t,r){if(!e.persistenceEnabled)return null;if(!("write"in e)||!e.write)return r!=null&&r.messages&&r.messages.push(new I("layer:unsupported",`Layers (${e.title}, ${e.id}) of type '${e.declaredClass}' cannot be persisted`,{layer:e})),null;if(Vf(e)&&!e.isTable)t=e.resourceInfo;else if(GD(e,r)){const i={};return e.write(i,r)?i:null}return t!=null&&VD(e,t=C(t)),t}var uu;let BD=0,Kt=uu=class extends j.JSONSupportMixin(mn){constructor(e){super(e),this.id=null,this.portalItem=null,this.spatialReference=null,this.style=null,this.thumbnailUrl=null,this.title="Basemap",this.id=Date.now().toString(16)+"-basemap-"+BD++,this.baseLayers=new B,this.referenceLayers=new B;const t=i=>{i.parent&&i.parent!==this&&"remove"in i.parent&&i.parent.remove(i),i.parent=this,i.type==="elevation"&&F.getLogger(this).error(`Layer '${i.title}, id:${i.id}' of type '${i.type}' is not supported as a basemap layer and will therefore be ignored.`)},r=i=>{i.parent=null};this.addHandles([this.baseLayers.on("after-add",i=>t(i.item)),this.referenceLayers.on("after-add",i=>t(i.item)),this.baseLayers.on("after-remove",i=>r(i.item)),this.referenceLayers.on("after-remove",i=>r(i.item))])}initialize(){this.when().catch(e=>{F.getLogger(this).error("#load()",`Failed to load basemap (title: '${this.title}', id: '${this.id}')`,e)}),this.resourceInfo&&this.read(this.resourceInfo.data,this.resourceInfo.context)}destroy(){const e=this.baseLayers.toArray();for(const r of e)r.destroy();const t=this.referenceLayers.toArray();for(const r of t)r.destroy();this.baseLayers.destroy(),this.referenceLayers.destroy(),this.portalItem=ke(this.portalItem)}normalizeCtorArgs(e){return e&&"resourceInfo"in e&&(this._set("resourceInfo",e.resourceInfo),delete(e={...e}).resourceInfo),e}set baseLayers(e){this._set("baseLayers",ms(e,this._get("baseLayers")))}_writeBaseLayers(e,t,r){const i=[];e&&(r={...r,layerContainerType:"basemap"},this.baseLayers.forEach(s=>{const n=Qb(s,r.webmap?r.webmap.getLayerJSONFromResourceInfo(s):null,r);n!=null&&i.push(n)}),this.referenceLayers.forEach(s=>{const n=Qb(s,r.webmap?r.webmap.getLayerJSONFromResourceInfo(s):null,r);n!=null&&(s.type!=="scene"&&(n.isReference=!0),i.push(n))})),t.baseMapLayers=i}set referenceLayers(e){this._set("referenceLayers",ms(e,this._get("referenceLayers")))}writeTitle(e,t){t.title=e||"Basemap"}load(e){return this.addResolvingPromise(this._loadFromSource(e)),Promise.resolve(this)}loadAll(){return KE(this,e=>{e(this.baseLayers,this.referenceLayers)})}clone(){const e={id:this.id,title:this.title,portalItem:this.portalItem,baseLayers:this.baseLayers.map(t=>up(t)?t.clone():t),referenceLayers:this.referenceLayers.map(t=>up(t)?t.clone():t)};return this.loaded&&(e.loadStatus="loaded"),new uu({resourceInfo:this.resourceInfo}).set(e)}read(e,t){this.resourceInfo||this._set("resourceInfo",{data:e,context:t}),super.read(e,t)}write(e,t){var r;return e=e||{},t!=null&&t.origin||(t={origin:"web-map",...t}),super.write(e,t),!this.loaded&&((r=this.resourceInfo)!=null&&r.data.baseMapLayers)&&(e.baseMapLayers=this.resourceInfo.data.baseMapLayers.map(i=>{const s=C(i);return s.url&&Mi(s.url)&&(s.url=`https:${s.url}`),s.templateUrl&&Mi(s.templateUrl)&&(s.templateUrl=`https:${s.templateUrl}`),s})),e}async _loadFromSource(e){const{resourceInfo:t,portalItem:r,style:i}=this;Ve(e);const s=[];if(t){const n=t.context?t.context.url:null;if(s.push(this._loadLayersFromJSON(t.data,n,e)),t.data.id&&!t.data.title){const o=t.data.id;s.push(d5(o).then(a=>{a&&this.read({title:a},t.context)}))}}else r?s.push(this._loadFromItem(r,e)):i&&s.push(this._loadFromStylesService(i,e));await Promise.all(s)}async _loadLayersFromJSON(e,t,r){var l,h;const i=(l=this.resourceInfo)==null?void 0:l.context,s=((h=this.portalItem)==null?void 0:h.portal)||(i==null?void 0:i.portal)||null,n=qD[(i==null?void 0:i.origin)||""]??"web-map",{populateOperationalLayers:o}=await N(async()=>{const{populateOperationalLayers:p}=await import("./layersCreator-D0FCnAEq.js");return{populateOperationalLayers:p}},__vite__mapDeps([22,23,24,25,26,27,20,28])),a=[];if(Ve(r),e.baseMapLayers&&Array.isArray(e.baseMapLayers)){const p={context:{...i,origin:n,url:t,portal:s,layerContainerType:"basemap"},defaultLayerType:"DefaultTileLayer"},f=_=>n==="web-scene"&&_.layerType==="ArcGISSceneServiceLayer"||_.isReference,m=o(this.baseLayers,e.baseMapLayers.filter(_=>!f(_)),p);a.push(m);const y=o(this.referenceLayers,e.baseMapLayers.filter(f),p);a.push(y)}await Promise.allSettled(a)}async _loadFromItem(e,t){const r=await e.load(t),i=await r.fetchData("json",t),s=kt(e.itemUrl??"");return this._set("resourceInfo",{data:i.baseMap??{},context:{origin:HD[e.type||""]??"web-map",portal:e.portal||_n.getDefault(),url:s}}),this.read(this.resourceInfo.data,this.resourceInfo.context),this.read({spatialReference:i.spatialReference},this.resourceInfo.context),this.read({title:e.title,thumbnailUrl:e.thumbnailUrl},{origin:"portal-item",portal:e.portal||_n.getDefault(),url:s}),this._loadLayersFromJSON(this.resourceInfo.data,s,t)}async _loadFromStylesService(e,t){const r=e.serviceUrl.endsWith("/webmaps")?e.serviceUrl.slice(0,-8):e.serviceUrl,i=`${r}/styles/${e.id}/self`,s=`${r}/webmaps/${e.id}`,[n,o]=await Promise.all([(await qe(i,{query:{token:e.apiKey},signal:t==null?void 0:t.signal})).data,(await qe(s,{query:{language:e.languageParameter,places:e.places,worldview:e.worldview,token:e.apiKey},signal:t==null?void 0:t.signal})).data]);this.thumbnailUrl??(this.thumbnailUrl=n.thumbnailUrl);const a=kt(s);if(this._set("resourceInfo",{data:o.baseMap??{},context:{origin:"web-map",url:a}}),this.read(this.resourceInfo.data,this.resourceInfo.context),this.read({spatialReference:o.spatialReference},this.resourceInfo.context),await this._loadLayersFromJSON(this.resourceInfo.data,a,t),e.apiKey)for(const l of[...this.baseLayers,...this.referenceLayers])"apiKey"in l&&(l.apiKey=e.apiKey)}static fromId(e){const t=Ag[e];return t?t.itemId?new uu({portalItem:{id:t.itemId,portal:{url:"https://www.arcgis.com"}}}):uu.fromJSON(t,{origin:t.is3d?"web-scene":"web-map"}):null}};c([d({json:{write:{ignoreOrigin:!0,target:"baseMapLayers",writer(e,t,r,i){this._writeBaseLayers(e,t,i)}},origins:{"web-scene":{write:{ignoreOrigin:!0,target:{baseMapLayers:{type:B}},writer(e,t,r,i){this._writeBaseLayers(e,t,i)}}}}}})],Kt.prototype,"baseLayers",null),c([d({type:String,json:{origins:{"web-scene":{write:!0}}}})],Kt.prototype,"id",void 0),c([d({type:$3})],Kt.prototype,"portalItem",void 0),c([d()],Kt.prototype,"referenceLayers",null),c([d({readOnly:!0})],Kt.prototype,"resourceInfo",void 0),c([d({type:ae})],Kt.prototype,"spatialReference",void 0),c([d({type:ID})],Kt.prototype,"style",void 0),c([d()],Kt.prototype,"thumbnailUrl",void 0),c([d({type:String,json:{origins:{"web-scene":{write:{isRequired:!0}}}}})],Kt.prototype,"title",void 0),c([oe("title")],Kt.prototype,"writeTitle",null),Kt=uu=c([S("esri.Basemap")],Kt);const HD={"Web Scene":"web-scene","Web Map":"web-map","Link Chart":"link-chart"},qD={"web-scene":"web-scene","web-map":"web-map","link-chart":"link-chart"},rc=Kt,WD=Object.freeze(Object.defineProperty({__proto__:null,default:rc},Symbol.toStringTag,{value:"Module"})),Fp={transparent:[0,0,0,0],black:[0,0,0,1],silver:[192,192,192,1],gray:[128,128,128,1],white:[255,255,255,1],maroon:[128,0,0,1],red:[255,0,0,1],purple:[128,0,128,1],fuchsia:[255,0,255,1],green:[0,128,0,1],lime:[0,255,0,1],olive:[128,128,0,1],yellow:[255,255,0,1],navy:[0,0,128,1],blue:[0,0,255,1],teal:[0,128,128,1],aqua:[0,255,255,1],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],blanchedalmond:[255,235,205,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],oldlace:[253,245,230,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],rebeccapurple:[102,51,153,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],whitesmoke:[245,245,245,1],yellowgreen:[154,205,50,1]};function ZD(e){return!!Fp[e]||!!Fp[e.toLowerCase()]}function LM(e){return Fp[e]??Fp[e.toLowerCase()]}function PQ(e){return[...LM(e)]}function qm(e,t,r){r<0&&++r,r>1&&--r;const i=6*r;return i<1?e+(t-e)*i:2*r<1?t:3*r<2?e+(t-e)*(2/3-r)*6:e}function JD(e,t,r,i=1){const s=(e%360+360)%360/360,n=r<=.5?r*(t+1):r+t-r*t,o=2*r-n;return[Math.round(255*qm(o,n,s+1/3)),Math.round(255*qm(o,n,s)),Math.round(255*qm(o,n,s-1/3)),i]}function OQ(e){const t=e.length>5,r=t?8:4,i=(1<<r)-1,s=t?1:17,n=t?e.length===9:e.length===5;let o=+("0x"+e.slice(1));if(isNaN(o))return null;const a=[0,0,0,1];let l;return n&&(l=o&i,o>>=r,a[3]=s*l/255),l=o&i,o>>=r,a[2]=s*l,l=o&i,o>>=r,a[1]=s*l,l=o&i,o>>=r,a[0]=s*l,a}const CQ=2.2,e2=new Float32Array(1);function IQ(e){--e;for(let t=1;t<32;t<<=1)e|=e>>t;return e+1}function ii(e,t,r){return Math.min(Math.max(e,t),r)}function RQ(e){return e--,e|=e>>1,e|=e>>2,e|=e>>4,e|=e>>8,e|=e>>16,++e}function cu(e,t,r){return e+(t-e)*r}function kQ(e,t,r,i,s){return cu(i,s,(e-t)/(r-t))}function Bf(e){return e*Math.PI/180}function DM(e){return 180*e/Math.PI}function NQ(e,t=1e-6){return(e<0?-1:1)/Math.max(Math.abs(e),t)}function LQ(e){return Math.acos(ii(e,-1,1))}function YD(e){return Math.asin(ii(e,-1,1))}function Ba(e,t,r=1e-6){return e===t?!0:!Number.isFinite(e)||!Number.isFinite(t)?!1:(e>t?e-t:t-e)<=r}function DQ(e,t,r=1e-6){return!Ba(e,t,r)&&e>t}function FQ(e,t,r=1e-6){return!Ba(e,t,r)&&e<t}function UQ(e,t,r=1e-6){return Ba(e,t,r)||e>t}const Up=new DataView(new ArrayBuffer(Float64Array.BYTES_PER_ELEMENT));function Dg(e){return Up.setFloat64(0,e),Up.getBigInt64(0)}function KD(e){return Up.setBigInt64(0,e),Up.getFloat64(0)}const Td=BigInt("1000000"),XD=FM(1);function FM(e){const t=Dg(e=Math.abs(e)),r=KD(t<=Td?Td:t-Td);return Math.abs(e-r)}function jQ(e,t,r=XD){if(e===t)return!0;if(!Number.isFinite(e)||!Number.isFinite(t))return!1;if(r!=null&&FM(Math.min(Math.abs(e),Math.abs(t)))<r)return Math.abs(e-t)<=r;const i=Dg(e),s=Dg(t);return i<0!=s<0?!1:!((i<s?s-i:i-s)>Td)}function GQ(e){return UM(Math.max(-t2,Math.min(e,t2)))}function UM(e){return e2[0]=e,e2[0]}function zQ(e){const t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],r=e[3]*e[3]+e[4]*e[4]+e[5]*e[5],i=e[6]*e[6]+e[7]*e[7]+e[8]*e[8];return!(Ba(t,1)&&Ba(r,1)&&Ba(i,1))}const t2=UM(34028234663852886e22);function VQ(e,t,r){if(r===void 0||+r==0)return Math[e](t);if(t=+t,r=+r,isNaN(t)||typeof r!="number"||r%1!=0)return NaN;let i=t.toString().split("e");return i=(t=Math[e](+(i[0]+"e"+(i[1]?+i[1]-r:-r)))).toString().split("e"),+(i[0]+"e"+(i[1]?+i[1]+r:r))}function Ch(e){return ii(a_(e),0,255)}function Ih(e,t,r){return e=Number(e),isNaN(e)?r:e<t?t:e>r?r:e}function Rh(e,t){const r=e.toString(16).padStart(2,"0");return t?r.slice(0,1):r}let ne=class Xe{static blendColors(t,r,i,s=new Xe){return s.r=Math.round(t.r+(r.r-t.r)*i),s.g=Math.round(t.g+(r.g-t.g)*i),s.b=Math.round(t.b+(r.b-t.b)*i),s.a=t.a+(r.a-t.a)*i,s._sanitize()}static fromRgb(t,r){const i=t.toLowerCase().match(/^(rgba?|hsla?)\(([\s.\-,%0-9]+)\)/);if(i){const s=i[2].split(/\s*,\s*/),n=i[1];if(n==="rgb"&&s.length===3||n==="rgba"&&s.length===4){const o=s[0];if(o.charAt(o.length-1)==="%"){const a=s.map(l=>2.56*parseFloat(l));return s.length===4&&(a[3]=parseFloat(s[3])),Xe.fromArray(a,r)}return Xe.fromArray(s.map(a=>parseFloat(a)),r)}if(n==="hsl"&&s.length===3||n==="hsla"&&s.length===4)return Xe.fromArray(JD(parseFloat(s[0]),parseFloat(s[1])/100,parseFloat(s[2])/100,parseFloat(s[3])),r)}return null}static fromHex(t,r=new Xe){if(t[0]!=="#"||isNaN(+`0x${t.slice(1)}`))return null;switch(t.length){case 4:case 5:{const i=parseInt(t.slice(1,2),16),s=parseInt(t.slice(2,3),16),n=parseInt(t.slice(3,4),16),o=t.length===5?15:parseInt(t.slice(4),16);return Xe.fromArray([i+16*i,s+16*s,n+16*n,(o+16*o)/255],r)}case 7:case 9:{const i=parseInt(t.slice(1,3),16),s=parseInt(t.slice(3,5),16),n=parseInt(t.slice(5,7),16),o=t.length===7?255:parseInt(t.slice(7),16);return Xe.fromArray([i,s,n,o/255],r)}default:return null}}static fromArray(t,r=new Xe){return r._set(Number(t[0]),Number(t[1]),Number(t[2]),Number(t[3])),isNaN(r.a)&&(r.a=1),r._sanitize()}static fromString(t,r){const i=ZD(t)?LM(t):null;return i&&Xe.fromArray(i,r)||Xe.fromRgb(t,r)||Xe.fromHex(t,r)}static fromJSON(t){return t!=null?new Xe([t[0],t[1],t[2],(t[3]??255)/255]):void 0}static toUnitRGB(t){return t!=null?[t.r/255,t.g/255,t.b/255]:null}static toUnitRGBA(t){return t!=null?[t.r/255,t.g/255,t.b/255,t.a!=null?t.a:1]:null}constructor(t){this.r=255,this.g=255,this.b=255,this.a=1,t&&this.setColor(t)}get isBright(){return .299*this.r+.587*this.g+.114*this.b>=127}setColor(t){return typeof t=="string"?Xe.fromString(t,this):Array.isArray(t)?Xe.fromArray(t,this):(this._set(t.r??0,t.g??0,t.b??0,t.a??1),t instanceof Xe||this._sanitize()),this}toRgb(){return[this.r,this.g,this.b]}toRgba(){return[this.r,this.g,this.b,this.a]}toHex(t){const r=(t==null?void 0:t.capitalize)??!1,i=(t==null?void 0:t.digits)??6,s=i===3||i===4,n=i===4||i===8,o=`#${Rh(this.r,s)}${Rh(this.g,s)}${Rh(this.b,s)}${n?Rh(Math.round(255*this.a),s):""}`;return r?o.toUpperCase():o}toCss(t=!1){const r=this.r+", "+this.g+", "+this.b;return t?`rgba(${r}, ${this.a})`:`rgb(${r})`}toString(){return this.toCss(!0)}toJSON(){return this.toArray()}toArray(t=Xe.AlphaMode.ALWAYS){const r=Ch(this.r),i=Ch(this.g),s=Ch(this.b);return t===Xe.AlphaMode.ALWAYS||this.a!==1?[r,i,s,Ch(255*this.a)]:[r,i,s]}clone(){return new Xe(this.toRgba())}hash(){return this.r<<24|this.g<<16|this.b<<8|255*this.a}equals(t){return t!=null&&t.r===this.r&&t.g===this.g&&t.b===this.b&&t.a===this.a}_sanitize(){return this.r=Math.round(Ih(this.r,0,255)),this.g=Math.round(Ih(this.g,0,255)),this.b=Math.round(Ih(this.b,0,255)),this.a=Ih(this.a,0,1),this}_set(t,r,i,s){this.r=t,this.g=r,this.b=i,this.a=s}};ne.prototype.declaredClass="esri.Color",function(e){var t;(t=e.AlphaMode||(e.AlphaMode={}))[t.ALWAYS=0]="ALWAYS",t[t.UNLESS_OPAQUE=1]="UNLESS_OPAQUE"}(ne);function J(e,t={}){const r=e instanceof rt?e:new rt(e,t),{alwaysWriteDefaults:i,default:s,ignoreUnknown:n=!0,name:o,nonNullable:a,readOnly:l=!1}=t;return d({type:n?r.apiValues:String,json:{type:r.jsonValues,default:s,name:o,read:!l&&{reader:r.read},write:{writer:r.write,alwaysWriteDefaults:i}},nonNullable:a,readOnly:l})}var Fg;let $d=Fg=class extends j{constructor(e){super(e),this.type="none"}clone(){return new Fg({type:this.type})}};c([J({none:"none",stayAbove:"stay-above"}),d({json:{write:{isRequired:!0}}})],$d.prototype,"type",void 0),$d=Fg=c([S("esri.ground.NavigationConstraint")],$d);const QD=Symbol("GroundInstance");function jM(e){const t=a_(100*(1-e));return Math.max(0,Math.min(t,100))}function GM(e){const t=1-e/100;return Math.max(0,Math.min(t,1))}var zM,Ug;let Hi=Ug=class extends j.JSONSupportMixin(mn){constructor(e){super(e),this[zM]=!0,this.opacity=1,this.surfaceColor=null,this.navigationConstraint=null,this.layers=new B;const t=i=>{i.parent&&i.parent!==this&&"remove"in i.parent&&i.parent.remove(i),i.parent=this,i.type!=="elevation"&&i.type!=="base-elevation"&&F.getLogger(this).error(`Layer '${i.title}, id:${i.id}' of type '${i.type}' is not supported as a ground layer and will therefore be ignored. Only layers of type 'elevation' are supported.`)},r=i=>{i.parent=null};this.addHandles([this.layers.on("after-add",i=>t(i.item)),this.layers.on("after-remove",i=>r(i.item))])}initialize(){this.when().catch(e=>{Ht(e)||F.getLogger(this).error("#load()","Failed to load ground",e)}),this.resourceInfo&&this.read(this.resourceInfo.data,this.resourceInfo.context)}destroy(){const e=this.layers.removeAll();for(const t of e)ke(t);this.layers.destroy()}normalizeCtorArgs(e){return e&&"resourceInfo"in e&&(this._set("resourceInfo",e.resourceInfo),delete(e={...e}).resourceInfo),e}get layers(){return this._get("layers")}set layers(e){this._set("layers",ms(e,this._get("layers")))}writeLayers(e,t,r,i){const s=[];e&&(i={...i,layerContainerType:"ground"},e.forEach(n=>{if("write"in n){const o={};vI(n)().write(o,i)&&s.push(o)}else i!=null&&i.messages&&i.messages.push(new I("layer:unsupported",`Layers (${n.title}, ${n.id}) of type '${n.declaredClass}' cannot be persisted in the ground`,{layer:n}))})),t.layers=s}load(e){return this.addResolvingPromise(this._loadFromSource(e)),Promise.resolve(this)}loadAll(){return KE(this,e=>{e(this.layers)})}async queryElevation(e,t){await this.load({signal:t==null?void 0:t.signal});const{ElevationQuery:r}=await N(()=>import("./ElevationQuery-Ctu1XeT7.js"),[]);Ve(t);const i=new r,s=this.layers.filter(r2).toArray();return i.queryAll(s,e,t)}async createElevationSampler(e,t){await this.load({signal:t==null?void 0:t.signal});const{ElevationQuery:r}=await N(()=>import("./ElevationQuery-Ctu1XeT7.js"),[]);Ve(t);const i=new r,s=this.layers.filter(r2).toArray();return i.createSamplerAll(s,e,t)}clone(){const e={opacity:this.opacity,surfaceColor:C(this.surfaceColor),navigationConstraint:C(this.navigationConstraint),layers:this.layers.slice()};return this.loaded&&(e.loadStatus="loaded"),new Ug({resourceInfo:this.resourceInfo}).set(e)}read(e,t){this.resourceInfo||this._set("resourceInfo",{data:e,context:t}),super.read(e,t)}_loadFromSource(e){const t=this.resourceInfo;return t?this._loadLayersFromJSON(t.data,t.context,e):Promise.resolve()}async _loadLayersFromJSON(e,t,r){const i=(t==null?void 0:t.origin)||"web-scene",s=(t==null?void 0:t.portal)||null,n=(t==null?void 0:t.url)||null,{populateOperationalLayers:o}=await N(async()=>{const{populateOperationalLayers:l}=await import("./layersCreator-D0FCnAEq.js");return{populateOperationalLayers:l}},__vite__mapDeps([22,23,24,25,26,27,20,28]));Ve(r);const a=[];if(e.layers&&Array.isArray(e.layers)){const l={context:{origin:i,url:n,portal:s,layerContainerType:"ground"},defaultLayerType:"ArcGISTiledElevationServiceLayer"};a.push(o(this.layers,e.layers,l))}await Promise.allSettled(a)}};function e6(e){return e&&"createElevationSampler"in e}function r2(e){return e.type==="elevation"||e6(e)}zM=QD,c([d({json:{read:!1,write:{isRequired:!0}}})],Hi.prototype,"layers",null),c([oe("layers")],Hi.prototype,"writeLayers",null),c([d({readOnly:!0})],Hi.prototype,"resourceInfo",void 0),c([d({type:Number,nonNullable:!0,range:{min:0,max:1},json:{type:Te,read:{reader:GM,source:"transparency"},write:{writer:(e,t)=>{t.transparency=jM(e)},target:"transparency"}}})],Hi.prototype,"opacity",void 0),c([d({type:ne,json:{type:[Te],write:(e,t)=>{t.surfaceColor=e.toJSON().slice(0,3)}}})],Hi.prototype,"surfaceColor",void 0),c([d({type:$d,json:{write:!0}})],Hi.prototype,"navigationConstraint",void 0),Hi=Ug=c([S("esri.Ground")],Hi);const jp=Hi;function X(e,t,r={}){return Z_(e,t,r,VM)}function Or(e,t,r={}){return Z_(e,t,r,BM)}function Z_(e,t,r={},i){let s=null;const n=r.once?(o,a)=>{i(o)&&(Ce(s),t(o,a))}:(o,a)=>{i(o)&&t(o,a)};if(s=WR(e,n,r.sync,r.equals),r.initial){const o=e();n(o,o)}return s}function vn(e,t,r,i={}){let s=null,n=null,o=null;function a(){var p;s&&n&&(n.remove(),(p=i.onListenerRemove)==null||p.call(i,s),s=null,n=null)}function l(p){i.once&&i.once&&Ce(o),r(p)}const h=X(e,(p,f)=>{var m;a(),Sf(p)&&(s=p,n=Jc(p,t,l),(m=i.onListenerAdd)==null||m.call(i,p))},{sync:i.sync,initial:!0});return o=ue(()=>{h.remove(),a()}),o}function J_(e,t){return t6(e,BM,t)}function t6(e,t,r){if(lr(r))return Promise.reject($e());const i=e();if(t!=null&&t(i))return Promise.resolve(i);let s=null;function n(){s=Ce(s)}return new Promise((o,a)=>{s=qc([xr(r,()=>{n(),a($e())}),Z_(e,l=>{n(),o(l)},{sync:!1,once:!0},t??VM)])})}function VM(e){return!0}function BM(e){return!!e}function BQ(e,t,r={}){let i=!1;const s=X(e,(n,o)=>{i||t(n,o)},r);return{remove(){s.remove()},pause(){i=!0},resume(){i=!1}}}function r6(e,t){const r=new B,i=vn(e,"after-splice",({added:s,start:n,deleteCount:o})=>{const a=r.splice(n,o);for(const l of a)l.remove();if(s!=null&&s.length){const l=s.map(t);r.addMany(l,n)}},{sync:!0,onListenerRemove:()=>r.drain(s=>s.remove()),onListenerAdd:s=>r.addMany(s.items.map(t))});return r.addHandles(i),r}function HQ(e,t){const r=new B,i=r6(e,a=>If(async l=>{const h=await t(a,l);if(lr(l))throw h.remove(),$e();return h})),s=()=>null,n=async a=>{const l=await a.promise,h=i.indexOf(a);h<0||r.splice(h,1,l)};r.addMany(i.items.map(s));for(const a of i)mp(n(a));const o=i.on("after-splice",({added:a,start:l,deleteCount:h})=>{const p=r.splice(l,h);for(const f of p)f==null||f.remove();if(a!=null&&a.length){r.addMany(a.map(s),l);for(const f of a)mp(n(f))}});return r.addHandles([GI(i),o]),r}const wn={sync:!0},St={initial:!0},jt={sync:!0,initial:!0};let ua=class extends B{constructor(t){super(t),this.getCollections=null}initialize(){this.addHandles(LR(()=>this._refresh(),wn))}destroy(){this.getCollections=null}_refresh(){const t=this.getCollections!=null?this.getCollections():null;if(t==null)return void this.removeAll();let r=0;for(const i of t)i!=null&&(r=this._processCollection(r,i));this.splice(r,this.length)}_createNewInstance(t){return new B(t)}_processCollection(t,r){if(!r)return t;const i=this.itemFilterFunction??(s=>!!s);for(const s of r)if(s){if(i(s)){const n=this.indexOf(s,t);n>=0?n!==t&&this.reorder(s,t):this.add(s,t),++t}if(this.getChildrenFunction){const n=this.getChildrenFunction(s);if(Array.isArray(n))for(const o of n)t=this._processCollection(t,o);else t=this._processCollection(t,n)}}return t}};c([d()],ua.prototype,"getCollections",void 0),c([d()],ua.prototype,"getChildrenFunction",void 0),c([d()],ua.prototype,"itemFilterFunction",void 0),ua=c([S("esri.core.CollectionFlattener")],ua);const Ac=ua,kh=new WeakMap;function HM(e){return!e.destroyed&&(kh.has(e)||e.addHandles([X(()=>{const t=e.parent;return!(!t||!("type"in t))&&(t.type==="catalog-dynamic-group"||HM(t))},t=>kh.set(e,t),jt),ue(()=>kh.delete(e))]),kh.get(e))}function i6(e){return typeof e=="object"&&e!=null&&"loaded"in e&&e.loaded===!0&&"type"in e}function s6(e){var t,r;return!(!i6(e)||!((r=(t=ND(e))==null?void 0:t.operations)!=null&&r.supportsEditing)||"editingEnabled"in e&&!DD(e)||HM(e))}const n6=/^-?(\d+(\.\d+)?)\s*((px)|(pt))?$/i,o6="screenUtils.toPt: input not recognized!",qM=96;function WQ(e){return e?e/72*qM:0}function ko(e){return e?72*e/qM:0}function Re(e){if(typeof e=="string"){const t=e.match(n6);if(t){const r=Number(t[1]),i=t[3]&&t[3].toLowerCase(),s=e.charAt(0)==="-",n=i==="px"?ko(r):r;return s?-n:n}return console.warn(o6),null}return e}function lt(e=0,t=0){return{x:e,y:t}}function ZQ(e){return e?lt(e.x,e.y):null}function JQ(e=0,t=0){return[e,t]}function YQ(e=0,t=0,r=0){return[e,t,r]}function KQ(e){return e}function XQ(e){return e}function QQ(e){return e}function eee(e,t){return t?(t[0]=e.x,t[1]=e.y,t.length>2&&(t[2]=0),t):[e.x,e.y]}function WM(){const e=new Float32Array(16);return e[0]=1,e[5]=1,e[10]=1,e[15]=1,e}function a6(e){const t=new Float32Array(16);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function l6(e,t,r,i,s,n,o,a,l,h,p,f,m,y,_,v){const w=new Float32Array(16);return w[0]=e,w[1]=t,w[2]=r,w[3]=i,w[4]=s,w[5]=n,w[6]=o,w[7]=a,w[8]=l,w[9]=h,w[10]=p,w[11]=f,w[12]=m,w[13]=y,w[14]=_,w[15]=v,w}function u6(e,t){return new Float32Array(e,t,16)}const c6=WM();Object.freeze(Object.defineProperty({__proto__:null,IDENTITY:c6,clone:a6,create:WM,createView:u6,fromValues:l6},Symbol.toStringTag,{value:"Module"}));function Mn(){return[0,0,0]}function Y_(e){return[e[0],e[1],e[2]]}function Al(e,t,r){return[e,t,r]}function h6(e,t,r){return[e,t,r]}function d6(e,t=Mn()){const r=Math.min(3,e.length);for(let i=0;i<r;++i)t[i]=e[i];return t}function p6(e,t){return new Float64Array(e,t,3)}function ZM(){return Mn()}function JM(){return Al(1,1,1)}function YM(){return Al(1,0,0)}function KM(){return Al(0,1,0)}function XM(){return Al(0,0,1)}const f6=ZM(),m6=JM(),y6=YM(),g6=KM(),_6=XM();Object.freeze(Object.defineProperty({__proto__:null,ONES:m6,UNIT_X:y6,UNIT_Y:g6,UNIT_Z:_6,ZEROS:f6,clone:Y_,create:Mn,createView:p6,freeze:h6,fromArray:d6,fromValues:Al,ones:JM,unitX:YM,unitY:KM,unitZ:XM,zeros:ZM},Symbol.toStringTag,{value:"Module"}));let K_=1e-6;function Bt(){return K_}function v6(e){K_=e}const X_=Math.random,w6=Math.PI/180,b6=180/Math.PI;function Q_(e){return e*w6}function S6(e){return e*b6}function T6(e,t){return Math.abs(e-t)<=K_*Math.max(1,Math.abs(e),Math.abs(t))}Object.freeze(Object.defineProperty({__proto__:null,RANDOM:X_,equals:T6,getEpsilon:Bt,setEpsilon:v6,toDegree:S6,toRadian:Q_},Symbol.toStringTag,{value:"Module"}));function QM(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function $6(e,t,r,i,s,n,o,a,l,h,p,f,m,y,_,v,w){return e[0]=t,e[1]=r,e[2]=i,e[3]=s,e[4]=n,e[5]=o,e[6]=a,e[7]=l,e[8]=h,e[9]=p,e[10]=f,e[11]=m,e[12]=y,e[13]=_,e[14]=v,e[15]=w,e}function Hf(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function E6(e,t){if(e===t){const r=t[1],i=t[2],s=t[3],n=t[6],o=t[7],a=t[11];e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=r,e[6]=t[9],e[7]=t[13],e[8]=i,e[9]=n,e[11]=t[14],e[12]=s,e[13]=o,e[14]=a}else e[0]=t[0],e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=t[1],e[5]=t[5],e[6]=t[9],e[7]=t[13],e[8]=t[2],e[9]=t[6],e[10]=t[10],e[11]=t[14],e[12]=t[3],e[13]=t[7],e[14]=t[11],e[15]=t[15];return e}function M6(e,t){return ex(e,t)||Hf(e),e}function ex(e,t){const r=t[0],i=t[1],s=t[2],n=t[3],o=t[4],a=t[5],l=t[6],h=t[7],p=t[8],f=t[9],m=t[10],y=t[11],_=t[12],v=t[13],w=t[14],b=t[15],M=r*a-i*o,$=r*l-s*o,E=r*h-n*o,P=i*l-s*a,O=i*h-n*a,L=s*h-n*l,k=p*v-f*_,G=p*w-m*_,V=p*b-y*_,Y=f*w-m*v,re=f*b-y*v,ve=m*b-y*w;let K=M*ve-$*re+E*Y+P*V-O*G+L*k;return K?(K=1/K,e[0]=(a*ve-l*re+h*Y)*K,e[1]=(s*re-i*ve-n*Y)*K,e[2]=(v*L-w*O+b*P)*K,e[3]=(m*O-f*L-y*P)*K,e[4]=(l*V-o*ve-h*G)*K,e[5]=(r*ve-s*V+n*G)*K,e[6]=(w*E-_*L-b*$)*K,e[7]=(p*L-m*E+y*$)*K,e[8]=(o*re-a*V+h*k)*K,e[9]=(i*V-r*re-n*k)*K,e[10]=(_*O-v*E+b*M)*K,e[11]=(f*E-p*O-y*M)*K,e[12]=(a*G-o*Y-l*k)*K,e[13]=(r*Y-i*G+s*k)*K,e[14]=(v*$-_*P-w*M)*K,e[15]=(p*P-f*$+m*M)*K,e):null}function x6(e,t){const r=t[0],i=t[1],s=t[2],n=t[3],o=t[4],a=t[5],l=t[6],h=t[7],p=t[8],f=t[9],m=t[10],y=t[11],_=t[12],v=t[13],w=t[14],b=t[15];return e[0]=a*(m*b-y*w)-f*(l*b-h*w)+v*(l*y-h*m),e[1]=-(i*(m*b-y*w)-f*(s*b-n*w)+v*(s*y-n*m)),e[2]=i*(l*b-h*w)-a*(s*b-n*w)+v*(s*h-n*l),e[3]=-(i*(l*y-h*m)-a*(s*y-n*m)+f*(s*h-n*l)),e[4]=-(o*(m*b-y*w)-p*(l*b-h*w)+_*(l*y-h*m)),e[5]=r*(m*b-y*w)-p*(s*b-n*w)+_*(s*y-n*m),e[6]=-(r*(l*b-h*w)-o*(s*b-n*w)+_*(s*h-n*l)),e[7]=r*(l*y-h*m)-o*(s*y-n*m)+p*(s*h-n*l),e[8]=o*(f*b-y*v)-p*(a*b-h*v)+_*(a*y-h*f),e[9]=-(r*(f*b-y*v)-p*(i*b-n*v)+_*(i*y-n*f)),e[10]=r*(a*b-h*v)-o*(i*b-n*v)+_*(i*h-n*a),e[11]=-(r*(a*y-h*f)-o*(i*y-n*f)+p*(i*h-n*a)),e[12]=-(o*(f*w-m*v)-p*(a*w-l*v)+_*(a*m-l*f)),e[13]=r*(f*w-m*v)-p*(i*w-s*v)+_*(i*m-s*f),e[14]=-(r*(a*w-l*v)-o*(i*w-s*v)+_*(i*l-s*a)),e[15]=r*(a*m-l*f)-o*(i*m-s*f)+p*(i*l-s*a),e}function A6(e){const t=e[0],r=e[1],i=e[2],s=e[3],n=e[4],o=e[5],a=e[6],l=e[7],h=e[8],p=e[9],f=e[10],m=e[11],y=e[12],_=e[13],v=e[14],w=e[15];return(t*o-r*n)*(f*w-m*v)-(t*a-i*n)*(p*w-m*_)+(t*l-s*n)*(p*v-f*_)+(r*a-i*o)*(h*w-m*y)-(r*l-s*o)*(h*v-f*y)+(i*l-s*a)*(h*_-p*y)}function tx(e,t,r){const i=t[0],s=t[1],n=t[2],o=t[3],a=t[4],l=t[5],h=t[6],p=t[7],f=t[8],m=t[9],y=t[10],_=t[11],v=t[12],w=t[13],b=t[14],M=t[15];let $=r[0],E=r[1],P=r[2],O=r[3];return e[0]=$*i+E*a+P*f+O*v,e[1]=$*s+E*l+P*m+O*w,e[2]=$*n+E*h+P*y+O*b,e[3]=$*o+E*p+P*_+O*M,$=r[4],E=r[5],P=r[6],O=r[7],e[4]=$*i+E*a+P*f+O*v,e[5]=$*s+E*l+P*m+O*w,e[6]=$*n+E*h+P*y+O*b,e[7]=$*o+E*p+P*_+O*M,$=r[8],E=r[9],P=r[10],O=r[11],e[8]=$*i+E*a+P*f+O*v,e[9]=$*s+E*l+P*m+O*w,e[10]=$*n+E*h+P*y+O*b,e[11]=$*o+E*p+P*_+O*M,$=r[12],E=r[13],P=r[14],O=r[15],e[12]=$*i+E*a+P*f+O*v,e[13]=$*s+E*l+P*m+O*w,e[14]=$*n+E*h+P*y+O*b,e[15]=$*o+E*p+P*_+O*M,e}function P6(e,t,r){const i=r[0],s=r[1],n=r[2];if(t===e)e[12]=t[0]*i+t[4]*s+t[8]*n+t[12],e[13]=t[1]*i+t[5]*s+t[9]*n+t[13],e[14]=t[2]*i+t[6]*s+t[10]*n+t[14],e[15]=t[3]*i+t[7]*s+t[11]*n+t[15];else{const o=t[0],a=t[1],l=t[2],h=t[3],p=t[4],f=t[5],m=t[6],y=t[7],_=t[8],v=t[9],w=t[10],b=t[11];e[0]=o,e[1]=a,e[2]=l,e[3]=h,e[4]=p,e[5]=f,e[6]=m,e[7]=y,e[8]=_,e[9]=v,e[10]=w,e[11]=b,e[12]=o*i+p*s+_*n+t[12],e[13]=a*i+f*s+v*n+t[13],e[14]=l*i+m*s+w*n+t[14],e[15]=h*i+y*s+b*n+t[15]}return e}function O6(e,t,r){const i=r[0],s=r[1],n=r[2];return e[0]=t[0]*i,e[1]=t[1]*i,e[2]=t[2]*i,e[3]=t[3]*i,e[4]=t[4]*s,e[5]=t[5]*s,e[6]=t[6]*s,e[7]=t[7]*s,e[8]=t[8]*n,e[9]=t[9]*n,e[10]=t[10]*n,e[11]=t[11]*n,e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function C6(e,t,r,i){let s=i[0],n=i[1],o=i[2],a=Math.sqrt(s*s+n*n+o*o);if(a<=Bt())return void QM(e,t);a=1/a,s*=a,n*=a,o*=a;const l=Math.sin(r),h=Math.cos(r),p=1-h,f=t[0],m=t[1],y=t[2],_=t[3],v=t[4],w=t[5],b=t[6],M=t[7],$=t[8],E=t[9],P=t[10],O=t[11],L=s*s*p+h,k=n*s*p+o*l,G=o*s*p-n*l,V=s*n*p-o*l,Y=n*n*p+h,re=o*n*p+s*l,ve=s*o*p+n*l,K=n*o*p-s*l,$t=o*o*p+h;e[0]=f*L+v*k+$*G,e[1]=m*L+w*k+E*G,e[2]=y*L+b*k+P*G,e[3]=_*L+M*k+O*G,e[4]=f*V+v*Y+$*re,e[5]=m*V+w*Y+E*re,e[6]=y*V+b*Y+P*re,e[7]=_*V+M*Y+O*re,e[8]=f*ve+v*K+$*$t,e[9]=m*ve+w*K+E*$t,e[10]=y*ve+b*K+P*$t,e[11]=_*ve+M*K+O*$t,t!==e&&(e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15])}function I6(e,t,r){const i=Math.sin(r),s=Math.cos(r),n=t[4],o=t[5],a=t[6],l=t[7],h=t[8],p=t[9],f=t[10],m=t[11];return t!==e&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[4]=n*s+h*i,e[5]=o*s+p*i,e[6]=a*s+f*i,e[7]=l*s+m*i,e[8]=h*s-n*i,e[9]=p*s-o*i,e[10]=f*s-a*i,e[11]=m*s-l*i,e}function R6(e,t,r){const i=Math.sin(r),s=Math.cos(r),n=t[0],o=t[1],a=t[2],l=t[3],h=t[8],p=t[9],f=t[10],m=t[11];return t!==e&&(e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=n*s-h*i,e[1]=o*s-p*i,e[2]=a*s-f*i,e[3]=l*s-m*i,e[8]=n*i+h*s,e[9]=o*i+p*s,e[10]=a*i+f*s,e[11]=l*i+m*s,e}function k6(e,t,r){const i=Math.sin(r),s=Math.cos(r),n=t[0],o=t[1],a=t[2],l=t[3],h=t[4],p=t[5],f=t[6],m=t[7];return t!==e&&(e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=n*s+h*i,e[1]=o*s+p*i,e[2]=a*s+f*i,e[3]=l*s+m*i,e[4]=h*s-n*i,e[5]=p*s-o*i,e[6]=f*s-a*i,e[7]=m*s-l*i,e}function N6(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=t[0],e[13]=t[1],e[14]=t[2],e[15]=1,e}function L6(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=t[1],e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=t[2],e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function D6(e,t,r){if(t===0)return Hf(e);let i=r[0],s=r[1],n=r[2],o=Math.sqrt(i*i+s*s+n*n);if(o<=Bt())return null;o=1/o,i*=o,s*=o,n*=o;const a=Math.sin(t),l=Math.cos(t),h=1-l;return e[0]=i*i*h+l,e[1]=s*i*h+n*a,e[2]=n*i*h-s*a,e[3]=0,e[4]=i*s*h-n*a,e[5]=s*s*h+l,e[6]=n*s*h+i*a,e[7]=0,e[8]=i*n*h+s*a,e[9]=s*n*h-i*a,e[10]=n*n*h+l,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function F6(e,t){const r=Math.sin(t),i=Math.cos(t);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=i,e[6]=r,e[7]=0,e[8]=0,e[9]=-r,e[10]=i,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function U6(e,t){const r=Math.sin(t),i=Math.cos(t);return e[0]=i,e[1]=0,e[2]=-r,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=r,e[9]=0,e[10]=i,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function j6(e,t){const r=Math.sin(t),i=Math.cos(t);return e[0]=i,e[1]=r,e[2]=0,e[3]=0,e[4]=-r,e[5]=i,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function rx(e,t,r){const i=t[0],s=t[1],n=t[2],o=t[3],a=i+i,l=s+s,h=n+n,p=i*a,f=i*l,m=i*h,y=s*l,_=s*h,v=n*h,w=o*a,b=o*l,M=o*h;return e[0]=1-(y+v),e[1]=f+M,e[2]=m-b,e[3]=0,e[4]=f-M,e[5]=1-(p+v),e[6]=_+w,e[7]=0,e[8]=m+b,e[9]=_-w,e[10]=1-(p+y),e[11]=0,e[12]=r[0],e[13]=r[1],e[14]=r[2],e[15]=1,e}function G6(e,t){const r=z6,i=-t[0],s=-t[1],n=-t[2],o=t[3],a=t[4],l=t[5],h=t[6],p=t[7],f=i*i+s*s+n*n+o*o;return f>0?(r[0]=2*(a*o+p*i+l*n-h*s)/f,r[1]=2*(l*o+p*s+h*i-a*n)/f,r[2]=2*(h*o+p*n+a*s-l*i)/f):(r[0]=2*(a*o+p*i+l*n-h*s),r[1]=2*(l*o+p*s+h*i-a*n),r[2]=2*(h*o+p*n+a*s-l*i)),rx(e,t,r),e}const z6=Mn();function V6(e,t){return e[0]=t[12],e[1]=t[13],e[2]=t[14],e}function B6(e,t){const r=t[0],i=t[1],s=t[2],n=t[4],o=t[5],a=t[6],l=t[8],h=t[9],p=t[10];return e[0]=Math.sqrt(r*r+i*i+s*s),e[1]=Math.sqrt(n*n+o*o+a*a),e[2]=Math.sqrt(l*l+h*h+p*p),e}function H6(e,t){const r=t[0]+t[5]+t[10];let i=0;return r>0?(i=2*Math.sqrt(r+1),e[3]=.25*i,e[0]=(t[6]-t[9])/i,e[1]=(t[8]-t[2])/i,e[2]=(t[1]-t[4])/i):t[0]>t[5]&&t[0]>t[10]?(i=2*Math.sqrt(1+t[0]-t[5]-t[10]),e[3]=(t[6]-t[9])/i,e[0]=.25*i,e[1]=(t[1]+t[4])/i,e[2]=(t[8]+t[2])/i):t[5]>t[10]?(i=2*Math.sqrt(1+t[5]-t[0]-t[10]),e[3]=(t[8]-t[2])/i,e[0]=(t[1]+t[4])/i,e[1]=.25*i,e[2]=(t[6]+t[9])/i):(i=2*Math.sqrt(1+t[10]-t[0]-t[5]),e[3]=(t[1]-t[4])/i,e[0]=(t[8]+t[2])/i,e[1]=(t[6]+t[9])/i,e[2]=.25*i),e}function q6(e,t,r,i){const s=t[0],n=t[1],o=t[2],a=t[3],l=s+s,h=n+n,p=o+o,f=s*l,m=s*h,y=s*p,_=n*h,v=n*p,w=o*p,b=a*l,M=a*h,$=a*p,E=i[0],P=i[1],O=i[2];return e[0]=(1-(_+w))*E,e[1]=(m+$)*E,e[2]=(y-M)*E,e[3]=0,e[4]=(m-$)*P,e[5]=(1-(f+w))*P,e[6]=(v+b)*P,e[7]=0,e[8]=(y+M)*O,e[9]=(v-b)*O,e[10]=(1-(f+_))*O,e[11]=0,e[12]=r[0],e[13]=r[1],e[14]=r[2],e[15]=1,e}function W6(e,t,r,i,s){const n=t[0],o=t[1],a=t[2],l=t[3],h=n+n,p=o+o,f=a+a,m=n*h,y=n*p,_=n*f,v=o*p,w=o*f,b=a*f,M=l*h,$=l*p,E=l*f,P=i[0],O=i[1],L=i[2],k=s[0],G=s[1],V=s[2],Y=(1-(v+b))*P,re=(y+E)*P,ve=(_-$)*P,K=(y-E)*O,$t=(1-(m+b))*O,_s=(w+M)*O,cr=(_+$)*L,we=(w-M)*L,Li=(1-(m+v))*L;return e[0]=Y,e[1]=re,e[2]=ve,e[3]=0,e[4]=K,e[5]=$t,e[6]=_s,e[7]=0,e[8]=cr,e[9]=we,e[10]=Li,e[11]=0,e[12]=r[0]+k-(Y*k+K*G+cr*V),e[13]=r[1]+G-(re*k+$t*G+we*V),e[14]=r[2]+V-(ve*k+_s*G+Li*V),e[15]=1,e}function Z6(e,t){const r=t[0],i=t[1],s=t[2],n=t[3],o=r+r,a=i+i,l=s+s,h=r*o,p=i*o,f=i*a,m=s*o,y=s*a,_=s*l,v=n*o,w=n*a,b=n*l;return e[0]=1-f-_,e[1]=p+b,e[2]=m-w,e[3]=0,e[4]=p-b,e[5]=1-h-_,e[6]=y+v,e[7]=0,e[8]=m+w,e[9]=y-v,e[10]=1-h-f,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function J6(e,t,r,i,s,n,o){const a=1/(r-t),l=1/(s-i),h=1/(n-o);return e[0]=2*n*a,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=2*n*l,e[6]=0,e[7]=0,e[8]=(r+t)*a,e[9]=(s+i)*l,e[10]=(o+n)*h,e[11]=-1,e[12]=0,e[13]=0,e[14]=o*n*2*h,e[15]=0,e}function Y6(e,t,r,i,s){const n=1/Math.tan(t/2);let o;return e[0]=n/r,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=n,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=-1,e[12]=0,e[13]=0,e[15]=0,s!=null&&s!==1/0?(o=1/(i-s),e[10]=(s+i)*o,e[14]=2*s*i*o):(e[10]=-1,e[14]=-2*i),e}function K6(e,t,r,i){const s=Math.tan(t.upDegrees*Math.PI/180),n=Math.tan(t.downDegrees*Math.PI/180),o=Math.tan(t.leftDegrees*Math.PI/180),a=Math.tan(t.rightDegrees*Math.PI/180),l=2/(o+a),h=2/(s+n);return e[0]=l,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=h,e[6]=0,e[7]=0,e[8]=-(o-a)*l*.5,e[9]=(s-n)*h*.5,e[10]=i/(r-i),e[11]=-1,e[12]=0,e[13]=0,e[14]=i*r/(r-i),e[15]=0,e}function X6(e,t,r,i,s,n,o){const a=1/(t-r),l=1/(i-s),h=1/(n-o);return e[0]=-2*a,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*l,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*h,e[11]=0,e[12]=(t+r)*a,e[13]=(s+i)*l,e[14]=(o+n)*h,e[15]=1,e}function Q6(e,t,r,i){const s=t[0],n=t[1],o=t[2];let a=s-r[0],l=n-r[1],h=o-r[2];const p=Bt();if(Math.abs(a)<p&&Math.abs(l)<p&&Math.abs(h)<p)return void Hf(e);let f=1/Math.sqrt(a*a+l*l+h*h);a*=f,l*=f,h*=f;const m=i[0],y=i[1],_=i[2];let v=y*h-_*l,w=_*a-m*h,b=m*l-y*a;f=Math.sqrt(v*v+w*w+b*b),f?(f=1/f,v*=f,w*=f,b*=f):(v=0,w=0,b=0);let M=l*b-h*w,$=h*v-a*b,E=a*w-l*v;f=Math.sqrt(M*M+$*$+E*E),f?(f=1/f,M*=f,$*=f,E*=f):(M=0,$=0,E=0),e[0]=v,e[1]=M,e[2]=a,e[3]=0,e[4]=w,e[5]=$,e[6]=l,e[7]=0,e[8]=b,e[9]=E,e[10]=h,e[11]=0,e[12]=-(v*s+w*n+b*o),e[13]=-(M*s+$*n+E*o),e[14]=-(a*s+l*n+h*o),e[15]=1}function e8(e,t,r,i){const s=t[0],n=t[1],o=t[2],a=i[0],l=i[1],h=i[2];let p=s-r[0],f=n-r[1],m=o-r[2],y=p*p+f*f+m*m;y>0&&(y=1/Math.sqrt(y),p*=y,f*=y,m*=y);let _=l*m-h*f,v=h*p-a*m,w=a*f-l*p;return y=_*_+v*v+w*w,y>0&&(y=1/Math.sqrt(y),_*=y,v*=y,w*=y),e[0]=_,e[1]=v,e[2]=w,e[3]=0,e[4]=f*w-m*v,e[5]=m*_-p*w,e[6]=p*v-f*_,e[7]=0,e[8]=p,e[9]=f,e[10]=m,e[11]=0,e[12]=s,e[13]=n,e[14]=o,e[15]=1,e}function t8(e){return"mat4("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+", "+e[8]+", "+e[9]+", "+e[10]+", "+e[11]+", "+e[12]+", "+e[13]+", "+e[14]+", "+e[15]+")"}function r8(e){return Math.sqrt(e[0]**2+e[1]**2+e[2]**2+e[3]**2+e[4]**2+e[5]**2+e[6]**2+e[7]**2+e[8]**2+e[9]**2+e[10]**2+e[11]**2+e[12]**2+e[13]**2+e[14]**2+e[15]**2)}function i8(e,t,r){return e[0]=t[0]+r[0],e[1]=t[1]+r[1],e[2]=t[2]+r[2],e[3]=t[3]+r[3],e[4]=t[4]+r[4],e[5]=t[5]+r[5],e[6]=t[6]+r[6],e[7]=t[7]+r[7],e[8]=t[8]+r[8],e[9]=t[9]+r[9],e[10]=t[10]+r[10],e[11]=t[11]+r[11],e[12]=t[12]+r[12],e[13]=t[13]+r[13],e[14]=t[14]+r[14],e[15]=t[15]+r[15],e}function ix(e,t,r){return e[0]=t[0]-r[0],e[1]=t[1]-r[1],e[2]=t[2]-r[2],e[3]=t[3]-r[3],e[4]=t[4]-r[4],e[5]=t[5]-r[5],e[6]=t[6]-r[6],e[7]=t[7]-r[7],e[8]=t[8]-r[8],e[9]=t[9]-r[9],e[10]=t[10]-r[10],e[11]=t[11]-r[11],e[12]=t[12]-r[12],e[13]=t[13]-r[13],e[14]=t[14]-r[14],e[15]=t[15]-r[15],e}function s8(e,t,r){return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r,e[4]=t[4]*r,e[5]=t[5]*r,e[6]=t[6]*r,e[7]=t[7]*r,e[8]=t[8]*r,e[9]=t[9]*r,e[10]=t[10]*r,e[11]=t[11]*r,e[12]=t[12]*r,e[13]=t[13]*r,e[14]=t[14]*r,e[15]=t[15]*r,e}function n8(e,t,r,i){return e[0]=t[0]+r[0]*i,e[1]=t[1]+r[1]*i,e[2]=t[2]+r[2]*i,e[3]=t[3]+r[3]*i,e[4]=t[4]+r[4]*i,e[5]=t[5]+r[5]*i,e[6]=t[6]+r[6]*i,e[7]=t[7]+r[7]*i,e[8]=t[8]+r[8]*i,e[9]=t[9]+r[9]*i,e[10]=t[10]+r[10]*i,e[11]=t[11]+r[11]*i,e[12]=t[12]+r[12]*i,e[13]=t[13]+r[13]*i,e[14]=t[14]+r[14]*i,e[15]=t[15]+r[15]*i,e}function o8(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]&&e[6]===t[6]&&e[7]===t[7]&&e[8]===t[8]&&e[9]===t[9]&&e[10]===t[10]&&e[11]===t[11]&&e[12]===t[12]&&e[13]===t[13]&&e[14]===t[14]&&e[15]===t[15]}function a8(e,t){if(e===t)return!0;const r=e[0],i=e[1],s=e[2],n=e[3],o=e[4],a=e[5],l=e[6],h=e[7],p=e[8],f=e[9],m=e[10],y=e[11],_=e[12],v=e[13],w=e[14],b=e[15],M=t[0],$=t[1],E=t[2],P=t[3],O=t[4],L=t[5],k=t[6],G=t[7],V=t[8],Y=t[9],re=t[10],ve=t[11],K=t[12],$t=t[13],_s=t[14],cr=t[15],we=Bt();return Math.abs(r-M)<=we*Math.max(1,Math.abs(r),Math.abs(M))&&Math.abs(i-$)<=we*Math.max(1,Math.abs(i),Math.abs($))&&Math.abs(s-E)<=we*Math.max(1,Math.abs(s),Math.abs(E))&&Math.abs(n-P)<=we*Math.max(1,Math.abs(n),Math.abs(P))&&Math.abs(o-O)<=we*Math.max(1,Math.abs(o),Math.abs(O))&&Math.abs(a-L)<=we*Math.max(1,Math.abs(a),Math.abs(L))&&Math.abs(l-k)<=we*Math.max(1,Math.abs(l),Math.abs(k))&&Math.abs(h-G)<=we*Math.max(1,Math.abs(h),Math.abs(G))&&Math.abs(p-V)<=we*Math.max(1,Math.abs(p),Math.abs(V))&&Math.abs(f-Y)<=we*Math.max(1,Math.abs(f),Math.abs(Y))&&Math.abs(m-re)<=we*Math.max(1,Math.abs(m),Math.abs(re))&&Math.abs(y-ve)<=we*Math.max(1,Math.abs(y),Math.abs(ve))&&Math.abs(_-K)<=we*Math.max(1,Math.abs(_),Math.abs(K))&&Math.abs(v-$t)<=we*Math.max(1,Math.abs(v),Math.abs($t))&&Math.abs(w-_s)<=we*Math.max(1,Math.abs(w),Math.abs(_s))&&Math.abs(b-cr)<=we*Math.max(1,Math.abs(b),Math.abs(cr))}function l8(e){const t=Bt(),r=e[0],i=e[1],s=e[2],n=e[4],o=e[5],a=e[6],l=e[8],h=e[9],p=e[10];return Math.abs(1-(r*r+n*n+l*l))<=t&&Math.abs(1-(i*i+o*o+h*h))<=t&&Math.abs(1-(s*s+a*a+p*p))<=t}function u8(e){return e[0]===1&&e[1]===0&&e[2]===0&&e[4]===0&&e[5]===1&&e[6]===0&&e[8]===0&&e[9]===0&&e[10]===1}const c8=tx,h8=ix;Object.freeze(Object.defineProperty({__proto__:null,add:i8,adjoint:x6,copy:QM,determinant:A6,equals:a8,exactEquals:o8,frob:r8,fromQuat:Z6,fromQuat2:G6,fromRotation:D6,fromRotationTranslation:rx,fromRotationTranslationScale:q6,fromRotationTranslationScaleOrigin:W6,fromScaling:L6,fromTranslation:N6,fromXRotation:F6,fromYRotation:U6,fromZRotation:j6,frustum:J6,getRotation:H6,getScaling:B6,getTranslation:V6,hasIdentityRotation:u8,identity:Hf,invert:ex,invertOrIdentity:M6,isOrthoNormal:l8,lookAt:Q6,mul:c8,multiply:tx,multiplyScalar:s8,multiplyScalarAndAdd:n8,ortho:X6,perspective:Y6,perspectiveFromFieldOfView:K6,rotate:C6,rotateX:I6,rotateY:R6,rotateZ:k6,scale:O6,set:$6,str:t8,sub:h8,subtract:ix,targetTo:e8,translate:P6,transpose:E6},Symbol.toStringTag,{value:"Module"}));const Wm=()=>F.getLogger("esri.support.basemapUtils");function d8(){return{}}function p8(e){for(const t in e){const r=e[t];ke(r),delete e[t]}}function f8(e,t){let r;if(typeof e=="string"){const i=e in Ag,s=!i&&e.includes("/");if(!i&&!s){if(me.apiKey)Wm().warn(`Unable to find basemap definition for: ${e}. See available styles at https://developers.arcgis.com/rest/basemap-styles/`);else{const n=Object.entries(Ag).filter(([o,a])=>a.classic||a.is3d).map(([o])=>`"${o}"`).sort().join(", ");Wm().warn(`Unable to find basemap definition for: ${e}. Try one of these: ${n}`)}return null}t&&(r=t[e]),r||(r=i?rc.fromId(e):new rc({style:{id:e}}),t&&(t[e]=r))}else r=Rt(rc,e);return r!=null&&r.destroyed&&(Wm().warn("The provided basemap is already destroyed",{basemap:r}),r=null),r}function m8(e){return new Ac({getCollections:()=>[e.tables,e.layers],getChildrenFunction:t=>{const r=[];return"tables"in t&&r.push(t.tables),"layers"in t&&r.push(t.layers),r},itemFilterFunction:t=>{const r=t.parent;return!!r&&"tables"in r&&r.tables.includes(t)}})}function Zm(e){for(const t of e.values())t==null||t.destroy();e.clear()}const i2={"world-elevation":{id:"worldElevation",url:"//elevation3d.arcgis.com/arcgis/rest/services/WorldElevation3D/Terrain3D/ImageServer",layerType:"ArcGISTiledElevationServiceLayer"},"world-topobathymetry":{id:"worldTopoBathymetry",url:"//elevation3d.arcgis.com/arcgis/rest/services/WorldElevation3D/TopoBathy3D/ImageServer",layerType:"ArcGISTiledElevationServiceLayer"}};function y8(e){let t=null;if(typeof e=="string")if(e in i2){const r=i2[e];t=new jp({resourceInfo:{data:{layers:[r]}}})}else F.getLogger("esri.support.groundUtils").warn(`Unable to find ground definition for: ${e}. Try "world-elevation"`);else t=Rt(jp,e);return t}let sx=0;const nx=e=>{let t=class extends e{constructor(...r){super(...r),Object.defineProperty(this,"uid",{writable:!1,configurable:!1,value:Date.now().toString(16)+"-object-"+sx++})}};return t=c([S("esri.core.Identifiable")],t),t},g8=e=>{let t=class extends e{constructor(...r){super(...r),Object.defineProperty(this,"uid",{writable:!1,configurable:!1,value:sx++})}};return t=c([S("esri.core.Identifiable.NumericIdentifiable")],t),t};let hu=class extends nx(class{}){};hu=c([S("esri.core.Identifiable")],hu),function(e){e.IdentifiableMixin=nx,e.NumericIdentifiableMixin=g8}(hu||(hu={}));const sh=hu;async function _8(e){var i;const t="portalItem"in e?e:{portalItem:e},{fromItem:r}=await N(async()=>{const{fromItem:s}=await import("./portalLayers-C8omzfVn.js");return{fromItem:s}},__vite__mapDeps([27,25,24,23,26,20]));try{return await r(t)}catch(s){const n=t==null?void 0:t.portalItem,o=(n==null?void 0:n.id)||"unset",a=((i=n==null?void 0:n.portal)==null?void 0:i.url)||me.portalUrl;throw F.getLogger("esri.layers.support.fromPortalItem").error("#fromPortalItem()","Failed to create layer from portal item (portal: '"+a+"', id: '"+o+"')",s),s}}const s2={milliseconds:1,seconds:1e3,minutes:6e4,hours:36e5,days:864e5,weeks:6048e5,months:26784e5,years:31536e6,decades:31536e7,centuries:31536e8};function Jm(e,t,r,i=Pi){const s=new ur(W_(i)),n=H.fromJSDate(e,{zone:s}),o=r==="decades"||r==="centuries"?"year":ox(r);return r==="decades"&&(t*=10),r==="centuries"&&(t*=100),n.plus({[o]:t}).toJSDate()}function ree(e,t,r="milliseconds"){const i=e.getTime(),s=v8(t,r,"milliseconds");return new Date(i+s)}function n2(e,t,r=Pi){const i=new ur(W_(r)),s=H.fromJSDate(e,{zone:i});if(t==="decades"||t==="centuries"){const o=s.startOf("year"),{year:a}=o,l=a-a%(t==="decades"?10:100);return o.set({year:l}).toJSDate()}const n=ox(t);return s.startOf(n).toJSDate()}function v8(e,t,r){return e===0?0:e*s2[t]/s2[r]}function iee(e,t){return e&&t?e.intersection(t):e||t}function ox(e){switch(e){case"milliseconds":return"millisecond";case"seconds":return"second";case"minutes":return"minute";case"hours":return"hour";case"days":return"day";case"weeks":return"week";case"months":return"month";case"years":return"year"}}var fr;let tr=fr=class extends j{static get allTime(){return o2}static get empty(){return w8}static fromArray(e){return new fr({start:e[0]!=null?new Date(e[0]):e[0],end:e[1]!=null?new Date(e[1]):e[1]})}constructor(e){super(e),this.end=null,this.start=null}readEnd(e,t){return t.end!=null?new Date(t.end):null}writeEnd(e,t){t.end=(e==null?void 0:e.getTime())??null}get isAllTime(){return this.equals(fr.allTime)}get isEmpty(){return this.equals(fr.empty)}readStart(e,t){return t.start!=null?new Date(t.start):null}writeStart(e,t){t.start=(e==null?void 0:e.getTime())??null}clone(){return new fr({end:this.end,start:this.start})}equals(e){var n,o,a,l;if(!e)return!1;const t=((n=this.start)==null?void 0:n.getTime())??this.start,r=((o=this.end)==null?void 0:o.getTime())??this.end,i=((a=e.start)==null?void 0:a.getTime())??e.start,s=((l=e.end)==null?void 0:l.getTime())??e.end;return t===i&&r===s}expandTo(e,t=Pi){if(this.isEmpty||this.isAllTime)return this.clone();let r=this.start;r&&(r=n2(r,e,t));let i=this.end;if(i){const s=n2(i,e,t);i=i.getTime()===s.getTime()?s:Jm(s,1,e,t)}return new fr({start:r,end:i})}intersection(e){var a,l,h,p;if(!e)return this.clone();if(this.isEmpty||e.isEmpty)return fr.empty;if(this.isAllTime)return e.clone();if(e.isAllTime)return this.clone();const t=((a=this.start)==null?void 0:a.getTime())??-1/0,r=((l=this.end)==null?void 0:l.getTime())??1/0,i=((h=e.start)==null?void 0:h.getTime())??-1/0,s=((p=e.end)==null?void 0:p.getTime())??1/0;let n,o;return i>=t&&i<=r?n=i:t>=i&&t<=s&&(n=t),r>=i&&r<=s?o=r:s>=t&&s<=r&&(o=s),n==null||o==null||isNaN(n)||isNaN(o)?fr.empty:new fr({start:n===-1/0?null:new Date(n),end:o===1/0?null:new Date(o)})}offset(e,t,r=Pi){if(this.isEmpty||this.isAllTime)return this.clone();const i=new fr,{start:s,end:n}=this;return s!=null&&(i.start=Jm(s,e,t,r)),n!=null&&(i.end=Jm(n,e,t,r)),i}toArray(){var e,t;return this.isEmpty?[void 0,void 0]:[((e=this.start)==null?void 0:e.getTime())??null,((t=this.end)==null?void 0:t.getTime())??null]}union(e){if(!e||e.isEmpty)return this.clone();if(this.isEmpty)return e.clone();if(this.isAllTime||e.isAllTime)return o2.clone();const t=this.start!=null&&e.start!=null?new Date(Math.min(this.start.getTime(),e.start.getTime())):null,r=this.end!=null&&e.end!=null?new Date(Math.max(this.end.getTime(),e.end.getTime())):null;return new fr({start:t,end:r})}};c([d({type:Date,json:{write:{allowNull:!0}}})],tr.prototype,"end",void 0),c([de("end")],tr.prototype,"readEnd",null),c([oe("end")],tr.prototype,"writeEnd",null),c([d({readOnly:!0,json:{read:!1}})],tr.prototype,"isAllTime",null),c([d({readOnly:!0,json:{read:!1}})],tr.prototype,"isEmpty",null),c([d({type:Date,json:{write:{allowNull:!0}}})],tr.prototype,"start",void 0),c([de("start")],tr.prototype,"readStart",null),c([oe("start")],tr.prototype,"writeStart",null),tr=fr=c([S("esri.time.TimeExtent")],tr);const ev=tr,o2=new tr,w8=new tr({start:void 0,end:void 0});let b8=0,Fe=class extends xi.EventedMixin(sh.IdentifiableMixin(mn)){constructor(){super(...arguments),this.attributionDataUrl=null,this.fullExtent=new Le(-180,-90,180,90,ae.WGS84),this.id=Date.now().toString(16)+"-layer-"+b8++,this.legendEnabled=!0,this.listMode="show",this.opacity=1,this.parent=null,this.persistenceEnabled=!1,this.popupEnabled=!0,this.attributionVisible=!0,this.spatialReference=ae.WGS84,this.title=null,this.type=null,this.url=null,this.visibilityTimeExtent=null,this.visible=!0}static async fromArcGISServerUrl(t){const r=typeof t=="string"?{url:t}:t;return(await N(async()=>{const{fromUrl:i}=await import("./arcgisLayers-DICQgynO.js");return{fromUrl:i}},__vite__mapDeps([29,25,24,26]))).fromUrl(r)}static fromPortalItem(t){return _8(t)}initialize(){this.when().catch(t=>{Ht(t)||F.getLogger(this).error("#load()",`Failed to load layer (title: '${this.title??"no title"}', id: '${this.id??"no id"}')`,{error:t})})}destroy(){const t=this.parent;if(t){const r=this;"layers"in t&&t.layers.includes(r)?t.layers.remove(r):"tables"in t&&t.tables.includes(r)?t.tables.remove(r):"baseLayers"in t&&t.baseLayers.includes(r)?t.baseLayers.remove(r):"referenceLayers"in t&&t.referenceLayers.includes(r)&&t.referenceLayers.remove(r),this._set("parent",null)}}get effectiveVisible(){let t=this.visible;const r=this.parent;return t&&r&&"effectiveVisible"in r&&t&&(t=r.effectiveVisible),t}get hasAttributionData(){return this.attributionDataUrl!=null}get parsedUrl(){return kt(this.url)}createLayerView(t,r){return Promise.reject(new I("layer:create-layer-view","Layer does not support creating a layer view"))}async fetchAttributionData(){const t=this.attributionDataUrl;if(this.hasAttributionData&&t)return(await qe(t,{query:{f:"json"},responseType:"json"})).data;throw new I("layer:no-attribution-data","Layer does not have attribution data")}};c([d({type:String})],Fe.prototype,"attributionDataUrl",void 0),c([d({readOnly:!0})],Fe.prototype,"effectiveVisible",null),c([d({type:Le})],Fe.prototype,"fullExtent",void 0),c([d({readOnly:!0})],Fe.prototype,"hasAttributionData",null),c([d({type:String,clonable:!1})],Fe.prototype,"id",void 0),c([d({type:Boolean,nonNullable:!0})],Fe.prototype,"legendEnabled",void 0),c([d({type:["show","hide","hide-children"]})],Fe.prototype,"listMode",void 0),c([d({type:Number,range:{min:0,max:1},nonNullable:!0})],Fe.prototype,"opacity",void 0),c([d({clonable:!1})],Fe.prototype,"parent",void 0),c([d({readOnly:!0})],Fe.prototype,"parsedUrl",null),c([d({type:Boolean,readOnly:!0})],Fe.prototype,"persistenceEnabled",void 0),c([d({type:Boolean})],Fe.prototype,"popupEnabled",void 0),c([d({type:Boolean})],Fe.prototype,"attributionVisible",void 0),c([d({type:ae})],Fe.prototype,"spatialReference",void 0),c([d({type:String})],Fe.prototype,"title",void 0),c([d({readOnly:!0,json:{read:!1}})],Fe.prototype,"type",void 0),c([d()],Fe.prototype,"url",void 0),c([d({type:ev})],Fe.prototype,"visibilityTimeExtent",void 0),c([d({type:Boolean,nonNullable:!0})],Fe.prototype,"visible",void 0),Fe=c([S("esri.layers.Layer")],Fe);const ax=Fe;function jg(e,t,r){let i,s;if(e)for(let n=0,o=e.length;n<o;n++){if(i=e.at(n),(i==null?void 0:i[t])===r)return i;if((i==null?void 0:i.type)==="group"&&(s=jg(i.layers,t,r),s))return s}}const S8=e=>{let t=class extends e{constructor(...r){super(...r),this.layers=new B;const i=o=>{o.parent&&"remove"in o.parent&&o.parent.remove(o)},s=o=>{o.parent=this,this.layerAdded(o),o.type!=="elevation"&&o.type!=="base-elevation"||F.getLogger(this).error(`Layer 'title:${o.title}, id:${o.id}' of type '${o.type}' is not supported as an operational layer and will therefore be ignored.`)},n=o=>{o.parent=null,this.layerRemoved(o)};this.addHandles([this.layers.on("before-add",o=>{if(o.item===this)return o.preventDefault(),void F.getLogger(this).error("#add()","Cannot add layer to itself.");i(o.item)}),this.layers.on("after-add",o=>s(o.item)),this.layers.on("after-remove",o=>n(o.item))])}destroy(){const r=this.layers.toArray();for(const i of r)i.destroy();this.layers.destroy()}set layers(r){this._set("layers",ms(r,this._get("layers")))}add(r,i){const s=this.layers;if(i=s.getNextIndex(i),r instanceof ax){const n=r;n.parent===this?this.reorder(n,i):s.add(n,i)}else Ri(r)?r.then(n=>{this.destroyed||this.add(n,i)}):F.getLogger(this).error("#add()","The item being added is not a Layer or a Promise that resolves to a Layer.")}addMany(r,i){const s=this.layers;let n=s.getNextIndex(i);r.slice().forEach(o=>{o.parent!==this?(s.add(o,n),n+=1):this.reorder(o,n)})}findLayerById(r){return jg(this.layers,"id",r)}findLayerByUid(r){return jg(this.layers,"uid",r)}remove(r){return this.layers.remove(r)}removeMany(r){return this.layers.removeMany(r)}removeAll(){return this.layers.removeAll()}reorder(r,i){return this.layers.reorder(r,i)}layerAdded(r){}layerRemoved(r){}};return c([d()],t.prototype,"layers",null),t=c([S("esri.support.LayersMixin")],t),t},T8=new Set(["feature","subtype-group"]);function Gg(e,t,r){if(e)for(let i=0,s=e.length;i<s;i++){const n=e.at(i);if(n[t]===r)return n;if((n==null?void 0:n.type)==="group"){const o=Gg(n.tables,t,r);if(o)return o}}}const $8=e=>{let t=class extends e{constructor(...r){super(...r),this.tables=new B,this.addHandles([this.tables.on("after-add",i=>{const s=i.item;s.parent&&s.parent!==this&&"tables"in s.parent&&s.parent.tables.remove(s),s.parent=this,T8.has(s.type)||F.getLogger(this).error(`Layer 'title:${s.title}, id:${s.id}' of type '${s.type}' is not supported as a table and will therefore be ignored.`)}),this.tables.on("after-remove",i=>{i.item.parent=null})])}destroy(){const r=this.tables.toArray();for(const i of r)i.destroy();this.tables.destroy()}set tables(r){this._set("tables",ms(r,this._get("tables")))}findTableById(r){return Gg(this.tables,"id",r)}findTableByUid(r){return Gg(this.tables,"uid",r)}};return c([d()],t.prototype,"tables",null),t=c([S("esri.support.TablesMixin")],t),t};let Gr=class extends $8(S8(xi.EventedMixin(q))){constructor(t){super(t),this.allLayers=new Ac({getCollections:()=>{var r,i,s;return[(r=this.basemap)==null?void 0:r.baseLayers,(i=this.ground)==null?void 0:i.layers,this.layers,(s=this.basemap)==null?void 0:s.referenceLayers]},getChildrenFunction:r=>"layers"in r?r.layers:null}),this.allTables=m8(this),this.basemap=null,this.editableLayers=new Ac({getCollections:()=>[this.allLayers],itemFilterFunction:s6}),this.ground=new jp,this._basemapCache=d8()}destroy(){p8(this._basemapCache),this._basemapCache=null,this.allLayers.destroy(),this.allTables.destroy(),this.editableLayers.destroy(),this.basemap=ke(this.basemap),ke(this.ground),this._set("ground",null)}castBasemap(t){return f8(t,this._basemapCache)}castGround(t){return y8(t)??this._get("ground")}findLayerById(t){return this.allLayers.find(r=>r.id===t)}findTableById(t){return this.allTables.find(r=>r.id===t)}};c([d({readOnly:!0,dependsOn:[]})],Gr.prototype,"allLayers",void 0),c([d({readOnly:!0})],Gr.prototype,"allTables",void 0),c([d({type:rc,json:{read:{source:"baseMap"},write:{target:"baseMap"}}})],Gr.prototype,"basemap",void 0),c([tt("basemap")],Gr.prototype,"castBasemap",null),c([d({readOnly:!0})],Gr.prototype,"editableLayers",void 0),c([d({type:jp,nonNullable:!0})],Gr.prototype,"ground",void 0),c([tt("ground")],Gr.prototype,"castGround",null),c([d()],Gr.prototype,"undoRedo",void 0),Gr=c([S("esri.Map")],Gr);const lx=Gr,ux=e=>{let t=class extends e{clone(){var l;const r=pn(this);P$(r,"unable to clone instance of non-accessor class");const i=r.metadata,s=r.store,n={},o=new Map;for(const h in i){const p=i[h],f=s==null?void 0:s.originOf(h),m=p.clonable;if(p.readOnly||m===!1||f!==le.USER&&f!==le.DEFAULTS&&f!==le.WEB_MAP&&f!==le.WEB_SCENE)continue;const y=this[h];let _=null;_=typeof m=="function"?m(y):m==="reference"?y:Gy(y),y!=null&&_==null||(f===le.DEFAULTS?o.set(h,_):n[h]=_)}const a=new(Object.getPrototypeOf(this)).constructor(n);if(o.size){const h=(l=pn(a))==null?void 0:l.store;if(h)for(const[p,f]of o)h.set(p,f,le.DEFAULTS)}return a}};return t=c([S("esri.core.Clonable")],t),t};let du=class extends ux(q){};du=c([S("esri.core.Clonable")],du),function(e){e.ClonableMixin=ux}(du||(du={}));const Wt=du;let Vn=class extends Wt{constructor(t){super(t),this.row=0,this.column=0,this.rows=1,this.columns=1}equals(t){return t!=null&&this.row===t.row&&this.rows===t.rows&&this.column===t.column&&this.columns===t.columns}};c([d({type:Number,nonNullable:!0,json:{read:!1,write:!1}})],Vn.prototype,"row",void 0),c([d({type:Number,nonNullable:!0,json:{read:!1,write:!1}})],Vn.prototype,"column",void 0),c([d({type:Number,nonNullable:!0,json:{read:!1,write:!1}})],Vn.prototype,"rows",void 0),c([d({type:Number,nonNullable:!0,json:{read:!1,write:!1}})],Vn.prototype,"columns",void 0),Vn=c([S("esri.CameraLayout")],Vn);const cx=Vn;let tv=class{constructor(t,r){this.min=t,this.max=r,this.range=r-t}normalize(t,r=0,i=!1){return a2(this.range,this.min,this.max,t,r,i)}clamp(t,r=0){return ii(t-r,this.min,this.max)+r}monotonic(t,r,i){return t<r?r:r+zg(this.range,t-r,i)}minimalMonotonic(t,r,i){return a2(this.range,t,t+this.range,r,i)}center(t,r,i){return r=this.monotonic(t,r,i),this.normalize((t+r)/2,i)}diff(t,r,i){return this.monotonic(t,r,i)-t}shortestSignedDiff(t,r){t=this.normalize(t);const i=(r=this.normalize(r))-t,s=r<t?this.minimalMonotonic(t,r)-t:r-this.minimalMonotonic(r,t);return Math.abs(i)<Math.abs(s)?i:s}contains(t,r,i){return r=this.minimalMonotonic(t,r),(i=this.minimalMonotonic(t,i))>t&&i<r}};function a2(e,t,r,i,s=0,n=!1){return(i-=s)<t?i+=zg(e,t-i):i>r&&(i-=zg(e,i-r)),n&&i===r&&(i=t),i+s}function zg(e,t,r=0){return Math.ceil((t-r)/e)*e+r}const uee=new tv(0,2*Math.PI),cee=new tv(-Math.PI,Math.PI),E8=new tv(0,360);let li=class extends Wt.ClonableMixin(j){constructor(...t){super(...t),this.position=new te([0,0,0]),this.heading=0,this.tilt=0,this.fov=55,this.layout=new cx}normalizeCtorArgs(t,r,i,s){if(t&&typeof t=="object"&&("x"in t||Array.isArray(t))){const n={position:t};return r!=null&&(n.heading=r),i!=null&&(n.tilt=i),s!=null&&(n.fov=s),n}return t}writePosition(t,r,i,s){const n=t.clone();n.x=rr(t.x||0),n.y=rr(t.y||0),n.z=t.hasZ?rr(t.z||0):t.z,r[i]=n.write({},s)}readPosition(t,r){const i=new te;return i.read(t,r),i.x=rr(i.x||0),i.y=rr(i.y||0),i.z=i.hasZ?rr(i.z||0):i.z,i}equals(t){return t!=null&&this.tilt===t.tilt&&this.heading===t.heading&&this.fov===t.fov&&this.position.equals(t.position)&&this.layout.equals(t.layout)}};c([d({type:te,json:{write:{isRequired:!0}}})],li.prototype,"position",void 0),c([oe("position")],li.prototype,"writePosition",null),c([de("position")],li.prototype,"readPosition",null),c([d({type:Number,nonNullable:!0,json:{write:{isRequired:!0}}}),tt(e=>E8.normalize(rr(e)))],li.prototype,"heading",void 0),c([d({type:Number,nonNullable:!0,json:{write:{isRequired:!0}}}),tt(e=>ii(rr(e),-180,180))],li.prototype,"tilt",void 0),c([d({type:Number,nonNullable:!0,json:{default:55,write:!0}}),tt(e=>ii(rr(e,55),1,170))],li.prototype,"fov",void 0),c([d({type:cx,nonNullable:!0,json:{read:!1,write:!1}})],li.prototype,"layout",void 0),li=c([S("esri.Camera")],li);const M8=li;function hl(e,t,r=!1){let{hasM:i,hasZ:s}=e;Array.isArray(t)?t.length!==4||i||s?t.length===3&&r&&!i?(s=!0,i=!1):t.length===3&&i&&s&&(i=!1,s=!1):(i=!0,s=!0):(s=!s&&t.hasZ&&(!i||t.hasM),i=!i&&t.hasM&&(!s||t.hasZ)),e.hasZ=s,e.hasM=i}var Vg;function l2(e){return(t,r)=>t==null?r:r==null?t:e(t,r)}function x8(e){return e&&(e.declaredClass==="esri.geometry.SpatialReference"||e.wkid!=null)}let Os=Vg=class extends ys{constructor(...e){super(...e),this.points=[],this.type="multipoint"}normalizeCtorArgs(e,t){var s;if(!e&&!t)return{};const r={};Array.isArray(e)?(r.points=e,r.spatialReference=t):x8(e)?r.spatialReference=e:(e.points&&(r.points=e.points),e.spatialReference&&(r.spatialReference=e.spatialReference),e.hasZ&&(r.hasZ=e.hasZ),e.hasM&&(r.hasM=e.hasM));const i=(s=r.points)==null?void 0:s[0];return i&&(r.hasZ===void 0&&r.hasM===void 0?(r.hasZ=i.length>2,r.hasM=!1):r.hasZ===void 0?r.hasZ=i.length>3:r.hasM===void 0&&(r.hasM=i.length>3)),r}get cache(){return this.commitProperty("points"),this.commitProperty("hasZ"),this.commitProperty("hasM"),this.commitProperty("spatialReference"),{}}get extent(){const e=this.points;if(!e.length)return null;const t=new Le,r=this.hasZ,i=this.hasM,s=r?3:2,n=e[0],o=l2(Math.min),a=l2(Math.max);let l,h,p,f,[m,y]=n,[_,v]=n;for(let w=0,b=e.length;w<b;w++){const M=e[w],[$,E]=M;if(m=o(m,$),y=o(y,E),_=a(_,$),v=a(v,E),r&&M.length>2){const P=M[2];l=o(l,P),p=a(p,P)}if(i&&M.length>s){const P=M[s];h=o(h,P),f=a(f,P)}}return t.xmin=m,t.ymin=y,t.xmax=_,t.ymax=v,t.spatialReference=this.spatialReference,r?(t.zmin=l,t.zmax=p):(t.zmin=void 0,t.zmax=void 0),i?(t.mmin=h,t.mmax=f):(t.mmin=void 0,t.mmax=void 0),t}writePoints(e,t){t.points=C(this.points)}addPoint(e){return hl(this,e),Array.isArray(e)?this.points.push(e):this.points.push(e.toArray()),this.notifyChange("points"),this}clone(){const e={points:C(this.points),spatialReference:this.spatialReference};return this.hasZ&&(e.hasZ=!0),this.hasM&&(e.hasM=!0),new Vg(e)}getPoint(e){if(!this._validateInputs(e))return null;const t=this.points[e],r={x:t[0],y:t[1],spatialReference:this.spatialReference};let i=2;return this.hasZ&&(r.z=t[2],i=3),this.hasM&&(r.m=t[i]),new te(r)}removePoint(e){if(!this._validateInputs(e))return null;const t=new te(this.points.splice(e,1)[0],this.spatialReference);return this.notifyChange("points"),t}setPoint(e,t){return this._validateInputs(e)?(hl(this,t),Array.isArray(t)||(t=t.toArray()),this.points[e]=t,this.notifyChange("points"),this):this}toJSON(e){return this.write({},e)}_validateInputs(e){return e!=null&&e>=0&&e<this.points.length}};c([d({readOnly:!0})],Os.prototype,"cache",null),c([d()],Os.prototype,"extent",null),c([d({type:[[Number]],json:{write:{isRequired:!0}}})],Os.prototype,"points",void 0),c([oe("points")],Os.prototype,"writePoints",null),Os=Vg=c([S("esri.geometry.Multipoint")],Os),Os.prototype.toJSON.isDefaultToJSON=!0;const qf=Os;function dee(e){const t=[];for(e.reset();e.nextPath();){const r=[];for(;e.nextPoint();)r.push([e.x,e.y]);t.push(r)}return e.reset(),t}function A8(e){const t=[];for(;e.nextPoint();)t.push([e.x,e.y]);return e.seekPathStart(),t}var Gp;(function(e){e[e.X=0]="X",e[e.Y=1]="Y",e[e.Z=2]="Z"})(Gp||(Gp={}));function pee(e){if(!e)return null;if(Array.isArray(e))return e;const t=e.hasZ,r=e.hasM;if(e.type==="point")return r&&t?[e.x,e.y,e.z,e.m]:t?[e.x,e.y,e.z]:r?[e.x,e.y,e.m]:[e.x,e.y];if(e.type==="polygon")return e.rings.slice();if(e.type==="polyline")return e.paths.slice();if(e.type==="multipoint")return e.points.slice();if(e.type==="extent"){const i=e.clone().normalize();if(!i)return null;let s=!1,n=!1;return i.forEach(o=>{o.hasZ&&(s=!0),o.hasM&&(n=!0)}),i.map(o=>{const a=[[o.xmin,o.ymin],[o.xmin,o.ymax],[o.xmax,o.ymax],[o.xmax,o.ymin],[o.xmin,o.ymin]];if(s&&o.hasZ){const l=.5*(o.zmax-o.zmin);for(let h=0;h<a.length;h++)a[h].push(l)}if(n&&o.hasM){const l=.5*(o.mmax-o.mmin);for(let h=0;h<a.length;h++)a[h].push(l)}return a})}return null}function Wf(e,t){const r=t[0]-e[0],i=t[1]-e[1];if(e.length>2&&t.length>2){const s=e[2]-t[2];return Math.sqrt(r*r+i*i+s*s)}return Math.sqrt(r*r+i*i)}function hx(e,t,r){const i=e[0]+r*(t[0]-e[0]),s=e[1]+r*(t[1]-e[1]);return e.length>2&&t.length>2?[i,s,e[2]+r*(t[2]-e[2])]:[i,s]}function P8(e,t,r,i){return O8(e,t,r[i],r[i+1])}function O8(e,t,r,i){const[s,n]=t,[o,a]=r,[l,h]=i,p=l-o,f=h-a,m=p*p+f*f,y=(s-o)*p+(n-a)*f,_=Math.min(1,Math.max(0,y/m));return e[0]=o+p*_,e[1]=a+f*_,e}function fee(e,t,r,i,s,n){let o=r,a=i,l=s-o,h=n-a;if(l!==0||h!==0){const p=((e-o)*l+(t-a)*h)/(l*l+h*h);p>1?(o=s,a=n):p>0&&(o+=l*p,a+=h*p)}return l=e-o,h=t-a,l*l+h*h}function dx(e,t){return hx(e,t,.5)}function mee(e){const t=e.length;let r=0;for(let i=0;i<t-1;++i)r+=Wf(e[i],e[i+1]);return r}function yee(e,t){if(t<=0)return e[0];const r=e.length;let i=0;for(let s=0;s<r-1;++s){const n=Wf(e[s],e[s+1]);if(t-i<n){const o=(t-i)/n;return hx(e[s],e[s+1],o)}i+=n}return e[r-1]}function px(e,t=Gp.X,r=Gp.Y){let i=0;const s=e.length;let n=e[0];for(let o=1;o<s;o++){const a=e[o];i+=(a[t]-n[t])*(a[r]+n[r]),n=a}if(!fx(e)){const o=e[0];i+=(o[t]-n[t])*(o[r]+n[r])}return i>=0}function fx(e){const t=e.length;return t<3||yf(e[0],e[t-1])}function gee(e){"rings"in e&&(C8(e),I8(e))}function C8(e){if(!("rings"in e))return!1;let t=!1;for(const r of e.rings)fx(r)||(r.push(r[0].slice()),t=!0);return t}function I8(e){if(!("rings"in e)||e.rings.length===0||px(e.rings[0]))return!1;for(const t of e.rings)t.reverse();return!0}function _ee(e){return e.type!=="polygon"&&e.type!=="polyline"||R8(e.type==="polygon"?e.rings:e.paths,e.spatialReference),e}function R8(e,t){const r=It(t);if(!r)return;const i=r.valid[0],s=r.valid[1],n=s-i;for(const o of e){let a=1/0,l=-1/0;for(const p of o){const f=k8(p[0],i,s);a=Math.min(a,f),l=Math.max(l,f),p[0]=f}const h=l-a;n-h<h&&o.forEach(p=>{p[0]<0&&(p[0]+=n)})}}function k8(e,t,r){const i=r-t;return e<t?r-(t-e)%i:e>r?t+(e-t)%i:e}function vee(e,t){if(e===t)return!0;if(e.type!==t.type)return!1;if(e.type==="point"||e.type==="mesh"||e.type==="extent")return!0;if(e.type==="multipoint")return e.points.length===t.points.length;const[r,i]=e.type==="polyline"?[e.paths,t.paths]:[e.rings,t.rings];return r.length===i.length&&r.every((s,n)=>s.length===i[n].length)}function wee(e){return e?e.hasZ?[e.xmax-e.xmin/2,e.ymax-e.ymin/2,e.zmax-e.zmin/2]:[e.xmax-e.xmin/2,e.ymax-e.ymin/2]:null}function N8(e){return e?L8(e.rings,e.hasZ??!1):null}function L8(e,t){if(!(e!=null&&e.length))return null;const r=[],i=[],s=t?[1/0,-1/0,1/0,-1/0,1/0,-1/0]:[1/0,-1/0,1/0,-1/0];for(let n=0,o=e.length;n<o;n++){const a=mx(e[n],t,s);a&&i.push(a)}if(i.sort((n,o)=>{let a=n[2]-o[2];return a===0&&t&&(a=n[4]-o[4]),a}),i.length&&(r[0]=i[0][0],r[1]=i[0][1],t&&(r[2]=i[0][3]),(r[0]<s[0]||r[0]>s[1]||r[1]<s[2]||r[1]>s[3]||t&&(r[2]<s[4]||r[2]>s[5]))&&(r.length=0)),!r.length){const n=e[0]&&e[0].length?D8(e[0],t):null;if(!n)return null;r[0]=n[0],r[1]=n[1],t&&n.length>2&&(r[2]=n[2])}return r}function mx(e,t,r){let i=0,s=0,n=0,o=0,a=0;const l=e.length?e[0][0]:0,h=e.length?e[0][1]:0,p=e.length&&t?e[0][2]:0;for(let m=0;m<e.length;m++){const y=e[m],_=e[(m+1)%e.length],[v,w,b]=y,M=v-l,$=w-h,[E,P,O]=_,L=E-l,k=P-h,G=M*k-L*$;if(o+=G,i+=(M+L)*G,s+=($+k)*G,t&&y.length>2&&_.length>2){const V=b-p,Y=O-p,re=M*Y-L*V;n+=(V+Y)*re,a+=re}v<r[0]&&(r[0]=v),v>r[1]&&(r[1]=v),w<r[2]&&(r[2]=w),w>r[3]&&(r[3]=w),t&&(b<r[4]&&(r[4]=b),b>r[5]&&(r[5]=b))}if(o>0&&(o*=-1),a>0&&(a*=-1),!o)return null;o*=.5,a*=.5;const f=[i/(6*o)+l,s/(6*o)+h,o];return t&&(r[4]===r[5]||a===0?(f[3]=(r[4]+r[5])/2,f[4]=0):(f[3]=n/(6*a)+p,f[4]=a)),f}function bee(e,t){let r=0,i=0,s=0;e.nextPoint();const n=e.pathSize?e.x:0,o=e.pathSize?e.y:0;for(let a=0;a<e.pathSize;a++){e.seekInPath(a);const l=[e.x,e.y];e.seekInPath((a+1)%e.pathSize);const h=[e.x,e.y],[p,f]=l,m=p-n,y=f-o,[_,v]=h,w=_-n,b=v-o,M=m*b-w*y;s+=M,r+=(m+w)*M,i+=(y+b)*M,p<t[0]&&(t[0]=p),p>t[1]&&(t[1]=p),f<t[2]&&(t[2]=f),f>t[3]&&(t[3]=f)}return s>0&&(s*=-1),s?(s*=.5,[r/(6*s)+n,i/(6*s)+o,s]):null}function D8(e,t){const r=t?[0,0,0]:[0,0],i=t?[0,0,0]:[0,0];let s=0,n=0,o=0,a=0;for(let l=0,h=e.length;l<h-1;l++){const p=e[l],f=e[l+1];if(p&&f){r[0]=p[0],r[1]=p[1],i[0]=f[0],i[1]=f[1],t&&p.length>2&&f.length>2&&(r[2]=p[2],i[2]=f[2]);const m=Wf(r,i);if(m){s+=m;const y=dx(p,f);n+=m*y[0],o+=m*y[1],t&&y.length>2&&(a+=m*y[2])}}}return s>0?t?[n/s,o/s,a/s]:[n/s,o/s]:e.length?e[0]:null}function F8(e){const{hasZ:t,totalSize:r}=e;if(r===0)return null;const i=[],s=[],n=t?[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY]:[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY];for(e.reset();e.nextPath();){const o=mx(A8(e),e.hasZ,n);o&&s.push(o)}if(s.sort((o,a)=>{let l=o[2]-a[2];return l===0&&t&&(l=o[4]-a[4]),l}),s.length&&(i[0]=s[0][0],i[1]=s[0][1],t&&(i[2]=s[0][3]),(i[0]<n[0]||i[0]>n[1]||i[1]<n[2]||i[1]>n[3]||t&&(i[2]<n[4]||i[2]>n[5]))&&(i.length=0)),!i.length){e.reset(),e.nextPath();const o=e.pathSize?U8(e):null;if(!o)return null;i[0]=o[0],i[1]=o[1],t&&o.length>2&&(i[2]=o[2])}return i}function U8(e){const{hasZ:t}=e,r=t?[0,0,0]:[0,0],i=t?[0,0,0]:[0,0];let s=0,n=0,o=0,a=0;if(e.nextPoint()){let l=e.x,h=e.y,p=e.z;for(;e.nextPoint();){const f=e.x,m=e.y,y=e.z;r[0]=l,r[1]=h,i[0]=f,i[1]=m,t&&(r[2]=p,i[2]=y);const _=Wf(r,i);if(_){s+=_;const v=dx(r,i);n+=_*v[0],o+=_*v[1],t&&v.length>2&&(a+=_*v[2])}l=f,h=m,p=y}}return s>0?t?[n/s,o/s,a/s]:[n/s,o/s]:e.pathSize?(e.seekPathStart(),e.nextPoint(),[e.x,e.y]):null}const j8=1e-6;function See(e){let t=0;for(e.reset();e.nextPath();)t+=e.getCurrentRingArea();if(t<j8){const s=F8(e);return s?[s[0],s[1]]:null}const r=[0,0];if(e.reset(),!e.nextPath()||!e.nextPoint())return null;const i=[e.x,e.y];for(e.reset();e.nextPath();)z8(r,i,e);return r[0]*=1/t,r[1]*=1/t,r[0]+=i[0],r[1]+=i[1],r}const G8=1/3;function z8(e,t,r){if(!r||r.pathSize<3)return null;r.nextPoint();const i=r.x,s=r.y;r.nextPoint();let n,o=r.x-i,a=r.y-s,l=0,h=0;for(;r.nextPoint();)l=r.x-i,h=r.y-s,n=.5*G8*(l*a-h*o),e[0]+=n*(o+l),e[1]+=n*(a+h),o=l,a=h;const p=r.getCurrentRingArea(),f=[i,s];return f[0]-=t[0],f[1]-=t[1],f[0]*=p,f[1]*=p,e[0]+=f[0],e[1]+=f[1],e}function Ct(e=q8){return[e[0],e[1],e[2],e[3]]}function yx(e,t){return e!==t&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3]),e}function Tee(e,t,r,i,s=Ct()){return s[0]=e,s[1]=t,s[2]=r,s[3]=i,s}function $ee(e,t=Ct()){return t[0]=e.xmin,t[1]=e.ymin,t[2]=e.xmax,t[3]=e.ymax,t}function V8(e,t,r=new Le){return r.xmin=e[0],r.ymin=e[1],r.xmax=e[2],r.ymax=e[3],r.spatialReference=t,r}function Eee(e,t){t[0]<e[0]&&(e[0]=t[0]),t[0]>e[2]&&(e[2]=t[0]),t[1]<e[1]&&(e[1]=t[1]),t[1]>e[3]&&(e[3]=t[1])}function Mee(e,t,r){if(t!=null)if("length"in t)Bg(t)?(r[0]=Math.min(e[0],t[0]),r[1]=Math.min(e[1],t[1]),r[2]=Math.max(e[2],t[2]),r[3]=Math.max(e[3],t[3])):t.length!==2&&t.length!==3||(r[0]=Math.min(e[0],t[0]),r[1]=Math.min(e[1],t[1]),r[2]=Math.max(e[2],t[0]),r[3]=Math.max(e[3],t[1]));else switch(t.type){case"extent":r[0]=Math.min(e[0],t.xmin),r[1]=Math.min(e[1],t.ymin),r[2]=Math.max(e[2],t.xmax),r[3]=Math.max(e[3],t.ymax);break;case"point":r[0]=Math.min(e[0],t.x),r[1]=Math.min(e[1],t.y),r[2]=Math.max(e[2],t.x),r[3]=Math.max(e[3],t.y)}else yx(r,e)}function xee(e,t,r=e){const i=t.length;let s=e[0],n=e[1],o=e[2],a=e[3];for(let l=0;l<i;l++){const h=t[l];s=Math.min(s,h[0]),n=Math.min(n,h[1]),o=Math.max(o,h[0]),a=Math.max(a,h[1])}return r[0]=s,r[1]=n,r[2]=o,r[3]=a,r}function Aee(e){for(let t=0;t<4;t++)if(!isFinite(e[t]))return!1;return!0}function rv(e){return e==null||e[0]>=e[2]?0:e[2]-e[0]}function iv(e){return e==null||e[1]>=e[3]?0:e[3]-e[1]}function Pee(e){return rv(e)*iv(e)}function Oee(e,t=[0,0]){return t[0]=(e[0]+e[2])/2,t[1]=(e[1]+e[3])/2,t}function Cee(e){const t=rv(e),r=iv(e);return Math.sqrt(t*t+r*r)}function Iee(e,t){return B8(e,t.x,t.y)}function B8(e,t,r){return t>=e[0]&&r>=e[1]&&t<=e[2]&&r<=e[3]}function Ree(e,t){return Math.max(t[0],e[0])<=Math.min(t[2],e[2])&&Math.max(t[1],e[1])<=Math.min(t[3],e[3])}function kee(e,t,r){return Math.max(t[0],e[0])-r<=Math.min(t[2],e[2])&&Math.max(t[1],e[1])-r<=Math.min(t[3],e[3])}function H8(e,t){return t[0]>=e[0]&&t[2]<=e[2]&&t[1]>=e[1]&&t[3]<=e[3]}function Nee(e,t,r,i=e){return i[0]=e[0]+t,i[1]=e[1]+r,i[2]=e[2]+t,i[3]=e[3]+r,i}function Lee(e){return e?yx(e,u2):Ct(u2)}function Bg(e){return e!=null&&e.length===4}function Dee(e,t){return Bg(e)&&Bg(t)?e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]:e===t}const u2=[1/0,1/0,-1/0,-1/0],q8=[0,0,0,0];function gx(e){return e.xmin!==void 0&&e.ymin!==void 0&&e.xmax!==void 0&&e.ymax!==void 0}function _x(e){return e.points!==void 0}function vx(e){return e.x!==void 0&&e.y!==void 0}function wx(e){return e.paths!==void 0}function bx(e){return e.rings!==void 0}function Sx(e){function t(r,i){return r==null?i:i==null?r:e(r,i)}return t}const nn=Sx(Math.min),on=Sx(Math.max);function Fee(e,t){return wx(t)?dl(e,t.paths,!1,!1):bx(t)?dl(e,t.rings,!1,!1):_x(t)?sv(e,t.points,!1,!1,!1,!1):gx(t)?Tx(e,t):(vx(t)&&(e[0]=t.x,e[1]=t.y,e[2]=t.x,e[3]=t.y),e)}function Uee(e){let t,r,i,s;for(e.reset(),t=i=1/0,r=s=-1/0;e.nextPath();){const n=W8(e);t=Math.min(n[0],t),i=Math.min(n[1],i),r=Math.max(n[2],r),s=Math.max(n[3],s)}return Ct([t,i,r,s])}function W8(e){let t,r,i,s;for(t=i=1/0,r=s=-1/0;e.nextPoint();)t=Math.min(e.x,t),i=Math.min(e.y,i),r=Math.max(e.x,r),s=Math.max(e.y,s);return Ct([t,i,r,s])}function jee(e,t){return wx(t)?dl(e,t.paths,!0,!1):bx(t)?dl(e,t.rings,!0,!1):_x(t)?sv(e,t.points,!0,!1,!0,!1):gx(t)?Tx(e,t,!0,!1,!0,!1):(vx(t)&&(e[0]=t.x,e[1]=t.y,e[2]=t.z,e[3]=t.x,e[4]=t.y,e[5]=t.z),e)}function dl(e,t,r,i){const s=r?3:2;if(!t.length||!t[0].length)return null;let n,o,a,l,[h,p]=t[0][0],[f,m]=t[0][0];for(let y=0;y<t.length;y++){const _=t[y];for(let v=0;v<_.length;v++){const w=_[v],[b,M]=w;if(h=nn(h,b),p=nn(p,M),f=on(f,b),m=on(m,M),r&&w.length>2){const $=w[2];n=nn(n,$),o=on(o,$)}if(i&&w.length>s){const $=w[s];a=nn(n,$),l=on(o,$)}}}return r?i?(e[0]=h,e[1]=p,e[2]=n,e[3]=a,e[4]=f,e[5]=m,e[6]=o,e[7]=l,e.length=8,e):(e[0]=h,e[1]=p,e[2]=n,e[3]=f,e[4]=m,e[5]=o,e.length=6,e):i?(e[0]=h,e[1]=p,e[2]=a,e[3]=f,e[4]=m,e[5]=l,e.length=6,e):(e[0]=h,e[1]=p,e[2]=f,e[3]=m,e.length=4,e)}function Tx(e,t,r,i,s,n){const o=t.xmin,a=t.xmax,l=t.ymin,h=t.ymax;let p=t.zmin,f=t.zmax,m=t.mmin,y=t.mmax;return s?(p=p||0,f=f||0,n?(m=m||0,y=y||0,e[0]=o,e[1]=l,e[2]=p,e[3]=m,e[4]=a,e[5]=h,e[6]=f,e[7]=y,e):(e[0]=o,e[1]=l,e[2]=p,e[3]=a,e[4]=h,e[5]=f,e)):n?(m=m||0,y=y||0,e[0]=o,e[1]=l,e[2]=m,e[3]=a,e[4]=h,e[5]=y,e):(e[0]=o,e[1]=l,e[2]=a,e[3]=h,e)}function sv(e,t,r,i,s,n){const o=r?3:2,a=i&&n,l=r&&s;if(!t.length||!t[0].length)return null;let h,p,f,m,[y,_]=t[0],[v,w]=t[0];for(let b=0;b<t.length;b++){const M=t[b],[$,E]=M;if(y=nn(y,$),_=nn(_,E),v=on(v,$),w=on(w,E),l&&M.length>2){const P=M[2];h=nn(h,P),p=on(p,P)}if(a&&M.length>o){const P=M[o];f=nn(h,P),m=on(p,P)}}return s?(h=h||0,p=p||0,n?(f=f||0,m=m||0,e[0]=y,e[1]=_,e[2]=h,e[3]=f,e[4]=v,e[5]=w,e[6]=p,e[7]=m,e):(e[0]=y,e[1]=_,e[2]=h,e[3]=v,e[4]=w,e[5]=p,e)):n?(f=f||0,m=m||0,e[0]=y,e[1]=_,e[2]=f,e[3]=v,e[4]=w,e[5]=m,e):(e[0]=y,e[1]=_,e[2]=v,e[3]=w,e)}function Z8(e){return e.xmin!==void 0&&e.ymin!==void 0&&e.xmax!==void 0&&e.ymax!==void 0}function J8(e){return e.points!==void 0}function Y8(e){return e.x!==void 0&&e.y!==void 0}function K8(e){return e.paths!==void 0}function X8(e){return e.rings!==void 0}const nv=[];function $x(e,t,r,i){return{xmin:e,ymin:t,xmax:r,ymax:i}}function Ex(e,t,r,i,s,n){return{xmin:e,ymin:t,zmin:r,xmax:i,ymax:s,zmax:n}}function Mx(e,t,r,i,s,n){return{xmin:e,ymin:t,mmin:r,xmax:i,ymax:s,mmax:n}}function xx(e,t,r,i,s,n,o,a){return{xmin:e,ymin:t,zmin:r,mmin:i,xmax:s,ymax:n,zmax:o,mmax:a}}function ov(e,t=!1,r=!1){return t?r?xx(e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7]):Ex(e[0],e[1],e[2],e[3],e[4],e[5]):r?Mx(e[0],e[1],e[2],e[3],e[4],e[5]):$x(e[0],e[1],e[2],e[3])}function Gee(e){return e?Z8(e)?e:Y8(e)?e9(e):X8(e)?Ax(e):K8(e)?Px(e):J8(e)?Q8(e):null:null}function Q8(e){const{hasZ:t,hasM:r,points:i}=e;return ov(sv(nv,i,t??!1,r??!1),t,r)}function e9(e){const{x:t,y:r,z:i,m:s}=e,n=s!=null;return i!=null?n?xx(t,r,i,s,t,r,i,s):Ex(t,r,i,t,r,i):n?Mx(t,r,s,t,r,s):$x(t,r,t,r)}function Ax(e){const{hasZ:t,hasM:r,rings:i}=e,s=dl(nv,i,t??!1,r??!1);return s?ov(s,t,r):null}function Px(e){const{hasZ:t,hasM:r,paths:i}=e,s=dl(nv,i,t??!1,r??!1);return s?ov(s,t,r):null}var Ed;function c2(e){return!Array.isArray(e[0])}function t9(e){var t;return typeof((t=e[0])==null?void 0:t[0])=="number"}function r9(e){var n,o;if(!e)return;let{rings:t,hasM:r,hasZ:i,spatialReference:s}=e;switch(t??(t=[]),t9(t)&&(t=[t]),(o=(n=t[0])==null?void 0:n[0])==null?void 0:o.length){case 4:i??(i=!0),r??(r=!0);break;case 3:i??(i=r!==!0),r??(r=!i);break;default:i??(i=!1),r??(r=!1)}return s??(s=ae.WGS84),{...e,hasM:r,hasZ:i,rings:t,spatialReference:s}}let vr=Ed=class extends ys{static fromExtent(e){const t=e.clone().normalize(),{spatialReference:r}=e;let i=!1,s=!1;for(const o of t)o.hasZ&&(i=!0),o.hasM&&(s=!0);const n={rings:t.map(o=>{const a=[[o.xmin,o.ymin],[o.xmin,o.ymax],[o.xmax,o.ymax],[o.xmax,o.ymin],[o.xmin,o.ymin]];if(i&&o.hasZ){const l=o.zmin+.5*(o.zmax-o.zmin);for(let h=0;h<a.length;h++)a[h].push(l)}if(s&&o.hasM){const l=o.mmin+.5*(o.mmax-o.mmin);for(let h=0;h<a.length;h++)a[h].push(l)}return a}),spatialReference:r};return i&&(n.hasZ=!0),s&&(n.hasM=!0),new Ed(n)}constructor(e){super(r9(e)),this.curveRings=void 0,this.rings=[],this.type="polygon"}get cache(){return this.commitProperty("curveRings"),this.commitProperty("hasM"),this.commitProperty("hasZ"),this.commitProperty("rings"),this.commitProperty("spatialReference"),{}}get centroid(){const e=N8(this);if(!e||isNaN(e[0])||isNaN(e[1])||this.hasZ&&isNaN(e[2]))return null;const t=new te;return t.x=e[0],t.y=e[1],t.spatialReference=this.spatialReference,this.hasZ&&(t.z=e[2]),t}writeCurveRings(e,t){t.curveRings=C(e)}get extent(){const e=Ax(this),{spatialReference:t}=this;return e?new Le({...e,spatialReference:t}):null}get isSelfIntersecting(){return YL(this.rings)}writeRings(e,t){t.rings=C(this.rings)}addRing(e){if(!e)return;const t=this.rings,r=t.length;if(c2(e)){const i=[];for(let s=0,n=e.length;s<n;s++)i[s]=e[s].toArray();t[r]=i}else t[r]=e.slice();return this.notifyChange("rings"),this}clone(){const e=new Ed;return e.spatialReference=this.spatialReference,e.rings=C(this.rings),e.curveRings=C(this.curveRings),e.hasZ=this.hasZ,e.hasM=this.hasM,e}equals(e){if(this===e)return!0;if(e==null)return!1;const t=this.spatialReference,r=e.spatialReference;if(t!=null!=(r!=null)||t!=null&&r!=null&&!t.equals(r)||this.rings.length!==e.rings.length)return!1;const i=([s,n,o,a],[l,h,p,f])=>s===l&&n===h&&(o==null&&p==null||o===p)&&(a==null&&f==null||a===f);for(let s=0;s<this.rings.length;s++){const n=this.rings[s],o=e.rings[s];if(!yf(n,o,i))return!1}return!0}contains(e){if(!e)return!1;const t=Nf(e,this.spatialReference);return k_(this,t??e)}isClockwise(e){const t=c2(e)?e.map(r=>this.hasZ?this.hasM?[r.x,r.y,r.z,r.m]:[r.x,r.y,r.z]:[r.x,r.y]):e;return px(t)}getPoint(e,t){if(!this._validateInputs(e,t))return null;const r=this.rings[e][t],i=this.hasZ,s=this.hasM;return i&&!s?new te(r[0],r[1],r[2],void 0,this.spatialReference):s&&!i?new te(r[0],r[1],void 0,r[2],this.spatialReference):i&&s?new te(r[0],r[1],r[2],r[3],this.spatialReference):new te(r[0],r[1],this.spatialReference)}insertPoint(e,t,r){return this._validateInputs(e,t,!0)?(hl(this,r),Array.isArray(r)||(r=r.toArray()),this.rings[e].splice(t,0,r),this.notifyChange("rings"),this):this}removePoint(e,t){if(!this._validateInputs(e,t))return null;const r=new te(this.rings[e].splice(t,1)[0],this.spatialReference);return this.notifyChange("rings"),r}removeRing(e){if(!this._validateInputs(e,null))return null;const t=this.rings.splice(e,1)[0],r=this.spatialReference,i=t.map(s=>new te(s,r));return this.notifyChange("rings"),i}setPoint(e,t,r){return this._validateInputs(e,t)?(hl(this,r),Array.isArray(r)||(r=r.toArray()),this.rings[e][t]=r,this.notifyChange("rings"),this):this}_validateInputs(e,t,r=!1){if(e==null||e<0||e>=this.rings.length)return!1;if(t!=null){const i=this.rings[e];if(r&&(t<0||t>i.length)||!r&&(t<0||t>=i.length))return!1}return!0}toJSON(e){return this.write({},e)}};c([d({readOnly:!0})],vr.prototype,"cache",null),c([d({readOnly:!0})],vr.prototype,"centroid",null),c([d({json:{write:!0,origins:{"portal-item":{write:!1},"web-map":{write:!1},"web-scene":{write:!1}}}})],vr.prototype,"curveRings",void 0),c([oe("curveRings")],vr.prototype,"writeCurveRings",null),c([d({readOnly:!0})],vr.prototype,"extent",null),c([d({readOnly:!0})],vr.prototype,"isSelfIntersecting",null),c([d({type:[[[Number]]],json:{write:{isRequired:!0}}})],vr.prototype,"rings",void 0),c([oe("rings")],vr.prototype,"writeRings",null),vr=Ed=c([S("esri.geometry.Polygon")],vr);const Oi=vr;vr.prototype.toJSON.isDefaultToJSON=!0;var Hg;function i9(e){return!Array.isArray(e[0])}function s9(e){var t;return typeof((t=e[0])==null?void 0:t[0])=="number"}function n9(e){var n,o;if(!e)return;let{paths:t,hasM:r,hasZ:i,spatialReference:s}=e;switch(t??(t=[]),s9(t)&&(t=[t]),(o=(n=t[0])==null?void 0:n[0])==null?void 0:o.length){case 4:i??(i=!0),r??(r=!0);break;case 3:i??(i=r!==!0),r??(r=!i);break;default:i??(i=!1),r??(r=!1)}return s??(s=ae.WGS84),{...e,hasM:r,hasZ:i,paths:t,spatialReference:s}}let vi=Hg=class extends ys{constructor(e){super(n9(e)),this.curvePaths=void 0,this.paths=[],this.type="polyline"}get cache(){return this.commitProperty("curvePaths"),this.commitProperty("hasM"),this.commitProperty("hasZ"),this.commitProperty("paths"),this.commitProperty("spatialReference"),{}}writeCurvePaths(e,t){t.curvePaths=C(e)}get extent(){const e=Px(this),{spatialReference:t}=this;return e?new Le({...e,spatialReference:t}):null}writePaths(e,t){t.paths=C(this.paths)}addPath(e){if(!e)return;const t=this.paths,r=t.length;if(i9(e)){const i=[];for(let s=0,n=e.length;s<n;s++)i[s]=e[s].toArray();t[r]=i}else t[r]=e.slice();return this.notifyChange("paths"),this}clone(){const e=new Hg;return e.spatialReference=this.spatialReference,e.paths=C(this.paths),e.curvePaths=C(this.curvePaths),e.hasZ=this.hasZ,e.hasM=this.hasM,e}getPoint(e,t){if(!this._validateInputs(e,t))return null;const r=this.paths[e][t],i=this.hasZ,s=this.hasM;return i&&!s?new te(r[0],r[1],r[2],void 0,this.spatialReference):s&&!i?new te(r[0],r[1],void 0,r[2],this.spatialReference):i&&s?new te(r[0],r[1],r[2],r[3],this.spatialReference):new te(r[0],r[1],this.spatialReference)}insertPoint(e,t,r){return this._validateInputs(e,t,!0)?(hl(this,r),Array.isArray(r)||(r=r.toArray()),this.paths[e].splice(t,0,r),this.notifyChange("paths"),this):this}removePath(e){if(!this._validateInputs(e,null))return null;const t=this.paths.splice(e,1)[0],r=this.spatialReference,i=t.map(s=>new te(s,r));return this.notifyChange("paths"),i}removePoint(e,t){if(!this._validateInputs(e,t))return null;const r=new te(this.paths[e].splice(t,1)[0],this.spatialReference);return this.notifyChange("paths"),r}setPoint(e,t,r){return this._validateInputs(e,t)?(hl(this,r),Array.isArray(r)||(r=r.toArray()),this.paths[e][t]=r,this.notifyChange("paths"),this):this}_validateInputs(e,t,r=!1){if(e==null||e<0||e>=this.paths.length)return!1;if(t!=null){const i=this.paths[e];if(r&&(t<0||t>i.length)||!r&&(t<0||t>=i.length))return!1}return!0}toJSON(e){return this.write({},e)}};c([d({readOnly:!0})],vi.prototype,"cache",null),c([d({json:{write:!0,origins:{"portal-item":{write:!1},"web-map":{write:!1},"web-scene":{write:!1}}}})],vi.prototype,"curvePaths",void 0),c([oe("curvePaths")],vi.prototype,"writeCurvePaths",null),c([d({readOnly:!0})],vi.prototype,"extent",null),c([d({type:[[[Number]]],json:{write:{isRequired:!0}}})],vi.prototype,"paths",void 0),c([oe("paths")],vi.prototype,"writePaths",null),vi=Hg=c([S("esri.geometry.Polyline")],vi);const Xr=vi;vi.prototype.toJSON.isDefaultToJSON=!0;function Ox(e){return e.xmin!==void 0&&e.ymin!==void 0&&e.xmax!==void 0&&e.ymax!==void 0}function Cx(e){return e.points!==void 0}function Ix(e){return e.x!==void 0&&e.y!==void 0}function Rx(e){return e.paths!==void 0||e.curvePaths!==void 0}function av(e){return e.rings!==void 0||e.curveRings!==void 0}function pl(e){return e==null?null:e instanceof ys?e:Ix(e)?te.fromJSON(e):Rx(e)?Xr.fromJSON(e):av(e)?Oi.fromJSON(e):Cx(e)?qf.fromJSON(e):Ox(e)?Le.fromJSON(e):null}function lv(e){return e?Ix(e)?"esriGeometryPoint":Rx(e)?"esriGeometryPolyline":av(e)?"esriGeometryPolygon":Ox(e)?"esriGeometryEnvelope":Cx(e)?"esriGeometryMultipoint":null:null}const o9={esriGeometryPoint:te,esriGeometryPolyline:Xr,esriGeometryPolygon:Oi,esriGeometryEnvelope:Le,esriGeometryMultipoint:qf,esriGeometryMultiPatch:Oi};function a9(e){return e&&o9[e]||null}const l9=qt()({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon"}),zee=qt()({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryEnvelope:"extent",mesh:"mesh"}),uv={base:ys,key:"type",typeMap:{extent:Le,multipoint:qf,point:te,polyline:Xr,polygon:Oi}};var qg;let Cs=qg=class extends j{constructor(e){super(e),this.rotation=0,this.scale=0,this.targetGeometry=null,this.camera=null}castRotation(e){return(e%=360)<0&&(e+=360),e}clone(){return new qg({rotation:this.rotation,scale:this.scale,targetGeometry:this.targetGeometry!=null?this.targetGeometry.clone():null,camera:this.camera!=null?this.camera.clone():null})}};c([d({type:Number,json:{write:!0,origins:{"web-map":{default:0,write:!0},"web-scene":{write:{overridePolicy:Ym}}}}})],Cs.prototype,"rotation",void 0),c([tt("rotation")],Cs.prototype,"castRotation",null),c([d({type:Number,json:{write:!0,origins:{"web-map":{default:0,write:!0},"web-scene":{write:{overridePolicy:Ym}}}}})],Cs.prototype,"scale",void 0),c([d({types:uv,json:{read:pl,write:!0,origins:{"web-scene":{read:pl,write:{overridePolicy:Ym}}}}})],Cs.prototype,"targetGeometry",void 0),c([d({type:M8,json:{write:!0,origins:{"web-scene":{write:{isRequired:!0}}}}})],Cs.prototype,"camera",void 0),Cs=qg=c([S("esri.Viewpoint")],Cs);const Ar=Cs;function Ym(){return{enabled:!this.camera}}let zp=class{constructor(t=r=>r.values().next().value){this._peeker=t,this._observable=new Qc,this._items=new Set}get length(){return Z(this._observable),this._items.size}clear(){this.length!==0&&(this._items.clear(),this._observable.notify())}last(){if(this.length===0)return;let t;for(t of this._items);return t}peek(){if(this.length!==0)return this._peeker(this._items)}push(t){this.contains(t)||(this._items.add(t),this._observable.notify())}contains(t){return Z(this._observable),this._items.has(t)}pop(){if(this.length===0)return;const t=this.peek();return this._items.delete(t),this._observable.notify(),t}popLast(){if(this.length===0)return;const t=this.last();return this._items.delete(t),this._observable.notify(),t}remove(t){this.contains(t)&&(this._items.delete(t),this._observable.notify())}filter(t){const r=this.length;return this._items.forEach(i=>{t(i)||this._items.delete(i)}),r!==this._items.size&&this._observable.notify(),this}*[Symbol.iterator](){Z(this._observable),yield*this._items}};const kx=new FinalizationRegistry(e=>{e.close()});function u9(e,t){kx.register(e,t,t)}function c9(e){kx.unregister(e)}function Nx(e,t){return new Proxy({},{get:(r,i,s)=>(...n)=>{let o,a;const l=n[n.length-1];return h9(l)&&(o=l.signal,a=l.transferList,n.pop()),e.apply(t?`${t}.${i.toString()}`:i.toString(),n,{transferList:a,signal:o})}})}function h9(e){return typeof e=="object"&&!Array.isArray(e)&&e!=null&&("signal"in e||"transferList"in e||Object.keys(e).length===0)}const d9={statsWorker:()=>N(()=>import("./statsWorker-DZy4w7dY.js"),__vite__mapDeps([30,31,32,33,34,35,36,37,38])),geometryEngineWorker:()=>N(()=>import("./geometryEngineWorker-CA-tZxOm.js"),__vite__mapDeps([39,40,41,3,42])),arcadeGeometryOperatorsWorker:()=>N(()=>import("./operatorsWorker-H75ESdjY.js"),[]),CSVSourceWorker:()=>N(()=>import("./CSVSourceWorker-1_0-5O51.js"),__vite__mapDeps([43,44,42,45,12,46,47,48,49,50,51,10,11,52,53,54,55,32,31,33,34,35,36,37,38,56,57,58,59,60,61,62,63,64,65,66])),EdgeProcessingWorker:()=>N(()=>import("./EdgeProcessingWorker-DSVp5f8J.js"),__vite__mapDeps([67,68,69,70,34,71,35,72,73,74,75,76,77,78])),ElevationSamplerWorker:()=>N(()=>import("./ElevationSamplerWorker-CEAenzmf.js"),__vite__mapDeps([79,62,80,81,82,83,84,85,86,87,88,70,34,89])),FeatureServiceSnappingSourceWorker:()=>N(()=>import("./FeatureServiceSnappingSourceWorker-CD_tfSmU.js"),__vite__mapDeps([90,46,47,42,48,49,45,12,50,51,10,11,52,53,54,55,32,31,33,34,35,36,37,38,56,57,58,59,60,61,62,63,17,18,91,92,93,94,95,9])),GeoJSONSourceWorker:()=>N(()=>import("./GeoJSONSourceWorker-CiHdtG-6.js"),__vite__mapDeps([96,49,45,12,50,46,47,42,48,51,10,11,52,53,54,55,32,31,33,34,35,36,37,38,56,57,58,59,60,61,62,63,97,44,65,66,98])),LercWorker:()=>N(()=>import("./LercWorker-uyjDCEDd.js"),[]),MemorySourceWorker:()=>N(()=>import("./MemorySourceWorker-Xd1hIVF-.js"),__vite__mapDeps([99,49,45,12,50,100,46,47,42,48,51,10,11,52,53,54,55,32,31,33,34,35,36,37,38,56,57,58,59,60,61,62,63,65,66,98,44])),PBFDecoderWorker:()=>N(()=>import("./PBFDecoderWorker-Dc9ev5FS.js"),__vite__mapDeps([101,102,12,49,45,50,92,93])),FeaturePipelineWorker:()=>N(()=>import("./FeaturePipelineWorker-DeVKkpo9.js"),__vite__mapDeps([103,104,105,106,107,77,108,109,45,12,110,111,112,113,114,115,66,116,59,47,42,54,49,50,53,32,117,118,119,120,121,122,123,124,125,63,48,51,10,11,52,55,31,33,34,35,36,37,38,56,57,58,126,127,128,129,94,92,93,95,130,131,97,44,65,98,132,133,134])),PointCloudWorker:()=>N(()=>import("./PointCloudWorker-7nXkkrWs.js"),__vite__mapDeps([135,136,82,137,34,138,139,140,141,142,75,143,83,35,84,85,144])),RasterWorker:()=>N(()=>import("./RasterWorker-BDsGdmZ4.js"),__vite__mapDeps([145,146,147,3,148,34,35,149,150,151,152])),SceneLayerSnappingSourceWorker:()=>N(()=>import("./SceneLayerSnappingSourceWorker-BsIdEEYq.js"),__vite__mapDeps([153,154,155,34,35,82,144,83,137,156,69,70,71,72,73,74,75,76,77,78])),SceneLayerWorker:()=>N(()=>import("./SceneLayerWorker-CzgW0U9C.js"),__vite__mapDeps([157,80,88,158,86,35,155,34,82,144,83,137,159,142,75,160,113,161,162,163,164,143,136,84,85])),WFSSourceWorker:()=>N(()=>import("./WFSSourceWorker-DoZK4qm1.js"),__vite__mapDeps([165,49,45,12,50,46,47,42,48,51,10,11,52,53,54,55,32,31,33,34,35,36,37,38,56,57,58,59,60,61,62,63,97,44,98,166,167])),WorkerTileHandler:()=>N(()=>import("./WorkerTileHandler-BeBl21Ab.js"),__vite__mapDeps([168,169,110,114,170,171,105,93,12,121,172,173,77,148,34,35,123,109])),Lyr3DWorker:()=>N(()=>import("./Lyr3DWorker-CEng2Jfo.js"),[]),Feature3DPipelineWorker:()=>N(()=>import("./Feature3DPipelineWorker-BjQCw2qy.js"),__vite__mapDeps([174,48,49,45,12,50,51,10,11,52,53,54,47,42,55,32,31,33,34,35,36,37,38,56,57,58,59,62,94,92,93,95,74,175,176,177,178,163,83,164,162,82,75,18,179,155,144,137,154,143,136,84,85,180,181,69,70,71,182,76,77,183,156,184,113,185,186,87,80,158,86,187,138,188,189,190,161,191])),TextureCompressionWorker:()=>N(()=>import("./TextureCompressionWorker-BznTc5Jv.js"),__vite__mapDeps([192,181]))},Lx="worker:port-closed";var at;(function(e){e[e.HANDSHAKE=0]="HANDSHAKE",e[e.OPEN=1]="OPEN",e[e.OPENED=2]="OPENED",e[e.RESPONSE=3]="RESPONSE",e[e.INVOKE=4]="INVOKE",e[e.ABORT=5]="ABORT",e[e.CLOSE=6]="CLOSE",e[e.OPEN_PORT=7]="OPEN_PORT",e[e.ON=8]="ON"})(at||(at={}));let p9=0;function Dx(){return p9++}function f9(e){return e&&typeof e=="object"&&("result"in e||"transferList"in e)}function Pc(e){return e?typeof e=="string"?JSON.stringify({name:"message",message:e}):e.toJSON?JSON.stringify(e):JSON.stringify({name:e.name,message:e.message,details:e.details||{stack:e.stack}}):null}function cv(e,t,r,i){if(t.type===at.OPEN_PORT)return void e.postMessage(t,[t.port]);if(t.type!==at.INVOKE&&t.type!==at.RESPONSE)return void e.postMessage(t);let s;if(f9(r)?(s=h2(r.transferList),t.data=r.result):(s=h2(i),t.data=r),s){if(A("ff")){for(const n of s)if("byteLength"in n&&n.byteLength>267386880){const o="Worker call with large ArrayBuffer would crash Firefox";switch(t.type){case at.INVOKE:throw o;case at.RESPONSE:return void cv(e,{type:at.RESPONSE,jobId:t.jobId,error:Pc(o)})}}}e.postMessage(t,s)}else e.postMessage(t)}function Oc(e){if(!e)return null;const t=e.data;return t?typeof t=="string"?JSON.parse(t):t:null}function h2(e){if(!(e!=null&&e.length))return null;if(A("esri-workers-arraybuffer-transfer"))return e;const t=e.filter(r=>!m9(r));return t.length?t:null}function m9(e){var t;return e instanceof ArrayBuffer||((t=e==null?void 0:e.constructor)==null?void 0:t.name)==="ArrayBuffer"}async function Bee(e){try{return await e}catch(t){const r=(t==null?void 0:t.name)===Lx;if(!(Ht(t)||r))throw t;return}}const{CLOSE:d2,ABORT:p2,INVOKE:f2,RESPONSE:jl,OPEN_PORT:m2,ON:y9}=at,g9=2;let _9=class{constructor(t){this._invoke=t,this._timer=null,this._cancelledJobIds=new Set,this._invokeMessages=[],this._timer=null,this._process=this._process.bind(this)}push(t){t.type===at.ABORT?this._cancelledJobIds.add(t.jobId):(this._invokeMessages.push(t),this._timer===null&&(this._timer=setTimeout(this._process,0)))}clear(){this._invokeMessages.length=0,this._cancelledJobIds.clear(),this._timer=null}_process(){this._timer=null;for(const t of this._invokeMessages)this._cancelledJobIds.has(t.jobId)||this._invoke(t);this._cancelledJobIds.clear(),this._invokeMessages.length=0}},bn=class ca{static connect(t,r){const i=new MessageChannel;let s;s=typeof t=="function"?new t:"default"in t&&typeof t.default=="function"?new t.default:t;const n=new ca(i.port1,{channel:i,client:s,schedule:r});return typeof s=="object"&&"remoteClient"in s&&(s.remoteClient=n),ca.clients.set(n,s),i.port2}static loadWorker(t){const r=d9[t];return r?r():Promise.resolve(null)}constructor(t,r,i){this._port=t,this._jobQueue=i,this._outJobs=new Map,this._inJobs=new Map,this._invokeQueue=new _9(s=>this._onInvokeMessage(s)),this._client=r.client,this._onMessage=this._onMessage.bind(this),this._channel=r.channel,this._schedule=r.schedule,this._port.addEventListener("message",this._onMessage),this._port.start()}close(){this._post({type:d2}),this._close()}isBusy(){return this._outJobs.size>0}invoke(t,r,i){return this.apply(t,[r],i)}apply(t,r,i){const s=i==null?void 0:i.signal,n=i==null?void 0:i.transferList;if(!this._port)return Promise.reject(new I(Lx,`Cannot call invoke('${t}'), port is closed`,{methodName:t,data:r}));const o=Dx();return new Promise((a,l)=>{if(lr(s))return this._processWork(),void l($e());const h=xr(s,()=>{const f=this._outJobs.get(o);f&&(this._outJobs.delete(o),this._processWork(),Ce(f.abortHandle),this._post({type:p2,jobId:o}),l($e()))}),p={resolve:a,reject:l,abortHandle:h,debugInfo:t};this._outJobs.set(o,p),this._post({type:f2,jobId:o,methodName:t,abortable:s!=null},r,n)})}createInvokeProxy(t){return Nx(this,t)}on(t,r){const i=new MessageChannel;function s(n){r(n.data)}return this._port.postMessage({type:at.ON,eventType:t,port:i.port2},[i.port2]),i.port1.addEventListener("message",s),i.port1.start(),ue(()=>{i.port1.postMessage({type:at.CLOSE}),i.port1.close(),i.port1.removeEventListener("message",s)})}jobAdded(){this._processWork()}openPort(){const t=new MessageChannel;return this._post({type:m2,port:t.port2}),t.port1}_processWork(){var o;if(this._outJobs.size>=g9)return;const t=(o=this._jobQueue)==null?void 0:o.pop();if(!t)return;const{methodName:r,data:i,invokeOptions:s,resolver:n}=t;this.apply(r,i,s).then(a=>n.resolve(a)).catch(a=>n.reject(a))}_close(){this._channel&&(this._channel=void 0),this._port.removeEventListener("message",this._onMessage),this._port.close(),this._outJobs.forEach(t=>{Ce(t.abortHandle),t.reject($e(`Worker closing, aborting job calling '${t.debugInfo}'`))}),this._inJobs.clear(),this._outJobs.clear(),this._invokeQueue.clear(),this._port=null,this._client=null,this._schedule=null}_onMessage(t){this._schedule!=null?this._schedule(()=>this._processMessage(t,!0)):this._processMessage(t,!1)}_processMessage(t,r){const i=Oc(t);if(i)switch(i.type){case jl:this._onResponseMessage(i);break;case f2:r?this._onInvokeMessage(i):this._invokeQueue.push(i);break;case p2:this._onAbortMessage(i);break;case d2:this._onCloseMessage();break;case m2:this._onOpenPortMessage(i);break;case y9:this._onOnMessage(i)}}_onAbortMessage(t){const r=this._inJobs,i=t.jobId,s=r.get(i);this._invokeQueue.push(t),s&&(s.controller&&s.controller.abort(),r.delete(i))}_onCloseMessage(){const t=this._client;this._close(),t&&"destroy"in t&&ca.clients.get(this)===t&&t.destroy(),ca.clients.delete(this),t!=null&&t.remoteClient&&(t.remoteClient=null)}_onInvokeMessage(t){const{methodName:r,jobId:i,data:s=[],abortable:n}=t,o=n?new AbortController:null,a=this._inJobs;let l,h=this._client,p=h[r];try{if(!p&&r&&r.includes(".")){const f=r.split(".");for(let m=0;m<f.length-1;m++)h=h[f[m]],p=h[f[m+1]]}if(typeof p!="function")throw new TypeError(`${r} is not a function`);s.push({client:this,signal:o?o.signal:null}),l=p.apply(h,s)}catch(f){return void this._post({type:jl,jobId:i,error:Pc(f)})}Ri(l)?(a.set(i,{controller:o,promise:l}),l.then(f=>{a.has(i)&&(a.delete(i),this._post({type:jl,jobId:i},f))},f=>{a.has(i)&&(a.delete(i),Ht(f)||this._post({type:jl,jobId:i,error:Pc(f||{message:`Error encountered at method ${r}`})}))})):this._post({type:jl,jobId:i},l)}_onOpenPortMessage(t){new ca(t.port,{client:this._client})}_onOnMessage(t){const{port:r}=t,i=this._client.on(t.eventType,n=>{r.postMessage(n)}),s=Jc(t.port,"message",n=>{const o=Oc(n);(o==null?void 0:o.type)===at.CLOSE&&(s.remove(),i.remove(),r.close())})}_onResponseMessage(t){const{jobId:r,error:i,data:s}=t,n=this._outJobs;if(!n.has(r))return;const o=n.get(r);n.delete(r),this._processWork(),Ce(o.abortHandle),i?o.reject(I.fromJSON(JSON.parse(i))):o.resolve(s)}_post(t,r,i){return cv(this._port,t,r,i)}};bn.kernelInfo={buildDate:IE,fullVersion:S_,revision:RE},bn.clients=new Map;let v9=class{constructor(){this._inUseClients=new Array,this._clients=new Array,this._clientPromises=new Array,this._ongoingJobsQueue=new zp}destroy(){this.close()}get closed(){var t;return!((t=this._clients)!=null&&t.length)}open(t,r){return new Promise((i,s)=>{let n=!0;const o=a=>{Ve(r.signal),n&&(n=!1,a())};this._clients.length=t.length,this._clientPromises.length=t.length,this._inUseClients.length=t.length;for(let a=0;a<t.length;++a){const l=t[a];Ri(l)?this._clientPromises[a]=l.then(h=>(this._clients[a]=new bn(h,r,this._ongoingJobsQueue),o(i),this._clients[a]),()=>(o(s),null)):(this._clients[a]=new bn(l,r,this._ongoingJobsQueue),this._clientPromises[a]=Promise.resolve(this._clients[a]),o(i))}})}broadcast(t,r,i){const s=new Array(this._clientPromises.length);for(let n=0;n<this._clientPromises.length;++n){const o=this._clientPromises[n];s[n]=o.then(a=>a==null?void 0:a.invoke(t,r,i))}return s}close(){let t;for(;t=this._ongoingJobsQueue.pop();)t.resolver.reject($e(`Worker closing, aborting job calling '${t.methodName}'`));for(const r of this._clientPromises)r.then(i=>i==null?void 0:i.close());this._clients.length=0,this._clientPromises.length=0,this._inUseClients.length=0,c9(this)}invoke(t,r,i){return this.apply(t,[r],i)}apply(t,r,i){const s=Pr();this._ongoingJobsQueue.push({methodName:t,data:r,invokeOptions:i,resolver:s});for(let n=0;n<this._clientPromises.length;n++){const o=this._clients[n];o?o.jobAdded():this._clientPromises[n].then(a=>a==null?void 0:a.jobAdded())}return s.promise}createInvokeProxy(t){return Nx(this,t)}on(t,r){return Promise.all(this._clientPromises).then(()=>qc(this._clients.map(i=>i.on(t,r))))}openPorts(){return new Promise(t=>{const r=new Array(this._clientPromises.length);let i=r.length;for(let s=0;s<this._clientPromises.length;++s)this._clientPromises[s].then(n=>{n&&(r[s]=n.openPort()),--i==0&&t(r)})})}get test(){}};const w9={async request(e,t){var o,a;const r=e.options,i=r.responseType;r.signal=t==null?void 0:t.signal,r.responseType=i==="native"||i==="native-request-init"?"native-request-init":i&&["blob","json","text"].includes(i)&&((o=sg(e.url))!=null&&o.after)?i:"array-buffer";const s=await qe(e.url,r),n={data:s.data,httpStatus:s.httpStatus,ssl:s.ssl};switch((a=s.requestOptions)==null?void 0:a.responseType){case"native-request-init":return delete n.data.signal,n;case"blob":n.data=await n.data.arrayBuffer();break;case"json":n.data=new TextEncoder().encode(JSON.stringify(n.data)).buffer;break;case"text":n.data=new TextEncoder().encode(n.data).buffer}return{result:n,transferList:[n.data]}}},y2={};function b9(e){var r;const t={async:e.async,isDebug:e.isDebug,locale:e.locale,baseUrl:e.baseUrl,has:{...e.has},map:{...e.map},packages:((r=e.packages)==null?void 0:r.slice())||[],paths:{...y2.paths,...e.paths}};return e.hasOwnProperty("async")||(t.async=!0),e.hasOwnProperty("isDebug")||(t.isDebug=!1),e.baseUrl||(t.baseUrl=y2.baseUrl),t}let S9=class{constructor(){const t=document.createDocumentFragment();["addEventListener","dispatchEvent","removeEventListener"].forEach(r=>{this[r]=(...i)=>t[r](...i)})}},Md=class{constructor(){this._dispatcher=new S9,this._workerPostMessage({type:at.HANDSHAKE})}terminate(){}get onmessage(){return this._onmessageHandler}set onmessage(t){this._onmessageHandler&&this.removeEventListener("message",this._onmessageHandler),this._onmessageHandler=t,t&&this.addEventListener("message",t)}get onmessageerror(){return this._onmessageerrorHandler}set onmessageerror(t){this._onmessageerrorHandler&&this.removeEventListener("messageerror",this._onmessageerrorHandler),this._onmessageerrorHandler=t,t&&this.addEventListener("messageerror",t)}get onerror(){return this._onerrorHandler}set onerror(t){this._onerrorHandler&&this.removeEventListener("error",this._onerrorHandler),this._onerrorHandler=t,t&&this.addEventListener("error",t)}postMessage(t){fp(()=>{this._workerMessageHandler(new MessageEvent("message",{data:t}))})}dispatchEvent(t){return this._dispatcher.dispatchEvent(t)}addEventListener(t,r,i){this._dispatcher.addEventListener(t,r,i)}removeEventListener(t,r,i){this._dispatcher.removeEventListener(t,r,i)}_workerPostMessage(t){fp(()=>{this.dispatchEvent(new MessageEvent("message",{data:t}))})}async _workerMessageHandler(t){const r=Oc(t);if(r&&r.type===at.OPEN){const{modulePath:i,jobId:s}=r;let n=await bn.loadWorker(i);n||(n=await import(i));const o=bn.connect(n);this._workerPostMessage({type:at.OPENED,jobId:s,data:o})}}};const Wg=()=>F.getLogger("esri.core.workers.workerFactory"),{HANDSHAKE:T9}=at,$9='let globalId=0;const outgoing=new Map,configuration={CONFIGURATION};self.esriConfig=configuration.esriConfig;const workerPath=self.esriConfig.workers.workerPath,HANDSHAKE=0,OPEN=1,OPENED=2,RESPONSE=3,INVOKE=4,ABORT=5;function createAbortError(){const e=new Error("Aborted");return e.name="AbortError",e}function receiveMessage(e){return e&&e.data?"string"==typeof e.data?JSON.parse(e.data):e.data:null}function invokeStaticMessage(e,o,r){const t=r&&r.signal,n=globalId++;let s=null;return new Promise(((r,i)=>{if(t){if(t.aborted)return i(createAbortError());s=()=>{outgoing.get(n)&&(outgoing.delete(n),self.postMessage({type:5,jobId:n}),i(createAbortError()))},t.addEventListener("abort",s)}outgoing.set(n,{resolve:r,reject:i}),self.postMessage({type:4,jobId:n,methodName:e,abortable:null!=t,data:o})})).finally((()=>{t&&t.removeEventListener("abort",s)}))}let workerRevisionChecked=!1;function checkWorkerRevision(e){if(!workerRevisionChecked&&e.kernelInfo){workerRevisionChecked=!0;const{revision:o,fullVersion:r}=configuration.kernelInfo,{revision:t,fullVersion:n,version:s}=e.kernelInfo;esriConfig.assetsPath!==esriConfig.defaultAssetsPath&&o!==t&&console.warn(`Version mismatch detected between ArcGIS Maps SDK for JavaScript modules and assets. For more information visit https://bit.ly/3QnsuSo.\nModules version: ${r}\nAssets version: ${n??s}\nAssets path: ${esriConfig.assetsPath}`)}}function messageHandler(e){const o=receiveMessage(e);if(!o)return;const r=o.jobId;switch(o.type){case 1:let n;function t(e){const o=n.connect(e);self.postMessage({type:2,jobId:r,data:o},[o])}"function"==typeof define&&define.amd?require([workerPath],(e=>{n=e.default||e,checkWorkerRevision(n),n.loadWorker(o.modulePath).then((e=>e||new Promise((e=>{require([o.modulePath],e)})))).then(t)})):"System"in self&&"function"==typeof System.import?System.import(workerPath).then((e=>(n=e.default,checkWorkerRevision(n),n.loadWorker(o.modulePath)))).then((e=>e||System.import(o.modulePath))).then(t):esriConfig.workers.useDynamicImport?import(workerPath).then((e=>{n=e.default||e,checkWorkerRevision(n),n.loadWorker(o.modulePath).then((e=>e||import(o.modulePath))).then(t)})):(self.RemoteClient||importScripts(workerPath),n=self.RemoteClient.default||self.RemoteClient,checkWorkerRevision(n),n.loadWorker(o.modulePath).then(t));break;case 3:if(outgoing.has(r)){const s=outgoing.get(r);outgoing.delete(r),o.error?s.reject(JSON.parse(o.error)):s.resolve(o.data)}}}self.dojoConfig=configuration.loaderConfig,esriConfig.workers.loaderUrl&&(self.importScripts(esriConfig.workers.loaderUrl),"function"==typeof require&&"function"==typeof require.config&&require.config(configuration.loaderConfig)),self.addEventListener("message",messageHandler),self.postMessage({type:0});';let Nh,Lh;const g2="Failed to create Worker. Fallback to execute module in main thread";async function E9(){if(!A("esri-workers"))return _2(new Md);if(!Nh&&!Lh)try{const t=$9.split("{CONFIGURATION}").join(M9());Nh=URL.createObjectURL(new Blob([t],{type:"text/javascript"}))}catch(t){Lh=t||{}}let e;if(Nh)try{e=new Worker(Nh,{name:"esri-worker-"+x9++})}catch{Wg().warn(g2,Lh),e=new Md}else Wg().warn(g2,Lh),e=new Md;return _2(e)}async function _2(e){return new Promise(t=>{function r(s){const n=Oc(s);n&&n.type===T9&&(e.removeEventListener("message",r),e.removeEventListener("error",i),t(e))}function i(s){s.preventDefault(),e.removeEventListener("message",r),e.removeEventListener("error",i),Wg().warn("Failed to create Worker. Fallback to execute module in main thread",s),(e=new Md).addEventListener("message",r),e.addEventListener("error",i)}e.addEventListener("message",r),e.addEventListener("error",i)})}function M9(){let e;if(me.default!=null){const s={...me};delete s.default,e=JSON.parse(JSON.stringify(s))}else e=JSON.parse(JSON.stringify(me));e.assetsPath=Tr(e.assetsPath),e.defaultAssetsPath=e.defaultAssetsPath?Tr(e.defaultAssetsPath):void 0,e.request.interceptors=[],e.log.interceptors=[],e.locale=Vt(),e.has={"esri-csp-restrictions":A("esri-csp-restrictions"),"esri-2d-debug":!1,"esri-2d-update-debug":A("esri-2d-update-debug"),"esri-2d-log-updating":A("esri-2d-log-updating"),"featurelayer-pbf":A("featurelayer-pbf"),"featurelayer-fast-triangulation-enabled":A("featurelayer-fast-triangulation-enabled"),"featurelayer-simplify-thresholds":A("featurelayer-simplify-thresholds"),"featurelayer-simplify-payload-size-factors":A("featurelayer-simplify-payload-size-factors"),"featurelayer-simplify-mobile-factor":A("featurelayer-simplify-mobile-factor"),"featurelayer-query-max-depth":A("featurelayer-query-max-depth"),"featurelayer-query-pausing-enabled":A("featurelayer-query-pausing-enabled"),"featurelayer-snapshot-enabled":A("featurelayer-snapshot-enabled"),"esri-atomics":A("esri-atomics"),"esri-shared-array-buffer":A("esri-shared-array-buffer"),"esri-tiles-debug":A("esri-tiles-debug"),"esri-workers-arraybuffer-transfer":A("esri-workers-arraybuffer-transfer"),"feature-polyline-generalization-factor":A("feature-polyline-generalization-factor"),"host-webworker":1},e.workers.loaderUrl&&(e.workers.loaderUrl=Tr(e.workers.loaderUrl)),e.workers.workerPath?e.workers.workerPath=Tr(e.workers.workerPath):e.workers.workerPath=Tr(je("esri/core/workers/RemoteClient.js")),e.workers.useDynamicImport=!1;const t=me.workers.loaderConfig,r=b9({baseUrl:t==null?void 0:t.baseUrl,locale:Vt(),has:{"csp-restrictions":1,"dojo-test-sniff":0,"host-webworker":1,...t==null?void 0:t.has},map:{...t==null?void 0:t.map},paths:{...t==null?void 0:t.paths},packages:(t==null?void 0:t.packages)||[]});return JSON.stringify({esriConfig:e,loaderConfig:r,kernelInfo:{buildDate:IE,fullVersion:S_,revision:RE}})}let x9=0;const{ABORT:v2,INVOKE:A9,OPEN:P9,OPENED:O9,RESPONSE:Gl}=at;let C9=class Fx{static async create(t){const r=await E9();return new Fx(r,t)}constructor(t,r){this._outJobs=new Map,this._inJobs=new Map,this.worker=t,this.id=r,t.addEventListener("message",this._onMessage.bind(this)),t.addEventListener("error",i=>{i.preventDefault(),F.getLogger("esri.core.workers.WorkerOwner").error(i)})}terminate(){this.worker.terminate()}async open(t,r={}){const{signal:i}=r,s=Dx();return new Promise((n,o)=>{const a={resolve:n,reject:o,abortHandle:i_(i,()=>{this._outJobs.delete(s),this._post({type:v2,jobId:s})})};this._outJobs.set(s,a),this._post({type:P9,jobId:s,modulePath:t})})}_onMessage(t){const r=Oc(t);if(r)switch(r.type){case O9:this._onOpenedMessage(r);break;case Gl:this._onResponseMessage(r);break;case v2:this._onAbortMessage(r);break;case A9:this._onInvokeMessage(r)}}_onAbortMessage(t){const r=this._inJobs,i=t.jobId,s=r.get(i);s&&(s.controller&&s.controller.abort(),r.delete(i))}_onInvokeMessage(t){const{methodName:r,jobId:i,data:s,abortable:n}=t,o=n?new AbortController:null,a=this._inJobs,l=w9[r];let h;try{if(typeof l!="function")throw new TypeError(`${r} is not a function`);h=l.call(null,s,{signal:o?o.signal:null})}catch(p){return void this._post({type:Gl,jobId:i,error:Pc(p)})}Ri(h)?(a.set(i,{controller:o,promise:h}),h.then(p=>{a.has(i)&&(a.delete(i),this._post({type:Gl,jobId:i},p))},p=>{a.has(i)&&(a.delete(i),p||(p={message:"Error encountered at method"+r}),Ht(p)||this._post({type:Gl,jobId:i,error:Pc(p||{message:`Error encountered at method ${r}`})}))})):this._post({type:Gl,jobId:i},h)}_onOpenedMessage(t){const{jobId:r,data:i}=t,s=this._outJobs.get(r);s&&(this._outJobs.delete(r),Ce(s.abortHandle),s.resolve(i))}_onResponseMessage(t){const{jobId:r,error:i,data:s}=t,n=this._outJobs.get(r);n&&(this._outJobs.delete(r),Ce(n.abortHandle),i?n.reject(I.fromJSON(JSON.parse(i))):n.resolve(s))}_post(t,r,i){return cv(this.worker,t,r,i)}};const w2=A("host-browser")?Math.min(navigator.hardwareConcurrency-1,A("workers-pool-size")??8):0;let go=A("esri-mobile")?Math.min(w2,3):w2;go||(go=A("safari")&&A("mac")?7:2);let b2=0;const xd=[];function I9(){Ux()}async function Dh(e,t){const r=new v9,{registryTarget:i,...s}=t;return await r.open(e,s),i&&u9(i,r),r}async function Jee(e,t={}){if(typeof e!="string")throw new I("workers:undefined-module","modulePath is missing");let r=t.strategy||"distributed";if(A("host-webworker")&&!A("esri-workers")&&(r="local"),r==="local"){let i=await bn.loadWorker(e);i||(i=await import(e)),Ve(t.signal);const s=t.client||i;return Dh([bn.connect(i,t.schedule)],{...t,client:s})}if(await Ux(),Ve(t.signal),r==="dedicated"){const i=b2++%go;return Dh([await xd[i].open(e,t)],t)}if(t.maxNumWorkers&&t.maxNumWorkers>0){const i=Math.min(t.maxNumWorkers,go);if(i<go){const s=new Array(i);for(let n=0;n<i;++n){const o=b2++%go;s[n]=xd[o].open(e,t)}return Dh(s,t)}}return Dh(xd.map(i=>i.open(e,t)),t)}let Fh=null;async function Ux(){if(Fh)return Fh;new AbortController;const e=[];for(let t=0;t<go;t++){const r=C9.create(t).then(i=>(xd[t]=i,i));e.push(r)}return Fh=Promise.all(e),Fh}const Yee=Math.PI/180,Kee=/(?:SPHEROID|ELLIPSOID)\[([^\]]+)]/i,Ms=Be.radius,Dr=Be.eccentricitySquared,R9={a1:Ms*Dr,a2:Ms*Dr*Ms*Dr,a3:Ms*Dr*Dr/2,a4:Ms*Dr*Ms*Dr*2.5,a5:Ms*Dr+Ms*Dr*Dr/2,a6:1-Dr},Xee={4267:{a:63782064e-1,f:1/294.9786982},4269:{a:6378137,f:1/298.257222101},4326:{a:Be.radius,f:Be.flattening},4490:{a:6378137,f:1/298.257222101},104900:{a:2439700,f:0},104901:{a:6051e3,f:0},104902:{a:6051800,f:0},104903:{a:yn.radius,f:yn.flattening},104904:{a:3393400,f:1/192.0430107526882},104905:{a:$i.radius,f:$i.flattening},104906:{a:6200,f:0},104907:{a:11100,f:0},104908:{a:71492e3,f:.06487439154031222},104909:{a:8200,f:0},104910:{a:83500,f:0},104911:{a:1e4,f:0},104912:{a:2409300,f:0},104913:{a:15e3,f:0},104914:{a:4e4,f:0},104915:{a:1562090,f:0},104916:{a:2632345,f:0},104917:{a:85e3,f:0},104918:{a:1821460,f:0},104919:{a:5e3,f:0},104920:{a:12e3,f:0},104921:{a:3e4,f:3},104922:{a:18e3,f:0},104923:{a:14e3,f:0},104924:{a:49300,f:0},104925:{a:60268e3,f:1/10.2079945799458},104926:{a:16e3,f:0},104927:{a:9500,f:0},104928:{a:56e4,f:0},104929:{a:249400,f:0},104930:{a:59500,f:0},104931:{a:16e3,f:0},104932:{a:133e3,f:0},104933:{a:718e3,f:0},104934:{a:888e3,f:0},104935:{a:1986300,f:0},104936:{a:1e4,f:0},104937:{a:41900,f:0},104938:{a:11e4,f:0},104939:{a:50100,f:0},104940:{a:764e3,f:0},104941:{a:11e3,f:0},104942:{a:529800,f:0},104943:{a:2575e3,f:0},104944:{a:25559e3,f:1/43.61604095563141},104945:{a:578900,f:0},104946:{a:33e3,f:0},104947:{a:21e3,f:0},104948:{a:13e3,f:0},104949:{a:31e3,f:0},104950:{a:27e3,f:0},104951:{a:42e3,f:0},104952:{a:235800,f:0},104953:{a:761400,f:0},104954:{a:15e3,f:0},104955:{a:54e3,f:0},104956:{a:77e3,f:0},104957:{a:27e3,f:0},104958:{a:788900,f:0},104959:{a:584700,f:0},104960:{a:24764e3,f:.01708124697141011},104961:{a:74e3,f:0},104962:{a:79e3,f:0},104963:{a:104e3,f:.14423076923076922},104964:{a:29e3,f:0},104965:{a:17e4,f:0},104966:{a:208e3,f:0},104967:{a:4e4,f:0},104968:{a:1352600,f:0},104969:{a:1195e3,f:0},104970:{a:593e3,f:0},104971:{a:$i.radius,f:0},104972:{a:47e4,f:0},104973:{a:255e3,f:0},104974:{a:2439400,f:0}};var x;(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.SPHERICAL_ECEF=1]="SPHERICAL_ECEF",e[e.WGS84=2]="WGS84",e[e.WEB_MERCATOR=3]="WEB_MERCATOR",e[e.WGS84_ECEF=4]="WGS84_ECEF",e[e.CGCS2000=5]="CGCS2000",e[e.SPHERICAL_MARS_PCPF=6]="SPHERICAL_MARS_PCPF",e[e.GCSMARS2000=7]="GCSMARS2000",e[e.SPHERICAL_MOON_PCPF=8]="SPHERICAL_MOON_PCPF",e[e.GCSMOON2000=9]="GCSMOON2000",e[e.LON_LAT=10]="LON_LAT",e[e.PLATE_CARREE=11]="PLATE_CARREE"})(x||(x={}));const k9={[x.WGS84]:{[x.CGCS2000]:Pe,[x.GCSMARS2000]:null,[x.GCSMOON2000]:null,[x.LON_LAT]:Pe,[x.SPHERICAL_ECEF]:sc,[x.SPHERICAL_MARS_PCPF]:null,[x.SPHERICAL_MOON_PCPF]:null,[x.UNKNOWN]:null,[x.WEB_MERCATOR]:Ha,[x.PLATE_CARREE]:qa,[x.WGS84]:Pe,[x.WGS84_ECEF]:Ja},[x.CGCS2000]:{[x.CGCS2000]:Pe,[x.GCSMARS2000]:null,[x.GCSMOON2000]:null,[x.LON_LAT]:Pe,[x.SPHERICAL_ECEF]:sc,[x.SPHERICAL_MARS_PCPF]:null,[x.SPHERICAL_MOON_PCPF]:null,[x.UNKNOWN]:null,[x.WEB_MERCATOR]:Ha,[x.PLATE_CARREE]:qa,[x.WGS84]:Pe,[x.WGS84_ECEF]:Ja},[x.GCSMARS2000]:{[x.CGCS2000]:null,[x.GCSMARS2000]:Pe,[x.GCSMOON2000]:null,[x.LON_LAT]:Pe,[x.SPHERICAL_ECEF]:null,[x.SPHERICAL_MARS_PCPF]:$2,[x.SPHERICAL_MOON_PCPF]:null,[x.UNKNOWN]:null,[x.WEB_MERCATOR]:null,[x.PLATE_CARREE]:null,[x.WGS84]:null,[x.WGS84_ECEF]:null},[x.GCSMOON2000]:{[x.CGCS2000]:null,[x.GCSMARS2000]:null,[x.GCSMOON2000]:Pe,[x.LON_LAT]:Pe,[x.SPHERICAL_ECEF]:null,[x.SPHERICAL_MARS_PCPF]:null,[x.SPHERICAL_MOON_PCPF]:T2,[x.UNKNOWN]:null,[x.WEB_MERCATOR]:null,[x.PLATE_CARREE]:null,[x.WGS84]:null,[x.WGS84_ECEF]:null},[x.WEB_MERCATOR]:{[x.CGCS2000]:ic,[x.GCSMARS2000]:null,[x.GCSMOON2000]:null,[x.LON_LAT]:ic,[x.SPHERICAL_ECEF]:L9,[x.SPHERICAL_MARS_PCPF]:null,[x.SPHERICAL_MOON_PCPF]:null,[x.UNKNOWN]:null,[x.WEB_MERCATOR]:Pe,[x.PLATE_CARREE]:U9,[x.WGS84]:ic,[x.WGS84_ECEF]:D9},[x.WGS84_ECEF]:{[x.CGCS2000]:Ya,[x.GCSMARS2000]:null,[x.GCSMOON2000]:null,[x.LON_LAT]:Ya,[x.SPHERICAL_ECEF]:Z9,[x.SPHERICAL_MARS_PCPF]:null,[x.SPHERICAL_MOON_PCPF]:null,[x.UNKNOWN]:null,[x.WEB_MERCATOR]:J9,[x.PLATE_CARREE]:j9,[x.WGS84]:Ya,[x.WGS84_ECEF]:Pe},[x.SPHERICAL_ECEF]:{[x.CGCS2000]:Za,[x.GCSMARS2000]:null,[x.GCSMOON2000]:null,[x.LON_LAT]:Za,[x.SPHERICAL_ECEF]:Pe,[x.SPHERICAL_MARS_PCPF]:null,[x.SPHERICAL_MOON_PCPF]:null,[x.UNKNOWN]:null,[x.WEB_MERCATOR]:H9,[x.PLATE_CARREE]:G9,[x.WGS84]:Za,[x.WGS84_ECEF]:q9},[x.SPHERICAL_MARS_PCPF]:{[x.CGCS2000]:null,[x.GCSMARS2000]:M2,[x.GCSMOON2000]:null,[x.LON_LAT]:M2,[x.SPHERICAL_ECEF]:null,[x.SPHERICAL_MARS_PCPF]:Pe,[x.SPHERICAL_MOON_PCPF]:null,[x.UNKNOWN]:null,[x.WEB_MERCATOR]:null,[x.PLATE_CARREE]:null,[x.WGS84]:null,[x.WGS84_ECEF]:null},[x.SPHERICAL_MOON_PCPF]:{[x.CGCS2000]:null,[x.GCSMARS2000]:null,[x.GCSMOON2000]:E2,[x.LON_LAT]:E2,[x.SPHERICAL_ECEF]:null,[x.SPHERICAL_MARS_PCPF]:null,[x.SPHERICAL_MOON_PCPF]:Pe,[x.UNKNOWN]:null,[x.WEB_MERCATOR]:null,[x.PLATE_CARREE]:null,[x.WGS84]:null,[x.WGS84_ECEF]:null},[x.UNKNOWN]:{[x.CGCS2000]:null,[x.GCSMARS2000]:null,[x.GCSMOON2000]:null,[x.LON_LAT]:null,[x.SPHERICAL_ECEF]:null,[x.SPHERICAL_MARS_PCPF]:null,[x.SPHERICAL_MOON_PCPF]:null,[x.UNKNOWN]:Pe,[x.WEB_MERCATOR]:null,[x.PLATE_CARREE]:null,[x.WGS84]:null,[x.WGS84_ECEF]:null},[x.LON_LAT]:{[x.CGCS2000]:Pe,[x.GCSMARS2000]:Pe,[x.GCSMOON2000]:Pe,[x.LON_LAT]:Pe,[x.SPHERICAL_ECEF]:sc,[x.SPHERICAL_MARS_PCPF]:$2,[x.SPHERICAL_MOON_PCPF]:T2,[x.UNKNOWN]:null,[x.WEB_MERCATOR]:Ha,[x.PLATE_CARREE]:qa,[x.WGS84]:Pe,[x.WGS84_ECEF]:Ja},[x.PLATE_CARREE]:{[x.CGCS2000]:Wa,[x.GCSMARS2000]:null,[x.GCSMOON2000]:null,[x.LON_LAT]:Wa,[x.SPHERICAL_ECEF]:z9,[x.SPHERICAL_MARS_PCPF]:null,[x.SPHERICAL_MOON_PCPF]:null,[x.UNKNOWN]:null,[x.WEB_MERCATOR]:V9,[x.PLATE_CARREE]:Pe,[x.WGS84]:Wa,[x.WGS84_ECEF]:B9}};function jx(e,t){var r;return(r=N9(e,t))==null?void 0:r.projector}function N9(e,t){if(e==null||t==null)return null;if(Di.source.spatialReference===e&&Di.dest.spatialReference===t)return Di;const r=S2(e,Di.source),i=S2(t,Di.dest);return r===x.UNKNOWN&&i===x.UNKNOWN?ut(e,t)?Di.projector=Pe:Di.projector=null:Di.projector=k9[r][i],Di}function S2(e,t){return e?t.spatialReference===e?t.spatialReferenceId:(t.spatialReference=e,"metersPerUnit"in t&&(t.metersPerUnit=ki(e,1)),Ip(e)?t.spatialReferenceId=x.SPHERICAL_ECEF:Po(e)?t.spatialReferenceId=x.WGS84:Ai(e)?t.spatialReferenceId=x.WEB_MERCATOR:lL(e)?t.spatialReferenceId=x.PLATE_CARREE:e.wkt===dL.wkt?t.spatialReferenceId=x.WGS84_ECEF:e.wkid===Ao.CGCS2000?t.spatialReferenceId=x.CGCS2000:e.wkt===C_.wkt?t.spatialReferenceId=x.SPHERICAL_MARS_PCPF:e.wkt===I_.wkt?t.spatialReferenceId=x.SPHERICAL_MOON_PCPF:n3(e)?t.spatialReferenceId=x.GCSMARS2000:o3(e)?t.spatialReferenceId=x.GCSMOON2000:t.spatialReferenceId=x.UNKNOWN):x.UNKNOWN}function Pe(e,t,r,i){e!==r&&(r[i++]=e[t++],r[i++]=e[t++],r[i]=e[t])}function ic(e,t,r,i){r[i]=ml*(e[t]/To),r[i+1]=ml*(Gx-2*Math.atan(Math.exp(-e[t+1]/To))),r[i+2]=e[t+2]}function L9(e,t,r,i){const s=e[t]/To,n=Gx-2*Math.atan(Math.exp(-e[t+1]/To)),o=To+e[t+2],a=Math.cos(n)*o;r[i]=Math.cos(s)*a,r[i+1]=Math.sin(s)*a,r[i+2]=Math.sin(n)*o}function D9(e,t,r,i){ic(e,t,r,i),Ja(r,i,r,i)}function F9(e,t,r,i,s){const n=.4999999*Math.PI,o=ii(fl*e[t+1],-n,n),a=Math.sin(o);r[i++]=fl*e[t]*s.radius,r[i++]=s.halfSemiMajorAxis*Math.log((1+a)/(1-a)),r[i]=e[t+2]}function Ha(e,t,r,i){F9(e,t,r,i,Be)}function qa(e,t,r,i){r[i]=e[t]*x2,r[i+1]=e[t+1]*x2,r[i+2]=e[t+2]}function Wa(e,t,r,i){r[i]=e[t]*A2,r[i+1]=e[t+1]*A2,r[i+2]=e[t+2]}function U9(e,t,r,i){ic(e,t,r,i),qa(r,i,r,i)}function j9(e,t,r,i){Ya(e,t,r,i),qa(r,i,r,i)}function G9(e,t,r,i){Za(e,t,r,i),qa(r,i,r,i)}function z9(e,t,r,i){Wa(e,t,r,i),sc(r,i,r,i)}function V9(e,t,r,i){Wa(e,t,r,i),Ha(r,i,r,i)}function B9(e,t,r,i){Wa(e,t,r,i),Ja(r,i,r,i)}function hv(e,t,r,i,s){const n=s+e[t+2],o=fl*e[t+1],a=fl*e[t],l=Math.cos(o)*n;r[i]=Math.cos(a)*l,r[i+1]=Math.sin(a)*l,r[i+2]=Math.sin(o)*n}function T2(e,t,r,i){hv(e,t,r,i,yn.radius)}function $2(e,t,r,i){hv(e,t,r,i,$i.radius)}function sc(e,t,r,i){hv(e,t,r,i,Be.radius)}function dv(e,t,r,i,s){const n=e[t],o=e[t+1],a=e[t+2],l=Math.sqrt(n*n+o*o+a*a),h=YD(a/(l===0?1:l)),p=Math.atan2(o,n);r[i++]=ml*p,r[i++]=ml*h,r[i]=l-s}function E2(e,t,r,i){dv(e,t,r,i,yn.radius)}function M2(e,t,r,i){dv(e,t,r,i,$i.radius)}function Za(e,t,r,i){dv(e,t,r,i,Be.radius)}function H9(e,t,r,i){Za(e,t,r,i),Ha(r,i,r,i)}function q9(e,t,r,i){Za(e,t,r,i),Ja(r,i,r,i)}function W9(e,t,r,i,s){const n=fl*e[t],o=fl*e[t+1],a=e[t+2],l=Math.sin(o),h=Math.cos(o),p=s.radius/Math.sqrt(1-s.eccentricitySquared*l*l);r[i++]=(p+a)*h*Math.cos(n),r[i++]=(p+a)*h*Math.sin(n),r[i++]=(p*(1-s.eccentricitySquared)+a)*l}function Ja(e,t,r,i){W9(e,t,r,i,Be)}function Ya(e,t,r,i){const s=R9,n=e[t],o=e[t+1],a=e[t+2];let l,h,p,f,m,y,_,v,w,b,M,$,E,P,O,L,k,G,V,Y,re;l=Math.abs(a),h=n*n+o*o,p=Math.sqrt(h),f=h+a*a,m=Math.sqrt(f),Y=Math.atan2(o,n),y=a*a/f,_=h/f,P=s.a2/m,O=s.a3-s.a4/m,_>.3?(v=l/m*(1+_*(s.a1+P+y*O)/m),V=Math.asin(v),b=v*v,w=Math.sqrt(1-b)):(w=p/m*(1-y*(s.a5-P-_*O)/m),V=Math.acos(w),b=1-w*w,v=Math.sqrt(b)),M=1-Be.eccentricitySquared*b,$=Be.radius/Math.sqrt(M),E=s.a6*$,P=p-$*w,O=l-E*v,k=w*P+v*O,L=w*O-v*P,G=L/(E/M+k),V+=G,re=k+L*G/2,a<0&&(V=-V),r[i++]=ml*Y,r[i++]=ml*V,r[i]=re}function Z9(e,t,r,i){Ya(e,t,r,i),sc(r,i,r,i)}function J9(e,t,r,i){Ya(e,t,r,i),Ha(r,i,r,i)}const Di={source:{spatialReference:null,spatialReferenceId:x.UNKNOWN,metersPerUnit:1},dest:{spatialReference:null,spatialReferenceId:x.UNKNOWN,metersPerUnit:1},projector:Pe},fl=Bf(1),ml=DM(1),Gx=.5*Math.PI,To=Be.radius,x2=To*Math.PI/180,A2=180/(To*Math.PI);function nh(e,t,r,i,s,n,o=Math.floor(e.length/3)){const a=jx(t,s);if(a==null)return!1;if(a===Pe){if(e===i&&r===n)return!0;const h=r+3*o;for(let p=r,f=n;p<h;p++,f++)i[f]=e[p];return!0}const l=r+3*o;for(let h=r,p=n;h<l;h+=3,p+=3)a(e,h,i,p);return!0}const Qee=Object.freeze(Object.defineProperty({__proto__:null,projectBuffer:nh},Symbol.toStringTag,{value:"Module"}));function P2(e,t,r,i,s,n){return Uh[0]=e,Uh[1]=t,Uh[2]=r,nh(Uh,i,0,s,n,0)}const Uh=Mn();let jh=0,Km=class Zg{static fromGE(t){const r=new Zg;return r._wkt=t.wkt,r._wkid=t.wkid,r._isInverse=t.isInverse,r}constructor(t){this.uid=jh++,t?(this._wkt=t.wkt!=null?t.wkt:null,this._wkid=t.wkid!=null?t.wkid:-1,this._isInverse=t.isInverse!=null&&t.isInverse===!0):(this._wkt=null,this._wkid=-1,this._isInverse=!1)}get wkt(){return this._wkt}set wkt(t){this._wkt=t,this.uid=jh++}get wkid(){return this._wkid}set wkid(t){this._wkid=t,this.uid=jh++}get isInverse(){return this._isInverse}set isInverse(t){this._isInverse=t,this.uid=jh++}getInverse(){const t=new Zg;return t._wkt=this.wkt,t._wkid=this._wkid,t._isInverse=!this.isInverse,t}},Vp=class pu{static cacheKey(t,r){var i,s,n,o,a,l;return[((i=t.wkid)==null?void 0:i.toString())??"-1",((s=t.wkt)==null?void 0:s.toString())??"",((n=t.wkt2)==null?void 0:n.toString())??"",((o=r.wkid)==null?void 0:o.toString())??"-1",((a=r.wkt)==null?void 0:a.toString())??"",((l=r.wkt2)==null?void 0:l.toString())??""].join()}static fromGE(t){const r=new pu;let i="";for(const s of t.steps){const n=Km.fromGE(s);r.steps.push(n),i+=n.uid.toString()+","}return r._cachedProjection={},r._gtlistentry=null,r._chain=i,r}constructor(t){if(this.steps=[],this._cachedProjection={},this._chain="",this._gtlistentry=null,t==null?void 0:t.steps)for(const r of t.steps)r instanceof Km?this.steps.push(r):this.steps.push(new Km({wkid:r.wkid,wkt:r.wkt,isInverse:r.isInverse}))}getInverse(){const t=new pu;t.steps=[];for(let r=this.steps.length-1;r>=0;r--){const i=this.steps[r];t.steps.push(i.getInverse())}return t}getGTListEntry(){let t="";for(const r of this.steps)t+=r.uid.toString()+",";return t!==this._chain&&(this._gtlistentry=null,this._cachedProjection={},this._chain=t),this._gtlistentry}assignCachedGe(t,r,i){this._cachedProjection[pu.cacheKey(t,r)]=i}getCachedGeTransformation(t,r){let i="";for(const n of this.steps)i+=n.uid.toString()+",";i!==this._chain&&(this._gtlistentry=null,this._cachedProjection={},this._chain=i);const s=this._cachedProjection[pu.cacheKey(t,r)];return s===void 0?null:s}};function Y9(e,t,r){if(t==null||r==null||r.vcsWkid||ut(t,r)||gn(t)||gn(r))return null;const i=ob(t)/ob(r);if(i===1)return null;switch(e){case"point":case"esriGeometryPoint":return s=>K9(s,i);case"polyline":case"esriGeometryPolyline":return s=>Q9(s,i);case"polygon":case"esriGeometryPolygon":return s=>X9(s,i);case"multipoint":case"esriGeometryMultipoint":return s=>eF(s,i);case"extent":case"esriGeometryEnvelope":return s=>tF(s,i);default:return null}}function K9(e,t){(e==null?void 0:e.z)!=null&&(e.z*=t)}function X9(e,t){if(e)for(const r of e.rings)for(const i of r)i.length>2&&(i[2]*=t)}function Q9(e,t){if(e)for(const r of e.paths)for(const i of r)i.length>2&&(i[2]*=t)}function eF(e,t){if(e)for(const r of e.points)r.length>2&&(r[2]*=t)}function tF(e,t){e&&e.zmin!=null&&e.zmax!=null&&(e.zmin*=t,e.zmax*=t)}let ei=null,Sn=null,nc=null,Ad={};const pv=new Qc;function xn(){return!!ei&&P_()}function zx(){return!!xn()||(Z(pv),Tn(),!1)}function Vx(e,t){return!e||!t||Ci(e,t)||zx()}function rF(e,t){return!Ci(e,t)&&!xn()}function Tn(e){return nc==null&&(nc=Promise.all([XE(),N(()=>import("./geometryEngineBase-B0ZyeKAX.js"),__vite__mapDeps([41,3])).then(t=>t.g),N(()=>import("./hydrated-C2PWhB1g.js"),[])])),nc.then(([,t,{hydratedAdapter:r}])=>{Ve(e),Sn=r,ei=t.default,ei._enableProjection(sL),pv.notify()})}function Vo(e,t,r=null,i=null){return Array.isArray(e)?e.length===0?[]:(kL(e),Jg(Sn,e,e[0].spatialReference,t,r,i)):(ll(e),Jg(Sn,[e],e.spatialReference,t,r,i)[0])}function Jg(e,t,r,i,s=null,n=null){if(r==null||i==null)return t;if(Ci(r,i,s))return t.map(o=>Pd(o,r,i));if(s==null&&Ip(r))return t.map(o=>Pd(o,r,ae.WGS84)).map(o=>Cc(o,i));if(s==null&&Ip(i))return t.map(o=>Cc(o,ae.WGS84)).map(o=>Pd(o,ae.WGS84,i));if(s==null){const o=Vp.cacheKey(r,i);Ad[o]!==void 0?s=Ad[o]:((s=Hx(r,i,void 0))==null&&(s=new Vp),Ad[o]=s)}if(ei==null||e==null)throw new Zf;return n!=null?ei._project(e,t,r,i,s,n):ei._project(e,t,r,i,s)}function iF(e,t){const r=Bx([e],t);return r.pending!=null?{pending:r.pending,geometry:null}:r.geometries!=null?{pending:null,geometry:r.geometries[0]}:{pending:null,geometry:null}}function Bx(e,t){if(!xn()){for(const r of e)if(r!=null&&!ut(r.spatialReference,t)&&ir(r.spatialReference)&&ir(t)&&!Ci(r.spatialReference,t))return Z(pv),{pending:Tn(),geometries:null}}return{pending:null,geometries:e.map(r=>r==null?null:ut(r.spatialReference,t)?r:ir(r.spatialReference)&&ir(t)?Cc(r,t):null)}}function Hx(e,t,r=null){if(e==null||t==null)return null;if(ei==null||Sn==null)throw new Zf;const i=ei._getTransformation(Sn,e,t,r,r==null?void 0:r.spatialReference);return i!==null?Vp.fromGE(i):null}function sF(e,t,r=null){if(ei==null||Sn==null)throw new Zf;const i=ei._getTransformationBySuitability(Sn,e,t,r,r==null?void 0:r.spatialReference);if(i!==null){const s=[];for(const n of i)s.push(Vp.fromGE(n));return s}return[]}let Zf=class extends I{constructor(){super("projection:not-loaded","projection engine not fully loaded yet, please call load()")}};function nF(){ei=null,Sn=null,nc=null,Ad={}}const oF={get loadPromise(){return nc}};function Cc(e,t){try{const r=Vo(e,t);if(r==null)return null;"xmin"in e&&"xmin"in r&&(r.zmin=e.zmin,r.zmax=e.zmax);const i=Y9(r.type,e.spatialReference,t);return i!=null&&i(r),r}catch(r){if(!(r instanceof Zf))throw r;return null}}async function aF(e,t,r){const i=e.spatialReference;return i!=null&&t!=null&&await qx(i,t,null,r),Cc(e,t)}function Ci(e,t,r){return!r&&(!!ut(e,t)||ir(e)&&ir(t)&&!!jx(e,t))}function lF(e,t){if(ut(e,t))return!0;if(!ir(e)||!ir(t))return!1;const r=Po(e)||Ai(e)||sb(e),i=Po(t)||Ai(t)||sb(t);return r&&i}async function qx(e,t,r,i){if(xn())return kw(i);if(Array.isArray(e)){for(const{source:s,dest:n,geographicTransformation:o}of e)if(s&&n&&!Ci(s,n,o))return Tn(i)}else if(e&&t&&!Ci(e,t,r))return Tn(i);return kw(i)}function Pd(e,t,r){return e?"x"in e?Wx(e,t,new te,r,0):"xmin"in e?Kx(e,t,new Le,r,0):"rings"in e?Yx(e,t,new Oi,r,0):"paths"in e?Jx(e,t,new Xr,r,0):"points"in e?Zx(e,t,new qf,r,0):null:null}function uF(e,t,r=t.spatialReference,i=0){return r!=null&&e.spatialReference!=null&&Wx(e,e.spatialReference,t,r,i)!=null}function Wx(e,t,r,i,s){_t[0]=e.x,_t[1]=e.y;const n=e.z;return _t[2]=n!==void 0?n:s,nh(_t,t,0,_t,i,0)?(r.x=_t[0],r.y=_t[1],r.spatialReference=i,n!==void 0||gn(i)?(r.z=_t[2],r.hasZ=!0):(r.z=void 0,r.hasZ=!1),e.m===void 0?(r.m=void 0,r.hasM=!1):(r.m=e.m,r.hasM=!0),r):null}function cF(e,t,r=t.spatialReference,i=0){return e.spatialReference!=null&&r!=null&&Zx(e,e.spatialReference,t,r,i)!=null}function Zx(e,t,r,i,s){const{points:n,hasZ:o,hasM:a}=e,l=[],h=n.length,p=[];for(const m of n)p.push(m[0],m[1],o?m[2]:s);if(!nh(p,t,0,p,i,0,h))return null;const f=o||gn(i);for(let m=0;m<h;++m){const y=3*m,_=p[y],v=p[y+1];f&&a?l.push([_,v,p[y+2],n[m][3]]):f?l.push([_,v,p[y+2]]):a?l.push([_,v,n[m][2]]):l.push([_,v])}return r.points=l,r.spatialReference=i,r.hasZ=o,r.hasM=a,r}function hF(e,t,r=t.spatialReference,i=0){return e.spatialReference!=null&&r!=null&&Jx(e,e.spatialReference,t,r,i)!=null}function Jx(e,t,r,i,s){const{paths:n,hasZ:o,hasM:a}=e,l=[];if(!Xx(n,o??!1,a??!1,t,l,i,s))return null;const h=o||gn(i);return r.paths=l,r.spatialReference=i,r.hasZ=h,r.hasM=a,r}function dF(e,t,r=t.spatialReference,i=0){return e.spatialReference!=null&&r!=null&&Yx(e,e.spatialReference,t,r,i)!=null}function Yx(e,t,r,i,s){const{rings:n,hasZ:o,hasM:a}=e,l=[];if(!Xx(n,o??!1,a??!1,t,l,i,s))return null;const h=o||gn(i);return r.rings=l,r.spatialReference=i,r.hasZ=h,r.hasM=a,r}function pF(e,t,r=t.spatialReference,i=0){return e.spatialReference!=null&&r!=null&&Kx(e,e.spatialReference,t,r,i)!=null}function Kx(e,t,r,i,s){const{xmin:n,ymin:o,xmax:a,ymax:l,hasZ:h,hasM:p}=e,f=h?e.zmin:s;if(!P2(n,o,f,t,_t,i))return null;const m=h||gn(i);r.xmin=_t[0],r.ymin=_t[1],m&&(r.zmin=_t[2]);const y=h?e.zmax:s;return P2(a,l,y,t,_t,i)?(r.xmax=_t[0],r.ymax=_t[1],m&&(r.zmax=_t[2]),p&&(r.mmin=e.mmin,r.mmax=e.mmax),r.spatialReference=i,r):null}function Xx(e,t,r,i,s,n,o=0){const a=new Array;for(const p of e)for(const f of p)a.push(f[0],f[1],t?f[2]:o);if(!nh(a,i,0,a,n,0))return!1;let l=0;s.length=0;const h=t||gn(n);for(const p of e){const f=new Array;for(const m of p)h&&r?f.push([a[l++],a[l++],a[l++],m[3]]):h?f.push([a[l++],a[l++],a[l++]]):r?(f.push([a[l++],a[l++],m[2]]),l++):(f.push([a[l++],a[l++]]),l++);s.push(f)}return!0}const _t=Mn(),tte=Object.freeze(Object.defineProperty({__proto__:null,canProjectWithoutEngine:Ci,getTransformation:Hx,getTransformations:sF,initializeProjection:qx,isEqualBaseGCS:lF,isLoaded:xn,isLoadedOrLoad:zx,isLoadedOrLoadFor:Vx,load:Tn,project:Vo,projectExtent:pF,projectMany:Jg,projectMultipoint:cF,projectOrLoad:iF,projectOrLoadMany:Bx,projectPoint:uF,projectPolygon:dF,projectPolyline:hF,projectWithZConversion:aF,projectWithoutEngine:Pd,requiresLoad:rF,test:oF,tryProjectWithZConversion:Cc,unload:nF},Symbol.toStringTag,{value:"Module"}));var Yg;let ui=Yg=class extends j{constructor(e){super(e),this.cols=null,this.level=0,this.levelValue=null,this.origin=null,this.resolution=0,this.rows=null,this.scale=0}clone(){return new Yg({cols:this.cols,level:this.level,levelValue:this.levelValue,resolution:this.resolution,rows:this.rows,scale:this.scale})}};c([d({json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],ui.prototype,"cols",void 0),c([d({type:Te,json:{write:!0}})],ui.prototype,"level",void 0),c([d({type:String,json:{write:!0}})],ui.prototype,"levelValue",void 0),c([d({json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],ui.prototype,"origin",void 0),c([d({type:Number,json:{write:!0}})],ui.prototype,"resolution",void 0),c([d({json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],ui.prototype,"rows",void 0),c([d({type:Number,json:{write:!0}})],ui.prototype,"scale",void 0),ui=Yg=c([S("esri.layers.support.LOD")],ui);const Ks=ui;let fF=class{constructor(t,r,i,s,n=void 0){this.id=t,this.level=r,this.row=i,this.col=s,this.extent=n}};var Is;const O2=new rt({PNG:"png",PNG8:"png8",PNG24:"png24",PNG32:"png32",JPEG:"jpg",JPG:"jpg",DIB:"dib",TIFF:"tiff",EMF:"emf",PS:"ps",PDF:"pdf",GIF:"gif",SVG:"svg",SVGZ:"svgz",Mixed:"mixed",MIXED:"mixed",LERC:"lerc",LERC2D:"lerc2d",RAW:"raw",pbf:"pbf"});let ct=Is=class extends j{static create(e={}){const{resolutionFactor:t=1,scales:r,size:i=256,spatialReference:s=ae.WebMercator,numLODs:n=24}=e;if(!ir(s)){const f=[];if(r)for(let m=0;m<r.length;m++){const y=r[m];f.push(new Ks({level:m,scale:y,resolution:y}))}else{let m=5e-4;for(let y=n-1;y>=0;y--)f.unshift(new Ks({level:y,scale:m,resolution:m})),m*=2}return new Is({dpi:96,lods:f,origin:new te(0,0,s),size:[i,i],spatialReference:s})}const o=It(s),a=e.origin?new te({x:e.origin.x,y:e.origin.y,spatialReference:s}):new te(o?{x:o.origin[0],y:o.origin[1],spatialReference:s}:{x:0,y:0,spatialReference:s}),l=96,h=1/(ki(s)*39.37*l),p=[];if(r)for(let f=0;f<r.length;f++){const m=r[f],y=m*h;p.push(new Ks({level:f,scale:m,resolution:y}))}else{let f=Tl(s)?512/i*5916575275917094e-7:256/i*591657527591555e-6;const m=Math.ceil(n/t);p.push(new Ks({level:0,scale:f,resolution:f*h}));for(let y=1;y<m;y++){const _=f/2**t,v=_*h;p.push(new Ks({level:y,scale:_,resolution:v})),f=_}}return new Is({dpi:l,lods:p,origin:a,size:[i,i],spatialReference:s})}constructor(e){super(e),this.dpi=96,this.format=null,this.origin=null,this.size=null,this.spatialReference=null}get isWrappable(){const{spatialReference:e,origin:t}=this;if(e&&t){const r=It(e);return e.isWrappable&&!!r&&Math.abs(r.origin[0]-t.x)<=r.dx}return!1}readOrigin(e,t){return te.fromJSON({spatialReference:t.spatialReference,...e})}set lods(e){let t=0,r=0;const i=[],s=this._levelToLOD={};e&&(t=-1/0,r=1/0,e.forEach(n=>{i.push(n.scale),t=n.scale>t?n.scale:t,r=n.scale<r?n.scale:r,s[n.level]=n})),this._set("scales",i),this._set("lods",e),this._initializeUpsampleLevels()}readSize(e,t){return[t.cols,t.rows]}writeSize(e,t){t.cols=e[0],t.rows=e[1]}zoomToScale(e){const t=this.scales;if(e<=0)return t[0];if(e>=t.length-1)return t[t.length-1];const r=Math.floor(e),i=r+1;return t[r]/(t[r]/t[i])**(e-r)}scaleToZoom(e){const t=this.scales,r=t.length-1;let i=0;for(;i<r;i++){const s=t[i],n=t[i+1];if(s<=e)return i;if(n===e)return i+1;if(s>e&&n<e)return i+Math.log(s/e)/Math.log(s/n)}return i}tileAt(e,t,r,i){const s=this.lodAt(e);if(!s)return null;let n,o;if(typeof t=="number")n=t,o=r;else if(ut(t.spatialReference,this.spatialReference))n=t.x,o=t.y,i=r;else{const h=Nf(t,this.spatialReference);if(h==null)return null;n=h.x,o=h.y,i=r}const a=s.resolution*this.size[0],l=s.resolution*this.size[1];return i||(i=new fF(null,0,0,0,Ct())),i.level=e,i.row=Math.floor((this.origin.y-o)/l+.001),i.col=Math.floor((n-this.origin.x)/a+.001),this.updateTileInfo(i),i}updateTileInfo(e,t=Is.ExtrapolateOptions.NONE){let r=this.lodAt(e.level);if(!r&&t===Is.ExtrapolateOptions.POWER_OF_TWO){const o=this.lods[this.lods.length-1];o.level<e.level&&(r=o)}if(!r)return;const i=e.level-r.level,s=r.resolution*this.size[0]/2**i,n=r.resolution*this.size[1]/2**i;e.id=`${e.level}/${e.row}/${e.col}`,e.extent||(e.extent=Ct()),e.extent[0]=this.origin.x+e.col*s,e.extent[1]=this.origin.y-(e.row+1)*n,e.extent[2]=e.extent[0]+s,e.extent[3]=e.extent[1]+n}upsampleTile(e){const t=this._upsampleLevels[e.level];return!(!t||t.parentLevel===-1)&&(e.level=t.parentLevel,e.row=Math.floor(e.row/t.factor+.001),e.col=Math.floor(e.col/t.factor+.001),this.updateTileInfo(e),!0)}getTileBounds(e,t){const r=this.lodAt(t.level);if(r==null)return null;const{resolution:i}=r,s=i*this.size[0],n=i*this.size[1];return e[0]=this.origin.x+t.col*s,e[1]=this.origin.y-(t.row+1)*n,e[2]=e[0]+s,e[3]=e[1]+n,e}lodAt(e){var t;return((t=this._levelToLOD)==null?void 0:t[e])??null}clone(){return Is.fromJSON(this.write({}))}getCompatibleForVTL(e){if(this.size[0]!==this.size[1]||this.size[0]===256&&e===512)return null;const t=(this.size[0]===512&&e===256?-1:0)+(this.spatialReference.isGeographic?1:0);if(this.size[0]===e&&t===0)return this;const r=[],i=this.lods.length-t;for(let s=0;s<i;s++){const n=s+t,{scale:o,resolution:a}=n>=0?this.lods[n]:{scale:2*this.lods[0].scale,resolution:2*this.lods[0].resolution};r.push(new Ks({level:s,scale:o,resolution:a}))}return new Is({size:[e,e],dpi:this.dpi,format:this.format,compressionQuality:this.compressionQuality,origin:this.origin,spatialReference:this.spatialReference,lods:r})}_initializeUpsampleLevels(){const e=this.lods;this._upsampleLevels=[];let t=null;for(let r=0;r<e.length;r++){const i=e[r];this._upsampleLevels[i.level]={parentLevel:t?t.level:-1,factor:t?t.resolution/i.resolution:0},t=i}}};c([d({type:Number,json:{write:!0}})],ct.prototype,"compressionQuality",void 0),c([d({type:Number,json:{write:!0}})],ct.prototype,"dpi",void 0),c([d({type:String,json:{read:O2.read,write:O2.write,origins:{"web-scene":{read:!1,write:!1}}}})],ct.prototype,"format",void 0),c([d({readOnly:!0})],ct.prototype,"isWrappable",null),c([d({type:te,json:{write:!0}})],ct.prototype,"origin",void 0),c([de("origin")],ct.prototype,"readOrigin",null),c([d({type:[Ks],value:null,json:{write:!0}})],ct.prototype,"lods",null),c([d({readOnly:!0})],ct.prototype,"scales",void 0),c([d({cast:e=>Array.isArray(e)?e:typeof e=="number"?[e,e]:[256,256]})],ct.prototype,"size",void 0),c([de("size",["rows","cols"])],ct.prototype,"readSize",null),c([oe("size",{cols:{type:Te},rows:{type:Te}})],ct.prototype,"writeSize",null),c([d({type:ae,json:{write:!0}})],ct.prototype,"spatialReference",void 0),ct=Is=c([S("esri.layers.support.TileInfo")],ct),function(e){var t;(t=e.ExtrapolateOptions||(e.ExtrapolateOptions={}))[t.NONE=0]="NONE",t[t.POWER_OF_TWO=1]="POWER_OF_TWO"}(ct||(ct={}));const mF=ct,Od={widthBreakpoint:{getValue(e){const t=e.viewSize[0],r=e.breakpoints,i=this.values;return t<=r.xsmall?i.xsmall:t<=r.small?i.small:t<=r.medium?i.medium:t<=r.large?i.large:i.xlarge},values:{xsmall:"xsmall",small:"small",medium:"medium",large:"large",xlarge:"xlarge"},valueToClassName:{xsmall:"esri-view-width-xsmall esri-view-width-less-than-small esri-view-width-less-than-medium esri-view-width-less-than-large esri-view-width-less-than-xlarge",small:"esri-view-width-small esri-view-width-greater-than-xsmall esri-view-width-less-than-medium esri-view-width-less-than-large esri-view-width-less-than-xlarge",medium:"esri-view-width-medium esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-less-than-large esri-view-width-less-than-xlarge",large:"esri-view-width-large esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-greater-than-medium esri-view-width-less-than-xlarge",xlarge:"esri-view-width-xlarge esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-greater-than-medium esri-view-width-greater-than-large"}},heightBreakpoint:{getValue(e){const t=e.viewSize[1],r=e.breakpoints,i=this.values;return t<=r.xsmall?i.xsmall:t<=r.small?i.small:t<=r.medium?i.medium:t<=r.large?i.large:i.xlarge},values:{xsmall:"xsmall",small:"small",medium:"medium",large:"large",xlarge:"xlarge"},valueToClassName:{xsmall:"esri-view-height-xsmall esri-view-height-less-than-small esri-view-height-less-than-medium esri-view-height-less-than-large esri-view-height-less-than-xlarge",small:"esri-view-height-small esri-view-height-greater-than-xsmall esri-view-height-less-than-medium esri-view-height-less-than-large esri-view-height-less-than-xlarge",medium:"esri-view-height-medium esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-less-than-large esri-view-height-less-than-xlarge",large:"esri-view-height-large esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-greater-than-medium esri-view-height-less-than-xlarge",xlarge:"esri-view-height-xlarge esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-greater-than-medium esri-view-height-greater-than-large"}},orientation:{getValue(e){const t=e.viewSize,r=t[0],i=t[1],s=this.values;return i>=r?s.portrait:s.landscape},values:{portrait:"portrait",landscape:"landscape"},valueToClassName:{portrait:"esri-view-orientation-portrait",landscape:"esri-view-orientation-landscape"}}},Xm={xsmall:544,small:768,medium:992,large:1200};function yF(e){const t=e;return t&&t.xsmall<t.small&&t.small<t.medium&&t.medium<t.large}function Qm(e,t){return t?Od[e].valueToClassName[t].split(" "):[]}const gF=e=>{let t=class extends e{constructor(...r){super(...r),this.orientation=null,this.widthBreakpoint=null,this.heightBreakpoint=null,this.breakpoints=Xm}initialize(){this.addHandles(X(()=>[this.breakpoints,this.size],()=>this._updateClassNames(),St))}destroy(){this.destroyed||this._removeActiveClassNames()}set breakpoints(r){if(r!==this._get("breakpoints")){if(!yF(r)){const i=JSON.stringify(Xm,null,2);console.warn("provided breakpoints are not valid, using defaults:"+i),r=Xm}this._set("breakpoints",{...r})}}_updateClassNames(){if(!this.container)return;const r=Ot.acquire(),i=Ot.acquire();let s,n=!1;for(s in Od){const o=this[s],a=Od[s].getValue({viewSize:this.size,breakpoints:this.breakpoints});o!==a&&(n=!0,this[s]=a,Qm(s,o).forEach(l=>i.push(l)),Qm(s,a).forEach(l=>r.push(l)))}n&&(this._applyClassNameChanges(r,i),Ot.release(r),Ot.release(i))}_applyClassNameChanges(r,i){const s=this.container;s&&(i.forEach(n=>s.classList.remove(n)),r.forEach(n=>s.classList.add(n)))}_removeActiveClassNames(){const r=this.container;if(!r)return;let i;for(i in Od)Qm(i,this[i]).forEach(s=>r.classList.remove(s))}};return c([d()],t.prototype,"breakpoints",null),c([d()],t.prototype,"orientation",void 0),c([d()],t.prototype,"widthBreakpoint",void 0),c([d()],t.prototype,"heightBreakpoint",void 0),t=c([S("esri.views.BreakpointsOwner")],t),t};function fv(e){return typeof e=="string"?document.getElementById(e):e??null}function C2(e,t){for(;;){const r=e.firstChild;if(!r)break;t.appendChild(r)}}let $o=class extends q{constructor(){super(...arguments),this.updating=!1,this._handleId=0,this._scheduleHandleId=0,this._pendingPromises=new Set}destroy(){this.removeAll()}add(t,r,i={}){return this._installWatch(t,r,i,X)}addWhen(t,r,i={}){return this._installWatch(t,r,i,Or)}addOnCollectionChange(t,r,{initial:i=!1,final:s=!1}={}){const n=++this._handleId;return this.addHandles([vn(t,"after-changes",this._createSyncUpdatingCallback(),wn),vn(t,"change",r,{onListenerAdd:i?o=>r({added:o.toArray(),removed:[]}):void 0,onListenerRemove:s?o=>r({added:[],removed:o.toArray()}):void 0})],n),ue(()=>this.removeHandles(n))}addPromise(t){if(t==null)return t;const r=++this._handleId;this.addHandles(ue(()=>{this._pendingPromises.delete(t)&&(this._pendingPromises.size!==0||this.hasHandles(Gh)||this._set("updating",!1))}),r),this._pendingPromises.add(t),this._set("updating",!0);const i=()=>this.removeHandles(r);return t.then(i,i),t}removeAll(){this._pendingPromises.clear(),this.removeAllHandles(),this._set("updating",!1)}_installWatch(t,r,i={},s){const n=++this._handleId;i.sync||this._installSyncUpdatingWatch(t,n);const o=s(t,r,i);return this.addHandles(o,n),ue(()=>this.removeHandles(n))}_installSyncUpdatingWatch(t,r){const i=this._createSyncUpdatingCallback(),s=X(t,i,{sync:!0,equals:()=>!1});return this.addHandles(s,r),s}_createSyncUpdatingCallback(){return()=>{this.removeHandles(Gh),++this._scheduleHandleId;const t=this._scheduleHandleId;this._get("updating")||this._set("updating",!0),this.addHandles(Kc(()=>{t===this._scheduleHandleId&&(this._set("updating",this._pendingPromises.size>0),this.removeHandles(Gh))}),Gh)}}};c([d({readOnly:!0})],$o.prototype,"updating",void 0),$o=c([S("esri.core.support.UpdatingHandles")],$o);const Gh=-42;/*!
 * @esri/arcgis-html-sanitizer - v4.1.0 - Tue Dec 03 2024 09:13:28 GMT-0500 (Eastern Standard Time)
 * Copyright (c) 2024 - Environmental Systems Research Institute, Inc.
 * Apache-2.0
 * 
 * js-xss
 * Copyright (c) 2012-2018 Zongmin Lei(é›·å®—æ°‘) <leizongmin@gmail.com>
 * http://ucdok.com
 * MIT License, see https://github.com/leizongmin/js-xss/blob/master/LICENSE for details
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Bp=function(){return Bp=Object.assign||function(t){for(var r,i=1,s=arguments.length;i<s;i++){r=arguments[i];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Bp.apply(this,arguments)},Kg={exports:{}},De={},Xg={exports:{}},Bo={};function Qx(){var e={};return e["align-content"]=!1,e["align-items"]=!1,e["align-self"]=!1,e["alignment-adjust"]=!1,e["alignment-baseline"]=!1,e.all=!1,e["anchor-point"]=!1,e.animation=!1,e["animation-delay"]=!1,e["animation-direction"]=!1,e["animation-duration"]=!1,e["animation-fill-mode"]=!1,e["animation-iteration-count"]=!1,e["animation-name"]=!1,e["animation-play-state"]=!1,e["animation-timing-function"]=!1,e.azimuth=!1,e["backface-visibility"]=!1,e.background=!0,e["background-attachment"]=!0,e["background-clip"]=!0,e["background-color"]=!0,e["background-image"]=!0,e["background-origin"]=!0,e["background-position"]=!0,e["background-repeat"]=!0,e["background-size"]=!0,e["baseline-shift"]=!1,e.binding=!1,e.bleed=!1,e["bookmark-label"]=!1,e["bookmark-level"]=!1,e["bookmark-state"]=!1,e.border=!0,e["border-bottom"]=!0,e["border-bottom-color"]=!0,e["border-bottom-left-radius"]=!0,e["border-bottom-right-radius"]=!0,e["border-bottom-style"]=!0,e["border-bottom-width"]=!0,e["border-collapse"]=!0,e["border-color"]=!0,e["border-image"]=!0,e["border-image-outset"]=!0,e["border-image-repeat"]=!0,e["border-image-slice"]=!0,e["border-image-source"]=!0,e["border-image-width"]=!0,e["border-left"]=!0,e["border-left-color"]=!0,e["border-left-style"]=!0,e["border-left-width"]=!0,e["border-radius"]=!0,e["border-right"]=!0,e["border-right-color"]=!0,e["border-right-style"]=!0,e["border-right-width"]=!0,e["border-spacing"]=!0,e["border-style"]=!0,e["border-top"]=!0,e["border-top-color"]=!0,e["border-top-left-radius"]=!0,e["border-top-right-radius"]=!0,e["border-top-style"]=!0,e["border-top-width"]=!0,e["border-width"]=!0,e.bottom=!1,e["box-decoration-break"]=!0,e["box-shadow"]=!0,e["box-sizing"]=!0,e["box-snap"]=!0,e["box-suppress"]=!0,e["break-after"]=!0,e["break-before"]=!0,e["break-inside"]=!0,e["caption-side"]=!1,e.chains=!1,e.clear=!0,e.clip=!1,e["clip-path"]=!1,e["clip-rule"]=!1,e.color=!0,e["color-interpolation-filters"]=!0,e["column-count"]=!1,e["column-fill"]=!1,e["column-gap"]=!1,e["column-rule"]=!1,e["column-rule-color"]=!1,e["column-rule-style"]=!1,e["column-rule-width"]=!1,e["column-span"]=!1,e["column-width"]=!1,e.columns=!1,e.contain=!1,e.content=!1,e["counter-increment"]=!1,e["counter-reset"]=!1,e["counter-set"]=!1,e.crop=!1,e.cue=!1,e["cue-after"]=!1,e["cue-before"]=!1,e.cursor=!1,e.direction=!1,e.display=!0,e["display-inside"]=!0,e["display-list"]=!0,e["display-outside"]=!0,e["dominant-baseline"]=!1,e.elevation=!1,e["empty-cells"]=!1,e.filter=!1,e.flex=!1,e["flex-basis"]=!1,e["flex-direction"]=!1,e["flex-flow"]=!1,e["flex-grow"]=!1,e["flex-shrink"]=!1,e["flex-wrap"]=!1,e.float=!1,e["float-offset"]=!1,e["flood-color"]=!1,e["flood-opacity"]=!1,e["flow-from"]=!1,e["flow-into"]=!1,e.font=!0,e["font-family"]=!0,e["font-feature-settings"]=!0,e["font-kerning"]=!0,e["font-language-override"]=!0,e["font-size"]=!0,e["font-size-adjust"]=!0,e["font-stretch"]=!0,e["font-style"]=!0,e["font-synthesis"]=!0,e["font-variant"]=!0,e["font-variant-alternates"]=!0,e["font-variant-caps"]=!0,e["font-variant-east-asian"]=!0,e["font-variant-ligatures"]=!0,e["font-variant-numeric"]=!0,e["font-variant-position"]=!0,e["font-weight"]=!0,e.grid=!1,e["grid-area"]=!1,e["grid-auto-columns"]=!1,e["grid-auto-flow"]=!1,e["grid-auto-rows"]=!1,e["grid-column"]=!1,e["grid-column-end"]=!1,e["grid-column-start"]=!1,e["grid-row"]=!1,e["grid-row-end"]=!1,e["grid-row-start"]=!1,e["grid-template"]=!1,e["grid-template-areas"]=!1,e["grid-template-columns"]=!1,e["grid-template-rows"]=!1,e["hanging-punctuation"]=!1,e.height=!0,e.hyphens=!1,e.icon=!1,e["image-orientation"]=!1,e["image-resolution"]=!1,e["ime-mode"]=!1,e["initial-letters"]=!1,e["inline-box-align"]=!1,e["justify-content"]=!1,e["justify-items"]=!1,e["justify-self"]=!1,e.left=!1,e["letter-spacing"]=!0,e["lighting-color"]=!0,e["line-box-contain"]=!1,e["line-break"]=!1,e["line-grid"]=!1,e["line-height"]=!1,e["line-snap"]=!1,e["line-stacking"]=!1,e["line-stacking-ruby"]=!1,e["line-stacking-shift"]=!1,e["line-stacking-strategy"]=!1,e["list-style"]=!0,e["list-style-image"]=!0,e["list-style-position"]=!0,e["list-style-type"]=!0,e.margin=!0,e["margin-bottom"]=!0,e["margin-left"]=!0,e["margin-right"]=!0,e["margin-top"]=!0,e["marker-offset"]=!1,e["marker-side"]=!1,e.marks=!1,e.mask=!1,e["mask-box"]=!1,e["mask-box-outset"]=!1,e["mask-box-repeat"]=!1,e["mask-box-slice"]=!1,e["mask-box-source"]=!1,e["mask-box-width"]=!1,e["mask-clip"]=!1,e["mask-image"]=!1,e["mask-origin"]=!1,e["mask-position"]=!1,e["mask-repeat"]=!1,e["mask-size"]=!1,e["mask-source-type"]=!1,e["mask-type"]=!1,e["max-height"]=!0,e["max-lines"]=!1,e["max-width"]=!0,e["min-height"]=!0,e["min-width"]=!0,e["move-to"]=!1,e["nav-down"]=!1,e["nav-index"]=!1,e["nav-left"]=!1,e["nav-right"]=!1,e["nav-up"]=!1,e["object-fit"]=!1,e["object-position"]=!1,e.opacity=!1,e.order=!1,e.orphans=!1,e.outline=!1,e["outline-color"]=!1,e["outline-offset"]=!1,e["outline-style"]=!1,e["outline-width"]=!1,e.overflow=!1,e["overflow-wrap"]=!1,e["overflow-x"]=!1,e["overflow-y"]=!1,e.padding=!0,e["padding-bottom"]=!0,e["padding-left"]=!0,e["padding-right"]=!0,e["padding-top"]=!0,e.page=!1,e["page-break-after"]=!1,e["page-break-before"]=!1,e["page-break-inside"]=!1,e["page-policy"]=!1,e.pause=!1,e["pause-after"]=!1,e["pause-before"]=!1,e.perspective=!1,e["perspective-origin"]=!1,e.pitch=!1,e["pitch-range"]=!1,e["play-during"]=!1,e.position=!1,e["presentation-level"]=!1,e.quotes=!1,e["region-fragment"]=!1,e.resize=!1,e.rest=!1,e["rest-after"]=!1,e["rest-before"]=!1,e.richness=!1,e.right=!1,e.rotation=!1,e["rotation-point"]=!1,e["ruby-align"]=!1,e["ruby-merge"]=!1,e["ruby-position"]=!1,e["shape-image-threshold"]=!1,e["shape-outside"]=!1,e["shape-margin"]=!1,e.size=!1,e.speak=!1,e["speak-as"]=!1,e["speak-header"]=!1,e["speak-numeral"]=!1,e["speak-punctuation"]=!1,e["speech-rate"]=!1,e.stress=!1,e["string-set"]=!1,e["tab-size"]=!1,e["table-layout"]=!1,e["text-align"]=!0,e["text-align-last"]=!0,e["text-combine-upright"]=!0,e["text-decoration"]=!0,e["text-decoration-color"]=!0,e["text-decoration-line"]=!0,e["text-decoration-skip"]=!0,e["text-decoration-style"]=!0,e["text-emphasis"]=!0,e["text-emphasis-color"]=!0,e["text-emphasis-position"]=!0,e["text-emphasis-style"]=!0,e["text-height"]=!0,e["text-indent"]=!0,e["text-justify"]=!0,e["text-orientation"]=!0,e["text-overflow"]=!0,e["text-shadow"]=!0,e["text-space-collapse"]=!0,e["text-transform"]=!0,e["text-underline-position"]=!0,e["text-wrap"]=!0,e.top=!1,e.transform=!1,e["transform-origin"]=!1,e["transform-style"]=!1,e.transition=!1,e["transition-delay"]=!1,e["transition-duration"]=!1,e["transition-property"]=!1,e["transition-timing-function"]=!1,e["unicode-bidi"]=!1,e["vertical-align"]=!1,e.visibility=!1,e["voice-balance"]=!1,e["voice-duration"]=!1,e["voice-family"]=!1,e["voice-pitch"]=!1,e["voice-range"]=!1,e["voice-rate"]=!1,e["voice-stress"]=!1,e["voice-volume"]=!1,e.volume=!1,e["white-space"]=!1,e.widows=!1,e.width=!0,e["will-change"]=!1,e["word-break"]=!0,e["word-spacing"]=!0,e["word-wrap"]=!0,e["wrap-flow"]=!1,e["wrap-through"]=!1,e["writing-mode"]=!1,e["z-index"]=!1,e}function _F(e,t,r){}function vF(e,t,r){}var wF=/javascript\s*\:/img;function bF(e,t){return wF.test(t)?"":t}Bo.whiteList=Qx();Bo.getDefaultWhiteList=Qx;Bo.onAttr=_F;Bo.onIgnoreAttr=vF;Bo.safeAttrValue=bF;var SF={indexOf:function(e,t){var r,i;if(Array.prototype.indexOf)return e.indexOf(t);for(r=0,i=e.length;r<i;r++)if(e[r]===t)return r;return-1},forEach:function(e,t,r){var i,s;if(Array.prototype.forEach)return e.forEach(t,r);for(i=0,s=e.length;i<s;i++)t.call(r,e[i],i,e)},trim:function(e){return String.prototype.trim?e.trim():e.replace(/(^\s*)|(\s*$)/g,"")},trimRight:function(e){return String.prototype.trimRight?e.trimRight():e.replace(/(\s*$)/g,"")}},zl=SF;function TF(e,t){e=zl.trimRight(e),e[e.length-1]!==";"&&(e+=";");var r=e.length,i=!1,s=0,n=0,o="";function a(){if(!i){var p=zl.trim(e.slice(s,n)),f=p.indexOf(":");if(f!==-1){var m=zl.trim(p.slice(0,f)),y=zl.trim(p.slice(f+1));if(m){var _=t(s,o.length,m,y,p);_&&(o+=_+"; ")}}}s=n+1}for(;n<r;n++){var l=e[n];if(l==="/"&&e[n+1]==="*"){var h=e.indexOf("*/",n+2);if(h===-1)break;n=h+1,s=n+1,i=!1}else l==="("?i=!0:l===")"?i=!1:l===";"?i||a():l===`
`&&a()}return zl.trim(o)}var $F=TF,zh=Bo,EF=$F;function I2(e){return e==null}function MF(e){var t={};for(var r in e)t[r]=e[r];return t}function eA(e){e=MF(e||{}),e.whiteList=e.whiteList||zh.whiteList,e.onAttr=e.onAttr||zh.onAttr,e.onIgnoreAttr=e.onIgnoreAttr||zh.onIgnoreAttr,e.safeAttrValue=e.safeAttrValue||zh.safeAttrValue,this.options=e}eA.prototype.process=function(e){if(e=e||"",e=e.toString(),!e)return"";var t=this,r=t.options,i=r.whiteList,s=r.onAttr,n=r.onIgnoreAttr,o=r.safeAttrValue,a=EF(e,function(l,h,p,f,m){var y=i[p],_=!1;if(y===!0?_=y:typeof y=="function"?_=y(f):y instanceof RegExp&&(_=y.test(f)),_!==!0&&(_=!1),f=o(p,f),!!f){var v={position:h,sourcePosition:l,source:m,isWhite:_};if(_){var w=s(p,f,v);return I2(w)?p+":"+f:w}else{var w=n(p,f,v);if(!I2(w))return w}}});return a};var xF=eA;(function(e,t){var r=Bo,i=xF;function s(o,a){var l=new i(a);return l.process(o)}t=e.exports=s,t.FilterCSS=i;for(var n in r)t[n]=r[n]})(Xg,Xg.exports);var mv=Xg.exports,yv={indexOf:function(e,t){var r,i;if(Array.prototype.indexOf)return e.indexOf(t);for(r=0,i=e.length;r<i;r++)if(e[r]===t)return r;return-1},forEach:function(e,t,r){var i,s;if(Array.prototype.forEach)return e.forEach(t,r);for(i=0,s=e.length;i<s;i++)t.call(r,e[i],i,e)},trim:function(e){return String.prototype.trim?e.trim():e.replace(/(^\s*)|(\s*$)/g,"")},spaceIndex:function(e){var t=/\s|\n|\t/,r=t.exec(e);return r?r.index:-1}},AF=mv.FilterCSS,PF=mv.getDefaultWhiteList,Hp=yv;function tA(){return{a:["target","href","title"],abbr:["title"],address:[],area:["shape","coords","href","alt"],article:[],aside:[],audio:["autoplay","controls","crossorigin","loop","muted","preload","src"],b:[],bdi:["dir"],bdo:["dir"],big:[],blockquote:["cite"],br:[],caption:[],center:[],cite:[],code:[],col:["align","valign","span","width"],colgroup:["align","valign","span","width"],dd:[],del:["datetime"],details:["open"],div:[],dl:[],dt:[],em:[],figcaption:[],figure:[],font:["color","size","face"],footer:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],header:[],hr:[],i:[],img:["src","alt","title","width","height"],ins:["datetime"],li:[],mark:[],nav:[],ol:[],p:[],pre:[],s:[],section:[],small:[],span:[],sub:[],summary:[],sup:[],strong:[],strike:[],table:["width","border","align","valign"],tbody:["align","valign"],td:["width","rowspan","colspan","align","valign"],tfoot:["align","valign"],th:["width","rowspan","colspan","align","valign"],thead:["align","valign"],tr:["rowspan","align","valign"],tt:[],u:[],ul:[],video:["autoplay","controls","crossorigin","loop","muted","playsinline","poster","preload","src","height","width"]}}var rA=new AF;function OF(e,t,r){}function CF(e,t,r){}function IF(e,t,r){}function RF(e,t,r){}function iA(e){return e.replace(NF,"&lt;").replace(LF,"&gt;")}function kF(e,t,r,i){if(r=uA(r),t==="href"||t==="src"){if(r=Hp.trim(r),r==="#")return"#";if(!(r.substr(0,7)==="http://"||r.substr(0,8)==="https://"||r.substr(0,7)==="mailto:"||r.substr(0,4)==="tel:"||r.substr(0,11)==="data:image/"||r.substr(0,6)==="ftp://"||r.substr(0,2)==="./"||r.substr(0,3)==="../"||r[0]==="#"||r[0]==="/"))return""}else if(t==="background"){if(Vh.lastIndex=0,Vh.test(r))return""}else if(t==="style"){if(R2.lastIndex=0,R2.test(r)||(k2.lastIndex=0,k2.test(r)&&(Vh.lastIndex=0,Vh.test(r))))return"";i!==!1&&(i=i||rA,r=i.process(r))}return r=cA(r),r}var NF=/</g,LF=/>/g,DF=/"/g,FF=/&quot;/g,UF=/&#([a-zA-Z0-9]*);?/gim,jF=/&colon;?/gim,GF=/&newline;?/gim,Vh=/((j\s*a\s*v\s*a|v\s*b|l\s*i\s*v\s*e)\s*s\s*c\s*r\s*i\s*p\s*t\s*|m\s*o\s*c\s*h\s*a):/gi,R2=/e\s*x\s*p\s*r\s*e\s*s\s*s\s*i\s*o\s*n\s*\(.*/gi,k2=/u\s*r\s*l\s*\(.*/gi;function sA(e){return e.replace(DF,"&quot;")}function nA(e){return e.replace(FF,'"')}function oA(e){return e.replace(UF,function(r,i){return i[0]==="x"||i[0]==="X"?String.fromCharCode(parseInt(i.substr(1),16)):String.fromCharCode(parseInt(i,10))})}function aA(e){return e.replace(jF,":").replace(GF," ")}function lA(e){for(var t="",r=0,i=e.length;r<i;r++)t+=e.charCodeAt(r)<32?" ":e.charAt(r);return Hp.trim(t)}function uA(e){return e=nA(e),e=oA(e),e=aA(e),e=lA(e),e}function cA(e){return e=sA(e),e=iA(e),e}function zF(){return""}function VF(e,t){typeof t!="function"&&(t=function(){});var r=!Array.isArray(e);function i(o){return r?!0:Hp.indexOf(e,o)!==-1}var s=[],n=!1;return{onIgnoreTag:function(o,a,l){if(i(o))if(l.isClosing){var h="[/removed]",p=l.position+h.length;return s.push([n!==!1?n:l.position,p]),n=!1,h}else return n||(n=l.position),"[removed]";else return t(o,a,l)},remove:function(o){var a="",l=0;return Hp.forEach(s,function(h){a+=o.slice(l,h[0]),l=h[1]}),a+=o.slice(l),a}}}function BF(e){for(var t="",r=0;r<e.length;){var i=e.indexOf("<!--",r);if(i===-1){t+=e.slice(r);break}t+=e.slice(r,i);var s=e.indexOf("-->",i);if(s===-1)break;r=s+3}return t}function HF(e){var t=e.split("");return t=t.filter(function(r){var i=r.charCodeAt(0);return i===127?!1:i<=31?i===10||i===13:!0}),t.join("")}De.whiteList=tA();De.getDefaultWhiteList=tA;De.onTag=OF;De.onIgnoreTag=CF;De.onTagAttr=IF;De.onIgnoreTagAttr=RF;De.safeAttrValue=kF;De.escapeHtml=iA;De.escapeQuote=sA;De.unescapeQuote=nA;De.escapeHtmlEntities=oA;De.escapeDangerHtml5Entities=aA;De.clearNonPrintableCharacter=lA;De.friendlyAttrValue=uA;De.escapeAttrValue=cA;De.onIgnoreTagStripAll=zF;De.StripTagBody=VF;De.stripCommentTag=BF;De.stripBlankChar=HF;De.cssFilter=rA;De.getDefaultCSSWhiteList=PF;var Jf={},Xs=yv;function qF(e){var t=Xs.spaceIndex(e),r;return t===-1?r=e.slice(1,-1):r=e.slice(1,t+1),r=Xs.trim(r).toLowerCase(),r.slice(0,1)==="/"&&(r=r.slice(1)),r.slice(-1)==="/"&&(r=r.slice(0,-1)),r}function WF(e){return e.slice(0,2)==="</"}function ZF(e,t,r){var i="",s=0,n=!1,o=!1,a=0,l=e.length,h="",p="";e:for(a=0;a<l;a++){var f=e.charAt(a);if(n===!1){if(f==="<"){n=a;continue}}else if(o===!1){if(f==="<"){i+=r(e.slice(s,a)),n=a,s=a;continue}if(f===">"){i+=r(e.slice(s,n)),p=e.slice(n,a+1),h=qF(p),i+=t(n,i.length,h,p,WF(p)),s=a+1,n=!1;continue}if(f==='"'||f==="'")for(var m=1,y=e.charAt(a-m);y.trim()===""||y==="=";){if(y==="="){o=f;continue e}y=e.charAt(a-++m)}}else if(f===o){o=!1;continue}}return s<e.length&&(i+=r(e.substr(s))),i}var JF=/[^a-zA-Z0-9\\_:.-]/gim;function YF(e,t){var r=0,i=0,s=[],n=!1,o=e.length;function a(m,y){if(m=Xs.trim(m),m=m.replace(JF,"").toLowerCase(),!(m.length<1)){var _=t(m,y||"");_&&s.push(_)}}for(var l=0;l<o;l++){var h=e.charAt(l),p,f;if(n===!1&&h==="="){n=e.slice(r,l),r=l+1,i=e.charAt(r)==='"'||e.charAt(r)==="'"?r:XF(e,l+1);continue}if(n!==!1&&l===i){if(f=e.indexOf(h,l+1),f===-1)break;p=Xs.trim(e.slice(i+1,f)),a(n,p),n=!1,l=f,r=l+1;continue}if(/\s|\n|\t/.test(h))if(e=e.replace(/\s|\n|\t/g," "),n===!1)if(f=KF(e,l),f===-1){p=Xs.trim(e.slice(r,l)),a(p),n=!1,r=l+1;continue}else{l=f-1;continue}else if(f=QF(e,l-1),f===-1){p=Xs.trim(e.slice(r,l)),p=N2(p),a(n,p),n=!1,r=l+1;continue}else continue}return r<e.length&&(n===!1?a(e.slice(r)):a(n,N2(Xs.trim(e.slice(r))))),Xs.trim(s.join(" "))}function KF(e,t){for(;t<e.length;t++){var r=e[t];if(r!==" ")return r==="="?t:-1}}function XF(e,t){for(;t<e.length;t++){var r=e[t];if(r!==" ")return r==="'"||r==='"'?t:-1}}function QF(e,t){for(;t>0;t--){var r=e[t];if(r!==" ")return r==="="?t:-1}}function eU(e){return e[0]==='"'&&e[e.length-1]==='"'||e[0]==="'"&&e[e.length-1]==="'"}function N2(e){return eU(e)?e.substr(1,e.length-2):e}Jf.parseTag=ZF;Jf.parseAttr=YF;var tU=mv.FilterCSS,Yr=De,hA=Jf,rU=hA.parseTag,iU=hA.parseAttr,Cd=yv;function Bh(e){return e==null}function sU(e){var t=Cd.spaceIndex(e);if(t===-1)return{html:"",closing:e[e.length-2]==="/"};e=Cd.trim(e.slice(t+1,-1));var r=e[e.length-1]==="/";return r&&(e=Cd.trim(e.slice(0,-1))),{html:e,closing:r}}function nU(e){var t={};for(var r in e)t[r]=e[r];return t}function oU(e){var t={};for(var r in e)Array.isArray(e[r])?t[r.toLowerCase()]=e[r].map(function(i){return i.toLowerCase()}):t[r.toLowerCase()]=e[r];return t}function dA(e){e=nU(e||{}),e.stripIgnoreTag&&(e.onIgnoreTag&&console.error('Notes: cannot use these two options "stripIgnoreTag" and "onIgnoreTag" at the same time'),e.onIgnoreTag=Yr.onIgnoreTagStripAll),e.whiteList||e.allowList?e.whiteList=oU(e.whiteList||e.allowList):e.whiteList=Yr.whiteList,e.onTag=e.onTag||Yr.onTag,e.onTagAttr=e.onTagAttr||Yr.onTagAttr,e.onIgnoreTag=e.onIgnoreTag||Yr.onIgnoreTag,e.onIgnoreTagAttr=e.onIgnoreTagAttr||Yr.onIgnoreTagAttr,e.safeAttrValue=e.safeAttrValue||Yr.safeAttrValue,e.escapeHtml=e.escapeHtml||Yr.escapeHtml,this.options=e,e.css===!1?this.cssFilter=!1:(e.css=e.css||{},this.cssFilter=new tU(e.css))}dA.prototype.process=function(e){if(e=e||"",e=e.toString(),!e)return"";var t=this,r=t.options,i=r.whiteList,s=r.onTag,n=r.onIgnoreTag,o=r.onTagAttr,a=r.onIgnoreTagAttr,l=r.safeAttrValue,h=r.escapeHtml,p=t.cssFilter;r.stripBlankChar&&(e=Yr.stripBlankChar(e)),r.allowCommentTag||(e=Yr.stripCommentTag(e));var f=!1;r.stripIgnoreTagBody&&(f=Yr.StripTagBody(r.stripIgnoreTagBody,n),n=f.onIgnoreTag);var m=rU(e,function(y,_,v,w,b){var M={sourcePosition:y,position:_,isClosing:b,isWhite:Object.prototype.hasOwnProperty.call(i,v)},$=s(v,w,M);if(!Bh($))return $;if(M.isWhite){if(M.isClosing)return"</"+v+">";var E=sU(w),P=i[v],O=iU(E.html,function(L,k){var G=Cd.indexOf(P,L)!==-1,V=o(v,L,k,G);return Bh(V)?G?(k=l(v,L,k,p),k?L+'="'+k+'"':L):(V=a(v,L,k,G),Bh(V)?void 0:V):V});return w="<"+v,O&&(w+=" "+O),E.closing&&(w+=" /"),w+=">",w}else return $=n(v,w,M),Bh($)?h(w):$},h);return f&&(m=f.remove(m)),m};var aU=dA;(function(e,t){var r=De,i=Jf,s=aU;function n(a,l){var h=new s(l);return h.process(a)}t=e.exports=n,t.filterXSS=n,t.FilterXSS=s,function(){for(var a in r)t[a]=r[a];for(var l in i)t[l]=i[l]}();function o(){return typeof self<"u"&&typeof DedicatedWorkerGlobalScope<"u"&&self instanceof DedicatedWorkerGlobalScope}o()&&(self.filterXSS=e.exports)})(Kg,Kg.exports);var Yo=Kg.exports,lU=function(e){if(typeof e!="object"||e===null||Object.prototype.toString.call(e)!=="[object Object]")return!1;var t=Object.getPrototypeOf(e);if(t===null)return!0;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t},uU=function(){function e(t,r){var i=this;this.arcgisWhiteList={a:["href","style","target"],abbr:["title"],article:["style"],aside:["style"],audio:["autoplay","controls","loop","muted","preload"],b:[],blockquote:["style"],br:[],code:["style"],dd:["style"],del:["style"],details:["open","style"],div:["align","aria-hidden","aria-label","style"],dl:["style"],dt:["style"],em:[],figcaption:["style"],figure:["style"],font:["color","face","size","style"],footer:["style"],h1:["style"],h2:["style"],h3:["style"],h4:["style"],h5:["style"],h6:["style"],header:["style"],hr:[],i:[],img:["alt","border","height","src","style","width"],li:[],main:["style"],mark:["style"],nav:["style"],ol:[],p:["style"],pre:["style"],section:["style"],source:["media","src","type"],span:["aria-hidden","aria-label","style"],strong:[],sub:["style"],summary:["style"],sup:["style"],table:["border","cellpadding","cellspacing","height","style","width"],tbody:[],tr:["align","height","style","valign"],td:["align","colspan","height","nowrap","rowspan","style","valign","width"],th:["align","colspan","height","nowrap","rowspan","style","valign","width"],time:["style"],u:[],ul:[],video:["autoplay","controls","height","loop","muted","poster","preload","width"]},this.arcgisCSSWhiteList=Bp(Bp({},Yo.getDefaultCSSWhiteList()),{"align-items":!0,"align-self":!0,flex:!0,"flex-basis":!0,"flex-direction":!0,"flex-flow":!0,"flex-grow":!0,"flex-shrink":!0,"flex-wrap":!0,float:!0,gap:!0,grid:!0,"grid-area":!0,"grid-auto-columns":!0,"grid-auto-flow":!0,"grid-auto-rows":!0,"grid-column":!0,"grid-column-end":!0,"grid-column-start":!0,"grid-row":!0,"grid-row-end":!0,"grid-row-start":!0,"grid-template":!0,"grid-template-areas":!0,"grid-template-columns":!0,"grid-template-rows":!0,"justify-content":!0,"justify-items":!0,"justify-self":!0,"line-height":!0,overflow:!0}),this.allowedProtocols=["http","https","mailto","iform","tel","flow","lfmobile","arcgis-navigator","arcgis-appstudio-player","arcgis-survey123","arcgis-collector","arcgis-workforce","arcgis-explorer","arcgis-trek2there","arcgis-quickcapture","mspbi","comgooglemaps","pdfefile","pdfehttp","pdfehttps","boxapp","boxemm","awb","awbs","gropen","radarscope"],this.arcgisFilterOptions={allowCommentTag:!0,safeAttrValue:function(n,o,a,l){return n==="a"&&o==="href"||(n==="img"||n==="source")&&o==="src"?i.sanitizeUrl(a):Yo.safeAttrValue(n,o,a,l)}},this._entityMap={"&":"&#x38;","<":"&#x3C;",">":"&#x3E;",'"':"&#x22;","'":"&#x27;","/":"&#x2F;"};var s;t&&!r?s=t:t&&r?(s=Object.create(this.arcgisFilterOptions),s.css={whiteList:this.arcgisCSSWhiteList},Object.keys(t).forEach(function(n){if(n==="whiteList")s.whiteList=i._extendObjectOfArrays([i.arcgisWhiteList,t.whiteList||{}]);else if(n==="css"){var o=t.css.whiteList;o!=null&&t.css instanceof Object&&Object.keys(o).forEach(function(a){return s.css.whiteList[a]=o[a]})}else s[n]=t[n]})):(s=Object.create(this.arcgisFilterOptions),s.whiteList=this.arcgisWhiteList,s.css={whiteList:this.arcgisCSSWhiteList}),this.xssFilterOptions=s,this._xssFilter=new Yo.FilterXSS(s)}return e.prototype.sanitize=function(t,r){switch(r===void 0&&(r={}),typeof t){case"number":return isNaN(t)||!isFinite(t)?null:t;case"boolean":return t;case"string":return this._xssFilter.process(t);case"object":return this._iterateOverObject(t,r);default:return r.allowUndefined&&typeof t>"u"?void 0:null}},e.prototype.sanitizeUrl=function(t,r){var i=(r??{}).isProtocolRequired,s=i===void 0?!0:i,n=this._trim(t.substring(0,t.indexOf(":"))),o=t==="/",a=/^#/.test(t),l=n&&this.allowedProtocols.indexOf(n.toLowerCase())>-1;return o||a||l?Yo.escapeAttrValue(t):!n&&!s?Yo.escapeAttrValue("https://".concat(t)):""},e.prototype.sanitizeHTMLAttribute=function(t,r,i,s){return typeof this.xssFilterOptions.safeAttrValue=="function"?this.xssFilterOptions.safeAttrValue(t,r,i,s):Yo.safeAttrValue(t,r,i,s)},e.prototype.validate=function(t,r){r===void 0&&(r={});var i=this.sanitize(t,r);return{isValid:t===i,sanitized:i}},e.prototype.encodeHTML=function(t){var r=this;return String(t).replace(/[&<>"'\/]/g,function(i){return r._entityMap[i]})},e.prototype.encodeAttrValue=function(t){var r=/^[a-zA-Z0-9]$/;return String(t).replace(/[\x00-\xFF]/g,function(i,s){return r.test(i)?i:"&#x".concat(Number(t.charCodeAt(s)).toString(16),";")})},e.prototype._extendObjectOfArrays=function(t){var r={};return t.forEach(function(i){Object.keys(i).forEach(function(s){Array.isArray(i[s])&&Array.isArray(r[s])?r[s]=r[s].concat(i[s]):r[s]=i[s]})}),r},e.prototype._iterateOverObject=function(t,r){var i=this;r===void 0&&(r={});try{var s=!1,n=void 0;if(Array.isArray(t))n=t.reduce(function(a,l){var h=i.validate(l,r);return h.isValid?a.concat([l]):(s=!0,a.concat([h.sanitized]))},[]);else if(lU(t)){var o=Object.keys(t);n=o.reduce(function(a,l){var h=t[l],p=i.validate(h,r);return p.isValid?a[l]=h:(s=!0,a[l]=p.sanitized),a},{})}else return r.allowUndefined&&typeof t>"u"?void 0:null;return s?n:t}catch{return null}},e.prototype._trim=function(t){return String.prototype.trim?t.trim():t.replace(/(^\s*)|(\s*$)/g,"")},e}();const Yf=new Map;function pA(){Yf.clear()}function cU(e){return Yf.get(e)}function hU(e,t){Yf.set(e,t)}function ey(e){Yf.delete(e)}function dU(...e){const t=Ot.acquire();for(let i=0;i<e.length;i++){const s=e[i],n=typeof s;if(n==="string")t.push(s);else if(Array.isArray(s))t.push.apply(t,s);else if(n==="object")for(const o in s)s[o]&&t.push(o)}const r=t.join(" ");return Ot.release(t),r}(()=>{const e=new Map,t=new ResizeObserver(i=>{var s;pA();for(const n of i)(s=e.get(n.target))==null||s(n)}),r=(i,s,n)=>(e.set(i,s),t.observe(i,n),ue(()=>{t.unobserve(i),e.delete(i)}));return(i,s,n)=>{let o=null;return qc([X(()=>typeof i=="function"?i():i,a=>{o==null||o.remove(),a&&(o=r(a,s,n))},jt),ue(()=>o==null?void 0:o.remove())])}})();function pU(e){const t=e==null?void 0:e.closest("[dir]");return t!==null&&t instanceof HTMLElement&&t.dir==="rtl"||document.dir==="rtl"}function ste(e){const t="data-node-ref";this[e.getAttribute(t)]=null}function nte(e){const t="data-node-ref";this[e.getAttribute(t)]=e}const fU=["dd","dl","dt","h1","h2","h3","h4","h5","h6","sub","sup","animate","animatetransform","circle","clippath","defs","ellipse","g","image","line","lineargradient","marker","mask","path","pattern","polygon","polyline","radialgradient","rect","stop","svg","switch","symbol","text","textpath","tspan","use"],mU=fU.reduce((e,t)=>(e[t]=[],e),{}),yU=["align","alink","alt","bgcolor","border","cellpadding","cellspacing","class","color","cols","colspan","coords","d","dir","face","height","hspace","ismap","lang","marginheight","marginwidth","multiple","nohref","noresize","noshade","nowrap","ref","rel","rev","rows","rowspan","scrolling","shape","span","summary","tabindex","title","usemap","valign","value","vlink","vspace","width"],fA=new uU({whiteList:mU,onTagAttr:(e,t,r)=>{const i=`${t}="${r}"`;if(yU.includes(t))return i},stripIgnoreTag:!0,stripIgnoreTagBody:["script","style"]},!0);function gU(e){return e==="Enter"||e===" "}async function _U(e,t){await xR(Yc(t));const r=typeof e=="function"?e():e;r&&("setFocus"in r&&typeof r.setFocus=="function"?await r.setFocus():r instanceof HTMLElement&&r.focus())}const mA="http://www.w3.org/",Kf=`${mA}2000/svg`,yA=`${mA}1999/xlink`;let L2=[],gv=(e,t)=>{let r={};return Object.keys(e).forEach(i=>{r[i]=e[i]}),t&&Object.keys(t).forEach(i=>{r[i]=t[i]}),r},_v=(e,t)=>e.vnodeSelector===t.vnodeSelector&&(e.properties&&t.properties?e.properties.key===t.properties.key&&e.properties.bind===t.properties.bind:!e.properties&&!t.properties),gA=e=>{if(typeof e!="string")throw new Error("Style values must be strings")},vU=(e,t,r)=>{if(t.vnodeSelector!==""){for(let i=r;i<e.length;i++)if(_v(e[i],t))return i}return-1},ty=(e,t,r,i)=>{let s=e[t];if(s.vnodeSelector==="")return;let n=s.properties;if(!(n&&(n.key===void 0?n.bind:n.key))){for(let o=0;o<e.length;o++)if(o!==t){let a=e[o];if(_v(a,s))throw new Error(`${r.vnodeSelector} had a ${s.vnodeSelector} child ${i==="added"?i:"removed"}, but there is now more than one. You must add unique key properties to make them distinguishable.`)}}},wU=e=>{if(e.properties){let t=e.properties.enterAnimation;t&&t(e.domNode,e.properties)}},Qg=[],e0=!1,_A=e=>{(e.children||[]).forEach(_A),e.properties&&e.properties.afterRemoved&&e.properties.afterRemoved.apply(e.properties.bind||e.properties,[e.domNode])},D2=()=>{e0=!1,Qg.forEach(_A),Qg.length=0},F2=e=>{Qg.push(e),e0||(e0=!0,typeof window<"u"&&"requestIdleCallback"in window?window.requestIdleCallback(D2,{timeout:16}):setTimeout(D2,16))},U2=e=>{let t=e.domNode;if(e.properties){let r=e.properties.exitAnimation;if(r)return t.style.pointerEvents="none",void r(t,()=>{t.parentNode&&(t.parentNode.removeChild(t),F2(e))},e.properties)}t.parentNode&&(t.parentNode.removeChild(t),F2(e))},bU=(e,t,r)=>{if(!t)return;let i=r.eventHandlerInterceptor,s=Object.keys(t),n=s.length;for(let o=0;o<n;o++){let a=s[o],l=t[a];if(a==="className")throw new Error('Property "className" is not supported, use "class".');if(a==="class")r0(e,l,!0);else if(a==="classes"){let h=Object.keys(l),p=h.length;for(let f=0;f<p;f++){let m=h[f];l[m]&&e.classList.add(m)}}else if(a==="styles"){let h=Object.keys(l),p=h.length;for(let f=0;f<p;f++){let m=h[f],y=l[m];y&&(gA(y),r.styleApplyer(e,m,y))}}else if(a!=="key"&&l!=null){let h=typeof l;h==="function"?(a.lastIndexOf("on",0)===0&&(i&&(l=i(a,l,e,t)),a==="oninput"&&function(){let p=l;l=function(f){p.apply(this,[f]),f.target["oninput-value"]=f.target.value}}()),e[a]=l):r.namespace===Kf?a==="href"?e.setAttributeNS(yA,a,l):e.setAttribute(a,l):h==="string"&&a!=="value"?a==="innerHTML"?e[a]=fA.sanitize(l):t0(e)&&a in e?e[a]=l:e.setAttribute(a,l):e[a]=l}}};function t0(e){if(!(e instanceof Element&&e.tagName.includes("-")))return!1;const t=window.customElements.get(e.tagName.toLowerCase());return!!t&&e instanceof t}let qp,SU=(e,t,r)=>{if(t)for(let i of t)oc(i,e,void 0,r)},vA=(e,t,r)=>{SU(e,t.children,r),t.text&&(e.textContent=t.text),bU(e,t.properties,r),t.properties&&t.properties.afterCreate&&t.properties.afterCreate.apply(t.properties.bind||t.properties,[e,r,t.vnodeSelector,t.properties,t.children])},oc=(e,t,r,i)=>{let s,n=0,o=e.vnodeSelector,a=t.ownerDocument;if(o==="")s=e.domNode=a.createTextNode(e.text),r!==void 0?t.insertBefore(s,r):t.appendChild(s);else{for(let l=0;l<=o.length;++l){let h=o.charAt(l);if(l===o.length||h==="."||h==="#"){let p=o.charAt(n-1),f=o.slice(n,l);p==="."?s.classList.add(f):p==="#"?s.id=f:(f==="svg"&&(i=gv(i,{namespace:Kf})),i.namespace!==void 0?s=e.domNode=a.createElementNS(i.namespace,f):(s=e.domNode=e.domNode||a.createElement(f),f==="input"&&e.properties&&e.properties.type!==void 0&&s.setAttribute("type",e.properties.type)),r!==void 0?t.insertBefore(s,r):s.parentNode!==t&&t.appendChild(s)),n=l+1}}vA(s,e,i)}},r0=(e,t,r)=>{t&&t.split(" ").forEach(i=>{i&&e.classList.toggle(i,r)})},TU=(e,t,r,i)=>{if(!r)return;let s=!1,n=Object.keys(r),o=n.length;for(let a=0;a<o;a++){let l=n[a],h=r[l],p=t[l];if(l==="class")p!==h&&(r0(e,p,!1),r0(e,h,!0));else if(l==="classes"){let f=e.classList,m=Object.keys(h),y=m.length;for(let _=0;_<y;_++){let v=m[_],w=!!h[v];w!==!!p[v]&&(s=!0,w?f.add(v):f.remove(v))}}else if(l==="styles"){let f=Object.keys(h),m=f.length;for(let y=0;y<m;y++){let _=f[y],v=h[_];v!==p[_]&&(s=!0,v?(gA(v),i.styleApplyer(e,_,v)):i.styleApplyer(e,_,""))}}else if(h||typeof p!="string"||(h=""),l!=="value"||t0(e)){if(h!==p){let f=typeof h;f==="function"&&i.eventHandlerInterceptor||(i.namespace===Kf?l==="href"?e.setAttributeNS(yA,l,h):e.setAttribute(l,h):f==="string"?l==="innerHTML"?e[l]=fA.sanitize(h):l==="role"&&h===""?e.removeAttribute(l):t0(e)&&l in e?e[l]=h:e.setAttribute(l,h):e[l]!==h&&(e[l]=h),s=!0)}}else{let f=e[l];f!==h&&(e["oninput-value"]?f===e["oninput-value"]:h!==p)&&(e[l]=h,e["oninput-value"]=void 0),h!==p&&(s=!0)}}return s},$U=(e,t,r,i,s)=>{if(r===i)return!1;i=i||L2;let n,o=(r=r||L2).length,a=i.length,l=0,h=0,p=!1;for(;h<a;){let f=l<o?r[l]:void 0,m=i[h];if(f!==void 0&&_v(f,m))p=qp(f,m,s)||p,l++;else{let y=vU(r,m,l+1);if(y>=0){for(n=l;n<y;n++)U2(r[n]),ty(r,n,e,"removed");p=qp(r[y],m,s)||p,l=y+1}else oc(m,t,l<o?r[l].domNode:void 0,s),wU(m),ty(i,h,e,"added")}h++}if(o>l)for(n=l;n<o;n++)U2(r[n]),ty(r,n,e,"removed");return p};qp=(e,t,r)=>{let i=e.domNode,s=!1;if(e===t)return!1;let n=!1;if(t.vnodeSelector===""){if(t.text!==e.text){let o=i.ownerDocument.createTextNode(t.text);return i.parentNode.replaceChild(o,i),t.domNode=o,s=!0,s}t.domNode=i}else t.vnodeSelector.lastIndexOf("svg",0)===0&&(r=gv(r,{namespace:Kf})),e.text!==t.text&&(n=!0,t.text===void 0?i.removeChild(i.firstChild):i.textContent=t.text),t.domNode=i,n=$U(t,i,e.children,t.children,r)||n,n=TU(i,e.properties,t.properties,r)||n,t.properties&&t.properties.afterUpdate&&t.properties.afterUpdate.apply(t.properties.bind||t.properties,[i,r,t.vnodeSelector,t.properties,t.children]);return n&&t.properties&&t.properties.updateAnimation&&t.properties.updateAnimation(i,t.properties,e.properties),s};let Hh=(e,t)=>({getLastRender:()=>e,update:r=>{if(e.vnodeSelector!==r.vnodeSelector)throw new Error("The selector for the root VNode may not be changed. (consider using dom.merge and add one extra level to the virtual DOM)");let i=e;e=r,qp(i,r,t)},domNode:e.domNode});const EU={namespace:void 0,performanceLogger:()=>{},eventHandlerInterceptor:void 0,styleApplyer:(e,t,r)=>{t.charAt(0)==="-"?e.style.setProperty(t,r):e.style[t]=r}};let fu=e=>gv(EU,e),an={append:(e,t,r)=>(r=fu(r),oc(t,e,void 0,r),Hh(t,r)),insertBefore:(e,t,r)=>(r=fu(r),oc(t,e.parentNode,e,r),Hh(t,r)),merge:(e,t,r)=>(r=fu(r),t.domNode=e,vA(e,t,r),Hh(t,r)),replace:(e,t,r)=>(r=fu(r),oc(t,e.parentNode,e,r),e.parentNode.removeChild(e),Hh(t,r))},wA,MU=(e,t)=>{let r=[];for(;e&&e!==t;)r.push(e),e=e.parentNode;return r};wA=Array.prototype.find?(e,t)=>e.find(t):(e,t)=>e.filter(t)[0];let xU=(e,t)=>{let r=e;return t.forEach(i=>{r=r&&r.children?wA(r.children,s=>s.domNode===i):void 0}),r},AU=(e,t,r)=>{let i=function(s){r("domEvent",s);let n=t(),o=MU(s.currentTarget,n.domNode);o.reverse();let a,l=xU(n.getLastRender(),o);return e.scheduleRender(),l&&(a=l.properties[`on${s.type}`].apply(l.properties.bind||this,arguments)),r("domEventProcessed",s),a};return(s,n,o,a)=>i},j2=e=>{let t,r,i=fu(e),s=i.performanceLogger,n=!0,o=!1,a=[],l=[],h=(f,m,y)=>{let _,v=()=>_;i.eventHandlerInterceptor=AU(t,v,s),_=f(m,y(),i),a.push(_),l.push(y)},p=()=>{if(r=void 0,n){n=!1,s("renderStart",void 0);for(let f=0;f<a.length;f++){let m=l[f]();s("rendered",void 0),a[f].update(m),s("patched",void 0)}s("renderDone",void 0),n=!0}};return t={renderNow:p,scheduleRender:()=>{r||o||(r=requestAnimationFrame(p))},stop:()=>{r&&(cancelAnimationFrame(r),r=void 0),o=!0},resume:()=>{o=!1,n=!0,t.scheduleRender()},append:(f,m)=>{h(an.append,f,m)},insertBefore:(f,m)=>{h(an.insertBefore,f,m)},merge:(f,m)=>{h(an.merge,f,m)},replace:(f,m)=>{h(an.replace,f,m)},detach:f=>{for(let m=0;m<l.length;m++)if(l[m]===f)return l.splice(m,1),a.splice(m,1)[0];throw new Error("renderFunction was not found")}},t},Rs=class extends q{constructor(){super(...arguments),this.items=new B,this._watchUpdatingTracking=new $o,this._callbacks=new Map,this._projector=j2(),this._hiddenProjector=j2()}get needsRender(){return this.items.length>0}get updating(){var t;return((t=this._watchUpdatingTracking)==null?void 0:t.updating)??!1}initialize(){const t=document.createElement("div");t.className="esri-overlay-surface",this._set("surface",t),this._hiddenSurface=document.createElement("div"),this._hiddenSurface.setAttribute("style","visibility: hidden;"),t.appendChild(this._hiddenSurface),this._watchUpdatingTracking.addOnCollectionChange(()=>this.items,r=>{for(const i of r.added){const s=()=>i.render();this._callbacks.set(i,s),this._projector.append(this.surface,s)}for(const i of r.removed){const s=this._projector.detach(this._callbacks.get(i));this.surface.removeChild(s.domNode),this._callbacks.delete(i)}})}addItem(t){this.items.add(t)}removeItem(t){this.items.remove(t)}destroy(){this.items.removeAll(),this._callbacks.forEach(t=>this._projector.detach(t)),this._callbacks=null,this._projector=null,this._watchUpdatingTracking.destroy()}render(){this._projector.renderNow()}computeBoundingRect(t){const r=this._hiddenSurface,i=this._hiddenProjector;let s;const n=()=>(s=t.render(),s);i.append(r,n),i.renderNow();const o={left:0,top:0,right:0,bottom:0};if(s!=null&&s.domNode){const a=s.domNode.getBoundingClientRect();o.left=a.left,o.top=a.top,o.right=a.right,o.bottom=a.bottom}for(i.detach(n);r.firstChild;)r.removeChild(r.firstChild);return o}overlaps(t,r){const i=this.computeBoundingRect(t),s=this.computeBoundingRect(r);return Math.max(i.left,s.left)<=Math.min(i.right,s.right)&&Math.max(i.top,s.top)<=Math.min(i.bottom,s.bottom)}get hasVisibleItems(){return this.items.some(t=>t.visible)}async prepare(){await document.fonts.load(this._fontString()).catch(()=>{})}renderCanvas(t,r){const i=!!(r!=null&&r.disableDecorations);if(!this.items.some(n=>n.visible&&!(i&&n.isDecoration)))return;const s=t.getContext("2d");s.save(),s.font=this._fontString(),this.items.forEach(n=>{i&&n.isDecoration||(s.save(),n.renderCanvas(s),s.restore())}),s.restore()}_fontString(){return`10px ${getComputedStyle(this.surface).fontFamily}`}};c([d({readOnly:!0})],Rs.prototype,"surface",void 0),c([d({readOnly:!0})],Rs.prototype,"items",void 0),c([d({readOnly:!0})],Rs.prototype,"needsRender",null),c([d({readOnly:!0})],Rs.prototype,"_watchUpdatingTracking",void 0),c([d({readOnly:!0})],Rs.prototype,"updating",null),Rs=c([S("esri.views.overlay.ViewOverlay")],Rs);const G2=Rs,ry=[0,0];function PU(e){const t=(e.ownerDocument||window.document).defaultView,r=e.getBoundingClientRect();return ry[0]=r.left+((t==null?void 0:t.pageXOffset)??0),ry[1]=r.top+((t==null?void 0:t.pageYOffset)??0),ry}function z2(e){e&&(e.textContent="",e.parentNode&&e.parentNode.removeChild(e))}function OU(e){const t=document.createElement("div");return e.appendChild(t),t}const Ko=16,Vl=750,CU=512,IU=2,RU=e=>{let t=class extends e{constructor(...r){super(...r),this._freqInfo={freq:Ko,time:Vl},this._overlayRenderTaskHandle=null,this.height=0,this.messagesCommon=null,this.overlay=null,this.position=null,this.resizing=!1,this.root=null,this.surface=null,this.suspended=!0,this.ui=null,this.userContent=null,this.width=0,this.widthBreakpoint=null,this.addHandles([X(()=>this.cursor,i=>{const{surface:s}=this;s&&s.setAttribute("data-cursor",i)}),X(()=>this.navigating,i=>{const{surface:s}=this;s&&s.setAttribute("data-navigating",i.toString())})])}initialize(){this.addHandles([X(()=>this.ui,(r,i)=>this._handleUIChange(r,i),St),this.on("focus",()=>this.notifyChange("focused")),this.on("blur",()=>this.notifyChange("focused"))])}destroy(){var r;this.destroyed||((r=this.ui)==null||r.destroy(),this.container=null)}get container(){return this._get("container")??null}set container(r){const i=this._get("container"),s=fv(r);if(s||typeof r!="string"||F.getLogger(this).error("#container",`element with id '${r}' not found`),i===s)return;if(this._stopMeasuring(),i&&(i.classList.remove("esri-view"),this._overlayRenderTaskHandle&&(this._overlayRenderTaskHandle.remove(),this._overlayRenderTaskHandle=null),this.overlay&&(this.overlay.destroy(),this._set("overlay",null)),this.root&&(z2(this.root),this._set("root",null)),this.userContent&&(C2(this.userContent,i),z2(this.userContent),this._set("userContent",null))),!s)return this._set("width",0),this._set("height",0),this._set("position",null),this._set("suspended",!0),this._set("surface",null),void this._set("container",null);s.classList.add("esri-view");const n=document.createElement("div");n.className="esri-view-user-storage",C2(s,n),s.appendChild(n),this._set("userContent",n);const o=document.createElement("div");o.className="esri-view-root",s.insertBefore(o,s.firstChild),this._set("root",o);const a=document.createElement("div");a.className="esri-view-surface",a.setAttribute("role","application"),a.tabIndex=0,o.appendChild(a),this._set("surface",a);const l=new G2;o.appendChild(l.surface),this._set("overlay",l),this.addHandles(X(()=>l.needsRender,h=>{h&&!this._overlayRenderTaskHandle?this._overlayRenderTaskHandle=rl({render:()=>{var p;return(p=this.overlay)==null?void 0:p.render()}}):this._overlayRenderTaskHandle=Ce(this._overlayRenderTaskHandle)})),this.forceDOMReadyCycle(),this._set("container",s),this._startMeasuring()}get focused(){const r=document.activeElement===this.surface;return document.hasFocus()&&r}get size(){return[this.width,this.height]}blur(){var r;(r=this.surface)==null||r.blur()}focus(){var r;(r=this.surface)==null||r.focus()}pageToContainer(r,i,s){const n=this.position;return r-=n?n[0]:0,i-=n?n[1]:0,s?(s[0]=r,s[1]=i):s=[r,i],s}containerToPage(r,i,s){const n=this.position;return r+=n?n[0]:0,i+=n?n[1]:0,s?(s[0]=r,s[1]=i):s=[r,i],s}_handleUIChange(r,i){this.removeHandles("ui"),i&&i!==r&&i.destroy(),r&&(r.view=this,this.addHandles(X(()=>this.root,s=>{r.container=s?OU(s):null},St),"ui")),this._set("ui",r)}_stopMeasuring(){this.removeHandles("measuring"),this._get("resizing")&&this._set("resizing",!1)}_startMeasuring(){const r=this._freqInfo;r.freq=Ko,r.time=Vl;const i=rl({prepare:o=>{const a=this._measure(),l=this._freqInfo;if(l.time+=o.deltaTime,a&&(l.freq=Ko,this._get("resizing")||this._set("resizing",!0)),l.time<l.freq)return;l.time=0;const h=this._position();l.freq=h||a?Ko:Math.min(Vl,l.freq*IU),!a&&l.freq>=CU&&(i.pause(),this._get("resizing")&&this._set("resizing",!1))}}),s=new ResizeObserver(o=>{r.freq=Ko,r.time=Vl,i.resume()});this.container!=null&&s.observe(this.container);const n=ue(()=>s.disconnect());this.addHandles([Jc(window,"resize",()=>{r.freq=Ko,r.time=Vl,i.resume()}),n,i],"measuring"),this._measure(),this._position()}_measure(){const r=this.container,i=r?r.clientWidth:0,s=r?r.clientHeight:0;if(i===0||s===0)return this.suspended||this._set("suspended",!0),!1;const n=this.width,o=this.height;return i===n&&s===o?(this.suspended&&this._set("suspended",!1),!1):(this._set("width",i),this._set("height",s),this.suspended&&this._set("suspended",!1),this.emit("resize",{oldWidth:n,oldHeight:o,width:i,height:s}),!0)}_position(){const r=this.container,i=this.position,s=r&&PU(r);return!!s&&(!i||s[0]!==i[0]||s[1]!==i[1])&&(this._set("position",[s[0],s[1]]),!0)}forceDOMReadyCycle(){}};return c([d()],t.prototype,"container",null),c([d({readOnly:!0})],t.prototype,"focused",null),c([d({readOnly:!0})],t.prototype,"height",void 0),c([d()],t.prototype,"messagesCommon",void 0),c([d({type:G2})],t.prototype,"overlay",void 0),c([d({readOnly:!0})],t.prototype,"position",void 0),c([d({readOnly:!0})],t.prototype,"resizing",void 0),c([d({readOnly:!0})],t.prototype,"root",void 0),c([d({value:null,readOnly:!0})],t.prototype,"size",null),c([d({readOnly:!0})],t.prototype,"surface",void 0),c([d({readOnly:!0})],t.prototype,"suspended",void 0),c([d({nonNullable:!0})],t.prototype,"ui",void 0),c([d({readOnly:!0})],t.prototype,"userContent",void 0),c([d({readOnly:!0})],t.prototype,"width",void 0),c([d()],t.prototype,"widthBreakpoint",void 0),t=c([S("esri.views.DOMContainer")],t),t},kU=A("mac")?"Meta":"Control",NU=new Set(["Alt","Control","Meta","Shift","Ctrl","Primary"]),LU=e=>NU.has(e);let DU=class{constructor(t,r=[]){this.eventType=t,this.keyModifiers=r}matches(t){if(t.type!==this.eventType)return!1;if(this.keyModifiers.length===0)return!0;const r=t.modifiers;for(const i of this.keyModifiers)if(!r.has(i))return!1;return!0}},it=class{constructor(t){this._manager=null,this._incoming={},this._outgoing={},this._incomingEventMatches=null,this._incomingEventTypes=null,this._outgoingEventTypes=null,this._hasSideEffects=t}get incomingEventMatches(){if(!this._incomingEventMatches){this._incomingEventMatches=[];for(const t in this._incoming){const r=this._incoming[t];for(const i of r)this._incomingEventMatches.push(i.match)}}return this._incomingEventMatches}get incomingEventTypes(){return this._incomingEventTypes||(this._incomingEventTypes=this.incomingEventMatches.map(t=>t.eventType)),this._incomingEventTypes}get outgoingEventTypes(){return this._outgoingEventTypes||(this._outgoingEventTypes=Object.keys(this._outgoing)),this._outgoingEventTypes}get hasSideEffects(){return this._hasSideEffects}get hasPendingInputs(){return!1}onInstall(t){this._manager||(t.setEventCallback(r=>this._handleEvent(r)),t.setUninstallCallback(()=>this._onUninstall()),this._manager=t)}onUninstall(){}registerIncoming(t,r,i){let s;typeof r=="function"?(i=r,s=[]):s=r||[];const n=typeof t=="string"?new DU(t,s):t,o=()=>{this._incomingEventTypes=null,this._incomingEventMatches=null},a=p=>{const f=this._incoming[p.match.eventType];if(f){const m=f.indexOf(p);f.splice(m,1),o(),this._manager&&this._manager.updateDependencies()}},l=new FU(n,i,{onPause:a,onRemove:a,onResume:p=>{const f=this._incoming[p.match.eventType];f&&!f.includes(p)&&(f.push(p),o(),this._manager&&this._manager.updateDependencies())}});let h=this._incoming[n.eventType];return h||(h=[],this._incoming[n.eventType]=h),h.push(l),o(),this._manager&&this._manager.updateDependencies(),l}registerOutgoing(t){if(this._outgoing[t])throw new Error("There is already a callback registered for this outgoing InputEvent: "+t);const r=new UU(t,{onEmit:(i,s,n,o)=>{var a;(a=this._manager)==null||a.emit(i.eventType,s,n,o)},onRemove:i=>{var s;delete this._outgoing[i.eventType],(s=this._manager)==null||s.updateDependencies()}});return this._outgoing[t]=r,this._outgoingEventTypes=null,this._manager&&this._manager.updateDependencies(),r}startCapturingPointer(t){var r;(r=this._manager)==null||r.setPointerCapture(t,!0)}stopCapturingPointer(t){var r;(r=this._manager)==null||r.setPointerCapture(t,!1)}refreshHasPendingInputs(){var t;(t=this._manager)==null||t.refreshHasPendingInputs()}_onUninstall(){this._manager&&(this.onUninstall(),this._manager=null)}_handleEvent(t){var i;const r=this._incoming[t.type];if(r){for(const s of r)if(s.match.matches(t)&&((i=s.callback)==null||i.call(s,t),t.shouldStopPropagation()))break}}},FU=class{constructor(t,r,i){this.match=t,this._callback=r,this._handler=i}pause(){this._handler.onPause(this)}resume(){this._handler.onResume(this)}remove(){this._handler.onRemove(this)}get callback(){return this._callback}},UU=class{constructor(t,r){this.eventType=t,this._removed=!1,this._handler=r}emit(t,r,i){this._removed||this._handler.onEmit(this,t,r,i)}remove(){this._removed=!0,this._handler.onRemove(this)}},jU=class extends it{constructor(t){super(!0),this._onChange=t,this._value="mouse",this._x=null,this._y=null,this.registerIncoming("pointer-move",r=>this._update(r.data))}_update(t){const r=t.native.pointerType==="touch"?"touch":"mouse",{x:i,y:s}=t;r===this._value&&this._x===i&&this._y===s||(this._value=r,this._x=i,this._y=s,this._onChange(r,i,s))}},GU=class{constructor(t,r){this._observable=new Qc,this._value=t,this._equalityFunction=r}get value(){return Z(this._observable),this._value}set value(t){this._equalityFunction(t,this._value)||(this._value=t,this._observable.notify())}mutate(t){t(this._value),this._observable.notify()}};function yl(e,t=T$){return new GU(e,t)}let zU=class extends it{get multiTouchActive(){return this._multiTouchActive.value}constructor(){super(!0),this._activeTouchPointerIds=new Set,this._multiTouchActive=yl(!1),this._onPointerAdd=({data:t})=>{t.pointerType==="touch"&&(this._activeTouchPointerIds.add(t.native.pointerId),this._update())},this._onPointerRemove=({data:t})=>{t.pointerType==="touch"&&(this._activeTouchPointerIds.delete(t.native.pointerId),this._update())},this.registerIncoming("pointer-down",this._onPointerAdd),this.registerIncoming("pointer-up",this._onPointerRemove),this.registerIncoming("pointer-capture-lost",this._onPointerRemove),this.registerIncoming("pointer-cancel",this._onPointerRemove)}_update(){this._multiTouchActive.value=this._activeTouchPointerIds.size>1}},VU=class{constructor(t,r){this._owner=r,this._properties={},this._afterDispatchHandle=null;for(const i in t){const s=t[i],n=new V$(s,void 0,void 0,2,2);this._properties[i]={pool:n,acquired:[]}}this._afterDispatchHandle=GR(()=>this._release())}destroy(){this._afterDispatchHandle&&(this._afterDispatchHandle.remove(),this._afterDispatchHandle=null);for(const t in this._properties){const r=this._properties[t];for(const i of r.acquired)Dw(i)||r.pool.release(i);r.pool.destroy(),r.pool=null,r.acquired=null}this._properties=null,this._owner=null}get(t){const r=this._owner._get(t),i=this._properties[t];let s=i.pool.acquire();for(i.acquired.push(s);s===r;)i.acquired.push(s),s=i.pool.acquire();return s}_release(){for(const t in this._properties){const r=this._properties[t];let i=0;for(const s of r.acquired)Dw(s)?r.acquired[i++]=s:r.pool.release(s);r.acquired.length=i}}},mr=class extends q{constructor(t){super(t),this._pointerCaptures=new Map,this._nameToGroup={},this._handlers=[],this._handlersPriority=[],this._currentPropagation=null,this._updateDependenciesAfterPropagation=!1,this._sourceEvents=new Set,this._keyModifiers=new Set,this._activeKeyModifiers=new Set,this._stoppedPropagationEventIds=new Set,this.primaryKey=kU,this._latestPointerType="mouse",this._propertiesPool=new VU({latestPointerLocation:qU},this),this.latestPointerLocation=null,this._paused=!1,this.test={timestamp:void 0,hasCurrentPropagation:()=>!!this._currentPropagation}}initialize(){this.eventSource.onEventReceived=this._onEventReceived.bind(this),this._installRecognizers()}destroy(){const t=Object.keys(this._nameToGroup);for(const r of t)this.uninstallHandlers(r);this.eventSource.destroy(),this._currentPropagation=null,this._propertiesPool.destroy()}get hasPendingInputs(){return this._handlers.some(t=>t.handler.hasPendingInputs)}get latestPointerType(){return this._latestPointerType}get multiTouchActive(){return this._multiTouchHandler.multiTouchActive}get updating(){return this.hasPendingInputs||this._paused}installHandlers(t,r,i=cn.INTERNAL){if(this._nameToGroup[t]||r.length===0)return;const s={name:t,handlers:r.map(n=>({handler:n,active:!0,removed:!1,priorityIndex:0,groupPriority:i,eventCallback:null,uninstallCallback:null}))};this._nameToGroup[t]=s;for(let n=s.handlers.length-1;n>=0;n--){const o=s.handlers[n];this._handlers.push(o),o.handler.onInstall({updateDependencies:()=>{this.updateDependencies()},emit:(a,l,h,p,f)=>{this._emitInputEvent(o.priorityIndex+1,a,l,h,f,p)},setPointerCapture:(a,l)=>{this._setPointerCapture(s,o,a,l)},setEventCallback:a=>{o.eventCallback=a},setUninstallCallback:a=>{o.uninstallCallback=a},refreshHasPendingInputs:()=>{this.notifyChange("hasPendingInputs")}})}this.updateDependencies()}uninstallHandlers(t){const r=this._nameToGroup[t];r?(r.handlers.forEach(i=>{var s;i.removed=!0,(s=i.uninstallCallback)==null||s.call(i)}),delete this._nameToGroup[t],this._currentPropagation?this._currentPropagation.needsHandlerGarbageCollect=!0:this._garbageCollectRemovedHandlers()):F.getLogger(this).error("There is no InputHandler group registered under the name `"+t+"`")}hasHandlers(t){return this._nameToGroup[t]!==void 0}isModifierKeyDown(t){return this._activeKeyModifiers.has(t)}updateDependencies(){if(this._currentPropagation)return void(this._updateDependenciesAfterPropagation=!0);this._updateDependenciesAfterPropagation=!1;const t=new Set,r=new Set;this._handlersPriority=[];for(let i=this._handlers.length-1;i>=0;i--){const s=this._handlers[i];s.priorityIndex=i,this._handlersPriority.push(s)}this._handlersPriority=this._sortHandlersPriority(this._handlersPriority);for(let i=this._handlersPriority.length-1;i>=0;i--){const s=this._handlersPriority[i];s.priorityIndex=i;let n=s.handler.hasSideEffects;if(!n){for(const o of s.handler.outgoingEventTypes)if(t.has(o)){n=!0;break}}if(n)for(const o of s.handler.incomingEventMatches){t.add(o.eventType);for(const a of o.keyModifiers)LU(a)||r.add(a)}s.active=n}this._sourceEvents=t,this._keyModifiers=r,this._pointerCaptures.size>0&&this._sourceEvents.add("pointer-capture-lost"),this._keyModifiers.size>0&&(this._sourceEvents.add("key-down"),this._sourceEvents.add("key-up")),this.eventSource&&(this.eventSource.activeEvents=this._sourceEvents)}_setLatestPointer(t,r,i){this._latestPointerType=t;const s=this._get("latestPointerLocation");if(s==null||s.x!==r||s.y!==i){const n=this._propertiesPool.get("latestPointerLocation");n.x=r,n.y=i,this._set("latestPointerLocation",n)}}_onEventReceived(t,r){if(t==="pointer-capture-lost"){const n=r;this._pointerCaptures.delete(n.native.pointerId)}this._updateKeyModifiers(t,r);const i=this.test.timestamp!=null?this.test.timestamp:r.native?r.native.timestamp:void 0,s=r.native?r.native.cancelable:void 0;this._emitInputEventFromSource(t,r,i,s)}_updateKeyModifiers(t,r){if(!r)return;let i=!1;const s=()=>{i||(this._activeKeyModifiers=new Set(this._activeKeyModifiers),i=!0)},n=(a,l)=>{l&&!this._activeKeyModifiers.has(a)?(s(),this._activeKeyModifiers.add(a)):!l&&this._activeKeyModifiers.has(a)&&(s(),this._activeKeyModifiers.delete(a))};if(t==="key-down"||t==="key-up"){const a=r.key;this._keyModifiers.has(a)&&n(a,t==="key-down")}const o=r.native;n("Alt",!!(o!=null&&o.altKey)),n("Control",!!(o!=null&&o.ctrlKey)),n("Ctrl",!!(o!=null&&o.ctrlKey)),n("Shift",!!(o!=null&&o.shiftKey)),n("Meta",!!(o!=null&&o.metaKey)),n("Primary",this._activeKeyModifiers.has(this.primaryKey))}_installRecognizers(){this._latestPointerHandler=new jU((t,r,i)=>this._setLatestPointer(t,r,i)),this._multiTouchHandler=new zU,this.installHandlers("input-manager-logic",[this._latestPointerHandler,this._multiTouchHandler],cn.ALWAYS),this.recognizers.length>0&&this.installHandlers("default",this.recognizers,cn.INTERNAL)}_setPointerCapture(t,r,i,s){const n=t.name+"-"+r.priorityIndex,o=this._pointerCaptures.get(i.pointerId)||new Set;this._pointerCaptures.set(i.pointerId,o),s?(o.add(n),o.size===1&&this.eventSource&&this.eventSource.setPointerCapture(i,!0)):o.has(n)&&(o.delete(n),o.size===0&&(this._pointerCaptures.delete(i.pointerId),this.eventSource&&this.eventSource.setPointerCapture(i,!1)))}_garbageCollectRemovedHandlers(){this._handlers=this._handlers.filter(t=>!t.removed),this.updateDependencies()}_emitInputEventFromSource(t,r,i,s){this._emitInputEvent(0,t,r,i,s)}_emitInputEvent(t,r,i,s,n,o){const a=s!==void 0?s:this._currentPropagation?this._currentPropagation.timestamp:performance.now(),l=n!==void 0&&n,h={event:new BU(r,i,a,o||this._activeKeyModifiers,l),priorityIndex:t};this._currentPropagation?this._currentPropagation.events.push(h):this._doNewPropagation(h)}_doNewPropagation(t){this._currentPropagation={events:new zp,currentHandler:null,needsHandlerGarbageCollect:!1,timestamp:t.event.timestamp},this._currentPropagation.events.push(t),this._continuePropagation()}_continuePropagation(){var r,i,s;this._paused=!1;const t=this._currentPropagation;if(t){for(;t.events.length>0;){const{event:n,priorityIndex:o}=t.events.pop(),a=(r=n.data)==null?void 0:r.eventId;if(!(a!=null&&this._stoppedPropagationEventIds.has(a)))for(t.currentHandler=this._handlersPriority[o];t.currentHandler;){if(t.currentHandler.removed)t.needsHandlerGarbageCollect=!0;else{if(t.currentHandler.active&&!n.shouldStopPropagation()&&((s=(i=t.currentHandler).eventCallback)==null||s.call(i,n)),n.shouldStopPropagation()){a!=null&&this._stoppedPropagationEventIds.add(a);break}if(n.shouldPausePropagation(()=>this._continuePropagation()))return void this._pausePropagation({event:n,priorityIndex:t.currentHandler.priorityIndex+1})}t.currentHandler=this._handlersPriority[t.currentHandler.priorityIndex+1]}}t.needsHandlerGarbageCollect&&this._garbageCollectRemovedHandlers(),this.hasPendingInputs||this._stoppedPropagationEventIds.clear(),this._currentPropagation=null,this._updateDependenciesAfterPropagation&&this.updateDependencies()}}_pausePropagation(t){const r=new zp;r.push(t);const i=this._currentPropagation;if(i){for(;i.events.length;)r.push(i.events.pop());i.events=r,i.currentHandler=null,this._paused=!0}}_compareHandlerPriority(t,r){if(t.handler.hasSideEffects!==r.handler.hasSideEffects)return t.handler.hasSideEffects?1:-1;if(t.groupPriority!==r.groupPriority)return t.groupPriority>r.groupPriority?-1:1;for(const i of t.handler.incomingEventMatches)for(const s of r.handler.incomingEventMatches){if(i.eventType!==s.eventType)continue;const n=i.keyModifiers.filter(o=>s.keyModifiers.includes(o));if(n.length===i.keyModifiers.length!=(n.length===s.keyModifiers.length))return i.keyModifiers.length>s.keyModifiers.length?-1:1}return t.priorityIndex>r.priorityIndex?-1:1}_sortHandlersPriority(t){const r=[];for(const i of t){let s=0;for(;s<r.length&&this._compareHandlerPriority(i,r[s])>=0;)s++;r.splice(s,0,i)}return r}get debug(){const t=r=>{const i=this._setPointerCapture;this._setPointerCapture=()=>{},r(),this._setPointerCapture=i};return{injectEvent:(r,i)=>{t(()=>this._onEventReceived(r,i))},disablePointerCapture:t}}};c([d({readOnly:!0})],mr.prototype,"hasPendingInputs",null),c([d({constructOnly:!0})],mr.prototype,"eventSource",void 0),c([d({constructOnly:!0})],mr.prototype,"recognizers",void 0),c([d()],mr.prototype,"_latestPointerType",void 0),c([d()],mr.prototype,"latestPointerType",null),c([d()],mr.prototype,"multiTouchActive",null),c([d({readOnly:!0})],mr.prototype,"latestPointerLocation",void 0),c([d()],mr.prototype,"_paused",void 0),c([d({readOnly:!0})],mr.prototype,"updating",null),mr=c([S("esri.views.input.InputManager")],mr);let BU=class{constructor(t,r,i,s,n){this.type=t,this.data=r,this.timestamp=i,this.modifiers=s,this.cancelable=n,this._propagationState=Qs.NONE,this._resumeCallback=null}stopPropagation(){this._propagationState|=Qs.STOPPED}shouldStopPropagation(){return!!(this._propagationState&Qs.STOPPED)}async(t){this._propagationState|=Qs.PAUSED;const r=(i,s)=>{this._propagationState&=~Qs.PAUSED;const n=this._resumeCallback;if(this._resumeCallback=null,n&&n(),s)throw i;return i};return(typeof t=="function"?t():t).then(i=>r(i,!1),i=>r(i,!0))}shouldPausePropagation(t){return!!(this._propagationState&Qs.PAUSED)&&(this._resumeCallback=t,!0)}preventDefault(){this.data.native.preventDefault()}};var Qs;(function(e){e[e.NONE=0]="NONE",e[e.STOPPED=1]="STOPPED",e[e.PAUSED=2]="PAUSED"})(Qs||(Qs={}));const cn={ALWAYS:1,DEFAULT:0,TOOL:-1,WIDGET:-2,INTERNAL:-3};let HU=class{};const qU=HU;function xs(e){return e!=null&&"open"in e&&"declaredClass"in e}function V2(e){return e!=null&&"declaredClass"in e&&"dockOptions"in e}const WU=e=>{let t=class extends e{constructor(){super(...arguments),this._popupSetupTask=null,this.popup={},this.popupEnabled=!0}initialize(){this.addHandles([X(()=>[this.ui,this.popup],([r,i],s)=>{const n="popup",o="manual";if(s){const[a,l]=s;a&&xs(l)&&(l.view=null,V2(l)&&a.remove(l,n))}r&&xs(i)&&(i.view=this,V2(i)&&r.add(i,{key:n,position:o,internal:!0}))},St),this.on("click",r=>{this.popup&&this.popupEnabled&&(r.pointerType!=="mouse"||r.button===0)&&(xs(this.popup)?this.popup.viewModel.handleViewClick(r):r.async(async()=>{await this.setupPopup(),xs(this.popup)&&!this.destroyed&&this.ready&&this.popupEnabled&&this.popup.viewModel.handleViewClick(r)}))},cn.WIDGET)]),J_(()=>this.ready&&this.popupEnabled&&!this.updating).then(()=>{N(()=>import("./Popup-CRxVPPyt.js").then(r=>r.P),__vite__mapDeps([193,1,194,9,195,196,197,198,199,151,141,200,18,201,115,66,202,104,105,140,203,58,116,204,36,205,206,207,111,10,11,208,209,59,33,34,35,210,94,92,93,12,45,50,95,211,212,53,213,5,15,214,16,17,215,216,217,218,219,220,13,221,222,223,224,225,130,226,227,228,229,230,231,232,233,14,234,235,19,20,236,237,238,239,240,241,242,243,244,245,28,246,247,248,249,148,250]))})}destroy(){this.destroyed||this.closePopup()}async openPopup(r){if(xs(this.popup))return this.popup.open(r);try{if(await this.setupPopup(),!this.popup)return void F.getLogger(this).error(new I("view:null-popup","Popup is null and can't be opened"));this.popup.open(r)}catch{}}closePopup(){var r;(r=this._popupSetupTask)==null||r.abort(),xs(this.popup)&&this.popup.close()}async fetchPopupFeatures(r,i){return await this.when(),this._popupHitsToFeatures(await this._getPopupHits(r,i),i)}async setupPopup(){var r;if((r=this._popupSetupTask)==null||r.abort(),this.popup&&!xs(this.popup))return this._popupSetupTask=If(async i=>{const{default:s}=await N(()=>import("./Popup-CRxVPPyt.js").then(o=>o.P),__vite__mapDeps([193,1,194,9,195,196,197,198,199,151,141,200,18,201,115,66,202,104,105,140,203,58,116,204,36,205,206,207,111,10,11,208,209,59,33,34,35,210,94,92,93,12,45,50,95,211,212,53,213,5,15,214,16,17,215,216,217,218,219,220,13,221,222,223,224,225,130,226,227,228,229,230,231,232,233,14,234,235,19,20,236,237,238,239,240,241,242,243,244,245,28,246,247,248,249,148,250]));if(Ve(i),!this.popup||xs(this.popup))return;const n=this.popup;delete n.open,delete n.close,this.popup=new s(n)}),this._popupSetupTask.promise}async _popupHitsToFeatures({location:r,hits:i},s){const n=[],o=[];let a=!1;const l=yR(s,A("popup-view-fetch-timeout")??JU),h=m=>{const y=new ZU(m);return o.push(y),n.push(y.promise),y},p=m=>{const y=o.at(-1);return y&&y.layerView===m&&!a?y:h(m)};for(const m of i)"graphic"in m?(p(m.layerView).graphics.push(m.graphic),a=!1):(n.push(m.layerView.fetchPopupFeaturesAtLocation(m.mapPoint,l)),a=!0);o.map(m=>m.resolve(l));const f=mR(n).then(m=>m.filter(y=>!!y).flat());return{pendingFeatures:n,allGraphicsPromise:f,location:r}}async _getPopupHits(r,i){const{hits:s,location:n}=await this.popupHitTest(r);Ve(i);const o=[];for(const a of s)if("graphic"in a){if(this._isValidPopupGraphic(a.graphic,i)){const l=this._isValidPopupGraphicsLayerView(a.layerView)?a.layerView:void 0;o.push({graphic:a.graphic,layerView:l})}}else this._isValidPopupLocationLayerView(a.layerView)&&o.push({mapPoint:a.mapPoint,layerView:a.layerView});return{hits:o,location:n}}_isValidPopupGraphic(r,i){return r&&!!r.getEffectivePopupTemplate(i==null?void 0:i.defaultPopupTemplateEnabled)}_isValidPopupGraphicsLayerView(r){return!r||(!("layer"in r)||!r.suspended)&&"fetchPopupFeaturesFromGraphics"in r}_isValidPopupLocationLayerView(r){return(!("layer"in r)||!r.suspended)&&"fetchPopupFeaturesAtLocation"in r}};return c([d()],t.prototype,"popup",void 0),c([d()],t.prototype,"popupEnabled",void 0),t=c([S("esri.views.PopupView")],t),t};let ZU=class{constructor(t){this.layerView=t,this._resolver=Pr(),this.graphics=[]}get promise(){return this._resolver.promise}resolve(t){const{layerView:r,graphics:i,_resolver:s}=this;if(!r)return s.resolve(i),s.promise;let n;return r.fetchPopupFeaturesFromGraphics(i,t).catch(o=>(n=o,null)).then(o=>{o?s.resolve(o):s.reject(n)}),s.promise}};const JU=5e3;let ac=class extends B{constructor(t){super(t),this.addHandles([this.on("before-add",r=>{r.item==null&&r.preventDefault()}),this.on("after-add",r=>this._own(r.item)),this.on("after-remove",r=>this._release(r.item))])}get owner(){return this._get("owner")}set owner(t){t!==this._get("owner")&&(this._releaseAll(),this._set("owner",t),this._ownAll())}_ownAll(){for(const t of this.items)this._own(t)}_releaseAll(){for(const t of this.items)this._release(t)}_createNewInstance(t){return this.itemType?new(B.ofType(this.itemType.Type))(t):new B(t)}};function B2(e,t){return{type:e,cast:WE,set(r){const i=ms(r,this._get(t),e);i.owner=this,this._set(t,i)}}}c([d()],ac.prototype,"owner",null),ac=c([S("esri.core.support.OwningCollection")],ac);var mu;const Wp=qt()({orthometric:"gravity-related-height",gravity_related_height:"gravity-related-height",ellipsoidal:"ellipsoidal"}),bA=Wp.jsonValues.slice();bI(bA,"orthometric");const lc=qt()({meter:"meters",foot:"feet","us-foot":"us-feet","clarke-foot":"clarke-feet","clarke-yard":"clarke-yards","clarke-link":"clarke-links","sears-yard":"sears-yards","sears-foot":"sears-feet","sears-chain":"sears-chains","benoit-1895-b-chain":"benoit-1895-b-chains","indian-yard":"indian-yards","indian-1937-yard":"indian-1937-yards","gold-coast-foot":"gold-coast-feet","sears-1922-truncated-chain":"sears-1922-truncated-chains","50-kilometers":"50-kilometers","150-kilometers":"150-kilometers"});let zr=mu=class extends j{constructor(e){super(e),this.heightModel="gravity-related-height",this.heightUnit="meters",this.vertCRS=null}writeHeightModel(e,t,r){return Wp.write(e,t,r)}readHeightModel(e,t,r){return Wp.read(e)||(r!=null&&r.messages&&r.messages.push(YU(e,{context:r})),null)}readHeightUnit(e,t,r){return lc.read(e)||(r!=null&&r.messages&&r.messages.push(H2(e,{context:r})),null)}readHeightUnitService(e,t,r){return R_(e)||lc.read(e)||(r!=null&&r.messages&&r.messages.push(H2(e,{context:r})),null)}readVertCRS(e,t){return t.vertCRS||t.ellipsoid||t.geoid}clone(){return new mu({heightModel:this.heightModel,heightUnit:this.heightUnit,vertCRS:this.vertCRS})}equals(e){return!!e&&(this===e||this.heightModel===e.heightModel&&this.heightUnit===e.heightUnit&&this.vertCRS===e.vertCRS)}static deriveUnitFromSR(e,t){const r=d3(t);return new mu({heightModel:e.heightModel,heightUnit:r??void 0,vertCRS:e.vertCRS})}write(e,t){return t={origin:"web-scene",...t},super.write(e,t)}static fromJSON(e){if(!e)return null;const t=new mu;return t.read(e,{origin:"web-scene"}),t}};function H2(e,t){return new fs("height-unit:unsupported",`Height unit of value '${e}' is not supported`,t)}function YU(e,t){return new fs("height-model:unsupported",`Height model of value '${e}' is not supported`,t)}c([d({type:Wp.apiValues,constructOnly:!0,json:{origins:{"web-scene":{type:bA,default:"ellipsoidal",write:{isRequired:!0}}}}})],zr.prototype,"heightModel",void 0),c([oe("web-scene","heightModel")],zr.prototype,"writeHeightModel",null),c([de(["web-scene","service"],"heightModel")],zr.prototype,"readHeightModel",null),c([d({type:lc.apiValues,constructOnly:!0,json:{origins:{"web-scene":{type:lc.jsonValues,write:{writer:lc.write,isRequired:!0}}}}})],zr.prototype,"heightUnit",void 0),c([de("web-scene","heightUnit")],zr.prototype,"readHeightUnit",null),c([de("service","heightUnit")],zr.prototype,"readHeightUnitService",null),c([d({type:String,constructOnly:!0,json:{origins:{"web-scene":{write:!0}}}})],zr.prototype,"vertCRS",void 0),c([de("service","vertCRS",["vertCRS","ellipsoid","geoid"])],zr.prototype,"readVertCRS",null),zr=mu=c([S("esri.geometry.HeightModelInfo")],zr);const Xf=zr;let Zp=class extends ac{constructor(t){super(t),this.addHandles(this.on("before-add",r=>{r.item!=null&&r.item.parent===this.owner&&(F.getLogger(this).warn("Analysis inside the collection must be unique. Not adding this element again."),r.preventDefault())}))}_own(t){t.parent=this.owner}_release(t){t.parent=null}};Zp=c([S("esri.support.AnalysesCollection")],Zp);let iy;async function KU(){return iy==null&&(iy=N(()=>import("./WhereClauseCache-Dgrdb1iY.js"),__vite__mapDeps([51,10,11,52,53])).then(e=>new e.WhereClauseCache(500,500))),iy}async function XU(e,t){const r=await KU(),i=r.get(e,t);if(i==null)throw r.getError(e,t);return i}function bte(e,t){return e||(e=null),t||(t=null),e==="1=1"?t??e:t==="1=1"?e??t:e&&t?`(${e}) AND (${t})`:e??t}function Ste(e,t){return e||(e=null),t||(t=null),e==="1=1"||t==="1=1"||e===t?e==="1=1"?e:t:e&&t?`(${e}) OR (${t})`:e??t}function Tte(e,t){return t.length===0?null:`${e} IN (${QU(t)})`}function QU(e){return e.map(t=>typeof t=="string"?e7(t):t).join(",")}function e7(e){return`'${e.replaceAll("'","''")}'`}function $te(e){return typeof e=="number"}function Ete(e){return typeof e=="number"&&isFinite(e)&&Math.floor(e)===e}function Mte(e){return typeof e=="boolean"}function oh(e){return typeof e=="string"||e instanceof String}function t7(e){return e==null||oh(e)}function xte(e){return Array.isArray(e)}function r7(e){return(e==null?void 0:e.declaredClass)==="esri.Graphic"}function Ate(e){return e instanceof Date}const i7="HH:mm",s7="HH:mm:ss",n7="HH:mm:ss.SSS",o7=[n7,s7,i7,"TT"],a7="yyyy-MM-dd";function q2(e){if(!e||!oh(e))return null;const t=H.fromFormat(e,a7);return t.isValid?t:null}function W2(e){return e&&oh(e)?UI(o7,t=>{const r=H.fromFormat(e,t);return r.isValid?r:null})??null:null}function Z2(e){if(!e||!oh(e))return null;const t=H.fromISO(e);return t.isValid?t:null}var Jp;(function(e){e.VALUE_OUT_OF_RANGE="domain-validation-error::value-out-of-range",e.INVALID_CODED_VALUE="domain-validation-error::invalid-coded-value"})(Jp||(Jp={}));const SA=new Set(["integer","small-integer","big-integer","esriFieldTypeInteger","esriFieldTypeSmallInteger","esriFieldTypeBigInteger"]);function l7(e){return e!=null&&SA.has(e.type)}function TA(e){return e!=null&&(e.type==="date-only"||e.type==="esriFieldTypeDateOnly")}function $A(e){return e!=null&&(e.type==="timestamp-offset"||e.type==="esriFieldTypeTimestampOffset")}function EA(e){return e!=null&&(e.type==="time-only"||e.type==="esriFieldTypeTimeOnly")}const u7=new Set(["single","double","esriFieldTypeSingle","esriFieldTypeDouble"]);o_(SA,u7);function Pte(e,t){const r=e==null?void 0:e.domain;if(!r||r.type!=="range")return;const i="range"in r?r.range[0]:r.minValue,s="range"in r?r.range[1]:r.maxValue,n=l7(e);return TA(e)||EA(e)||$A(e)?{...c7(e,s,i),isInteger:n}:{min:i!=null&&typeof i=="number"?i:null,max:s!=null&&typeof s=="number"?s:null,rawMin:i,rawMax:s,isInteger:n}}function c7(e,t,r){var i,s,n,o,a,l;return TA(e)?{min:(i=q2(r))==null?void 0:i.toMillis(),max:(s=q2(t))==null?void 0:s.toMillis(),rawMin:r,rawMax:t}:EA(e)?{min:(n=W2(r))==null?void 0:n.toMillis(),max:(o=W2(t))==null?void 0:o.toMillis(),rawMin:r,rawMax:t}:$A(e)?{min:(a=Z2(r))==null?void 0:a.toMillis(),max:(l=Z2(t))==null?void 0:l.toMillis(),rawMin:r,rawMax:t}:{max:null,min:null}}function h7(e){if(!e)return;const t=e.match(d7);return t!=null&&t.groups?t.groups.doubleQuoted??t.groups.singleQuoted??t.groups.dotNotation:void 0}const d7=/^(\$feature\[(?:"(?<doubleQuoted>[^"]+)"|'(?<singleQuoted>[^']+)')\]|\$feature\.(?<dotNotation>[a-zA-Z_][a-zA-Z0-9_]*))$/i;function Ote(e){var t,r;return((r=(t=e.match(p7))==null?void 0:t[1])==null?void 0:r.replace(/\\'/g,"'"))??null}const p7=/^hash\(\$feature\['((\\'|[^'])+)'\]\) \* 8\.381e-8$/;let bi=class{};function f7(e){return e instanceof zo?e===bi.instance:(e==null?void 0:e.toString().toLowerCase())==="unknown"}function Ite(e){return f7(e)?bi.instance:e}bi.instance=new ur("Etc/UTC");var Yp;(function(e){e.TimeZoneNotRecognized="TimeZoneNotRecognized"})(Yp||(Yp={}));const m7={[Yp.TimeZoneNotRecognized]:"Timezone identifier has not been recognized."};let y7=class MA extends Error{constructor(t,r){super(t_(m7[t],r)),this.declaredRootClass="esri.arcade.arcadedate.dateerror",Error.captureStackTrace&&Error.captureStackTrace(this,MA)}};function Xo(e,t,r){return e<t?e-t:e>r?e-r:0}function Qo(e,t,r){return e<t?t:e>r?r:e}let qh=class He{constructor(t){this._date=t,this.declaredRootClass="esri.arcade.arcadedate"}static fromParts(t=0,r=1,i=1,s=0,n=0,o=0,a=0,l){if(isNaN(t)||isNaN(r)||isNaN(i)||isNaN(s)||isNaN(n)||isNaN(o)||isNaN(a))return null;const h=H.local(t,r).daysInMonth;let p=H.fromObject({day:Qo(i,1,h),year:t,month:Qo(r,1,12),hour:Qo(s,0,23),minute:Qo(n,0,59),second:Qo(o,0,59),millisecond:Qo(a,0,999)},{zone:Cn(l)});return p=p.plus({months:Xo(r,1,12),days:Xo(i,1,h),hours:Xo(s,0,23),minutes:Xo(n,0,59),seconds:Xo(o,0,59),milliseconds:Xo(a,0,999)}),new He(p)}static get systemTimeZoneCanonicalName(){return Intl.DateTimeFormat().resolvedOptions().timeZone??"system"}static arcadeDateAndZoneToArcadeDate(t,r){const i=Cn(r);return t.isUnknownTimeZone||i===bi.instance?He.fromParts(t.year,t.monthJS+1,t.day,t.hour,t.minute,t.second,t.millisecond,i):new He(t._date.setZone(i))}static dateJSToArcadeDate(t){return new He(H.fromJSDate(t,{zone:"system"}))}static dateJSAndZoneToArcadeDate(t,r="system"){const i=Cn(r);return new He(H.fromJSDate(t,{zone:i}))}static unknownEpochToArcadeDate(t){return new He(H.fromMillis(t,{zone:bi.instance}))}static unknownDateJSToArcadeDate(t){return new He(H.fromMillis(t.getTime(),{zone:bi.instance}))}static epochToArcadeDate(t,r="system"){const i=Cn(r);return new He(H.fromMillis(t,{zone:i}))}static dateTimeToArcadeDate(t){return new He(t)}clone(){return new He(this._date)}changeTimeZone(t){const r=Cn(t);return He.dateTimeToArcadeDate(this._date.setZone(r))}static dateTimeAndZoneToArcadeDate(t,r){const i=Cn(r);return t.zone===bi.instance||i===bi.instance?He.fromParts(t.year,t.month,t.day,t.hour,t.minute,t.second,t.millisecond,i):new He(t.setZone(i))}static nowToArcadeDate(t){const r=Cn(t);return new He(H.fromJSDate(new Date,{zone:r}))}static nowUTCToArcadeDate(){return new He(H.utc())}get isSystem(){return this.timeZone==="system"||this.timeZone===He.systemTimeZoneCanonicalName}equals(t){return this.isSystem&&t.isSystem?this.toNumber()===t.toNumber():this.isUnknownTimeZone===t.isUnknownTimeZone&&this._date.equals(t._date)}get isUnknownTimeZone(){return this._date.zone===bi.instance}get isValid(){return this._date.isValid}get hour(){return this._date.hour}get second(){return this._date.second}get day(){return this._date.day}get dayOfWeekISO(){return this._date.weekday}get dayOfWeekJS(){let t=this._date.weekday;return t>6&&(t=0),t}get millisecond(){return this._date.millisecond}get monthISO(){return this._date.month}get weekISO(){return this._date.weekNumber}get yearISO(){return this._date.weekYear}get monthJS(){return this._date.month-1}get year(){return this._date.year}get minute(){return this._date.minute}get zone(){return this._date.zone}get timeZoneOffset(){return this.isUnknownTimeZone?0:this._date.offset}get timeZone(){if(this.isUnknownTimeZone)return"unknown";if(this._date.zone.type==="system")return"system";const t=this.zone;return t.type==="fixed"?t.fixed===0?"UTC":t.formatOffset(0,"short"):t.name}stringify(){return JSON.stringify(this.toJSDate())}plus(t){return new He(this._date.plus(t))}diff(t,r="milliseconds"){return this._date.diff(t._date,r)[r]}toISODate(){return this._date.toISODate()}toISOString(t){return t?this._date.toISO({suppressMilliseconds:!0,includeOffset:!this.isUnknownTimeZone}):this._date.toISO({includeOffset:!this.isUnknownTimeZone})}toISOTime(t,r){return this._date.toISOTime({suppressMilliseconds:t,includeOffset:r&&!this.isUnknownTimeZone})}toFormat(t,r){return this.isUnknownTimeZone&&(t=t.replaceAll("Z","")),this._date.toFormat(t,r)}toJSDate(){return this._date.toJSDate()}toSQLValue(){return this._date.toFormat("yyyy-LL-dd HH:mm:ss")}toSQLWithKeyword(){return`timestamp '${this.toSQLValue()}'`}toDateTime(){return this._date}toNumber(){return this._date.toMillis()}getTime(){return this._date.toMillis()}toUTC(){return new He(this._date.toUTC())}toLocal(){return new He(this._date.toLocal())}toString(){return this.toISOString(!0)}static fromReaderAsTimeStampOffset(t){if(!t)return null;const r=H.fromISO(t,{setZone:!0});return new He(r)}};function Cn(e,t=!0){if(e instanceof zo)return e;if(e.toLowerCase()==="system")return"system";if(e.toLowerCase()==="utc")return"UTC";if(e.toLowerCase()==="unknown")return bi.instance;if(/^[+-]?[0-9]{1,2}([:][0-9]{2})?$/.test(e)){const i=pt.parseSpecifier("UTC"+(e.startsWith("+")||e.startsWith("-")?"":"+")+e);if(i)return i}const r=ur.create(e);if(!r.isValid){if(t)throw new y7(Yp.TimeZoneNotRecognized);return null}return r}const g7=()=>F.getLogger("esri.support.arcadeOnDemand"),_7=["geometry","scale","timeProperties"];function Rte(e,t){if(t!=null)for(const r of _7)t.hasArcadeDependency(r)&&e.add(r);return e}let sy;function xA(){return sy||(sy=(async()=>{const e=await N(()=>import("./arcadeUtils-_L3XJUXO.js"),__vite__mapDeps([251,252,253,254,212,53,64,49,45,12,50,59,52]));return{arcade:e.arcade,arcadeUtils:e,Dictionary:e.Dictionary,Feature:e.arcadeFeature,Voxel:e.Voxel}})()),sy}const kte=(e,t,r)=>AA.create(e,t,r,null,["$feature","$view"],[]),Nte=(e,t,r,i)=>AA.create(e,t,r,i,["$feature","$view"],[]);let AA=class PA{constructor(t,r,i,s,n,o,a){this._dependencies=new Map,this.services=null,this.script=t,this.evaluate=s;const l=Array.isArray(o)?o:o==null?void 0:o.fields;this.fields=l??[],this._syntaxTree=i,this._arcade=r,this._arcadeFeature=n,this._spatialReference=a,this._dependencies.set("geometry",r.scriptTouchesGeometry(this._syntaxTree)),this._dependencies.set("scale",this._arcade.referencesMember(this._syntaxTree,"scale")),this._dependencies.set("timeProperties",this._arcade.scriptUsesViewProperties(this._syntaxTree,["timeProperties"]))}static async create(t,r,i,s,n,o){const{arcade:a,Feature:l,Dictionary:h}=await xA(),p=r instanceof ae?r:ae.fromJSON(r);let f;try{f=a.parseScript(t,o)}catch(k){return g7().error(new I("arcade-bad-expression","Failed to parse arcade script",{script:t,error:k})),null}const m=n.reduce((k,G)=>({...k,[G]:null}),{});let y=null;s!=null&&(y=new h(s),y.immutable=!0,m.$config=null);const _=a.scriptUsesGeometryEngine(f),v=_&&a.enableGeometrySupport(),w=a.scriptUsesFeatureSet(f)&&a.enableFeatureSetSupport(),b=a.scriptIsAsync(f),M=b&&a.enableAsyncSupport(),$={vars:m,spatialReference:p,useAsync:!!M};await Promise.all([v,w,M]);const E=new Set;await a.loadDependentModules(E,f,null,b,_);const P=new h;P.immutable=!1,P.setField("scale",0);const O=a.compileScript(f,$),L=(k,G)=>{var Y;const V=(Y=k.$view)==null?void 0:Y.timeZone;if("$view"in k&&k.$view){let re;if(P.setField("scale",typeof k.$view=="object"&&"scale"in k.$view?k.$view.scale:void 0),typeof k.$view=="object"&&"timeProperties"in k.$view&&k.$view.timeProperties!=null){const{currentStart:ve,currentEnd:K}=k.$view.timeProperties;re=new h({currentStart:ve!=null?V!=null?qh.epochToArcadeDate(ve,V):qh.unknownEpochToArcadeDate(ve):void 0,currentEnd:K!=null?V!=null?qh.epochToArcadeDate(K,V):qh.unknownEpochToArcadeDate(K):void 0,startIncluded:!0,endIncluded:!0})}P.setField("timeProperties",re),k.$view=P}return y&&(k.$config=y),O({vars:k,spatialReference:p,services:G,timeZone:V})};return new PA(t,a,f,L,new l,i,p)}repurposeFeature(t){return t.geometry&&!t.geometry.spatialReference&&(t.geometry.spatialReference=this._spatialReference),this._arcadeFeature.repurposeFromGraphicLikeObject(t.geometry,t.attributes,{fields:this.fields}),this._arcadeFeature}references(t){return this._dependencies.get(t)??!1}};const v7=/^([0-9_])/,w7=/[^a-z0-9_\u0080-\uffff]+/gi;function Lte(e){return e==null?null:e.trim().replaceAll(w7,"_").replace(v7,"F$1")||null}const b7=["field","field2","field3","normalizationField","rotationInfo.field","proportionalSymbolInfo.field","proportionalSymbolInfo.normalizationField","colorInfo.field","colorInfo.normalizationField"],S7=["field","normalizationField"];function Dte(e,t){if(e!=null&&t!=null){for(const r of Array.isArray(e)?e:[e])if(J2(b7,r,t),"visualVariables"in r&&r.visualVariables)for(const i of r.visualVariables)J2(S7,i,t)}}function J2(e,t,r){if(e)for(const i of e){const s=vf(i,t),n=s&&typeof s!="function"&&r.get(s);n&&vl(i,n.name,t)}}function Fte(e,t){var r;if(e!=null&&((r=t==null?void 0:t.fields)!=null&&r.length))if("startField"in e){const i=t.get(e.startField),s=t.get(e.endField);e.startField=(i==null?void 0:i.name)??null,e.endField=(s==null?void 0:s.name)??null}else{const i=t.get(e.startTimeField),s=t.get(e.endTimeField);e.startTimeField=(i==null?void 0:i.name)??null,e.endTimeField=(s==null?void 0:s.name)??null}}const ny=new Set;function vv(e,t){return e&&t?(ny.clear(),Ic(ny,e,t),Array.from(ny).sort()):[]}function Ic(e,t,r){var i;if(r)if((i=t==null?void 0:t.fields)!=null&&i.length)if(r.includes("*"))for(const{name:s}of t.fields)e.add(s);else for(const s of r)Qf(e,t,s);else{if(r.includes("*"))return e.clear(),void e.add("*");for(const s of r)s!=null&&e.add(s)}}function Qf(e,t,r){if(typeof r=="string")if(t){const i=t.get(r);i&&e.add(i.name)}else e.add(r)}function Ute(e,t){return t==null||e==null?[]:t.includes("*")?(e.fields??[]).map(r=>r.name):t}function jte(e,t,r=1){if(!t||!e)return[];if(t.includes("*"))return["*"];const i=vv(e,t);return i.length/e.fields.length>=r?["*"]:i}async function No(e,t,r){var n;if(!r)return;let i;const s=h7(r);if(s)i=[s];else{const{arcadeUtils:o}=await xA();i=o.extractFieldNames(r,(n=t==null?void 0:t.fields)==null?void 0:n.map(a=>a.name))}for(const o of i)Qf(e,t,o)}async function wv(e,t,r){if(r&&r!=="1=1"){const i=await XU(r,t);if(!i.isStandardized)throw new I("fieldUtils:collectFilterFields","Where clause is not standardized",{where:r});Ic(e,t,i.fieldNames)}}function Gte({displayField:e,fields:t}){return e||(t!=null&&t.length?oy(t,"name-or-title")||oy(t,"unique-identifier")||oy(t,"type-or-category")||T7(t):null)}function T7(e){for(const t of e){if(!(t!=null&&t.name))continue;const r=t.name.toLowerCase();if(r.includes("name")||r.includes("title"))return t.name}return null}function oy(e,t){for(const r of e)if(r!=null&&r.valueType&&r.valueType===t)return r.name;return null}async function zte(e,t){var i;if(!t)return;const r=(i=t.elevationInfo)==null?void 0:i.featureExpressionInfo;return r?r.collectRequiredFields(e,t.fieldsIndex):void 0}function $7(e,t,r){r.onStatisticExpression?No(e,t,r.onStatisticExpression.expression):e.add(r.onStatisticField)}async function Vte(e,t,r){if(!t||!r||!("fields"in r))return;const i=[],s=r.popupTemplate;i.push(OA(e,t,s)),r.fields&&i.push(...r.fields.map(async n=>$7(e,t.fieldsIndex,n))),await Promise.all(i)}async function Bte(e,t){var n,o,a;const{fieldsIndex:r,trackInfo:i}=t;if(!t||!i||!r)return;const s=[(n=i.latestObservations.renderer)==null?void 0:n.collectRequiredFields(e,r),(o=i.previousObservations.renderer)==null?void 0:o.collectRequiredFields(e,r),(a=i.trackLines.renderer)==null?void 0:a.collectRequiredFields(e,r)];i.popupTemplate&&s.push(OA(e,t,i.popupTemplate));for(const l of[i.latestObservations.labelingInfo,i.previousObservations.labelingInfo,i.trackLines.labelingInfo])if(l)for(const h of l)s.push(RA(e,r,h));await Promise.all(s)}async function OA(e,t,r){const i=[];r!=null&&r.expressionInfos&&i.push(...r.expressionInfos.map(n=>No(e,t.fieldsIndex,n.expression)));const s=r==null?void 0:r.content;if(Array.isArray(s))for(const n of s)n.type==="expression"&&n.expressionInfo&&i.push(No(e,t.fieldsIndex,n.expressionInfo.expression));await Promise.all(i)}async function Hte(e,t,r){t&&(t.timeInfo&&(r!=null&&r.timeExtent)&&Ic(e,t.fieldsIndex,[t.timeInfo.startField,t.timeInfo.endField]),t.floorInfo&&Ic(e,t.fieldsIndex,[t.floorInfo.floorField]),(r==null?void 0:r.where)!=null&&await wv(e,t.fieldsIndex,r.where))}async function qte(e,t,r){t&&r&&await Promise.all(r.map(i=>E7(e,t,i)))}async function E7(e,t,r){t&&r&&(r.valueExpression?await No(e,t.fieldsIndex,r.valueExpression):r.field&&Qf(e,t.fieldsIndex,r.field))}function Wte(e){return e?vv(e.fieldsIndex,CA(e)):[]}function M7(e){if(!e)return[];const t=e.geometryFieldsInfo;return t?vv(e.fieldsIndex,[t.shapeAreaField,t.shapeLengthField]):[]}async function Zte(e,t,r){if(!t||!r)return;const i=t.fieldsIndex;await Promise.all(r.filters.map(s=>wv(e,i,s.where)))}const x7=new Set(["oid","global-id","guid"]),A7=new Set(["oid","global-id"]),P7=[/^fnode_$/i,/^tnode_$/i,/^lpoly_$/i,/^rpoly_$/i,/^poly_$/i,/^shape$/i,/^shape_$/i,/^subclass$/i,/^subclass_$/i,/^rings_ok$/i,/^rings_nok$/i,/perimeter/i,/objectid/i,/_i$/i];function O7(e){const t=new Set;IA(e).forEach(i=>t.add(i)),M7(e).forEach(i=>t.add(i.toLowerCase()));const r=e&&"infoFor3D"in e?e.infoFor3D:void 0;return r&&(Object.values(r.assetMapFieldRoles).forEach(i=>t.add(i.toLowerCase())),Object.values(r.transformFieldRoles).forEach(i=>t.add(i.toLowerCase()))),Array.from(t)}function CA(e){if(!e)return[];const t="editFieldsInfo"in e&&e.editFieldsInfo;if(!t)return[];const{creationDateField:r,creatorField:i,editDateField:s,editorField:n}=t;return[r,i,s,n].filter(Boolean)}function IA(e){return CA(e).map(t=>t.toLowerCase())}function Jte(e,t){var r;return e.editable&&!x7.has(e.type)&&!IA(t).includes(((r=e.name)==null?void 0:r.toLowerCase())??"")}function Yte(e,t){var i;const r=((i=e.name)==null?void 0:i.toLowerCase())??"";return!((t==null?void 0:t.objectIdField)!=null&&r===t.objectIdField.toLowerCase()||(t==null?void 0:t.globalIdField)!=null&&r===t.globalIdField.toLowerCase()||O7(t).includes(r)||A7.has(e.type)||P7.some(s=>s.test(r)))}async function Kte(e,t){const{labelingInfo:r,fieldsIndex:i}=t;r!=null&&r.length&&await Promise.all(r.map(s=>RA(e,i,s)))}async function RA(e,t,r){if(!r)return;const i=r.getLabelExpression(),s=r.where;if(i.type==="arcade")await No(e,t,i.expression);else{const n=i.expression.match(/{[^}]*}/g);n&&n.forEach(o=>{Qf(e,t,o.slice(1,-1))})}await wv(e,t,s)}function Xte(e){const t=e.defaultValue;return t!==void 0&&NA(e,t)?t:e.nullable?null:void 0}function Qte(e){const t=typeof e=="string"?{type:e}:e;return G7(t)?255:t.type==="esriFieldTypeDate"||t.type==="date"?8:void 0}function kA(e){return typeof e=="number"&&!isNaN(e)&&isFinite(e)}function C7(e){return e===null||kA(e)}function I7(e){return e===null||Number.isInteger(e)}function R7(){return!0}function NA(e,t){let r;switch(e.type){case"date":case"integer":case"long":case"small-integer":case"big-integer":case"esriFieldTypeDate":case"esriFieldTypeInteger":case"esriFieldTypeLong":case"esriFieldTypeSmallInteger":case"esriFieldTypeBigInteger":r=e.nullable?I7:Number.isInteger;break;case"double":case"single":case"esriFieldTypeSingle":case"esriFieldTypeDouble":r=e.nullable?C7:kA;break;case"string":case"esriFieldTypeString":r=e.nullable?t7:oh;break;default:r=R7}return arguments.length===1?r:r(t)}const k7=["integer","small-integer","big-integer"],N7=["single","double"],L7=["esriFieldTypeInteger","esriFieldTypeSmallInteger","esriFieldTypeBigInteger"],D7=["esriFieldTypeSingle","esriFieldTypeDouble"],LA=new Set([...k7,...L7]),F7=new Set([...N7,...D7]),U7=o_(LA,F7);function ere(e){return e!=null&&LA.has(e.type)}function j7(e){return e!=null&&U7.has(e.type)}function G7(e){return e!=null&&(e.type==="string"||e.type==="esriFieldTypeString")}function tre(e){return e!=null&&(e.type==="date"||e.type==="esriFieldTypeDate")}function rre(e){return e!=null&&(e.type==="date-only"||e.type==="esriFieldTypeDateOnly")}function ire(e){return e!=null&&(e.type==="timestamp-offset"||e.type==="esriFieldTypeTimestampOffset")}function sre(e){return e!=null&&(e.type==="time-only"||e.type==="esriFieldTypeTimeOnly")}function nre(e){return e!=null&&(e.type==="oid"||e.type==="esriFieldTypeOID")}function ore(e){return e!=null&&(e.type==="global-id"||e.type==="esriFieldTypeGlobalID")}function are(e,t){return z7(e,t)===null}var Kp,Xp;function lre(e){return e==null||typeof e=="number"&&isNaN(e)?null:e}function z7(e,t){return e==null||e.nullable&&t===null?null:NA(e,t)?j7(e)&&!V7(e.type,Number(t))?Kp.OUT_OF_RANGE:null:Xp.INVALID_TYPE}function V7(e,t){const r=typeof e=="string"?DA(e):e;if(!r)return!1;const i=r.min,s=r.max;return r.isInteger?Number.isInteger(t)&&t>=i&&t<=s:t>=i&&t<=s}function DA(e){switch(e){case"esriFieldTypeSmallInteger":case"small-integer":return B7;case"esriFieldTypeInteger":case"integer":return H7;case"esriFieldTypeBigInteger":case"big-integer":return q7;case"esriFieldTypeSingle":case"single":return W7;case"esriFieldTypeDouble":case"double":return Z7}}(function(e){e.OUT_OF_RANGE="numeric-range-validation-error::out-of-range"})(Kp||(Kp={})),function(e){e.INVALID_TYPE="type-validation-error::invalid-type"}(Xp||(Xp={}));const B7={min:-32768,max:32767,isInteger:!0,rawMin:-32768,rawMax:32767},H7={min:-2147483648,max:2147483647,isInteger:!0,rawMin:-2147483648,rawMax:2147483647},q7={min:-Number.MAX_SAFE_INTEGER,max:Number.MAX_SAFE_INTEGER,isInteger:!0,rawMin:-Number.MAX_SAFE_INTEGER,rawMax:Number.MAX_SAFE_INTEGER},W7={min:-34e37,max:12e37,isInteger:!1,rawMin:-34e37,rawMax:12e37},Z7={min:-Number.MAX_VALUE,max:Number.MAX_VALUE,isInteger:!1,rawMin:-Number.MAX_VALUE,rawMax:Number.MAX_VALUE};function ure(e,t,r){switch(e){case Jp.INVALID_CODED_VALUE:return`Value ${r} is not in the coded domain - field: ${t.name}, domain: ${JSON.stringify(t.domain)}`;case Jp.VALUE_OUT_OF_RANGE:return`Value ${r} is out of the range of valid values - field: ${t.name}, domain: ${JSON.stringify(t.domain)}`;case Xp.INVALID_TYPE:return`Value ${r} is not a valid value for the field type - field: ${t.name}, type: ${t.type}, nullable: ${t.nullable}`;case Kp.OUT_OF_RANGE:{const{min:i,max:s}=DA(t.type);return`Value ${r} is out of range for the number type - field: ${t.name}, type: ${t.type}, value range is ${i} to ${s}`}}}function cre(e,t){return!J7(e,t,null)}function J7(e,t,r){if(!(t!=null&&t.attributes)||!e)return!0;const i=new Set(Object.keys(t.attributes));let s=!1;for(const n of e)if(!i.has(n)&&(s=!0,r==null))break;return s}function hre(e){return!!e&&["raster.itempixelvalue","raster.servicepixelvalue"].some(t=>e.toLowerCase().startsWith(t))}function Y7(e){const t=e==null?void 0:e.match(/{[^}]+}/g);return t?t.map(r=>r.slice(1,-1).split(":")[0].trim()):[]}let Id=class extends j{constructor(t){super(t),this.type=null}};c([d({type:["attachments","custom","fields","media","text","expression","relationship","utility-network-associations"],readOnly:!0,json:{read:!1,write:!0}})],Id.prototype,"type",void 0),Id=c([S("esri.popup.content.Content")],Id);const gs=Id,Wh=new rt({asc:"ascending",desc:"descending"});let yu=class extends Wt.ClonableMixin(j){constructor(t){super(t),this.field=null,this.order="ascending"}};c([d({type:String,json:{write:!0}})],yu.prototype,"field",void 0),c([d({type:Wh.apiValues,json:{type:Wh.jsonValues,read:Wh.read,write:Wh.write}})],yu.prototype,"order",void 0),yu=c([S("esri.popup.support.AttachmentsOrderByInfo")],yu);const K7=yu;let ks=class extends Wt.ClonableMixin(gs){constructor(t){super(t),this.description=null,this.displayType="auto",this.orderByFields=null,this.title=null,this.type="attachments"}};c([d({type:String,json:{write:!0}})],ks.prototype,"description",void 0),c([d({type:["auto","preview","list"],json:{write:!0}})],ks.prototype,"displayType",void 0),c([d({type:[K7],json:{write:!0}})],ks.prototype,"orderByFields",void 0),c([d({type:String,json:{write:!0}})],ks.prototype,"title",void 0),c([d({type:["attachments"],readOnly:!0,json:{read:!1,write:{isRequired:!0}}})],ks.prototype,"type",void 0),ks=c([S("esri.popup.content.AttachmentsContent")],ks);const Rc=ks;var i0;let Bn=i0=class extends gs{constructor(e){super(e),this.creator=null,this.destroyer=null,this.outFields=null,this.type="custom"}clone(){return new i0({creator:this.creator,destroyer:this.destroyer,outFields:Array.isArray(this.outFields)?C(this.outFields):null})}};c([d()],Bn.prototype,"creator",void 0),c([d()],Bn.prototype,"destroyer",void 0),c([d()],Bn.prototype,"outFields",void 0),c([d({type:["custom"],readOnly:!0})],Bn.prototype,"type",void 0),Bn=i0=c([S("esri.popup.content.CustomContent")],Bn);const X7=Bn;var s0;let ha=s0=class extends j{constructor(e){super(e),this.title=null,this.expression=null,this.returnType="dictionary"}clone(){return new s0({title:this.title,expression:this.expression})}};c([d({type:String,json:{write:!0}})],ha.prototype,"title",void 0),c([d({type:String,json:{write:!0}})],ha.prototype,"expression",void 0),c([d({type:["dictionary"],readOnly:!0,json:{read:!1,write:!0}})],ha.prototype,"returnType",void 0),ha=s0=c([S("esri.popup.ElementExpressionInfo")],ha);const Q7=ha;var n0;let gu=n0=class extends gs{constructor(e){super(e),this.expressionInfo=null,this.type="expression"}clone(){var e;return new n0({expressionInfo:(e=this.expressionInfo)==null?void 0:e.clone()})}};c([d({type:Q7,json:{write:!0}})],gu.prototype,"expressionInfo",void 0),c([d({type:["expression"],readOnly:!0,json:{read:!1,write:!0}})],gu.prototype,"type",void 0),gu=n0=c([S("esri.popup.content.ExpressionContent")],gu);const em=gu;let da=class extends Wt.ClonableMixin(j){constructor(t){super(t),this.dateFormat=null,this.digitSeparator=!1,this.places=null}};c([J(MD)],da.prototype,"dateFormat",void 0),c([d({type:Boolean,json:{write:!0}})],da.prototype,"digitSeparator",void 0),c([d({type:Te,json:{write:!0}})],da.prototype,"places",void 0),da=c([S("esri.popup.support.FieldInfoFormat")],da);const ej=da;var o0;let Vr=o0=class extends j{constructor(e){super(e),this.fieldName=null,this.format=void 0,this.isEditable=!0,this.label=null,this.stringFieldOption="text-box",this.statisticType=null,this.tooltip=null,this.visible=!0}clone(){var e;return new o0({fieldName:this.fieldName,format:(e=this.format)==null?void 0:e.clone(),isEditable:this.isEditable,label:this.label,stringFieldOption:this.stringFieldOption,statisticType:this.statisticType,tooltip:this.tooltip,visible:this.visible})}};c([d({type:String,json:{write:!0}})],Vr.prototype,"fieldName",void 0),c([d({type:ej,json:{write:!0}})],Vr.prototype,"format",void 0),c([d({type:Boolean,json:{write:{alwaysWriteDefaults:!0},default:!0}})],Vr.prototype,"isEditable",void 0),c([d({type:String,json:{write:!0}})],Vr.prototype,"label",void 0),c([J(new rt({richtext:"rich-text",textarea:"text-area",textbox:"text-box"}),{default:"text-box"})],Vr.prototype,"stringFieldOption",void 0),c([d({type:["count","sum","min","max","avg","stddev","var"],json:{write:!0}})],Vr.prototype,"statisticType",void 0),c([d({type:String,json:{write:!0}})],Vr.prototype,"tooltip",void 0),c([d({type:Boolean,json:{write:!0}})],Vr.prototype,"visible",void 0),Vr=o0=c([S("esri.popup.FieldInfo")],Vr);const FA=Vr;var a0;let qi=a0=class extends gs{constructor(e){super(e),this.attributes=null,this.description=null,this.fieldInfos=null,this.title=null,this.type="fields"}writeFieldInfos(e,t){t.fieldInfos=e&&e.map(r=>r.toJSON())}clone(){return new a0(C({attributes:this.attributes,description:this.description,fieldInfos:this.fieldInfos,title:this.title}))}};c([d({type:Object,json:{write:!0}})],qi.prototype,"attributes",void 0),c([d({type:String,json:{write:!0}})],qi.prototype,"description",void 0),c([d({type:[FA]})],qi.prototype,"fieldInfos",void 0),c([oe("fieldInfos")],qi.prototype,"writeFieldInfos",null),c([d({type:String,json:{write:!0}})],qi.prototype,"title",void 0),c([d({type:["fields"],readOnly:!0,json:{read:!1,write:{isRequired:!0}}})],qi.prototype,"type",void 0),qi=a0=c([S("esri.popup.content.FieldsContent")],qi);const kc=qi;let Hn=class extends j{constructor(t){super(t),this.altText=null,this.caption="",this.title="",this.type=null}};c([d({type:String,json:{write:!0}})],Hn.prototype,"altText",void 0),c([d({type:String,json:{write:!0}})],Hn.prototype,"caption",void 0),c([d({type:String,json:{write:!0}})],Hn.prototype,"title",void 0),c([d({type:["image","bar-chart","column-chart","line-chart","pie-chart"],readOnly:!0,json:{read:!1,write:!0}})],Hn.prototype,"type",void 0),Hn=c([S("esri.popup.content.mixins.MediaInfo")],Hn);const bv=Hn;var l0;let qn=l0=class extends q{constructor(e){super(e),this.color=null,this.fieldName=null,this.tooltip=null,this.value=null}clone(){var e;return new l0({color:(e=this.color)==null?void 0:e.clone(),fieldName:this.fieldName,tooltip:this.tooltip,value:this.value})}};c([d()],qn.prototype,"color",void 0),c([d()],qn.prototype,"fieldName",void 0),c([d()],qn.prototype,"tooltip",void 0),c([d()],qn.prototype,"value",void 0),qn=l0=c([S("esri.popup.content.support.ChartMediaInfoValueSeries")],qn);const tj=qn;var u0;let Ns=u0=class extends j{constructor(e){super(e),this.colors=null,this.fields=[],this.normalizeField=null,this.series=[],this.tooltipField=null}clone(){return new u0({colors:C(this.colors),fields:C(this.fields),normalizeField:this.normalizeField,series:C(this.series),tooltipField:this.tooltipField})}};c([d({type:[ne],json:{type:[[Te]],write:!0}})],Ns.prototype,"colors",void 0),c([d({type:[String],json:{write:{isRequired:!0}}})],Ns.prototype,"fields",void 0),c([d({type:String,json:{write:!0}})],Ns.prototype,"normalizeField",void 0),c([d({type:[tj],json:{read:!1}})],Ns.prototype,"series",void 0),c([d({type:String,json:{write:!0}})],Ns.prototype,"tooltipField",void 0),Ns=u0=c([S("esri.popup.content.support.ChartMediaInfoValue")],Ns);const rj=Ns;let _u=class extends bv{constructor(t){super(t),this.type=null,this.value=void 0}};c([d({type:["bar-chart","column-chart","line-chart","pie-chart"],readOnly:!0,json:{read:!1,write:!0}})],_u.prototype,"type",void 0),c([d({type:rj,json:{write:{isRequired:!0}}})],_u.prototype,"value",void 0),_u=c([S("esri.popup.content.mixins.ChartMediaInfo")],_u);const tm=_u,rm=qt()({barchart:"bar-chart",columnchart:"column-chart",linechart:"line-chart",piechart:"pie-chart"});var c0;let Rd=c0=class extends tm{constructor(e){super(e),this.type="bar-chart"}clone(){var e;return new c0({altText:this.altText,title:this.title,caption:this.caption,value:(e=this.value)==null?void 0:e.clone()})}};c([d({type:["bar-chart"],readOnly:!0,json:{type:["barchart"],read:!1,write:{writer:rm.write,isRequired:!0}}})],Rd.prototype,"type",void 0),Rd=c0=c([S("esri.popup.content.BarChartMediaInfo")],Rd);const UA=Rd;var h0;let kd=h0=class extends tm{constructor(e){super(e),this.type="column-chart"}clone(){var e;return new h0({altText:this.altText,title:this.title,caption:this.caption,value:(e=this.value)==null?void 0:e.clone()})}};c([d({type:["column-chart"],readOnly:!0,json:{type:["columnchart"],read:!1,write:{writer:rm.write,isRequired:!0}}})],kd.prototype,"type",void 0),kd=h0=c([S("esri.popup.content.ColumnChartMediaInfo")],kd);const jA=kd;var d0;let vu=d0=class extends j{constructor(e){super(e),this.linkURL=null,this.sourceURL=null}clone(){return new d0({linkURL:this.linkURL,sourceURL:this.sourceURL})}};c([d({type:String,json:{write:!0}})],vu.prototype,"linkURL",void 0),c([d({type:String,json:{write:{isRequired:!0}}})],vu.prototype,"sourceURL",void 0),vu=d0=c([S("esri.popup.content.support.ImageMediaInfoValue")],vu);const ij=vu;var p0;let pa=p0=class extends bv{constructor(e){super(e),this.refreshInterval=0,this.type="image",this.value=void 0}clone(){var e;return new p0({altText:this.altText,title:this.title,caption:this.caption,refreshInterval:this.refreshInterval,value:(e=this.value)==null?void 0:e.clone()})}};c([d({type:Number,json:{write:!0}})],pa.prototype,"refreshInterval",void 0),c([d({type:["image"],readOnly:!0,json:{read:!1,write:{isRequired:!0}}})],pa.prototype,"type",void 0),c([d({type:ij,json:{write:{isRequired:!0}}})],pa.prototype,"value",void 0),pa=p0=c([S("esri.popup.content.ImageMediaInfo")],pa);const GA=pa;var f0;let Nd=f0=class extends tm{constructor(e){super(e),this.type="line-chart"}clone(){var e;return new f0({altText:this.altText,title:this.title,caption:this.caption,value:(e=this.value)==null?void 0:e.clone()})}};c([d({type:["line-chart"],readOnly:!0,json:{type:["linechart"],read:!1,write:{writer:rm.write,isRequired:!0}}})],Nd.prototype,"type",void 0),Nd=f0=c([S("esri.popup.content.LineChartMediaInfo")],Nd);const zA=Nd;var m0;let Ld=m0=class extends tm{constructor(e){super(e),this.type="pie-chart"}clone(){var e;return new m0({altText:this.altText,title:this.title,caption:this.caption,value:(e=this.value)==null?void 0:e.clone()})}};c([d({type:["pie-chart"],readOnly:!0,json:{type:["piechart"],read:!1,write:{writer:rm.write,isRequired:!0}}})],Ld.prototype,"type",void 0),Ld=m0=c([S("esri.popup.content.PieChartMediaInfo")],Ld);const VA=Ld,y0={base:bv,key:"type",defaultKeyValue:"image",typeMap:{"bar-chart":UA,"column-chart":jA,"line-chart":zA,"pie-chart":VA,image:GA}};var g0;let Br=g0=class extends gs{constructor(e){super(e),this.activeMediaInfoIndex=null,this.attributes=null,this.description=null,this.mediaInfos=null,this.title=null,this.type="media"}readMediaInfos(e){return e&&e.map(t=>t.type==="image"?GA.fromJSON(t):t.type==="barchart"?UA.fromJSON(t):t.type==="columnchart"?jA.fromJSON(t):t.type==="linechart"?zA.fromJSON(t):t.type==="piechart"?VA.fromJSON(t):void 0).filter(Boolean)}writeMediaInfos(e,t){t.mediaInfos=e&&e.map(r=>r.toJSON())}clone(){return new g0(C({activeMediaInfoIndex:this.activeMediaInfoIndex,attributes:this.attributes,description:this.description,mediaInfos:this.mediaInfos,title:this.title}))}};c([d()],Br.prototype,"activeMediaInfoIndex",void 0),c([d({type:Object,json:{write:!0}})],Br.prototype,"attributes",void 0),c([d({type:String,json:{write:!0}})],Br.prototype,"description",void 0),c([d({types:[y0]})],Br.prototype,"mediaInfos",void 0),c([de("mediaInfos")],Br.prototype,"readMediaInfos",null),c([oe("mediaInfos")],Br.prototype,"writeMediaInfos",null),c([d({type:String,json:{write:!0}})],Br.prototype,"title",void 0),c([d({type:["media"],readOnly:!0,json:{read:!1,write:{isRequired:!0}}})],Br.prototype,"type",void 0),Br=g0=c([S("esri.popup.content.MediaContent")],Br);const Nc=Br;var _0;let wu=_0=class extends j{constructor(e){super(e),this.field=null,this.order=null}clone(){return new _0({field:this.field,order:this.order})}};c([d({type:String,json:{write:!0}})],wu.prototype,"field",void 0),c([d({type:["asc","desc"],json:{write:!0}})],wu.prototype,"order",void 0),wu=_0=c([S("esri.popup.support.RelatedRecordsInfoFieldOrder")],wu);const BA=wu;let ci=class extends Wt.ClonableMixin(gs){constructor(t){super(t),this.description=null,this.displayCount=null,this.displayType="list",this.orderByFields=null,this.relationshipId=null,this.title=null,this.type="relationship"}};c([d({type:String,json:{write:!0}})],ci.prototype,"description",void 0),c([d({type:Number,json:{type:Te,write:!0}})],ci.prototype,"displayCount",void 0),c([d({type:["list"],json:{write:{isRequired:!0}}})],ci.prototype,"displayType",void 0),c([d({type:[BA],json:{write:!0}})],ci.prototype,"orderByFields",void 0),c([d({type:Number,json:{type:Te,write:{isRequired:!0}}})],ci.prototype,"relationshipId",void 0),c([d({type:String,json:{write:!0}})],ci.prototype,"title",void 0),c([d({type:["relationship"],readOnly:!0,json:{read:!1,write:{isRequired:!0}}})],ci.prototype,"type",void 0),ci=c([S("esri.popup.content.RelationshipContent")],ci);const Lc=ci;var v0;let bu=v0=class extends gs{constructor(e){super(e),this.text=null,this.type="text"}clone(){return new v0({text:this.text})}};c([d({type:String,json:{write:!0}})],bu.prototype,"text",void 0),c([d({type:["text"],readOnly:!0,json:{read:!1,write:{isRequired:!0}}})],bu.prototype,"type",void 0),bu=v0=c([S("esri.popup.content.TextContent")],bu);const Dc=bu;let Wi=class extends Wt.ClonableMixin(j){constructor(t){super(t),this.title=null,this.description=null,this.type=null,this.associatedNetworkSourceId=null,this.associatedAssetGroup=null,this.associatedAssetType=null}};c([d({type:String,json:{write:!0}})],Wi.prototype,"title",void 0),c([d({type:String,json:{write:!0}})],Wi.prototype,"description",void 0),c([d({type:["attachment","connectivity","container","content","structure"],json:{write:!0}})],Wi.prototype,"type",void 0),c([d({type:Number,json:{type:Te,write:!0}})],Wi.prototype,"associatedNetworkSourceId",void 0),c([d({type:Number,json:{type:Te,write:!0}})],Wi.prototype,"associatedAssetGroup",void 0),c([d({type:Number,json:{type:Te,write:!0}})],Wi.prototype,"associatedAssetType",void 0),Wi=c([S("esri.popup.support.UtilityNetworkAssociationType")],Wi);const sj=Wi;let Ls=class extends Wt.ClonableMixin(gs){constructor(t){super(t),this.description=null,this.displayCount=null,this.title=null,this.associationTypes=[],this.type="utility-network-associations"}};c([d({type:String,json:{write:!0}})],Ls.prototype,"description",void 0),c([d({type:Number,json:{type:Te,write:!0}})],Ls.prototype,"displayCount",void 0),c([d({type:String,json:{write:!0}})],Ls.prototype,"title",void 0),c([d({type:[sj],json:{write:!0}})],Ls.prototype,"associationTypes",void 0),c([J({utilityNetworkAssociations:"utility-network-associations"})],Ls.prototype,"type",void 0),Ls=c([S("esri.popup.content.UtilityNetworkAssociationsContent")],Ls);const Sv=Ls,nj={base:null,key:"type",typeMap:{attachment:Rc,media:Nc,text:Dc,expression:em,field:kc,relationship:Lc,utilityNetworkAssociations:Sv}},oj={base:null,key:"type",typeMap:{attachment:Rc,media:Nc,text:Dc,expression:em,field:kc,relationship:Lc}};var w0;let Wn=w0=class extends j{constructor(e){super(e),this.name=null,this.title=null,this.expression=null,this.returnType=null}clone(){return new w0({name:this.name,title:this.title,expression:this.expression,returnType:this.returnType})}};c([d({type:String,json:{write:!0}})],Wn.prototype,"name",void 0),c([d({type:String,json:{write:!0}})],Wn.prototype,"title",void 0),c([d({type:String,json:{write:!0}})],Wn.prototype,"expression",void 0),c([d({type:["string","number"],json:{write:!0}})],Wn.prototype,"returnType",void 0),Wn=w0=c([S("esri.popup.ExpressionInfo")],Wn);const aj=Wn;var b0;let Su=b0=class extends j{constructor(e){super(e),this.returnTopmostRaster=null,this.showNoDataRecords=null}clone(){return new b0({showNoDataRecords:this.showNoDataRecords,returnTopmostRaster:this.returnTopmostRaster})}};c([d({type:Boolean,json:{write:!0}})],Su.prototype,"returnTopmostRaster",void 0),c([d({type:Boolean,json:{write:!0}})],Su.prototype,"showNoDataRecords",void 0),Su=b0=c([S("esri.popup.LayerOptions")],Su);const lj=Su;var S0;let Tu=S0=class extends j{constructor(e){super(e),this.showRelatedRecords=null,this.orderByFields=null}clone(){return new S0({showRelatedRecords:this.showRelatedRecords,orderByFields:this.orderByFields?C(this.orderByFields):null})}};c([d({type:Boolean,json:{write:!0}})],Tu.prototype,"showRelatedRecords",void 0),c([d({type:[BA],json:{write:!0}})],Tu.prototype,"orderByFields",void 0),Tu=S0=c([S("esri.popup.RelatedRecordsInfo")],Tu);const Y2=Tu;var T0;let yr=T0=class extends sh.IdentifiableMixin(q){constructor(e){super(e),this.active=!1,this.className=null,this.disabled=!1,this.icon=null,this.id=null,this.indicator=!1,this.title=null,this.type=null,this.visible=!0}clone(){return new T0({active:this.active,className:this.className,disabled:this.disabled,icon:this.icon,id:this.id,indicator:this.indicator,title:this.title,visible:this.visible})}};c([d()],yr.prototype,"active",void 0),c([d()],yr.prototype,"className",void 0),c([d()],yr.prototype,"disabled",void 0),c([d()],yr.prototype,"icon",void 0),c([d()],yr.prototype,"id",void 0),c([d()],yr.prototype,"indicator",void 0),c([d()],yr.prototype,"title",void 0),c([d()],yr.prototype,"type",void 0),c([d()],yr.prototype,"visible",void 0),yr=T0=c([S("esri.support.actions.ActionBase")],yr);const Tv=yr;var $0;let Dd=$0=class extends Tv{constructor(e){super(e),this.image=null,this.type="button"}clone(){return new $0({active:this.active,className:this.className,disabled:this.disabled,icon:this.icon,id:this.id,indicator:this.indicator,title:this.title,visible:this.visible,image:this.image})}};c([d()],Dd.prototype,"image",void 0),Dd=$0=c([S("esri.support.actions.ActionButton")],Dd);const uj=Dd;var E0;let $u=E0=class extends Tv{constructor(e){super(e),this.image=null,this.type="toggle",this.value=!1}clone(){return new E0({active:this.active,className:this.className,disabled:this.disabled,icon:this.icon,id:this.id,indicator:this.indicator,title:this.title,visible:this.visible,image:this.image,value:this.value})}};c([d()],$u.prototype,"image",void 0),c([d()],$u.prototype,"value",void 0),$u=E0=c([S("esri.support.actions.ActionToggle")],$u);const cj=$u,Bl="relationships/",K2="expression/",hj=B.ofType({key:"type",defaultKeyValue:"button",base:Tv,typeMap:{button:uj,toggle:cj}}),dj={base:gs,key:"type",typeMap:{media:Nc,custom:X7,text:Dc,attachments:Rc,fields:kc,expression:em,relationship:Lc,utilityNetworkAssociations:Sv}},HA=new Set(["attachments","fields","media","text","expression","relationship"]),pj=new Set([...HA,"utility-network-associations"]);let Ze=class extends Wt.ClonableMixin(j){constructor(){super(...arguments),this.actions=null,this.content="",this.expressionInfos=null,this.fieldInfos=null,this.layerOptions=null,this.lastEditInfoEnabled=!0,this.outFields=null,this.overwriteActions=!1,this.returnGeometry=!1,this.title=""}castContent(t){return Array.isArray(t)?t.map(r=>fn(dj,r)):typeof t=="string"||typeof t=="function"||t instanceof HTMLElement||Ri(t)?t:(F.getLogger(this).error("content error","unsupported content value",{value:t}),null)}readContent(t,r){const{popupElements:i}=r;return Array.isArray(i)&&i.length>0?this._readPopupInfoElements(r.description,r.mediaInfos,i):this._readPopupInfo(r)}writeWebSceneContent(t,r,i,s){this._writePopupTemplateContent(t,r,s)}writeWebMapContent(t,r,i,s){this._writePopupTemplateContent(t,r,s)}writeFieldInfos(t,r,i,s){const{content:n}=this,o=Array.isArray(n)?n:null;if(t){const a=o?o.filter(h=>h.type==="fields"):[],l=a.length&&a.every(h=>{var p;return(p=h.fieldInfos)==null?void 0:p.length});r.fieldInfos=t.filter(Boolean).map(h=>{const p=h.toJSON(s);return l&&(p.visible=!1),p})}if(o)for(const a of o)a.type==="fields"&&this._writeFieldsContent(a,r)}writeLayerOptions(t,r,i,s){r[i]=!t||t.showNoDataRecords===null&&t.returnTopmostRaster===null?null:t.toJSON(s)}writeTitle(t,r){r.title=t||""}async collectRequiredFields(t,r){const i=this.expressionInfos||[];await this._collectExpressionInfoFields(t,r,[...i,...this._getContentExpressionInfos(this.content,i)]),Ic(t,r,[...this.outFields||[],...this._getActionsFields(this.actions),...this._getTitleFields(this.title),...this._getContentFields(this.content)])}async getRequiredFields(t){const r=new Set;return await this.collectRequiredFields(r,t),[...r].sort()}_writePopupTemplateContent(t,r,i){typeof t!="string"?Array.isArray(t)&&(r.popupElements=t.filter(s=>(i==null?void 0:i.origin)==="web-scene"?HA.has(s.type):pj.has(s.type)).map(s=>s==null?void 0:s.toJSON(i)),r.popupElements.forEach(s=>{s.type==="attachments"?this._writeAttachmentContent(r):s.type==="media"?this._writeMediaContent(s,r):s.type==="text"?this._writeTextContent(s,r):s.type==="relationship"&&this._writeRelationshipContent(s,r)})):r.description=t}_writeFieldsContent(t,r){if(!Array.isArray(t.fieldInfos)||!t.fieldInfos.length)return;const i=C(t.fieldInfos);Array.isArray(r.fieldInfos)?i.forEach(s=>{const n=r.fieldInfos.find(o=>{var a,l;return((a=o.fieldName)==null?void 0:a.toLowerCase())===((l=s.fieldName)==null?void 0:l.toLowerCase())});n?n.visible=!0:r.fieldInfos.push(s)}):r.fieldInfos=i}_writeAttachmentContent(t){t.showAttachments||(t.showAttachments=!0)}_writeRelationshipContent(t,r){var n,o;const i=((n=t.orderByFields)==null?void 0:n.map(a=>this._toFieldOrderJSON(a,t.relationshipId)))||[],s=[...((o=r.relatedRecordsInfo)==null?void 0:o.orderByFields)||[],...i];r.relatedRecordsInfo={showRelatedRecords:!0,...(s==null?void 0:s.length)&&{orderByFields:s}}}_writeTextContent(t,r){!r.description&&t.text&&(r.description=t.text)}_writeMediaContent(t,r){if(!Array.isArray(t.mediaInfos)||!t.mediaInfos.length)return;const i=C(t.mediaInfos);Array.isArray(r.mediaInfos)?r.mediaInfos=[...r.mediaInfos,...i]:r.mediaInfos=i}_readPopupInfoElements(t,r,i){const s={description:!1,mediaInfos:!1};return i.map(n=>n.type==="media"?(n.mediaInfos||!r||s.mediaInfos||(n.mediaInfos=r,s.mediaInfos=!0),Nc.fromJSON(n)):n.type==="text"?(n.text||!t||s.description||(n.text=t,s.description=!0),Dc.fromJSON(n)):n.type==="attachments"?Rc.fromJSON(n):n.type==="fields"?kc.fromJSON(n):n.type==="expression"?em.fromJSON(n):n.type==="relationship"?Lc.fromJSON(n):n.type==="utilityNetworkAssociations"?Sv.fromJSON(n):void 0).filter(Boolean)}_toRelationshipContent(t){const{field:r,order:i}=t;if(!(r!=null&&r.startsWith(Bl)))return null;const s=r.replace(Bl,"").split("/");if(s.length!==2)return null;const n=parseInt(s[0],10),o=s[1];return!Number.isNaN(n)&&o?Lc.fromJSON({relationshipId:n,orderByFields:[{field:o,order:i}]}):null}_toFieldOrderJSON(t,r){const{order:i,field:s}=t;return{field:`${Bl}${r}/${s}`,order:i}}_readPopupInfo({description:t,mediaInfos:r,showAttachments:i,relatedRecordsInfo:s={showRelatedRecords:!1}}){const n=[];t?n.push(new Dc({text:t})):n.push(new kc),Array.isArray(r)&&r.length&&n.push(Nc.fromJSON({mediaInfos:r})),i&&n.push(Rc.fromJSON({displayType:"auto"}));const{showRelatedRecords:o,orderByFields:a}=s;return o&&(a!=null&&a.length)&&a.forEach(l=>{const h=this._toRelationshipContent(l);h&&n.push(h)}),n.length?n:t}_getContentElementFields(t){const r=t==null?void 0:t.type;if(r==="attachments")return[...this._extractFieldNames(t.title),...this._extractFieldNames(t.description)];if(r==="custom")return t.outFields||[];if(r==="fields")return[...this._extractFieldNames(t.title),...this._extractFieldNames(t.description),...this._getFieldInfoFields(t.fieldInfos??this.fieldInfos)];if(r==="media"){const i=t.mediaInfos||[];return[...this._extractFieldNames(t.title),...this._extractFieldNames(t.description),...i.reduce((s,n)=>[...s,...this._getMediaInfoFields(n)],[])]}return r==="text"?this._extractFieldNames(t.text):r==="relationship"||r==="utility-network-associations"?[...this._extractFieldNames(t.title),...this._extractFieldNames(t.description)]:[]}_getMediaInfoFields(t){const{caption:r,title:i,value:s}=t,n=s||{},{fields:o,normalizeField:a,tooltipField:l,sourceURL:h,linkURL:p}=n,f=[...this._extractFieldNames(i),...this._extractFieldNames(r),...this._extractFieldNames(h),...this._extractFieldNames(p),...o??[]];return a&&f.push(a),l&&f.push(l),f}_getContentExpressionInfos(t,r){return Array.isArray(t)?t.reduce((i,s)=>[...i,...s.type==="expression"&&s.expressionInfo?[s.expressionInfo]:[]],r):[]}_getContentFields(t){return typeof t=="string"?this._extractFieldNames(t):Array.isArray(t)?t.reduce((r,i)=>[...r,...this._getContentElementFields(i)],[]):[]}async _collectExpressionInfoFields(t,r,i){i&&await Promise.all(i.map(s=>No(t,r,s.expression)))}_getFieldInfoFields(t){return t?t.filter(({fieldName:r,visible:i})=>!(i!==void 0&&!i||!r||r.startsWith(Bl)||r.startsWith(K2))).map(r=>r.fieldName):[]}_getActionsFields(t){return t?t.toArray().reduce((r,i)=>[...r,...this._getActionFields(i)],[]):[]}_getActionFields(t){const{className:r,title:i,type:s}=t,n=s==="button"||s==="toggle"?t.image:"";return[...this._extractFieldNames(i),...this._extractFieldNames(r),...this._extractFieldNames(n)]}_getTitleFields(t){return typeof t=="string"?this._extractFieldNames(t):[]}_extractFieldNames(t){return Y7(t).filter(r=>!(r.indexOf(Bl)===0||r.indexOf(K2)===0))}};c([d({type:hj})],Ze.prototype,"actions",void 0),c([d()],Ze.prototype,"content",void 0),c([tt("content")],Ze.prototype,"castContent",null),c([de("content",["description","fieldInfos","popupElements","mediaInfos","showAttachments","relatedRecordsInfo"])],Ze.prototype,"readContent",null),c([oe("web-scene","content",{popupElements:{type:B.ofType(oj)},showAttachments:{type:Boolean},mediaInfos:{type:B.ofType(y0)},description:{type:String},relatedRecordsInfo:{type:Y2}})],Ze.prototype,"writeWebSceneContent",null),c([oe("content",{popupElements:{type:B.ofType(nj)},showAttachments:{type:Boolean},mediaInfos:{type:B.ofType(y0)},description:{type:String},relatedRecordsInfo:{type:Y2}})],Ze.prototype,"writeWebMapContent",null),c([d({type:[aj],json:{write:!0}})],Ze.prototype,"expressionInfos",void 0),c([d({type:[FA]})],Ze.prototype,"fieldInfos",void 0),c([oe("fieldInfos")],Ze.prototype,"writeFieldInfos",null),c([d({type:lj})],Ze.prototype,"layerOptions",void 0),c([oe("layerOptions")],Ze.prototype,"writeLayerOptions",null),c([d({type:Boolean,json:{read:{source:"showLastEditInfo"},write:{target:"showLastEditInfo"},default:!0}})],Ze.prototype,"lastEditInfoEnabled",void 0),c([d()],Ze.prototype,"outFields",void 0),c([d()],Ze.prototype,"overwriteActions",void 0),c([d()],Ze.prototype,"returnGeometry",void 0),c([d({json:{type:String}})],Ze.prototype,"title",void 0),c([oe("title")],Ze.prototype,"writeTitle",null),Ze=c([S("esri.PopupTemplate")],Ze);const fj=Ze,X2=new rt({esriSMS:"simple-marker",esriPMS:"picture-marker",esriSLS:"simple-line",esriSFS:"simple-fill",esriPFS:"picture-fill",esriTS:"text",esriSHD:"shield-label-symbol",PointSymbol3D:"point-3d",LineSymbol3D:"line-3d",PolygonSymbol3D:"polygon-3d",WebStyleSymbol:"web-style",MeshSymbol3D:"mesh-3d",LabelSymbol3D:"label-3d",CIMSymbolReference:"cim"});let mj=0,fa=class extends j{constructor(t){super(t),this.id="sym"+mj++,this.type=null,this.color=new ne([0,0,0,1])}readColor(t){return(t==null?void 0:t[0])!=null?[t[0],t[1],t[2],t[3]/255]:t}async collectRequiredFields(t,r){}hash(){return JSON.stringify(this.toJSON())}clone(){}};c([d({type:X2.apiValues,readOnly:!0,json:{read:!1,write:{ignoreOrigin:!0,writer:X2.write,isRequired:!0}}})],fa.prototype,"type",void 0),c([d({type:ne,json:{write:{allowNull:!0}}})],fa.prototype,"color",void 0),c([de("color")],fa.prototype,"readColor",null),fa=c([S("esri.symbols.Symbol")],fa);const Tt=fa;var M0;let Ds=M0=class extends Tt{constructor(e){super(e),this.data=null,this.type="cim"}readData(e,t){return t}writeData(e,t){Object.assign(t,e)}async collectRequiredFields(e,t){var r;if(((r=this.data)==null?void 0:r.type)==="CIMSymbolReference"){const i=this.data.primitiveOverrides;if(i){const s=i.map(n=>{const o=n.valueExpressionInfo;return o?No(e,t,o.expression):null});await Promise.all(s)}}}clone(){return new M0({data:C(this.data)})}hash(){return M$(JSON.stringify(this.data)).toString()}};c([d({json:{write:!1}})],Ds.prototype,"color",void 0),c([d({json:{write:!0}})],Ds.prototype,"data",void 0),c([de("data",["symbol"])],Ds.prototype,"readData",null),c([oe("data",{})],Ds.prototype,"writeData",null),c([J({CIMSymbolReference:"cim"},{readOnly:!0})],Ds.prototype,"type",void 0),Ds=M0=c([S("esri.symbols.CIMSymbol")],Ds);const Ho=Ds;let ma=class extends j{constructor(t){super(t),this.enabled=!0,this.type=null,this.ignoreDrivers=!1}writeEnabled(t,r,i){t||(r[i]=t)}};c([d({type:Boolean,json:{read:{source:"enable"},write:{target:"enable"}}})],ma.prototype,"enabled",void 0),c([oe("enabled")],ma.prototype,"writeEnabled",null),c([d({type:["icon","object","line","path","fill","water","extrude","text"],readOnly:!0,json:{write:{isRequired:!0}}})],ma.prototype,"type",void 0),ma=c([S("esri.symbols.Symbol3DLayer")],ma);const Ni=ma;function yj(e,t){const r=t.transparency!=null?GM(t.transparency):1,i=t.color;return i&&Array.isArray(i)?new ne([i[0]||0,i[1]||0,i[2]||0,r]):null}function gj(e,t){t.color=e.toJSON().slice(0,3);const r=jM(e.a);r!==0&&(t.transparency=r)}function An(e){return{type:ne,nonNullable:e==null?void 0:e.nonNullable,json:{type:[Te],default:null,read:{source:["color","transparency"],reader:yj},write:{target:{color:{type:[Te],isRequired:e==null?void 0:e.colorRequiredOnWrite},transparency:{type:Te}},writer:gj}}}}const Ii={type:Number,cast:Re,json:{write:!0}};let Zn=class extends j{constructor(t){super(t),this.color=new ne([0,0,0,1]),this.extensionLength=0,this.size=ko(1)}clone(){}cloneProperties(){return{color:C(this.color),size:this.size,extensionLength:this.extensionLength}}};c([d({type:["solid","sketch"],readOnly:!0,json:{read:!0,write:{ignoreOrigin:!0,isRequired:!0}}})],Zn.prototype,"type",void 0),c([d(An({colorRequiredOnWrite:!0}))],Zn.prototype,"color",void 0),c([d({...Ii,json:{write:{overridePolicy:e=>({enabled:!!e})}}})],Zn.prototype,"extensionLength",void 0),c([d(Ii)],Zn.prototype,"size",void 0),Zn=c([S("esri.symbols.edges.Edges3D")],Zn);const $v=Zn;var x0;let Fd=x0=class extends $v{constructor(e){super(e),this.type="sketch"}clone(){return new x0(this.cloneProperties())}};c([J({sketch:"sketch"},{readOnly:!0})],Fd.prototype,"type",void 0),Fd=x0=c([S("esri.symbols.edges.SketchEdges3D")],Fd);const _j=Fd;var A0;let Ud=A0=class extends $v{constructor(e){super(e),this.type="solid"}clone(){return new A0(this.cloneProperties())}};c([J({solid:"solid"},{readOnly:!0})],Ud.prototype,"type",void 0),Ud=A0=c([S("esri.symbols.edges.SolidEdges3D")],Ud);const vj=Ud,qA={types:{key:"type",base:$v,typeMap:{solid:vj,sketch:_j}},json:{write:!0}};var P0;let sr=P0=class extends j{constructor(e){super(e),this.color=null,this.emissiveFactor=null}clone(){var t;const e={color:((t=this.color)==null?void 0:t.clone())??null,emissiveFactor:this.emissiveFactor?Y_(this.emissiveFactor):null};return new P0(e)}};c([d(An())],sr.prototype,"color",void 0),c([d({type:[Number],json:{write:!1}})],sr.prototype,"emissiveFactor",void 0),sr=P0=c([S("esri.symbols.support.Symbol3DMaterial")],sr);var O0;let Fs=O0=class extends Ni{constructor(e){super(e),this.type="extrude",this.size=1,this.material=null,this.castShadows=!0,this.edges=null}clone(){var e,t;return new O0({edges:(e=this.edges)==null?void 0:e.clone(),enabled:this.enabled,material:(t=this.material)==null?void 0:t.clone(),castShadows:this.castShadows,size:this.size})}};c([J({Extrude:"extrude"},{readOnly:!0})],Fs.prototype,"type",void 0),c([d({type:Number,json:{write:{enabled:!0,isRequired:!0}},nonNullable:!0})],Fs.prototype,"size",void 0),c([d({type:sr,json:{write:!0}})],Fs.prototype,"material",void 0),c([d({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],Fs.prototype,"castShadows",void 0),c([d(qA)],Fs.prototype,"edges",void 0),Fs=O0=c([S("esri.symbols.ExtrudeSymbol3DLayer")],Fs);const WA=Fs;let jd=class extends j{constructor(t){super(t)}clone(){throw new Error("Subclasses of LinePattern3D should implement their own clone method.")}};c([d({type:["style"],readOnly:!0,json:{read:!0,write:{ignoreOrigin:!0}}})],jd.prototype,"type",void 0),jd=c([S("esri.symbols.patterns.LinePattern3D")],jd);const ZA=jd,wj=["dash","dash-dot","dot","long-dash","long-dash-dot","long-dash-dot-dot","none","short-dash","short-dash-dot","short-dash-dot-dot","short-dot","solid"];var C0;const bj=qt()({dash:"dash","dash-dot":"dash-dot","dash-dot-dot":"long-dash-dot-dot",dot:"dot","long-dash":"long-dash","long-dash-dot":"long-dash-dot",null:"none","short-dash":"short-dash","short-dash-dot":"short-dash-dot","short-dash-dot-dot":"short-dash-dot-dot","short-dot":"short-dot",solid:"solid"});let Eu=C0=class extends ZA{constructor(e){super(e),this.type="style",this.style="solid"}clone(){const e={style:this.style};return new C0(e)}};c([d({type:["style"],json:{write:{isRequired:!0}}})],Eu.prototype,"type",void 0),c([J(bj),d({type:wj,json:{write:{isRequired:!0}}})],Eu.prototype,"style",void 0),Eu=C0=c([S("esri.symbols.patterns.LineStylePattern3D")],Eu);const Ev=Eu;let Gd=class extends j{constructor(t){super(t),this.type="style"}clone(){throw new Error("Subclasses of Pattern3D should implement their own clone method.")}};c([d({type:["style"],readOnly:!0,json:{read:!0,write:{ignoreOrigin:!0}}})],Gd.prototype,"type",void 0),Gd=c([S("esri.symbols.patterns.Pattern3D")],Gd);const JA=Gd,Sj=["backward-diagonal","cross","diagonal-cross","forward-diagonal","horizontal","none","solid","vertical"];var I0;let Mu=I0=class extends JA{constructor(e){super(e),this.type="style",this.style="solid"}clone(){return new I0({style:this.style})}};c([d({type:["style"],json:{write:{isRequired:!0}}})],Mu.prototype,"type",void 0),c([d({type:Sj,json:{read:!0,write:{isRequired:!0}}})],Mu.prototype,"style",void 0),Mu=I0=c([S("esri.symbols.patterns.StylePattern3D")],Mu);const YA=Mu,Tj={types:{key:"type",base:JA,typeMap:{style:YA}},json:{write:!0}},KA={types:{key:"type",base:ZA,typeMap:{style:Ev}},json:{write:!0}},uc=new ne("white"),$j=new ne([255,255,255,0]);function Ej(e){return e.r===0&&e.g===0&&e.b===0}var R0;let cc=R0=class extends sr{constructor(e){super(e),this.colorMixMode=null}clone(){var t;const e={color:((t=this.color)==null?void 0:t.clone())??null,emissiveFactor:this.emissiveFactor?Y_(this.emissiveFactor):null,colorMixMode:this.colorMixMode};return new R0(e)}};c([J({multiply:"multiply",replace:"replace",tint:"tint"})],cc.prototype,"colorMixMode",void 0),cc=R0=c([S("esri.symbols.support.Symbol3DFillMaterial")],cc);function Mj(e,t=!1){return e<=v$?t?new Array(e).fill(0):new Array(e):new Float64Array(e)}function xre(e){return($I(e)?e.byteLength/8:e.length)<=v$?Array.from(e):new Float64Array(e)}function Are(e,t,r){return Array.isArray(e)?e.slice(t,t+r):e.subarray(t,t+r)}function ah(e=Oj){return[e[0],e[1],e[2],e[3],e[4],e[5]]}function Mv(e,t,r,i,s,n,o=ah()){return o[0]=e,o[1]=t,o[2]=r,o[3]=i,o[4]=s,o[5]=n,o}function Pre(e,t=ah()){return xj(e,0,e.length/3,t)}function xj(e,t,r,i=ah()){return XA(i,k0),Aj(i,e,t,r),i}function Ore(e,t=Mj(24)){const[r,i,s,n,o,a]=e;return t[0]=r,t[1]=i,t[2]=s,t[3]=r,t[4]=i,t[5]=a,t[6]=r,t[7]=o,t[8]=s,t[9]=r,t[10]=o,t[11]=a,t[12]=n,t[13]=i,t[14]=s,t[15]=n,t[16]=i,t[17]=a,t[18]=n,t[19]=o,t[20]=s,t[21]=n,t[22]=o,t[23]=a,t}function Cre(e,t){const r=isFinite(e[2])||isFinite(e[5]);return new Le(r?{xmin:e[0],xmax:e[3],ymin:e[1],ymax:e[4],zmin:e[2],zmax:e[5],spatialReference:t}:{xmin:e[0],xmax:e[3],ymin:e[1],ymax:e[4],spatialReference:t})}function Ire(e,t){e[0]=Math.min(e[0],t[0]),e[1]=Math.min(e[1],t[1]),e[2]=Math.min(e[2],t[2]),e[3]=Math.max(e[3],t[3]),e[4]=Math.max(e[4],t[4]),e[5]=Math.max(e[5],t[5])}function Rre(e,t){e[0]=Math.min(e[0],t[0]),e[1]=Math.min(e[1],t[1]),e[3]=Math.max(e[3],t[2]),e[4]=Math.max(e[4],t[3])}function kre(e,t){e[0]=Math.min(e[0],t[0]),e[1]=Math.min(e[1],t[1]),e[2]=Math.min(e[2],t[2]),e[3]=Math.max(e[3],t[0]),e[4]=Math.max(e[4],t[1]),e[5]=Math.max(e[5],t[2])}function Aj(e,t,r=0,i=t.length/3){let s=e[0],n=e[1],o=e[2],a=e[3],l=e[4],h=e[5];for(let p=0;p<i;p++)s=Math.min(s,t[r+3*p]),n=Math.min(n,t[r+3*p+1]),o=Math.min(o,t[r+3*p+2]),a=Math.max(a,t[r+3*p]),l=Math.max(l,t[r+3*p+1]),h=Math.max(h,t[r+3*p+2]);e[0]=s,e[1]=n,e[2]=o,e[3]=a,e[4]=l,e[5]=h}function Nre(e,t,r){const i=t.length;let s=e[0],n=e[1],o=e[2],a=e[3],l=e[4],h=e[5];if(r)for(let p=0;p<i;p++){const f=t[p];s=Math.min(s,f[0]),n=Math.min(n,f[1]),o=Math.min(o,f[2]),a=Math.max(a,f[0]),l=Math.max(l,f[1]),h=Math.max(h,f[2])}else for(let p=0;p<i;p++){const f=t[p];s=Math.min(s,f[0]),n=Math.min(n,f[1]),a=Math.max(a,f[0]),l=Math.max(l,f[1])}e[0]=s,e[1]=n,e[2]=o,e[3]=a,e[4]=l,e[5]=h}function Lre(e){for(let t=0;t<6;t++)if(!isFinite(e[t]))return!1;return!0}function lh(e){return e[0]>=e[3]?0:e[3]-e[0]}function uh(e){return e[1]>=e[4]?0:e[4]-e[1]}function ch(e){return e[2]>=e[5]?0:e[5]-e[2]}function Dre(e){const t=lh(e),r=ch(e),i=uh(e);return Math.sqrt(t*t+r*r+i*i)}function Fre(e,t=[0,0,0]){return t[0]=e[0]+lh(e)/2,t[1]=e[1]+uh(e)/2,t[2]=e[2]+ch(e)/2,t}function Ure(e,t=[0,0,0]){return t[0]=lh(e),t[1]=uh(e),t[2]=ch(e),t}function jre(e,t){return t[0]>=e[0]&&t[1]>=e[1]&&t[2]>=e[2]&&t[0]<=e[3]&&t[1]<=e[4]&&t[2]<=e[5]}function Pj(e,t){return Math.max(t[0],e[0])<=Math.min(t[3],e[3])&&Math.max(t[1],e[1])<=Math.min(t[4],e[4])&&Math.max(t[2],e[2])<=Math.min(t[5],e[5])}function Gre(e,t){return t==null||Pj(e,t)}function zre(e,t,r,i,s=e){return s[0]=e[0]+t,s[1]=e[1]+r,s[2]=e[2]+i,s[3]=e[3]+t,s[4]=e[4]+r,s[5]=e[5]+i,s}function Vre(e,t,r=e){const i=e[0]+lh(e)/2,s=e[1]+uh(e)/2,n=e[2]+ch(e)/2;return r[0]=i+(e[0]-i)*t,r[1]=s+(e[1]-s)*t,r[2]=n+(e[2]-n)*t,r[3]=i+(e[3]-i)*t,r[4]=s+(e[4]-s)*t,r[5]=n+(e[5]-n)*t,r}function Bre(e,t){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t}function Hre(e,t,r=e){return r[0]=t[0],r[1]=t[1],r[2]=t[2],r!==e&&(r[3]=e[3],r[4]=e[4],r[5]=e[5]),r}function qre(e,t,r=e){return r[3]=t[0],r[4]=t[1],r[5]=t[2],r!==e&&(r[0]=e[0],r[1]=e[1],r[2]=e[2]),e}function XA(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e}function Wre(e){return e?XA(e,k0):ah(k0)}function Zre(e,t){return t||(t=Ct()),t[0]=e[0],t[1]=e[1],t[2]=e[3],t[3]=e[4],t}function Jre(e,t){return e[0]=t[0],e[1]=t[1],e[2]=Number.NEGATIVE_INFINITY,e[3]=t[2],e[4]=t[3],e[5]=Number.POSITIVE_INFINITY,e}function Yre(e,t,r,i,s){return e[0]=t,e[1]=r,e[2]=Number.NEGATIVE_INFINITY,e[3]=i,e[4]=s,e[5]=Number.POSITIVE_INFINITY,e}function Q2(e){return e.length===6}function Kre(e){return lh(e)===0&&uh(e)===0&&ch(e)===0}function Xre(e,t,r){if(e==null||t==null)return e===t;if(!Q2(e)||!Q2(t))return!1;for(let i=0;i<e.length;i++)if(e[i]!==t[i])return!1;return!0}const k0=[1/0,1/0,1/0,-1/0,-1/0,-1/0],Oj=[0,0,0,0,0,0];ah();function Qre(e,{isPrimitive:t,width:r,depth:i,height:s}){const n=t?10:1;if(r==null&&s==null&&i==null)return[n*e[0],n*e[1],n*e[2]];const o=Al(r,i,s);let a;for(let l=0;l<3;l++){const h=o[l];if(h!=null){a=h/e[l];break}}for(let l=0;l<3;l++)o[l]==null&&(o[l]=e[l]*a);return o}const Cj=Mv(-.5,-.5,-.5,.5,.5,.5),Ij=Mv(-.5,-.5,0,.5,.5,1),Rj=Mv(-.5,-.5,0,.5,.5,.5);function eie(e){switch(e){case"sphere":case"cube":case"diamond":return Cj;case"cylinder":case"cone":case"inverted-cone":return Ij;case"tetrahedron":return Rj;default:return}}const xv=["butt","square","round"],kj=[...xv,"none"],QA=["miter","bevel","round"];var N0;let Jn=N0=class extends j{constructor(e){super(e),this.color=new ne([0,0,0,1]),this.size=ko(1),this.pattern=null,this.patternCap="butt"}clone(){const e={color:this.color!=null?this.color.clone():null,size:this.size,pattern:this.pattern!=null?this.pattern.clone():null,patternCap:this.patternCap};return new N0(e)}};c([d(An({colorRequiredOnWrite:!0}))],Jn.prototype,"color",void 0),c([d({...Ii,json:{write:{isRequired:!0}}})],Jn.prototype,"size",void 0),c([d(KA)],Jn.prototype,"pattern",void 0),c([d({type:xv,json:{default:"butt",write:{overridePolicy(){return{enabled:this.pattern!=null}}}}})],Jn.prototype,"patternCap",void 0),Jn=N0=c([S("esri.symbols.support.Symbol3DOutline")],Jn);var zd;let Zi=zd=class extends Ni{constructor(e){super(e),this.type="fill",this.material=null,this.pattern=null,this.castShadows=!0,this.outline=null,this.edges=null}clone(){const e={edges:this.edges!=null?this.edges.clone():null,enabled:this.enabled,material:this.material!=null?this.material.clone():null,pattern:this.pattern!=null?this.pattern.clone():null,castShadows:this.castShadows,outline:this.outline!=null?this.outline.clone():null};return new zd(e)}static fromSimpleFillSymbol(e){var i,s,n;const t=e.outline&&e.outline.style&&e.outline.style!=="solid"?new Ev({style:e.outline.style}):null,r={size:((i=e.outline)==null?void 0:i.width)??0,color:(((s=e.outline)==null?void 0:s.color)??uc).clone(),pattern:t};return t&&((n=e.outline)!=null&&n.cap)&&(r.patternCap=e.outline.cap),new zd({material:new cc({color:(e.color??$j).clone()}),pattern:e.style&&e.style!=="solid"?new YA({style:e.style}):null,outline:r})}};c([J({Fill:"fill"},{readOnly:!0})],Zi.prototype,"type",void 0),c([d({type:cc,json:{write:!0}})],Zi.prototype,"material",void 0),c([d(Tj)],Zi.prototype,"pattern",void 0),c([d({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],Zi.prototype,"castShadows",void 0),c([d({type:Jn,json:{write:!0}})],Zi.prototype,"outline",void 0),c([d(qA)],Zi.prototype,"edges",void 0),Zi=zd=c([S("esri.symbols.FillSymbol3DLayer")],Zi);const hh=Zi;var L0;const Nj=qt()({circle:"circle",square:"square",cross:"cross",x:"x",kite:"kite",triangle:"triangle"});let Yn=L0=class extends j{constructor(e){super(e)}readHref(e,t,r){return e?Xc(e,r):t.dataURI}writeHref(e,t,r,i){e&&(Uo(e)?t.dataURI=e:(t.href=Pf(e,i),or(t.href)&&(t.href=ln(t.href))))}clone(){return new L0({href:this.href,primitive:this.primitive})}};c([d({type:String,json:{write:!0,read:{source:["href","dataURI"]}}})],Yn.prototype,"href",void 0),c([de("href")],Yn.prototype,"readHref",null),c([oe("href",{href:{type:String},dataURI:{type:String}})],Yn.prototype,"writeHref",null),c([J(Nj)],Yn.prototype,"primitive",void 0),Yn=L0=c([S("esri.symbols.support.IconSymbol3DLayerResource")],Yn);const tie="circle";var D0;let Ra=D0=class extends q{constructor(){super(...arguments),this.x=0,this.y=0}clone(){return new D0({x:this.x,y:this.y})}};c([d({type:Number})],Ra.prototype,"x",void 0),c([d({type:Number})],Ra.prototype,"y",void 0),Ra=D0=c([S("esri.symbols.support.Symbol3DAnchorPosition2D")],Ra);var F0;let xu=F0=class extends j{constructor(e){super(e),this.color=new ne([0,0,0,1]),this.size=ko(1)}clone(){const e={color:this.color!=null?this.color.clone():null,size:this.size};return new F0(e)}};c([d(An({colorRequiredOnWrite:!0}))],xu.prototype,"color",void 0),c([d({...Ii,json:{write:{isRequired:!0}}})],xu.prototype,"size",void 0),xu=F0=c([S("esri.symbols.support.Symbol3DIconOutline")],xu);var ya;const eP="esri.symbols.IconSymbol3DLayer";let Hr=ya=class extends Ni{constructor(e){super(e),this.material=null,this.resource=null,this.type="icon",this.size=12,this.anchor="center",this.anchorPosition=null,this.outline=null,this.angle=0}clone(){return new ya({anchor:this.anchor,anchorPosition:C(this.anchorPosition),enabled:this.enabled,material:C(this.material),outline:C(this.outline),resource:C(this.resource),angle:this.angle,size:this.size})}static fromSimpleMarkerSymbol(e){const t=e.color||uc,r=eS(e),i=e.outline&&e.outline.width>0?{size:e.outline.width,color:(e.outline.color||uc).clone()}:null;return new ya({size:e.size,angle:e.angle,resource:{primitive:Dj(e.style)},material:{color:t},outline:i,anchor:r?"relative":void 0,anchorPosition:r})}static fromPictureMarkerSymbol(e){const t=!e.color||Ej(e.color)?uc:e.color,r=eS(e);return new ya({size:e.width<=e.height?e.height:e.width,angle:e.angle,resource:{href:e.url},material:{color:t.clone()},anchor:r?"relative":void 0,anchorPosition:r})}static fromCIMSymbol(e){return new ya({resource:{href:AE({mediaType:"application/json",data:JSON.stringify(e.data)})}})}};c([d({type:sr,json:{write:!0}})],Hr.prototype,"material",void 0),c([d({type:Yn,json:{write:!0}})],Hr.prototype,"resource",void 0),c([J({Icon:"icon"},{readOnly:!0})],Hr.prototype,"type",void 0),c([d({...Ii,json:{write:{isRequired:!0}}})],Hr.prototype,"size",void 0),c([J({center:"center",left:"left",right:"right",top:"top",bottom:"bottom",topLeft:"top-left",topRight:"top-right",bottomLeft:"bottom-left",bottomRight:"bottom-right",relative:"relative"},{default:"center"})],Hr.prototype,"anchor",void 0),c([d({type:Ra,json:{type:[Number],read:{reader:e=>new Ra({x:e[0],y:e[1]})},write:{writer:(e,t)=>{t.anchorPosition=[e.x,e.y]},overridePolicy(){return{enabled:this.anchor==="relative"}}}}})],Hr.prototype,"anchorPosition",void 0),c([d({type:xu,json:{write:!0}})],Hr.prototype,"outline",void 0),c([d({type:Number,json:{write:!0,default:0}})],Hr.prototype,"angle",void 0),Hr=ya=c([S(eP)],Hr);const _o=Hr;function eS(e){const t="width"in e?e.width:e.size,r="height"in e?e.height:e.size,i=tS(e.xoffset),s=tS(e.yoffset);return(i||s)&&t&&r?{x:-i/t,y:s/r}:null}function tS(e){return isFinite(e)?e:0}const Lj={circle:"circle",cross:"cross",diamond:"kite",square:"square",x:"x",triangle:"triangle",path:null};function Dj(e){return Lj[e]||(F.getLogger(eP).warn(`${e} cannot be mapped to Icon symbol. Fallback to "circle"`),"circle")}const Fj=["begin","end","begin-end"],tP=["arrow","circle","square","diamond","cross","x"];let Kn=class extends Wt.ClonableMixin(j){constructor(t){super(t),this.type="style",this.placement="begin-end",this.style="arrow",this.color=null}equals(t){return t!=null&&t.placement===this.placement&&t.style===this.style&&(this.color==null&&t.color==null||this.color!=null&&t.color!=null&&this.color.toJSON()===t.color.toJSON())}};c([d({type:["style"],readOnly:!0,json:{read:!0,write:{ignoreOrigin:!0,isRequired:!0}}})],Kn.prototype,"type",void 0),c([d({type:Fj,json:{default:"begin-end",write:!0}})],Kn.prototype,"placement",void 0),c([d({type:tP,json:{default:"arrow",write:!0}})],Kn.prototype,"style",void 0),c([d({type:ne,json:{type:[Te],default:null,write:!0}})],Kn.prototype,"color",void 0),Kn=c([S("esri.symbols.LineStyleMarker3D")],Kn);const U0=Kn;var Vd;let hi=Vd=class extends Ni{constructor(e){super(e),this.material=null,this.type="line",this.join="miter",this.cap="butt",this.size=ko(1),this.pattern=null,this.marker=null}clone(){const e={enabled:this.enabled,material:this.material!=null?this.material.clone():null,size:this.size,join:this.join,cap:this.cap,pattern:this.pattern!=null?this.pattern.clone():null,marker:this.marker!=null?this.marker.clone():null};return new Vd(e)}static fromSimpleLineSymbol(e){var r;const t={enabled:!0,size:e.width??ko(1),cap:e.cap||"butt",join:e.join||"miter",pattern:e.style?new Ev({style:e.style}):null,material:new sr({color:(e.color||uc).clone()}),marker:e.marker?new U0({placement:e.marker.placement,style:e.marker.style,color:((r=e.marker.color)==null?void 0:r.clone())??null}):null};return new Vd(t)}};c([d({type:sr,json:{write:!0}})],hi.prototype,"material",void 0),c([J({Line:"line"},{readOnly:!0})],hi.prototype,"type",void 0),c([d({type:QA,json:{write:!0,default:"miter"}})],hi.prototype,"join",void 0),c([d({type:xv,json:{write:!0,default:"butt"}})],hi.prototype,"cap",void 0),c([d({...Ii,json:{write:{isRequired:!0}}})],hi.prototype,"size",void 0),c([d(KA)],hi.prototype,"pattern",void 0),c([d({types:{key:"type",base:U0,typeMap:{style:U0}},json:{write:!0}})],hi.prototype,"marker",void 0),hi=Vd=c([S("esri.symbols.LineSymbol3DLayer")],hi);const dh=hi;var j0;const Uj=qt()({sphere:"sphere",cylinder:"cylinder",cube:"cube",cone:"cone",diamond:"diamond",tetrahedron:"tetrahedron",invertedCone:"inverted-cone"});let Au=j0=class extends j{clone(){return new j0({href:this.href,primitive:this.primitive})}};c([d({type:String,json:{read:T_,write:nl}})],Au.prototype,"href",void 0),c([J(Uj)],Au.prototype,"primitive",void 0),Au=j0=c([S("esri.symbols.support.ObjectSymbol3DLayerResource")],Au);const iie="sphere";var G0;let fo=G0=class extends q{constructor(){super(...arguments),this.x=0,this.y=0,this.z=0}clone(){return new G0({x:this.x,y:this.y,z:this.z})}};c([d({type:Number})],fo.prototype,"x",void 0),c([d({type:Number})],fo.prototype,"y",void 0),c([d({type:Number})],fo.prototype,"z",void 0),fo=G0=c([S("esri.symbols.support.Symbol3DAnchorPosition3D")],fo);var z0;let ft=z0=class extends Ni{constructor(e){super(e),this.material=null,this.castShadows=!0,this.resource=null,this.type="object",this.width=void 0,this.height=void 0,this.depth=void 0,this.anchor=void 0,this.anchorPosition=void 0,this.heading=void 0,this.tilt=void 0,this.roll=void 0}clone(){var e,t,r;return new z0({heading:this.heading,tilt:this.tilt,roll:this.roll,anchor:this.anchor,anchorPosition:(e=this.anchorPosition)==null?void 0:e.clone(),depth:this.depth,enabled:this.enabled,height:this.height,material:((t=this.material)==null?void 0:t.clone())??null,castShadows:this.castShadows,resource:(r=this.resource)==null?void 0:r.clone(),width:this.width})}get isPrimitive(){return!this.resource||typeof this.resource.href!="string"}};c([d({type:sr,json:{write:!0}})],ft.prototype,"material",void 0),c([d({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],ft.prototype,"castShadows",void 0),c([d({type:Au,json:{write:!0}})],ft.prototype,"resource",void 0),c([J({Object:"object"},{readOnly:!0})],ft.prototype,"type",void 0),c([d({type:Number,json:{write:!0}})],ft.prototype,"width",void 0),c([d({type:Number,json:{write:!0}})],ft.prototype,"height",void 0),c([d({type:Number,json:{write:!0}})],ft.prototype,"depth",void 0),c([J({center:"center",top:"top",bottom:"bottom",origin:"origin",relative:"relative"},{default:"origin"})],ft.prototype,"anchor",void 0),c([d({type:fo,json:{type:[Number],read:{reader:e=>new fo({x:e[0],y:e[1],z:e[2]})},write:{writer:(e,t)=>{t.anchorPosition=[e.x,e.y,e.z]},overridePolicy(){return{enabled:this.anchor==="relative"}}}}})],ft.prototype,"anchorPosition",void 0),c([d({type:Number,json:{write:!0}})],ft.prototype,"heading",void 0),c([d({type:Number,json:{write:!0}})],ft.prototype,"tilt",void 0),c([d({type:Number,json:{write:!0}})],ft.prototype,"roll",void 0),c([d({readOnly:!0})],ft.prototype,"isPrimitive",null),ft=z0=c([S("esri.symbols.ObjectSymbol3DLayer")],ft);const Av=ft;var V0;let Mt=V0=class extends Ni{constructor(e){super(e),this.material=null,this.castShadows=!0,this.type="path",this.profile="circle",this.join="miter",this.cap="butt",this.width=void 0,this.height=void 0,this.anchor="center",this.profileRotation="all"}readWidth(e,t){return e??(t.height==null&&t.size!=null?t.size:void 0)}readHeight(e,t){return e??(t.width==null&&t.size!=null?t.size:void 0)}clone(){return new V0({enabled:this.enabled,material:this.material!=null?this.material.clone():null,castShadows:this.castShadows,profile:this.profile,join:this.join,cap:this.cap,width:this.width,height:this.height,profileRotation:this.profileRotation,anchor:this.anchor})}};c([d({type:sr,json:{write:!0}})],Mt.prototype,"material",void 0),c([d({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],Mt.prototype,"castShadows",void 0),c([J({Path:"path"},{readOnly:!0})],Mt.prototype,"type",void 0),c([d({type:["circle","quad"],json:{write:!0,default:"circle"}})],Mt.prototype,"profile",void 0),c([d({type:QA,json:{write:!0,default:"miter"}})],Mt.prototype,"join",void 0),c([d({type:kj,json:{write:!0,default:"butt"}})],Mt.prototype,"cap",void 0),c([d({type:Number,json:{write:{enabled:!0,target:{width:{type:Number},size:{type:Number}}}}})],Mt.prototype,"width",void 0),c([de("width",["width","size","height"])],Mt.prototype,"readWidth",null),c([d({type:Number,json:{write:!0}})],Mt.prototype,"height",void 0),c([de("height",["height","size","width"])],Mt.prototype,"readHeight",null),c([d({type:["center","bottom","top"],json:{write:!0,default:"center"}})],Mt.prototype,"anchor",void 0),c([d({type:["heading","all"],json:{write:!0,default:"all"}})],Mt.prototype,"profileRotation",void 0),Mt=V0=c([S("esri.symbols.PathSymbol3DLayer")],Mt);const Pv=Mt,jj=["none","underline","line-through"],Gj=["normal","italic","oblique"],zj=["normal","lighter","bold","bolder"],rP={type:Number,cast:e=>{const t=rr(e);return t===0?1:ii(t,.1,4)},nonNullable:!0},Vj=["left","right","center"],Bj=["baseline","top","middle","bottom"],iP={type:Vj,nonNullable:!0},sP={type:Bj,nonNullable:!0},sie=8;var B0;let Ji=B0=class extends j{constructor(e){super(e),this.decoration="none",this.family="sans-serif",this.size=9,this.style="normal",this.weight="normal"}castSize(e){return Re(e)}clone(){return new B0({decoration:this.decoration,family:this.family,size:this.size,style:this.style,weight:this.weight})}hash(){return`${this.decoration}.${this.family}.${this.size}.${this.style}.${this.weight}`}};c([d({type:jj,json:{default:"none",write:!0}})],Ji.prototype,"decoration",void 0),c([d({type:String,json:{write:!0}})],Ji.prototype,"family",void 0),c([d({type:Number,json:{write:{overridePolicy:(e,t,r)=>({enabled:!r||!r.textSymbol3D})}}})],Ji.prototype,"size",void 0),c([tt("size")],Ji.prototype,"castSize",null),c([d({type:Gj,json:{default:"normal",write:!0}})],Ji.prototype,"style",void 0),c([d({type:zj,json:{default:"normal",write:!0}})],Ji.prototype,"weight",void 0),Ji=B0=c([S("esri.symbols.Font")],Ji);const im=Ji;var H0;let ka=H0=class extends j{constructor(){super(...arguments),this.color=new ne([0,0,0,1]),this.size=0}clone(){const e={color:C(this.color),size:this.size};return new H0(e)}};c([d(An())],ka.prototype,"color",void 0),c([d(Ii)],ka.prototype,"size",void 0),ka=H0=c([S("esri.symbols.support.Symbol3DHalo")],ka);let hc=class extends Wt.ClonableMixin(j){constructor(t){super(t),this.color=null}};c([d(An())],hc.prototype,"color",void 0),hc=c([S("esri.symbols.support.Symbol3DTextBackground")],hc);var Bd;let Lt=Bd=class extends Ni{constructor(e){super(e),this._userSize=void 0,this.halo=null,this.horizontalAlignment="center",this.lineHeight=1,this.material=null,this.background=null,this.text=null,this.type="text",this.verticalAlignment="baseline"}get font(){return this._get("font")||null}set font(e){e!=null&&this._userSize!=null&&(e.size=this._userSize),this._set("font",e)}writeFont(e,t,r,i){const s={...i,textSymbol3D:!0};t.font=e.write({},s),delete t.font.size}get size(){var e;return this._userSize!=null?this._userSize:((e=this.font)==null?void 0:e.size)!=null?this.font.size:9}set size(e){this._userSize=e,this.font!=null&&(this.font.size=this._userSize),this.notifyChange("size")}clone(){const e=new Bd({enabled:this.enabled,font:this.font&&C(this.font),halo:this.halo&&C(this.halo),horizontalAlignment:this.horizontalAlignment,lineHeight:this.lineHeight,material:this.material!=null?this.material.clone():null,text:this.text,verticalAlignment:this.verticalAlignment,background:C(this.background)});return e._userSize=this._userSize,e}static fromTextSymbol(e){return new Bd({font:e.font!=null?e.font.clone():new im,halo:Hj(e.haloColor,e.haloSize),horizontalAlignment:e.horizontalAlignment,lineHeight:e.lineHeight,material:e.color?new sr({color:e.color.clone()}):null,text:e.text,verticalAlignment:e.verticalAlignment,background:e.backgroundColor?new hc({color:e.backgroundColor.clone()}):null})}};function Hj(e,t){return e&&t!=null&&t>0?new ka({color:C(e),size:t}):null}c([d({type:im,json:{write:!0}})],Lt.prototype,"font",null),c([oe("font")],Lt.prototype,"writeFont",null),c([d({type:ka,json:{write:!0}})],Lt.prototype,"halo",void 0),c([d({...iP,json:{default:"center",write:!0}})],Lt.prototype,"horizontalAlignment",void 0),c([d({...rP,json:{default:1,write:!0}})],Lt.prototype,"lineHeight",void 0),c([d({type:sr,json:{write:!0}})],Lt.prototype,"material",void 0),c([d({type:hc,json:{write:!0}})],Lt.prototype,"background",void 0),c([d(Ii)],Lt.prototype,"size",null),c([d({type:String,json:{write:!0}})],Lt.prototype,"text",void 0),c([J({Text:"text"},{readOnly:!0})],Lt.prototype,"type",void 0),c([d({...sP,json:{default:"baseline",write:!0}})],Lt.prototype,"verticalAlignment",void 0),Lt=Bd=c([S("esri.symbols.TextSymbol3DLayer")],Lt);const Pl=Lt;var q0;let Us=q0=class extends Ni{constructor(e){super(e),this.color=W0.clone(),this.type="water",this.waterbodySize="medium",this.waveDirection=null,this.waveStrength="moderate"}clone(){return new q0({color:C(this.color),waterbodySize:this.waterbodySize,waveDirection:this.waveDirection,waveStrength:this.waveStrength})}};c([d({type:ne,nonNullable:!0,json:{type:[Te],write:(e,t,r)=>t[r]=e.toArray(ne.AlphaMode.UNLESS_OPAQUE),default:()=>W0.clone(),defaultEquals:e=>e.toCss(!0)===W0.toCss(!0)}})],Us.prototype,"color",void 0),c([J({Water:"water"},{readOnly:!0})],Us.prototype,"type",void 0),c([d({type:["small","medium","large"],json:{write:!0,default:"medium"}})],Us.prototype,"waterbodySize",void 0),c([d({type:Number,json:{write:!0,default:null}})],Us.prototype,"waveDirection",void 0),c([d({type:["calm","rippled","slight","moderate"],json:{write:!0,default:"moderate"}})],Us.prototype,"waveStrength",void 0),Us=q0=c([S("esri.symbols.WaterSymbol3DLayer")],Us);const nP=Us,W0=new ne([0,119,190]);var Z0;let Xn=Z0=class extends q{constructor(e){super(e),this.name=null,this.styleUrl=null,this.styleName=null,this.portal=null}clone(){return new Z0({name:this.name,styleUrl:this.styleUrl,styleName:this.styleName,portal:this.portal})}};c([d({type:String})],Xn.prototype,"name",void 0),c([d({type:String})],Xn.prototype,"styleUrl",void 0),c([d({type:String})],Xn.prototype,"styleName",void 0),c([d({type:_n})],Xn.prototype,"portal",void 0),Xn=Z0=c([S("esri.symbols.support.StyleOrigin")],Xn);const J0=Xn;var Y0;let dc=Y0=class extends q{constructor(){super(...arguments),this.url=""}clone(){return new Y0({url:this.url})}};c([d({type:String})],dc.prototype,"url",void 0),dc=Y0=c([S("esri.symbols.support.Thumbnail")],dc);const oP={icon:_o,object:Av,line:dh,path:Pv,fill:hh,extrude:WA,text:Pl,water:nP},qj=B.ofType({base:Ni,key:"type",typeMap:oP,errorContext:"symbol-layer"});let di=class extends Tt{constructor(t){super(t),this.styleOrigin=null,this.thumbnail=null,this.type=null;const r=this.__accessor__&&this.__accessor__.metadata&&this.__accessor__.metadata.symbolLayers,i=r==null?void 0:r.type,s=i||B;this._set("symbolLayers",new s)}get color(){return null}set color(t){this.constructed&&F.getLogger(this).error("Symbol3D does not support colors on the symbol level. Colors may be set on individual symbol layer materials instead.")}set symbolLayers(t){ms(t,this._get("symbolLayers"))}readStyleOrigin(t,r,i){if(t.styleUrl&&t.name){const s=Xc(t.styleUrl,i);return new J0({styleUrl:s,name:t.name})}if(t.styleName&&t.name)return new J0({portal:(i==null?void 0:i.portal)||_n.getDefault(),styleName:t.styleName,name:t.name});i!=null&&i.messages&&i.messages.push(new fs("symbol3d:incomplete-style-origin","Style origin requires either a 'styleUrl' or 'styleName' and a 'name' property",{context:i,definition:t}))}writeStyleOrigin(t,r,i,s){if(t.styleUrl&&t.name){let n=Pf(t.styleUrl,s);or(n)&&(n=ln(n)),r.styleOrigin={styleUrl:n,name:t.name}}else t.styleName&&t.name&&(t.portal&&(s!=null&&s.portal)&&!tN(t.portal.restUrl,s.portal.restUrl)?s!=null&&s.messages&&s.messages.push(new fs("symbol:cross-portal","The symbol style origin cannot be persisted because it refers to an item on a different portal than the one being saved to.",{symbol:this})):r.styleOrigin={styleName:t.styleName,name:t.name})}normalizeCtorArgs(t){return t instanceof Ni||t&&oP[t.type]?{symbolLayers:[t]}:Array.isArray(t)?{symbolLayers:t}:t}};c([d({json:{read:!1,write:!1}})],di.prototype,"color",null),c([d({type:qj,nonNullable:!0,json:{write:!0}}),tt(WE)],di.prototype,"symbolLayers",null),c([d({type:J0})],di.prototype,"styleOrigin",void 0),c([de("styleOrigin")],di.prototype,"readStyleOrigin",null),c([oe("styleOrigin",{"styleOrigin.styleUrl":{type:String},"styleOrigin.styleName":{type:String},"styleOrigin.name":{type:String}})],di.prototype,"writeStyleOrigin",null),c([d({type:dc,json:{read:!1}})],di.prototype,"thumbnail",void 0),c([d({type:["point-3d","line-3d","polygon-3d","mesh-3d","label-3d"],readOnly:!0})],di.prototype,"type",void 0),di=c([S("esri.symbols.Symbol3D")],di);const ph=di;let Pu=class extends j{constructor(t){super(t),this.visible=!0}clone(){throw new Error("Subclasses of Callout3D should implement their own clone method.")}};c([d({type:["line"],constructOnly:!0,json:{read:!1,write:{ignoreOrigin:!0,isRequired:!0}}})],Pu.prototype,"type",void 0),c([d({readOnly:!0})],Pu.prototype,"visible",void 0),Pu=c([S("esri.symbols.callouts.Callout3D")],Pu);const aP=Pu;var K0;let Hd=K0=class extends j{constructor(e){super(e),this.color=new ne("white")}clone(){return new K0({color:C(this.color)})}};c([d(An({colorRequiredOnWrite:!0}))],Hd.prototype,"color",void 0),Hd=K0=c([S("esri.symbols.callouts.LineCallout3DBorder")],Hd);const Wj=Hd;var X0;let js=X0=class extends aP{constructor(e){super(e),this.type="line",this.color=new ne([0,0,0,1]),this.size=ko(1),this.border=null}get visible(){return this.size>0&&this.color!=null&&this.color.a>0}clone(){return new X0({color:C(this.color),size:this.size,border:C(this.border)})}};c([J({line:"line"})],js.prototype,"type",void 0),c([d(An({colorRequiredOnWrite:!0}))],js.prototype,"color",void 0),c([d({...Ii,json:{write:{isRequired:!0}}})],js.prototype,"size",void 0),c([d({type:Wj,json:{write:!0}})],js.prototype,"border",void 0),c([d({readOnly:!0})],js.prototype,"visible",null),js=X0=c([S("esri.symbols.callouts.LineCallout3D")],js);const lP=js;function Ov(e){if(!e)return!1;const t=e.verticalOffset;return!(!t||t.screenLength<=0||t.maxWorldLength!=null&&t.maxWorldLength<=0)}function uP(e){if(!e||!e.supportsCallout||!e.supportsCallout())return!1;const t=e.callout;return!!(t!=null&&t.visible)&&!!Ov(e)}function lie(e){return e.type==="point-3d"||e.type==="label-3d"}function uie(e){return e.horizontalAlignment==="center"}const cP={types:{key:"type",base:aP,typeMap:{line:lP}},json:{write:!0}};var Q0;let ga=Q0=class extends j{constructor(e){super(e),this.screenLength=0,this.minWorldLength=0,this.maxWorldLength=null}clone(){return new Q0({screenLength:this.screenLength,minWorldLength:this.minWorldLength,maxWorldLength:this.maxWorldLength})}};c([d({...Ii,json:{write:{isRequired:!0}}})],ga.prototype,"screenLength",void 0),c([d({type:Number,nonNullable:!0,json:{write:!0,default:0}})],ga.prototype,"minWorldLength",void 0),c([d({type:Number,json:{write:!0}})],ga.prototype,"maxWorldLength",void 0),ga=Q0=c([S("esri.symbols.support.Symbol3DVerticalOffset")],ga);const Cv=ga;var qd;const hP=B.ofType({base:null,key:"type",typeMap:{text:Pl}});let Gs=qd=class extends ph{constructor(e){super(e),this.verticalOffset=null,this.callout=null,this.styleOrigin=null,this.symbolLayers=new hP,this.type="label-3d"}supportsCallout(){return!0}hasVisibleCallout(){return uP(this)}hasVisibleVerticalOffset(){return Ov(this)}clone(){return new qd({styleOrigin:C(this.styleOrigin),symbolLayers:C(this.symbolLayers),thumbnail:C(this.thumbnail),callout:C(this.callout),verticalOffset:C(this.verticalOffset)})}static fromTextSymbol(e){return new qd({symbolLayers:new B([Pl.fromTextSymbol(e)])})}};c([d({type:Cv,json:{write:!0}})],Gs.prototype,"verticalOffset",void 0),c([d(cP)],Gs.prototype,"callout",void 0),c([d({json:{read:!1,write:!1}})],Gs.prototype,"styleOrigin",void 0),c([d({type:hP})],Gs.prototype,"symbolLayers",void 0),c([J({LabelSymbol3D:"label-3d"},{readOnly:!0})],Gs.prototype,"type",void 0),Gs=qd=c([S("esri.symbols.LabelSymbol3D")],Gs);const Iv=Gs;var Wd;const dP=B.ofType({base:null,key:"type",typeMap:{line:dh,path:Pv}}),Zj=B.ofType({base:null,key:"type",typeMap:{line:dh,path:Pv}});let Ou=Wd=class extends ph{constructor(e){super(e),this.symbolLayers=new dP,this.type="line-3d"}clone(){return new Wd({styleOrigin:C(this.styleOrigin),symbolLayers:C(this.symbolLayers),thumbnail:C(this.thumbnail)})}static fromSimpleLineSymbol(e){return new Wd({symbolLayers:new B([dh.fromSimpleLineSymbol(e)])})}};c([d({type:dP,json:{type:Zj}})],Ou.prototype,"symbolLayers",void 0),c([J({LineSymbol3D:"line-3d"},{readOnly:!0})],Ou.prototype,"type",void 0),Ou=Wd=c([S("esri.symbols.LineSymbol3D")],Ou);const sm=Ou;var Zd;const pP=B.ofType({base:null,key:"type",typeMap:{fill:hh}});let Cu=Zd=class extends ph{constructor(e){super(e),this.symbolLayers=new pP,this.type="mesh-3d"}clone(){return new Zd({styleOrigin:C(this.styleOrigin),symbolLayers:C(this.symbolLayers),thumbnail:C(this.thumbnail)})}static fromSimpleFillSymbol(e){return new Zd({symbolLayers:new B([hh.fromSimpleFillSymbol(e)])})}};c([d({type:pP})],Cu.prototype,"symbolLayers",void 0),c([J({MeshSymbol3D:"mesh-3d"},{readOnly:!0})],Cu.prototype,"type",void 0),Cu=Zd=c([S("esri.symbols.MeshSymbol3D")],Cu);const Rv=Cu;let Iu=class extends Tt{constructor(t){super(t),this.type="simple-line",this.width=.75}hash(){return`${this.type}.${this.width}`}};c([J({esriSLS:"simple-line"},{readOnly:!0})],Iu.prototype,"type",void 0),c([d({type:Number,cast:Re,json:{write:!0}})],Iu.prototype,"width",void 0),Iu=c([S("esri.symbols.LineSymbol")],Iu);const Jj=Iu;var e1;let pi=e1=class extends j{constructor(e){super(e),this.placement="begin-end",this.type="line-marker",this.style="arrow"}writeStyle(e,t,r,i){t[r]=(i==null?void 0:i.origin)==="web-map"?"arrow":e}set color(e){this._set("color",e)}readColor(e){return(e==null?void 0:e[0])!=null?[e[0],e[1],e[2],e[3]/255]:e}writeColor(e,t,r,i){(i==null?void 0:i.origin)==="web-map"||(t[r]=e)}clone(){return new e1({color:C(this.color),placement:this.placement,style:this.style})}hash(){var e;return`${this.placement}.${(e=this.color)==null?void 0:e.hash()}.${this.style}`}};c([d({type:["begin","end","begin-end"],json:{write:!0}})],pi.prototype,"placement",void 0),c([J({"line-marker":"line-marker"},{readOnly:!0}),d({json:{origins:{"web-map":{write:!1}}}})],pi.prototype,"type",void 0),c([d({type:tP})],pi.prototype,"style",void 0),c([oe("style")],pi.prototype,"writeStyle",null),c([d({type:ne,value:null,json:{write:{allowNull:!0}}})],pi.prototype,"color",null),c([de("color")],pi.prototype,"readColor",null),c([oe("color")],pi.prototype,"writeColor",null),pi=e1=c([S("esri.symbols.LineSymbolMarker")],pi);const Yj=pi;var t1;const ay=new rt({esriSLSSolid:"solid",esriSLSDash:"dash",esriSLSDot:"dot",esriSLSDashDot:"dash-dot",esriSLSDashDotDot:"long-dash-dot-dot",esriSLSNull:"none",esriSLSShortDash:"short-dash",esriSLSShortDot:"short-dot",esriSLSShortDashDot:"short-dash-dot",esriSLSShortDashDotDot:"short-dash-dot-dot",esriSLSLongDash:"long-dash",esriSLSLongDashDot:"long-dash-dot"});let Yi=t1=class extends Jj{constructor(...e){super(...e),this.type="simple-line",this.style="solid",this.cap="round",this.join="round",this.marker=null,this.miterLimit=2}normalizeCtorArgs(e,t,r,i,s,n){if(e&&typeof e!="string")return e;const o={};return e!=null&&(o.style=e),t!=null&&(o.color=t),r!=null&&(o.width=Re(r)),i!=null&&(o.cap=i),s!=null&&(o.join=s),n!=null&&(o.miterLimit=Re(n)),o}clone(){var e;return new t1({color:C(this.color),style:this.style,width:this.width,cap:this.cap,join:this.join,miterLimit:this.miterLimit,marker:(e=this.marker)==null?void 0:e.clone()})}hash(){var e,t;return`${super.hash()}.${(e=this.color)==null?void 0:e.hash()}.${this.style}.${this.cap}.${this.join}.${this.miterLimit}.${(t=this.marker)==null?void 0:t.hash()}`}};c([J({esriSLS:"simple-line"},{readOnly:!0})],Yi.prototype,"type",void 0),c([d({type:ay.apiValues,json:{read:ay.read,write:ay.write}})],Yi.prototype,"style",void 0),c([d({type:["butt","round","square"],json:{write:{overridePolicy:(e,t,r)=>({enabled:e!=="round"&&(r==null?void 0:r.origin)==null})}}})],Yi.prototype,"cap",void 0),c([d({type:["miter","round","bevel"],json:{write:{overridePolicy:(e,t,r)=>({enabled:e!=="round"&&(r==null?void 0:r.origin)==null})}}})],Yi.prototype,"join",void 0),c([d({types:{key:"type",base:null,defaultKeyValue:"line-marker",typeMap:{"line-marker":Yj}},json:{write:!0,origins:{"web-scene":{write:!1}}}})],Yi.prototype,"marker",void 0),c([d({type:Number,json:{read:!1,write:!1}})],Yi.prototype,"miterLimit",void 0),Yi=t1=c([S("esri.symbols.SimpleLineSymbol")],Yi);const qo=Yi;let Ru=class extends Tt{constructor(t){super(t),this.outline=null,this.type=null}hash(){var t;return`${this.type}.${(t=this.outline)==null?void 0:t.hash()}`}};c([d({types:{key:"type",base:null,defaultKeyValue:"simple-line",typeMap:{"simple-line":qo}},json:{default:null,write:!0}})],Ru.prototype,"outline",void 0),c([d({type:["simple-fill","picture-fill"],readOnly:!0})],Ru.prototype,"type",void 0),Ru=c([S("esri.symbols.FillSymbol")],Ru);const fP=Ru;function Kj(e,t,r){return t.imageData?AE({mediaType:t.contentType||"image/png",isBase64:!0,data:t.imageData}):mP(t.url,r)}function mP(e,t){if(!or(e)){const r=Qj(t);if(r)return Af(r,"images",e)}return Xc(e,t)}function Xj(e,t,r,i){if(Uo(e)){const s=sl(e);if(!s)return;t.contentType=s.mediaType,t.imageData=s.data,r&&r.imageData===t.imageData&&r.url&&nl(r.url,t,"url",i)}else nl(e,t,"url",i)}const yP={json:{read:{source:["imageData","url"],reader:Kj},write:{writer(e,t,r,i){Xj(e,t,this.source,i)}}}},gP={readOnly:!0,json:{read:{source:["imageData","url"],reader(e,t,r){const i={};return t.imageData&&(i.imageData=t.imageData),t.contentType&&(i.contentType=t.contentType),t.url&&(i.url=mP(t.url,r)),i}}}};function Qj(e){var s,n;if(!e)return null;const{origin:t,layer:r}=e;if(t!=="service"&&t!=="portal-item")return null;const i=r==null?void 0:r.type;return i==="feature"||i==="stream"?(s=r.parsedUrl)==null?void 0:s.path:i==="map-image"||i==="tile"?(n=e.url)==null?void 0:n.path:null}var r1;let gr=r1=class extends fP{constructor(...e){super(...e),this.type="picture-fill",this.url=null,this.xscale=1,this.yscale=1,this.width=12,this.height=12,this.xoffset=0,this.yoffset=0,this.source=null}normalizeCtorArgs(e,t,r,i){if(e&&typeof e!="string"&&e.imageData==null)return e;const s={};return e&&(s.url=e),t&&(s.outline=t),r!=null&&(s.width=Re(r)),i!=null&&(s.height=Re(i)),s}clone(){const e=new r1({color:C(this.color),height:this.height,outline:C(this.outline),url:this.url,width:this.width,xoffset:this.xoffset,xscale:this.xscale,yoffset:this.yoffset,yscale:this.yscale});return e._set("source",C(this.source)),e}hash(){var e;return`${super.hash()}.${(e=this.color)==null?void 0:e.hash()}.${this.height}.${this.url}.${this.width}.${this.xoffset}.${this.xscale}.${this.yoffset}.${this.yscale}`}};c([J({esriPFS:"picture-fill"},{readOnly:!0})],gr.prototype,"type",void 0),c([d(yP)],gr.prototype,"url",void 0),c([d({type:Number,json:{write:!0}})],gr.prototype,"xscale",void 0),c([d({type:Number,json:{write:!0}})],gr.prototype,"yscale",void 0),c([d({type:Number,cast:Re,json:{write:!0}})],gr.prototype,"width",void 0),c([d({type:Number,cast:Re,json:{write:!0}})],gr.prototype,"height",void 0),c([d({type:Number,cast:Re,json:{write:!0}})],gr.prototype,"xoffset",void 0),c([d({type:Number,cast:Re,json:{write:!0}})],gr.prototype,"yoffset",void 0),c([d(gP)],gr.prototype,"source",void 0),gr=r1=c([S("esri.symbols.PictureFillSymbol")],gr);const kv=gr;let zs=class extends Tt{constructor(t){super(t),this.angle=0,this.type=null,this.xoffset=0,this.yoffset=0,this.size=9}hash(){return`${this.type}.${this.angle}.${this.size}.${this.xoffset}.${this.yoffset}`}};c([d({type:Number,json:{read:e=>e&&-1*e,write:(e,t)=>t.angle=e&&-1*e}})],zs.prototype,"angle",void 0),c([d({type:["simple-marker","picture-marker"],readOnly:!0})],zs.prototype,"type",void 0),c([d({type:Number,cast:Re,json:{write:!0}})],zs.prototype,"xoffset",void 0),c([d({type:Number,cast:Re,json:{write:!0}})],zs.prototype,"yoffset",void 0),c([d({cast:e=>e==="auto"?e:rr(Re(e)),json:{write:!0}})],zs.prototype,"size",void 0),zs=c([S("esri.symbols.MarkerSymbol")],zs);const _P=zs;var i1;let qr=i1=class extends _P{constructor(...e){super(...e),this.color=null,this.type="picture-marker",this.url=null,this.source=null,this.height=12,this.width=12,this.size=null}normalizeCtorArgs(e,t,r){if(e&&typeof e!="string"&&e.imageData==null)return e;const i={};return e&&(i.url=e),t!=null&&(i.width=Re(t)),r!=null&&(i.height=Re(r)),i}readHeight(e,t){return t.size||e}readWidth(e,t){return t.size||e}clone(){const e=new i1({angle:this.angle,height:this.height,url:this.url,width:this.width,xoffset:this.xoffset,yoffset:this.yoffset});return e._set("source",C(this.source)),e}hash(){return`${super.hash()}.${this.height}.${this.url}.${this.width}`}};c([d({json:{write:!1}})],qr.prototype,"color",void 0),c([J({esriPMS:"picture-marker"},{readOnly:!0})],qr.prototype,"type",void 0),c([d(yP)],qr.prototype,"url",void 0),c([d(gP)],qr.prototype,"source",void 0),c([d({type:Number,cast:Re,json:{write:!0}})],qr.prototype,"height",void 0),c([de("height",["height","size"])],qr.prototype,"readHeight",null),c([d({type:Number,cast:Re,json:{write:!0}})],qr.prototype,"width",void 0),c([d({json:{write:!1}})],qr.prototype,"size",void 0),qr=i1=c([S("esri.symbols.PictureMarkerSymbol")],qr);const nm=qr;var Qn;const vP=B.ofType({base:null,key:"type",typeMap:{icon:_o,object:Av,text:Pl}});let eo=Qn=class extends ph{constructor(e){super(e),this.verticalOffset=null,this.callout=null,this.symbolLayers=new vP,this.type="point-3d"}supportsCallout(){if((this.symbolLayers?this.symbolLayers.length:0)<1)return!1;for(const e of this.symbolLayers.items)switch(e.type){case"icon":case"text":case"object":continue;default:return!1}return!0}hasVisibleCallout(){return uP(this)}hasVisibleVerticalOffset(){return Ov(this)}clone(){return new Qn({verticalOffset:C(this.verticalOffset),callout:C(this.callout),styleOrigin:C(this.styleOrigin),symbolLayers:C(this.symbolLayers),thumbnail:C(this.thumbnail)})}static fromSimpleMarkerSymbol(e){return new Qn({symbolLayers:new B([_o.fromSimpleMarkerSymbol(e)])})}static fromPictureMarkerSymbol(e){return new Qn({symbolLayers:new B([_o.fromPictureMarkerSymbol(e)])})}static fromCIMSymbol(e){var i,s;if(((s=(i=e.data)==null?void 0:i.symbol)==null?void 0:s.type)!=="CIMPointSymbol")return null;const r=e.data.symbol;return new Qn(r!=null&&r.callout?{symbolLayers:new B([_o.fromCIMSymbol(e)]),callout:new lP({size:.5,color:new ne([0,0,0])}),verticalOffset:new Cv({screenLength:40})}:{symbolLayers:new B([_o.fromCIMSymbol(e)])})}static fromTextSymbol(e){return new Qn({symbolLayers:new B([Pl.fromTextSymbol(e)])})}};c([d({type:Cv,json:{write:!0}})],eo.prototype,"verticalOffset",void 0),c([d(cP)],eo.prototype,"callout",void 0),c([d({type:vP,json:{origins:{"web-scene":{write:!0}}}})],eo.prototype,"symbolLayers",void 0),c([J({PointSymbol3D:"point-3d"},{readOnly:!0})],eo.prototype,"type",void 0),eo=Qn=c([S("esri.symbols.PointSymbol3D")],eo);const om=eo;var ku;const wP=B.ofType({base:null,key:"type",typeMap:{extrude:WA,fill:hh,icon:_o,line:dh,object:Av,text:Pl,water:nP}});let Nu=ku=class extends ph{constructor(e){super(e),this.symbolLayers=new wP,this.type="polygon-3d"}initialize(){const e=t=>{t.type==="line"&&_c(F.getLogger(this),"LineSymbol3DLayer can not be used as a SymbolLayer with a PolygonSymbol3D symbol anymore.",{replacement:"Use FillSymbol3DLayer.outline instead.",version:"4.28"}),t.type==="text"&&_c(F.getLogger(this),"TextSymbol3DLayer can not be used as a SymbolLayer with a PolygonSymbol3D symbol anymore.",{replacement:"Use Labels instead.",version:"4.28"})};for(const t of this.symbolLayers)e(t);this.addHandles(vn(()=>this.symbolLayers,"after-add",({item:t})=>e(t),wn))}clone(){return new ku({styleOrigin:C(this.styleOrigin),symbolLayers:C(this.symbolLayers),thumbnail:C(this.thumbnail)})}static fromJSON(e){var r;const t=new ku;if(t.read(e),t.symbolLayers.length===2&&t.symbolLayers.at(0).type==="fill"&&t.symbolLayers.at(1).type==="line"){const i=t.symbolLayers.at(0),s=t.symbolLayers.at(1);!s.enabled||(r=e.symbolLayers)!=null&&r[1]&&e.symbolLayers[1].enable===!1||(i.outline={size:s.size,color:s.material!=null?s.material.color:null}),t.symbolLayers.removeAt(1)}return t}static fromSimpleFillSymbol(e){return new ku({symbolLayers:new B([hh.fromSimpleFillSymbol(e)])})}};c([d({type:wP,json:{write:!0}})],Nu.prototype,"symbolLayers",void 0),c([J({PolygonSymbol3D:"polygon-3d"},{readOnly:!0})],Nu.prototype,"type",void 0),Nu=ku=c([S("esri.symbols.PolygonSymbol3D")],Nu);const am=Nu;var s1;const ly=new rt({esriSFSSolid:"solid",esriSFSNull:"none",esriSFSHorizontal:"horizontal",esriSFSVertical:"vertical",esriSFSForwardDiagonal:"forward-diagonal",esriSFSBackwardDiagonal:"backward-diagonal",esriSFSCross:"cross",esriSFSDiagonalCross:"diagonal-cross"});let to=s1=class extends fP{constructor(...e){super(...e),this.color=new ne([0,0,0,.25]),this.outline=new qo,this.type="simple-fill",this.style="solid"}normalizeCtorArgs(e,t,r){if(e&&typeof e!="string")return e;const i={};return e&&(i.style=e),t&&(i.outline=t),r&&(i.color=r),i}clone(){return new s1({color:C(this.color),outline:this.outline&&this.outline.clone(),style:this.style})}hash(){return`${super.hash()}${this.style}.${this.color&&this.color.hash()}`}};c([d()],to.prototype,"color",void 0),c([d()],to.prototype,"outline",void 0),c([J({esriSFS:"simple-fill"},{readOnly:!0})],to.prototype,"type",void 0),c([d({type:ly.apiValues,json:{read:ly.read,write:ly.write}})],to.prototype,"style",void 0),to=s1=c([S("esri.symbols.SimpleFillSymbol")],to);const Nv=to;var n1;const uy=new rt({esriSMSCircle:"circle",esriSMSSquare:"square",esriSMSCross:"cross",esriSMSX:"x",esriSMSDiamond:"diamond",esriSMSTriangle:"triangle",esriSMSPath:"path"});let fi=n1=class extends _P{constructor(...e){super(...e),this.color=new ne([255,255,255,.25]),this.type="simple-marker",this.size=12,this.style="circle",this.outline=new qo}normalizeCtorArgs(e,t,r,i){if(e&&typeof e!="string")return e;const s={};return e&&(s.style=e),t!=null&&(s.size=Re(t)),r&&(s.outline=r),i&&(s.color=i),s}writeColor(e,t){e&&this.style!=="x"&&this.style!=="cross"&&(t.color=e.toJSON()),e===null&&(t.color=null)}set path(e){this.style="path",this._set("path",e)}clone(){return new n1({angle:this.angle,color:C(this.color),outline:this.outline&&this.outline.clone(),path:this.path,size:this.size,style:this.style,xoffset:this.xoffset,yoffset:this.yoffset})}hash(){var e;return`${super.hash()}.${this.color&&this.color.hash()}.${this.path}.${this.style}.${(e=this.outline)==null?void 0:e.hash()}`}};c([d()],fi.prototype,"color",void 0),c([oe("color")],fi.prototype,"writeColor",null),c([J({esriSMS:"simple-marker"},{readOnly:!0})],fi.prototype,"type",void 0),c([d()],fi.prototype,"size",void 0),c([d({type:uy.apiValues,json:{read:uy.read,write:uy.write}})],fi.prototype,"style",void 0),c([d({type:String,json:{write:!0}})],fi.prototype,"path",null),c([d({types:{key:"type",base:null,defaultKeyValue:"simple-line",typeMap:{"simple-line":qo}},json:{default:null,write:!0}})],fi.prototype,"outline",void 0),fi=n1=c([S("esri.symbols.SimpleMarkerSymbol")],fi);const lm=fi;var o1;let Ae=o1=class extends Tt{constructor(...e){super(...e),this.backgroundColor=null,this.borderLineColor=null,this.borderLineSize=null,this.font=new im,this.horizontalAlignment="center",this.kerning=!0,this.haloColor=null,this.haloSize=null,this.rightToLeft=null,this.rotated=!1,this.text="",this.type="text",this.verticalAlignment="baseline",this.xoffset=0,this.yoffset=0,this.angle=0,this.width=null,this.lineWidth=192,this.lineHeight=1}normalizeCtorArgs(e,t,r){if(e&&typeof e!="string")return e;const i={};return e&&(i.text=e),t&&(i.font=t),r&&(i.color=r),i}writeLineWidth(e,t,r,i){i&&typeof i!="string"?i.origin:t[r]=e}castLineWidth(e){return Re(e)}writeLineHeight(e,t,r,i){i&&typeof i!="string"?i.origin:t[r]=e}clone(){return new o1({angle:this.angle,backgroundColor:C(this.backgroundColor),borderLineColor:C(this.borderLineColor),borderLineSize:this.borderLineSize,color:C(this.color),font:this.font&&this.font.clone(),haloColor:C(this.haloColor),haloSize:this.haloSize,horizontalAlignment:this.horizontalAlignment,kerning:this.kerning,lineHeight:this.lineHeight,lineWidth:this.lineWidth,rightToLeft:this.rightToLeft,rotated:this.rotated,text:this.text,verticalAlignment:this.verticalAlignment,width:this.width,xoffset:this.xoffset,yoffset:this.yoffset})}hash(){var e,t,r;return`${(e=this.backgroundColor)==null?void 0:e.hash()}.${this.borderLineColor}.${this.borderLineSize}.${(t=this.color)==null?void 0:t.hash()}.${this.font&&this.font.hash()}.${(r=this.haloColor)==null?void 0:r.hash()}.${this.haloSize}.${this.horizontalAlignment}.${this.kerning}.${this.rightToLeft}.${this.rotated}.${this.text}.${this.verticalAlignment}.${this.width}.${this.xoffset}.${this.yoffset}.${this.lineHeight}.${this.lineWidth}.${this.angle}`}};c([d({type:ne,json:{write:!0}})],Ae.prototype,"backgroundColor",void 0),c([d({type:ne,json:{write:!0}})],Ae.prototype,"borderLineColor",void 0),c([d({type:Number,json:{write:!0},cast:Re})],Ae.prototype,"borderLineSize",void 0),c([d({type:im,json:{write:!0}})],Ae.prototype,"font",void 0),c([d({...iP,json:{write:!0}})],Ae.prototype,"horizontalAlignment",void 0),c([d({type:Boolean,json:{write:!0}})],Ae.prototype,"kerning",void 0),c([d({type:ne,json:{write:!0}})],Ae.prototype,"haloColor",void 0),c([d({type:Number,cast:Re,json:{write:!0}})],Ae.prototype,"haloSize",void 0),c([d({type:Boolean,json:{write:!0}})],Ae.prototype,"rightToLeft",void 0),c([d({type:Boolean,json:{write:!0}})],Ae.prototype,"rotated",void 0),c([d({type:String,json:{write:!0}})],Ae.prototype,"text",void 0),c([J({esriTS:"text"},{readOnly:!0})],Ae.prototype,"type",void 0),c([d({...sP,json:{write:!0}})],Ae.prototype,"verticalAlignment",void 0),c([d({type:Number,cast:Re,json:{write:!0}})],Ae.prototype,"xoffset",void 0),c([d({type:Number,cast:Re,json:{write:!0}})],Ae.prototype,"yoffset",void 0),c([d({type:Number,json:{read:e=>e&&-1*e,write:(e,t)=>t.angle=e&&-1*e}})],Ae.prototype,"angle",void 0),c([d({type:Number,json:{write:!0}})],Ae.prototype,"width",void 0),c([d({type:Number})],Ae.prototype,"lineWidth",void 0),c([oe("lineWidth")],Ae.prototype,"writeLineWidth",null),c([tt("lineWidth")],Ae.prototype,"castLineWidth",null),c([d(rP)],Ae.prototype,"lineHeight",void 0),c([oe("lineHeight")],Ae.prototype,"writeLineHeight",null),Ae=o1=c([S("esri.symbols.TextSymbol")],Ae);const um=Ae;var a1;let Wr=a1=class extends Tt{constructor(e){super(e),this.color=null,this.styleName=null,this.portal=null,this.styleUrl=null,this.thumbnail=null,this.name=null,this.type="web-style"}get _fetchCacheKey(){const e=this.portal!=null?this.portal:_n.getDefault(),t=e.user?e.user.username:null;return`${this.styleName}:${this.styleUrl}:${this.name}:${t}:${e.url}`}read(e,t){this.portal=t==null?void 0:t.portal,super.read(e,t)}clone(){return new a1({name:this.name,styleUrl:this.styleUrl,styleName:this.styleName,portal:this.portal})}fetchSymbol(e){const t=e&&"acceptedFormats"in e?e.acceptedFormats:["web"];return this._fetchSymbol({...e,acceptedFormats:t})}async fetchCIMSymbol(e){const t=await this.fetchSymbol({...e,acceptedFormats:["cim"]});if((t==null?void 0:t.type)!=="cim")throw new I("webstylesymbol:fetchCIMSymbol","Resolved web style symbol is not of type 'cim'");return t}async _fetchSymbol(e){const t=e!=null?e.cache:null,r=t?this._fetchCacheKey:null;if(t!=null){const o=r&&t.get(r);if(o)return o.clone()}const{resolveWebStyleSymbol:i}=await N(()=>import("./webStyleSymbolUtils-DemRtiVw.js"),__vite__mapDeps([255,256,201,115,66,203,257]));Ve(e);const s=i(this,{portal:this.portal},e);s.catch(o=>{F.getLogger(this).error("#fetchSymbol()","Failed to create symbol from style",o)});const n=await s;return t!=null&&t.set(r,n.clone()),n}};c([d({json:{write:!1}})],Wr.prototype,"color",void 0),c([d({type:String,json:{write:!0}})],Wr.prototype,"styleName",void 0),c([d({type:_n,json:{write:!1}})],Wr.prototype,"portal",void 0),c([d({type:String,json:{read:T_,write:nl}})],Wr.prototype,"styleUrl",void 0),c([d({type:dc,json:{read:!1}})],Wr.prototype,"thumbnail",void 0),c([d({type:String,json:{write:!0}})],Wr.prototype,"name",void 0),c([J({styleSymbolReference:"web-style"},{readOnly:!0})],Wr.prototype,"type",void 0),c([d()],Wr.prototype,"_fetchCacheKey",null),Wr=a1=c([S("esri.symbols.WebStyleSymbol")],Wr);const cm=Wr;function pie(e){if(!e)return!1;switch(e.type){case"picture-fill":case"picture-marker":case"simple-fill":case"simple-line":case"simple-marker":case"text":case"cim":return!0;default:return!1}}function fie(e){switch(e==null?void 0:e.type){case"label-3d":case"line-3d":case"mesh-3d":case"point-3d":case"polygon-3d":return!0;default:return!1}}const Lv={base:Tt,key:"type",typeMap:{"simple-fill":Nv,"picture-fill":kv,"picture-marker":nm,"simple-line":qo,"simple-marker":lm,text:um,"label-3d":Iv,"line-3d":sm,"mesh-3d":Rv,"point-3d":om,"polygon-3d":am,"web-style":cm,cim:Ho},errorContext:"symbol"},mie={base:Tt,key:"type",typeMap:{"picture-marker":nm,"simple-marker":lm,"point-3d":om,cim:Ho},errorContext:"symbol"},yie={base:Tt,key:"type",typeMap:{"simple-line":qo,"line-3d":sm,cim:Ho},errorContext:"symbol"},gie={base:Tt,key:"type",typeMap:{"simple-fill":Nv,"picture-fill":kv,"polygon-3d":am,cim:Ho},errorContext:"symbol"},_ie={base:Tt,key:"type",typeMap:{"picture-marker":nm,"simple-marker":lm,text:um,"web-style":cm,cim:Ho},errorContext:"symbol"},vie=u_({types:Lv}),wie={base:Tt,key:"type",typeMap:{"simple-fill":Nv,"picture-fill":kv,"picture-marker":nm,"simple-line":qo,"simple-marker":lm,text:um,"line-3d":sm,"mesh-3d":Rv,"point-3d":om,"polygon-3d":am,"web-style":cm,cim:Ho},errorContext:"symbol"},bie={base:Tt,key:"type",typeMap:{text:um,"label-3d":Iv},errorContext:"symbol"},Sie={base:Tt,key:"type",typeMap:{"line-3d":sm,"mesh-3d":Rv,"point-3d":om,"polygon-3d":am,"web-style":cm,cim:Ho},errorContext:"symbol"},Tie={base:Tt,key:"type",typeMap:{"label-3d":Iv},errorContext:"symbol"},$ie=fn(Lv);var l1;function eG(e){if(!e)return null;const t={};for(const r in e){const i=pl(e[r]);i&&(t[r]=i)}return Object.keys(t).length!==0?t:null}function tG(e){if(e==null)return null;const t={};for(const r in e){const i=e[r];i&&(t[r]=i.toJSON())}return Object.keys(t).length!==0?t:null}let Dt=l1=class extends Wt.ClonableMixin(j){constructor(e){super(e),this.isAggregate=!1,this.layer=null,this.origin=null,this.popupTemplate=null,this.sourceLayer=null,this._version=0,Object.defineProperty(this,"uid",{value:hd(),configurable:!0}),Object.defineProperty(this,"_lastMeshTransform",{value:{},configurable:!0,writable:!0,enumerable:!1}),arguments.length>1&&DI(F.getLogger(this),"Graphic",{version:"4.30"})}initialize(){this._watchMeshGeometryChanges()}set aggregateGeometries(e){const t=this._get("aggregateGeometries");JSON.stringify(t)!==JSON.stringify(e)&&this._set("aggregateGeometries",e)}set attributes(e){const t=this._get("attributes");t!==e&&(this._set("attributes",e),this._notifyLayer("attributes",t,e))}set geometry(e){const t=this._get("geometry");t!==e&&(this._set("geometry",e),(e==null?void 0:e.type)!=="mesh"&&this._notifyLayer("geometry",t,e))}set symbol(e){const t=this._get("symbol");t!==e&&(this._set("symbol",e),this._notifyLayer("symbol",t,e))}get version(){return this._version}set visible(e){const t=this._get("visible");t!==e&&(this._set("visible",e),this._notifyLayer("visible",t,e))}cloneShallow(){return new l1({aggregateGeometries:this.aggregateGeometries,attributes:this.attributes,geometry:this.geometry,isAggregate:this.isAggregate,layer:this.layer,popupTemplate:this.popupTemplate,sourceLayer:this.sourceLayer,symbol:this.symbol,visible:this.visible,origin:this.origin})}getEffectivePopupTemplate(e=!1){if(this.popupTemplate)return this.popupTemplate;const t=this.origin&&"layer"in this.origin?this.origin.layer:null;for(const r of[t,this.sourceLayer,this.layer])if(r){if("popupTemplate"in r&&r.popupTemplate)return r.popupTemplate;if(e&&"defaultPopupTemplate"in r&&r.defaultPopupTemplate!=null)return r.defaultPopupTemplate}return null}getAttribute(e){var t;return(t=this.attributes)==null?void 0:t[e]}setAttribute(e,t){if(this.attributes){const r=this.getAttribute(e);this.attributes[e]=t,this._notifyLayer("attributes",r,t,e)}else this.attributes={[e]:t},this._notifyLayer("attributes",void 0,t,e)}getObjectId(){return this.sourceLayer&&"objectIdField"in this.sourceLayer&&this.sourceLayer.objectIdField?this.getAttribute(this.sourceLayer.objectIdField):null}toJSON(){var e;return{aggregateGeometries:tG(this.aggregateGeometries),geometry:this.geometry!=null?this.geometry.toJSON():null,symbol:this.symbol!=null?this.symbol.toJSON():null,attributes:j.isSerializable(this.attributes)?this.attributes.toJSON():{...this.attributes},popupTemplate:((e=this.popupTemplate)==null?void 0:e.toJSON())??null}}notifyMeshTransformChanged(e={}){const{geometry:t}=this;if((t==null?void 0:t.type)==="mesh"){const r={origin:t.origin,transform:t.transform};this._notifyLayer("origin-transform",r,r,e.action)}}_notifyLayer(e,t,r,i){if(this._version++,!this.layer||!("graphicChanged"in this.layer))return;const s={graphic:this,property:e,oldValue:t,newValue:r};e==="origin-transform"&&(s.action=i),e==="attributes"&&(s.attributeName=i),this.layer.graphicChanged(s)}_watchMeshGeometryChanges(){this.addHandles([Or(()=>{var e,t;return((e=this.geometry)==null?void 0:e.type)==="mesh"&&this.geometry.vertexSpace.origin?{localMatrix:(t=this.geometry.transform)==null?void 0:t.localMatrix,origin:this.geometry.vertexSpace.origin}:void 0},({localMatrix:e,origin:t})=>{this._lastMeshTransform.localMatrix===e&&this._lastMeshTransform.origin===t||(this._lastMeshTransform.localMatrix=e,this._lastMeshTransform.origin=t,this.notifyMeshTransformChanged())}),Or(()=>{var e;return((e=this.geometry)==null?void 0:e.type)==="mesh"?{vertexAttributes:this.geometry.vertexAttributes}:void 0},()=>{var t;const e=this.geometry;(e==null?void 0:e.type)==="mesh"&&e.vertexSpace.origin?(this._lastMeshTransform.localMatrix=(t=e.transform)==null?void 0:t.localMatrix,this._lastMeshTransform.origin=e.vertexSpace.origin):(this._lastMeshTransform.localMatrix=void 0,this._lastMeshTransform.origin=void 0),this._notifyLayer("geometry",this.geometry,this.geometry)},{equals:(e,t)=>e===t,sync:!0})])}};c([d({value:null,json:{read:eG}})],Dt.prototype,"aggregateGeometries",null),c([d({value:null})],Dt.prototype,"attributes",null),c([d({value:null,types:uv,json:{read:pl}})],Dt.prototype,"geometry",null),c([d({type:Boolean})],Dt.prototype,"isAggregate",void 0),c([d({clonable:"reference"})],Dt.prototype,"layer",void 0),c([d({clonable:"reference"})],Dt.prototype,"origin",void 0),c([d({type:fj})],Dt.prototype,"popupTemplate",void 0),c([d({clonable:"reference"})],Dt.prototype,"sourceLayer",void 0),c([d({value:null,types:Lv})],Dt.prototype,"symbol",null),c([d({clonable:!1,json:{read:!1,write:!1}})],Dt.prototype,"_version",void 0),c([d({type:Boolean,value:!0})],Dt.prototype,"visible",null),Dt=l1=c([S("esri.Graphic")],Dt);const u1=Dt;let pc=class extends ac{_own(t){t.layer&&"remove"in t.layer&&t.layer!==this.owner&&t.layer.remove(t),t.layer=this.owner}_release(t){t.layer===this.owner&&(t.layer=null)}};c([HE({Type:u1,ensureType:Rt(u1)})],pc.prototype,"itemType",void 0),pc=c([S("esri.support.GraphicsCollection")],pc);let Vs=class extends q{constructor(t){super(t),this.view=null,this.baseLayerViews=new B,this.referenceLayerViews=new B,this._loadingHandle=X(()=>{var r,i;return(i=(r=this.view)==null?void 0:r.map)==null?void 0:i.basemap},r=>{r&&r.load().catch(()=>{})},St)}destroy(){this._set("view",null),this._loadingHandle&&(this._loadingHandle.remove(),this._loadingHandle=null);for(const t of this.baseLayerViews)t.destroy();this.baseLayerViews.length=0;for(const t of this.referenceLayerViews)t.destroy();this.referenceLayerViews.length=0}get suspended(){var t;return((t=this.view)==null?void 0:t.suspended)??!0}get updating(){var r,i,s;if((r=this.view)!=null&&r.suspended)return!1;const t=(s=(i=this.view)==null?void 0:i.map)==null?void 0:s.basemap;return!!(t!=null&&t.loaded)&&(this.baseLayerViews.some(n=>n.updating)||this.referenceLayerViews.some(n=>n.updating))}};c([d({constructOnly:!0})],Vs.prototype,"view",void 0),c([d({readOnly:!0})],Vs.prototype,"baseLayerViews",void 0),c([d({readOnly:!0})],Vs.prototype,"referenceLayerViews",void 0),c([d({readOnly:!0})],Vs.prototype,"suspended",null),c([d({type:Boolean,readOnly:!0})],Vs.prototype,"updating",null),Vs=c([S("esri.views.BasemapView")],Vs);const rG=Vs;function iG(e){return"tryRecycleWith"in e}function sG(e){return e!=null&&typeof e=="object"&&"layerViews"in e}let nG=class{constructor(t,r,i){this.layer=t,this.view=r,this.layerViewImporter=i,this._controller=new AbortController,this._deferred=Pr(),this._started=!1,this.done=!1,this.promise=this._deferred.promise,xr(this._controller.signal,()=>{const s=new I("cancelled:layerview-create","layerview creation cancelled",{layer:t});this._deferred.reject(s)})}tryRecycle(t){if(!this.done||!this.layerView||!iG(this.layerView))return null;const r=this.layer.type,i=this._controller.signal;for(let s=0;s<t.length;s++){const n=t[s];if(n.type!==r)continue;const o=this.layerView.tryRecycleWith(n,{signal:i});if(o){t.splice(s,1),this.layer=n;const a=this.layerView,l=a.view;return this.promise=Promise.race([o.then(()=>(Ve(this._controller.signal),n.emit("layerview-destroy",{view:l,layerView:a}),l.emit("layerview-destroy",{view:l,layerView:a}),n.emit("layerview-create",{view:l,layerView:a}),l.emit("layerview-create",{view:l,layerView:a}),a)),new Promise((h,p)=>xr(this._controller.signal,()=>p($e())))]),this.promise}}return null}destroy(){this._controller.abort();const{layerView:t}=this;if(t){const{layer:r,view:i}=this;r.emit("layerview-destroy",{view:i,layerView:t}),i.emit("layerview-destroy",{layer:r,layerView:t})}this.done=!0,this.layer=null,this.layerView=null,this.view=null,this.layerViewImporter=null,this._map=null}async start(){var s,n;if(this._started)return;this._started=!0;const{_controller:{signal:t},layer:r,view:i}=this;this._map=i.map;try{let o,a;if(await r.load({signal:t}),r.prefetchResources&&await r.prefetchResources({signal:t}),aG(r))o=await r.createLayerView(i,{signal:t});else{if(!this.layerViewImporter.hasLayerViewModule(r))throw new I("layer:view-not-supported","No layerview implementation was found");const p=await this.layerViewImporter.importLayerView(r);Ve(t),o="default"in p?new p.default({layer:r,view:i}):new p({layer:r,view:i})}const l=()=>{a=Ce(a),o.destroyed||o.destroy(),o.layer=null,o.parent=null,o.view=null,this.done=!0};a=xr(t,l),Ve(t);try{await o.when()}catch(p){throw l(),p}if(!((n=(s=this._map)==null?void 0:s.allLayers)==null?void 0:n.includes(r)))return l(),void this._deferred.reject(new I("view:no-layerview-for-layer","The layer has been removed from the map",{layer:r}));this.layerView=o,r.emit("layerview-create",{view:i,layerView:o}),i.emit("layerview-create",{layer:r,layerView:o}),this.done=!0,this._deferred.resolve(o)}catch(o){r.emit("layerview-create-error",{view:i,error:o}),i.emit("layerview-create-error",{layer:r,error:o}),this.done=!0,this._deferred.reject(new I("layerview:create-error","layerview creation failed",{layer:r,error:o}))}}},_r=class extends q{constructor(t){super(t),this._layerLayerViewInfoMap=new Map,this._recyclingInfoMap=new Map,this._watchUpdatingTracking=new $o,this.supportsGround=!0,this._preloadLayerViewModules=()=>{var i;const r=(i=this.view.map)==null?void 0:i.allLayers;if(r)for(const s of r)this.layerViewImporter.hasLayerViewModule(s)&&this.layerViewImporter.importLayerView(s)},this._reschedule=()=>this.destroyed?Promise.reject():(this._workPromise==null&&(this._workPromise=Pr(),this._workPromise.promise.catch(()=>{})),this.removeHandles("reschedule"),this.addHandles(Kc(this._doWork),"reschedule"),this._workPromise.promise),this._doWork=()=>{var l,h,p;if(this.destroyed)return;const r=this.view.map;if(this._map!==r&&(this.clear(),this._map=r),this._workPromise==null)return void this.notifyChange("updating");this.removeHandles("reschedule"),this.removeHandles("collection-change");const i=new Set,s=[],n=this.view.ready,o=f=>{if(f!=null){for(const m of f)if(m){i.add(m);const y=this._layerLayerViewInfoMap.get(m);y&&n?y.start():y||this._recyclingInfoMap.has(m)||s.push(m),"layers"in m&&m.layers&&o(m.layers)}}};for(const f of this._rootCollectionNames)o(us(this,f));for(const[f,m]of this._layerLayerViewInfoMap)if(!i.has(f)){this._layerLayerViewInfoMap.delete(m.layer);const y=m.tryRecycle(s);y?(this.notifyChange("updating"),this._recyclingInfoMap.set(m.layer,m),y.then(()=>{this.notifyChange("updating"),this._recyclingInfoMap.delete(m.layer),this._layerLayerViewInfoMap.set(m.layer,m),this._reschedule()}).catch(()=>{this.notifyChange("updating"),this._recyclingInfoMap.delete(m.layer),m.destroy(),this._reschedule()})):m.destroy()}for(const[f,m]of this._recyclingInfoMap)i.has(f)||(this.notifyChange("updating"),this._recyclingInfoMap.delete(m.layer),m.destroy());for(const f of s)this._createLayerView(f);this._refreshCollections();const a=[(l=r==null?void 0:r.ground)==null?void 0:l.layers,(h=r==null?void 0:r.basemap)==null?void 0:h.baseLayers,(p=r==null?void 0:r.basemap)==null?void 0:p.referenceLayers,r==null?void 0:r.layers].filter(f=>!!f);i.forEach(f=>"layers"in f&&a.push(f.layers)),this.addHandles(a.map(f=>this._watchUpdatingTracking.addOnCollectionChange(()=>f,this._reschedule)),"collection-change"),this._workPromise.resolve(),this._workPromise=null}}initialize(){this.addHandles([vn(()=>{var t,r;return(r=(t=this.view)==null?void 0:t.map)==null?void 0:r.allLayers},"change",this._preloadLayerViewModules,{onListenerAdd:this._preloadLayerViewModules}),X(()=>{const t=this.view,r=t==null?void 0:t.map;return[r==null?void 0:r.basemap,r==null?void 0:r.ground,r==null?void 0:r.layers,t==null?void 0:t.ready]},()=>this._reschedule(),jt)]),this._preloadLayerViewModules(),this._reschedule()}destroy(){this.clear(),Zm(this._recyclingInfoMap),Zm(this._layerLayerViewInfoMap),this._watchUpdatingTracking.destroy(),this._map=null,this._workPromise!=null&&(this._workPromise.reject($e()),this._workPromise=null)}get _layersToLayerViews(){const t=[["view.map.basemap.baseLayers","view.basemapView.baseLayerViews"],["view.map.layers","view.layerViews"],["view.map.basemap.referenceLayers","view.basemapView.referenceLayerViews"]];return this.supportsGround&&t.push(["view.map.ground.layers","view.groundView.layerViews"]),new Map(t)}get _rootCollectionNames(){return Array.from(this._layersToLayerViews.keys())}get updating(){return this._workPromise!=null||this._watchUpdatingTracking.updating||ZR(this._layerLayerViewInfoMap,t=>!t.done)||this._recyclingInfoMap.size>0}get updatingRemaining(){let t=0;for(const r of this._layerLayerViewInfoMap.values())r.done||++t;return t}clear(){this.destroyed||(Zm(this._layerLayerViewInfoMap),this._refreshCollections())}async whenLayerView(t){if(await this._reschedule(),!this._layerLayerViewInfoMap.has(t)){if(this._recyclingInfoMap.has(t))return this._recyclingInfoMap.get(t).promise;throw new I("view:no-layerview-for-layer","No layerview has been found for the layer",{layer:t})}return this._layerLayerViewInfoMap.get(t).promise}isCreatingLayerViewsForLayer(t,r){var n;this.commitProperty("updatingRemaining");const i=this._layerLayerViewInfoMap.get(t);if(!(i!=null&&i.done))return!0;const s=i.layerView;return!(!s||!r||s.parent===r)||!!(i.done&&s&&"layers"in t&&((n=t.layers)!=null&&n.length))&&t.layers.some(o=>this.isCreatingLayerViewsForLayer(o,s))}_refreshCollections(){for(const[t,r]of this._layersToLayerViews)this._populateLayerViewsOwners(us(this,t),us(this,r),this.view);this.notifyChange("updating"),this.notifyChange("updatingRemaining")}_populateLayerViewsOwners(t,r,i){if(!t||!r)return void(r&&r.removeAll());let s=0;for(const n of t){const o=this._layerLayerViewInfoMap.get(n);if(!(o!=null&&o.layerView))continue;const a=o.layerView;a.layer=n,a.parent=i,r.at(s)!==a&&r.splice(s,0,a),"layers"in n&&sG(a)&&this._populateLayerViewsOwners(n.layers,a.layerViews,a),s+=1}s<r.length&&r.splice(s,r.length)}_createLayerView(t){t.load().catch(()=>{}),this.layerViewImporter.hasLayerViewModule(t)&&this.layerViewImporter.importLayerView(t);const r=new nG(t,this.view,this.layerViewImporter);r.promise.then(()=>this._refreshCollections(),i=>{i&&(Ht(i)||i.name==="cancelled:layerview-create")||F.getLogger(this).error(`Failed to create layerview for layer title:'${t.title??"no title"}', id:'${t.id??"no id"}' of type '${t.type}'.`,{layer:t,error:i}),this._refreshCollections()}),this._layerLayerViewInfoMap.set(t,r),this.view.ready&&r.start(),this.notifyChange("updating"),this.notifyChange("updatingRemaining")}};c([d()],_r.prototype,"_workPromise",void 0),c([d({readOnly:!0})],_r.prototype,"_watchUpdatingTracking",void 0),c([d({readOnly:!0})],_r.prototype,"_layersToLayerViews",null),c([d({readOnly:!0})],_r.prototype,"_rootCollectionNames",null),c([d()],_r.prototype,"layerViewImporter",void 0),c([d()],_r.prototype,"supportsGround",void 0),c([d({readOnly:!0})],_r.prototype,"updating",null),c([d({readOnly:!0})],_r.prototype,"updatingRemaining",null),c([d({constructOnly:!0})],_r.prototype,"view",void 0),_r=c([S("esri.views.LayerViewManager")],_r);const oG=_r;function aG(e){return e.createLayerView!==ax.prototype.createLayerView}let Xt=class extends q{constructor(t){super(t),this.factor=1.5,this.offset=lt(0,0),this.position=null,this.size=120,this.maskUrl=null,this.maskEnabled=!0,this.overlayUrl=null,this.overlayEnabled=!0,this.visible=!0}get version(){return this.commitProperty("factor"),this.commitProperty("offset"),this.commitProperty("position"),this.commitProperty("visible"),this.commitProperty("size"),this.commitProperty("maskUrl"),this.commitProperty("maskEnabled"),this.commitProperty("overlayUrl"),this.commitProperty("overlayEnabled"),(this._get("version")||0)+1}};c([d({type:Number})],Xt.prototype,"factor",void 0),c([d({nonNullable:!0})],Xt.prototype,"offset",void 0),c([d()],Xt.prototype,"position",void 0),c([d({type:Number,range:{min:0}})],Xt.prototype,"size",void 0),c([d()],Xt.prototype,"maskUrl",void 0),c([d()],Xt.prototype,"maskEnabled",void 0),c([d()],Xt.prototype,"overlayUrl",void 0),c([d()],Xt.prototype,"overlayEnabled",void 0),c([d({readOnly:!0})],Xt.prototype,"version",null),c([d({type:Boolean})],Xt.prototype,"visible",void 0),Xt=c([S("esri.views.Magnifier")],Xt);const bP=Xt;let Jd=class{constructor(t){this._observable=new Qc,this._map=new Map(t)}get size(){return Z(this._observable),this._map.size}clear(){this._map.size>0&&(this._map.clear(),this._observable.notify())}delete(t){const r=this._map.delete(t);return r&&this._observable.notify(),r}entries(){return Z(this._observable),this._map.entries()}forEach(t,r){Z(this._observable),this._map.forEach((i,s)=>t.call(r,i,s,this),r)}get(t){return Z(this._observable),this._map.get(t)}has(t){return Z(this._observable),this._map.has(t)}keys(){return Z(this._observable),this._map.keys()}set(t,r){return this._map.set(t,r),this._observable.notify(),this}values(){return Z(this._observable),this._map.values()}[Symbol.iterator](){return Z(this._observable),this._map[Symbol.iterator]()}[Symbol.dispose](){this._observable.destroy()}get[Symbol.toStringTag](){return this._map[Symbol.toStringTag]}};var c1;let Lu=c1=class extends j{constructor(e){super(e),this.name=null,this.code=null}clone(){return new c1({name:this.name,code:this.code})}};c([d({type:String,json:{write:{isRequired:!0}}})],Lu.prototype,"name",void 0),c([d({type:[String,Number],json:{write:{isRequired:!0}}})],Lu.prototype,"code",void 0),Lu=c1=c([S("esri.layers.support.CodedValue")],Lu);const lG=new rt({inherited:"inherited",codedValue:"coded-value",range:"range"});let Du=class extends j{constructor(t){super(t),this.name=null,this.type=null}};c([d({type:String,json:{write:!0}})],Du.prototype,"name",void 0),c([J(lG),d({json:{write:{isRequired:!0}}})],Du.prototype,"type",void 0),Du=c([S("esri.layers.support.Domain")],Du);const hm=Du;var h1;let Fu=h1=class extends hm{constructor(e){super(e),this.codedValues=null,this.type="coded-value"}getName(e){let t=null;if(this.codedValues){const r=String(e);this.codedValues.some(i=>(String(i.code)===r&&(t=i.name),!!t))}return t}clone(){return new h1({codedValues:C(this.codedValues),name:this.name})}};c([d({type:[Lu],json:{write:{isRequired:!0}}})],Fu.prototype,"codedValues",void 0),c([J({codedValue:"coded-value"})],Fu.prototype,"type",void 0),Fu=h1=c([S("esri.layers.support.CodedValueDomain")],Fu);const SP=Fu;var d1;let Yd=d1=class extends hm{constructor(e){super(e),this.type="inherited"}clone(){return new d1}};c([J({inherited:"inherited"})],Yd.prototype,"type",void 0),Yd=d1=c([S("esri.layers.support.InheritedDomain")],Yd);const TP=Yd;var p1;let _a=p1=class extends hm{constructor(e){super(e),this.maxValue=null,this.minValue=null,this.type="range"}clone(){return new p1({maxValue:this.maxValue,minValue:this.minValue,name:this.name})}};c([d({json:{type:[Number],read:{source:"range",reader:(e,t)=>{var r;return(r=t.range)==null?void 0:r[1]}},write:{enabled:!1,overridePolicy(){return{enabled:this.maxValue!=null&&this.minValue==null}},target:"range",writer(e,t,r){t[r]=[this.minValue||0,e]},isRequired:!0}}})],_a.prototype,"maxValue",void 0),c([d({json:{type:[Number],read:{source:"range",reader:(e,t)=>{var r;return(r=t.range)==null?void 0:r[0]}},write:{target:"range",writer(e,t,r){t[r]=[e,this.maxValue||0]},isRequired:!0}}})],_a.prototype,"minValue",void 0),c([J({range:"range"})],_a.prototype,"type",void 0),_a=p1=c([S("esri.layers.support.RangeDomain")],_a);const $P=_a,uG={key:"type",base:hm,typeMap:{range:$P,"coded-value":SP,inherited:TP}};function cG(e){if(!(e!=null&&e.type))return null;switch(e.type){case"range":return $P.fromJSON(e);case"codedValue":return SP.fromJSON(e);case"inherited":return TP.fromJSON(e)}return null}const hG=new rt({esriFieldTypeSmallInteger:"small-integer",esriFieldTypeInteger:"integer",esriFieldTypeSingle:"single",esriFieldTypeDouble:"double",esriFieldTypeLong:"long",esriFieldTypeString:"string",esriFieldTypeDate:"date",esriFieldTypeOID:"oid",esriFieldTypeGeometry:"geometry",esriFieldTypeBlob:"blob",esriFieldTypeRaster:"raster",esriFieldTypeGUID:"guid",esriFieldTypeGlobalID:"global-id",esriFieldTypeXML:"xml",esriFieldTypeBigInteger:"big-integer",esriFieldTypeDateOnly:"date-only",esriFieldTypeTimeOnly:"time-only",esriFieldTypeTimestampOffset:"timestamp-offset"});var f1;const dG=new rt({binary:"binary",coordinate:"coordinate",countOrAmount:"count-or-amount",dateAndTime:"date-and-time",description:"description",locationOrPlaceName:"location-or-place-name",measurement:"measurement",nameOrTitle:"name-or-title",none:"none",orderedOrRanked:"ordered-or-ranked",percentageOrRatio:"percentage-or-ratio",typeOrCategory:"type-or-category",uniqueIdentifier:"unique-identifier"});let mt=f1=class extends j{constructor(e){super(e),this.alias=null,this.defaultValue=void 0,this.description=null,this.domain=null,this.editable=!0,this.length=void 0,this.name=null,this.nullable=!0,this.type=null,this.valueType=null,this.visible=!0}readDescription(e,{description:t}){let r=null;try{r=t?JSON.parse(t):null}catch{}return(r==null?void 0:r.value)??null}readValueType(e,{description:t}){let r=null;try{r=t?JSON.parse(t):null}catch{}return r?dG.fromJSON(r.fieldValueType):null}clone(){var e;return new f1({alias:this.alias,defaultValue:this.defaultValue,description:this.description,domain:((e=this.domain)==null?void 0:e.clone())??null,editable:this.editable,length:this.length,name:this.name,nullable:this.nullable,type:this.type,valueType:this.valueType,visible:this.visible})}};c([d({type:String,json:{write:!0}})],mt.prototype,"alias",void 0),c([d({type:[String,Number],json:{write:{allowNull:!0}}})],mt.prototype,"defaultValue",void 0),c([d()],mt.prototype,"description",void 0),c([de("description")],mt.prototype,"readDescription",null),c([d({types:uG,json:{read:{reader:cG},write:!0}})],mt.prototype,"domain",void 0),c([d({type:Boolean,json:{write:!0}})],mt.prototype,"editable",void 0),c([d({type:Te,json:{write:{overridePolicy:e=>({enabled:Number.isFinite(e)})}}})],mt.prototype,"length",void 0),c([d({type:String,json:{write:!0}})],mt.prototype,"name",void 0),c([d({type:Boolean,json:{write:!0}})],mt.prototype,"nullable",void 0),c([J(hG)],mt.prototype,"type",void 0),c([d()],mt.prototype,"valueType",void 0),c([de("valueType",["description"])],mt.prototype,"readValueType",null),c([d({type:Boolean,json:{read:!1}})],mt.prototype,"visible",void 0),mt=f1=c([S("esri.layers.support.Field")],mt);const pG=mt;var m1;let va=m1=class extends j{constructor(e){super(e),this.type="map-layer"}clone(){const{mapLayerId:e,gdbVersion:t}=this;return new m1({mapLayerId:e,gdbVersion:t})}};c([J({mapLayer:"map-layer"}),d({json:{write:{isRequired:!0}}})],va.prototype,"type",void 0),c([d({type:Te,json:{write:{isRequired:!0}}})],va.prototype,"mapLayerId",void 0),c([d({type:String,json:{write:!0}})],va.prototype,"gdbVersion",void 0),va=m1=c([S("esri.layers.support.source.MapLayerSource")],va);var y1;let Ki=y1=class extends j{constructor(e){super(e),this.type="query-table"}clone(){const{workspaceId:e,query:t,oidFields:r,spatialReference:i,geometryType:s}=this,n={workspaceId:e,query:t,oidFields:r,spatialReference:(i==null?void 0:i.clone())??void 0,geometryType:s};return new y1(n)}};c([J({queryTable:"query-table"}),d({json:{write:{isRequired:!0}}})],Ki.prototype,"type",void 0),c([d({type:String,json:{write:!0}})],Ki.prototype,"workspaceId",void 0),c([d({type:String,json:{write:!0}})],Ki.prototype,"query",void 0),c([d({type:String,json:{write:!0}})],Ki.prototype,"oidFields",void 0),c([d({type:ae,json:{write:!0}})],Ki.prototype,"spatialReference",void 0),c([J(l9)],Ki.prototype,"geometryType",void 0),Ki=y1=c([S("esri.layers.support.source.QueryTableDataSource")],Ki);var g1;let wa=g1=class extends j{constructor(e){super(e),this.type="raster"}clone(){const{workspaceId:e,dataSourceName:t}=this;return new g1({workspaceId:e,dataSourceName:t})}};c([J({raster:"raster"}),d({json:{write:{isRequired:!0}}})],wa.prototype,"type",void 0),c([d({type:String,json:{write:!0}})],wa.prototype,"dataSourceName",void 0),c([d({type:String,json:{write:!0}})],wa.prototype,"workspaceId",void 0),wa=g1=c([S("esri.layers.support.source.RasterDataSource")],wa);var _1;let ro=_1=class extends j{constructor(e){super(e),this.type="table"}clone(){const{workspaceId:e,gdbVersion:t,dataSourceName:r}=this;return new _1({workspaceId:e,gdbVersion:t,dataSourceName:r})}};c([J({table:"table"}),d({json:{write:{isRequired:!0}}})],ro.prototype,"type",void 0),c([d({type:String,json:{write:!0}})],ro.prototype,"workspaceId",void 0),c([d({type:String,json:{write:!0}})],ro.prototype,"gdbVersion",void 0),c([d({type:String,json:{write:!0}})],ro.prototype,"dataSourceName",void 0),ro=_1=c([S("esri.layers.support.source.TableDataSource")],ro);var v1,w1;const fG=qt()({esriLeftInnerJoin:"left-inner-join",esriLeftOuterJoin:"left-outer-join"});let Qt=v1=class extends j{constructor(e){super(e),this.type="join-table"}readLeftTableSource(e,t,r){return rS()(e,t,r)}castLeftTableSource(e){return fn(b1(),e)}readRightTableSource(e,t,r){return rS()(e,t,r)}castRightTableSource(e){return fn(b1(),e)}clone(){const{leftTableKey:e,rightTableKey:t,leftTableSource:r,rightTableSource:i,joinType:s}=this,n={leftTableKey:e,rightTableKey:t,leftTableSource:(r==null?void 0:r.clone())??void 0,rightTableSource:(i==null?void 0:i.clone())??void 0,joinType:s};return new v1(n)}};c([J({joinTable:"join-table"}),d({json:{write:{isRequired:!0}}})],Qt.prototype,"type",void 0),c([d({type:String,json:{write:!0}})],Qt.prototype,"leftTableKey",void 0),c([d({type:String,json:{write:!0}})],Qt.prototype,"rightTableKey",void 0),c([d({json:{write:!0}})],Qt.prototype,"leftTableSource",void 0),c([de("leftTableSource")],Qt.prototype,"readLeftTableSource",null),c([tt("leftTableSource")],Qt.prototype,"castLeftTableSource",null),c([d({json:{write:!0}})],Qt.prototype,"rightTableSource",void 0),c([de("rightTableSource")],Qt.prototype,"readRightTableSource",null),c([tt("rightTableSource")],Qt.prototype,"castRightTableSource",null),c([J(fG)],Qt.prototype,"joinType",void 0),Qt=v1=c([S("esri.layers.support.source.JoinTableDataSource")],Qt);let cy=null;function rS(){return cy||(cy=u_({types:b1()})),cy}let hy=null;function b1(){return hy||(hy={key:"type",base:null,typeMap:{"data-layer":ss,"map-layer":va}}),hy}const mG={key:"type",base:null,typeMap:{"join-table":Qt,"query-table":Ki,raster:wa,table:ro}};let ss=w1=class extends j{constructor(e){super(e),this.type="data-layer"}clone(){const{fields:e,dataSource:t}=this;return new w1({fields:e,dataSource:t})}};c([J({dataLayer:"data-layer"}),d({json:{write:{isRequired:!0}}})],ss.prototype,"type",void 0),c([d({type:[pG],json:{write:!0}})],ss.prototype,"fields",void 0),c([d({types:mG,json:{write:!0}})],ss.prototype,"dataSource",void 0),ss=w1=c([S("esri.layers.support.source.DataLayerSource")],ss),ss.from=Rt(ss);let io=class extends Wt.ClonableMixin(j){constructor(t){super(t),this.onFields=null,this.operator=null,this.searchTerm=null,this.searchType=null}};c([d({type:[String],json:{write:{enabled:!0,overridePolicy(){return{enabled:this.onFields!=null&&this.onFields.length>0}}}}})],io.prototype,"onFields",void 0),c([d({type:String,json:{write:!0}})],io.prototype,"operator",void 0),c([d({type:String,json:{write:!0}})],io.prototype,"searchTerm",void 0),c([d({type:String,json:{write:!0}})],io.prototype,"searchType",void 0),io=c([S("esri.rest.support.FullTextSearch")],io);const yG=io;var S1;const iS=new rt({upperLeft:"upper-left",lowerLeft:"lower-left"});let so=S1=class extends j{constructor(e){super(e),this.extent=null,this.mode="view",this.originPosition="upper-left",this.tolerance=1}clone(){return new S1(C({extent:this.extent,mode:this.mode,originPosition:this.originPosition,tolerance:this.tolerance}))}};c([d({type:Le,json:{write:{overridePolicy(){return{enabled:this.mode==="view"}}}}})],so.prototype,"extent",void 0),c([d({type:["view","edit"],json:{write:!0}})],so.prototype,"mode",void 0),c([d({type:String,json:{read:iS.read,write:iS.write}})],so.prototype,"originPosition",void 0),c([d({type:Number,json:{write:{overridePolicy(){return{enabled:this.mode==="view"}}}}})],so.prototype,"tolerance",void 0),so=S1=c([S("esri.rest.support.QuantizationParameters")],so);const EP=so,gG=new rt({esriSpatialRelIntersects:"intersects",esriSpatialRelContains:"contains",esriSpatialRelCrosses:"crosses",esriSpatialRelDisjoint:"disjoint",esriSpatialRelEnvelopeIntersects:"envelope-intersects",esriSpatialRelIndexIntersects:"index-intersects",esriSpatialRelOverlaps:"overlaps",esriSpatialRelTouches:"touches",esriSpatialRelWithin:"within",esriSpatialRelRelation:"relation"});var T1;const sS=new rt({count:"count",sum:"sum",min:"min",max:"max",avg:"avg",stddev:"stddev",var:"var",exceedslimit:"exceedslimit",percentile_cont:"percentile-continuous",percentile_disc:"percentile-discrete",EnvelopeAggregate:"envelope-aggregate",CentroidAggregate:"centroid-aggregate",ConvexHullAggregate:"convex-hull-aggregate"});let Zr=T1=class extends j{constructor(e){super(e),this.maxPointCount=void 0,this.maxRecordCount=void 0,this.maxVertexCount=void 0,this.onStatisticField=null,this.outStatisticFieldName=null,this.statisticType=null,this.statisticParameters=null}writeStatisticParameters(e,t){this.statisticType!=="percentile-continuous"&&this.statisticType!=="percentile-discrete"||(t.statisticParameters=C(e))}clone(){return new T1({maxPointCount:this.maxPointCount,maxRecordCount:this.maxRecordCount,maxVertexCount:this.maxVertexCount,onStatisticField:this.onStatisticField,outStatisticFieldName:this.outStatisticFieldName,statisticType:this.statisticType,statisticParameters:C(this.statisticParameters)})}};c([d({type:Number,json:{write:!0}})],Zr.prototype,"maxPointCount",void 0),c([d({type:Number,json:{write:!0}})],Zr.prototype,"maxRecordCount",void 0),c([d({type:Number,json:{write:!0}})],Zr.prototype,"maxVertexCount",void 0),c([d({type:String,json:{write:!0}})],Zr.prototype,"onStatisticField",void 0),c([d({type:String,json:{write:!0}})],Zr.prototype,"outStatisticFieldName",void 0),c([d({type:String,json:{read:{source:"statisticType",reader:sS.read},write:{target:"statisticType",writer:sS.write}}})],Zr.prototype,"statisticType",void 0),c([d({type:Object})],Zr.prototype,"statisticParameters",void 0),c([oe("statisticParameters")],Zr.prototype,"writeStatisticParameters",null),Zr=T1=c([S("esri.rest.support.StatisticDefinition")],Zr);const _G=Zr;var Kd;const vG=new rt({esriSRUnit_Meter:"meters",esriSRUnit_Kilometer:"kilometers",esriSRUnit_Foot:"feet",esriSRUnit_StatuteMile:"miles",esriSRUnit_NauticalMile:"nautical-miles",esriSRUnit_USNauticalMile:"us-nautical-miles"});let W=Kd=class extends j{static from(e){return Ef(Kd,e)}constructor(e){super(e),this.aggregateIds=null,this.cacheHint=void 0,this.compactGeometryEnabled=!1,this.datumTransformation=null,this.defaultSpatialReferenceEnabled=!1,this.distance=void 0,this.dynamicDataSource=void 0,this.formatOf3DObjects=null,this.fullText=null,this.gdbVersion=null,this.geometry=null,this.geometryPrecision=void 0,this.groupByFieldsForStatistics=null,this.having=null,this.historicMoment=null,this.maxAllowableOffset=void 0,this.maxRecordCountFactor=1,this.multipatchOption=null,this.num=void 0,this.objectIds=null,this.orderByFields=null,this.outFields=null,this.outSpatialReference=null,this.outStatistics=null,this.parameterValues=null,this.pixelSize=null,this.quantizationParameters=null,this.rangeValues=null,this.relationParameter=null,this.resultType=null,this.returnCentroid=!1,this.returnDistinctValues=!1,this.returnExceededLimitFeatures=!0,this.returnGeometry=!1,this.returnQueryGeometry=!1,this.returnM=void 0,this.returnZ=void 0,this.returnTrueCurves=void 0,this.sourceSpatialReference=null,this.spatialRelationship="intersects",this.start=void 0,this.sqlFormat=null,this.text=null,this.timeExtent=null,this.timeReferenceUnknownClient=!1,this.units=null,this.where=null}castDatumTransformation(e){return typeof e=="number"||typeof e=="object"?e:null}writeHistoricMoment(e,t){t.historicMoment=e&&e.getTime()}writeParameterValues(e,t){if(e){const r={};for(const i in e){const s=e[i];Array.isArray(s)?r[i]=s.map(n=>n instanceof Date?n.getTime():n):s instanceof Date?r[i]=s.getTime():r[i]=s}t.parameterValues=r}}writeStart(e,t){t.resultOffset=this.start,t.resultRecordCount=this.num||10,t.where="1=1"}writeWhere(e,t){t.where=e||"1=1"}clone(){return new Kd(C({aggregateIds:this.aggregateIds,cacheHint:this.cacheHint,compactGeometryEnabled:this.compactGeometryEnabled,datumTransformation:this.datumTransformation,defaultSpatialReferenceEnabled:this.defaultSpatialReferenceEnabled,distance:this.distance,fullText:this.fullText,formatOf3DObjects:this.formatOf3DObjects,gdbVersion:this.gdbVersion,geometry:this.geometry,geometryPrecision:this.geometryPrecision,groupByFieldsForStatistics:this.groupByFieldsForStatistics,having:this.having,historicMoment:this.historicMoment!=null?new Date(this.historicMoment.getTime()):null,maxAllowableOffset:this.maxAllowableOffset,maxRecordCountFactor:this.maxRecordCountFactor,multipatchOption:this.multipatchOption,num:this.num,objectIds:this.objectIds,orderByFields:this.orderByFields,outFields:this.outFields,outSpatialReference:this.outSpatialReference,outStatistics:this.outStatistics,parameterValues:this.parameterValues,pixelSize:this.pixelSize,quantizationParameters:this.quantizationParameters,rangeValues:this.rangeValues,relationParameter:this.relationParameter,resultType:this.resultType,returnDistinctValues:this.returnDistinctValues,returnGeometry:this.returnGeometry,returnCentroid:this.returnCentroid,returnExceededLimitFeatures:this.returnExceededLimitFeatures,returnQueryGeometry:this.returnQueryGeometry,returnM:this.returnM,returnZ:this.returnZ,returnTrueCurves:this.returnTrueCurves,dynamicDataSource:this.dynamicDataSource,sourceSpatialReference:this.sourceSpatialReference,spatialRelationship:this.spatialRelationship,start:this.start,sqlFormat:this.sqlFormat,text:this.text,timeExtent:this.timeExtent,timeReferenceUnknownClient:this.timeReferenceUnknownClient,units:this.units,where:this.where}))}};W.MAX_MAX_RECORD_COUNT_FACTOR=5,c([d({json:{write:!0}})],W.prototype,"aggregateIds",void 0),c([d({type:Boolean,json:{write:!0}})],W.prototype,"cacheHint",void 0),c([d({type:Boolean,json:{default:!1,write:!0}})],W.prototype,"compactGeometryEnabled",void 0),c([d({json:{write:!0}})],W.prototype,"datumTransformation",void 0),c([tt("datumTransformation")],W.prototype,"castDatumTransformation",null),c([d({type:Boolean,json:{default:!1,write:!0}})],W.prototype,"defaultSpatialReferenceEnabled",void 0),c([d({type:Number,json:{write:!0}})],W.prototype,"distance",void 0),c([d({type:ss,json:{write:!0}})],W.prototype,"dynamicDataSource",void 0),c([d({type:String,json:{write:!0}})],W.prototype,"formatOf3DObjects",void 0),c([d({type:[yG],json:{write:{enabled:!0,overridePolicy(){return{enabled:this.fullText!=null&&this.fullText.length>0}}}}})],W.prototype,"fullText",void 0),c([d({type:String,json:{write:!0}})],W.prototype,"gdbVersion",void 0),c([d({types:uv,json:{read:pl,write:!0}})],W.prototype,"geometry",void 0),c([d({type:Number,json:{write:!0}})],W.prototype,"geometryPrecision",void 0),c([d({type:[String],json:{write:!0}})],W.prototype,"groupByFieldsForStatistics",void 0),c([d({type:String,json:{write:!0}})],W.prototype,"having",void 0),c([d({type:Date})],W.prototype,"historicMoment",void 0),c([oe("historicMoment")],W.prototype,"writeHistoricMoment",null),c([d({type:Number,json:{write:!0}})],W.prototype,"maxAllowableOffset",void 0),c([d({type:Number,cast:e=>e<1?1:e>W.MAX_MAX_RECORD_COUNT_FACTOR?W.MAX_MAX_RECORD_COUNT_FACTOR:e,json:{write:{overridePolicy:e=>({enabled:e>1})}}})],W.prototype,"maxRecordCountFactor",void 0),c([d({type:["xyFootprint"],json:{write:!0}})],W.prototype,"multipatchOption",void 0),c([d({type:Number,json:{read:{source:"resultRecordCount"}}})],W.prototype,"num",void 0),c([d({json:{write:!0}})],W.prototype,"objectIds",void 0),c([d({type:[String],json:{write:!0}})],W.prototype,"orderByFields",void 0),c([d({type:[String],json:{write:!0}})],W.prototype,"outFields",void 0),c([d({type:ae,json:{name:"outSR",write:!0}})],W.prototype,"outSpatialReference",void 0),c([d({type:[_G],json:{write:{enabled:!0,overridePolicy(){return{enabled:this.outStatistics!=null&&this.outStatistics.length>0}}}}})],W.prototype,"outStatistics",void 0),c([d({json:{write:!0}})],W.prototype,"parameterValues",void 0),c([oe("parameterValues")],W.prototype,"writeParameterValues",null),c([d({type:te,json:{write:!0}})],W.prototype,"pixelSize",void 0),c([d({type:EP,json:{write:!0}})],W.prototype,"quantizationParameters",void 0),c([d({type:[Object],json:{write:!0}})],W.prototype,"rangeValues",void 0),c([d({type:String,json:{read:{source:"relationParam"},write:{target:"relationParam",overridePolicy(){return{enabled:this.spatialRelationship==="relation"}}}}})],W.prototype,"relationParameter",void 0),c([d({type:String,json:{write:!0}})],W.prototype,"resultType",void 0),c([d({type:Boolean,json:{default:!1,write:!0}})],W.prototype,"returnCentroid",void 0),c([d({type:Boolean,json:{default:!1,write:!0}})],W.prototype,"returnDistinctValues",void 0),c([d({type:Boolean,json:{default:!0,write:!0}})],W.prototype,"returnExceededLimitFeatures",void 0),c([d({type:Boolean,json:{write:!0}})],W.prototype,"returnGeometry",void 0),c([d({type:Boolean,json:{default:!1,write:!0}})],W.prototype,"returnQueryGeometry",void 0),c([d({type:Boolean,json:{default:!1,write:!0}})],W.prototype,"returnM",void 0),c([d({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],W.prototype,"returnZ",void 0),c([d({type:Boolean,json:{write:!0}})],W.prototype,"returnTrueCurves",void 0),c([d({type:ae,json:{write:!0}})],W.prototype,"sourceSpatialReference",void 0),c([J(gG,{ignoreUnknown:!1,name:"spatialRel"})],W.prototype,"spatialRelationship",void 0),c([d({type:Number,json:{read:{source:"resultOffset"}}})],W.prototype,"start",void 0),c([oe("start"),oe("num")],W.prototype,"writeStart",null),c([d({type:String,json:{write:!0}})],W.prototype,"sqlFormat",void 0),c([d({type:String,json:{write:!0}})],W.prototype,"text",void 0),c([d({type:ev,json:{write:!0}})],W.prototype,"timeExtent",void 0),c([d({type:Boolean,json:{default:!1,write:!0}})],W.prototype,"timeReferenceUnknownClient",void 0),c([J(vG,{ignoreUnknown:!1}),d({json:{write:{overridePolicy(e){return{enabled:!!e&&this.distance!=null}}}}})],W.prototype,"units",void 0),c([d({type:String,json:{write:{overridePolicy(e){return{enabled:e!=null||this.start!=null&&this.start>0}}}}})],W.prototype,"where",void 0),c([oe("where")],W.prototype,"writeWhere",null),W=Kd=c([S("esri.rest.support.Query")],W);const nS=W;function Zh(e){return!!(e!=null&&typeof e=="object"&&"createQuery"in e&&e.createQuery&&"on"in e&&e.on)}let mi=class extends xi.EventedAccessor{constructor(t){super(t),this._selectionMap=new Jd,this._sources=new B,this._trashCan=[],this._layerEditHandles=new B,this._vizTaskId=0,this.showHighlight=!0,this.highlightName="default"}initialize(){this.addHandles([X(()=>[this.view,this.showHighlight],()=>this._refreshVisualization()),vn(()=>this.sources,"change",r=>{const i=this._selectionMap;for(const s of r.removed)i.delete(s);this._refreshListeners(),this._refreshVisualization()},{onListenerAdd:()=>this._refreshListeners()})]);const t=new B;this.view.when().then(()=>{this.view.map&&(this.view.map.allLayers.flatten(r=>"sublayers"in r&&r.sublayers?r.sublayers:null).forEach(r=>{(Zh(r)&&!RD(r)||zn(r))&&t.add(r)}),this.sources=t)})}destroy(){this._layerEditHandles.drain(Ce)}get selections(){return Array.from(this._selectionMap.entries()).map(t=>{const[r,i]=t;return{layer:r,selection:[...i.selection]}})}get count(){let t=0;for(const r of this._selectionMap.values())t+=r.selection.length;return t}get hasSelection(){return this.count>0}get sources(){return this._sources}set sources(t){ms(t,this._sources)}async getSelectedFeatures(t,r={},i="layerView"){const{view:s,selections:n}=this,o=(t!==void 0?n.filter(a=>t.includes(a.layer)):n).filter(a=>a.selection.length>0).map(async a=>{const{layer:l,selection:h}=a,p=zn(l)?l.parent:l;if(p==null||!aS(p))return null;if(i==="layer")return lS(p,h,r);if(oS(p))return null;const f=await s.whenLayerView(p).catch(()=>null);return f?lS(f,h,r):null});return(await Promise.all(o)).filter(a=>a!=null)}updateSelection(t){const r=new Map;for(const[n,o]of this._selectionMap)r.set(n,[...o.selection]);let i=!1;const s=t.current.concat(t.added);for(const n of s){const o=n.sourceLayer,a=n.getObjectId();if(this.sources.includes(o)&&(Zh(o)||zn(o))&&a!==null){const l=$f(r,o,()=>[]);l.includes(a)||(l.push(a),i=!0)}}for(const n of t.removed){const o=n.sourceLayer,a=n.getObjectId();if(this.sources.includes(o)&&(Zh(o)||zn(o))&&a!==null){const l=r.get(o),h=l==null?void 0:l.indexOf(a);h!==void 0&&h>=0&&(l==null||l.splice(h,1),i=!0)}}if(i){const{_selectionMap:n,_trashCan:o}=this,a=[];for(const[l,h]of r){const p=n.get(l);p!==void 0&&o.push(p),n.set(l,{selection:h}),a.push({layer:l,selection:h,...mw(p!==void 0?p.selection:[],h)})}this._onSelectionChange(a)}}setSelection(t,r){this._setSelection(t,r)}getSelection(t){const r=this._selectionMap.get(t);return r==null?void 0:r.selection}appendToSelection(t,r){const i=this._selectionMap.get(t),s=i!==void 0?[...i.selection]:[];for(const n of r)s.includes(n)||s.push(n);this._setSelection(t,s)}removeFromSelection(t,r){const i=this._selectionMap.get(t);if(!i)return;const s=[];for(const n of i.selection)r.includes(n)||s.push(n);this._setSelection(t,s)}toggleInSelection(t,r){const i=this._selectionMap.get(t);if(!i||i.selection.length===0)return void this._setSelection(t,r);const s=new Set(i.selection),n=new Set(r),o=IR(s,n);this._setSelection(t,Array.from(o))}clear(){const t=this._selectionMap.values();this._trashCan.push(...t);const r=[];for(const[i,s]of this._selectionMap.entries())r.push({layer:i,added:[],removed:[...s.selection],selection:[]});this._selectionMap.clear(),this._onSelectionChange(r)}_onSelectionChange(t){this._refreshVisualization(),this.emit("selection-change",{view:this.view,changes:t})}_refreshVisualization(){var o;if(this.view==null||this.sources==null)return;for(this._vizTaskId++;this._trashCan.length>0;){const a=this._trashCan.pop();(o=a==null?void 0:a.highlightHandle)==null||o.remove()}const{sources:t,view:r,_selectionMap:i,showHighlight:s}=this,n=this._vizTaskId;for(const a of t){const l=i.get(a),h=zn(a)?a.parent:a;if(h!=null&&aS(h)){if(oS(h))continue;r.whenLayerView(h).then(p=>{var f;(f=l==null?void 0:l.highlightHandle)==null||f.remove(),l!=null&&s&&n===this._vizTaskId&&"highlight"in p&&typeof p.highlight=="function"&&l.selection.length>0&&(l.highlightHandle=p.highlight(l.selection,this.highlightName))}).catch(()=>{var p;(p=l==null?void 0:l.highlightHandle)==null||p.remove()})}}}_refreshListeners(){this._layerEditHandles.drain(Ce);for(const t of this.sources){const r=zn(t)?t.parent:t;if(r!=null&&Zh(r)){const i=r.on("edits",s=>{this._handleEditChanges(s,t)});this._layerEditHandles.push(i)}}}_handleEditChanges(t,r){if(t.deletedFeatures!==void 0&&t.deletedFeatures.length>0&&this._selectionMap.has(r)){const i=t.deletedFeatures.filter(s=>s.error==null).map(s=>s.objectId).filter(el);this.removeFromSelection(r,i)}}_setSelection(t,r){if(!this.sources.includes(t))throw new Error(`Cannot set selection on layer ${t.title} because it is not in 'sources'`);const i=this._selectionMap.get(t);if(i===void 0||!bG(i,{selection:r})){i!==void 0&&this._trashCan.push(i),this._selectionMap.set(t,{selection:[...r]});const s={layer:t,selection:[...r],...mw(i!==void 0?i.selection:[],r)};this._onSelectionChange([s])}}};c([d({readOnly:!0,nonNullable:!0})],mi.prototype,"selections",null),c([d({readOnly:!0,nonNullable:!0})],mi.prototype,"count",null),c([d({constructOnly:!0,nonNullable:!0})],mi.prototype,"view",void 0),c([d({readOnly:!0,nonNullable:!0})],mi.prototype,"hasSelection",null),c([d()],mi.prototype,"showHighlight",void 0),c([d()],mi.prototype,"sources",null),c([d()],mi.prototype,"highlightName",void 0),mi=c([S("esri.views.SelectionManager")],mi);const oS=e=>{var t;return zn(e)?((t=e.parent)==null?void 0:t.isTable)===!0:e.isTable},wG=e=>e.layer!==void 0,aS=e=>(e==null?void 0:e.when)!==void 0,bG=(e,t)=>{if(e==null&&t==null)return!0;if(e!=null&&t==null||e==null&&t!=null)return!1;if(e!=null&&t!=null&&e.selection!=null&&t.selection!=null){const r=[...e.selection],i=[...t.selection];if(r.length!==i.length)return!1;r.sort(),i.sort();for(let s=0;s<r.length;s++)if(r[s]!==i[s])return!1}return!0},lS=async(e,t,r={})=>{let i;if(wG(e)){const s=e;i=s===void 0?null:await s.queryFeatures(new nS({...r,objectIds:t})).then(n=>({data:n,layer:e.layer}))}else{const s=e;i=s===void 0?null:await s.queryFeatures(new nS({...r,objectIds:t})).then(n=>({data:n,layer:s}))}return i},SG=mi;let Uu=class extends Wt.ClonableMixin(q){constructor(t){super(t),this.accentColor=new ne([255,127,0]),this.textColor=new ne([255,255,255])}};c([d({type:ne,nonNullable:!0})],Uu.prototype,"accentColor",void 0),c([d({type:ne,nonNullable:!0})],Uu.prototype,"textColor",void 0),Uu=c([S("esri.views.Theme")],Uu);const $1=Uu;var uS;(function(e){e[e.Left=0]="Left",e[e.Middle=1]="Middle",e[e.Right=2]="Right"})(uS||(uS={}));const MP=["click","double-click","immediate-click","immediate-double-click","hold","drag","key-down","key-up","pointer-down","pointer-move","pointer-up","pointer-drag","mouse-wheel","pointer-enter","pointer-leave","gamepad","focus","blur"],xP={};function AP(e){return!!xP[e]}function TG(e){for(const t of e)if(!AP(t))return!1;return!0}MP.forEach(e=>{xP[e]=!0});let PP=class{constructor(t){this._handlers=new Map,this._counter=0,this._handlerCounts=new Map,this.view=t,this.inputManager=null}connect(t){t&&this.disconnect(),this.inputManager=t,this._handlers.forEach(({handler:r,priority:i},s)=>{var n;return(n=this.inputManager)==null?void 0:n.installHandlers(s,[r],i)})}disconnect(){this.inputManager&&this._handlers.forEach((t,r)=>{var i;return(i=this.inputManager)==null?void 0:i.uninstallHandlers(r)}),this.inputManager=null}destroy(){this.disconnect(),this._handlers.clear(),this.view=null}on(t,r,i,s){const n=Array.isArray(t)?t:t.split(",");if(!TG(n))return n.some(AP)&&console.error("Error: registering input events and other events on the view at the same time is not supported."),null;let o,a;Array.isArray(r)?a=r:(o=r,a=[]),typeof i=="function"?o=i:s=i,s=s??cn.DEFAULT;const l=this._createUniqueGroupName(),h=new $G(this.view,n,a,o);this._handlers.set(l,{handler:h,priority:s});for(const p of n){const f=this._handlerCounts.get(p)||0;this._handlerCounts.set(p,f+1)}return this.inputManager&&this.inputManager.installHandlers(l,[h],s),ue(()=>this._removeHandler(l,n))}hasHandler(t){return!!this._handlerCounts.get(t)}_removeHandler(t,r){if(this._handlers.has(t)){this._handlers.delete(t);for(const i of r){const s=this._handlerCounts.get(i);s===void 0||(s===1?this._handlerCounts.delete(i):this._handlerCounts.set(i,s-1))}}this.inputManager&&this.inputManager.uninstallHandlers(t)}_createUniqueGroupName(){return this._counter+=1,`viewEvents_${this._counter}`}},$G=class extends it{constructor(t,r,i,s){super(!0),this._latestDragStart=void 0,this.view=t;for(const n of r)switch(n){case"click":this.registerIncoming("click",i,o=>s(xG(t,o)));break;case"double-click":this.registerIncoming("double-click",i,o=>s(AG(t,o)));break;case"immediate-click":this.registerIncoming("immediate-click",i,o=>s(PG(t,o)));break;case"immediate-double-click":this.registerIncoming("immediate-double-click",i,o=>s(OG(t,o)));break;case"hold":this.registerIncoming("hold",i,o=>s(CG(t,o)));break;case"drag":this.registerIncoming("drag",i,o=>{const a=this._wrapDrag(o);a&&s(a)});break;case"key-down":this.registerIncoming("key-down",i,o=>s(IG(o)));break;case"key-up":this.registerIncoming("key-up",i,o=>s(RG(o)));break;case"pointer-down":this.registerIncoming("pointer-down",i,o=>s(Hl(o,"pointer-down")));break;case"pointer-move":this.registerIncoming("pointer-move",i,o=>s(Hl(o,"pointer-move")));break;case"pointer-up":this.registerIncoming("pointer-up",i,o=>s(Hl(o,"pointer-up")));break;case"pointer-drag":this.registerIncoming("pointer-drag",i,o=>s(kG(o)));break;case"mouse-wheel":this.registerIncoming("mouse-wheel",i,o=>s(NG(o)));break;case"pointer-enter":this.registerIncoming("pointer-enter",i,o=>s(Hl(o,"pointer-enter")));break;case"pointer-leave":this.registerIncoming("pointer-leave",i,o=>s(Hl(o,"pointer-leave")));break;case"gamepad":this.registerIncoming("gamepad",i,o=>{s(LG(o))});break;case"focus":this.registerIncoming("focus",i,o=>{s(EG(o))});break;case"blur":this.registerIncoming("blur",i,o=>{s(MG(o))})}}_wrapDrag(t){const r=t.data,{x:i,y:s}=r.center,{action:n,pointerType:o,button:a}=r;if(n==="start"&&(this._latestDragStart=r),!this._latestDragStart)return;const l=r.pointer.native,h=r.buttons,{cancelable:p,timestamp:f}=t,m={x:this._latestDragStart.center.x,y:this._latestDragStart.center.y};return n==="end"&&(this._latestDragStart=void 0),{type:"drag",action:n,x:i,y:s,origin:m,pointerType:o,button:a,buttons:h,radius:r.radius,angle:DM(r.angle),native:l,timestamp:f,cancelable:p,stopPropagation:()=>t.stopPropagation(),async:y=>t.async(y),preventDefault:()=>t.preventDefault()}}};function EG(e){return{type:"focus",timestamp:e.timestamp,native:e.data.native,cancelable:e.cancelable,stopPropagation:()=>e.stopPropagation(),async:t=>e.async(t),preventDefault:()=>e.preventDefault()}}function MG(e){return{type:"blur",timestamp:e.timestamp,native:e.data.native,cancelable:e.cancelable,stopPropagation:()=>e.stopPropagation(),async:t=>e.async(t),preventDefault:()=>e.preventDefault()}}function xG(e,t){const{pointerType:r,button:i,buttons:s,x:n,y:o,native:a,eventId:l}=t.data,{cancelable:h,timestamp:p}=t;return{type:"click",pointerType:r,button:i,buttons:s,x:n,y:o,native:a,timestamp:p,screenPoint:lt(n,o),mapPoint:fh(e,n,o),eventId:l,cancelable:h,stopPropagation:()=>t.stopPropagation(),async:f=>t.async(f),preventDefault:()=>t.preventDefault()}}function AG(e,t){const{pointerType:r,button:i,buttons:s,x:n,y:o,native:a,eventId:l}=t.data,{cancelable:h,timestamp:p}=t;return{type:"double-click",pointerType:r,button:i,buttons:s,x:n,y:o,native:a,timestamp:p,mapPoint:fh(e,n,o),eventId:l,cancelable:h,stopPropagation:()=>t.stopPropagation(),async:f=>t.async(f),preventDefault:()=>t.preventDefault()}}function PG(e,t){const{pointerType:r,button:i,buttons:s,x:n,y:o,native:a,eventId:l}=t.data,h=a.pointerId,{cancelable:p,timestamp:f}=t;return{type:"immediate-click",pointerId:h,pointerType:r,button:i,buttons:s,x:n,y:o,native:a,timestamp:f,mapPoint:fh(e,n,o),eventId:l,cancelable:p,stopPropagation:()=>t.stopPropagation(),async:m=>t.async(m),preventDefault:()=>t.preventDefault()}}function OG(e,t){const{pointerType:r,button:i,buttons:s,x:n,y:o,native:a,eventId:l}=t.data,h=a.pointerId,{cancelable:p,timestamp:f}=t;return{type:"immediate-double-click",pointerId:h,pointerType:r,button:i,buttons:s,x:n,y:o,native:a,timestamp:f,mapPoint:fh(e,n,o),eventId:l,cancelable:p,stopPropagation:()=>t.stopPropagation(),async:m=>t.async(m),preventDefault:()=>t.preventDefault()}}function CG(e,t){const{pointerType:r,button:i,buttons:s,x:n,y:o,native:a}=t.data,{cancelable:l,timestamp:h}=t;return{type:"hold",pointerType:r,button:i,buttons:s,x:n,y:o,native:a,timestamp:h,mapPoint:fh(e,n,o),cancelable:l,stopPropagation:()=>t.stopPropagation(),async:p=>t.async(p),preventDefault:()=>t.preventDefault()}}function fh(e,t,r){return e.toMap(lt(t,r),{exclude:[]})}function IG(e){const{key:t,repeat:r,native:i}=e.data,{cancelable:s,timestamp:n}=e;return{type:"key-down",key:t,repeat:r,native:i,timestamp:n,cancelable:s,stopPropagation:()=>e.stopPropagation(),async:o=>e.async(o),preventDefault:()=>e.preventDefault()}}function RG(e){const{key:t,native:r}=e.data,{cancelable:i,timestamp:s}=e;return{type:"key-up",key:t,native:r,timestamp:s,cancelable:i,stopPropagation:()=>e.stopPropagation(),async:n=>e.async(n),preventDefault:()=>e.preventDefault()}}function Hl(e,t){const{x:r,y:i,button:s,buttons:n,native:o,eventId:a}=e.data,l=o.pointerId,h=o.pointerType,{cancelable:p,timestamp:f}=e;return{type:t,x:r,y:i,pointerId:l,pointerType:h,button:s,buttons:n,native:o,timestamp:f,eventId:a,cancelable:p,stopPropagation:()=>e.stopPropagation(),async:m=>e.async(m),preventDefault:()=>e.preventDefault()}}function kG(e){const{x:t,y:r,buttons:i,native:s,eventId:n}=e.data.currentEvent,{button:o}=e.data.startEvent,a=e.data.startEvent.native.pointerId,l=e.data.startEvent.native.pointerType,h=e.data.action,p={x:e.data.startEvent.x,y:e.data.startEvent.y},{cancelable:f,timestamp:m}=e;return{type:"pointer-drag",x:t,y:r,pointerId:a,pointerType:l,button:o,buttons:i,action:h,origin:p,native:s,timestamp:m,eventId:n,cancelable:f,stopPropagation:()=>e.stopPropagation(),async:y=>e.async(y),preventDefault:()=>e.preventDefault()}}function NG(e){const{cancelable:t,data:r,timestamp:i}=e,{x:s,y:n,deltaY:o,native:a}=r;return{type:"mouse-wheel",x:s,y:n,deltaY:o,native:a,timestamp:i,cancelable:t,stopPropagation:()=>e.stopPropagation(),async:l=>e.async(l),preventDefault:()=>e.preventDefault()}}function LG(e){const{action:t,state:r,device:i}=e.data,{cancelable:s,timestamp:n}=e,{buttons:o,axes:a}=r;return{type:"gamepad",device:i,timestamp:n,action:t,buttons:o,axes:a,cancelable:s,stopPropagation:()=>e.stopPropagation(),async:l=>e.async(l),preventDefault:()=>e.preventDefault()}}var Fc,cS,hS;(function(e){e[e.USER=0]="USER",e[e.MANAGER=1]="MANAGER"})(Fc||(Fc={})),function(e){e[e.None=0]="None",e[e.Unfocused=1]="Unfocused",e[e.Focused=2]="Focused",e[e.Unselected=4]="Unselected",e[e.Selected=8]="Selected",e[e.All=15]="All"}(cS||(cS={})),function(e){e[e.None=0]="None",e[e.Custom1=16]="Custom1",e[e.Custom2=32]="Custom2",e[e.Custom3=64]="Custom3",e[e.Custom4=128]="Custom4",e[e.Custom5=256]="Custom5",e[e.Custom6=512]="Custom6",e[e.Custom7=1024]="Custom7",e[e.Custom8=2048]="Custom8",e[e.Custom9=4096]="Custom9",e[e.Custom10=8192]="Custom10",e[e.Custom11=16384]="Custom11",e[e.Custom12=32768]="Custom12",e[e.All=65520]="All"}(hS||(hS={}));function DG(e){return[e.on("before-add",t=>{const r=t.item;if(r==null||e.includes(r))return F.getLogger("esri.views.interactive.interactiveToolUtils").warn("Tool is either already in the list of tools or tool is `null`. Not adding tool."),void t.preventDefault();r.onAdd()}),e.on("after-remove",t=>{const r=t.item;r.active&&(r.view.activeTool=null),r.destroy()})]}function E1(e){return e.visible&&e.getEditableFlag!=null&&e.getEditableFlag(Fc.USER)&&e.getEditableFlag(Fc.MANAGER)}function yi(e){return lt(e.x,e.y)}function OP(e,t){var i;const r=(i=e instanceof HTMLElement?e:e.surface)==null?void 0:i.getBoundingClientRect();return r?lt(t.clientX-r.left,t.clientY-r.top):lt(0,0)}function CP(e,t){return t instanceof Event?OP(e,t):yi(t)}function IP(e){if(e instanceof Event)return!0;if(typeof e=="object"&&"type"in e)switch(e.type){case"click":case"double-click":case"pointer-down":case"pointer-drag":case"pointer-enter":case"pointer-leave":case"pointer-up":case"pointer-move":case"immediate-click":case"immediate-double-click":case"hold":case"drag":case"mouse-wheel":return!0;default:return!1}return!1}let FG=class{constructor(){this._pointerLocations=new Map,this._hoveredManipulators=new Map,this._grabbedManipulators=new Map,this._draggedManipulators=new Map,this._stopDrag=!1,this._externallyDragging=!1,this._revertToNullActiveTool=!1,this._cursor=null}get cursor(){return this._cursor}hasFocusedManipulators(){return this._grabbedManipulators.size>0||this._draggedManipulators.size>0}handleInputEvent(t,r){const i=()=>t.stopPropagation();switch(t.type){case"pointer-move":pS(t.pointerType)&&this._pointerLocations.set(t.pointerId,{x:t.x,y:t.y,pointerType:t.pointerType});break;case"drag":this._grabbedManipulators.size>0?this._stopDrag=!0:t.action==="start"?this._externallyDragging=!0:t.action==="end"&&(this._externallyDragging=!1),this._stopDrag&&(i(),t.action==="end"&&(this._stopDrag=!1));break;case"pointer-down":{if(!fS(t))break;const s=yi(t),n=ea(s,t.pointerType,r.forEachTool);if(n==null)break;const o=n.manipulator,a=n.tool;o==null||a==null||!o.interactive||o.grabbable&&o.grabbableForEvent(t)||!o.grabbing||o.dragging||this._releaseManipulatorBeforeDragging(o,t,r),o!=null&&a!=null&&o.interactive&&o.grabbable&&o.grabbableForEvent(t)&&!o.grabbing&&(this._grabbedManipulators.set(t.pointerId,{manipulator:o,tool:a,start:s,pointerType:t.pointerType}),this._grabbedManipulators.size===1&&r.activeTool==null&&(this._revertToNullActiveTool=!0,r.setActiveTool(n.tool)),o.grabbing=!0,o.events.emit("grab-changed",{action:"start",pointerType:t.pointerType,screenPoint:s}),i());break}case"pointer-up":this._draggedManipulators.has(t.pointerId)||this._handlePointerEnd(t,r);break;case"pointer-drag":{if(!fS(t))break;const s=this._grabbedManipulators.get(t.pointerId),n=s==null?void 0:s.manipulator,o=s==null?void 0:s.tool;if(n==null||o==null)break;const a=yi(t);a.x=ii(a.x,0,r.view.width),a.y=ii(a.y,0,r.view.height);const l=s.start,h=this._draggedManipulators.get(t.pointerId);switch(t.action){case"start":case"update":t.action!=="update"&&this._grabbedManipulators.size!==1||(n.dragging=!0,h?n.events.emit("drag",{action:"update",start:l,screenPoint:a}):n.events.emit("drag",{action:"start",start:l,screenPoint:a,pointerType:t.pointerType}),this._draggedManipulators.set(t.pointerId,{tool:o,manipulator:n,start:l}));break;case"end":n.dragging=!1,h&&n.events.emit("drag",{action:"end",start:l,screenPoint:a}),this._draggedManipulators.delete(t.pointerId),this._handlePointerEnd(t,r)}i();break}case"immediate-click":{const s=yi(t),n=ea(s,t.pointerType,r.forEachTool);if(UG(t)||r.forEachTool(h=>{if((n==null||n.tool!==h||h.automaticManipulatorSelection)&&h.manipulators){let p=!1;h.manipulators.forEach(({manipulator:f})=>{f.selected&&(f.selected=!1,p=!0)}),p&&h.onManipulatorSelectionChanged&&h.onManipulatorSelectionChanged()}}),n==null)break;const{manipulator:o,tool:a}=n;if(!o.interactive)break;o.selectable&&a.automaticManipulatorSelection&&(o.selected=!o.selected,a.onManipulatorSelectionChanged&&a.onManipulatorSelectionChanged());const l=t.native.shiftKey;o.events.emit("immediate-click",{screenPoint:s,button:t.button,pointerType:t.pointerType,shiftKey:l,stopPropagation:i}),dy(o,i);break}case"click":{const s=yi(t),n=ea(s,t.pointerType,r.forEachTool),o=n==null?void 0:n.manipulator;if(o==null||!o.interactive)break;const a=t.native.shiftKey;o.events.emit(t.type,{screenPoint:s,button:t.button,pointerType:t.pointerType,shiftKey:a}),i();break}case"double-click":{const s=yi(t),n=ea(s,t.pointerType,r.forEachTool),o=n!=null?n.manipulator:null;if(o==null||!o.interactive)break;const a=t.native.shiftKey;o.events.emit("double-click",{screenPoint:s,button:t.button,pointerType:t.pointerType,shiftKey:a,stopPropagation:i}),dy(o,i);break}case"immediate-double-click":{const s=yi(t),n=ea(s,t.pointerType,r.forEachTool),o=n!=null?n.manipulator:null;if(o==null||!o.interactive)break;const a=t.native.shiftKey;o.events.emit("immediate-double-click",{screenPoint:s,button:t.button,pointerType:t.pointerType,shiftKey:a,stopPropagation:i}),t.pointerType==="mouse"&&dy(o,i);break}}this._onFocusChange(r.forEachTool)}_releaseManipulatorBeforeDragging(t,r,i){t.grabbing=!1,t.events.emit("grab-changed",{action:"end",pointerType:r.pointerType,screenPoint:yi(r)}),this._grabbedManipulators.forEach(({manipulator:s},n)=>{s===t&&this._grabbedManipulators.delete(n)}),this._afterManipulatorRelease(i.setActiveTool)}_handlePointerEnd(t,r){var s;const i=(s=this._grabbedManipulators.get(t.pointerId))==null?void 0:s.manipulator;i!=null&&i.grabbing&&(i.grabbing=!1,i.events.emit("grab-changed",{action:"end",pointerType:t.pointerType,screenPoint:yi(t)}),this._grabbedManipulators.delete(t.pointerId),this._afterManipulatorRelease(r.setActiveTool))}_onFocusChange(t){this._updateCursor(),this._updateFocusedManipulatorTools(t)}_updateCursor(){this._grabbedManipulators.size>0?this._cursor=dS(this._grabbedManipulators)||"grabbing":this._hoveredManipulators.size>0?this._cursor=dS(this._hoveredManipulators)||"pointer":this._cursor=null}_updateFocusedManipulatorTools(t){const r=new Set,i=new Set;this._grabbedManipulators.forEach(({tool:s})=>{r.add(s)}),this._hoveredManipulators.forEach(({tool:s})=>{i.add(s)}),t(s=>{s.hasGrabbedManipulators=r.has(s),s.hasHoveredManipulators=i.has(s);const n=this._grabbedManipulators.values(),o=FI(n,({tool:a})=>a===s);s.firstGrabbedManipulator=o!=null?o.manipulator:null})}clearPointers(t,{forEachTool:r,setActiveTool:i},s=!0,n){const o=(a,l)=>a===t&&(n==null||n===l);this._grabbedManipulators.forEach(({tool:a,manipulator:l,pointerType:h},p)=>{o(a,l)&&(this._grabbedManipulators.delete(p),l.grabbing=!1,l.events.emit("grab-changed",{action:"end",screenPoint:null,pointerType:h}))}),this._draggedManipulators.forEach(({tool:a,manipulator:l},h)=>{o(a,l)&&(this._draggedManipulators.delete(h),l.dragging=!1,l.events.emit("drag",{action:"cancel"}))}),s&&this._hoveredManipulators.forEach(({tool:a,manipulator:l},h)=>{o(a,l)&&(this._hoveredManipulators.delete(h),l.hovering=!1)}),this._afterManipulatorRelease(i),this._onFocusChange(r)}updateHoveredStateFromKnownPointers(t){this._pointerLocations.forEach((r,i)=>{this._updateHoveredStateForPointerAtScreenPosition(lt(r.x,r.y),i,r.pointerType,t)})}handleHoverEvent(t,r){const i=t.type;i!=="pointer-up"&&i!=="immediate-click"&&i!=="pointer-move"||!pS(t.pointerType)||(i!=="pointer-up"&&this._externallyDragging?this._clearHoveredManipulatorStates(t.pointerId):this._updateHoveredStateForPointerAtScreenPosition(yi(t),t.pointerId,t.pointerType,r))}_updateHoveredStateForPointerAtScreenPosition(t,r,i,s){var a;let n=ea(t,i,s);const o=(a=this._hoveredManipulators.get(r))==null?void 0:a.manipulator;n==null||n.manipulator.interactive||(n=null),n!=null&&o===n.manipulator||(o!=null&&(o.hovering=!1),n!=null?(n.manipulator.hovering=!0,this._hoveredManipulators.set(r,n)):this._hoveredManipulators.delete(r),this._onFocusChange(s))}_afterManipulatorRelease(t){this._grabbedManipulators.size===0&&this._revertToNullActiveTool&&(t(null),this._revertToNullActiveTool=!1)}_clearHoveredManipulatorStates(t){this._hoveredManipulators.forEach(({manipulator:r},i)=>{t===i&&(this._hoveredManipulators.delete(t),r.hovering=!1)})}};function dS(e){for(const{manipulator:t}of e.values())if(t!=null&&t.interactive){if(t.grabbing&&t.grabCursor)return t.grabCursor;if(t.cursor)return t.cursor}return null}function ea(e,t,r){let i=null;return r(s=>{if(s.manipulators==null||!E1(s))return!1;const n=s.manipulators.intersect(e,t);return n!=null&&(i={tool:s,manipulator:n},!0)}),i}function pS(e){return e==="mouse"}function fS(e){return e.pointerType!=="mouse"||e.button===0}function UG(e){return!!e.native.shiftKey}function dy(e,t){e!=null&&e.consumesClicks&&t()}const mS="attached",py="tools",jG=1e3;let gi=class extends q{constructor(t){super(t),this._updatingHandles=new $o,this._clock=bl,this._manipulatorState=new FG,this.tools=new B,this.cursor=null,this._interacting=!1,this._interactingTimeout=jG,this._interactingTimeoutHandle=null,this._forEachTool=r=>{for(const i of this.tools.items)if(r(i))return}}initialize(){this.addHandles([this.view.on(MP,t=>{this._handleInputEvent(t)},cn.TOOL),...DG(this.tools),this.tools.on("before-add",({item:t})=>{this._updateToolEditableFlag(t)}),this.tools.on("before-remove",({item:t})=>{this._manipulatorState.clearPointers(t,this._manipulatorStateEventArgs),this._updateCursor()}),this.tools.on("change",()=>{this._refreshToolWatchers()})])}destroy(){this.activeTool=null,this.tools.drain(t=>t.destroy()),this._clearInteractingTimeout(),this._interacting=!1,this._updatingHandles.destroy()}get _manipulatorStateEventArgs(){return{forEachTool:this._forEachTool,activeTool:this.activeTool,setActiveTool:t=>{this.activeTool=t},view:this.view}}set activeTool(t){if(t!=null&&!this.view.ready)return void F.getLogger(this).error("Cannot set active tool while view is not ready.");if(t===this.activeTool)return;const r=this.activeTool;this._set("activeTool",t),r!=null&&r.deactivate(),t!=null&&t.activate(),this._removeIncompleteTools(t);for(const i of this.tools){this._updateToolEditableFlag(i);const s=E1(i);this.activeTool!=null&&s||this._manipulatorState.clearPointers(i,this._manipulatorStateEventArgs,!s)}this._updateCursor()}get updating(){return this._updatingHandles.updating||this.tools.some(t=>t.updating)}get interacting(){return this._interacting}_clearInteractingTimeout(){this._interactingTimeoutHandle=Ce(this._interactingTimeoutHandle)}_startInteractingTimeout(){this._clearInteractingTimeout(),this._interactingTimeoutHandle=this._clock.setTimeout(()=>this._interacting=!1,this._interactingTimeout)}attach(){var t;this.view.type==="3d"?this.addHandles([X(()=>{const{state:r}=this.view;return"camera"in r&&r.camera},()=>this._forEachManipulator(r=>r.onViewChange())),(t=this.view.elevationProvider)==null?void 0:t.on("elevation-change",r=>this._forEachManipulator(i=>i.onElevationChange(r)))],mS):this.addHandles(X(()=>this.view.extent,()=>this._forEachManipulator(r=>r.onViewChange())))}detach(){this.activeTool=null,this.tools.removeAll(),this.removeHandles(mS),this._clearInteractingTimeout(),this._interacting=!1}_forEachManipulator(t){this._forEachTool(r=>{r.manipulators&&r.manipulators.forEach(({manipulator:i})=>t(i,r))})}_handleInputEvent(t){let r=!1;const i={...t,stopPropagation:()=>{r=!0,t.stopPropagation()}};this.activeTool!=null?this.activeTool.handleInputEvent&&this.activeTool.handleInputEvent(i):this._forEachTool(s=>{!r&&s.visible&&s.handleInputEvent(i)}),!r&&t.type==="key-down"&&t.key==="Escape"&&this.activeTool&&(t.stopPropagation(),this.activeTool=null),this._manipulatorState.handleInputEvent(i,this._manipulatorStateEventArgs),r||this.activeTool==null||this.activeTool.handleInputEventAfter(i),this._manipulatorState.handleHoverEvent(i,this._forEachTool),this._updateCursor(),t.type==="pointer-move"&&(this._manipulatorState.hasFocusedManipulators()||this.activeTool)&&(this._interacting=!0,this._startInteractingTimeout())}_refreshToolWatchers(){this.removeHandles(py),this._forEachTool(t=>{if(t instanceof q){const r=X(()=>[t.cursor,t.visible,t.editable],()=>{E1(t)||this._manipulatorState.clearPointers(t,this._manipulatorStateEventArgs),this._updateCursor()});this.addHandles(r,py)}t.manipulators&&this.addHandles([t.manipulators.on("after-remove",r=>{this._manipulatorState.clearPointers(t,this._manipulatorStateEventArgs,!0,r.item.manipulator)}),t.manipulators.on("change",()=>{this._manipulatorState.updateHoveredStateFromKnownPointers(this._forEachTool),this._updateCursor()})],py)}),this._manipulatorState.updateHoveredStateFromKnownPointers(this._forEachTool),this._updateCursor()}_updateToolEditableFlag(t){var r;(r=t.setEditableFlag)==null||r.call(t,Fc.MANAGER,this.activeTool==null||t===this.activeTool)}_updateCursor(){let t=this._manipulatorState.cursor;t==null&&this._forEachTool(r=>!(r.cursor==null||!r.visible)&&(t=r.cursor,!0)),this._get("cursor")!==t&&this._set("cursor",t)}_removeIncompleteTools(t){this.tools.filter(r=>(t==null||r!==t)&&!r.created&&r.removeIncompleteOnCancel).forEach(r=>{this.tools.remove(r)})}get test(){}};c([d({constructOnly:!0,nonNullable:!0})],gi.prototype,"view",void 0),c([d({value:null})],gi.prototype,"activeTool",null),c([d({readOnly:!0,type:B})],gi.prototype,"tools",void 0),c([d({readOnly:!0})],gi.prototype,"cursor",void 0),c([d({readOnly:!0})],gi.prototype,"updating",null),c([d()],gi.prototype,"_interacting",void 0),c([d({readOnly:!0})],gi.prototype,"interacting",null),gi=c([S("esri.views.ToolViewManager")],gi);const GG=new ne("cyan"),zG=1,VG=.25,BG=new ne("black"),HG=.4,qG=.2,Uie=.25,RP="default",WG="temporary",ZG=new ne("yellow");var M1;let er=M1=class extends q{constructor(e){super(e),this.name=RP,this.color=GG.clone(),this.haloColor=null,this.haloOpacity=zG,this.fillOpacity=VG,this.shadowColor=BG.clone(),this.shadowOpacity=HG,this.shadowDifference=qG,this.haloWidth=2.1,this.haloBlur=.8/this.haloWidth}equals(e){return this.color.equals(e.color)&&(this.haloColor||this.color).equals(e.haloColor||e.color)&&this.haloOpacity===e.haloOpacity&&this.fillOpacity===e.fillOpacity&&this.haloWidth===e.haloWidth&&this.haloBlur===e.haloBlur&&this.shadowColor.equals(e.shadowColor)&&this.shadowOpacity===e.shadowOpacity&&this.shadowDifference===e.shadowDifference}clone(){var e,t;return new M1({...this,color:this.color.clone(),haloColor:(e=this.haloColor)==null?void 0:e.clone(),shadowColor:(t=this.shadowColor)==null?void 0:t.clone()})}assignFrom(e){var t;this.color=e.color.clone(),this.haloColor=(t=e.haloColor)==null?void 0:t.clone(),this.haloOpacity=e.haloOpacity,this.fillOpacity=e.fillOpacity,this.shadowColor=e.shadowColor.clone(),this.shadowDifference=e.shadowDifference,this.shadowOpacity=e.shadowOpacity,this.haloBlur=e.haloBlur,this.haloWidth=e.haloWidth}};c([d({type:String,constructOnly:!0,nonNullable:!0})],er.prototype,"name",void 0),c([d({type:ne,nonNullable:!0})],er.prototype,"color",void 0),c([d({type:ne})],er.prototype,"haloColor",void 0),c([d({nonNullable:!0})],er.prototype,"haloOpacity",void 0),c([d({nonNullable:!0})],er.prototype,"fillOpacity",void 0),c([d({type:ne,nonNullable:!0})],er.prototype,"shadowColor",void 0),c([d({nonNullable:!0})],er.prototype,"shadowOpacity",void 0),c([d({nonNullable:!0})],er.prototype,"shadowDifference",void 0),c([d({nonNullable:!0})],er.prototype,"haloWidth",void 0),c([d({nonNullable:!0})],er.prototype,"haloBlur",void 0),er=M1=c([S("esri.views.support.HighlightOptions")],er);const hn=er;function JG(){return new(B.ofType(hn))([new hn({name:RP}),new hn({name:WG,color:ZG})])}let ba=class extends q{constructor(t){super(),this.nativeIndex=null,this._detectedDeviceType="unknown",t.mapping==="standard"?this._detectedDeviceType="standard":YG.test(t.id)?this._detectedDeviceType="spacemouse":this._detectedDeviceType="unknown",this.nativeIndex=t.index}get native(){const t=navigator.getGamepads?navigator.getGamepads():[];return this.nativeIndex!=null&&this.nativeIndex<t.length?t[this.nativeIndex]:null}get deviceType(){return this._detectedDeviceType}get axisThreshold(){return KG[this.deviceType]}};c([d({nonNullable:!0,readOnly:!0})],ba.prototype,"nativeIndex",void 0),c([d({type:String,readOnly:!0})],ba.prototype,"deviceType",null),c([d({type:Number,readOnly:!0})],ba.prototype,"axisThreshold",null),ba=c([S("esri.views.input.gamepad.GamepadInputDevice")],ba);const Dv=ba,YG=new RegExp("^(3dconnexion|space(mouse|navigator|pilot|explorer))","i"),KG={standard:.15,spacemouse:.025,unknown:0};let ju=class extends q{constructor(...t){super(...t),this.devices=new B,this.enabledFocusMode="document"}};c([d({type:B.ofType(Dv),readOnly:!0})],ju.prototype,"devices",void 0),c([d({type:["document","view","none"]})],ju.prototype,"enabledFocusMode",void 0),ju=c([S("esri.views.input.gamepad.GamepadSettings")],ju);const XG=ju;let Xd=class extends q{constructor(){super(...arguments),this.gamepad=new XG}};c([d({readOnly:!0})],Xd.prototype,"gamepad",void 0),Xd=c([S("esri.views.input.Input")],Xd);const QG=Xd,kP=()=>me.respectPrefersReducedMotion&&window.matchMedia("(prefers-reduced-motion: reduce)").matches,fy=()=>d({type:["pan","rotate","zoom","none"],nonNullable:!0});let no=class extends q{constructor(t){super(t),this.dragPrimary="pan",this.dragSecondary="rotate",this.dragTertiary="zoom",this.mouseWheel="zoom"}};c([fy()],no.prototype,"dragPrimary",void 0),c([fy()],no.prototype,"dragSecondary",void 0),c([fy()],no.prototype,"dragTertiary",void 0),c([d({type:["zoom","none"],nonNullable:!0})],no.prototype,"mouseWheel",void 0),no=c([S("esri.views.navigation.NavigationActionMap")],no);const Fv=no;let Bs=class extends q{constructor(t){super(t),this.enabled=!0,this.device=null,this.mode="pan",this.tiltDirection="forward-down",this.velocityFactor=1}};c([d({type:Boolean,nonNullable:!0})],Bs.prototype,"enabled",void 0),c([d({type:Dv})],Bs.prototype,"device",void 0),c([d({type:["pan","zoom"],nonNullable:!0})],Bs.prototype,"mode",void 0),c([d({type:["forward-down","forward-up"],nonNullable:!0})],Bs.prototype,"tiltDirection",void 0),c([d({type:Number,nonNullable:!0})],Bs.prototype,"velocityFactor",void 0),Bs=c([S("esri.views.navigation.gamepad.GamepadSettings")],Bs);const NP=Bs;let Hs=class extends q{constructor(t){super(t),this.actionMap=new Fv,this.browserTouchPanEnabled=!0,this.gamepad=new NP,this.momentumEnabled=!0}get effectiveMomentumEnabled(){return this.momentumEnabled&&!kP()}get mouseWheelZoomEnabled(){return this.actionMap.mouseWheel==="zoom"}set mouseWheelZoomEnabled(t){LI(F.getLogger(this),"mouseWheelZoomEnabled",{replacement:"actionMap.mouseWheel",version:"4.32",warnOnce:!0}),this.actionMap.mouseWheel=t?"zoom":"none"}};c([d({type:Fv,nonNullable:!0})],Hs.prototype,"actionMap",void 0),c([d({type:Boolean})],Hs.prototype,"browserTouchPanEnabled",void 0),c([d({type:NP,nonNullable:!0})],Hs.prototype,"gamepad",void 0),c([d({type:Boolean})],Hs.prototype,"momentumEnabled",void 0),c([d({type:Boolean})],Hs.prototype,"mouseWheelZoomEnabled",null),Hs=c([S("esri.views.navigation.Navigation")],Hs);const dm=Hs;function qie(e,t,r){const i=LP(e),s=t,n=ez(i,s,r);if(i){const o=Xf.deriveUnitFromSR(i,e.spatialReference).heightUnit;if(!r&&o!==i.heightUnit){const a=new I("layerview:unmatched-height-unit",`The vertical units of the layer must match the horizontal units (${o})`,{horizontalUnit:o});return new I("layerview:unsupported-height-model-info","The vertical coordinate system of the layer is not supported",{heightModelInfo:i,error:a})}}if(!tz(e)||n===Ut.Unsupported)return new I("layerview:unsupported-height-model-info","The vertical coordinate system of the layer is not supported",{heightModelInfo:i});switch(n){case Ut.Units:{const o=(i==null?void 0:i.heightUnit)||"unknown",a=(s==null?void 0:s.heightUnit)||"unknown",l=new I("layerview:incompatible-height-unit",`The vertical units of the layer (${o}) must match the vertical units of the scene (${a})`,{layerUnit:o,sceneUnit:a});return new I("layerview:incompatible-height-model-info","The vertical coordinate system of the layer is incompatible with the scene",{layerHeightModelInfo:i,sceneHeightModelInfo:s,error:l})}case Ut.HeightModel:{const o=(i==null?void 0:i.heightModel)||"unknown",a=(s==null?void 0:s.heightModel)||"unknown",l=new I("layerview:incompatible-height-model",`The height model of the layer (${o}) must match the height model of the scene (${a})`,{layerHeightModel:o,sceneHeightModel:a});return new I("layerview:incompatible-height-model-info","The vertical coordinate system of the layer is incompatible with the scene",{layerHeightModelInfo:i,sceneHeightModelInfo:s,error:l})}case Ut.CRS:{const o=(i==null?void 0:i.vertCRS)||"unknown",a=(s==null?void 0:s.vertCRS)||"unknown",l=new I("layerview:incompatible-vertical-datum",`The vertical datum of the layer (${o}) must match the vertical datum of the scene (${a})`,{layerDatum:o,sceneDatum:a});return new I("layerview:incompatible-height-model-info","The vertical coordinate system of the layer is incompatible with the scene",{layerHeightModelInfo:i,sceneHeightModelInfo:s,error:l})}}return null}function ez(e,t,r){if(!yS(e)||!yS(t))return Ut.Unsupported;if(e==null||t==null)return Ut.Ok;if(!r&&e.heightUnit!==t.heightUnit)return Ut.Units;if(e.heightModel!==t.heightModel)return Ut.HeightModel;switch(e.heightModel){case"gravity-related-height":return Ut.Ok;case"ellipsoidal":return e.vertCRS===t.vertCRS?Ut.Ok:Ut.CRS;default:return Ut.Unsupported}}var Ut;function yS(e){return e==null||e.heightModel!=null&&e.heightUnit!=null}function tz(e){return"heightModelInfo"in e&&e.heightModelInfo!=null||e.spatialReference!=null||!UP(e)}function LP(e){var i;if(e.type==="integrated-mesh-3dtiles")return null;const t=e.url?E_(e.url):void 0;return!(((i=e.spatialReference)==null?void 0:i.vcsWkid)==null&&t!=null&&t.serverType==="ImageServer")&&DP(e)&&e.heightModelInfo?e.heightModelInfo:UP(e)?Xf.deriveUnitFromSR(iz,e.spatialReference):null}function DP(e){return"heightModelInfo"in e}function FP(e){if(e.type==="unknown"||!("capabilities"in e))return!1;switch(e.type){case"catalog":case"catalog-footprint":case"csv":case"feature":case"geojson":case"subtype-group":case"ogc-feature":case"oriented-imagery":case"wfs":case"knowledge-graph-sublayer":return!0;default:return!1}}function UP(e){return FP(e)?!!(e.capabilities&&e.capabilities.data&&e.capabilities.data.supportsZ):jP(e)}function rz(e){return e.layers!=null||jP(e)||FP(e)||DP(e)}function jP(e){switch(e.type){case"building-scene":case"elevation":case"integrated-mesh":case"integrated-mesh-3dtiles":case"point-cloud":case"scene":case"voxel":return!0;case"base-dynamic":case"base-elevation":case"base-tile":case"bing-maps":case"catalog":case"catalog-footprint":case"catalog-dynamic-group":case"csv":case"dimension":case"geojson":case"feature":case"subtype-group":case"geo-rss":case"graphics":case"group":case"imagery":case"imagery-tile":case"kml":case"knowledge-graph":case"link-chart":case"knowledge-graph-sublayer":case"line-of-sight":case"map-image":case"map-notes":case"media":case"ogc-feature":case"open-street-map":case"oriented-imagery":case"parquet":case"route":case"stream":case"tile":case"unknown":case"unsupported":case"vector-tile":case"video":case"viewshed":case"wcs":case"web-tile":case"wfs":case"wms":case"wmts":case null:return!1}return!1}(function(e){e[e.Ok=0]="Ok",e[e.Units=1]="Units",e[e.HeightModel=2]="HeightModel",e[e.CRS=3]="CRS",e[e.Unsupported=4]="Unsupported"})(Ut||(Ut={}));const iz=new Xf({heightModel:"gravity-related-height"});var Qp;(function(e){e[e.Global=1]="Global",e[e.Local=2]="Local"})(Qp||(Qp={}));let x1,my=null;async function sz(e){my||(my=N(()=>import("./geometryServiceUtils-DRH5OG4r.js"),__vite__mapDeps([258,259])).then(t=>x1=t)),await my,Ve(e)}async function GP(e,t,r,i){if(!e)return null;const s=e.spatialReference;return xn()||Ci(s,t)?Vo(e,t):x1?x1.projectGeometry(e,t,r,i):(await Promise.race([sz(i),Tn(i)]),GP(e,t,r,i))}let be=class extends q{constructor(t){super(t),this.required={extent:!1,heightModelInfo:!1,tileInfo:!1},this.defaultSpatialReference=null,this.userSpatialReference=null,this.sourcePreloadCount=10,this.priorityCollection=null,this.requiresExtentInSpatialReference=!0,this.suspended=!1,this._projectExtentTask={task:null,input:null,output:null,spatialReference:null}}destroy(){this._projectExtentTask.task&&(this._projectExtentTask.task=tl(this._projectExtentTask.task)),this._set("map",null)}get ready(){return!this._spatialReferenceTask.updating&&!this._tileInfoTask.updating&&!this._extentTask.updating}get heightModelInfoReady(){return!this._heightModelInfoTask.updating}get spatialReference(){return this.userSpatialReference??this._spatialReferenceTask.spatialReference}get extent(){return this._extentTask.extent}get heightModelInfo(){return this._heightModelInfoTask.heightModelInfo}get vcsWkid(){return this._heightModelInfoTask.vcsWkid}get latestVcsWkid(){return this._heightModelInfoTask.latestVcsWkid}get viewingMode(){return this.userSpatialReference==null||this.userSpatialReference.equals(this._spatialReferenceTask.spatialReference)?this._spatialReferenceTask.viewingMode:null}get tileInfo(){return this._tileInfoTask.tileInfo}get mapCollections(){var i,s,n,o;const t=(i=this.map)==null?void 0:i.call(this),r=[];return this.priorityCollection!=null&&r.push(this.priorityCollection),r.push({parent:t==null?void 0:t.basemap,layers:(s=t==null?void 0:t.basemap)==null?void 0:s.baseLayers},{layers:t==null?void 0:t.layers},{parent:t==null?void 0:t.ground,layers:(n=t==null?void 0:t.ground)==null?void 0:n.layers},{parent:t==null?void 0:t.basemap,layers:(o=t==null?void 0:t.basemap)==null?void 0:o.referenceLayers}),r}get _spatialReferenceTask(){if(this.suspended)return this._get("_spatialReferenceTask")??{updating:!1};let t;if(this._collectLayers(this.mapCollections,i=>{const s=this._getSupportedSpatialReferences(i);if(s.length>0){const n=this._narrowDownSpatialReferenceCandidates(t,s);n!=null&&(t=n)}return(t==null?void 0:t.length)===1})&&(t==null?void 0:t.length)!==1)return{updating:!0};const r=this._pickSpatialReferenceCandidate(t);return{spatialReference:(r==null?void 0:r.spatialReference)??null,viewingMode:(r==null?void 0:r.viewingMode)??null,updating:!1}}get _tileInfoTask(){var n,o;if(!this.required.tileInfo)return this._get("_tileInfoTask")??{updating:!1};const t=(n=this.map)==null?void 0:n.call(this),r=this.spatialReference;if(!r)return{updating:this._spatialReferenceTask.updating};let i;const s=this._collectLayers([{parent:t==null?void 0:t.basemap,layers:(o=t==null?void 0:t.basemap)==null?void 0:o.baseLayers},{layers:t==null?void 0:t.layers}],a=>{var l;return!(!("tileInfo"in a)||!((l=a.tileInfo)!=null&&l.spatialReference.equals(r)))&&(i=a,!0)},a=>"tileInfo"in a);return i?{tileInfo:i.tileInfo,updating:!1}:{updating:s}}get _heightModelInfoTask(){var i;if(!this.required.heightModelInfo||this.suspended&&((i=this._get("_heightModelInfoTask"))!=null&&i.heightModelInfo))return this._get("_heightModelInfoTask")??{updating:!1};let t={};const r=this._collectLayers(this.mapCollections,s=>{var o,a;const n=LP(s);return!!n&&(t={heightModelInfo:n,vcsWkid:(o=s.spatialReference)==null?void 0:o.vcsWkid,latestVcsWkid:(a=s.spatialReference)==null?void 0:a.latestVcsWkid},!0)},s=>rz(s));return{...t,updating:r}}get _extentCandidatesTask(){if(this.suspended||!this.required.extent)return this._get("_extentCandidatesTask")??{updating:!1};if(!this.spatialReference)return{updating:this._spatialReferenceTask.updating};const t=[],r=this._collectLayers(this.mapCollections,i=>{const s="fullExtents"in i&&i.fullExtents||(i.fullExtent!=null?[i.fullExtent]:[]),n=this.requiresExtentInSpatialReference?null:s[0],o=s.find(a=>a.spatialReference.equals(this.spatialReference))??n;if(o)return t.push({extent:o,layer:i}),!0;if(this._getSupportedSpatialReferences(i).length>0)for(const a of s)t.push({extent:a,layer:i});return!1});return{candidates:t,updating:r}}get _extentTask(){const{candidates:t,updating:r}=this._extentCandidatesTask;if(r)return{updating:r};if(t==null||t.length===0)return{updating:!1};if(!this.spatialReference)return{updating:this._spatialReferenceTask.updating};const i=this._pickExtentCandidate(t),s=this.spatialReference;return i.extent.equals(this._projectExtentTask.input)&&s.equals(this._projectExtentTask.spatialReference)?{extent:this._projectExtentTask.output,updating:this._projectExtentTask.task!=null&&!this._projectExtentTask.task.finished}:(this._projectExtentTask.task!=null&&(this._projectExtentTask.task=tl(this._projectExtentTask.task)),this._projectExtentTask={input:i.extent.clone(),output:null,spatialReference:s.clone(),task:If(async n=>{try{const o=await GP(i.extent,s,"portalItem"in i.layer?i.layer.portalItem:void 0,n);this._projectExtentTask={...this._projectExtentTask,task:null,output:o}}catch{if(lr(n))return;this._projectExtentTask={...this._projectExtentTask,task:null}}})},{updating:!0})}_narrowDownSpatialReferenceCandidates(t,r){if(t==null)return r;const i=new Array;for(const s of t)for(const n of r){if(!s.spatialReference.equals(n.spatialReference))continue;const o=oz(s.viewingMode,n.viewingMode);if(o!==!1){i.push({spatialReference:s.spatialReference,viewingMode:o});break}}return i.length>0?i:null}_pickSpatialReferenceCandidate(t){const r=this.defaultSpatialReference;return t==null||t.length<1?r?{spatialReference:r,viewingMode:null}:null:(r!=null&&t.length>1&&t.some(({spatialReference:i})=>i.equals(r))&&(t=t.filter(({spatialReference:i})=>i.equals(r))),t.length>1&&t.some(({viewingMode:i})=>i!==Qp.Local)&&(t=t.filter(({viewingMode:i})=>i!==Qp.Local)),t[0])}_getSupportedSpatialReferences(t){const r="supportedSpatialReferences"in t&&t.supportedSpatialReferences||(t.spatialReference?[t.spatialReference]:[]);if(r.length===0)return[];const i=[];for(const s of r){const n=this.getSpatialReferenceSupport(s,t);if(n!=null){const o=n.constraints??[{spatialReference:s,viewingMode:null}];for(const{spatialReference:a,viewingMode:l}of o)this.requiresExtentInSpatialReference&&this.userSpatialReference!=null&&!a.equals(this.userSpatialReference)||i.push({spatialReference:a,viewingMode:l})}}return i}_pickExtentCandidate(t){const r=this.spatialReference;return t.find(({extent:i})=>r.equals(i.spatialReference))||t[0]}_collectLayers(t,r,i=()=>!0){var n;switch(this._loadMaybe((n=this.map)==null?void 0:n.call(this))){case"loading":return!0;case"failed":return!1}const s=new nz(i,r);for(const o of t)if(this._collectCollection(o,s),s.done||s.preloading===this.sourcePreloadCount)break;return s.updating}_collectCollection(t,r){if(t.layers){switch(this._loadMaybe(t.parent)){case"loading":return r.updating=!0,void++r.preloading;case"failed":return}for(const i of t.layers)if(r.layerFilter(i)){switch(this._loadMaybe(i)){case"failed":continue;case"loading":r.updating=!0,++r.preloading;break;case"loaded":if(r.updating||(r.done=r.pushLayer(i)),r.done||r.preloading===this.sourcePreloadCount)break;"layers"in i&&this._collectCollection({layers:i.layers},r)}if(r.done||r.preloading===this.sourcePreloadCount)break}}}_loadMaybe(t){return t&&"loadStatus"in t&&t.loadStatus!=null?t.loadStatus==="not-loaded"?(t.load().catch(r=>{Ht(r)}),"loading"):t.loadStatus:"loaded"}};c([d()],be.prototype,"required",void 0),c([d({constructOnly:!0})],be.prototype,"map",void 0),c([d({constructOnly:!0})],be.prototype,"getSpatialReferenceSupport",void 0),c([d()],be.prototype,"defaultSpatialReference",void 0),c([d()],be.prototype,"userSpatialReference",void 0),c([d()],be.prototype,"sourcePreloadCount",void 0),c([d()],be.prototype,"priorityCollection",void 0),c([d()],be.prototype,"requiresExtentInSpatialReference",void 0),c([d()],be.prototype,"suspended",void 0),c([d({readOnly:!0})],be.prototype,"ready",null),c([d({readOnly:!0})],be.prototype,"heightModelInfoReady",null),c([d({readOnly:!0})],be.prototype,"spatialReference",null),c([d({readOnly:!0})],be.prototype,"extent",null),c([d({readOnly:!0})],be.prototype,"heightModelInfo",null),c([d({readOnly:!0})],be.prototype,"vcsWkid",null),c([d({readOnly:!0})],be.prototype,"latestVcsWkid",null),c([d({readOnly:!0})],be.prototype,"viewingMode",null),c([d({readOnly:!0})],be.prototype,"tileInfo",null),c([d({readOnly:!0})],be.prototype,"mapCollections",null),c([d({readOnly:!0})],be.prototype,"_spatialReferenceTask",null),c([d({readOnly:!0})],be.prototype,"_tileInfoTask",null),c([d({readOnly:!0})],be.prototype,"_heightModelInfoTask",null),c([d({readOnly:!0})],be.prototype,"_extentCandidatesTask",null),c([d()],be.prototype,"_extentTask",null),c([d()],be.prototype,"_projectExtentTask",void 0),be=c([S("esri.views.support.DefaultsFromMap")],be);let nz=class{constructor(t,r){this.layerFilter=t,this.pushLayer=r,this.preloading=-1,this.updating=!1,this.done=!1}};function oz(e,t){return e!=null?t!=null?e===t&&e:e:t}let Sa=class extends q{constructor(t){super(t),this.featureTitleFields=!1,this.utilityNetworkFields=!1,this.globalIdField=!1}};c([d()],Sa.prototype,"featureTitleFields",void 0),c([d()],Sa.prototype,"utilityNetworkFields",void 0),c([d()],Sa.prototype,"globalIdField",void 0),Sa=c([S("esri.views.support.RequiredFieldsOptions")],Sa);const az=Sa;var Gu;let U=Gu=class extends xi.EventedMixin(Cf.EsriPromiseMixin(q)){constructor(e){super(e),this._userSpatialReference=null,this._cursor=null,this.handles=new wl,this.updatingHandles=new $o,this.allLayerViews=new Ac({getCollections:()=>{var t,r,i;return[(t=this.basemapView)==null?void 0:t.baseLayerViews,(r=this.groundView)==null?void 0:r.layerViews,this.layerViews,(i=this.basemapView)==null?void 0:i.referenceLayerViews]},getChildrenFunction:uz}),this.groundView=null,this.basemapView=null,this.displayFilterEnabled=!0,this.fatalError=null,this.graphics=new pc,this.analyses=new Zp,this.typeSpecificPreconditionsReady=!0,this.layerViews=new B,this.magnifier=new bP,this.padding={left:0,top:0,right:0,bottom:0},this.ready=!1,this._readyStateWaitingTask=null,this.supportsGround=!0,this.type=null,this.scale=null,this.updating=!1,this.initialExtentRequired=!0,this.input=new QG,this.navigation=new dm,this.layerViewManager=null,this.analysisViewManager=null,this.isHeightModelInfoRequired=!1,this.width=null,this.height=null,this.resizing=!1,this.suspended=!1,this.viewEvents=new PP(this),this.persistableViewModels=new B,this.requiredFieldsOptions=new az,this._isValid=!1,this._readyCycleForced=!1,this._lockedSpatialReference=null,this._userTimeZone=null,this._lockedTimeZone=null,this._userTimeExtent=null,this._lockedTimeExtent=null,this.theme=null,this.handles.add(X(()=>this.preconditionsReady,t=>{var i,s;const r=this.ready;if(t?(this._lockedSpatialReference=this.spatialReference,this._lockedTimeZone=this.timeZone,this._lockedTimeExtent=this.timeExtent,Gu.views.add(this)):(this._lockedSpatialReference=null,Gu.views.remove(this)),this.notifyChange("spatialReference"),!t&&r)(i=this.toolViewManager)==null||i.detach(),this.analysisViewManager!=null&&this.analysisViewManager.detach(),(s=this.layerViewManager)==null||s.clear(),this._teardown();else if(t&&!r){try{this._startup()}catch(n){return void queueMicrotask(()=>{this.fatalError=new I("startup-error",null,n)})}this.analysisViewManager!=null&&this.analysisViewManager.attach(),this.toolViewManager.attach()}},wn))}initialize(){this.addResolvingPromise(Promise.all([this.loadAsyncDependencies(),this.validate()]).then(()=>(this._isValid=!0,J_(()=>this.ready)))),this.basemapView=new rG({view:this}),this.layerViewManager=new oG({view:this,layerViewImporter:{importLayerView:e=>this.importLayerView(e),hasLayerViewModule:e=>this.hasLayerViewModule(e)},supportsGround:this.supportsGround}),this.toolViewManager=new gi({view:this}),this.selectionManager=new SG({view:this}),this.addHandles([Or(()=>this.readyState==="map-content-error"&&!this.spatialReference,()=>{F.getLogger(this).warn("#spatialReference","no spatial reference could be derived from the currently added map layers")}),X(()=>this.initialExtentRequired,e=>this.defaultsFromMap.required={...this.defaultsFromMap.required,extent:e},jt),X(()=>this.ready,e=>{this.defaultsFromMap&&(this.defaultsFromMap.suspended=e,this.defaultsFromMap.userSpatialReference=e?this.spatialReference:this._userSpatialReference)},wn),X(()=>this._userSpatialReference,e=>{this.defaultsFromMap&&(this.defaultsFromMap.userSpatialReference=e)},jt)])}destroy(){var e,t;this.destroyed||(Gu.views.remove(this),this.viewEvents.destroy(),this.allLayerViews.destroy(),this.navigation&&(this.navigation.destroy(),this._set("navigation",null)),this.graphics=ke(this.graphics),this.analyses=ke(this.analyses),this.defaultsFromMap.destroy(),this._set("defaultsFromMap",null),ke(this.analysisViewManager),this.toolViewManager=ke(this.toolViewManager),this.layerViewManager=ke(this.layerViewManager),this.selectionManager=ke(this.selectionManager),this.basemapView=ke(this.basemapView),(e=this.groundView)==null||e.destroy(),(t=this.layerViews)==null||t.forEach(r=>r.destroy()),this.layerViews.length=0,this.invalidate(),this._emitter.clear(),this.handles.destroy(),this.map=ke(this.map),this.updatingHandles.destroy())}_startup(){this._set("ready",!0)}_teardown(){this._set("ready",!1)}whenReady(){return Promise.resolve(this)}toMap(){return F.getLogger(this).error("#toMap()","Not implemented on this instance of View"),null}get activeTool(){var e;return(e=this.toolViewManager)==null?void 0:e.activeTool}set activeTool(e){this.toolViewManager&&(this.toolViewManager.activeTool=e)}get animation(){return this._get("animation")}set animation(e){this._set("animation",e)}get center(){return null}get defaultsFromMapSettings(){return{}}get defaultsFromMap(){return new be({required:{tileInfo:!1,heightModelInfo:!1,extent:!1},map:()=>this.map,getSpatialReferenceSupport:(e,t)=>this.getSpatialReferenceSupport(e,t),...this.defaultsFromMapSettings})}get extent(){return this._get("extent")}set extent(e){this._set("extent",e)}get heightModelInfo(){return this.getDefaultHeightModelInfo()}get highlights(){return this._get("highlights")??JG()}set highlights(e){this._set("highlights",ms(e,this._get("highlights"),B.ofType(hn)))}get interacting(){return this.navigating}get navigating(){return!1}get preconditionsReady(){var e;return!(this.fatalError||!this._isValid||this._readyCycleForced||!this.map||mn.isLoadable(this.map)&&!this.map.loaded||this.width===0||this.height===0||!this.spatialReference||!this._validateSpatialReference(this.spatialReference)||!this._lockedSpatialReference&&!((e=this.defaultsFromMap)!=null&&e.ready)||!this.typeSpecificPreconditionsReady)}get resolution(){return 0}set map(e){e!==this._get("map")&&(e!=null&&e.destroyed&&(F.getLogger(this).warn("#map","The provided map is already destroyed",{map:e}),e=null),mn.isLoadable(e)&&e.load().catch(()=>{}),this.constructed&&!this.destroyed&&(this.forceReadyCycle(),this._lockedSpatialReference=null),this._set("map",e))}get readyState(){var e,t,r,i;if(this.destroyed)return this._get("readyState");if(!this.map)return"missing-map";if("container"in this&&!this.container)return"missing-container";if(this.fatalError)return"rendering-error";if((((e=this.defaultsFromMap)==null?void 0:e.ready)??!1)&&!this.spatialReference){const s=!("loaded"in this.map)||this.map.loaded,n=this.map.ground.loaded,o=((t=this.map.basemap)==null?void 0:t.loaded)??!0;return s&&o&&n&&!((r=this.map)!=null&&r.allLayers.length)?"empty-map":(this._readyStateWaitingTask||(this._readyStateWaitingTask=If(a=>W$(A("view-readyState-waiting-delay"),null,a)),this.addHandles(this._readyStateWaitingTask),this.addHandles(this._readyStateWaitingTask,"ready-state-task")),(i=this._readyStateWaitingTask)!=null&&i.finished?"map-content-error":"loading")}return this._readyStateWaitingTask=tl(this._readyStateWaitingTask),this.removeHandles("ready-state-task"),this.ready?"ready":"loading"}get spatialReference(){var t,r;const e=this._userSpatialReference||this._lockedSpatialReference||this.getDefaultSpatialReference()||null;if(e&&((r=(t=this.defaultsFromMap)==null?void 0:t.required)!=null&&r.heightModelInfo)){const i=e.clone();return i.vcsWkid=this.defaultsFromMap.vcsWkid,i.latestVcsWkid=this.defaultsFromMap.latestVcsWkid,i}return e}set spatialReference(e){const t=!ut(e,this._get("spatialReference"));this._set("_userSpatialReference",e),t&&(this._set("spatialReference",e),this._spatialReferenceChanged(e))}_spatialReferenceChanged(e){}get stationary(){return!this.animation&&!this.navigating&&!this.resizing}get timeExtent(){return this._userTimeExtent??this._lockedTimeExtent??this.getDefaultTimeExtent()??null}set timeExtent(e){this._userTimeExtent=e}get timeZone(){return this._userTimeZone??this._lockedTimeZone??this.getDefaultTimeZone()??Pi}set timeZone(e){this._userTimeZone=e,TD(e)||F.getLogger(this).warn("#timeZone",`the parsed value '${e}' may not be a valid IANA time zone`)}get tools(){var e;return(e=this.toolViewManager)==null?void 0:e.tools}get initialExtent(){var e;return(e=this.defaultsFromMap)==null?void 0:e.extent}get cursor(){var e;return((e=this.toolViewManager)==null?void 0:e.cursor)??this._cursor??"default"}set cursor(e){this._cursor=e,this.notifyChange("cursor")}get size(){return[this.width,this.height]}get effectiveTheme(){return this.theme??new $1}whenLayerView(e){var t;return((t=this.layerViewManager)==null?void 0:t.whenLayerView(e))??Promise.reject()}getDefaultSpatialReference(){var e;return(e=this.defaultsFromMap)==null?void 0:e.spatialReference}getDefaultHeightModelInfo(){var e;return(this.map&&"heightModelInfo"in this.map?this.map.heightModelInfo:void 0)??((e=this.defaultsFromMap)==null?void 0:e.heightModelInfo)??null}getDefaultTimeZone(){return null}getDefaultTimeExtent(){return null}importLayerView(e){throw new I("importLayerView() not implemented")}hasLayerViewModule(e){return!1}async validate(){}async loadAsyncDependencies(){}invalidate(){this._isValid=!1}getSpatialReferenceSupport(){return{constraints:null}}_validateSpatialReference(e){return this.getSpatialReferenceSupport(e)!=null}when(e,t){return this.isResolved()&&!this.ready&&F.getLogger(this).warn("#when()","Calling view.when() while the view is no longer ready but was already resolved once will resolve immediately. Use reactiveUtils.whenOnce(() => view.ready).then(...) instead."),super.when(e,t)}forceReadyCycle(){this.ready&&(Or(()=>this.destroyed||this.preconditionsReady===!1,()=>this._readyCycleForced=!1,{once:!0}),this._readyCycleForced=!0)}addAndActivateTool(e){this.toolViewManager.tools.add(e),this.activeTool=e}tryFatalErrorRecovery(){this.fatalError=null}};U.views=new B,c([d()],U.prototype,"_userSpatialReference",void 0),c([d()],U.prototype,"activeTool",null),c([d({readOnly:!0})],U.prototype,"allLayerViews",void 0),c([d()],U.prototype,"groundView",void 0),c([d()],U.prototype,"animation",null),c([d()],U.prototype,"basemapView",void 0),c([d()],U.prototype,"center",null),c([d()],U.prototype,"defaultsFromMapSettings",null),c([d()],U.prototype,"defaultsFromMap",null),c([d()],U.prototype,"displayFilterEnabled",void 0),c([d()],U.prototype,"fatalError",void 0),c([d({type:Le})],U.prototype,"extent",null),c([d(B2(pc,"graphics"))],U.prototype,"graphics",void 0),c([d(B2(Zp,"analyses"))],U.prototype,"analyses",void 0),c([d({readOnly:!0,type:Xf})],U.prototype,"heightModelInfo",null),c([d({type:B.ofType(hn)})],U.prototype,"highlights",null),c([d({readOnly:!0})],U.prototype,"interacting",null),c([d({readOnly:!0})],U.prototype,"navigating",null),c([d({readOnly:!0,dependsOn:["fatalError","_isValid","_readyCycleForced","map","map.loaded?","width","height","spatialReference","_lockedSpatialReference","defaultsFromMap.ready","typeSpecificPreconditionsReady"]})],U.prototype,"preconditionsReady",null),c([d({readOnly:!0})],U.prototype,"typeSpecificPreconditionsReady",void 0),c([d({type:B,readOnly:!0})],U.prototype,"layerViews",void 0),c([d()],U.prototype,"resolution",null),c([d({type:bP})],U.prototype,"magnifier",void 0),c([d({value:null,type:lx})],U.prototype,"map",null),c([d()],U.prototype,"padding",void 0),c([d({readOnly:!0})],U.prototype,"ready",void 0),c([d()],U.prototype,"_readyStateWaitingTask",void 0),c([d({readOnly:!0})],U.prototype,"readyState",null),c([d({type:ae})],U.prototype,"spatialReference",null),c([d()],U.prototype,"stationary",null),c([d({readOnly:!0})],U.prototype,"supportsGround",void 0),c([d({type:ev})],U.prototype,"timeExtent",null),c([d({type:String,nonNullable:!0})],U.prototype,"timeZone",null),c([d()],U.prototype,"tools",null),c([d()],U.prototype,"toolViewManager",void 0),c([d({readOnly:!0})],U.prototype,"type",void 0),c([d({type:Number})],U.prototype,"scale",void 0),c([d({readOnly:!0})],U.prototype,"updating",void 0),c([d({readOnly:!0})],U.prototype,"initialExtentRequired",void 0),c([d({readOnly:!0})],U.prototype,"initialExtent",null),c([d()],U.prototype,"cursor",null),c([d({readOnly:!0})],U.prototype,"input",void 0),c([d({type:dm,nonNullable:!0})],U.prototype,"navigation",void 0),c([d()],U.prototype,"layerViewManager",void 0),c([d()],U.prototype,"analysisViewManager",void 0),c([d()],U.prototype,"selectionManager",void 0),c([d()],U.prototype,"width",void 0),c([d()],U.prototype,"height",void 0),c([d({readOnly:!0})],U.prototype,"resizing",void 0),c([d({value:null,readOnly:!0})],U.prototype,"size",null),c([d({readOnly:!0})],U.prototype,"suspended",void 0),c([d({readOnly:!0})],U.prototype,"viewEvents",void 0),c([d({readOnly:!0})],U.prototype,"persistableViewModels",void 0),c([d()],U.prototype,"_isValid",void 0),c([d()],U.prototype,"_readyCycleForced",void 0),c([d()],U.prototype,"_lockedSpatialReference",void 0),c([d()],U.prototype,"_userTimeZone",void 0),c([d()],U.prototype,"_lockedTimeZone",void 0),c([d()],U.prototype,"_userTimeExtent",void 0),c([d()],U.prototype,"_lockedTimeExtent",void 0),c([d({type:$1})],U.prototype,"theme",void 0),c([d({readOnly:!0,type:$1})],U.prototype,"effectiveTheme",null),U=Gu=c([S("esri.views.View")],U);const yy=globalThis.$arcgis;yy&&!yy.views&&Object.defineProperty(yy,"views",{configurable:!1,enumerable:!0,writable:!1,value:U.views});const lz=U;function uz(e){return e.layerViews}function Ka(e,t){return e[0]=t[0],e[1]=t[1],e}function ot(e,t,r){return e[0]=t,e[1]=r,e}function zP(e,t,r){return e[0]=t[0]+r[0],e[1]=t[1]+r[1],e}function Uc(e,t,r){return e[0]=t[0]-r[0],e[1]=t[1]-r[1],e}function VP(e,t,r){return e[0]=t[0]*r[0],e[1]=t[1]*r[1],e}function BP(e,t,r){return e[0]=t[0]/r[0],e[1]=t[1]/r[1],e}function cz(e,t){return e[0]=Math.ceil(t[0]),e[1]=Math.ceil(t[1]),e}function hz(e,t){return e[0]=Math.floor(t[0]),e[1]=Math.floor(t[1]),e}function dz(e,t,r){return e[0]=Math.min(t[0],r[0]),e[1]=Math.min(t[1],r[1]),e}function pz(e,t,r){return e[0]=Math.max(t[0],r[0]),e[1]=Math.max(t[1],r[1]),e}function fz(e,t){return e[0]=Math.round(t[0]),e[1]=Math.round(t[1]),e}function mh(e,t,r){return e[0]=t[0]*r,e[1]=t[1]*r,e}function mz(e,t,r,i){return e[0]=t[0]+r[0]*i,e[1]=t[1]+r[1]*i,e}function pm(e,t){const r=t[0]-e[0],i=t[1]-e[1];return Math.sqrt(r*r+i*i)}function ef(e,t){const r=t[0]-e[0],i=t[1]-e[1];return r*r+i*i}function tf(e){const t=e[0],r=e[1];return Math.sqrt(t*t+r*r)}function HP(e){const t=e[0],r=e[1];return t*t+r*r}function qP(e,t){return e[0]=-t[0],e[1]=-t[1],e}function yz(e,t){return e[0]=1/t[0],e[1]=1/t[1],e}function A1(e,t){const r=t[0],i=t[1];let s=r*r+i*i;return s>0&&(s=1/Math.sqrt(s),e[0]=t[0]*s,e[1]=t[1]*s),e}function WP(e,t){return e[0]*t[0]+e[1]*t[1]}function ZP(e,t,r){const i=t[0]*r[1]-t[1]*r[0];return e[0]=e[1]=0,e[2]=i,e}function gz(e,t,r,i){const s=t[0],n=t[1];return e[0]=s+i*(r[0]-s),e[1]=n+i*(r[1]-n),e}function _z(e,t=1){const r=2*X_()*Math.PI;return e[0]=Math.cos(r)*t,e[1]=Math.sin(r)*t,e}function vz(e,t,r){const i=t[0],s=t[1];return e[0]=r[0]*i+r[2]*s,e[1]=r[1]*i+r[3]*s,e}function Si(e,t,r){const i=t[0],s=t[1];return e[0]=r[0]*i+r[2]*s+r[4],e[1]=r[1]*i+r[3]*s+r[5],e}function wz(e,t,r){const i=t[0],s=t[1];return e[0]=r[0]*i+r[3]*s+r[6],e[1]=r[1]*i+r[4]*s+r[7],e}function bz(e,t,r){const i=t[0],s=t[1];return e[0]=r[0]*i+r[4]*s+r[12],e[1]=r[1]*i+r[5]*s+r[13],e}function Sz(e,t,r,i){const s=t[0]-r[0],n=t[1]-r[1],o=Math.sin(i),a=Math.cos(i);return e[0]=s*a-n*o+r[0],e[1]=s*o+n*a+r[1],e}function Tz(e,t){const r=e[0],i=e[1],s=t[0],n=t[1];let o=r*r+i*i;o>0&&(o=1/Math.sqrt(o));let a=s*s+n*n;a>0&&(a=1/Math.sqrt(a));const l=(r*s+i*n)*o*a;return l>1?0:l<-1?Math.PI:Math.acos(l)}function $z(e){return"vec2("+e[0]+", "+e[1]+")"}function Ez(e,t){return e[0]===t[0]&&e[1]===t[1]}function Mz(e,t){const r=e[0],i=e[1],s=t[0],n=t[1],o=Bt();return Math.abs(r-s)<=o*Math.max(1,Math.abs(r),Math.abs(s))&&Math.abs(i-n)<=o*Math.max(1,Math.abs(i),Math.abs(n))}function xz(e,t,r,i,s){let n=t[0]-r[0],o=t[1]-r[1];const a=(i[0]*n+i[1]*o)*(s-1);return n=i[0]*a,o=i[1]*a,e[0]=t[0]+n,e[1]=t[1]+o,e}const Az=tf,Uv=Uc,Pz=VP,Oz=BP,Cz=pm,Iz=ef,Rz=HP;Object.freeze(Object.defineProperty({__proto__:null,add:zP,angle:Tz,ceil:cz,copy:Ka,cross:ZP,dist:Cz,distance:pm,div:Oz,divide:BP,dot:WP,equals:Mz,exactEquals:Ez,floor:hz,inverse:yz,len:Az,length:tf,lerp:gz,max:pz,min:dz,mul:Pz,multiply:VP,negate:qP,normalize:A1,projectAndScale:xz,random:_z,rotate:Sz,round:fz,scale:mh,scaleAndAdd:mz,set:ot,sqrDist:Iz,sqrLen:Rz,squaredDistance:ef,squaredLength:HP,str:$z,sub:Uv,subtract:Uc,transformMat2:vz,transformMat2d:Si,transformMat3:wz,transformMat4:bz},Symbol.toStringTag,{value:"Module"}));function Ne(){return[0,0]}function kz(e){return[e[0],e[1]]}function yh(e,t){return[e,t]}function Nz(e,t){return[e,t]}function Lz(e,t=Ne()){const r=Math.min(2,e.length);for(let i=0;i<r;++i)t[i]=e[i];return t}function Dz(e,t){return new Float64Array(e,t,2)}function JP(){return Ne()}function YP(){return yh(1,1)}function KP(){return yh(1,0)}function XP(){return yh(0,1)}const Fz=JP(),Uz=YP(),jz=KP(),Gz=XP();Object.freeze(Object.defineProperty({__proto__:null,ONES:Uz,UNIT_X:jz,UNIT_Y:Gz,ZEROS:Fz,clone:kz,create:Ne,createView:Dz,freeze:Nz,fromArray:Lz,fromValues:yh,ones:YP,unitX:KP,unitY:XP,zeros:JP},Symbol.toStringTag,{value:"Module"}));function zz(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e}function Vz(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e[4]=0,e[5]=0,e}function Bz(e,t,r,i,s,n,o){return e[0]=t,e[1]=r,e[2]=i,e[3]=s,e[4]=n,e[5]=o,e}function jv(e,t){const r=t[0],i=t[1],s=t[2],n=t[3],o=t[4],a=t[5];let l=r*n-i*s;return l?(l=1/l,e[0]=n*l,e[1]=-i*l,e[2]=-s*l,e[3]=r*l,e[4]=(s*a-n*o)*l,e[5]=(i*o-r*a)*l,e):null}function Hz(e){return e[0]*e[3]-e[1]*e[2]}function QP(e,t,r){const i=t[0],s=t[1],n=t[2],o=t[3],a=t[4],l=t[5],h=r[0],p=r[1],f=r[2],m=r[3],y=r[4],_=r[5];return e[0]=i*h+n*p,e[1]=s*h+o*p,e[2]=i*f+n*m,e[3]=s*f+o*m,e[4]=i*y+n*_+a,e[5]=s*y+o*_+l,e}function fm(e,t,r){const i=t[0],s=t[1],n=t[2],o=t[3],a=t[4],l=t[5],h=Math.sin(r),p=Math.cos(r);return e[0]=i*p+n*h,e[1]=s*p+o*h,e[2]=i*-h+n*p,e[3]=s*-h+o*p,e[4]=a,e[5]=l,e}function Gv(e,t,r){const i=t[0],s=t[1],n=t[2],o=t[3],a=t[4],l=t[5],h=r[0],p=r[1];return e[0]=i*h,e[1]=s*h,e[2]=n*p,e[3]=o*p,e[4]=a,e[5]=l,e}function jc(e,t,r){const i=t[0],s=t[1],n=t[2],o=t[3],a=t[4],l=t[5],h=r[0],p=r[1];return e[0]=i,e[1]=s,e[2]=n,e[3]=o,e[4]=i*h+n*p+a,e[5]=s*h+o*p+l,e}function eO(e,t){const r=Math.sin(t),i=Math.cos(t);return e[0]=i,e[1]=r,e[2]=-r,e[3]=i,e[4]=0,e[5]=0,e}function tO(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=t[1],e[4]=0,e[5]=0,e}function zv(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e[4]=t[0],e[5]=t[1],e}function qz(e){return"mat2d("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+")"}function Wz(e){return Math.sqrt(e[0]**2+e[1]**2+e[2]**2+e[3]**2+e[4]**2+e[5]**2+1)}function Zz(e,t,r){return e[0]=t[0]+r[0],e[1]=t[1]+r[1],e[2]=t[2]+r[2],e[3]=t[3]+r[3],e[4]=t[4]+r[4],e[5]=t[5]+r[5],e}function rO(e,t,r){return e[0]=t[0]-r[0],e[1]=t[1]-r[1],e[2]=t[2]-r[2],e[3]=t[3]-r[3],e[4]=t[4]-r[4],e[5]=t[5]-r[5],e}function Jz(e,t,r){return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r,e[4]=t[4]*r,e[5]=t[5]*r,e}function Yz(e,t,r,i){return e[0]=t[0]+r[0]*i,e[1]=t[1]+r[1]*i,e[2]=t[2]+r[2]*i,e[3]=t[3]+r[3]*i,e[4]=t[4]+r[4]*i,e[5]=t[5]+r[5]*i,e}function Kz(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]}function Xz(e,t){const r=e[0],i=e[1],s=e[2],n=e[3],o=e[4],a=e[5],l=t[0],h=t[1],p=t[2],f=t[3],m=t[4],y=t[5],_=Bt();return Math.abs(r-l)<=_*Math.max(1,Math.abs(r),Math.abs(l))&&Math.abs(i-h)<=_*Math.max(1,Math.abs(i),Math.abs(h))&&Math.abs(s-p)<=_*Math.max(1,Math.abs(s),Math.abs(p))&&Math.abs(n-f)<=_*Math.max(1,Math.abs(n),Math.abs(f))&&Math.abs(o-m)<=_*Math.max(1,Math.abs(o),Math.abs(m))&&Math.abs(a-y)<=_*Math.max(1,Math.abs(a),Math.abs(y))}const Qz=QP,eV=rO;Object.freeze(Object.defineProperty({__proto__:null,add:Zz,copy:zz,determinant:Hz,equals:Xz,exactEquals:Kz,frob:Wz,fromRotation:eO,fromScaling:tO,fromTranslation:zv,identity:Vz,invert:jv,mul:Qz,multiply:QP,multiplyScalar:Jz,multiplyScalarAndAdd:Yz,rotate:fm,scale:Gv,set:Bz,str:qz,sub:eV,subtract:rO,translate:jc},Symbol.toStringTag,{value:"Module"}));function hs(){return[1,0,0,1,0,0]}function tV(e){return[e[0],e[1],e[2],e[3],e[4],e[5]]}function rV(e,t,r,i,s,n){return[e,t,r,i,s,n]}function iV(e,t){return new Float64Array(e,t,6)}const sV=hs();Object.freeze(Object.defineProperty({__proto__:null,IDENTITY:sV,clone:tV,create:hs,createView:iV,fromValues:rV},Symbol.toStringTag,{value:"Module"}));const Jh={102100:{maxX:20037508342788905e-9,minX:-20037508342788905e-9,plus180Line:new Xr({paths:[[[20037508342788905e-9,-20037508342788905e-9],[20037508342788905e-9,20037508342788905e-9]]],spatialReference:ae.WebMercator}),minus180Line:new Xr({paths:[[[-20037508342788905e-9,-20037508342788905e-9],[-20037508342788905e-9,20037508342788905e-9]]],spatialReference:ae.WebMercator})},4326:{maxX:180,minX:-180,plus180Line:new Xr({paths:[[[180,-180],[180,180]]],spatialReference:ae.WGS84}),minus180Line:new Xr({paths:[[[-180,-180],[-180,180]]],spatialReference:ae.WGS84})}};function vo(e,t){return Math.ceil((e-t)/(2*t))}function iO(e,t){const r=fc(e);for(const i of r)for(const s of i)s[0]+=t;return e}function fc(e){return av(e)?e.rings:e.paths}function Yie(e,t){return t?{...t,query:{...e??{},...t.query}}:{query:e}}function nV(e){return typeof e=="string"?kt(e):C(e)}function oV(e,t,r){const i={};for(const s in e){if(s==="declaredClass")continue;const n=e[s];if(n!=null&&typeof n!="function")if(Array.isArray(n))i[s]=n.map(o=>oV(o));else if(typeof n=="object")if(n.toJSON){const o=n.toJSON(r==null?void 0:r[s]);i[s]=t?o:JSON.stringify(o)}else i[s]=t?n:JSON.stringify(n);else i[s]=n}return i}async function aV(e,t,r,i){const s=nV(e),n=t[0].spatialReference,o={...i,responseType:"json",query:{...s.query,f:"json",sr:s3(n),target:JSON.stringify({geometryType:lv(t[0]),geometries:t}),cutter:JSON.stringify(r)}},a=await qe(s.path+"/cut",o),{cutIndexes:l,geometries:h=[]}=a.data;return{cutIndexes:l,geometries:h.map(p=>{const f=pl(p);return f.spatialReference=n,f})}}function lV(e){return{geometryType:lv(e[0]),geometries:e.map(t=>t.toJSON())}}function uV(e,t,r){const i=a9(t);return e.map(s=>{const n=i.fromJSON(s);return n.spatialReference=r,n})}async function cV(e,t,r){const i=typeof e=="string"?kt(e):e,s=t[0].spatialReference,n=lv(t[0]),o={...r,query:{...i.query,f:"json",sr:s3(s),geometries:JSON.stringify(lV(t))}},{data:a}=await qe(i.path+"/simplify",o);return uV(a.geometries,n,s)}const sO=()=>F.getLogger("esri.geometry.support.normalizeUtils");function hV(e){return e.type==="polygon"}function dV(e){return e[0].type==="polygon"}function pV(e){return e[0].type==="polyline"}function gS(e){const t=[];let r=0,i=0;for(let s=0;s<e.length;s++){const n=e[s];let o=null;for(let a=0;a<n.length;a++)o=n[a],t.push(o),a===0?(r=o[0],i=r):(r=Math.min(r,o[0]),i=Math.max(i,o[0]));o&&t.push([(r+i)/2,0])}return t}function fV(e,t){if(!(e instanceof Xr||e instanceof Oi)){const s="straightLineDensify: the input geometry is neither polyline nor polygon";throw sO().error(s),new I(s)}const r=fc(e),i=[];for(const s of r){const n=[];i.push(n),n.push([s[0][0],s[0][1]]);for(let o=0;o<s.length-1;o++){const a=s[o][0],l=s[o][1],h=s[o+1][0],p=s[o+1][1],f=Math.sqrt((h-a)*(h-a)+(p-l)*(p-l)),m=(p-l)/f,y=(h-a)/f,_=f/t;if(_>1){for(let M=1;M<=_-1;M++){const $=M*t,E=y*$+a,P=m*$+l;n.push([E,P])}const v=(f+Math.floor(_-1)*t)/2,w=y*v+a,b=m*v+l;n.push([w,b])}n.push([h,p])}}return hV(e)?new Oi({rings:i,spatialReference:e.spatialReference}):new Xr({paths:i,spatialReference:e.spatialReference})}function _S(e,t,r){if(t){const i=fV(e,1e6);e=su(i,!0)}return r&&(e=iO(e,r)),e}function vS(e,t,r){if(Array.isArray(e)){const i=e[0];if(i>t){const s=vo(i,t);e[0]=i+s*(-2*t)}else if(i<r){const s=vo(i,r);e[0]=i+s*(-2*r)}}else{const i=e.x;if(i>t){const s=vo(i,t);e=e.clone().offset(s*(-2*t),0)}else if(i<r){const s=vo(i,r);e=e.clone().offset(s*(-2*r),0)}}return e}function mV(e,t){let r=-1;for(let i=0;i<t.cutIndexes.length;i++){const s=t.cutIndexes[i],n=t.geometries[i],o=fc(n);for(let a=0;a<o.length;a++){const l=o[a];l.some(h=>{if(h[0]<180)return!0;{let p=0;for(let m=0;m<l.length;m++){const y=l[m][0];p=y>p?y:p}p=Number(p.toFixed(9));const f=-360*vo(p,180);for(let m=0;m<l.length;m++){const y=n.getPoint(a,m);n.setPoint(a,m,y.clone().offset(f,0))}return!0}})}if(s===r){if(dV(e))for(const a of fc(n))e[s]=e[s].addRing(a);else if(pV(e))for(const a of fc(n))e[s]=e[s].addPath(a)}else r=s,e[s]=n}return e}async function yV(e,t,r){if(!Array.isArray(e))return yV([e],t);t&&typeof t!="string"&&sO().warn("normalizeCentralMeridian()","The url object is deprecated, use the url string instead");const i=typeof t=="string"?t:(t==null?void 0:t.url)??me.geometryServiceUrl;let s,n,o,a,l,h,p,f,m=0;const y=[],_=[];for(const E of e)if(E!=null)if(s||(s=E.spatialReference,n=It(s),o=s.isWebMercator,h=o?102100:4326,a=Jh[h].maxX,l=Jh[h].minX,p=Jh[h].plus180Line,f=Jh[h].minus180Line),n)if(E.type==="mesh")_.push(E);else if(E.type==="point")_.push(vS(E.clone(),a,l));else if(E.type==="multipoint"){const P=E.clone();P.points=P.points.map(O=>vS(O,a,l)),_.push(P)}else if(E.type==="extent"){const P=E.clone()._normalize(!1,!1,n);_.push(P.rings?new Oi(P):P)}else if(E.extent){const P=E.extent,O=vo(P.xmin,l)*(2*a);let L=O===0?E.clone():iO(E.clone(),O);P.offset(O,0);let{xmin:k,xmax:G}=P;k=Number(k.toFixed(9)),G=Number(G.toFixed(9)),P.intersects(p)&&G!==a?(m=G>m?G:m,L=_S(L,o),y.push(L),_.push("cut")):P.intersects(f)&&k!==l?(m=G*(2*a)>m?G*(2*a):m,L=_S(L,o,360),y.push(L),_.push("cut")):_.push(L)}else _.push(E.clone());else _.push(E);else _.push(E);let v=vo(m,a),w=-90;const b=v,M=new Xr;for(;v>0;){const E=360*v-180;M.addPath([[E,w],[E,-1*w]]),w*=-1,v--}if(y.length>0&&b>0){const E=mV(y,await aV(i,y,M,r)),P=[],O=[];for(let G=0;G<_.length;G++){const V=_[G];if(V!=="cut")O.push(V);else{const Y=E.shift(),re=e[G];re!=null&&re.type==="polygon"&&re.rings&&re.rings.length>1&&Y.rings.length>=re.rings.length?(P.push(Y),O.push("simplify")):O.push(o?So(Y):Y)}}if(!P.length)return O;const L=await cV(i,P,r),k=[];for(let G=0;G<O.length;G++){const V=O[G];V!=="simplify"?k.push(V):k.push(o?So(L.shift()):L.shift())}return k}const $=[];for(let E=0;E<_.length;E++){const P=_[E];if(P!=="cut")$.push(P);else{const O=y.shift();$.push(o===!0?So(O):O)}}return $}function gV(e){if(!e)return null;const t=e.extent;if(!t)return null;const r=e.spatialReference&&It(e.spatialReference);if(!r)return t;const[i,s]=r.valid,n=2*s,{width:o}=t;let a,{xmin:l,xmax:h}=t;if([l,h]=[h,l],e.type==="extent"||o===0||o<=s||o>n||l<i||h>s)return t;switch(e.type){case"polygon":if(!(e.rings.length>1))return t;a=gS(e.rings);break;case"polyline":if(!(e.paths.length>1))return t;a=gS(e.paths);break;case"multipoint":a=e.points}const p=t.clone();for(let f=0;f<a.length;f++){let m=a[f][0];m<0?(m+=s,h=Math.max(m,h)):(m-=s,l=Math.min(m,l))}return p.xmin=l,p.xmax=h,p.width<o?(p.xmin-=s,p.xmax-=s,p):t}function Vv(e,t,r){const i=It(r);if(i==null)return e;const[s,n]=i.valid,o=2*n;let a=0,l=0;t>n?a=Math.ceil(Math.abs(t-n)/o):t<s&&(a=-Math.ceil(Math.abs(t-s)/o)),e>n?l=Math.ceil(Math.abs(e-n)/o):e<s&&(l=-Math.ceil(Math.abs(e-s)/o));let h=e+(a-l)*o;const p=h-t;return p>n?h-=o:p<s&&(h+=o),h}function Kie(e,t){const r=It(t);if(r){const[i,s]=r.valid,n=s-i;if(e<i)for(;e<i;)e+=n;if(e>s)for(;e>s;)e-=n}return e}const nO=96,oO=39.37,_V=180/Math.PI;function aO(e){return e.wkid?e:e.spatialReference||ae.WGS84}function Bv(e,t){return t.type?ot(e,t.x,t.y):Ka(e,t)}function lO(e){return ki(e)}function mm(e,t,r=0){let i=e.width,s=e.height;if(r!==0){const a=Bf(r),l=Math.abs(Math.cos(a)),h=Math.abs(Math.sin(a));i=e.width*l+e.height*h,s=e.width*h+e.height*l}const n=Math.max(1,t[0]),o=Math.max(1,t[1]);return Math.max(i/n,s/o)*MV(e.spatialReference)}async function zu(e,t,r,i){var a,l,h;let s,n;if(!e||Array.isArray(e)&&!e.length)return null;if(B.isCollection(e)&&(e=e.toArray()),Array.isArray(e)&&e.length&&typeof e[0]=="object"){const p=e.every(y=>"attributes"in y),f=e.some(y=>!y.geometry);let m=e;if(p&&f&&t&&t.allLayerViews){const y=new Map;for(const b of e){const M=b.layer,$=y.get(M)||[],E=b.attributes[M.objectIdField];E!=null&&$.push(E),y.set(M,$)}const _=[];y.forEach((b,M)=>{var E;const $=(E=t.allLayerViews)==null?void 0:E.find(P=>P.layer.id===M.id);if($&&"queryFeatures"in $){const P=M.createQuery();P.objectIds=b,P.returnGeometry=!0,_.push($.queryFeatures(P))}});const v=await Promise.all(_),w=[];for(const b of v)if(b&&b.features&&b.features.length)for(const M of b.features)M.geometry!=null&&w.push(M.geometry);m=w}for(const y of m)i=await zu(y,t,r,i);return i}if(Array.isArray(e)&&e.length===2&&typeof e[0]=="number"&&typeof e[1]=="number")s=new te(e);else if(e instanceof ys)s=e;else if("geometry"in e){if(e.geometry)s=e.geometry;else if(e.layer){const p=e.layer,f=(a=t.allLayerViews)==null?void 0:a.find(m=>m.layer.id===p.id);if(f&&"queryFeatures"in f){const m=p.createQuery();m.objectIds=[e.attributes[p.objectIdField]],m.returnGeometry=!0;const y=await f.queryFeatures(m);s=(h=(l=y==null?void 0:y.features)==null?void 0:l[0])==null?void 0:h.geometry}}}if(s==null)return null;switch(s.type){case"point":n=new Le({xmin:s.x,ymin:s.y,xmax:s.x,ymax:s.y,spatialReference:s.spatialReference});break;case"extent":case"multipoint":case"polygon":case"polyline":n=gV(s);break;default:n=s.extent}if(!n)return null;xn()||Ci(n.spatialReference,r)||await Tn();const o=Vo(n,r);if(!o)return null;if(i){const p=o.center,f=p.clone();f.x=Vv(p.x,i.center.x,r),f.x!==p.x&&o.centerAt(f),i=i.union(o)}else i=o;return i}function vV(e){var t;if(e&&(!Array.isArray(e)||typeof e[0]!="number")&&(typeof e=="object"||Array.isArray(e)&&typeof e[0]=="object")){if("layer"in e&&((t=e.layer)==null?void 0:t.minScale)!=null&&e.layer.maxScale!=null){const r=e.layer;return{min:r.minScale,max:r.maxScale}}if(Array.isArray(e)&&e.length&&e.every(r=>"layer"in r)){let r=0,i=0;for(const s of e){const n=s.layer;n!=null&&n.minScale&&n.maxScale&&(r=n.minScale<r?n.minScale:r,i=n.maxScale>i?n.maxScale:i)}return r&&i?{min:r,max:i}:null}}}function wS(e,t){const r=aO(e);return ut(r,t)||r.imageCoordinateSystem||t.imageCoordinateSystem?e:Vo(e,t)}async function wV(e,t){var w;if(!e||!t)return new Ar({targetGeometry:new te,scale:0,rotation:0});let r=t.spatialReference;const{constraints:i,padding:s,viewpoint:n,size:o}=t,a=[s?o[0]-s.left-s.right:o[0],s?o[1]-s.top-s.bottom:o[1]];let l=null;e instanceof Ar?l=e:e.viewpoint?l=e.viewpoint:e.target&&e.target.declaredClass==="esri.Viewpoint"&&(l=e.target);let h=null;l!=null&&l.targetGeometry?h=l.targetGeometry:e instanceof Le?h=e:e instanceof ys?h=await zu(e,t,r):e&&(h=await zu(e.center,t,r)||await zu(e.target,t,r)||await zu(e,t,r)),!h&&(n!=null&&n.targetGeometry)?h=n.targetGeometry:!h&&t.extent&&(h=t.extent),r||(r=aO(t.spatialReference||t.extent||h)),xn()||ut(h.spatialReference,r)||Ci(h.spatialReference,r)||await Tn();const p=wS(h,r),f="center"in p?p.center:p;t.pickClosestTarget!==!1&&f.type==="point"&&((w=n.targetGeometry)==null?void 0:w.type)==="point"&&(f.x=Vv(f.x,n.targetGeometry.x,f.spatialReference));let m=0;l?m=l.rotation:e.hasOwnProperty("rotation")?m=e.rotation:n&&(m=n.rotation);let y=0;y=(l==null?void 0:l.targetGeometry)!=null&&l.targetGeometry.type==="point"?l.scale:"scale"in e&&e.scale?e.scale:"zoom"in e&&e.zoom!==-1&&i&&i.effectiveLODs?i.zoomToScale(e.zoom):Array.isArray(h)||h.type==="point"||h.type==="extent"&&h.width===0&&h.height===0?n.scale:mm(wS(h.extent,r),a,m);const _=vV(e.target??e);_&&(_.min&&_.min<y?y=_.min:_.max&&_.max>y&&(y=_.max));let v=new Ar({targetGeometry:f,scale:y,rotation:m});return i&&(v=i.fit(v),i.constrainByGeometry(v),i.rotationEnabled||(v.rotation=n.rotation)),v}function bt(e,t){const r=e.targetGeometry,i=t.targetGeometry;return r.x=i.x,r.y=i.y,r.spatialReference=i.spatialReference,e.scale=t.scale,e.rotation=t.rotation,e}function bV(e,t,r){return r?ot(e,.5*(t[0]-r.right+r.left),.5*(t[1]-r.bottom+r.top)):mh(e,t,.5)}const SV=function(){const e=Ne();return function(t,r,i){const s=r.targetGeometry;Bv(e,s);const n=.5*Ol(r);return t.xmin=e[0]-n*i[0],t.ymin=e[1]-n*i[1],t.xmax=e[0]+n*i[0],t.ymax=e[1]+n*i[1],t.spatialReference=s.spatialReference,t}}();function TV(e,t,r,i,s){var n;return P1(e,t,r.center),e.scale=mm(r,i),(n=s==null?void 0:s.constraints)==null||n.constrain(e),e}function $V(e,t,r,i){return Wv(e,t,r,i),jv(e,e)}const uO=function(){const e=Ne();return function(t,r,i){return Uv(t,xV(t,r),bV(e,r,i))}}(),EV=function(){const e=hs(),t=Ne();return function(r,i,s,n){const o=Ol(i),a=Hv(i);return ot(t,o,o),tO(e,t),fm(e,e,a),jc(e,e,uO(t,s,n)),jc(e,e,[0,n.top-n.bottom]),ot(r,e[4],e[5])}}();function Ol(e){var t;return e.scale*cO((t=e.targetGeometry)==null?void 0:t.spatialReference)}function cO(e){return ir(e)?1/(lO(e)*oO*nO):1}function Hv(e){return Q_(e.rotation)||0}function MV(e){return ir(e)?lO(e)*oO*nO:1}function xV(e,t){return mh(e,t,.5)}const qv=function(){const e=Ne(),t=Ne(),r=Ne();return function(i,s,n,o,a,l){return qP(e,s),mh(t,n,.5*l),ot(r,1/o*l,-1/o*l),zv(i,t),a&&fm(i,i,a),Gv(i,i,r),jc(i,i,e),i}}(),Wv=function(){const e=Ne();return function(t,r,i,s){const n=Ol(r),o=Hv(r);return Bv(e,r.targetGeometry),qv(t,e,i,n,o,s)}}(),AV=function(){const e=Ne();return function(t,r,i,s){const n=Ol(r);return Bv(e,r.targetGeometry),qv(t,e,i,n,0,s)}}();function hO(e){const t=It(e);return t?t.valid[1]-t.valid[0]:0}function PV(e,t){return Math.round(hO(e)/t)}const OV=function(){const e=Ne(),t=Ne(),r=[0,0,0];return function(i,s,n){Uc(e,i,s),A1(e,e),Uc(t,i,n),A1(t,t),ZP(r,e,t);let o=Math.acos(WP(e,t)/(tf(e)*tf(t)))*_V;return r[2]<0&&(o=-o),isNaN(o)&&(o=0),o}}(),CV=function(){const e=Ne();return function(t,r,i,s){const n=t.targetGeometry;return bt(t,r),EV(e,r,i,s),n.x+=e[0],n.y+=e[1],t}}(),P1=function(e,t,r){bt(e,t);const i=e.targetGeometry;return i.x=r.x,i.y=r.y,i.spatialReference=r.spatialReference,e},IV=function(){const e=Ne();return function(t,r,i,s,n){n||(n="center"),Uv(e,i,s),mh(e,e,.5);const o=e[0],a=e[1];switch(n){case"center":ot(e,0,0);break;case"left":ot(e,-o,0);break;case"top":ot(e,0,a);break;case"right":ot(e,o,0);break;case"bottom":ot(e,0,-a);break;case"top-left":ot(e,-o,a);break;case"bottom-left":ot(e,-o,-a);break;case"top-right":ot(e,o,a);break;case"bottom-right":ot(e,o,-a)}return ym(t,r,e),t}}();function Xie(e,t,r){return bt(e,t),e.rotation+=r,e}function RV(e,t,r){return bt(e,t),e.rotation=r,e}const kV=function(){const e=Ne();return function(t,r,i,s,n){return bt(t,r),isNaN(i)||i===0||(pO(e,s,r,n),t.scale=r.scale*i,fO(e,e,t,n),ym(t,t,ot(e,e[0]-s[0],s[1]-e[1]))),t}}();function bS(e,t,r){return bt(e,t),e.scale=r,e}const dO=function(){const e=Ne();return function(t,r,i,s,n,o){return bt(t,r),isNaN(i)||i===0||(pO(e,n,r,o),t.scale=r.scale*i,t.rotation+=s,fO(e,e,t,o),ym(t,t,ot(e,e[0]-n[0],n[1]-e[1]))),t}}(),Qie=function(){const e=Ne(),t=Ne();return function(r,i,s,n,o,a,l){return uO(t,a,l),zP(e,o,t),n?dO(r,i,s,n,e,a):kV(r,i,s,e,a)}}(),pO=function(){const e=hs();return function(t,r,i,s){return Si(t,r,$V(e,i,s,1))}}(),fO=function(){const e=hs();return function(t,r,i,s){return Si(t,r,Wv(e,i,s,1))}}(),ym=function(){const e=Ne(),t=hs();return function(r,i,s){bt(r,i);const n=Ol(i),o=r.targetGeometry;return eO(t,Hv(i)),Gv(t,t,yh(n,n)),Si(e,s,t),o.x+=e[0],o.y+=e[1],r}}();function mO(){const e=new Float32Array(6);return e[0]=1,e[3]=1,e}function NV(e){const t=new Float32Array(6);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t}function LV(e,t,r,i,s,n){const o=new Float32Array(6);return o[0]=e,o[1]=t,o[2]=r,o[3]=i,o[4]=s,o[5]=n,o}function DV(e,t){return new Float32Array(e,t,6)}function yO(e,t,r,i){const s=t[i],n=t[i+1];e[i]=r[0]*s+r[2]*n+r[4],e[i+1]=r[1]*s+r[3]*n+r[5]}function FV(e,t,r,i=0,s=0,n=2){const o=s||t.length/n;for(let a=i;a<o;a++)yO(e,t,r,a*n)}Object.freeze(Object.defineProperty({__proto__:null,clone:NV,create:mO,createView:DV,fromValues:LV,transform:yO,transformMany:FV},Symbol.toStringTag,{value:"Module"}));function UV(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[4],e[4]=t[5],e[5]=t[6],e[6]=t[8],e[7]=t[9],e[8]=t[10],e}function jV(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e}function gO(e,t,r,i,s,n,o,a,l,h){return e[0]=t,e[1]=r,e[2]=i,e[3]=s,e[4]=n,e[5]=o,e[6]=a,e[7]=l,e[8]=h,e}function _O(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e}function GV(e,t){if(e===t){const r=t[1],i=t[2],s=t[5];e[1]=t[3],e[2]=t[6],e[3]=r,e[5]=t[7],e[6]=i,e[7]=s}else e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8];return e}function zV(e,t){const r=t[0],i=t[1],s=t[2],n=t[3],o=t[4],a=t[5],l=t[6],h=t[7],p=t[8],f=p*o-a*h,m=-p*n+a*l,y=h*n-o*l;let _=r*f+i*m+s*y;return _?(_=1/_,e[0]=f*_,e[1]=(-p*i+s*h)*_,e[2]=(a*i-s*o)*_,e[3]=m*_,e[4]=(p*r-s*l)*_,e[5]=(-a*r+s*n)*_,e[6]=y*_,e[7]=(-h*r+i*l)*_,e[8]=(o*r-i*n)*_,e):null}function VV(e,t){const r=t[0],i=t[1],s=t[2],n=t[3],o=t[4],a=t[5],l=t[6],h=t[7],p=t[8];return e[0]=o*p-a*h,e[1]=s*h-i*p,e[2]=i*a-s*o,e[3]=a*l-n*p,e[4]=r*p-s*l,e[5]=s*n-r*a,e[6]=n*h-o*l,e[7]=i*l-r*h,e[8]=r*o-i*n,e}function BV(e){const t=e[0],r=e[1],i=e[2],s=e[3],n=e[4],o=e[5],a=e[6],l=e[7],h=e[8];return t*(h*n-o*l)+r*(-h*s+o*a)+i*(l*s-n*a)}function Zv(e,t,r){const i=t[0],s=t[1],n=t[2],o=t[3],a=t[4],l=t[5],h=t[6],p=t[7],f=t[8],m=r[0],y=r[1],_=r[2],v=r[3],w=r[4],b=r[5],M=r[6],$=r[7],E=r[8];return e[0]=m*i+y*o+_*h,e[1]=m*s+y*a+_*p,e[2]=m*n+y*l+_*f,e[3]=v*i+w*o+b*h,e[4]=v*s+w*a+b*p,e[5]=v*n+w*l+b*f,e[6]=M*i+$*o+E*h,e[7]=M*s+$*a+E*p,e[8]=M*n+$*l+E*f,e}function O1(e,t,r){const i=t[0],s=t[1],n=t[2],o=t[3],a=t[4],l=t[5],h=t[6],p=t[7],f=t[8],m=r[0],y=r[1];return e[0]=i,e[1]=s,e[2]=n,e[3]=o,e[4]=a,e[5]=l,e[6]=m*i+y*o+h,e[7]=m*s+y*a+p,e[8]=m*n+y*l+f,e}function vO(e,t,r){const i=t[0],s=t[1],n=t[2],o=t[3],a=t[4],l=t[5],h=t[6],p=t[7],f=t[8],m=Math.sin(r),y=Math.cos(r);return e[0]=y*i+m*o,e[1]=y*s+m*a,e[2]=y*n+m*l,e[3]=y*o-m*i,e[4]=y*a-m*s,e[5]=y*l-m*n,e[6]=h,e[7]=p,e[8]=f,e}function HV(e,t,r){const i=r[0],s=r[1],n=r[2];return e[0]=i*t[0],e[1]=i*t[1],e[2]=i*t[2],e[3]=s*t[3],e[4]=s*t[4],e[5]=s*t[5],e[6]=n*t[6],e[7]=n*t[7],e[8]=n*t[8],e}function qV(e,t,r){const i=r[0],s=r[1];return e[0]=i*t[0],e[1]=i*t[1],e[2]=i*t[2],e[3]=s*t[3],e[4]=s*t[4],e[5]=s*t[5],e}function WV(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=t[0],e[7]=t[1],e[8]=1,e}function ZV(e,t){const r=Math.sin(t),i=Math.cos(t);return e[0]=i,e[1]=r,e[2]=0,e[3]=-r,e[4]=i,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e}function JV(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=0,e[4]=t[1],e[5]=0,e[6]=0,e[7]=0,e[8]=1,e}function YV(e,t){return e[0]=t[0],e[1]=t[1],e[2]=0,e[3]=t[2],e[4]=t[3],e[5]=0,e[6]=t[4],e[7]=t[5],e[8]=1,e}function KV(e,t){const r=t[0],i=t[1],s=t[2],n=t[3],o=r+r,a=i+i,l=s+s,h=r*o,p=i*o,f=i*a,m=s*o,y=s*a,_=s*l,v=n*o,w=n*a,b=n*l;return e[0]=1-f-_,e[3]=p-b,e[6]=m+w,e[1]=p+b,e[4]=1-h-_,e[7]=y-v,e[2]=m-w,e[5]=y+v,e[8]=1-h-f,e}function XV(e,t){const r=t[0],i=t[1],s=t[2],n=t[4],o=t[5],a=t[6],l=t[8],h=t[9],p=t[10],f=p*o-a*h,m=-p*n+a*l,y=h*n-o*l,_=r*f+i*m+s*y;if(!_)return null;const v=1/_;return e[0]=f*v,e[1]=(-p*i+s*h)*v,e[2]=(a*i-s*o)*v,e[3]=m*v,e[4]=(p*r-s*l)*v,e[5]=(-a*r+s*n)*v,e[6]=y*v,e[7]=(-h*r+i*l)*v,e[8]=(o*r-i*n)*v,e}function QV(e,t){const r=t[0],i=t[1],s=t[2],n=t[3],o=t[4],a=t[5],l=t[6],h=t[7],p=t[8],f=t[9],m=t[10],y=t[11],_=t[12],v=t[13],w=t[14],b=t[15],M=r*a-i*o,$=r*l-s*o,E=r*h-n*o,P=i*l-s*a,O=i*h-n*a,L=s*h-n*l,k=p*v-f*_,G=p*w-m*_,V=p*b-y*_,Y=f*w-m*v,re=f*b-y*v,ve=m*b-y*w;let K=M*ve-$*re+E*Y+P*V-O*G+L*k;return K?(K=1/K,e[0]=(a*ve-l*re+h*Y)*K,e[1]=(l*V-o*ve-h*G)*K,e[2]=(o*re-a*V+h*k)*K,e[3]=(s*re-i*ve-n*Y)*K,e[4]=(r*ve-s*V+n*G)*K,e[5]=(i*V-r*re-n*k)*K,e[6]=(v*L-w*O+b*P)*K,e[7]=(w*E-_*L-b*$)*K,e[8]=(_*O-v*E+b*M)*K,e):null}function eB(e,t,r){return e[0]=2/t,e[1]=0,e[2]=0,e[3]=0,e[4]=-2/r,e[5]=0,e[6]=-1,e[7]=1,e[8]=1,e}function tB(e){return"mat3("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+", "+e[8]+")"}function rB(e){return Math.sqrt(e[0]**2+e[1]**2+e[2]**2+e[3]**2+e[4]**2+e[5]**2+e[6]**2+e[7]**2+e[8]**2)}function iB(e,t,r){return e[0]=t[0]+r[0],e[1]=t[1]+r[1],e[2]=t[2]+r[2],e[3]=t[3]+r[3],e[4]=t[4]+r[4],e[5]=t[5]+r[5],e[6]=t[6]+r[6],e[7]=t[7]+r[7],e[8]=t[8]+r[8],e}function wO(e,t,r){return e[0]=t[0]-r[0],e[1]=t[1]-r[1],e[2]=t[2]-r[2],e[3]=t[3]-r[3],e[4]=t[4]-r[4],e[5]=t[5]-r[5],e[6]=t[6]-r[6],e[7]=t[7]-r[7],e[8]=t[8]-r[8],e}function sB(e,t,r){return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r,e[4]=t[4]*r,e[5]=t[5]*r,e[6]=t[6]*r,e[7]=t[7]*r,e[8]=t[8]*r,e}function nB(e,t,r,i){return e[0]=t[0]+r[0]*i,e[1]=t[1]+r[1]*i,e[2]=t[2]+r[2]*i,e[3]=t[3]+r[3]*i,e[4]=t[4]+r[4]*i,e[5]=t[5]+r[5]*i,e[6]=t[6]+r[6]*i,e[7]=t[7]+r[7]*i,e[8]=t[8]+r[8]*i,e}function oB(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]&&e[6]===t[6]&&e[7]===t[7]&&e[8]===t[8]}function aB(e,t){const r=e[0],i=e[1],s=e[2],n=e[3],o=e[4],a=e[5],l=e[6],h=e[7],p=e[8],f=t[0],m=t[1],y=t[2],_=t[3],v=t[4],w=t[5],b=t[6],M=t[7],$=t[8],E=Bt();return Math.abs(r-f)<=E*Math.max(1,Math.abs(r),Math.abs(f))&&Math.abs(i-m)<=E*Math.max(1,Math.abs(i),Math.abs(m))&&Math.abs(s-y)<=E*Math.max(1,Math.abs(s),Math.abs(y))&&Math.abs(n-_)<=E*Math.max(1,Math.abs(n),Math.abs(_))&&Math.abs(o-v)<=E*Math.max(1,Math.abs(o),Math.abs(v))&&Math.abs(a-w)<=E*Math.max(1,Math.abs(a),Math.abs(w))&&Math.abs(l-b)<=E*Math.max(1,Math.abs(l),Math.abs(b))&&Math.abs(h-M)<=E*Math.max(1,Math.abs(h),Math.abs(M))&&Math.abs(p-$)<=E*Math.max(1,Math.abs(p),Math.abs($))}function lB(e){const t=Bt(),r=e[0],i=e[1],s=e[2],n=e[3],o=e[4],a=e[5],l=e[6],h=e[7],p=e[8];return Math.abs(1-(r*r+n*n+l*l))<=t&&Math.abs(1-(i*i+o*o+h*h))<=t&&Math.abs(1-(s*s+a*a+p*p))<=t}const uB=Zv,cB=wO;Object.freeze(Object.defineProperty({__proto__:null,add:iB,adjoint:VV,copy:jV,determinant:BV,equals:aB,exactEquals:oB,frob:rB,fromMat2d:YV,fromMat4:UV,fromQuat:KV,fromRotation:ZV,fromScaling:JV,fromTranslation:WV,identity:_O,invert:zV,isOrthoNormal:lB,mul:uB,multiply:Zv,multiplyScalar:sB,multiplyScalarAndAdd:nB,normalFromMat4:QV,normalFromMat4Legacy:XV,projection:eB,rotate:vO,scale:HV,scaleByVec2:qV,set:gO,str:tB,sub:cB,subtract:wO,translate:O1,transpose:GV},Symbol.toStringTag,{value:"Module"}));function Qd(){const e=new Float32Array(9);return e[0]=1,e[4]=1,e[8]=1,e}function hB(e){const t=new Float32Array(9);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t}function dB(e,t,r,i,s,n,o,a,l){const h=new Float32Array(9);return h[0]=e,h[1]=t,h[2]=r,h[3]=i,h[4]=s,h[5]=n,h[6]=o,h[7]=a,h[8]=l,h}function pB(e,t){return new Float32Array(e,t,9)}Object.freeze(Object.defineProperty({__proto__:null,clone:hB,create:Qd,createView:pB,fromValues:dB},Symbol.toStringTag,{value:"Module"}));function bO(){return new Float32Array(2)}function fB(e){const t=new Float32Array(2);return t[0]=e[0],t[1]=e[1],t}function gl(e,t){const r=new Float32Array(2);return r[0]=e,r[1]=t,r}function mB(e,t){return new Float32Array(e,t,2)}function SO(){return bO()}function TO(){return gl(1,1)}function $O(){return gl(1,0)}function EO(){return gl(0,1)}const yB=SO(),gB=TO(),_B=$O(),vB=EO();Object.freeze(Object.defineProperty({__proto__:null,ONES:gB,UNIT_X:_B,UNIT_Y:vB,ZEROS:yB,clone:fB,create:bO,createView:mB,fromValues:gl,ones:TO,unitX:$O,unitY:EO,zeros:SO},Symbol.toStringTag,{value:"Module"}));function wB(e){return e instanceof Float32Array&&e.length>=2}function bB(e){return Array.isArray(e)&&e.length>=2}function gy(e){return wB(e)||bB(e)}var C1;const Fi=[0,0];let Xi=C1=class extends j{constructor(e){super(e),this._viewpoint2D={center:Ne(),rotation:0,scale:0,spatialReference:void 0},this.center=[0,0],this.extent=new Le,this.id=0,this.inverseTransform=hs(),this.resolution=0,this.rotation=0,this.scale=0,this.transform=hs(),this.transformNoRotation=hs(),this.displayMat3=Qd(),this.displayViewMat3=Qd(),this.viewMat3=Qd(),this.viewMat2d=mO(),this.worldScreenWidth=0,this.size=[0,0]}set pixelRatio(e){this._set("pixelRatio",e),this._update()}set size(e){this._set("size",e),this._update()}set viewpoint(e){if(e){const t=this._viewpoint2D,r=e.targetGeometry;t.center[0]=r.x,t.center[1]=r.y,t.rotation=e.rotation,t.scale=e.scale,t.spatialReference=r.spatialReference}this._update()}get visibleArea(){const[e,t]=this.size;return[this.toMap([0,0],0,0),this.toMap([0,0],0,t),this.toMap([0,0],e,t),this.toMap([0,0],e,0)]}copy(e){const t=this.size,r=this.viewpoint;return r&&t?(this.viewpoint=bt(r,e.viewpoint),this._set("size",Ka(t,e.size))):(this.viewpoint=e.viewpoint.clone(),this._set("size",[e.size[0],e.size[1]])),this._set("pixelRatio",e.pixelRatio),this}clone(){return new C1({size:this.size,viewpoint:this.viewpoint.clone(),pixelRatio:this.pixelRatio})}toMap(e,t,r){return gy(t)?Si(e,t,this.inverseTransform):(Fi[0]=t,Fi[1]=r,Si(e,Fi,this.inverseTransform))}toScreen(e,t,r){return gy(t)?Si(e,t,this.transform):(Fi[0]=t,Fi[1]=r,Si(e,Fi,this.transform))}toScreenNoRotation(e,t,r){return gy(t)?Si(e,t,this.transformNoRotation):(Fi[0]=t,Fi[1]=r,Si(e,Fi,this.transformNoRotation))}wrapMapCoordinate(e,t){Ka(e,t);const[r]=t,[i]=this.center,{extent:s,spatialReference:n}=this;let{xmin:o,xmax:a}=s;if(n.isWrappable){const l=hO(n)/2;o=Math.max(o,i-l),a=Math.min(a,i+l)}return(r<o||r>a)&&(e[0]=Vv(r,i,n)),e}getScreenTransform(e,t){const{center:r}=this._viewpoint2D,i=this._get("pixelRatio")||1,s=this._get("size");return qv(e,r,s,t,0,i),e}_update(){const{center:e,spatialReference:t,scale:r,rotation:i}=this._viewpoint2D,s=this._get("pixelRatio")||1,n=this._get("size"),o=new Ar({targetGeometry:new te(e[0],e[1],t),scale:r,rotation:i});if(this._set("viewpoint",o),!n||!t||!r)return;this.resolution=Ol(o),this.rotation=i,this.scale=r,this.spatialReference=t,Ka(this.center,e);const a=n[0]!==0?2/n[0]:0,l=n[1]!==0?-2/n[1]:0;gO(this.displayMat3,a,0,0,0,l,0,-1,1,1);const h=_O(this.viewMat3),p=gl(n[0]/2,n[1]/2),f=gl(-n[0]/2,-n[1]/2),m=Q_(i);O1(h,h,p),vO(h,h,m),O1(h,h,f),Zv(this.displayViewMat3,this.displayMat3,h);const y=zv(this.viewMat2d,p);return fm(y,y,m),jc(y,y,f),SV(this.extent,o,n),Wv(this.transform,o,n,s),jv(this.inverseTransform,this.transform),AV(this.transformNoRotation,o,n,s),this.worldScreenWidth=PV(this.spatialReference,this.resolution),this._set("id",this.id+1),this.notifyChange("visibleArea"),this}};c([d({readOnly:!0})],Xi.prototype,"id",void 0),c([d({value:1,json:{write:!0}})],Xi.prototype,"pixelRatio",null),c([d({json:{write:!0}})],Xi.prototype,"size",null),c([d()],Xi.prototype,"spatialReference",void 0),c([d({type:Ar,json:{write:!0}})],Xi.prototype,"viewpoint",null),c([d({readOnly:!0})],Xi.prototype,"visibleArea",null),Xi=C1=c([S("esri.views.2d.ViewState")],Xi);const SS=Xi;var I1,R1;let as=I1=class extends q{constructor(){super(...arguments),this.left=0,this.top=0,this.right=0,this.bottom=0}clone(){return new I1({left:this.left,top:this.top,right:this.right,bottom:this.bottom})}};c([d()],as.prototype,"left",void 0),c([d()],as.prototype,"top",void 0),c([d()],as.prototype,"right",void 0),c([d()],as.prototype,"bottom",void 0),as=I1=c([S("esri.views.2d.PaddedViewState.Padding")],as);let Ta=R1=class extends SS{constructor(...e){super(...e),this.paddedViewState=new SS,this._updateContent=(()=>{const t=Ne();return()=>{const r=this._get("size"),i=this._get("padding");if(!r||!i)return;const s=this.paddedViewState;ot(t,i.left+i.right,i.top+i.bottom),Uc(t,r,t),Ka(s.size,t);const n=s.viewpoint;n&&(this.viewpoint=n)}})(),this.addHandles(X(()=>[this.size,this.padding],()=>this._updateContent(),wn)),this.padding=new as,this.size=[0,0]}set padding(e){this._set("padding",e||new as)}set viewpoint(e){if(e){this.paddedViewState.viewpoint=e;let t=e;const r=this._get("padding");r&&(t=CV(e.clone(),e,this._get("size"),r));const{targetGeometry:i,rotation:s,scale:n}=t,{x:o,y:a,spatialReference:l}=i,h=this._viewpoint2D;h.center[0]=o,h.center[1]=a,h.rotation=s,h.scale=n,h.spatialReference=l,this._update()}}clone(){return new R1({padding:this.padding.clone(),size:this.size.slice(),viewpoint:this.paddedViewState.viewpoint.clone(),pixelRatio:this.pixelRatio})}};c([d()],Ta.prototype,"paddedViewState",void 0),c([d({type:as})],Ta.prototype,"padding",null),c([d()],Ta.prototype,"viewpoint",null),Ta=R1=c([S("esri.views.2d.PaddedViewState")],Ta);const Jv=Ta;var ht;(function(e){e[e.ANIMATING=0]="ANIMATING",e[e.INTERACTING=1]="INTERACTING",e[e.IDLE=2]="IDLE"})(ht||(ht={}));const MO=Symbol("Yield");let SB=class{constructor(){this._tasks=new Array,this._runningTasks=yl(0)}get length(){return this._tasks.length}get running(){return this._runningTasks.value>0}destroy(){this.cancelAll()}runTask(t){if(this.length===0)return MO;for(;!t.done&&this._process(t);)t.madeProgress()}push(t,r,i){return++this._runningTasks.value,new Promise((s,n)=>this._tasks.push(new TS(s,n,t,r,i))).finally(()=>--this._runningTasks.value)}unshift(t,r,i){return++this._runningTasks.value,new Promise((s,n)=>this._tasks.unshift(new TS(s,n,t,r,i))).finally(()=>--this._runningTasks.value)}_process(t){var i;if(this._tasks.length===0)return!1;const r=this._tasks.shift();try{const s=lr(r.signal);if(s&&!r.abortCallback)r.reject($e());else{const n=s?(i=r.abortCallback)==null?void 0:i.call(r,$e()):r.callback(t);Ri(n)?n.then(r.resolve,r.reject):r.resolve(n)}}catch(s){r.reject(s)}return!0}cancelAll(){const t=$e();for(const r of this._tasks)if(r.abortCallback){const i=r.abortCallback(t);r.resolve(i)}else r.reject(t);this._tasks.length=0}},TS=class{constructor(t,r,i,s=void 0,n=void 0){this.resolve=t,this.reject=r,this.callback=i,this.signal=s,this.abortCallback=n}},Vu=class extends q{constructor(){super(...arguments),this.SCHEDULER_LOG_SLOW_TASKS=!1,this.FEATURE_SERVICE_SNAPPING_SOURCE_TILE_TREE_SHOW_TILES=!1}};c([d()],Vu.prototype,"SCHEDULER_LOG_SLOW_TASKS",void 0),c([d()],Vu.prototype,"FEATURE_SERVICE_SNAPPING_SOURCE_TILE_TREE_SHOW_TILES",void 0),Vu=c([S("esri.views.support.debugFlags")],Vu);const TB=new Vu;function $B(){return new rf.Scheduler}var ie;(function(e){e.RESOURCE_CONTROLLER_IMMEDIATE="immediate",e.RESOURCE_CONTROLLER="schedule",e.SLIDE="slide",e.STREAM_DATA_LOADER="stream loader",e.ELEVATION_QUERY="elevation query",e.TERRAIN_SURFACE="terrain",e.SURFACE_GEOMETRY_UPDATES="surface geometry updates",e.LOD_RENDERER="LoD renderer",e.GRAPHICS_CORE="Graphics3D",e.I3S_CONTROLLER="I3S",e.POINT_CLOUD_LAYER="point cloud",e.FEATURE_TILE_FETCHER="feature fetcher",e.OVERLAY="overlay",e.STAGE="stage",e.GRAPHICS_DECONFLICTOR="graphics deconflictor",e.FILTER_VISIBILITY="Graphics3D filter visibility",e.SCALE_VISIBILITY="Graphics3D scale visibility",e.FRUSTUM_VISIBILITY="Graphics3D frustum visibility",e.POINT_OF_INTEREST_FREQUENT="POI frequent",e.POINT_OF_INTEREST_INFREQUENT="POI infrequent",e.LABELER="labeler",e.FEATURE_QUERY_ENGINE="feature query",e.FEATURE_TILE_TREE="feature tile tree",e.FEATURE_TILE_TREE_ACTIVE="fast feature tile tree",e.ELEVATION_ALIGNMENT="elevation alignment",e.ELEVATION_ALIGNMENT_SCENE="elevation alignment scene",e.TEXT_TEXTURE_ATLAS="text texture atlas",e.TEXTURE_UNLOAD="texture unload",e.LINE_OF_SIGHT_TOOL="line of sight tool",e.LINE_OF_SIGHT_TOOL_INTERACTIVE="interactive line of sight tool",e.ELEVATION_PROFILE="elevation profile",e.SNAPPING="snapping",e.SHADOW_ACCUMULATOR="shadow accumulator",e.CLOUDS_GENERATOR="clouds generator",e.MAPVIEW_FETCH_QUEUE="mapview fetch queue",e.MAPVIEW_LAYERVIEW_UPDATE="mapview layerview update",e.MAPVIEW_VECTOR_TILE_PARSING_QUEUE="mapview vector tile parsing queue",e[e.NONE=0]="NONE",e[e.TEST_PRIO=1]="TEST_PRIO"})(ie||(ie={}));const wr=0,$S=new Map([[ie.RESOURCE_CONTROLLER_IMMEDIATE,wr],[ie.RESOURCE_CONTROLLER,4],[ie.SLIDE,wr],[ie.STREAM_DATA_LOADER,wr],[ie.ELEVATION_QUERY,wr],[ie.TERRAIN_SURFACE,1],[ie.SURFACE_GEOMETRY_UPDATES,1],[ie.LOD_RENDERER,2],[ie.GRAPHICS_CORE,2],[ie.I3S_CONTROLLER,2],[ie.POINT_CLOUD_LAYER,2],[ie.FEATURE_TILE_FETCHER,2],[ie.CLOUDS_GENERATOR,2],[ie.OVERLAY,4],[ie.STAGE,4],[ie.GRAPHICS_DECONFLICTOR,4],[ie.FILTER_VISIBILITY,4],[ie.SCALE_VISIBILITY,4],[ie.FRUSTUM_VISIBILITY,4],[ie.POINT_OF_INTEREST_FREQUENT,6],[ie.POINT_OF_INTEREST_INFREQUENT,30],[ie.LABELER,8],[ie.FEATURE_QUERY_ENGINE,8],[ie.FEATURE_TILE_TREE,16],[ie.FEATURE_TILE_TREE_ACTIVE,wr],[ie.ELEVATION_ALIGNMENT,12],[ie.ELEVATION_ALIGNMENT_SCENE,14],[ie.TEXT_TEXTURE_ATLAS,12],[ie.TEXTURE_UNLOAD,12],[ie.LINE_OF_SIGHT_TOOL,16],[ie.LINE_OF_SIGHT_TOOL_INTERACTIVE,wr],[ie.SNAPPING,wr],[ie.SHADOW_ACCUMULATOR,30],[ie.MAPVIEW_FETCH_QUEUE,wr],[ie.MAPVIEW_LAYERVIEW_UPDATE,2],[ie.MAPVIEW_VECTOR_TILE_PARSING_QUEUE,wr]]);function ES(e){return $S.has(e)?$S.get(e):typeof e=="number"?e:1}const EB=6.5,MS=1,MB=30,xB=1e3/30,AB=100,xS=.9;var rf,In;(function(e){class t{get updating(){return this._updating.value}_updatingChanged(){this._updating.value=this._tasks.some(n=>n.needsUpdate)}constructor(){this._updating=yl(!0),this._microTaskQueued=!1,this._frameNumber=0,this.performanceInfo={total:new Yu("total"),tasks:new Map},this._frameTaskTimes=new Map,this._budget=new i,this._state=ht.INTERACTING,this._tasks=new Ku,this._runQueue=new Ku,this._load=0,this._idleStateCallbacks=new Ku,this._idleUpdatesStartFired=!1,this._forceTask=!1,this._debug=!1,this._debugHandle=X(()=>TB.SCHEDULER_LOG_SLOW_TASKS,n=>this._debug=n,St);for(const n of Object.keys(ie))this.performanceInfo.tasks.set(ie[n],new Yu(ie[n]))}destroy(){this._tasks.toArray().forEach(n=>n.remove()),this._tasks.clear(),Ce(this._debugHandle),this._microTaskQueued=!1,this._updatingChanged()}taskRunningChanged(n){this._updatingChanged(),n&&this._budget.remaining>0&&!this._microTaskQueued&&(this._microTaskQueued=!0,queueMicrotask(()=>{this._microTaskQueued&&(this._microTaskQueued=!1,this._budget.remaining>0&&this._schedule()&&this._runFrame())}))}registerTask(n,o){const a=new r(this,n,o);return this._tasks.push(a),this._updatingChanged(),this.performanceInfo.tasks.has(n)||this.performanceInfo.tasks.set(n,new Yu(n)),a}registerIdleStateCallbacks(n,o){const a={idleBegin:n,idleEnd:o};this._idleStateCallbacks.push(a),this.state===ht.IDLE&&this._idleUpdatesStartFired&&a.idleBegin();const l=this;return{remove:()=>this._removeIdleStateCallbacks(a),set idleBegin(h){l._idleUpdatesStartFired&&(a.idleEnd(),l._state===ht.IDLE&&h()),a.idleBegin=h},set idleEnd(h){a.idleEnd=h}}}get load(){return this._load}set state(n){this._state!==n&&(this._state=n,this.state!==ht.IDLE&&this._idleUpdatesStartFired&&(this._idleUpdatesStartFired=!1,this._idleStateCallbacks.forAll(o=>o.idleEnd())))}get state(){return this._state}frame(n){this._startFrameTaskTimes();const o=this._updateBudget(n);if(o){const a=this._budget.now();this._runFrame(),this._recordFrameTaskTimes(this._budget.now()-a)}else this._recordFrameTaskTimes(0);return o}_updateBudget(n){this._test&&(this._test.usedBudget=0),++this._frameNumber;let o=EB,a=n.frameDuration,l=MS;switch(this.state){case ht.IDLE:o=0,a=Math.max(AB,n.frameDuration),l=MB;break;case ht.INTERACTING:a=Math.max(xB,n.frameDuration);case ht.ANIMATING:}return a=a-n.elapsedFrameTime-o,this.state!==ht.IDLE&&a<MS&&!this._forceTask?(this._forceTask=!0,!1):(a=Math.max(a,l),this._budget.reset(a,this.state),this._updateLoad(),this._schedule())}_runFrame(){switch(this._forceTask=!1,this._microTaskQueued=!1,this.state){case ht.IDLE:this._idleUpdatesStartFired||(this._idleUpdatesStartFired=!0,this._idleStateCallbacks.forAll(n=>n.idleBegin())),this._runIdle();break;case ht.INTERACTING:this._runInteracting();break;default:this._runAnimating()}this._test&&(this._test.usedBudget=this._budget.elapsed)}stopFrame(){this._budget.reset(0,this._state),this._budget.madeProgress()}_removeIdleStateCallbacks(n){this._idleUpdatesStartFired&&n.idleEnd(),this._idleStateCallbacks.removeUnordered(n)}removeTask(n){this._tasks.removeUnordered(n),this._runQueue.removeUnordered(n),this._updatingChanged()}_updateTask(n){this._tasks.forAll(o=>{o.name===n&&o.setPriority(n)})}_getState(n){if(this._runQueue.some(a=>a.name===n))return In.SCHEDULED;let o=In.IDLE;return this._tasks.forAll(a=>{a.name===n&&a.needsUpdate&&(a.schedulePriority<=1?o=In.READY:o!==In.READY&&(o=In.WAITING))}),o}_getRuntime(n){let o=0;return this._tasks.forAll(a=>{a.name===n&&(o+=a.runtime)}),o}_resetRuntimes(){this._tasks.forAll(n=>n.runtime=0)}_getRunning(){const n=new Map;if(this._tasks.forAll(a=>{a.needsUpdate&&n.set(a.name,(n.get(a.name)||0)+1)}),n.size===0)return null;let o="";return n.forEach((a,l)=>{o+=a>1?` ${a}x ${l}`:` ${l}`}),o}_runIdle(){this._run()}_runInteracting(){this._run()}_runAnimating(){this._run()}_updateLoad(){const n=this._tasks.reduce((o,a)=>a.needsUpdate?++o:o,0);this._load=this._load*xS+n*(1-xS)}_schedule(){for(this._runQueue.filterInPlace(n=>!!n.needsUpdate||(n.schedulePriority=n.basePriority,!1)),this._tasks.forAll(n=>{n.basePriority===wr&&n.needsUpdate&&!this._runQueue.includes(n)&&n.blockFrame!==this._frameNumber&&this._runQueue.unshift(n)});this._runQueue.length===0;){let n=!1,o=0;if(this._tasks.forAll(a=>{a.needsUpdate&&a.schedulePriority!==0&&a.basePriority!==wr&&a.blockFrame!==this._frameNumber&&(n=!0,o=Math.max(o,a.basePriority),a.schedulePriority===1?(a.schedulePriority=0,this._runQueue.push(a)):--a.schedulePriority)}),!n)return this._updatingChanged(),!1}return this._updatingChanged(),!0}_run(){do for(;this._runQueue.length>0;){const n=this._budget.now(),o=this._runQueue.pop();this._budget.resetProgress();try{o.task.runTask(this._budget)===MO&&(o.blockFrame=this._frameNumber)}catch(l){F.getLogger("esri.views.support.Scheduler").error(`Exception in task "${o.name}"`,l),o.blockFrame=this._frameNumber}!this._budget.hasProgressed&&o.blockFrame!==this._frameNumber&&o.needsUpdate&&(o.name,ie.I3S_CONTROLLER,o.blockFrame=this._frameNumber),o.schedulePriority=o.basePriority;const a=this._budget.now()-n;if(o.runtime+=a,this._frameTaskTimes.set(o.priority,this._frameTaskTimes.get(o.priority)+a),this._budget.remaining<=0)return void this._updatingChanged()}while(this._schedule());this._updatingChanged()}_startFrameTaskTimes(){for(const n of Object.keys(ie))this._frameTaskTimes.set(ie[n],0)}_recordFrameTaskTimes(n){this._frameTaskTimes.forEach((o,a)=>this.performanceInfo.tasks.get(a).push(o)),this.performanceInfo.total.push(n)}get test(){return this._test}}e.Scheduler=t;class r{get task(){return this._task.value}get updating(){return this._queue.running}constructor(n,o,a){this._scheduler=n,this.name=o,this.blockFrame=0,this.runtime=0,this._queue=new SB,this._handles=new wl,this._basePriority=ES(o),this.schedulePriority=this._basePriority,this._task=yl(a??this._queue),this._handles.add(Or(()=>this.task.running,l=>n.taskRunningChanged(l)))}remove(){this.processQueue(xO),this._scheduler.removeTask(this),this.schedule=AS.schedule,this.reschedule=AS.reschedule,this._handles.destroy()}get basePriority(){return this._basePriority}setPriority(n){if(this.name===n)return;this.name=n;const o=ES(n);this._basePriority!==wr&&this.schedulePriority===0||(this.schedulePriority=o),this._basePriority=o}get priority(){return this.name}set priority(n){this.setPriority(n)}get needsUpdate(){return this.updating||this.task.running}schedule(n,o,a){return this._queue.push(n,o,a)}reschedule(n,o,a){return this._queue.unshift(n,o,a)}processQueue(n){return this._queue.runTask(n)}}class i{constructor(){this._begin=typeof performance<"u"?performance.now():0,this._budget=0,this._state=ht.IDLE,this._done=!1,this._progressed=!1,this._enabled=!0}run(n){return!this.done&&(n()===!0&&this.madeProgress(),!0)}get done(){return this._done}get budget(){return this._budget}madeProgress(){return this._progressed=!0,this._done=this.elapsed>=this._budget&&this._enabled,this._done}get state(){return this._state}get enabled(){return this._enabled}set enabled(n){this._enabled=n}reset(n,o){this._begin=this.now(),this._budget=n,this._state=o,this.resetProgress()}get remaining(){return Math.max(this._budget-this.elapsed,0)}now(){return performance.now()}get elapsed(){return this.now()-this._begin}resetProgress(){this._progressed=!1,this._done=!1}get hasProgressed(){return this._progressed}}e.Budget=i})(rf||(rf={})),function(e){e.SCHEDULED="s",e.READY="r",e.WAITING="w",e.IDLE="i"}(In||(In={}));const xO=(()=>{const e=new rf.Budget;return e.enabled=!1,e})();let PB=class{remove(){}processQueue(){}schedule(t,r,i){try{if(lr(r)){const s=$e();return i?Promise.resolve(i(s)):Promise.reject(s)}return Hy(t(xO))}catch(s){return Promise.reject(s)}}reschedule(t,r,i){return this.schedule(t,r,i)}};const AS=new PB;let OB=class{constructor(t){this.view=t,this._stationaryHandle=null,this._frameTaskHandle=null,this._updateParameters=null,this._updateRequested=!1,this._scheduler=$B(),this._schedulerHandle=Or(()=>this._scheduler.updating,()=>this.requestFrame()),this.stationary=!0,this.prepare=()=>{var r;this._updateParameters&&(this._updateParameters.state=this.view.state,this._updateParameters.stationary=this.view.stationary,this._updateParameters.pixelRatio=window.devicePixelRatio,this._updateParameters.renderingOptions=this.view.renderingOptions,this._updateParameters.targetState.copy(this.view.state),((r=this.view.animation)==null?void 0:r.target)==null||Ri(this.view.animation.target)||(this._updateParameters.targetState.viewpoint=this.view.animation.target))},this.update=r=>{var a,l,h;if(this._updateRequested=!1,(a=this.view)==null?void 0:a.destroyed)return;const{allLayerViews:i,graphicsView:s,labelManager:n,state:{id:o}}=this.view;i==null||i.forEach(this._updateLayerView,this),n!=null&&(n.lastUpdateId!==o&&(n.viewChange(),n.lastUpdateId=o),n.updateRequested&&n.processUpdate(this._updateParameters)),s!=null&&(s.lastUpdateId!==o&&(s.viewChange(),s.lastUpdateId=o),s.updateRequested&&s.processUpdate(this._updateParameters)),(l=this.view.graphicsTileStore)==null||l.setViewState(this._updateParameters.state),this.view.animation?this._scheduler.state=ht.ANIMATING:this.view.interacting?this._scheduler.state=ht.INTERACTING:this._scheduler.state=ht.IDLE,this._scheduler.frame(r)||this._updateRequested||this._scheduler.state!==ht.IDLE||((h=this._frameTaskHandle)==null||h.pause())}}destroy(){this.stop(),this._schedulerHandle.remove(),this._scheduler.destroy()}get scheduler(){return this._scheduler}start(){if(this._frameTaskHandle)return;const t=this.view;this.stationary=t.stationary,this._updateParameters={state:t.state,targetState:new Jv,pixelRatio:window.devicePixelRatio,stationary:this.stationary,renderingOptions:t.renderingOptions},this._stationaryHandle=X(()=>t.stationary,r=>{this.stationary=r,this.requestFrame()}),this._frameTaskHandle=rl(this),this.requestUpdate()}stop(){var t;this._frameTaskHandle&&(this._updateRequested=!1,(t=this._stationaryHandle)==null||t.remove(),this._frameTaskHandle.remove(),this._updateParameters=this._stationaryHandle=this._frameTaskHandle=null,this.stationary=!0)}requestUpdate(){this._updateRequested||(this._updateRequested=!0,this.requestFrame())}requestFrame(){this._frameTaskHandle&&this._frameTaskHandle.resume()}_updateLayerView(t){var s;if(!t.attached)return void this.requestUpdate();const r=this.view.state,i=t.lastUpdateId;i!=null&&(this.stationary||t.moving)||(t.moving=!0),i!==r.id&&t.viewChange(),this.stationary&&t.moving&&(t.moving=!1,t.moveEnd()),t.lastUpdateId=r.id,t.updateRequested&&t.processUpdate(this._updateParameters),"layerViews"in t&&((s=t.layerViews)==null||s.forEach(this._updateLayerView,this))}},qs=class extends Cf{constructor(t){super(t),this.state="running",this.target=null,this._resolver=null}initialize(){this._resolver=Pr(),this.addResolvingPromise(this._resolver.promise)}get done(){return this.state==="finished"||this.state==="stopped"}stop(){var t;this.state!=="stopped"&&this.state!=="finished"&&(this._set("state","stopped"),(t=this._resolver)==null||t.reject(new I("ViewAnimation stopped")))}finish(){var t;this.state!=="stopped"&&this.state!=="finished"&&(this._set("state","finished"),(t=this._resolver)==null||t.resolve())}update(t,r){r||(r=Ri(t)?"waiting-for-target":"running"),this._set("target",t),this._set("state",r)}};c([d({readOnly:!0})],qs.prototype,"done",null),c([d({readOnly:!0,type:String})],qs.prototype,"state",void 0),c([d()],qs.prototype,"target",void 0),qs=c([S("esri.views.ViewAnimation")],qs),function(e){e.State={RUNNING:"running",STOPPED:"stopped",FINISHED:"finished",WAITING_FOR_TARGET:"waiting-for-target"}}(qs||(qs={}));const k1=qs;let ep=class extends q{constructor(t){super(t),this._gotoTask=null}destroy(){this._gotoTask=null}async goTo(t,r){if(!t)return void F.getLogger(this).error("#goTo()","target cannot be null or undefined");const i=new k1;this.view.animation=i,await J_(()=>this.view.ready,r);const s={...r,animate:(r==null?void 0:r.animate)??!kP(),animationMode:(r==null?void 0:r.animationMode)??"auto"},{extent:n,spatialReference:o,size:a,viewpoint:l,constraints:h,padding:p,allLayerViews:f}=this.view,m=wV(t,{extent:n,spatialReference:o,size:a,viewpoint:l,constraints:h,padding:p,allLayerViews:f,pickClosestTarget:(r==null?void 0:r.pickClosestTarget)??!0});return i==null||i.update(m),this._gotoTask={},s.animate?this._gotoAnimated(m,s):this._gotoImmediate(m,s)}_gotoImmediate(t,r){const i=this._gotoTask,s=this.view.animation,n=t.then(o=>{if(Ve(r),i!==this._gotoTask)throw new I("view:goto-interrupted","Goto was interrupted");this.view.viewpoint=s.target=o,s.finish()});return this._cancellableGoTo(i,s,n,r)}_gotoAnimated(t,r){const i=this._gotoTask,s=this.view.animation;if(!s)return Promise.resolve();const n=t.then(o=>{if(Ve(r),i!==this._gotoTask)throw new I("view:goto-interrupted","Goto was interrupted");return s.update(o),this.view.animationManager.animate(s,this.view.viewpoint,r),s.when().then(()=>{},()=>{})});return this._cancellableGoTo(i,s,n,r)}_cancellableGoTo(t,r,i,s){const n=()=>t===this._gotoTask;return fR(i,s).finally(()=>{n()&&(r.done||r.stop())})}};c([d({constructOnly:!0})],ep.prototype,"view",void 0),ep=c([S("esri.views.2d.GoToManager")],ep);function CB(e,t){const{spatialReference:r}=t,i=[t.x,t.y];let s,n,o,a;const l=[0,0],h=IB(e);for(let m=0;m<h.length;m++){const y=h[m];for(let _=0;_<y.length-1;_++){P8(l,i,y,_);const v=pm(i,l);(s==null||v<s)&&(s=v,n=[...l],o=m,a=_)}}if(s==null||!n||o==null||a==null)throw new I("nearest-coordinate:failed","Failed to find the nearest coordinate");const[p,f]=n;return{coordinate:new te({x:p,y:f,spatialReference:r}),distance:s}}function IB(e){switch(e.type){case"extent":return[[[e.xmin,e.ymin],[e.xmin,e.ymax],[e.xmax,e.ymax],[e.xmax,e.ymin],[e.xmin,e.ymin]]];case"polygon":return e.rings;case"polyline":return e.paths}}var N1;let mo=N1=class extends sh.NumericIdentifiableMixin(q){constructor(e){super(e),this.geometry=null,this.spatialReference=null}get normalizedGeometry(){if(this.geometry==null||!this.spatialReference)return null;if(!this.spatialReference.equals(this.geometry.spatialReference))try{return Vo(this.geometry,this.spatialReference)}catch(e){return F.getLogger(this).error("#constraints.geometry","could not project the geometry to the view's spatial reference",{geometry:this.geometry,spatialReference:this.spatialReference,error:e}),null}return this.geometry}constrain(e,t){if(this.normalizedGeometry==null)return e;const r=e.targetGeometry;if(this.normalizedGeometry.type==="extent"?eh(this.normalizedGeometry,r):k_(this.normalizedGeometry,r))return e;const{coordinate:i}=CB(this.normalizedGeometry,r);return i&&(e.targetGeometry=i),e}clone(){var e,t;return new N1({geometry:(e=this.geometry)==null?void 0:e.clone(),spatialReference:(t=this.spatialReference)==null?void 0:t.clone()})}};c([d({constructOnly:!0})],mo.prototype,"geometry",void 0),c([d({readOnly:!0})],mo.prototype,"normalizedGeometry",null),c([d({constructOnly:!0})],mo.prototype,"spatialReference",void 0),mo=N1=c([S("esri.views.2d.constraints.GeometryConstraint")],mo);var L1;let Bu=L1=class extends sh.NumericIdentifiableMixin(q){constructor(){super(...arguments),this.enabled=!0,this.rotationEnabled=!0}constrain(e,t){return this.enabled&&t&&(this.rotationEnabled||(e.rotation=t.rotation)),e}clone(){return new L1({enabled:this.enabled,rotationEnabled:this.rotationEnabled})}};c([d()],Bu.prototype,"enabled",void 0),c([d()],Bu.prototype,"rotationEnabled",void 0),Bu=L1=c([S("esri.views.2d.constraints.RotationConstraint")],Bu);const AO=Bu;var D1;let Ft=D1=class extends sh.NumericIdentifiableMixin(q){constructor(e){super(e),this._lodByScale={},this._scales=[],this.effectiveLODs=null,this.effectiveMinZoom=-1,this.effectiveMaxZoom=-1,this.effectiveMinScale=0,this.effectiveMaxScale=0,this.lods=null,this.minZoom=-1,this.maxZoom=-1,this.minScale=0,this.maxScale=0,this.snapToZoom=!0}initialize(){let e,{lods:t,minScale:r,maxScale:i,minZoom:s,maxZoom:n}=this,o=-1,a=-1,l=!1,h=!1;if(r!==0&&i!==0&&r<i&&([r,i]=[i,r]),!(t!=null&&t.length))return this._set("effectiveMinScale",r),void this._set("effectiveMaxScale",i);t=t.map(p=>p.clone()),t.sort((p,f)=>f.scale-p.scale),t.forEach((p,f)=>p.level=f);for(const p of t)!l&&r>0&&r>=p.scale&&(o=p.level,l=!0),!h&&i>0&&i>=p.scale&&(a=e?e.level:-1,h=!0),e=p;s===-1&&(s=r===0?0:o),n===-1&&(n=i===0?t.length-1:a),s=Math.max(s,0),s=Math.min(s,t.length-1),n=Math.max(n,0),n=Math.min(n,t.length-1),s>n&&([s,n]=[n,s]),r=t[s].scale,i=t[n].scale,t.splice(0,s),t.splice(n-s+1,t.length),t.forEach((p,f)=>{this._lodByScale[p.scale]=p,this._scales[f]=p.scale}),this._set("effectiveLODs",t),this._set("effectiveMinZoom",s),this._set("effectiveMaxZoom",n),this._set("effectiveMinScale",r),this._set("effectiveMaxScale",i)}constrain(e,t){if(t&&e.scale===t.scale)return e;const r=this.effectiveMinScale,i=this.effectiveMaxScale,s=e.targetGeometry,n=t&&t.targetGeometry,o=i!==0&&e.scale<i,a=r!==0&&e.scale>r;if(o||a){const l=a?r:i;if(t&&n){const h=(l-t.scale)/(e.scale-t.scale);s.x=n.x+(s.x-n.x)*h,s.y=n.y+(s.y-n.y)*h}e.scale=l}return this.snapToZoom&&this.effectiveLODs&&(e.scale=this._getClosestScale(e.scale)),e}fit(e){if(!this.effectiveLODs||!this.snapToZoom)return this.constrain(e,null);const t=this.scaleToZoom(e.scale),r=Math.abs(t-Math.floor(t));return e.scale=this.zoomToScale(r>.99?Math.round(t):Math.floor(t)),e}zoomToScale(e){if(!this.effectiveLODs)return 0;e-=this.effectiveMinZoom,e=Math.max(0,e);const t=this._scales;if(e<=0)return t[0];if(e>=t.length)return t[t.length-1];const r=Math.floor(e),i=Math.ceil(e);return t[r]+(e-r)*(t[i]-t[r])}scaleToZoom(e){if(!this.effectiveLODs)return-1;const t=this._scales;let r,i;if(e>=t[0])return this.effectiveMinZoom;if(e<=t[t.length-1])return this.effectiveMaxZoom;for(let s=0;s<t.length-1;s++){if(r=t[s],i=t[s+1],i===e)return s+this.effectiveMinZoom+1;if(r>e&&i<e)return s+this.effectiveMinZoom+1-(e-i)/(r-i)}return-1}snapToClosestScale(e){if(!this.effectiveLODs)return e;const t=this.scaleToZoom(e);return this.zoomToScale(Math.round(t))}snapToNextScale(e,t=.5){if(!this.effectiveLODs)return e*t;const r=Math.round(this.scaleToZoom(e));return this.zoomToScale(r+1)}snapToPreviousScale(e,t=2){if(!this.effectiveLODs)return e*t;const r=Math.round(this.scaleToZoom(e));return this.zoomToScale(r-1)}clone(){return new D1({lods:this.lods,minZoom:this.minZoom,maxZoom:this.maxZoom,minScale:this.minScale,maxScale:this.maxScale})}_getClosestScale(e){return this._lodByScale[e]||(e=this._scales.reduce((t,r)=>Math.abs(r-e)<=Math.abs(t-e)?r:t,this._scales[0])),this._lodByScale[e].scale}};c([d({readOnly:!0})],Ft.prototype,"effectiveLODs",void 0),c([d({readOnly:!0})],Ft.prototype,"effectiveMinZoom",void 0),c([d({readOnly:!0})],Ft.prototype,"effectiveMaxZoom",void 0),c([d({readOnly:!0})],Ft.prototype,"effectiveMinScale",void 0),c([d({readOnly:!0})],Ft.prototype,"effectiveMaxScale",void 0),c([d()],Ft.prototype,"lods",void 0),c([d()],Ft.prototype,"minZoom",void 0),c([d()],Ft.prototype,"maxZoom",void 0),c([d()],Ft.prototype,"minScale",void 0),c([d()],Ft.prototype,"maxScale",void 0),c([d()],Ft.prototype,"snapToZoom",void 0),Ft=D1=c([S("esri.views.2d.constraints.ZoomConstraint")],Ft);const PO=Ft,RB={base:null,key:"type",typeMap:{extent:Le,polygon:Oi}};let Ue=class extends q{constructor(t){super(t),this.lods=null,this.minScale=0,this.maxScale=0,this.minZoom=-1,this.maxZoom=-1,this.rotationEnabled=!0,this.snapToZoom=!0,this.customConstraints=new B}destroy(){this.view=null}get effectiveLODs(){return this._zoom.effectiveLODs}get effectiveMinScale(){return this._zoom.effectiveMinScale}get effectiveMaxScale(){return this._zoom.effectiveMaxScale}get effectiveMinZoom(){return this._zoom.effectiveMinZoom}get effectiveMaxZoom(){return this._zoom.effectiveMaxZoom}set geometry(t){t?this._set("geometry",t):this._set("geometry",null)}get version(){var t,r,i;return`${(t=this._zoom)==null?void 0:t.uid}/${(r=this._rotation)==null?void 0:r.uid}/${(i=this._geometry)==null?void 0:i.uid}`}get _geometry(){var r,i;const t=this._get("_geometry");return t&&this.geometry===t.geometry&&((r=this.view)==null?void 0:r.constraintsInfo.spatialReference)===t.spatialReference?t:new mo({geometry:this.geometry,spatialReference:(i=this.view)==null?void 0:i.constraintsInfo.spatialReference})}get _rotation(){return new AO({rotationEnabled:this.rotationEnabled})}get _zoom(){var l;const t=this._get("_zoom"),r=this.lods||((l=this.view)==null?void 0:l.constraintsInfo.lods),i=this.minZoom,s=this.maxZoom,n=this.minScale,o=this.maxScale,a=this.snapToZoom;return t&&t.lods===r&&t.minZoom===i&&t.maxZoom===s&&t.minScale===n&&t.maxScale===o&&t.snapToZoom===a?t:new PO({lods:r,minZoom:i,maxZoom:s,minScale:n,maxScale:o,snapToZoom:a})}canZoomInTo(t){const r=this.effectiveMaxScale;return r===0||t>=r}canZoomOutTo(t){const r=this.effectiveMinScale;return r===0||t<=r}constrain(t,r){return this._zoom.constrain(t,r),this._rotation.constrain(t,r),this._geometry.constrain(t,r),this.customConstraints.forEach(i=>i.constrain(t,r)),t}constrainByGeometry(t){return this._geometry.constrain(t),this.customConstraints.forEach(r=>{var i;return(i=r.applyPanConstraint)==null?void 0:i.call(r,t)}),t}fit(t){return this._zoom.fit(t)}zoomToScale(t){return this._zoom.zoomToScale(t)}scaleToZoom(t){return this._zoom.scaleToZoom(t)}snapScale(t){return this._zoom.snapToClosestScale(t)}snapToNextScale(t){return this._zoom.snapToNextScale(t)}snapToPreviousScale(t){return this._zoom.snapToPreviousScale(t)}};c([d({readOnly:!0})],Ue.prototype,"effectiveLODs",null),c([d({readOnly:!0})],Ue.prototype,"effectiveMinScale",null),c([d({readOnly:!0})],Ue.prototype,"effectiveMaxScale",null),c([d({readOnly:!0})],Ue.prototype,"effectiveMinZoom",null),c([d({readOnly:!0})],Ue.prototype,"effectiveMaxZoom",null),c([d({types:RB,value:null})],Ue.prototype,"geometry",null),c([d({type:[Ks]})],Ue.prototype,"lods",void 0),c([d()],Ue.prototype,"minScale",void 0),c([d()],Ue.prototype,"maxScale",void 0),c([d()],Ue.prototype,"minZoom",void 0),c([d()],Ue.prototype,"maxZoom",void 0),c([d()],Ue.prototype,"rotationEnabled",void 0),c([d()],Ue.prototype,"snapToZoom",void 0),c([d({type:B})],Ue.prototype,"customConstraints",void 0),c([d()],Ue.prototype,"view",void 0),c([d({readOnly:!0})],Ue.prototype,"version",null),c([d({type:mo,readOnly:!0})],Ue.prototype,"_geometry",null),c([d({type:AO})],Ue.prototype,"_rotation",null),c([d({readOnly:!0,type:PO})],Ue.prototype,"_zoom",null),Ue=c([S("esri.views.2d.MapViewConstraints")],Ue);const PS=Ue;let yt=class extends q{constructor(t){super(t),this.constraints=null,this.ready=!1,this.resizeAlign="center",this.addHandles([X(()=>{var r;return(r=this.constraints)==null?void 0:r.version},r=>{this.constraints&&r&&this.ready&&(this.state.viewpoint=this.constraints.fit(this.state.paddedViewState.viewpoint))},wn)])}get center(){if(!this.ready)return this._get("center");const{center:t,spatialReference:r}=this.state.paddedViewState;return this.state.commitProperty("id"),new te({x:t[0],y:t[1],spatialReference:r})}set center(t){if(t==null)return;if(!this.ready)return void this._set("center",t);let r;try{r=this._project(t,this.state.spatialReference)}catch(s){return void F.getLogger(this).error(new I("mapview:invalid-center","could not project the value in the view's spatial reference",{input:t,error:s}))}const i=this.viewpoint;P1(i,i,r),this.viewpoint=i}get extent(){return this.ready?(this.state.commitProperty("id"),this.state.paddedViewState.extent.clone()):this._get("extent")}set extent(t){if(t==null)return;if(!t.width||!t.height)return void F.getLogger(this).error(new I("mapview:invalid-extent","invalid extent size"));if(!this.ready)return this._set("extent",t),this._set("center",void 0),this._set("viewpoint",void 0),this._set("scale",void 0),void this._set("zoom",void 0);let r;try{r=this._project(t,this.state.spatialReference)}catch(s){return void F.getLogger(this).error(new I("mapview:invalid-extent","could not project the value in the view's spatial reference",{error:s}))}const i=this.viewpoint;TV(i,i,r,this.state.size,{constraints:this.constraints}),this.viewpoint=i}get padding(){return this.ready?this.state.padding:this._get("padding")}set padding(t){this.ready?(this.state.padding=t,this._set("padding",this.state.padding)):this._set("padding",t)}get resolution(){return this.ready?(this.state.commitProperty("id"),this.state.resolution):0}get rotation(){return this.ready?(this.state.commitProperty("id"),this.state.rotation):this._get("rotation")}set rotation(t){if(isNaN(t))return;if(!this.ready)return void this._set("rotation",t);const r=this.viewpoint;RV(r,r,t),this.viewpoint=r}get scale(){return this.ready?(this.state.commitProperty("id"),this.state.scale):this._get("scale")}set scale(t){if(!t||isNaN(t))return;if(!this.ready){this._set("scale",t),this._set("zoom",void 0);const i=this._get("extent");return void(i&&(this._set("extent",void 0),this._set("center",i.center)))}const r=this.viewpoint;bS(r,r,t),this.viewpoint=r}get viewpoint(){return this.ready?this.state.paddedViewState.viewpoint.clone():this._get("viewpoint")}set viewpoint(t){var n;if(t==null)return;if(!this.ready)return this._set("viewpoint",t),this._set("extent",void 0),this._set("center",void 0),this._set("zoom",void 0),void this._set("scale",void 0);let r,i;try{r=this._project(t,this.state.spatialReference),!t.scale||isNaN(t.scale)?i=new I("mapview:invalid-viewpoint",`invalid scale value of ${t.scale}`):t.targetGeometry==null&&(i=new I("mapview:invalid-viewpoint","geometry not defined"))}catch(o){i=new I("mapview:invalid-viewpoint","could not project the value in the view's spatial reference",{error:o})}if(i)return void F.getLogger(this).error(i);this._scaleBeforeChangingSpatialReference=null;const s=new Ar({targetGeometry:new te,scale:0,rotation:0});bt(s,r),(n=this.constraints)==null||n.constrain(s,this.state.paddedViewState.viewpoint),this.state.viewpoint=s,this._set("viewpoint",s)}get visibleArea(){return this.ready?this.state.visibleArea:null}get zoom(){var t;return this.ready?((t=this.constraints)==null?void 0:t.scaleToZoom(this.scale))??-1:this._get("zoom")}set zoom(t){var s,n;if(!(t>=0))return;if(!this.ready){this._set("zoom",t),this._set("scale",void 0);const o=this._get("extent");return void(o&&(this._set("extent",void 0),this._set("center",o.center)))}const r=((s=this.constraints)==null?void 0:s.zoomToScale(t))??0;if(!r)return void this._set("zoom",-1);const i=this.viewpoint;bS(i,i,r),this.viewpoint=i,this._set("zoom",((n=this.constraints)==null?void 0:n.scaleToZoom(this.scale))??-1)}getUserStartupOptions(t){if(!t[0]&&!t[1])return{center:void 0,rotation:void 0,scale:void 0};const{padding:r,constraints:i}=this,s=this._get("center"),n=this._get("extent"),o=this._get("scale"),a=this._get("rotation"),l=this._get("viewpoint"),h=this._get("zoom"),p=h!=null&&i!=null&&i.zoomToScale(h)||void 0;let f,m,y;const _=l==null?void 0:l.rotation,v=l==null?void 0:l.targetGeometry;(v==null?void 0:v.type)==="extent"?f=v:(v==null?void 0:v.type)==="point"&&(m=v,y=l==null?void 0:l.scale);const w=n??f;return{center:s??m??(w==null?void 0:w.center),rotation:a??_,scale:(o??p??y??(w&&mm(w,[t[0]-r.left-r.right,t[1]-r.top-r.bottom])))||void 0}}startup(t,r,i,s){var o;const n=t.targetGeometry;try{this._project(t,i)}catch(a){F.getLogger(this).warn(new fs("mapview:startup-projection-error","projection of initial viewpoint to the view's spatial reference, defaulting to the initial viewpoint.",{center:n.toJSON(),spatialReference:i,error:a})),t.targetGeometry=s||new te({x:0,y:0,spatialReference:i})}(o=this.constraints)==null||o.fit(t),this._set("state",new Jv({padding:this.padding,size:r,viewpoint:t})),this._set("ready",!0)}teardown(){this._set("ready",!1);const{center:[t,r],spatialReference:i,rotation:s,scale:n}=this.state.paddedViewState,o=new te({x:t,y:r,spatialReference:i});this._set("viewpoint",null),this._set("extent",null),this._set("center",o),this._set("zoom",-1),this._set("rotation",s),this._set("scale",n),this._set("state",null)}changeSpatialReference(t){var l;const r=this.state.paddedViewState.clone();if(this._scaleBeforeChangingSpatialReference==null)this._scaleBeforeChangingSpatialReference=r.scale;else{const h=r.viewpoint.clone();h.scale=this._scaleBeforeChangingSpatialReference,r.viewpoint=h}const i=r.clone(),[s,n]=r.center;let o=null;try{o=this._project(new te({x:s,y:n,spatialReference:r.spatialReference}),t)}catch(h){P_()||F.getLogger(this).warn(new fs("mapview:spatial-reference-change","could not project the view's center to the new spatial reference",{center:o==null?void 0:o.toJSON(),spatialReference:t,error:h}))}o||(o=new te({x:0,y:0,spatialReference:t}));const a=P1(new Ar({targetGeometry:new te,scale:0,rotation:0}),r.viewpoint,o);i.viewpoint=a;try{const p=[r.size[0]/2,r.size[1]/2],f=[p[0]+20,p[1]],m=r.toMap([0,0],f),{x:y,y:_}=this._project(new te({x:m[0],y:m[1],spatialReference:r.spatialReference}),t);m[0]=y,m[1]=_,i.toScreen(m,m);const v=OV(p,m,f),w=Math.hypot(m[0]-p[0],m[1]-p[1])/20;!Number.isFinite(w)||Math.abs(w)>4?(a.rotation=0,a.targetGeometry=new te({x:0,y:0,spatialReference:t})):(a.scale*=w,a.scale>A("mapview-srswitch-adjust-rotation-scale-threshold")?a.rotation=0:a.rotation+=Number.isFinite(v)?v:0)}catch{}(l=this._get("constraints"))==null||l.constrain(a,void 0),this._get("state").viewpoint=a}resize(t,r){var o;if(!this.ready)return;const i=this.state;let s=this.state.paddedViewState.viewpoint;const n=this.state.paddedViewState.size.slice();i.size=[t,r],IV(s,s,n,this.state.paddedViewState.size,this.resizeAlign),s=((o=this.constraints)==null?void 0:o.constrain(s,void 0))??s,this.state.viewpoint=s}toMap(t){if(!this.ready)return null;const r=[0,0],[i,s]=this.state.toMap(r,[t.x,t.y]),n=this.state.spatialReference;return new te({x:i,y:s,spatialReference:n})}toScreen(t,r){if(!this.ready)return null;const i=this._project(t,this.state.spatialReference),s=[i.x,i.y];return(r==null?void 0:r.pickClosestTarget)===!1||this.state.paddedViewState.wrapMapCoordinate(s,s),this.state.toScreen(s,s),lt(s[0],s[1])}_project(t,r){var n;const i=(t==null?void 0:t.targetGeometry)||t;if(!r)return t;if(!i)return null;if(r.imageCoordinateSystem||(n=i.spatialReference)!=null&&n.imageCoordinateSystem||ut(r,i.spatialReference))return t;const s=Vo(i,r);if(!s)throw new I("mapview:projection-not-possible","projecting input geometry to target spatial reference returned a null value",{geometry:i,spatialReference:r});return kB(t)?(t.targetGeometry=s,t):s}};function kB(e){return(e==null?void 0:e.declaredClass)==="esri.Viewpoint"}c([d({type:te})],yt.prototype,"center",null),c([d()],yt.prototype,"constraints",void 0),c([d({type:Le})],yt.prototype,"extent",null),c([d({value:{top:0,right:0,bottom:0,left:0},cast:e=>({top:0,right:0,bottom:0,left:0,...e})})],yt.prototype,"padding",null),c([d()],yt.prototype,"ready",void 0),c([d()],yt.prototype,"resizeAlign",void 0),c([d({readOnly:!0})],yt.prototype,"resolution",null),c([d({type:Number})],yt.prototype,"rotation",null),c([d({type:Number})],yt.prototype,"scale",null),c([d({readOnly:!0})],yt.prototype,"state",void 0),c([d({type:Ar})],yt.prototype,"viewpoint",null),c([d({readOnly:!0})],yt.prototype,"visibleArea",null),c([d()],yt.prototype,"zoom",null),yt=c([S("esri.views.2d.ViewStateManager")],yt);function OO(e,t){switch(t){case"primary":return e.pointerType==="touch"||e.button===0;case"secondary":return e.pointerType!=="touch"&&e.button===2;case"tertiary":return e.pointerType!=="touch"&&e.button===1}}function CO(e,t){return t.some(r=>OO(e,r))}function OS(e,{dragPrimary:t,dragSecondary:r,dragTertiary:i}){return[{key:"primary",value:t},{key:"secondary",value:r},{key:"tertiary",value:i}].filter(s=>s.value===e).map(s=>s.key)}let CS=class extends it{constructor(t,r){super(!0),this._view=t,this.registerIncoming("double-click",r,i=>this._handleDoubleClick(i,r))}_handleDoubleClick(t,r){OO(t.data,"primary")&&(t.stopPropagation(),r?this._view.mapViewNavigation.zoomOut([t.data.x,t.data.y]):this._view.mapViewNavigation.zoomIn([t.data.x,t.data.y]))}},NB=class extends it{constructor(t,r,i){super(!0),this.view=t,this.pointerType=r,this.registerIncoming("double-tap-drag",i,s=>this._handleDoubleTapDrag(s))}_handleDoubleTapDrag(t){const{data:r}=t,{pointerType:i}=r;if(i!==this.pointerType)return;t.stopPropagation();const{action:s,delta:n}=r,{view:o}=this,{mapViewNavigation:a}=o;switch(s){case"begin":{const{scale:l}=o;this._startScale=l,this._currentScale=l,this._previousDelta=n,a.begin();break}case"update":{if(this._previousDelta.y===n.y)return;this._previousDelta=n;const l=1.015**n.y,h=this._startScale*l,p=h/this._currentScale;a.setViewpointImmediate(p),this._currentScale=h;break}case"end":{const{constraints:l}=o,{effectiveLODs:h,snapToZoom:p}=l;if(!p||!h)return void a.end();const f=l.snapScale(this._currentScale),m=(n.y>0?Math.max(f,l.snapToPreviousScale(this._startScale)):Math.min(f,l.snapToNextScale(this._startScale)))/this._currentScale;a.zoom(m).then(()=>{a.end()});break}}}},gm=class{constructor(t){this._callbacks=t,this._currentCount=0,this._callbacks.condition||(this._callbacks.condition=()=>!0)}handle(t){const r=t.data,i=r.pointers.size;switch(r.action){case"start":this._currentCount=i,this._emitStart(t);break;case"added":this._emitEnd(this._previousEvent),this._currentCount=i,this._emitStart(t);break;case"update":this._emitUpdate(t);break;case"removed":this._startEvent&&this._emitEnd(this._previousEvent),this._currentCount=i,this._emitStart(t);break;case"end":this._emitEnd(t),this._currentCount=0}this._previousEvent=t}_emitStart(t){var r,i;this._startEvent=t,(i=(r=this._callbacks).condition)!=null&&i.call(r,this._currentCount,t)&&this._callbacks.start(this._currentCount,t,this._startEvent)}_emitUpdate(t){var r,i;(i=(r=this._callbacks).condition)!=null&&i.call(r,this._currentCount,t)&&this._callbacks.update(this._currentCount,t,this._startEvent)}_emitEnd(t){var r,i;(i=(r=this._callbacks).condition)!=null&&i.call(r,this._currentCount,t)&&this._callbacks.end(this._currentCount,t,this._startEvent),this._startEvent=null}},LB=class extends it{constructor(t,r,i){super(!0),this.view=t,this.pointerActions=r,this.registerIncoming("drag",i,s=>this._handleDrag(s)),this.registerIncoming("pointer-down",()=>this.stopMomentumNavigation())}onInstall(t){super.onInstall(t),this._dragEventSeparator=new gm({start:(r,i)=>{this.view.mapViewNavigation.pan.begin(this.view,i.data),i.stopPropagation()},update:(r,i)=>{this.view.mapViewNavigation.pan.update(this.view,i.data),i.stopPropagation()},end:(r,i)=>{this.view.mapViewNavigation.pan.end(this.view,i.data),i.stopPropagation()},condition:(r,i)=>r===1&&CO(i.data,this.pointerActions)})}_handleDrag(t){const r=this.view.mapViewNavigation;r.pinch.zoomMomentum||r.pinch.rotateMomentum?this.stopMomentumNavigation():this._dragEventSeparator.handle(t)}stopMomentumNavigation(){this.view.mapViewNavigation.pan.stopMomentumNavigation()}},DB=class extends it{constructor(t,r,i){super(!0),this._view=t,this.pointerActions=r;const s=this._view.mapViewNavigation;this._dragEventSeparator=new gm({start:(n,o)=>{s.rotate.begin(this._view,o.data),o.stopPropagation()},update:(n,o)=>{s.rotate.update(this._view,o.data),o.stopPropagation()},end:(n,o)=>{s.rotate.end(),o.stopPropagation()},condition:(n,o)=>n===1&&CO(o.data,this.pointerActions)}),this.registerIncoming("drag",i,n=>this._dragEventSeparator.handle(n))}};function IO(e){const t=e[0],r=e[1],i=e[2];return Math.sqrt(t*t+r*r+i*i)}function FB(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}function UB(e,t,r,i){return e[0]=t,e[1]=r,e[2]=i,e}function jB(e,t,r){return e[0]=t[0]+r[0],e[1]=t[1]+r[1],e[2]=t[2]+r[2],e}function RO(e,t,r){return e[0]=t[0]-r[0],e[1]=t[1]-r[1],e[2]=t[2]-r[2],e}function kO(e,t,r){return e[0]=t[0]*r[0],e[1]=t[1]*r[1],e[2]=t[2]*r[2],e}function NO(e,t,r){return e[0]=t[0]/r[0],e[1]=t[1]/r[1],e[2]=t[2]/r[2],e}function GB(e,t){return e[0]=Math.ceil(t[0]),e[1]=Math.ceil(t[1]),e[2]=Math.ceil(t[2]),e}function zB(e,t){return e[0]=Math.floor(t[0]),e[1]=Math.floor(t[1]),e[2]=Math.floor(t[2]),e}function VB(e,t){return e[0]=Math.abs(t[0]),e[1]=Math.abs(t[1]),e[2]=Math.abs(t[2]),e}function BB(e,t){return e[0]=Math.sign(t[0]),e[1]=Math.sign(t[1]),e[2]=Math.sign(t[2]),e}function HB(e,t,r){return e[0]=Math.min(t[0],r[0]),e[1]=Math.min(t[1],r[1]),e[2]=Math.min(t[2],r[2]),e}function qB(e,t,r){return e[0]=Math.max(t[0],r[0]),e[1]=Math.max(t[1],r[1]),e[2]=Math.max(t[2],r[2]),e}function WB(e,t=0,r=1){return e[0]=Math.min(Math.max(e[0],t),r),e[1]=Math.min(Math.max(e[1],t),r),e[2]=Math.min(Math.max(e[2],t),r),e}function ZB(e,t){return e[0]=Math.round(t[0]),e[1]=Math.round(t[1]),e[2]=Math.round(t[2]),e}function LO(e,t,r){return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e}function JB(e,t,r,i){return e[0]=t[0]+r[0]*i,e[1]=t[1]+r[1]*i,e[2]=t[2]+r[2]*i,e}function DO(e,t){const r=t[0]-e[0],i=t[1]-e[1],s=t[2]-e[2];return Math.sqrt(r*r+i*i+s*s)}function FO(e,t){const r=t[0]-e[0],i=t[1]-e[1],s=t[2]-e[2];return r*r+i*i+s*s}function UO(e){const t=e[0],r=e[1],i=e[2];return t*t+r*r+i*i}function YB(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e}function KB(e,t){return e[0]=1/t[0],e[1]=1/t[1],e[2]=1/t[2],e}function F1(e,t){const r=t[0],i=t[1],s=t[2];let n=r*r+i*i+s*s;return n>0&&(n=1/Math.sqrt(n),e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n),e}function jO(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function XB(e,t,r){const i=t[0],s=t[1],n=t[2],o=r[0],a=r[1],l=r[2];return e[0]=s*l-n*a,e[1]=n*o-i*l,e[2]=i*a-s*o,e}function QB(e,t,r){const i=t[0],s=t[1],n=t[2],o=r[0],a=r[1],l=r[2],h=s*l-n*a,p=n*o-i*l,f=i*a-s*o,m=Math.sqrt(h*h+p*p+f*f);return e[0]=h/m,e[1]=p/m,e[2]=f/m,e}function eH(e,t,r,i){const s=t[0],n=t[1],o=t[2];return e[0]=s+i*(r[0]-s),e[1]=n+i*(r[1]-n),e[2]=o+i*(r[2]-o),e}function tH(e,t,r,i,s,n){const o=n*n,a=o*(2*n-3)+1,l=o*(n-2)+n,h=o*(n-1),p=o*(3-2*n);return e[0]=t[0]*a+r[0]*l+i[0]*h+s[0]*p,e[1]=t[1]*a+r[1]*l+i[1]*h+s[1]*p,e[2]=t[2]*a+r[2]*l+i[2]*h+s[2]*p,e}function rH(e,t,r,i,s,n){const o=1-n,a=o*o,l=n*n,h=a*o,p=3*n*a,f=3*l*o,m=l*n;return e[0]=t[0]*h+r[0]*p+i[0]*f+s[0]*m,e[1]=t[1]*h+r[1]*p+i[1]*f+s[1]*m,e[2]=t[2]*h+r[2]*p+i[2]*f+s[2]*m,e}function iH(e,t=1){const r=X_,i=2*r()*Math.PI,s=2*r()-1,n=Math.sqrt(1-s*s)*t;return e[0]=Math.cos(i)*n,e[1]=Math.sin(i)*n,e[2]=s*t,e}function sH(e,t,r){const i=t[0],s=t[1],n=t[2];return e[0]=r[0]*i+r[4]*s+r[8]*n+r[12],e[1]=r[1]*i+r[5]*s+r[9]*n+r[13],e[2]=r[2]*i+r[6]*s+r[10]*n+r[14],e}function nH(e,t,r){const i=t[0],s=t[1],n=t[2];return e[0]=i*r[0]+s*r[3]+n*r[6],e[1]=i*r[1]+s*r[4]+n*r[7],e[2]=i*r[2]+s*r[5]+n*r[8],e}function oH(e,t,r){const i=r[0],s=r[1],n=r[2],o=r[3],a=t[0],l=t[1],h=t[2],p=s*h-n*l,f=n*a-i*h,m=i*l-s*a,y=s*m-n*f,_=n*p-i*m,v=i*f-s*p,w=2*o;return e[0]=a+p*w+2*y,e[1]=l+f*w+2*_,e[2]=h+m*w+2*v,e}function aH(e,t,r,i){const s=[],n=[];return s[0]=t[0]-r[0],s[1]=t[1]-r[1],s[2]=t[2]-r[2],n[0]=s[0],n[1]=s[1]*Math.cos(i)-s[2]*Math.sin(i),n[2]=s[1]*Math.sin(i)+s[2]*Math.cos(i),e[0]=n[0]+r[0],e[1]=n[1]+r[1],e[2]=n[2]+r[2],e}function lH(e,t,r,i){const s=[],n=[];return s[0]=t[0]-r[0],s[1]=t[1]-r[1],s[2]=t[2]-r[2],n[0]=s[2]*Math.sin(i)+s[0]*Math.cos(i),n[1]=s[1],n[2]=s[2]*Math.cos(i)-s[0]*Math.sin(i),e[0]=n[0]+r[0],e[1]=n[1]+r[1],e[2]=n[2]+r[2],e}function uH(e,t,r,i){const s=[],n=[];return s[0]=t[0]-r[0],s[1]=t[1]-r[1],s[2]=t[2]-r[2],n[0]=s[0]*Math.cos(i)-s[1]*Math.sin(i),n[1]=s[0]*Math.sin(i)+s[1]*Math.cos(i),n[2]=s[2],e[0]=n[0]+r[0],e[1]=n[1]+r[1],e[2]=n[2]+r[2],e}function cH(e,t){F1(IS,e),F1(RS,t);const r=jO(IS,RS);return r>1?0:r<-1?Math.PI:Math.acos(r)}const IS=Mn(),RS=Mn();function hH(e){return"vec3("+e[0]+", "+e[1]+", "+e[2]+")"}function dH(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]}function pH(e,t){if(e===t)return!0;const r=e[0],i=e[1],s=e[2],n=t[0],o=t[1],a=t[2],l=Bt();return Math.abs(r-n)<=l*Math.max(1,Math.abs(r),Math.abs(n))&&Math.abs(i-o)<=l*Math.max(1,Math.abs(i),Math.abs(o))&&Math.abs(s-a)<=l*Math.max(1,Math.abs(s),Math.abs(a))}function fH(e,t,r){const i=r[0]-t[0],s=r[1]-t[1],n=r[2]-t[2];let o=i*i+s*s+n*n;return o>0?(o=1/Math.sqrt(o),e[0]=i*o,e[1]=s*o,e[2]=n*o,e):(e[0]=0,e[1]=0,e[2]=0,e)}const mH=RO,yH=kO,gH=NO,_H=DO,vH=FO,wH=IO,bH=UO;Object.freeze(Object.defineProperty({__proto__:null,abs:VB,add:jB,angle:cH,bezier:rH,ceil:GB,clamp:WB,copy:FB,cross:XB,crossAndNormalize:QB,direction:fH,dist:_H,distance:DO,div:gH,divide:NO,dot:jO,equals:pH,exactEquals:dH,floor:zB,hermite:tH,inverse:KB,len:wH,length:IO,lerp:eH,max:qB,min:HB,mul:yH,multiply:kO,negate:YB,normalize:F1,random:iH,rotateX:aH,rotateY:lH,rotateZ:uH,round:ZB,scale:LO,scaleAndAdd:JB,set:UB,sign:BB,sqrDist:vH,sqrLen:bH,squaredDistance:FO,squaredLength:UO,str:hH,sub:mH,subtract:RO,transformMat3:nH,transformMat4:sH,transformQuat:oH},Symbol.toStringTag,{value:"Module"}));function Fr(e){let t=e*e;return e<0&&(t*=-1),t}function SH(e){return e.translation[0]=0,e.translation[1]=0,e.translation[2]=0,e.heading=0,e.tilt=0,e}function TH(e,t,r){const i=r,s=e.state,n=e.device,o=t.tiltDirection==="forward-down"?1:-1,a=1;return n.deviceType==="standard"?(i.translation[0]=Fr(s.axes[0]),i.translation[1]=Fr(s.axes[1]),i.translation[2]=Fr(s.buttons[7])-Fr(s.buttons[6]),i.heading=Fr(s.axes[2]),i.tilt=Fr(s.axes[3])):n.deviceType==="spacemouse"&&(i.translation[0]=1.2*Fr(s.axes[0]),i.translation[1]=1.2*Fr(s.axes[1]),i.translation[2]=2*-Fr(s.axes[2]),i.heading=1.2*Fr(s.axes[5]),i.tilt=1.2*Fr(s.axes[3])),i.tilt*=o,LO(i.translation,i.translation,a),i}function $H(e){return e.translation[0]===0&&e.translation[1]===0&&e.translation[2]===0&&e.heading===0&&e.tilt===0&&e.zoom===0}let EH=class extends it{constructor(t){super(!0),this._view=t,this._frameTask=null,this._watchHandles=new wl,this._currentDevice=null,this._transformation={translation:[0,0,0],heading:0,tilt:0,zoom:0},this._handle=this.registerIncoming("gamepad",r=>this._handleGamePadEvent(r)),this._handle.pause()}onInstall(t){super.onInstall(t),this._watchHandles.add([X(()=>{var r;return(r=this._view.navigation.gamepad)==null?void 0:r.enabled},r=>{r?(this._handle.resume(),this._frameTask||(this._frameTask=rl({update:i=>this._frameUpdate(i.deltaTime)}))):(this._handle.pause(),this._frameTask&&(this._frameTask.remove(),this._frameTask=null))},St)])}onUninstall(){this._watchHandles.removeAll(),this._frameTask&&(this._frameTask.remove(),this._frameTask=null),super.onUninstall()}_handleGamePadEvent(t){var i;const r=this._view.navigation.gamepad.device;r&&t.data.device!==r||this._currentDevice&&this._currentDevice!==t.data.device||(t.data.action==="end"?(this._currentDevice=null,SH(this._transformation)):(this._currentDevice=t.data.device,TH(t.data,this._view.navigation.gamepad,this._transformation)),(i=this._frameTask)==null||i.resume())}_frameUpdate(t){var f;const r=this._transformation;if($H(r))return void((f=this._frameTask)==null?void 0:f.pause());const i=this._view.viewpoint.clone(),s=this._view.navigation.gamepad.velocityFactor,n=xH*s*t;ym(i,i,[r.translation[0]*n,-r.translation[1]*n]);const o=1+r.translation[2]*AH*t,a=this._view.constraints.rotationEnabled?-r.heading*MH*t:0,l=this._view.size,h=[l[0]/2,l[1]];dO(i,i,o,a,h,l);const p=this._view.constraints.constrain(i,this._view.viewpoint);this._view.viewpoint=p}};const MH=.06,xH=.7,AH=6e-4;function GO(e){const t=()=>e(document.visibilityState==="visible");return document.addEventListener("visibilitychange",t),ue(()=>document.removeEventListener("visibilitychange",t))}let PH=class extends it{constructor(t,r,i){super(!0),this.view=t,this.keys=r,this._isSticky=!1,this._pressedKeys=new Set,this._timeout=void 0,this._currentDirection=void 0,this._stickyKeyDuration=200,this._handleKey=s=>{const n=this._keyMap[s.data.key];if(s.modifiers.has("Meta")||s.modifiers.has("Control"))return void this._stopMovement();if(n==null)return;s.stopPropagation(),s.preventDefault();const o=s.type==="key-down";if(this._pressedKeys[o?"add":"delete"](n),o){if(this._direction===n)return;this._direction=n,this._isSticky=!1,this._setTimeout(()=>{this._isSticky&&this._handlePopKey()})}else{const a=this._timeout===void 0,l=this._pressedKeys.size>0;a||l?this._handlePopKey():this._isSticky=!0}},this._handlePopKey=()=>{this._direction=Array.from(this._pressedKeys).pop(),this._direction==null&&this._stopMovement()},this._stopMovement=()=>{this._isSticky=!1,this._direction=void 0,this._pressedKeys.clear(),this._setTimeout(void 0)},this._keyMap={[r.left]:"left",[r.right]:"right",[r.up]:"up",[r.down]:"down"},this.registerIncoming("key-down",i,this._handleKey),this.registerIncoming("key-up",i,this._handleKey),this.registerIncoming("blur",i,this._stopMovement),this._visibilityHandle=GO(s=>s?null:this._stopMovement())}onUninstall(){var t;this._stopMovement(),(t=this._visibilityHandle)==null||t.remove()}get _direction(){return this._currentDirection}set _direction(t){const r=this._currentDirection!=null;if(t!=null){if(r||this.view.mapViewNavigation.begin(),this._currentDirection!==t)switch(t){case"left":this.view.mapViewNavigation.continuousPanLeft();break;case"right":this.view.mapViewNavigation.continuousPanRight();break;case"up":this.view.mapViewNavigation.continuousPanUp();break;case"down":this.view.mapViewNavigation.continuousPanDown()}}else r&&this.view.mapViewNavigation.stop();this._currentDirection=t}_setTimeout(t){clearTimeout(this._timeout),this._timeout=t===void 0?void 0:setTimeout(()=>{this._timeout=void 0,t()},this._stickyKeyDuration)}},OH=class extends it{constructor(t,r,i){super(!0),this.view=t,this.keys=r,this._keyToDirection=new Map,this._pressed=!1,this._addKeysMapping(r),this.registerIncoming("key-down",i,s=>this._handleKeyDown(s)),this.registerIncoming("key-up",i,s=>this._handleKeyUp(s)),this.registerIncoming("blur",i,()=>this._handleStop()),this._visibilityHandle=GO(s=>s?null:this._handleStop())}onUninstall(){var t;(t=this._visibilityHandle)==null||t.remove(),this._handleStop()}_addKeysMapping(t){this._addKeyMapping(t.clockwise,"clockwise"),this._addKeyMapping(t.counterClockwise,"counterClockwise"),this._addKeyMapping(t.reset,"reset")}_addKeyMapping(t,r){for(const i of t)this._keyToDirection.set(i,r)}_handleKeyDown(t){t.data.repeat||this._handleKey(t,!0)}_handleKeyUp(t){this._handleKey(t,!1)}_handleStop(){this._pressed&&(this._pressed=!1,this.view.mapViewNavigation.stop())}_handleKey(t,r){const i=t.modifiers;if(i.size>0&&!i.has("Shift")||!this.view.constraints.rotationEnabled)return;const s=this._keyToDirection.get(t.data.key);if(this._pressed=s!=null,this._pressed){if(t.preventDefault(),r)switch(this.view.mapViewNavigation.begin(),s){case"clockwise":this.view.mapViewNavigation.continuousRotateClockwise();break;case"counterClockwise":this.view.mapViewNavigation.continuousRotateCounterclockwise();break;case"reset":this.view.mapViewNavigation.resetRotation()}else this._pressed=!1,this.view.mapViewNavigation.stop();t.stopPropagation()}}};var Na;(function(e){e[e.IN=0]="IN",e[e.OUT=1]="OUT"})(Na||(Na={}));let CH=class extends it{constructor(t,r,i){super(!0),this.view=t,this.keys=r,this._keysToZoomAction={},this.registerIncoming("key-down",i,s=>this._handleKeyDown(s)),r.zoomIn.forEach(s=>this._keysToZoomAction[s]=Na.IN),r.zoomOut.forEach(s=>this._keysToZoomAction[s]=Na.OUT)}_handleKeyDown(t){this._handleKey(t)}_handleKey(t){const r=t.modifiers;if(r.size>0&&!r.has("Shift"))return;const{key:i}=t.data;if(!(i in this._keysToZoomAction))return;const s=this._keysToZoomAction[i],{mapViewNavigation:n}=this.view;let o=null;switch(s){case Na.IN:o=n.zoomIn();break;case Na.OUT:o=n.zoomOut();break;default:return}n.begin(),o.then(()=>n.end()),t.stopPropagation()}};const IH=.6;let RH=class extends it{constructor(t,r){super(!0),this._view=t,this._canZoom=!0,this.registerIncoming("mouse-wheel",r,i=>this._handleMouseWheel(i))}_handleMouseWheel(t){if(this._view.navigation.actionMap.mouseWheel!=="zoom"||(t.preventDefault(),t.stopPropagation(),!this._canZoom))return;const r=this._view.mapViewNavigation,{x:i,y:s,deltaY:n}=t.data,o=1/IH**(1/60*n),a=r.zoom(o,[i,s]);a&&(this._canZoom=!1,a.catch(()=>{}).then(()=>{this._canZoom=!0,r.end()}))}},kH=class extends it{constructor(t){super(!0),this.view=t,this.registerIncoming("drag",i=>this._handleDrag(i)),this.registerIncoming("pointer-down",()=>this._stopMomentumNavigation());const r=this.view.mapViewNavigation;this._dragEventSeparator=new gm({start:(i,s)=>{r.pinch.begin(this.view,s.data),s.stopPropagation()},update:(i,s)=>{r.pinch.update(this.view,s.data),s.stopPropagation()},end:(i,s)=>{r.pinch.end(this.view),s.stopPropagation()},condition:i=>i>=2})}_handleDrag(t){this._dragEventSeparator.handle(t)}_stopMomentumNavigation(){this.view.mapViewNavigation.pinch.stopMomentumNavigation()}};function kS(e){const t=e.native;return t?{buttons:t.buttons.map(r=>r.pressed?r.value||1:0),axes:t.axes.map(r=>DH(r,e.axisThreshold))}:{buttons:[],axes:[]}}function NH(e,t){if(e.axes.length!==t.axes.length||e.buttons.length!==t.buttons.length)return!1;for(let r=0;r<e.axes.length;r++)if(e.axes[r]!==t.axes[r])return!1;for(let r=0;r<e.buttons.length;r++)if(e.buttons[r]!==t.buttons[r])return!1;return!0}function LH(e){for(let t=0;t<e.axes.length;t++)if(e.axes[t]!==0)return!1;for(let t=0;t<e.buttons.length;t++)if(e.buttons[t]!==0)return!1;return!0}function DH(e,t){const r=Math.abs(e);return r<t?0:Math.sign(e)*(r-t)/(1-t)}let FH=class{constructor(t,r){this._element=t,this._input=r,this._hasEventListeners=!1,this._onConnectGamepad=n=>{this._connectGamepad(n.gamepad)},this._onDisconnectGamepad=n=>{const o=n.gamepad,a=o.index,l=this._inputDevices[a];l&&(this._emitGamepadEvent(o,kS(l),!1),this._inputDevices.splice(a,1),this._latestUpdate.splice(a,1),this._input.gamepad.devices.remove(l),this.ensurePollingState())},this._frameTask=null,this._latestUpdate=new Array,this._inputDevices=new Array,this._callback=null;const i="getGamepads"in window.navigator,s=window.isSecureContext;this.supported=i&&s,this.supported&&(NS(n=>this._connectGamepad(n)),window.addEventListener("gamepadconnected",this._onConnectGamepad),window.addEventListener("gamepaddisconnected",this._onDisconnectGamepad),this.ensurePollingState())}destroy(){this.hasEventListeners=!1,this.supported&&(window.removeEventListener("gamepadconnected",this._onConnectGamepad),window.removeEventListener("gamepaddisconnected",this._onDisconnectGamepad))}set hasEventListeners(t){this._hasEventListeners!==t&&(this._hasEventListeners=t,this.ensurePollingState())}get _eventsEnabled(){return this.supported&&this._inputDevices.length>0&&this._hasEventListeners}set onEvent(t){this._callback=t}_connectGamepad(t){const r=new Dv(t);r.deviceType!=="unknown"&&(this._inputDevices[t.index]=r,this._input.gamepad.devices.add(r)),this.ensurePollingState()}ensurePollingState(){this._eventsEnabled?this._startPolling():this._stopPolling()}_startPolling(){this._frameTask==null&&(this._frameTask=rl({update:()=>this._readGamepadState()}))}_stopPolling(){this._frameTask!=null&&(this._frameTask.remove(),this._frameTask=null,this._latestUpdate=new Array)}_readGamepadState(){const t=document.hasFocus(),r=this._element.contains(document.activeElement),i=this._input.gamepad.enabledFocusMode==="document"&&!t||this._input.gamepad.enabledFocusMode==="view"&&!r;NS(s=>{const n=this._inputDevices[s.index];if(!n)return;const o=this._latestUpdate[s.index],a=kS(n),l=i||LH(a);o&&(o.timestamp===s.timestamp||!o.active&&l||NH(o.state,a))||this._emitGamepadEvent(s,a,!l)})}_emitGamepadEvent(t,r,i){const s=this._latestUpdate[t.index],n=s&&s.active;if(!n&&!i)return;const o=!n&&i?"start":n&&i?"update":"end";this._latestUpdate[t.index]={timestamp:t.timestamp,state:r,active:i},this._callback&&this._callback({device:this._inputDevices[t.index],state:r,action:o})}};function UH(e){if(!e||!e.connected)return!1;for(let t=0;t<e.axes.length;t++)if(isNaN(e.axes[t]))return!1;return!0}function NS(e){for(const t of navigator.getGamepads())UH(t)&&e(t)}const LS=A("edge"),jH=A("chrome"),GH=A("ff"),zH=A("safari"),DS="esri-view-surface",ta={touchNone:`${DS}--touch-none`,touchPan:`${DS}--touch-pan`};let zO=class VO{constructor(t,r){this._active={},this._callback=()=>{},this._activePointerCaptures=new Set,this._keyDownState=new Set,this._eventId=1,this._browserTouchPanningEnabled=!1,this._element=t,t.getAttribute("tabindex")||t.setAttribute("tabindex","0"),this._eventHandlers={"key-down":this._handleKey,"key-up":this._handleKey,"pointer-down":this._handlePointer,"pointer-move":this._handlePointerPreventDefault,"pointer-up":this._handlePointerPreventDefault,"pointer-enter":this._handlePointer,"pointer-leave":this._handlePointer,"pointer-cancel":this._handlePointer,"mouse-wheel":this._handleMouseWheel,"pointer-capture-lost":this._handlePointerCaptureLost},this._updateTouchAction(),this._element.addEventListener("keydown",this._preventAltKeyDefault),this._gamepadSource=new FH(t,r),this._gamepadSource.onEvent=i=>this._callback("gamepad",i)}destroy(){this._callback=()=>{},this.activeEvents=null,this._activePointerCaptures.forEach(t=>this._releasePointerCaptureSafe(t)),this._activePointerCaptures.clear(),this._gamepadSource=ke(this._gamepadSource),this._removeTouchAction(),this._element.removeEventListener("keydown",this._preventAltKeyDefault)}get browserTouchPanningEnabled(){return this._browserTouchPanningEnabled}set browserTouchPanningEnabled(t){this._browserTouchPanningEnabled=t,this._updateTouchAction(),this._updateTouchEventHandling()}set onEventReceived(t){this._callback=t}set activeEvents(t){for(const r in this._active)if(!t||!t.has(r)){const i=this._active[r];this._element.removeEventListener(_y[r],i),delete this._active[r]}t&&t.forEach(r=>{if(!this._active[r]&&_y[r]){const i=(this._eventHandlers[r]||this._handleDefault).bind(this,r);this._element.addEventListener(_y[r],i),this._active[r]=i}}),this._gamepadSource&&(this._gamepadSource.hasEventListeners=(t==null?void 0:t.has("gamepad"))??!1)}setPointerCapture(t,r){r?this._setPointerCaptureSafe(t.pointerId):(this._releasePointerCaptureSafe(t.pointerId),this._activePointerCaptures.delete(t.pointerId))}_updateTouchAction(){this._element.classList.remove(this._browserTouchPanningEnabled?ta.touchNone:ta.touchPan),this._element.classList.add(this._browserTouchPanningEnabled?ta.touchPan:ta.touchNone)}_updateTouchEventHandling(){this._browserTouchPanningEnabled?this._element.addEventListener("touchmove",this._preventMultiTouchPanning):this._element.removeEventListener("touchmove",this._preventMultiTouchPanning)}_removeTouchAction(){this._element.classList.remove(ta.touchNone),this._element.classList.remove(ta.touchPan),this._element.removeEventListener("touchmove",this._preventMultiTouchPanning)}_setPointerCaptureSafe(t){try{this._element.setPointerCapture(t),this._activePointerCaptures.add(t)}catch{}}_releasePointerCaptureSafe(t){try{if(this._element.hasPointerCapture&&!this._element.hasPointerCapture(t))return;this._element.releasePointerCapture(t)}catch{}}_updateNormalizedPointerLikeEvent(t,r){const i=OP(this._element,t);return VO.test.disableSubpixelCoordinates&&(i.x=Math.round(i.x),i.y=Math.round(i.y)),r.x=i.x,r.y=i.y,r}_handleKey(t,r){const{key:i}=r;i&&t==="key-up"&&this._keyDownState.delete(i);const s={native:r,key:i,repeat:!!i&&this._keyDownState.has(i)};i&&t==="key-down"&&this._keyDownState.add(s.key),this._callback(t,s)}_handlePointer(t,r){const i=this._updateNormalizedPointerLikeEvent(r,{native:r,x:0,y:0,pointerType:r.pointerType,button:r.button,buttons:r.buttons,eventId:this._eventId++});this._callback(t,i)}_handlePointerPreventDefault(t,r){const i=this._updateNormalizedPointerLikeEvent(r,{native:r,x:0,y:0,pointerType:r.pointerType,button:r.button,buttons:r.buttons,eventId:this._eventId++});r.preventDefault(),this._callback(t,i)}_getDeltaFromTrackpadOrMouseWheel(t){return t.shiftKey&&A("mac")&&t.deltaY===0?t.deltaX:t.deltaY}_handleMouseWheel(t,r){let i=this._getDeltaFromTrackpadOrMouseWheel(r);switch(r.deltaMode){case 0:LS&&(i=i/document.documentElement.clientHeight*600);break;case 1:i*=30;break;case 2:i*=900}LS?i*=.7:jH||zH?i*=.6:GH&&(i*=1.375);const s=100,n=Math.abs(i);n>s&&(i=i/n*200/(1+Math.exp(-.02*(n-s))));const o=this._updateNormalizedPointerLikeEvent(r,{native:r,x:0,y:0,deltaY:i});this._callback(t,o)}_handlePointerCaptureLost(t,r){this._activePointerCaptures.delete(r.pointerId),this._handleDefault(t,r)}_handleDefault(t,r){const i={native:r};r.preventDefault(),this._callback(t,i)}_preventAltKeyDefault(t){t.key==="Alt"&&t.preventDefault()}_preventMultiTouchPanning(t){t.touches.length>1&&t.preventDefault()}};zO.test={disableSubpixelCoordinates:!1};const _y={"key-down":"keydown","key-up":"keyup","pointer-down":"pointerdown","pointer-up":"pointerup","pointer-move":"pointermove","mouse-wheel":"wheel","pointer-capture-got":"gotpointercapture","pointer-capture-lost":"lostpointercapture","context-menu":"contextmenu","pointer-enter":"pointerenter","pointer-leave":"pointerleave","pointer-cancel":"pointercancel",focus:"focus",blur:"blur"};let VH=class extends it{constructor(){super(!0),this.registerIncoming("context-menu",t=>t.data.native.preventDefault())}};const dt={maximumClickDelay:300,movementUntilMouseDrag:1.5,movementUntilPenDrag:6,movementUntilTouchDrag:6,holdDelay:500,maximumDoubleClickDelay:250,maximumDoubleClickDistance:10,maximumDoubleTouchDelay:350,maximumDoubleTouchDistance:35};function sf(e,t){return Math.abs(t.x-e.x)+Math.abs(t.y-e.y)}function BH(e,t){const r=t.x-e.x,i=t.y-e.y;return Math.sqrt(r*r+i*i)}function HH(e,t){if(t?(t.radius=0,t.center.x=0,t.center.y=0):t={radius:0,center:lt()},e.length===0)return t;if(e.length===1)return t.center.x=e[0].x,t.center.y=e[0].y,t;if(e.length===2){const[$,E]=e,[P,O]=[E.x-$.x,E.y-$.y];return t.radius=Math.sqrt(P*P+O*O)/2,t.center.x=($.x+E.x)/2,t.center.y=($.y+E.y)/2,t}let r=0,i=0;for(let $=0;$<e.length;$++)r+=e[$].x,i+=e[$].y;r/=e.length,i/=e.length;const s=e.map($=>$.x-r),n=e.map($=>$.y-i);let o=0,a=0,l=0,h=0,p=0,f=0,m=0;for(let $=0;$<s.length;$++){const E=s[$],P=n[$],O=E*E,L=P*P;o+=O,a+=L,l+=E*P,h+=O*E,p+=L*P,f+=E*L,m+=P*O}const y=.5*(h+f),_=.5*(p+m),v=o*a-l*l,w=(y*a-_*l)/v,b=(o*_-l*y)/v,M=lt(w+r,b+i);return{radius:Math.sqrt(w*w+b*b+(o+a)/e.length),center:M}}function Eo(e){const{native:t}=e,{pointerId:r,button:i,pointerType:s}=t;return s==="mouse"?`${r}:${i}`:`${s}`}let qH=class extends it{constructor(t=dt.maximumDoubleClickDelay,r=dt.maximumDoubleClickDistance,i=dt.maximumDoubleTouchDelay,s=dt.maximumDoubleTouchDistance,n=bl){super(!1),this._maximumDoubleClickDelay=t,this._maximumDoubleClickDistance=r,this._maximumDoubleTouchDelay=i,this._maximumDoubleTouchDistance=s,this._clock=n,this._doubleTapDragReady=!1,this._doubleTapDragActive=!1,this._dragStartCenter=lt(0,0),this._pointerState=new Map,this._doubleTapDrag=this.registerOutgoing("double-tap-drag"),this._dragEventSeparator=new gm({start:(o,a)=>this._dragStart(o,a),update:(o,a)=>this._dragUpdate(a),end:(o,a)=>this._dragEnd(a)}),this.registerIncoming("drag",o=>this._dragEventSeparator.handle(o)),this.registerIncoming("pointer-down",o=>this._handlePointerDown(o)),this.registerIncoming("pointer-up",()=>this._handlePointerUp())}onUninstall(){this._pointerState.forEach(t=>{t.doubleTapTimeout=Ce(t.doubleTapTimeout)})}get hasPendingInputs(){for(const t of this._pointerState.values())if(t.doubleTapTimeout!=null)return!0;return!1}_clearPointerDown(t){const r=this._pointerState.get(t);r&&(r.doubleTapTimeout=Ce(r.doubleTapTimeout),this._pointerState.delete(t),this.refreshHasPendingInputs())}_dragStart(t,r){if(!this._doubleTapDragReady||t!==1)return;this._doubleTapDragReady=!1,this._doubleTapDragActive=!0;const{data:i,modifiers:s}=r,{center:n}=i;this._dragStartCenter=n;const o=vy("begin",lt(0,0),i);this._doubleTapDrag.emit(o,void 0,s),r.stopPropagation()}_dragUpdate(t){if(!this._doubleTapDragActive)return;const{data:r,modifiers:i}=t,{center:s}=r,n=vy("update",lt(s.x-this._dragStartCenter.x,s.y-this._dragStartCenter.y),r);this._doubleTapDrag.emit(n,void 0,i),t.stopPropagation()}_dragEnd(t){if(!this._doubleTapDragActive)return;const{data:r,modifiers:i}=t,{center:s}=r,n=vy("end",lt(s.x-this._dragStartCenter.x,s.y-this._dragStartCenter.y),r);this._doubleTapDrag.emit(n,void 0,i),this._doubleTapDragActive=!1,t.stopPropagation()}_handlePointerDown(t){const{data:r}=t,i=Eo(r),s=this._pointerState.get(i),{pointerType:n}=r.native;if(s){const o=n==="touch"?this._maximumDoubleTouchDistance:this._maximumDoubleClickDistance;this._clearPointerDown(i),sf(s.event.data,r)>o?this._storePointerDown(t):this._doubleTapDragReady=!0}else this._storePointerDown(t)}_handlePointerUp(){this._doubleTapDragReady=!1}_storePointerDown(t){const{data:r}=t,{pointerType:i}=r.native,s=Eo(r),n=i==="touch"?this._maximumDoubleTouchDelay:this._maximumDoubleClickDelay,o=this._clock.setTimeout(()=>this._clearPointerDown(s),n);this._pointerState.set(s,{event:t,doubleTapTimeout:o}),this.refreshHasPendingInputs()}};function vy(e,t,r){const{button:i,buttons:s,pointer:n,pointers:o,pointerType:a,timestamp:l}=r;return{action:e,delta:t,button:i,buttons:s,pointer:n,pointers:o,pointerType:a,timestamp:l}}let WH=class extends it{constructor(t){super(!1),this._navigationTouch=t,this._startStateModifiers=new Set,this._activePointerMap=new Map,this._isDragging=!1,this._isCurrentDragSuppressed=!1,this._drag=this.registerOutgoing("drag"),this.registerIncoming("pointer-drag",this._handlePointerDrag.bind(this)),this.registerIncoming("pointer-up",this._handlePointerUpAndPointerLost.bind(this)),this.registerIncoming("pointer-capture-lost",this._handlePointerUpAndPointerLost.bind(this)),this.registerIncoming("pointer-cancel",this._handlePointerUpAndPointerLost.bind(this))}_createPayload(t,r,i,s){return{action:t,pointerType:this._pointerType,button:this._mouseButton,buttons:r.buttons,timestamp:s,pointers:ZH(this._activePointerMap),pointer:r,angle:i.angle,radius:i.radius,center:i.center}}_addPointer(t){const r=t.native.pointerId,i=Yh(this._activePointerMap).angle,s={event:t,initialAngle:0,lastAngle:0};this._activePointerMap.set(r,s);const n=tp(s,BO(this._activePointerMap));s.initialAngle=n,s.lastAngle=n,this._updatePointerAngles(i)}_updatePointer(t){if(t&&t.x==null&&t.y==null)return;const r=t.native.pointerId,i=this._activePointerMap.get(r);i?i.event=t:this._addPointer(t)}_removePointer(t){const r=Yh(this._activePointerMap).angle;this._activePointerMap.delete(t),this._updatePointerAngles(r)}_updatePointerAngles(t){const r=Yh(this._activePointerMap);this._activePointerMap.forEach(i=>{i.initialAngle=tp(i,r)-t,i.lastAngle=tp(i,r)-t})}_emitEvent(t,r,i){const s=Yh(this._activePointerMap);this._drag.emit(this._createPayload(t,r,s,i),void 0,this._startStateModifiers)}_handlePointerUpAndPointerLost(t){const r=t.data.native.pointerId,i=t.timestamp;this._activePointerMap.get(r)&&(this._activePointerMap.size===1?(this._updatePointer(t.data),!this._isCurrentDragSuppressed&&this._emitEvent("end",t.data,i),this._isDragging=!1,this._isCurrentDragSuppressed=!1,this._removePointer(r)):(this._removePointer(r),this._emitEvent("removed",t.data,t.timestamp)))}_handlePointerDrag(t){const r=t.data,i=r.currentEvent,s=t.timestamp;switch(r.action){case"start":case"update":this._isDragging?this._activePointerMap.has(i.native.pointerId)?(this._updatePointer(i),!this._isCurrentDragSuppressed&&this._emitEvent("update",i,s)):(this._addPointer(i),this._emitEvent("added",i,s),this._isCurrentDragSuppressed=this._isSuppressed):(this._updatePointer(i),this._pointerType=t.data.startEvent.pointerType,this._mouseButton=t.data.startEvent.button,this._startStateModifiers=t.modifiers,this._isDragging=!0,this._isCurrentDragSuppressed=this._isSuppressed,!this._isCurrentDragSuppressed&&this._emitEvent("start",i,s))}}get _isSuppressed(){return!!this._navigationTouch&&!this._navigationTouch.browserTouchPanEnabled&&this._pointerType==="touch"&&this._activePointerMap.size===1}};function BO(e){const t=[];return e.forEach(r=>{t.push(lt(r.event.x,r.event.y))}),HH(t)}function Yh(e){const t=BO(e);let r=0;return e.forEach(i=>{let s=tp(i,t),n=s-i.lastAngle;for(;n>Math.PI;)n-=2*Math.PI;for(;n<-Math.PI;)n+=2*Math.PI;s=i.lastAngle+n,i.lastAngle=s;const o=s-i.initialAngle;r+=o}),r/=e.size||1,{angle:r,radius:t.radius,center:t.center}}function ZH(e){const t=new Map;return e.forEach((r,i)=>t.set(i,r.event)),t}function tp(e,t){const r=e.event,i=r.x-t.center.x,s=r.y-t.center.y;return Math.atan2(s,i)}var FS;(function(e){e[e.Left=0]="Left",e[e.Middle=1]="Middle",e[e.Right=2]="Right",e[e.Back=3]="Back",e[e.Forward=4]="Forward",e[e.Undefined=-1]="Undefined"})(FS||(FS={}));let JH=class extends it{constructor(t=dt.maximumDoubleClickDelay,r=dt.maximumDoubleClickDistance,i=dt.maximumDoubleTouchDelay,s=dt.maximumDoubleTouchDistance,n=bl){super(!1),this._maximumDoubleClickDelay=t,this._maximumDoubleClickDistance=r,this._maximumDoubleTouchDelay=i,this._maximumDoubleTouchDistance=s,this._clock=n,this._pointerState=new Map,this._immediateDoubleClick=this.registerOutgoing("immediate-double-click"),this.registerIncoming("pointer-down",this._handlePointerDown.bind(this)),this.registerIncoming("pointer-up",this._handlePointerUp.bind(this))}onUninstall(){this._pointerState.forEach(t=>{t.immediateDoubleClick&&t.immediateDoubleClick.timeoutHandle.remove()}),super.onUninstall()}_handlePointerDown(t){const r=t.data,i=Eo(r);if(!this._pointerState.has(i)){const s={downButton:r.native.button,x:r.x,y:r.y,immediateDoubleClick:null};this._pointerState.set(i,s),this.startCapturingPointer(r.native)}}_handlePointerUp(t){const r=t.data,i=Eo(r),s=this._pointerState.get(i);if(s&&s.downButton===r.native.button){const n=s.immediateDoubleClick,o=t.data.native.pointerType==="touch"?this._maximumDoubleTouchDistance:this._maximumDoubleClickDistance;n?(n.timeoutHandle.remove(),sf(n,t.data)>o?this._startImmediateDoubleClick(t,s):(this._immediateDoubleClick.emit(t.data,void 0,n.modifiers),this._removeState(r))):sf(s,t.data)>o?this._removeState(r):this._startImmediateDoubleClick(t,s)}}_startImmediateDoubleClick(t,r){const i=t.data.native.pointerType==="touch"?this._maximumDoubleTouchDelay:this._maximumDoubleClickDelay;r.immediateDoubleClick={x:t.data.x,y:t.data.y,modifiers:t.modifiers,timeoutHandle:this._clock.setTimeout(()=>this._removeState(t.data),i)}}_removeState(t){const r=Eo(t);this._pointerState.delete(r),this.stopCapturingPointer(t.native),this.refreshHasPendingInputs()}},YH=class extends it{constructor(t=dt.maximumClickDelay,r=dt.movementUntilMouseDrag,i=dt.movementUntilPenDrag,s=dt.movementUntilTouchDrag,n=dt.holdDelay,o=bl){super(!1),this._maximumClickDelay=t,this._movementUntilMouseDrag=r,this._movementUntilPenDrag=i,this._movementUntilTouchDrag=s,this._holdDelay=n,this._clock=o,this._pointerState=new Map,this._pointerDrag=this.registerOutgoing("pointer-drag"),this._immediateClick=this.registerOutgoing("immediate-click"),this._pointerHold=this.registerOutgoing("hold"),this.registerIncoming("pointer-down",a=>this._handlePointerDown(a)),this.registerIncoming("pointer-up",a=>this._handlePointerLoss(a,"pointer-up")),this.registerIncoming("pointer-capture-lost",a=>this._handlePointerLoss(a,"pointer-capture-lost")),this.registerIncoming("pointer-cancel",a=>this._handlePointerLoss(a,"pointer-cancel")),this._moveHandle=this.registerIncoming("pointer-move",a=>this._handlePointerMove(a)),this._moveHandle.pause()}onUninstall(){this._pointerState.forEach(t=>{t.holdTimeout=Ce(t.holdTimeout)}),super.onUninstall()}_handlePointerDown(t){const r=t.data,i=r.native.pointerId;let s=null;this._pointerState.size===0&&(s=this._clock.setTimeout(()=>{const o=this._pointerState.get(i);if(o){if(!o.isDragging){const a=o.previousEvent;this._pointerHold.emit(a,void 0,t.modifiers),o.holdEmitted=!0}o.holdTimeout=null}},this._holdDelay));const n={startEvent:r,previousEvent:r,startTimestamp:t.timestamp,isDragging:!1,downButton:r.native.button,holdTimeout:s,modifiers:new Set};this._pointerState.set(i,n),this.startCapturingPointer(r.native),this._moveHandle.resume(),this._pointerState.size>1&&this._startDragging(t)}_handlePointerMove(t){const r=t.data,i=r.native.pointerId,s=this._pointerState.get(i);s&&(s.isDragging?this._pointerDrag.emit(Kh("update",s,r),void 0,s.modifiers):BH(r,s.startEvent)>this._getDragThreshold(r.native.pointerType)&&this._startDragging(t),s.previousEvent=r)}_getDragThreshold(t){switch(t){case"touch":return this._movementUntilTouchDrag;case"pen":return this._movementUntilPenDrag;default:return this._movementUntilMouseDrag}}_startDragging(t){const r=t.data,i=r.native.pointerId;this._pointerState.forEach(s=>{s.holdTimeout!=null&&(s.holdTimeout.remove(),s.holdTimeout=null),s.isDragging||(s.modifiers=t.modifiers,s.isDragging=!0,i===s.startEvent.native.pointerId?this._pointerDrag.emit(Kh("start",s,r)):this._pointerDrag.emit(Kh("start",s,s.previousEvent),t.timestamp))})}_handlePointerLoss(t,r){const i=t.data,s=i.native.pointerId,n=this._pointerState.get(s);n&&(n.holdTimeout!=null&&(n.holdTimeout.remove(),n.holdTimeout=null),n.isDragging?this._pointerDrag.emit(Kh("end",n,r==="pointer-up"?i:n.previousEvent),void 0,n.modifiers):r==="pointer-up"&&n.downButton===i.native.button&&t.timestamp-n.startTimestamp<=this._maximumClickDelay&&!n.holdEmitted&&this._immediateClick.emit(i),this._pointerState.delete(s),this.stopCapturingPointer(i.native),this._pointerState.size===0&&this._moveHandle.pause())}};function Kh(e,t,r){return{action:e,startEvent:t.startEvent,previousEvent:t.previousEvent,currentEvent:r}}let KH=class extends it{constructor(t=dt.maximumDoubleClickDelay,r=dt.maximumDoubleClickDistance,i=dt.maximumDoubleTouchDelay,s=dt.maximumDoubleTouchDistance,n=bl){super(!1),this._maximumDoubleClickDelay=t,this._maximumDoubleClickDistance=r,this._maximumDoubleTouchDelay=i,this._maximumDoubleTouchDistance=s,this._clock=n,this._pointerState=new Map,this._click=this.registerOutgoing("click"),this._doubleClick=this.registerOutgoing("double-click"),this.registerIncoming("immediate-click",o=>this._handleImmediateClick(o)),this.registerIncoming("pointer-down",o=>this._handlePointerDown(o))}onUninstall(){this._pointerState.forEach(t=>t.doubleClickTimer=Ce(t.doubleClickTimer))}get hasPendingInputs(){for(const t of this._pointerState.values())if(t.doubleClickTimer!=null)return!0;return!1}_clearDoubleClickTimer(t,r){const i=this._pointerState.get(t);i&&(i.doubleClickTimer=Ce(i.doubleClickTimer),r&&this._click.emit(i.event.data,void 0,i.event.modifiers),this._pointerState.delete(t),this.refreshHasPendingInputs())}_doubleClickTimeoutExceeded(t){const r=this._pointerState.get(t);r.pointerDownCount===1&&this._click.emit(r.event.data,void 0,r.event.modifiers),r.doubleClickTimer=null,this._pointerState.delete(t),this.refreshHasPendingInputs()}_handleImmediateClick(t){const r=t.data,{pointerType:i}=r.native,s=XH(r);if(!this._pointerState.has(s))return void this._startClick(t);const n=this._pointerState.get(s),{data:o,modifiers:a}=n.event,l=i==="touch"?this._maximumDoubleTouchDistance:this._maximumDoubleClickDistance;sf(o,r)>l?(this._clearDoubleClickTimer(s,!0),this._startClick(t)):(this._clearDoubleClickTimer(s,!1),n.pointerDownCount===2&&this._doubleClick.emit(o,void 0,a))}_handlePointerDown(t){const r=Eo(t.data),i=this._pointerState.get(r);i&&(i.pointerDownCount+=1)}_startClick(t){const{data:r}=t,{native:{pointerType:i}}=r,s=Eo(r),n=i==="touch"?this._maximumDoubleTouchDelay:this._maximumDoubleClickDelay,o=this._clock.setTimeout(()=>this._doubleClickTimeoutExceeded(s),n);this._pointerState.set(s,{event:t,doubleClickTimer:o,pointerDownCount:1}),this.refreshHasPendingInputs()}};function XH(e){const{pointerId:t,pointerType:r,button:i}=e.native;return r==="mouse"?`${t}:${i}`:`${r}`}const Xh={counter:"Control",pan:{left:"ArrowLeft",right:"ArrowRight",up:"ArrowUp",down:"ArrowDown"},zoom:{zoomIn:["=","+"],zoomOut:["-","_"]},rotate:{clockwise:["a","A"],counterClockwise:["d","D"],reset:["n","N"]}},US=Symbol("handles");let oo=class extends q{initialize(){const t=()=>{var r;return(r=this.view)==null?void 0:r.ready};this.addHandles([Or(()=>!t(),()=>this._disconnect()),Or(t,()=>this._connect())])}destroy(){this._disconnect()}get latestPointerType(){var t;return(t=this._inputManager)==null?void 0:t.latestPointerType}get latestPointerLocation(){var t;return(t=this._inputManager)==null?void 0:t.latestPointerLocation}get multiTouchActive(){var t;return((t=this._inputManager)==null?void 0:t.multiTouchActive)??!1}isModifierKeyDown(t){var r;return((r=this._inputManager)==null?void 0:r.isModifierKeyDown(t))??!1}_disconnect(){this.view.viewEvents.disconnect(),this.removeHandles(US),this._inputManager=ke(this._inputManager)}_connect(){const t=this.view.surface,r=new zO(t,this.view.input),i=[new JH,new YH,new KH,new WH(this.view.navigation),new qH],s=new mr({eventSource:r,recognizers:i}),n=new LB(this.view,["primary"]),o=new DB(this.view,["secondary"]);s.installHandlers("prevent-context-menu",[new VH],cn.INTERNAL),s.installHandlers("navigation",[new kH(this.view),new EH(this.view),new RH(this.view),new CS(this.view),new CS(this.view,[Xh.counter]),n,new PH(this.view,Xh.pan),new CH(this.view,Xh.zoom),new OH(this.view,Xh.rotate),o,new NB(this.view,"touch")],cn.INTERNAL),this.view.viewEvents.connect(s),this._source=r,this._inputManager=s,this.addHandles([X(()=>{var a,l;return(l=(a=this.view)==null?void 0:a.navigation)==null?void 0:l.browserTouchPanEnabled},a=>{this._source&&(this._source.browserTouchPanningEnabled=!a)},St),X(()=>{const{actionMap:a}=this.view.navigation;return{panActions:OS("pan",a),rotateActions:OS("rotate",a)}},({panActions:a,rotateActions:l})=>{n.pointerActions=a,o.pointerActions=l},jt)],US)}get test(){}};c([d()],oo.prototype,"view",void 0),c([d()],oo.prototype,"latestPointerType",null),c([d()],oo.prototype,"latestPointerLocation",null),c([d()],oo.prototype,"multiTouchActive",null),oo=c([S("esri.views.2d.input.MapViewInputManager")],oo);const QH=oo,jS=160;let Hu=class extends q{constructor(){super(...arguments),this._timer=void 0}get stationary(){return!this._timer}flip(){this._timestamp=performance.now(),this._timer==null&&(this._timer=setInterval(()=>{performance.now()-this._timestamp>=jS&&this.clear()},jS))}clear(){this._timer&&(clearInterval(this._timer),this._timer=void 0)}};c([d()],Hu.prototype,"_timer",void 0),c([d()],Hu.prototype,"stationary",null),Hu=c([S("esri.views.2d.support.StationaryManager")],Hu);const eq=e=>{let t=class extends e{constructor(...r){super(...r),this.fullOpacity=1,this.stateManager=new yt({constraints:new PS({view:this})}),this.goToManager=new ep({view:this}),this.stationaryManager=new Hu,this.mapViewNavigation=null,this.renderingOptions={samplingMode:"dynamic",edgeLabelsVisible:!1,labelsAnimationTime:0,labelCollisionsEnabled:!1},this.frameTask=new OB(this),this.inputManager=new QH({view:this}),this.viewEvents=new PP(this),this.padding={top:0,right:0,bottom:0,left:0},this.addHandles([X(()=>this.viewpoint,()=>this.stationaryManager.flip(),wn),this.on("resize",i=>this.stateManager.resize(i.width,i.height))])}get constraintsInfo(){return{lods:null,spatialReference:null}}get extent(){var r;return((r=this.stateManager)==null?void 0:r.extent)??null}set extent(r){this.stateManager.extent=r}get state(){return this.stateManager.state}get interacting(){return this.navigating}get stationary(){return!this.animation&&!this.navigating&&!this.resizing&&this.stationaryManager.stationary}set animation(r){const i=this._get("animation");if(r===i)return;if(i&&i.stop(),r!==this.animationManager.animation&&this.animationManager.stop(),!r||r.isFulfilled())return void this._set("animation",null);this._set("animation",r);const s=()=>{var n;this.destroyed||r===this._get("animation")&&(this._set("animation",null),(n=this.frameTask)==null||n.requestFrame())};r.when(s,s)}get constraints(){var r;return(r=this.stateManager)==null?void 0:r.constraints}set constraints(r){r.view=this;const i=this.stateManager.constraints;this.stateManager.constraints=r,i==null||i.destroy()}get padding(){var r;return(r=this.stateManager)==null?void 0:r.padding}set padding(r){this.stateManager&&(this.stateManager.padding=r)}get resizeAlign(){return this.stateManager.resizeAlign}set resizeAlign(r){this.stateManager.resizeAlign=r}get rotation(){return this.stateManager.rotation??0}set rotation(r){const{rotationEnabled:i}=this.constraints;this.constraints.rotationEnabled=!0,this.stateManager.rotation=r,this.constraints.rotationEnabled=i}get viewpoint(){return this.stateManager.viewpoint??null}set viewpoint(r){this.stateManager.viewpoint=r,this.frameTask.requestFrame()}on(r,i,s,n){return this.inputManager&&this.viewEvents.on(r,i,s,n)||super.on(r,i)}hasEventListener(r){return super.hasEventListener(r)||this.viewEvents.hasHandler(r)}goTo(r,i){return this.goToManager.goTo(r,i)}};return c([d({readOnly:!0})],t.prototype,"animationManager",void 0),c([d({readOnly:!0})],t.prototype,"fullOpacity",void 0),c([d()],t.prototype,"stateManager",void 0),c([d()],t.prototype,"constraintsInfo",null),c([d()],t.prototype,"extent",null),c([d()],t.prototype,"goToManager",void 0),c([d({readOnly:!0})],t.prototype,"state",null),c([d({readOnly:!0})],t.prototype,"mapViewNavigation",void 0),c([d()],t.prototype,"renderingOptions",void 0),c([d({readOnly:!0})],t.prototype,"interacting",null),c([d()],t.prototype,"stationary",null),c([d()],t.prototype,"animation",null),c([d({type:PS})],t.prototype,"constraints",null),c([d({readOnly:!0})],t.prototype,"inputManager",void 0),c([d()],t.prototype,"padding",null),c([d()],t.prototype,"resizeAlign",null),c([d()],t.prototype,"rotation",null),c([d({readOnly:!0})],t.prototype,"viewEvents",void 0),c([d({type:Ar})],t.prototype,"viewpoint",null),t=c([S("esri.views.Viewport2DMixin")],t),t};let GS=class{constructor(t){this._view=t,this.viewpoint=new Ar({targetGeometry:new te,scale:0,rotation:0})}get view(){return this._view}get size(){const[t,r]=this._view.size;return Math.sqrt(t*t+r*r)}get scale(){return this.viewpoint.scale}get rotation(){return this.viewpoint.rotation}get center(){return this.viewpoint.targetGeometry}get scaleToResolutionFactor(){return cO(this.center.spatialReference)}pixelsPerPanAtZoom(t){return 1/(t*this.scaleToResolutionFactor)}zoomAtPixelsPerPan(t){return 1/(t*this.scaleToResolutionFactor)}pixelsPerRotate(){return this.size/2}compareTo(t,r){r.pan=y3(this.center,t.center);let i=Math.abs(t.rotation-this.rotation);i=i>=180?360-i:i,r.rotate=Bf(i),r.sourceZoom=this.scale,r.targetZoom=t.scale}interpolate(t,r,i){const{pan:s,rotate:n,zoom:o,zoomOffset:a}=i,{center:l}=this;l.spatialReference=t.center.spatialReference,l.x=cu(t.center.x,r.center.x,s),l.y=cu(t.center.y,r.center.y,s),this.viewpoint.scale=cu(t.scale,r.scale+a,o);let h=t.rotation;const p=r.rotation;Math.abs(p-h)>=180&&(h+=360*(h<p?1:-1)),this.viewpoint.rotation=cu(h,p,n)}copyFrom(t){bt(this.viewpoint,t.viewpoint),this._view=t.view}};function ql(e,t,r,i){const s=3*e,n=3*(r-e)-s,o=1-s-n,a=3*t,l=3*(i-t)-a,h=1-a-l;function p(_){return((o*_+n)*_+s)*_}function f(_){return((h*_+l)*_+a)*_}function m(_){return(3*o*_+2*n)*_+s}function y(_,v){let w,b,M,$,E,P;for(M=_,P=0;P<8;P++){if($=p(M)-_,Math.abs($)<v)return M;if(E=m(M),Math.abs(E)<1e-6)break;M-=$/E}if(w=0,b=1,M=_,M<w)return w;if(M>b)return b;for(;w<b;){if($=p(M),Math.abs($-_)<v)return M;_>$?w=M:b=M,M=.5*(b-w)+w}return M}return function(_,v=1e-6){return f(y(_,v))}}const br={};br.ease=ql(.25,.1,.25,1),br.linear=ql(0,0,1,1),br.easeIn=br["ease-in"]=ql(.42,0,1,1),br.easeOut=br["ease-out"]=ql(0,0,.58,1),br.easeInOut=br["ease-in-out"]=ql(.42,0,.58,1);const tq=e=>e,_m=e=>e*e,Yv=e=>1-_m(1-e),rq=e=>e<.5?_m(2*e)/2:(Yv(2*(e-.5))+1)/2,Kv=e=>e*e*e,HO=e=>1-Kv(1-e),iq=e=>e<.5?Kv(2*e)/2:(HO(2*(e-.5))+1)/2,Xv=e=>e*e*e*e,qO=e=>1-Xv(1-e),sq=e=>e<.5?Xv(2*e)/2:(qO(2*(e-.5))+1)/2,Qv=e=>e*e*e*e*e,WO=e=>1-Qv(1-e),nq=e=>e<.5?Qv(2*e)/2:(WO(2*(e-.5))+1)/2,ew=e=>1-Math.cos(e*Math.PI/2),ZO=e=>1-ew(1-e),oq=e=>e<.5?ew(2*e)/2:(ZO(2*(e-.5))+1)/2,tw=e=>2**(10*(e-1)),rw=e=>1-tw(1-e),aq=e=>e<.5?tw(2*e)/2:(rw(2*(e-.5))+1)/2,iw=e=>-(Math.sqrt(1-e*e)-1),JO=e=>1-iw(1-e),lq=e=>e<.5?iw(2*e)/2:(JO(2*(e-.5))+1)/2;function Cr(e){const t=2*(e-Math.sqrt((e-1)*e)),r=t/2/e;return i=>i<r?e*i*i:t*i-t+1}function Ir(e,t){return(r,i)=>r<t?t*e(r/t,i):1-e((1-r)/(1-t),i)*(1-t)}const uq=Ir(Cr(1),1),cq=Ir(Cr(1),0),U1=Ir(Cr(1),.5),hq=Ir(Cr(2),1),dq=Ir(Cr(2),0),pq=Ir(Cr(2),.5),fq=Ir(Cr(3),1),mq=Ir(Cr(3),0),yq=Ir(Cr(3),.5),gq=Ir(Cr(4),1),_q=Ir(Cr(4),0),vq=Ir(Cr(4),.5),zS={linear:tq,"in-quad":_m,"out-quad":Yv,"in-out-quad":rq,"in-coast-quad":uq,"out-coast-quad":cq,"in-out-coast-quad":U1,"in-cubic":Kv,"out-cubic":HO,"in-out-cubic":iq,"in-coast-cubic":hq,"out-coast-cubic":dq,"in-out-coast-cubic":pq,"in-quart":Xv,"out-quart":qO,"in-out-quart":sq,"in-coast-quart":fq,"out-coast-quart":mq,"in-out-coast-quart":yq,"in-quint":Qv,"out-quint":WO,"in-out-quint":nq,"in-coast-quint":gq,"out-coast-quint":_q,"in-out-coast-quint":vq,"in-sine":ew,"out-sine":ZO,"in-out-sine":oq,"in-expo":tw,"out-expo":rw,"in-out-expo":aq,"in-circ":iw,"out-circ":JO,"in-out-circ":lq,ease:e=>br.ease(e),"ease-in":e=>br.easeIn(e),"ease-out":e=>br.easeOut(e),"ease-in-out":e=>br.easeInOut(e)};let wq=class{constructor(){this.pan=0,this.rotate=0,this.fov=0,this.sourceZoom=0,this.targetZoom=0}};const nf={desiredScreenFlow:2,minDuration:500,maxDuration:8e3},YO={maxDuration:4e3};let bq=class KO{constructor(t){this._createCamera=t,this.compared=new wq,this.segmentStart=0,this.segmentEnd=1,this.settings={desiredScreenFlow:nf.desiredScreenFlow},this.source=t(),this.target=t()}clone(){const t=new KO(this._createCamera);return t.copyFrom(this),t}copyFrom(t){this.update(t.source,t.target,t.settings)}update(t,r,i){this.source!==t&&this.source.copyFrom(t),this.target!==r&&this.target.copyFrom(r),this.source.compareTo(this.target,this.compared),this.settings.desiredScreenFlow=i.desiredScreenFlow??nf.desiredScreenFlow,this.desiredPixelFlow=this.settings.desiredScreenFlow*this.target.size,this.halfWindowSize=this.target.size/2}halfWindowPanAtZoom(t){const r=this.target.pixelsPerPanAtZoom(t);return this.halfWindowSize/r}get hasZoom(){return Math.abs(this.compared.sourceZoom-this.compared.targetZoom)>1e-5}get hasPan(){return this.compared.pan>Bt()}get hasFov(){return Math.abs(this.compared.fov)>Bt()}get hasRotate(){return this.compared.rotate>Bt()}},Sq=class{constructor(){this.pan=0,this.rotate=0,this.zoom=0,this.fov=0,this.zoomOffset=0}},Tq=class{constructor(){this.segments=new Array}get time(){return this.segments.reduce((t,r)=>t+r.time,0)}interpolateComponentsAt(t,r){t=Math.min(Math.max(t,0),1),t*=this.time;let i=0,s=0;const n=this.definition,o=this.segments.reduce((a,l)=>a||l.definition.hasZoom,!1);for(let a=0;a<this.segments.length;a++){const l=this.segments[a],h=l.definition;if(t<=l.time||a===this.segments.length-1){if(this.segmentInterpolateComponentsAt(l,l.time===0?0:t/l.time,r),n.hasPan&&!isNaN(r.pan)&&isFinite(n.compared.pan)?r.pan=(i+h.compared.pan*r.pan)/n.compared.pan:r.pan=1,n.hasRotate&&!isNaN(r.rotate)&&isFinite(n.compared.rotate)?r.rotate=(s+h.compared.rotate*r.rotate)/n.compared.rotate:r.rotate=1,o&&!isNaN(r.zoom)&&isFinite(h.compared.targetZoom)){const{sourceZoom:p,targetZoom:f}=h.compared,m=r.zoom*(f-p)+p,y=this.segments[0].definition.compared.sourceZoom,_=this.segments[this.segments.length-1].definition.compared.targetZoom,v=Math.abs(f-y)>Math.abs(p-y)?f:p;r.zoomOffset=v-_,r.zoom=(m-y)/(v-y)}else r.zoom=1;return r}t-=l.time,i+=h.compared.pan,s+=h.compared.rotate}}segmentInterpolateComponentsAt(t,r,i){t.interpolateComponentsAt(r,i)}},wy=class{get time(){return this._time}constructor(t){t&&this.update(t)}update(t){t&&(this.definition?this.definition.copyFrom(t):this.definition=t.clone()),this._updatePrecomputedVariables(),this._updatePixelFlow()}_updatePrecomputedVariables(){const t=this.definition,r=t.compared,i=r.sourceZoom,s=r.targetZoom;this._zoomSign=i>s?1:-1,this._panPixelsAtSource=r.pan*t.source.pixelsPerPanAtZoom(i);const n=(t.source.pixelsPerRotate()+t.target.pixelsPerRotate())/2;this._rotatePixels=r.rotate*n}_updatePixelFlow(){const t=this.definition.compared.sourceZoom,r=this.definition.compared.targetZoom,{hasZoom:i,hasPan:s,hasRotate:n}=this.definition;let o=0,a=0;i&&(s&&(o=(r/t-1)/(-1/(this._zoomSign*this.definition.halfWindowSize)*Math.LN2*this._panPixelsAtSource)),n&&(a=this._zoomSign*(Math.log(t/r)/Math.LN2)*this.definition.halfWindowSize/this._rotatePixels)),this._zoomPixelFlow=0,this._panPixelFlow=0,this._rotatePixelFlow=0;const l=this.definition.desiredPixelFlow;if(i&&s&&n){const h=o+a+o*a;this._zoomPixelFlow=o*a/h*l,this._panPixelFlow=a/h*l,this._rotatePixelFlow=o/h*l}else if(i&&s){const h=1+o;this._zoomPixelFlow=o/h*l,this._panPixelFlow=1/h*l}else if(i&&n){const h=1+a;this._zoomPixelFlow=a/h*l,this._rotatePixelFlow=1/h*l}else if(s&&n){const h=this._panPixelsAtSource/this._rotatePixels,p=1+h;this._panPixelFlow=h/p*l,this._rotatePixelFlow=1/p*l}else s?this._panPixelFlow=l:i?this._zoomPixelFlow=l:n&&(this._rotatePixelFlow=l);if(this._time=Math.max(this.rotateTime,this.zoomTime,this.panTime),this.fovTime>this._time){const h=this.fovTime/this._time;this._time=this.fovTime,this._zoomPixelFlow/=h,this._panPixelFlow/=h,this._rotatePixelFlow/=h}}get rotateTime(){return this.definition.hasRotate?this._rotatePixels/this._rotatePixelFlow:0}get zoomTime(){return this.definition.hasZoom?this._zoomSign*(Math.log(this.definition.compared.sourceZoom/this.definition.compared.targetZoom)/Math.LN2)*this.definition.halfWindowSize/this._zoomPixelFlow:0}get fovTime(){return this.definition.hasFov?Math.abs(this.definition.compared.fov)/$q:0}get panTime(){if(!this.definition.hasPan)return 0;if(this.definition.hasZoom){const t=-1/(this._zoomSign*this.definition.halfWindowSize)*Math.LN2,r=t*this._panPixelsAtSource;return Math.log(r*(this._zoomPixelFlow/this._panPixelFlow)+1)/(t*this._zoomPixelFlow)}return this._panPixelsAtSource/this._panPixelFlow}_interpolateComponentsZoom(t){if(t===0||t===1)return t;if(this.definition.hasZoom){const r=this.definition.compared.sourceZoom,i=this.definition.compared.targetZoom;return(r*(r/i)**-t-r)/(i-r)}return t}_interpolateComponentsFov(t){if(t===0)return this.definition.segmentStart;if(t===1)return this.definition.segmentEnd;if(this.definition.hasFov){const{segmentStart:r,segmentEnd:i}=this.definition;return r+t*(i-r)}return this.definition.segmentStart}_interpolateComponentsPan(t){if(t===0||t===1)return t;if(this.definition.hasPan&&this.definition.hasZoom){const r=-1/(this._zoomSign*this.definition.halfWindowSize)*this._zoomPixelFlow;return 1/this._panPixelsAtSource*(this._panPixelFlow*(2**(r*t*this._time)-1))/(r*Math.LN2)}return t}_interpolateComponentsRotate(t){return t}interpolateComponentsAt(t,r){t=Math.min(Math.max(t,0),1),r.zoom=this._interpolateComponentsZoom(t),r.pan=this._interpolateComponentsPan(t),r.rotate=this._interpolateComponentsRotate(t),r.zoomOffset=0,r.fov=this._interpolateComponentsFov(t)}};const $q=Bf(45);function Eq(e,t,r){const i=t-e.compared.sourceZoom,s=e.halfWindowPanAtZoom(i);return-e.halfWindowSize*(r.ascensionFactor*Math.LN2*e.compared.pan+s)*Math.log(e.compared.sourceZoom/t)/(e.desiredPixelFlow*Math.LN2*s)}function Mq(e,t,r){const i=1/t,s=Math.log(e.compared.sourceZoom*i),n=1/e.desiredPixelFlow,o=1/Math.LN2,a=t-e.compared.sourceZoom,l=1/a,h=(r.ascensionFactor*Math.LN2*e.compared.pan+e.halfWindowPanAtZoom(a))/e.halfWindowPanAtZoom(1);return e.halfWindowSize*i*n*o*l*h-e.halfWindowSize*s*n*o*l+e.halfWindowSize*s*n*o*h/(a*a)}function xq(e,t,r){const i=t-e.compared.sourceZoom,s=1/i,n=1/t,o=Math.log(e.compared.sourceZoom*n),a=(r.ascensionFactor*Math.LN2*e.compared.pan+e.halfWindowPanAtZoom(i))/e.halfWindowPanAtZoom(1);return e.halfWindowSize*s*(-2*s*n*a+2*s*o+2*n-2*o*a/(i*i)-a/(t*t))/(e.desiredPixelFlow*Math.LN2)}function Aq(e,t){return-e.halfWindowSize*Math.log(e.compared.sourceZoom/t)/(e.desiredPixelFlow*Math.LN2)}function Pq(e,t){return e.halfWindowSize/(t*e.desiredPixelFlow*Math.LN2)}function Oq(e,t){return-e.halfWindowSize/(t*t*e.desiredPixelFlow*Math.LN2)}function Cq(e,t,r){return-e.compared.pan*e.halfWindowSize*(r.ascensionFactor+r.descensionFactor-1)/(e.desiredPixelFlow*e.halfWindowPanAtZoom(t))}function Iq(e,t,r){return e.compared.pan*e.halfWindowSize*(r.ascensionFactor+r.descensionFactor-1)/(e.desiredPixelFlow*e.halfWindowPanAtZoom(t*t))}function Rq(e,t,r){return-2*e.compared.pan*e.halfWindowSize*(r.ascensionFactor+r.descensionFactor-1)/(e.desiredPixelFlow*e.halfWindowPanAtZoom(t*t*t))}function kq(e,t,r){return e.halfWindowSize*(-e.halfWindowPanAtZoom(t)-r.descensionFactor*Math.LN2*e.compared.pan+e.halfWindowPanAtZoom(e.compared.targetZoom))*Math.log(t/e.compared.targetZoom)/(e.desiredPixelFlow*Math.LN2*e.halfWindowPanAtZoom(-t+e.compared.targetZoom))}function Nq(e,t,r){const i=Math.log(t/e.compared.targetZoom),s=1/e.desiredPixelFlow,n=1/Math.LN2,o=-t+e.compared.targetZoom,a=1/o,l=(-e.halfWindowPanAtZoom(t)-r.descensionFactor*Math.LN2*e.compared.pan+e.halfWindowPanAtZoom(e.compared.targetZoom))/e.halfWindowPanAtZoom(1);return-e.halfWindowSize*i*s*n*a+e.halfWindowSize*i*s*n*l/(o*o)+e.halfWindowSize*s*n*a*l/t}function Lq(e,t,r){const i=t-e.compared.targetZoom,s=1/i,n=1/t,o=Math.log(t/e.compared.targetZoom),a=(e.halfWindowPanAtZoom(t)+r.descensionFactor*Math.LN2*e.compared.pan-e.halfWindowPanAtZoom(e.compared.targetZoom))/e.halfWindowPanAtZoom(1);return e.halfWindowSize*s*(-2*s*n*a-2*s*o+2*n+2*o*a/(i*i)-a/(t*t))/(e.desiredPixelFlow*Math.LN2)}function Dq(e,t){return e.halfWindowSize*Math.log(t/e.compared.targetZoom)/(e.desiredPixelFlow*Math.LN2)}function Fq(e,t){return e.halfWindowSize/(t*e.desiredPixelFlow*Math.LN2)}function Uq(e,t){return-e.halfWindowSize/(t*t*e.desiredPixelFlow*Math.LN2)}function jq(e){const t=e.compared.sourceZoom-e.compared.targetZoom;if(t===0)return e.compared.pan*e.halfWindowSize/(e.desiredPixelFlow*e.halfWindowPanAtZoom(e.compared.sourceZoom));const r=Math.LN2*e.compared.pan,i=t,s=e.halfWindowPanAtZoom(i),n=e.halfWindowSize*Math.log(e.compared.sourceZoom/e.compared.targetZoom)/(e.desiredPixelFlow*Math.LN2*s);return e.compared.sourceZoom<=e.compared.targetZoom?n*(r-s):n*(r+s)}function Gq(e,t){let r=zq(e,t);const i={ascensionFactor:t.ascensionFactor!=null?t.ascensionFactor:.5,descensionFactor:t.descensionFactor!=null?t.descensionFactor:.5},s=i.ascensionFactor===0,n=i.descensionFactor===0,o=s?Aq:Eq,a=s?Pq:Mq,l=s?Oq:xq,h=n?Dq:kq,p=n?Fq:Nq,f=n?Uq:Lq,m=E=>o(e,E,i)+Cq(e,E,i)+h(e,E,i),y=E=>a(e,E,i)+Iq(e,E,i)+p(e,E,i),_=E=>l(e,E,i)+Rq(e,E,i)+f(e,E,i);let v=m(r);const w=jq(e);let b;const M=t.maximumIterations||20,$=t.maximumDistance!=null?t.maximumDistance:1/0;for(b=0;b<M;b++){const E=t.desiredSlope??1e-6;let P=y(r);Math.abs(P)>E&&(P+=E);const O=P/_(r);if(isNaN(O)||r>=$&&O<0){if(!isFinite($))return null;r=$,v=m(r);break}if(r-=O,r<e.compared.sourceZoom||r<e.compared.targetZoom)return null;const L=m(r);if(Math.abs(L-v)/v<=.005)break;v=L}return v>w*(1-.3)||r<e.compared.sourceZoom||r<e.compared.targetZoom?null:r}function zq(e,t){const r=Math.max(e.compared.sourceZoom,e.compared.targetZoom),i=e.source.zoomAtPixelsPerPan(e.desiredPixelFlow/e.compared.pan)/2;return i<r?t.maximumDistance!=null?r+(t.maximumDistance-r)/2:1.5*r:t.maximumDistance?Math.min(t.maximumDistance,i):i}let Vq=class extends Tq{constructor(t,r){super(),this._preallocSegments=[new wy,new wy,new wy],this._ascensionSegment=null,this._descensionSegment=null,this.update(t,r)}update(t,r){if(!t)return;this.definition?this.definition.copyFrom(t):this.definition=t.clone();const i=r!=null&&r.apex?Gq(t,r.apex):null;this.segments.length=0,this._ascensionSegment=null,this._descensionSegment=null,i?this._updateWithApex(i,r==null?void 0:r.apex):this._updateWithoutApex()}segmentInterpolateComponentsAt(t,r,i){t.interpolateComponentsAt(r,i),t===this._ascensionSegment?i.zoom=Yv(i.zoom):t===this._descensionSegment&&(i.zoom=_m(i.zoom))}_updateWithApex(t,r){const[i,s,n]=this._preallocSegments,o=(r==null?void 0:r.ascensionFactor)??.5,a=Math.min(1-o,(r==null?void 0:r.ascensionFactor)!=null&&r.descensionFactor!=null?r.descensionFactor:.5),l=1-o-a;i.definition?i.definition.copyFrom(this.definition):i.definition=this.definition.clone(),i.definition.compared.targetZoom=t,i.definition.compared.pan=this.definition.compared.pan*o,i.definition.compared.rotate=this.definition.compared.rotate*o,i.definition.segmentEnd=o,i.update(),this._ascensionSegment=i,this.segments.push(i),l>0&&(s.definition?s.definition.copyFrom(this.definition):s.definition=this.definition.clone(),s.definition.copyFrom(this.definition),s.definition.compared.sourceZoom=t,s.definition.compared.targetZoom=t,s.definition.compared.pan=this.definition.compared.pan*l,s.definition.compared.rotate=this.definition.compared.rotate*l,s.definition.segmentStart=i.definition.segmentEnd,s.definition.segmentEnd=i.definition.segmentEnd+l,s.update(),this.segments.push(s)),n.definition?n.definition.copyFrom(this.definition):n.definition=this.definition.clone(),n.definition.compared.sourceZoom=t,n.definition.compared.pan=this.definition.compared.pan*a,n.definition.compared.rotate=this.definition.compared.rotate*a,n.definition.segmentStart=o+l,n.update(),this._descensionSegment=n,this.segments.push(n)}_updateWithoutApex(){const[t]=this._preallocSegments;t.update(this.definition),this.segments.push(t)}};const Bq=new Sq;let Hq=class{get time(){return this._time}get isLinear(){return this.path.segments.length===1}constructor(t){this._time=0,this._easing=U1,this.definition=new bq(t),this.path=new Vq}update(t,r,i){this.definition.update(t,r,i),this.path.update(this.definition,i),this._time=this._applyTimeSettings(_R(isFinite(this.path.time)?this.path.time:0),i),this._easing=i.easing??(this._time>=1e3?U1:rw)}cameraAt(t,r){t=Math.min(Math.max(0,t),1),t=this._normalizedEasing(t);const i=this.path.interpolateComponentsAt(t,Bq);r.interpolate(this.definition.source,this.definition.target,i)}_normalizedEasing(t){const r=this._easing(0,this._time),i=this._easing(1,this._time);return(this._easing(t,this._time)-r)/(i-r)}_applyTimeSettings(t,r){const i=r.speedFactor!=null?r.speedFactor:1,s=r.minDuration??nf.minDuration/i,n=r.maxDuration??nf.maxDuration/i;return t=r.duration!=null?r.duration:Math.min(Math.max(t/i,s),n)}};const qq=2e3,Wq=64;let Zq=class{constructor(t){this._view=t,this._animation=new Hq(()=>new GS(this._view)),this._current=new GS(this._view)}get _source(){return this._animation.definition.source}get _target(){return this._animation.definition.target}get duration(){return this._animation.time}get animation(){return this._animation}update(t,r,i={}){bt(this._current.viewpoint,t),bt(this._source.viewpoint,t),bt(this._target.viewpoint,r),this._animation.update(this._source,this._target,i)}applyRatio(t,r){this._animation.cameraAt(r,this._current),bt(t,this._current.viewpoint)}},$a=class extends q{constructor(t){super(t),this._animation=null,this._destinationViewState=new Jv,this.updateFunction=null,this.easing=zS.ease,this.viewpoint=new Ar({targetGeometry:new te,scale:0,rotation:0}),this._updateTask=rl({postRender:this._postRender.bind(this)}),this._updateTask.pause(),this._transition=new Zq(t.view)}destroy(){this._updateTask=Ce(this._updateTask)}get animation(){return this._animation}set animation(t){this._animation=t,this.view.animation=t}animate(t,r,i){this.stop();const s=this.viewpoint;bt(s,r);const n=t.target;this._transition.update(this.viewpoint,n,{apex:{maximumDistance:Math.min(Math.min(r.scale,n.scale)*Wq,this.view.constraints.effectiveMinScale),desiredSlope:5e-8},duration:i==null?void 0:i.duration,maxDuration:(i==null?void 0:i.animationMode)==="auto"?1/0:(i==null?void 0:i.maxDuration)??YO.maxDuration,speedFactor:i==null?void 0:i.speedFactor,easing:(typeof(i==null?void 0:i.easing)=="string"?zS[i.easing]:i==null?void 0:i.easing)||this.easing}),(i==null?void 0:i.animationMode)==="auto"&&(this._destinationViewState.copy(this.view.state),this._destinationViewState.viewpoint=n,Jq(this._transition.animation,i,this.view.state,this._destinationViewState)||this._transition.update(this.viewpoint,n,{duration:0}));const o=()=>{this.animation===t&&this._updateTask&&(t.state==="finished"&&(this._transition.applyRatio(this.viewpoint,1),this.view.state&&(this.view.state.viewpoint=this.viewpoint.clone())),this.animation=null,this.updateFunction=null)};return t.when(o,o),this._startTime=performance.now(),this._updateTask.resume(),this.animation=t,t}animateContinuous(t,r){this.stop(),this.updateFunction=r,this.viewpoint=t;const i=new k1({target:t.clone()}),s=()=>{this.animation===i&&this._updateTask&&(this.animation=null,this.updateFunction=null)};return i.when(s,s),this._startTime=performance.now(),this._updateTask.resume(),this.animation=i,i}stop(){this.animation&&(this.animation.stop(),this.animation=null,this.updateFunction=null)}_postRender(t){var i,s;const r=this.animation;if(r&&r.state!==k1.State.STOPPED){if(this.updateFunction)this.updateFunction(this.viewpoint,t.deltaTime),(i=this.animation)==null||i.update(this.viewpoint);else{const n=performance.now()-this._startTime,o=this._transition.duration,a=o>0?n/o:1,l=a>=1;this._transition.applyRatio(this.viewpoint,a),l&&((s=this.animation)==null||s.finish())}this.view.state&&(this.view.state.viewpoint=this.viewpoint.clone())}else this._updateTask.pause()}};function Jq(e,t,r,i){if((t==null?void 0:t.duration)!=null)return!0;const{time:s,isLinear:n}=e,o=(t==null?void 0:t.speedFactor)||1;if(s>((t==null?void 0:t.maxDuration)??YO.maxDuration/o))return!1;if(n){const l=Ne(),h=lt(...i.toScreen(l,...r.center)),p=lt(...r.toScreen(l,...i.center)),f=p!=null&&p.x>-1*r.size[0]&&p.x<(1.5+.5)*r.size[0]&&p.y>-1*r.size[1]&&p.y<(1.5+.5)*r.size[1],m=h!=null&&h.x>-1*i.size[0]&&h.x<(1.5+.5)*i.size[0]&&h.y>-1*i.size[1]&&h.y<(1.5+.5)*i.size[1];if(s>qq/o&&!f&&!m)return!1}return!0}c([d()],$a.prototype,"easing",void 0),c([d()],$a.prototype,"view",void 0),c([d()],$a.prototype,"viewpoint",void 0),$a=c([S("esri.views.2d.AnimationManager")],$a);const Yq=$a;function Ee(){return Promise.all([N(()=>import("./webglDeps-D_JMAzNr.js"),__vite__mapDeps([260,184,12,261,262,263])),N(()=>import("./mapViewDeps-CP3NTMHm.js"),__vite__mapDeps([264,148,34,35,108,109,45,12,110,105,111,104,112,113,114,107,77,115,66,265,119,266,261,184,262,188,164,267,138,268,206,171,170,123,49,50,18,117,125,269,120,121,122,270,32,169,260,263,271,133,272,106,116,59,47,42,54,53,273,177,178,162,186,274,93,275,124,276,277,118,278,82,129,102,279,280,281,282,180,225,283,284]))])}const Wl=()=>Ee().then(()=>N(()=>import("./TileLayerView2D-DAiVPMIT.js"),__vite__mapDeps([285,148,34,35,104,105,113,108,109,45,12,110,111,112,114,107,77,115,66,270,32,268,206,267,262,184,138,171,170,123,49,50,169,271,266,261,188,164,265,119,18,117,125,133,272,106,116,59,47,42,54,53,93,120,121,122,177,178,162,278,82,129,102,286,287,282,288,250,289,280,281,290,291,225,292,293,294,295]))),Rn=()=>Ee().then(()=>N(()=>import("./FeatureLayerView2D-DNmpzPeV.js").then(e=>e.F),__vite__mapDeps([296,268,206,49,45,12,50,229,197,198,199,151,141,200,18,201,115,66,202,104,105,140,203,58,116,297,211,298,299,47,42,57,288,250,281,108,109,110,111,112,113,114,107,77,261,184,282,267,262,138,171,170,123,265,119,266,188,164,117,125,133,235,33,34,35,269,300,132,130,228,222,292,295,290]))),VS={"base-dynamic":()=>Ee().then(()=>N(()=>import("./BaseDynamicLayerView2D-CKZP024Q.js"),__vite__mapDeps([301,302,267,107,77,262,184,12,138,268,206,171,105,170,123,49,45,50,287,266,261,188,164,119,288,250,303,290]))),"base-tile":Wl,"bing-maps":Wl,catalog:()=>Ee().then(()=>N(()=>import("./CatalogLayerView2D-DSdhu95h.js"),__vite__mapDeps([304,288,268,206,250]))),"catalog-dynamic-group":()=>Ee().then(()=>N(()=>import("./CatalogDynamicGroupLayerView2D-D9X0IjZJ.js"),__vite__mapDeps([305,288,268,206,250]))),"catalog-footprint":()=>Ee().then(()=>N(()=>import("./CatalogFootprintLayerView2D-DG_i_BQl.js"),__vite__mapDeps([306,296,268,206,49,45,12,50,229,197,198,199,151,141,200,18,201,115,66,202,104,105,140,203,58,116,297,211,298,299,47,42,57,288,250,281,108,109,110,111,112,113,114,107,77,261,184,282,267,262,138,171,170,123,265,119,266,188,164,117,125,133,235,33,34,35,269,300,132,130,228,222,292,295,290]))),csv:Rn,"geo-rss":()=>Ee().then(()=>N(()=>import("./GeoRSSLayerView2D-DDZDnaUi.js"),__vite__mapDeps([307,198,199,151,141,200,18,201,115,66,232,208,209,140,10,11,59,111,104,105,33,34,35,202,203,211,288,268,206,250,279,280,281,108,109,45,12,110,112,113,114,107,77,261,184,282,267,262,138,171,170,123,49,50,265,119,266,188,164,117,125,278,270,148,32,106,116,47,42,54,53,82,129,102]))),feature:Rn,geojson:Rn,parquet:Rn,graphics:()=>Ee().then(()=>N(()=>import("./GraphicsLayerView2D-9EnjDsE6.js"),__vite__mapDeps([308,288,268,206,250,279,280,281,108,109,45,12,110,105,111,104,112,113,114,107,77,115,66,261,184,282,267,262,138,171,170,123,49,50,265,119,266,188,164,18,117,125,278,59,270,148,34,35,32,106,116,47,42,54,53,82,129,102]))),group:()=>Ee().then(()=>N(()=>import("./GroupLayerView2D-BVDkl9GV.js"),__vite__mapDeps([309,288,268,206,250]))),imagery:()=>Ee().then(()=>N(()=>import("./ImageryLayerView2D-B41SpctJ.js"),__vite__mapDeps([310,311,184,12,77,146,267,107,262,138,268,206,171,105,170,123,49,45,50,288,250,278,59,108,109,110,111,104,112,113,114,115,66,270,148,34,35,32,106,116,47,42,54,53,265,119,266,261,188,164,18,117,125,82,129,102,289,280,281,282,302,287,303,150,297,295,290]))),"imagery-tile":()=>Ee().then(()=>N(()=>import("./ImageryTileLayerView2D-DabtrhI_.js"),__vite__mapDeps([312,313,311,184,12,77,146,267,107,262,138,268,206,171,105,170,123,49,45,50,288,250,314,276,122,261,282,315,150,297,295,290]))),kml:()=>Ee().then(()=>N(()=>import("./KMLLayerView2D-D7C4b_t9.js"),__vite__mapDeps([316,317,232,208,209,199,151,141,200,18,201,115,66,140,10,11,59,111,104,105,33,34,35,198,202,203,211,287,268,206,266,261,184,12,262,188,164,119,302,267,107,77,138,171,170,123,49,45,50,288,250,279,280,281,108,109,110,112,113,114,282,265,117,125,278,270,148,32,106,116,47,42,54,53,82,129,102,150,276,122,273,260,263,177,178,162,272,186,314]))),"knowledge-graph":()=>Ee().then(()=>N(()=>import("./KnowledgeGraphLayerView2D-BPQbnZSM.js"),__vite__mapDeps([318,288,268,206,250]))),"link-chart":()=>Ee().then(()=>N(()=>import("./KnowledgeGraphLayerView2D-BPQbnZSM.js"),__vite__mapDeps([318,288,268,206,250]))),"knowledge-graph-sublayer":Rn,"map-image":()=>Ee().then(()=>N(()=>import("./MapImageLayerView2D-8rvo74bD.js"),__vite__mapDeps([319,302,267,107,77,262,184,12,138,268,206,171,105,170,123,49,45,50,287,266,261,188,164,119,288,250,278,59,108,109,110,111,104,112,113,114,115,66,270,148,34,35,32,106,116,47,42,54,53,265,18,117,125,82,129,102,289,280,281,282,303,320,225,292,294,297,290,291,293,295]))),"map-notes":()=>Ee().then(()=>N(()=>import("./MapNotesLayerView2D-DLojp-_h.js"),__vite__mapDeps([321,288,268,206,250,279,280,281,108,109,45,12,110,105,111,104,112,113,114,107,77,115,66,261,184,282,267,262,138,171,170,123,49,50,265,119,266,188,164,18,117,125,278,59,270,148,34,35,32,106,116,47,42,54,53,82,129,102]))),media:()=>Ee().then(()=>N(()=>import("./MediaLayerView2D-BlA7xZbm.js"),__vite__mapDeps([322,323,129,82,198,199,151,141,200,18,201,115,66,148,34,35,104,105,113,108,109,45,12,110,111,112,114,107,77,270,32,268,206,267,262,184,138,171,170,123,49,50,169,271,266,261,188,164,265,119,117,125,133,272,106,116,59,47,42,54,53,93,120,121,122,177,178,162,278,102,275,124,324,277,288,250]))),"ogc-feature":()=>Ee().then(()=>N(()=>import("./OGCFeatureLayerView2D-_Xd9gRoC.js"),__vite__mapDeps([325,296,268,206,49,45,12,50,229,197,198,199,151,141,200,18,201,115,66,202,104,105,140,203,58,116,297,211,298,299,47,42,57,288,250,281,108,109,110,111,112,113,114,107,77,261,184,282,267,262,138,171,170,123,265,119,266,188,164,117,125,133,235,33,34,35,269,300,132,130,228,222,292,295,290]))),"open-street-map":Wl,"oriented-imagery":Rn,route:()=>Ee().then(()=>N(()=>import("./RouteLayerView2D-D1ta_9Xm.js"),__vite__mapDeps([326,327,328,288,268,206,250,279,280,281,108,109,45,12,110,105,111,104,112,113,114,107,77,115,66,261,184,282,267,262,138,171,170,123,49,50,265,119,266,188,164,18,117,125,278,59,270,148,34,35,32,106,116,47,42,54,53,82,129,102]))),stream:()=>Ee().then(()=>N(()=>import("./StreamLayerView2D-CEvTtUz_.js"),__vite__mapDeps([329,211,296,268,206,49,45,12,50,229,197,198,199,151,141,200,18,201,115,66,202,104,105,140,203,58,116,297,298,299,47,42,57,288,250,281,108,109,110,111,112,113,114,107,77,261,184,282,267,262,138,171,170,123,265,119,266,188,164,117,125,133,235,33,34,35,269,300,132,130,228,222,292,295,290]))),"subtype-group":()=>Ee().then(()=>N(()=>import("./SubtypeGroupLayerView2D-CChF4egr.js"),__vite__mapDeps([330,296,268,206,49,45,12,50,229,197,198,199,151,141,200,18,201,115,66,202,104,105,140,203,58,116,297,211,298,299,47,42,57,288,250,281,108,109,110,111,112,113,114,107,77,261,184,282,267,262,138,171,170,123,265,119,266,188,164,117,125,133,235,33,34,35,269,300,132,130,228,222,292,295,290]))),tile:Wl,"vector-tile":()=>Ee().then(()=>N(()=>import("./VectorTileLayerView2D-CWPeU--O.js"),__vite__mapDeps([331,104,105,169,114,93,12,112,113,10,11,110,184,170,267,107,77,262,138,268,206,171,123,49,45,50,282,62,172,173,148,34,35,288,250,290]))),video:()=>Ee().then(()=>N(()=>import("./VideoLayerView2D-AXrtEhcG.js"),__vite__mapDeps([332,333,221,15,222,206,237,17,18,334,324,138,267,107,77,262,184,12,268,171,105,170,123,49,45,50,265,108,109,110,111,104,112,113,114,115,66,119,266,261,188,164,117,125,277,288,250,279,280,281,282,278,59,270,148,34,35,32,106,116,47,42,54,53,82,129,102]))),wcs:()=>Ee().then(()=>N(()=>import("./ImageryTileLayerView2D-DabtrhI_.js"),__vite__mapDeps([312,313,311,184,12,77,146,267,107,262,138,268,206,171,105,170,123,49,45,50,288,250,314,276,122,261,282,315,150,297,295,290]))),"web-tile":Wl,wfs:Rn,wms:()=>Ee().then(()=>N(()=>import("./WMSLayerView2D-BMJ7u8tC.js"),__vite__mapDeps([335,302,267,107,77,262,184,12,138,268,206,171,105,170,123,49,45,50,287,266,261,188,164,119,288,250,303,290,336,297]))),wmts:()=>Ee().then(()=>N(()=>import("./WMTSLayerView2D-c9wu1IIj.js"),__vite__mapDeps([337,286,287,268,206,266,261,184,12,262,188,164,119,267,107,77,138,171,105,170,123,49,45,50,282,288,250,290]))),"line-of-sight":null,"base-elevation":null,"building-scene":null,dimension:null,elevation:null,"integrated-mesh":null,"integrated-mesh-3dtiles":null,"point-cloud":null,viewshed:null,voxel:null,scene:null,unknown:null,unsupported:null};function Kq(e){const t=e.declaredClass?e.declaredClass.slice(e.declaredClass.lastIndexOf(".")+1):"Unknown",r=t.replaceAll(/([a-z])([A-Z])/g,"$1-$2").toLowerCase();return new I(`${r}:view-not-supported`,`${t} is not supported in 2D`)}const BS={hasLayerViewModule:e=>VS[e.type]!=null,importLayerView:e=>{const t=VS[e.type];if(t==null)throw Kq(e);return t(e)}};let $n=class ao{static getId(t,r,i,s){return typeof t=="object"?`${t.level}/${t.row}/${t.col}/${t.world}`:`${t}/${r}/${i}/${s}`}constructor(t,r,i,s){this.set(t,r,i,s)}get key(){return this}get id(){return this.toString()}get normalizedId(){return`${this.level}/${this.row}/${this.col}`}set id(t){this.set(t)}get hash(){const t=4095&this.row,r=4095&this.col,i=63&this.level;return(3&this.world)<<30|r<<22|t<<8|i}acquire(t,r,i,s){this.set(t,r,i,s)}contains(t){const r=t.level-this.level;return r>=0&&this.row===t.row>>r&&this.col===t.col>>r&&this.world===t.world}containsChild(t){const r=t.level-this.level;return r>0&&this.row===t.row>>r&&this.col===t.col>>r&&this.world===t.world}equals(t){return this.level===t.level&&this.row===t.row&&this.col===t.col&&this.world===t.world}clone(){return new ao(this)}release(){this.level=0,this.row=0,this.col=0,this.world=0}set(t,r,i,s){if(t==null)this.level=0,this.row=0,this.col=0,this.world=0;else if(typeof t=="object")this.level=t.level||0,this.row=t.row||0,this.col=t.col||0,this.world=t.world||0;else if(typeof t=="string"){const[n,o,a,l]=t.split("/");this.level=parseFloat(n),this.row=parseFloat(o),this.col=parseFloat(a),this.world=parseFloat(l)}else this.level=+t,this.row=+r,this.col=+i,this.world=+s||0;return this}toString(){return`${this.level}/${this.row}/${this.col}/${this.world}`}getParentKey(){return this.level<=0?null:new ao(this.level-1,this.row>>1,this.col>>1,this.world)}getNormalizedNeighbor(t,r,i){const s=this.clone();return s.col+=t,s.row+=r,i.normalizeKey(s),s}getChildKeys(){const t=this.level+1,r=this.row<<1,i=this.col<<1,s=this.world;return[new ao(t,r,i,s),new ao(t,r,i+1,s),new ao(t,r+1,i,s),new ao(t,r+1,i+1,s)]}compareRowMajor(t){return this.row<t.row?-1:this.row>t.row?1:this.col<t.col?-1:this.col>t.col?1:0}};$n.pool=new Fo($n,null,null,25,50);function ra(e,t){return[e,t]}function kn(e,t,r){return e[0]=t,e[1]=r,e}function Xq(e,t,r,i,s){return e[0]=t,e[1]=r,e[2]=i,e[3]=s,e}const Ur=new $n("0/0/0/0");let Qq=class XO{static create(t,r,i=null){const s=It(t.spatialReference),n=r.origin||ra(t.origin.x,t.origin.y),o=ra(t.size[0]*r.resolution,t.size[1]*r.resolution),a=ra(-1/0,-1/0),l=ra(1/0,1/0),h=ra(1/0,1/0);i!=null&&(kn(a,Math.max(0,Math.floor((i.xmin-n[0])/o[0])),Math.max(0,Math.floor((n[1]-i.ymax)/o[1]))),kn(l,Math.max(0,Math.floor((i.xmax-n[0])/o[0])),Math.max(0,Math.floor((n[1]-i.ymin)/o[1]))),kn(h,l[0]-a[0]+1,l[1]-a[1]+1));const{cols:p,rows:f}=r;let m,y,_,v;return!i&&p&&f&&(kn(a,p[0],f[0]),kn(l,p[1],f[1]),kn(h,p[1]-p[0]+1,f[1]-f[0]+1)),t.isWrappable?(m=ra(Math.ceil(Math.round((s.valid[1]-s.valid[0])/r.resolution)/t.size[0]),h[1]),y=!0,_=s.origin,v=s.valid):(m=h,y=!1),new XO(r.level,r.resolution,r.scale,n,a,l,h,o,m,y,_,v)}constructor(t,r,i,s,n,o,a,l,h,p,f,m){this.level=t,this.resolution=r,this.scale=i,this.origin=s,this.first=n,this.last=o,this.size=a,this.norm=l,this.worldSize=h,this.wrap=p,this._spatialReferenceOrigin=f,this._spatialReferenceValid=m}normalizeCol(t){if(!this.wrap)return t;const r=this.worldSize[0];return t<0?r-1-Math.abs((t+1)%r):t%r}normalizeKey(t){if(!this.wrap)return;const r=this.worldSize[0],i=t.col;i<0?(t.col=i+r,t.world-=1):i>=r&&(t.col=i-r,t.world+=1)}denormalizeCol(t,r){return this.wrap?this.worldSize[0]*r+t:t}getWorldForColumn(t){return this.wrap?Math.floor(t/this.worldSize[0]):0}getFirstColumnForWorld(t){return t*this.worldSize[0]+this.first[0]}getLastColumnForWorld(t){return t*this.worldSize[0]+this.first[0]+this.size[0]-1}getColumnForX(t){return(t-this.origin[0])/this.norm[0]}getXForColumn(t){const r=this.origin[0]+t*this.norm[0],i=this._spatialReferenceOrigin,s=this._spatialReferenceValid;return this.wrap&&i&&s?r===i[0]?s[0]:this.origin[0]===i[0]&&t===this.worldSize[0]?s[1]:r:r}getRowForY(t){return(this.origin[1]-t)/this.norm[1]}getYForRow(t){return this.origin[1]-t*this.norm[1]}getTileBounds(t,r,i=!1){Ur.set(r);const s=i?Ur.col:this.denormalizeCol(Ur.col,Ur.world),n=Ur.row;return Xq(t,this.getXForColumn(s),this.getYForRow(n+1),this.getXForColumn(s+1),this.getYForRow(n)),t}getTileCoords(t,r,i=!1){Ur.set(r);const s=i?Ur.col:this.denormalizeCol(Ur.col,Ur.world);return Array.isArray(t)?kn(t,this.getXForColumn(s),this.getYForRow(Ur.row)):(t.x=this.getXForColumn(s),t.y=this.getYForRow(Ur.row)),t}},Gc=class{constructor(){this.spans=[]}acquire(t){this.lodInfo=t}release(){this.lodInfo=null,this.spans.length=0}*keys(){const t=this.lodInfo;for(const{row:r,colFrom:i,colTo:s}of this.spans)for(let n=i;n<=s;n++){const o=t.getWorldForColumn(n);yield new $n(t.level,r,t.normalizeCol(n),o)}}forEach(t,r){const{spans:i,lodInfo:s}=this,{level:n}=s;if(i.length!==0)for(const{row:o,colFrom:a,colTo:l}of i)for(let h=a;h<=l;h++)t.call(r,n,o,s.normalizeCol(h),s.getWorldForColumn(h))}};Gc.pool=new Fo(Gc);let by=class{constructor(t,r,i){this.row=t,this.colFrom=r,this.colTo=i}};const xe=new $n("0/0/0/0");let eW=class QO{static create(t,r){t[1]>r[1]&&([t,r]=[r,t]);const[i,s]=t,[n,o]=r,a=n-i,l=o-s,h=l!==0?a/l:0,p=(Math.ceil(s)-s)*h,f=(Math.floor(s)-s)*h;return new QO(i,Math.floor(s),Math.ceil(o),h,a<0?p:f,a<0?f:p,a<0?n:i,a<0?i:n)}constructor(t,r,i,s,n,o,a,l){this.x=t,this.ymin=r,this.ymax=i,this.invM=s,this.leftAdjust=n,this.rightAdjust=o,this.leftBound=a,this.rightBound=l}incrRow(){this.x+=this.invM}getLeftCol(){return Math.max(this.x+this.leftAdjust,this.leftBound)}getRightCol(){return Math.min(this.x+this.rightAdjust,this.rightBound)}};const Zt=[[0,0],[0,0],[0,0],[0,0]],tW=1e-6;let rW=class{constructor(t,r=null,i=t.lods[0].level,s=t.lods[t.lods.length-1].level){this.tileInfo=t,this.fullExtent=r,this.scales=[],this._infoByScale={},this._infoByLevel={};const n=t.lods.filter(a=>a.level>=i&&a.level<=s);this.minScale=n[0].scale,this.maxScale=n[n.length-1].scale;const o=this._lodInfos=n.map(a=>Qq.create(t,a,r));n.forEach((a,l)=>{this._infoByLevel[a.level]=o[l],this._infoByScale[a.scale]=o[l],this.scales[l]=a.scale},this),this._wrap=t.isWrappable}get spatialReference(){return this.tileInfo.spatialReference}getLODInfoAt(t){return this._infoByLevel[typeof t=="number"?t:t.level]}getTileBounds(t,r,i=!1){xe.set(r);const s=this._infoByLevel[xe.level];return s?s.getTileBounds(t,xe,i):t}getTileCoords(t,r,i=!1){xe.set(r);const s=this._infoByLevel[xe.level];return s?s.getTileCoords(t,xe,i):t}getTileCoverage(t,r=192,i=!0,s="closest"){if(!i&&(t.scale>this.minScale||t.scale<this.maxScale))return null;const n=s==="closest"?this.getClosestInfoForScale(t.scale):this.getSmallestInfoForScale(t.scale),o=Gc.pool.acquire(n),a=this._wrap;let l,h,p,f=1/0,m=-1/0;const y=o.spans;Zt[0][0]=Zt[0][1]=Zt[1][1]=Zt[3][0]=-r,Zt[1][0]=Zt[2][0]=t.size[0]+r,Zt[2][1]=Zt[3][1]=t.size[1]+r;for(const b of Zt)t.toMap(b,b),b[0]=n.getColumnForX(b[0]),b[1]=n.getRowForY(b[1]);const _=[];let v=3;for(let b=0;b<4;b++){if(Zt[b][1]===Zt[v][1]){v=b;continue}const M=eW.create(Zt[b],Zt[v]);f=Math.min(M.ymin,f),m=Math.max(M.ymax,m),_[M.ymin]===void 0&&(_[M.ymin]=[]),_[M.ymin].push(M),v=b}if(f==null||m==null||m-f>100)return null;let w=[];for(l=f;l<m;){_[l]!=null&&(w=w.concat(_[l])),h=1/0,p=-1/0;for(let b=w.length-1;b>=0;b--){const M=w[b];h=Math.min(h,M.getLeftCol()),p=Math.max(p,M.getRightCol())}if(h=Math.floor(h),p=Math.floor(p),l>=n.first[1]&&l<=n.last[1])if(a)if(n.size[0]<n.worldSize[0]){const b=Math.floor(p/n.worldSize[0]);for(let M=Math.floor(h/n.worldSize[0]);M<=b;M++)y.push(new by(l,Math.max(n.getFirstColumnForWorld(M),h),Math.min(n.getLastColumnForWorld(M),p)))}else y.push(new by(l,h,p));else h>n.last[0]||p<n.first[0]||(h=Math.max(h,n.first[0]),p=Math.min(p,n.last[0]),y.push(new by(l,h,p)));l+=1;for(let b=w.length-1;b>=0;b--){const M=w[b];M.ymax>=l?M.incrRow():w.splice(b,1)}}return o}getTileParentId(t){xe.set(t);const r=this._infoByLevel[xe.level],i=this._lodInfos.indexOf(r)-1;return i<0?null:(this._getTileIdAtLOD(xe,this._lodInfos[i],xe),xe.id)}getTileResolution(t){const r=this._infoByLevel[typeof t=="object"?t.level:t];return r?r.resolution:-1}getTileScale(t){const r=this._infoByLevel[t.level];return r?r.scale:-1}intersects(t,r){xe.set(r);const i=this._infoByLevel[xe.level],s=t.lodInfo;if(s.resolution>i.resolution){this._getTileIdAtLOD(xe,s,xe);const o=s.denormalizeCol(xe.col,xe.world);for(const a of t.spans)if(a.row===xe.row&&a.colFrom<=o&&a.colTo>=o)return!0}if(s.resolution<i.resolution){const[o,a,l,h]=t.spans.reduce((v,w)=>(v[0]=Math.min(v[0],w.row),v[1]=Math.max(v[1],w.row),v[2]=Math.min(v[2],w.colFrom),v[3]=Math.max(v[3],w.colTo),v),[1/0,-1/0,1/0,-1/0]),p=i.denormalizeCol(xe.col,xe.world),f=s.getColumnForX(i.getXForColumn(p)),m=s.getRowForY(i.getYForRow(xe.row)),y=s.getColumnForX(i.getXForColumn(p+1))-1,_=s.getRowForY(i.getYForRow(xe.row+1))-1;return!(f>h||y<l||m>a||_<o)}const n=s.denormalizeCol(xe.col,xe.world);return t.spans.some(o=>o.row===xe.row&&o.colFrom<=n&&o.colTo>=n)}normalizeBounds(t,r,i){if(t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],this._wrap){const s=It(this.tileInfo.spatialReference),n=-i*(s.valid[1]-s.valid[0]);t[0]+=n,t[2]+=n}return t}getSmallestInfoForScale(t){const r=this.scales;if(this._infoByScale[t])return this._infoByScale[t];if(t>r[0])return this._infoByScale[r[0]];for(let i=1;i<r.length-1;i++)if(t>r[i]+tW)return this._infoByScale[r[i-1]];return this._infoByScale[r[r.length-1]]}getClosestInfoForScale(t){const r=this.scales;return this._infoByScale[t]||(t=r.reduce((i,s)=>Math.abs(s-t)<Math.abs(i-t)?s:i,r[0])),this._infoByScale[t]}scaleToLevel(t){const r=this.scales;if(this._infoByScale[t])return this._infoByScale[t].level;for(let i=r.length-1;i>=0;i--)if(t<r[i])return i===r.length-1?this._infoByScale[r[r.length-1]].level:this._infoByScale[r[i]].level+(r[i]-t)/(r[i]-r[i+1]);return this._infoByScale[r[0]].level}scaleToZoom(t){return this.tileInfo.scaleToZoom(t)}zoomToScale(t){return this.tileInfo.zoomToScale(t)}_getTileIdAtLOD(t,r,i){const s=this._infoByLevel[i.level];return t.set(i),r.resolution<s.resolution?null:(r.resolution===s.resolution||(t.level=r.level,t.col=Math.floor(i.col*s.resolution/r.resolution+.01),t.row=Math.floor(i.row*s.resolution/r.resolution+.01)),t)}},iW=class{constructor(t,r){this.item=t,this.controller=r,this.promise=null}},sW=class{constructor(t){this._schedule=null,this._task=null,this._deferreds=new Jd,this._controllers=new Jd,this._processingItems=new Jd,this._pausedSignal=yl(!1),this.concurrency=1,t.concurrency&&(this.concurrency=t.concurrency),this._queue=new zp(t.peeker),this.process=t.process;const r=t.scheduler;t.priority&&r&&(this._task=r.registerTask(t.priority,this))}destroy(){this.clear(),this._schedule=Ce(this._schedule),this._task=Ce(this._task)}get updating(){var t;return!!((t=this._task)!=null&&t.updating)||this.running}get length(){return this._processingItems.size+this._queue.length}abort(t){const r=this._controllers.get(t);r&&r.abort()}clear(){this._queue.clear();const t=[];this._controllers.forEach(r=>t.push(r)),this._controllers.clear(),t.forEach(r=>r.abort()),this._processingItems.clear(),this._cancelNext()}forEach(t){this._deferreds.forEach((r,i)=>t(i))}get(t){const r=this._deferreds.get(t);return r?r.promise:void 0}isOngoing(t){return this._processingItems.has(t)}has(t){return this._deferreds.has(t)}pause(){this._pausedSignal.value||(this._pausedSignal.value=!0,this._cancelNext())}push(t,r){const i=this.get(t);if(i)return i;const s=new AbortController;let n=null;r&&(n=xr(r,()=>s.abort()));const o=()=>{const p=this._processingItems.get(t);p&&p.controller.abort(),a(),h.reject($e())},a=()=>{l.remove(),n!=null&&n.remove(),this._removeItem(t),this._queue.remove(t),this._scheduleNext()},l=i_(s.signal,o),h=Pr();return this._deferreds.set(t,h),this._controllers.set(t,s),h.promise.then(a,a),this._queue.push(t),this._scheduleNext(),h.promise}last(){return this._queue.last()}lastPromise(){const t=this.last();return t?this.get(t):null}peek(){return this._queue.peek()}popLast(){var r;const t=this._queue.popLast();return t&&((r=this._deferreds.get(t))==null||r.reject($e()),this._removeItem(t)),t}reset(){const t=Array.from(this._processingItems.values());this._processingItems.clear();for(const r of t)this._queue.push(r.item),r.controller.abort();this._scheduleNext()}resume(){this._pausedSignal.value&&(this._pausedSignal.value=!1,this._scheduleNext())}takeAll(){const t=[];for(;this._queue.length;)t.push(this._queue.pop());return this.clear(),t}get running(){return!this._pausedSignal.value&&this._queue.length>0&&this._processingItems.size<this.concurrency}runTask(t){for(;!t.done&&this._queue.length>0&&this._processingItems.size<this.concurrency;)this._process(this._queue.pop()),t.madeProgress()}_removeItem(t){this._deferreds.delete(t),this._controllers.delete(t),this._processingItems.delete(t)}_scheduleNext(){this._task||this._pausedSignal.value||this._schedule||(this._schedule=Kc(()=>{this._schedule=null,this._next()}))}_next(){for(;this._queue.length>0&&this._processingItems.size<this.concurrency;)this._process(this._queue.pop())}_cancelNext(){this._schedule&&(this._schedule.remove(),this._schedule=null)}_processResult(t,r){this._canProcessFulfillment(t)&&(this._scheduleNext(),this._deferreds.get(t.item).resolve(r))}_processError(t,r){this._canProcessFulfillment(t)&&(this._scheduleNext(),this._deferreds.get(t.item).reject(r))}_canProcessFulfillment(t){return!!this._deferreds.get(t.item)&&this._processingItems.get(t.item)===t}_process(t){if(t==null)return;let r;const i=new AbortController,s=new iW(t,i);this._processingItems.set(t,s);try{r=this.process(t,i.signal)}catch(n){this._processError(s,n)}Ri(r)?(s.promise=r,r.then(n=>this._processResult(s,n),n=>this._processError(s,n))):this._processResult(s,r)}get test(){}};const HS=[0,0];let Qi=class extends q{constructor(t){super(t),this._keyToItem=new Map,this._tilesByScale=new Map,this.concurrency=6}initialize(){const{concurrency:t,process:r,scheduler:i,priority:s}=this;this._queue=new sW({concurrency:t,scheduler:i,priority:s,process:(n,o)=>{const a=this._keyToItem.get(n);return r(a,{signal:o})},peeker:n=>this._peek(n)})}destroy(){this.clear(),this._queue=ke(this._queue)}get length(){return this._queue?this._queue.length:0}abort(t){const r=typeof t=="string"?t:t.id;this._queue.abort(r)}clear(){this._queue.clear(),this._keyToItem.clear(),this._tilesByScale.clear()}has(t){return typeof t=="string"?this._keyToItem.has(t):this._keyToItem.has(t.id)}pause(){this._queue.pause()}push(t){const r=t.key.id;if(this._queue.has(r))return this._queue.get(r);const i=this._queue.push(r),s=this.tileInfoView.getTileScale(t.key),n=$f(this._tilesByScale,s,()=>new Set),o=()=>{n.delete(t.key),n.size===0&&this._tilesByScale.delete(s),this._keyToItem.delete(r)};return n.add(t.key),this._keyToItem.set(r,t),i.then(o,o),i}reset(){this._queue.reset()}resume(){this._queue.resume()}_peek(t){if(!this.state)return t.values().next().value;const r=new Set;for(const o of t)r.add(this._keyToItem.get(o).key);const i=this.state.scale;let s,n=Number.POSITIVE_INFINITY;for(const[o,a]of this._tilesByScale)if(K$(a,l=>r.has(l))){const l=Math.abs(o-i);l<n&&(s=a,n=l)}return this._getClosestTileKey(s,t).id}_getClosestTileKey(t,r){const i=this.tileInfoView,s=this.state.center;let n,o=Number.POSITIVE_INFINITY;for(const a of t)if(r.has(a.id)){i.getTileCoords(HS,a);const l=pm(HS,s);l<o&&(o=l,n=a)}return n}};c([d({constructOnly:!0})],Qi.prototype,"concurrency",void 0),c([d({constructOnly:!0})],Qi.prototype,"priority",void 0),c([d({constructOnly:!0})],Qi.prototype,"process",void 0),c([d({constructOnly:!0})],Qi.prototype,"scheduler",void 0),c([d()],Qi.prototype,"state",void 0),c([d({constructOnly:!0})],Qi.prototype,"tileInfoView",void 0),Qi=c([S("esri.views.2d.tiling.TileQueue")],Qi);const Bse=Qi;let nW=class{constructor(t,r,i){this.maxSize=t,this._tileInfoView=r,this._removedFunc=i,this._tilePerId=new Map,this._tileKeysPerLevel=[]}clear(){this._tilePerId.clear(),this._tileKeysPerLevel=[]}has(t){return this._tilePerId.has(t)}get(t){return this._tilePerId.get(t)}pop(t){const r=this._tilePerId.get(t);if(!r)return;const i=r.key.level,s=this._tileKeysPerLevel[i];qS(this._tilePerId,t);for(let n=0;n<s.length;n++)if(s[n].id===t){s.splice(n,1);break}return r.visible=!0,r}add(t){t.visible=!1;const r=t.key,i=r.id;if(this._tilePerId.has(i))return;this._tilePerId.set(i,t);const s=r.level;this._tileKeysPerLevel[s]||(this._tileKeysPerLevel[s]=[]),this._tileKeysPerLevel[s].push(r)}prune(t,r,i){let s=this._tilePerId.size;if(s<=this.maxSize)return;let n=this._tileKeysPerLevel.length-1;for(;s>this.maxSize&&n>=0;)n!==t&&(s=this._pruneAroundCenterTile(s,r,i,n)),n--;s>this.maxSize&&(s=this._pruneAroundCenterTile(s,r,i,t))}_pruneAroundCenterTile(t,r,i,s){const n=this._tileKeysPerLevel[s];if(!n||n.length===0)return t;const{size:o,origin:a}=this._tileInfoView.tileInfo,l=i*o[0],h=i*o[1],p=[0,0],f=[0,0];for(n.sort((m,y)=>(p[0]=a.x+l*(m.col+.5),p[1]=a.y-h*(m.row+.5),f[0]=a.x+l*(y.col+.5),f[1]=a.y-h*(y.row+.5),ef(p,r)-ef(f,r)));n.length>0;){const m=n.pop();if(this._removeTile(m.id),--t===this.maxSize)break}return t}_removeTile(t){const r=this._tilePerId.get(t);this._removedFunc&&r&&this._removedFunc(r),qS(this._tilePerId,t)}};function qS(e,t){e.delete(t)}const Nn=new $n(0,0,0,0),Ui=new Map,Zl=[],Sy=[];let qse=class{constructor(t){this._previousScale=Number.POSITIVE_INFINITY,this.cachePolicy="keep",this.coveragePolicy="closest",this.resampling=!0,this.tileIndex=new Map,this.tiles=[],this.buffer=192,this.acquireTile=t.acquireTile,this.releaseTile=t.releaseTile,this.tileInfoView=t.tileInfoView,t.resampling!=null&&(this.resampling=t.resampling),t.cachePolicy&&(this.cachePolicy=t.cachePolicy),t.coveragePolicy&&(this.coveragePolicy=t.coveragePolicy),t.buffer!=null&&(this.buffer=t.buffer),t.cacheSize&&(this._tileCache=new nW(t.cacheSize,this.tileInfoView,r=>{this.releaseTile(r)}))}destroy(){this.tileIndex.clear()}update(t){var b,M;const{resampling:r,tileIndex:i}=this,{scale:s,center:n,resolution:o}=t.state,{minScale:a,maxScale:l}=this.tileInfoView,h=!t.stationary&&s>this._previousScale;if(this._previousScale=s,!r&&(s>a||s<l))return this.tiles.length=0,void this.clear();const p=this.tileInfoView.getTileCoverage(t.state,this.buffer,this.resampling,this.coveragePolicy);if(!p)return this.tiles.length=0,void this.clear();const{spans:f,lodInfo:m}=p,{level:y}=m;this.tiles.length=0,i.forEach($=>$.visible=!0);let _=0,v=0;if(f.length>0)for(const{row:$,colFrom:E,colTo:P}of f)for(let O=E;O<=P;O++){_++;const L=Nn.set(y,$,m.normalizeCol(O),m.getWorldForColumn(O)).id;let k=i.get(L);if(k)k.isReady?(Ui.set(L,k),v++):h||this._addParentTile(L,Ui);else{if((b=this._tileCache)!=null&&b.has(L)){if(k=this._tileCache.pop(L),this.tileIndex.set(L,k),k.isReady){Ui.set(L,k),v++;continue}}else k=this.acquireTile(Nn),this.tileIndex.set(L,k);h||this._addParentTile(L,Ui)}}const w=v===_;for(const[$,E]of i){if(Ui.has($))continue;Nn.set($);const P=this.tileInfoView.intersects(p,Nn),O=this.cachePolicy==="purge"?Nn.level!==y:Nn.level>y;!P||!h&&w?!O&&P||Zl.push(E):E.isReady?O&&this.cachePolicy==="purge"&&this._hasReadyAncestor(Nn,y)?Zl.push(E):Sy.push(E):O&&Zl.push(E)}for(const $ of Sy)$.isReady&&Ui.set($.key.id,$);for(const $ of Zl)this._tileCache?this._tileCache.add($):this.releaseTile($),i.delete($.key.id);for(const $ of Ui.values())this.tiles.push($);for(const $ of i.values())Ui.has($.key.id)||($.visible=!1);(M=this._tileCache)==null||M.prune(y,n,o),Gc.pool.release(p),Sy.length=0,Zl.length=0,Ui.clear()}clear(){const{tileIndex:t}=this;for(const r of t.values())this.releaseTile(r);t.clear()}refresh(t){var r;for(const i of this.tileIndex.values())t(i);(r=this._tileCache)==null||r.clear()}updateCacheSize(t){this._tileCache&&(this._tileCache.maxSize=t)}_addParentTile(t,r){var n;let i=t,s=null;for(;i=this.tileInfoView.getTileParentId(i),i;)if(this.tileIndex.has(i)){if(s=this.tileIndex.get(i),s==null?void 0:s.isReady){r.has(s.key.id)||r.set(s.key.id,s);break}}else if((n=this._tileCache)!=null&&n.has(i)&&(s=this._tileCache.pop(i),this.tileIndex.set(i,s),s==null?void 0:s.isReady)){r.has(s.key.id)||r.set(s.key.id,s);break}}_hasReadyAncestor(t,r){const i=Ct();this.tileInfoView.getTileBounds(i,t,!0);for(const s of this.tileIndex.values())if(s.isReady&&s.key.level>=r&&s.key.level<t.level){const n=Ct();if(this.tileInfoView.getTileBounds(n,s.key,!0),H8(n,i))return!0}return!1}};function oW(e,t,r,i,s){eC(e,t,r||0,i||e.length-1,s||aW)}function eC(e,t,r,i,s){for(;i>r;){if(i-r>600){var n=i-r+1,o=t-r+1,a=Math.log(n),l=.5*Math.exp(2*a/3),h=.5*Math.sqrt(a*l*(n-l)/n)*(o-n/2<0?-1:1);eC(e,t,Math.max(r,Math.floor(t-o*l/n+h)),Math.min(i,Math.floor(t+(n-o)*l/n+h)),s)}var p=e[t],f=r,m=i;for(Jl(e,r,t),s(e[i],p)>0&&Jl(e,r,i);f<m;){for(Jl(e,f,m),f++,m--;s(e[f],p)<0;)f++;for(;s(e[m],p)>0;)m--}s(e[r],p)===0?Jl(e,r,m):Jl(e,++m,i),m<=t&&(r=m+1),t<=m&&(i=m-1)}}function Jl(e,t,r){var i=e[t];e[t]=e[r],e[r]=i}function aW(e,t){return e<t?-1:e>t?1:0}function of(e,t){if(!(this instanceof of))return new of(e,t);this._maxEntries=Math.max(4,e||9),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),t&&(typeof t=="function"?this.toBBox=t:this._initFormat(t)),this.clear()}function lW(e,t,r){if(!r)return t.indexOf(e);for(var i=0;i<t.length;i++)if(r(e,t[i]))return i;return-1}function ia(e,t){qu(e,0,e.children.length,t,e)}function qu(e,t,r,i,s){s||(s=Ea(null)),s.minX=1/0,s.minY=1/0,s.maxX=-1/0,s.maxY=-1/0;for(var n,o=t;o<r;o++)n=e.children[o],Wu(s,e.leaf?i(n):n);return s}function Wu(e,t){return e.minX=Math.min(e.minX,t.minX),e.minY=Math.min(e.minY,t.minY),e.maxX=Math.max(e.maxX,t.maxX),e.maxY=Math.max(e.maxY,t.maxY),e}function WS(e,t){return e.minX-t.minX}function ZS(e,t){return e.minY-t.minY}function Ty(e){return(e.maxX-e.minX)*(e.maxY-e.minY)}function Qh(e){return e.maxX-e.minX+(e.maxY-e.minY)}function uW(e,t){return(Math.max(t.maxX,e.maxX)-Math.min(t.minX,e.minX))*(Math.max(t.maxY,e.maxY)-Math.min(t.minY,e.minY))}function cW(e,t){var r=Math.max(e.minX,t.minX),i=Math.max(e.minY,t.minY),s=Math.min(e.maxX,t.maxX),n=Math.min(e.maxY,t.maxY);return Math.max(0,s-r)*Math.max(0,n-i)}function $y(e,t){return e.minX<=t.minX&&e.minY<=t.minY&&t.maxX<=e.maxX&&t.maxY<=e.maxY}function ed(e,t){return t.minX<=e.maxX&&t.minY<=e.maxY&&t.maxX>=e.minX&&t.maxY>=e.minY}function Ea(e){return{children:e,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function JS(e,t,r,i,s){for(var n,o=[t,r];o.length;)(r=o.pop())-(t=o.pop())<=i||(n=t+Math.ceil((r-t)/i/2)*i,oW(e,n,t,r,s),o.push(t,n,n,r))}of.prototype={all:function(){return this._all(this.data,[])},search:function(e){var t=this.data,r=[],i=this.toBBox;if(!ed(e,t))return r;for(var s,n,o,a,l=[];t;){for(s=0,n=t.children.length;s<n;s++)o=t.children[s],ed(e,a=t.leaf?i(o):o)&&(t.leaf?r.push(o):$y(e,a)?this._all(o,r):l.push(o));t=l.pop()}return r},collides:function(e){var t=this.data,r=this.toBBox;if(!ed(e,t))return!1;for(var i,s,n,o,a=[];t;){for(i=0,s=t.children.length;i<s;i++)if(n=t.children[i],ed(e,o=t.leaf?r(n):n)){if(t.leaf||$y(e,o))return!0;a.push(n)}t=a.pop()}return!1},load:function(e){if(!e||!e.length)return this;if(e.length<this._minEntries){for(var t=0,r=e.length;t<r;t++)this.insert(e[t]);return this}var i=this._build(e.slice(),0,e.length-1,0);if(this.data.children.length)if(this.data.height===i.height)this._splitRoot(this.data,i);else{if(this.data.height<i.height){var s=this.data;this.data=i,i=s}this._insert(i,this.data.height-i.height-1,!0)}else this.data=i;return this},insert:function(e){return e!=null&&this._insert(e,this.data.height-1),this},clear:function(){return this.data=Ea([]),this},remove:function(e,t){if(e==null)return this;for(var r,i,s,n,o=this.data,a=this.toBBox(e),l=[],h=[];o||l.length;){if(o||(o=l.pop(),i=l[l.length-1],r=h.pop(),n=!0),o.leaf&&(s=lW(e,o.children,t))!==-1)return o.children.splice(s,1),l.push(o),this._condense(l),this;n||o.leaf||!$y(o,a)?i?(r++,o=i.children[r],n=!1):o=null:(l.push(o),h.push(r),r=0,i=o,o=o.children[0])}return this},toBBox:function(e){return e},compareMinX:WS,compareMinY:ZS,toJSON:function(){return this.data},fromJSON:function(e){return this.data=e,this},_all:function(e,t){for(var r=[];e;)e.leaf?t.push.apply(t,e.children):r.push.apply(r,e.children),e=r.pop();return t},_build:function(e,t,r,i){var s,n=r-t+1,o=this._maxEntries;if(n<=o)return ia(s=Ea(e.slice(t,r+1)),this.toBBox),s;i||(i=Math.ceil(Math.log(n)/Math.log(o)),o=Math.ceil(n/Math.pow(o,i-1))),(s=Ea([])).leaf=!1,s.height=i;var a,l,h,p,f=Math.ceil(n/o),m=f*Math.ceil(Math.sqrt(o));for(JS(e,t,r,m,this.compareMinX),a=t;a<=r;a+=m)for(JS(e,a,h=Math.min(a+m-1,r),f,this.compareMinY),l=a;l<=h;l+=f)p=Math.min(l+f-1,h),s.children.push(this._build(e,l,p,i-1));return ia(s,this.toBBox),s},_chooseSubtree:function(e,t,r,i){for(var s,n,o,a,l,h,p,f;i.push(t),!t.leaf&&i.length-1!==r;){for(p=f=1/0,s=0,n=t.children.length;s<n;s++)l=Ty(o=t.children[s]),(h=uW(e,o)-l)<f?(f=h,p=l<p?l:p,a=o):h===f&&l<p&&(p=l,a=o);t=a||t.children[0]}return t},_insert:function(e,t,r){var i=this.toBBox,s=r?e:i(e),n=[],o=this._chooseSubtree(s,this.data,t,n);for(o.children.push(e),Wu(o,s);t>=0&&n[t].children.length>this._maxEntries;)this._split(n,t),t--;this._adjustParentBBoxes(s,n,t)},_split:function(e,t){var r=e[t],i=r.children.length,s=this._minEntries;this._chooseSplitAxis(r,s,i);var n=this._chooseSplitIndex(r,s,i),o=Ea(r.children.splice(n,r.children.length-n));o.height=r.height,o.leaf=r.leaf,ia(r,this.toBBox),ia(o,this.toBBox),t?e[t-1].children.push(o):this._splitRoot(r,o)},_splitRoot:function(e,t){this.data=Ea([e,t]),this.data.height=e.height+1,this.data.leaf=!1,ia(this.data,this.toBBox)},_chooseSplitIndex:function(e,t,r){var i,s,n,o,a,l,h,p;for(l=h=1/0,i=t;i<=r-t;i++)o=cW(s=qu(e,0,i,this.toBBox),n=qu(e,i,r,this.toBBox)),a=Ty(s)+Ty(n),o<l?(l=o,p=i,h=a<h?a:h):o===l&&a<h&&(h=a,p=i);return p},_chooseSplitAxis:function(e,t,r){var i=e.leaf?this.compareMinX:WS,s=e.leaf?this.compareMinY:ZS;this._allDistMargin(e,t,r,i)<this._allDistMargin(e,t,r,s)&&e.children.sort(i)},_allDistMargin:function(e,t,r,i){e.children.sort(i);var s,n,o=this.toBBox,a=qu(e,0,t,o),l=qu(e,r-t,r,o),h=Qh(a)+Qh(l);for(s=t;s<r-t;s++)n=e.children[s],Wu(a,e.leaf?o(n):n),h+=Qh(a);for(s=r-t-1;s>=t;s--)n=e.children[s],Wu(l,e.leaf?o(n):n),h+=Qh(l);return h},_adjustParentBBoxes:function(e,t,r){for(var i=r;i>=0;i--)Wu(t[i],e)},_condense:function(e){for(var t,r=e.length-1;r>=0;r--)e[r].children.length===0?r>0?(t=e[r-1].children).splice(t.indexOf(e[r]),1):this.clear():ia(e[r],this.toBBox)},_initFormat:function(e){var t=["return a"," - b",";"];this.compareMinX=new Function("a","b",t.join(e[0])),this.compareMinY=new Function("a","b",t.join(e[1])),this.toBBox=new Function("a","return {minX: a"+e[0]+", minY: a"+e[1]+", maxX: a"+e[2]+", maxY: a"+e[3]+"};")}};function hW(e,{timeZone:t,timeExtent:r}){return{$view:{scale:e,timeZone:t,timeProperties:{currentStart:r==null?void 0:r.start,currentEnd:r==null?void 0:r.end}}}}let YS=class tC{constructor(t,r){this.key=new $n(0,0,0,0),this.bounds=Ct(),this.objectIds=new Set,this.key.set(r);const i=t.getLODInfoAt(this.key);this.tileInfoView=t,this.tileInfoView.getTileBounds(this.bounds,this.key,!0),this.resolution=i.resolution,this.level=i.level,this.scale=i.scale,this.minScale=t.zoomToScale(i.level-1),this.maxScale=t.zoomToScale(i.level+1)}get lod(){return this.tileInfoView.getLODInfoAt(this.key)}get id(){return this.key.id}get extent(){return V8(this.bounds,this.tileInfoView.tileInfo.spatialReference)}get transform(){return{originPosition:"upperLeft",scale:[this.resolution,this.resolution],translate:[this.bounds[0],this.bounds[3]]}}createArcadeEvaluationOptions(t){return hW(this.scale,t)}createChildTiles(){const t=this.key.getChildKeys(),r=Ot.acquire();for(let i=0;i<t.length;i++)r[i]=new tC(this.tileInfoView,t[i]);return r}getQuantizationParameters(){return EP.fromJSON({mode:"view",originPosition:"upperLeft",tolerance:this.resolution,extent:{xmin:this.bounds[0],ymin:this.bounds[1],xmax:this.bounds[2],ymax:this.bounds[3],spatialReference:this.tileInfoView.tileInfo.spatialReference}})}};const Ln={added:[],removed:[]},Ey=new Set,dW=new $n(0,0,0,0);function pW(e,t){const r=It(t);if(!r)return null;const[i,s]=r.valid;return e[2]>s?[Ct([e[0],e[1],s,e[3]]),Ct([i,e[1],i+e[2]-s,e[3]])]:e[0]<i?[Ct([i,e[1],e[2],e[3]]),Ct([s-(i-e[0]),e[1],s,e[3]])]:null}let fW=class extends xi{constructor(t){super(),this._tiles=new Map,this._index=of(9,A("esri-csp-restrictions")?r=>({minX:r.bounds[0],minY:r.bounds[1],maxX:r.bounds[2],maxY:r.bounds[3]}):[".bounds[0]",".bounds[1]",".bounds[2]",".bounds[3]"]),this.tiles=[],this.tileScheme=t}destroy(){this.clear()}clear(){this.tiles.length=0,this._tiles.clear(),this._index.clear()}has(t){return this._tiles.has(t)}get(t){return this._tiles.get(t)}getIntersectingTiles(t){if(!t||rv(t)===0||iv(t)===0)return[];const r=pW(t,this.tileScheme.spatialReference);return r!=null?[...new Set([...this.boundsIntersections(r[0]),...this.boundsIntersections(r[1])])]:this.boundsIntersections(t)}boundsIntersections(t){return this._index.search({minX:t[0],minY:t[1],maxX:t[2],maxY:t[3]})}updateTiles(t){const r={added:[],removed:[]};for(const i of t.added)if(!this.has(i)){const s=new YS(this.tileScheme,i);this._tiles.set(i,s),this._index.insert(s),r.added.push(s)}for(const i of t.removed)if(this.has(i)){const s=this.get(i);this._tiles.delete(i),this._index.remove(s),r.removed.push(s)}this.tiles.length=0,this._tiles.forEach(i=>this.tiles.push(i)),(r.added.length||r.removed.length)&&this.emit("update",r)}setViewState(t){const r=this.tileScheme.getTileCoverage(t,0);if(!r)return;const{spans:i,lodInfo:s}=r,{level:n}=s;if(i.length>0)for(const{row:o,colFrom:a,colTo:l}of i)for(let h=a;h<=l;h++){const p=dW.set(n,o,s.normalizeCol(h),s.getWorldForColumn(h)).id;if(Ey.add(p),!this.has(p)){const f=new YS(this.tileScheme,p);this._tiles.set(p,f),this._index.insert(f),this.tiles.push(f),Ln.added.push(f)}}for(let o=this.tiles.length-1;o>=0;o--){const a=this.tiles[o];Ey.has(a.id)||(this._tiles.delete(a.id),this.tiles.splice(o,1),this._index.remove(a),Ln.removed.push(a))}(Ln.added.length||Ln.removed.length)&&this.emit("update",Ln),Gc.pool.release(r),Ey.clear(),Ln.added.length=0,Ln.removed.length=0}};const Jse=1e-30,KS=512,td=16777216,Yse=8,Kse=29,Xse=24,Qse=4,ene=0,tne=0,rne=0,ine=1,sne=2,nne=3,one=4,ane=5,lne=6,une=12,cne=13,hne=5,mW=6,dne=5,pne=6;var XS;(function(e){e[e.FilterFlags=0]="FilterFlags",e[e.Animation=1]="Animation",e[e.GPGPU=2]="GPGPU",e[e.VV=3]="VV",e[e.DD0=4]="DD0",e[e.DD1=5]="DD1",e[e.DD2=6]="DD2",e[e.LocalTimeOrigin=7]="LocalTimeOrigin"})(XS||(XS={}));const rC=6,yW=1<<rC,fne=yW<<1,mne=1.05,yne=3,gne=1,_ne=3,vne=3,wne=5,bne=6,Sne=1.15,gW=4,Tne=128,_W=256,$ne=_W-2*gW,Ene=2,Mne=128,xne=1,Ane=10,Pne=1024,One=128,Cne=4,Ine=1,Rne=1<<20,kne=.75,Nne=10,Lne=.75,Dne=256,Fne=32,Une=512,jne=0,Gne=1,vW=1,zne=[0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1],Vne=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],Yl=256;var QS,eT,tT,rT,j1,iT,sT,wi,G1,mc,Qe,af,$r,Me,z,zc,ns,nT,oT,aT;(function(e){e[e.DEPTH=256]="DEPTH",e[e.STENCIL=1024]="STENCIL",e[e.COLOR=16384]="COLOR"})(QS||(QS={})),function(e){e[e.POINTS=0]="POINTS",e[e.LINES=1]="LINES",e[e.LINE_LOOP=2]="LINE_LOOP",e[e.LINE_STRIP=3]="LINE_STRIP",e[e.TRIANGLES=4]="TRIANGLES",e[e.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",e[e.TRIANGLE_FAN=6]="TRIANGLE_FAN"}(eT||(eT={})),function(e){e[e.ZERO=0]="ZERO",e[e.ONE=1]="ONE",e[e.SRC_COLOR=768]="SRC_COLOR",e[e.ONE_MINUS_SRC_COLOR=769]="ONE_MINUS_SRC_COLOR",e[e.SRC_ALPHA=770]="SRC_ALPHA",e[e.ONE_MINUS_SRC_ALPHA=771]="ONE_MINUS_SRC_ALPHA",e[e.DST_ALPHA=772]="DST_ALPHA",e[e.ONE_MINUS_DST_ALPHA=773]="ONE_MINUS_DST_ALPHA",e[e.DST_COLOR=774]="DST_COLOR",e[e.ONE_MINUS_DST_COLOR=775]="ONE_MINUS_DST_COLOR",e[e.SRC_ALPHA_SATURATE=776]="SRC_ALPHA_SATURATE",e[e.CONSTANT_COLOR=32769]="CONSTANT_COLOR",e[e.ONE_MINUS_CONSTANT_COLOR=32770]="ONE_MINUS_CONSTANT_COLOR",e[e.CONSTANT_ALPHA=32771]="CONSTANT_ALPHA",e[e.ONE_MINUS_CONSTANT_ALPHA=32772]="ONE_MINUS_CONSTANT_ALPHA"}(tT||(tT={})),function(e){e[e.ADD=32774]="ADD",e[e.MIN=32775]="MIN",e[e.MAX=32776]="MAX",e[e.SUBTRACT=32778]="SUBTRACT",e[e.REVERSE_SUBTRACT=32779]="REVERSE_SUBTRACT"}(rT||(rT={})),function(e){e[e.ARRAY_BUFFER=34962]="ARRAY_BUFFER",e[e.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",e[e.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER",e[e.PIXEL_PACK_BUFFER=35051]="PIXEL_PACK_BUFFER",e[e.PIXEL_UNPACK_BUFFER=35052]="PIXEL_UNPACK_BUFFER",e[e.COPY_READ_BUFFER=36662]="COPY_READ_BUFFER",e[e.COPY_WRITE_BUFFER=36663]="COPY_WRITE_BUFFER",e[e.TRANSFORM_FEEDBACK_BUFFER=35982]="TRANSFORM_FEEDBACK_BUFFER"}(j1||(j1={})),function(e){e[e.FRONT=1028]="FRONT",e[e.BACK=1029]="BACK",e[e.FRONT_AND_BACK=1032]="FRONT_AND_BACK"}(iT||(iT={})),function(e){e[e.CW=2304]="CW",e[e.CCW=2305]="CCW"}(sT||(sT={})),function(e){e[e.BYTE=5120]="BYTE",e[e.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",e[e.SHORT=5122]="SHORT",e[e.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",e[e.INT=5124]="INT",e[e.UNSIGNED_INT=5125]="UNSIGNED_INT",e[e.FLOAT=5126]="FLOAT",e[e.HALF_FLOAT=5131]="HALF_FLOAT"}(wi||(wi={})),function(e){e[e.NEVER=512]="NEVER",e[e.LESS=513]="LESS",e[e.EQUAL=514]="EQUAL",e[e.LEQUAL=515]="LEQUAL",e[e.GREATER=516]="GREATER",e[e.NOTEQUAL=517]="NOTEQUAL",e[e.GEQUAL=518]="GEQUAL",e[e.ALWAYS=519]="ALWAYS"}(G1||(G1={})),function(e){e[e.ZERO=0]="ZERO",e[e.KEEP=7680]="KEEP",e[e.REPLACE=7681]="REPLACE",e[e.INCR=7682]="INCR",e[e.DECR=7683]="DECR",e[e.INVERT=5386]="INVERT",e[e.INCR_WRAP=34055]="INCR_WRAP",e[e.DECR_WRAP=34056]="DECR_WRAP"}(mc||(mc={})),function(e){e[e.NEAREST=9728]="NEAREST",e[e.LINEAR=9729]="LINEAR",e[e.NEAREST_MIPMAP_NEAREST=9984]="NEAREST_MIPMAP_NEAREST",e[e.LINEAR_MIPMAP_NEAREST=9985]="LINEAR_MIPMAP_NEAREST",e[e.NEAREST_MIPMAP_LINEAR=9986]="NEAREST_MIPMAP_LINEAR",e[e.LINEAR_MIPMAP_LINEAR=9987]="LINEAR_MIPMAP_LINEAR"}(Qe||(Qe={})),function(e){e[e.CLAMP_TO_EDGE=33071]="CLAMP_TO_EDGE",e[e.REPEAT=10497]="REPEAT",e[e.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT"}(af||(af={})),function(e){e[e.TEXTURE_2D=3553]="TEXTURE_2D",e[e.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",e[e.TEXTURE_3D=32879]="TEXTURE_3D",e[e.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",e[e.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",e[e.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",e[e.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",e[e.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",e[e.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z",e[e.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY"}($r||($r={})),function(e){e[e.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",e[e.DEPTH_STENCIL=34041]="DEPTH_STENCIL",e[e.DEPTH24_STENCIL8=35056]="DEPTH24_STENCIL8",e[e.ALPHA=6406]="ALPHA",e[e.RGB=6407]="RGB",e[e.RGBA=6408]="RGBA",e[e.LUMINANCE=6409]="LUMINANCE",e[e.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",e[e.RED=6403]="RED",e[e.RG=33319]="RG",e[e.RED_INTEGER=36244]="RED_INTEGER",e[e.RG_INTEGER=33320]="RG_INTEGER",e[e.RGB_INTEGER=36248]="RGB_INTEGER",e[e.RGBA_INTEGER=36249]="RGBA_INTEGER"}(Me||(Me={})),function(e){e[e.RGBA4=32854]="RGBA4",e[e.R16F=33325]="R16F",e[e.RG16F=33327]="RG16F",e[e.RGB32F=34837]="RGB32F",e[e.RGBA16F=34842]="RGBA16F",e[e.R32F=33326]="R32F",e[e.RG32F=33328]="RG32F",e[e.RGBA32F=34836]="RGBA32F",e[e.R11F_G11F_B10F=35898]="R11F_G11F_B10F",e[e.RGB8=32849]="RGB8",e[e.RGBA8=32856]="RGBA8",e[e.RGB5_A1=32855]="RGB5_A1",e[e.R8=33321]="R8",e[e.RG8=33323]="RG8",e[e.R8I=33329]="R8I",e[e.R8UI=33330]="R8UI",e[e.R16I=33331]="R16I",e[e.R16UI=33332]="R16UI",e[e.R32I=33333]="R32I",e[e.R32UI=33334]="R32UI",e[e.RG8I=33335]="RG8I",e[e.RG8UI=33336]="RG8UI",e[e.RG16I=33337]="RG16I",e[e.RG16UI=33338]="RG16UI",e[e.RG32I=33339]="RG32I",e[e.RG32UI=33340]="RG32UI",e[e.RGB16F=34843]="RGB16F",e[e.RGB9_E5=35901]="RGB9_E5",e[e.SRGB8=35905]="SRGB8",e[e.SRGB8_ALPHA8=35907]="SRGB8_ALPHA8",e[e.RGB565=36194]="RGB565",e[e.RGBA32UI=36208]="RGBA32UI",e[e.RGB32UI=36209]="RGB32UI",e[e.RGBA16UI=36214]="RGBA16UI",e[e.RGB16UI=36215]="RGB16UI",e[e.RGBA8UI=36220]="RGBA8UI",e[e.RGB8UI=36221]="RGB8UI",e[e.RGBA32I=36226]="RGBA32I",e[e.RGB32I=36227]="RGB32I",e[e.RGBA16I=36232]="RGBA16I",e[e.RGB16I=36233]="RGB16I",e[e.RGBA8I=36238]="RGBA8I",e[e.RGB8I=36239]="RGB8I",e[e.R8_SNORM=36756]="R8_SNORM",e[e.RG8_SNORM=36757]="RG8_SNORM",e[e.RGB8_SNORM=36758]="RGB8_SNORM",e[e.RGBA8_SNORM=36759]="RGBA8_SNORM",e[e.RGB10_A2=32857]="RGB10_A2",e[e.RGB10_A2UI=36975]="RGB10_A2UI"}(z||(z={})),function(e){e[e.FLOAT=5126]="FLOAT",e[e.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",e[e.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",e[e.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",e[e.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",e[e.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",e[e.BYTE=5120]="BYTE",e[e.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",e[e.SHORT=5122]="SHORT",e[e.UNSIGNED_INT=5125]="UNSIGNED_INT",e[e.INT=5124]="INT",e[e.HALF_FLOAT=5131]="HALF_FLOAT",e[e.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",e[e.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",e[e.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",e[e.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV"}(zc||(zc={})),function(e){e[e.DEPTH_COMPONENT16=33189]="DEPTH_COMPONENT16",e[e.STENCIL_INDEX8=36168]="STENCIL_INDEX8",e[e.DEPTH_STENCIL=34041]="DEPTH_STENCIL",e[e.DEPTH_COMPONENT24=33190]="DEPTH_COMPONENT24",e[e.DEPTH_COMPONENT32F=36012]="DEPTH_COMPONENT32F",e[e.DEPTH24_STENCIL8=35056]="DEPTH24_STENCIL8",e[e.DEPTH32F_STENCIL8=36013]="DEPTH32F_STENCIL8"}(ns||(ns={})),function(e){e[e.STATIC_DRAW=35044]="STATIC_DRAW",e[e.DYNAMIC_DRAW=35048]="DYNAMIC_DRAW",e[e.STREAM_DRAW=35040]="STREAM_DRAW",e[e.STATIC_READ=35045]="STATIC_READ",e[e.DYNAMIC_READ=35049]="DYNAMIC_READ",e[e.STREAM_READ=35041]="STREAM_READ",e[e.STATIC_COPY=35046]="STATIC_COPY",e[e.DYNAMIC_COPY=35050]="DYNAMIC_COPY",e[e.STREAM_COPY=35042]="STREAM_COPY"}(nT||(nT={})),function(e){e[e.FRAGMENT_SHADER=35632]="FRAGMENT_SHADER",e[e.VERTEX_SHADER=35633]="VERTEX_SHADER"}(oT||(oT={})),function(e){e[e.FRAMEBUFFER=36160]="FRAMEBUFFER",e[e.READ_FRAMEBUFFER=36008]="READ_FRAMEBUFFER",e[e.DRAW_FRAMEBUFFER=36009]="DRAW_FRAMEBUFFER"}(aT||(aT={}));const Bne=33984;var lf,lT,uT;(function(e){e[e.Texture=0]="Texture",e[e.BufferObject=1]="BufferObject",e[e.VertexArrayObject=2]="VertexArrayObject",e[e.Shader=3]="Shader",e[e.Program=4]="Program",e[e.FramebufferObject=5]="FramebufferObject",e[e.Renderbuffer=6]="Renderbuffer",e[e.TransformFeedback=7]="TransformFeedback",e[e.Sync=8]="Sync",e[e.UNCOUNTED=9]="UNCOUNTED",e[e.LinesOfCode=9]="LinesOfCode",e[e.Uniform=10]="Uniform",e[e.COUNT=11]="COUNT"})(lf||(lf={})),function(e){e[e.COLOR_ATTACHMENT0=36064]="COLOR_ATTACHMENT0",e[e.COLOR_ATTACHMENT1=36065]="COLOR_ATTACHMENT1",e[e.COLOR_ATTACHMENT2=36066]="COLOR_ATTACHMENT2",e[e.COLOR_ATTACHMENT3=36067]="COLOR_ATTACHMENT3",e[e.COLOR_ATTACHMENT4=36068]="COLOR_ATTACHMENT4",e[e.COLOR_ATTACHMENT5=36069]="COLOR_ATTACHMENT5",e[e.COLOR_ATTACHMENT6=36070]="COLOR_ATTACHMENT6",e[e.COLOR_ATTACHMENT7=36071]="COLOR_ATTACHMENT7",e[e.COLOR_ATTACHMENT8=36072]="COLOR_ATTACHMENT8",e[e.COLOR_ATTACHMENT9=36073]="COLOR_ATTACHMENT9",e[e.COLOR_ATTACHMENT10=36074]="COLOR_ATTACHMENT10",e[e.COLOR_ATTACHMENT11=36075]="COLOR_ATTACHMENT11",e[e.COLOR_ATTACHMENT12=36076]="COLOR_ATTACHMENT12",e[e.COLOR_ATTACHMENT13=36077]="COLOR_ATTACHMENT13",e[e.COLOR_ATTACHMENT14=36078]="COLOR_ATTACHMENT14",e[e.COLOR_ATTACHMENT15=36079]="COLOR_ATTACHMENT15"}(lT||(lT={})),function(e){e[e.NONE=0]="NONE",e[e.BACK=1029]="BACK"}(uT||(uT={}));const Hne=33306;var nt,cT,hT,dT,pT,fT,mT;(function(e){e[e.COMPRESSED_RGB_S3TC_DXT1_EXT=33776]="COMPRESSED_RGB_S3TC_DXT1_EXT",e[e.COMPRESSED_RGBA_S3TC_DXT1_EXT=33777]="COMPRESSED_RGBA_S3TC_DXT1_EXT",e[e.COMPRESSED_RGBA_S3TC_DXT3_EXT=33778]="COMPRESSED_RGBA_S3TC_DXT3_EXT",e[e.COMPRESSED_RGBA_S3TC_DXT5_EXT=33779]="COMPRESSED_RGBA_S3TC_DXT5_EXT",e[e.COMPRESSED_R11_EAC=37488]="COMPRESSED_R11_EAC",e[e.COMPRESSED_SIGNED_R11_EAC=37489]="COMPRESSED_SIGNED_R11_EAC",e[e.COMPRESSED_RG11_EAC=37490]="COMPRESSED_RG11_EAC",e[e.COMPRESSED_SIGNED_RG11_EAC=37491]="COMPRESSED_SIGNED_RG11_EAC",e[e.COMPRESSED_RGB8_ETC2=37492]="COMPRESSED_RGB8_ETC2",e[e.COMPRESSED_SRGB8_ETC2=37493]="COMPRESSED_SRGB8_ETC2",e[e.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2=37494]="COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2",e[e.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2=37495]="COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2",e[e.COMPRESSED_RGBA8_ETC2_EAC=37496]="COMPRESSED_RGBA8_ETC2_EAC",e[e.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC=37497]="COMPRESSED_SRGB8_ALPHA8_ETC2_EAC"})(nt||(nt={})),function(e){e[e.FLOAT=5126]="FLOAT",e[e.FLOAT_VEC2=35664]="FLOAT_VEC2",e[e.FLOAT_VEC3=35665]="FLOAT_VEC3",e[e.FLOAT_VEC4=35666]="FLOAT_VEC4",e[e.INT=5124]="INT",e[e.INT_VEC2=35667]="INT_VEC2",e[e.INT_VEC3=35668]="INT_VEC3",e[e.INT_VEC4=35669]="INT_VEC4",e[e.BOOL=35670]="BOOL",e[e.BOOL_VEC2=35671]="BOOL_VEC2",e[e.BOOL_VEC3=35672]="BOOL_VEC3",e[e.BOOL_VEC4=35673]="BOOL_VEC4",e[e.FLOAT_MAT2=35674]="FLOAT_MAT2",e[e.FLOAT_MAT3=35675]="FLOAT_MAT3",e[e.FLOAT_MAT4=35676]="FLOAT_MAT4",e[e.SAMPLER_2D=35678]="SAMPLER_2D",e[e.SAMPLER_CUBE=35680]="SAMPLER_CUBE",e[e.UNSIGNED_INT=5125]="UNSIGNED_INT",e[e.UNSIGNED_INT_VEC2=36294]="UNSIGNED_INT_VEC2",e[e.UNSIGNED_INT_VEC3=36295]="UNSIGNED_INT_VEC3",e[e.UNSIGNED_INT_VEC4=36296]="UNSIGNED_INT_VEC4",e[e.FLOAT_MAT2x3=35685]="FLOAT_MAT2x3",e[e.FLOAT_MAT2x4=35686]="FLOAT_MAT2x4",e[e.FLOAT_MAT3x2=35687]="FLOAT_MAT3x2",e[e.FLOAT_MAT3x4=35688]="FLOAT_MAT3x4",e[e.FLOAT_MAT4x2=35689]="FLOAT_MAT4x2",e[e.FLOAT_MAT4x3=35690]="FLOAT_MAT4x3",e[e.SAMPLER_3D=35679]="SAMPLER_3D",e[e.SAMPLER_2D_SHADOW=35682]="SAMPLER_2D_SHADOW",e[e.SAMPLER_2D_ARRAY=36289]="SAMPLER_2D_ARRAY",e[e.SAMPLER_2D_ARRAY_SHADOW=36292]="SAMPLER_2D_ARRAY_SHADOW",e[e.SAMPLER_CUBE_SHADOW=36293]="SAMPLER_CUBE_SHADOW",e[e.INT_SAMPLER_2D=36298]="INT_SAMPLER_2D",e[e.INT_SAMPLER_3D=36299]="INT_SAMPLER_3D",e[e.INT_SAMPLER_CUBE=36300]="INT_SAMPLER_CUBE",e[e.INT_SAMPLER_2D_ARRAY=36303]="INT_SAMPLER_2D_ARRAY",e[e.UNSIGNED_INT_SAMPLER_2D=36306]="UNSIGNED_INT_SAMPLER_2D",e[e.UNSIGNED_INT_SAMPLER_3D=36307]="UNSIGNED_INT_SAMPLER_3D",e[e.UNSIGNED_INT_SAMPLER_CUBE=36308]="UNSIGNED_INT_SAMPLER_CUBE",e[e.UNSIGNED_INT_SAMPLER_2D_ARRAY=36311]="UNSIGNED_INT_SAMPLER_2D_ARRAY"}(cT||(cT={})),function(e){e[e.OBJECT_TYPE=37138]="OBJECT_TYPE",e[e.SYNC_CONDITION=37139]="SYNC_CONDITION",e[e.SYNC_STATUS=37140]="SYNC_STATUS",e[e.SYNC_FLAGS=37141]="SYNC_FLAGS"}(hT||(hT={})),function(e){e[e.UNSIGNALED=37144]="UNSIGNALED",e[e.SIGNALED=37145]="SIGNALED"}(dT||(dT={})),function(e){e[e.ALREADY_SIGNALED=37146]="ALREADY_SIGNALED",e[e.TIMEOUT_EXPIRED=37147]="TIMEOUT_EXPIRED",e[e.CONDITION_SATISFIED=37148]="CONDITION_SATISFIED",e[e.WAIT_FAILED=37149]="WAIT_FAILED"}(pT||(pT={})),function(e){e[e.SYNC_GPU_COMMANDS_COMPLETE=37143]="SYNC_GPU_COMMANDS_COMPLETE"}(fT||(fT={})),function(e){e[e.SYNC_FLUSH_COMMANDS_BIT=1]="SYNC_FLUSH_COMMANDS_BIT"}(mT||(mT={}));const wW=()=>F.getLogger("esri.views.webgl.checkWebGLError");function bW(e,t){switch(t){case e.INVALID_ENUM:return"Invalid Enum. An unacceptable value has been specified for an enumerated argument.";case e.INVALID_VALUE:return"Invalid Value. A numeric argument is out of range.";case e.INVALID_OPERATION:return"Invalid Operation. The specified command is not allowed for the current state.";case e.INVALID_FRAMEBUFFER_OPERATION:return"Invalid Framebuffer operation. The currently bound framebuffer is not framebuffer complete when trying to render to or to read from it.";case e.OUT_OF_MEMORY:return"Out of memory. Not enough memory is left to execute the command.";case e.CONTEXT_LOST_WEBGL:return"WebGL context has been lost";default:return"Unknown error"}}const iC=!!A("enable-feature:webgl-debug");function sC(){return iC}function qne(){return iC}function sa(e){if(sC()){const t=e.getError();if(t){const r=bW(e,t),i=new Error().stack;wW().error(new I("webgl-error","WebGL error occurred",{message:r,stack:i}))}}}var z1;(function(e){e[e.Texture=0]="Texture",e[e.RenderBuffer=1]="RenderBuffer"})(z1||(z1={}));function SW(e){switch(e){case wi.BYTE:case wi.UNSIGNED_BYTE:return 1;case wi.SHORT:case wi.UNSIGNED_SHORT:case wi.HALF_FLOAT:return 2;case wi.FLOAT:case wi.INT:case wi.UNSIGNED_INT:return 4}}function TW(e){const t=e.gl;switch(t.getError()){case t.NO_ERROR:return null;case t.INVALID_ENUM:return"An unacceptable value has been specified for an enumerated argument";case t.INVALID_VALUE:return"An unacceptable value has been specified for an argument";case t.INVALID_OPERATION:return"The specified command is not allowed for the current state";case t.INVALID_FRAMEBUFFER_OPERATION:return"The currently bound framebuffer is not framebuffer complete";case t.OUT_OF_MEMORY:return"Not enough memory is left to execute the command";case t.CONTEXT_LOST_WEBGL:return"WebGL context is lost"}return"Unknown error"}function Wne(e,t,r,i,s=0){var o;const n=e.gl;e.bindBuffer(r);for(const a of i){const l=t.get(a.name);if(l==null){console.warn(`There is no location for vertex attribute '${a.name}' defined.`);continue}const h=s*a.stride;if(a.count<=4)n.vertexAttribPointer(l,a.count,a.type,a.normalized,a.stride,a.offset+h),n.enableVertexAttribArray(l),a.divisor>0&&e.gl.vertexAttribDivisor(l,a.divisor);else if(a.count===9)for(let p=0;p<3;p++)n.vertexAttribPointer(l+p,3,a.type,a.normalized,a.stride,a.offset+12*p+h),n.enableVertexAttribArray(l+p),a.divisor>0&&e.gl.vertexAttribDivisor(l+p,a.divisor);else if(a.count===16)for(let p=0;p<4;p++)n.vertexAttribPointer(l+p,4,a.type,a.normalized,a.stride,a.offset+16*p+h),n.enableVertexAttribArray(l+p),a.divisor>0&&((o=e.gl)==null||o.vertexAttribDivisor(l+p,a.divisor));else console.error("Unsupported vertex attribute element count: "+a.count);if(sC()){const p=TW(e),f=SW(a.type),m=a.offset,y=Math.round(f/m)!==f/m?`. Offset not a multiple of stride. DataType requires ${f} bytes, but descriptor has an offset of ${m}`:"";p&&console.error(`Unable to bind vertex attribute "${a.name}" with baseInstanceOffset ${h}${y}:`,p,a)}}}function Zne(e,t,r,i){var n,o,a;const s=e.gl;e.bindBuffer(r);for(const l of i){const h=t.get(l.name);if(l.count<=4)s.disableVertexAttribArray(h),l.divisor&&l.divisor>0&&((n=e.gl)==null||n.vertexAttribDivisor(h,0));else if(l.count===9)for(let p=0;p<3;p++)s.disableVertexAttribArray(h+p),l.divisor&&l.divisor>0&&((o=e.gl)==null||o.vertexAttribDivisor(h+p,0));else if(l.count===16)for(let p=0;p<4;p++)s.disableVertexAttribArray(h+p),l.divisor&&l.divisor>0&&((a=e.gl)==null||a.vertexAttribDivisor(h+p,0));else console.error("Unsupported vertex attribute element count: "+l.count)}e.unbindBuffer(j1.ARRAY_BUFFER)}function $W(e){switch(e){case Me.ALPHA:case Me.LUMINANCE:case Me.RED:case Me.RED_INTEGER:case z.R8:case z.R8I:case z.R8UI:case z.R8_SNORM:case ns.STENCIL_INDEX8:return 1;case Me.LUMINANCE_ALPHA:case Me.RG:case Me.RG_INTEGER:case z.RGBA4:case z.R16F:case z.R16I:case z.R16UI:case z.RG8:case z.RG8I:case z.RG8UI:case z.RG8_SNORM:case z.RGB565:case z.RGB5_A1:case ns.DEPTH_COMPONENT16:return 2;case Me.DEPTH_COMPONENT:case Me.RGB:case Me.RGB_INTEGER:case z.RGB8:case z.RGB8I:case z.RGB8UI:case z.RGB8_SNORM:case z.SRGB8:case ns.DEPTH_COMPONENT24:return 3;case Me.DEPTH_STENCIL:case Me.DEPTH24_STENCIL8:case Me.RGBA:case Me.RGBA_INTEGER:case z.RGBA8:case z.R32F:case z.R11F_G11F_B10F:case z.RG16F:case z.R32I:case z.R32UI:case z.RG16I:case z.RG16UI:case z.RGBA8I:case z.RGBA8UI:case z.RGBA8_SNORM:case z.SRGB8_ALPHA8:case z.RGB9_E5:case z.RGB10_A2UI:case z.RGB10_A2:case ns.DEPTH_STENCIL:case ns.DEPTH_COMPONENT32F:case ns.DEPTH24_STENCIL8:return 4;case ns.DEPTH32F_STENCIL8:return 5;case z.RGB16F:case z.RGB16I:case z.RGB16UI:return 6;case z.RG32F:case z.RG32I:case z.RG32UI:case z.RGBA16F:case z.RGBA16I:case z.RGBA16UI:return 8;case z.RGB32F:case z.RGB32I:case z.RGB32UI:return 12;case z.RGBA32F:case z.RGBA32I:case z.RGBA32UI:return 16;case nt.COMPRESSED_RGB_S3TC_DXT1_EXT:case nt.COMPRESSED_RGBA_S3TC_DXT1_EXT:return .5;case nt.COMPRESSED_RGBA_S3TC_DXT3_EXT:case nt.COMPRESSED_RGBA_S3TC_DXT5_EXT:return 1;case nt.COMPRESSED_R11_EAC:case nt.COMPRESSED_SIGNED_R11_EAC:case nt.COMPRESSED_RGB8_ETC2:case nt.COMPRESSED_SRGB8_ETC2:case nt.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2:case nt.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2:return .5;case nt.COMPRESSED_RG11_EAC:case nt.COMPRESSED_SIGNED_RG11_EAC:case nt.COMPRESSED_RGBA8_ETC2_EAC:case nt.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:return 1}return 0}let nC=class{constructor(t=0,r=t){this.width=t,this.height=r,this.target=$r.TEXTURE_2D,this.pixelFormat=Me.RGBA,this.dataType=zc.UNSIGNED_BYTE,this.samplingMode=Qe.LINEAR,this.wrapMode=af.REPEAT,this.maxAnisotropy=1,this.flipped=!1,this.hasMipmap=!1,this.isOpaque=!1,this.unpackAlignment=4,this.preMultiplyAlpha=!1,this.shouldCompress=!1,this.depth=1,this.isImmutable=!1}};function EW(e){return e.width<=0||e.height<=0?0:Math.round(e.width*e.height*e.depth*(e.hasMipmap?4/3:1)*(e.internalFormat==null?4:$W(e.internalFormat))*(e.target===$r.TEXTURE_CUBE_MAP?6:1))}const MW=()=>F.getLogger("esri/views/webgl/textureUtils");function rd(e){(e.width!=null&&e.width<0||e.height!=null&&e.height<0||e.depth!=null&&e.depth<0)&&MW().error("Negative dimension parameters are not allowed!")}function xW(e){return e in z}function AW(e){return e in nt}function Ma(e){return e!=null&&"type"in e&&e.type==="compressed"}function PW(e){return e!=null&&"byteLength"in e}function yT(e){return e!=null&&!Ma(e)&&!PW(e)}function na(e){return e===$r.TEXTURE_3D||e===$r.TEXTURE_2D_ARRAY}function gT(e,t,r,i=1){let s=Math.max(t,r);return e===$r.TEXTURE_3D&&(s=Math.max(s,i)),Math.floor(Math.log2(s))+1}function id(e){if(e.internalFormat!=null)return e.internalFormat===Me.DEPTH_STENCIL?Me.DEPTH24_STENCIL8:e.internalFormat;switch(e.dataType){case zc.FLOAT:switch(e.pixelFormat){case Me.RGBA:return z.RGBA32F;case Me.RGB:return z.RGB32F;default:throw new I("Unable to derive format")}case zc.UNSIGNED_BYTE:switch(e.pixelFormat){case Me.RGBA:return z.RGBA8;case Me.RGB:return z.RGB8}}return e.internalFormat=e.pixelFormat===Me.DEPTH_STENCIL?Me.DEPTH24_STENCIL8:e.pixelFormat}function OW(e){let t="width"in e?e.width:e.codedWidth,r="height"in e?e.height:e.codedHeight;return e instanceof HTMLVideoElement&&(t=e.videoWidth,r=e.videoHeight),{width:t,height:r,depth:1}}let CW=class oC extends nC{constructor(t,r){switch(super(),this.context=t,Object.assign(this,r),this.internalFormat){case z.R16F:case z.R16I:case z.R16UI:case z.R32F:case z.R32I:case z.R32UI:case z.R8_SNORM:case z.R8:case z.R8I:case z.R8UI:this.pixelFormat=Me.RED}}static validate(t,r){return new oC(t,r)}};const As=()=>F.getLogger("esri/views/webgl/Texture");let V1=class xt{constructor(t,r=null,i=null){if(this.type=z1.Texture,this._glName=null,this._samplingModeDirty=!1,this._wrapModeDirty=!1,this._wasImmutablyAllocated=!1,this._compressionAbortController=yl(null),"context"in t)this._descriptor=t,i=r;else{const s=CW.validate(t,r);if(!s)throw new I("Texture descriptor invalid");this._descriptor=s}this._descriptor.target===$r.TEXTURE_CUBE_MAP?this._setDataCubeMap(i):this.setData(i)}get glName(){return this._glName}get descriptor(){return this._descriptor}get usedMemory(){return EW(this._descriptor)}get cachedMemory(){return this.usedMemory}get isDirty(){return this._samplingModeDirty||this._wrapModeDirty}get isCompressing(){return this._compressionAbortController.value!==null}dispose(){this.abortCompression(),this._glName&&this._descriptor.context.instanceCounter.decrement(lf.Texture,this),this._descriptor.context.gl&&this._glName&&(this._descriptor.context.unbindTexture(this),this._descriptor.context.gl.deleteTexture(this._glName),this._glName=null)}release(){this.dispose()}resize(t,r){const i=this._descriptor;if(i.width!==t||i.height!==r){if(this._wasImmutablyAllocated)throw new I("Immutable textures can't be resized!");i.width=t,i.height=r,this._descriptor.target===$r.TEXTURE_CUBE_MAP?this._setDataCubeMap(null):this.setData(null)}}enableCompression(t){this._descriptor.shouldCompress=t}setData(t){this.abortCompression(),!Ma(t)&&this._descriptor.internalFormat&&this._descriptor.internalFormat in nt&&(this._descriptor.internalFormat=void 0),this._setData(t),!Ma(t)&&this._descriptor.shouldCompress&&this._compressOnWorker(t)}updateData(t,r,i,s,n,o,a=0){o||As().error("An attempt to use uninitialized data!"),this._glName||As().error("An attempt to update uninitialized texture!");const l=this._descriptor;l.internalFormat=id(l);const{context:h,pixelFormat:p,dataType:f,target:m,isImmutable:y}=l;if(y&&!this._wasImmutablyAllocated)throw new I("Cannot update immutable texture before allocation!");const _=h.bindTexture(this,xt.TEXTURE_UNIT_FOR_UPDATES,!0);(r<0||i<0||r+s>l.width||i+n>l.height)&&As().error("An attempt to update out of bounds of the texture!"),this._configurePixelStorage();const{gl:v}=h;a&&(s&&n||As().warn("Must pass width and height if `UNPACK_SKIP_ROWS` is used"),v.pixelStorei(v.UNPACK_SKIP_ROWS,a)),yT(o)?v.texSubImage2D(m,t,r,i,s,n,p,f,o):Ma(o)?v.compressedTexSubImage2D(m,t,r,i,s,n,l.internalFormat,o.levels[t]):v.texSubImage2D(m,t,r,i,s,n,p,f,o),a&&v.pixelStorei(v.UNPACK_SKIP_ROWS,0),h.bindTexture(_,xt.TEXTURE_UNIT_FOR_UPDATES)}updateData3D(t,r,i,s,n,o,a,l){l||As().error("An attempt to use uninitialized data!"),this._glName||As().error("An attempt to update an uninitialized texture!");const h=this._descriptor;h.internalFormat=id(h);const{context:p,pixelFormat:f,dataType:m,isImmutable:y,target:_}=h;if(y&&!this._wasImmutablyAllocated)throw new I("Cannot update immutable texture before allocation!");na(_)||As().warn("Attempting to set 3D texture data on a non-3D texture");const v=p.bindTexture(this,xt.TEXTURE_UNIT_FOR_UPDATES);p.setActiveTexture(xt.TEXTURE_UNIT_FOR_UPDATES),(r<0||i<0||s<0||r+n>h.width||i+o>h.height||s+a>h.depth)&&As().error("An attempt to update out of bounds of the texture!"),this._configurePixelStorage();const{gl:w}=p;if(Ma(l))l=l.levels[t],w.compressedTexSubImage3D(_,t,r,i,s,n,o,a,h.internalFormat,l);else{const b=l;w.texSubImage3D(_,t,r,i,s,n,o,a,f,m,b)}p.bindTexture(v,xt.TEXTURE_UNIT_FOR_UPDATES)}generateMipmap(){const t=this._descriptor;if(t.width===0||t.height===0)return;if(!t.hasMipmap){if(this._wasImmutablyAllocated)throw new I("Cannot add mipmaps to immutable texture after allocation");t.hasMipmap=!0,this._samplingModeDirty=!0,rd(t)}t.samplingMode===Qe.LINEAR?(this._samplingModeDirty=!0,t.samplingMode=Qe.LINEAR_MIPMAP_NEAREST):t.samplingMode===Qe.NEAREST&&(this._samplingModeDirty=!0,t.samplingMode=Qe.NEAREST_MIPMAP_NEAREST);const r=this._descriptor.context.bindTexture(this,xt.TEXTURE_UNIT_FOR_UPDATES);this._descriptor.context.setActiveTexture(xt.TEXTURE_UNIT_FOR_UPDATES),this._descriptor.context.gl.generateMipmap(t.target),this._descriptor.context.bindTexture(r,xt.TEXTURE_UNIT_FOR_UPDATES)}clearMipmap(){const t=this._descriptor;if(t.hasMipmap){if(this._wasImmutablyAllocated)throw new I("Cannot delete mipmaps to immutable texture after allocation");t.hasMipmap=!1,this._samplingModeDirty=!0,rd(t)}t.samplingMode===Qe.LINEAR_MIPMAP_NEAREST?(this._samplingModeDirty=!0,t.samplingMode=Qe.LINEAR):t.samplingMode===Qe.NEAREST_MIPMAP_NEAREST&&(this._samplingModeDirty=!0,t.samplingMode=Qe.NEAREST)}setSamplingMode(t){t!==this._descriptor.samplingMode&&(this._descriptor.samplingMode=t,this._samplingModeDirty=!0)}setWrapMode(t){t!==this._descriptor.wrapMode&&(this._descriptor.wrapMode=t,rd(this._descriptor),this._wrapModeDirty=!0)}applyChanges(){this._samplingModeDirty&&(this._applySamplingMode(),this._samplingModeDirty=!1),this._wrapModeDirty&&(this._applyWrapMode(),this._wrapModeDirty=!1)}abortCompression(){this.isCompressing&&(this._compressionAbortController.value=tl(this._compressionAbortController.value))}_setData(t,r){var l;const i=this._descriptor,s=(l=i.context)==null?void 0:l.gl;if(!s)return;sa(s),this._glName||(this._glName=s.createTexture(),this._glName&&i.context.instanceCounter.increment(lf.Texture,this)),rd(i);const n=i.context.bindTexture(this,xt.TEXTURE_UNIT_FOR_UPDATES);i.context.setActiveTexture(xt.TEXTURE_UNIT_FOR_UPDATES),this._configurePixelStorage(),sa(s);const o=r??i.target,a=na(o);if(yT(t))this._setDataFromTexImageSource(t,o);else{const{width:h,height:p,depth:f}=i;if(h==null||p==null)throw new I("Width and height must be specified!");if(a&&f==null)throw new I("Depth must be specified!");if(i.internalFormat=id(i),i.isImmutable&&!this._wasImmutablyAllocated&&this._texStorage(o,i.internalFormat,i.hasMipmap,h,p,f),Ma(t)){if(!AW(i.internalFormat))throw new I("Attempting to use compressed data with an uncompressed format!");this._setDataFromCompressedSource(t,i.internalFormat,o)}else this._texImage(o,0,i.internalFormat,h,p,f,t),sa(s),i.hasMipmap&&this.generateMipmap()}this._applySamplingMode(),this._applyWrapMode(),this._applyAnisotropicFilteringParameters(),sa(s),i.context.bindTexture(n,xt.TEXTURE_UNIT_FOR_UPDATES)}_setDataCubeMap(t=null){for(let r=$r.TEXTURE_CUBE_MAP_POSITIVE_X;r<=$r.TEXTURE_CUBE_MAP_NEGATIVE_Z;r++)this._setData(t,r)}_configurePixelStorage(){const t=this._descriptor.context.gl,{unpackAlignment:r,flipped:i,preMultiplyAlpha:s}=this._descriptor;t.pixelStorei(t.UNPACK_ALIGNMENT,r),t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,i?1:0),t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,s?1:0)}_setDataFromTexImageSource(t,r){const{gl:i}=this._descriptor.context,s=this._descriptor;s.internalFormat=id(s);const n=na(r),{width:o,height:a,depth:l}=OW(t);s.width&&s.height,s.width||(s.width=o),s.height||(s.height=a),n&&s.depth,n&&(s.depth=l),s.isImmutable&&!this._wasImmutablyAllocated&&this._texStorage(r,s.internalFormat,s.hasMipmap,o,a,l),this._texImage(r,0,s.internalFormat,o,a,l,t),sa(i),s.hasMipmap&&(this.generateMipmap(),sa(i))}_setDataFromCompressedSource(t,r,i){const s=this._descriptor,{width:n,height:o,depth:a}=s,l=t.levels,h=gT(i,n,o,a),p=Math.min(h,l.length)-1;this._descriptor.context.gl.texParameteri(s.target,s.context.gl.TEXTURE_MAX_LEVEL,p),this._forEachMipmapLevel((f,m,y,_)=>{const v=l[Math.min(f,l.length-1)];this._compressedTexImage(i,f,r,m,y,_,v)},p)}_texStorage(t,r,i,s,n,o){const{gl:a}=this._descriptor.context;if(!xW(r))throw new I("Immutable textures must have a sized internal format");if(!this._descriptor.isImmutable)return;const l=i?gT(t,s,n,o):1;if(na(t)){if(o==null)throw new I("Missing depth dimension for 3D texture upload");a.texStorage3D(t,l,r,s,n,o)}else a.texStorage2D(t,l,r,s,n);this._wasImmutablyAllocated=!0}_texImage(t,r,i,s,n,o,a){const l=this._descriptor.context.gl,h=na(t),{isImmutable:p,pixelFormat:f,dataType:m}=this._descriptor;if(p){if(a!=null){const y=a;if(h){if(o==null)throw new I("Missing depth dimension for 3D texture upload");l.texSubImage3D(t,r,0,0,0,s,n,o,f,m,y)}else l.texSubImage2D(t,r,0,0,s,n,f,m,y)}}else{const y=a;if(h){if(o==null)throw new I("Missing depth dimension for 3D texture upload");l.texImage3D(t,r,i,s,n,o,0,f,m,y)}else l.texImage2D(t,r,i,s,n,0,f,m,y)}}_compressedTexImage(t,r,i,s,n,o,a){const l=this._descriptor.context.gl,h=na(t);if(this._descriptor.isImmutable){if(a!=null)if(h){if(o==null)throw new I("Missing depth dimension for 3D texture upload");l.compressedTexSubImage3D(t,r,0,0,0,s,n,o,i,a)}else l.compressedTexSubImage2D(t,r,0,0,s,n,i,a)}else if(h){if(o==null)throw new I("Missing depth dimension for 3D texture upload");l.compressedTexImage3D(t,r,i,s,n,o,0,a)}else l.compressedTexImage2D(t,r,i,s,n,0,a)}async _compressOnWorker(t){var s,n;if(!xt.compressionWorkerHandle||!xt.compressionWorkerHandle.isCompressible(t))return;const r=(s=this._descriptor.context)==null?void 0:s.gl.getExtension("WEBGL_compressed_texture_etc"),i=(n=this._descriptor.context)==null?void 0:n.gl.getExtension("WEBGL_compressed_texture_s3tc");if(r||i){const o=new AbortController;this._compressionAbortController.value=o;const a={data:await createImageBitmap(t),flipped:this.descriptor.flipped,width:t.width,height:t.height,hasMipmap:this._descriptor.hasMipmap,hasETC:!!r,hasS3TC:!!i};xt.compressionWorkerHandle.invoke(a,this._compressionAbortController.value.signal).then(l=>{l&&this.isCompressing&&this.glName&&(this._descriptor.internalFormat=l.internalFormat,this._setData(l.compressedTexture)),o===this._compressionAbortController.value&&(this._compressionAbortController.value=null)}).catch(l=>{Ht(l)||o!==this._compressionAbortController.value||(this._compressionAbortController.value=null)})}}_forEachMipmapLevel(t,r=1/0){let{width:i,height:s,depth:n,hasMipmap:o,target:a}=this._descriptor;const l=a===$r.TEXTURE_3D;if(i==null||s==null||l&&n==null)throw new I("Missing texture dimensions for mipmap calculation");for(let h=0;t(h,i,s,n),o&&(i!==1||s!==1||l&&n!==1)&&!(h>=r);++h)i=Math.max(1,i>>1),s=Math.max(1,s>>1),l&&(n=Math.max(1,n>>1))}_applySamplingMode(){var n;const t=this._descriptor,r=(n=t.context)==null?void 0:n.gl;let i=t.samplingMode,s=t.samplingMode;i===Qe.LINEAR_MIPMAP_NEAREST||i===Qe.LINEAR_MIPMAP_LINEAR?(i=Qe.LINEAR,t.hasMipmap||(s=Qe.LINEAR)):i!==Qe.NEAREST_MIPMAP_NEAREST&&i!==Qe.NEAREST_MIPMAP_LINEAR||(i=Qe.NEAREST,t.hasMipmap||(s=Qe.NEAREST)),r.texParameteri(t.target,r.TEXTURE_MAG_FILTER,i),r.texParameteri(t.target,r.TEXTURE_MIN_FILTER,s)}_applyWrapMode(){var i;const t=this._descriptor,r=(i=t.context)==null?void 0:i.gl;typeof t.wrapMode=="number"?(r.texParameteri(t.target,r.TEXTURE_WRAP_S,t.wrapMode),r.texParameteri(t.target,r.TEXTURE_WRAP_T,t.wrapMode)):(r.texParameteri(t.target,r.TEXTURE_WRAP_S,t.wrapMode.s),r.texParameteri(t.target,r.TEXTURE_WRAP_T,t.wrapMode.t))}_applyAnisotropicFilteringParameters(){const t=this._descriptor,r=t.context.capabilities.textureFilterAnisotropic;r&&t.context.gl.texParameterf(t.target,r.TEXTURE_MAX_ANISOTROPY,t.maxAnisotropy??1)}};V1.TEXTURE_UNIT_FOR_UPDATES=0,V1.compressionWorkerHandle=null;const My=()=>F.getLogger("esri.views.2d.engine.webgl.painter.highlight.HighlightGradient");function IW(e,t){t.fillColor[0]=e.color.r/255,t.fillColor[1]=e.color.g/255,t.fillColor[2]=e.color.b/255,t.fillColor[3]=e.color.a,e.haloColor?(t.outlineColor[0]=e.haloColor.r/255,t.outlineColor[1]=e.haloColor.g/255,t.outlineColor[2]=e.haloColor.b/255,t.outlineColor[3]=e.haloColor.a):(t.outlineColor[0]=t.fillColor[0],t.outlineColor[1]=t.fillColor[1],t.outlineColor[2]=t.fillColor[2],t.outlineColor[3]=t.fillColor[3]),t.fillColor[3]*=e.fillOpacity,t.outlineColor[3]*=e.haloOpacity,t.fillColor[0]*=t.fillColor[3],t.fillColor[1]*=t.fillColor[3],t.fillColor[2]*=t.fillColor[3],t.outlineColor[0]*=t.outlineColor[3],t.outlineColor[1]*=t.outlineColor[3],t.outlineColor[2]*=t.outlineColor[3],t.outlineWidth=(1-e.haloBlur)*e.haloWidth,t.outerHaloWidth=e.haloBlur*e.haloWidth/2,t.innerHaloWidth=e.haloBlur*e.haloWidth/2,t.outlinePosition=0}const RW=[0,0,0,0];let aC=class{constructor(){this.type="single",this._highlightOptions=new hn,this._convertedHighlightOptions={fillColor:[0,0,0,0],outlineColor:[0,0,0,0],outlinePosition:0,outlineWidth:0,innerHaloWidth:0,outerHaloWidth:0},this._optionsShadeTexKey="",this._texelData=new Uint8Array(4*Yl),this._minMaxDistance=[0,0]}setHighlightOptions(t){this._highlightOptions=t}applyHighlightOptions(t,r){this._updateGradientTexture(t),t.bindTexture(this._shadeTex,mW),r.setUniform2fv("u_minMaxDistance",this._minMaxDistance)}destroy(){var t;(t=this._shadeTex)==null||t.dispose(),this._shadeTex=null}getReasonsWithGradients(){return[{activeReasons:(1<<rC)-1,activeGradient:this}]}_updateGradientTexture(t){const r=kW(this._highlightOptions);if(r===this._optionsShadeTexKey)return;this._optionsShadeTexKey=r,IW(this._highlightOptions,this._convertedHighlightOptions);const i=this._convertedHighlightOptions,s=i.outlinePosition-i.outlineWidth/2-i.outerHaloWidth,n=i.outlinePosition-i.outlineWidth/2,o=i.outlinePosition+i.outlineWidth/2,a=i.outlinePosition+i.outlineWidth/2+i.innerHaloWidth,l=Math.sqrt(Math.PI/2)*vW,h=Math.abs(s)>l?Math.round(10*(Math.abs(s)-l))/10:0,p=Math.abs(a)>l?Math.round(10*(Math.abs(a)-l))/10:0;let f;h&&!p?My().error("The outer rim of the highlight is "+h+"px away from the edge of the feature; consider reducing some width values or shifting the outline position towards positive values (inwards)."):!h&&p?My().error("The inner rim of the highlight is "+p+"px away from the edge of the feature; consider reducing some width values or shifting the outline position towards negative values (outwards)."):h&&p&&My().error("The highlight is "+Math.max(h,p)+"px away from the edge of the feature; consider reducing some width values.");const m=[void 0,void 0,void 0,void 0];function y(v,w,b){m[0]=(1-b)*v[0]+b*w[0],m[1]=(1-b)*v[1]+b*w[1],m[2]=(1-b)*v[2]+b*w[2],m[3]=(1-b)*v[3]+b*w[3]}const{_texelData:_}=this;for(let v=0;v<Yl;++v)f=s+v/(Yl-1)*(a-s),f<s?(m[0]=0,m[1]=0,m[2]=0,m[3]=0):f<n?y(RW,i.outlineColor,(f-s)/(n-s)):f<o?[m[0],m[1],m[2],m[3]]=i.outlineColor:f<a?y(i.outlineColor,i.fillColor,(f-o)/(a-o)):[m[0],m[1],m[2],m[3]]=i.fillColor,_[4*v]=255*m[0],_[4*v+1]=255*m[1],_[4*v+2]=255*m[2],_[4*v+3]=255*m[3];if(this._minMaxDistance[0]=s,this._minMaxDistance[1]=a,!this._shadeTex){const v=new nC;v.wrapMode=af.CLAMP_TO_EDGE,v.width=Yl,v.height=1,this._shadeTex=new V1(t,v)}this._shadeTex.updateData(0,0,0,Yl,1,this._texelData)}};function kW(e){return`${e.color};${e.haloColor};${e.haloOpacity};${e.fillOpacity};${e.haloWidth};${e.haloBlur}`}let NW=class{constructor(){this.type="multi",this.gradients=[]}setHighlightOptions(t){for(let r=0;r<t.length;r++)this.gradients[r]||(this.gradients[r]=new aC),this.gradients[r].setHighlightOptions(t[r]);for(let r=t.length+1;r<this.gradients.length;r++)this.gradients[r].destroy();this.gradients.length=t.length}destroy(){for(const t of this.gradients)t.destroy()}getReasonsWithGradients(){let t=1;const r=[];for(let i=0;i<this.gradients.length;i++){const s=this.gradients[i];r.push({activeReasons:t,activeGradient:s}),t<<=1}return r}};var _T,vT,wT,bT,ST,TT,uf,$T,ET;(function(e){e[e.FILL=0]="FILL",e[e.LINE=1]="LINE",e[e.MARKER=2]="MARKER",e[e.TEXT=3]="TEXT",e[e.LABEL=4]="LABEL"})(_T||(_T={})),function(e){e[e.NONE=0]="NONE",e[e.MAP=1]="MAP",e[e.LABEL=2]="LABEL",e[e.LABEL_ALPHA=4]="LABEL_ALPHA",e[e.HITTEST=8]="HITTEST",e[e.HIGHLIGHT=16]="HIGHLIGHT",e[e.CLIP=32]="CLIP",e[e.DEBUG=64]="DEBUG",e[e.NUM_DRAW_PHASES=9]="NUM_DRAW_PHASES"}(vT||(vT={})),function(e){e[e.SIZE=0]="SIZE",e[e.COLOR=1]="COLOR",e[e.OPACITY=2]="OPACITY",e[e.ROTATION=3]="ROTATION"}(wT||(wT={})),function(e){e[e.MINMAX_TARGETS_OUTLINE=128]="MINMAX_TARGETS_OUTLINE",e[e.SCALE_TARGETS_OUTLINE=256]="SCALE_TARGETS_OUTLINE",e[e.FIELD_TARGETS_OUTLINE=512]="FIELD_TARGETS_OUTLINE",e[e.UNIT_TARGETS_OUTLINE=1024]="UNIT_TARGETS_OUTLINE"}(bT||(bT={})),function(e){e[e.SPRITE=0]="SPRITE",e[e.GLYPH=1]="GLYPH"}(ST||(ST={})),function(e){e[e.DEFAULT=0]="DEFAULT",e[e.SIMPLE=1]="SIMPLE",e[e.DOT_DENSITY=2]="DOT_DENSITY",e[e.OUTLINE_FILL=3]="OUTLINE_FILL",e[e.OUTLINE_FILL_SIMPLE=4]="OUTLINE_FILL_SIMPLE",e[e.HEATMAP=5]="HEATMAP",e[e.PIE_CHART=6]="PIE_CHART"}(TT||(TT={})),function(e){e[e.All=0]="All",e[e.Highlight=1]="Highlight",e[e.InsideEffect=2]="InsideEffect",e[e.OutsideEffect=3]="OutsideEffect"}(uf||(uf={})),function(e){e[e.BATCHING=0]="BATCHING",e[e.STRICT_ORDER=1]="STRICT_ORDER",e[e.STRICT_MARKERS_AND_TEXT=2]="STRICT_MARKERS_AND_TEXT"}($T||($T={})),function(e){e[e.FILL=0]="FILL",e[e.LINE=1]="LINE",e[e.MARKER=2]="MARKER",e[e.TEXT=3]="TEXT"}(ET||(ET={}));const lC={color:{write:[!0,!0,!0,!0],blendMode:"composite"},depth:!1,stencil:{write:!1,test:{ref:e=>e.stencilRef,compare:G1.EQUAL,mask:255,op:{fail:mc.KEEP,zFail:mc.KEEP,zPass:mc.REPLACE}}}},LW={color:{write:[!0,!0,!0,!0],blendMode:"additive"},depth:!1,stencil:!1},DW={...lC,color:{write:[!0,!0,!0,!0],blendMode:"delete"}};function FW({pixelRatio:e,state:t,displayLevel:r,requiredLevel:i},s){const n=1/2**(r-s.key.level),o=1/2**(i-s.key.level);return{displayMat3:t.displayMat3,displayViewMat3:t.displayViewMat3,displayViewScreenMat3:s.transforms.displayViewScreenMat3,viewMat3:t.viewMat3,tileMat3:s.transforms.tileMat3,displayZoomFactor:n,requiredZoomFactor:o,tileOffset:[s.x,s.y],currentScale:t.scale,currentZoom:r,metersPerSRUnit:ki(t.spatialReference),rotation:t.rotation,pixelRatio:e}}function uC(e){var t;return((t=e.passOptions)==null?void 0:t.type)==="highlight"}function cC(e){var t;return((t=e.passOptions)==null?void 0:t.type)==="hittest"}function UW(e){if(!cC(e))return null;const{position:t,distance:r,smallSymbolDistance:i,smallSymbolSizeThreshold:s}=e.passOptions;return{position:t,distance:r,smallSymbolDistance:i,smallSymbolSizeThreshold:s}}function jW(e){if(!uC(e))return null;const{activeReasons:t,highlightAll:r}=e.passOptions;return{activeReasons:t,highlightAll:r?1:0}}function Xne(e,t,r){const i={};for(const s in r)r[s]instanceof Function?i[s]=r[s](e,t):i[s]=r[s];return i}function Qne(e,t){const{attributeView:r,context:i}=e;return{storage:r.getUniforms(i),view:FW(e,t),hittestRequest:UW(e),highlight:jW(e)}}function eoe(e){return{inside:e.selection===uf.InsideEffect,outside:e.selection===uf.OutsideEffect}}function GW(e){return cC(e)?LW:uC(e)&&e.passOptions.stepType==="clear"?DW:lC}function toe(e){const{row:t,col:r}=e.key,i=r*KS,s=t*KS;return{tileOffsetFromLocalOrigin:[i%td,s%td],maxIntsToLocalOrigin:[Math.floor(i/td),Math.floor(s/td)]}}const zW=new rt({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryMultiPatch:"multipatch",mesh:"mesh"});function roe(e){return zW.toJSON(e)}function ioe(e){const{bandCount:t,attributeTable:r,colormap:i,pixelType:s}=e.raster.rasterInfo;return t===1&&(r!=null||i!=null||s==="u8"||s==="s8")}function VW(e,t){return t==null?(e==null||e.destroy(),null):((e==null?void 0:e.type)==="single"&&Array.isArray(t)&&(e.destroy(),e=null),(e==null?void 0:e.type)!=="multi"||Array.isArray(t)||(e.destroy(),e=null),e||(e=Array.isArray(t)?new NW:new aC),Array.isArray(t)?e.type==="multi"&&e.setHighlightOptions(t):e.type==="single"&&e.setHighlightOptions(t),e)}function soe(e,t,r,i){const{painter:s,highlightGradient:n}=e,{highlight:o}=s.effects;if(!n)return;const a=e.passOptions,l=n.getReasonsWithGradients();for(let h=0;h<l.length;h++){const p={...e,passOptions:{type:"highlight",activeGradient:l[h].activeGradient,activeReasons:l[h].activeReasons,stepType:"burn",highlightAll:t}};if(o.bind(p),r(p),h<l.length-1){let m=0;for(let y=h+1;y<l.length;y++)m|=l[y].activeReasons;r({...e,passOptions:{type:"highlight",activeGradient:l[h].activeGradient,activeReasons:m,stepType:"clear",highlightAll:t}})}const f={...e,passOptions:{type:"highlight",activeGradient:l[h].activeGradient,activeReasons:l[h].activeReasons,stepType:"draw",highlightAll:t}};s.setPipelineState(GW(e)),s.updatePipelineState(e.context),o.draw(f),o.unbind()}e.passOptions=a}function noe(e){if(!e)return[];let t=r7(e)?[e]:B.isCollection(e)?e.toArray():Array.isArray(e)?e:[];return t=t==null?void 0:t.filter(el),((t==null?void 0:t.length)??0)===0?[]:t}const sd=e=>parseFloat(e)/100;function BW(e,t,r){const i=typeof e.left=="string"?sd(e.left)*t:e.left,s=typeof e.right=="string"?sd(e.right)*t:e.right,n=typeof e.top=="string"?sd(e.top)*r:e.top,o=typeof e.bottom=="string"?sd(e.bottom)*r:e.bottom,a=n;return{xmin:i,xmax:Math.max(t-s,i),ymin:a,ymax:Math.max(r-o,n)}}function hC(e,t,r,i){switch(t.type){case"rect":{const{width:s,height:n}=e,{xmin:o,xmax:a,ymin:l,ymax:h}=BW(t,s,n),{x:p,y:f}=r;return p>o&&p<a&&f>l&&f<h}case"path":return t.path.length===0||!Array.isArray(t.path[0][0])||N_(t.path,[r.x,r.y]);case"geometry":return t.geometry==null||(t.geometry.type==="polygon"?k_(t.geometry,i):eh(t.geometry,i))}}function HW(e){if(!e.highlights)return null;const t=e.highlights.findIndex(r=>r.name==="default");return t===-1?null:e.highlights.items[t]}function qW(e,t){if(!e.highlights){if(!t)return;e.highlights=new B([new hn])}const r=e.highlights.findIndex(i=>i.name==="default");t?e.highlights.items[r].assignFrom(t):(e.highlights.removeAt(r),e.highlights.length===0&&(e.highlights=null))}async function WW(e,t,r){const i=IP(t)?CP(e,t):t;if(!e.ready||isNaN(i.x)||isNaN(i.y))return{screenPoint:i,results:[]};let s=new Set;const n=new Set;let o=!1,a=null,l=null;r!=null&&r.include?xT(r.include,MT(e,m=>{s.add(m),xy(m,y=>n.add(y))},(m,y)=>{n.add(m),s.add(y)},m=>{a||(a=new Set),a.add(m)},m=>s.add(m),()=>o=!0)):(o=!0,s=new Set(e.allLayerViews),s.forEach(m=>{xy(m,y=>n.add(y))})),r!=null&&r.exclude&&xT(r.exclude,MT(e,m=>{s.delete(m),xy(m,y=>n.delete(y))},m=>n.delete(m),m=>{l||(l=new Set),l.add(m)}));const h=e.toMap(i),p=e.allLayerViews.filter(m=>!m.suspended&&s.has(m)&&m.clips.every(y=>hC(e,y,i,h))).reverse();let f=[...o?e.graphicsView.hitTest(h).map(m=>({type:"graphic",graphic:m,layer:null,mapPoint:h})):[],...await Promise.all(p.map(m=>m.hitTest(h,i)).toArray())].filter(el).flat().filter(el);return f=f.filter(m=>{var y;return m.type!=="graphic"||((y=m.layer)==null?void 0:y.type)!=="subtype-group"||n.has(m.graphic.layer)}),a&&(f=f.filter(m=>!("graphic"in m)||!m.graphic||(a==null?void 0:a.has(B1(m.graphic))))),l&&(f=f.filter(m=>!("graphic"in m)||!m.graphic||!(l!=null&&l.has(B1(m.graphic))))),{screenPoint:i,results:f}}function MT(e,t,r,i,s,n){return o=>{if(o instanceof u1){if(o.layer===e)n==null||n();else{const a=e.allLayerViews.find(l=>l.layer===o.layer);a&&(s==null||s(a))}i(B1(o))}else if(!("layer"in o&&"element"in o))if(o.type==="subtype-sublayer"){const a=e.allLayerViews.find(l=>l.layer===o.parent);a&&r(o,a)}else{const a=e.allLayerViews.find(l=>l.layer===o);a&&t(a)}}}function xT(e,t){if(e)if(cp(e))for(const r of e)if(cp(r))for(const i of r)t(i);else t(r);else t(e)}function B1(e){var r,i;const t=e.getObjectId();return t?`${((r=e.layer)==null?void 0:r.uid)??((i=e.sourceLayer)==null?void 0:i.uid)??"MapView"}/${t}`:`"MapView/${e.uid}`}function xy({layer:e},t){(e==null?void 0:e.type)==="subtype-group"&&e.sublayers.forEach(r=>{t(r)})}let Kl=null,cf=!0;function ZW(e,t,r){if(!e||!t)throw new Error("Cannot construct image data without dimensions");if(cf)try{return new ImageData(e,t)}catch{cf=!1}return dC(e,t,r)}function ooe(e,t,r,i){if(!t||!r)throw new Error("Cannot construct image data without dimensions");if(cf)try{return new ImageData(e,t,r)}catch{cf=!1}const s=dC(t,r,i);return s.data.set(e,0),s}function JW(){return Kl||(Kl=document.createElement("canvas"),Kl.width=1,Kl.height=1),Kl}function dC(e,t,r){return r||(r=JW()),r.getContext("2d").createImageData(e,t)}async function YW(e,t){const r=window.URL.createObjectURL(e);try{const{data:i}=await qe(r,{...t,responseType:"image"});return i}catch(i){throw Ht(i)?i:new I("invalid-image",`Could not fetch requested image at ${r}`)}finally{window.URL.revokeObjectURL(r)}}async function aoe(e,t){const{arrayBuffer:r,mediaType:i}=await KW(e,t),s=i==="image/png";if(i==="image/gif"){const{isAnimatedGIF:n,parseGif:o}=await N(()=>import("./gif-BGPShVV6.js"),[]);if(n(r))return o(r,t)}if(s){const{isAnimatedPNG:n,parseApng:o}=await N(()=>import("./apng-DPWoa7ze.js"),__vite__mapDeps([338,3]));if(n(r))return o(r,t)}return YW(new Blob([r],{type:i}),t)}async function KW(e,t){var s;const r=sl(e);if(r!=null&&r.isBase64)return{arrayBuffer:TE(r.data),mediaType:r.mediaType};const i=await qe(e,{responseType:"array-buffer",...t});return{arrayBuffer:i.data,mediaType:((s=i.getHeader)==null?void 0:s.call(i,"Content-Type"))??""}}function pC(e,t,r){const{ctx:i,canvas:s}=mC(e,r),n=i.getImageData(0,0,e.width,e.height),o=gC(s,t);return yC(s),{dataUrl:o,data:n}}function fC(e,t){const{ctx:r,canvas:i}=mC(e,t),s=r.getImageData(0,0,e.width,e.height);return yC(i),s}function mC(e,t){const r=XW();t.premultipliedAlpha&&rZ(e),r.width=e.width,r.height=e.height;const i=r.getContext("2d",{willReadFrequently:!0});return i.putImageData(e,0,0),t.flipY&&tZ(i),{ctx:i,canvas:r}}function yC(e){e.width=0,e.height=0}function XW(){return Ay==null&&(Ay=document.createElement("canvas")),Ay}let Ay=null;function gC(e,t){const r=iZ[t.format],i=t.quality/100;return e.toDataURL(r,i)}function _C(e,t){const r=eZ(e),i=nZ[r];return{format:r,quality:ii(t??i,0,100)}}function vC(e,t){return t/Math.max(e[0],e[1])}function QW(e,t,r,i=0,s=0,n=e.width-i,o=e.height-s,a=!1){const{data:l}=e,{width:h,height:p,data:f}=t,m=n/h,y=o/p,_=Math.ceil(m/2),v=Math.ceil(y/2),w=e.width;for(let b=0;b<p;b++)for(let M=0;M<h;M++){const $=4*(M+(a?p-b-1:b)*h);let E=0,P=0,O=0,L=0,k=0,G=0;const V=(b+.5)*y;for(let Y=Math.floor(b*y);Y<(b+1)*y;Y++){const re=Math.abs(V-(Y+.5))/v,ve=(M+.5)*m,K=re*re;for(let $t=Math.floor(M*m);$t<(M+1)*m;$t++){const _s=Math.abs(ve-($t+.5))/_,cr=Math.sqrt(K+_s*_s);if(cr>=1)continue;let we=2*cr*cr*cr-3*cr*cr+1;const Li=4*(i+$t+(s+Y)*w);G+=we*l[Li+3],P+=we,!r&&l[Li+3]<255&&(we=we*l[Li+3]/255),O+=we*l[Li],L+=we*l[Li+1],k+=we*l[Li+2],E+=we}}f[$]=O/E,f[$+1]=L/E,f[$+2]=k/E,f[$+3]=G/P}return t}function eZ(e){switch(e){case"png":case"jpg":case"jpeg":return e;default:return sZ}}function tZ(e){e.save(),e.globalCompositeOperation="copy",e.scale(1,-1),e.translate(0,-e.canvas.height),e.drawImage(e.canvas,0,0),e.restore()}function rZ(e){const t=e.data,r=t.length;for(let i=0;i<r;i+=4){const s=t[i+3];if(s!==255&&s>0){const n=255/s;t[i]=t[i]*n,t[i+1]=t[i+1]*n,t[i+2]=t[i+2]*n}}}const iZ={png:"image/png",jpg:"image/jpeg",jpeg:"image/jpeg"},AT=98,sZ="png",nZ={png:100,jpg:AT,jpeg:AT},loe=Object.freeze(Object.defineProperty({__proto__:null,createEmptyImageData:ZW,encode:pC,encodeData:fC,getFormatAndQuality:_C,getMaximumResolutionScale:vC,resampleHermite:QW,toDataUrl:gC},Symbol.toStringTag,{value:"Module"})),wC={flipY:!0,premultipliedAlpha:!0};async function oZ(e,t){const r=await bC(e,t),{format:i,quality:s}=_C(t==null?void 0:t.format,t==null?void 0:t.quality);return pC(r,{format:i,quality:s},wC)}async function aZ(e,t){const r=await bC(e,t);return fC(r,wC)}function bC(e,t){const r=cZ(t||{},uZ(e.stage,e.size),e.size,e.padding),i=lZ(t,e.allLayerViews);return e.stage.takeScreenshot(r,i,e.backgroundColor,t==null?void 0:t.rotation)}function lZ(e={},t){if(!e.layers)return;const r=[];return e.layers.forEach(i=>{const s=t.find(n=>n.layer.id===i.id);s!=null&&s.container&&r.push(s.container)}),r}function uZ(e,t){return Math.min(4,vC(t,Math.min(4096,e.context.parameters.maxTextureSize)))}function cZ(e,t,r,i){e.ignorePadding&&(i={left:0,right:0,top:0,bottom:0});let s=null;e.width!=null&&e.height!=null?s=[e.width,e.height]:e.width==null&&e.height!=null?s=[e.height,e.height]:e.width!=null&&e.height==null?s=[e.width,e.width]:e.width==null&&e.height==null&&(s=null);const n=r[0]-(i.left+i.right),o=r[1]-(i.top+i.bottom);let a,l,h=e.area||{x:0,y:0,width:n,height:o};if(s){const p=n/o,f=s[0]/s[1];if(f>p){const m=h.width/f;h={x:h.x,y:Math.round(h.y+(h.height-m)/2),width:h.width,height:Math.round(m)}}else{const m=h.height*f;h={x:Math.round(h.x+(h.width-m)/2),y:h.y,width:Math.round(m),height:h.height}}}else s=[h.width,h.height];return s[0]>h.width?(a=Math.min(s[0]/h.width,t),l=s[0]/h.width/a):(a=1,l=s[0]/h.width),{cropArea:{x:Math.round((h.x+i.left)*a),y:Math.round((h.y+i.top)*a),width:Math.round(h.width*a),height:Math.round(h.height*a)},outputScale:l,resolutionScale:a}}const hZ=e=>e.includes("Brush");let SC=class{constructor(){this._names=new Map}begin(t){this._names.has(t)||(this._names.set(t,!1),hZ(t)&&this.record("Esri.FirstDraw"),performance.mark(`Esri.${t}.Start`))}end(t){this._names.has(t)&&!this._names.get(t)&&(this._names.set(t,!0),performance.mark(`Esri.${t}.End`))}record(t){this._names.has(t)||(this._names.set(t,!0),performance.mark(`Esri.${t}`))}};function dZ(e,t){const r=t.debugRendererInfo&&e.getExtension("WEBGL_debug_renderer_info");return r?{getUnmaskedRendererWebGL:()=>e.getParameter(r.UNMASKED_RENDERER_WEBGL)}:null}let PT;function pZ(){return PT??(PT=yZ()),PT}let fZ=class{constructor(){this.available=!1,this.majorPerformanceCaveat=!1,this.maxTextureSize=0,this.supportsVertexShaderSamplers=!1,this.supportsHighPrecisionFragment=!1,this.supportsColorBufferFloat=!1,this.supportsColorBufferFloatBlend=!1,this.supportsColorBufferHalfFloat=!1,this.unmaskedRenderer="unloaded"}};function mZ(e){if(typeof WebGL2RenderingContext>"u")return null;const t=document.createElement("canvas");if(!t)return null;let r=t.getContext("webgl2",{failIfMajorPerformanceCaveat:!0});if(r==null&&(r=t.getContext("webgl2"),r!=null&&(e.majorPerformanceCaveat=!0)),r==null)return r;e.available=!0,e.maxTextureSize=r.getParameter(r.MAX_TEXTURE_SIZE),e.supportsVertexShaderSamplers=r.getParameter(r.MAX_VERTEX_TEXTURE_IMAGE_UNITS)>0;const i=r.getShaderPrecisionFormat(r.FRAGMENT_SHADER,r.HIGH_FLOAT);return i&&(e.supportsHighPrecisionFragment=i.precision>0),r}function yZ(){var r;const e=new fZ,t=mZ(e);return t==null||(e.supportsColorBufferFloat=t.getExtension("EXT_color_buffer_float")!==null,e.supportsColorBufferFloatBlend=t.getExtension("EXT_float_blend")!==null,e.supportsColorBufferHalfFloat=e.supportsColorBufferFloat||t.getExtension("EXT_color_buffer_half_float")!==null,e.unmaskedRenderer=((r=dZ(t,{debugRendererInfo:!0}))==null?void 0:r.getUnmaskedRendererWebGL())??"unknown"),e}function gZ(e){const t=pZ();return t.available?e==="3d"&&t.majorPerformanceCaveat?new I("webgl:major-performance-caveat-detected",`Your WebGL implementation (${t.unmaskedRenderer}) doesn't seem to support hardware accelerated rendering. Check your browser settings or if your GPU is in a blocklist.`):t.supportsHighPrecisionFragment?t.supportsVertexShaderSamplers?null:new I("webgl:vertex-shader-samplers-required","WebGL support for vertex shader samplers is required but not supported."):new I("webgl:high-precision-fragment-required","WebGL support for high precision fragment shaders is required but not supported."):new I("webgl:required","WebGL2 is required but not supported.",new Error().stack)}function _Z(e){return e&&"nodeType"in e}function vZ(e){return e&&typeof e.render=="function"}const OT={component:"esri-component"};let lo=class extends q{constructor(){super(...arguments),this.widget=null}destroy(){var t;this.node=null,(t=this.widget)==null||t.destroy()}get id(){var t,r;return this._get("id")??((t=this.widget)==null?void 0:t.id)??((r=this.node)==null?void 0:r.id)}set id(t){this._set("id",t)}set node(t){const r=this._get("node");t!==r&&(t&&t.classList.add(OT.component),r&&r.classList.remove(OT.component),this._set("node",t))}castNode(t){var r;return(r=this.widget)==null||r.destroy(),t?typeof t=="string"||_Z(t)?(this._set("widget",null),fv(t)):(vZ(t)&&!t.domNode&&(t.domNode=document.createElement("div")),this._set("widget",t),t.domNode):(this._set("widget",null),null)}};c([d()],lo.prototype,"id",null),c([d()],lo.prototype,"node",null),c([tt("node")],lo.prototype,"castNode",null),c([d({readOnly:!0})],lo.prototype,"widget",void 0),lo=c([S("esri.views.ui.Component")],lo);const rp=lo,TC="calcite-mode-";function wZ(){return getComputedStyle(document.body).getPropertyValue("--esri-calcite-mode-name").replaceAll(/\s|'|"/g,"")}function bZ(){return wZ().startsWith("dark")}function SZ(){return`${TC}${bZ()?"dark":"light"}`}function TZ(e){$Z(e),e.classList.add(SZ())}function $Z(e){Array.from(e.classList).forEach(t=>{t.startsWith(TC)&&e.classList.remove(t)})}const EZ={left:0,top:0,bottom:0,right:0},$C={bottom:30,top:15,right:15,left:15},ji="esri-ui",Nt={ui:ji,corner:`${ji}-corner`,innerContainer:`${ji}-inner-container`,manualContainer:`${ji}-manual-container`,cornerContainer:`${ji}-corner-container`,topLeft:`${ji}-top-left`,topRight:`${ji}-top-right`,bottomLeft:`${ji}-bottom-left`,bottomRight:`${ji}-bottom-right`};function MZ(e){return e&&!e._started&&typeof e.postMixInProperties=="function"&&typeof e.buildRendering=="function"&&typeof e.postCreate=="function"&&typeof e.startup=="function"}function nd(e){return e===0?"0":`${e}px`}function Py(e){const t=typeof e=="object"&&e!==null&&Object.getPrototypeOf(e);return(t===null||t===Object.prototype)&&("component"in e||"index"in e||"position"in e)?e:null}function Oy(e,{top:t,bottom:r,left:i,right:s}){e.style.top=t,e.style.bottom=r,e.style.left=i,e.style.right=s}let _i=class extends xi.EventedAccessor{constructor(t){super(t),this._cornerNameToContainerLookup={},this._positionNameToContainerLookup={},this._components=new Array,this._componentMap=new Map,this._removeWidgetHandleKey=Symbol("componentOnRemoveSymbol"),this._locale=Vt(),this.view=null,this._applyViewPadding=()=>{const r=this.container;r&&Oy(r,this._toPixelPosition(this._getViewPadding()))},this._applyUIPadding=()=>{const r=this._innerContainer;r&&Oy(r,this._toPixelPosition(this.padding))},this._initContainers()}initialize(){this.addHandles([X(()=>{var t;return[(t=this.view)==null?void 0:t.padding,this.container]},this._applyViewPadding,St),X(()=>this.padding,this._applyUIPadding,St),X(()=>[this.container,this._locale],([t,r])=>{t&&t.setAttribute("lang",r)},St),S3(t=>{this._locale=t})])}destroy(){this.container=null;for(const t of this._components)t.destroy();this._components.length=0,this._componentMap.clear()}set container(t){const r=this._get("container");t!==r&&(t&&(t.classList.add(Nt.ui),TZ(t),this._attachContainers(t)),r&&(r.classList.remove(Nt.ui),Oy(r,{top:"",bottom:"",left:"",right:""}),r.textContent=""),this._set("container",t))}get height(){var n;const t=((n=this.view)==null?void 0:n.height)??0;if(t===0)return t;const r=this._getViewPadding(),{top:i,bottom:s}=r;return Math.max(t-i-s,0)}get padding(){return this._get("padding")}set padding(t){this._overrideIfSome("padding",t)}castPadding(t){return typeof t=="number"?{bottom:t,top:t,right:t,left:t}:{...$C,...t}}get width(){var n;const t=((n=this.view)==null?void 0:n.width)??0;if(t===0)return t;const r=this._getViewPadding(),{left:i,right:s}=r;return Math.max(t-i-s,0)}add(t,r){let i,s,n;if(Array.isArray(t))return void t.forEach(a=>this.add(a,r));const o=Py(t);o&&({index:i,position:r,component:t,key:s}=o),r&&typeof r=="object"&&({index:i,key:s,position:r,internal:n}=r),!t||r&&!this._isValidPosition(r)||this._add(t,r,i,s,n)}remove(t,r){var s,n;if(!t)return;if(Array.isArray(t))return t.map(o=>this.remove(o,r));const i=this._find(t);if(i){if(this._componentMap.has(i)&&((s=this._componentMap.get(i))==null?void 0:s.key)!==r)return;const o=this._components.indexOf(i),a=i.node.parentNode;return a==null||a.removeChild(i.node),this._componentMap.delete(i),(n=i.widget)==null||n.removeHandlesReference(this._removeWidgetHandleKey),this._components.splice(o,1)[0]}}empty(t,r={removeInternal:!1}){if(Array.isArray(t)){for(const n of t)this.empty(n,r);return}const i=this._positionNameToContainerLookup[t??"manual"],s=Array.prototype.slice.call(i.children).map(n=>this._findByNode(n)).filter(n=>{var o;return n==null?!1:!(((o=this._componentMap.get(n))==null?void 0:o.internal)??!1)||r.removeInternal});for(const n of s)this.remove(n)}move(t,r){if(Array.isArray(t)&&t.forEach(o=>this.move(o,r)),!t)return;let i;const s=Py(t)||Py(r);if(s&&(i=s.index,r=s.position,t=s.component||t),r&&!this._isValidPosition(r))return;const n=this.remove(t);n&&this.add(n,{position:r,index:i})}find(t){if(!t)return null;const r=this._findById(t);return r&&(r.widget||r.node)}getComponents(t,r={includeInternal:!1}){return t?Array.isArray(t)?t.flatMap(i=>this._getComponentsAtPosition(i,r)):this._getComponentsAtPosition(t,r):this._components.filter(i=>{var s;return r.includeInternal||!((s=this._componentMap.get(i))!=null&&s.internal)}).map(({widget:i,node:s})=>i??s)}getPosition(t){for(const r in this._positionNameToContainerLookup)if(this._positionNameToContainerLookup[r].contains(t))return r;return null}_add(t,r,i,s,n){t instanceof rp||(t=new rp({node:t}));const{widget:o}=t;o!=null&&o instanceof q&&o.addHandles(ue(()=>{queueMicrotask(()=>this.remove(t))}),this._removeWidgetHandleKey),this._place({component:t,position:r,index:i}),this._components.push(t),this._componentMap.set(t,{key:s,internal:n})}_find(t){return t?t instanceof rp?this._findByComponent(t):typeof t=="string"?this._findById(t):this._findByNode(t.domNode||t):null}_getViewPadding(){var t;return((t=this.view)==null?void 0:t.padding)??EZ}_attachContainers(t){t.appendChild(this._innerContainer),t.appendChild(this._manualContainer)}_initContainers(){const t=document.createElement("div");t.classList.add(Nt.innerContainer,Nt.cornerContainer);const r=document.createElement("div");r.classList.add(Nt.innerContainer,Nt.manualContainer);const i=document.createElement("div");i.classList.add(Nt.topLeft,Nt.corner),t.appendChild(i);const s=document.createElement("div");s.classList.add(Nt.topRight,Nt.corner),t.appendChild(s);const n=document.createElement("div");n.classList.add(Nt.bottomLeft,Nt.corner),t.appendChild(n);const o=document.createElement("div");o.classList.add(Nt.bottomRight,Nt.corner),t.appendChild(o),this._innerContainer=t,this._manualContainer=r;const a=pU();this._cornerNameToContainerLookup={"top-left":i,"top-right":s,"bottom-left":n,"bottom-right":o,"top-leading":a?s:i,"top-trailing":a?i:s,"bottom-leading":a?o:n,"bottom-trailing":a?n:o},this._positionNameToContainerLookup={manual:r,...this._cornerNameToContainerLookup}}_isValidPosition(t){return!!this._positionNameToContainerLookup[t]}_place(t){var h,p;const r=t.position??"manual",{component:i,index:s}=t,n=this._positionNameToContainerLookup[r],o=s!=null&&s>-1;if(MZ(i.widget)&&i.widget.startup(),!o)return void n.appendChild(i.node);const a=Array.from(n.children);if(s===0){const{firstChild:f}=n;return void(f?(h=f.parentNode)==null?void 0:h.insertBefore(i.node,f):n.appendChild(i.node))}if(s>=a.length)return void n.appendChild(i.node);const l=a[s];(p=l.parentNode)==null||p.insertBefore(i.node,l)}_toPixelPosition(t){return{top:nd(t.top),left:nd(t.left),right:nd(t.right),bottom:nd(t.bottom)}}_findByComponent(t){return this._components.find(r=>r===t)??null}_findById(t){return this._components.find(({id:r})=>r===t)??null}_findByNode(t){return this._components.find(({node:r})=>r===t)??null}_getComponentsAtPosition(t,r){const i=this._positionNameToContainerLookup[t];return Array.prototype.slice.call(i.children).map(s=>this._findByNode(s)).filter(el).filter(s=>{var n;return r.includeInternal||!((n=this._componentMap.get(s))!=null&&n.internal)}).map(({widget:s,node:n})=>s??n)}};c([d()],_i.prototype,"_locale",void 0),c([d()],_i.prototype,"container",null),c([d()],_i.prototype,"height",null),c([d({value:$C})],_i.prototype,"padding",null),c([tt("padding")],_i.prototype,"castPadding",null),c([d()],_i.prototype,"view",void 0),c([d()],_i.prototype,"width",null),_i=c([S("esri.views.ui.UI")],_i);const xZ=_i,AZ="randomUUID"in crypto;function sw(){if(AZ)return crypto.randomUUID();const e=crypto.getRandomValues(new Uint16Array(8));e[3]=4095&e[3]|16384,e[4]=16383&e[4]|32768;const t=r=>e[r].toString(16).padStart(4,"0");return t(0)+t(1)+"-"+t(2)+"-"+t(3)+"-"+t(4)+"-"+t(5)+t(6)+t(7)}function poe(){return`{${sw().toUpperCase()}}`}function foe(){return`{${sw()}}`}function moe(e){const t=e.toUpperCase();return e[0]!=="{"?`{${t}}`:t}const PZ={handleInterceptedEvent:(e,t,r,i)=>(e.scheduleRender(),t.properties[`on${i.type}`].apply(t.properties.bind||r,[i]))},OZ={namespace:void 0,performanceLogger:()=>{},eventHandlerInterceptor:void 0,styleApplyer:(e,t,r)=>{t.charAt(0)==="-"?e.style.setProperty(t,r):e.style[t]=r}},CZ=e=>({...OZ,...e}),IZ=(e,t)=>{const r=[];for(;e&&e!==t;)r.push(e),e=e.parentNode;return r},RZ=(e,t)=>e.find(t),CT=(e,t,r=!1)=>{let i=e;return t.forEach((s,n)=>{const o=i!=null&&i.children?RZ(i.children,a=>a.domNode===s):void 0;r&&!o&&n!==t.length-1||(i=o)}),i},kZ=e=>{let t;const r={...PZ,...e},i=CZ(r),s=i.performanceLogger;let n,o=!0,a=!1;const l=[],h=[],p=(m,y,_)=>{var b;let v;i.eventHandlerInterceptor=(M,$,E,P)=>function(O){let L;s("domEvent",O);const k=IZ(O.currentTarget,v.domNode),G=k.some(Y=>{var re;return customElements.get((re=Y==null?void 0:Y.tagName)==null?void 0:re.toLowerCase())});if(O.eventPhase===Event.CAPTURING_PHASE||!G)k.reverse(),L=CT(v.getLastRender(),k);else{const Y=O.composedPath(),re=Y.slice(Y.indexOf(O.currentTarget),Y.indexOf(v.domNode)).reverse();L=CT(v.getLastRender(),re,!0)}let V;return L&&(V=r.handleInterceptedEvent(t,L,this,O)),s("domEventProcessed",O),V},(b=r.postProcessProjectionOptions)==null||b.call(r,i);const w=_();v=m(y,w,i),i.eventHandlerInterceptor=void 0,l.push(v),h.push(_),r.afterFirstVNodeRendered&&r.afterFirstVNodeRendered(v,w)};let f=()=>{if(n=void 0,o){o=!1,s("renderStart",void 0);for(let m=0;m<l.length;m++){const y=h[m]();s("rendered",void 0);try{l[m].update(y)}catch(_){console.error(_)}s("patched",void 0)}s("renderDone",void 0),o=!0}};return r.modifyDoRenderImplementation&&(f=r.modifyDoRenderImplementation(f,l,h)),t={renderNow:f,scheduleRender:()=>{n||a||(n=requestAnimationFrame(f))},stop:()=>{n&&(cancelAnimationFrame(n),n=void 0),a=!0},resume:()=>{a=!1,o=!0,t.scheduleRender()},append:(m,y)=>{p(an.append,m,y)},insertBefore:(m,y)=>{p(an.insertBefore,m,y)},merge:(m,y)=>{p(an.merge,m,y)},replace:(m,y)=>{p(an.replace,m,y)},detach:m=>{for(let y=0;y<h.length;y++)if(h[y]===m)return h.splice(y,1),l.splice(y,1)[0];throw new Error("renderFunction was not found")}},t};var NZ=":",Lo=class{resolve(e){}reject(e){}constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}};function LZ(e,t){let r=e;for(;r;){if(r===t)return!0;if(!r.parentNode)return!1;r.parentNode instanceof ShadowRoot?r=r.parentNode.host:r=r.parentNode}return!1}function DZ(e,t,r){const{subscribe:i}=FZ(t);return i(s=>{s.some(o=>LZ(e,o.target))&&r()})}var Cy={};function FZ(e){const t=e.join(","),r=Cy[t];if(r!==void 0)return r;const i=new Set,s=new MutationObserver(o=>i.forEach(a=>a(o)));globalThis.document&&s.observe(document.documentElement,{attributes:!0,attributeFilter:e,subtree:!0});const n={subscribe(o){return i.add(o),()=>{i.delete(o),i.size===0&&(s.disconnect(),Cy[t]=void 0)}}};return Cy[t]=n,n}function UZ(e,t){var i,s;let r=e;for(;r;){const n=(i=r.closest)==null?void 0:i.call(r,t);if(n)return n;const o=(s=r.getRootNode)==null?void 0:s.call(r);if(o===globalThis.document)return null;r=o.host}return null}function jZ(e,t,r){const i=UZ(e,`[${t}]`);return(i==null?void 0:i.getAttribute(t))??r}function Ie(e,t,...r){try{return e==null?void 0:e.call(t,...r)}catch(i){console.error(i,e)}}async function H1(e,t,...r){try{const i=e==null?void 0:e.call(t,...r);return i instanceof Promise?await i:i}catch(i){console.error(i,e)}}var GZ=["ar","bg","bs","ca","cs","da","de","el","en","es","et","fi","fr","he","hr","hu","id","it","ja","ko","lt","lv","nl","nb","no","pl","pt-BR","pt-PT","ro","ru","sk","sl","sr","sv","th","tr","uk","vi","zh-CN","zh-HK","zh-TW"],zZ=new Set(GZ),hf="en",VZ={pt:"pt-PT",nb:"no",zh:"zh-CN"};async function BZ(e,t,r=""){const i=`${t}/${r}`,s=`${i}${e}.json`;return Iy[s]??(Iy[s]=EC(e,i)),await Iy[s]}var Iy={};async function EC(e,t){const r=`${t}${e}.json`;try{const i=await fetch(r);if(i.ok)return await i.json()}catch(i){return console.error(i),{}}return e===hf?{}:await EC(hf,t)}function MC(e){var r;const t=jZ(e,"lang",((r=globalThis.navigator)==null?void 0:r.language)||hf);return{lang:t,t9nLocale:xC(t)}}function xC(e){const[t,r]=e.split("-"),i=t.toLowerCase();let s=i;return r&&(s=`${i}-${r.toUpperCase()}`),s=VZ[s]??s,zZ.has(s)?s:r?xC(i):hf}function HZ(e,t,r,i){let s;const n=()=>void qZ(e,t(),i).then(o=>{((s==null?void 0:s.lang)!==o.lang||s.t9nLocale!==o.t9nLocale||s.t9nStrings!==o.t9nStrings)&&r(o),s=o}).catch(console.error);return queueMicrotask(n),DZ(e,["lang"],n)}async function qZ(e,t,r=e.tagName.toLowerCase().split("-").slice(1).join("-")){const{lang:i,t9nLocale:s}=MC(e),n=`${t}/${r}/t9n`,a=r===null?{}:await BZ(s,n,"messages.");return{lang:i,t9nLocale:s,t9nStrings:a}}var AC=e=>e.replace(WZ,(t,r)=>`${r===0?"":"-"}${t.toLowerCase()}`),WZ=/[A-Z]+(?![a-z])|[A-Z]/gu;function ZZ(e,t){const r=t/JZ;let i=0;const s=setInterval(()=>{i+=r,i>=t&&(clearInterval(s),e())},r);return s}var JZ=4;function YZ(e){return e!==void 0}function PC(e){var r,i;let t=e;for(;t=t.parentNode??t.host;)if((r=t==null?void 0:t.constructor)!=null&&r.lumina){const s=t;return(i=s.manager)!=null&&i.loadedCalled||s._offspring.push(e),s._postLoad.promise}return!1}var ip=Object.defineProperty;function KZ(e){const t=e.split(NZ);return t.length===1?[t[0],AC(t[0])]:t}var XZ=globalThis.HTMLElement??KZ,Qa;Qa=class extends XZ{constructor(){super(),this._store={},this._pendingAttributes=[],this._postLoad=new Lo,this._postLoaded=new Lo,this._offspring=[],this._saveInstanceProperties();const t=this.constructor;t._LitConstructor?this._initializeComponent({a:t._LitConstructor}):t._loadPromise.then(this._initializeComponent.bind(this)).catch(r=>{this._postLoaded.reject(r),setTimeout(()=>{throw r})})}static _initializePrototype(){var t,r,i;(t=this._properties)==null||t.forEach(this._bindProp,this),(r=this._asyncMethods)==null||r.forEach(this._bindAsync,this),(i=this._syncMethods)==null||i.forEach(this._bindSync,this)}static _bindProp(t){ip(this.prototype,t,{configurable:!0,enumerable:!0,get(){return this._store[t]},set(r){this._store[t]=r}})}static _bindAsync(t){ip(this.prototype,t,{async value(...r){return this._litElement||await this._postLoaded.promise,await this._litElement[t](...r)},configurable:!0})}static _bindSync(t){ip(this.prototype,t,{value(...r){return this._litElement[t](...r)},configurable:!0})}get manager(){var t;return(t=this._litElement)==null?void 0:t.manager}_saveInstanceProperties(){var i;const t=this.constructor,r=this;(i=t._properties)==null||i.forEach(s=>{Object.hasOwn(this,s)&&(this._store[s]=r[s],delete r[s])})}attributeChangedCallback(t,r,i){var s;(s=this._litElement)==null||s.attributeChangedCallback(t,r,i),this._litElement||this._pendingAttributes.push(t)}connectedCallback(){var t,r;this._litElement?(r=(t=this._litElement).connectedCallback)==null||r.call(t):queueMicrotask(()=>{this._ancestorLoad=PC(this)})}disconnectedCallback(){var t,r;(r=(t=this._litElement)==null?void 0:t.disconnectedCallback)==null||r.call(t)}async componentOnReady(){return await this._postLoaded.promise,this}_initializeComponent(t){var f;const r=this.constructor,i=r._name,s=this._store,n=Object.values(t).find(m=>m.tagName===i),o=`${i}--lazy`;let a=n;for(;a&&!Object.hasOwn(a,"lumina");)a=Object.getPrototypeOf(a);eJ(a),!r._LitConstructor&&(r._LitConstructor=n,customElements.define(o,n)),n.lazy=this;const h=document.createElement(o);n.lazy=void 0,this._litElement=h,this._store=h,this._pendingAttributes.forEach(m=>{const y=this.getAttribute(m);h.attributeChangedCallback(m,null,y)}),Object.entries(s).forEach(QZ,h);const p=this.isConnected;(p||this._ancestorLoad)&&((f=h.connectedCallback)==null||f.call(h),p||h.disconnectedCallback())}addController(){}requestUpdate(){var t;(t=this._litElement)==null||t.requestUpdate()}},Qa.lumina=!0;function QZ([e,t]){this[e]=t}function eJ(e){const t=e.prototype,r=Element.prototype;Object.hasOwn(t,"isConnected")||(t.setAttribute=function(s,n){r.setAttribute.call(this.el,s,n)},t.removeAttribute=function(s){r.removeAttribute.call(this.el,s)},ip(t,"isConnected",{get(){return Reflect.get(r,"isConnected",this.el)}}))}var IT={};function tJ(e,t){var r;if(t){const i=e.constructor.elementProperties;e.manager.internals.members=Object.fromEntries(Array.from(i,([s,n])=>n.noAccessor?void 0:[s,[(n.readOnly?2048:0)|(n.state?32:16)]]).filter(YZ))}else{const i=e.constructor,s=((r=i.__registerControllers)==null?void 0:r.call(i,e))??void 0;if(i.__registerControllers=void 0,typeof s!="object")throw new Error("Failed to retrieve component meta");e.manager.internals.members=Object.fromEntries(Object.entries(s).filter(([n,[o]])=>(o&63)!==0))}}function rJ(e,t=8){return e==null||typeof e=="object"||typeof e=="function"?e:(t&4)!==0?e==="false"?!1:e===""||!!e:(t&2)!==0?Number.parseFloat(e):(t&1)!==0?String(e):e}var iJ=(e,t)=>{var r,i;return(i=(r=e.manager.internals.members)==null?void 0:r[t])==null?void 0:i[0]},nw=Symbol.for("controller"),sJ=e=>typeof e=="object"&&e!==null&&(nw in e||"hostConnected"in e||"hostDisconnected"in e||"hostUpdate"in e||"hostUpdated"in e),Zu;function La(e){Zu!==e&&(Zu=e,queueMicrotask(()=>{Zu===e&&(Zu=void 0)}))}function vm(e){return Zu}var uo=[];function OC(e){if(e===void 0){uo=[];return}const t=uo.indexOf(e);uo=t===-1?[...uo,e]:uo.slice(0,t+1),queueMicrotask(()=>{uo=[]})}function CC(){return uo}var Da;function nJ(e){Da!==e&&(Da=e,queueMicrotask(()=>{Da===e&&(Da=void 0)}))}function oJ(){const e=Da;return Da=void 0,e}var aJ=async(e,t)=>{const r=ow(e);if(r===void 0)return e;if(await r.ready,typeof t=="function"){const i=r.watchExports(s=>t(s,i))}return r.exports},lJ=async e=>{const t=ow(e);return await t.ready,t},ow=e=>{const r=vm().manager.internals.resolveExports(e);if(r!==void 0)return r;if(sJ(e))return e;const i=oJ();if(i!==void 0)return i},q1={readOnly:!1},df=new WeakMap,IC;IC=nw;var aw=class{constructor(e){this._callbacks={hostConnected:[],hostDisconnected:[],hostLoad:[],hostLoaded:[],hostUpdate:[],hostUpdated:[],hostDestroy:[],hostLifecycle:[]},this._ready=new Lo,this._lifecycleCleanups=[],this.connectedCalled=!1,this._loadCalled=!1,this.loadedCalled=!1,this[IC]=!0,this.ready=this._ready.promise,this._exports=kT(this),this._exportWatchers=new Set;const t=e??vm();this.component=t,this.component.addController(this),this.component.manager===void 0||(OC(this),queueMicrotask(()=>this.catchUpLifecycle()))}catchUpLifecycle(){const{manager:e}=this.component;e.connectedCalled&&!this.connectedCalled&&this.triggerConnected(),e._loadCalled&&this.triggerLoad().then(()=>{e.loadedCalled&&this.triggerLoaded()}).catch(console.error)}get exports(){return this._exports}set exports(e){const t=this._exports;t!==e&&(this._exports=e,this._exportWatchers.forEach(Ie),this.connectedCalled&&this.assignedProperty!==!1&&this.component.requestUpdate(this.assignedProperty,t)),this._ready.resolve(e)}setProvisionalExports(e,t=!0){this._exports=t?kT(e):e,this._exportWatchers.forEach(Ie)}watchExports(e){const t=()=>e(this._exports);return this._exportWatchers.add(t),()=>void this._exportWatchers.delete(t)}get use(){return La(this.component),aJ}get useRef(){return La(this.component),lJ}get useRefSync(){return La(this.component),ow}controllerRemoved(){this.component.el.isConnected&&this.triggerDisconnected(),this.triggerDestroy()}onConnected(e){this._callbacks.hostConnected.push(e)}onDisconnected(e){this._callbacks.hostDisconnected.push(e)}onLoad(e){this._callbacks.hostLoad.push(e)}onLoaded(e){this._callbacks.hostLoaded.push(e)}onUpdate(e){this._callbacks.hostUpdate.push(e)}onUpdated(e){this._callbacks.hostUpdated.push(e)}onDestroy(e){this._callbacks.hostDestroy.push(e)}onLifecycle(e){this._callbacks.hostLifecycle.push(e),this.connectedCalled&&this.component.el.isConnected&&this._callLifecycle(e)}triggerConnected(){const e=this;e.hostConnected&&Ie(e.hostConnected,e),this._callbacks.hostConnected.forEach(Ie),this.triggerLifecycle(),this.connectedCalled=!0}triggerDisconnected(){const e=this;e.hostDisconnected&&Ie(e.hostDisconnected,e),this._callbacks.hostDisconnected.forEach(Ie),this._lifecycleCleanups.forEach(Ie),this._lifecycleCleanups=[]}async triggerLoad(){if(this._loadCalled)return;this._loadCalled=!0;const e=this;e.hostLoad&&await H1(e.hostLoad,e),this._callbacks.hostLoad.length>0&&await Promise.allSettled(this._callbacks.hostLoad.map(H1)),this._ready.resolve(this._exports)}triggerLoaded(){if(this.loadedCalled)return;const e=this;e.hostLoaded&&Ie(e.hostLoaded,e),this._callbacks.hostLoaded.forEach(Ie),this.loadedCalled=!0}triggerUpdate(e){const t=this;t.hostUpdate&&Ie(t.hostUpdate,t,e),this._callbacks.hostUpdate.forEach(RT,e)}triggerUpdated(e){const t=this;t.hostUpdated&&Ie(t.hostUpdated,t,e),this._callbacks.hostUpdated.forEach(RT,e)}triggerDestroy(){const e=this;e.hostDestroy&&Ie(e.hostDestroy,e),this._callbacks.hostDestroy.forEach(Ie)}triggerLifecycle(){const e=this;e.hostLifecycle&&this._callLifecycle(()=>e.hostLifecycle()),this._callbacks.hostLifecycle.forEach(this._callLifecycle,this)}_callLifecycle(e){La(this.component);const t=Ie(e);(Array.isArray(t)?t:[t]).forEach(i=>{typeof i=="function"?this._lifecycleCleanups.push(i):typeof i=="object"&&typeof i.remove=="function"&&this._lifecycleCleanups.push(i.remove)})}};function RT(e){Ie(e,void 0,this)}var uJ=aw;function kT(e){if(typeof e!="object"&&typeof e!="function"||e===null)return e;const t=new Proxy(e,{get(r,i,s){if(!(cJ.has(i)&&i in r&&r[i]===t)&&(i in r||i in Promise.prototype||typeof i=="symbol"))return typeof r=="function"?r[i]:Reflect.get(r,i,s)},set:(r,i,s,n)=>Reflect.set(r,i,s,n)});return t}var cJ=new Set(["exports","_exports"]);function hJ(e,t,r){const i=Object.keys(e),s=i.length;ls===void 0&&queueMicrotask(lw),ls??(ls=new Map);let n=ls.get(e);return n===void 0&&(n={callbacks:[],keyCount:s},ls.set(e,n)),n.keyCount!==s&&(n.callbacks.forEach(o=>o(i)),n.callbacks=[],n.keyCount=s),n.callbacks.push(o=>{const a=h=>Ie(t,null,h),l=o[s];l===void 0?a(void 0):e[l]===r?a(l):a(void 0)}),r}var ls=void 0;function lw(){Array.from((ls==null?void 0:ls.entries())??[]).forEach(([e,{callbacks:t}])=>{const r=Object.keys(e);t.forEach(i=>i(r))}),ls=void 0}function uw(e,t,r){var i;const s=t,n=e.manager.internals;(i=n.allWatchers)[s]??(i[s]=[]);const o=n.allWatchers[s],a=r,l=(h,p,f)=>Ie(a,null,h,p,f);return o.push(l),()=>{const h=o.indexOf(l);h!==-1&&o.splice(h,1)}}var dJ=class{constructor(e){this.enabledWatchers={},this.allWatchers={},this.enableReadonly=()=>{if(this.enableReadonly=void 0,!this.component.manager.isLit)return;const t=this.component.manager.internals;Object.entries(t.members).forEach(([r,[i]])=>{var s;i&2048&&((s=t.setters)[r]??(s[r]=[]),t.setters[r].push(t.readonlySetter))})},this.trackedValue=W1,this.keyTrackers=[],this.getters={},this.setters={},this.accessorGetter={},this.accessorSetter={},this._exports=new WeakMap,this.readonlySetter=(t,r,i)=>{if(q1.readOnly)return t;throw new Error(`Cannot assign to read-only property "${i}" of ${this.component.el.tagName.toLowerCase()}. Trying to assign "${String(t)}"`)},this.component=e}firePropTrackers(e,t){const r=this.keyTrackers;this.trackedValue=W1,this.keyTrackers=[],r.forEach(i=>i(e,t))}getSetProxy(e){const t=this.component,r=t.constructor.prototype;if(this._getSetProxy(r,e,"class"),t.manager.isLit)return;const i=t.el.constructor.prototype;r!==i&&this._getSetProxy(i,e,"html")}_getSetProxy(e,t,r){const i=this.component,s=iJ(i,t);let n;do n=Object.getOwnPropertyDescriptor(e,t);while(!n&&(e=Object.getPrototypeOf(e)));if(!n)return;const o=n.get,a=n.set,l=od in o,h=od in a;if(l&&h)return;const p=!l,f=!h,m=p?function(){let v=o.call(this);const w=df.get(this);if(w===void 0)return v;const b=w.manager.internals;v=b.accessorGetter[t](v,t);const M=b.getters[t]??NT;for(let $=0;$<M.length;$++)v=M[$](v,t);return v}:o,y=f?function(v){var E;const w=o.call(this),b=df.get(this);if(b===void 0){a.call(this,v);return}let M=b.manager.isLit?v??void 0:rJ(v,s);const $=b.manager.internals;if(M===w)a.call(this,M);else{const P=$.setters[t]??NT;for(let O=0;O<P.length&&(M=P[O](M,w,t),M!==w);O++);M=$.accessorSetter[t](M,w,t),a.call(this,M),M!==w&&((E=$.enabledWatchers[t])==null||E.forEach(O=>O(M,w,t)))}$.keyTrackers.length>0&&($==null||$.firePropTrackers(t,v))}:a;p&&(m[od]=!0),f&&(y[od]=!0),Object.defineProperty(e,t,{...n,get:m,set:y})}markExports(e,t){(typeof t=="object"&&t!==null||typeof t=="function")&&this._exports.set(t,e)}resolveExports(e){if(typeof e=="object"&&e!==null||typeof e=="function")return this._exports.get(e)}},NT=[],od=Symbol(),W1=Symbol();function pJ(e,t,r){const i=e.manager.internals;return i.trackedValue!==W1&&i.trackedValue!==r&&i.firePropTrackers(void 0,void 0),i.keyTrackers.length===0&&queueMicrotask(()=>i.firePropTrackers(void 0,void 0)),i.trackedValue=r,i.keyTrackers.push((s,n)=>Ie(t,void 0,r===n?s:void 0)),r}function RC(e=[vm(),...CC()],t,r){const i=Array.isArray(e)?e:[e];let s=i.length+1;const n=a=>{s-=1,a!==void 0&&(s=Math.min(s,0)),s===0&&t(a)};i.forEach(a=>hJ(a,l=>n(l===void 0?void 0:{key:l,host:a,isReactive:!1}),r));const o=i.find(a=>"manager"in a&&typeof a.manager=="object"&&a.manager.component===a);return o&&pJ(o,a=>n(a===void 0?void 0:{key:a,host:o,isReactive:!0}),r),r}function fJ(e){q1.readOnly=!0;try{return e()}finally{q1.readOnly=!1}}var mJ=e=>(...t)=>{const r=CC(),i=new e(...t),s=i.exports;OC(r.at(-1));const n=i.component.manager.internals;n.markExports(i,s),i.watchExports(a=>n.markExports(i,a)),nJ(i);const o=[i.component,...r].reverse();return RC(o,a=>a===void 0?void 0:yJ(i,a,s),s)};function yJ(e,{host:t,key:r,isReactive:i},s){const n=t,o=n[r]!==e.exports,a=n[r]!==s,l=s!==e.exports;if(o&&!a&&l&&(n[r]=e.exports),t===e.component){if(i){const p=e.component.manager.internals;a&&p.markExports(e,n[r]),uw(e.component,r,f=>{f!==e.exports&&p.markExports(e,f)})}e.assignedProperty=i?void 0:r}e.watchExports(()=>{var m;if(n[r]===e.exports)return;const p=e.component.manager;((m=p.internals.setters[r])==null?void 0:m.includes(p.internals.readonlySetter))?fJ(()=>{n[r]=e.exports}):n[r]=e.exports})}var gJ=(e,t)=>new _J(e,t),_J=class extends uJ{constructor(e,t){const r="addController"in e,i=new Set;function s(l){var h;i.add(l),!(nw in l)&&e.renderRoot&&e.el.isConnected&&((h=l.hostConnected)==null||h.call(l))}function n(l){var h;i.delete(l),(h=l.controllerRemoved)==null||h.call(l)}const o=e;if(o.addController=s,o.removeController=n,!r){const l=t??e.constructor.__forceUpdate;o.requestUpdate=()=>l(e)}super(e),this.internals=new dJ(this.component),this.destroyed=!1,this._updatePromise=new Lo,this._originalLifecycles={},this.isLit=r,this.component.manager=this,tJ(e,r),this._controllers=i,this.exports=void 0,this.hasDestroy=Ry in this.component&&typeof this.component.destroy=="function",this._bindLifecycleMethods();const a=this.internals;Object.keys(a.members).forEach(l=>{a.accessorGetter[l]=LT,a.accessorSetter[l]=LT,a.getSetProxy(l)}),r?this.internals.enabledWatchers=this.internals.allWatchers:Object.defineProperty(e,"updateComplete",{get:async()=>await this._updatePromise.promise}),queueMicrotask(a.enableReadonly),La(e),df.set(e.el,e),df.set(e,e)}_bindLifecycleMethods(){const e=this.component,t=this.isLit,r=e.el===e;this._originalLifecycles={_connectedCallback:t||r?void 0:e.connectedCallback,_disconnectedCallback:t||r?void 0:e.disconnectedCallback,_load:t?e.load:e.componentWillLoad,_loaded:t?e.loaded:e.componentDidLoad,_willUpdate:t?void 0:e.componentWillUpdate,_updated:t?void 0:e.componentDidUpdate,_destroy:e.destroy};const i=this._connectedCallback.bind(this),s=this._disconnectedCallback.bind(this),n=this._update.bind(this),o=this._updated.bind(this);t?e.constructor.prototype.addController.call(e,{hostConnected:i,hostDisconnected:s,hostUpdate:n,hostUpdated:o}):(e.connectedCallback=i,e.disconnectedCallback=s,e.componentWillLoad=this._load.bind(this),e.componentDidLoad=this._loaded.bind(this),e.componentWillUpdate=n,e.componentDidUpdate=o),this.hasDestroy&&(e.destroy=this.destroy.bind(this))}_connectedCallback(){var t,r;if(this.destroyed){const i=this.component.el.tagName.toLowerCase();throw this.component.el.remove(),new Error(`The ${i} component has already been destroyed. It cannot be used again. If you meant to disconnect and reconnect a component without automatic destroy, set the ${Ry} prop.`)}this._autoDestroyTimeout!==void 0&&clearTimeout(this._autoDestroyTimeout);const e=this.internals;e.enabledWatchers=e.allWatchers,lw(),(t=e.enableReadonly)==null||t.call(e),this._controllers.forEach(wJ),(r=this._originalLifecycles._connectedCallback)==null||r.call(this.component)}_disconnectedCallback(){var e;this.destroyed||(this._controllers.forEach(bJ),(e=this._originalLifecycles._disconnectedCallback)==null||e.call(this.component),this.hasDestroy&&this._setAutoDestroyTimeout())}async _load(){var e;await Promise.allSettled(Array.from(this._controllers,SJ)),await((e=this._originalLifecycles._load)==null?void 0:e.call(this.component)),this.hasDestroy&&uw(this.component,Ry,()=>this._setAutoDestroyTimeout())}_loaded(){var e;this._controllers.forEach(TJ),(e=this._originalLifecycles._loaded)==null||e.call(this.component)}_update(){var t;const e=this.component;return this._controllers.forEach($J,e.$changes),(t=this._originalLifecycles._willUpdate)==null?void 0:t.call(this.component)}_updated(){var t;const e=this.component;if(this._controllers.forEach(EJ,e.$changes),(t=this._originalLifecycles._updated)==null||t.call(this.component),this.isLit)e.$changes=new Map;else{const r=this._updatePromise;this._updatePromise=new Lo,r.resolve(!0)}}async destroy(){var e;if(!this.destroyed){if(this.component.el.isConnected){this.hasDestroy=!1;try{this.component.el.remove()}finally{this.hasDestroy=!0}}this._autoDestroyTimeout=void 0,this.destroyed=!0,this._controllers.forEach(MJ),this._controllers.clear(),await((e=this._originalLifecycles._destroy)==null?void 0:e.call(this.component))}}_setAutoDestroyTimeout(){if(this._autoDestroyTimeout!==void 0&&clearTimeout(this._autoDestroyTimeout),!this.component.el.isConnected&&!this.component.autoDestroyDisabled){const e=()=>void this.destroy().catch(console.error);this._autoDestroyTimeout=ZZ(e,vJ)}}},Ry="autoDestroyDisabled",vJ=1e3,LT=e=>e;function wJ(e){"triggerConnected"in e?e.triggerConnected():Ie(e.hostConnected,e)}function bJ(e){"triggerDisconnected"in e?e.triggerDisconnected():Ie(e.hostDisconnected,e)}async function SJ(e){"triggerLoad"in e?await e.triggerLoad():await H1(e.hostLoad,e)}function TJ(e){"triggerLoaded"in e?e.triggerLoaded():Ie(e.hostLoaded,e)}function $J(e){"triggerUpdate"in e?e.triggerUpdate(this):Ie(e.hostUpdate,e,this)}function EJ(e){"triggerUpdated"in e?e.triggerUpdated(this):Ie(e.hostUpdated,e,this)}function MJ(e){"triggerDestroy"in e?e.triggerDestroy():Ie(e.hostDestroy,e)}var xJ=e=>kC(void 0,e),yoe=e=>t=>kC(t,e),AJ=class extends aw{constructor(e,t){super(e);const r=this.exports;try{La(this.component);const i=t(this.component,this),s=this.exports!==r;if(i instanceof Promise){s||this.setProvisionalExports(i);const n=i.then(o=>{this.exports=o,super.catchUpLifecycle()}).catch(o=>{this._ready.reject(o),console.error(o)});this.onLoad(async()=>await n)}else(!s||i!==void 0)&&(this.exports=i),queueMicrotask(()=>super.catchUpLifecycle())}catch(i){this._ready.reject(i),console.error(i)}}catchUpLifecycle(){}},kC=mJ(AJ),goe=(e,t)=>new PJ(e,t),PJ=class extends aw{constructor(e,t){super(),this._attributes=e,this._callback=t,this._observer=new MutationObserver(r=>{r.forEach(i=>{e.includes(i.attributeName)&&t.call(this.component,this.component.el.getAttribute(i.attributeName),i.oldValue,i.attributeName)})})}hostConnected(){this._attributes.forEach(e=>{this.component.el.hasAttribute(e)&&this._callback.call(this.component,null,this.component.el.getAttribute(e),e)}),this._observer.observe(this.component.el,{attributes:!0,attributeOldValue:!0,attributeFilter:this._attributes})}hostDisconnected(){this._observer.disconnect()}},_oe=e=>(t={})=>xJ((r,i)=>{const s=MC(r.el),n={_lang:s.lang,_t9nLocale:s.t9nLocale,_loading:!0},o=r;i.onLifecycle(()=>HZ(r.el,()=>e("./assets"),({t9nLocale:l,t9nStrings:h,lang:p})=>{const f={...h,_lang:p,_t9nLocale:l,_loading:!1};i.exports=f;const m=h.componentLabel;typeof m=="string"&&"label"in r&&r.label==null&&(r.label??(r.label=m)),a(o.messageOverrides)},t.name));function a(l){const h=i.exports,p=h._original??h,f=NC(p,l);l&&(f._original=p),i.exports=f}return"messageOverrides"in o&&i.onLifecycle(()=>uw(o,"messageOverrides",a)),t.blocking?(i.setProvisionalExports(n,!1),i.ready):n});function NC(e,t){if(!t)return e;const r={...e};return Object.entries(t).forEach(([i,s])=>{typeof s=="object"?r[i]=NC(e[i],s):r[i]=s??e[i]}),r}/**
 * @license
 * Copyright 2019 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const sp=globalThis,cw=sp.ShadowRoot&&(sp.ShadyCSS===void 0||sp.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,hw=Symbol(),DT=new WeakMap;let LC=class{constructor(t,r,i){if(this._$cssResult$=!0,i!==hw)throw Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=t,this.t=r}get styleSheet(){let t=this.o;const r=this.t;if(cw&&t===void 0){const i=r!==void 0&&r.length===1;i&&(t=DT.get(r)),t===void 0&&((this.o=t=new CSSStyleSheet).replaceSync(this.cssText),i&&DT.set(r,t))}return t}toString(){return this.cssText}};const OJ=e=>new LC(typeof e=="string"?e:e+"",void 0,hw),woe=(e,...t)=>{const r=e.length===1?e[0]:t.reduce((i,s,n)=>i+(o=>{if(o._$cssResult$===!0)return o.cssText;if(typeof o=="number")return o;throw Error("Value passed to 'css' function must be a 'css' function result: "+o+". Use 'unsafeCSS' to pass non-literal values, but take care to ensure page security.")})(s)+e[n+1],e[0]);return new LC(r,e,hw)},CJ=(e,t)=>{if(cw)e.adoptedStyleSheets=t.map(r=>r instanceof CSSStyleSheet?r:r.styleSheet);else for(const r of t){const i=document.createElement("style"),s=sp.litNonce;s!==void 0&&i.setAttribute("nonce",s),i.textContent=r.cssText,e.appendChild(i)}},FT=cw?e=>e:e=>e instanceof CSSStyleSheet?(t=>{let r="";for(const i of t.cssRules)r+=i.cssText;return OJ(r)})(e):e;/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const{is:IJ,defineProperty:RJ,getOwnPropertyDescriptor:kJ,getOwnPropertyNames:NJ,getOwnPropertySymbols:LJ,getPrototypeOf:DJ}=Object,dn=globalThis,UT=dn.trustedTypes,FJ=UT?UT.emptyScript:"",ky=dn.reactiveElementPolyfillSupport,yc=(e,t)=>e,Z1={toAttribute(e,t){switch(t){case Boolean:e=e?FJ:null;break;case Object:case Array:e=e==null?e:JSON.stringify(e)}return e},fromAttribute(e,t){let r=e;switch(t){case Boolean:r=e!==null;break;case Number:r=e===null?null:Number(e);break;case Object:case Array:try{r=JSON.parse(e)}catch{r=null}}return r}},DC=(e,t)=>!IJ(e,t),jT={attribute:!0,type:String,converter:Z1,reflect:!1,hasChanged:DC};Symbol.metadata??(Symbol.metadata=Symbol("metadata")),dn.litPropertyMetadata??(dn.litPropertyMetadata=new WeakMap);let xa=class extends HTMLElement{static addInitializer(t){this._$Ei(),(this.l??(this.l=[])).push(t)}static get observedAttributes(){return this.finalize(),this._$Eh&&[...this._$Eh.keys()]}static createProperty(t,r=jT){if(r.state&&(r.attribute=!1),this._$Ei(),this.elementProperties.set(t,r),!r.noAccessor){const i=Symbol(),s=this.getPropertyDescriptor(t,i,r);s!==void 0&&RJ(this.prototype,t,s)}}static getPropertyDescriptor(t,r,i){const{get:s,set:n}=kJ(this.prototype,t)??{get(){return this[r]},set(o){this[r]=o}};return{get(){return s==null?void 0:s.call(this)},set(o){const a=s==null?void 0:s.call(this);n.call(this,o),this.requestUpdate(t,a,i)},configurable:!0,enumerable:!0}}static getPropertyOptions(t){return this.elementProperties.get(t)??jT}static _$Ei(){if(this.hasOwnProperty(yc("elementProperties")))return;const t=DJ(this);t.finalize(),t.l!==void 0&&(this.l=[...t.l]),this.elementProperties=new Map(t.elementProperties)}static finalize(){if(this.hasOwnProperty(yc("finalized")))return;if(this.finalized=!0,this._$Ei(),this.hasOwnProperty(yc("properties"))){const r=this.properties,i=[...NJ(r),...LJ(r)];for(const s of i)this.createProperty(s,r[s])}const t=this[Symbol.metadata];if(t!==null){const r=litPropertyMetadata.get(t);if(r!==void 0)for(const[i,s]of r)this.elementProperties.set(i,s)}this._$Eh=new Map;for(const[r,i]of this.elementProperties){const s=this._$Eu(r,i);s!==void 0&&this._$Eh.set(s,r)}this.elementStyles=this.finalizeStyles(this.styles)}static finalizeStyles(t){const r=[];if(Array.isArray(t)){const i=new Set(t.flat(1/0).reverse());for(const s of i)r.unshift(FT(s))}else t!==void 0&&r.push(FT(t));return r}static _$Eu(t,r){const i=r.attribute;return i===!1?void 0:typeof i=="string"?i:typeof t=="string"?t.toLowerCase():void 0}constructor(){super(),this._$Ep=void 0,this.isUpdatePending=!1,this.hasUpdated=!1,this._$Em=null,this._$Ev()}_$Ev(){var t;this._$ES=new Promise(r=>this.enableUpdating=r),this._$AL=new Map,this._$E_(),this.requestUpdate(),(t=this.constructor.l)==null||t.forEach(r=>r(this))}addController(t){var r;(this._$EO??(this._$EO=new Set)).add(t),this.renderRoot!==void 0&&this.isConnected&&((r=t.hostConnected)==null||r.call(t))}removeController(t){var r;(r=this._$EO)==null||r.delete(t)}_$E_(){const t=new Map,r=this.constructor.elementProperties;for(const i of r.keys())this.hasOwnProperty(i)&&(t.set(i,this[i]),delete this[i]);t.size>0&&(this._$Ep=t)}createRenderRoot(){const t=this.shadowRoot??this.attachShadow(this.constructor.shadowRootOptions);return CJ(t,this.constructor.elementStyles),t}connectedCallback(){var t;this.renderRoot??(this.renderRoot=this.createRenderRoot()),this.enableUpdating(!0),(t=this._$EO)==null||t.forEach(r=>{var i;return(i=r.hostConnected)==null?void 0:i.call(r)})}enableUpdating(t){}disconnectedCallback(){var t;(t=this._$EO)==null||t.forEach(r=>{var i;return(i=r.hostDisconnected)==null?void 0:i.call(r)})}attributeChangedCallback(t,r,i){this._$AK(t,i)}_$EC(t,r){var n;const i=this.constructor.elementProperties.get(t),s=this.constructor._$Eu(t,i);if(s!==void 0&&i.reflect===!0){const o=(((n=i.converter)==null?void 0:n.toAttribute)!==void 0?i.converter:Z1).toAttribute(r,i.type);this._$Em=t,o==null?this.removeAttribute(s):this.setAttribute(s,o),this._$Em=null}}_$AK(t,r){var n;const i=this.constructor,s=i._$Eh.get(t);if(s!==void 0&&this._$Em!==s){const o=i.getPropertyOptions(s),a=typeof o.converter=="function"?{fromAttribute:o.converter}:((n=o.converter)==null?void 0:n.fromAttribute)!==void 0?o.converter:Z1;this._$Em=s,this[s]=a.fromAttribute(r,o.type),this._$Em=null}}requestUpdate(t,r,i){if(t!==void 0){if(i??(i=this.constructor.getPropertyOptions(t)),!(i.hasChanged??DC)(this[t],r))return;this.P(t,r,i)}this.isUpdatePending===!1&&(this._$ES=this._$ET())}P(t,r,i){this._$AL.has(t)||this._$AL.set(t,r),i.reflect===!0&&this._$Em!==t&&(this._$Ej??(this._$Ej=new Set)).add(t)}async _$ET(){this.isUpdatePending=!0;try{await this._$ES}catch(r){Promise.reject(r)}const t=this.scheduleUpdate();return t!=null&&await t,!this.isUpdatePending}scheduleUpdate(){return this.performUpdate()}performUpdate(){var i;if(!this.isUpdatePending)return;if(!this.hasUpdated){if(this.renderRoot??(this.renderRoot=this.createRenderRoot()),this._$Ep){for(const[n,o]of this._$Ep)this[n]=o;this._$Ep=void 0}const s=this.constructor.elementProperties;if(s.size>0)for(const[n,o]of s)o.wrapped!==!0||this._$AL.has(n)||this[n]===void 0||this.P(n,this[n],o)}let t=!1;const r=this._$AL;try{t=this.shouldUpdate(r),t?(this.willUpdate(r),(i=this._$EO)==null||i.forEach(s=>{var n;return(n=s.hostUpdate)==null?void 0:n.call(s)}),this.update(r)):this._$EU()}catch(s){throw t=!1,this._$EU(),s}t&&this._$AE(r)}willUpdate(t){}_$AE(t){var r;(r=this._$EO)==null||r.forEach(i=>{var s;return(s=i.hostUpdated)==null?void 0:s.call(i)}),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated(t)),this.updated(t)}_$EU(){this._$AL=new Map,this.isUpdatePending=!1}get updateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this._$ES}shouldUpdate(t){return!0}update(t){this._$Ej&&(this._$Ej=this._$Ej.forEach(r=>this._$EC(r,this[r]))),this._$EU()}updated(t){}firstUpdated(t){}};xa.elementStyles=[],xa.shadowRootOptions={mode:"open"},xa[yc("elementProperties")]=new Map,xa[yc("finalized")]=new Map,ky==null||ky({ReactiveElement:xa}),(dn.reactiveElementVersions??(dn.reactiveElementVersions=[])).push("2.0.4");/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const gc=globalThis,pf=gc.trustedTypes,GT=pf?pf.createPolicy("lit-html",{createHTML:e=>e}):void 0,FC="$lit$",rn=`lit$${Math.random().toFixed(9).slice(2)}$`,UC="?"+rn,UJ=`<${UC}>`,Do=document,Vc=()=>Do.createComment(""),Bc=e=>e===null||typeof e!="object"&&typeof e!="function",dw=Array.isArray,jJ=e=>dw(e)||typeof(e==null?void 0:e[Symbol.iterator])=="function",Ny=`[ 	
\f\r]`,Xl=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,zT=/-->/g,VT=/>/g,Dn=RegExp(`>|${Ny}(?:([^\\s"'>=/]+)(${Ny}*=${Ny}*(?:[^ 	
\f\r"'\`<>=]|("|')|))|$)`,"g"),BT=/'/g,HT=/"/g,jC=/^(?:script|style|textarea|title)$/i,GC=e=>(t,...r)=>({_$litType$:e,strings:t,values:r}),Soe=GC(1),Toe=GC(2),En=Symbol.for("lit-noChange"),et=Symbol.for("lit-nothing"),qT=new WeakMap,wo=Do.createTreeWalker(Do,129);function zC(e,t){if(!dw(e)||!e.hasOwnProperty("raw"))throw Error("invalid template strings array");return GT!==void 0?GT.createHTML(t):t}const GJ=(e,t)=>{const r=e.length-1,i=[];let s,n=t===2?"<svg>":t===3?"<math>":"",o=Xl;for(let a=0;a<r;a++){const l=e[a];let h,p,f=-1,m=0;for(;m<l.length&&(o.lastIndex=m,p=o.exec(l),p!==null);)m=o.lastIndex,o===Xl?p[1]==="!--"?o=zT:p[1]!==void 0?o=VT:p[2]!==void 0?(jC.test(p[2])&&(s=RegExp("</"+p[2],"g")),o=Dn):p[3]!==void 0&&(o=Dn):o===Dn?p[0]===">"?(o=s??Xl,f=-1):p[1]===void 0?f=-2:(f=o.lastIndex-p[2].length,h=p[1],o=p[3]===void 0?Dn:p[3]==='"'?HT:BT):o===HT||o===BT?o=Dn:o===zT||o===VT?o=Xl:(o=Dn,s=void 0);const y=o===Dn&&e[a+1].startsWith("/>")?" ":"";n+=o===Xl?l+UJ:f>=0?(i.push(h),l.slice(0,f)+FC+l.slice(f)+rn+y):l+rn+(f===-2?a:y)}return[zC(e,n+(e[r]||"<?>")+(t===2?"</svg>":t===3?"</math>":"")),i]};class Hc{constructor({strings:t,_$litType$:r},i){let s;this.parts=[];let n=0,o=0;const a=t.length-1,l=this.parts,[h,p]=GJ(t,r);if(this.el=Hc.createElement(h,i),wo.currentNode=this.el.content,r===2||r===3){const f=this.el.content.firstChild;f.replaceWith(...f.childNodes)}for(;(s=wo.nextNode())!==null&&l.length<a;){if(s.nodeType===1){if(s.hasAttributes())for(const f of s.getAttributeNames())if(f.endsWith(FC)){const m=p[o++],y=s.getAttribute(f).split(rn),_=/([.?@])?(.*)/.exec(m);l.push({type:1,index:n,name:_[2],strings:y,ctor:_[1]==="."?VJ:_[1]==="?"?BJ:_[1]==="@"?HJ:wm}),s.removeAttribute(f)}else f.startsWith(rn)&&(l.push({type:6,index:n}),s.removeAttribute(f));if(jC.test(s.tagName)){const f=s.textContent.split(rn),m=f.length-1;if(m>0){s.textContent=pf?pf.emptyScript:"";for(let y=0;y<m;y++)s.append(f[y],Vc()),wo.nextNode(),l.push({type:2,index:++n});s.append(f[m],Vc())}}}else if(s.nodeType===8)if(s.data===UC)l.push({type:2,index:n});else{let f=-1;for(;(f=s.data.indexOf(rn,f+1))!==-1;)l.push({type:7,index:n}),f+=rn.length-1}n++}}static createElement(t,r){const i=Do.createElement("template");return i.innerHTML=t,i}}function _l(e,t,r=e,i){var o,a;if(t===En)return t;let s=i!==void 0?(o=r._$Co)==null?void 0:o[i]:r._$Cl;const n=Bc(t)?void 0:t._$litDirective$;return(s==null?void 0:s.constructor)!==n&&((a=s==null?void 0:s._$AO)==null||a.call(s,!1),n===void 0?s=void 0:(s=new n(e),s._$AT(e,r,i)),i!==void 0?(r._$Co??(r._$Co=[]))[i]=s:r._$Cl=s),s!==void 0&&(t=_l(e,s._$AS(e,t.values),s,i)),t}let zJ=class{constructor(t,r){this._$AV=[],this._$AN=void 0,this._$AD=t,this._$AM=r}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}u(t){const{el:{content:r},parts:i}=this._$AD,s=((t==null?void 0:t.creationScope)??Do).importNode(r,!0);wo.currentNode=s;let n=wo.nextNode(),o=0,a=0,l=i[0];for(;l!==void 0;){if(o===l.index){let h;l.type===2?h=new gh(n,n.nextSibling,this,t):l.type===1?h=new l.ctor(n,l.name,l.strings,this,t):l.type===6&&(h=new qJ(n,this,t)),this._$AV.push(h),l=i[++a]}o!==(l==null?void 0:l.index)&&(n=wo.nextNode(),o++)}return wo.currentNode=Do,s}p(t){let r=0;for(const i of this._$AV)i!==void 0&&(i.strings!==void 0?(i._$AI(t,i,r),r+=i.strings.length-2):i._$AI(t[r])),r++}};class gh{get _$AU(){var t;return((t=this._$AM)==null?void 0:t._$AU)??this._$Cv}constructor(t,r,i,s){this.type=2,this._$AH=et,this._$AN=void 0,this._$AA=t,this._$AB=r,this._$AM=i,this.options=s,this._$Cv=(s==null?void 0:s.isConnected)??!0}get parentNode(){let t=this._$AA.parentNode;const r=this._$AM;return r!==void 0&&(t==null?void 0:t.nodeType)===11&&(t=r.parentNode),t}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(t,r=this){t=_l(this,t,r),Bc(t)?t===et||t==null||t===""?(this._$AH!==et&&this._$AR(),this._$AH=et):t!==this._$AH&&t!==En&&this._(t):t._$litType$!==void 0?this.$(t):t.nodeType!==void 0?this.T(t):jJ(t)?this.k(t):this._(t)}O(t){return this._$AA.parentNode.insertBefore(t,this._$AB)}T(t){this._$AH!==t&&(this._$AR(),this._$AH=this.O(t))}_(t){this._$AH!==et&&Bc(this._$AH)?this._$AA.nextSibling.data=t:this.T(Do.createTextNode(t)),this._$AH=t}$(t){var n;const{values:r,_$litType$:i}=t,s=typeof i=="number"?this._$AC(t):(i.el===void 0&&(i.el=Hc.createElement(zC(i.h,i.h[0]),this.options)),i);if(((n=this._$AH)==null?void 0:n._$AD)===s)this._$AH.p(r);else{const o=new zJ(s,this),a=o.u(this.options);o.p(r),this.T(a),this._$AH=o}}_$AC(t){let r=qT.get(t.strings);return r===void 0&&qT.set(t.strings,r=new Hc(t)),r}k(t){dw(this._$AH)||(this._$AH=[],this._$AR());const r=this._$AH;let i,s=0;for(const n of t)s===r.length?r.push(i=new gh(this.O(Vc()),this.O(Vc()),this,this.options)):i=r[s],i._$AI(n),s++;s<r.length&&(this._$AR(i&&i._$AB.nextSibling,s),r.length=s)}_$AR(t=this._$AA.nextSibling,r){var i;for((i=this._$AP)==null?void 0:i.call(this,!1,!0,r);t&&t!==this._$AB;){const s=t.nextSibling;t.remove(),t=s}}setConnected(t){var r;this._$AM===void 0&&(this._$Cv=t,(r=this._$AP)==null||r.call(this,t))}}class wm{get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}constructor(t,r,i,s,n){this.type=1,this._$AH=et,this._$AN=void 0,this.element=t,this.name=r,this._$AM=s,this.options=n,i.length>2||i[0]!==""||i[1]!==""?(this._$AH=Array(i.length-1).fill(new String),this.strings=i):this._$AH=et}_$AI(t,r=this,i,s){const n=this.strings;let o=!1;if(n===void 0)t=_l(this,t,r,0),o=!Bc(t)||t!==this._$AH&&t!==En,o&&(this._$AH=t);else{const a=t;let l,h;for(t=n[0],l=0;l<n.length-1;l++)h=_l(this,a[i+l],r,l),h===En&&(h=this._$AH[l]),o||(o=!Bc(h)||h!==this._$AH[l]),h===et?t=et:t!==et&&(t+=(h??"")+n[l+1]),this._$AH[l]=h}o&&!s&&this.j(t)}j(t){t===et?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,t??"")}}let VJ=class extends wm{constructor(){super(...arguments),this.type=3}j(t){this.element[this.name]=t===et?void 0:t}},BJ=class extends wm{constructor(){super(...arguments),this.type=4}j(t){this.element.toggleAttribute(this.name,!!t&&t!==et)}};class HJ extends wm{constructor(t,r,i,s,n){super(t,r,i,s,n),this.type=5}_$AI(t,r=this){if((t=_l(this,t,r,0)??et)===En)return;const i=this._$AH,s=t===et&&i!==et||t.capture!==i.capture||t.once!==i.once||t.passive!==i.passive,n=t!==et&&(i===et||s);s&&this.element.removeEventListener(this.name,this,i),n&&this.element.addEventListener(this.name,this,t),this._$AH=t}handleEvent(t){var r;typeof this._$AH=="function"?this._$AH.call(((r=this.options)==null?void 0:r.host)??this.element,t):this._$AH.handleEvent(t)}}let qJ=class{constructor(t,r,i){this.element=t,this.type=6,this._$AN=void 0,this._$AM=r,this.options=i}get _$AU(){return this._$AM._$AU}_$AI(t){_l(this,t)}};const Ly=gc.litHtmlPolyfillSupport;Ly==null||Ly(Hc,gh),(gc.litHtmlVersions??(gc.litHtmlVersions=[])).push("3.2.1");const WJ=(e,t,r)=>{const i=(r==null?void 0:r.renderBefore)??t;let s=i._$litPart$;if(s===void 0){const n=(r==null?void 0:r.renderBefore)??null;i._$litPart$=s=new gh(t.insertBefore(Vc(),n),n,void 0,r??{})}return s._$AI(e),s};/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */let Xa=class extends xa{constructor(){super(...arguments),this.renderOptions={host:this},this._$Do=void 0}createRenderRoot(){var r;const t=super.createRenderRoot();return(r=this.renderOptions).renderBefore??(r.renderBefore=t.firstChild),t}update(t){const r=this.render();this.hasUpdated||(this.renderOptions.isConnected=this.isConnected),super.update(t),this._$Do=WJ(r,this.renderRoot,this.renderOptions)}connectedCallback(){var t;super.connectedCallback(),(t=this._$Do)==null||t.setConnected(!0)}disconnectedCallback(){var t;super.disconnectedCallback(),(t=this._$Do)==null||t.setConnected(!1)}render(){return En}};var h$;Xa._$litElement$=!0,Xa.finalized=!0,(h$=globalThis.litElementHydrateSupport)==null||h$.call(globalThis,{LitElement:Xa});const Dy=globalThis.litElementPolyfillSupport;Dy==null||Dy({LitElement:Xa});(globalThis.litElementVersions??(globalThis.litElementVersions=[])).push("4.1.1");/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const VC={ATTRIBUTE:1,CHILD:2,PROPERTY:3,BOOLEAN_ATTRIBUTE:4},BC=e=>(...t)=>({_$litDirective$:e,values:t});let HC=class{constructor(t){}get _$AU(){return this._$AM._$AU}_$AT(t,r,i){this._$Ct=t,this._$AM=r,this._$Ci=i}_$AS(t,r){return this.update(t,r)}update(t,r){return this.render(...r)}};/**
 * @license
 * Copyright 2018 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const ZJ=BC(class extends HC{constructor(e){var t;if(super(e),e.type!==VC.ATTRIBUTE||e.name!=="class"||((t=e.strings)==null?void 0:t.length)>2)throw Error("`classMap()` can only be used in the `class` attribute and must be the only part in the attribute.")}render(e){return" "+Object.keys(e).filter(t=>e[t]).join(" ")+" "}update(e,[t]){var i,s;if(this.st===void 0){this.st=new Set,e.strings!==void 0&&(this.nt=new Set(e.strings.join(" ").split(/\s/).filter(n=>n!=="")));for(const n in t)t[n]&&!((i=this.nt)!=null&&i.has(n))&&this.st.add(n);return this.render(t)}const r=e.element.classList;for(const n of this.st)n in t||(r.remove(n),this.st.delete(n));for(const n in t){const o=!!t[n];o===this.st.has(n)||(s=this.nt)!=null&&s.has(n)||(o?(r.add(n),this.st.add(n)):(r.remove(n),this.st.delete(n)))}return En}});/**
 * @license
 * Copyright 2018 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const qC="important",JJ=" !"+qC,YJ=BC(class extends HC{constructor(e){var t;if(super(e),e.type!==VC.ATTRIBUTE||e.name!=="style"||((t=e.strings)==null?void 0:t.length)>2)throw Error("The `styleMap` directive must be used in the `style` attribute and must be the only part in the attribute.")}render(e){return Object.keys(e).reduce((t,r)=>{const i=e[r];return i==null?t:t+`${r=r.includes("-")?r:r.replace(/(?:^(webkit|moz|ms|o)|)(?=[A-Z])/g,"-$&").toLowerCase()}:${i};`},"")}update(e,[t]){const{style:r}=e.element;if(this.ft===void 0)return this.ft=new Set(Object.keys(t)),this.render(t);for(const i of this.ft)t[i]==null&&(this.ft.delete(i),i.includes("-")?r.removeProperty(i):r[i]=null);for(const i in t){const s=t[i];if(s!=null){this.ft.add(i);const n=typeof s=="string"&&s.endsWith(JJ);i.includes("-")||n?r.setProperty(i,n?s.slice(0,-11):s,n?qC:""):r[i]=s}}return En}});var WC=(e="",t={},r=vm())=>{const i={emit:s=>{e===""&&lw();const n=new CustomEvent(e,{detail:s,cancelable:!0,bubbles:!0,composed:!0,...t});return r.el.dispatchEvent(n),n}};return e===""&&RC(void 0,s=>{e=s.key},i),i},Ooe=WC.bind(null,""),KJ=()=>{},Mo,XJ=(Mo=class extends Xa{constructor(){var r,i,s;super(),this.el=this.constructor.lazy??this,this.manager=gJ(this),this._postLoad=((r=this.constructor.lazy)==null?void 0:r._postLoad)??new Lo,this._offspring=((i=this.constructor.lazy)==null?void 0:i._offspring)??[],this._postLoaded=((s=this.constructor.lazy)==null?void 0:s._postLoaded)??new Lo,this._enableUpdating=this.enableUpdating,this.enableUpdating=KJ;const t=Mo.prototype.shouldUpdate;this.shouldUpdate!==t&&(this._originalShouldUpdate=this.shouldUpdate,this.shouldUpdate=t)}static finalizeStyles(t){var s;const r=super.finalizeStyles(t),i=this.shadowRootOptions===IT;return((s=this.runtime)==null?void 0:s.commonStyles)===void 0||i?r:[this.runtime.commonStyles,...r]}static createProperty(t,r){const i=typeof r=="number"?r:Array.isArray(r)?r[0]:0,s=Array.isArray(r)?r[1]:void 0;super.createProperty(t,{attribute:i&1&&typeof t=="string"?AC(t):!1,reflect:!!(i&2),type:i&4?Boolean:i&8?Number:void 0,state:!!(i&16),readOnly:!!(i&32),noAccessor:!!(i&64),...s})}connectedCallback(){if(this.el.hasAttribute("defer-hydration"))return;const t=!this.manager.connectedCalled;super.connectedCallback(),t&&queueMicrotask(()=>this._load().catch(r=>{this._postLoaded.reject(r),setTimeout(()=>{throw r})}))}createRenderRoot(){const t=this.el.shadowRoot,r=this.constructor,i=r.shadowRootOptions,n=t??(i===IT?this.el:this.el.attachShadow(i));if(Object.defineProperty(this,"shadowRoot",{value:n}),t)return Xa.prototype.createRenderRoot.call(this),t;if(this.isConnected){const o=n.getRootNode();o.adoptedStyleSheets=[...o.adoptedStyleSheets,...r.elementStyles.map(a=>"styleSheet"in a?a.styleSheet:a)]}return n}async _load(){const t=this.el._ancestorLoad??PC(this.el);t&&await t,await this.manager._load(),this._enableUpdating(!0),this.performUpdate(),this._postLoad.resolve(),await Promise.resolve();const r=this._offspring.filter(i=>{var s;return!((s=i.manager)!=null&&s.loadedCalled)});r.length&&await Promise.allSettled(r.map(async i=>await i.componentOnReady())),this._offspring.length=0,this.el.setAttribute(this.constructor.runtime.hydratedAttribute,""),this.manager._loaded(),this._postLoaded.resolve()}shouldUpdate(t){var r;return this.$changes=t,((r=this._originalShouldUpdate)==null?void 0:r.call(this,t))??!0}listen(t,r,i){const s=(r==null?void 0:r.bind(this))??r;this.manager.onLifecycle(()=>(this.el.addEventListener(t,s,i),()=>this.el.removeEventListener(t,s,i)))}listenOn(t,r,i,s){const n=(i==null?void 0:i.bind(this))??i;this.manager.onLifecycle(()=>(t.addEventListener(r,n,s),()=>t.removeEventListener(r,n,s)))}async componentOnReady(){return await this._postLoaded.promise,this}},Mo.lumina=!0,Mo);XJ.$createEvent=WC;function QJ(e){let t;const r=s=>{var n;t=new URL(s,((n=globalThis.location)==null?void 0:n.href)||void 0).href},i={...e,getAssetPath(s){var o;const n=new URL(s,t);return n.origin!==((o=globalThis.location)==null?void 0:o.origin)?n.href:n.pathname},setAssetPath:r,customElement(s,n){n.runtime=i,n.tagName=s,customElements.get(s)||customElements.define(s,n)}};return r(e.defaultAssetPath),i}var Coe=e=>typeof e=="object"&&e!=null?ZJ(e):e,Ioe=e=>typeof e=="object"&&e!=null?YJ(e):e,Roe=et;function koe(e,t,r){r==null?e.removeAttribute(t):e.setAttribute(t,r)}var Noe={toAttribute:e=>e===!0?"":e===!1?null:e};/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.1.0 */const eY="calcite-mode-auto",tY="calcite-mode-dark",Loe={rtl:"calcite--rtl"},Doe={filter:250,nextTick:0,resize:150,reposition:100};function WT(){const{classList:e}=document.body,t=window.matchMedia("(prefers-color-scheme: dark)").matches,r=()=>e.contains(tY)||e.contains(eY)&&t?"dark":"light",i=o=>document.body.dispatchEvent(new CustomEvent("calciteModeChange",{bubbles:!0,detail:{mode:o}})),s=o=>{n!==o&&i(o),n=o};let n=r();i(n),window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",o=>s(o.matches?"dark":"light")),new MutationObserver(()=>s(r())).observe(document.body,{attributes:!0,attributeFilter:["class"]})}const ds=globalThis.calciteConfig,Foe=(ds==null?void 0:ds.focusTrapStack)||[],Uoe=(ds==null?void 0:ds.logLevel)||"info",ZT="3.1.0",rY="2025-03-26",iY="d5f75fd64";function sY(){if(ds&&ds.version)return;console.info(`Using Calcite Components ${ZT} [Date: ${rY}, Revision: ${iY}]`);const e=ds||globalThis.calciteConfig||{};Object.defineProperty(e,"version",{value:ZT,writable:!1}),globalThis.calciteConfig=e}const nY=()=>typeof navigator<"u"&&typeof window<"u"&&typeof location<"u"&&typeof document<"u"&&window.location===location&&window.document===document;function oY(){nY()&&(document.readyState==="interactive"?WT():document.addEventListener("DOMContentLoaded",()=>WT(),{once:!0})),sY()}oY();const aY=QJ({defaultAssetPath:"https://js.arcgis.com/calcite-components/3.1.0/",hydratedAttribute:"calcite-hydrated"}),{customElement:joe,getAssetPath:Goe,setAssetPath:lY}=aY;/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.1.0 */let ZC=!1;const uY=e=>{ZC=!0,lY(e)};let JC;function cY(){ZC||uY(Tr(je(JC)))}function pw(e){var r;const t=[];for(const i of Object.keys(e))customElements.get(`calcite-${i}`)||t.push((r=e[i])==null?void 0:r.call(e));return t.length>0?Promise.all(t):null}JC="components/assets";const YC=Symbol("widget"),KC=Symbol("widget-test-data"),hY=[],dY={},ff=new WeakMap;function XC(e,t){let r=t.children;if(r!=null&&r.length)for(let s=0;s<r.length;++s)r[s]=XC(e,r[s]);else r=hY;const i=t.vnodeSelector;if(mf(i)){const s=t.properties||dY,n=s.key||i,o={key:n,afterCreate:pY,afterUpdate:fY,afterRemoved:QC,parentWidget:e,widgetConstructor:i,widgetProperties:{...s,key:n,children:r}};return{vnodeSelector:i.vnodeSelector,properties:o,children:void 0,text:void 0,domNode:null}}return t}function pY(e,t,r,{parentWidget:i,widgetConstructor:s,widgetProperties:n}){var a;const o=new s(n);o.container=e,ff.set(e,o),(a=o.afterCreate)==null||a.call(o,o,e),i.addHandles(ue(()=>QC(e))),queueMicrotask(()=>{o[KC].projector.renderNow()})}function fY(e,t,r,{widgetProperties:i}){var n;const s=ff.get(e);s&&(s.set(i),(n=s.afterUpdate)==null||n.call(s,s,e))}function QC(e){var r;const t=ff.get(e);t&&((r=t.afterRemoved)==null||r.call(t,t,e),t.destroy(),ff.delete(e))}function mf(e){return typeof e=="function"&&e[YC]}const JT=new Set;function mY(e){JT.add(e),e.finally(()=>JT.delete(e))}var eI;const yY="esri.widgets.Widget";let gY=0;function tI(e,t){const r=Object.prototype.hasOwnProperty;for(const i in t)r.call(t,i)&&r.call(e,i)&&(e[i]!=null&&t[i]!=null&&typeof e[i]=="object"&&typeof t[i]=="object"?tI(e[i],t[i]):e[i]=t[i]);return e}const _Y=kZ({postProcessProjectionOptions(e){const t=e.eventHandlerInterceptor,r=/capture$/i;e.eventHandlerInterceptor=(i,s,n,o)=>{const a=t==null?void 0:t(i,s,n,o),l=r.test(i);if(!((i=i.replace(r,"")).toLowerCase()in n)||l){const h=i[2].toLowerCase()+i.slice(3),p=y=>a==null?void 0:a.call(n,y);n.addEventListener(h,p,l);const f=()=>n.removeEventListener(h,p,l),m=o.afterRemoved;o.afterRemoved=y=>{m==null||m(y),f()}}return a}},handleInterceptedEvent(e,t,r,i){const{eventPhase:s,type:n}=i,o=s===Event.CAPTURING_PHASE;let a=`on${n}${o?"capture":""}`;const l=t.properties;(l&&a in l||(a=`on${n[0].toUpperCase()}${n.slice(1)}${o?"Capture":""}`,l&&a in l))&&(pA(),e.scheduleRender(),l[a].call(l.bind||r,i))}});let Fy=!1,Je=class extends Cf.EsriPromiseMixin(xi.EventedAccessor){constructor(e,t){super(e,t),this._attached=!1,this._projector=_Y,this._readyForTrueRender=!1,this.key=this,this.autoRenderingEnabled=!0,this._loadLocale=gR(async()=>{var a;if((a=this._messageBundleProps)!=null&&a.length){const l=await Promise.allSettled(this._messageBundleProps.map(async({bundlePath:h,propertyName:p})=>{if(this.destroyed)return;let f=await x3(h);this.uiStrings&&Object.keys(this.uiStrings)&&(f=tI(C(f),this.uiStrings)),this[p]=f}));if(this.destroyed)return;for(const h of l)h.status==="rejected"&&F.getLogger(this).error("widget-intl:locale-error",this.declaredClass,h.reason)}await this.loadLocale()}),cY();const r="esri-widget-uid-"+sw(),i=this.render.bind(this);this._trackingTarget=new Tf(()=>{this.autoRenderingEnabled&&this.scheduleRender()});const s=()=>({vnodeSelector:"div",properties:{key:`${r}-hidden`,class:"",styles:{display:"none"}},domNode:null,children:void 0,text:void 0}),n=()=>{var p,f;if(!this._readyForTrueRender||this.destroyed)return null;const a=i()??s(),l=a.properties??(a.properties={});if(l.key??(l.key=r),mf(a.vnodeSelector)){if(!this.visible)return s()}else this.visible?l.styles||(l.styles={}):(l.class="",l.styles={display:"none"}),(p=l.styles).display??(p.display="");let h=0;return(f=a.children)==null||f.forEach(m=>{var y;mf(m.vnodeSelector)||(m.properties??(m.properties={}),(y=m.properties).key??(y.key=`${this.id}--${h++}`))}),XC(this,a)};this.render=()=>{if(Fy)return n();let a=cU(this)??null;if(a)return a;this._trackingTarget.clear(),Fy=!0;try{a=ps(this._trackingTarget,n)}catch(l){throw F.getLogger(this).error(l),l}finally{Fy=!1}return a&&hU(this,a),a};const o=this.beforeFirstRender();o?this._resourcesFetch=o.then(()=>{this._readyForTrueRender=!0,this._postInitialize()}):(this._resourcesFetch=Promise.resolve().then(()=>{this._postInitialize()}),this._readyForTrueRender=!0),this.addResolvingPromise(this._resourcesFetch),mY(this._resourcesFetch)}normalizeCtorArgs(e,t){const r={...e};return t&&(r.container=t),r}postInitialize(){}beforeFirstRender(){var t;const e=this.loadDependencies();return(t=this._messageBundleProps)!=null&&t.length||e?Promise.all([e,this._loadLocale()]).then(()=>{}).catch(Rw):null}loadDependencies(){return null}loadLocale(){return null}destroy(){this.destroyed||(ke(this._trackingTarget),ke(this.viewModel),this._detach(this.container),this._set("container",null),this._emitter.clear(),this.render=()=>null,this._projector=null,ey(this))}set container(e){this._get("container")||this._set("container",e)}castContainer(e){return fv(e)}get domNode(){return this.container}set domNode(e){this.container=e}get icon(){return null}set icon(e){this._overrideIfSome("icon",e)}get id(){var e;return this._get("id")||((e=this.container)==null?void 0:e.id)||Date.now().toString(16)+"-widget-"+gY++}set id(e){e&&this._set("id",e)}get label(){return this.declaredClass.split(".").pop()}set label(e){this._overrideIfSome("label",e)}get renderable(){return this._resourcesFetch}get visible(){return this._get("visible")}set visible(e){this._set("visible",e)}get[(eI=YC,KC)](){return{projector:this._projector}}render(){throw new Error("not implemented")}scheduleRender(){this.destroyed||(ey(this),this._projector.scheduleRender())}classes(...e){return dU.apply(this,e)}renderNow(){ey(this),this._projector.renderNow()}_postInitialize(){var t;if(this.destroyed)return;this.scheduleRender(),(t=this._delegatedEventNames)!=null&&t.length&&this.addHandles(X(()=>this.viewModel,(r,i)=>{i&&this.removeHandles("delegated-events"),r&&Sf(r)&&this.addHandles(this._delegatedEventNames.map(s=>Jc(r,s,n=>{this.emit(s,n)})),"delegated-events")},jt)),this.postInitialize();const e=async()=>{await this._loadLocale().catch(Rw),this.scheduleRender()};this.addHandles([S3(e),X(()=>this.uiStrings,e),Or(()=>this.container,r=>{this.destroyed||this._attach(r)},{initial:!0,once:!0})])}_attach(e){e&&(this._projector.merge(e,this.render),this._attached=!0)}_detach(e){var t;this._attached&&(this._projector.detach(this.render),this._attached=!1),(t=e==null?void 0:e.parentNode)==null||t.removeChild(e)}};Je[eI]=!0,Je.vnodeSelector="div",c([d()],Je.prototype,"_readyForTrueRender",void 0),c([d({value:null})],Je.prototype,"container",null),c([tt("container")],Je.prototype,"castContainer",null),c([d()],Je.prototype,"icon",null),c([d()],Je.prototype,"id",null),c([d()],Je.prototype,"label",null),c([d()],Je.prototype,"renderable",null),c([d()],Je.prototype,"uiStrings",void 0),c([d()],Je.prototype,"viewModel",void 0),c([d({value:!0})],Je.prototype,"visible",null),c([d()],Je.prototype,"key",void 0),c([d()],Je.prototype,"children",void 0),c([d()],Je.prototype,"afterCreate",void 0),c([d()],Je.prototype,"afterUpdate",void 0),c([d()],Je.prototype,"afterRemoved",void 0),Je=c([S(yY)],Je);const bm=Je,vY=new Map;function wY(e){return vY.get(e)}function YT(e,t){return e&&"copyright"in e&&(!t||typeof e.originOf=="function"&&e.originOf("copyright")==="user")}function bY(e,t){return e.length!==t.length||e.some((r,i)=>r.text!==t[i].text)}function Ql(e,t,r){!r||!t||e.find(i=>i.layerView===t&&i.text===r)||e.push({text:r,layerView:t})}function SY(e){return e.type==="bing-maps"}const Gi=[];let Aa=class extends q{constructor(e){super(e),this._clear=()=>{this._fetchedAttributionData.clear(),this._pendingAttributions.clear(),this.removeHandles("suspension"),this.notifyChange("state")},this._pendingAttributions=new Set,this._fetchedAttributionData=new Map,this.items=new B,this.view=null,this._allLayerViewsChange=t=>{var i;this.removeHandles("suspension"),this.removeHandles("visible-geometry-changed");const r=(i=this.view)==null?void 0:i.allLayerViews;r&&(this.addHandles(r.map(s=>X(()=>{var n;return[s.suspended,(n=s.layer)==null?void 0:n.attributionVisible]},()=>this._updateAttributionItems())).toArray(),"suspension"),r.forEach(s=>{s.declaredClass==="esri.views.3d.layers.Tiles3DLayerView3D"&&this.addHandles(s.on("visible-geometry-changed",()=>this._updateAttributionItems()),"visible-geometry-changed")})),t!=null&&t.removed&&t.removed.forEach(s=>{this._pendingAttributions.delete(s),this._fetchedAttributionData.delete(s)}),this._updateAttributionItems()},this.addHandles([vn(()=>{var t;return(t=this.view)==null?void 0:t.allLayerViews},"change",t=>this._allLayerViewsChange(t),{onListenerAdd:()=>this._allLayerViewsChange(),onListenerRemove:this._clear}),Or(()=>{var t;return((t=this.view)==null?void 0:t.stationary)===!0},()=>this._updateAttributionItems())])}destroy(){this.view=null,this._fetchedAttributionData.clear(),this._pendingAttributions.clear(),this.items.removeAll()}get state(){var e;return(e=this.view)!=null&&e.ready?this._pendingAttributions.size>0?"loading":"ready":"disabled"}_updateAttributionItems(){const e=this.view,t=e==null?void 0:e.allLayerViews;if(Gi.length=0,!e||!t)return void this._clear();t.forEach(i=>{var o,a;if(i.suspended||!((o=i.layer)!=null&&o.attributionVisible))return;const s=i.layer;if(YT(s,"user"))return void Ql(Gi,i,s.copyright);if(s.hasAttributionData){if(this._fetchedAttributionData.has(i)){const l=this._fetchedAttributionData.get(i);return void(l?Ql(Gi,i,this._getDynamicAttribution(l,e,s)):YT(s)&&Ql(Gi,i,s.copyright))}return void this._fetchAttributionData(i)}const n="portalItem"in s?(a=s.portalItem)==null?void 0:a.accessInformation:void 0;Ql(Gi,i,n||s.copyright)});const r=t.find(i=>{var s;return((s=i.layer)==null?void 0:s.type)==="integrated-mesh-3dtiles"});if(this.view&&r){const i=wY(this.view);if(i){const s=i.getAttributionText();for(let n=0;n<s.length;++n)Ql(Gi,r,s[n])}}bY(this.items,Gi)&&(this.items.removeAll(),this.items.addMany(Gi)),Gi.length=0,this.notifyChange("state")}async _fetchAttributionData(e){if(this._pendingAttributions.has(e))return;this._pendingAttributions.add(e);const t=await YE(e.layer.fetchAttributionData());if(this._pendingAttributions.has(e)){const r=t.ok?this._createContributionIndex(t.value,SY(e.layer)):null;this._pendingAttributions.delete(e),this._fetchedAttributionData.set(e,r)}this._updateAttributionItems()}_createContributionIndex(e,t){const r=e.contributors,i={};if(!r)return i;for(let s=0;s<r.length;s++){const n=r[s],o=n.coverageAreas;if(!o)return;for(const a of o){const l=a.bbox,h=a.zoomMin-(t&&a.zoomMin?1:0),p=a.zoomMax-(t&&a.zoomMax?1:0),f=new Le({xmin:l[1],ymin:l[0],xmax:l[3],ymax:l[2],spatialReference:ae.WGS84}),m={extent:So(f),attribution:n.attribution||"",score:a.score!=null?a.score:100,id:s};for(let y=h;y<=p;y++)i[y]??(i[y]=[]),i[y].push(m)}}return i.maxKey=Math.max.apply(null,Object.keys(i)),i}_getDynamicAttribution(e,t,r){var h;const{extent:i,scale:s}=t;let n=((h=r.tileInfo)==null?void 0:h.scaleToZoom(s))??0;if(n=Math.min(e.maxKey??0,Math.round(n)),!i||n==null||n<=-1)return"";const o=e[n],a=Nf(i.center.clone().normalize(),ae.WebMercator),l=new Set;return o?o.filter(p=>{const f=p.id,m=!l.has(f)&&a&&p.extent&&eh(p.extent,a);return m&&l.add(f),m}).sort((p,f)=>f.score-p.score||p.objectId-f.objectId).map(p=>p.attribution).join(", "):""}};c([d({readOnly:!0,type:B})],Aa.prototype,"items",void 0),c([d({readOnly:!0})],Aa.prototype,"state",null),c([d()],Aa.prototype,"view",void 0),Aa=c([S("esri.widgets.Attribution.AttributionViewModel")],Aa);const rI=Aa,Ei={button:"esri-button",buttonDisabled:"esri-button--disabled",buttonHalf:"esri-button--half",buttonSecondary:"esri-button--secondary",buttonSmall:"esri-button--small",buttonTertiary:"esri-button--tertiary",buttonThird:"esri-button--third",empty:"esri-widget__content--empty",heading:"esri-widget__heading",interactive:"esri-interactive",panel:"esri-widget--panel",table:"esri-widget__table",widget:"esri-widget",widgetButton:"esri-widget--button"};function TY(){return function(e,t){if(!e[t])throw new TypeError(`Cannot auto bind undefined function '${String(t)}'`);return{value:EY(e[t])}}}function $Y(e){const t=e==null?void 0:e.type;return e instanceof KeyboardEvent||t==="keyup"||t==="keydown"||t==="keypress"}function EY(e){return function(t,...r){$Y(t)?gU(t.key)&&(t.preventDefault(),t.stopPropagation(),t.target.click()):e.call(this,t,...r)}}function Sm(e){return(t,r)=>{t.hasOwnProperty("_messageBundleProps")||(t._messageBundleProps=t._messageBundleProps?t._messageBundleProps.slice():[]),t._messageBundleProps.push({bundlePath:e,propertyName:r})}}var MY=function(e){return{vnodeSelector:"",properties:void 0,children:void 0,text:e.toString(),domNode:null}},iI=function(e,t){for(var r=0,i=e.length;r<i;r++){var s=e[r];Array.isArray(s)?iI(s,t):s!=null&&s!==!1&&(s.hasOwnProperty("vnodeSelector")||(s=MY(s)),t.push(s))}},xY=function(e,t){for(var r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(r.length===1&&typeof r[0]=="string")return{vnodeSelector:e,properties:t||void 0,children:void 0,text:r[0],domNode:null};var s=[];return iI(r,s),{vnodeSelector:e,properties:t||void 0,children:s,text:void 0,domNode:null}};function zt(e,t,...r){return typeof e!="function"||mf(e)?xY(e,t??null,...r):e(t,...r)}function zoe(...e){return e}const oa="esri-attribution",aa={base:oa,poweredBy:`${oa}__powered-by`,sources:`${oa}__sources`,open:`${oa}--open`,sourcesOpen:`${oa}__sources--open`,link:`${oa}__link`};let At=class extends bm{constructor(t,r){super(t,r),this._isOpen=!1,this._attributionTextOverflowed=!1,this._prevSourceNodeHeight=0,this._resizeObserver=new ResizeObserver(i=>i.forEach(({target:s})=>this._checkSourceTextOverflow(s))),this.itemDelimiter=" | ",this.messages=null,this.viewModel=new rI}initialize(){this.addHandles(vn(()=>{var t;return(t=this.viewModel)==null?void 0:t.items},"change",()=>this.scheduleRender()))}destroy(){var t;(t=this._resizeObserver)==null||t.disconnect()}get _isInteractive(){return this._isOpen||this._attributionTextOverflowed}get attributionText(){return this.viewModel.items.reduce((t,r)=>(t.includes(r.text)||t.push(r.text),t),[]).join(this.itemDelimiter)}get icon(){return"description"}set icon(t){this._overrideIfSome("icon",t)}get label(){var t;return((t=this.messages)==null?void 0:t.widgetLabel)??""}set label(t){this._overrideIfSome("label",t)}get view(){return this.viewModel.view}set view(t){this.viewModel.view=t}render(){const t={[aa.open]:this._isOpen};return zt("div",{bind:this,class:this.classes(aa.base,Ei.widget,t),dir:"ltr",onclick:this._toggleState,onkeydown:this._toggleState},this._renderSourcesNode(),this._renderPoweredBy())}_renderPoweredBy(){return zt("div",{class:aa.poweredBy},"Powered by"," ",zt("a",{class:aa.link,href:"https://www.esri.com/",rel:"noreferrer",target:"_blank"},"Esri"))}_renderSourcesNode(){const t=this._isOpen,r=this._isInteractive,i=r?0:void 0,{attributionText:s}=this,n={[aa.sourcesOpen]:t,[Ei.interactive]:r};return zt("div",{afterCreate:this._afterSourcesNodeCreate,bind:this,class:this.classes(aa.sources,n),innerHTML:s,tabIndex:i})}_afterSourcesNodeCreate(t){this._prevSourceNodeHeight=t.clientWidth,this._resizeObserver.observe(t)}_checkSourceTextOverflow(t){let r=!1;const{clientHeight:i,clientWidth:s,scrollWidth:n}=t,o=n>s,a=this._attributionTextOverflowed!==o;if(this._attributionTextOverflowed=o,a&&(r=!0),this._isOpen){const l=i<this._prevSourceNodeHeight;this._prevSourceNodeHeight=i,l&&(this._isOpen=!1,r=!0)}r&&this.scheduleRender()}_toggleState(){this._isInteractive&&(this._isOpen=!this._isOpen)}};c([d()],At.prototype,"_isOpen",void 0),c([d()],At.prototype,"_isInteractive",null),c([d()],At.prototype,"_attributionTextOverflowed",void 0),c([d()],At.prototype,"_prevSourceNodeHeight",void 0),c([d({readOnly:!0,dependsOn:["viewModel.items.length","itemDelimiter"]})],At.prototype,"attributionText",null),c([d()],At.prototype,"icon",null),c([d()],At.prototype,"itemDelimiter",void 0),c([d()],At.prototype,"label",null),c([d(),Sm("esri/widgets/Attribution/t9n/Attribution")],At.prototype,"messages",void 0),c([d()],At.prototype,"view",null),c([d({type:rI})],At.prototype,"viewModel",void 0),c([TY()],At.prototype,"_toggleState",null),At=c([S("esri.widgets.Attribution")],At);const AY=At;function PY(){const e=A("mapview-essential-goto-duration");return e==null?e:e}function OY(e){var t,r;return((t=e==null?void 0:e.spatialReference)==null?void 0:t.isWebMercator)||((r=e==null?void 0:e.spatialReference)==null?void 0:r.isGeographic)||!1}const CY=e=>{let t=class extends e{constructor(...r){super(...r),this.goToOverride=null,this.view=null}callGoTo(r){const{view:i}=this;return P$(i),this.goToOverride?this.goToOverride(i,r):i.goTo(r.target,r.options)}};return c([d()],t.prototype,"goToOverride",void 0),c([d()],t.prototype,"view",void 0),t=c([S("esri.widgets.support.GoTo")],t),t};let co=class extends CY(q){constructor(t){super(t),this.orientation={x:0,y:0,z:0},this.view=null,this._updateForCamera=this._updateForCamera.bind(this),this._updateForRotation=this._updateForRotation.bind(this),this._updateRotationWatcher=this._updateRotationWatcher.bind(this)}initialize(){this._watchForView(St)}destroy(){this.view=null}get canShowNorth(){return OY(this.view)}get state(){var t;return!((t=this.view)!=null&&t.ready)||this.view.type==="2d"&&!this.view.constraints.rotationEnabled?"disabled":this.canShowNorth?"compass":"rotation"}reset(){var t,r;(t=this.view)!=null&&t.ready&&(((r=this.view)==null?void 0:r.type)==="2d"?this.callGoTo({target:{rotation:0},options:{animationMode:"always",duration:PY()}}):this.callGoTo({target:{heading:0}}))}_updateForRotation(t){t!=null&&this._set("orientation",{z:t})}_updateForCamera(t){if(!t)return;const r=-t.heading;this._set("orientation",{x:0,y:0,z:r})}_updateRotationWatcher(t){this.removeAllHandles(),this._watchForView(),t&&this.addHandles(t.type==="2d"?X(()=>t==null?void 0:t.rotation,this._updateForRotation,St):X(()=>t==null?void 0:t.camera,this._updateForCamera,St))}_watchForView(t){this.addHandles(X(()=>this.view,this._updateRotationWatcher,t))}};c([d({readOnly:!0})],co.prototype,"canShowNorth",null),c([d({readOnly:!0})],co.prototype,"orientation",void 0),c([d({readOnly:!0})],co.prototype,"state",null),c([d()],co.prototype,"view",void 0),co=c([S("esri.widgets.Compass.CompassViewModel")],co);const sI=co,KT="esri-compass",XT={base:KT,iconContainer:`${KT}__icon-container`};let es=class extends bm{constructor(t,r){super(t,r),this.messages=null,this.viewModel=new sI,this._reset=()=>{this.viewModel.reset()},this._toRotationTransform=i=>({transform:`rotateZ(${i.z}deg)`})}loadDependencies(){return pw({button:()=>N(()=>import("./index-BO6_jQ7D.js"),__vite__mapDeps([339,340,341,342,343,344,345,346,347,348,349,350,351])),icon:()=>N(()=>import("./index-DXVE56wj.js").then(t=>t.i),__vite__mapDeps([343,344,345]))})}get goToOverride(){return this.viewModel.goToOverride}set goToOverride(t){this.viewModel.goToOverride=t}get icon(){return this.viewModel.state==="rotation"?"arrow-up":"compass-needle"}set icon(t){this._overrideIfSome("icon",t)}get label(){var t;return((t=this.messages)==null?void 0:t.widgetLabel)??""}set label(t){this._overrideIfSome("label",t)}get view(){return this.viewModel.view}set view(t){this.viewModel.view=t}reset(){return this.viewModel.reset()}render(){const{orientation:t,state:r}=this.viewModel,{messages:i}=this;return zt("div",{class:this.classes(XT.base,Ei.widget)},zt("calcite-button",{class:Ei.widgetButton,disabled:r==="disabled",kind:"neutral",label:i.reset,onclick:this._reset,round:!0,scale:"s",title:i.reset},zt("div",{"aria-hidden":"true",class:XT.iconContainer,title:i.reset},zt("calcite-icon",{icon:this.icon,styles:this._toRotationTransform(t)}))))}};c([d()],es.prototype,"goToOverride",null),c([d()],es.prototype,"icon",null),c([d()],es.prototype,"label",null),c([d(),Sm("esri/widgets/Compass/t9n/Compass")],es.prototype,"messages",void 0),c([d()],es.prototype,"view",null),c([d({type:sI})],es.prototype,"viewModel",void 0),es=c([S("esri.widgets.Compass")],es);const IY=es,QT="esri-navigation-toggle",e$={base:QT,isLayoutHorizontal:`${QT}--horizontal`};let Pa=class extends q{constructor(t){super(t),this._navigationMode="pan",this.view=null}initialize(){this.addHandles(Or(()=>{var t,r;return(r=(t=this.view)==null?void 0:t.navigation)==null?void 0:r.actionMap},()=>this._updateNavigationActionMap()))}destroy(){this.view=null}get state(){var t,r;return(t=this.view)!=null&&t.ready&&((r=this.view)==null?void 0:r.type)==="3d"?"ready":"disabled"}get navigationMode(){return this._navigationMode}set navigationMode(t){this._navigationMode=t,this._updateNavigationActionMap()}toggle(){this.state!=="disabled"&&(this.navigationMode=this.navigationMode!=="pan"?"pan":"rotate")}_updateNavigationActionMap(){var i,s;const t=(s=(i=this.view)==null?void 0:i.navigation)==null?void 0:s.actionMap;if(!t)return;const r=this._navigationMode==="pan";t.dragPrimary=r?"pan":"rotate",t.dragSecondary=r?"rotate":"pan"}};c([d({readOnly:!0})],Pa.prototype,"state",null),c([d()],Pa.prototype,"_navigationMode",void 0),c([d()],Pa.prototype,"view",void 0),Pa=c([S("esri.widgets.NavigationToggle.NavigationToggleViewModel")],Pa);const nI=Pa;let ts=class extends bm{constructor(t,r){super(t,r),this.messages=null,this.viewModel=new nI,this.toggle=()=>this.viewModel.toggle(),this._panButton=null,this._rotateButton=null,this._toggle=()=>{var s;const i=((s=this.viewModel)==null?void 0:s.navigationMode)==="pan"?this._rotateButton:this._panButton;_U(i),this.toggle()}}loadDependencies(){return pw({button:()=>N(()=>import("./index-BO6_jQ7D.js"),__vite__mapDeps([339,340,341,342,343,344,345,346,347,348,349,350,351]))})}get icon(){return"move"}set icon(t){this._overrideIfSome("icon",t)}get label(){var t;return((t=this.messages)==null?void 0:t.widgetLabel)??""}set label(t){this._overrideIfSome("label",t)}set layout(t){t!=="horizontal"&&(t="vertical"),this._set("layout",t)}get view(){return this.viewModel.view}set view(t){this.viewModel.view=t}render(){var s,n;const t=((s=this.viewModel)==null?void 0:s.state)==="disabled",r=((n=this.viewModel)==null?void 0:n.navigationMode)==="pan",i=this.messages.toggle;return zt("div",{class:this.classes(e$.base,Ei.widget,{[e$.isLayoutHorizontal]:this.layout==="horizontal"})},zt("calcite-button",{afterCreate:o=>{this._panButton=o},appearance:r?"outline-fill":"solid",class:Ei.widgetButton,disabled:t,iconStart:"move",kind:"neutral",label:i,onclick:this._toggle,tabIndex:r?void 0:-1,title:i}),zt("calcite-button",{afterCreate:o=>{this._rotateButton=o},appearance:r?"solid":"outline-fill",class:Ei.widgetButton,disabled:t,iconStart:"rotate",kind:"neutral",label:i,onclick:this._toggle,tabIndex:r?-1:void 0,title:i}))}};c([d()],ts.prototype,"icon",null),c([d()],ts.prototype,"label",null),c([d({value:"vertical"})],ts.prototype,"layout",null),c([d(),Sm("esri/widgets/NavigationToggle/t9n/NavigationToggle")],ts.prototype,"messages",void 0),c([d()],ts.prototype,"view",null),c([d({type:nI})],ts.prototype,"viewModel",void 0),ts=c([S("esri.widgets.NavigationToggle")],ts);const RY=ts;let ho=class extends q{get canZoomIn(){var i,s,n;if(!((i=this.view)==null?void 0:i.ready))return!1;const r=(n=(s=this.view)==null?void 0:s.constraints)==null?void 0:n.effectiveMaxScale;return r===0||this._scale>r}get canZoomOut(){var s;const{view:t}=this;if(!(t==null?void 0:t.ready))return!1;const i=(s=t.constraints)==null?void 0:s.effectiveMinScale;return i===0||this._scale<i}get _scale(){var r,i,s;const t=(i=(r=this.view)==null?void 0:r.animation)==null?void 0:i.target;return(t&&"then"in t||t==null?void 0:t.scale)??((s=this.view)==null?void 0:s.scale)??0}};c([d({readOnly:!0})],ho.prototype,"canZoomIn",null),c([d({readOnly:!0})],ho.prototype,"canZoomOut",null),c([d()],ho.prototype,"view",void 0),c([d()],ho.prototype,"_scale",null),ho=c([S("esri.widgets.Zoom.ZoomConditions2D")],ho);const kY=ho;let Oa=class extends q{get canZoomIn(){return!!this.view.ready}get canZoomOut(){return!!this.view.ready}};c([d({readOnly:!0})],Oa.prototype,"canZoomIn",null),c([d({readOnly:!0})],Oa.prototype,"canZoomOut",null),c([d()],Oa.prototype,"view",void 0),Oa=c([S("esri.widgets.Zoom.ZoomConditions3D")],Oa);const NY=Oa;let Ws=class extends q{constructor(t){super(t)}destroy(){this.view=null}get canZoomIn(){return this._zoomConditions!=null&&this._zoomConditions.canZoomIn}get canZoomOut(){var t;return this._zoomConditions!=null&&((t=this._zoomConditions)==null?void 0:t.canZoomOut)}get state(){var t;return(t=this.view)!=null&&t.ready?"ready":"disabled"}set view(t){t?t.type==="2d"?this._zoomConditions=new kY({view:t}):t.type==="3d"&&(this._zoomConditions=new NY({view:t})):this._zoomConditions=null,this._set("view",t)}zoomIn(){const t=this.view;this.canZoomIn&&t&&(t.type==="2d"?t.mapViewNavigation.zoomIn():mp(t.goTo({zoomFactor:2})))}zoomOut(){const t=this.view;this.canZoomOut&&t&&(t.type==="2d"?t.mapViewNavigation.zoomOut():mp(t.goTo({zoomFactor:.5})))}};c([d()],Ws.prototype,"_zoomConditions",void 0),c([d()],Ws.prototype,"canZoomIn",null),c([d()],Ws.prototype,"canZoomOut",null),c([d({readOnly:!0})],Ws.prototype,"state",null),c([d()],Ws.prototype,"view",null),Ws=c([S("esri.widgets.Zoom.ZoomViewModel")],Ws);const oI=Ws,t$={base:"esri-zoom",horizontalLayout:"esri-zoom--horizontal"};let rs=class extends bm{constructor(t,r){super(t,r),this.messages=null,this.viewModel=new oI,this.zoomIn=()=>this.viewModel.zoomIn(),this.zoomOut=()=>this.viewModel.zoomOut()}loadDependencies(){return pw({button:()=>N(()=>import("./index-BO6_jQ7D.js"),__vite__mapDeps([339,340,341,342,343,344,345,346,347,348,349,350,351]))})}get icon(){return"magnifying-glass-plus"}set icon(t){this._overrideIfSome("icon",t)}get label(){var t;return((t=this.messages)==null?void 0:t.widgetLabel)??""}set label(t){this._overrideIfSome("label",t)}set layout(t){t!=="horizontal"&&(t="vertical"),this._set("layout",t)}set view(t){this.viewModel.view=t}get view(){return this.viewModel.view}render(){const t={[t$.horizontalLayout]:this.layout==="horizontal"},{canZoomIn:r,canZoomOut:i}=this.viewModel,{zoomIn:s,zoomOut:n}=this.messages;return zt("div",{class:this.classes(t$.base,Ei.widget,t)},zt("calcite-button",{class:Ei.widgetButton,disabled:!r,iconStart:"plus",kind:"neutral",label:s,onclick:this.zoomIn,title:s}),zt("calcite-button",{class:Ei.widgetButton,disabled:!i,iconStart:"minus",kind:"neutral",label:n,onclick:this.zoomOut,title:n}))}};c([d()],rs.prototype,"icon",null),c([d()],rs.prototype,"label",null),c([d({value:"vertical"})],rs.prototype,"layout",null),c([d(),Sm("esri/widgets/Zoom/t9n/Zoom")],rs.prototype,"messages",void 0),c([d()],rs.prototype,"view",null),c([d({type:oI})],rs.prototype,"viewModel",void 0),rs=c([S("esri.widgets.Zoom")],rs);const LY=rs;function DY(e){return(e==null?void 0:e.view)!==void 0}let np=class extends xZ{constructor(e){super(e),this._defaultPositionLookup={attribution:"manual",compass:"top-left","navigation-toggle":"top-left",zoom:"top-left"},this.components=[],this._updateViewAwareWidgets=t=>{this.components.forEach(r=>{const i=this._find(r),s=i==null?void 0:i.widget;DY(s)&&(s.view=t)})},this._componentsWatcher=(t,r)=>{this._removeComponents(r),this._addComponents(t),this._adjustPadding(t)}}initialize(){this.addHandles([X(()=>this.components,this._componentsWatcher,St),X(()=>this.view,this._updateViewAwareWidgets,St)])}_add(e,t,r,i,s){let n=e;if(typeof e=="string"&&this._defaultPositionLookup[e]){if(this._find(e))return;n=this._createComponent(e)}super._add(n,t,r,i,s)}_removeComponents(e){e.forEach(t=>{const r=this._find(t);r&&(this.remove(r),r.destroy())})}_adjustPadding(e){if(!e.includes("attribution")&&!this._isOverridden("padding")){const{top:t}=this.padding;this.padding=t}}_addComponents(e){this.constructed&&e.forEach(t=>this.add(this._createComponent(t),this._defaultPositionLookup[t]))}_createComponent(e){const t=this._createWidget(e);return new rp({id:e,node:t})}_createWidget(e){const t=this.view;switch(e){case"attribution":return new AY({view:t});case"compass":return new IY({view:t});case"navigation-toggle":return new RY({view:t});case"zoom":return new LY({view:t})}}};c([d()],np.prototype,"components",void 0),np=c([S("esri.views.ui.DefaultUI")],np);const aI=np;let op=class extends aI{constructor(e){super(e),this.components=["attribution","zoom"]}};c([d()],op.prototype,"components",void 0),op=c([S("esri.views.ui.2d.DefaultUI2D")],op);const lI=op;let FY=class J1{constructor(t,r,i=""){this.major=t,this.minor=r,this._context=i}lessThan(t,r){return this.major<t||t===this.major&&this.minor<r}greaterEqual(t,r){return!this.lessThan(t,r)}validate(t){if(this.major!==t.major){const r=this._context&&this._context+":",i=this._context&&this._context+" ";throw new I(r+"unsupported-version",`Required major ${i}version is '${this.major}', but got '\${version.major}.\${version.minor}'`,{version:t})}}clone(){return new J1(this.major,this.minor,this._context)}static parse(t,r=""){const[i,s]=t.split("."),n=/^\s*\d+\s*$/;if(!(i!=null&&i.match)||!n.test(i))throw new I((r&&r+":")+"invalid-version","Expected major version to be a number, but got '${version}'",{version:t});if(!(s!=null&&s.match)||!n.test(s))throw new I((r&&r+":")+"invalid-version","Expected minor version to be a number, but got '${version}'",{version:t});const o=parseInt(i,10),a=parseInt(s,10);return new J1(o,a,r)}};class UY extends FY{constructor(t,r){super(t,r,"webmap")}}function Uy(e){return e!=null&&typeof e=="object"&&"declaredClass"in e&&e.declaredClass==="esri.WebMap"}new UY(2,33);var Y1;let ap=Y1=class extends j{constructor(e){super(e),this.color=new ne([0,0,0,1])}clone(){return new Y1(C({color:this.color}))}};c([d({type:ne,json:{write:!0}})],ap.prototype,"color",void 0),ap=Y1=c([S("esri.webmap.background.ColorBackground")],ap);const jY=ap;let uI,cI,hI,dI,pI,fI,mI;async function GY(){const[,{GraphicsView2D:e,GraphicContainer:t,LabelManager:r,MapViewNavigation:i,MagnifierView2D:s,GridView2D:n,Stage:o}]=await Promise.all([N(()=>import("./webglDeps-D_JMAzNr.js"),__vite__mapDeps([260,184,12,261,262,263])),N(()=>import("./mapViewDeps-CP3NTMHm.js"),__vite__mapDeps([264,148,34,35,108,109,45,12,110,105,111,104,112,113,114,107,77,115,66,265,119,266,261,184,262,188,164,267,138,268,206,171,170,123,49,50,18,117,125,269,120,121,122,270,32,169,260,263,271,133,272,106,116,59,47,42,54,53,273,177,178,162,186,274,93,275,124,276,277,118,278,82,129,102,279,280,281,282,180,225,283,284]))]);cI=e,hI=t,dI=r,pI=i,fI=s,mI=n,uI=o}let se=class extends eq(gF(WU(RU(lz)))){constructor(e){super(e),this._magnifierView=null,this._gridView=null,this.stage=null,this._resolveWhenReady=[],this.rootLayerViews=new Ac({getCollections:()=>{var t,r;return[(t=this.basemapView)==null?void 0:t.baseLayerViews,this.layerViews,(r=this.basemapView)==null?void 0:r.referenceLayerViews]},getChildrenFunction:()=>null}),this.featuresTilingScheme=null,this.graphicsView=null,this.labelManager=null,this.navigation=new dm({actionMap:new Fv({dragTertiary:"none"})}),this.renderingOptions={samplingMode:"dynamic",edgeLabelsVisible:!0,labelsAnimationTime:125,labelCollisionsEnabled:!0},this.supersampleScreenshotsEnabled=!0,this.supportsGround=!1,this.floors=new B,this.grid=null,this.map=null,this.spatialReferenceLocked=!1,this.timeline=new SC,this.type="2d",this.view2dType=null,this.ui=new lI,this.test={takeScreenshot:async t=>aZ(this._getScreenshotView(t),t)},this.padding={top:0,right:0,bottom:0,left:0},I9()}destroy(){this.layerViewManager.clear(),this._set("preconditionsReady",!1),this.frameTask=ke(this.frameTask),this.goToManager.destroy(),this.rootLayerViews.destroy(),this.inputManager.destroy(),this._set("inputManager",null)}get graphicsTileStore(){return new fW(this.featuresTilingScheme)}get constraintsInfo(){var r,i;const e=(r=this.defaultsFromMap)==null?void 0:r.tileInfo,t=this.spatialReference;return{lods:(i=e==null?void 0:e.spatialReference)!=null&&i.equals(t)?e.lods:null,spatialReference:t}}get initialExtentRequired(){var o;if(!this.stateManager)return!1;const{scale:e,constraints:t,center:r,viewpoint:i,extent:s}=this;let n=this.zoom;return!(this.map&&"initialViewProperties"in this.map&&((o=this.map.initialViewProperties)!=null&&o.viewpoint))&&!s&&(t!=null&&t.effectiveLODs||(n=-1),(!r||e===0&&n===-1)&&((i==null?void 0:i.targetGeometry)==null||i.targetGeometry.type!=="extent"&&!i.scale))}get defaultsFromMapSettings(){return{required:{extent:!1,heightModelInfo:!1,tileInfo:!0},requiresExtentInSpatialReference:this.spatialReferenceLocked}}get scheduler(){return this.frameTask.scheduler}get typeSpecificPreconditionsReady(){const e=this._getDefaultViewpoint();if(!e)return!1;const t=e.targetGeometry,r=this.spatialReference;return Vx(t.spatialReference,r)}get background(){return Uy(this.map)?this.map.initialViewProperties.background:null}set background(e){this._override("background",e)}get center(){var e;return((e=this.stateManager)==null?void 0:e.center)??null}set center(e){this.stateManager.center=e}get highlightOptions(){return HW(this)}set highlightOptions(e){qW(this,e)}get padding(){var e;return(e=this.stateManager)==null?void 0:e.padding}set padding(e){this.stateManager&&(this.stateManager.padding=e)}get rendering(){var e;return((e=this.stage)==null?void 0:e.renderRequested)??!1}get resolution(){return this.stateManager.resolution??0}get scale(){var e;return((e=this.stateManager)==null?void 0:e.scale)??0}set scale(e){this.stateManager&&(this.stateManager.scale=e)}get tileInfo(){var e;return(e=this.featuresTilingScheme)==null?void 0:e.tileInfo}get updating(){var r,i,s,n;const e=!(!this.magnifier.visible||this.magnifier.position===null||!((r=this._magnifierView)!=null&&r.updatingHandles.updating)),t=!this.destroyed&&(!this.layerViewManager||!this.labelManager||!this.graphicsView||this.layerViewManager.updating===!0||this.labelManager.updating===!0||this.graphicsView.updating===!0||this.allLayerViews.some(o=>!o.destroyed&&!("layerViews"in o)&&o.updating===!0)||e);if(A("esri-2d-log-updating")){const o=this.allLayerViews.reduce((a,l)=>({...a,[`${l.layer.id}(${l.layer.type})`]:!l.destroyed&&!("layerViews"in l)&&l.updating}),{});console.log(`Updating MapView: ${t}
-> Null LayerViewManager: ${!this.layerViewManager}
-> Null LabelManager: ${!this.labelManager}
-> Null GraphicsView: ${!this.graphicsView}
-> layerViewManager.updating: ${(i=this.layerViewManager)==null?void 0:i.updating}
-> labelManager.updating: ${(s=this.labelManager)==null?void 0:s.updating}
-> graphicsView.updating: ${(n=this.graphicsView)==null?void 0:n.updating}
-> allLayerViews: ${JSON.stringify(o)}
-> updatingMagnifier: ${e}
`)}return t}get visibleArea(){const e=this.stateManager.visibleArea;return e&&new Oi({rings:[e.map(t=>[t[0],t[1]])],spatialReference:this.spatialReference})}get zoom(){return this.stateManager.zoom??-1}set zoom(e){this.stateManager.zoom=e}get navigating(){var e;return((e=this.mapViewNavigation)==null?void 0:e.interacting)??!1}async hitTest(e,t){return WW(this,e,t)}async takeScreenshot(e){return oZ(this._getScreenshotView(e),e)}toMap(e){if(!this.ready)return null;const t=IP(e)?CP(this,e):e;return this.stateManager.toMap(t)}toScreen(e,t){return this.stateManager.toScreen(e,t)}whenLayerView(e){return super.whenLayerView(e)}graphicChanged(e){this.graphicsView&&this.graphicsView.graphicUpdateHandler(e)}whenReady(){return new Promise(e=>{this.ready?e(this):this._resolveWhenReady.push(e)})}forceDOMReadyCycle(){this.forceReadyCycle()}getDefaultSpatialReference(){var e;return this.map&&"initialViewProperties"in this.map&&this.map.initialViewProperties.spatialReference||((e=this.defaultsFromMap)==null?void 0:e.spatialReference)||null}getDefaultTimeZone(){return Uy(this.map)?this.map.initialViewProperties.timeZone:null}getDefaultTimeExtent(){return Uy(this.map)?this.map.initialViewProperties.timeExtent:null}hasLayerViewModule(e){return BS.hasLayerViewModule(e)}importLayerView(e){return BS.importLayerView(e)}pixelSizeAt(){return this.ready?this.resolution:(F.getLogger(this).error("#pixelSizeAt()","Map view cannot be used before it is ready"),null)}async popupHitTest(e){var l;const t=this.toMap(e),r=await this.hitTest(e),i=this.allLayerViews.toArray().filter(h=>h.clips.every(p=>hC(this,p,e,t))).reverse(),s=new globalThis.Map(i.map(h=>[h.layer.uid,h])),n=[];let o=0,a=0;for(;o<r.results.length||a<i.length;){const h=r.results.at(o);if(h&&h.type!=="graphic"){++o;continue}const p=s.get((l=(h==null?void 0:h.layer)??(h==null?void 0:h.graphic.layer))==null?void 0:l.uid);if((!h||p)&&a<i.length&&i.at(a)!==p){const f=i.at(a);"fetchPopupFeaturesAtLocation"in f&&n.push({mapPoint:t,layerView:f}),++a}else h&&(n.push({graphic:h.graphic,layerView:p}),++o)}return{hits:n,location:t}}requestUpdate(){this.ready&&this.frameTask.requestUpdate()}async validate(){let e=gZ(this.type);if(A("safari")&&A("safari")<9&&(e=new I("mapview:browser-not-supported","This browser is not supported by MapView (Safari < 9)",{type:"safari",requiredVersion:9,detectedVersion:A("safari")})),e!=null)throw F.getLogger(this).warn("#validate()",e.message),e}loadAsyncDependencies(){return GY()}_getDefaultViewpoint(){var v;const{constraints:e,initialExtent:t,map:r,padding:i,size:s}=this;if(!e)return null;const n=r&&"initialViewProperties"in r?r.initialViewProperties:void 0,o=this.stateManager.getUserStartupOptions(this.size),a=n==null?void 0:n.viewpoint,l=((v=a==null?void 0:a.targetGeometry)==null?void 0:v.extent)??t,h=l==null?void 0:l.center,p=(a==null?void 0:a.rotation)??0,f=(a==null?void 0:a.scale)||l&&mm(l,[s[0]-i.left-i.right,s[1]-i.top-i.bottom]),m=o.center??h,y=o.rotation??p,_=o.scale??f;return m&&_?new Ar({targetGeometry:m,scale:_,rotation:y}):null}_startup(){var o;this.timeline.begin("MapView Startup");const e=this._getDefaultViewpoint();this.stateManager.startup(e,this.size,this.spatialReference,(o=this.defaultsFromMap.extent)==null?void 0:o.center),this.graphics.owner=this;const t=new uI(this.surface,{canvas:this.renderCanvas,contextOptions:{disabledExtensions:this.deactivatedWebGLExtensions,debugWebGLExtensions:this.debugWebGLExtensions},renderingOptions:this.renderingOptions,timeline:this.timeline});this.stage=t,this._magnifierView=new fI,this._magnifierView.magnifier=this.magnifier,this._gridView=new mI;const r=new dI({view:this});this._set("labelManager",r);const i=new Yq({view:this});this._set("animationManager",i);const s=new pI({view:this,animationManager:i});this._set("mapViewNavigation",s),this._setupSpatialReferenceDependentProperties(),this.addHandles([this.rootLayerViews.on("change",()=>this._updateStageChildren()),t.on("webgl-error",a=>this.fatalError=a.error),X(()=>this.stationary,a=>t.stationary=a,jt),X(()=>this.background,a=>{t.backgroundColor=a==null?void 0:a.color,this._magnifierView.backgroundColor=a==null?void 0:a.color},jt),X(()=>this.magnifier,a=>this._magnifierView.magnifier=a,jt),X(()=>this.grid,a=>this._gridView.grid=a,jt),X(()=>this.renderingOptions,a=>t.renderingOptions=a,jt),X(()=>this.highlights.items.map(a=>({name:a.name,options:{fillColor:a.color,haloColor:a.haloColor,fillOpacity:a.fillOpacity,haloOpacity:a.haloOpacity,haloWidth:a.haloWidth,haloBlur:a.haloBlur}})),()=>{t.highlightGradient=VW(t.highlightGradient,this.highlights.items)},jt),X(()=>this.state.id,()=>t.state=this.state,jt)],"map-view"),this._updateStageChildren();const n=this._resolveWhenReady;this._resolveWhenReady=[],n.forEach(a=>a(this)),this.timeline.end("MapView Startup"),this.frameTask.start(),this._set("ready",!0)}_teardown(){this._destroySpatialReferenceDependentProperties(),this.removeHandles("map-view"),this.mapViewNavigation.destroy(),this._set("mapViewNavigation",null),this.animation=null,this.animationManager.destroy(),this._set("animationManager",null),this.layerViewManager.clear(),this.labelManager.destroy(),this._magnifierView.destroy(),this._gridView.destroy(),this.stage.destroy(),this.stage=null,this._set("graphicsView",null),this._magnifierView=null,this._gridView=null,this._set("labelManager",null),this._set("mapViewNavigation",null),this.graphics.owner=null,this.frameTask.stop(),this.stationaryManager.clear(),this._set("ready",!1),this.stateManager.teardown()}_updateStageChildren(){this.stage.removeAllChildren(),this.rootLayerViews.forEach(t=>{this.stage.addChild(t.container)});const e=this.graphicsView;this.stage.addChild(e.container),this.stage.addChild(this._magnifierView),this.stage.addChild(this._gridView)}_setupSpatialReferenceDependentProperties(){const e=new rW(mF.create({spatialReference:this.spatialReference,size:512,numLODs:36}));this._set("featuresTilingScheme",e);const t=new cI({view:this,graphics:this.graphics,requestUpdateCallback:()=>this.requestUpdate(),container:new hI(e)});this._set("graphicsView",t)}_destroySpatialReferenceDependentProperties(){const e=this.graphicsView;this._set("graphicsView",null),e.destroy(),this._set("featuresTilingScheme",null)}_getScreenshotView(e){var n;const{allLayerViews:t,padding:r,size:i,stage:s}=this;return{allLayerViews:t,backgroundColor:e!=null&&e.ignoreBackground?null:(n=this.background)==null?void 0:n.color,padding:r,size:i,stage:s}}_spatialReferenceChanged(e){if(this.ready){this.frameTask.stop();for(const t of this.allLayerViews)t.processDetach();this._destroySpatialReferenceDependentProperties(),this.stateManager.changeSpatialReference(e),this.stage.state=this.state,this._setupSpatialReferenceDependentProperties();for(const t of this.allLayerViews)t.processAttach();this.frameTask.requestFrame(),this.frameTask.start(),this._updateStageChildren()}}};se.type="2d",c([d({constructOnly:!0})],se.prototype,"deactivatedWebGLExtensions",void 0),c([d({constructOnly:!0})],se.prototype,"debugWebGLExtensions",void 0),c([d({readOnly:!0})],se.prototype,"featuresTilingScheme",void 0),c([d({readOnly:!0})],se.prototype,"graphicsTileStore",null),c([d()],se.prototype,"graphicsView",void 0),c([d()],se.prototype,"constraintsInfo",null),c([d()],se.prototype,"initialExtentRequired",null),c([d()],se.prototype,"labelManager",void 0),c([d({type:dm,nonNullable:!0})],se.prototype,"navigation",void 0),c([d({constructOnly:!0})],se.prototype,"renderCanvas",void 0),c([d()],se.prototype,"renderingOptions",void 0),c([d({constructOnly:!0})],se.prototype,"supersampleScreenshotsEnabled",void 0),c([d({readOnly:!0})],se.prototype,"supportsGround",void 0),c([d()],se.prototype,"defaultsFromMapSettings",null),c([d({readOnly:!0})],se.prototype,"typeSpecificPreconditionsReady",null),c([d({type:jY})],se.prototype,"background",null),c([d()],se.prototype,"center",null),c([d({type:B})],se.prototype,"floors",void 0),c([d()],se.prototype,"grid",void 0),c([d({type:hn})],se.prototype,"highlightOptions",null),c([d()],se.prototype,"map",void 0),c([d()],se.prototype,"padding",null),c([d({readOnly:!0})],se.prototype,"rendering",null),c([d({readOnly:!0})],se.prototype,"resolution",null),c([d()],se.prototype,"scale",null),c([d({constructOnly:!0})],se.prototype,"spatialReferenceLocked",void 0),c([d({readOnly:!0})],se.prototype,"tileInfo",null),c([d({type:SC,readOnly:!0})],se.prototype,"timeline",void 0),c([d({readOnly:!0})],se.prototype,"type",void 0),c([d({readOnly:!0})],se.prototype,"updating",null),c([d({readOnly:!0})],se.prototype,"view2dType",void 0),c([d({readOnly:!0})],se.prototype,"visibleArea",null),c([d()],se.prototype,"zoom",null),c([d({readOnly:!0})],se.prototype,"navigating",null),c([d(),tt(e=>e instanceof aI?e:Ef(lI,e))],se.prototype,"ui",void 0),se=c([S("esri.views.View2D")],se);const zY=se;let lp=class extends zY{constructor(e){super(e),this.view2dType="map"}};c([d({readOnly:!0})],lp.prototype,"view2dType",void 0),lp=c([S("esri.views.MapView")],lp);const VY=lp,BY=new lx({basemap:"topo-vector"});new VY({container:"viewDiv",map:BY,center:[-122.4194,37.7749],zoom:12});export{NK as $,ke as A,u1 as B,nC as C,kw as D,q_ as E,z as F,el as G,af as H,kt as I,V1 as J,Fz as K,Qe as L,Me as M,cT as N,wi as O,St as P,nT as Q,eT as R,ms as S,WE as T,zc as U,B as V,vT as W,soe as X,uf as Y,vn as Z,N as _,rW as a,Ri as a$,$3 as a0,YE as a1,Ve as a2,fs as a3,_n as a4,q$ as a5,qe as a6,_e as a7,su as a8,ae as a9,iK as aA,C as aB,f$ as aC,Ox as aD,Tne as aE,gW as aF,sT as aG,iT as aH,rT as aI,tT as aJ,Ix as aK,av as aL,Rx as aM,Cx as aN,Q2 as aO,Yre as aP,Tee as aQ,P$ as aR,Jd as aS,yl as aT,zp as aU,Ce as aV,xr as aW,i_ as aX,Pr as aY,$e as aZ,Kc as a_,Vo as aa,qx as ab,$I as ac,tre as ad,j7 as ae,nre as af,ore as ag,Xte as ah,Mc as ai,D_ as aj,bi as ak,pt as al,$f as am,ur as an,sre as ao,j as ap,vD as aq,Lte as ar,lm as as,qo as at,Nv as au,um as av,ki as aw,FX as ax,Ba as ay,ne as az,ie as b,yQ as b$,Tl as b0,ti as b1,Xee as b2,Yee as b3,Kee as b4,Ai as b5,Ef as b6,Xr as b7,Oi as b8,Bt as b9,TI as bA,Ku as bB,Af as bC,pX as bD,Le as bE,qf as bF,te as bG,Qc as bH,Z as bI,FA as bJ,Yte as bK,Jte as bL,Gte as bM,kc as bN,Rc as bO,ej as bP,hre as bQ,pQ as bR,fQ as bS,_Q as bT,ND as bU,cre as bV,xA as bW,pG as bX,H as bY,qh as bZ,gQ as b_,X_ as ba,ii as bb,aoe as bc,M$ as bd,JX as be,Be as bf,It as bg,Jh as bh,Fee as bi,iO as bj,Ct as bk,vo as bl,C8 as bm,A as bn,Fo as bo,de as bp,mF as bq,wX as br,oe as bs,me as bt,AQ as bu,oX as bv,tN as bw,ln as bx,T3 as by,Jee as bz,pc as c,jy as c$,mQ as c0,rre as c1,ire as c2,nV as c3,nS as c4,E8 as c5,VX as c6,HX as c7,BX as c8,qX as c9,WQ as cA,ko as cB,Wte as cC,le as cD,TD as cE,_G as cF,gG as cG,Rt as cH,je as cI,xn as cJ,Tn as cK,Ci as cL,dg as cM,Oe as cN,Cp as cO,hg as cP,fg as cQ,Hx as cR,xm as cS,ah as cT,k0 as cU,jee as cV,Ire as cW,Xre as cX,bte as cY,Ac as cZ,jt as c_,WX as ca,ZX as cb,Te as cc,vl as cd,ev as ce,Fte as cf,Wt as cg,rt as ch,cG as ci,vv as cj,q as ck,If as cl,Y7 as cm,Jw as cn,u_ as co,pl as cp,uv as cq,bg as cr,ob as cs,Y9 as ct,J as cu,qt as cv,DQ as cw,FQ as cx,Ste as cy,UQ as cz,E_ as d,UO as d$,YY as d0,oW as d1,d$ as d2,ax as d3,B2 as d4,XJ as d5,goe as d6,Noe as d7,nY as d8,Coe as d9,Cc as dA,dH as dB,CQ as dC,a3 as dD,hG as dE,Qte as dF,lv as dG,Po as dH,z7 as dI,ure as dJ,ir as dK,lre as dL,G7 as dM,GQ as dN,XE as dO,P_ as dP,sL as dQ,Tr as dR,Nf as dS,jO as dT,XB as dU,Al as dV,wH as dW,F1 as dX,Y_ as dY,FB as dZ,RO as d_,Soe as da,Roe as db,woe as dc,joe as dd,_oe as de,Goe as df,uL as dg,s2 as dh,Yc as di,yV as dj,xi as dk,Jre as dl,Lee as dm,Vt as dn,uK as dp,IQ as dq,v$ as dr,dL as ds,Rf as dt,kf as du,C_ as dv,I_ as dw,hL as dx,Mn as dy,nh as dz,qse as e,v_ as e$,jB as e0,LO as e1,FO as e2,X1 as e3,Q1 as e4,$te as e5,FI as e6,fK as e7,nN as e8,il as e9,q6 as eA,o8 as eB,DD as eC,poe as eD,sl as eE,are as eF,DM as eG,Bf as eH,H6 as eI,y6 as eJ,g6 as eK,_6 as eL,cH as eM,sh as eN,Tt as eO,nm as eP,HB as eQ,qB as eR,mH as eS,aE as eT,gX as eU,wf as eV,Pf as eW,Tc as eX,D$ as eY,or as eZ,_N as e_,b_ as ea,_X as eb,l9 as ec,IO as ed,ex as ee,E6 as ef,sH as eg,D6 as eh,UB as ei,DO as ej,fH as ek,LQ as el,Gp as em,gf as en,_f as eo,Xc as ep,cX as eq,fie as er,dc as es,J0 as et,XX as eu,sw as ev,RK as ew,s_ as ex,yf as ey,d6 as ez,ue as f,j1 as f$,T_ as f0,vN as f1,lX as f2,wn as f3,Vy as f4,s3 as f5,KE as f6,dQ as f7,Mee as f8,iF as f9,WY as fA,ZY as fB,jX as fC,r7 as fD,oh as fE,Mte as fF,ys as fG,xte as fH,Ate as fI,So as fJ,nX as fK,yX as fL,koe as fM,Uc as fN,Ne as fO,ZP as fP,Ho as fQ,pee as fR,dl as fS,Vx as fT,Vv as fU,uH as fV,fR as fW,mR as fX,bI as fY,qc as fZ,mp as f_,V8 as fa,Dee as fb,u2 as fc,Ks as fd,Sc as fe,tt as ff,BC as fg,HC as fh,et as fi,Toe as fj,Ooe as fk,qY as fl,Ure as fm,eie as fn,_c as fo,mw as fp,xQ as fq,Yie as fr,oV as fs,ll as ft,$o as fu,gR as fv,GI as fw,cn as fx,bK as fy,UX as fz,$Q as g,hd as g$,lf as g0,sa as g1,m$ as g2,g$ as g3,_$ as g4,eK as g5,yK as g6,Wne as g7,kte as g8,fV as g9,Qf as gA,JY as gB,Ti as gC,Jm as gD,wl as gE,Jc as gF,lt as gG,nH as gH,nQ as gI,QV as gJ,zQ as gK,UV as gL,sb as gM,n3 as gN,o3 as gO,jQ as gP,O6 as gQ,QM as gR,YB as gS,tx as gT,YX as gU,aL as gV,N9 as gW,x as gX,N6 as gY,k9 as gZ,Hf as g_,pn as ga,fee as gb,mne as gc,RQ as gd,xne as ge,fd as gf,Jg as gg,Ca as gh,Lf as gi,Gee as gj,jo as gk,Wre as gl,Nre as gm,xee as gn,l_ as go,tX as gp,eX as gq,pie as gr,sr as gs,CX as gt,m6 as gu,foe as gv,LR as gw,KR as gx,$ie as gy,No as gz,SN as h,Cn as h$,nK as h0,oH as h1,JB as h2,uV as h3,fF as h4,Xf as h5,vX as h6,UE as h7,bX as h8,SX as h9,ef as hA,JQ as hB,RD as hC,TQ as hD,HQ as hE,gK as hF,lT as hG,tl as hH,m_ as hI,yN as hJ,QS as hK,$W as hL,z1 as hM,Hne as hN,aT as hO,$r as hP,sC as hQ,ns as hR,Qd as hS,Kie as hT,_O as hU,Zv as hV,O1 as hW,gl as hX,HV as hY,vO as hZ,$T as h_,mn as ha,nl as hb,lF as hc,Pd as hd,fX as he,W$ as hf,Dte as hg,$8 as hh,S8 as hi,m8 as hj,Qb as hk,J_ as hl,cK as hm,zee as hn,ja as ho,cN as hp,Mi as hq,$L as hr,gL as hs,m3 as ht,Doe as hu,Are as hv,xre as hw,Mj as hx,px as hy,eee as hz,RP as i,Uo as i$,$K as i0,Ok as i1,Nk as i2,Fk as i3,us as i4,ER as i5,lr as i6,_K as i7,am as i8,sm as i9,VB as iA,vH as iB,bH as iC,KV as iD,jx as iE,lL as iF,mL as iG,Qp as iH,BB as iI,kO as iJ,Vp as iK,eH as iL,nt as iM,ZR as iN,SE as iO,dF as iP,FY as iQ,a_ as iR,va as iS,ss as iT,rr as iU,Bx as iV,TX as iW,aK as iX,lK as iY,oK as iZ,iN as i_,om as ia,Rv as ib,hh as ic,dh as id,vj as ie,cm as ig,Iv as ih,vie as ii,EQ as ij,v8 as ik,KK as il,$ee as im,ot as io,GV as ip,VV as iq,gO as ir,HY as is,mc as it,G1 as iu,hO as iv,Q_ as iw,VC as ix,f6 as iy,h6 as iz,ut as j,bm as j$,yi as j0,BQ as j1,gee as j2,dx as j3,B8 as j4,H8 as j5,N_ as j6,WL as j7,XS as j8,lne as j9,yB as jA,gB as jB,NO as jC,Uz as jD,Ic as jE,oT as jF,qne as jG,BL as jH,KL as jI,eh as jJ,oQ as jK,PI as jL,qV as jM,Rw as jN,rne as jO,IX as jP,Ree as jQ,o_ as jR,VK as jS,zK as jT,moe as jU,CR as jV,OR as jW,Pee as jX,QY as jY,Re as jZ,DX as j_,ane as ja,one as jb,nne as jc,cne as jd,une as je,sne as jf,ine as jg,$6 as jh,LM as ji,WM as jj,OQ as jk,ZD as jl,PQ as jm,JD as jn,Cf as jo,HE as jp,Lv as jq,jM as jr,fp as js,YD as jt,g as ju,Mv as jv,kre as jw,Cre as jx,_R as jy,LK as jz,Ht as k,C6 as k$,pw as k0,zt as k1,Sm as k2,zoe as k3,Ei as k4,ooe as k5,SZ as k6,_U as k7,EI as k8,aX as k9,bie as kA,_ie as kB,KS as kC,L8 as kD,BV as kE,rv as kF,iv as kG,of as kH,yx as kI,_ne as kJ,yne as kK,gne as kL,yW as kM,bO as kN,SW as kO,fn as kP,GM as kQ,hn as kR,VW as kS,HW as kT,qW as kU,aj as kV,Ute as kW,yoe as kX,Foe as kY,F6 as kZ,P6 as k_,zk as ka,xf as kb,mX as kc,ad as kd,Ax as ke,N8 as kf,wee as kg,XA as kh,xO as ki,$X as kj,LI as kk,Ete as kl,pm as km,cee as kn,uee as ko,WP as kp,HP as kq,mz as kr,gz as ks,Lu as kt,SP as ku,XU as kv,ere as kw,wie as kx,kD as ky,Tie as kz,vQ as l,WV as l$,cu as l0,lP as l1,Cv as l2,Pl as l3,Wj as l4,TB as l5,Ane as l6,ZK as l7,eO as l8,mO as l9,R6 as lA,zV as lB,yh as lC,Sz as lD,kQ as lE,uX as lF,H$ as lG,Ore as lH,Pre as lI,__ as lJ,W6 as lK,B6 as lL,KB as lM,V6 as lN,Oj as lO,kU as lP,jz as lQ,Nte as lR,aQ as lS,LX as lT,bn as lU,uT as lV,dZ as lW,Bne as lX,TW as lY,fT as lZ,pT as l_,jc as la,Si as lb,Uv as lc,A1 as ld,zP as le,mh as lf,Rte as lg,y$ as lh,PE as li,sX as lj,l3 as lk,qw as ll,kE as lm,pZ as ln,Ite as lo,zo as lp,f7 as lq,VQ as lr,uF as ls,yee as lt,mee as lu,lh as lv,uh as lw,ch as lx,k6 as ly,I6 as lz,$n as m,vee as m$,ql as m0,Ot as m1,J6 as m2,a8 as m3,Ka as m4,Ez as m5,YQ as m6,Q6 as m7,eL as m8,qA as m9,tv as mA,Tz as mB,Gz as mC,Uy as mD,iee as mE,tf as mF,pH as mG,MQ as mH,vK as mI,Oee as mJ,Qre as mK,Pte as mL,Pi as mM,Dne as mN,rC as mO,dee as mP,Une as mQ,Fne as mR,Kse as mS,Xse as mT,Vz as mU,fm as mV,g3 as mW,QX as mX,Lz as mY,Mz as mZ,xz as m_,Ote as ma,Sie as mb,Gc as mc,hB as md,W_ as me,kK as mf,EP as mg,rK as mh,cO as mi,mie as mj,yie as mk,gie as ml,fne as mm,wT as mn,Qse as mo,PY as mp,Ar as mq,ym as mr,uO as ms,dO as mt,bV as mu,Xie as mv,OV as mw,Qie as mx,S6 as my,ree as mz,F as n,ene as n$,Bz as n0,QP as n1,ET as n2,cC as n3,Rne as n4,kne as n5,Nne as n6,Lne as n7,wne as n8,Sne as n9,ioe as nA,uG as nB,BA as nC,sj as nD,GK as nE,Nw as nF,tQ as nG,rQ as nH,Yse as nI,Kte as nJ,zte as nK,Hte as nL,Vte as nM,qte as nN,Bte as nO,Zte as nP,Tte as nQ,roe as nR,_w as nS,jte as nT,Mne as nU,Pne as nV,Gv as nW,Ene as nX,CW as nY,$ne as nZ,ST as n_,bne as na,BW as nb,hs as nc,tV as nd,jv as ne,R8 as nf,_ee as ng,KX as nh,Fc as ni,AS as nj,dz as nk,pz as nl,gg as nm,wQ as nn,eQ as no,zX as np,GX as nq,TL as nr,dU as ns,kP as nt,xR as nu,MR as nv,pU as nw,TZ as nx,ZQ as ny,Ip as nz,c as o,uC as o$,tne as o0,One as o1,Cne as o2,jne as o3,Gne as o4,hne as o5,zne as o6,Vne as o7,mW as o8,vW as o9,F9 as oA,Cz as oB,K7 as oC,ste as oD,nte as oE,tj as oF,bZ as oG,Nc as oH,Dc as oI,Q7 as oJ,hK as oK,zn as oL,uj as oM,cj as oN,Tv as oO,j2 as oP,CY as oQ,t2 as oR,Bee as oS,hW as oT,kee as oU,v9 as oV,YS as oW,eoe as oX,Qne as oY,Xne as oZ,GW as o_,vne as oa,SC as ob,rl as oc,Ine as od,dX as oe,ZV as of,iQ as og,QR as oh,A8 as oi,Uee as oj,W8 as ok,bee as ol,O8 as om,Tg as on,See as oo,sie as op,FV as oq,Eee as or,Cee as os,im as ot,Nee as ou,Uie as ov,qP as ow,JM as ox,K$ as oy,X6 as oz,Bse as p,dv as p$,pne as p0,dne as p1,FW as p2,toe as p3,Jse as p4,t7 as p5,ZM as p6,XV as p7,EN as p8,Hre as p9,P2 as pA,XY as pB,wI as pC,KY as pD,Dre as pE,Zne as pF,WB as pG,Gre as pH,M6 as pI,Rre as pJ,Ra as pK,tie as pL,Aj as pM,kz as pN,NQ as pO,vz as pP,xj as pQ,DK as pR,S3 as pS,x3 as pT,QQ as pU,Vre as pV,XQ as pW,hS as pX,KQ as pY,Iee as pZ,cS as p_,qre as pa,u8 as pb,l8 as pc,_H as pd,Uoe as pe,En as pf,Ioe as pg,Loe as ph,rz as pi,qie as pj,iie as pk,Kre as pl,Fre as pm,zre as pn,jre as po,dK as pp,uie as pq,lie as pr,sK as ps,Lre as pt,Aee as pu,Zre as pv,VU as pw,SB as px,MO as py,WK as pz,hX as q,C$ as q0,wK as q1,Bre as q2,j6 as q3,L6 as q4,uS as q5,Z6 as q6,Qee as q7,tte as q8,loe as q9,t_ as r,I as s,vf as t,noe as u,d as v,S as w,X as x,fj as y,Or as z};
